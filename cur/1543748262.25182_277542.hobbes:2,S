Date: Wed, 08 Dec 2004 08:28:21 -0500
From: Stephen Smalley <>
Subject: Re: 2.6.10-rc2-mm4
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/12/8/94

On Tue, 2004-12-07 at 17:46, Jeff Mahoney wrote:
> In general, this is true. However, there's a case where it's not. During
> the initial filesystem mount, the .reiserfs_priv directory is created by
> reiserfs_xattr_init(). This directory becomes the root of the private
> inode tree, but there is no way to mark it as private until after mkdir
> returns. After it returns, d_instantiate has already been called.
> 
> Therefore, on the first read-write mount, the inode associated with
> .reiserfs_priv will always be on that list. There are a few methods that
> could be added to set the inode private before the d_instantiate, but
> they're all pretty gross. Basically, of all the potential solutions,
> checking IS_PRIVATE in that loop is the simplest.
Ok, thanks for clarifying.  No objection to the patch.
-- 
Stephen Smalley <sds@epoch.ncsc.mil>
National Security Agency
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/