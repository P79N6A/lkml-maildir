Date: Thu, 12 Oct 2006 11:24:49 -0700
From: Andrew Morton <>
Subject: Re: [PATCH] SPI: improve sysfs compiler complaint handling
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/10/12/258

On Thu, 12 Oct 2006 11:08:59 -0700
David Brownell <david-b@pacbell.net> wrote:
> On Wednesday 11 October 2006 6:49 pm, Jeff Garzik wrote:
> 
> > The compiler complains, even with the "(void)".
> 
> > -	(void) device_for_each_child(master->cdev.dev, NULL, __unregister);
> 
> Sure seems like a compiler bug to me.
Seems like a kernel bug to me.  Look at device_del() and weep.  It calls
eighty eight things which can fail, some of which randomly return void but
shouldn't, then drops the overall result on the floor.
So if something failed and you come up and reinsert the device or driver
two days later the kernel collapses in a heap and you don't have a clue
why.
You're just a victim of all this.
Who wrote all this stuff, and what were they thinking?
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/