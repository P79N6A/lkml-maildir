Date: Thu, 13 Oct 2005 20:05:45 +0200
From: Jens Axboe <>
Subject: Re: [PATCH 1/1] indirect function calls elimination in IO eliminate
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/10/13/61

On Thu, Oct 13 2005, Ananiev, Leonid I wrote:
> 
> 
> Fully modular io schedulers and enables online switching between
> them was introduced in Linux 2.6.10 but as a result percentage
> of CPU using by kernel was increased and performance degradation
> is marked on Itanium. A cause of degradation is in more steps
> for indirect IO scheduler type specific function calls.
> 
> The patch eliminates 45 indirect function calls in 16 elevator
> functions. Sysbench fileio benchmark throughput was increased at 2%
> for noop elevator after patching.
I don't really see the patch doing what you describe - the indirect
function calls are the same, what you did was inline the actual elevator
structure in the queue again. This breaks reference counting of said
structure, so it's not really something that can be applied.  I'm
guessing what you saw was a decrease in cache misses, maybe we can do
something about that instead.
Can you say more about the throughput increase? From what to what and on
what hardware?
Oh, and your patch is totally screwed, check your mail setup.
-- 
Jens Axboe
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/