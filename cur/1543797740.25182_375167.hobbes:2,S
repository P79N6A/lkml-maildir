Date: Mon, 12 Dec 2005 12:07:08 +0100
From: Eric Sesterhenn / snakebyte <>
Subject: [PATCH 1/2] Fix ipmi_msghandler compilation without procfs
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/12/12/58

This patch fixes ipmi compilation when procfs is disabled
Signed-off-by: Eric Sesterhenn <snakebyte@gmx.de>
--- linux-2.6.15-rc5/drivers/char/ipmi/ipmi_msghandler.orig	2005-12-08 12:09:54.000000000 +0100
+++ linux-2.6.15-rc5/drivers/char/ipmi/ipmi_msghandler.c	2005-12-08 12:09:02.000000000 +0100
@@ -1529,6 +1529,7 @@ int ipmi_request_supply_msgs(ipmi_user_t
 			      -1, 0);
 }
 
+#ifdef CONFIG_PROC_FS
 static int ipmb_file_read_proc(char *page, char **start, off_t off,
 			       int count, int *eof, void *data)
 {
@@ -1616,6 +1617,7 @@ static int stat_file_read_proc(char *pag
 
 	return (out - ((char *) page));
 }
+#endif
 
 int ipmi_smi_add_proc_entry(ipmi_smi_t smi, char *name,
 			    read_proc_t *read_proc, write_proc_t *write_proc,
@@ -3297,6 +3299,8 @@ EXPORT_SYMBOL(ipmi_get_my_address);
 EXPORT_SYMBOL(ipmi_set_my_LUN);
 EXPORT_SYMBOL(ipmi_get_my_LUN);
 EXPORT_SYMBOL(ipmi_smi_add_proc_entry);
+#ifdef CONFIG_PROC_FS
 EXPORT_SYMBOL(proc_ipmi_root);
+#endif
 EXPORT_SYMBOL(ipmi_user_set_run_to_completion);
 EXPORT_SYMBOL(ipmi_free_recv_msg);
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/