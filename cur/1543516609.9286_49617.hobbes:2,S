Date: Sat, 20 Nov 1999 14:38:40 +0100 (CET)
From: Ingo Molnar <>
Subject: Re: 2.2.14pre5: kmem_grow: Called nonatomically from int - size-128
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/11/20/17

On Thu, 18 Nov 1999, Dominik Kubla wrote:
> > if you put a '*(int *)0=0;' instead of the printk into slab.c then we get
> > an oops + stacktrace of the offending code path.
> > 
> 
> Hmm... nice!  Is there a way to get a stacktrace without forcing an oops?
we could do it, but i believe it should never go above the 'casual hack
not going to be integrated' category, because either we have a bug
somewhere, or not. In production systems we want to crash that process.
> It might be handy to provide some predefined debugging aids which could
> simply be enabled either at compile time (-D__KERNEL_DEBUG__) or with a
> sysctl (that would come handy for support people!).
the right solution is to integrate it into IKD - thats the patch that does
all the nontrivial debugging (and experienced kernel hackers keep it
uptodate with current kernels). Thus normal kernel development doesnt get
bogged down by unnecessery debugging complexity, and still support people
have a choice to get a sophisticated debugging kernel. The 'dynamic
debugging thing via /proc/sys' is i believe an artifact of closed-source
systems, where support typically didnt have access to the source code and
couldnt do recompiles.
nevertheless just changing show_task() or die_if_kernel() to not crash the
the process if called in some special way could indeed be a welcome
addition - but i believe only if it doesnt increase maintainance efforts.
-- mingo
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/