Date: Mon, 21 Mar 2005 03:57:28 -0500
From: Daniel Dickman <>
Subject: question about build.c
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/3/21/25

x86_64 checks if we're building a big kernel to make sure that it's <= 4MB. Should we be doing something similar for i386? Or perhaps we shouldn't be 
imposing this limit on x86_64?
Below is the relevant code diff that I'm asking about.
Thanks,
Daniel
--- linux-2.6.12-rc1-bk1/arch/i386/boot/tools/build.c   2005-03-02 02:38:09.000000000 -0500
+++ linux-2.6.12-rc1-bk1/arch/x86_64/boot/tools/build.c 2005-03-02 02:38:37.000000000 -0500
@@ -150,8 +150,10 @@
         sz = sb.st_size;
         fprintf (stderr, "System is %d kB\n", sz/1024);
         sys_size = (sz + 15) / 16;
-       if (!is_big_kernel && sys_size > DEF_SYSSIZE)
-               die("System is too big. Try using bzImage or modules.");
+       /* 0x40000*16 = 4.0 MB, reasonable estimate for the current maximum */
+       if (sys_size > (is_big_kernel ? 0x40000 : DEF_SYSSIZE))
+               die("System is too big. Try using %smodules.",
+                       is_big_kernel ? "" : "bzImage or ");
         while (sz > 0) {
                 int l, n;
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/