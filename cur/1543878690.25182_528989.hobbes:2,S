Date: Mon, 09 Apr 2007 18:22:10 -0400
From: Dave Dillow <>
Subject: Re: I give up
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/4/9/360

On Mon, 2007-04-09 at 23:35 +0200, Jan Engelhardt wrote:
> On Apr 9 2007 15:38, Gene Heskett wrote:
> >On Monday 09 April 2007, H. Peter Anvin wrote:
> >>Jan Engelhardt wrote:
> >>> dm is on 254 for me.. in opensuse with a 2.6.20 that is. I wonder why
> >>> it even moves around. However, even then, those who use udev and
> >>> device names rather than (major,minor) tuples should not have any
> >>> problem.
> >>
> >>It moves around because someone at some point thought it was a great
> >>idea to assign dynamic majors to core functionality.
> >>
> >What were they smoking, I want some of that!
> 
> Do you actually use udev?
udev doesn't help the problem he is having (and he is using it, since he
is using Fedora).
His problem is that GNU tar stores the device number of the file in a
database that it uses to perform incremental updates, and considers the
file new (and re-dumps it) when the device number changes.
So, when he changes the kernel config, adding any block device that uses
a dynamic major (and is loaded before device-mapper), or goes between
kernels that have the reserve-LANANA numbers patch, his incremental
dumps become full ones because device-mapper gets a different dynamic
major.
-- 
Dave Dillow <dave@thedillows.org>
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/