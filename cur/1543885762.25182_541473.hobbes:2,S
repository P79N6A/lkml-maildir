Date: Tue,  8 May 2007 09:51:16 -0500 (CDT)
From: (Dave Kleikamp)
Subject: [git pull] jfs update
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/5/8/255

Linus,
I added one patch since the last pull request.  This fixes a hang that
has been seen a few times in recent kernels.
Please pull from
git://git.kernel.org/pub/scm/linux/kernel/git/shaggy/jfs-2.6.git for-linus
This will update the following files:
 Documentation/filesystems/jfs.txt |    8 +++++++-
 fs/jfs/inode.c                    |    1 -
 fs/jfs/ioctl.c                    |    2 ++
 fs/jfs/jfs_imap.c                 |    2 ++
 fs/jfs/jfs_inode.c                |   18 ++++++++++++++++++
 fs/jfs/jfs_inode.h                |    1 +
 fs/jfs/jfs_lock.h                 |    2 +-
 fs/jfs/jfs_logmgr.c               |    7 ++++---
 fs/jfs/jfs_txnmgr.c               |    6 +++---
 9 files changed, 38 insertions(+), 9 deletions(-)
through these ChangeSets:
Commit: 05ec9e26be1f668ccba4ca54d9a4966c6208c611 
Author: Dave Kleikamp <shaggy@linux.vnet.ibm.com> Sat, 05 May 2007 14:24:05 -0500 
    JFS: Fix race waking up jfsIO kernel thread
    
    It's possible for a journal I/O request to be added to the log_redrive
    queue and the jfsIO thread to be awakened after the thread releases
    log_redrive_lock but before it sets its state to TASK_INTERRUPTIBLE.
    
    The jfsIO thread should set the state before giving up the spinlock, so
    the waking thread will really wake it.
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>
Commit: 3cbb1c8e1a4787d3dc2951b7615d7bb3788c49a0 
Author: Milind Arun Choudhary <milindchoudhary@gmail.com> Thu, 26 Apr 2007 07:30:29 -0500 
    JFS: use __set_current_state()
    
    use __set_current_state(TASK_*) instead of current->state = TASK_*
    
    Signed-off-by: Milind Arun Choudhary <milindchoudhary@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Dave Kleikamp <shaggy@linux.vnet.ibm.com>
Commit: 3e2221c73cba7d33fd5706f9bc4906ffaf421478 
Author: Dave Kleikamp <shaggy@linux.vnet.ibm.com> Wed, 25 Apr 2007 09:36:20 -0500 
    Copy i_flags to jfs inode flags on write
    
    This mirrors Jan Kara's patches for ext3.  This patch makes sure that
    changes made to inode->i_flags are reflected on disk for jfs.  It also
    moves a call of jfs_set_inode_flags() to be more consistent with where
    jfs_get_inode_flags() is called.
    
    Signed-off-by: Dave Kleikamp <shaggy@linux.vnet.ibm.com>
Commit: ba863a0016a33637acc7888698a5d75096fcec05 
Author: Dave Kleikamp <shaggy@linux.vnet.ibm.com> Fri, 09 Mar 2007 10:27:31 -0600 
    JFS: document uid, gid, and umask mount options in jfs.txt
    
    Signed-off-by: Dave Kleikamp <shaggy@austin.ibm.com>
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/