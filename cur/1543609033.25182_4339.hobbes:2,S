Date: Wed, 7 Nov 2001 10:40:44 +0100
From: Jan Marek <>
Subject: Re: Cannot unlock spinlock... Was: Problem in yenta.c, 2nd edition
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/11/7/257

Hallo l-k,
On Tue, Nov 06, 2001 at 10:40:49PM +0000, David Woodhouse wrote:
> 
> linux@hazard.jcu.cz said:
> >  The last message I got from kernel is:  request_irq: desc->handler->
> > startup(irq)
> 
> > Then problem is in the spin_unlock_irqrestore()???
> 
> > Any ideas, recomendations, suggestions?
> 
> It's dying in an IRQ storm. Something is permanently asserting IRQ 11, and 
> unless you can work out what's doing it and make it stop, the machine will 
> die whenever you enable that IRQ.
> 
> Try this hack, just to make sure:
Your hack is working for me. I got message:
"IRQ storm detected on IRQ 11. Disabling"
and everythink works OK. Spinlock was unlocked, procedure
setup_irq() ended and PCMCIA package works fine...
It is possible to add your patch to the kernel?
But I don't know, what device asserted IRQ 11 to start the IRQ
storm... When I was in the function setup_irq(), I installed the
first routine to work with IRQ 11 in its IRQ queue...
Or maybe will be safe to disable concrete IRQ, when is installed
a new handler for it?
I'm sorry, I'm not kernel programmer at all, I still thinking
about it... Maybe will be my think usefull for you...
> 
> --
> dwmw2
Sincerely
Jan Marek
-- 
Ing. Jan Marek
University of South Bohemia
Academic Computer Centre
Phone: +420-38-7772080
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/