Date: Sat, 03 Mar 2007 21:00:43 +0100
From: Tilman Schmidt <>
Subject: Re: Question on tty line discipline
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/3/3/105

Am 28.02.2007 14:47 schrieb Christopher Meller:
> When the line discipline is set via ioctl from  user space to e.g. N_PPP and the userspace program returns without resetting  the line discipline back to N_TTY, the serial device cannot be used (ENODV) until an appropriate  ioctl (to N_TTY) is performed. Is there any reason for the fact that the line discipline is not reset by the kernel , when closing the device. 
Is that really so? While testing a line discipline I have written
myself (N_GIGASET_M101) I came to the opposite conclusion.
Specifically, when I set the line discipline on eg. /dev/ttyS1 to
N_GIGASET_M101 from the user space daemon I have written for that
purpose, and that user space daemon exits, my line discipline is
removed, ie. its .close method is called. That is true even if I
kill the user space daemon by sending it an uncaught signal.
-- 
Tilman Schmidt                          E-Mail: tilman@imap.cc
Bonn, Germany
Diese Nachricht besteht zu 100% aus wiederverwerteten Bits.
Ungeöffnet mindestens haltbar bis: (siehe Rückseite)
[unhandled content-type:application/pgp-signature]