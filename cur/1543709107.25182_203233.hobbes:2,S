Date: Mon, 1 Mar 2004 12:51:26 -0300 (BRT)
From: Marcelo Tosatti <>
Subject: Re: Ibm Serveraid Problem with 2.4.25
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/3/1/121

On Mon, 1 Mar 2004, Alain Fauconnet wrote:
> Please followup to the list when you've drawn conclusions  about  this
> issue.
> I'm holding a 2.4.25 upgrade of a busy mail server because of this.
We found out the guilty part, its the readahead modifications done by
Chuck Lever in -pre1.
The error is harmless though, you can safely move your server to 2.4.25. 
Its just trying to readahead a page beyond the end device.
The following untested patch on top of 2.4.25 should fix it:
--- mm/filemap.c.orig	2004-03-01 12:47:41.000000000 -0300
+++ mm/filemap.c	2004-03-01 12:48:30.000000000 -0300
@@ -1346,7 +1346,7 @@
 	while (ahead < max_ahead) {
 		unsigned long ra_index = raend + ahead + 1;
 
-		if (ra_index > end_index)
+		if (ra_index >= end_index)
 			break;
 		if (page_cache_read(filp, ra_index) < 0)
 			break;
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/