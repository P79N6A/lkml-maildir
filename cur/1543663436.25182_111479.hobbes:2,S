Date: Thu, 20 Feb 2003 23:19:27 -0800
From: "Martin J. Bligh" <>
Subject: Re: Strange performance change 59 -> 61/62
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/2/21/21

>> I'm comparing 59-mjb6 to 61-mjb1 and notice some strange performance
>> differences that I can't explain ... not a big drop, but odd.
>> ...
>> 
>> 1562 .text.lock.file_table
>> 583 dentry_open
>> 551 get_empty_filp
> 
> The first one here is fget().  That's causing problems on ppc64 as well - the
> machine is spending as long in fget as it is in copy_foo_user() in dbench
> runs.
> 
> One possibility is that we're calling fget() more often than previously,
> although that would be rather odd.  Can you add the below patch, and monitor
> /proc/meminfo:nr_fgets?
Thanks for the patch, sorry it took me so long to get the testing done.
59: 4742165
61: 4743166
Pretty damned close ;-)
> If not that, then maybe some funny cacheline aliasing thing?
Mmm... you mean like something sharing the cacheline with the file lock?
M.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/