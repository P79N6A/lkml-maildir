Date: Tue, 3 Sep 2002 16:49:12 +0930 (CST)
From: Jonathan Woithe <>
Subject: Re: Linux 2.4.18: short dd read from IDE cdrom
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/9/3/32

Hi all
Yesterday I reported a problem to lkml I observed with `dd' and ide cds:
> For a number of years now I have duplicated cds using
>   dd if=/dev/cdrom of=foo.iso
>   cdrecord ... foo.iso
> :
> Today I tried the same trick under 2.4.18 and struck a problem: the kernel
> would not read the complete CD image. ...
After further testing, it seems that turning off dma using "hdparm -d 0
/dev/hdc" allows things to work as expected - the full disk can be read and
the resulting image is intact.  It appears therefore that the problem may
lie in the ide DMA error recovery code.  Alan Cox eluded to this possibility
in Dec 2001 (lkml, 28 Dec 2001, subject "Re: dd cdrom error") but it's not
clear whether the issue was pursued by anyone at that time.  Does anyone
know whether this is now being addressed by Andre in his latest round of
patches via the ac tree, or has already been fixed?
Please CC me any replies.  Thanks.
Regards
  jonathan
-- 
* Jonathan Woithe    jwoithe@physics.adelaide.edu.au                        *
*                    
http://www.physics.adelaide.edu.au/~jwoithe
            *
***-----------------------------------------------------------------------***
** "Time is an illusion; lunchtime doubly so"                              **
*  "...you wouldn't recognize a subtle plan if it painted itself purple and *
*   danced naked on a harpsichord singing 'subtle plans are here again'"    *
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/