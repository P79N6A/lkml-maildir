Date: Tue, 31 Aug 2004 23:16:30 +0300
From: ismail d√∂nmez <>
Subject: Re: K3b and 2.6.9?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/8/31/275

On Mon, 30 Aug 2004 19:29:53 -0700 (PDT), Linus Torvalds
<torvalds@osdl.org> wrote:
> Which implies that the only way to fix it sanely is literally to have K3b
> open the device for writing, and then everything will be happy.
> 
> As far as I can tell, the fix should be a simple one-liner: make sure that
> K3b opens the device with O_RDWR | O_NONBLOCK instead of using O_RDONLY |
> O_NONBLOCK. The fix looks trivial, it's in
> 
>    src/device/k3bdevice.cpp:
>         int K3bCdDevice::openDevice( const char* name );
> 
> (two places).
> 
Checked k3b on CVS and it does this now :
  int flags = O_NONBLOCK;
  if( write )
    flags |= O_RDWR;
  else
    flags |= O_RDONLY;
.....
  fd = ::open( name, flags );
which already fixes the issue. Right?
Cheers,
ismail
-- 
Time is what you make of it
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/