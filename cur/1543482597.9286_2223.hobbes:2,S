Date: Wed, 27 Jan 1999 11:03:30 +0100
From: Thomas Sailer <>
Subject: Re: es1370 mixer problem in 2.2.0
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/1/27/71

Wakko Warner wrote:
> 
> I'm using 2.2.0 (non pre) with an es1370 (Sound Blaster PCI64).
> This is NOT an important problem, I'm just not sure if it is known or not.
> 
> This problem has to do with the 'record' feature (I'm using Xmixer, so I'm
> going to refer to this as the record/play button).
> 
> If synth (/dev/dsp1) is set for play, only the left channel works.  If set
> for record, both do.  Same way with the line in.
Ops, when set for play, both channels should not work 8-)
> If CD is set for play, neither channel works, if set for record, both
> channels do.  Same is true for line1 and line2 (this is the 3 connectors
> inside the machine)
This is actually a feature, not a bug.
The as of yet unsolved problem is that there should be a way
to record from a source without it being relayed to the soundcard
output. So in the future setting a source to record mode may 
turn off it being relayed to the output...
Tom
You may try this:
diff -u -r0.17 es1370.c
--- es1370.c    1999/01/27 09:54:31     0.17
+++ es1370.c    1999/01/27 09:59:39
@@ -874,9 +874,11 @@
                wrcodec(s, 0x13, j & 0xaa);
                wrcodec(s, 0x14, (j >> 8) & 0x17);
                wrcodec(s, 0x15, (j >> 8) & 0x0f);
+#if 0
                i = (j & 0x37f) | ((j << 1) & 0x3000) | 0xc30;
                wrcodec(s, 0x10, i);
                wrcodec(s, 0x11, i >> 8);
+#endif
                return 0;
 
        default:
@@ -2338,6 +2340,8 @@
                wrcodec(s, 0x17, 0); /* CODEC ADC and CODEC DAC use {LR,B}CLK2 and run off the LRCLK2 PLL; program DAC_SYNC=0!!  */
                wrcodec(s, 0x18, 0); /* recording source is mixer */
                wrcodec(s, 0x19, s->mix.micpreamp = 1); /* turn on MIC preamp */
+               wrcodec(s, 0x10, 0x7f);
+               wrcodec(s, 0x11, 0x3f);
                fs = get_fs();
                set_fs(KERNEL_DS);
                val = SOUND_MASK_LINE|SOUND_MASK_SYNTH|SOUND_MASK_CD;
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/