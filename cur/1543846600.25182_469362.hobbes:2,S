Date: Wed, 04 Oct 2006 05:58:07 -0400
From: 	Valdis.Kletnieks@vt ...
Subject: Re: [patch] dynticks core: Fix idle time accounting
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/10/4/85

On Wed, 04 Oct 2006 09:56:57 +0200, Ingo Molnar said:
> 
> * Valdis.Kletnieks@vt.edu <Valdis.Kletnieks@vt.edu> wrote:
> 
> > Even though I have CONFIG_HZ=1000, this ends up generating a synthetic 
> > count that works out to 100 per second.  gkrellm and vmstat are happy 
> > with that state of affairs, but I'm not sure why it came out to 
> > 100/sec rather than 1000/sec.
> 
> that's how it worked for quite some time: all userspace APIs are 
> HZ-independent and depend on USER_HZ (which is 100 even if HZ is 1000).
Nevermind - I missed where fs/proc/proc_misc.c applied jiffies_64_to_clock_t()
to the number before handing it to userspace.  So the numbers *were* being
kept in terms of HZ (as my reading of the code indicated), they just didn't
manage to escape to userspace that way....
[unhandled content-type:application/pgp-signature]