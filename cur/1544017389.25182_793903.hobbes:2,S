Date: Sat, 17 Jan 2009 15:40:06 -0800
From: "H. Peter Anvin" <>
Subject: Re: "eliminate warn_on_slowpath()" change causes many gcc-3.2.3 warnings
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2009/1/17/182

Linus Torvalds wrote:
> 
> Don't do this. That just forces a load off a complex pointer instead, with 
> no upsides. At least if it was
> 
> 	extern const char warn_slowpath_nofmt[];
> 
> it would only load the pointer itself, which is still a fairly  expensive 
> op, but at least doesn't require the extra memory load.
> 
> But you'd be better off jusst making it something like
> 
> 	#define NO_FMT ((const char *)(-1))
> 
> instead, which is really much more obvious, and doesn't need any of that 
> "get a pointer" overhead.
> 
At least on x86, the two ops should be the same cost?
	-hpa
-- 
H. Peter Anvin, Intel Open Source Technology Center
I work for Intel.  I don't speak on their behalf.