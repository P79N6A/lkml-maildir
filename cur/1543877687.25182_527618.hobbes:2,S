Date: Wed, 04 Apr 2007 23:46:29 -0700
From: Jeremy Fitzhardinge <>
Subject: Re: [patch 1/2] Relocate VDSO ELF headers to match mapped location with COMPAT_VDSO
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/4/5/38

Roland McGrath wrote:
> The patch looks nice and clean.  However, it does not relocate the symbol
> table(s) values.  I thought that was done in an earlier version of this I
> saw, but I might be misremembering.  Though not fatal, this is a regression
> from the previous CONFIG_COMPAT_VDSO behavior.  It will show up in things
> like __kernel_* name display in backtraces.
Hm, OK.  It does, but I wasn't sure if it would matter.  It should be
fairly simple to fix up.
>   If with your other patch
> CONFIG_COMPAT_VDSO will become other than a rarely-used compatibility
> option, then this should be fixed.  Note that with your second patch this
> will also break the symbol values in the randomly-located vma vdso;
> non-ancient glibc doesn't care if the vdso isn't mapped where its phdrs
> say, but everything does still care that the symbol tables in an ELF file
> use addresses matching the phdrs in the same file.
> 
I did the second patch because I could, and to see if it would provoke
some comment.  But effectively removing a kernel config option seems
like a good idea to me.
    J
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/