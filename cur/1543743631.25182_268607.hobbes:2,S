Date: Fri, 05 Nov 2004 13:06:37 +0000
From: David Woodhouse <>
Subject: [PATCH] Correctly flush 8250 buffers, notify ldisc of line status changes.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/11/5/75

We weren't flushing the TX FIFO on 8250 uarts when uart_flush_buffer()
was called. This adds a flush_buffer() method to the uart_port
operations and calls it from uart_flush_buffer().
This also adds a method to the line discipline which is called upon line
status changes, and uses the helper function for that to clean up the
uart hardware drivers slightly, removing the explicit wakeup on
delta_msr_wait which is used for TIOCMIWAIT.
I'll be putting together a line discipline which actually needs this
callback shortly.
-- 
dwmw2
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/