Date: Tue, 10 Dec 2002 14:09:12 +0100
From: Stephan von Krawczynski <>
Subject: Re: hidden interface (ARP) 2.4.20 / network performance
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/12/10/69

On Tue, 10 Dec 2002 11:40:18 +0100
Roberto Nibali <ratz@drugphish.ch> wrote:
> > This is unfortunately not sufficient, not even close to. If you really want
> > to have a good idea what is going on you should as well check out what is
> > happening with packet sizes a lot smaller than 1500 (normal mtu). Check
> > data rate an packet loss with packet sizes around 80 bytes or so to get an
> > idea what bothers us :-)
> 
> But this doesn't have anything to do with the hidden patch! It can be 
> multiple things:
> 
> o missing TCP segment offload support
> o inefficient zerocopy DMA support
cannot comment these.
> o IRQ routing problems
no.
> o wrong QoS settings
no.
> Could you please be more specific on what exactly you're trying to 
> achieve? Do you want to load balance an application whose average 
> package size is 80 bytes? How many sustained connections per seconds do 
> you have?
Well, what I am trying to say is this: my experience is that under load with
small sized packets even standard routing/packet forwarding becomes lossy. If I
put NAT and other nice netfilter features on top of such a situation things get
a lot worse (obviously) - no comparison to building the "application" (e.g.
cluster) with routing and hidden-patch (mainly because of its pure simplicity I
guess).
Don't get me wrong: I am pretty content with the hidden-patch and my setup
without NAT. But I wanted to point to the direction of possible further routing
performance improvement in 2.4.X tree. Is it correct that I can expect higher
data-rates (concerning small packets) if using higher HZ ?
Someone selling E3 cards told me he cannot manage loads like these (small
packet stuff) with a stock kernel, and that you _at least_ have to increase HZ
to get acceptable throughput results.
-- 
Regards,
Stephan
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/