Date: Wed, 06 Apr 2005 16:05:51 +0100
From: Catalin Marinas <>
Subject: Re: NOMMU - How to reserve 1 MB in top of memory in a clean way
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/4/6/114

"Richard B. Johnson" <linux-os@analogic.com> wrote:
> 1 Megabyte of DMA RAM should be available using conventional
> means __get_dma_pages(GFP_KERNEL, 0x100) soon after boot.
The problem is that he needs to get this memory from the last MB only,
__get_dma_pages would return pages from ZONE_DMA but this is usually
at the beginning of RAM.
> Or just use mem= on the boot command line. This will tell
> the kernel the extent of memory to use. Any RAM after that
> is available. Your driver can access kernel variable, "num_physpages"
> to find the last page it is supposed to use.
But this means that you would need to modify all the drivers that need
DMA memory. Modifying the zones is actually transparent for the
drivers.
--
Catalin
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/