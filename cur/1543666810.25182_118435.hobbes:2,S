Date: Wed, 19 Mar 2003 10:13:45 -0500
From: chas williams <>
Subject: Re: [ATM] first pass at fixing atm spinlock
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/3/19/104

In message <20030319025734.C35024@sfgoth.com>,Mitchell Blank Jr writes:
>> i dont know.  i believe all of the adapters do a synchronous close.
>I'm really not sure it's that safe.  At the very least the drivers all
>need to make sure that their ->close() excludes their interrupt/bh work
i suppose i could be he-centric.  when the rx and tx close complete you
know you wont be getting anymore traffic in the queues regarding that
vpi/vcc.  i suppose other cards might now have this feature.  some 
drivers just keep a pointer to vcc in a table.  so it they dont use
atm_vcc_lookup() each time they need a receieve then i guess the vcc's
will need some sort of ref counting.  i am generally against this 
scheme, but it could be made to work.
>Great - now we just have to do the same thing for vcc's :-)
actually i think the vcc related code is 'broken'.  since the vcc is
really attached to a struct sock, the vcc code should be more sock-centric.
sock provides ref counting, locks, linking, hash support.  at the time
the atm code was initially written, struct sock might not have been
generic enough.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/