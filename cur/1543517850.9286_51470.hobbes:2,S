Date: Sat, 4 Dec 1999 15:52:45 +0100
From: Martin Mares <>
Subject: Re: PATCH: Fix for lance.c
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/12/4/43

Hi!
> This looks incomplete.
> 
> > -	if (readw(0x000f0102) == 0x5048)  {
> > +	if (isa_readw(0x000f0102) == 0x5048)  {
> >  		static const short ioaddr_table[] = { 0x300, 0x320, 0x340, 0x360};
> >  		int hp_port = (readl(0x000f00f1) & 1)  ? 0x499 : 0x99;
> 
>                                ^^^^^^^^^^^^^^^^^^^^^^
> 
> There are others to fix too.
Thanks for spotting that, this one should be complete:
--- drivers/net/lance.c.mj	Sat Dec  4 15:16:22 1999
+++ drivers/net/lance.c	Sat Dec  4 15:51:58 1999
@@ -437,9 +437,9 @@
 	   There are two HP versions, check the BIOS for the configuration port.
 	   This method provided by L. Julliard, Laurent_Julliard@grenoble.hp.com.
 	   */
-	if (readw(0x000f0102) == 0x5048)  {
+	if (isa_readw(0x000f0102) == 0x5048)  {
 		static const short ioaddr_table[] = { 0x300, 0x320, 0x340, 0x360};
-		int hp_port = (readl(0x000f00f1) & 1)  ? 0x499 : 0x99;
+		int hp_port = (isa_readl(0x000f00f1) & 1)  ? 0x499 : 0x99;
 		/* We can have boards other than the built-in!  Verify this is on-board. */
 		if ((inb(hp_port) & 0xc0) == 0x80
 			&& ioaddr_table[inb(hp_port) & 3] == ioaddr)
				Have a nice fortnight
-- 
Martin `MJ' Mares <mj@ucw.cz> <mj@suse.cz> 
http://atrey.karlin.mff.cuni.cz/~mj/
"Linux hackers are funny people -- they count the time in patchlevels."
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/