Date: Fri, 18 Jan 2008 23:23:27 +0200
From: Adrian Bunk <>
Subject: Re: [2.6.24 patch] x86: allow 64bit setting in Kconfig
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/18/513

On Fri, Jan 18, 2008 at 10:06:33PM +0100, Ingo Molnar wrote:
> 
> * Adrian Bunk <bunk@kernel.org> wrote:
> 
> > > > thx, i've added this to x86.git.
> > > 
> > > this broke "make ARCH=i386 randconfig" from working when there's a 
> > > 64-bit .config present. (it will not properly generate a 32-bit 
> > > config, but still a 64-bit config)
> > 
> > Does it always generate a 64bit .config or randomly a 32bit or 64bit 
> > .config?
> > 
> > As far as I see it's the latter.
> 
> it inherits the existing .config's arch setting - and that's what people 
> expect. I use a tree either in 64-bit mode or in 32-bit mode, fully 
> driven via the .config alone. The Kbuild magic picks up the right arch 
> variant and it all just works fine.
If you think anything was "fully driven via the .config alone" you 
seem to neither understand how it works without my patch nor how it 
works with my patch.
What drives your build without my patch is _not_ the .config but your 
ARCH=i386.
When understand this, you might start understanding why I bang my head 
against the wall each time a "make" fails on a 64bit .config when I try 
to reproduce some compile or section mismatch problem someone reported 
and kconfig automatically forces CONFIG_64BIT=n since I'm on a 32bit 
computer.
Can we please get my patch into 2.6.24 so that we'll get _one_ 
architecture in kconfig and not the current mess with three different 
situations in kconfig based on the ARCH setting (and the 32/64bit of 
your userspace forcing a CONFIG_64BIT setting you have to override with 
ARCH= on the command line)?
> 	Ingo
cu
Adrian
BTW: The correct way to drive your randconfigs (that is not limited to
     to 32/64bit) is to use KCONFIG_ALLCONFIG.
-- 
       "Is there not promise of rain?" Ling Tan asked suddenly out
        of the darkness. There had been need of rain for many days.
       "Only a promise," Lao Er said.
                                       Pearl S. Buck - Dragon Seed