Date: Fri, 17 May 2002 12:32:13 +1000 (EST)
From: Neil Brown <>
Subject: Re: PROBLEM: knfsd misses occasional writes
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/5/16/141

On Thursday May 16, Sverker.Wiberg@uab.ericsson.se wrote:
> Neil Brown wrote:
> > 
> > On Thursday May 16, Sverker.Wiberg@uab.ericsson.se wrote:
> 
> [on soft mount timeouts]
> > > But shouldn't those timeouts become errors over at the clients?
> > 
> > Yes... but "write" won't see an error.  Only 'fsync' or maybe 'close',
> > and many applications ignore errors from these operations.
> 
> How come? Isn't the client side innately synchronous (as RPC clients in
> general)?
Now way!  That would kill performance.
The application writes into the pagecache.  The nfs client, possibly
using  the helper thread like rpciod write asynchronously to the
server.  Data is only flushed on close or fsync or memory presure
or...
I have only a passing knowledge of this stuff though.  I trust Trond
will correct me is I say anything really silly.
> Or is this one of thost thing that are now done differently?
I think it was always this way.
NeilBrown
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/