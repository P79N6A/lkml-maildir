Date: Wed, 19 Mar 2008 16:50:28 -0700
From: "Yu, Fenghua" <>
Subject: RE: [2.6.25-rc5-mm1][regression] ia64: hackbench doesn't finish>12 hour
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/3/19/563

>Which makes me wonder, why did you ever use a semaphore here? Looking
at
>the code its a straight forward mutex. And when you would have used a
>mutex lockdep would have warned about this.
>There is hardly ever a good reason to use semaphores in new code, we're
>trying very hard to get rid of them.
The real issue here is the code path can not go to sleep. If simply 
replacing semaphore with mutex, the issue still happens. First of all we
need to have a lock system which doesn't allow the code go to sleep. We
are 
working on a new patch now.
But one step back, if without considering this sleeping issue, I agree
with 
you that mutex would be a better approach than semaphore.
>Hmm, then again, does ia64 have lockdep?
IA64 doesn't support lockdep yet.
Thanks.
-Fenghua