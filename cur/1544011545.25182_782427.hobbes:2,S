Date: Fri, 19 Dec 2008 19:05:10 +0900
From: Hidehiro Kawai <>
Subject: Re: [PATCH] coredump_filter: enable to change the default filter
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/12/19/54

Hi,
Roland McGrath wrote:
>>Or does the patch change other behaviour?  Say, when mm_init() is
>>called by a kernel thread (current->mm==NULL)?  call_usermodehelper(),
>>for example?
>>
>>If so, then setting init's filter doesn't cover that case.
> 
> Hmm, probably for the kernel thread case mm_init should use
> task_active_pid_ns(current)->child_reaper->mm->flags.
It makes sense.  It also enables us to change coredump_filter for
user mode helpers after the system was booted.
However, we would need a special care for PID namespace if we use
init's coredump_filter as default.  For a process with new PID
namespace and new /proc, writing to /proc/1/coredump_filter doesn't
mean changing default, although it's not a usual operation.
The reason why I suggested the boot parameter way is most users
can change the default easily.  Some users have difficulty to
change init scripts for various reasons.
So I think the boot parameter way is simpler for both users and
kernel developers.
Thanks,
-- 
Hidehiro Kawai
Hitachi, Systems Development Laboratory
Linux Technology Center