Date: Thu, 04 Mar 2004 11:00:16 -0500
From: Aneesh Kumar KV <>
Subject: [PATCH] Alpha ptrace.c
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/3/4/126

This patch was acknowledged by Richard
-aneesh
*** linux-2.6.4-rc2/arch/alpha/kernel/ptrace.c	Thu Mar  4 01:17:04 2004
--- linux-2.6.4-rc2/arch/alpha/kernel/ptrace.c.n	Thu Mar  4 10:55:07 2004
***************
*** 367,378 ****
  		if ((unsigned long) data > _NSIG)
  			break;
  		/* Mark single stepping.  */
  		child->thread_info->bpt_nsaved = -1;
  		clear_tsk_thread_flag(child, TIF_SYSCALL_TRACE);
- 		wake_up_process(child);
  		child->exit_code = data;
  		/* give it a chance to run. */
  		ret = 0;
  		goto out;
  
  	case PTRACE_DETACH:	 /* detach a process that was attached. */
--- 367,378 ----
  		if ((unsigned long) data > _NSIG)
  			break;
  		/* Mark single stepping.  */
  		child->thread_info->bpt_nsaved = -1;
  		clear_tsk_thread_flag(child, TIF_SYSCALL_TRACE);
  		child->exit_code = data;
+ 		wake_up_process(child);
  		/* give it a chance to run. */
  		ret = 0;
  		goto out;
  
  	case PTRACE_DETACH:	 /* detach a process that was attached. */