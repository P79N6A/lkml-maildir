Date: Tue, 29 Jun 2004 09:57:10 -0700
From: David Ashley <>
Subject: Re: Cached memory never gets released [SOLVED!!!]
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/6/29/108

I've located the source of the leak.
Linux is innocent! Sorry for doubting you.
The problem is mozilla/flash allocates shared memory
segments but doesn't get a chance to clean them up properly.
So:
Flash memory leak is present related to japanese fonts and our
particular flash content.
We've installed a watchdog process that kills mozilla and
restarts it once it uses up too much memory.
The watchdog process kills mozilla so mozilla doesn't have an
opportunity to free up its shared memory allocations.
They build up over time:
------ Shared Memory Segments --------
key       shmid     owner     perms     bytes     nattch    status      
0x00000000 3014673   root      666       1920000   0                     
0x00000000 1310738   root      666       1920000   0                     
0x00000000 2162707   root      666       1920000   0                     
0x00000000 5537812   root      666       1920000   0                     
0x00000000 3866645   root      666       1920000   0                     
0x00000000 4718614   root      666       1920000   0                     
When I ipcrm these the cached memory goes back down to normal levels.
Thanks for everyone who responded, and sorry for wasting everyone's time.
-Dave
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/