Date: Mon, 13 Mar 2000 00:49:18 +0300
From: Hans Reiser <>
Subject: Re: patch: reiserfs for 2.3.49
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/3/13/109

Alexander Viro wrote:
> I couldn't care less about the speed of your code. Sorry if it sounds
> rude, but that's it. I _do_ care about the cost of maintaining it during
> the VFS changes. Sorry, if your idea of recent changes is
> 2.1.130--2.2.5... See the problem? It means that large sections of code
> are unmaintained for _long_.
Alexander, if you tell us what you want done when making VFS changes we will do
it for you. You don't need to take the responsibility for working on reiserfs
code you dislike if you don't want it.  Truly.  You can go on using ext2 and
telling all your friends to use ext2, and when you change VFS just let us know.
On the other hand, I am very happy to get flames from you which are specific in
what they complain of.  It is bedtime for me now, but I am cc'ing the below to
Vladimir and Alexei in Russia.  It would be nice if you would frame your remarks
in the form of: you do A, B is the right thing, or A is bad because of such and
such, rather than you do A, you are clueless.
The first forms lead to a faster fix.  If fix is your objective.
Hans
> Do you have anybody who would understand what
> and how can be called by VFS? Yes or no? I went to look at rename() for
> one reason - it's the trickiest part of the namespace interface. And you
> have it wrong _for_ _2.2_. Want something simpler? Tell me please, what
> kind of call did you expect when you placed the following
> +    else if (S_ISDIR(inode->i_mode)) {
> +       inode->i_op = &reiserfs_dir_inode_operations;
> +       if (dir->i_mode & S_ISGID)
> +           inode->i_mode |= S_ISGID;
> +    }
> +    else if (S_ISLNK(inode->i_mode))
> +       inode->i_op = &reiserfs_symlink_inode_operations;
> into ->mknod()? Not to mention the fact that first chunk would royally
> screw you up if it would ever be called (check the code above - you don't
> set the directory in proper way), but what on the earth could be done by
> the latter? Let's see - if VFS would ever pass such call, what would you
> do? You see that there is a missing piece of information, don't you?
> Sorry, but do you actually have a single person in the team who would
> understand WTF code in reiserfs/namei.c does? I mean, just on the API
> level... And I have a nasty feeling that ->truncate() has a bunch of
> problems too.
-- 
You can get ReiserFS at 
http://devlinux.org/namesys,
 and customizations and
industrial grade support at reiser@idiom.com.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/