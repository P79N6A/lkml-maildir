Date: Thu, 26 Jan 2006 14:17:53 -0800
From: "Aleksey Gorelov" <>
Subject: RE: USB host pci-quirks
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/1/26/305

>-----Original Message-----
>From: linux-kernel-owner@vger.kernel.org 
>[mailto:linux-kernel-owner@vger.kernel.org] On Behalf Of Oskar Senft
>Sent: Thursday, January 26, 2006 3:03 AM
>To: linux-kernel@vger.kernel.org
>Subject: USB host pci-quirks
>
>Hi all!
>
>I'm currently working with Linux in a hardware virtualization
>environment (L4 microkernel). During tests, we discovered, 
>that there is
>some incosistency in the kernel configuration dependencies:
>
>the file "drivers/usb/host/pci-quirks.c" is added to the kernel as soon
>as PCI support is activated, even if USB support is completely 
>disabled.
>
>We discovered this issue while trying to run multiple Linux instances
>simultaneously.
>
>Is there a special need, that the "drivers/usb/host/pci-quirks.c" is
>compiled into the kernel even if USB support is disabled?
  Yes, there is. USB handoff is necessary even if USB support is
disabled completely in kernel. In fact, initially early usb handoff code
was under pci, but since USB drivers do handoff anyway, it was decided
to move everything into usb with a goal of merging them together. 
  Just search for USB handoff in kernel archives.
Thanks,
Aleks.
>
>I suggest the attached patch to resolve that problem. The file then is
>only included if PCI and USB support is enabled.
>
>Best regards,
>Oskar.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/