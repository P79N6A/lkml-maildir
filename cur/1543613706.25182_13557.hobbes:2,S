Date: Tue, 18 Dec 2001 10:47:22 +0100
From: Peter Wächtler <>
Subject: Re: Turning off nagle algorithm in 2.2.x and 2.4.x kernels?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/12/18/33

"Ahmed, Zameer" schrieb:
> 
> Hi,
>         Is there a way to turn off nagle compression in the kernel for 2.2.x
> and 2.4.x kernels? For the same custom app used under Solaris and Linux.
> Turning off nagle algorithm boosted perf on Solaris, I tried commenting out
> 
> #bool 'IP: Disable NAGLE algorithm (normally enabled)' CONFIG_TCP_NAGLE_OF
> 
> from the net/ipv4/Config.in 2.2.19 kernel and still the degradation in
> network performance for packts in midsize persists
> I tried the 2.4.16 kernel. This gave me very slight improvement, but not
> quite what is expected.
> 
there is a setsockopt() - apply it to the fd returned from accept()
man 7 tcp
SOCKET OPTIONS
       To  set  or get a TCP socket option, call getsockopt(2) to
       read or setsockopt(2) to write the option with the  socket
       family  argument set to SOL_TCP.  In addition, most SOL_IP
       socket options are valid on TCP sockets. For more informa­
       tion see ip(7).
       TCP_NODELAY
              Turn the Nagle algorithm off. This means that pack­
              ets are always sent as  soon  as  possible  and  no
              unnecessary  delays  are introduced, at the cost of
              more packets in the  network.  Expects  an  integer
              boolean flag.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/