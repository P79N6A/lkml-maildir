Date: Wed, 19 Jul 2000 19:45:14 -0300 (BRT)
From: Christian Robottom Reis <>
Subject: Re: sard-0.6 released
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/7/19/91

On Mon, 17 Jul 2000, Stephen C. Tweedie wrote:
> Hi all,
> 
> sard-0.6 is being uploaded to
> 
> 	ftp.uk.linux.org:/pub/linux/sct/fs/profiling/
I've attached a small context diff that should be applied to
linux/drivers/block if you want modules to work after applying the sar
patch included.
In my particular case sr_mod.c and sd_mod.c required a couple of symbols
that should be exported but weren't; depmod -e -a of course complained of
unresolved symbols. I haven't checked to see if other files pulled in
other symbols, and please note that I have no idea if this is the correct
fix (and would love to know if it isn't); it does however WFM (tm).
Cheers,
--
/\__ Christian Reis exists solely to answer kiko@async.com.br
\  / Senior Engineer, Async Software Development Inc.
 \/  
http://async.com.br/~kiko
 | 55 16 274 4311
*** Makefile.orig	Wed Jul 19 19:31:56 2000
--- Makefile	Wed Jul 19 19:35:45 2000
***************
*** 20,29 ****
  
  
  L_TARGET := block.a
! L_OBJS   := genhd.o
  M_OBJS   :=
  MOD_LIST_NAME := BLOCK_MODULES
! LX_OBJS := ll_rw_blk.o
  MX_OBJS :=
  
  ifeq ($(CONFIG_MAC_FLOPPY),y)
--- 20,29 ----
  
  
  L_TARGET := block.a
! L_OBJS   := 
  M_OBJS   :=
  MOD_LIST_NAME := BLOCK_MODULES
! LX_OBJS := ll_rw_blk.o genhd.o
  MX_OBJS :=
  
  ifeq ($(CONFIG_MAC_FLOPPY),y)
*** genhd.c.orig	Wed Jul 19 19:26:08 2000
--- genhd.c	Wed Jul 19 19:35:47 2000
***************
*** 54,59 ****
--- 54,61 ----
  struct gendisk *gendisk_head = NULL;
  struct gendisk *major_gendisk[MAX_BLKDEV] = {0,};
  
+ EXPORT_SYMBOL(major_gendisk);
+ 
  static int current_minor = 0;
  extern int *blk_size[];
  extern void rd_load(void);
*** ll_rw_blk.c.orig	Wed Jul 19 19:35:43 2000
--- ll_rw_blk.c	Wed Jul 19 19:35:24 2000
***************
*** 1269,1274 ****
--- 1269,1275 ----
  };
  
  EXPORT_SYMBOL(io_request_lock);
+ EXPORT_SYMBOL(req_finished_io);
  EXPORT_SYMBOL(end_that_request_first);
  EXPORT_SYMBOL(end_that_request_last);
  EXPORT_SYMBOL(blkelv_ioctl);