Date: 11 Oct 2005 10:06:33 +0200
From: Andi Kleen <>
Subject: Re: [PATCH] x86-64: Fix bad assumption that dualcore cpus have synced TSCs
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/10/11/39

"Vladimir B. Savkin" <master@sectorb.msk.ru> writes:
> On Mon, Oct 10, 2005 at 08:19:42PM +0200, Jonas Oreland wrote:
> > Hi,
> > 
> > check 
http://bugzilla.kernel.org/show_bug.cgi?id=5283
> 
> Excuse me for possibly dumb question, but is it safe to leave TSCs
> unsynchronized when using other time source?
> How will other subsystems e.g. traffic queueing disciplines react?
They might see hickups, but normally they all have relatively 
benign failure modes so I wouldn't worry too much.
If you use it on a Opteron with frequency scaling and multiple sockets
it would be safer to patch them to use do_gettimeofday() or better
monotonic_clock(), because the differences can be very large there
(CPUs running with completely different frequencies). Drawback would
be that it would be slower. On systems without frequency scaling
you would likely only see problems if at all after a long uptime.
For some subsystems it is ok, e.g. the scheduler which also uses
TSCs especially deals with unsynchronized clocks.
-Andi
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/