Date: Wed, 29 Mar 2000 10:25:41 +0200
From: Vojtech Pavlik <>
Subject: Re: Timestamp counters on SMP
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/3/29/23

On Tue, Mar 28, 2000 at 07:45:43PM -0800, H. Peter Anvin wrote:
> > Umm, Thank You! 
> > That was indeed the second question:-)
> > 
> > The first one was what are they?
> > 
> > My only gripe is with software which assumes that all TSC's have the
> > same rate and claims to be working all the time. If it  works on 80386,
> > it can work with different TSC's.  If it  works on 80386 and does not
> > work with different TSC's, then it is broken.
> > 
> 
> TSC's *DO* have the same rate (which varies from machine to machine,
> but on the same machine).  They are high-precision realtime clocks.
Not really. There are SMP machines with different speed CPUs but same
bus speed. This is somewhat crazy, but allowed. And, most importantly,
there are notebooks which change the CPU speed and voltage (and the TSC
speed as well), depending on the load. This is a much bigger problem.
I'm not sure how well this behavior is detectable (it sure is on the
SMP, but don't know about the notebooks, they'll boot at full speed),
and whether the right solution would be to take it all into account or
simply disable TSC usage (and reporting via /proc/cpuinfo) in case
either of the conditions exists.
-- 
Vojtech Pavlik
SuSE Labs
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/