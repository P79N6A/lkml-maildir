Date: Sun, 2 Nov 2003 08:58:19 +0000
From:  viro@parcelfa ...
Subject: Re: /proc/[0-9]*/maps where did the (deleted) status go?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/11/2/15

On Sun, Nov 02, 2003 at 12:47:39AM -0800, Andrew Morton wrote:
> This patch (against 2.6) will restore the old 2.4 behaviour.  I'll scoot
> the 2.4 equiv over to Marcelo.
> 
> diff -puN fs/proc/task_mmu.c~proc-pid-maps-output-fix fs/proc/task_mmu.c
> --- 25/fs/proc/task_mmu.c~proc-pid-maps-output-fix	2003-11-02 00:38:26.000000000 -0800
> +++ 25-akpm/fs/proc/task_mmu.c	2003-11-02 00:38:30.000000000 -0800
> @@ -106,7 +106,7 @@ static int show_map(struct seq_file *m, 
>  		if (len < 1)
>  			len = 1;
>  		seq_printf(m, "%*c", len, ' ');
> -		seq_path(m, file->f_vfsmnt, file->f_dentry, " \t\n\\");
> +		seq_path(m, file->f_vfsmnt, file->f_dentry, "");
>  	}
>  	seq_putc(m, '\n');
>  	return 0;
It's still wrong - the real bug is in seq_path(); the thing should *not*
try to escape anything in " (deleted)" part.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/