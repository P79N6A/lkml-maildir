Date: Fri, 25 Jan 2008 12:16:57 -0500
From: 	Valdis.Kletnieks@vt ...
Subject: Re: [PATCH] Introduce softpanic
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/25/418

On Fri, 25 Jan 2008 16:26:45 +0100, Jiri Kosina said:
> On Fri, 25 Jan 2008, Bodo Eggert wrote:
> 
> > Enabling this option changes a hard panic on boot errors to a
> > soft panic, which does not stop the system completely.
> > You can still scroll the screen and read the messages.
> 
> Hi Bodo,
> 
> if you are willing to put some effort into the ability to scroll the 
> console after panic, it might be worthwile to look making the keyboard 
> driver work even after panic (i.e. poll the keyboard, rather than relying 
> on interrupts).
> 
> That has significantly smaller potential of breaking because the system is 
> expected to be dead after panic (watchdogs, broken data structures in 
> memory, etc).
I think Bodo is trying to address one specific (but quite common) corner
case, where we currently panic() only because there's nothing else that
makes sense - if we can't find the root fs, we're hosed.  But (barring *other*
oops/etc issues), we're still up and running, our data structures are intact,
and there's no real reason we can't use such kernel services as we want (such
as the screen scroller) to help the sysadmin figure out what he misconfigured.
If we were trying to do a *general case* handler for post-panic, yes, we'd
want to do the polled keyboard and all that....
[unhandled content-type:application/pgp-signature]