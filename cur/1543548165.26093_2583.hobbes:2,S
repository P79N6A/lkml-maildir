Date: Fri, 08 Sep 2000 23:50:32 -1100
From: Daniel Stone <>
Subject: [OMG] test8-pre6 horribly, awfully screwed!
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/9/8/49

OK.
When I boot up, I have a netfilter init script. It loads many netfilter
modules, among them, ipt_LOG, ipt_state, and ipt_limit. When they load,
whammo, instant OOPS.
ip_conntrack_irc is also among them.
want to lsmod? oops.
want to cat /proc/modules? oops.
want to rmmod? oops.
etc
test7-pre4 also seemed to have this obscene breakage, and test8-pre[123456]
seems to have it as well. Although, seeing as no-one else has reported it,
it certainly seems to be me. I've attached OOPS reports from attempting to
load ip_conntrack_irc, lsmod'ing and cat'ing /proc/modules - in that order.
The ones for ipt_{LOG,state,limit} are a leeetle harder to get ... I'll post
them later, as I get them.
I'm running:
woody (Debian)
test8-pre6 (own)
modutils 2.3.15 (own)
ksymoops 2.3.4 (own)
gcc 2.95.2 (Debian)
binutils 2.10.0.24-1 (Debian)
Only too happy to provide any other pertinent information, if it can make
this bloody stuff die quietly yet agonisingly painfully.
:) d
(yes, I did specify no ksyms as ksymoops oopsed, as did cat /proc/ksyms. go
figure).
--
Daniel Stone
Kernel Hacker (or at least has aspirations to be)
daniel@dustpuppy.ods.org
http://dustpuppy.ods.org
ksymoops 2.3.4 on i586 2.4.0-test8.  Options used
     -V (default)
     -K (specified)
     -l /proc/modules (default)
     -o /lib/modules/2.4.0-test8/ (default)
     -m /usr/src/linux/System.map (default)
No modules in ksyms, skipping objects
No ksyms, skipping lsmod
Unable to handle kernel paging request at virtual address 00001b12
c0211bd5
*pde = 00000000
Oops: 0000
CPU:    0
EIP:    0010:[<c0211bd5>]
Using defaults from ksymoops -t elf32-i386 -a i386
EFLAGS: 00010297
eax: 00001b12   ebx: c19ef009   ecx: 00001b12   edx: fffffffe
esi: ffffffff   edi: c1a1df30   ebp: ffffffff   esp: c1a1deec
ds: 0018   es: 0018   ss: 0018
Process modprobe (pid: 151, stackpage=c1a1d000)
Stack: c28cfc54 c28cf000 00000000 00000009 c1a1df84 00000000 0000000a c0211d8c 
       c19ef000 c021d379 c1a1df24 c0116f83 c19ef000 c021d372 00000008 00001b11 
       00001b12 c28cf6d0 00000c00 00000c00 c19ef000 00001000 00000000 c0141cce 
Call Trace: [<c28cfc54>] [<c28cf000>] [<c0211d8c>] [<c021d379>] [<c0116f83>] [<c021d372>] [<c28cf6d0>] 
       [<c0141cce>] [<c013ffb8>] [<c0128dd6>] [<c0108d83>] 
Code: 80 38 00 74 07 40 4a 83 fa ff 75 f4 29 c8 8b 54 24 14 89 c6 
>>EIP; c0211bd5 <vsprintf+1a9/34c>   <=====
Trace; c28cfc54 <END_OF_CODE+25f33a4/????>
Trace; c28cf000 <END_OF_CODE+25f2750/????>
Trace; c0211d8c <sprintf+14/1898>
Trace; c021d379 <call_spurious_interrupt+5b81/69c0>
Trace; c0116f83 <get_ksyms_list+5f/e4>
Trace; c021d372 <call_spurious_interrupt+5b7a/69c0>
Trace; c28cf6d0 <END_OF_CODE+25f2e20/????>
Trace; c0141cce <ksyms_read_proc+1a/34>
Trace; c013ffb8 <proc_file_read+cc/1a4>
Trace; c0128dd6 <sys_read+96/ac>
Trace; c0108d83 <system_call+33/40>
Code;  c0211bd5 <vsprintf+1a9/34c>
0000000000000000 <_EIP>:
Code;  c0211bd5 <vsprintf+1a9/34c>   <=====
   0:   80 38 00                  cmpb   $0x0,(%eax)   <=====
Code;  c0211bd8 <vsprintf+1ac/34c>
   3:   74 07                     je     c <_EIP+0xc> c0211be1 <vsprintf+1b5/34c>
Code;  c0211bda <vsprintf+1ae/34c>
   5:   40                        inc    %eax
Code;  c0211bdb <vsprintf+1af/34c>
   6:   4a                        dec    %edx
Code;  c0211bdc <vsprintf+1b0/34c>
   7:   83 fa ff                  cmp    $0xffffffff,%edx
Code;  c0211bdf <vsprintf+1b3/34c>
   a:   75 f4                     jne    0 <_EIP>
Code;  c0211be1 <vsprintf+1b5/34c>
   c:   29 c8                     sub    %ecx,%eax
Code;  c0211be3 <vsprintf+1b7/34c>
   e:   8b 54 24 14               mov    0x14(%esp,1),%edx
Code;  c0211be7 <vsprintf+1bb/34c>
  12:   89 c6                     mov    %eax,%esi
*********************************************************
ksymoops 2.3.4 on i586 2.4.0-test8.  Options used
     -V (default)
     -K (specified)
     -l /proc/modules (default)
     -o /lib/modules/2.4.0-test8/ (default)
     -m /usr/src/linux/System.map (default)
No modules in ksyms, skipping objects
No ksyms, skipping lsmod
Unable to handle kernel paging request at virtual address 00001b17
c0116e9b
*pde = 00000000
Oops: 0000
CPU:    0
EIP:    0010:[<c0116e9b>]
Using defaults from ksymoops -t elf32-i386 -a i386
EFLAGS: 00010213
eax: 00001b0f   ebx: c0726076   ecx: ffffffff   edx: c28cfc48
esi: c28c6000   edi: c0726074   ebp: 00000f8a   esp: c0749ef0
ds: 0018   es: 0018   ss: 0018
Process cat (pid: 444, stackpage=c0749000)
Stack: 00000c00 00000000 c0726000 00001000 c0749f0c 0804c324 c28c6000 33322020 
       34303200 c0cc2800 0804c324 00000001 c0748000 0804b318 0804c000 bffffa3c 
       c0e4e83c 00000286 c026bce0 c026bf78 00000000 00000000 00000726 c0141c81 
Call Trace: [<c28c6000>] [<c0141c81>] [<c013ffb8>] [<c0128dd6>] [<c0108d83>] 
Code: 8b 70 08 89 f7 31 c0 f2 ae f7 d1 49 89 4c 24 14 39 cd 72 65 
>>EIP; c0116e9b <get_module_list+257/2e0>   <=====
Trace; c28c6000 <END_OF_CODE+25e9750/????>
Trace; c0141c81 <modules_read_proc+15/48>
Trace; c013ffb8 <proc_file_read+cc/1a4>
Trace; c0128dd6 <sys_read+96/ac>
Trace; c0108d83 <system_call+33/40>
Code;  c0116e9b <get_module_list+257/2e0>
0000000000000000 <_EIP>:
Code;  c0116e9b <get_module_list+257/2e0>   <=====
   0:   8b 70 08                  mov    0x8(%eax),%esi   <=====
Code;  c0116e9e <get_module_list+25a/2e0>
   3:   89 f7                     mov    %esi,%edi
Code;  c0116ea0 <get_module_list+25c/2e0>
   5:   31 c0                     xor    %eax,%eax
Code;  c0116ea2 <get_module_list+25e/2e0>
   7:   f2 ae                     repnz scas %es:(%edi),%al
Code;  c0116ea4 <get_module_list+260/2e0>
   9:   f7 d1                     not    %ecx
Code;  c0116ea6 <get_module_list+262/2e0>
   b:   49                        dec    %ecx
Code;  c0116ea7 <get_module_list+263/2e0>
   c:   89 4c 24 14               mov    %ecx,0x14(%esp,1)
Code;  c0116eab <get_module_list+267/2e0>
  10:   39 cd                     cmp    %ecx,%ebp
Code;  c0116ead <get_module_list+269/2e0>
  12:   72 65                     jb     79 <_EIP+0x79> c0116f14 <get_module_list+2d0/2e0>
*************************************************************
ksymoops 2.3.4 on i586 2.4.0-test8.  Options used
     -V (default)
     -K (specified)
     -l /proc/modules (default)
     -o /lib/modules/2.4.0-test8/ (default)
     -m /usr/src/linux/System.map (default)
No modules in ksyms, skipping objects
No ksyms, skipping lsmod
Unable to handle kernel paging request at virtual address 00001b17
c0116492
*pde = 00000000
Oops: 0000
CPU:    0
EIP:    0010:[<c0116492>]
Using defaults from ksymoops -t elf32-i386 -a i386
EFLAGS: 00010286
eax: 00001b0f   ebx: fffffffe   ecx: ffffffff   edx: ffffffff
esi: c28cfc48   edi: c071c000   ebp: 00000000   esp: c0749f84
ds: 0018   es: 0018   ss: 0018
Process lsmod (pid: 445, stackpage=c0749000)
Stack: fffffffe c28c6000 c071c000 bfffea18 c026bcfc 00000000 c0116964 c28c6000 
       0805a610 00000040 bfffea18 c0748000 00000040 bfffea18 bfffea2c c0108d83 
       0805a44a 00000003 0805a610 00000040 bfffea18 bfffea2c 000000a7 0000002b 
Call Trace: [<c28c6000>] [<c0116964>] [<c28c6000>] [<c0108d83>] 
Code: 8b 40 08 89 44 24 10 89 c7 31 c0 f2 ae f7 d1 49 8d 59 01 3b 
>>EIP; c0116492 <qm_refs+82/170>   <=====
Trace; c28c6000 <END_OF_CODE+25e9750/????>
Trace; c0116964 <sys_query_module+114/154>
Trace; c28c6000 <END_OF_CODE+25e9750/????>
Trace; c0108d83 <system_call+33/40>
Code;  c0116492 <qm_refs+82/170>
0000000000000000 <_EIP>:
Code;  c0116492 <qm_refs+82/170>   <=====
   0:   8b 40 08                  mov    0x8(%eax),%eax   <=====
Code;  c0116495 <qm_refs+85/170>
   3:   89 44 24 10               mov    %eax,0x10(%esp,1)
Code;  c0116499 <qm_refs+89/170>
   7:   89 c7                     mov    %eax,%edi
Code;  c011649b <qm_refs+8b/170>
   9:   31 c0                     xor    %eax,%eax
Code;  c011649d <qm_refs+8d/170>
   b:   f2 ae                     repnz scas %es:(%edi),%al
Code;  c011649f <qm_refs+8f/170>
   d:   f7 d1                     not    %ecx
Code;  c01164a1 <qm_refs+91/170>
   f:   49                        dec    %ecx
Code;  c01164a2 <qm_refs+92/170>
  10:   8d 59 01                  lea    0x1(%ecx),%ebx
Code;  c01164a5 <qm_refs+95/170>
  13:   3b 00                     cmp    (%eax),%eax
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/