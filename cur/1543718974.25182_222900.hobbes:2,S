Date: Tue, 25 May 2004 23:43:28 +0200
From: Sam Ravnborg <>
Subject: Re: bringing back 'make symlinks'?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/5/25/263

On Tue, May 25, 2004 at 08:45:18AM -0700, Dan Kegel wrote:
> In the 2.4 kernel, 'make symlinks' created the symlinks needed
> to use the kernel tree's headers for building a gcc/glibc toolchain.
> 
> In the 2.6 kernel, you can do the same thing with 'include include/asm'.
> Unless you're trying to build arm or cris, or maybe others, in which case 
> you also need
> 'include/asm-$(ARCH)/.arch'.
> 
> That's fine, but it means that a script (like crosstool) or a book (like 
> LFS)
> that's trying to build a gcc/glibc toolchain for both 2.4 and 2.6 ends up
> with a section like
> 
> case "$KERNEL_VERSION.$KERNEL_PATCHLEVEL.x" in
> 2.2.x|2.4.x) make ARCH=$ARCH symlinks    include/linux/version.h
>              ;;
> 2.6.x)       make ARCH=$ARCH include/asm include/linux/version.h
>              case $ARCH in
>              arm*|cris*) make ARCH=$ARCH include/asm-$ARCH/.arch
>                          ;;
>              esac
>              ;;
> *)           abort "Unsupported kernel version 
> $KERNEL_VERSION.$KERNEL_PATCHLEVEL"
> esac
In current 2.6 there exitst a target named: modules_prepare
It does a bit more than what symlinks did in 2.4 - actually prepare for
building external modules.
	Sam
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/