Date: Sat, 20 Jan 2007 13:59:07 -0600
From: Robert Hancock <>
Subject: Re: SATA exceptions with 2.6.20-rc5
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/1/20/61

Ian Kumlien wrote:
> Hi,
> 
> I went from 2.6.19+sata_nv-adma-ncq-v7.patch, with no problems and adama
> enabled, to 2.6.20-rc5, which gave me problems almost instantly.
> 
> I just thought that it might be interesting to know that it DID work
> nicely.
> 
> CC since i'm not on the ml
> 
(I'm ccing more of the people who reported this)
Well that's interesting.. The only significant change that went into 
2.6.20-rc5 in that driver that wasn't in that version you mentioned was 
this one:
http://www2.kernel.org/git/?p=linux/kernel/git/torvalds/linux-2.6.git;a=commit;h=2dec7555e6bf2772749113ea0ad454fcdb8cf861
Could you (or anyone else) test what happens if you take the 2.6.20-rc5 
version of sata_nv.c and try it on 2.6.19? That would tell us whether 
it's this change or whether it's something else (i.e. in libata core).
Assuming that still doesn't work, can you then try removing these lines 
from nv_host_intr in 2.6.20-rc5 sata_nv.c and see what that does?
	/* bail out if not our interrupt */
	if (!(irq_stat & NV_INT_DEV))
		return 0;
as that's the difference I'm most suspicious of causing the problem.
-- 
Robert Hancock      Saskatoon, SK, Canada
To email, remove "nospam" from hancockr@nospamshaw.ca
Home Page: 
http://www.roberthancock.com/
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/