Date: Tue, 23 Nov 2004 11:55:31 +0900
From: OGAWA Hirofumi <>
Subject: Re: [RFC][PATCH] problem of cont_prepare_write()
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/11/22/382

Andrew Morton <akpm@osdl.org> writes:
>> But, it's not required... yes?
>
> yes, it's needed in theory - see generic_file_buffered_write().  I'm trying
> to remember why...
>
> I think the only problem which that is solving is that the filesystem may
> have left some blocks in the file outside i_size.  That's a minor
> consistency issue which a fsck will fix up.  But I guess a subsequent lseek
> may permit unwritten disk blocks to be read.
>
> This problem is present whenever ->prepare_write() is called and we really
> shouldn't be open-coding it everywhere.
I see. Thanks.
>> Anyway, fixed patch is the following.
>
> Thanks. Does it pass all your testing?
Sorry, no. I'm still compiling kernel. I'll report the result of test
to you (probably few hours).
-- 
OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/