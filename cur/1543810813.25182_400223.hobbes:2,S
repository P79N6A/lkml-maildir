Date: Thu, 23 Feb 2006 09:42:57 +0100
From: "Fabio Comolli" <>
Subject: Problems with USB MMC/SD card reader
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/2/23/31

Hi.
I have problems with a USB card reader with a 1GB SD card. The reader
is detected correctly by linux (from /var/log/messages):
-----------------
Feb 23 08:44:11 kepler kernel: usb 3-1: new full speed USB device
using uhci_hcd and address 2
Feb 23 08:44:11 kepler kernel: usb 3-1: configuration #1 chosen from 1 choice
Feb 23 08:44:11 kepler kernel: Initializing USB Mass Storage driver...
Feb 23 08:44:11 kepler kernel: scsi2 : SCSI emulation for USB Mass
Storage devices
Feb 23 08:44:11 kepler kernel: usbcore: registered new driver usb-storage
Feb 23 08:44:11 kepler kernel: USB Mass Storage support registered.
Feb 23 08:44:16 kepler kernel:   Vendor: SanDisk   Model: Cruzer      
     Rev: 2.00
Feb 23 08:44:16 kepler kernel:   Type:   Direct-Access                
     ANSI SCSI revision: 00
Feb 23 08:44:16 kepler kernel: SCSI device sdb: 1988608 512-byte hdwr
sectors (1018 MB)
Feb 23 08:44:16 kepler kernel: sdb: Write Protect is off
Feb 23 08:44:16 kepler kernel: sdb: assuming drive cache: write through
Feb 23 08:44:16 kepler kernel: SCSI device sdb: 1988608 512-byte hdwr
sectors (1018 MB)
Feb 23 08:44:16 kepler kernel: sdb: Write Protect is off
Feb 23 08:44:16 kepler kernel: sdb: assuming drive cache: write through
Feb 23 08:44:16 kepler kernel:  sdb: sdb1
Feb 23 08:44:16 kepler kernel: sd 2:0:0:0: Attached scsi removable disk sdb
Feb 23 08:44:16 kepler kernel: sd 2:0:0:0: Attached scsi generic sg2 type 0
-------------------
but immediately after that the logs get flooded by error messages:
------------------
Feb 23 08:44:18 kepler kernel: sd 2:0:0:0: SCSI error: return code = 0x8000002
Feb 23 08:44:18 kepler kernel: sdb: Current: sense key=0x3
Feb 23 08:44:18 kepler kernel:     ASC=0x11 ASCQ=0x0
Feb 23 08:44:18 kepler kernel: Info fld=0x1e51f9
Feb 23 08:44:18 kepler kernel: end_request: I/O error, dev sdb, sector 1987065
Feb 23 08:44:18 kepler kernel: Buffer I/O error on device sdb1,
logical block 248352
Feb 23 08:44:19 kepler kernel: sd 2:0:0:0: SCSI error: return code = 0x8000002
Feb 23 08:44:19 kepler kernel: sdb: Current: sense key=0x3
Feb 23 08:44:19 kepler kernel:     ASC=0x11 ASCQ=0x0
Feb 23 08:44:19 kepler kernel: Info fld=0x1e51f9
Feb 23 08:44:19 kepler kernel: end_request: I/O error, dev sdb, sector 1987065
Feb 23 08:44:19 kepler kernel: Buffer I/O error on device sdb1,
logical block 248352
Feb 23 08:44:20 kepler kernel: sd 2:0:0:0: SCSI error: return code = 0x8000002
Feb 23 08:44:20 kepler kernel: sdb: Current: sense key=0x3
Feb 23 08:44:20 kepler kernel:     ASC=0x11 ASCQ=0x0
Feb 23 08:44:20 kepler kernel: Info fld=0x1e5271
Feb 23 08:44:20 kepler kernel: end_request: I/O error, dev sdb, sector 1987185
Feb 23 08:44:20 kepler kernel: Buffer I/O error on device sdb1,
logical block 248367
Feb 23 08:44:21 kepler kernel: sd 2:0:0:0: SCSI error: return code = 0x8000002
Feb 23 08:44:21 kepler kernel: sdb: Current: sense key=0x3
Feb 23 08:44:21 kepler kernel:     ASC=0x11 ASCQ=0x0
Feb 23 08:44:21 kepler kernel: Info fld=0x1e5271
Feb 23 08:44:21 kepler kernel: end_request: I/O error, dev sdb, sector 1987185
Feb 23 08:44:21 kepler kernel: Buffer I/O error on device sdb1,
logical block 248367
Feb 23 08:44:22 kepler kernel: sd 2:0:0:0: SCSI error: return code = 0x8000002
Feb 23 08:44:22 kepler kernel: sdb: Current: sense key=0x3
Feb 23 08:44:22 kepler kernel:     ASC=0x11 ASCQ=0x0
Feb 23 08:44:22 kepler kernel: Info fld=0x1e5271
Feb 23 08:44:22 kepler kernel: end_request: I/O error, dev sdb, sector 1987185
Feb 23 08:44:22 kepler kernel: Buffer I/O error on device sdb1,
logical block 248367
-------------------
and so on until I disconnect the device.
I think I can exclude hardware errors as the very same hardware works
perfecly on the same machine in Windows XP. The SD card works also
nicely with my digital camera. Also, the card reader works perfectly
with linux with another 256MB SD card and with a 512MB MMC card.
Kernel is vanilla 2.6.16-rc4; output of /proc/bus/usb/devices and
.config are attached.
Please let me know if you need more details.
Regards,
Fabio
[unhandled content-type:application/octet-stream][unhandled content-type:application/octet-stream]