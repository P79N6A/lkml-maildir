Date: Wed, 17 Jan 2007 11:25:11 +0100
From: Ingo Molnar <>
Subject: Re: [patch] fix emergency reboot: call reboot notifier list if possible
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/1/17/63

* Andrew Morton <akpm@osdl.org> wrote:
> Making it dependent upon CONFIG_PREEMPT seems a bit sucky.  Perhaps 
> pass in some "you were called from /proc/sysrq-trigger" notification?
looks quite invasive to the whole sysrq interfaces, it trickles all the 
way down into sysrq.c's handler prototype, affecting 20 prototypes. 
Worth the trouble?
> Also, there are ways of telling if the kernel has oopsed (oops 
> counter, oops_in_progress, etc) which should perhaps be tested.
i'm not sure. Should we perhaps forget this patch and only do the 
i386/x86_64 VMX patch i sent?
> Or just learn to type `reboot -fn' ;)
well, emergency_reboot() might also be called from panic(), if someone 
sets panic_timeout, resulting in a similar hang. It might be called from 
a serial console on a soft-locked-up system, having no physical access 
to the system. Having a hung reboot in that scenario is not really 
productive.
	Ingo
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/