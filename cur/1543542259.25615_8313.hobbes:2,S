Date: Thu, 24 Aug 2000 09:41:16 +0200 (MEST)
From: (Rogier Wolff)
Subject: ATM refcount patch!
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/8/24/158

Hi,
I moved the refcount admin to the "surroundings". 
The truth of the matter is that it is a mess. A bunch of ATM drivers
claim not to be able to unloaded. So those still "MOD_INC_USE_COUNT"
themselves, to block the unload.
Similarly, I'm not sure what to do with phy drivers. Should they (as a
module) be loaded before or after the SAR driver? Of course we want
the same move of refcount from the module itself to the callers. 
Anyway, the attached patch works for the SAR drivers, as far as I
could test them. I have none of the ATM cards in the standard kernel,
just one that I'm just finishing off the driver for. 
I have 5 items on my todo list, one of which is this. The others have
been coded, but need a bit more testing. Probably a patch later today.
(After approval from Fujitsu). 
				Roger. 
-- 
** R.E.Wolff@BitWizard.nl ** 
http://www.BitWizard.nl/
 ** +31-15-2137555 **
*-- BitWizard writes Linux device drivers for any device you may have! --*
*       Common sense is the collection of                                *
******  prejudices acquired by age eighteen.   -- Albert Einstein ********
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/