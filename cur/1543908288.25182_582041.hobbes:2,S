Date: Fri, 10 Aug 2007 13:27:34 +0100
From: David Vrabel <>
Subject: sdio: set host bus width
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/8/10/149

-- 
David Vrabel, Software Engineer, Drivers group  Tel: +44 (0)1223 692562
CSR plc, Churchill House, Cambridge Business Park, Cowley Road, CB4 0WZ
.
sdio: set host bus width
Need to set the bus width used by the host when enabling wide (4 bit) mode.
Signed-of-by: David Vrabel <david.vrabel@csr.com>
---
Index: mmc/drivers/mmc/core/sdio.c
===================================================================
--- mmc.orig/drivers/mmc/core/sdio.c	2007-08-10 01:15:54.000000000 +0100
+++ mmc/drivers/mmc/core/sdio.c	2007-08-10 01:16:05.000000000 +0100
@@ -159,6 +159,8 @@
 	if (ret)
 		return ret;
 
+	mmc_set_bus_width(card->host, MMC_BUS_WIDTH_4);
+
 	return 0;
 }
 