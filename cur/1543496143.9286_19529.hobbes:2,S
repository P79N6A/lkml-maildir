Date: Tue, 18 May 1999 16:17:12 +0100 (GMT)
From: Riley Williams <>
Subject: Re: 2.3.x wish list?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/5/19/22

Hi David.
 >>> One of the things which I'm planning on doing is changing
 >>> mke2fs's defaults based on the size of the filesystem it's
 >>> making. If it's making a large filesystem (where large is
 >>> probably bigger than, say, 200-300 megs), I'll change it to use
 >>> 4k block sizes and also reduce the number of inodes created
 >>> (since with a large filesystem, you generally don't need quite
 >>> so many inodes).
 >> Is the kernel limited to either 1k or 4k block sizes?
 >> If not, I'd suggest something along the lines of the following:
 >>  1. For partitions less than 250M, use 1k blocks.
 >>  2. For partitions between 250M and 500M, use 2k blocks.
 >>  3. For partitions between 500M and 1G, use 4k blocks.
 >>  4. For partitions over 1G, where memory is mapped in 4k units,
 >>     use 4k blocks.
 >>  5. For partitions not covered by the above, use 8k blocks.
 >> Comments?
 > around the time that 2.2 came out I was rebuilding my home
 > machine and as I was using a large drive I decided to try
 > formatting with 8K block sizes (as I have never had a system use
 > more then 50% of the inodes) and I discovered that I could not
 > boot from the drive! I could boot from a floppy and mount the
 > drive, but not boot from it. As soon as I reformatted with 4K
 > block size I had no problems. I was using slackware 3.6 and
 > whatever version of lilo is included with it.
Note that the formatting is on a per-partition basis, not just one
spec for the whole drive...
Personally, I always allocate a partition for /boot early on my drive,
which is usually around 16M (2 cylinders on modern drives) in size,
and boot from that. Following the above rules, it would be formatted
using 1k blocks, so would still be bootable...
Best wishes from Riley.
+----------------------------------------------------------------------+
| There is something frustrating about the quality and speed of Linux  |
| development, ie., the quality is too high and the speed is too high, |
| in other words, I can implement this XXXX feature, but I bet someone |
| else has already done so and is just about to release their patch.   |
+----------------------------------------------------------------------+
 * 
ftp://ftp.MemAlpha.cx/pub/rhw/Linux
 * 
http://www.MemAlpha.cx/kernel.versions.html
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/