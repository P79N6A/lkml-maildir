Date: Wed, 4 Oct 2000 18:10:00 +0200
From: David Weinehall <>
Subject: Re: VM in v2.4.0test9
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/10/4/122

On Wed, Oct 04, 2000 at 01:01:21PM -0300, Rik van Riel wrote:
> On Wed, 4 Oct 2000, David Weinehall wrote:
> 
> > Running the included program on a clean v2.4.0test9 kernel I can
> > hang the computer practically in no time.
> 
> > What seems most strange is that the doesn't even get depleated.
> > The machine still answers to SysRq and ping, but nothing else.
> 
> Looking again at this report in more detail, something
> very strange is going on ...
> 
> > This is what I got from SysRq+M (manual copy):
> > 
> > Free pages: 500 kB (0 highmem)
> > Active: 8 inactive dirty: 1009, inactive clean:0
> > free: 125 (31 62 93)
> 
> First, you have MORE free memory than freepages.high. In this
> case I really don't see why __alloc_pages() wouldn't give the
> memory to your processes ....
Beats the hell out of me.
> > Free swap: 64772
> 
> And there is tons of swap free...
> 
> Are you absolutely sure this is VM related?  This almost looks
Nope. All I'm sure of is that the v2.2.xx kernels doesn't show the same
behaviour, so it _shouldn't_ (but you never know...) be broken hardware.
Of course, the v2.4 might stress the memory harder or something like
that.
> like the system puts a in a read request but the request queue
> doesn't get unplugged, or something strange like that ...
> 
> There is more than enough memory to satisfy all VM requests and
> the loop in __alloc_pages() is straightforward enough to give
> your processes their memory without strange bugs ...
Yup. If you want to, I can put some debugging printk's into the kernel
whereever you might want them and run more tests. I don't compile the
kernel on this machine, so I have no problems recompiling. And it's a
dedicated test-machine anyway, so there's nothing on that machine which
I'd cry over if lost.
I'm about to perform the same test on a K6-3/350 with 64 MB mem and 
>200 MB swap now, just for the fun of it.
/David
  _                                                                 _
 // David Weinehall <tao@acc.umu.se> /> Northern lights wander      \\
//  Project MCA Linux hacker        //  Dance across the winter sky //
\>  
http://www.acc.umu.se/~tao/
    </   Full colour fire           </
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/