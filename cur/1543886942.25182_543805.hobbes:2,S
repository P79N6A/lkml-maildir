Date: Sun, 13 May 2007 02:44:28 +0530
From: "Satyam Sharma" <>
Subject: Re: default y idiocy
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/5/12/224

On 5/13/07, Simon Arlott <simon@fire.lp0.eu> wrote:
> On 12/05/07 19:23, Jens Axboe wrote:
> > Hi,
> >
> > This has bothered me for a long time, and it just seems to be getting
> > worse. Can people please STOP defaulting non-essential stuff to 'y'?
> > Grrr.
>
> Is there a reason why various 10/100/1000Mbit network cards are 'y' too?
> There's even a default SCSI 'm' that seems to be completely hidden from
> the menu too (CONFIG_SCSI_WAIT_SCAN). It depends on SCSI but I can't
> disable SCSI...
Yeah, I've seen a lot of unnecessary default y's too, seems to be a
contagious disease.
And there are another kind of (harmless) default y's too, that don't really
force unnecessary compilation and linking of stuff into the kernel at all,
ones like (21-mm2's) init/Kconfig: SLUB_DEBUG = default y (it's
completely contained in mm/slub.c and not exposed to mm/Makefile),
but it still seems funny to find a spurious CONFIG_SLUB_DEBUG=y in
your .config when you also have # CONFIG_SLUB is not set.
Do we care enough to fix such cases too? This was a one-liner, so
including a patch anyway, CC'ing to Andrew and Christoph.
---
Prevent SLUB_DEBUG from being set if SLUB is not. SLUB_DEBUG
without SLUB does not cause anything to be compiled or linked in
anyway, so this is not critical, but simply removes a spurious
CONFIG_SLUB_DEBUG=y from creeping into the .config even when
CONFIG_SLUB is not set.
Signed-off-by: Satyam Sharma <satyam.sharma@gmail.com>
---
diff -ruNp a-mm2/init/Kconfig b-mm2/init/Kconfig
--- a-mm2/init/Kconfig	2007-05-10 23:19:36.000000000 +0530
+++ b-mm2/init/Kconfig	2007-05-13 02:33:21.000000000 +0530
@@ -567,7 +567,7 @@ config VM_EVENT_COUNTERS
 	  if VM event counters are disabled.
 config SLUB_DEBUG
-	default y
+	default y if SLUB
 	bool "Enable SLUB debugging support" if EMBEDDED
 	help
 	  SLUB has extensive debug support features. Disabling these can
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/