Date: Sat, 17 May 2003 13:07:21 +1000
From: Rusty Russell <>
Subject: Re: [PATCH] Unlimited per-cpu allocation
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/5/16/197

In message <20030516.193847.15241922.davem@redhat.com> you write:
>    From: Rusty Russell <rusty@rustcorp.com.au>
>    Date: Sat, 17 May 2003 11:58:55 +1000
> 
>    IA64 could just use the generic mechanism, like everyone else.  But
>    they do the tricky 64k mapping thing.  As I pointed out, maybe their
>    decision would have to be rethought if that proves inadaquate.
> 
> But we should also give them the option to implement module percpu
> data using indirect buffers.
Well, AFAICT that can't be done realistically: the module percpu
mechanisms must be the same as the core ones (you can't hide the
difference under #ifdef MODULE, either, since they can be handed
about).
You can do TLS-style tricks (with toolchain support), but we don't
need to, and almost certainly don't want to.
The question is not whether we need this allocator to implement percpu
inside modules (we do), but whether it can also be used for
kmalloc_percpu.
Hope that clarifies,
Rusty.
--
  Anyone who quotes me in their sig is an idiot. -- Rusty Russell.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/