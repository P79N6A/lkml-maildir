Date: Sat, 2 Oct 2004 11:04:09 +0200
From: Sam Ravnborg <>
Subject: Re: Module building oddities with <module>-objs under Kernel 2.6.8.1
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/10/2/11

On Sat, Oct 02, 2004 at 01:13:54AM -0400, Andre Bonin wrote:
> Here is the Makefile.
It is preferred to guard the kbuild specific stuff inside
ifeq ($(KERNELRELEASE),)
Normal stuff
else
kbuild stuff
endif
> ----------------------------------------------------
> KDIR         := /usr/src/linux
> PWD          := $(shell pwd)
> 
> obj-m        += datasim.o
> datasim-objs := status.o
This is wrong, you cannot use same name for a .o file and the final module.
Name your .c file datasim_core.c or similar and use:
obj-m        := datasim.o
datasim-objs := datasim_core.o status.o
	Sam
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/