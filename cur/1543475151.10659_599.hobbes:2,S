Date: Tue, 5 Jan 1999 08:37:41 +0000
From: "Sean Hunter" <>
Subject: 2.2.0pre3 fine on my laptop (attached patch for pcmcia)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/1/5/154

2.2.0pre3 is running fine on my p2 laptop.  I had to hack pcmcia-cs-3.0.6 a
very small bit, and I have included two patches for anyone who wants to use
pcmcia on 2.2.x kernels. The first you need to apply to get "make config" to work, 
and the second you need to apply post-configure if you're using version-stamped 
modules to get pcmcia-cs to stamp the modules as 2.2.0-pre(whatever) instead of 
just 2.2.0
Obviously you'll need to change "2.2.0-pre3" in the second patch to be the
same as "uname -r" for the kernel you're building for (eg 2.2.0-pre4 for
pre4 kernel etc).  The pathnames for the patches are relative to 
linux/pcmcia-cs-3.0.6, so patch from there.  I have sent these to David Hinds as 
well.
Thanks for all the hard work on the 2.1.x series, guys.  If Linus, Alan etc
are ever in old London town, look me up and I'll buy you a beer (just the
one, mind) 8^)
Sean Hunter
*** Configure.old	Thu Nov 19 08:08:42 1998
--- Configure	Mon Jan  4 16:03:48 1999
***************
*** 426,437 ****
  NEW_QLOGIC=n
  
  case "$VERSION.$PATCHLEVEL" in
! 2.0|2.1)
      echo "MFLAG=-DMODVERSIONS -include $MODVER" >> $CONFIG_MK
      if [ $SUBLEVEL -ge 6 ] ; then
  	NEW_QLOGIC=y
      fi
!     if [ $PATCHLEVEL -eq 1 ] ; then
  	if [ $SUBLEVEL -ge 8 ] ; then
  	    CONFIG_BLK_DEV_IDE_PCMCIA=y
  	fi
--- 426,437 ----
  NEW_QLOGIC=n
  
  case "$VERSION.$PATCHLEVEL" in
! 2.0|2.1|2.2)
      echo "MFLAG=-DMODVERSIONS -include $MODVER" >> $CONFIG_MK
      if [ $SUBLEVEL -ge 6 ] ; then
  	NEW_QLOGIC=y
      fi
!     if [ $PATCHLEVEL -gt 0 ] ; then
  	if [ $SUBLEVEL -ge 8 ] ; then
  	    CONFIG_BLK_DEV_IDE_PCMCIA=y
  	fi
***************
*** 449,455 ****
      fi
      ;;
  *)
!     echo "This package requires a 2.0 or 2.1 series kernel."
      exit 1
      ;;
  esac
--- 449,455 ----
      fi
      ;;
  *)
!     echo "This package requires a 2.0, 2.1, or 2.2 series kernel."
      exit 1
      ;;
  esac
*** include/pcmcia/config.h.old	Mon Jan  4 16:27:26 1999
--- include/pcmcia/config.h	Mon Jan  4 16:27:47 1999
***************
*** 30,36 ****
  #define CONFIG_PROC_FS 1
  #define CONFIG_ISA 1
  
! #define UTS_RELEASE "2.2.0"
  #define UTS_VERSION "#1 Sat Jan 2 19:01:59 GMT 1999"
  #define LINUX_VERSION_CODE 131584
  
--- 30,36 ----
  #define CONFIG_PROC_FS 1
  #define CONFIG_ISA 1
  
! #define UTS_RELEASE "2.2.0-pre3"
  #define UTS_VERSION "#1 Sat Jan 2 19:01:59 GMT 1999"
  #define LINUX_VERSION_CODE 131584
  
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/