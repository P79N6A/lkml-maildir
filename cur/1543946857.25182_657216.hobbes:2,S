Date: Wed, 20 Feb 2008 22:13:33 +0000
From: Chris Clayton <>
Subject: Re: [Rt2400-devel] 2.6.25-rc2 regression in rt61pci wireless driver
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/2/20/578

Hi Ivo,
[...]
> 
> I have an idea, could you try below patch?
> Note that while applying it will mention something about a line offset, but that can be ignored.
> 
> This could perhaps also fix the TX/RX issue mentioned earlier in the thread, but I am not
> quite sure about that.
> 
Sorry, but again a few pings and the network fails. I've attached the before and
after register dumps. This is with your patch applied against 2.6.25-rc2-git4.
Chris
-- 
Beauty is in the eye of the beerholder.
BBP:
0 0x16
1 0x68
2 0x18
3 0x00
4 0x11
5 0x0b
6 0x01
7 0x38
8 0x00
9 0x00
10 0x02
11 0x04
12 0x00
13 0x15
14 0x18
15 0x30
16 0x2c
17 0x40
18 0x06
19 0x00
20 0x1e
21 0xc8
22 0x38
23 0x06
24 0xfe
25 0x0a
26 0x0d
27 0x27
28 0x06
29 0x00
30 0x6e
31 0x2b
32 0x14
33 0x55
34 0x12
35 0x50
36 0x11
37 0x07
38 0x00
39 0xf8
40 0x06
41 0x60
42 0x09
43 0x00
44 0x4e
45 0x96
46 0xc1
47 0x6e
48 0x04
49 0x00
50 0x2a
51 0x00
52 0xee
53 0x10
54 0x18
55 0x00
56 0x10
57 0x08
58 0x02
59 0x08
60 0x10
61 0x04
62 0x04
63 0x00
64 0x01
65 0x03
66 0x00
67 0x00
68 0x00
69 0x00
70 0x26
71 0x00
72 0x00
73 0x00
74 0xff
75 0xfe
76 0x40
77 0x00
78 0x00
79 0x00
80 0x05
81 0x14
82 0x50
83 0xc0
84 0x10
85 0xcf
86 0xfe
87 0x40
88 0xfe
89 0x40
90 0x0f
91 0x08
92 0x00
93 0x00
94 0x06
95 0x08
96 0x48
97 0x48
98 0x48
99 0x00
100 0x20
101 0x06
102 0x16
103 0x00
104 0x2c
105 0x20
106 0x90
107 0x04
108 0x04
109 0x00
110 0x00
111 0x00
112 0x00
113 0x00
114 0x00
115 0x00
116 0x00
117 0x00
118 0x00
119 0x00
120 0x00
121 0x00
122 0x00
123 0x00
124 0x00
125 0x00
126 0x00
127 0x00
CSR:
0 0x0002561c
1 0x00000004
2 0xde501100
3 0x00fff404
4 0x77b36000
5 0x00031a73
6 0x00000fff
7 0x00000000
8 0x013a030a
9 0x0000a314
10 0x0000071c
11 0x000a0050
12 0x00000009
13 0x0000e060
14 0x00071e46
15 0x00000000
16 0x027eb162
17 0x9eaa9eaf
18 0x8a8b8c8d
19 0x00858687
20 0x740a0732
21 0x0000015f
22 0x0a143870
23 0x2e31353b
24 0x2a2a2a2c
25 0x00033e80
26 0x00001010
27 0x0000c78f
28 0x96dc8ba9
29 0x000000a0
30 0x00000000
31 0x0000000f
32 0x00010000
33 0x000023b0
34 0x82188200
35 0x0000ff00
36 0x150cca0b
37 0x060a100c
38 0x00080606
39 0x00000a08
40 0x00000000
41 0x00000000
42 0x00000000
43 0x00000000
44 0x00000000
45 0x00000000
46 0x00000000
47 0x00000000
48 0x00000000
49 0x00000000
50 0x00000000
51 0x00000000
52 0x00014300
53 0x00000000
54 0x00000000
55 0x00000000
56 0x00000000
57 0x00000000
58 0x03000000
59 0x00000000
60 0x00000000
61 0x00000000
62 0x00000000
63 0x00000000
64 0x00000000
65 0x00000000
66 0x00000000
67 0x00000000
68 0x00000000
69 0x00000000
70 0x00000000
71 0x00000000
72 0x00000000
73 0x00000000
74 0x00000000
75 0x00000000
76 0x00000000
77 0x00000000
78 0x00000000
79 0x00000000
80 0x00000000
81 0x00000000
82 0x00000000
83 0x00000000
84 0x00000000
85 0x00000000
86 0x00000000
87 0x00000000
88 0x00000000
89 0x00000000
90 0x00000000
91 0x00000000
92 0x00000000
93 0x00000000
94 0x00000000
95 0x00000000
96 0x00000000
97 0x00000000
98 0x00000000
99 0x00000000
100 0x00000000
101 0x00000000
102 0x00000000
103 0x00000000
104 0x00000000
105 0x00000000
106 0x00000000
107 0x00000000
108 0x00000000
109 0x00000000
110 0x00000000
111 0x00000000
112 0x00000000
113 0x00000000
114 0x00000000
115 0x00000000
116 0x00000000
117 0x00000000
118 0x00000000
119 0x00000000
120 0x00000000
121 0x00000000
122 0x00000000
123 0x00000000
124 0x00000000
125 0x00000000
126 0x00000000
127 0x00000000
128 0x00000000
129 0x00000000
130 0x00000000
131 0x00000000
132 0x00000000
133 0x00000000
134 0x00000000
135 0x00000000
136 0x00000000
137 0x00000000
138 0x00000000
139 0x00000000
140 0x00000000
141 0x00000000
142 0x00000000
143 0x00000000
144 0x00000000
145 0x00000000
146 0x00000000
147 0x00000000
148 0x00000000
149 0x00000000
150 0x00000000
151 0x00000000
152 0x00000000
153 0x00000000
154 0x00000000
155 0x00000000
156 0x00000000
157 0x00000000
158 0x00000000
159 0x00000000
160 0x00000000
161 0x00000000
162 0x00000000
163 0x00000000
164 0x00000000
165 0x00000000
166 0x00000000
167 0x00000000
168 0x00000000
169 0x00000000
170 0x00000000
171 0x00000000
172 0x00000000
173 0x00000000
174 0x00000000
175 0x00000000
176 0x00000000
177 0x00000000
178 0x00000000
179 0x00000000
180 0x00000000
181 0x00000000
182 0x00000000
183 0x00000000
184 0x00000000
185 0x00000000
186 0x00000000
187 0x00000000
188 0x00000000
189 0x00000000
190 0x00000000
191 0x00000000
192 0x00000000
193 0x00000000
194 0x00000000
195 0x00000000
196 0x00000000
197 0x00000000
198 0x00000000
199 0x00000000
200 0x00000000
201 0x00000000
202 0x00000000
203 0x00000000
204 0x00000000
205 0x00000000
206 0x00000000
207 0x00000000
208 0x00000000
209 0x00000000
210 0x00000000
211 0x00000000
212 0x00000000
213 0x00000000
214 0x00000000
215 0x00000000
216 0x00000000
217 0x00000000
218 0x00000000
219 0x00000000
220 0x00000000
221 0x00000000
222 0x00000000
223 0x00000000
224 0x00000000
225 0x00000000
226 0x00000000
227 0x00000000
228 0x00000000
229 0x00000000
230 0x00000000
231 0x00000000
232 0x00000000
233 0x00000000
234 0x00000000
235 0x00000000
236 0x00000000
237 0x00000000
238 0x00000000
239 0x00000000
240 0x00000000
241 0x00000000
242 0x00000000
243 0x00000000
244 0x00000000
245 0x00000000
246 0x00000000
247 0x00000000
248 0x00000000
249 0x00000000
250 0x00000000
251 0x00000000
252 0x00000000
253 0x00000000
254 0x00000000
255 0x00000000
256 0x1f288000
257 0x1f260000
258 0x1f268000
259 0x1f270000
260 0x1f278000
261 0x00000000
262 0x0c0c0c0c
263 0x0010000c
264 0x00000000
265 0x00000000
266 0x00000000
267 0x000000aa
268 0x00000000
269 0x00000000
270 0x1f2880c0
271 0x1f260000
272 0x1f2682c0
273 0x1f270000
274 0x1f278000
275 0x00000000
276 0x1f280000
277 0x0004100c
278 0x00000001
279 0x1f280200
280 0x28ca4404
281 0x00000606
282 0x00000000
283 0x003fff14
284 0x00000000
285 0x00000000
286 0x003000c0
287 0x00000000
288 0x24400100
289 0x00000200
290 0x00002000
291 0x00000000
292 0x0001008e
293 0x00086088
294 0x00000019
295 0x00000000
296 0x0001008e
297 0x00086088
298 0x00000000
299 0x000003ff
EEPROM:
0 0x2561
1 0x0100
2 0x1100
3 0xde50
4 0xf404
5 0x0301
6 0x1814
7 0x0601
8 0x0000
9 0x701e
10 0x1799
11 0x0000
12 0x0002
13 0x0000
14 0xffff
15 0xffff
16 0x184a
17 0xff80
18 0xffff
19 0xffff
20 0xffff
21 0xffff
22 0xffff
23 0xffff
24 0xffff
25 0xffff
26 0xffff
27 0xffff
28 0xffff
29 0xffff
30 0xffff
31 0xffff
32 0xffff
33 0xffff
34 0xffff
35 0x0a0a
36 0x0a0a
37 0x0a0a
38 0x0a0a
39 0x0a0a
40 0x0e0e
41 0x0e0e
42 0xffff
43 0xffff
44 0xffff
45 0xffff
46 0xffff
47 0xff0c
48 0xe0ff
49 0xffff
50 0xffff
51 0xffff
52 0xffff
53 0xffff
54 0xffff
55 0xffff
56 0xffff
57 0xffff
58 0xffff
59 0xffff
60 0xffff
61 0xffff
62 0xffff
63 0xffff
64 0xffff
65 0xffff
66 0xffff
67 0xffff
68 0xffff
69 0xffff
70 0xffff
71 0xffff
72 0xffff
73 0xffff
74 0xffff
75 0xffff
76 0xffff
77 0x0000
78 0x0000
79 0xffff
80 0xffff
81 0xffff
82 0xffff
83 0xffff
84 0xffff
85 0xffff
86 0xffff
87 0xffff
88 0xffff
89 0xffff
90 0xffff
91 0xffff
92 0xffff
93 0xffff
94 0xffff
95 0xffff
96 0xffff
97 0xffff
98 0xffff
99 0xffff
100 0xffff
101 0xffff
102 0xffff
103 0xffff
104 0xffff
105 0xffff
106 0xffff
107 0xffff
108 0xffff
109 0xffff
110 0xffff
111 0xffff
112 0xffff
113 0xffff
114 0xffff
115 0xffff
116 0xffff
117 0xffff
118 0xffff
119 0xffff
120 0xffff
121 0xffff
122 0xffff
123 0xffff
124 0xffff
125 0xffff
126 0xffff
127 0xffff
BBP:
0 0x16
1 0x68
2 0x00
3 0x00
4 0x11
5 0x0b
6 0x10
7 0x00
8 0x00
9 0x00
10 0x00
11 0x04
12 0x02
13 0x00
14 0x18
15 0x30
16 0x2c
17 0x40
18 0x06
19 0x00
20 0x1e
21 0xc8
22 0x38
23 0x06
24 0xfe
25 0x0a
26 0x0d
27 0x27
28 0x06
29 0x00
30 0x72
31 0x2b
32 0x14
33 0x55
34 0x12
35 0x50
36 0x11
37 0x07
38 0x00
39 0xf8
40 0x06
41 0x60
42 0x09
43 0x00
44 0x4e
45 0x96
46 0xc1
47 0x6e
48 0x04
49 0x00
50 0x2a
51 0x00
52 0xee
53 0x10
54 0x18
55 0x00
56 0x10
57 0x08
58 0x02
59 0x09
60 0x10
61 0x04
62 0x04
63 0x00
64 0x01
65 0x03
66 0x00
67 0x00
68 0x00
69 0x00
70 0x26
71 0x00
72 0x00
73 0x00
74 0xff
75 0xfe
76 0x40
77 0x00
78 0x00
79 0x00
80 0x05
81 0x14
82 0x50
83 0xc0
84 0x10
85 0xcf
86 0xfe
87 0x40
88 0xfe
89 0x40
90 0x0f
91 0x08
92 0x00
93 0x00
94 0x06
95 0x08
96 0x48
97 0x48
98 0x48
99 0x00
100 0x20
101 0x06
102 0x16
103 0x00
104 0x2c
105 0x20
106 0x90
107 0x04
108 0x04
109 0x00
110 0x00
111 0x00
112 0x00
113 0x00
114 0x00
115 0x00
116 0x00
117 0x00
118 0x00
119 0x00
120 0x00
121 0x00
122 0x00
123 0x00
124 0x00
125 0x00
126 0x00
127 0x00
CSR:
0 0x0002561c
1 0x00000004
2 0xde501100
3 0x00fff404
4 0x77b36000
5 0x00031a73
6 0x00000fff
7 0x00000000
8 0x013a030a
9 0x0000a314
10 0x0000071c
11 0x000a0050
12 0x00000009
13 0x0000e060
14 0x00071e46
15 0x00000000
16 0x027eb162
17 0x9eaa9eaf
18 0x8a8b8c8d
19 0x00858687
20 0x740a0732
21 0x0000015f
22 0x0a143870
23 0x2e31353b
24 0x2a2a2a2c
25 0x00033e80
26 0x00001010
27 0x0000c78f
28 0x95138aad
29 0x000000a0
30 0x00000000
31 0x0000000f
32 0x00010000
33 0x000023b0
34 0x82188200
35 0x0000ff00
36 0x150cca0b
37 0x060a100c
38 0x00080606
39 0x00000a08
40 0x00000000
41 0x00000000
42 0x00000000
43 0x00000000
44 0x00000000
45 0x00000000
46 0x00000000
47 0x00000000
48 0x00000000
49 0x00000000
50 0x00000000
51 0x00000000
52 0x00000800
53 0x00000000
54 0x00000000
55 0x00000000
56 0x00000000
57 0x00000000
58 0x03000000
59 0x00000000
60 0x00000000
61 0x00000000
62 0x00000000
63 0x00000000
64 0x00000000
65 0x00000000
66 0x00000000
67 0x00000000
68 0x00000000
69 0x00000000
70 0x00000000
71 0x00000000
72 0x00000000
73 0x00000000
74 0x00000000
75 0x00000000
76 0x00000000
77 0x00000000
78 0x00000000
79 0x00000000
80 0x00000000
81 0x00000000
82 0x00000000
83 0x00000000
84 0x00000000
85 0x00000000
86 0x00000000
87 0x00000000
88 0x00000000
89 0x00000000
90 0x00000000
91 0x00000000
92 0x00000000
93 0x00000000
94 0x00000000
95 0x00000000
96 0x00000000
97 0x00000000
98 0x00000000
99 0x00000000
100 0x00000000
101 0x00000000
102 0x00000000
103 0x00000000
104 0x00000000
105 0x00000000
106 0x00000000
107 0x00000000
108 0x00000000
109 0x00000000
110 0x00000000
111 0x00000000
112 0x00000000
113 0x00000000
114 0x00000000
115 0x00000000
116 0x00000000
117 0x00000000
118 0x00000000
119 0x00000000
120 0x00000000
121 0x00000000
122 0x00000000
123 0x00000000
124 0x00000000
125 0x00000000
126 0x00000000
127 0x00000000
128 0x00000000
129 0x00000000
130 0x00000000
131 0x00000000
132 0x00000000
133 0x00000000
134 0x00000000
135 0x00000000
136 0x00000000
137 0x00000000
138 0x00000000
139 0x00000000
140 0x00000000
141 0x00000000
142 0x00000000
143 0x00000000
144 0x00000000
145 0x00000000
146 0x00000000
147 0x00000000
148 0x00000000
149 0x00000000
150 0x00000000
151 0x00000000
152 0x00000000
153 0x00000000
154 0x00000000
155 0x00000000
156 0x00000000
157 0x00000000
158 0x00000000
159 0x00000000
160 0x00000000
161 0x00000000
162 0x00000000
163 0x00000000
164 0x00000000
165 0x00000000
166 0x00000000
167 0x00000000
168 0x00000000
169 0x00000000
170 0x00000000
171 0x00000000
172 0x00000000
173 0x00000000
174 0x00000000
175 0x00000000
176 0x00000000
177 0x00000000
178 0x00000000
179 0x00000000
180 0x00000000
181 0x00000000
182 0x00000000
183 0x00000000
184 0x00000000
185 0x00000000
186 0x00000000
187 0x00000000
188 0x00000000
189 0x00000000
190 0x00000000
191 0x00000000
192 0x00000000
193 0x00000000
194 0x00000000
195 0x00000000
196 0x00000000
197 0x00000000
198 0x00000000
199 0x00000000
200 0x00000000
201 0x00000000
202 0x00000000
203 0x00000000
204 0x00000000
205 0x00000000
206 0x00000000
207 0x00000000
208 0x00000000
209 0x00000000
210 0x00000000
211 0x00000000
212 0x00000000
213 0x00000000
214 0x00000000
215 0x00000000
216 0x00000000
217 0x00000000
218 0x00000000
219 0x00000000
220 0x00000000
221 0x00000000
222 0x00000000
223 0x00000000
224 0x00000000
225 0x00000000
226 0x00000000
227 0x00000000
228 0x00000000
229 0x00000000
230 0x00000000
231 0x00000000
232 0x00000000
233 0x00000000
234 0x00000000
235 0x00000000
236 0x00000000
237 0x00000000
238 0x00000000
239 0x00000000
240 0x00000000
241 0x00000000
242 0x00000000
243 0x00000000
244 0x00000000
245 0x00000000
246 0x00000000
247 0x00000000
248 0x00000000
249 0x00000000
250 0x00000000
251 0x00000000
252 0x00000000
253 0x00000000
254 0x00000000
255 0x00000000
256 0x1f288000
257 0x1f260000
258 0x1f268000
259 0x1f270000
260 0x1f278000
261 0x00000000
262 0x0c0c0c0c
263 0x0010000c
264 0x00000000
265 0x00000000
266 0x00000000
267 0x000000aa
268 0x00000000
269 0x00000000
270 0x1f288080
271 0x1f260000
272 0x1f268080
273 0x1f270000
274 0x1f278000
275 0x00000000
276 0x1f280000
277 0x0004100c
278 0x00000001
279 0x1f280240
280 0x28ca4404
281 0x00000606
282 0x00000000
283 0x003fff14
284 0x00000000
285 0x00000000
286 0x003000c0
287 0x00000000
288 0x24400100
289 0x00000200
290 0x00002000
291 0x00000000
292 0x0001008e
293 0x00086088
294 0x00000019
295 0x00000000
296 0x0001008e
297 0x00086088
298 0x00000000
299 0x000003ff
EEPROM:
0 0x2561
1 0x0100
2 0x1100
3 0xde50
4 0xf404
5 0x0301
6 0x1814
7 0x0601
8 0x0000
9 0x701e
10 0x1799
11 0x0000
12 0x0002
13 0x0000
14 0xffff
15 0xffff
16 0x184a
17 0xff80
18 0xffff
19 0xffff
20 0xffff
21 0xffff
22 0xffff
23 0xffff
24 0xffff
25 0xffff
26 0xffff
27 0xffff
28 0xffff
29 0xffff
30 0xffff
31 0xffff
32 0xffff
33 0xffff
34 0xffff
35 0x0a0a
36 0x0a0a
37 0x0a0a
38 0x0a0a
39 0x0a0a
40 0x0e0e
41 0x0e0e
42 0xffff
43 0xffff
44 0xffff
45 0xffff
46 0xffff
47 0xff0c
48 0xe0ff
49 0xffff
50 0xffff
51 0xffff
52 0xffff
53 0xffff
54 0xffff
55 0xffff
56 0xffff
57 0xffff
58 0xffff
59 0xffff
60 0xffff
61 0xffff
62 0xffff
63 0xffff
64 0xffff
65 0xffff
66 0xffff
67 0xffff
68 0xffff
69 0xffff
70 0xffff
71 0xffff
72 0xffff
73 0xffff
74 0xffff
75 0xffff
76 0xffff
77 0x0000
78 0x0000
79 0xffff
80 0xffff
81 0xffff
82 0xffff
83 0xffff
84 0xffff
85 0xffff
86 0xffff
87 0xffff
88 0xffff
89 0xffff
90 0xffff
91 0xffff
92 0xffff
93 0xffff
94 0xffff
95 0xffff
96 0xffff
97 0xffff
98 0xffff
99 0xffff
100 0xffff
101 0xffff
102 0xffff
103 0xffff
104 0xffff
105 0xffff
106 0xffff
107 0xffff
108 0xffff
109 0xffff
110 0xffff
111 0xffff
112 0xffff
113 0xffff
114 0xffff
115 0xffff
116 0xffff
117 0xffff
118 0xffff
119 0xffff
120 0xffff
121 0xffff
122 0xffff
123 0xffff
124 0xffff
125 0xffff
126 0xffff
127 0xffff