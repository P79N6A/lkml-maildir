Date: Wed, 26 Dec 2007 14:47:16 -0800
From: Jay Vosburgh <>
Subject: Re: 2 ports could not bond to a aggregator in 802.3ad mode issue
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/12/26/150

>After the setting, I cat the proc entry and got the following information
[...]
>802.3ad info
>LACP rate: slow
>Active Aggregator Info:
>        Aggregator ID: 1
>        Number of ports: 2
>        Actor Key: 17
>        Partner Key: 1
>        Partner Mac Address: 00:00:00:00:00:00
[...]
>The behavior changes from 'one aggregator with one port'  to 'one aggregator 
>with 2 ports', the latter seems more accurate. Is there a bug in bonding 
>driver code v3.1.3 (June 13, 2007)?
	I do not believe so.
	IEEE 802.3 section 43.3.9 states, in part,
	"Links that are not successful candidates for aggregation (e.g.,
links that are attached to other devices that cannot perform aggregation
or links that have been manually configured to be non-aggregatable) are
enabled to operate as individual IEEE 802.3 links. For consistency of
modeling, such a link is regarded as being attached to a compatible
Aggregator that can only be associated with a single link. That is, from
the perspective of Link Aggregation, non-aggregated links are not a
special case; they compose an aggregation with a maximum membership of
one link."
	I do not see that it is correct to attach the links to a common
aggregator, as your output indicates that no partner association has
been created (the Partner MAC is all zeroes) and the links are therefore
apparently connected to a device that cannot perform aggregation.
	-J
---
	-Jay Vosburgh, IBM Linux Technology Center, fubar@us.ibm.com