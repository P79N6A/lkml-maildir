Date: Thu, 19 Apr 2007 13:52:05 +0200
From: Juergen Beisert <>
Subject: Re: Wrong free clusters count on FAT32
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/4/19/161

On Thursday 19 April 2007 10:57, DervishD wrote:
>     I have a portable device with a FAT32 formatted hard disk in it, and
> everytime I delete a file in the device *using the device itself to do
> it* the device increases its count of free space and if I plug the
> device in a Windows system, Windows agrees on the free space. Linux
> doesn't. Linux believes that the files are still there ocuppying space,
> and I have to run fsck.vfat to fix the problem.
As I remember: It needs a large amount of time to calculate the free space on 
a big FAT32 system. So the last free sector count is also stored. When 
mounting this filesystem you don't need to walk through the whole FAT to 
calculate the available space, you can use this "cached" value instead. And 
this cached value seems not to be updated in your portable device.
Maybe it helps, but maybe I'm wrong.
Juergen
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/