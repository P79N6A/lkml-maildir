Date: Mon, 18 Sep 2006 03:13:52 +0200
From: Ingo Molnar <>
Subject: Re: tracepoint maintainance models
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/9/17/129

* Karim Yaghmour <karim@opersys.com> wrote:
> Ingo Molnar wrote:
> > yeah. If you look at the API suggestions i made, they are such. There 
> > can be differences though to 'static tracepoints used by static 
> > tracers': for example there's no need to 'mark' a static variable, 
> > because dynamic tracers have access to it - while a static tracer would 
> > have to pass it into its trace-event function call.
> 
> That has been your own personal experience of such things. Fortunately 
> by now you've provided to casual readers ample proof that such 
> experience is but limited and therefore misleading. The fact of the 
> matter is that *mechanisms* do not "magically" know what detail is 
> necessary for a given event or how to interpret it: only *markup* does 
> that.
Karim, i dont usually reply if you insult me (and you've grown a habit 
of that lately ), but this one is almost parodic. To understand my 
point, please consider this simple example of a static in-source markup, 
to be used by a dynamic tracer:
  static int x;
  void func(int a)
  {
       ...
       MARK(event, a);
       ...
  }
if a dynamic tracer installs a probe into that MARK() spot, it will have 
access to 'a', but it can also have access to 'x'. While a static 
in-source markup for _static tracers_, if it also wanted to have the 'x' 
information, would also have to add 'x' as a parameter:
	MARK(event, a, x);
thus for example value of the variable 'x' would be passed to the 
function that does the static tracing. For dynamic tracers no such 
'parameter preparation' instructions would need to be generated by gcc. 
(thus for example the runtime overhead would be lower for inactive 
tracepoints)
hence, in this specific example, there is a real difference between the 
markup needed for dynamic tracers, compared to the markup needed for 
static tracers - to achieve the same end-result of passing (event,a,x) 
to the tracer.
	Ingo
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/