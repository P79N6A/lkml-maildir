Date: Sun, 4 May 2008 22:32:45 +0200
From: Ingo Molnar <>
Subject: [patch] video: cinergyT2 build fix
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/5/4/263

x86.git testing found the following build bug in v2.6.26-rc1:
  drivers/built-in.o: In function `cinergyt2_probe':
  cinergyT2.c:(.text+0xb6117): undefined reference to `input_allocate_device'
  cinergyT2.c:(.text+0xb6230): undefined reference to `input_register_device'
  cinergyT2.c:(.text+0xb623d): undefined reference to `input_free_device'
with the following config:
  
http://redhat.com/~mingo/misc/config-Sun_May__4_22_06_54_CEST_2008.bad
The reason for the bug is that the cinergyT2 driver depends on 
CONFIG_INPUT functionality, but if INPUT is modular it's still possible 
to build CONFIG_DVB_CINERGYT2=y - which leads to missing symbols.
The solution is to make DVB_CINERGYT2 dependent on INPUT.
[ This solves the build problem - i have not tested the driver on this card. ]
Signed-off-by: Ingo Molnar <mingo@elte.hu>
---
 drivers/media/dvb/cinergyT2/Kconfig |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)
Index: linux/drivers/media/dvb/cinergyT2/Kconfig
===================================================================
--- linux.orig/drivers/media/dvb/cinergyT2/Kconfig
+++ linux/drivers/media/dvb/cinergyT2/Kconfig
@@ -1,6 +1,6 @@
 config DVB_CINERGYT2
 	tristate "Terratec CinergyT2/qanu USB2 DVB-T receiver"
-	depends on DVB_CORE && USB
+	depends on DVB_CORE && USB && INPUT
 	help
 	  Support for "TerraTec CinergyT2" USB2.0 Highspeed DVB Receivers
 