Date: Tue, 13 Feb 2007 11:58:02 -0800
From: Andreas Gruenbacher <>
Subject: Re: Bug in current -git tree causing dbus and gnome to chew up cpu time
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/2/13/258

On Tuesday 13 February 2007 11:51, Greg KH wrote:
> Hi,
>
> I've used 'git bisect' to track down a change in the latest git tree
> that is causing dbus-daemon to sit and spin at the time GNOME launches,
> preventing nautlius from ever running.
>
> The bad commit is:
> commit eb3dfb0cb1f4a44e2d0553f89514ce9f2a9fcaf1
> Author: Andreas Gruenbacher <agruen@suse.de>
> Date:   Mon Feb 12 00:51:47 2007 -0800
>
>     [PATCH] Fix d_path for lazy unmounts
>
> With that patch out, GNOME startup works just fine.  I have a strace of
> the dbus process running showing the problem, if anyone thinks that will
> help out any.
I'd like to see that, please.
> I'm running pretty new GNOME and dbus here:
> 	dbus 1.0.2
> 	gnome 2.16.2
> 	hal 0.5.7.1
> 	nautilus 2.16.3
>
> Any ideas of things I can test?
Sorry for the breakage. Printk of the __d_path result may tell:
Index: b/fs/dcache.c
===================================================================
--- a/fs/dcache.c
+++ b/fs/dcache.c
@@ -1803,6 +1803,8 @@ char *__d_path(struct dentry *dentry, st
 out:
        spin_unlock(&dcache_lock);
+	printk(KERN_DEBUG "%s(%d): %s\n", current->comm, current->pid,
+	       IS_ERR(buffer) ? "failed" : buffer);
	return buffer;
 global_root:
Thanks,
Andreas
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/