Date: Sun, 30 Dec 2007 15:57:59 -0500
From: Richard Harman <>
Subject: Re: [PATCH] Option to disable AMD C1E (allows dynticks to work)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/12/30/200

Eduard-Gabriel Munteanu wrote:
> On Sun, 30 Dec 2007 03:49:21 +0200
> 
> Note that this problem is only related to AMD64 multi-core laptops. As
> far as I can see, devs might not invest much coding effort into this
> and instead say "Go buy an Intel laptop!", as this really is a hardware
> quirk. And if Andi Kleen is correct, this is not just a laptop vendors'
> problem, but AMD itself doesn't offer support for higher C-states.
> 
I think I may have a monkey wrench to throw into this, I finally got 
around to testing the C1E patch, and the port80 patch.  End result: 
port80 patch has zero effect on this laptop, and the C1E patch makes it 
stable.
AMD C1E patch 'force_amd_c1e' (disabling the workaround):
hpet0: at MMIO 0xfed00000, IRQs 2, 8, 31
hpet0: 3 32-bit timers, 25000000 Hz
Time: hpet clocksource has been installed.
Clockevents: could not switch to one-shot mode: lapic is not functional.
Could not switch to high resolution mode on CPU 0
Clockevents: could not switch to one-shot mode: lapic is not functional.
Could not switch to high resolution mode on CPU 1
And with the C1E workaround enabled, the kernel doesn't whine that the 
lapic isn't functional.
Those were the kernel messages I was trying to paste in my earlier 
message, saying that the lapic works.  Do I have a DV6000 laptop that is 
a strange beast all in itself?