Date: Mon, 20 Mar 2000 10:12:42 -0600
From:  nathan.zook@amd ...
Subject: RE: Where is memory handed out?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/3/20/150

You are discussing the end of memory detection/initialization, and there are
a couple of things I am still a bit fuzzy over, but here goes....
First, these matters are arch-specific.  If you are x86, read on.
The files at issue are arch/i386/kernel/setup.c and arch/i386/mm/init.c.
Both free mempages, the first in the first 1G, the second in the rest of
memory.  You should be able to directly modify the tests for activating a
page to exclude your problem areas.
Of course, this is a system-by-system hand-patched fix.  We are working to
permit a user to specify sections of memory to exclude. (ie: smap=20M-24M:X)
Nathan Zook
> -----Original Message-----
> From: vanrein@cs.utwente.nl [mailto:vanrein@cs.utwente.nl]
> Sent: Friday, March 17, 2000 4:07 AM
> To: linux-kernel@vger.rutgers.edu
> Subject: Where is memory handed out?
> 
> 
> Hi!
> 
> I'm working on a memory subsystem patch to deal with faulty RAM, for
> instance caused by static electricity or production failures. I have
> everything in place and working except for one thing: 
> Avoiding that the
> faulty pages can get allocated.
> 
> There must be a place where physical memory, after chunks are 
> taken off of
> the beginning (for page maps etc), actually are handed out to 
> the free_area
> structures, through something like __free_pages. But that 
> routine does not
> seem to be called from such code, and neither are the remap 
> routines (only
> called from drivers).
> 
> Can anybody tell me where/how the "whole" of physical memory 
> is handed over
> to the free_area structures?
> 
> Thanx a lot,
> -Rick.
> 
> -
> To unsubscribe from this list: send the line "unsubscribe 
> linux-kernel" in
> the body of a message to majordomo@vger.rutgers.edu
> Please read the FAQ at 
http://www.tux.org/lkml/
> 
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/