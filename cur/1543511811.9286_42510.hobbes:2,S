Date: Wed, 6 Oct 1999 21:47:18 +0200 (CEST)
From: Peter Hanecak <>
Subject: [2.2.13-pre15] "Unable to handle kernel paging request" in free_inodes
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/10/6/150

bug-report in "/usr/src/linux/REPORTING-BUGS" format
[1.]
i got an kernel oops in free_inodes
[2.]
while running file search on / (including mounted filesystems) i got few
OOPs messages in /var/log/messages. machine did not hang up. also starting
another processes was possible (as opposed to previously reported OOPs in
d_lookup - subject "[2.2.13pre15] null pointer exception in d_lookup").
search was running for about 2-3 minutes.
when running search again, no OOPs showed (maybe due to caching - on of
features which makes big difference between 2.0.X and 2.2.X kernels). but
find process was unstopable (via Ctrl+C) then. 'kill -9' did not worked.
'ps' showed following:
hany     19942  0.1  0.4  1220  512 ?        D    20:52   0:01 find / -name *.wav
hany     20090  0.1  0.4  1220  520 ttyp2    D    21:05   0:00 find / -name *.wav
firs one is first (or second?) search attempt after seeing oopses. i killed
while window, whereit was running. second one is second (third?) search
attempt after oopses.
at the time i war running netscape, few Eterms and xmms (playing via esd,
but right before "incident" it was "playing" through disk (i.e. saving
output in .wav format to local ex2 fs on my SCSI disk) + Mesa visualisation.
in process of shutdown i found following:
- snmpd, lpd and syslogd weren't running (they diey maybe dirung or after
oops)
- when unmounting NFS filesystems, 1 OOPs apears on console (sorry, i did
not take a note of it)
- when trying to shut down eth0 interface, shutdown sequence hangs
(Alt+Ctrl+Fx and Ctrl|Shift+ScrollLock worked)
when trying to reproduce error right after reboot i did following:
find / -mount -name "*.wav"	<OK>
xmms playing to disc		<OK>
both				<OK>
find / -name "*.wav"		<OK>
so ... no success making it again.
no such error occured during usage of previous 2.2.13-preX kernels (tied
pre8, pre9, pre11 and pre14). also nothing similar when using 2.2.12 and
earlier (this do not means i did not encounter no errors at all :) - see my
prevoius posts regarding instant freezes).
[3.]
kernel, null pointer
[4.]
Linux version 2.2.13pre15 (root@m1.megaloman.sk) (gcc version egcs-2.91.66 \
19990314/Linux (egcs-1.1.2 release)) #3 Tue Oct 5 10:25:44 EDT 1999
[5.]
ksymoops 0.7c on i586 2.2.13pre15.  Options used
     -V (default)
     -k /proc/ksyms (default)
     -l /proc/modules (default)
     -o /lib/modules/2.2.13pre15/ (default)
     -m /boot/System.map-2.2.13-pre15 (specified)
No modules in ksyms, skipping objects
Warning (read_lsmod): no symbols in lsmod, is /proc/modules a valid lsmod file?
Oct  6 20:51:47 m1 kernel: Unable to handle kernel paging request at virtual address 67396739 
Oct  6 20:51:47 m1 kernel: current->tss.cr3 = 068f5000, %cr3 = 068f5000 
Oct  6 20:51:47 m1 kernel: *pde = 00000000 
Oct  6 20:51:47 m1 kernel: Oops: 0000 
Oct  6 20:51:47 m1 kernel: CPU:    0 
Oct  6 20:51:47 m1 kernel: EIP:    0010:[free_inodes+38/128] 
Oct  6 20:51:47 m1 kernel: EFLAGS: 00010a83 
Oct  6 20:51:47 m1 kernel: eax: 67396739   ebx: 67396739   ecx: c7ca8ee0   edx: c7ca8000 
Oct  6 20:51:47 m1 kernel: esi: c6917ec4   edi: 67396739   ebp: 00000001   esp: c6917ebc 
Oct  6 20:51:47 m1 kernel: ds: 0018   es: 0018   ss: 0018 
Oct  6 20:51:47 m1 kernel: Process find (pid: 19927, process nr: 75, stackpage=c6917000) 
Oct  6 20:51:47 m1 kernel: Stack: c023071c c0264de0 c7ca8008 c6a39218 c012f8f2 00000000 c012f942 00001006  
Oct  6 20:51:47 m1 kernel:        00000000 c0264de0 c023071c c0264de0 c0264dd8 c012fc7d c78d2110 c012fc89  
Oct  6 20:51:47 m1 kernel:        00000000 c0264de0 0000b98b c7fc0c00 c012fdd0 c7fc0c00 0000b98b c0264de0  
Oct  6 20:51:47 m1 kernel: Call Trace: [try_to_free_inodes+10/52] [grow_inodes+30/372] [get_new_inode+173/280] [get_new_inode+185/280] [iget+88/96] [ext2_lookup+84/124] [real_lookup+85/132]  
Oct  6 20:51:47 m1 kernel: Code: 8b 3f 8b 43 14 0b 43 7c 75 ec 8b 03 8b 53 04 89 50 04 89 02  
Using defaults from ksymoops -t elf32-i386 -a i386
Code;  00000000 Before first symbol
00000000 <_EIP>:
Code;  00000000 Before first symbol
   0:   8b 3f                     movl   (%edi),%edi
Code;  00000002 Before first symbol
   2:   8b 43 14                  movl   0x14(%ebx),%eax
Code;  00000005 Before first symbol
   5:   0b 43 7c                  orl    0x7c(%ebx),%eax
Code;  00000008 Before first symbol
   8:   75 ec                     jne    fffffff6 <_EIP+0xfffffff6> fffffff6 <END_OF_CODE+3fd7cfb2/????>
Code;  0000000a Before first symbol
   a:   8b 03                     movl   (%ebx),%eax
Code;  0000000c Before first symbol
   c:   8b 53 04                  movl   0x4(%ebx),%edx
Code;  0000000f Before first symbol
   f:   89 50 04                  movl   %edx,0x4(%eax)
Code;  00000012 Before first symbol
  12:   89 02                     movl   %eax,(%edx)
Oct  6 20:51:47 m1 kernel: Unable to handle kernel paging request at virtual address 67396739 
Oct  6 20:51:47 m1 kernel: current->tss.cr3 = 033f1000, %cr3 = 033f1000 
Oct  6 20:51:47 m1 kernel: *pde = 00000000 
Oct  6 20:51:47 m1 kernel: Oops: 0000 
Oct  6 20:51:47 m1 kernel: CPU:    0 
Oct  6 20:51:47 m1 kernel: EIP:    0010:[free_inodes+38/128] 
Oct  6 20:51:47 m1 kernel: EFLAGS: 00010a83 
Oct  6 20:51:47 m1 kernel: eax: 67396739   ebx: 67396739   ecx: c023071c   edx: 00001006 
Oct  6 20:51:47 m1 kernel: esi: c4c03eac   edi: 67396739   ebp: 00000000   esp: c4c03ea4 
Oct  6 20:51:47 m1 kernel: ds: 0018   es: 0018   ss: 0018 
Oct  6 20:51:47 m1 kernel: Process esd (pid: 1369, process nr: 59, stackpage=c4c03000) 
Oct  6 20:51:47 m1 kernel: Stack: bffffac0 bffffac0 c4c03eac c4c03eac c012f8f2 00000004 c012f942 00001006  
Oct  6 20:51:47 m1 kernel:        00000004 c313390c bffffac0 bffffac0 c8804108 c0109508 c88040d8 c012fbc5  
Oct  6 20:51:47 m1 kernel:        00000004 c313390c c016e913 00000004 c313390c c016f20d 00000004 00001000  
Oct  6 20:51:47 m1 kernel: Call Trace: [try_to_free_inodes+10/52] [grow_inodes+30/372] [<c8804108>] [common_interrupt+24/32] [<c88040d8>] [get_empty_inode+141/152] [sock_alloc+7/140]  
Oct  6 20:51:47 m1 kernel: Code: 8b 3f 8b 43 14 0b 43 7c 75 ec 8b 03 8b 53 04 89 50 04 89 02  
Code;  00000000 Before first symbol
00000000 <_EIP>:
Code;  00000000 Before first symbol
   0:   8b 3f                     movl   (%edi),%edi
Code;  00000002 Before first symbol
   2:   8b 43 14                  movl   0x14(%ebx),%eax
Code;  00000005 Before first symbol
   5:   0b 43 7c                  orl    0x7c(%ebx),%eax
Code;  00000008 Before first symbol
   8:   75 ec                     jne    fffffff6 <_EIP+0xfffffff6> fffffff6 <END_OF_CODE+3fd7cfb2/????>
Code;  0000000a Before first symbol
   a:   8b 03                     movl   (%ebx),%eax
Code;  0000000c Before first symbol
   c:   8b 53 04                  movl   0x4(%ebx),%edx
Code;  0000000f Before first symbol
   f:   89 50 04                  movl   %edx,0x4(%eax)
Code;  00000012 Before first symbol
  12:   89 02                     movl   %eax,(%edx)
Oct  6 20:55:02 m1 kernel: Unable to handle kernel paging request at virtual address 67f0080c 
Oct  6 20:55:02 m1 kernel: current->tss.cr3 = 0789c000, %cr3 = 0789c000 
Oct  6 20:55:02 m1 kernel: *pde = 00000000 
Oct  6 20:55:02 m1 kernel: Oops: 0000 
Oct  6 20:55:02 m1 kernel: CPU:    0 
Oct  6 20:55:02 m1 kernel: EIP:    0010:[free_inodes+38/128] 
Oct  6 20:55:02 m1 kernel: EFLAGS: 00010a83 
Oct  6 20:55:02 m1 kernel: eax: 67f0080c   ebx: 67f0080c   ecx: c0265008   edx: 00001006 
Oct  6 20:55:02 m1 kernel: esi: c782fe68   edi: 67f0080c   ebp: 00000000   esp: c782fe60 
Oct  6 20:55:02 m1 kernel: ds: 0018   es: 0018   ss: 0018 
Oct  6 20:55:02 m1 kernel: Process snmpd (pid: 433, process nr: 18, stackpage=c782f000) 
Oct  6 20:55:02 m1 kernel: Stack: c023071c c0265008 c782fe68 c782fe68 c012f8f2 00000000 c012f942 00001006  
Oct  6 20:55:02 m1 kernel:        00000000 c0265008 c023071c c0265008 c7fc0a00 c012fdd0 c7fc0a00 c012fc89  
Oct  6 20:55:02 m1 kernel:        00000000 c0265008 00000083 c7fc0a00 c012fdd0 c7fc0a00 00000083 c0265008  
Oct  6 20:55:02 m1 kernel: Call Trace: [try_to_free_inodes+10/52] [grow_inodes+30/372] [iget+88/96] [get_new_inode+185/280] [iget+88/96] [proc_get_inode+62/240] [hfs_version+25459/26275]  
Oct  6 20:55:02 m1 kernel: Code: 8b 3f 8b 43 14 0b 43 7c 75 ec 8b 03 8b 53 04 89 50 04 89 02  
Code;  00000000 Before first symbol
00000000 <_EIP>:
Code;  00000000 Before first symbol
   0:   8b 3f                     movl   (%edi),%edi
Code;  00000002 Before first symbol
   2:   8b 43 14                  movl   0x14(%ebx),%eax
Code;  00000005 Before first symbol
   5:   0b 43 7c                  orl    0x7c(%ebx),%eax
Code;  00000008 Before first symbol
   8:   75 ec                     jne    fffffff6 <_EIP+0xfffffff6> fffffff6 <END_OF_CODE+3fd7cfb2/????>
Code;  0000000a Before first symbol
   a:   8b 03                     movl   (%ebx),%eax
Code;  0000000c Before first symbol
   c:   8b 53 04                  movl   0x4(%ebx),%edx
Code;  0000000f Before first symbol
   f:   89 50 04                  movl   %edx,0x4(%eax)
Code;  00000012 Before first symbol
  12:   89 02                     movl   %eax,(%edx)
Oct  6 20:55:08 m1 kernel: Unable to handle kernel paging request at virtual address fffff774 
Oct  6 20:55:08 m1 kernel: current->tss.cr3 = 01e1e000, %cr3 = 01e1e000 
Oct  6 20:55:08 m1 kernel: *pde = 00000000 
Oct  6 20:55:08 m1 kernel: Oops: 0000 
Oct  6 20:55:08 m1 kernel: CPU:    0 
Oct  6 20:55:08 m1 kernel: EIP:    0010:[free_inodes+38/128] 
Oct  6 20:55:08 m1 kernel: EFLAGS: 00010206 
Oct  6 20:55:08 m1 kernel: eax: 33f9fbff   ebx: fffff774   ecx: c023071c   edx: 00001006 
Oct  6 20:55:08 m1 kernel: esi: c4a95ef8   edi: fffff774   ebp: 00000000   esp: c4a95ef0 
Oct  6 20:55:08 m1 kernel: ds: 0018   es: 0018   ss: 0018 
Oct  6 20:55:08 m1 kernel: Process gnomexmms (pid: 19910, process nr: 78, stackpage=c4a95000) 
Oct  6 20:55:08 m1 kernel: Stack: 00000001 c0279d00 c4a95ef8 c4a95ef8 c012f8f2 00000001 c012f942 00001006  
Oct  6 20:55:08 m1 kernel:        00000001 00000004 00000001 c0279d00 c017c819 c1be4040 00000000 c012fbc5  
Oct  6 20:55:08 m1 kernel:        00000001 00000004 c016e913 00000001 00000004 c016ef55 00000001 08091860  
Oct  6 20:55:08 m1 kernel: Call Trace: [try_to_free_inodes+10/52] [grow_inodes+30/372] [tcp_poll+61/252] [get_empty_inode+141/152] [sock_alloc+7/140] [sock_create+117/200] [do_poll+123/220]  
Oct  6 20:55:08 m1 kernel: Code: 8b 3f 8b 43 14 0b 43 7c 75 ec 8b 03 8b 53 04 89 50 04 89 02  
Code;  00000000 Before first symbol
00000000 <_EIP>:
Code;  00000000 Before first symbol
   0:   8b 3f                     movl   (%edi),%edi
Code;  00000002 Before first symbol
   2:   8b 43 14                  movl   0x14(%ebx),%eax
Code;  00000005 Before first symbol
   5:   0b 43 7c                  orl    0x7c(%ebx),%eax
Code;  00000008 Before first symbol
   8:   75 ec                     jne    fffffff6 <_EIP+0xfffffff6> fffffff6 <END_OF_CODE+3fd7cfb2/????>
Code;  0000000a Before first symbol
   a:   8b 03                     movl   (%ebx),%eax
Code;  0000000c Before first symbol
   c:   8b 53 04                  movl   0x4(%ebx),%edx
Code;  0000000f Before first symbol
   f:   89 50 04                  movl   %edx,0x4(%eax)
Code;  00000012 Before first symbol
  12:   89 02                     movl   %eax,(%edx)
1 warning issued.  Results may not be reliable.
[6.]
xmms playing to disk (audio output directed to local ex2 fs on SCSI disk)
and/or
[hany@m1 ~]$ find / -name "*.wav"
[7.]
[7.1.]
-- Versions installed: (if some fields are empty or looks
-- unusual then possibly you have very old versions)
Linux m1.megaloman.sk 2.2.13pre15 #3 Tue Oct 5 10:25:44 EDT 1999 i586 unknown
Kernel modules         2.1.121
Gnu C                  egcs-2.91.66
Binutils               2.9.1.0.23
Linux C Library        2.1.2
Dynamic linker         ldd (GNU libc) 2.1.2
Procps                 2.0.2
Mount                  2.9s
Net-tools              1.53
Console-tools          1999.03.02
Sh-utils               1.16
Modules Loaded         
[7.2.]
processor       : 0
vendor_id       : GenuineIntel
cpu family      : 5
model           : 4
model name      : Pentium MMX
stepping        : 3
cpu MHz         : 200.458734
fdiv_bug        : no
hlt_bug         : no
sep_bug         : no
f00f_bug        : yes
coma_bug        : no
fpu             : yes
fpu_exception   : yes
cpuid level     : 1
wp              : yes
flags           : fpu vme de pse tsc msr mce cx8 mmx
bogomips        : 399.77
[7.3.]
no modules
[7.4.]
Attached devices: 
Host: scsi0 Channel: 00 Id: 01 Lun: 00
  Vendor: SEAGATE  Model: ST51080N         Rev: 0913
  Type:   Direct-Access                    ANSI SCSI revision: 02
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/