Date: Mon, 11 Mar 2002 10:02:00 -0500
From: Jay Estabrook <>
Subject: Re: Busmaster DMA broken in 2.4.18 on Alpha
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/3/11/16

On Mon, Mar 11, 2002 at 05:10:58PM +0300, Ivan Kokshaysky wrote:
> On Mon, Mar 11, 2002 at 12:45:11PM +0100, Kurt Garloff wrote:
> > Unfortunately, your ISA card does not seem to be able to address 32 bits.
> > (I guess no non-on-chip ISA adapter will.)
> 
> No, the ability to address 32 bits is property of an ISA bridge, not
> of any particular ISA card or device. 
That's not quite true, either.
There are ISA cards, regardless of what ISA bus machine they are
plugged into, that are able to generate only something less than
32-bits worth of address. I believe that the Adaptec 1540 SCSI
controller is one of these, since I had some exposure to its
limitations a while ago; it can generate only 24-bit addresses, IIRC.
Since ISA devices don't have pci_dev structures, there's (currently)
no way to pass an ISA device-dependent DMA mask to the IOMMU routines.
Perhaps there needs to be an addition to the API that would allow
for this (pci_set_isa_device_dma_mask()) ???
> Most alphas do have 32-bit ISA DMA.
True. For those notable exceptions (XL, Ruffian, Nautilus), we can still
depend on the MAX_DMA_ADDRESS to override any device-dependent mask.
--Jay++
-----------------------------------------------------------------------------
Jay A Estabrook                            Alpha Engineering - LINUX Project
Compaq Computer Corp. - MRO1-2/K15         (508) 467-2080
200 Forest Street, Marlboro MA 01752       Jay.Estabrook@compaq.com
-----------------------------------------------------------------------------
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/