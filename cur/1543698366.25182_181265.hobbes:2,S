Date: Tue, 2 Dec 2003 23:13:05 +0000 (UTC)
From: Erik Hensema <>
Subject: 2.6.0-test11: crash in de2104x driver after promisc mode
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/12/2/204

Hi,
Today I upgraded my home server to 2.6.0-test11. I'm experiencing the crash
reported in:
http://marc.theaimsgroup.com/?l=linux-kernel&m=106718982223037&w=2
Basically the box hangs when I put my eth0 into promiscious mode, or
shortly after it.
I was using the de2104x driver, but I switched to the de4x5 driver, which
works fine.
Hardware:
tulip-diag.c:v2.17 5/6/2003 Donald Becker (becker@scyld.com)
 
http://www.scyld.com/diag/index.html
[eth0, uses de4x5:]
Index #1: Found a Digital DC21041 Tulip adapter at 0xbc00.
 Port selection is half-duplex.
 Transmit started, Receive started.
  The Rx process state is 'Waiting for packets'.
  The Tx process state is 'Idle'.
  The transmit unit is set to store-and-forward.
  The NWay status register is 000001c8.
    100baseTx link good.
    10baseT link good.
  Internal autonegotiation state is 'Autonegotiation disabled'.
[eth1, uses tulip:]
Index #2: Found a ADMtek AL985 Centaur-P adapter at 0xc000.
 Comet duplex is reported in the MII status registers.
 Transmit started, Receive started.
  The Rx process state is 'Waiting for packets'.
  The Tx process state is 'Idle'.
  The transmit threshold is 128.
  Comet MAC address registers 99bf5000 ffff75e1
  Comet multicast filter 8200000041000020.
 Use '-a' or '-aa' to show device registers,
     '-e' to show EEPROM contents, -ee for parsed contents,
  or '-m' or '-mm' to show MII management registers.
Another problem is that I can't reach ntpd over the network. Otherwise it
seems to work fine. I haven't investigated this at all yet, though.
-- 
Erik Hensema <erik@hensema.net>
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/