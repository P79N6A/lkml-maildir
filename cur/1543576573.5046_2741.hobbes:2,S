Date: Sun, 24 Dec 2000 01:21:44 +0100
From: Andreas Franck <>
Subject: Re: Fatal Oops on boot with 2.4.0testX and recent GCC snapshots
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/12/23/78

The story continues, citing myself:
> Hmm, would have been nice, but it crashes here with 20001222, nevertheless. 
> For which CPU do you have your kernel configured? It might be a CPU 
> specific issue, I'll try to compile for Pentium I and 486, now, and report
> my results.
It does not seem CPU specific, breaks for both 486 and Pentium with the same 
error.
> It would also be nice to know if this is a gcc issue or a kernel issue - if 
> I knew which precise file was responsible for the crash, I could compare 
> the assembly output for stable and snapshot GCC. My suspect is
> kernel/sched.c, but this might be wrong, as the story begins on the launch 
> of kupdate in fs/buffer.c.
And this is where everything seems to go wrong: When I compile buffer.c with 
2.95.2, and link everything together, the kernel magically boots without any 
complaints; later on something starts crashing badly, but this might be other 
issues that can be investigated later on.
> But now I have almost no clue what really goes wrong
... and now I have a bit more, and the suspection that something broke the 
way in which the kernel_thread function (arch/i386/kernel/process.c) wants to 
start the kernel threads, here bdflush and kupdate. I don't understand all 
issues completely, but something seems to have changed.
Attached are the relevant (?) portions of the assembly output for buffer.c: 
kupdate, bdflush and bdflush_init, compiled with 2.95.2 and 2.97, 
respectively. Perhaps someone could look over it?
Thanks and happy hacking,
Andreas
-- 
->>>----------------------- Andreas Franck --------<<<-
---<<<---- Andreas.Franck@post.rwth-aachen.de --->>>---
->>>---- Keep smiling! ----------------------------<<<-
[unhandled content-type:application/x-troff][unhandled content-type:application/x-troff]