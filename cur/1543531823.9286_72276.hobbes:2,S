Date: Sun, 26 Mar 2000 16:23:14 +0200
From: Manfred Spraul <>
Subject: Re: PROBLEM: Oops 2 with 2.2.14/smp on new HP hardware
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/3/26/65

I looked through your oops repoort, and the report describes an
impossible sequence:
the copy operation to user space failed, but this cannot fail: an
exception handler is installed, and that catches any exceptions.
Which linker/compiler are you using?
	sh /usr/src/linux/scripts/ver_linux
Is that the first oops, or has there been another oopses since the last
reboot?
Could you try the attached test program? gettimeofday() should return
-1, errno=14 [EFAULT]
And could you send me the memory map of a running 'mar15d' process?
	cat /proc/<pid>/maps
--
	Manfred#include <unistd.h>
#include <sys/time.h>
#include <stdlib.h>
#include <stdio.h>
#include <errno.h>
void a_read_only_filler_function(void)
{
	printf("something.\n");
}
int main() 
{
	int ret;
	printf("testtime.\n");
	ret = gettimeofday((void*)a_read_only_filler_function,NULL);
	printf("returned: %d, errno %d.\n", ret, errno);
	ret = gettimeofday((void*)0x400e340,NULL);
	printf("returned: %d, errno %d.\n", ret, errno);
	return 0;
}