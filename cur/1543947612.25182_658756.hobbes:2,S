Date: Sat, 23 Feb 2008 10:46:11 -0800
From: Andrew Morton <>
Subject: Re: [PATCH] x86: add the debugfs interface for the sysprof tool
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/2/23/282

On Sat, 23 Feb 2008 13:51:34 +0200 "Pekka Enberg" <penberg@cs.helsinki.fi> wrote:
> On Sat, Feb 23, 2008 at 10:11 AM, Andrew Morton
> <akpm@linux-foundation.org> wrote:
> >  Seems a poor idea to me.  Sure, oprofile is "hard to set up", but not if
> >  your distributor already did it for you.
> 
> Have you tried sysprof? It's really nice to setup and use compared to
> oprofile when profiling user-space.
Wanna see how I use oprofile?
box:/home/akpm> akpm-oprofile gcc t.c
Daemon not running
Daemon not running
Using 2.6+ OProfile kernel interface.
Reading module info.
Using log file /var/lib/oprofile/oprofiled.log
Daemon started.
Profiler running.
t.c:6:12: error: token ""x"" is not valid in preprocessor expressions
real    0m0.262s
user    0m0.004s
sys     0m0.004s
Stopping profiling.
Stopping profiling.
Killing daemon.
CPU: CPU with timer interrupt, speed 0 MHz (estimated)
Profiling through timer interrupt
samples  %        symbol name
625      99.2063  mwait_idle
1         0.1587  __handle_mm_fault
1         0.1587  clear_page
1         0.1587  do_page_fault
1         0.1587  flush_tlb_page
1         0.1587  pfn_valid
box:/home/akpm> 
One thirteen-character command!  Why?  Because I actually got off my butt
and wrote a script to hide low-level details.  I wrote the thing five years
ago and don't remember anything about what's in it.
I didn't need to write a new kernel module to enable that
thirteen-character shell script, and I don't believe one needs to write a
new kernel module to put a nice easy-to-use GUI around oprofile either.
This is one of those i-cant-believe-im-having-this-discussion discussions.