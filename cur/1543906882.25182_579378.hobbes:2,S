Date: Sun, 05 Aug 2007 01:13:36 -0400
From: Steven Rostedt <>
Subject: [BUG RT] WARNING: at kernel/sched.c:5071 2.6.23-rc1-rt7
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/8/5/11

Ingo,
The below ifndef, shouldn't that be ifndef CONFIG_PREEMPT_SOFTIRQS ?
I hit that warning while I was running !PREEMPT_RT but with both hard
and softiqs as threads.
int __sched cond_resched_softirq(void)
{
#ifndef CONFIG_PREEMPT_RT
	WARN_ON_ONCE(!in_softirq());
#endif
	if (need_resched() && system_state == SYSTEM_RUNNING) {
		local_bh_enable();
		__cond_resched();
		local_bh_disable();
		return 1;
	}
	return 0;
}
-- Steve
P.S. I really found out that the system becomes VERY non-responsive when
you run with both hard and softirqs as threads, but with
PREEMPT_NONE ;-)
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/