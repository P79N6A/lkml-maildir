Date: Sat, 23 Jun 2007 15:22:04 +0900
From: Tejun Heo <>
Subject: Re: SATA RAID5 speed drop of 100 MB/s
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/6/23/10

Carlo Wood wrote:
> For what it's worth... I tried applying
> 
> --- a/drivers/ata/ahci.c
> +++ b/drivers/ata/ahci.c
> @@ -516,6 +516,8 @@ static void ahci_save_initial_config(struct pci_dev *pdev,
>          * reset.  Values without are used for driver operation.
>          */
>         hpriv->saved_cap = cap = readl(mmio + HOST_CAP);
> +       hpriv->saved_cap &= ( (1<<28) | (1<<17) );
> +       hpriv->saved_cap |= (1 << 27);
>         hpriv->saved_port_map = port_map = readl(mmio + HOST_PORTS_IMPL);
Hmmm... That's super-odd.  You win my oddest-of-the-month award.  :-)
I'll think about it a bit.  Please stand by.
-- 
tejun
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/