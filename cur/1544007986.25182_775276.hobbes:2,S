Date: Mon, 1 Dec 2008 16:47:20 +1030
From: Rusty Russell <>
Subject: [PATCH 3/4] cpumask: cpu_coregroup_mask(): s390
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/12/1/18

Like cpu_coregroup_map, but returns a (const) pointer.
Signed-off-by: Rusty Russell <rusty@rustcorp.com.au>
Signed-off-by: Mike Travis <travis@sgi.com>
---
 arch/s390/include/asm/topology.h |    1 +
 arch/s390/kernel/topology.c      |    5 +++++
 2 files changed, 6 insertions(+)
diff -r 2d272f7b3a9b arch/s390/include/asm/topology.h
--- a/arch/s390/include/asm/topology.h	Thu Nov 20 13:55:47 2008 +1030
+++ b/arch/s390/include/asm/topology.h	Thu Nov 20 13:57:21 2008 +1030
@@ -6,6 +6,7 @@
 #define mc_capable()	(1)
 
 cpumask_t cpu_coregroup_map(unsigned int cpu);
+const struct cpumask *cpu_coregroup_mask(unsigned int cpu);
 
 extern cpumask_t cpu_core_map[NR_CPUS];
 
diff -r 2d272f7b3a9b arch/s390/kernel/topology.c
--- a/arch/s390/kernel/topology.c	Thu Nov 20 13:55:47 2008 +1030
+++ b/arch/s390/kernel/topology.c	Thu Nov 20 13:57:21 2008 +1030
@@ -91,6 +91,11 @@
 	if (cpus_empty(mask))
 		mask = cpumask_of_cpu(cpu);
 	return mask;
+}
+
+const struct cpumask *cpu_coregroup_mask(unsigned int cpu)
+{
+	return &cpu_core_map[cpu];
 }
 
 static void add_cpus_to_core(struct tl_cpu *tl_cpu, struct core_info *core)