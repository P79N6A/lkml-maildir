Date: 12 Dec 2001 22:54:33 +0100
From: Zlatko Calusic <>
Subject: Re: emu10k1 - interrupt storm?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/12/12/161

Rui Sousa <rui.p.m.sousa@clix.pt> writes:
> 
> Yes. Start by checking the audio format used
> (sample bytes, sample rate, channels) and buffering parameters
> (fragment size). The interrupt rate is:
> 
> fragment_size / ( sample_rate * sample_bytes * channels) irq/s
> 
> 
> Also if the timer rate is screwed up you should see a lot of
> (from emu10k1_waveout_bh() in audio.c)
> 
> DPD(3, "Not enough transfer size -> %d\n", bytestocopy);
> 
> going like 64, 128, 192, 64, 128, 192 if for example you
> have a fragment of 256 bytes and the clock rate is 4 times what
> it should.
> 
As I don't know much about the sound drivers, I hope debug output will
be helpful to see what's really going wrong here. Beware, the
compression ratio is very high. :)
The output is from gnome startup till the gnome logout (just a few
seconds, as I expected lots of output). Notice that gnome produces
sound at the startup and also at logout, so the relevant part is
somewhere in the middle of the output. DEBUG_LEVEL was set at 4.
[unhandled content-type:application/octet-stream]
-- 
Zlatko