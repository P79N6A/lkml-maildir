Date: Sun, 16 Jan 2005 15:25:21 -0500
From: Mike Houston <>
Subject: Re: 2.6.10 dies when X tries to initialize PCI radeon 9200 SE
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/1/16/158

On Sun, 16 Jan 2005 13:18:23 +0100
Helge Hafting <helgehaf@aitel.hist.no> wrote:
> On Sun, Jan 16, 2005 at 06:04:32AM -0500, Jon Smirl wrote:
> > you need to check the output from "modprobe drm debug=1" "modprobe
> > radeon" and see if drm is misidentifying the board as AGP. We
> > don't want to fix something if it isn't broken.
> > 
> Stupid question - how do I get a modular drm?
> I usually make everything compiled-in with no module support.
> But now I made a kernel with module support and selected "M"
> for the agp stuff and for the radeon and matrox DRM support.
> But DRM itself will only accept Yes or No, Module is not an
> option there with "make menuconfig".  So I can load
> and unload the radeon module now, but there is no DRM module.
> loading/unloading radeon gives me messages from DRM about this
> happening, but DRM itself is compiled in so I can't modprobe it
> with that debug parameter.
> 
> Is there perhaps something in some other menu that needs to be (M)
> before (M) becomes an option for DRM?
> 
> Helge Hafting
Hello,
I can help shed a bit of light on this particular discrepancy. It's
only very recently that "drm" itself has been selectable as a
separate module. In plain 2.6.10 it hasn't happened yet. (I noticed it
when doing 2.6.11-rc1)
In 2.6.10 the "direct rendering manager" choice just enables the other
DRM choices below it, and the DRM code was
built into your video card specific module.
Now, the "direct rendering manager" choice is now individually
selectable and when you modprobe your card specific module, it
loads "drm" as a dependent module.
e.g. from lsmod on my system with 2.6.11-rc1:
Module                  Size  Used by
radeon                 51584  1 
drm                      37012  2 radeon
intel_agp              11676  1 
agpgart                15272  2 drm,intel_agp
Where before there was no module "drm" and it was a fatter 90 kb
radeon module.
I hope you get your problem solved,
Mike
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/