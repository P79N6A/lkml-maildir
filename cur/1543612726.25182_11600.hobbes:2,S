Date: Sat, 08 Dec 2001 16:29:35 +0000
From: Padraig Brady <>
Subject: Re: horrible disk thorughput on itanium
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/12/8/85

Linus Torvalds wrote:
 > On Fri, 7 Dec 2001, Padraig Brady wrote:
 >
 >>glibc does this also?
 >>from /usr/include/libio.h
 >>
 >
 > Almost NOBODY uses "putc_unlocked()". It did not even _exist_ ten
 > years ago, and it's one of those POSIX things that very few people
 > are aware of.
There are loads of function macros like this in libio.h unfortunately,
so it would break binary compatability, albeit for a minority of
programs. For e.g. I know gnu textutils use the unlocked functions
(because I put them in :-(). This is what you get for exporting glibc
internal structures, high coupling/low cohesion for short-sighted
performance gains (but I suppose only hindsight is 20:20 :-)).
 > I know stdio is not historically the fastest way to do IO, but hey,
 > that's not an excuse for making it _really_ slow.
I absolutely agree, and this change is something that should definitely
be done for the next major version (7) (which will break binary
compatability).
Also since it wouldn't break source compatability it might be considered
important enough to change, but I doubt it (note the new unlocked
textutils have not been generally released yet).
Padraig.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/