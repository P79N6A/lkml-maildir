Date: 19 Jan 1999 16:59:45 +0100
From: Zlatko Calusic <>
Subject: Re: [PATCH] pre8/asm-i386/string.h + de4x5 -> no go
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/1/19/102

alan@lxorguk.ukuu.org.uk (Alan Cox) writes:
> > Hm, CDROM works correctly EXCEPT for ejecting.
> > 
> > >From my bootup messages you can see that CDROM is correctly
> > recognized, and that I successfully mounted two CD-s (so far):
> > 
> > hdc: TOSHIBA CD-ROM XM-6102B, ATAPI CDROM drive
> > hdc: ATAPI 24X CDROM drive, 256kB Cache]
> 
> Ok with your egcs it is building right. Thats fine
> 
> > It's only that I have to press button to eject them, where I used to
> > type "eject", and it worked correctly few days (weeks?), ago on the
> > same setup.
> 
> Does strace and the error codes give any clue ?
> 
> 
Peeking at strace output, it looks like CDROMEJECT is not supported,
but that can't be true.
ioctl(3, FIBMAP, 0x804ba20)             = -1 EINVAL (Invalid argument)
ioctl(3, CDROMEJECT, 0x4000b3f0)        = -1 EOPNOTSUPP (Operation not 
supported)
Looking at pre-8 changes in {ide-cd,cdrom}.[ch], I can't find anything
suspicious. Maybe CDROMEJECT got broken before, and I didn't notice
til' today?
{atlas} [/proc/sys/dev/cdrom]% cat info 
CD-ROM information, Id: cdrom.c 2.52 1999/01/16
drive name:             hdc
drive speed:            24
drive # of slots:       0
Can close tray:         1
Can open tray:          1
Can lock tray:          1
Can change speed:       1
Can select disk:        1
Can read multisession:  1
Can read MCN:           1
Reports media changed:  1
Can play audio:         1
-- 
Zlatko
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/