Date: Thu, 05 Apr 2007 11:21:11 +0800
From: "Wu, Bryan" <>
Subject: Re: [PATCH] blackfin arch: use boot_command_line instead of save_command_line in setup c file
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/4/4/630

On Wed, 2007-04-04 at 08:07 -0700, Randy Dunlap wrote:
> On Wed, 04 Apr 2007 14:28:23 +0800 Wu, Bryan wrote:
> 
> > 
> > Signed-off-by: Bryan Wu <bryan.wu@analog.com>
> > ---
> >  arch/blackfin/kernel/setup.c |    2 +-
> >  1 files changed, 1 insertions(+), 1 deletions(-)
> > 
> > diff --git a/arch/blackfin/kernel/setup.c b/arch/blackfin/kernel/setup.c
> > index ce51882..9870c60 100644
> > --- a/arch/blackfin/kernel/setup.c
> > +++ b/arch/blackfin/kernel/setup.c
> > @@ -221,7 +221,7 @@ void __init setup_arch(char **cmdline_p)
> > 
> >  	/* Keep a copy of command line */
> >  	*cmdline_p = &command_line[0];
> > -	memcpy(saved_command_line, command_line, COMMAND_LINE_SIZE);
> > +	memcpy(boot_command_line, command_line, COMMAND_LINE_SIZE);
> >  	saved_command_line[COMMAND_LINE_SIZE - 1] = 0;
> > 
> >  	/* setup memory defaults from the user config */
> > -- 
> 
> Hi Bryan,
> 
> Patch descriptions should include _why_ a change is being made,
> not just what the change is.
> 
Thanks Randy. I am just confused by the following comments in -mm tree
init/main.c:
---
/* Untouched command line saved by arch-specific code. */
char __initdata boot_command_line[COMMAND_LINE_SIZE];
/* Untouched saved command line (eg. for /proc) */
char *saved_command_line;
---
And you know, in the 2.6.20.x stable kernel init/main.c:
---
/* Untouched command line (eg. for /proc) saved by arch-specific code. */
char saved_command_line[COMMAND_LINE_SIZE];
---
So the patch is to move saved_command_line to boot_command_line in
blackfin arch code. I will resend a new patch about this, because I
forgot to change :-<
---
-	saved_command_line[COMMAND_LINE_SIZE - 1] = 0;
+	boot_command_line[COMMAND_LINE_SIZE - 1] = 0;
---
Did I misunderstand about this? So some other arch (ARM/AVR32 ...)
should be updated, too. 
> ---
> ~Randy
> *** Remember to use Documentation/SubmitChecklist when testing your code ***
Thanks again Randy.
I will follow the rule.
-Bryan
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/