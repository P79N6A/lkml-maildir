Date: Thu, 25 Dec 2008 10:16:48 -0600
From: Robert Hancock <>
Subject: Re: Question about not saving power
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/12/25/105

Alexander E. Patrakov wrote:
> On Wednesday 24 December 2008 12:02:53 Robert Hancock wrote:
>> Alexander E. Patrakov wrote:
>>> Hello.
>>>
>>> I tried playing with some audio apps like JACK and fluidsynth, and
>>> noticed the following. If I set the parameters in JACK so that the
>>> latency becomes less than ~10 milliseconds, a faint tone appears in the
>>> headphones connected to the onboard sound card.
>>>
>>> I guess that its frequency is the tone is the same as that of the
>>> interrupts generated by the sound card. The tone disappears if I run
>>> something like "while : ; do : ; done" that consumes CPU time
>>> continuously, so I guess this has something to do with the power-saving
>>> features and less-than-perfect PSU.
>>>
>>> My question is: what are my options (like kernel parameters) to disable
>>> power- saving features, other than running such CPU-eating process
>>> continuously?
>> You can try booting with idle=poll on kernel command line, so the CPU
>> will not enter halt states..
> 
> This mostly helped. Now the tone disappeared, but there are noises (not 
> xruns!) caused by the onboard graphics card when KDE4 draws something. I 
> disabled the effects to reduce the noise, but it didn't fully help (there is 
> still some "zzzzz" when I move the mouse over the taskbar so that different 
> window buttons are highlighted). The noise exists both in the connector for 
> headphones on the front panel, and in the green connector at the back of the 
> computer, but in the second connector, it is much softer.
> 
> The board is Intel DG965SS, and the graphics ship is:
> 
> 00:02.0 0300: 8086:29a2 (rev 02)
> 00:02.1 0380: 8086:29a3 (rev 02)
> 
> or, with names instead of the numbers,
> 
> 00:02.0 VGA compatible controller: Intel Corporation 82G965 Integrated 
> Graphics Controller (rev 02)
> 00:02.1 Display controller: Intel Corporation 82G965 Integrated Graphics 
> Controller (rev 02)
> 
> Intel developers: could you please add some workaround to the "intel" driver, 
> so that the GPU always stays busy (and thus draws the constant amount of 
> power)? And please tell the hardware designers so that for the future boards, 
> this interference between graphics and audio should not happen. Add separate 
> stabilizers and filters for the power supply of the audio chip, carefully 
> design the wiring so that the "noisy" lines don't get near anything related to 
> audio.
> 
I think you may be expecting too much from the analog output quality for 
onboard sound, this is a common problem on many boards. If you really 
want high quality analog output you usually have to go for a separate 
sound card which usually have much better filtering.