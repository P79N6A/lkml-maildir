Date: Sat, 30 Oct 1999 22:16:53 -0700 (PDT)
From: Andre Hedrick <>
Subject: Re: simple promise66 hack for 2.2.13/14
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/10/31/4

Hacking is easy........Doing it correct is pain.
It is obvious that you have blown off the patches.
For the record, us how you managed to signal the card to invoke ATA-66?
I had to get Promise to help me, oh they asked to use the 2.3/2.4 chipset
code for a module load.  Since ther kernel must know if the host adapter
has detected the 80c ribbon and verify that that the device/drive had
registered the presense also, before if can verify that transfer rates are
stable (no lock up or FS "root-wadding" == trashed data).  If the drive
fails to invoke any Ultra DMA modes because of anything, you are required
to perform a HARD rest to the drive and controller to get it to generic
DMAing.
The warning and disk death could go on for ever..........but doing what
you just did and advised people to do is "FOOLISH"........
So if anyone out there does follow the ill-advise below, don't ask for
help.........I will not care and will not take the time to offer a
recovery kludge.
Did you purchase that extended warrenty for drive replacement?
Andre Hedrick
The Linux IDE guy
On Sun, 31 Oct 1999 thx@rivalnet.de wrote:
> 
> hacking promise66 "support" into standard kernels is easy:
> 
> include/linux/pci.h:
> - #define PCI_DEVICE_ID_PROMISE_20246	0x4d33
> + #define PCI_DEVICE_ID_PROMISE_20246	0x4d38 /* fake promise66 as promise33  */
> 
> This kills promise33 support.
> A machine with 2 controllers, 5 drives, raid5 was stresstested with this: works flawlessly. No SMP used however.
> 
> 2.2.14pre2 contains additional IDE/SMP fixes, compared to 2.2.13 (donŽt know if someone already stresstested pre2).
> 
> Unified IDE of course has promise66 support (but probably doesnŽt contain the newest SMP fixes yet). It also has large disk support (if I remember right).
> 
> ======
> 
> Machine is running ok with 1 cpu, but i like to use the second one.
> I read that 2.2.13 has some bugfixes for ide +raid
> Is the bug fixed ?
> And :
> raid 0.9 is in Ac1 and Ac2 patch , so i should patch it with this one, but
> what about ide (promise udma66) support ? 
> i only see a 2.2.12 and 2.2.13pe17 kernel patch, so which one should i use
> ?
> (or is there a 2.2.13final patch?)
> 
> 
> 
> 
> 
> --
> the online community service for gamers & friends -  
http://www.rivalnet.com
> * unterstützt über 50 PC-Spiele im Multiplayer-Modus
> * Dateien senden & empfangen bis 500 MB am Stück
> * Newsgroups, Mail, Chat & mehr
> 
> -
> To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
> the body of a message to majordomo@vger.rutgers.edu
> Please read the FAQ at 
http://www.tux.org/lkml/
> 
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/