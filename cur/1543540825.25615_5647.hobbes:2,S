Date: Sat, 5 Aug 2000 13:50:52 +0200
From: Frank van Maarseveen <>
Subject: Re: 2.2.* kernels w/ glibc-2.1.* allowing ngroups_max to be > 128?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/8/5/17

On Fri, Aug 04, 2000 at 06:20:40PM -0500, List User wrote:
> 1)  Can Linux 2.2.* / glibc 2.1.* handle > 128 groups per user?
yes.
> 1a)    What files need to be modified to do this?
See attached patch for the kernel. glibc 2.1.2 needs to be recompiled after
modifying the kernel headers which are separately installed on RH6.1. If you
use another distro just make sure that glibc uses the correct
NGROUPS and NGROUPS_MAX values, just like in the kernel patch.
> will work in place ASAP.   Oh, I know that NFS will break with > 16 groups
I've patches for various kernels (2.2.x, 2.4.0-test5) removing this limitation
without breaking the RPC protocol.
-- 
Frank
--- linux/include/asm-i386/param.h.orig	Tue Aug  1 17:08:17 1995
+++ linux/include/asm-i386/param.h	Fri Jun 25 15:21:21 1999
@@ -8,7 +8,7 @@
 #define EXEC_PAGESIZE	4096
 
 #ifndef NGROUPS
-#define NGROUPS		32
+#define NGROUPS		256
 #endif
 
 #ifndef NOGROUP
--- linux/include/linux/limits.h.orig	Tue Dec  2 22:44:40 1997
+++ linux/include/linux/limits.h	Fri Jun 25 15:17:00 1999
@@ -3,7 +3,7 @@
 
 #define NR_OPEN		1024
 
-#define NGROUPS_MAX       32	/* supplemental group IDs are available */
+#define NGROUPS_MAX      256	/* supplemental group IDs are available */
 #define ARG_MAX       131072	/* # bytes of args + environ for exec() */
 #define CHILD_MAX        999    /* no limit :-) */
 #define OPEN_MAX         256	/* # open files a process may have */