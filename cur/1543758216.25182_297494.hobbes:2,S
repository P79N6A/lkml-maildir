Date: Sat, 26 Feb 2005 11:37:35 +1100
From: Keith Owens <>
Subject: Re: Inconsistent kallsyms data (since 2.6.11-rc3 or so)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/2/25/201

On Fri, 25 Feb 2005 11:33:48 +0100 (CET), 
Geert Uytterhoeven <geert@linux-m68k.org> wrote:
>
>One of my m68k configs has been giving
>
>| Inconsistent kallsyms data
>| Try setting CONFIG_KALLSYMS_EXTRA_PASS
>
>since 2.6.11-rc3 or so. Setting CONFIG_KALLSYMS_EXTRA_PASS, or applying Keith
>Owen's patch to fix an issue for SH
>(
http://seclists.org/lists/linux-kernel/2005/Jan/0017.html
) doesn't help.
>
>The diffs between the human-readable tables (as generated by Keith's
>kallsyms_uncompress.pl) show lots of changes (see below).
>
>Related config settings:
>
>| anakin$ grep kallsyms .config
>| CONFIG_KALLSYMS=y
>| # CONFIG_KALLSYMS_ALL is not set
>| CONFIG_KALLSYMS_EXTRA_PASS=y
>| anakin$
>
>Any other info that's needed to solve this issue? Thanks!
Apply the patch below to preserve the .S files, turn off
CONFIG_KALLSYMS_EXTRA_PASS, make vmlinux and send me the tarball from
these commands
objdump -h .tmp_vmlinux* > .tmp_objdump
nm -A .tmp_vmlinux* > .tmp_nm
tar czvf kallsyms-m68k.tar.gz .tmp_kallsyms* .tmp_objdump .tmp_nm
Index: linux/Makefile
===================================================================
--- linux.orig/Makefile	2005-02-12 18:40:12.000000000 +1100
+++ linux/Makefile	2005-02-26 11:32:19.300871801 +1100
@@ -685,7 +685,7 @@ define verify_kallsyms
 	$(Q)cmp -s System.map .tmp_System.map ||              \
 		(echo Inconsistent kallsyms data;             \
 		 echo Try setting CONFIG_KALLSYMS_EXTRA_PASS; \
-		 rm .tmp_kallsyms* ; /bin/false )
+		 rm .tmp_kallsyms*.o ; /bin/false )
 endef
 
 # Update vmlinux version before link
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/