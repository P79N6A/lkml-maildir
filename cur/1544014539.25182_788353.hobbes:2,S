Date: Wed, 7 Jan 2009 09:52:46 -0800 (PST)
From: Davide Libenzi <>
Subject: Re: [RESEND][RFC PATCH v2] waitfd
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2009/1/7/354

On Wed, 7 Jan 2009, Oleg Nesterov wrote:
> minor nit...
> 
> Please note that unlike other sys_...fd() syscalls, sys_waitfd()
> doesn't allow to pass O_CLOEXEC. Looks like we need a separate
> "flags" argument...
I said this even during the first post. Not a minor nit unless we want to 
have a sys_waitfd2 soon after.
> Also, ioctl(FIONBIO) or fcntl(O_NONBLOCK) have no effect on
> waitfd, not very good.
Ack.
> I'd suggest to remove WNOHANG from waitfd_ctx->ops and treat
> (->f_flags & O_NONBLOCK) as WNOHANG.
Ack.
> (can't resist, ->ops is not the best name ;)
Ack. "flags" looks a pretty nice shot at it.
- Davide