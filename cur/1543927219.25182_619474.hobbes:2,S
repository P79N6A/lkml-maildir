Date: Tue, 20 Nov 2007 13:44:13 +1030
From: Mike Lampard <>
Subject: Re: [WATCHDOG] v2.6.24 Watchdog Device Drivers patches - part 4
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/11/19/516

Hi
On Tue, 20 Nov 2007 08:02:20 am Wim Van Sebroeck wrote:
> Hi Linus,
>
> Please pull from 'master' branch of
> 	git://git.kernel.org/pub/scm/linux/kernel/git/wim/linux-2.6-watchdog.git
> or if master.kernel.org hasn't synced up yet:
> 	master.kernel.org:/pub/scm/linux/kernel/git/wim/linux-2.6-watchdog.git
>
> This will update the following files:
>
>  drivers/sbus/char/cpwatchdog.c    |    2
>  drivers/watchdog/Kconfig          |   10
>  drivers/watchdog/Makefile         |    1
>  drivers/watchdog/at32ap700x_wdt.c |   69 ++++++
>  drivers/watchdog/bfin_wdt.c       |    2
>  drivers/watchdog/it8712f_wdt.c    |  400
> ++++++++++++++++++++++++++++++++++++++ drivers/watchdog/w83697hf_wdt.c   | 
>   4
>  7 files changed, 481 insertions(+), 7 deletions(-)
>
> with these Changes:
>
> Author: Jorge Boncompte [DTI2] <jorge@dti2.net>
> Date:   Mon Nov 19 15:09:21 2007 +0100
>
>     [WATCHDOG] IT8212F watchdog driver
>
>     This patch adds support for the ITE Tech Inc. IT8712F EC-LPC Super I/O
>     chipset found on many Pentium III and AMD motherboards. Developed using
> code from other watchdog drivers and the datasheet on ITE Tech homepage.
>
>     Signed-off-by: Jorge Boncompte <jorge@dti2.net>
>     Signed-off-by: Wim Van Sebroeck <wim@iguana.be>
>
> Author: Jiri Slaby <jirislaby@gmail.com>
> Date:   Sat Nov 10 04:32:45 2007 +0100
>
The following patch applied to the above diff adds support for the IT8716F 
watchdog, which appears to be essentially the same as the IT8712F in all but 
name.
Cheers
Mike
 drivers/watchdog/it8712f_wdt.c |    5 +++--
 1 files changed, 3 insertions(+), 2 deletions(-)
	Signed-off-by: Mike Lampard <mike@mtgambier.net>
diff --git a/drivers/watchdog/it8712f_wdt.c b/drivers/watchdog/it8712f_wdt.c
index 6330fc0..31c5162 100644
--- a/drivers/watchdog/it8712f_wdt.c
+++ b/drivers/watchdog/it8712f_wdt.c
@@ -36,7 +36,7 @@
 #define NAME "it8712f_wdt"
 
 MODULE_AUTHOR("Jorge Boncompte - DTI2 <jorge@dti2.net>");
-MODULE_DESCRIPTION("IT8712F Watchdog Driver");
+MODULE_DESCRIPTION("IT8712F/IT8716F Watchdog Driver");
 MODULE_LICENSE("GPL");
 MODULE_ALIAS_MISCDEV(WATCHDOG_MINOR);
 
@@ -65,6 +65,7 @@ static unsigned short address;
 #define BASE_REG	0x60	/* LDN Register: Base address */
 
 #define IT8712F_DEVID	0x8712
+#define IT8716F_DEVID	0x8716
 
 #define LDN_GPIO	0x07	/* GPIO and Watch Dog Timer */
 #define LDN_GAME 	0x09	/* Game Port */
@@ -319,7 +320,7 @@ it8712f_wdt_find(unsigned short *address)
 
 	superio_enter();
 	chip_type = superio_inw(DEVID);
-	if (chip_type != IT8712F_DEVID)
+	if (chip_type != IT8712F_DEVID && chip_type != IT8716F_DEVID)
 		goto exit;
 
 	superio_select(LDN_GAME);
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/