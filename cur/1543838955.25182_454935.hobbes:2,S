Date: Thu, 17 Aug 2006 09:49:24 -0700 (PDT)
From: 	shankar@mistrals ...
Subject: GadgetFS AIO problem
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/8/17/379

Hi Greg,
  This is regarding debugging a problem in GadgetFS AIO functionality. I'm
working on an developing a USB user space driver on top of the GadgetFS
Driver on Linux Kernel version 2.6.10. I'm using the AIO support of the
GadgetFS driver in my design. When I make a io_getevents call from the
user space, it hangs and never returns. I see that there is a patch
released  to fix this on 2.6.17 kernel
(
http://www.kernel.org/pub/linux/kernel/people/gregkh/usb/2.6/2.6.17/
). I
tried applying the following of patches in the same order as mentioned
below
usb-gadgetfs-highspeed-bugfix.patch (all the Hunks succeed)
gadgetfs-fix-memory-leaks.patch  (2 out of 6 Hunks, #4 and #6 FAILED)
gadgetfs-fix-aio-interface-bugs.patch (all the Hunks succeed)
After applying the patches, I get some memory faults when the io_submit is
called. But the io_getevetns returns without reading any data. I don't
know whether it matters, but the libaio version that I use is
libaio-0.3.99.
Please advice me on whether I'm applying the patches in the correct order
or am I missing something here. If some one can give me a direction on how
to go about fixing this, it would be great.
Please mark a copy of your reply to my email id: shankar@mistralsoftware.com
Thanks and Regards,
Shankar
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/