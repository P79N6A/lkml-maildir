Date: Wed, 23 May 2007 01:15:25 +0000
From: "young dave" <>
Subject: Re: 2.6.22-rc1-mm1
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/5/22/466

Hi,
I have tried the patch, it works.
could you explain it for me? thanks very much.
Regards
dave
2007/5/22, H. Peter Anvin <hpa@zytor.com>:
> Could you try the attached patch for me?
>
>         -hpa
>
> diff --git a/arch/i386/boot/edd.c b/arch/i386/boot/edd.c
> index 84a0302..9697a56 100644
> --- a/arch/i386/boot/edd.c
> +++ b/arch/i386/boot/edd.c
> @@ -47,8 +47,9 @@ static int read_sector(u8 devno, u64 lba, void *buf)
>         si = (size_t)&dapa;
>         dx = devno;
>         asm("pushfl; stc; int $0x13; setc %%al; popfl"
> -           : "+a" (ax), "+S" (si), "+d" (devno)
> -           : : "ebx", "ecx", "edi");
> +           : "+a" (ax), "+S" (si), "+d" (dx)
> +           : "m" (dapa)
> +           : "ebx", "ecx", "edi", "memory");
>
>         if (!(u8)ax)
>                 return 0;       /* OK */
> @@ -59,7 +60,7 @@ static int read_sector(u8 devno, u64 lba, void *buf)
>         bx = (size_t)buf;
>         asm("pushfl; stc; int $0x13; setc %%al; popfl"
>             : "+a" (ax), "+c" (cx), "+d" (dx), "+b" (bx)
> -           : : "esi", "edi");
> +           : : "esi", "edi", "memory");
>
>         return -(u8)ax;         /* 0 or -1 */
>  }
>
>
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/