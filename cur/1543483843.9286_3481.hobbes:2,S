Date: Tue, 2 Feb 1999 16:39:50 +0100 (CET)
From: Andrea Arcangeli <>
Subject: Re: [patch] killed tqueue_lock spinlock
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/2/2/101

On Tue, 2 Feb 1999, Patrik Rak wrote:
> > Using a bit in the bh->sync will allow SMP to scale very better. And we
> 
> Hmm, it was just short-term spinlock, I don't think there is much
> real contention.
Agreed but there could be in the future. This will allow to scale better
in SMP without harming performances I think.
> > Here the latest update:
> 
> And what about this (maybe I got the memory barriers wrong, it's just to
> show the idea):
I can't see a big difference. I still like more my version just because I
like to play with the lock with sure atomic operations in task_queue() 
while run_task_queue() is spinning on the lock. And theorically some
really nowadays-crazy architecture may want to have 1 byte data at address
-1 (really unlikely to happen I know ;).
Andrea Arcangeli
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/