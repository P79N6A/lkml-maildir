Date: Mon, 25 Jan 1999 11:11:06 -0600 (CST)
From:  tz@execpc ...
Subject: Annoying junk in log from pcmcia IDE (2.2.0, longtime 2.1)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/1/25/88

genhd does a printk of the drive when rescanning partitions.
Normally it looks like:
 hdc: hdc1 hdc2
This is fine during bootup.  But with module loading and lots of other
things going on, I get hdc: <hundreds of bytes of junk> hdc1 hdc2
The printk routine might need a better lock.  genhd does a printk on
"hdc:" without a linefeed character, so the log pointers are left
hanging.
Then the MSDOS (or other) partitions are probed for which might cause
other messages to be printed, or at least other things might end up
touching the logging system.
Finally add_partition is called, and the hdc1 hdc2... is printed
with a terminal linefeed.
If I place a linefeed after the hdc:, I don't get any junk in my
syslog.
I don't know the version of syslog, but it might be older so maybe
an upgrade is in order.  But I don't think syslog is the cause -
something is hitting printk between the "hdc:" and the "hdc2\n"
- note that the junk printed isn't random, but looks like the last
few hundred bytes in the log, which is why I think something
is moving.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/