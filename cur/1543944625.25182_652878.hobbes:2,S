Date: Wed, 13 Feb 2008 13:34:12 +0100
From: Bartlomiej Zolnierkiewicz <>
Subject: Re: pci_get_device_reverse(), why does Calgary need this?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/2/13/196

On Wednesday 13 February 2008, Greg KH wrote:
> On Wed, Feb 13, 2008 at 02:17:37AM +0000, Alan Cox wrote:
> > > Why does the calgary driver need this?  Can we just use pci_get_device()
> > > instead?  Why do you need to walk the device list backwards?  Do you get
> > > false positives going forward?
> > 
> > It doesn't look to be performance critical so the driver can
> > pci_get_device until the end and use the final hit anyway.
> 
> That would make more sense.
> 
> > IDE reverse is more problematic but nobody seems to use it.
> 
> I've seen two posters say they use it.  I'm wondering what it is really
> solving if they use it, and why if it's really needed, scsi never had to
> implement such a hack...
It is no longer solving anything, just adds more pain. ;)
[ The option comes from 2.2.x (so long before LABEL=/ and /dev/disk/by-id/
  became popular).  Some "off-board" controllers integrated on motherboards
  used to appear before "on-board" IDE on PCI bus so this option was meant
  to preserve the legacy ordering. ]
Since it is valid only when "Probe IDE PCI devices in the PCI bus order
(DEPRECATED)" config option is used it is already on its way out (though
marking it as obsoleted would make it more explicit).
I think that removing "ide=reverse" in 2.6.26 would be OK...
Thanks,
Bart