Date: 21 Mar 1999 22:21:43 -0800
From: (david parsons)
Subject: Re: #!perl - alternative path to script interpreters - patch to 2.2
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/3/22/19

In article <linux.kernel.Pine.SOL.3.95.990321130735.14604J-100000@weyl.math.psu.edu>,
Alexander Viro  <viro@math.psu.edu> wrote:
>
>
>On Sun, 21 Mar 1999, Albert D. Cahalan wrote:
>
>> 
>> Alexander Viro writes:
>> 
>> > And script written under Linux and using that feature will break
>> > *everywhere* else. Fun, fun...
>> 
>> That would not be a Linux problem.
>
>Bullshit. Software locked on *any* platform is evil, for a lot of reasons,
     Better scrap /proc, then.
     The problem is that #! is a hack.  It's a hack with a distinguished
     history, but it's still a hack.   When all people were doing was
     #! /bin/sh, #! /bin/csh, and #! /bin/ksh, it wasn't a problem, but
     boutique languages have become popular these days, and you'll never
     know if perl5 lives in /usr/bin/perl, /usr/local/bin/perl, /opt/perl5,
     or /var/tmp/vi.recover.
     Perhaps, for security reasons, it's a hack that can't be completely
     gotten rid of (certainly a system enhancement that let you sysctl
     an alias for /bin/sh would be the gaping security hole of every
     hacker's dream, because it would redefine untracibility.  But it's
     still a hack.
     And, even if it is system dependent, well, so what?  The question
     you should ask yourself is "is this a useful ENHANCEMENT to a Unix
     system", and if the answer is yes proceed onwards.  Certainly breaking
     backwards compatability is a mortal sin, but you can't also freeze
     like a deer in the headlight of current "standards" and wait for the
     rest of the Unix world to lead you to safety.
     A patch where #! /usr/bin/perl behaved like it does right now,
     complete with mysterious errors when perl isn't in /usr/bin, but
     where #! perl will pick up perl from anyoldplace would break the
     world how?   I can see, offhand, the possibility for some
     interesting security holes (though the trivial case on Linux
     2.0.28+logo with ksh -> sh leads to some interesting errors) which
     might be enough to turn on the earthquake sirens and head for high
     ground, but won't that be a gaping security only on systems that
     already allow (fatally flawed) setuid scripts?   Aside from this
     I don't see any points where the breakage gets much worse than it
     already is.
>> One could have the kernel substitute any pathname for any other
>> pathname when executing a script.
>
>Or you can do it with sed when you install the software.
     And god help you if you execute these scripts on a heterogeneous
     network of Unix and NT machines, each of which has the script
     processor in different places.
                   ____
     david parsons \bi/ ln -s /usr/bin/perl /usr/local/bin/perl
                    \/                    Rinse, lather, repeat.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/