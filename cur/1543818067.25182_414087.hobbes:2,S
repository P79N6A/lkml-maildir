Date: Thu, 6 Apr 2006 20:38:34 +0900
From: "Piotr Muszynski" <>
Subject: make *config problem (breaks miniconfig.sh)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/4/6/51

There seems to be an error in config system, which I have discovered
while playing with miniconfig (it breaks miniconfig.sh in some cases).
miniconfig.sh workaround included at the end.
Spotted on 2.6.15.[1,2] and 2.6.16
How to trigger:
make menuconfig, change CONFIG_EXPERIMENTAL y --> n, save
$ cp .config .config_old
make menuconfig, change nothing, save
$ diff .config .config_old
4c4
< # Thu Apr  6 20:23:19 2006
---
> # Thu Apr  6 20:22:40 2006
157a158,160
> # CONFIG_FLATMEM_MANUAL is not set
> # CONFIG_DISCONTIGMEM_MANUAL is not set
> # CONFIG_SPARSEMEM_MANUAL is not set
I thought the .config shouldn't change... Is this a feature?
Workaround for miniconfig.sh:
$ diff -u miniconfig.sh-backup miniconfig.sh
--- miniconfig.sh-backup        2006-04-06 20:06:26.000000000 +0900
+++ miniconfig.sh       2006-04-06 20:07:10.000000000 +0900
@@ -15,6 +15,9 @@
   exit 1
 fi
+make allnoconfig KCONFIG_ALLCONFIG=$1 > /dev/null
+mv .config $1
+
 cp $1 mini.config
 echo "Calculating mini.config..."
Regards.
--
/*
 * Piotr Muszynski <piotru.org>
 */
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/