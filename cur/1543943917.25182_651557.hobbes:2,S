Date: Mon, 11 Feb 2008 12:49:11 +0100
From: Ingo Molnar <>
Subject: Re: [PATCH] [3/8] CPA: Test the correct mapping alias on x86-64
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/2/11/124

* Andi Kleen <ak@suse.de> wrote:
> static_protections previously would test against the x86-64 kernel 
> mapping twice. First against the unchanged symbol directly from the 
> linker (which always points into the kernel mapping) and then again it 
> would manually relocate the address into the kernel mapping and test 
> again.
> 
> This patch reverses the second test instead to test against the direct 
> mapping (low) aliases virtual addresses which was probably intended in 
> the first place.
> 
> Simply use __pa and __va for that.
thanks, applied.
( the practical implications of this are low because we do not utilize 
  the low direct aliases for execution. It needs to be fixed 
  nevertheless (will be needed for PAT later on anyway) and your cleanup 
  and #ifdef reduction is nice to have as well. )
	Ingo