Date: Thu, 20 Apr 2006 10:01:53 -0700
From: Greg KH <>
Subject: [PATCH] make security_ops EXPORT_SYMBOL_GPL()
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/4/20/193

Some closed source modules are taking advantage of the fact that the
security_ops variable is available to them, so they are using it to hook
into parts of the kernel that should only be available to "real" users
of the LSM interface (which is required to be under the GPL.)
This patch changes the export of that variable to try to mitigate the
problem.
Signed-off-by: Greg Kroah-Hartman <gregkh@suse.de>
---
 security/security.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)
--- gregkh-2.6.orig/security/security.c
+++ gregkh-2.6/security/security.c
@@ -178,4 +178,4 @@ EXPORT_SYMBOL_GPL(register_security);
 EXPORT_SYMBOL_GPL(unregister_security);
 EXPORT_SYMBOL_GPL(mod_reg_security);
 EXPORT_SYMBOL_GPL(mod_unreg_security);
-EXPORT_SYMBOL(security_ops);
+EXPORT_SYMBOL_GPL(security_ops);
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/