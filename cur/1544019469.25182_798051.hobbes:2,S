Date: Wed, 28 Jan 2009 12:59:41 -0800
From: "H. Peter Anvin" <>
Subject: Re: [LLVMdev] inline asm semantics: output constraint width smaller 	than input
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2009/1/28/378

Kyle Moffett wrote:
> 
> On a BE 32-bit machine, the "output register" technically ought to be
> "64-bit" anyways, since it's constrained to be the same as the 64-bit
> "input register".  That means that you ought to make sure to set
> *both* output registers appropriately, one of them being 0 and the
> other being the 32-bit number.  I think that's the only answer that
> actually makes any sense from a holistic code-generation sense.  So it
> seems we are in violent agreement :-D.
> 
No.
This is wrong on two accounts.
First of all, THERE ARE NO "TWO OUTPUT REGISTERS".  Period.  There is 
only one.  The question is: which of the two *input* registers does it 
correspond to?
Second of all, "making sense from a holistic code-generation sense" 
doesn't apply here.  This is about mimicing a gcc construct, regardless 
of which amount of sense it makes.  Therefore, the only thing that 
actually makes sense is to mimic gcc behavior, no matter how stupid it 
happens to be.
	-hpa