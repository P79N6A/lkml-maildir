Date: Sun, 26 Mar 2000 06:47:00 +0100 (BST)
From: Riley Williams <>
Subject: Re: Keyboard rate question..
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/3/26/15

Hi Mike.
 >>> On systems where one keyboard is shared between two or more
 >>> computers, when you switch the mechanical switch from one
 >>> machine to the next, the keyboard repeat rate gets reset to
 >>> slowness.
 >> Are you sure about this?
 > Yes. I hold down a key, it repeats 30/s, then switch,
 > switch back, and it is 10cps or less..  Hard to mess up
 > really..
Nodz.
 >> I have just this setup, switching mouse, keyboard and
 >> monitor by turning a single mechanical switch, and one of
 >> the machines switched between is running Win95. I've never
 >> seen any slowdown of the repeat rate following switching.
 > Different setup or hardware perhaps. I've used 4 different
 > hardware switch setups, with over 30 keyboards and every
 > single one resets the keyboard to the power on state of
 > slowness in every single OS including Linux, NT, 95/98. So
 > you must be using a different setup if it doesn't for you.
Fairy Nuff.
 > Perhaps your switch is electronic?
Nope, it's just a bank of 4-way rotary switches on a common
axle. I've had a look inside.
 >>> I'd like the keyboard to maintain my repeat rate across
 >>> this if possible. I'd like it to be seamless - so no user
 >>> needs to do anything.
 >> Seamless for that particular machine, or for all machines?
 > I don't really care too much about a solution that attempts
 > to fix the problem on every machine unless it is simple and
 > fast. As long as my main machine works fine, then I'm
 > happy.
I would presume the fix somebody posted would qualify as being
both simple and fast, so will repeat it here for you in case you
missed it:
 1. Connect a diode between the signal ground on the common lead
    to the keyboard and the signal ground on any one of the leads
    to the computer, wired to allow current to pass in the same
    direction as described.
 2. Connect a second diode between the power line on the SAME
    lead to the computer and the power line on the common lead
    to the keyboard, wired to allow current to pass in the same
    direction as described.
According to the poster, that would ensure that the keyboard
stayed powered up whilst switching, and thus would prevent it
from resetting - and the use of diodes prevents any power shorts
from occurring.
In my case, "if it isnae broke, don't fix it" would seem to
apply.
 >> Personally, if I switch between different computers running
 >> different operating systems, I tend to expect them to do
 >> things slightly differently.
 > Regardless of what OS is being used, the switching of the
 > keyboard via mechanical switch is analogous to unplugging
 > the keyboard and plugging it into another machine. The
 > keyboard is powered down and resumes with its default slow
 > repeat rate.
 > Whether or not this occurs on all keyboards doesn't matter
 > much to me. It does on all keyboards I have here including
 > PS/2 and AT style however and it is annoying.
Fairy Nuff.
 > I've been fixing it by running kbdrate -r 30 from cron
 > every minute, but that is a hack at best and still
 > annoying. I'd like the kernel to take care of it.
Well, the only kernel hack I can think of is to basically do
exactly that from within the kernel. After all, there's little
the computer can do about the actions of an external mechanical
switch.
 > Keep in mind that I'm not asking for a general kernel
 > feature here, I'm asking how to do it just so I can hack
 > my own personal kernel. I don't want to put it in the
 > mainstream kernel, just to fulfill a personal nit. As
 > such I don't care how hacky or bloaty the solution is.
Personally, I think you're looking in the wrong place for this
fix, but it is of course your decision.
 > Any ideas would be greatly appreciated.
Personally, I'd tend to perform surgery on the switch and fix
the problem that way since such a fix would also fix all other
operating systems as well.
Best wishes from Riley.
 * Copyright (C) 2000, Memory Alpha Systems.
 * All rights and wrongs reserved.
+----------------------------------------------------------------------+
| There is something frustrating about the quality and speed of Linux  |
| development, ie., the quality is too high and the speed is too high, |
| in other words, I can implement this XXXX feature, but I bet someone |
| else has already done so and is just about to release their patch.   |
+----------------------------------------------------------------------+
 * 
http://www.memalpha.cx/Linux/Kernel/
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/