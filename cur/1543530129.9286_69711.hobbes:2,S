Date: Tue, 14 Mar 2000 09:43:06 -0800 (PST)
From: Chris Mason <>
Subject: Re: (reiserfs) Re: patch: reiserfs for 2.3.49
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/3/15/234

On Tue, 14 Mar 2000, Alexander Viro wrote:
  [ fhandle_to_dentry for reiserfs ]
> Basically you'll need two things to take that code: way to find the ID of
> ".." _and_ way to get the name by ID. Both are trivial with ext2 directory
> structure. What will they cost on reiserfs? Both are needed only when
> knfsd gets an fhandle cache miss and currently done via lookup() and
> readdir() (with funny filldir) from underlying filesystem. Which amounts
> to heck of overhead. _Anything_ will be better than ->readdir() - count
> the calls of filldir and you'll see.
> 
Ok, we need a way to find the ID of .. given what?  A directory inode?
That we can do.  As far as I can tell, we can find the name of a file
given its ID, and the inode for the parent dir (Vladimir will correct me
if I'm wrong here).
Would you mind sending the ext2 code along?  It would probably be the
easiest way to explain things to me.
-chris
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/