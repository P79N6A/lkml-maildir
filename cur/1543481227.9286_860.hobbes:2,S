Date: Thu, 21 Jan 1999 18:06:08 +0000 (GMT)
From: Shaw Carruthers <>
Subject: Re: help: PS/2 hard drive not found
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/1/21/257

On Thu, 21 Jan 1999, Greg Wooledge wrote:
> 
> On Wed, Jan 20, 1999 at 10:09:34AM +0100, David Weinehall wrote:
> 
> > This is a SCSI-machine. The ibmmca.c SCSI-driver is at the moment
> > non-working with the v2.1 kernels newer than v2.1.31 (!). Install the
> > driver from v2.1.30, and everything should work. You might have to tweak
> > it to detect the adapter, though. It should use 0x3540 as base-address.
> 
> The 2.2.0-pre9 kernel does see a SCSI adapter here, but it panics:
> 
> IBM MCA SCSI: integrated SCSI found, io=0x3540, scsi id=7.
> IBM MCA SCSI: Removing current logical SCSI-device mapping.
> IBM MCA SCSI: Probing SCSI-devices.<0>Kernel panic: IBM MCA SCSI: command error.  Last SCSI_CMD=0x0.
> 
> In interrupt handler - not syncing
> 
Have you got your config as follows:
CONFIG_MCA=y
CONFIG_SCSI_IBMMCA=y
CONFIG_IBMMCA_SCSI_ORDER_STANDARD=y
# CONFIG_IBMMCA_SCSI_DEV_RESET is not set
If you set CONFIG_IBMMCA_SCSI_DEV_RESET some machines don't like it.
I have an 8556 and 2.2.0-pre8 works just fine with this config.
> 
> > Oh, there is one. It's called rf955657.exe and expands to a disk from dos.
> > You can get it at ftp.pc.ibm.com in the directory pub/pccbbs/refdisks.
> > There's also a rd955657.exe file which is the advanced diagnostics for
> > that model.
> 
> Ah.  The documentation says that that one's for the "9556/9557", not the
> Model 56, so I didn't recognize that it was what I wanted.  I used that
> to verify that this PS/2 does indeed have a SCSI adapter and a SCSI disk.
> 
> 
Some Model 56s are 8556 others 9556. There are also IBM disks for the
8556:
rd855657.exe
rf855657.exe
but I think the 9556 disks work on 8556 as well.
-- 
Shaw Carruthers - shaw@shawc.demon.co.uk
London SW14 7JW UK
This is not a sig( with homage to Magritte).
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/