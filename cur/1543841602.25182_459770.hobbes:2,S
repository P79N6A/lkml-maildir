Date: Fri, 1 Sep 2006 10:12:40 -0600
From: "Moore, Eric" <>
Subject: RE: [patch 1/1] SCSI: improve endian handling in LSI fusion firmware mpt_downloadboot
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/9/1/180

On Wednesday, August 30, 2006 11:33 AM, Erik Habbinga wrote: 
> The mpt_downloadboot function in 
> drivers/message/fusion/mptbase.c doesn't work correctly on 
> big endian systems (powerpc in my case).
> I've added appropriate le32_to_cpu calls to correctly 
> translate little endian firmware file data into cpu endian 
> format before
> getting written to little endian PCI registers.  This patch 
> has been tested successfully on a powerpc target and an Intel target.
> 
Rejected.
This will break all our customers on big-endian machines.
Our firmware is packaged in proper byte order on dword boundarys,
and doesn't need swapping at all.   Basically mpt_downloadboot, 
is reading from pFwHeader, and writing back out to doorbell
in proper byte order that doorbell expecting.  This code is working
for many LSI customers running on big-endian systems, such as pppc64.
Could you send your firmware image, copied to Stephen Shirron,
so he can determine if your firmware is properly packaged in correct
byte order?
Eric Moore
LSI Logic
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/