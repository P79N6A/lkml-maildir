Date: Sat, 25 Mar 2000 23:46:51 +0100 (MET)
From:  Andries.Brouwer@cwi ...
Subject: Re: Cylinder limits jumper for drives over 32GB
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/3/25/130

    From dfe@infinite-internet.net Sat Mar 25 02:31:05 2000
    > [So these error messages come precisely at the end of the
    > truncated disk. But it seems that you are using CHS,
    > not LBA addressing:
    >
    >  hda: dma_intr: error=0x10 { SectorIdNotFound },
    >    CHS=65530/15/61, sector=48737112
    >
    > and with CHS and 65531/16/63 it is clear that you cannot
    > get beyond 66055248 sectors. Why are you using CHS?]
    >
    Whoops!  My fault.  I incorrectly modified ide-disk.c to report the correct
    capacity by multiplying the logical geometry.  I changed that now so it
    actually updates the lba_capacity field and still leaves LBA enabled.  The
    drive still doesn't read past 66055248 sectors though.
But the error messages will be different, I suppose.
        So I now removed my patch and am putting your patch onto the kernel.
I have no idea which patch you might be referring to.
My current understanding:
(i) The drive reports geometry 16383/16/63 and 80041248 sectors
(ii) With J46 jumper it reports 4092/16/63 and 80041248 sectors
(iii) After running JUMPON.EXE the report still is 16383/16/63 and 80041248.
(iv) After running JUMPON.EXE and with jumper it is 16383/16/63 and 66055248.
Now there is an unfortunate side effect of JUMPON.EXE + jumper on large
Maxtor disks, which is also a side effect of the jumper on large IBM disks,
namely that access of sector 66055248 and past fails with I/O errors.
However, MaxBlast succeeds in accessing all of the disk, so this is
still possible.
A guess:
Maybe what is done is effectively a SET MAX ADDRESS.
If that is true, a READ NATIVE MAX ADDRESS (F8)
followed by a SET MAX ADDRESS (F9) should make the disk
accessible again.
In all cases, a READ NATIVE MAX ADDRESS should give us
the actual size.
Do you think you can test this hypothesis?
Andries
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/