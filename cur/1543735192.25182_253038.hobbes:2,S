Date: Thu, 16 Sep 2004 10:28:08 -0400
From: Bill Davidsen <>
Subject: Re: [patch] remove the BKL (Big Kernel Lock), this time for real
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/9/16/158

Andi Kleen wrote:
> Ingo Molnar <mingo@elte.hu> writes:
> 
> 
>>the attached patch is a new approach to get rid of Linux's Big Kernel
>>Lock as we know it today.
> 
> 
> Interesting approach. Did you measure what it does to context
> switch rates? Usually adding semaphores tends to increase them
> a lot.
Is that (necessarily) a bad thing? If it results in less time waiting 
for BKL, and/or more time doing user work, that may drive throughput and 
responsiveness up. It depends if the time for two ctx is greater or less 
than the spin time on BKL.
It would be nice to have the best of both worlds, use the semaphore if 
there is a process on the run queue, and spin if not. That sounds 
complex, and hopefully not worth the effort.
High ctx rates are not necessarily bad, when we implemented O_DIRECT for 
an application the rate went up 30%, the outbound bandwidth went up 
10-15%, and waitio dropped by half at peak load. As long as something 
useful is being done with the time previously wasted in spinning, I 
would expect it to be a win.
-- 
    -bill davidsen (davidsen@tmr.com)
"The secret to procrastination is to put things off until the
  last possible moment - but no longer"  -me
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/