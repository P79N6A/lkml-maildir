Date: Tue, 20 Sep 2005 08:14:28 -0700
From: Paul Jackson <>
Subject: Re: [PATCH] cpuset semaphore depth check optimize
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/9/20/147

Robin wrote:
> This makes things even easier!!!
Easy is good.
> When the vfs code is traversing the list, you need to ensure
> that it does not iterate unless the child list lock is held.
> I have not looked at how you implemented the vfs stuff, but
> that should be easily accomplished.
> 
> Where are the holes?
The hole is my understanding of vfs.
My gut instinct is to recoil in horror from this suggestion, because it
seems to involve walking the cpuset tree from bottom up, setting locks,
while some other task might be doing a normal file system open on one
of these cpusets, walking the tree top-down, setting locks.
That smells like deadlock city to me.
-- 
                  I won't rest till it's the best ...
                  Programmer, Linux Scalability
                  Paul Jackson <pj@sgi.com> 1.925.600.0401
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/