Date: Sun, 9 Jul 2006 02:09:23 +0200
From: Pavel Machek <>
Subject: Re: uswsusp history lesson [was Re: [Suspend2-devel] Re: swsusp / suspend2 reliability]
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/7/8/237

Hi!
> > > > > > It's only too slow on swsusp. With Suspend2, I regularly suspend
> > > > > > 1GB images on both my desktop and laptop machines. I agree that it
> > > > > > might be slower on a
> > > >
> > > > uswsusp is as fast as suspend2. It does same LZF compression.
> > >
> > > I agree for uncompressed images - I tried timing the writing of the image
> > > yesterday. I'm not sure about LZF though, because I couldn't get it to
> > > resume. I'd be interested to see it really be as fast as suspend2 with
> > > compression.
> >
> > Is there any way to help you? I assume normal swsusp resumes okay so
> > it is not driver problem?
> 
> That's right. I'll see if I can figure it out tomorrow, Lord willing. I 
> have /dev/snapshot in my initrd but it gives that prompt asking for the 
> device name. By the way, will it sit there foreever, or does that have a 
> timeout?
AFAICT it will just sit there... Entering full path to resume device
should help at that point:
        while (stat(resume_dev_name, &stat_buf)) {
                printf("resume: Could not stat the resume device file.\n"
                        "\tPlease type in the file name to try again"
                        "\tor press ENTER to boot the system: ");
                fgets(resume_dev_name, MAX_STR_LEN - 1, stdin);
                n = strlen(resume_dev_name) - 1;
                if (n <= 0)
                        return ENOENT;
                if (resume_dev_name[n] == '\n')
                        resume_dev_name[n] = '\0';
        }
BTW the way I get this to work is very hacky: just force root
filesystem to be ext2, then boot with init=/bin/bash, and launch
resume manually. I guess I should prepare myself proper initrd...
								Pavel
-- 
(english) 
http://www.livejournal.com/~pavelmachek
(cesky, pictures) 
http://atrey.karlin.mff.cuni.cz/~pavel/picture/horses/blog.html
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/