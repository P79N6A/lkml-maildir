Date: Wed, 02 Mar 2005 22:30:17 +0100
From: Ondrej Zary <>
Subject: Re: [PATCH] remove dead cyrix/centaur mtrr init code
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/3/2/220

Dave Jones wrote:
> On Wed, Mar 02, 2005 at 03:59:00PM +0100, Ondrej Zary wrote:
>  > >>The failure to invoke the ->init operator appears to be the bug.
>  > >>The centaur code definitely wants the mcr init function to be called.
>  > >
>  > >Yes, I expected that to be the answer. Therefore #if 0 instead of deleting.
>  > >But if calling ->init() is needed, and it has not been done the past
>  > >three years, the question arises whether there are any users.
>  > 
>  > I'm running 2.6.10 on Cyrix MII PR333 and it works. Maybe the code is 
>  > broken but I haven't noticed :-)
> 
> your /proc/mtrr is likely broken/suboptimal.
It looks fine to me:
rainbow@pentium:~$ cat /proc/mtrr
reg01: base=0x000c0000 (   0MB), size= 256KB: uncachable, count=1
reg02: base=0xe1000000 (3600MB), size=   4MB: write-combining, count=2
reg07: base=0x00000000 (   0MB), size= 128MB: write-back, count=1
The machine has 128MB memory, there's 4MB Matrox Mystique card:
00:14.0 VGA compatible controller: Matrox Graphics, Inc. MGA 1064SG 
[Mystique] (rev 02) (prog-if 00 [VGA])
         Subsystem: Matrox Graphics, Inc. MGA-1084SG Mystique
         Flags: bus master, stepping, medium devsel, latency 64, IRQ 6
         Memory at e0000000 (32-bit, non-prefetchable) [size=16K]
         Memory at e1000000 (32-bit, prefetchable) [size=8M]
         Memory at e2000000 (32-bit, non-prefetchable) [size=8M]
         Expansion ROM at <unassigned> [disabled] [size=64K]
-- 
Ondrej Zary
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/