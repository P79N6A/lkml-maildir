Date: Sat, 23 Jan 1999 13:56:58 +1100 (EST)
From: CaT <>
Subject: Re: More ATAPI/IDE fun. (zip drive this time)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/1/23/5

Andre M. Hedrick wrote the following:
> 
> On Fri, 22 Jan 1999, CaT wrote:
> 
> > > As for your multi-mode errors, the original changes that I made around
> > > 2.1.122 were stubbed out, but you can enable them easily.
> > > 
> > > Apply this, "ide-2.2.0.8.pat1", to give you the option of multi-mode config.
> > > 
> > > The other option is to edit ./drivers/block/ide.h at line #34
> > > 
> > > #define INITIAL_MULT_COUNT      0       /* off=0; on=2,4,8,16,32, etc.. */
> > > #define INITIAL_MULT_COUNT      1       /* off=0; on=2,4,8,16,32, etc.. */
> > 
> > Applied that too... (erm.. both of them)
> 
> I realy would like to know if both work individually.
> The idea was to determine if changing the INITIAL_MULT_COUNT value to ONE
> as a default option would fix the error without the need of the actual
> patch.  Since I am looking beyond the current state of distrutions,
> no one () will like to have to do double builds of bootdisks.
> Much less the average JOE, newbie or enduser, will not want to have to
> guess which to use.
> 
> I do not want this to look like a MicroSoft Win98 install that took
> two-hours to press the enter key from rolling and laughing on the floor.
> 
> "Should your computer halt, please reset and continue with the install"
> Mind you that anybody who did not roar aloud must not understand /dev/null.
Changing the above #defines does NOT work. I still get the errors on bootup.
Changing the #if block below to #if 0 DOES work. Using this kernel as I type.
#if 1   /* original, pre IDE-NFG, per request of AC */
                drive->mult_req = INITIAL_MULT_COUNT;
                if (drive->mult_req > id->max_multsect)
                        drive->mult_req = id->max_multsect;
                if (drive->mult_req || ((id->multsect_valid & 1) && id->multsect))
                        drive->special.b.set_multmode = 1;
#else
                id->multsect = ((id->max_multsect/2) > 1) ? id->max_multsect : 0;
                id->multsect_valid = id->multsect ? 1 : 0;
                drive->mult_req = id->multsect_valid ? id->max_multsect : INITIAL_MULT_COUNT;
                drive->special.b.set_multmode = drive->mult_req ? 1 : 0;
#endif
Judging by the patch and the mails of one other (whose name is, from memory,
so similar it's confusing :) this was what was wanted.
Hope this is helping and is not too late for the actual 2.2.0 release.
-- 
CaT (cat@zip.net.au)                       URL: 
http://www.zip.com.au/dev/null
    There was farting in the air that night,
        It lit so bright,
            Fernando...
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/