Date: Fri, 22 Sep 2006 12:11:40 +0100
From: David Howells <>
Subject: [PATCH 2/2] AFS: Manage AFS modularity vs FS-Cache modularity
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/9/22/93

Manage AFS modularity vs FS-Cache modularity such that AFS doesn't have the
option to use the cache if AFS is built in and FS-Cache is a module.
Signed-Off-By: David Howells <dhowells@redhat.com>
---
 fs/Kconfig |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)
diff --git a/fs/Kconfig b/fs/Kconfig
index 77cc578..25d2019 100644
--- a/fs/Kconfig
+++ b/fs/Kconfig
@@ -1952,7 +1952,8 @@ # for fs/nls/Config.in
 
 config AFS_FSCACHE
 	bool "Provide AFS client caching support"
-	depends on AFS_FS && FSCACHE && EXPERIMENTAL
+	depends on EXPERIMENTAL
+	depends on AFS_FS=m && FSCACHE || AFS_FS=y && FSCACHE=y
 	help
 	  Say Y here if you want AFS data to be cached locally on through the
 	  generic filesystem cache manager
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/