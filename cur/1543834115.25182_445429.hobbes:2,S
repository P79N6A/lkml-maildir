Date: Wed, 19 Jul 2006 08:58:53 -0400
From: Theodore Tso <>
Subject: Re: filesystem tuning hints?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/7/19/59

In order to answer your question about tuning a filesystem, it's a
requirement to know something about the workload, and you haven't
provided that.  In general if you haven't been using the latest
e2fsprogs creating ext3 with a larger journal size will help ---
unless you don't have the requisite memory to support having extra
pinned buffers, since your application may end up getting pushed out
to swap.  Many journalling filesystems can get much better performance
by putting the journal on a separate external device, especially if
that device is a battery-backed non-volitile ramdisk.  With ext3,
depending on your workload (if it is fsync-intensive, for example),
using data journalling with can help a lot, especially with an
external journal device.
Finally, be warned that many filesystem benchmarks may be quite
misleading, especially dbench, which doesn't match very many real-life
workloads at all.  It's designed to be half (the disk part) of an
artificial web-based benchmark that was in itself a pretty bad
benchmark that was easily subject to gaming and not very reflective of
real-world workloads.  Its main virtue is that it is easy to run and
can be useful to developers as a good stress/smoke test to detect that
new kernels haven't done something stupid, as long as you ignore its
numbers.  :-)
In many cases, using your actual workload will be the best benchmark.
Regards, 
						- Ted
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/