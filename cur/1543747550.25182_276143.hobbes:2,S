Date: Thu, 02 Dec 2004 10:42:40 +0100
From: "cr7" <>
Subject: Re: 2.6.10-rc2-mm4 - non-ACPI compile broken
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/12/2/33

Hello,
I've tried to compile 2.6.10-rc2-mm4 without ACPI on an i386-arch.
It shows:
arch/i386/kernel/built-in.o(.init.text+0x167e): In function `setup_arch':
: undefined reference to `acpi_boot_table_init'
make: *** [.tmp_vmlinux1] Fehler 1
The patch which seems to be responsible is:
x86_64-split-acpi-boot-table-parsing.patch
Around line 83 and the following.
acpi_boot_table_init is located in arch/i386/kernel/acpi/boot.c
But it's only compiled with CONFIG_ACPI_BOOT set.
The attached patch fixes the problem by adding a dummy function to include/linux/acpi.h - like it's done for acpi_init() too.
Regards,
Carsten
Please cc, I'm not subscribed.
diff -upr linux/include/linux/acpi.h linux-new/include/linux/acpi.h
--- linux/include/linux/acpi.h	2004-12-01 14:28:32.000000000 +0100
+++ linux-new/include/linux/acpi.h	2004-12-02 10:30:53.000000000 +0100
@@ -424,6 +424,13 @@ static inline int acpi_table_init(void)
 	return 0;
 }
 
+static inline int acpi_boot_table_init(void)
+{
+	return 0;
+}
+
+
+
 #endif 	/*!CONFIG_ACPI_BOOT*/
 
 unsigned int acpi_register_gsi (u32 gsi, int edge_level, int active_high_low);