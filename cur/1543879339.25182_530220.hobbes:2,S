Date: Thu, 12 Apr 2007 19:45:53 +0200
From: Andi Kleen <>
Subject: Re: [PATCH] i386 tsc: remove xtime_lock'ing around cpufreq notifier
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/4/12/238

On Thursday 12 April 2007 19:41:51 Jeremy Fitzhardinge wrote:
> Andi Kleen wrote:
> > Ok. I think it's better to just fix sched_clock() again than to
> > add another one.  I can probably
> > eliminate the ktime_get() and use something based on jiffies. That will
> > be inaccurate for the instable case of course.
> >
> > I will do that later today.
> 
> sched_clock seems a bit weird to use.  In the pv_ops world, it only
> counts unstolen time, and it is therefore inherently per-cpu.  The
> timestamps should be at least system-wide monotonic.
Even on real hardware it's also per CPU, although the errors
are usually not big. At least the scheduler deals with that by
only ever comparing time stamps from the same CPU.
If you have big deviations between CPUs then it might cause problems
for non scheduler uses. I guess printk_clock is not critical, but
it might be a little confusing.
-Andi
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/