Date: Mon, 14 May 2001 22:55:13 +1000
From: Andrew Morton <>
Subject: Re: 3c900 card and kernel 2.4.3 <
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/5/14/45

Juri Haberland wrote:
> 
> r.verhees@chello.nl wrote:
> > Hi there,
> >
> > when i install kernel 2.4.3 or higher on my slackware
> > system the card (3c900) gets detected but doesn't do
> > anything, i also get the line "using NWAY 8" or something
> > like that (had to switch back to 2.4.2 to type e-mail)
> > wondered if anyone else had this problem and if there's
> > some way to solve it?
> 
> Hi Ronnie,
> 
> did you receive any answer?
> 
> Do you use 10Base2 (aka cheaper net)?
> I do and after upgrading to 2.4.3 (I think) I had to force the driver to
> use the BNC connector though the card was configured (via the little config
> program supplied by 3com) to always use the BNC connector...
> This way I lost several hours to figure out why it wasn't working anymore and
> to discover that I have to build it as a module instead of having it compiled
> into the kernel because I couldn't make it work with kernel options - only
> with driver options...
> Any suggestions?
Yes, sorry.
The problem with earlier kernels was that autoselection
would notice the lack of 10baseT link beat and would then
advance on to trying AUI/SQE/10base2/etc.  None of these
interfaces allow the driver to know if there's anything
connected and the driver consequently gets stuck on that
interface.  The net effect: if you unplug the 10baseT
the driver gets stuck and you have to reboot.
So autoselection was turned off if the NIC was found
to have autonegotiation hardware.  If you want to use
the other interfaces, you have to provide an option,
as described in Documentation/networking/vortex.txt.
For non-modular drivers things are less easy.  If you
want to force it to use 10baseT (if_port zero) then
it should work OK if you cheat and use mem_start=0x400.
So `ether=0,0,0x400'.
For BNC, it should work just fine with `ether=0,0,1'.
If it doesn't, please shout at me.   Compile the
driver with `static int vortex_debug = 7;' at line
183 and send me the boot logs.
Thanks.
-
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/