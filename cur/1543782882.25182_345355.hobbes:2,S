Date: Mon, 29 Aug 2005 15:26:25 -0500
From: John Rose <>
Subject: Re: [patch 8/8] PCI Error Recovery: PPC64 core recovery routines
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/8/29/173

Hi Paul-
> > 2) As a result, the code to call hot-unplug is a bit messy. In
> >    particular, there's a bit of hoop-jumping when hotplug is built as
> >    as a module (and said hoops were wrecked recently when I moved the
> >    code around, out of the rpaphp directory).
> 
> One way to clean this up would be to make rpaphp the driver for the
> EADS bridges (from the pci code's point of view).  Then it would
> automatically get included in the error recovery process and could do
> whatever it should.
Not sure that I agree with this.  Not all PCI hotplug slots have EADS
devices as parents.  This sort of topography dependency is something
we're trying to break in rpaphp.  Rpaphp could set this up for devices
that do have EADS parents, but then we've only covered a subset of
EEH-capable devices.  
Anyway, isn't the OS forbidden from performing most of the expected
function of such a driver for EADS devices:
	Enable the device
	Access device configuration space
	Discover resources (addresses and IRQ numbers) provided by the device
	Allocate these resources
	Communicate with the device
	Disable the device
Thanks-
John
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/