Date: Tue, 29 Feb 2000 08:51:16 +0800 (SGT)
From: Gregory Hosler <>
Subject: Re: 1024 byte sector file system problem.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/2/28/204

um,
so let me ask another question.
should a disk that was fdisk/formatted on an earlier kernel (i.e.
before this change, for example a 2.0.26 kernel) work _as is_ under
the new kernels, or do I need to NFS copy my 100 gigabytes of data
from one system to the other ?
(hint: an existing 1024 byte sector disc, works fine under 2.0.36,
at present cannot be mounted on 2.2.5 - complaints of corrupted superblock,
or some such nonsense.)
-Greg
On 28-Feb-00 Guest section DW wrote:
> On Mon, Feb 28, 2000 at 03:11:29PM +0800, Gregory Hosler wrote:
> 
>> I have an older SMO-451, which supports the 512 & 1024 byte sectors,
>> which runs flawlessly under 2.0.36, w/ the 1024 byte sector media.
>> 
>> I hooked the SMO-551 up to a new installation running stock RH 6.0, 
>> kernel 2.2.5; the support for 1024 byte sector appears to be borken
>> in this kernel.
> 
> Not necessarily broken, but the behaviour is a bit different
> from what you thought it was. At some point in time it was
> decided that the partition table is written in hardware sectorsize
> units, not in units of 512-byte sectors. (No doubt because MSDOS
> software does the same.)
> 
> This means that when you see 
> 
>> kernel: SCSI device sdd: hdwr sector= 1024 bytes. Sectors= 1273011 [1243 MB]
> 
> and do
> 
>> Again, I fdisk, set the geometry to 32x64x1243
> 
> then you actually claim that there are 32*64*1243 = 2545664 sectors,
> but there are only 1273011, so it is not surprising that you get
> complaints about trying to write past the end of the disk.
> 
> Make sure you have a somewhat recent fdisk, so that you can specify
> the sectorsize with the -b option, if necessary.
> 
> Andries
> 
> -
> To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
> the body of a message to majordomo@vger.rutgers.edu
> Please read the FAQ at 
http://www.tux.org/lkml/
----------------------------------
E-Mail: Gregory Hosler <gregory.hosler@eno.ericsson.se>
Date: 29-Feb-00
Time: 08:44:27
        Always remember that you are unique.  Just like everyone else.
----------------------------------
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/