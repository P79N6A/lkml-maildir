Date: Sun, 21 Mar 2004 10:52:33 +0100
From: Ingo Oeser <>
Subject: Re: Kernel 2.6.4 Hang in utime() on swap file
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/3/21/86

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1
On Saturday 20 March 2004 22:55, Andrew Morton wrote:
> ho hum.  We do this to prevent anyone from ftruncate()ing the swapfile
> while it is in use.  That can destroy filesystems.  Let me think about it a
> bit.
Maybe you can deny to open such files with proxy file ops and proxy
block dev ops.
So you implement all file operations and just give back errors.
This has no speed penalty for the hot path and implements correct error
handling.
Only penalty is code bloat, but this is normal for additional error
handling ;-)
But maybe I'm totally wrong here and this is just another case of
"doctor it hurts...".
Regards
Ingo Oeser
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.4 (GNU/Linux)
iD8DBQFAXWXhU56oYWuOrkARAtRAAKDjjyxyXbuH1LS+cJjGIduWYvEc7gCg4Cy2
wfjw7RtJtABR0MtvL07UPGw=
=rB7n
-----END PGP SIGNATURE-----
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/