Date: Mon, 23 Oct 2006 02:12:26 -0500
From: Chase Venters <>
Subject: Re: incorrect taint of ndiswrapper
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/10/23/55

On Monday 23 October 2006 01:40, Giridhar Pemmasani wrote:
> Exactly - the loader within ndiswrapper taints kernel versions 2.6.10 and
> newer (older kernels don't have a way of tainting the kernel). The code is
> in loader.c in ndiswrapper.
Next question - what version of ndiswrapper started voluntary tainting (or has 
it always?)
That is to say, are there versions of ndiswrapper floating around out there in 
the ether capable of building against 2.6.19-rc* that don't voluntarily 
add_taint()? (I'm guessing the answer is 'no', but the answer is possibly 
important to consider)
The attached patch (untested) should keep the kernel from self-tainting when 
ndiswrapper is inserted. The last question, then, is how everyone else feels 
about this. Objections to removing the mandatory ndiswrapper taint?
Signed-off-by: Chase Venters <chase.venters@clientec.com>
diff --git a/kernel/module.c b/kernel/module.c
index 67009bd..f948a2c 100644
--- a/kernel/module.c
+++ b/kernel/module.c
@@ -1717,8 +1717,6 @@ #endif
 	/* Set up license info based on the info section */
 	set_license(mod, get_modinfo(sechdrs, infoindex, "license"));
 
-	if (strcmp(mod->name, "ndiswrapper") == 0)
-		add_taint_module(mod, TAINT_PROPRIETARY_MODULE);
 	if (strcmp(mod->name, "driverloader") == 0)
 		add_taint_module(mod, TAINT_PROPRIETARY_MODULE);
 
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/