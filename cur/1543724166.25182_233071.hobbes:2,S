Date: Thu, 8 Jul 2004 21:56:45 -0700
From: Andrew Morton <>
Subject: Re: writepage fs corruption fixes
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/7/9/12

Andrea Arcangeli <andrea@suse.de> wrote:
>
> BTW, the new mpage code looks great,
You should have seen the first version!  But after all the bugs were fixed
and the real world hit it, some spaghetti got in there.
> it's a pity that reiserfs and ext3 don't use it yet.
JFS, hfs, hfsplus and ext2 are using it.
Unfortunately it's hard to use mpage_writepages() even in ext3's writeback
mode, because ext3_get_block() assumes that it is called with a transaction
open.  Not impossible though I guess - use a different get_block() which
opens a transaction for itself...  But only open it if the page isn't
already mapped to disk.  (/me gets itchy fingers)
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/