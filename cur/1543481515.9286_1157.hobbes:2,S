Date: Fri, 22 Jan 1999 16:36:46 -0500
From: Jim Nance <>
Subject: smbfs caching
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/1/22/274

Hello All,
    I have an application that does a lot of file system I/O, and it can
be run in a parallel mode where different machines share data via a
networked file system.  Getting good performance and scaling in parallel
mode requires good performance from both the filesystem clients and servers.
Since the Linux NFS server is not that great I decided to try using
samba and smbfs instead.  To my supprise NFS performed significantly better
than the SMB setup.   Here are the results:
penguin1> grep 'Total check time' *.sum
LOCAL.sum:  Total check time = 3:42:33  User=11771.93 Sys=1063.53 Mem=206.735
NFS.sum:    Total check time = 4:44:43  User=11836.13 Sys=1441.40 Mem=206.750
SAMBA.sum:  Total check time = 6:11:53  User=11974.19 Sys=2272.34 Mem=206.750
For the NFS and SMB tests the program ran on 1 machine which was connected to
an identical machine via 100BaseT ethernet which ran the server.  The results
when running on a local file system are also included for comparison.
One reason these results supprise me so much is that I thought that the raw
speed of samba was better than what you could get from NFS (I have not
verified that).  This leaves me wondering if Linux'es smbfs does not do much
caching.
Would anyone like to comment on this?
Thanks,
Jim
-- 
----------------------------------------------------------------------------
Jim Nance                                                 Avant! Corporation
(919) 941-6655    Do you have sweet iced tea?       jim_nance@avanticorp.com
                  No, but there's sugar on the table.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/