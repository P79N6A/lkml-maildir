Date: Tue, 16 Nov 2004 23:35:52 +0000 (GMT)
From: "Maciej W. Rozycki" <>
Subject: Re: 2.6.10-rc1-mm5
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/11/16/276

On Tue, 16 Nov 2004, Stas Sergeev wrote:
> I don't think it worked. I do not even
> claim there is still some bug to that.
> But I know that nmi_watchdog=1 worked -
> thats for sure. I think there was some
> fallback, which is now either broken or
 Indeed there was and it still is there, namely the following code:
	if (nmi_watchdog != NMI_NONE)
		nmi_watchdog = NMI_LOCAL_APIC;
in detect_init_APIC().
> disabled intentionally, and that's what
> I wanted to find out to make sure that
> everything works as expected.
 Thanks for your insistence -- it helps.  We probably want to rewrite the
fallback differently.
> I applied your patch and here are 2 logs -
> one from older kernel, one with -mm5 with
> patch. Both have nmi_watchdog=1, but the
> NMI works only with the old one.
> Does this shed some light?
 Thanks -- they prove you have no I/O APIC and the quoted fallback should 
indeed be in effect.
  Maciej
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/