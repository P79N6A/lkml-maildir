Date: Mon, 17 Jun 2002 08:37:28 +0200
From: Jens Axboe <>
Subject: Re: bio_chain: proposed solution for bio_alloc failure and large IO simplification
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/6/17/57

On Sat, Jun 15 2002, Adam J. Richter wrote:
> >>         Can't I make a macro to do a table lookup from bio->bi_max?
> 
> >Not really.  If I do
> 
> >	bio_alloc(GFP_KERNEL, 27);
> 
> >then I'll get a 32-slot bvec.  But presumably, I don't
> >want to put more than 27 pages into it.
> 
> 	If you called bio_alloc with a smaller number, that would
> just be the result of a small IO that you knew could not generate
> more iovecs than that.  So, that scenario will not happen.
But the macro lookup would fail for bios not coming from bio_alloc()
-- 
Jens Axboe
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/