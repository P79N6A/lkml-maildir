Date: Fri, 14 Mar 2003 13:48:27 -0800
From: Jesse Barnes <>
Subject: Re: [PATCH] small fix for aty128fb support on ia64
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/3/14/268

Here's a patch I had to use on ia64.  The framebuffer worked nicely,
but it looks like X doesn't restore the state correctly when I switch
back to an fb console, so I just got a blank screen.
Maybe you can think of a better way to address the #ifdef issue, it
certainly looks bad...
Thanks,
Jesse
--- linux-2.5.64-ia64-sn/drivers/video/aty128fb.c	Tue Mar  4 19:29:18 2003
+++ linux-2.5.64-ia64/drivers/video/aty128fb.c	Fri Mar 14 12:12:19 2003
@@ -1448,7 +1448,10 @@
 			}
 		}
 #endif /* CONFIG_ALL_PPC */
+#if defined(CONFIG_PMAC_PBOOK) || defined(CONFIG_MTRR) || \
+    defined(CONFIG_ALL_PPC)
 		else
+#endif /* this is getting ugly */
 			mode_option = this_opt;
 	}
 	return 0;
@@ -1709,7 +1712,7 @@
 					"Guessing...\n");
 	else {
 		printk(KERN_INFO "aty128fb: Rage128 BIOS located at "
-				"segment %4.4X\n", (unsigned int)bios_seg);
+				"segment %4.4lX\n", (unsigned long)bios_seg);
 		aty128_get_pllinfo(par, bios_seg);
 	}
 #endif
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/