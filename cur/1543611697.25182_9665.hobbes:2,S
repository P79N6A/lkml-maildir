Date: Sun, 2 Dec 2001 10:17:48 -0200 (BRST)
From: Rik van Riel <>
Subject: Re: buffer/memory strangeness in 2.4.16 / 2.4.17pre2
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/12/2/37

On Sat, 1 Dec 2001, Andrew Morton wrote:
> You'll find that if you push the machine really hard - allocate
> 1.5x physical memory and touch it all then the VM will, eventually,
> with great reluctance and much swapping, relinquish the 30 megabytes
> of buffercache memory.  But it's out of whack.
This is an expected (and very bad) side effect of use-once.
> If we put anon pages on the active list instead, then shrink_caches()
> and refill_inactive() start to do something, and they move that stale
> old buffercache memory onto the inactive list where it can be freed.
This would fix the problem of not being able to evict stale
active pages, but I have no idea if it would unbalance
something else.
> This is just a random hack.  I don't understand what's going on in
> the VM, let alone what's *supposed* to be going on.  And given the
> state of documentation available to us,  I never will.
The balancing in Andrea's VM is just too subtle to understand
without docs, that is, if there is any particular idea behind
it and it isn't just experimentation.
regards,
Rik
-- 
Shortwave goes a long way:  irc.starchat.net  #swl
http://www.surriel.com/
		
http://distro.conectiva.com/
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/