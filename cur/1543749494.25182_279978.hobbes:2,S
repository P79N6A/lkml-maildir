Date: Sat, 18 Dec 2004 12:52:41 +0100
From: Charles-Henri Collin <>
Subject: Re: ip=dhcp problem...
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/12/18/29

Jan Engelhardt a Ã©crit :
>>I've got the following problem with linux 2.6.8.1:
>>I'm nfs-rooting a diskless client with kernel parameter ip=dhcp.
>>My dhcpd.conf  has a "option domain-name-servers X.X.X.X;" statement and
>>"get-lease-hostnames true;"
>>Now when the diskless clients boot, no name-server configured and they cant
>>resolv.
>>dmesg gives me, for instance:
>> 
>>
>
>What happens if you put
>	option domain-name-servers 192.168.222.1;
>in your dhcpd.conf, i.e. an IP number rather than a host?
>
>
>
>
>Jan Engelhardt
> 
>
i do put IP in this field (192.168.0.254) in fact, but this doesnt work.
i'm looking for a reason why it desnt work.. i've just setup:
#define  IPCONFIG_DEBUG
in linux/net/ipv4/ipconfig.c, and this is what i get at boottime:
DHCP:   Get message type 2
DHCP:   Offered address 192.168.0.237 by server 192.168.0.254
DHCP/BOOTP:    Got extension   53: 02
DHCP/BOOTP:    Got extension   54: c0 a8 00 fe
DHCP/BOOTP:    Got extension   51: 00 01 19 40
DHCP/BOOTP:    Got extension   1: ff ff ff 00
DHCP/BOOTP:    Got extension   3: c0 a8 00 fe
DHCP/BOOTP:    Got extension   12: 63 6c 69 65 6e 74 46 53 42 2d 32 33 
37 2e 66 73 62 2e 6e 65 74 00
DHCP/BOOTP:    Got extension   15: 66 73 62 2e 6e 65 74
DHCP/BOOTP:    Got extension   40: 46 53 42 6e 69 73
,DHCP:   sending message type 3
DHCP: Got message type 5
DHCP/BOOTP:    Got extension   53: 05
DHCP/BOOTP:    Got extension   54: c0 a8 00 fe
DHCP/BOOTP:    Got extension   51: 00 01 19 40
DHCP/BOOTP:    Got extension   1: ff ff ff 00
DHCP/BOOTP:    Got extension   3: c0 a8 00 fe
DHCP/BOOTP:    Got extension   12: 63 6c 69 65 6e 74 46 53 42 2d 32 33 
37 2e 66 73 62 2e 6e 65 74 00
DHCP/BOOTP:    Got extension   15: 66 73 62 2e 6e 65 74
DHCP/BOOTP:    Got extension   40: 46 53 42 6e 69 73
Extension 6 is the nameserver (see config.c for more details) and it is 
set as you can see. that is strange....
i'm looking for more hints. hope this will help.
regards,
C COLLIN
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/