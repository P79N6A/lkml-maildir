Date: Sat, 20 Oct 2007 07:36:42 +0200
From: Sam Ravnborg <>
Subject: Re: [patch 2.6.23-git] toplevel Makefile/depmod bugfix
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/10/20/14

On Fri, Oct 19, 2007 at 09:42:24PM -0700, David Brownell wrote:
> This removes a BASH syntax error (seen building on Ubuntu Feisty).
> 
> Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
> 
> --- g26.orig/Makefile	2007-10-19 21:29:43.000000000 -0700
> +++ g26/Makefile	2007-10-19 18:35:32.000000000 -0700
> @@ -1507,7 +1507,7 @@ quiet_cmd_rmfiles = $(if $(wildcard $(rm
>  # and we build for the host arch
>  quiet_cmd_depmod = DEPMOD  $(KERNELRELEASE)
>        cmd_depmod = \
> -	if [ -r System.map -a -x $(DEPMOD) -a "$(SUBARCH)" == "$(ARCH)" ]; then \
> +	if [ -r System.map -a -x $(DEPMOD) -a "$(SUBARCH)" = "$(ARCH)" ]; then \
>  		$(DEPMOD) -ae -F System.map                                     \
>  		$(if $(strip $(INSTALL_MOD_PATH)), -b $(INSTALL_MOD_PATH) -r)   \
>  		$(KERNELRELEASE);                                               \
> -
Took a look at 'man bash' here.
bash --version
GNU bash, version 3.2.9(1)-release (x86_64-redhat-linux-gnu)
Copyright (C) 2005 Free Software Foundation, Inc.
Accoding to man bash "==" is used to test for equality and "=" is used for assignmnet.
I assume the above is a dash syntax error (dash is default on ubuntu IIRC).
Is it truly protable with "=" or do we need to be more clever?
	Sam
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/