Date: Fri, 26 Feb 1999 15:52:15 -0500 (EST)
From: Donald Becker <>
Subject: Re: Linux 2.2.2 TCP delays every 41st small packet by 10-20 ms
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/2/26/164

On Fri, 26 Feb 1999, Josip Loncaric wrote:
> Subject: Re: Linux 2.2.2 TCP delays every 41st small packet by 10-20 ms
> Andrea Arcangeli wrote:
> > On Thu, 25 Feb 1999, Josip Loncaric wrote:
> > 
> > >The conclusion is this: in Linux TCP, every N-th small packet is delayed
> > >by 1-2 "jiffies" (defined by the 100 Hz system clock).  For Linux kernel
> > 
> > This 1-2 jiffies made me thing again at the PSH thing. Probably I am
> > completly out but could you try this patch?
> 
> Your patch improved things by a factor of 20.  The easiest way for me to
...
> Atypically large delays now cluster around 1 millisecond instead of 20
> milliseconds.  In both cases, a vast majority of the messages are spaced
> by less than 100 microseconds.  Even after the patch, five delays of 200
> milliseconds out of the 420,602 measured were seen, but this might be
> due to some unavoidable system activity during the test.
Could you please try the following?
Bump the RX_RING_SIZE and TX_RING_SIZE in the driver up to 128 or 256
entries each.  With enough memory this should have trivial free memory
impact and remove any queue-limit noise in the measurments.
This should have no significant average performance impact.
If it does, there is something unexpected going on.
Donald Becker					  becker@cesdis.gsfc.nasa.gov
USRA-CESDIS, Center of Excellence in Space Data and Information Sciences.
Code 930.5, Goddard Space Flight Center,  Greenbelt, MD.  20771
301-286-0882	     
http://cesdis.gsfc.nasa.gov/people/becker/whoiam.html
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/