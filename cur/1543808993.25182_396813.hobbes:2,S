Date: Mon, 13 Feb 2006 15:15:16 -0800 (PST)
From: Chris Stromsoe <>
Subject: Re: any FS with tree-based quota system?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/2/13/456

On Tue, 14 Feb 2006, Neil Brown wrote:
> On Monday February 13, cbs@cts.ucla.edu wrote:
>>
>> I would like to be able to apply a quota to a particular tree, and have 
>> every file and directory in the path of that tree count toward that 
>> tree's quota usage.  I can prevent hard links across trees.
>>
>> I noticed that Neil Brown wrote some patches fairly early on in the 2.4 
>> cycle to do tree-based quota by UID.  The last patch-set I found was 
>> against 2.4.14 
>> (
http://cgi.cse.unsw.edu.au/~neilb/patches/linux/2.4.14/
) from late 
>> 2001, and did not come with patches to quota-tools.
>
> Following is my tree-quota patch updated to 2.6.14.3.  However it 
> doesn't do exactly what you claim to want.
Thanks.
> You still need to assign a uid to each user (the kernel needs some 
> number to use as an index into the quotas file).  But only the top-level 
> directory of each tree needs to be owned by the uid.  Files beneath the 
> top can be owned by anyone.
I'm hoping to modify your patch to use the inode at the root of the tree 
instead of a particular uid as the quota owner, so that setting a quota of 
50Mb on /some/location would charge usage for any children of 
/some/location to the inode of /some/location.
> I can dig-up a patch for quota-utils if you want to proceed with this.
I would appreciate that.
-Chris
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/