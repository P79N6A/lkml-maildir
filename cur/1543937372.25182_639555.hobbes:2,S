Date: Thu, 17 Jan 2008 13:07:12 +0100
From: Peter Zijlstra <>
Subject: Re: 2.6.24-rc7: memory leak?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/17/85

On Thu, 2008-01-17 at 22:40 +1100, CaT wrote:
> On Thu, Jan 17, 2008 at 12:22:03PM +0100, Peter Zijlstra wrote:
> > On Thu, 2008-01-17 at 17:34 +1100, CaT wrote:
> > > cache). During the rsync the memory used grew to just shy of 1.6gig and
> > > now, about 2 hours after the rsync has well and truly finished, the used
> > > memory is at 1.23gig. This is what free reports:
> > > 
> > >              total       used       free     shared    buffers cached
> > > Mem:       2058128    1994468      63660          0     688604 11432
> > > -/+ buffers/cache:    1294432     763696
> > > Swap:      1048568          0    1048568
> > 
> > How much memory does:
> > 
> >   echo 3 > /proc/sys/vm/drop_caches
> > 
> > gain you?
> 
> 56M used now. 
Good :-)
> Should all this cache usage not be counted towards the
> 'Cached' entry in meminfo rather then getting counted as part of used
> ram. 
Cached is only the page-cache, not all the other caches we have..
This someones confuses people, but one gets used to it. slabinfo allows
one to easily view others.
> I assume that this would not cause an oom situation and would be
> freed up if all that memory really did need to be used.
Correct.