Date: Fri, 10 Oct 2003 19:53:43 -0700
From: Andrew Morton <>
Subject: Re: statfs() / statvfs() syscall ballsup...
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/10/10/305

Trond Myklebust <trond.myklebust@fys.uio.no> wrote:
>
> It does nothing for the case Joel mentioned where 2 different nodes
> are writing to the same device, and you need to force a read in order
> to resynchronize the page cache.
> Apart from O_DIRECT, we have nothing in the kernel as it stands that
> will allow userland to deal with this case.
Applications may use fadvise(POSIX_FADV_DONTNEED) to invalidate sections of
a file's pagecache.
It is not designed to be 100% reliable though: mmapped pages will be
retained, and dirty pages are skipped.
For the dirty pages it might be useful to add a new mode to fadvise which
syncs a section of a file's pages; -mm has the necessary infrastructure for
that.
POSIX does not define the fadvise() semantics very clearly, so it is largely
up to us to decide what makes sense.  There are a number of things which we
can do quite easily in there - it's mainly a matter of working out exactly
what we want to do.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/