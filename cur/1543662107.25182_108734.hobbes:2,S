Date: Tue, 11 Feb 2003 18:25:08 +0530
From: Suparna Bhattacharya <>
Subject: Re: Kexec, DMA, and SMP
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/2/11/91

On Mon, Feb 10, 2003 at 10:56:43AM -0700, Eric W. Biederman wrote:
> Suparna Bhattacharya <suparna@in.ibm.com> writes:
[snip]
> 
> Not primarily.  Instead I am trying to address the possibility that
> DMA is overwriting the recovery code due to a device not being shutdown
> properly.  Though it would happen to cover many cases of the wrong
> memory address being passed to a device.
> 
[snip]
> 
> The other piece that a reserved area of memory is that you can
> simplify the other cases because you don't need to do anything
> before the dump because everything is preserved.
> 
[snip]
> Yes, for the same reasons.   I am definitely not trying to address the
> case of buggy hardware.
> 
[snip]
> 
> And I am certain that with a preserved memory area we can
> preserve everything without compression.
> 
OK, I see where you are coming from. It is an interesting
possibility, if you know how to pull it off for various 
architectures, and the working area that the new kernel needs 
to do operate to the extent of issuing the writeout is not 
too big (i.e.  doesn't take away too much memory from the 
operational kernel). Perhaps we could hide this memory from 
the normal kernel virtual address space most of the time, so 
its less susceptable to software corruption (i.e. besides
physical access via DMA).
At the same time we do want to quiesce / stop the DMA as 
soon as possible to get a dump that reflects the 
contents of memory at the concerned instant as closely as 
possible. And in the buggy case we want to stop any 
malfunctioning DMA (writes) immediately to minimize 
damage.
Regards
Suparna
-- 
Suparna Bhattacharya (suparna@in.ibm.com)
Linux Technology Center
IBM Software Labs, India
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/