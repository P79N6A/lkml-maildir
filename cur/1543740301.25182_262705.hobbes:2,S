Date: Thu, 21 Oct 2004 01:54:58 -0500
From: Dmitry Torokhov <>
Subject: [PATCH 0/5] Sonypi driver model & PM changes
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/10/21/53

Hi,
I have been looking at the sysdevs in present in the kernel and noticed that
sonypi was registering itself as a system device. Surely it is possible to
suspend it with interrupyts enabled, so it better be converted to a platform
device. I course of convert I also did some additional changes:
01-sonypi-whitespace-fixes.patch
	- get rid of extra whitespace and convert to the kernel cosing style:
	  ... However, there is one special case, namely functions: they have
	  the opening brace at the beginning of the next line...
02-sonypi-module_param.patch
	- convert sonypi from using MODULE_PARM and __setup to module_param.
	  The parameters are:
		sonypi.camera
		sonypi.compat
		sonypi.fnkeyinit
		sonypi.mask=		- exported through sysfs, writeable
		sonypi.minor=
		sonypi.useinput
		sonypi.verbose		- exported through sysfs, writeable
03-sonypi-pm-changes.patch
	- convert sonypi sysdev to platform device, drop old-style PM code
	  since APM does call device_suspend anyway so the new style handlers
          will be called.
04-sonypi-misc-changes.patch
	- switch sonypi_misc_read to use wake_event_interruptible instead of
	  a homemade copy, fix small race there, make sure that the device
	  is fully initialized before turning the interrupts on.	
05-sonypi-pci_get_device.patch
	- convert from pci_find_device which is obsolete to pci_get_device.
Warning: I do not have the hardware som while the code is compiles and I am
pretty sure it is correct it has not been tested.
Should apply to 2.6.9
-- 
Dmitry
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/