Date: Fri, 18 Jan 2008 16:48:09 +0100
From: Ingo Molnar <>
Subject: [git pull] x86 fixes for v2.6.24
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/18/275

Linus, please pull the latest x86 git tree from:
   git://git.kernel.org/pub/scm/linux/kernel/git/x86/linux-2.6-x86.git
two fixes: a "make mrproper" bug and a new cpuid for oprofile, both 
build/boot tested.
	Ingo
------------------>
Arjan van de Ven (1):
      x86: add support for the latest Intel processors to Oprofile
Michael Opdenacker (1):
      x86: fix make mrproper
 Makefile                    |    2 +-
 arch/x86/oprofile/nmi_int.c |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)
diff --git a/Makefile b/Makefile
index 713f685..a7aa374 100644
--- a/Makefile
+++ b/Makefile
@@ -1088,7 +1088,7 @@ CLEAN_FILES +=	vmlinux System.map \
                 .tmp_kallsyms* .tmp_version .tmp_vmlinux* .tmp_System.map
 
 # Directories & files removed with 'make mrproper'
-MRPROPER_DIRS  += include/config include2 usr/include
+MRPROPER_DIRS  += include/config include2 usr/include arch/i386 arch/x86_64
 MRPROPER_FILES += .config .config.old include/asm .version .old_version \
                   include/linux/autoconf.h include/linux/version.h      \
                   include/linux/utsrelease.h                            \
diff --git a/arch/x86/oprofile/nmi_int.c b/arch/x86/oprofile/nmi_int.c
index 2d0eeac..944bbcd 100644
--- a/arch/x86/oprofile/nmi_int.c
+++ b/arch/x86/oprofile/nmi_int.c
@@ -380,7 +380,7 @@ static int __init ppro_init(char ** cpu_type)
 
 	if (cpu_model == 14)
 		*cpu_type = "i386/core";
-	else if (cpu_model == 15)
+	else if (cpu_model == 15 || cpu_model == 23)
 		*cpu_type = "i386/core_2";
 	else if (cpu_model > 0xd)
 		return 0;