Date: Thu, 03 Jun 1999 21:47:48 -0300
From: Jeff Dike <>
Subject: Re: A user-mode kernel implementation
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/6/3/215

lgb@oxygene.terra.vein.hu said:
> This may be included into official kernel source as an arch/ directory
arch/um is different from all the others.  It has an underlying architecture 
and needs to inherit stuff from it.  If you look in include/asm-um, you will 
see a collection of slightly warmed-over asm-i386 headers.  This obviously 
won't fly on other architectures.
I was going to wait until it had been ported once or twice, finding out what 
can and can't be inherited from the underlying architecture, and propose some 
changes in the other asm-* headers.
The idea is that the stuff in the other asm headers which need to be inherited 
would be split out into another file.  So foo.h would have the stuff that 
asm-um needs split out into foo_user.h (and obviously include foo_user.h to 
make things look the same from outside).  A SUB_ARCH variable would be added 
to the Makefile to indicate what the underlying architecture is.  This would 
be used to make a link asm-um/arch --> ../../asm-$SUBARCH.  Then asm-um 
headers would include asm/arch/foo_user.h.  If something like an assembly 
idiom is usable in user space on some architectures and not on others, then 
its presence would be tested for, and a portable version provided if necessary.
Since this needs changes in other architectures, I was going to hold off for a 
while before pestering Linus to include it in the official sources.
				Jeff
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/