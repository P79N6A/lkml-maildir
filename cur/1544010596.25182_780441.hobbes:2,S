Date: Sun, 14 Dec 2008 18:40:18 +0100
From: Pierre Ossman <>
Subject: Re: mmotm 2008-12-03-01-50 uploaded (sdhci)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/12/14/100

On Wed, 03 Dec 2008 12:53:24 -0800
Randy Dunlap <randy.dunlap@oracle.com> wrote:
> akpm@linux-foundation.org wrote:
> > The mm-of-the-moment snapshot 2008-12-03-01-50 has been uploaded to
> > 
> >    
http://userweb.kernel.org/~akpm/mmotm/
> > 
> > It contains the following patches against 2.6.28-rc7:
> 
> 
> drivers/built-in.o: In function `sdhci_remove_host':
> (.text+0xd246a): undefined reference to `led_classdev_unregister'
> drivers/built-in.o: In function `sdhci_add_host':
> (.text+0xd5378): undefined reference to `led_classdev_register'
> make[1]: *** [.tmp_vmlinux1] Error 1
> 
> sdhci.c tries to handle the availability of led_()* without using
> Kconfig attributes.  In this case, MMC_SDHCI=y and LEDS_CLASS=m,
> which sdhci.c doesn't handle.
> 
I'm not sure how to properly solve this. I'm not a big fan of adding a
specific Kconfig option for each and every optional feature. I'd prefer
if we get the correct thing<tm> based on just the MMC_SDHCI and
LEDS_CLASS options.
-#if defined(CONFIG_LEDS_CLASS) || defined(CONFIG_LEDS_CLASS_MODULE)
+#if defined(CONFIG_LEDS_CLASS) || (defined(CONFIG_LEDS_CLASS_MODULE)
 	&& !defined(CONFIG_MMC_SDHCI_MODULE))
perhaps?
Rgds
-- 
     -- Pierre Ossman
  WARNING: This correspondence is being monitored by the
  Swedish government. Make sure your server uses encryption
  for SMTP traffic and consider using PGP for end-to-end
  encryption.
[unhandled content-type:application/pgp-signature]