Date: Thu, 07 Sep 2000 22:32:54 +0000
From: Andrew Morton <>
Subject: Re: PCMCIA: 3CCFE575CT initialization probem under 2.4.0-test7
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/9/7/202

"Claude LeFrancois (LMC)" wrote:
> 
> Thanks for the info. I can run the script manually to get the NIC on the
> network. But, by the mean time before a permanent fix, would it be a good
> idea to apply the change I did to allow at least correct initilization for
> eth0 ?
Hi, Claude.
Your suggestion could be a useful kludge if we can guarantee that
Cardbus machines only every have a single interface (possibly
reasonable).
An alternative and similarly tasteless kludge is to hardwire eth0 into
the pcmcia scripts.  There is a description of how to do this at
http://www.uow.edu.au/~andrewm/linux/3c59x-2.3-changelog.txt
 (of all
places).
It says:
   - Kernel 2.3.99 has broken the PCMCIA tools.  When a card is
     inserted the 'cardmgr' daemon is no longer told what network
     interface it has been bound to.  Until this is sorted, the
     kludgearound I am using is to alter the PCMCIA script
     /etc/pcmcia/shared:
--- shared      Tue Nov 23 14:47:50 1999
+++ /tmp/shared Mon Apr 17 00:21:28 2000
@@ -118,11 +118,13 @@
     while read SOCKET CLASS DRIVER INSTANCE DEV MAJOR MINOR ; do
        if [ "$1" = "$DEV" ] ; then return 0 ; fi
     done
+return 0
     return 1
 }
 get_info ()
 {
+       echo get_info: $1
     if [ -d /var/state/pcmcia ] ; then
        SCHEME=`cat /var/state/pcmcia/scheme`
        STAB=/var/state/pcmcia/stab
@@ -141,3 +143,4 @@
 if [ $# -lt 2 ] ; then usage ; fi
 ACTION=$1 ; DEVICE=$2
+DEVICE=eth0
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/