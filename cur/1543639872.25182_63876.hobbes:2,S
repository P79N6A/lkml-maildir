Date: Tue, 13 Aug 2002 16:20:50 -0400
From: Tom Miller <>
Subject: [PATCH] IBMMCA 2.5.31
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/8/13/286

This is a very trivial patch, it fixes the two remaining strtok()'s in the Kernel!  I have CC:'d to the maintainer of this driver. 
I don't use this driver, so despite this patch's simplicity, please provide test info, and if i did everything right. 
Thanks,
Tom
-----------------------------------------
--- /usr/src/linux-2.5.31/drivers/scsi/ibmmca.c Sat Aug 10 21:41:20 2002
+++ /usr/src/linux/drivers/scsi/ibmmca.c        Mon Aug 12 23:34:30 2002
@@ -1406,7 +1406,7 @@
    io_base = 0;
    id_base = 0;
    if (str) {
-      token = strtok(str,",");
+      token = strsep(str,",");
       j = 0;
       while (token) {
         if (!strcmp(token,"activity")) display_mode |= LED_ACTIVITY;
@@ -1424,7 +1424,7 @@
              scsi_id[id_base++] = simple_strtoul(token,NULL,0);
            j++;
         }
-        token = strtok(NULL,",");
+        token = strsep(NULL,",");
       }
    } else if (ints) {
       for (i = 0; i < IM_MAX_HOSTS && 2*i+2 < ints[0]; i++) {
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/