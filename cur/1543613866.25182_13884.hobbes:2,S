Date: Wed, 19 Dec 2001 15:23:53 -0500 (EST)
From: Asheesh Laroia <>
Subject: Re: [reiserfs-list] Re: Reiserfs corruption on 2.4.17-rc1!
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/12/19/84

This was exactly the problem I had.  It was solved by a getting a new
superblock via debugreiserfs, as patched by Yury Yu. Rupasov.  See the
thread at the beginning of the month, "Filesystem Corrupted".
It was resolved, again, by the patched debugreiserfs pre-release.  Run a
recent debugreiserfs and post the output.  It should give you the location
of a superblock backup.
-- Asheesh.
On Wed, 19 Dec 2001, Dieter [iso-8859-15] NÃ¼tzel wrote:
> On Tue, 18 Dec 2001 21:35:40  Diego Calleja wrote:
> > On Tue, 18 Dec 2001 14:08:42 Hans Reiser wrote:
> > > Nikita Danilov wrote:
> > >
> > > >Diego Calleja writes:
> > > >
> > > >
> > > > Unfortunately this looks like "standard" reiserfs tree corruption.
> > > > Take
> > > >
> > A little more precisely: nobody at Namesys has ever hit this bug using
> > our known healthy hardware.  Various users have.  Bad hardware (e.g
> > media defect) could cause this bug, and maybe cause it in just about the
> > number of users that we see it in.   This does NOT mean that it is due
> > to bad hardware.  If you, or anyone, can reproduce this bug, we would be
> > very interested to learn how to do so.
> >
> > Hans
> > I'm afraid I can't. It just happened. I only can describe what was I doing,
> > although it must be useless....
> > The system booted with linux 2.4.17-rc1. I was readin mail in kde
> >  when  I tried to mount my vfat partition on /win to listen mp3. (as a
> > normal
> >  user, of course). But  I couldn't mount it. Reason?:
> >         ls: mtab: permission denied
> > Then I log as root, but ls -l /etc/mtab said:
> >         ls: mtab: permission denied
> > any chmod in /etc/mtab: (as root)
> >        chmod: getting attributes of mtab: Permission denied
> >
> >  After this, the filesystem started to fail a lot in all other programs
> >  , the problem is in some files in /etc.
>
> Are you sure, that you had a "clean" 2.4.17-rc1 running???
>
> This smells like the first broken P-reiser_stats_fix.patch, to me.
> Which (ReiserFS) patches had you applied?
>
> If the former is the true, go back to an older kernel version and hope
> reiserfsck will do it for you. When reiserfsck fails reformat.
>
> Let's take this from lk, please. Reiserfs list is the right place.
>
> Regards,
> 	Dieter
>
>
>
-- 
Democracy is good.  I say this because other systems are worse.
		-- Jawaharlal Nehru
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/