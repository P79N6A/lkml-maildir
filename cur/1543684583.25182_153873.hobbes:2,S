Date: Sat, 2 Aug 2003 21:14:33 +0200
From: Willy Tarreau <>
Subject: Re: Linux 2.4.22-pre10
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/8/2/124

On Sat, Aug 02, 2003 at 08:28:46PM +0200, Martin Josefsson wrote:
> Uhm, my tests have shown it to be very fast and efficient. But I didn't
> look to see if all packets got through to the logfile. But getting it to
> write logs at ~35MB/s wasn't a problem.
I clearly didn't reach these numbers, I used LOGEMU, and while you're at it,
I must say that when I speak about 1500/s, it's about logs _written_ down.
The firewall can still can process 5k sessions/s, but looses many logs (3.5k
every second).
When I read the LOGEMU code, I had the impression that it was given more as
a proof of concept than anything else. Because there are many many many
"fprintf(of, something_trivial_enough_to_support_memcpy)".
> Did you specify --ulog-qthreshold 50 ?
> and did you specify --ulog-cprange at all? if you don't it will copy the
> entire packet to userspace. I copy 64 bytes to userspace and that's more
> than enough to log everything needed.
honnestly, i't 6 months old in my head, and I don't remember with which
parameters I played. But I'd happily restart a bench if you have some tuning
advices (provided that they are compatible with basic production constraints,
such as log rotation, and a few CPU left for monitoring processes :-))
I cannot promise to to it within a few days though.
Cheers,
Willy
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/