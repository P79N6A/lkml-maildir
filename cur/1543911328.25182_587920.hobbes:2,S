Date: Fri, 24 Aug 2007 00:29:45 +0200
From: Xavier Bachelot <>
Subject: Add device id for P4M900 to via-agp module
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/8/23/324

This is a new VIA chipset that works with the existing code. It only 
needs the device id to be added for detection.
--- a/drivers/char/agp/via-agp.c	2007-08-23 23:41:56.000000000 +0200
+++ b/drivers/char/agp/via-agp.c	2007-08-23 23:45:13.000000000 +0200
@@ -399,6 +399,11 @@
 		.device_id  = PCI_DEVICE_ID_VIA_P4M890,
 		.chipset_name   = "P4M890",
 	},
+	/* P4M900 */
+	{
+		.device_id  = PCI_DEVICE_ID_VIA_VT3364,
+		.chipset_name   = "P4M900",
+	},
 	{ }, /* dummy final entry, always present */
 };
 
--- a/include/linux/pci_ids.h	2007-08-23 23:42:04.000000000 +0200
+++ b/include/linux/pci_ids.h	2007-08-23 23:48:19.000000000 +0200
@@ -1296,6 +1296,7 @@
 #define PCI_DEVICE_ID_VIA_VT3324	0x0324
 #define PCI_DEVICE_ID_VIA_VT3336	0x0336
 #define PCI_DEVICE_ID_VIA_VT3351	0x0351
+#define PCI_DEVICE_ID_VIA_VT3364	0x0364
 #define PCI_DEVICE_ID_VIA_8371_0	0x0391
 #define PCI_DEVICE_ID_VIA_8501_0	0x0501
 #define PCI_DEVICE_ID_VIA_82C561	0x0561