Date: Fri, 23 Nov 2007 09:40:47 +0100
From: "Kay Sievers" <>
Subject: Re: PCMCIA serial_cs driver binding problems.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/11/23/24

On Nov 20, 2007 3:08 PM,  <greg@enjellic.com> wrote:
> I'm working to sort out what appear to be issues with binding of the
> serial_cs driver to a PCMCIA wireless card (Zoom).
>
> Card works perfectly in recent 2.6.2[23] kernels if cardmgr is running
> and PCMCIA_IOCTL support is in the kernel.  The serial_cs driver
> fails, however, to bind in a pure hotplug configuration.  The hotplug
> scripts detect card insertion and load the serial_cs module but the
> driver doesn't bind to the device.
>
> The slot number (0.0 or 1.0) appears in the /sys/bus/pcmcia/devices
> directory after card insertion.  The serial_cs directory also presents
> in the /sys/bus/pcmcia/drivers directory secondary to module load.
>
> I've tried to manually echo the device number (0.0 or 1.0) into the
> /sys/bus/pcmcia/drivers/serial_cs/bind pseudo-file but nothing
> happens.  The device number is present as a binding if cardmgr frobs
> things with the pcmcia_ioctl bind commands.
Did you enable this?
  echo -n 1 > /sys/devices/pci0000:00/0000:00:1e.0/0000:15:00.0/0.0/allow_func_id_match
You can watch "udevmonitor --kernel" while doing this, to get the path and
see what events the kernel creates.
Distros usually set it automatically by udev:
  ACTION=="add", SUBSYSTEM=="pcmcia", ENV{MODALIAS}=="?*",
ATTR{allow_func_id_match}="1"
Kay
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/