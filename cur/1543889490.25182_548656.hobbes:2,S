Date: Thu, 24 May 2007 09:45:37 -0400
From: David Woodhouse <>
Subject: Re: [PATCH] $ARCH: Enable arbitary speed tty ioctls and split input/output speed
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/5/24/142

On Thu, 2007-05-24 at 14:41 +0100, Alan Cox wrote:
> Most people copied the x86 behaviour which makes it easy to transplant.
> Some are just smoking something (see ioctls.h for sh-64 and weep), others
> have slightly odd behaviour for historical compatibility reasons (Sparc)
Likewise, I assume the lack of IBSHIFT on PowerPC is because of AIX?
> > Presumably this is because of the mess in tty_termios_encode_baud_rate
> > when we fix its bogus assumptions about IBSHIFT always being defined?
> 
> It's not a bogus assumption. The current code supports
> 
> 	- The old way
> 	- BOTHER and IBSHIFT
> 
> When PPC wants to do arbitary baud rate it needs to resolve both of the
> definitions together. IBSHIFT is simply the shift you apply to the baud
> bits to get the input baud bits.
Why bother introducing new IBSHIFT stuff when it can be declared
obsolete already -- if you want different input and output baud rates,
just set BOTHER and have different values c_ispeed and c_ospeed.
That's what my patch attempts. It builds but I haven't actually tested
it. Why do you say it won't work?
-- 
dwmw2
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/