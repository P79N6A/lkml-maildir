Date: Thu, 13 Dec 2007 21:48:36 -0700
From: (Eric W. Biederman)
Subject: Re: [RFC PATCH 06/12] PAT 64b: Add ioremap_wc support
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/12/13/613

Roland Dreier <rdreier@cisco.com> writes:
>  > > Also I didn't see anything like pgprot_wc() in the patchset (although
>
>  > pgprot_writcombined.
>
> Oh I see it now (pgprot_writecombine() actually).
>
> However the same comment as before applies: there needs to be a
> fallback to pgprot_noncached() for all other architectures so that
> drivers can actually use it in a sane way.
Sounds reasonable.
There are three distinct pieces to this.
- Getting arch/x86 caught up the state art in linux
- Getting the state of the art generalized so everyone can use it.
- Figuring how to generally do the proper conflict checking so we
  don't shoot ourselves in the head by accident.
They are all independent problems and can be solved in any order.
It should be the conflict checking that is the actual bottleneck.
The rest is just gravy.
Eric