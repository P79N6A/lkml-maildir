Date: Fri, 11 Apr 2003 11:36:56 +1200
From: Nigel Cunningham <>
Subject: Re: PATCH: Fixes for ide-disk.c
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/4/10/179

Hi.
As far as ide code goes, I'm trying to:
1) Get rid of messages that don't need to appear during suspend (so the
'nice display' looks nice (hence printk changes)
2) Make sure the data actually does make it to disk before we poweroff
(hence write back cache interest)
3) Make sure ide_suspend/unsuspend do the right thing (however that's
defined).
I hadn't looked at the code yet to see why it's called twice - too busy
with other things. I did wonder if 
        device_suspend(4, SUSPEND_NOTIFY);
        device_suspend(4, SUSPEND_SAVE_STATE);
        device_suspend(4, SUSPEND_DISABLE);
might do it, but it's an untested theory.
Regards,
Nigel
On Fri, 2003-04-11 at 09:55, Alan Cox wrote:
> On Thu, 2003-04-10 at 19:38, Pavel Machek wrote:
> > Hi!
> > 
> > > > Okay. We need a different solution then, but the problem remains - the
> > > > driver can get multiple, nexted calls to block and unblock. Can it
> > > > become a counting lock?
> > > 
> > > Blocked is a binary power management described state, its not a lock.
> > > What are you actually trying to do ?
> > 
> > He's trying to fix swsusp. Just now it likes
> > to BUG() for some people.
> 
> I meant at a slightly lower and more detailed level
-- 
Nigel Cunningham
495 St Georges Road South, Hastings 4201, New Zealand
Be diligent to present yourself approved to God as a workman who does
not need to be ashamed, handling accurately the word of truth.
	-- 2 Timothy 2:14, NASB.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/