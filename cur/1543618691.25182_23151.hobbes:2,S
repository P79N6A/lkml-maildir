Date: 25 Jan 2002 09:38:41 -0800
From: "H. Peter Anvin" <>
Subject: Re: Too big EBDA issue
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/1/25/140

Followup to:  <1038781885.20020125205822@udm.net.ru>
By author:    ASA <llb@udm.net.ru>
In newsgroup: linux.dev.kernel
> 
> Today I had to upgrade DiskOnChip BIOS extender and after that I could not
> boot linux anymore. After digging hard in problem I found that EBDA was
> enlarged to 33KB so remaining conventional memory was reduced to 607KB but
> normal booting proccess bzImage loading requires at least 608 KB. After
> checking on other systems with DiskOnChip I found their EBDA have sizes
> typically of 29-31 KB.
> 
> Yeah, it is very large EBDA (normal PC's I checked just have only 1 KB
> EBDA). It seems DickOnChip BIOS requires much space on irder to store own
> temporary data to implement their TrueFFS.
> 
> But I guess that there will be some other BIOS extensions that will require
> another EBDA space. As far as bzImage loading model requires space of 32 K
> between 576K (0x90000) and 608K (0x98000) but almost no other place I think
> there is necessity to extend boot protocol in order to relocate 16-bit mode
> loader closer to the lowest memory bound, not to the upper one.
> 
That was done way way long ago.  If your boot protocol is 2.02 or
later, you can locate it anywhere between 0x10000 and 0x90000.  This
applies to bzImages only; zImages are still screwed.
You need a modern enough bootloader that knows about this and uses it,
however.
	-hpa
-- 
<hpa@transmeta.com> at work, <hpa@zytor.com> in private!
"Unix gives you enough rope to shoot yourself in the foot."
http://www.zytor.com/~hpa/puzzle.txt
	<amsp@zytor.com>
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/