Date: Sat, 25 Mar 2006 13:00:20 +0100
From: bert hubert <>
Subject: Re: [PATCH] PM-Timer: doesn't use workaround if chipset is not buggy
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/3/25/40

> This patch adds blacklist of buggy chip, and if chip is not buggy,
> this uses fast normal version instead of slow workaround version.
I can confirm that this patch solves the problem I originally complained
about. 
Timings of 10,000,000 gettimeofday calls on my pentium 4 3GHz (which I won
at OLS, ha!):
tsc
---
real    0m2.504s
user    0m0.700s
sys     0m1.804s
2.6.16-mainline
---------------
real    0m36.973s
user    0m1.440s
sys     0m34.130s
2.6.16-ogawa
------------
real    0m13.697s
user    0m1.712s
sys     0m11.117s
For reference, baseline 2.6.16 on my Athlon64 3200+
---------------------------------------------------
real    0m1.994s
user    0m0.990s
sys     0m0.990s
I'm still going to recommend all 'power' pdns_recursor users on single CPU
and not using frequency scaling to boot with clock=tsc - saves
2.2usec/packet. Or run on an opteron of course.
Thanks for the work everybody!
-- 
http://www.PowerDNS.com
      Open source, database driven DNS Software 
http://netherlabs.nl
              Open and Closed source services
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/