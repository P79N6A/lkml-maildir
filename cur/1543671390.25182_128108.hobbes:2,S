Date: Sat, 26 Apr 2003 19:40:22 +0200
From: Trond Myklebust <>
Subject: Re: 2.4 NFS file corruption
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/4/26/57

>>>>> " " == Roland Kuhn <rkuhn@e18.physik.tu-muenchen.de> writes:
    >> You are updating an executable while the clients are running
    >> it??? Bad! That is not meant to work...
    >>
     > It seems to work 50% of the time, while in the other cases
     > every page but the first ist correctly updated. Is there a
     > reason why this should be so?
Yes. There is not guarantee that the client isn't using a given page.
More importantly though, it just doesn't make sense to change an
executable dynamically. How would you make the transition from one
executable code to the other seamless?
     > Would it be okay to delete the file and recreate one with the
     > same name? This way it should get a new handle, right?
That won't stop your processes from crashing when you delete the file
from underneath them, but it is indeed the recommended way to handle
this sort of problem. This is the way programs such as 'install'
(a.k.a. ginstall) work.
Cheers,
  Trond
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/