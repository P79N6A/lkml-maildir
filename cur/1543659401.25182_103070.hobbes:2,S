Date: Mon, 13 Jan 2003 16:24:07 -0500
From: Jeff Garzik <>
Subject: Re: Linux 2.4.21-pre3-ac4
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/1/13/266

On Mon, Jan 13, 2003 at 08:03:29PM +0100, Benjamin Herrenschmidt wrote:
> Exactly. My problem right now is with enforcing that 400ns delay on
> non-DMA path as with PCI write posting on one side, and other fancy bus
> store queues etc... you are really not sure when your outb for the
> command byte will really reach the disk.
As a slight tangent, PCI write posting is quite annoying because on some
hardware one simply cannot perform a read immediately after a write,
without pausing for a hardware-specified amount of time.
...but, at the same time, who knows how long the write posting may take,
so one doesn't know how long the delay really needs to be.
It would be nice if there was an arch-specific flush-posted-writes hook
[wmb_mmio() ?], if that was possible on write-posting CPUs.  Currently
right now the canonical solution ("MMIO read") doesn't work in some
situations, and I do think we have a solution at all for those "some
situations."
	Jeff
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/