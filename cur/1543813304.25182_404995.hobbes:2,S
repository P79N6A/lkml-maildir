Date: Thu, 09 Mar 2006 09:53:04 -0800
From: Roland Dreier <>
Subject: Re: [PATCH 18 of 20] ipath - kbuild infrastructure
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/3/9/220

 > +	depends on 64BIT && (PCIEPORTBUS || X86_HT)
Why do you depend on X86_HT?  I think you got confused: the HT stands
for hyperthreading, not hypertransport.  In fact if you compile a
kernel optimized for K8, X86_HT is disabled.
And why do you depend on PCIEPORTBUS?  I don't see you using anything
from the pcie_port_service stuff.
I think the correct thing for you to depend on is just "PCI", and
build your whole driver (both pe800 and ht400) unconditionally.
There's no special hypertransport or generic PCIe support config
that you can test.
 > --- /dev/null	Thu Jan  1 00:00:00 1970 +0000
 > +++ b/drivers/infiniband/hw/ipath/Makefile	Thu Mar  9 08:46:47 2006 -0800
I've been suggesting that new files be called "Kbuild", since Sam has
deprecated the "Makefile" name.
 > +ipath_core-y :=
 > +
 > +ipath_core-y += ipath_copy.o
 > +ipath_core-y += ipath_diag.o
 > +ipath_core-y += ipath_driver.o
 > +ipath_core-y += ipath_file_ops.o
 > +ipath_core-y += ipath_i2c.o
 > +ipath_core-y += ipath_init_chip.o
 > +ipath_core-y += ipath_intr.o
 > +ipath_core-y += ipath_layer.o
 > +ipath_core-y += ipath_sma.o
 > +ipath_core-y += ipath_stats.o
 > +ipath_core-y += ipath_sysfs.o
 > +ipath_core-y += ipath_user_pages.o
This is a very strange style.  I would just put all the ipath_core-y
stuff on one or two lines.
 - R.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/