Date: Thu, 15 Mar 2007 12:37:07 -0700
From: Ulrich Drepper <>
Subject: Re: [PATCH 2.6.21-rc3-mm2 4/4] sys_futex64 : allows 64bit futexes
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/3/15/250

Andrew Morton wrote:
> Well OK.  But that doesn't actually explain why 64-bit mutexes are needed.
> It just says they are required.
I can show you the code but it's not easy to understand.  For
complicated syn objects like rwlocks the state information is more than
just locked or not.  Currently we have to use internal locks, modify the
state information, and then release it.  This is terribly inefficient
when many threads are used.  With 64bit futexes the state information
can be kept in the futex object and we don't need an internal lock,
hence the speed-up.
-- 
➧ Ulrich Drepper ➧ Red Hat, Inc. ➧ 444 Castro St ➧ Mountain View, CA ❖
[unhandled content-type:application/pgp-signature]