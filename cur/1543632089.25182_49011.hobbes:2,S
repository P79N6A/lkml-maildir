Date: Wed, 29 May 2002 06:58:02 -0700 (PDT)
From: Nivedita Singhvi <>
Subject: Re: how to get per-socket stats on udp rx buffer overflow?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/5/29/101

On Tue, 28 May 2002, Ben Greear wrote:
> Nivedita Singhvi wrote:
> 
> >>Is there any way for me to see how many incoming packets 
> >>were dropped on a udp socket due to overflowing the input buffer?  
> >>I specifically want this information on a per-socket basis.
> >>
> > 
> > The /proc/net/snmp Udp counter InErrors includes the global
> > count. It would be expensive and usually unnecessary to keep
> > per-socket stats. Is there a real need for seeing the 
> > per-socket count?
> 
> 
> It would not be that expensive..it's just an extra counter that
> is bumped whenever a pkt is dropped.
True for one counter, but generally when considering per
socket stats as a feature, you include all the TCP/UDP/IP
stats, and if youre not holding locks, thats probably an
atomic increment.  Pretty soon we're talking actual
performance and scalability money. (Even if we're not
in the mindset of saving every cycle wherever possible).
> I have need of similar information, but it's low priority
> for me right now, so I probably won't be adding a patch anytime
> soon...
If the info was needed and useful however, then thats a 
different matter :).
> > If it helps, you can check the current bytes in the recv queue
> > in netstat output - you wont know how many bytes have been dropped,
> > but at least you know the amnt in the queue waiting to be read..
> 
> 
> That is nearly worthless unless you are really killing your machine
> and constantly have your buffers full...
Yep, true, it was just a thought to help him identify
the connection that was droping packets because the queue
was full..
> Ben
> 
thanks,
Nivedita
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/