Date: Tue, 11 Nov 2008 10:48:39 +0900
From: Yasunori Goto <>
Subject: Re: [PATCH] cpuset: update top cpuset's mems after adding a node
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/11/10/376

> On Mon, 10 Nov 2008, Miao Xie wrote:
> 
> > on 2008-11-10 14:56 Yasunori Goto wrote:
> > > Did you test this patch?  Was it OK?
> > 
> > I did it on IA64 just now. Updating top cpuset's mems is fine.
> > But I forgot to update the mems_allowed of every task in top cpuset group.
> > It is difficult to fix it, because I don't know whether updating a memory-bound
> > task's mem_allowed is good or not.
> > 
> 
> There's a fix pending in the mmotm tree that calls 
> cpuset_update_task_memory_state() in the slow path of the page allocator, 
> so if one of these tasks fails to allocate memory, its cached mems_allowed 
> nodemask will be updated to include the new node(s).
> 
> The patch is available at 
> 
http://userweb.kernel.org/~akpm/mmotm/broken-out/cpusets-update-mems-allowed-in-page-allocator.patch
Ah, OK. This seems reasonable.
Then Miao-san's patch is fine.
Acked-by: Yasunori Goto <y-goto@jp.fujitsu.com>
Thanks.
-- 
Yasunori Goto 