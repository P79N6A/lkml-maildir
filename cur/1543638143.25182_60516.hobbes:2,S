Date: Wed, 31 Jul 2002 10:46:13 -0400
From: Benjamin LaHaise <>
Subject: Re: [rfc] aio-core for 2.5.29 (Re: async-io API registration for 2.5.29)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/7/31/101

On Wed, Jul 31, 2002 at 02:44:51AM +0200, Andrea Arcangeli wrote:
> So I'm not very excited about this change, I would prefer the previous
> version. Also consider with the vsyscall doing the gettimeofday
> calculation in userspace based on "when" rather than in-kernel isn't
> going to be more expensive than your new API even of applications that
> really want the "when" behaviour instead of the "timeout". While the
> applications that wants the "timeout" this way we'll be forced to a
> vgettimeofday in userspace and one in kernel which is a pure overhead
> for them.
That's still racy.  There are several hundred instructions from the 
time the timeout is calculated until the kernel actually uses the 
timeout to calculate an offset relative to jiffies, during which a 
task switch may occur.  I suppose that this could be handled via a 
separate timer interface (we should probably implement posix timers 
anyways).  I can see the arguments, and I guess it's easier to just 
revert it.
		-ben
-- 
"You will be reincarnated as a toad; and you will be much happier."
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/