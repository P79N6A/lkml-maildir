Date: Mon, 16 Oct 2000 23:08:51 +0100 (BST)
From: Tigran Aivazian <>
Subject: Re: [patch-2.4.0-test10-pre3] logic of __alloc_pages_limit(
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/10/16/107

On Mon, 16 Oct 2000, Petr Vandrovec wrote:
> On 16 Oct 00 at 22:50, Tigran Aivazian wrote:
> > +           struct page *page;
> >             /* If possible, reclaim a page directly. */
> > -           if (direct_reclaim && z->free_pages < z->pages_min + 8)
> > +           if (direct_reclaim && z->free_pages < z->pages_min + 8) {
> >                 page = reclaim_page(z);
> > -           /* If that fails, fall back to rmqueue. */
> > -           if (!page)
> > -               page = rmqueue(z, order);
> > -           if (page)
> > -               return page;
> > +               /* If that fails, fall back to rmqueue. */
> > +               if (!page) {
> > +                   page = rmqueue(z, order);
> > +                   if (page)
> > +                       return page;
> > +               }
> 
> Old code returned page from both reclaim_page() or rmqueue(), while new 
> returns pages  only from rmqueue... What happens with page grabbed by 
> rmqueue, BTW ? Or is there something out of picture I do not see?
>                                                         Petr
You are absolutely right, sorry. I will keep my eyes open a bit wider next
time. I put back Linus and linux-kernel to admit my mistake.
Regards,
Tigran
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/