Date: Sun, 12 Mar 2006 20:47:36 -0800
From: Andrew Morton <>
Subject: Re: 2.6.16-rc6-mm1 (NFS tree ... busy inodes ... relatively harmless)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/3/12/217

Neil Brown <neilb@suse.de> wrote:
>
> On Sunday March 12, akpm@osdl.org wrote:
> > 
> > - The NFS tree is a bit sick - you may see the `busy inodes - self destruct
> >   in five seconds" message when performing NFS unmounts.  It seems relatively
> >   harmless.
> 
> I think the term is "mostly harmless" ... see the entry for "Earth" in
> The Hitch-Hikers Guide To The Galaxy... :-)
> 
> I don't believe this is harmless at all, and I have an oops to prove
> it - though it is with NFSv4 which is still EXPERIMENTAL.
> 
> I don't believe it is an NFS bug at all, but a VFS bug.  It happens
> more with NFS because iput on nfs can be a lot slower due to the
> required network activity, so the race is easier to hit.
It's 100% repeatable for me, with nfsv3 unmounts.  First the busy inodes,
then a use-after-free oops if CONFIG_DEBUG_PAGEALLOC (if that workaround
patch I have in there isn't applied).
Not a race, methinks.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/