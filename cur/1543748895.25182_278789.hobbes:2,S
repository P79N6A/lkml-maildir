Date: Tue, 14 Dec 2004 14:36:17 +0800
From: 	Clear.Zhang@uli ...
Subject: re: Re: [patch] scsi/libata: correct bug for ULi M5281
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/12/14/10

Hi Jeff,
I've correct the patch according to your suggestion.
But we need libata-core.c to export some functions.
Here is the patch. Please check it and apply it to new kernels.
Thanks a lot.
Regards,
Clear                         (See attached file: patch_ULi_M5281)
                      Jeff Garzik                                                                                               
                      <jgarzik@pobox.c         收件人： Clear.Zhang@uli.com.tw                                                  
                      om>                      抄送：   linux-kernel@vger.kernel.org, linux-ide@vger.kernel.org,                
                                               andrebalsa@mailingaddress.org, Peer.Chen@uli.com.tw, Emily.Jiang@uli.com.tw,     
                      2004-12-12 03:15         Eric.Lo@uli.com.tw                                                               
                                               主题：   Re: [patch] scsi/libata: correct bug for ULi M5281                      
Clear.Zhang@uli.com.tw wrote:
> Hi, Jeff
>
> The sata_uli patch for m5281 looks fine,but some of M5281 chip's PHY
> is not stable sometime, so it need a workaround to correct the bug.
>
> patch_M5281workaround is just for it.
>
> The patch is applied to kernel 2.6.9. Pleases apply to new kernels,
thanks
> a lot.
>
> Signed-off-by: Clear Zhang <Clear.Zhang@uli.com.tw>
I'm afraid I must reject this patch.  We do not wish to put
hardware-specific workarounds in libata-core.c or libata-scsi.c.
I would suggest either
(a) finding a way to add the workaround to sata_uli.c, or
(b) finding the "root cause" of the problem, and determine why the
libata code is insufficient.
Two suggestions I have while investigating your problem:
1) Replacing the ->phy_reset() hook may allow you to solve the problem
in sata_uli.c.
2) It is entirely possible that we need to add additional error handling
code to libata, including hooks back into the low-level driver (such as
sata_uli.c).
Regards,
             Jeff
[unhandled content-type:application/octet-stream]