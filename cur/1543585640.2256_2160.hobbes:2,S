Date: Fri, 23 Mar 2001 16:23:39 -0600
From: "Cagle, John" <>
Subject: Re: cpqarray & 2.4.1+ hang
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/3/23/140

Marcus Meissner wrote:
>> I have a problem with the 2.4 series kernel running on a number of
>> Compaq ProLiant DL360 servers. The 2.2.x kernels and 2.4.0 work fine,
>> however from 2.4.1 onwards the boxes just hang at the following position
>> on bootup:
>
>> Partition check: 
>> ida/c0d0:
>
>> I have also tested with 2.4.2-ac20 and the same problem occurs. Doing a
>> search on the web some people recommend changing the OS setting in the
>> Compaq BIOS to Linux fixes this problem, however my servers are already
>> running with this BIOS setting and I've also tested with numerous other
>> OS's in the BIOS but the same problem occurs.
>
>Workaround: run the kernel with the 'noapic' option on its commandline. 
>
>The ServerWorks chipset used in this Compaq Server somehow does not pass 
>the the relevant information to Linux mapping routines. :/ 
>
The real problem lies in the OSB4 driver beginning with the 2.4.0 kernel.
Its initialization of the OSB4 breaks APIC interrupt processing, causing a
lockup during boot of any APIC-enabled server that uses the OSB4.  Rolling
back to the version in 2.4.0-prerelease will resolve your lockup during
boot.  Alternatively, you can set CONFIG_BLK_DEV_OSB4=n in your .config.
This will revert to using the generic IDE driver instead of the
OSB4-specific code that is broken.  That's not a problem on ProLiants since
the OSB4 is only used to access the CD-ROM drive, hence you don't need any
enhanced performance.
Regards,
John Cagle
Principal Member Technical Staff
ProLiant Servers, Compaq
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/