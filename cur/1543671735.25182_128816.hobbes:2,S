Date: Wed, 30 Apr 2003 18:41:53 +0200
From: Pavel Machek <>
Subject: Some handy scripts if you are using quilt for kernel
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/4/30/137

Hi!
...unfortunately it depends on on-disk layout, so it is really rather
specialized. First allows to patch to the next Linus kernel with all
patches applied:
quilt-update-kernel:
#
# Run from .pc directory
for A in *; do ( cd $A; find . | ( while true; do read B || exit; cp /usr/src/clean/$B $B; done ); ); done
Second one shows you "what have you done since last quilt refresh". It
takes time.
quilt-diff:
#!/bin/bash
rm -rf /usr/src/tmp/linux
cp -al /usr/src/clean.2.5 /usr/src/tmp/linux
cat /usr/src/linux/patches/series | while true; do
    read PATCHNAME || exit
    echo Processing $PATCHNAME
    cd /usr/src/tmp/linux
    cat /usr/src/linux/patches/$PATCHNAME | patch -Efsp1
done
echo Diffing tree
diff-tree /usr/src/tmp/linux /usr/src/linux | tee /tmp/delme.quilt-diff
Oh and then my diff-tree script:
diff-tree:
#!/bin/bash
diff -ur -x '.dep*' -x '.hdep*' -x '*.[oas]' -x '*~' -x '#*' -x '*CVS*' -x '*.orig' -x '*.rej' -x '*.old' -x '.menu*' -x asm -x local.h -x 'System.map' -x autoconf.h -x compile.h -x version.h -x .version -x defkeymap.c -x uni_hash.tbl -x zImage -x vmlinux -x vmlinuz -x TAGS -x bootsect -x '*RCS*' -x conmakehash -x map -x build -x build -x configure -x '*target*' -x '*.flags' -x '*.bak' -x '*.cmd' $*
I hope its usefull for someone.
								Pavel
-- 
When do you have a heart between your knees?
[Johanka's followup: and *two* hearts?]
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/