Date: Fri, 28 Oct 2005 01:32:44 -0200
From: Davi Arnaut <>
Subject: Re: kernel BUG at mm/slab.c:1488! (2.6.13.2)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/10/27/227

Hi,
> It seems that something still tries to load the ext3 module, and I get the
> BUG seen below.  If I remove the ext3 module and re-build the initrd,
> the error goes away.
The attached patch should fix it.
Signed-of-by: Davi Arnaut <davi.arnaut@gmail.com>
diff --git a/fs/ext3/super.c b/fs/ext3/super.c
--- a/fs/ext3/super.c
+++ b/fs/ext3/super.c
@@ -2639,7 +2639,14 @@ static struct file_system_type ext3_fs_t
 
 static int __init init_ext3_fs(void)
 {
-	int err = init_ext3_xattr();
+	int err;
+
+        if (get_fs_type(ext3_fs_type.name)) {
+          printk(KERN_WARNING "EXT3-fs: already registered\n");
+          return -1;
+        }
+
+        err = init_ext3_xattr();
 	if (err)
 		return err;
 	err = init_inodecache();