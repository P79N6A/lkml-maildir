Date: Sun, 8 May 2005 09:06:35 +0800
From: "Zhang, Yanmin" <>
Subject: [patch] ide proc destroy error
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/5/7/120

Kernel 2.6 has an ide proc destroy error. Run #modprobe ide-core and
#rmmod ide-core, then kernel will dump stack information like below.
Here is the patch against 2.6.12-rc3.
Signed-off-by: Zhang Yanmin <yanmin.zhang@intel.com>
**********Log******************
Badness in remove_proc_entry at fs/proc/generic.c:693
Call Trace:
 [<a0000001000117e0>] show_stack+0x80/0xa0
                                sp=e0000003e05dfbe0 bsp=e0000003e05d0ea8
 [<a0000001000120b0>] dump_stack+0x30/0x60
                                sp=e0000003e05dfdb0 bsp=e0000003e05d0e90
 [<a000000100183090>] remove_proc_entry+0x530/0x540
                                sp=e0000003e05dfdb0 bsp=e0000003e05d0e20
 [<a000000221cbd280>] proc_ide_destroy+0x120/0x140 [ide_core]
                                sp=e0000003e05dfdc0 bsp=e0000003e05d0df0
 [<a000000221ca65f0>] cleanup_module+0x50/0xa0 [ide_core]
                                sp=e0000003e05dfdc0 bsp=e0000003e05d0dd0
 [<a0000001000a9e10>] sys_delete_module+0x390/0x580
                                sp=e0000003e05dfdc0 bsp=e0000003e05d0d50
 [<a00000010000af40>] ia64_ret_from_syscall+0x0/0x20
                                sp=e0000003e05dfe30 bsp=e0000003e05d0d50
 [<a000000000010640>] _stext+0xffffffff00010640/0x400
                                sp=e0000003e05e0000 bsp=e0000003e05d0d50
 <<ide_proc_error_2.6.12_rc3.patch>> 
[unhandled content-type:application/octet-stream]