Date: Fri, 29 Dec 2000 00:50:19 +0100
From: Daniel Phillips <>
Subject: Re: [PATCH] Re: innd mmap bug in 2.4.0-test12
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/12/28/82

Linus Torvalds wrote:
> Ok, pre-5 should have all the same places you found already fixed, but
> please do give it some heavy-duty testing to make sure there isn't
> anything hidden..
I've beaten on it fairly heavily with the BUG in there as you suggested,
with no problems.
This kernel even seems a little faster:
      Test machine: 64 meg, 500 Mhz K6, IDE, Ext2, Blocksize=4K
      Test: dbench 48
      pre4        9.5 MB/sec      11 min 6 secs
      pre5       10.8 MB/sec       9 min 48 secs
I think it would be an awfully good idea to let the BUG out for mass
consumption:
+       if (PageDirty(page)) BUG();
        remove_page_from_inode_queue(page);
        remove_page_from_hash_queue(page);
        page->mapping = NULL;
--
Daniel
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/