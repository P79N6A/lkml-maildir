Date: Mon, 18 Feb 2002 23:43:38 +0100
From: Daniel Phillips <>
Subject: Re: [PATCH] size-in-bytes
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/2/18/135

On February 16, 2002 05:09 pm, Andries.Brouwer@cwi.nl wrote:
> I just rediffed the size-in-bytes patch against 2.5.5pre1.
> The result is found at ftp.kernel.org
> (under 02-2.5.5pre1-sizeinbytes-bsd), and below.
> 
> Comment:
> Disk and partition size is kept several places, sometimes
> in sectors (of 512 bytes), sometimes in blocks (of 1024 bytes).
> This is ugly, one finds a lot of shifting left and right, as in
> 	limit = (size << BLOCK_SIZE_BITS) >> sector_bits;
We want to stay with the shift counts.  They should be the primary currency
of size measurement.  You can add shift counts together and get nice, compact
code, whereas with absolute size you often have to ugly things - e.g., it's a
pain to divide by blocksize when you have it as an absolute number, it's easy
when you have it as a shift.
If you are going to the trouble of fixing this, please don't use absolute
size as the primary measure, use a shift count.
--
Daniel
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/