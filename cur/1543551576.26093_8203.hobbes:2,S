Date: Sun, 15 Oct 2000 01:27:45 +0200 (CEST)
From: Bartlomiej Zolnierkiewicz <>
Subject: [PATCH] add __init to some some fb functions
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/10/14/53

subject + attachment tells all
--
Bartlomiej Zolnierkiewicz
<bkz@linux-ide.org>
diff -uNr linux-240t10p3/drivers/video/controlfb.c linux/drivers/video/controlfb.c
--- linux-240t10p3/drivers/video/controlfb.c	Tue Oct  3 14:27:52 2000
+++ linux/drivers/video/controlfb.c	Sat Oct 14 20:01:01 2000
@@ -1190,7 +1190,7 @@
 	}
 }
 
-static void control_init_info(struct fb_info *info, struct fb_info_control *p)
+static void __init control_init_info(struct fb_info *info, struct fb_info_control *p)
 {
 	strcpy(info->modename, "control");
 	info->node = -1;	/* ??? danj */
diff -uNr linux-240t10p3/drivers/video/dnfb.c linux/drivers/video/dnfb.c
--- linux-240t10p3/drivers/video/dnfb.c	Tue Oct  3 00:17:04 2000
+++ linux/drivers/video/dnfb.c	Sat Oct 14 20:22:33 2000
@@ -296,7 +296,7 @@
 
 }
   
-unsigned long dnfb_init(unsigned long mem_start) {
+unsigned long __init dnfb_init(unsigned long mem_start) {
 
 	int err;
        
diff -uNr linux-240t10p3/drivers/video/macfb.c linux/drivers/video/macfb.c
--- linux-240t10p3/drivers/video/macfb.c	Tue Oct  3 00:16:18 2000
+++ linux/drivers/video/macfb.c	Sat Oct 14 20:16:01 2000
@@ -839,7 +839,7 @@
 	fb_set_cmap:	macfb_set_cmap,
 };
 
-void macfb_setup(char *options, int *ints)
+void __init macfb_setup(char *options, int *ints)
 {
 	char *this_opt;
 	
diff -uNr linux-240t10p3/drivers/video/offb.c linux/drivers/video/offb.c
--- linux-240t10p3/drivers/video/offb.c	Tue Oct  3 14:27:52 2000
+++ linux/drivers/video/offb.c	Sat Oct 14 20:10:29 2000
@@ -369,7 +369,7 @@
     
 }
 
-static void offb_init_fb(const char *name, const char *full_name,
+static void __init offb_init_fb(const char *name, const char *full_name,
 				    int width, int height, int depth,
 				    int pitch, unsigned long address,
 				    struct device_node *dp)
diff -uNr linux-240t10p3/drivers/video/q40fb.c linux/drivers/video/q40fb.c
--- linux-240t10p3/drivers/video/q40fb.c	Tue Oct  3 00:16:19 2000
+++ linux/drivers/video/q40fb.c	Sat Oct 14 20:24:08 2000
@@ -313,7 +313,7 @@
 #endif
 }
   
-int q40fb_init(void)
+int __init q40fb_init(void)
 {
 
         if ( !MACH_IS_Q40)
diff -uNr linux-240t10p3/drivers/video/sisfb.c linux/drivers/video/sisfb.c
--- linux-240t10p3/drivers/video/sisfb.c	Tue Oct  3 14:27:52 2000
+++ linux/drivers/video/sisfb.c	Sat Oct 14 20:07:54 2000
@@ -3313,7 +3313,7 @@
 	fb_mmap:	sisfb_mmap,
 };
 
-int sisfb_setup(char *options)
+int __init sisfb_setup(char *options)
 {
 	char *this_opt;
 
diff -uNr linux-240t10p3/drivers/video/vesafb.c linux/drivers/video/vesafb.c
--- linux-240t10p3/drivers/video/vesafb.c	Sat Oct 14 20:51:19 2000
+++ linux/drivers/video/vesafb.c	Sat Oct 14 20:51:30 2000
@@ -448,7 +448,7 @@
 	fb_pan_display:	vesafb_pan_display,
 };
 
-int vesafb_setup(char *options)
+int __init vesafb_setup(char *options)
 {
 	char *this_opt;
 	