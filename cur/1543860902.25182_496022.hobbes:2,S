Date: Wed, 3 Jan 2007 13:50:07 -0800
From: David Brownell <>
Subject: Re: [linux-usb-devel] [PATCH] OHCI: disallow autostop when wakeup is not available
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/1/3/210

On Tuesday 02 January 2007 7:16 am, Alan Stern wrote:
> On Mon, 1 Jan 2007, Andrey Borzenkov wrote:
> > Is the original problem (OHCI constantly attempting and failing to suspend 
> > root hub) supposed to be fixed in 2.6.20?
> 
> No.  It can't be fixed in the kernel because it is a hardware bug.
I'm curious though:  did older kernels, say 2.6.18, have such issues?
If not, it may still be a software issue ... if you had to use the
sysfs based workaround before, I'm happy to call it a hardware issue.
> >  Currently in rc3 I have
> ...
> > ohci_hcd 0000:00:02.0: auto-stop root hub
> > ohci_hcd 0000:00:02.0: auto-wakeup root hub
> > ohci_hcd 0000:00:02.0: auto-stop root hub
> > ohci_hcd 0000:00:02.0: auto-wakeup root hub
> > ...
> > 
> > and it goes on and on until I stop it manually by usual method:
> > 
> > usb usb1: remote wakeup needed for autosuspend
> 
> The patch mentioned above allows the manual method to work. 
Not just that ... it also fixed the problem where quirk entries
saying "don't even try using remote wakeup" stopped working.
Once some pending PPC-related OHCI patches merge (support for
PS3 and other CELL systems), there will be infrastructure that
makes it easier to add quirk entries that say "this board can't
do remote wakeup properly".  At that point, we can start to
collect quirks for boards like this one.
- Dave
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/