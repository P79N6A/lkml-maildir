Date: Mon, 17 May 1999 01:29:54 -0400
From: Johannes Erdfelt <>
Subject: Re: kernel OOPS in 2.3.2 on USB device reattach
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/5/17/114

On Sun, May 16, 1999, William Ono <wmono@home.com> wrote:
> This is my first Oops report, so please let me know if there's anything I
> can improve on for next time.
Actually, this report was perfect. It had the exact right amount of
information to diagnose the problem (pertinent info about the hardware,
steps to reproduce and ksymoops output). Perfect!
> * attach keyboard to root, attach mouse to keyboard, remove mouse, attach
> mouse to keyboard (either port). Panic.
> 
> * attach keyboard to root, remove keyboard, reattach keyboard to root
> (either port). Panic.
> 
> * attach mouse to root, remove mouse, reattach mouse to root (either
> port). Panic.
> 
> * attach keyboard to root, remove keyboard, attach mouse to root (either
> port). Panic.
> 
> * attach keyboard and mouse to root, remove keyboard and mouse, attach
> joystick. Panic.
> 
> But I have -not- been able to generate an Oops on this action:
> 
> * attach joystick to root, remove joystick, reattach joystick to root. No
> loss of functionality to the system.
I know exactly where the bug is. It only happens when drivers register
Interrupt pipes with the USB core. It doesn't happen with the Josytick
since we don't really support it correctly right now. I think it has to
do with some changes I made along with my CPiA driver (which doesn't
have an Interrupt endpoint so I never ran across the bug in my testing).
> The remainder of this mail is the output from ksymoops.  Due to the nature
> of kernel Oops, I wrote out the Oops on paper and then typed it back in to
> be fed to ksymoops.  (I checked my syslog and there was nothing there
> related to this issue.)  This re-typing may have resulted in errors,
> though I was sure to triple-check each value.  ksymoops was executed under
> the same conditions as which caused the Oops; namely, I fed "linux
> init=/bin/sh" to LILO again. 
Thanks for taking the effort to do this.
[ksymoops output deleted]
> I hope this is of use in finding the problem.  If there is anything more I
> can do, please let me know.
Like I said before, your report was perfect. I think I have a fix, but I
can't really decouple it from all of the other changes I've made
recently. I'm gonna try to get a patch of all of my changes out to Linus
before I head out to Linux Expo so they'll hopefully be in the next
2.3.x release (or a couple)
JE
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/