Date: Thu, 21 Oct 1999 15:58:04 +0200
From: Jimmy Mäkelä <>
Subject: 2.3.23-pre5 Oopses when swapping
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/10/21/61

I'm sorry if this has already been reported, but I can't check in the
archive without hanging my box. :)
2.3.23-pre5 oopses everytime it starts swapping. /proc/meminfo shows the
following:
        total:    used:    free:  shared: buffers:  cached:
Mem:     62284    58864     3420        0      172    14404
Swap: 131579904    32768 131547136
MemTotal:     62284 kB
MemFree:       3420 kB
MemShared:        0 kB
Buffers:        172 kB
Cached:       14404 kB
HighTotal:        0 kB
HighFree:         0 kB
SwapTotal: 131579904 kB
SwapFree:  131547136 kB
I have only got 32 MB of swap so this is clearly wrong. The oopses are as
follows:
ksymoops 0.7c on i586 2.3.23.  Options used
     -v /usr/src/linux/vmlinux (specified)
     -k /proc/ksyms (default)
     -l /proc/modules (default)
     -o /lib/modules/2.3.23/ (default)
     -m /usr/src/linux/System.map (default)
Oct 21 15:11:39 svampskogen kernel: invalid operand: 0000 
Oct 21 15:11:39 svampskogen kernel: CPU:    0 
Oct 21 15:11:39 svampskogen kernel: EIP:    0010:[add_to_page_cache+149/360] 
Oct 21 15:11:39 svampskogen kernel: EFLAGS: 00013286 
Oct 21 15:11:39 svampskogen kernel: eax: 0000003a   ebx: c10b98c0   ecx: 0000001d   edx: 0000001e 
Oct 21 15:11:39 svampskogen kernel: esi: c024b648   edi: c024b5c0   ebp: 00000100   esp: c13f7dc4 
Oct 21 15:11:39 svampskogen kernel: ds: 0018   es: 0018   ss: 0018 
Oct 21 15:11:39 svampskogen kernel: Process sh (pid: 964, stackpage=c13f7000) 
Oct 21 15:11:39 svampskogen kernel: Stack: 00000066 c10b98c0 c10b98c0 c2d14058 c308dc00 c3fedb28 c01269c0 c10b98c0  
Oct 21 15:11:39 svampskogen kernel:        c024b5c0 00000100 00000100 c0125acd c10b98c0 00000100 00000100 40017000  
Oct 21 15:11:39 svampskogen kernel:        c2d14058 40416000 40017000 00000100 c0125c35 c308dc00 40016000 c2d14058  
Oct 21 15:11:39 svampskogen kernel: Call Trace: [add_to_swap_cache+120/128] [try_to_swap_out+381/428] [swap_out_vma+313/412] [swap_out_mm+56/96] [swap_out+182/256] [do_try_to_free_pages+114/136] [try_to_free_pages+32/52]  
Oct 21 15:11:39 svampskogen kernel: Code: 0f 0b eb 33 8d 76 00 39 b7 88 00 00 00 75 2b b0 03 e6 61 6a  
Using defaults from ksymoops -t elf32-i386 -a i386
Code;  00000000 Before first symbol
00000000 <_EIP>:
Code;  00000000 Before first symbol
   0:   0f 0b             ud2a   
Code;  00000002 Before first symbol
   2:   eb 33             jmp    37 <_EIP+0x37> 00000037 Before first symbol
Code;  00000004 Before first symbol
   4:   8d 76 00          leal   0x0(%esi),%esi
Code;  00000007 Before first symbol
   7:   39 b7 88 00 00    cmpl   %esi,0x88(%edi)
Code;  0000000c Before first symbol
   c:   00 
Code;  0000000d Before first symbol
   d:   75 2b             jne    3a <_EIP+0x3a> 0000003a Before first symbol
Code;  0000000f Before first symbol
   f:   b0 03             movb   $0x3,%al
Code;  00000011 Before first symbol
  11:   e6 61             outb   %al,$0x61
Code;  00000013 Before first symbol
  13:   6a 00             pushl  $0x0
Oct 21 15:11:47 svampskogen kernel: Unable to handle kernel NULL pointer dereference at virtual address 00000004 
Oct 21 15:11:47 svampskogen kernel: *pde = 00000000 
Oct 21 15:11:47 svampskogen kernel: Oops: 0002 
Oct 21 15:11:47 svampskogen kernel: CPU:    0 
Oct 21 15:11:47 svampskogen kernel: EIP:    0010:[add_to_page_cache+209/360] 
Oct 21 15:11:47 svampskogen kernel: EFLAGS: 00010217 
Oct 21 15:11:47 svampskogen kernel: eax: 00000000   ebx: c10bc140   ecx: 0000000e   edx: 00000002 
Oct 21 15:11:47 svampskogen kernel: esi: c024b648   edi: c024b5c0   ebp: 00000200   esp: c3fddf00 
Oct 21 15:11:47 svampskogen kernel: ds: 0018   es: 0018   ss: 0018 
Oct 21 15:11:47 svampskogen kernel: Process kswapd (pid: 3, stackpage=c3fdd000) 
Oct 21 15:11:47 svampskogen kernel: Stack: c2d140b8 c308dc40 c3fedb28 c01269c0 c10bc140 c024b5c0 00000200 00000200  
Oct 21 15:11:47 svampskogen kernel:        c0125acd c10bc140 00000200 00000200 4002f000 c2d140b8 4042e000 40030000  
Oct 21 15:11:47 svampskogen kernel:        00000200 c0125c35 c308dc40 4002e000 c2d140b8 00000030 c308dc40 4002e000  
Oct 21 15:11:47 svampskogen kernel: Call Trace: [add_to_swap_cache+120/128] [try_to_swap_out+381/428] [swap_out_vma+313/412] [swap_out_mm+56/96] [swap_out+182/256] [do_try_to_free_pages+114/136] [tvecs+14885/25728]  
Oct 21 15:11:47 svampskogen kernel: Code: 89 58 04 89 03 89 73 04 89 1e 89 7b 08 8b 44 24 10 50 53 e8  
Code;  00000000 Before first symbol
00000000 <_EIP>:
Code;  00000000 Before first symbol
   0:   89 58 04          movl   %ebx,0x4(%eax)
Code;  00000003 Before first symbol
   3:   89 03             movl   %eax,(%ebx)
Code;  00000005 Before first symbol
   5:   89 73 04          movl   %esi,0x4(%ebx)
Code;  00000008 Before first symbol
   8:   89 1e             movl   %ebx,(%esi)
Code;  0000000a Before first symbol
   a:   89 7b 08          movl   %edi,0x8(%ebx)
Code;  0000000d Before first symbol
   d:   8b 44 24 10       movl   0x10(%esp,1),%eax
Code;  00000011 Before first symbol
  11:   50                pushl  %eax
Code;  00000012 Before first symbol
  12:   53                pushl  %ebx
Code;  00000013 Before first symbol
  13:   e8 00 00 00 00    call   18 <_EIP+0x18> 00000018 Before first symbol
Oct 21 15:11:48 svampskogen kernel: Unable to handle kernel NULL pointer dereference at virtual address 00000004 
Oct 21 15:11:48 svampskogen kernel: *pde = 00000000 
Oct 21 15:11:48 svampskogen kernel: Oops: 0002 
Oct 21 15:11:48 svampskogen kernel: CPU:    0 
Oct 21 15:11:48 svampskogen kernel: EIP:    0010:[add_to_page_cache+209/360] 
Oct 21 15:11:48 svampskogen kernel: EFLAGS: 00013217 
Oct 21 15:11:48 svampskogen kernel: eax: 00000000   ebx: c10bc280   ecx: 0000000e   edx: 00000004 
Oct 21 15:11:48 svampskogen kernel: esi: c024b648   edi: c024b5c0   ebp: 00000400   esp: c302de0c 
Oct 21 15:11:48 svampskogen kernel: ds: 0018   es: 0018   ss: 0018 
Oct 21 15:11:48 svampskogen kernel: Process X (pid: 255, stackpage=c302d000) 
Oct 21 15:11:48 svampskogen kernel: Stack: c2d142a0 c2d13060 c3fedb28 c01269c0 c10bc280 c024b5c0 00000400 00000400  
Oct 21 15:11:48 svampskogen kernel:        c0125acd c10bc280 00000400 00000400 400a9000 c2d142a0 404a8000 400aa000  
Oct 21 15:11:48 svampskogen kernel:        00000400 c0125c35 c2d13060 400a8000 c2d142a0 00000015 c2d13060 400a8000  
Oct 21 15:11:48 svampskogen kernel: Call Trace: [add_to_swap_cache+120/128] [try_to_swap_out+381/428] [swap_out_vma+313/412] [swap_out_mm+56/96] [swap_out+182/256] [do_try_to_free_pages+114/136] [try_to_free_pages+32/52]  
Oct 21 15:11:48 svampskogen kernel: Code: 89 58 04 89 03 89 73 04 89 1e 89 7b 08 8b 44 24 10 50 53 e8  
Code;  00000000 Before first symbol
00000000 <_EIP>:
Code;  00000000 Before first symbol
   0:   89 58 04          movl   %ebx,0x4(%eax)
Code;  00000003 Before first symbol
   3:   89 03             movl   %eax,(%ebx)
Code;  00000005 Before first symbol
   5:   89 73 04          movl   %esi,0x4(%ebx)
Code;  00000008 Before first symbol
   8:   89 1e             movl   %ebx,(%esi)
Code;  0000000a Before first symbol
   a:   89 7b 08          movl   %edi,0x8(%ebx)
Code;  0000000d Before first symbol
   d:   8b 44 24 10       movl   0x10(%esp,1),%eax
Code;  00000011 Before first symbol
  11:   50                pushl  %eax
Code;  00000012 Before first symbol
  12:   53                pushl  %ebx
Code;  00000013 Before first symbol
  13:   e8 00 00 00 00    call   18 <_EIP+0x18> 00000018 Before first symbol
	Jimmy - jmy@flashback.net
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/