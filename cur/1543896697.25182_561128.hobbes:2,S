Date: Fri, 22 Jun 2007 16:27:53 +0200 (CEST)
From: Roman Zippel <>
Subject: Re: Kconfig troubles when using menuconfig - Was: [patch]Re: [linux-usb-devel] linux-2.6.22-rc5-gf1518a0 build #300 failed in zc0301_core.c
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/6/22/186

Hi,
On Fri, 22 Jun 2007, Mauro Carvalho Chehab wrote:
> Hi Roman,
> 
> Several instabilities on Kconfig started to happen after replacing
> Kconfig menus to use menuconfig, as this one, reported by Oliver:
> 
> Em Qui, 2007-06-21 às 13:50 +0200, Oliver Neukum escreveu:
> > Am Donnerstag, 21. Juni 2007 schrieb Toralf Förster:
> > > Right, but IMHO this issue is typical for a problem with the Kconfig definitions of this module.
> > > 
> > > I'll set USB devs as Cc: therefore.
There is too little context here, what was the exact error?
I'm assuming it's the module vs. builtin problem?
> In this specific case, all V4L USB drivers depends on V4L_USB_DRIVERS,
> that depends, in turn, on USB. So, if USB is not selected,
> V4L_USB_DRIVERS should be unselected, unselecting zc0301.
> 
> Unfortunately, the Kernel building system is not properly handling it.
> 
> This is the (snipped) media/video/Kconfig:
> 
> menuconfig V4L_USB_DRIVERS
>         bool "V4L USB devices"
>         depends on USB
>         default y
> 
The menuconfig patches were a little aggressive here, it created a config 
symbol where there was none before and in this case it even changed 
dependencies (it turns USB into a bool).
I'm also a little irritated by the "default y", if I enable V4L I'm very 
tempted to check what other useless stuff has been automatically enabled, 
which I have to turn off again.
bye, Roman