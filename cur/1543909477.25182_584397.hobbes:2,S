Date: Tue, 14 Aug 2007 19:24:53 +0200
From: Eric Dumazet <>
Subject: Re: dst cache overflow
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/8/14/250

On Tue, 14 Aug 2007 18:06:46 +0200
Tobias Diedrich <ranma+kernel@tdiedrich.de> wrote:
> Hello,
> 
> I suspect I'm seeing a slow dst cache leakage on one of my servers.
> The server in question (oni) regularly needs to be rebooted, because
> it loses network connectivity. However, netconsole and syslog shows that the
> machine is still running and the kernel complains about "dst cache
> overflow".
> 
> I have since installed a monitoring script, which stores the output of
> both "ip route ls cache | fgrep cache | wc -l" and the 'entries' value
> of /proc/net/stat/rt_cache (as suggested in 
> 
http://www.mail-archive.com/netdev@vger.kernel.org/msg02107.html
)
> and produces a nice rrd graph:
> 
> 
http://uguu.de/~ranma/route-month-oni.png
> So entries is growing more or less constantly, while the number of
> active routes (not visible on the graph due to being too small) is
> relatively constant.
> 
> Comparing this to another host running the exact same kernel:
> 
http://uguu.de/~ranma/route-month-ari.png
> Here cached_routes and entries barely differ at all.
> 
> The funny thing is, both hosts are running the exact same kernel
> and use more or less the same iptables rules.
> 
> So I'm not sure what would cause the dst cache to leak only on host
> oni?
> 
Could you send the result of these commands on oni and ari ?
ip route ls
grep . /proc/sys/net/ipv4/route/*
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/