Date: Sun, 25 May 2003 23:07:09 +0100
From:  viro@parcelfa ...
Subject: netlink init order
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/5/25/123

BTW, is there any reason why init_netlink_dev() is not a module_init()?
We have
int init_module(void)
{
        printk(KERN_INFO "Network Kernel/User communications module 0.04\n");
        return init_netlink();
}
void cleanup_module(void)
{
        int i;
        for (i = 0; i < ARRAY_SIZE(entries); i++)
                devfs_remove("netlink/%s", entries[i].name);
        for (i = 0; i < 16; i++)
                devfs_remove("netlink/tap%d", i);
        devfs_remove("netlink");
        unregister_chrdev(NETLINK_MAJOR, "netlink");
}
in netlink_dev.c and
#ifdef CONFIG_NETLINK_DEV
        init_netlink();
#endif
        return 0;
}
in the end of netlink_proto_init(), which is core_initcall.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/