Date: Wed, 08 Sep 1999 13:41:53 +0200
From: Thomas Sailer <>
Subject: Another UHCI merge error in 2.3.17
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/9/8/48

And the fix:--- drivers/usb/uhci.c.orig	Wed Sep  8 13:29:41 1999
+++ drivers/usb/uhci.c	Wed Sep  8 13:33:30 1999
@@ -860,21 +860,10 @@
 			if (ix < START_FRAME_FUDGE || /* too small */
 			    ix > CAN_SCHEDULE_FRAMES) { /* too large */
 #ifdef CONFIG_USB_DEBUG_ISOC
-					printk (KERN_DEBUG "uhci_init_isoc: bad start_frame value (%d)\n",
-						isocdesc->start_frame);
+					printk (KERN_DEBUG "uhci_init_isoc: bad start_frame value (%d,%d)\n",
+						isocdesc->start_frame, cur_frame);
 #endif
 					return -EINVAL;
-				}
-			}
-			else /* start_frame <= cur_frame */ {
-				if ((isocdesc->start_frame + UHCI_MAX_SOF_NUMBER + 1
-				    - cur_frame) > CAN_SCHEDULE_FRAMES) {
-#ifdef CONFIG_USB_DEBUG_ISOC
-					printk (KERN_DEBUG "uhci_init_isoc: bad start_frame value (%d)\n",
-						isocdesc->start_frame);
-#endif
-					return -EINVAL;
-				}
 			}
 		} /* end START_ABSOLUTE */
 	}