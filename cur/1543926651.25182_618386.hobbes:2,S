Date: Fri, 16 Nov 2007 10:51:08 -0500
From: Jeff Dike <>
Subject: Re: [Patch] Fix UML broken (was Re: User Mode Linux still broken in 2.6.23.1)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/11/16/121

On Thu, Nov 15, 2007 at 11:15:27PM -0800, Greg KH wrote:
> Rob, I'll queue this up for the next cycle, now that you've verified
> that it was not fixed already, thanks for testing.
I wouldn't.
sparc includes swap.h in its pgtable.h.  Adding pagemap.h to swap.h
completes an include loop on sparc which blows up its build.
I have a set of patches to fix this in a different way, which I sent
out for comments a few weeks ago.  They
	add uaccess.h to various futexes.h because these will start
failing to build when the next patch is applied
	break the recursion by removing highmem.h from pagemap.h,
which needs nothing related to highmem, and sprinkle includes of
highmem.h in all the files which formerly got it through pagemap.h
	now, pagemap.h can be added to swap.h without blowing up sparc
	also, the other arches can include swap.h in their pgtables.h,
which they probably should since they define operations on
swp_entry_t, which is defined in swap.h.
				Jeff
-- 
Work email - jdike at linux dot intel dot com
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/