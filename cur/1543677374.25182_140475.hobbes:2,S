Date: Sat, 14 Jun 2003 10:54:12 +0200
From: Vojtech Pavlik <>
Subject: Re: 2.5.70 hangs on boot
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/6/14/33

On Fri, Jun 13, 2003 at 11:19:22PM +0100, Dave Jones wrote:
> On Sat, Jun 14, 2003 at 12:12:09AM +0200, Vojtech Pavlik wrote:
> 
>  > > This really wants fixing badly. The source of this problem seems to be
>  > > people taking 2.4 configs (where CONFIG_INPUT=m was fine), and it all
>  > > going pear-shaped when people make oldconfig.  I'm aware of the problems
>  > > that oldconfig can't override variables set in .config, so how about 
>  > > just renaming CONFIG_INPUT to something else ?
>  > 
>  > I'm considering CONFIG_INPUT_ADVANCED, which would default to 'n', like
>  > with the font and parition config and if set to 'n', all the modules
>  > needed for 2.4 functional compatibility would be automatically built in.
>  > What do you think?
> 
> I don't see how this helps the situation. CONFIG_INPUT=m from a 2.4
> config will still make CONFIG_VT not show up in the 2.5 config.
I was thinking this:
if CONFIG_INPUT_ADVANCED
	config INPUT_MOUSEDEV
		tristate "Mouse interface"
        	default y
        	depends on INPUT
	config INPUT_MOUSEDEV_PSAUX
		bool "Provide legacy /dev/psaux device"
		default y
		depends on INPUT_MOUSEDEV
else
	config INPUT_MOUSEDEV
		tristate
		default y
	config INPUT_MOUSEDEV_PSAUX
		bool
		default y
endif
Same for CONFIG_VT and the other stuff that needs to be there to be
working. CONFIG_INPUT_ADVANCED is in no 2.4 kernel config and thus will
be 'n' for unsuspecting people doing 'make oldconfig'.
Then the Kconfig will define all the VT and INPUT and SERIO stuff to 'y'
without asking.
-- 
Vojtech Pavlik
SuSE Labs, SuSE CR
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/