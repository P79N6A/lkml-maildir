Date: Mon, 8 Sep 2003 11:52:07 -0700 (PDT)
From: Linus Torvalds <>
Subject: Re: [PATCH] Make futex waiters take an mm or inode reference
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/9/8/184

On Mon, 8 Sep 2003, Jamie Lokier wrote:
> 
> This patch makes each futex waiter hold a reference to the mm or inode
> that a futex is keyed on.
I get the inode part, but let's think about the mm part a bit more.
In particular, passing off a futex that points to private memory to
somebody else just _doesn't_work_. It's insane. So I'd suggest saying that
an anonymous futex is only an <address,offset> pair, and drop the "mm"  
entirely. Let's make an anonymous futex _really_ anonymous, and document
that it's only an "address" - passing it off via UNIX domain sockets is
fine, it just doesn't do anything useful.
So is there any reason to really having "private.mm" AT ALL? From what I
can tell, it is not actually ever used (all "mm" users are "current->mm"),
so I don't see the point of incrementing a count for it either.
Or did I miss something?
			Linus
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/