Date: Sat, 29 Dec 2001 16:35:45 -0200
From: (Henrique de Moraes Holschuh)
Subject: Re: Athlon instabilities and VIA. "PCI latency" patch for Linux (for KT266A chipset only)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/12/29/35

On Sat, 29 Dec 2001, Serguei Miridonov wrote:
> program from H.Oda! (
http://www.h-oda.com/
). Finally I wrote a very
> dirty hack which fixes some issues in Linux too. Now I can playback
> video using both DXR3 and DC10plus card but in some conditions the
> system still freezes. It happens when video is played back by DC10plus
> in xawtv window. This makes me to think that problem is caused by
> multiple PCI bus master transfers.
Hmm... this is bad. Just to make it clear, the lockup was there before your
module, right?
BTW, disabling PCI Master Read Caching in BIOS appears to have decreased
memory performance on my machine by a very small ammount (Asus A7V, KT133
chipset, also affected by the low-performance PCI bug/misdesign in VIA
chipsets).  Since your patch also does that, you may want to verify if that
also happens in your machine and document it.
One can use setpci(1) to fix the device latency to a high value in the buses
that have IDE controllers, btw. This, along with options in the system BIOS
may allow one to test much of the suggested patches in a non-KT266A VIA
chipset.
> The distribution also includes KT266A registers descriptions from H.Oda!
> and configuration dumps. These files are _not_ covered by GNU License.
Could you please send me the KT133 description files, if you have them?  I
might merge in a change to your patch that deals with KT133 (and KT133A if
you include that info as well). I can only test KT133.
-- 
  "One disk to rule them all, One disk to find them. One disk to bring
  them all and in the darkness grind them. In the Land of Redmond
  where the shadows lie." -- The Silicon Valley Tarot
  Henrique Holschuh
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/