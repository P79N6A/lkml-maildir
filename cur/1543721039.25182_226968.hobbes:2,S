Date: Sun, 13 Jun 2004 02:38:09 +0200
From: Andi Kleen <>
Subject: Re: sys_close undefined on x86_64
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/6/12/120

John Stebbins <john@stebbins.name> writes:
> Can someone tell me if this is a kernel bug or a problem with the module
> I'm trying to compile?
>
> I'm attempting to compile an external module for the PVR-250 mpeg-2
> capture card (ivtv module).  The driver is a little behind the times,
> but various people have persuaded it to compile and load on 2.6
> systems.  I had it running on i386 arch 2.6 kernel earlier.  But I've
> since upgraded to x86_64.
>
> insmod fails with sys_close undefined message when attempting to load
> the module.
>
> The other sys_ functions seem to be there.
>
> If the use of sys_close has been deprecated or something, could someone
> please give me a pointer to the right way to do syscalls in the 2.6
> kernels.  I've done some digging and just can't find any useful
> information.
It's just not exported and x86-64 unlike i386 calls in kernel system
calls directly.  In theory it could be exported (stick a
EXPORT_SYMBOL(sys_close) somewhere in the main kernel), however it
would be better to change the driver to not use it and use a private
file or no file at all.
-Andi
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/