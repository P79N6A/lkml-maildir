Date: Mon, 20 Sep 2004 10:10:02 +1000
From: Benjamin Herrenschmidt <>
Subject: Re: Design for setting video modes, ownership of sysfs attributes
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/9/19/134

On Mon, 2004-09-20 at 02:46, Jon Smirl wrote:
> This is going to require some more thought. Mode setting needs two
> things, a description of the mode timings and a location of the scan
> out buffer.  With multiple heads you can't just assume that the buffer
> starts at zero.  There also the problem of the buffer increasing in
> size and needing to be moved since it won't fit where it is.
> 
> Keith, how should this work for X? We have to make sure all DRI users
> of the buffer are halted, get a new location for the buffer, set the
> mode, free the old buffer, notify all of the DRI clients that their
> target has been wiped and has a new size.
> 
> I was wanting to switch mode setting into an atomic operation where
> you passed in both the mode timings and buffer location.
It's more than just a problem of buffer allocation. I doubt some of the
engine operations can go undisturbed accross a mode switch (the driver
currently resets the 2D engine for example). So there is some state loss
and the need to stop rendering pipes before and restart them after.
With DRI, that means OpenGL users... not simple.
Ben.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/