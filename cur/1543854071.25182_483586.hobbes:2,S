Date: Fri, 17 Nov 2006 17:16:14 -0500
From: Alan Cox <>
Subject: Re: [-mm patch] remove drivers/pci/search.c:pci_find_device_reverse()
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/11/17/306

On Fri, Nov 17, 2006 at 11:54:04AM -0800, Andrew Morton wrote:
> On Fri, 17 Nov 2006 15:21:45 +0100
> Adrian Bunk <bunk@stusta.de> wrote:
> 
> > This patch removes the no longer used pci_find_device_reverse().
> 
> But it is exported to modules.
> 
> This is what we created EXPORT_UNUSED_SYMBOL() for.
Normally - but for the fact pci_find_device{_reverse} is unsafe on
any box with any kind of pci hotplug events.
It really needs to die. It is not hotplug safe. The alternative would be
to export it only with !CONFIG_HOTPLUG (which is what my test kernel
does for both this and pci_find_device()). If we do that then to all
intents and purposes it vanishes from most standard builds
The conversion is also trivial
Alan
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/