Date: Mon, 09 Feb 2004 14:12:02 +0000
From: Tomas Zvala <>
Subject: 2.6.2-mm1 xfs OOPS (when mounting root fs)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/2/9/65

Hello,
Well i hope i correctly identified lkml as the proper mailing list to 
report this.
I've got these oopses(oopses.txt attachment) when my XFS root filesystem 
gets mounted. Im also attaching my /proc/config.gz and xfs_info output.
If you need any more info let me know please.
Thank you,
Tomas Zvala
[unhandled content-type:application/gzip]XFS mounting filesystem hda2
i_size_write() called without i_sem
Call Trace:
 [<c01443d1>] i_size_write_check+0x5f/0x61
 [<c02c5969>] xfs_initialize_vnode+0xce/0x2e4
 [<c02c6ba8>] vfs_init_vnode+0x3c/0x40
 [<c02938b6>] xfs_iget_core+0x3c8/0x6ba
 [<c0293cff>] xfs_iget+0x157/0x189
 [<c02aa00b>] xfs_mountfs+0x7fe/0xfea
 [<c02c5d7a>] xfs_setsize_buftarg+0x40/0x7d
 [<c02a9547>] xfs_readsb+0x1c8/0x225
 [<c029a863>] xfs_ioinit+0x1e/0x34
 [<c02b1fae>] xfs_mount+0x337/0x5c9
 [<c02c6940>] vfs_mount+0x34/0x38
 [<c02c675f>] linvfs_fill_super+0xa1/0x21a
 [<c02d2662>] snprintf+0x27/0x2b
 [<c019ac5a>] disk_name+0x62/0xab
 [<c0166f8e>] sb_set_blocksize+0x25/0x53
 [<c01669d4>] get_sb_bdev+0x125/0x158
 [<c02c6907>] linvfs_get_sb+0x2f/0x34
 [<c02c66be>] linvfs_fill_super+0x0/0x21a
 [<c0166c09>] do_kern_mount+0x5f/0xd5
 [<c017e019>] do_add_mount+0x78/0x14e
 [<c017e312>] do_mount+0x139/0x17f
 [<c017e16f>] copy_mount_options+0x80/0xea
 [<c017e792>] sys_mount+0xd4/0x158
 [<c0536f9e>] do_mount_root+0x2f/0x9c
 [<c053705f>] mount_block_root+0x54/0x11d
 [<c05372a6>] mount_root+0x41/0x62
 [<c05372f2>] prepare_namespace+0x2b/0xd8
 [<c010723c>] init+0x1a4/0x1bc
 [<c0107098>] init+0x0/0x1bc
 [<c0109269>] kernel_thread_helper+0x5/0xb
i_size_write() called without i_sem
Call Trace:
 [<c01443d1>] i_size_write_check+0x5f/0x61
 [<c02c5969>] xfs_initialize_vnode+0xce/0x2e4
 [<c02c6ba8>] vfs_init_vnode+0x3c/0x40
 [<c02938b6>] xfs_iget_core+0x3c8/0x6ba
 [<c0293cff>] xfs_iget+0x157/0x189
 [<c0253ddf>] xfs_rtmount_inodes+0x7b/0x11c
 [<c02943d3>] xfs_iunlock+0x37/0x71
 [<c02aa092>] xfs_mountfs+0x885/0xfea
 [<c02c5d7a>] xfs_setsize_buftarg+0x40/0x7d
 [<c029a863>] xfs_ioinit+0x1e/0x34
 [<c02b1fae>] xfs_mount+0x337/0x5c9
 [<c02c6940>] vfs_mount+0x34/0x38
 [<c02c675f>] linvfs_fill_super+0xa1/0x21a
 [<c02d2662>] snprintf+0x27/0x2b
 [<c019ac5a>] disk_name+0x62/0xab
 [<c0166f8e>] sb_set_blocksize+0x25/0x53
 [<c01669d4>] get_sb_bdev+0x125/0x158
 [<c02c6907>] linvfs_get_sb+0x2f/0x34
 [<c02c66be>] linvfs_fill_super+0x0/0x21a
 [<c0166c09>] do_kern_mount+0x5f/0xd5
 [<c017e019>] do_add_mount+0x78/0x14e
 [<c017e312>] do_mount+0x139/0x17f
 [<c017e16f>] copy_mount_options+0x80/0xea
 [<c017e792>] sys_mount+0xd4/0x158
 [<c0536f9e>] do_mount_root+0x2f/0x9c
 [<c053705f>] mount_block_root+0x54/0x11d
 [<c05372a6>] mount_root+0x41/0x62
 [<c05372f2>] prepare_namespace+0x2b/0xd8
 [<c010723c>] init+0x1a4/0x1bc
 [<c0107098>] init+0x0/0x1bc
 [<c0109269>] kernel_thread_helper+0x5/0xb
i_size_write() called without i_sem
Call Trace:
 [<c01443d1>] i_size_write_check+0x5f/0x61
 [<c02c5969>] xfs_initialize_vnode+0xce/0x2e4
 [<c02c6ba8>] vfs_init_vnode+0x3c/0x40
 [<c02938b6>] xfs_iget_core+0x3c8/0x6ba
 [<c0293cff>] xfs_iget+0x157/0x189
 [<c0253e27>] xfs_rtmount_inodes+0xc3/0x11c
 [<c02943d3>] xfs_iunlock+0x37/0x71
 [<c02aa092>] xfs_mountfs+0x885/0xfea
 [<c02c5d7a>] xfs_setsize_buftarg+0x40/0x7d
 [<c029a863>] xfs_ioinit+0x1e/0x34
 [<c02b1fae>] xfs_mount+0x337/0x5c9
 [<c02c6940>] vfs_mount+0x34/0x38
 [<c02c675f>] linvfs_fill_super+0xa1/0x21a
 [<c02d2662>] snprintf+0x27/0x2b
 [<c019ac5a>] disk_name+0x62/0xab
 [<c0166f8e>] sb_set_blocksize+0x25/0x53
 [<c01669d4>] get_sb_bdev+0x125/0x158
 [<c02c6907>] linvfs_get_sb+0x2f/0x34
 [<c02c66be>] linvfs_fill_super+0x0/0x21a
 [<c0166c09>] do_kern_mount+0x5f/0xd5
 [<c017e019>] do_add_mount+0x78/0x14e
 [<c017e312>] do_mount+0x139/0x17f
 [<c017e16f>] copy_mount_options+0x80/0xea
 [<c017e792>] sys_mount+0xd4/0x158
 [<c0536f9e>] do_mount_root+0x2f/0x9c
 [<c053705f>] mount_block_root+0x54/0x11d
 [<c05372a6>] mount_root+0x41/0x62
 [<c05372f2>] prepare_namespace+0x2b/0xd8
 [<c010723c>] init+0x1a4/0x1bc
 [<c0107098>] init+0x0/0x1bc
 [<c0109269>] kernel_thread_helper+0x5/0xb
Ending clean XFS mount for filesystem: hda2
VFS: Mounted root (xfs filesystem) readonly.
i_size_write() called without i_sem
Call Trace:
 [<c01443d1>] i_size_write_check+0x5f/0x61
 [<c02c5969>] xfs_initialize_vnode+0xce/0x2e4
 [<c02c6ba8>] vfs_init_vnode+0x3c/0x40
 [<c02938b6>] xfs_iget_core+0x3c8/0x6ba
 [<c0293cff>] xfs_iget+0x157/0x189
 [<c02b0e1e>] xfs_dir_lookup_int+0xb4/0x12b
 [<c02b68e6>] xfs_lookup+0x50/0x88
 [<c02c382f>] linvfs_lookup+0x67/0x9f
 [<c016d804>] real_lookup+0xcd/0xf0
 [<c016daac>] do_lookup+0x96/0xa1
 [<c016e027>] link_path_walk+0x570/0xa84
 [<c01772ad>] dput+0x22/0x2b1
 [<c017e2af>] do_mount+0xd6/0x17f
 [<c015dee2>] sys_chroot+0x65/0xa3
 [<c0548e9e>] mount_devfs_fs+0x3c/0x68
 [<c010723c>] init+0x1a4/0x1bc
 [<c0107098>] init+0x0/0x1bc
 [<c0109269>] kernel_thread_helper+0x5/0xb
Mounted devfs on /dev
Freeing unused kernel memory: 384k freed
i_size_write() called without i_sem
Call Trace:
 [<c01443d1>] i_size_write_check+0x5f/0x61
 [<c02c5969>] xfs_initialize_vnode+0xce/0x2e4
 [<c02c6ba8>] vfs_init_vnode+0x3c/0x40
 [<c02938b6>] xfs_iget_core+0x3c8/0x6ba
 [<c0293cff>] xfs_iget+0x157/0x189
 [<c02b0e1e>] xfs_dir_lookup_int+0xb4/0x12b
 [<c02b68e6>] xfs_lookup+0x50/0x88
 [<c02c382f>] linvfs_lookup+0x67/0x9f
 [<c016d804>] real_lookup+0xcd/0xf0
 [<c016daac>] do_lookup+0x96/0xa1
 [<c016dbd9>] link_path_walk+0x122/0xa84
 [<c0145b7c>] buffered_rmqueue+0xef/0x1af
 [<c016a696>] open_exec+0x2f/0xed
 [<c016b98e>] do_execve+0x20/0x241
 [<c01fde38>] devfs_mk_dev+0xd6/0x116
 [<c0145fca>] get_zeroed_page+0x25/0x65
 [<c0300e35>] n_tty_open+0x7e/0x9e
 [<c02fbf93>] init_dev+0x58/0x557
 [<c01fdf0b>] devfs_mk_cdev+0x36/0x5d
 [<c03060cd>] vcs_make_devfs+0x60/0x68
 [<c030d68a>] con_open+0xa4/0xa6
 [<c030d5e6>] con_open+0x0/0xa6
 [<c02fd023>] tty_open+0x24c/0x384
 [<c0168c76>] chrdev_open+0x123/0x291
 [<c015e480>] dentry_open+0x152/0x222
 [<c015e32c>] filp_open+0x62/0x64
 [<c016d3cf>] getname+0x97/0xc3
 [<c0109c0b>] sys_execve+0x42/0x7a
 [<c044408b>] syscall_call+0x7/0xb
 [<c010708a>] run_init_process+0x1c/0x2a
 [<c01071b3>] init+0x11b/0x1bc
 [<c0107098>] init+0x0/0x1bc
 [<c0109269>] kernel_thread_helper+0x5/0xb
i_size_write() called without i_sem
Call Trace:
 [<c01443d1>] i_size_write_check+0x5f/0x61
 [<c02c5969>] xfs_initialize_vnode+0xce/0x2e4
 [<c02c6ba8>] vfs_init_vnode+0x3c/0x40
 [<c02938b6>] xfs_iget_core+0x3c8/0x6ba
 [<c0293cff>] xfs_iget+0x157/0x189
 [<c02b0e1e>] xfs_dir_lookup_int+0xb4/0x12b
 [<c02b68e6>] xfs_lookup+0x50/0x88
 [<c02c382f>] linvfs_lookup+0x67/0x9f
 [<c016d804>] real_lookup+0xcd/0xf0
 [<c016daac>] do_lookup+0x96/0xa1
 [<c016e027>] link_path_walk+0x570/0xa84
 [<c016a696>] open_exec+0x2f/0xed
 [<c016b98e>] do_execve+0x20/0x241
 [<c01fde38>] devfs_mk_dev+0xd6/0x116
 [<c0145fca>] get_zeroed_page+0x25/0x65
 [<c0300e35>] n_tty_open+0x7e/0x9e
 [<c02fbf93>] init_dev+0x58/0x557
 [<c01fdf0b>] devfs_mk_cdev+0x36/0x5d
 [<c03060cd>] vcs_make_devfs+0x60/0x68
 [<c030d68a>] con_open+0xa4/0xa6
 [<c030d5e6>] con_open+0x0/0xa6
 [<c02fd023>] tty_open+0x24c/0x384
 [<c0168c76>] chrdev_open+0x123/0x291
 [<c015e480>] dentry_open+0x152/0x222
 [<c015e32c>] filp_open+0x62/0x64
 [<c016d3cf>] getname+0x97/0xc3
 [<c0109c0b>] sys_execve+0x42/0x7a
 [<c044408b>] syscall_call+0x7/0xb
 [<c010708a>] run_init_process+0x1c/0x2a
 [<c01071b3>] init+0x11b/0x1bc
 [<c0107098>] init+0x0/0x1bc
 [<c0109269>] kernel_thread_helper+0x5/0xb
i_size_write() called without i_sem
Call Trace:
 [<c01443d1>] i_size_write_check+0x5f/0x61
 [<c02c5969>] xfs_initialize_vnode+0xce/0x2e4
 [<c02c6ba8>] vfs_init_vnode+0x3c/0x40
 [<c02938b6>] xfs_iget_core+0x3c8/0x6ba
 [<c0293cff>] xfs_iget+0x157/0x189
 [<c02b0e1e>] xfs_dir_lookup_int+0xb4/0x12b
 [<c02b68e6>] xfs_lookup+0x50/0x88
 [<c02c382f>] linvfs_lookup+0x67/0x9f
 [<c016d804>] real_lookup+0xcd/0xf0
 [<c016daac>] do_lookup+0x96/0xa1
 [<c016dbd9>] link_path_walk+0x122/0xa84
 [<c01423da>] file_read_actor+0x0/0xea
 [<c029440b>] xfs_iunlock+0x6f/0x71
 [<c016a696>] open_exec+0x2f/0xed
 [<c018c152>] load_elf_binary+0xb29/0xc3d
 [<c011dfa0>] pgd_alloc+0x18/0x1c
 [<c0145b7c>] buffered_rmqueue+0xef/0x1af
 [<c0145cd9>] __alloc_pages+0x9d/0x328
 [<c016a26e>] copy_strings+0x1a1/0x233
 [<c018b629>] load_elf_binary+0x0/0xc3d
 [<c016b817>] search_binary_handler+0x19f/0x2f6
 [<c016bb3b>] do_execve+0x1cd/0x241
 [<c0109c0b>] sys_execve+0x42/0x7a
 [<c044408b>] syscall_call+0x7/0xb
 [<c010708a>] run_init_process+0x1c/0x2a
 [<c01071b3>] init+0x11b/0x1bc
 [<c0107098>] init+0x0/0x1bc
 [<c0109269>] kernel_thread_helper+0x5/0xb
i_size_write() called without i_sem
Call Trace:
 [<c01443d1>] i_size_write_check+0x5f/0x61
 [<c02c5969>] xfs_initialize_vnode+0xce/0x2e4
 [<c02c6ba8>] vfs_init_vnode+0x3c/0x40
 [<c02938b6>] xfs_iget_core+0x3c8/0x6ba
 [<c0293cff>] xfs_iget+0x157/0x189
 [<c02b0e1e>] xfs_dir_lookup_int+0xb4/0x12b
 [<c02b68e6>] xfs_lookup+0x50/0x88
 [<c02c382f>] linvfs_lookup+0x67/0x9f
 [<c016d804>] real_lookup+0xcd/0xf0
 [<c016daac>] do_lookup+0x96/0xa1
 [<c016e027>] link_path_walk+0x570/0xa84
 [<c01423da>] file_read_actor+0x0/0xea
 [<c029440b>] xfs_iunlock+0x6f/0x71
 [<c016a696>] open_exec+0x2f/0xed
 [<c018c152>] load_elf_binary+0xb29/0xc3d
 [<c011dfa0>] pgd_alloc+0x18/0x1c
 [<c0145b7c>] buffered_rmqueue+0xef/0x1af
 [<c0145cd9>] __alloc_pages+0x9d/0x328
 [<c016a26e>] copy_strings+0x1a1/0x233
 [<c018b629>] load_elf_binary+0x0/0xc3d
 [<c016b817>] search_binary_handler+0x19f/0x2f6
 [<c016bb3b>] do_execve+0x1cd/0x241
 [<c0109c0b>] sys_execve+0x42/0x7a
 [<c044408b>] syscall_call+0x7/0xb
 [<c010708a>] run_init_process+0x1c/0x2a
 [<c01071b3>] init+0x11b/0x1bc
 [<c0107098>] init+0x0/0x1bc
 [<c0109269>] kernel_thread_helper+0x5/0xb
i_size_write() called without i_sem
Call Trace:
 [<c01443d1>] i_size_write_check+0x5f/0x61
 [<c02c5969>] xfs_initialize_vnode+0xce/0x2e4
 [<c02c6ba8>] vfs_init_vnode+0x3c/0x40
 [<c02938b6>] xfs_iget_core+0x3c8/0x6ba
 [<c0293cff>] xfs_iget+0x157/0x189
 [<c02b0e1e>] xfs_dir_lookup_int+0xb4/0x12b
 [<c02b68e6>] xfs_lookup+0x50/0x88
 [<c02c382f>] linvfs_lookup+0x67/0x9f
 [<c016d804>] real_lookup+0xcd/0xf0
 [<c016daac>] do_lookup+0x96/0xa1
 [<c016e027>] link_path_walk+0x570/0xa84
 [<c02c3848>] linvfs_lookup+0x80/0x9f
 [<c0170cac>] vfs_follow_link+0x37/0x1fa
 [<c02c3ccf>] linvfs_follow_link+0xf0/0x10d
 [<c016e0ed>] link_path_walk+0x636/0xa84
 [<c01423da>] file_read_actor+0x0/0xea
 [<c029440b>] xfs_iunlock+0x6f/0x71
 [<c016a696>] open_exec+0x2f/0xed
 [<c018c152>] load_elf_binary+0xb29/0xc3d
 [<c011dfa0>] pgd_alloc+0x18/0x1c
 [<c0145b7c>] buffered_rmqueue+0xef/0x1af
 [<c0145cd9>] __alloc_pages+0x9d/0x328
 [<c016a26e>] copy_strings+0x1a1/0x233
 [<c018b629>] load_elf_binary+0x0/0xc3d
 [<c016b817>] search_binary_handler+0x19f/0x2f6
 [<c016bb3b>] do_execve+0x1cd/0x241
 [<c0109c0b>] sys_execve+0x42/0x7a
 [<c044408b>] syscall_call+0x7/0xb
 [<c010708a>] run_init_process+0x1c/0x2a
 [<c01071b3>] init+0x11b/0x1bc
 [<c0107098>] init+0x0/0x1bc
 [<c0109269>] kernel_thread_helper+0x5/0xb
i_size_write() called without i_sem
Call Trace:
 [<c01443d1>] i_size_write_check+0x5f/0x61
 [<c02c5969>] xfs_initialize_vnode+0xce/0x2e4
 [<c02c6ba8>] vfs_init_vnode+0x3c/0x40
 [<c02938b6>] xfs_iget_core+0x3c8/0x6ba
 [<c0293cff>] xfs_iget+0x157/0x189
 [<c02b0e1e>] xfs_dir_lookup_int+0xb4/0x12b
 [<c02b68e6>] xfs_lookup+0x50/0x88
 [<c02c382f>] linvfs_lookup+0x67/0x9f
 [<c016d804>] real_lookup+0xcd/0xf0
 [<c016daac>] do_lookup+0x96/0xa1
 [<c016dbd9>] link_path_walk+0x122/0xa84
 [<c016ef8d>] open_namei+0x83/0x405
 [<c015e308>] filp_open+0x3e/0x64
 [<c015e874>] sys_open+0x5b/0x8b
 [<c044408b>] syscall_call+0x7/0xb
Adding 999896k swap on /dev/hda6.  Priority:-1 extents:1
XFS mounting filesystem hda1
Ending clean XFS mount for filesystem: hda1
XFS mounting filesystem hda5
Ending clean XFS mount for filesystem: hda5
XFS mounting filesystem hda7
Ending clean XFS mount for filesystem: hda7
XFS mounting filesystem hda8
Ending clean XFS mount for filesystem: hda8
XFS mounting filesystem hda9
Ending clean XFS mount for filesystem: hda9
XFS mounting filesystem hda10
Ending clean XFS mount for filesystem: hda10
XFS mounting filesystem hda11
Ending clean XFS mount for filesystem: hda11
XFS mounting filesystem hda12
Ending clean XFS mount for filesystem: hda12
XFS mounting filesystem hda13
Ending clean XFS mount for filesystem: hda13
meta-data=/                      isize=256    agcount=8, agsize=31248 blks
         =                       sectsz=512  
data     =                       bsize=4096   blocks=249984, imaxpct=25
         =                       sunit=0      swidth=0 blks, unwritten=0
naming   =version 2              bsize=4096  
log      =internal               bsize=4096   blocks=1200, version=2
         =                       sectsz=512   sunit=0 blks
realtime =none                   extsz=65536  blocks=0, rtextents=0