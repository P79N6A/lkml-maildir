Date: Thu, 8 Jul 1999 00:54:24 +0100 (IST)
From: Paul Jakma <>
Subject: Alpha oops in modprobe - devfs related?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/7/7/84

Jul  7 20:05:39 fogarty kernel: Unable to load interpreter  
Jul  7 20:05:40 fogarty kernel: Unable to handle kernel paging
request at virtual address 0000000000000000  
Jul  7 20:05:40 fogarty kernel: modprobe(15431): Oops -1  
Jul  7 20:05:40 fogarty kernel: pc = [<0000000000000000>]  ra =
[<0000000000000000>]  ps = 0000  
Jul  7 20:05:40 fogarty kernel: r0 = 0000000000000000  r1 =
0000000000000000  r2 = 0000000000000000  
Jul  7 20:05:40 fogarty kernel: r3 = 0000000000000000  r4 =
0000000000000000  r5 = 0000000000000000  
Jul  7 20:05:40 fogarty kernel: r6 = 0000000000000000  r7 =
0000000000000000  r8 = 0000000000000000  
Jul  7 20:05:40 fogarty kernel: r9 = 0000000000000400  r10=
fffffc0000e63cb0  r11= fffffc00004567d0  
Jul  7 20:05:40 fogarty kernel: r12= fffffc00005fc620  r13=
fffffc000029f840  r14= 0000000000010000  
Jul  7 20:05:40 fogarty kernel: r15= fffffc00001a5040  
Jul  7 20:05:40 fogarty kernel: r16= 0000000000000000  r17=
0000000000000000  r18= 0000000000000000  
Jul  7 20:05:40 fogarty kernel: r19= 0000000000000000  r20=
0000000000000000  r21= 0000000000000000  
Jul  7 20:05:40 fogarty kernel: r22= 0000000000000000  r23=
0000000000000000  r24= 0000000000000000  
Jul  7 20:05:40 fogarty kernel: r25= 0000000000000000  r27=
0000000000000000  r28= 0000000000000000  
Jul  7 20:05:40 fogarty kernel: gp = 0000000000000000  sp =
fffffc00013e7b50  
Jul  7 20:05:40 fogarty kernel: Code: 00000000  00001111  00003238
modprobe: Exception at [dik_show_code+68/192] (fffffc00003110a8)
my kernel is 2.2.11-rth1, with devfs99.3, raid0145-2.2.6,
quota-fix-2.2.8-1.diff, nfsd-2.2.7-3.patch and
nfsd-2.2.7-lockd.patch.
Machine is an Alpha 600 Samsung UX. Yamaha cdr4416s. 
The oops seems to happens just after cdrecord opens /dev/sg/c0b0t3u0.
cdrecord segfaults with:
open("/dev/sg/c0b0t3u0", O_RDWR|O_NONBLOCK) = 3
ioctl(3, CDROMAUDIOBUFSIZ, 0x11fffd588) = 0
ioctl(3, 0x5386, 0x11fffd580)           = 0
ioctl(3, 0x2206, 0)                     = -1 EINVAL (Invalid
argument)
ioctl(3, 0x2272, 0x11fffd590)           = 0
ioctl(3, CDROMAUDIOBUFSIZ, 0x11fffd518) = 0
ioctl(3, 0x5386, 0x11fffd510)           = 0
fcntl(3, F_GETFL)                       = 0x6 (flags
O_RDWR|O_NONBLOCK)
fcntl(3, F_SETFL, O_RDWR)               = 0
ioctl(3, TIOCSCCINI, 0x11fffd470)       = 0
ioctl(3, 0x2272, 0x11fffd538)           = 0
brk(0x120146000)                        = -1 ENOMEM (Cannot allocate
memory)
--- SIGSEGV (Segmentation fault) ---
+++ killed by SIGSEGV +++
This sets off a modprobe (cause of devfs) for what module i don't
know - maybe none, which causes the segfault in dik_show_code. The
oops isn't fatal at all. It happens consistently when i
run cdrecord. The machine works fine apart that.
I've recompiled my kernel with scsi-generics built-in instead of as a
module, and with devfs-v99.4. Now the oops doesn't happen
consistently, just every now and then, and in [die_if_kernel] instead
of [dik_show_code], eg:
Jul  8 00:42:52 fogarty kernel: Unable to load interpreter  
Jul  8 00:42:52 fogarty kernel: Unable to handle kernel paging
request at virtual address 0000000000000000  
Jul  8 00:42:52 fogarty kernel: modprobe(1050): Oops -1  
Jul  8 00:42:53 fogarty kernel: pc = [<0000000000000000>]  ra =
[<0000000000000000>]  ps = 0000  
Jul  8 00:42:53 fogarty kernel: r0 = 0000000000000000  r1 =
0000000000000000  r2 = 0000000000000000  
Jul  8 00:42:53 fogarty kernel: r3 = 0000000000000000  r4 =
0000000000000000  r5 = 0000000000000000  
Jul  8 00:42:53 fogarty kernel: r6 = 0000000000000000  r7 =
0000000000000000  r8 = 0000000000000000  
Jul  8 00:42:53 fogarty kernel: r9 = 0000000000000400  r10=
fffffc0005c53df7  r11= fffffc0000480a20  
Jul  8 00:42:53 fogarty kernel: r12= fffffc00002b75e0  r13=
fffffc0005c53d08  r14= 0000000000000008  
Jul  8 00:42:53 fogarty kernel: r15= fffffc00002b75e0  
Jul  8 00:42:53 fogarty kernel: r16= 0000000000000000  r17=
0000000000000000  r18= 0000000000000000  
Jul  8 00:42:53 fogarty kernel: r19= 0000000000000000  r20=
0000000000000000  r21= 0000000000000000  
Jul  8 00:42:53 fogarty kernel: r22= 0000000000000000  r23=
0000000000000000  r24= 0000000000000000  
Jul  8 00:42:53 fogarty kernel: r25= 0000000000000000  r27=
0000000000000000  r28= 0000000000000000  
Jul  8 00:42:53 fogarty kernel: gp = 0000000000000000  sp =
fffffc0006813c30  
Jul  8 00:42:53 fogarty kernel: Code: 00000000  00001111  000030eb
modprobe: Exception at [die_if_kernel+148/544] (fffffc00003111d8)  
Jul  8 00:42:53 fogarty kernel:   
Jul  8 00:42:53 fogarty kernel: Trace:  
Jul  8 00:43:09 fogarty kernel: Unable to load interpreter  
Jul  8 00:43:09 fogarty kernel: Unable to handle kernel paging
request at virtual address 0000000000000000  
Jul  8 00:43:09 fogarty kernel: modprobe(1054): Oops -1  
Jul  8 00:43:09 fogarty kernel: pc = [<0000000000000000>]  ra =
[<0000000000000000>]  ps = 0000  
Jul  8 00:43:09 fogarty kernel: r0 = 0000000000000000  r1 =
0000000000000000  r2 = 0000000000000000  
Jul  8 00:43:09 fogarty kernel: r3 = 0000000000000000  r4 =
0000000000000000  r5 = 0000000000000000  
Jul  8 00:43:09 fogarty kernel: r6 = 0000000000000000  r7 =
0000000000000000  r8 = 0000000000000000  
Jul  8 00:43:10 fogarty kernel: r9 = 0000000000000400  r10=
fffffc0006947df7  r11= fffffc0000480a20  
Jul  8 00:43:10 fogarty kernel: r12= fffffc00002b75e0  r13=
fffffc0006947d08  r14= 0000000000000008  
Jul  8 00:43:10 fogarty kernel: r15= fffffc00002b75e0  
Jul  8 00:43:10 fogarty kernel: r16= 0000000000000000  r17=
0000000000000000  r18= 0000000000000000  
Jul  8 00:43:10 fogarty kernel: r19= 0000000000000000  r20=
0000000000000000  r21= 0000000000000000  
Jul  8 00:43:10 fogarty kernel: r22= 0000000000000000  r23=
0000000000000000  r24= 0000000000000000  
Jul  8 00:43:10 fogarty kernel: r25= 0000000000000000  r27=
0000000000000000  r28= 0000000000000000  
Jul  8 00:43:10 fogarty kernel: gp = 0000000000000000  sp =
fffffc000669bc30  
Jul  8 00:43:10 fogarty kernel: Code: 00000000  00001111  00002b3b
modprobe: Exception at [die_if_kernel+148/544] (fffffc00003111d8)  
Jul  8 00:43:10 fogarty kernel:   
Jul  8 00:43:10 fogarty kernel: Trace:
any ideas?
-- 
Paul Jakma
paul@clubi.ie	
http://hibernia.clubi.ie
PGP5 key: 
http://www.clubi.ie/jakma/publickey.txt
-------------------------------------------
Fortune:
If Patrick Henry thought that taxation without representation was bad,
he should see how bad it is with representation.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/