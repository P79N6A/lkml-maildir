Date: 22 Aug 2003 11:02:18 -0700
From: Trond Myklebust <>
Subject: Re: [PATCH] Allow either tid or pid in SCM_CREDENTIALS struct ucred
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/8/22/144

>>>>> " " == Ulrich Drepper <drepper@redhat.com> writes:
     > I don't think ->pid should be tested.  Just replace it with
     > ->tgid.  It's really not intended for the user to have any
     > contact with the TID (i.e., ->pid).  This is how it's done in
     > other place.  What this shows is that more searches for ->pid
     > are needed which need to be replaced with ->tgid.
There's one remaining case in the NFS locking code:
nlmclnt_setlockargs() is using ->pid in order to label the lock owner.
I have a feeling that for that particular case, we'll just want to
drop the entire process-crap. The reason is that spec just says
   "The oh field is an opaque object that identifies the host or
   process that is making the request."
So as long as we're doing the lock accounting correctly on the client,
the server should be happy with just the hostname.
AFAIK, the word 'process' in the above sentence was added mainly in
order to allow userland NFS clients to push the accounting over onto
the server.
Cheers,
  Trond
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/