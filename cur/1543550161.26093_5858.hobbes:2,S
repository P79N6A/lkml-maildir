Date: Fri, 29 Sep 2000 04:58:57 -0500 (CDT)
From: Jeff Garzik <>
Subject: Re: PATCH 2.4.0.9.7: clean up toshiba SMM driver
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/9/29/39

On Wed, 27 Sep 2000, Jonathan Buzzard wrote:
> jgarzik@mandrakesoft.mandrakesoft.com said:
> > This driver was merged from 2.2.x and needs some more cleanups.  Horst
> > von Brand posted a patch on lkml against this driver, too, but his
> > cleanups had a bug in it, and weren't as terse with procfs as the
> > following patch is... 
> Hum nobody has said anything to me till now.
I'm one of those weird guys that actually e-mails maintainers when I
change their code.  :)   I think Alan may have thrown your driver into
2.2.x along with a ton of other 2.2.x merges...
> I was holding back with my
> patch till I had time to test it on more that one laptop. While the
> patch looks Ok, passed experience has shown it must be verified on more
> than one model of Toshiba laptop before being marked as safe. Ideally a
> dozen or so laptop models is best.
It has been confirmed on two more laptops, one lkml post and another
laptop here.  But if we tested every driver change on every supported
hardware model, progress would never occur.
> Remember any error in this driver could render a Toshiba laptop quite
> literally unusable. With a trip to a Toshiba authorized reseller, the
> parting of some cash, and with potential data loss.
Any change to any driver may kill your hardware.  This is nothing new.
My patch is 100% bug fixes, and doesn't change hardware interaction
one bit, so I don't think there is a problem.  If you see a change in
my patch that changes any behavior at all, please speak up :)
> > Against 2.4.0-test9-pre7, and tested on my laptop.. 
> 
> Which may not be enough. When I submit my own version of the driver
> is it permissible to have a sprinkling of #ifdef's so it still compiles
> on older kernels. I would prefer to only have to maintain one version.
Do what you will.  I think ifdefs introduce ugliness and bugs, and oppose
them.  But I can't tell ya what to do... :)  If you do go this route,
consider taking the 2.4.x driver verbatim, and making it work under
2.2.x.  This way we don't clutter the current kernel with ifdefs, and
2.2.18-pre has code to help backport 2.4.x drivers.
By the way, you are motivated you can ioremap/read[bw]/iounmap, instead
of using isa_read[bw]...
	Jeff
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/