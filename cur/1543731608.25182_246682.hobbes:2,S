Date: Sat, 28 Aug 2004 19:51:31 -0700
From: Joshua Kwan <>
Subject: Re: [: kernel-source-2.4.27: libata.o not compiled as module]
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/8/28/300

Jeff Garzik wrote:
> Everything is working just fine, from looking at the output.
Just fine?
depmod: *** Unresolved symbols in
/usr/src/kernel-source-2.4.27/debian/tmp-image/lib/modules/2.4.27/kernel/drivers/scsi/sata_sx4.o
depmod:         ata_add_to_probe_list_Rsmp_c4708b60
depmod:         ata_port_probe_Rsmp_f8f01db6
depmod:         ata_std_bios_param_Rsmp_8021f007
depmod:         ata_check_status_mmio_Rsmp_2dc27824
depmod:         ata_port_start_Rsmp_4afd23de
depmod:         ata_scsi_error_Rsmp_4db27aa3
depmod:         ata_tf_load_mmio_Rsmp_5d4089a1
depmod:         ata_scsi_queuecmd_Rsmp_61a16164
depmod:         ata_bus_reset_Rsmp_48b3c601
depmod:         ata_port_disable_Rsmp_cf3f6248
depmod:         ata_qc_complete_Rsmp_27e6abc6
depmod:         ata_scsi_release_Rsmp_bc1c53b1
depmod:         ata_scsi_detect_Rsmp_79dc600b
depmod:         ata_exec_command_mmio_Rsmp_7b0a5b2d
depmod:         ata_tf_read_mmio_Rsmp_830b4f4e
depmod:         ata_pci_remove_one_Rsmp_6c0a4dd5
depmod:         ata_port_stop_Rsmp_301e7c1e
> CONFIG_SCSI_SATA_VITESSE is set to 'y', which means that libata is built 
> into the kernel rather than as a module, because 
> CONFIG_SCSI_SATA_VITESSE is built into the kernel, and libata is a 
> dependency.
But as my own compile tests showed, neither sata_vsc.c or libata-core.c 
/ libata-scsi.c were ever compiled into sata_vsc.o and libata.o (for use 
at kernel link time) during a 'make bzImage modules'.
> Because the dependency (libata.o) is built into the kernel, no kernel 
> module will be produced.
Makes sense. But it doesn't seem to work that way in practice.
Run a kbuild using that .config and you'll probably see the problem too..
-- 
Joshua Kwan
[unhandled content-type:application/pgp-signature]