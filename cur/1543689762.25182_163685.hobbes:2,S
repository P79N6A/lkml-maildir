Date: Sat, 6 Sep 2003 09:29:49 -0700 (PDT)
From: Joshua Weage <>
Subject: Re: NFS client problems in 2.4.18 to 2.4.20
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/9/6/55

I have read through them and did some tuning a few months ago.  The
only thing that seems relevant to this problem is UDP buffer overflows,
but I'm using the 2.4.20 kernel.  I'm using 8192 byte read and write
sizes and have increased the number of nfsd's and socket buffer size on
the server.  Everything was working fine until about 4 weeks ago when
the mounts on the clients started locking up.  The server is dropping
packets at times, but increasing nfds only manages to load the disk
further - it doesn't seem to reduce timeouts.  However, I don't
understand why a mount on a single client will go AWOL - and never come
back - while all the others will continue to work properly.
Are there any commands that would allow me to figure out why the mount
has stopped working?  I've looked at nfsstat and the kernel seems to
have stopped sending any data to the server, or it may send one packet
every couple of seconds.  If I start up another shell and try to do an
ls on the problem filesystem, the command locks up and can't be
interrupted.  I think I've also mounted the same filesystem in another
location, on the same machine, and it works fine.
Josh
--- Trond Myklebust <trond.myklebust@fys.uio.no> wrote:
> >>>>> " " == Joshua Weage <weage98@yahoo.com> writes:
> 
>      > Any suggestions on what could be causing this?
> 
> Have you read through the sections pertaining to these problems in
> the
> NFS HOWTO and NFS FAQ? If not, see 
http://nfs.sourceforge.net
> 
> Cheers,
>   Trond
=====
__________________________________
Do you Yahoo!?
Yahoo! SiteBuilder - Free, easy-to-use web site design software
http://sitebuilder.yahoo.com
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/