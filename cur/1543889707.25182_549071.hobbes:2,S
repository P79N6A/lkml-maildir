Date: Fri, 25 May 2007 09:31:01 +0200
From: Jiri Slaby <>
Subject: Re: [PATCH] AFS: Implement file locking
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/5/25/57

David Howells napsal(a):
> Implement file locking for AFS.
> 
> Signed-off-by: David Howells <dhowells@redhat.com>
> ---
> 
>  fs/afs/Makefile    |    1 
>  fs/afs/afs.h       |    8 +
>  fs/afs/afs_fs.h    |    3 
>  fs/afs/callback.c  |    3 
>  fs/afs/dir.c       |    1 
>  fs/afs/file.c      |    2 
>  fs/afs/flock.c     |  558 ++++++++++++++++++++++++++++++++++++++++++++++++++++
>  fs/afs/fsclient.c  |  155 ++++++++++++++
>  fs/afs/internal.h  |   30 +++
>  fs/afs/main.c      |    1 
>  fs/afs/misc.c      |    1 
>  fs/afs/super.c     |    3 
>  fs/afs/vnode.c     |  130 +++++++++++-
>  include/linux/fs.h |    4 
>  14 files changed, 885 insertions(+), 15 deletions(-)
> 
> diff --git a/fs/afs/Makefile b/fs/afs/Makefile
> index 73ce561..a666710 100644
> --- a/fs/afs/Makefile
> +++ b/fs/afs/Makefile
> @@ -8,6 +8,7 @@ kafs-objs := \
>  	cmservice.o \
>  	dir.o \
>  	file.o \
> +	flock.o \
>  	fsclient.o \
>  	inode.o \
>  	main.o \
> diff --git a/fs/afs/afs.h b/fs/afs/afs.h
> index 2452579..c548aa3 100644
> --- a/fs/afs/afs.h
> +++ b/fs/afs/afs.h
> @@ -37,6 +37,13 @@ typedef enum {
>  	AFS_FTYPE_SYMLINK	= 3,
>  } afs_file_type_t;
> 
> +typedef enum {
> +	AFS_LOCK_READ		= 0,	/* read lock request */
> +	AFS_LOCK_WRITE		= 1,	/* write lock request */
> +} afs_lock_type_t;
Why typedef?
regards,
-- 
http://www.fi.muni.cz/~xslaby/
            Jiri Slaby
faculty of informatics, masaryk university, brno, cz
e-mail: jirislaby gmail com, gpg pubkey fingerprint:
B674 9967 0407 CE62 ACC8  22A0 32CC 55C3 39D4 7A7E
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/