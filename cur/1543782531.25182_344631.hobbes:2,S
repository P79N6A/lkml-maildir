Date: Thu, 25 Aug 2005 21:03:12 +0200
From: Johannes Berg <>
Subject: Re: Inotify problem [was Re: 2.6.13-rc6-mm1]
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/8/25/242

On Thu, 2005-08-25 at 11:54 -0700, George Anzinger wrote:
> I think the best thing is to take idr into user space and emulate the 
> problem usage.  
Good plan, I guess. Do you think that's easy?
> To this end, from the log it appears that you _might_ be 
> moving between 0, 1 and 2 entries increasing the number each time.  It 
> also appears that the failure happens here:
> add 1023
> add 1024
> find 1024  or is it the remove that fails?  It also looks like 1024 got 
> allocated twice.  Am I reading the log correctly?
Remove 1024 fails, but add(please make it >1024) seems to return 1024,
and find(1024) also seems to fail. Well, remove() probably has to
find(), but I'm not really sure what inotify does (maybe find first, to
see if it's valid).
> So, is it correct to assume that the tree is empty save these two at 
> this time?  I am just trying to figure out what the test program needs 
> to do.
Yes, but all the smaller ones have been in it at some point in time.
johannes
[unhandled content-type:application/pgp-signature]