Date: Wed, 07 May 2008 21:32:14 +0200
From: Mirco Tischler <>
Subject: Re: [BUG]:WARNING: at arch/x86/kernel/rtc.c:122 in 2.6.26-rc1
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/5/7/244

On Mi, 2008-05-07 at 21:06 +0200, Thomas Gleixner wrote:
> > [11677.490019] CPU1 is down
> > [11677.490149] Extended CMOS year: 2000
> > [11677.490149] x86 PAT enabled: cpu 0, old 0x7040600070406, new
> > 0x7010600070106
> > [11677.490747] Back to C!
> > [11677.490952] microcode: CPU0 updated from revision 0x92 to 0x92, date
> > = 03132007 
> > [11677.491065] ------------[ cut here ]------------
> > [11677.491065] WARNING: at arch/x86/kernel/rtc.c:122 mach_get_cmos_time
> > +0x9e/0x14e()
> 
> > [11677.491065]  [<ffffffff80211cdb>] mach_get_cmos_time+0x9e/0x14e
> > [11677.491065]  [<ffffffff80211da6>] read_persistent_clock+0x1b/0x35
> > [11677.491065]  [<ffffffff8024c101>] timekeeping_resume+0xb/0x120
> 
> Interesting. That's in the resume path.
> 
> > I wasn't able to reproduce the warning yet, but because the commit
> > message introducing the WARN_ON says:
> 
> This is a WARN_ON_ONCE so you only see it once per boot. Resume does
> not count :) You might change that WARN_ON_ONCE to WARN_ON to check
> whether it happens more than once.
The problem is that I am currently not able to reproduce it. I've tried
~10 suspends & resumes till now. With a reboot in between. Will try some
more testing with WARN_ON though.
> Can you please provide some details about the system ?
This is a Zepto notebook with Intel chipset (santa rosa generation) and
core2duo cpu. I'm running Ubuntu 8.04 x86_64. I attach a lspci output.
Just ask if you need more specific information.
> Thanks,
> 	tglx
Thanks
Mirco
00:00.0 Host bridge: Intel Corporation Mobile PM965/GM965/GL960 Memory Controller Hub (rev 03)
00:02.0 VGA compatible controller: Intel Corporation Mobile GM965/GL960 Integrated Graphics Controller (rev 03)
00:02.1 Display controller: Intel Corporation Mobile GM965/GL960 Integrated Graphics Controller (rev 03)
00:1a.0 USB Controller: Intel Corporation 82801H (ICH8 Family) USB UHCI Controller #4 (rev 03)
00:1a.1 USB Controller: Intel Corporation 82801H (ICH8 Family) USB UHCI Controller #5 (rev 03)
00:1a.7 USB Controller: Intel Corporation 82801H (ICH8 Family) USB2 EHCI Controller #2 (rev 03)
00:1b.0 Audio device: Intel Corporation 82801H (ICH8 Family) HD Audio Controller (rev 03)
00:1c.0 PCI bridge: Intel Corporation 82801H (ICH8 Family) PCI Express Port 1 (rev 03)
00:1c.1 PCI bridge: Intel Corporation 82801H (ICH8 Family) PCI Express Port 2 (rev 03)
00:1c.2 PCI bridge: Intel Corporation 82801H (ICH8 Family) PCI Express Port 3 (rev 03)
00:1c.3 PCI bridge: Intel Corporation 82801H (ICH8 Family) PCI Express Port 4 (rev 03)
00:1d.0 USB Controller: Intel Corporation 82801H (ICH8 Family) USB UHCI Controller #1 (rev 03)
00:1d.1 USB Controller: Intel Corporation 82801H (ICH8 Family) USB UHCI Controller #2 (rev 03)
00:1d.2 USB Controller: Intel Corporation 82801H (ICH8 Family) USB UHCI Controller #3 (rev 03)
00:1d.7 USB Controller: Intel Corporation 82801H (ICH8 Family) USB2 EHCI Controller #1 (rev 03)
00:1e.0 PCI bridge: Intel Corporation 82801 Mobile PCI Bridge (rev f3)
00:1f.0 ISA bridge: Intel Corporation 82801HEM (ICH8M) LPC Interface Controller (rev 03)
00:1f.1 IDE interface: Intel Corporation 82801HBM/HEM (ICH8M/ICH8M-E) IDE Controller (rev 03)
00:1f.2 SATA controller: Intel Corporation 82801HBM/HEM (ICH8M/ICH8M-E) SATA AHCI Controller (rev 03)
00:1f.3 SMBus: Intel Corporation 82801H (ICH8 Family) SMBus Controller (rev 03)
02:00.0 Ethernet controller: Broadcom Corporation NetLink BCM5787M Gigabit Ethernet PCI Express (rev 02)
04:00.0 Network controller: Intel Corporation PRO/Wireless 4965 AG or AGN Network Connection (rev 61)
06:06.0 CardBus bridge: Texas Instruments PCIxx12 Cardbus Controller
06:06.1 FireWire (IEEE 1394): Texas Instruments PCIxx12 OHCI Compliant IEEE 1394 Host Controller
06:06.2 Mass storage controller: Texas Instruments 5-in-1 Multimedia Card Reader (SD/MMC/MS/MS PRO/xD)
06:06.3 SD Host controller: Texas Instruments PCIxx12 SDA Standard Compliant SD Host Controller
[unhandled content-type:application/pgp-signature]