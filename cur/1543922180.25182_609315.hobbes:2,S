Date: Wed, 24 Oct 2007 18:25:40 +0200
From: Wim Van Sebroeck <>
Subject: Re: [HP ProLiant WatchDog driver] hpwdt HP WatchDog Patch <resend>
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/10/24/328

Hi Thomas,
> --- linux-2.6.23.1/drivers/char/watchdog/Makefile.orig	2007-10-12 11:43:44.000000000 -0500
> +++ linux-2.6.23.1/drivers/char/watchdog/Makefile	2007-10-15 07:56:31.000000000 -0500
> @@ -118,3 +118,10 @@
> 
>  # Architecture Independant
>  obj-$(CONFIG_SOFT_WATCHDOG) += softdog.o
> +
> +#
> +# Makefile for the hp WatchDog driver.
> +#
> +CFLAGS_hpwdt.o += -O
> +obj-$(CONFIG_HP_WATCHDOG) += hpwdt.o
> +
> --- linux-2.6.23.1/drivers/char/watchdog/Kconfig.orig	2007-10-12 11:43:44.000000000 -0500
> +++ linux-2.6.23.1/drivers/char/watchdog/Kconfig	2007-10-15 07:57:27.000000000 -0500
> @@ -55,6 +55,19 @@
>  	  To compile this driver as a module, choose M here: the
>  	  module will be called softdog.
> 
> +config HP_WATCHDOG
> +        tristate "Hewlett-Packard watchdog"
> +        depends on WATCHDOG && X86
> +        help
> +          A software monitoring watchdog and NMI sourcing driver. This driver
> +          will detect lockups and provide stack trace. Also, when an NMI
> +          occurs this driver will make the necessary BIOS calls to log
> +          the cause of the NMI. This is a driver that will only load on a
> +          HP ProLiant system with a minimum of iLO2 support.
> +          To compile this driver as a module, choose M here: the
> +          module will be called hpwdt.
> +
> +
>  # ALPHA Architecture
> 
>  # ARM Architecture
Before reviewing the rest of your driver: can you please put your "X86 Architecture related"
driver in the X86 related parts of Kconfig and Makefile ? Also the depend on WATCHDOG is not
needed since we allready have a general dependency for all the drivers in Kconfig.
Please also note that we just shifted the watchdog drivers from drivers/char/watchdog to
drivers/watchdog -> so your driver will appear in the drivers/watchdog directory when it
will be included.
Greetings,
Wim.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/