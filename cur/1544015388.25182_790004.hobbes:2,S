Date: Sun, 11 Jan 2009 05:05:57 +0100
From: Ingo Molnar <>
Subject: Re: [PATCH] x86-64: remove locked instruction from switch_to()
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2009/1/10/328

* Benjamin LaHaise <bcrl@kvack.org> wrote:
> Here is a rediffed and test booted version of the patch against linus' git 
> tree as of a couple of hours ago.
> 
> The patch below removes an unnecessary locked instruction from 
> switch_to().  TIF_FORK is only ever set in copy_thread() on initial 
> process creation, and gets cleared during the first scheduling of the 
> process.  As such, it is safe to use an unlocked test for the flag 
> within switch_to()./
> 
> Signed-off-by: Benjamin LaHaise <bcrl@kvack.org>
applied to tip/x86/asm, thanks Ben!
	Ingo