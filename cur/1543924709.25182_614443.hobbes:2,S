Date: Tue, 6 Nov 2007 01:26:47 +0100
From: Andi Kleen <>
Subject: Re: x86_64 ten times slower than i386
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/11/5/343

On Mon, Nov 05, 2007 at 08:32:24AM -0800, Ray Lee wrote:
> (Don't trim cc:s.)
> 
> On Nov 5, 2007 8:00 AM, Bo Brant√©n <bosse@acc.umu.se> wrote:
> 
> >> Intel Core 2 Quad
> >> and I noticed that the 64-bit versions was at least 10 times slower than the
> >> 32-bit versions,
> 
> >
> > After I uppgraded the BIOS the mtrr looks like below, and now it works if
> > I boot with mem=4736M so I can use all memory but it still doesn't work
> > without the mem parameter then it will run as slow as before.
Then the BIOS is still broken Comapl in to your motherboard vendor.
> >
> > reg00: base=0x00000000 (   0MB), size=2048MB: write-back, count=1
> > reg01: base=0x80000000 (2048MB), size=1024MB: write-back, count=1
> > reg02: base=0xc0000000 (3072MB), size= 256MB: write-back, count=1
> > reg03: base=0xcf800000 (3320MB), size=   8MB: uncachable, count=1
> > reg04: base=0xcf700000 (3319MB), size=   1MB: uncachable, count=1
> > reg05: base=0x100000000 (4096MB), size= 512MB: write-back, count=1
> > reg06: base=0x120000000 (4608MB), size= 128MB: write-back, count=1
> 
> Jesse Barnes (cc:d) wrote a patch to address this, I think (x86: trim
> memory not covered by WB MTRRs), but as far as I can tell it hasn't
> been merged yet. System is Intel, 4gb of RAM.
It wasn't merged because it broke booting on some systems.
Besides the memory would be still lost -- all it did was to automate
the "mem=XXXX" line.
-Andi
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/