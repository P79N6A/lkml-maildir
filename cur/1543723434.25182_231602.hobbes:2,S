Date: Thu, 01 Jul 2004 13:06:55 -0400
From: Trond Myklebust <>
Subject: Re: machine hangs - SLES9/NFS
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/7/1/121

PÃ¥ to , 01/07/2004 klokka 08:00, skreiv Shylendra Bhat:
> Hello,
> 
> I am looking answers for the following questions.
> 
> Is nfs file lock acquired by client, persistent across the nfs server
> reboot?
> I know that this feature was not there in NFSv3. Does NFSv4 supports
> this?
FUD. The lock manager for NFSv3 does reclaim locks if the server
reboots.
> After the nfs service restart, the client fails to release the lock and
> is in a hung state. If the mount directory is listed, it shows
> 
> "bash: cd: /export: Stale NFS file handle"
Which means that the server is screwed up. Two possibilities: either
        1) you have a fibrechannel back end or something like that which
        doesn't have a fixed device number: you can fix that by using
        the "fsid" export option.
        2) The filesystem you are exporting is using non-permanent inode
        numbers (FAT filesystems are a prime example). Sorry: no
        workaround for this other than converting to another filesystem.
Cheers,
  Trond
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/