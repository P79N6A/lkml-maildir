Date: Fri, 26 Feb 1999 10:26:02 -0500 (EST)
From: David C Niemi <>
Subject: TCP Hangs with Solaris: SOLVED by Andrea Arcangeli's workaround
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/2/26/108

All three test cases I was using have been confirmed to be solved by Andrea
Arcangeli's patch from yesterday, which creates a sysctl variable:
	/proc/sys/net/ipv4/tcp_solaris_fin_bug_4083814_workaround
Defaulting to 0, this can be set to 1 to enable 2.0.x-like behavior, which
is less efficient but avoids exposing bug #4083814 in versions of Solaris
prior to 7.0.  Alternatively, if you are able to patch your Solaris box(en)
this problem should be fixed by patch 105529-05.
Symptoms are sessions that hang at the very end of data transfers of
certain sizes if the packets arrive out of order (because Solaris forgets
to reply to the FIN flag).  On a very good network connection this is hard
to reproduce.  It has been well-documented for FTP (with a Solaris
2.5.1/2.6 client and a Linux 2.2.x server) but probably affects HTTP as
well.
Due to the wide use of the afflicted versions of Solaris in
firewalls/proxies, I recommend turning on this workaround on any major FTP
server running on the 2.2.x kernel (and probably HTTP servers as well,
though it has not been proven to affect HTTP behavior -- yet).
    ---David C Niemi---     If I am not for myself, who will be for me?
   ---niemi at tux.org---   If I am only for myself, what am I?
    ---Reston VA USA---     If not now, when?    --    Hillel
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/