Date: Sun, 11 Sep 2005 20:23:37 +0300
From: Mika Kukkonen <>
Subject: Re: [PATCH] Fix allnoconfig build with gcc4
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/9/11/101

On 9/11/05, Linus Torvalds <torvalds@osdl.org> wrote:
> 
> 
(...)
> No, this would cause a compile error if CONFIG_NET and CONFIG_SYSCTL
> is enabled (because sysctl_net.c needs that declaration).
Ah yes. I got confused by googling which showed that there are some issues
with these declarations and gcc4 (see for example this thread:
http://gcc.gnu.org/ml/gcc/2005-02/msg00053.html
).
> So the correct solution is apparently either one of
> 
>  - always declare an empty "struct ctl_table" regardless of whether SYSCTL
>    is enabled or not.
> 
>    This might be a good idea, since it probably allows more code to be
>    compiled without checking for CONFIG_SYSCTL.
> 
>  - put the ether_table[] declaration inside a #ifdef CONFIG_SYSCTL.
core_table in include/net/sock.h uses the latter option, so I'll send
you a patch
for that (with better email client).
--MiKu
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/