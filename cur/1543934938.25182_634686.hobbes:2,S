Date: Sun, 6 Jan 2008 02:20:45 +0100
From: Miguel Botón <>
Subject: Re: [PATCH] x86: ioport_{32|64}.c unification
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/5/213

I just realize that in some cases 'regs->flags' is a long instead of an 
unsigned long so... this would be a proper solution?
static long do_iopl(unsigned int level, long *flags)
{
	...
}
#ifdef CONFIG_X86_32
asmlinkage long sys_iopl(unsigned long regsp)
{
	volatile struct pt_regs *regs = (struct pt_regs *)&regsp;
	unsigned int level = regs->bx;
#else
asmlinkage long sys_iopl(unsigned int level, struct pt_regs *regs)
{
#endif
	return do_iopl(level, (long *)&regs->flags);
}
Or maybe would be better if 'do_iopl' prototype is:
static long do_iopl(unsigned int level, struct pt_regs *regs);
-- 
	Miguel Botón
--
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/