Date: Mon, 3 Mar 2008 13:02:14 -0800
From: Jesse Barnes <>
Subject: Re: Weirdness in pci_read_bases()
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/3/3/466

On Monday, March 03, 2008 12:57 pm Jesse Barnes wrote:
> > Not only iommu's. On lots of platforms, we have the PCI MMIO space
> > mapped 1:N, that is, an access at MMIO location N turns into a PCI cycle
> > with address 0. So outbound PCI is effectively remapped, thus allowing
> > access to things like 0 etc... without punching holes in RAM and without
> > other dirty x86-like tricks.
>
> Right, bus address space is really a separate entity; I was just using
> IOMMUs as an example of that...
Err, wasn't really clear here.  CPU->PCI space and PCI->host space are really 
separate entities... IOMMUs will definitely affect the PCI->host mapping, and 
CPU->PCI mappings can be arbitrarily complex as well, though as you say on 
PCs it's typically just flatly mapped into CPU physical space somewhere.
Jesse