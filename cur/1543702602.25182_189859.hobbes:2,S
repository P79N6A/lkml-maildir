Date: Sat, 10 Jan 2004 00:15:25 -0500 (EST)
From: Darrell Wright <>
Subject: Oops in i2o_block in 2.6.0 and 2.6.1 with Promise Supertrak 100
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/1/10/4

Hi I have been trying to use the i2o_block in order to use my Supertrak
100.  In both 2.6.0 and 2.6.1 it oopses.  However in 2.4.22 and preceeding
versions it works flawlessly.  I am using 1.00 Build 13 flash version of
the controller, however I was previously using 1.00 Build 11 with the same
problem.  I have attached the Oops and the kernel config.  If anything
else is needed just let me know.
Cheers
Darrell Wright
Jan  9 22:50:03 agape kernel: I2O Core - (C) Copyright 1999 Red Hat Software
Jan  9 22:50:03 agape kernel: I2O: Event thread created as pid 4554
Jan  9 22:50:03 agape kernel: i2o: Checking for PCI I2O controllers...
Jan  9 22:50:03 agape kernel: PCI: Found IRQ 5 for device 0000:00:0c.1
Jan  9 22:50:03 agape kernel: i2o: I2O controller on bus 0 at 97.
Jan  9 22:50:03 agape kernel: i2o: PCI I2O controller at 0xD6400000 size=4194304
Jan  9 22:50:03 agape kernel: I2O: Promise workarounds activated.
Jan  9 22:50:03 agape kernel: I2O: MTRR workaround for Intel i960 processor
Jan  9 22:50:03 agape kernel: i2o/iop0: Installed at IRQ5
Jan  9 22:50:03 agape kernel: i2o: 1 I2O controller found and installed.
Jan  9 22:50:03 agape kernel: Activating I2O controllers...
Jan  9 22:50:03 agape kernel: This may take a few minutes if there are many devices
Jan  9 22:50:05 agape kernel: i2o/iop0: Reset rejected, trying to clear
Jan  9 22:50:12 agape kernel: i2o/iop0: LCT has 7 entries.
Jan  9 22:50:12 agape kernel: i2o/iop0: Configuration dialog desired.
Jan  9 22:50:37 agape kernel: I2O Block Storage OSM v0.9
Jan  9 22:50:37 agape kernel:    (c) Copyright 1999-2001 Red Hat Software.
Jan  9 22:50:37 agape kernel: i2o_block: registered device at major 80
Jan  9 22:50:37 agape kernel: i2o_block: Checking for Boot device...
Jan  9 22:50:37 agape kernel: i2o_block: Checking for I2O Block devices...
Jan  9 22:50:39 agape kernel: i2ob: Installing tid 14 device at unit 0
Jan  9 22:50:39 agape kernel: Unable to handle kernel NULL pointer dereference at virtual address 00000188
Jan  9 22:50:39 agape kernel:  printing eip:
Jan  9 22:50:39 agape kernel: c0222b3c
Jan  9 22:50:39 agape kernel: *pde = 00000000
Jan  9 22:50:39 agape kernel: Oops: 0002 [#1]
Jan  9 22:50:39 agape kernel: CPU:    0
Jan  9 22:50:39 agape kernel: EIP:    0060:[blkdev_ioctl+956/1095]    Not tainted
Jan  9 22:50:39 agape kernel: EIP:    0060:[<c0222b3c>]    Not tainted
Jan  9 22:50:39 agape kernel: EFLAGS: 00010212
Jan  9 22:50:39 agape kernel: EIP is at blk_queue_max_sectors+0x1c/0x50
Jan  9 22:50:39 agape kernel: eax: 00000000   ebx: 00000060   ecx: 00000000   edx: f8902fa0
Jan  9 22:50:39 agape kernel: esi: 00000000   edi: 00000000   ebp: f7473ee0   esp: f7473ed0
Jan  9 22:50:39 agape kernel: ds: 007b   es: 007b   ss: 0068
Jan  9 22:50:39 agape kernel: Process modprobe (pid: 4557, threadinfo=f7472000 task=f75a26a0)
Jan  9 22:50:39 agape kernel: Stack: 00000000 00000006 f7473f18 0000000c f7473f3c f89000da 00000000 00000060 
Jan  9 22:50:39 agape kernel:        00000006 f7473f18 00000004 00000001 0000000f f8902fa0 00000000 f8902fa0 
Jan  9 22:50:39 agape kernel:        00000030 f7473f30 00000006 00000000 0000c96b 516a6200 00000009 00000200 
Jan  9 22:50:39 agape kernel: Call Trace:
Jan  9 22:50:39 agape kernel:  [_end+944817334/1069589468] i2ob_install_device+0x1ea/0x580 [i2o_block]
Jan  9 22:50:39 agape kernel:  [<f89000da>] i2ob_install_device+0x1ea/0x580 [i2o_block]
Jan  9 22:50:39 agape kernel:  [_end+944818849/1069589468] i2ob_scan+0x165/0x220 [i2o_block]
Jan  9 22:50:39 agape kernel:  [<f89006c5>] i2ob_scan+0x165/0x220 [i2o_block]
Jan  9 22:50:39 agape kernel:  [_end+944819090/1069589468] i2ob_probe+0x36/0x40 [i2o_block]
Jan  9 22:50:39 agape kernel:  [<f89007b6>] i2ob_probe+0x36/0x40 [i2o_block]
Jan  9 22:50:39 agape kernel:  [_end+944820553/1069589468] i2o_block_init+0x1bd/0x240 [i2o_block]
Jan  9 22:50:39 agape kernel:  [<f8900d6d>] i2o_block_init+0x1bd/0x240 [i2o_block]
Jan  9 22:50:39 agape kernel:  [_end+944814588/1069589468] i2ob_evt+0x0/0x2a0 [i2o_block]
Jan  9 22:50:39 agape kernel:  [<f88ff620>] i2ob_evt+0x0/0x2a0 [i2o_block]
Jan  9 22:50:39 agape kernel:  [get_ksymbol+240/320] sys_init_module+0x100/0x1d0
Jan  9 22:50:39 agape kernel:  [<c0131260>] sys_init_module+0x100/0x1d0
Jan  9 22:50:39 agape kernel:  [syscall_call+7/11] syscall_call+0x7/0xb
Jan  9 22:50:39 agape kernel:  [<c010905f>] syscall_call+0x7/0xb
Jan  9 22:50:39 agape kernel: 
Jan  9 22:50:39 agape kernel: Code: 66 89 98 88 01 00 00 8b 5d fc c9 c3 bb 08 00 00 00 c7 44 24 
[unhandled content-type:application/octet-stream]