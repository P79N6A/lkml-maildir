Date: Wed, 14 Mar 2007 16:19:28 +0100
From: Frank Seidel <>
Subject: Re: [patch 5/9] signalfd/timerfd v3 - signalfd compat code ...
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/3/14/224

On Monday 12 March 2007 20:19:27 Davide Libenzi wrote:
Hi,
i'm not (at least until yet) really that familiar with the kernel, but 
currently trying to get into it also via reading of code and patches 
here. So please don't take my comments in this (and posibly following)
mails to serious. ;-)
> +asmlinkage long compat_sys_signalfd(int ufd,
> +                                 const compat_sigset_t __user 
*sigmask,
> +                                 compat_size_t sigsetsize)
> +{
> +     compat_sigset_t ss32;
> +     sigset_t tmp;
> +     sigset_t __user *ksigmask;
> +
Would it be good to put this in a
if (sigmask) {
like its e.g. done in compat_sys_epoll_pwait or would this be
totally useless here?
> +     if (sigsetsize != sizeof(compat_sigset_t))
> +             return -EINVAL;
> +     if (copy_from_user(&ss32, sigmask, sizeof(ss32)))
> +             return -EFAULT;
> ...
Have fun,
Frank
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/