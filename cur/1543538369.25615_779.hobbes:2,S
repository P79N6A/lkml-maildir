Date: Thu, 6 Jul 2000 23:01:58 +0200 (MET DST)
From: Mikael Pettersson <>
Subject: Re: [patch] drivers/net/3c59x.c
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/7/6/128

Andrew Morton wrote:
>> Jul  5 16:46:22 xxx cardmgr[448]: executing: 'modprobe 3c575_cb'
>> Jul  5 16:46:22 xxx kernel: 3c59x.c:v0.99L+LK1.1.6  28 May 2000  Donald Becker and others. 
http://www.scyld.com/network/vortex.html
 $Revision: 1.97 $
>> Jul  5 16:46:22 xxx kernel: eth0: 3Com PCI 3c575 Boomerang CardBus at 0x1400, <3>eth0: Cannot reserve I/O resource 0x80 @ 0x1400, aborting
>
>Oh.  What does /proc/ioports have to say about 0x1400-0x147f?
First case: 2.4.0-test3-pre4, kernel's cardbus/3c59x drivers,
/proc/ioports before inserting the 3c575_cb card:
1000-10ff : PCI CardBus #01
1400-14ff : PCI CardBus #03
and after:
1000-10ff : PCI CardBus #01
1400-14ff : PCI CardBus #03
  1400-143f : PCI device 10b7:5057
Apparently, the device was at least partially registered,
but vortex_probe1() died with the same error as before.
Second case: 2.4.0-test3-pre4, pcmcia-cs 3.1.17 & no kernel drivers,
/proc/ioports before inserting the 3c575_cb card:
(nothing cardbus related and nothing at 0x1???)
and after:
0100-013f : cb_enabler
In this case, the kernel log says:
Jul  6 17:54:47 xxx cardmgr[454]: initializing socket 1
Jul  6 17:54:47 xxx cardmgr[454]: socket 1: 3Com 3c575-TX Fast EtherLink XL
Jul  6 17:54:47 xxx kernel: cs: cb_alloc(bus 3): vendor 0x10b7, device 0x5057 
Jul  6 17:54:47 xxx cardmgr[454]: executing: 'modprobe cb_enabler'
Jul  6 17:54:47 xxx cardmgr[454]: executing: 'modprobe 3c575_cb'
Jul  6 17:54:47 xxx kernel: 3c59x.c:v0.99Q 5/16/2000 Donald Becker, becker@scyld.com 
Jul  6 17:54:47 xxx kernel:   
http://www.scyld.com/network/vortex.html
 
Jul  6 17:54:47 xxx kernel: cs: cb_config(bus 3) 
Jul  6 17:54:47 xxx kernel:   fn 0 bar 1: io 0x100-0x13f 
Jul  6 17:54:47 xxx kernel:   fn 0 rom: mem 0x60000000-0x6000ffff 
Jul  6 17:54:47 xxx kernel:   irq 11 
Jul  6 17:54:47 xxx kernel: vortex_attach(device 03:00.0) 
Jul  6 17:54:47 xxx kernel: eth0: 3Com 3c575 Boomerang CardBus at 0x100,  00:60:08:24:5c:28, IRQ 11 
Jul  6 17:54:47 xxx kernel:   product code 'KY' rev 06 date 02-19-98 
Jul  6 17:54:47 xxx kernel:   8K word-wide RAM 3:5 Rx:Tx split, autoselect/MII interface. 
Jul  6 17:54:47 xxx kernel:   MII transceiver found at address 0, status 7809. 
Jul  6 17:54:47 xxx kernel:   Enabling bus-master transmits and whole-frame receives. 
Jul  6 17:54:47 xxx cardmgr[454]: executing: './network start eth0'
...
Note that that pcmcia-cs uses I/O range 0100-013f while the kernel
drivers attempt to use 14xx. Is this difference significant?
/Mikael
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/