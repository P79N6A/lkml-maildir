Date: Thu, 10 Aug 2006 13:39:17 -0400
From: Chuck Ebbert <>
Subject: Re: [patch] i386: annotate the rest of entry.s::nmi
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/8/10/313

In-Reply-To: <44DB532F.76E4.0078.0@novell.com>
On Thu, 10 Aug 2006 15:39:27 +0200, Jan Beulich wrote:
>
> >> The point is that the push-es in FIX_STACK() aren't annotated, so
> >> things won't be correct at those points anyway.
> >
> >I have a patch here that adds that, but it won't compile
> >because that part of the NMI handler is un-annotated:
> 
> But you didn't clarify why you need this piece of code annotated...
Uh, which one didn't I clarify?
FIX_STACK() is already invoked from debug(), which is annotated, but
FIX_STACK() isn't.  And that messes with the stack, so for a few
instructions the annotations are all wrong.
When I annotated FIX_STACK(), I found entry.S wouldn't compile because
nmi() included FIX_STACK() but was completely missing annotations
in that piece. So I added them so FIX_STACK()'s annotations would
compile...
Should I send a combined patch, leave the two patches separate, or just
drop it?
-- 
Chuck
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/