Date: 03 Jan 1999 19:14:05 +0100
From: Andi Kleen <>
Subject: Re: Van J compression?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/1/4/41

In article <19990103165607.A4289@tantalophile.demon.co.uk>,
Jamie Lokier <lkd@tantalophile.demon.co.uk> writes:
> On Sun, Jan 03, 1999 at 05:21:37PM +0100, Andi Kleen wrote:
>> In article <19990103161811.A4142@tantalophile.demon.co.uk>,
>> Jamie Lokier <lkd@tantalophile.demon.co.uk> writes:
>> 
>> >> All standards say that packets with wrong checksum should be silently
>> >> dropped, 2.2 will do that and turn off that debugging, I repeat,
>> >> debugging message.
>> 
>> > Understood.  However, please include a /proc option to turn the messages
>> > on.  There is a genuine problem around, and it's due to something more
>> > significant than bit errors.
>> 
>> No. 
>> 
>> There is a counter in the TCP/IP/UDP MIB (/proc/net/snmp). That is enough. 
> It is not enough, because 
>   1. It does not allow us to associate the checksum
>      errors with the erroneous packets (e.g., in a PPP log).
??? checksum errors can be caused by every packet, you mean you log all
packets going over your PPP link? The CCP et.al. packets you see in your PPP
log when you enable debug are never seen by the TCP/IP stack, they are
passed directly between the kernel driver and pppd. Although they have
their own checksum (the PPP link layer crc16) which is checked, packets
that fail the csum test are properly thrown away without logging them 
(except for device error counter shown by ifconfig).
Also it is not the full picture, the current kernel only prints the
debugging message when the UDP/TCP checksum fails - for ICMP checksums
(except during masquerading) or IP headers there is only a counter.  
>   2. It is useful to see which IP addresses are causing errors.
If you want that write a user mode daemon - it is a trivial modification
of tcpdump.   
I see no actual evidence that logging checksum errors brings any advantage
at all, worse it allows denial of service attacks easily. 
-Andi
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/