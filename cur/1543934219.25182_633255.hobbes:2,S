Date: Wed, 2 Jan 2008 01:18:33 +0200
From: Adrian Bunk <>
Subject: Re: [PATCH] x86_64: clear IO_APIC before enabing apic error vector. v2
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/1/241

On Sun, Dec 30, 2007 at 05:03:50PM -0800, Yinghai Lu wrote:
> On Dec 30, 2007 4:28 PM, Adrian Bunk <bunk@kernel.org> wrote:
> >
> > On Sun, Dec 30, 2007 at 04:01:39PM -0800, Yinghai Lu wrote:
>...
> > > the old one is in x86-mm tree
> > >
> > > 
http://git.kernel.org/?p=linux/kernel/git/x86/linux-2.6-x86.git;a=commitdiff;h=ffcbdc220a1520d006a837f33589c7c19ffbeb76
> > >...
> >
> > Sorry for the dumb question, but what in
> >
> > +       if (!smp_processor_id() && !skip_ioapic_setup && nr_ioapics)
> > +               enable_IO_APIC();
> >
> > guarantees that this call doesn't happen when you hotplug CPU 0 ?
> >
> 
> if CPU 0 (BSP) can be hotplug, it will be restarted via smp_callin.
> and the delta function call patch will use setup_local_APIC(NULL),
> then it will be safe.
We are talking about the version without the pointer games.
> YH
cu
Adrian
-- 
       "Is there not promise of rain?" Ling Tan asked suddenly out
        of the darkness. There had been need of rain for many days.
       "Only a promise," Lao Er said.
                                       Pearl S. Buck - Dragon Seed