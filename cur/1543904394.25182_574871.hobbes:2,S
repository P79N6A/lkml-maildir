Date: Wed, 25 Jul 2007 14:14:21 -0400
From: Maurice Volaski <>
Subject: Re: drbd 8.0.2/3 doesn't load under kernel 2.6.21
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/7/25/335

John,
What's story with this? I just tried the patch for 2.6.22 and your 
patch is still trashing the kernel, preventing drbd from being 
compiled in.
Anyone else have any idea how these apparently simple network patches 
could render these symbols inaccessible to the kernel?
>It turns out I was adding the web100 patch (
http://www.web100.org
) to
>the 2.6.21 kernel and that's what causes the symbol resolving problem
>below. Adding the corresponding version of the web100 patch to the
>2.6.20 kernel makes this problem appear there as well. On fresh
>versions of the kernel, this problem does not occur. At the moment,
>it's not possible to have a current kernel that contains both drbd
>and web100.
>
>>On a 64-bit Gentoo system with Gentoo's 2.6.21 kernel, drbd 8.0.2/3
>>complains when I try to load the module:
>>
>>[  134.141363] drbd: Unknown symbol cn_fini
>>[  134.141399] drbd: Unknown symbol cn_init
>>
>>It works fine when I compile it and load in the previous kernel
>>version, 2.6.20 and the symbols are present in the map file
>>
>>./System.map-genkernel-x86_64-2.6.21-gentoo-r2:ffffffff802935aa t cn_fini
>>./System.map-genkernel-x86_64-2.6.21-gentoo-r2:ffffffff8029362a t cn_init
>>
>>I am c'cing the kernel mailing list because this appears to be a
>>problem with how any module accesses symbols in the kernel, not just
>  >drbd. Source was compiled with Gentoo gcc-4.1.2, glibc-2.5-r3
-- 
Maurice Volaski, mvolaski@aecom.yu.edu
Computing Support, Rose F. Kennedy Center
Albert Einstein College of Medicine of Yeshiva University
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/