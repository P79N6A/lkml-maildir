Date: Wed, 28 Feb 2007 20:09:29 +0100
From: Eric Dumazet <>
Subject: Re: [patch - v3] epoll ready set loops diet ...
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/2/28/199

On Wednesday 28 February 2007 19:37, Davide Libenzi wrote:
> +		list_del(&epi->rdllink);
> +		if (!(epi->event.events & EPOLLET) && (revents & epi->event.events))
> +			list_add_tail(&epi->rdllink, &injlist);
> +		else {
Is the ( ... & epi->event.events) really necessary ? (It seems already done)
I was wrong about the size of epitem : it is now 68 bytes instead of 72.
At least we now use/dirty one cache line instead of two per epitem.
Do you have another brilliant idea to shrink 4 more bytes ? :)
It seems to me 'nwait' is only used at init time (so that 
ep_ptable_queue_proc() can signal an error occured).
Maybe another mechanism could let us delete nwait from epitem ?
We could use a field in task_struct for example (see usage of total_link_count 
for example)
Thank you
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/