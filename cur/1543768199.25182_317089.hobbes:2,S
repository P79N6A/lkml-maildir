Date: Tue, 10 May 2005 12:55:06 +0200
From: Andi Kleen <>
Subject: Re: [BUG][Resend] 2.6.12-rc3-mm3: Kernel BUG at "mm/slab.c":1219
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/5/10/56

> Some slab change, perhaps? There's nothing special about the init_bio()
> slab call:
> 
>         bio_slab = kmem_cache_create("bio", sizeof(struct bio), 0,
>                             SLAB_HWCACHE_ALIGN|SLAB_PANIC, NULL, NULL);
> 
> 
> Hmm, this looks strange. That bug happens if:
> 
>         if ((!name) ||
>                 in_interrupt() ||
>                 (size < BYTES_PER_WORD) ||
>                 (size > (1<<MAX_OBJ_ORDER)*PAGE_SIZE) ||
>                 (dtor && !ctor)) {
>                         printk(KERN_ERR "%s: Early error in slab %s\n",
>                                         __FUNCTION__, name);
>                         BUG();
>                 }
> 
> It must be in_interrupt() triggering, perhaps something change in the
> boot sequence?
I would add a printk for all arguments on top of kmem_cache_create
and decompose the big if () into smaller if (...) BUG() so that you
can see which condition triggers exactly.
Then if you suspect compiler issues you can edit the Makefile and
recompile the kernel with -O1
Rafael, can you try that perhaps?
-Andi
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/