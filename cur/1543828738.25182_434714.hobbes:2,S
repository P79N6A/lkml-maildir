Date: Tue, 20 Jun 2006 14:25:13 -0400
From: Jeff Mahoney <>
Subject: [PATCH] reiserfs: use generic_file_open for open() checks
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/6/20/332

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1
 The other common disk-based file systems (I checked ext[23], xfs, jfs)
 check to ensure that opens of files > 2 GB fail unless O_LARGEFILE
 is specified. They check via generic_file_open or their own open routine.
 ReiserFS doesn't have an f_op->open defined, and as such, it's possible to
 open files > 2 GB without O_LARGEFILE.
 This patch adds the f_op->open member to conform with the expected
 behavior.
Signed-off-by: Jeff Mahoney <jeffm@suse.com>
- --
 fs/reiserfs/file.c |    1 +
 1 file changed, 1 insertion(+)
diff -ruNpX dontdiff linux-2.6.17-rc5.orig/fs/reiserfs/file.c linux-2.6.17-rc5.reiser/fs/reiserfs/file.c
- --- linux-2.6.17-rc5.orig/fs/reiserfs/file.c	2006-06-05 10:37:26.000000000 -0400
+++ linux-2.6.17-rc5.reiser/fs/reiserfs/file.c	2006-06-07 10:09:24.000000000 -0400
@@ -1571,6 +1571,7 @@ const struct file_operations reiserfs_fi
 	.write = reiserfs_file_write,
 	.ioctl = reiserfs_ioctl,
 	.mmap = generic_file_mmap,
+	.open = generic_file_open,
 	.release = reiserfs_file_release,
 	.fsync = reiserfs_sync_file,
 	.sendfile = generic_file_sendfile,
- -- 
Jeff Mahoney
SUSE Labs
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.2 (GNU/Linux)
Comment: Using GnuPG with SUSE - 
http://enigmail.mozdev.org
iD8DBQFEmD2JLPWxlyuTD7IRAgAEAJ4mdjOTfjYnxkerzBvERvOaDubQOQCfcQRK
IWtRqpF+mkhZfbjtnkGxvPA=
=/8oU
-----END PGP SIGNATURE-----
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/