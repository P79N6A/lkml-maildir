Date: Tue, 27 Sep 2005 16:16:12 -0700
From: Rohit Seth <>
Subject: Re: 2.6.14-rc2-mm1
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/9/27/277

On Tue, 2005-09-27 at 15:49 -0700, Martin J. Bligh wrote:
> > 
> > Thinking of initiating this drain operation after the swapper daemon is
> > woken up.  hopefully that will allow other possible pages to be put back
> > on freelist and reduce the possible thrash of pages between freemem pool
> > and pcps.
> 
> OK, but waking up kswapd doesn't indicate a low memory condition.
> It's standard procedure .... we'll have to wake it up whenever we dip
> below the high watermarks. Perhaps before dropping into direct reclaim
> would be more appropriate?
> 
Agreed.  That is a better place.
> >> >> Could you elaborate on what the benefits were from this change in the
> >> >> first place? Some page colouring thing on ia64? It seems to have way more
> >> >> downside than upside to me.
> >> > 
> >> > The original change was to try to allocate a higher order page to
> >> > service a batch size bulk request.  This was with the hope that better
> >> > physical contiguity will spread the data better across big caches.
> >> 
> >> OK ... but it has an impact on fragmentation. How much benefit are you
> >> getting?
> > 
> > Benefit is in terms of reduced performance variation (and expected
> > throughput) of certain workloads from run to run on the same kernel. 
> 
> Mmmm. how much are you talking about in terms of throughput, and on what
> platforms? all previous attempts to measure page colouring seemed to 
> indicate it did nothing at all - maybe some specific types of h/w are
> more susceptible?
> 
In terms of percentages, between 10-15% variation.  Nothing out of
regular about the platforms.  Do you remember what workloads were run in
the previous attempts to see if there is any coloring.  I agree that
with 2.6.x based kernel, there is better handle on the variation (as
compared to 2.4).  And the best results of 2.6 matches the best results
of any coloring patch. 
-rohit
> 
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/