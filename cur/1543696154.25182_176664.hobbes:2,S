Date: Wed, 5 Nov 2003 20:41:58 +0100 (MET)
From: Bartlomiej Zolnierkiewicz <>
Subject: Re: IDE disk information changed from 2.4 to 2.6
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/11/5/117

On Wed, 5 Nov 2003, Flavio Bruno Leitner wrote:
> On Wed, Nov 05, 2003 at 06:29:07PM +0100, Bartlomiej Zolnierkiewicz wrote:
> > On Wed, 5 Nov 2003, Flavio Bruno Leitner wrote:
> > > Using 2.4:
> > > hda: 12594960 sectors (6449 MB) w/2048KiB Cache, CHS=784/255/63, UDMA (33)
> > >
> > > Using 2.6:
> > > hda: 12594960 sectors (6449 MB) w/2048KiB Cache, CHS=13328/15/63, UDMA (33)
>
> The line with CHS=784/255/63 is LBA and CHS=13328/15/63 is NORMAL.
>
> Where kernel check to see if is LBA or NORMAL? BIOS? Which line is correct?
Nowhere, kernel uses LBA whenever possible.
In 2.6.x it doesn't even read BIOS info (which is wrong IMO, it should
do this but only as last resort - if partition can't be mounted).
Difference in CHS translation should matter only if you have some old DOS
partitions created using CHS information.  Then you can force geometry
using boot parameter "hd?=".  Unfortunately I've seen recently bugreport
when 2.4.20 (?) works and 2.6.x fails even with forced geometry.
--bartlomiej
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/