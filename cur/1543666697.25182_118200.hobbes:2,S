Date: 18 Mar 2003 21:54:44 +0100
From: Martin Josefsson <>
Subject: Re: eepro100+NAPI failure
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/3/18/132

On Tue, 2003-03-18 at 21:27, Vladimir B. Savkin wrote:
> Hi!
> 
> I'm planning to deploy Intel-based fast ethernet NICs on a busy
> router so I decided to try NAPI.
> To test NAPI performance, I've blasted a stream of short packets 
> from another host using pktgen. The bad thing is that receiving host
> stopped responding to packets immediately. The effect is 100%
> reproducable, eventually it comes back though, black-out can last
> from a second to several minutes. Here is what I was able to catch
> after 'ethtool -s eth0 msglvl 0xfff':
I saw the same problem when I tested it a while back, didn't have time
to investigate so my routers are running without NAPI right now :(
> Can anyone help me to make NAPI work? Does anyone even use NAPI
> with eepro100, I guess not many people since the patch is pretty old
> and I could not find it ported to 2.4.21-pre.
I havn't heard of anyone using it. I've understood that the recieve path
in the eepro100 chip can be quite fragile and has to be treated right or
it'll hang... maybe the NAPI patch changes things too much...
Anyway, please let me know if you manage to get it working
-- 
/Martin
Never argue with an idiot. They drag you down to their level, then beat you with experience.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/