Date: Thu, 01 Jul 1999 23:10:38 +0100
From: David Woodhouse <>
Subject: Re: Standard for module delivery
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/7/1/167

> Even if binary rpms are banned, I can't seem to make a working *src* rpm
> with a driver because of the following problems:
>
>    1) Compiler parameters have to be guessed. If there were an includeable
>       make header file that sets kernel mode compile options that would
>       be great. I support Intel and alpha ('cause that's what I have)
>       and need to guess different compiler flags for each.
You can do this quite nicely with:
	MYDIR=`pwd`
	cd /usr/src/linux
	make SUBDIRS=$MYDIR modules
This also allows you to include the current config options.
>    2) Where do I install the module? The "make modules_install" of the
>       kernel source uses one convention, the redhat kernels use another,
>       I'm afraid to ask what the other distributions do. Can't we just
>       pick a place and use that?
Do they? I thought the Red Hat kernel just changed the EXTRAVERSION in the
top-level Makefile so that the kernel version was something like '2.2.5-15' -
then used the same directory as modules_install would use.
Certainly, you should be able to standardise on /lib/modules/`uname -r`/ 
because that's what the user-space modutils use. Of course, you have to beware 
of compiling for a different kernel version to the one you're currently 
running, but generally if that's the case you have a fairly capable admin 
anyway, so it's not too much of a problem.
----                                 ----                                 ----
David Woodhouse        David.Woodhouse@mvhi.com       Office: (+44) 1223 810302
 Project Leader,     Process Information Systems      Mobile: (+44) 976 658355
    Axiom (Cambridge) Ltd., Swaffham Bulbeck, Cambridge, CB5 0NA, UK.
             finger dwmw2@ferret.lmh.ox.ac.uk for PGP key.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/