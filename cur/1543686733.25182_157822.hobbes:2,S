Date: Fri, 15 Aug 2003 19:05:17 -0400
From: Yaoping Ruan <>
Subject: kernel hangs up - possible sendfile() epoll() bug?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/8/15/247

Hi,
Recently we updated a user space web server to use the sendfile() and
epoll() interface, and tried to measure the performance with SpecWeb99
benchmark. As the load increases, e.g a SpecWeb99's target score of 600
connection, the kernel sometimes hangs up without any logging
information, and the only way left is to push the reset button to
reboot.
We also made similar updates to use sendfile() and kevent() on FreeBSD
and achieved a score of 1000 connections. Thus the possibility of
application bug is low (also it is a user space server). Before the
sendfile() and epoll() change, it was also fine but only could get a
SpecWeb99 score of 500.
The kernel we were using was 2.4.21 with the epoll patch applied. Since
the epoll man pages mention the interface is stabilized in 2.5.66, we
also tried 2.5.66 but didn't see anything better. The machine is a PIII
Xeon processor-based Intel server motherboard, with 2 CPU support but
only 1 is used, Maxtor Diamond IDE disk, Promise Ultra DMA 66
controller, and a single Netgear GA621 gigabit ethernet network adapter.
Is this possibly caused by the newly introduced interfaces?
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/