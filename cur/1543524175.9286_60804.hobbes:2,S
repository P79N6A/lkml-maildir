Date: Mon, 31 Jan 2000 12:04:33 +0100
From: Thomas Skj|nhaug <>
Subject: Another oops in 2.2.14
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/1/31/46

Hi,
I am experiencing some strange oopses in the kernel
after upgrading three x-terminal servers from 2.0.36 to 2.2.14.
* System information:
Dual Pentium II, running RedHat 6.0.
The kernel is patched with the patch: patch-2.2.14-nfsv2
Both kernel and the patch is fetched from the CVS repository.
Primary task for this machine (and the others that oopsed) is
serving about 20 other machines whith X. Due to heavy use from
at least 20 users (and more counting remote users) we also had
to increase the NR_TASKS in /usr/src/linux/include/tasks.h to 2048.
Another trick we had to apply was
       print 8192 > /proc/sys/fs/file-max
       print 32768 > /proc/sys/fs/inode-max 
In 2.0.X kernels we applied 
       print 3072 > /proc/sys/kernel/file-max
       print 9216 > /proc/sys/kernel/inode-max 
This is probably not connected to the oops, and maybe something I
have not grasped, but what has happend to the 2.2.x kernels 
demanding so many open files/inodes compared to the old 2.0.x?
Now we are running 2.2.10 and 2.2.13 kernels due to the problems
we have with 2.2.14. We really would like to use 2.2.14 due
to the many fixes useful to us, so I hope that someone will take
a look at this. 
Here goes:
** oops
<snip; from logserver>
[-- MARK -- Thu Jan 20 10:53:10 2000]
NFS: cache locked for 00:20/11860
[-- MARK -- Thu Jan 20 10:54:10 2000]
[-- MARK -- Thu Jan 20 10:55:10 2000]
[-- MARK -- Thu Jan 20 10:56:10 2000]
[-- MARK -- Thu Jan 20 10:57:10 2000]
[-- MARK -- Thu Jan 20 10:58:10 2000]
[-- MARK -- Thu Jan 20 10:59:10 2000]
[-- MARK -- Thu Jan 20 11:00:10 2000]
[-- MARK -- Thu Jan 20 11:01:10 2000]
[-- MARK -- Thu Jan 20 11:02:10 2000]
[-- MARK -- Thu Jan 20 11:03:11 2000]
[-- MARK -- Thu Jan 20 11:04:11 2000]
[-- MARK -- Thu Jan 20 11:05:11 2000]
[-- MARK -- Thu Jan 20 11:06:11 2000]
[-- MARK -- Thu Jan 20 11:07:11 2000]
Unable to handle kernel NULL pointer dereference at virtual address 00000003
current->tss.cr3 = 00101000, %cr3 = 00101000
*pde = 00000000
Oops: 0000
CPU:    1
EIP:    0010:[<80131188>]
EFLAGS: 00010206
eax: 00007306   ebx: 00000003   ecx: 0000003d   edx: 0000002d
esi: 8024d800   edi: 003c3c28   ebp: fc370001   esp: 80239eb0
ds: 0018   es: 0018   ss: 0018
Process swapper (pid: 0, process nr: 0, stackpage=80239000)
Stack: 91263660 0000001d 80168bd7 9f71a5ec 00000002 991fb480 8015bc5f 985c3bc0
       8015c5f2 991fb480 00000000 003c3c28 a00945d4 991fb480 9f36a340 04000001 
       00000004 0000000b 000000e0 80171f7c 00000d42 00000002 91def081 70171540
Call Trace: [<80168bd7>] [<8015bc5f>] [<8015c5f2>] [<a00945d4>] [<80171f7c>] [<8
0164802>] [<8010b552>] 
       [<8010fe8a>] [<8010b6c3>] [<8010a198>] [<801079a1>] [<80106000>] [<8010
000>] [<801001b1>] 
Code: 81 3b 01 46 00 00 74 10 68 a0 ac 1e 80 e8 0a 4d fe ff 83 c4 
Aiee, killing interrupt handler
Kernel panic: Attempted to kill the idle task!
In swapper task - not syncing
[-- MARK -- Thu Jan 20 11:08:11 2000]
*** KSYMOOPS
:-) ksymoops oops
Options used: -V (default)
              -o /lib/modules/2.2.13/ (default)
              -k /proc/ksyms (default)
              -l /proc/modules (default)
              -m /usr/src/linux/System.map (default)
              -c 1 (default)
Unable to handle kernel NULL pointer dereference at virtual address 00000003
current->tss.cr3 = 00101000, %cr3 = 00101000
*pde = 00000000
Oops: 0000
CPU:    1
EIP:    0010:[<80131188>]
EFLAGS: 00010206
eax: 00007306   ebx: 00000003   ecx: 0000003d   edx: 0000002d
esi: 8024d800   edi: 003c3c28   ebp: fc370001   esp: 80239eb0
ds: 0018   es: 0018   ss: 0018
Process swapper (pid: 0, process nr: 0, stackpage=80239000)
Stack: 91263660 0000001d 80168bd7 9f71a5ec 00000002 991fb480 8015bc5f 985c3bc0
       8015c5f2 991fb480 00000000 003c3c28 a00945d4 991fb480 9f36a340 04000001 
       00000004 0000000b 000000e0 80171f7c 00000d42 00000002 91def081 70171540
Call Trace: [<80168bd7>] [<8015bc5f>] [<8015c5f2>] [<a00945d4>] [<80171f7c>] [<8
0164802>] [<8010b552>] 
       [<8010fe8a>] [<8010b6c3>] [<8010a198>] [<801079a1>] [<80106000>] [<8010
Code: 81 3b 01 46 00 00 74 10 68 a0 ac 1e 80 e8 0a 4d fe ff 83 c4 
Warning: trailing garbage ignored on Code: line
  Text: 'Code: 81 3b 01 46 00 00 74 10 68 a0 ac 1e 80 e8 0a 4d fe ff 83 c4 '
  Garbage: ' '
>>EIP: 80131188 <load_elf_interp+150/2c0>
Trace: 80168bd7 <arp_req_set+57/190>
Trace: 8015bc5f <ip_build_xmit_slow+67/3d4>
Trace: 8015c5f2 <ip_send_reply+2e/c8>
Trace: a00945d4 <_end+1fe27ad0/3fdaa548>
Trace: 80171f7c <rpc_do_call+64/114>
Code:  80131188 <load_elf_interp+150/2c0>      00000000 <_EIP>: <===
Code:  80131188 <load_elf_interp+150/2c0>         0:    81 3b 01 46 00 00       cmpl   $0x4601,(%ebx) <===
Code:  8013118e <load_elf_interp+156/2c0>         6:    74 10                   je      801311a0 <load_elf_interp+168/2c0>
Code:  80131190 <load_elf_interp+158/2c0>         8:    68 a0 ac 1e 80          pushl  $0x801eaca0
Code:  80131195 <load_elf_interp+15d/2c0>         d:    e8 0a 4d fe ff          call    80115ea4 <session_of_pgrp+8/40>
Code:  8013119a <load_elf_interp+162/2c0>        12:    83 c4 00                addl   $0x0,%esp
Aiee, killing interrupt handler
Kernel panic: Attempted to kill the idle task!
In swapper task - not syncing
**** ??
The machine freezes after this and has to be booted whith the button...
I have some more oopses as well, if needed.
Any ideas anyone?
Regards,
Thomas Skj√∏nhaug
Department of Mathematics, UiO
www.math.uio.no/~thomassk
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/