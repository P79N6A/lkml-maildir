Date: Tue, 25 Sep 2007 14:20:43 +0200
From: "Rafael J. Wysocki" <>
Subject: Re: 2.6.23-rc4-mm1 and -rc6-mm1: boot failure on HP nx6325, related to clockevents
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/9/25/147

Thomas,
On Tuesday, 25 September 2007 11:30, Thomas Gleixner wrote:
> Rafael,
> 
> On Tue, 2007-09-25 at 10:07 +0200, Thomas Gleixner wrote:
> > On Tue, 2007-09-25 at 10:14 +0400, Mikhail Kshevetskiy wrote:
> > > Hello Thomas, Rafael
> > > 
> > > > We know, that
> > > > - disabling local apic timers work
> > > 
> > > As i can see from the log, you are booting on computer with dualcore AMD
> > > processor. Do you have C1E feature enabled? 
That's possible, how to check?
> > > i386 kernel disable lapic on dualcore AMD with C1E support (see 
> > > 
http://lkml.org/lkml/2007/3/29/199
). x86_64 kernel do not have this
> > > patch still (it's required for tickless kernel only).
> > 
> > Well it is required for non tickless mode as well.
> > 
> > >  As result, if
> > > you run x86_64 kernel with hrt patch on such computer, the system
> > > will stall during boot on lapic timer calibration.
> > 
> > Thanks for the reminder. I have a look into this.
> 
> Can you please boot mainline and provide the output of:
> 
> # cat /proc/interrupts; sleep 10; cat /proc/interrupts
albercik:~ # cat /proc/interrupts; sleep 10; cat /proc/interrupts
           CPU0       CPU1
  0:    1159492          0  local-APIC-edge      timer
  1:       6892       1692   IO-APIC-edge      i8042
  8:          0          0   IO-APIC-edge      rtc
 12:        156        110   IO-APIC-edge      i8042
 14:      29613      11409   IO-APIC-edge      ide0
 16:      23365      21934   IO-APIC-fasteoi   sata_sil, HDA Intel
 18:        196      88386   IO-APIC-fasteoi   bcm43xx
 19:     744874     279433   IO-APIC-fasteoi   ohci_hcd:usb1, ohci_hcd:usb2, ehci_hcd:usb3
 20:          2          4   IO-APIC-fasteoi   ohci1394, yenta, tifm_7xx1, sdhci:slot0
 21:       1408        592   IO-APIC-fasteoi   acpi
NMI:          0          0   Non-maskable interrupts
LOC:          0    1158220   Local interrupts
RES:     260520     295387   Rescheduling interrupts
CAL:        419        652   function call interrupts
TLB:        864        541   TLB shootdowns
TRM:          0          0   Thermal event interrupts
THR:          0          0   Threshold APIC interrupts
SPU:          0          0   Spurious interrupts
ERR:         13
           CPU0       CPU1
  0:    1161996          0  local-APIC-edge      timer
  1:       6893       1692   IO-APIC-edge      i8042
  8:          0          0   IO-APIC-edge      rtc
 12:        156        110   IO-APIC-edge      i8042
 14:      29703      11409   IO-APIC-edge      ide0
 16:      23393      21934   IO-APIC-fasteoi   sata_sil, HDA Intel
 18:        196      88490   IO-APIC-fasteoi   bcm43xx
 19:     747268     279433   IO-APIC-fasteoi   ohci_hcd:usb1, ohci_hcd:usb2, ehci_hcd:usb3
 20:          2          4   IO-APIC-fasteoi   ohci1394, yenta, tifm_7xx1, sdhci:slot0
 21:       1412        592   IO-APIC-fasteoi   acpi
NMI:          0          0   Non-maskable interrupts
LOC:          0    1160723   Local interrupts
RES:     260567     295433   Rescheduling interrupts
CAL:        419        652   function call interrupts
TLB:        866        543   TLB shootdowns
TRM:          0          0   Thermal event interrupts
THR:          0          0   Threshold APIC interrupts
SPU:          0          0   Spurious interrupts
ERR:         13
albercik:~ #
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/