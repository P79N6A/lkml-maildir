Date: Fri, 16 Feb 2007 09:26:48 +0100
From: Sam Ravnborg <>
Subject: Re: [patch 2.6.20-git] remove modpost false warnings on ARM
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/2/16/66

On Thu, Feb 15, 2007 at 07:10:45PM -0800, David Brownell wrote:
> This patch stops "modpost" from issuing erroneous modpost warnings on ARM
> builds, which it's been doing since since maybe last summer.  A canonical
> example would be driver method table entries:
> 
>   WARNING: <path> - Section mismatch: reference to .exit.text:<name>_remove
> 	from .data after '$d' (at offset 0x4)
> 
> That "$d" symbol is generated by tools conformant with ARM ABI specs; in
> this case it's a symbol **in the middle of** a "<name>_driver" struct.
> 
> The erroneous warnings appear to be issued because "modpost" whitelists
> references from "<name>_driver" data into init and exit sections ... but
> doesn't know should also include those "$d" mapping symbols, which are
> not otherwise associated with "<name>_driver" symbols.
> 
> This patch prevents the modpost symbol lookup code from ever returning
> those mapping symbols, so it will return a whitelisted symbol instead.
> Then things work as expected.
> 
> Now to revert various code-bloating "fixes" that got merged because of
> this modpost bug....
> 
> Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
Acked-by: Sam Ravnborg <sam@ravnborg.org>
And if I get my dev machine operational before akpm merges this I
will take care of having it merged.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/