Date: Tue, 2 Oct 2007 17:20:03 -0500
From: Matt Mackall <>
Subject: pgd_none_or_clear_bad strangeness?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/10/2/330

In lib/pagewalk.c, I've been using the various forms of
{pgd,pud,pmd}_none_or_clear_bad while walking page tables as that
seemed the canonical way to do things. Lately (eg with -rc7-mm1),
these have been triggering messages like "bad pgd 0x01e3" and causing
nasty double faults. It appears this is actually triggered at the pmd
level (mm/memory.c:116), though it appears to produce the wrong
message.
Has something changed here? I'm pretty sure this used to work! Is this
not a kosher thing to do? Does it make any sense I'd repeatedly run
into a bad pmd in the middle of bash's page table right after boot?
The simple _none variant seems to work, but I worry that it's papering
over a real problem.
-- 
Mathematics is the supreme nostalgia of our time.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/