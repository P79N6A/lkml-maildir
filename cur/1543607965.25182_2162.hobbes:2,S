Date: Tue, 30 Oct 2001 18:28:10 -0700
From: Andreas Dilger <>
Subject: Re: [PATCH] init/main.c/root_dev_names - another one #ifdef
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/10/30/210

On Oct 30, 2001  16:12 -0800, Linus Torvalds wrote:
> On Wed, 31 Oct 2001, Alan Cox wrote:
> > It took that out deliberately a few months back. The ifdefs in fact
> > break stuff
> >
> > Firstly the array is __init so is discarded on boot
> 
> I think that array really is broken. We should get the name association
> from the array that "register_blkdev()" maintains, I'm sure. That way
> random stupid driver X doesn't need to touch a common init/main.c file,
> which I find personally offensive.
I have a patch from way back (not mine) which allows the name to be
generated by the block device driver code.  Let me know if you are
interested.  This also fixes the ugly "lvma" "lvmb" devices that are
in /proc/partitions.
Cheers, Andreas
--
Andreas Dilger
http://sourceforge.net/projects/ext2resize/
http://www-mddsp.enel.ucalgary.ca/People/adilger/
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/