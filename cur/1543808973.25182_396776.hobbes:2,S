Date: Tue, 14 Feb 2006 09:34:24 +1100
From: Benjamin Herrenschmidt <>
Subject: Re: 2.6.16-rc2 powerpc timestamp skew
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/2/13/419

> > Can you strace vs. ltrace and see if the gettimeofday or clock_gettime
> > syscalls are ever called ?
> 
>            | strace        | ltrace
> -----------+---------------+------------------------------------
> 2.6.15     |               |
> date       | clock_gettime | clock_gettime -> SYS_clock_gettime,
>            |               |   localtime, strftime
> touch      | utimes        | futimes -> SYS_utimes
>            |               |
> 2.6.16-rc2 |               |
> date       | clock_gettime | clock_gettime -> SYS_clock_gettime,
>            |               |   localtime, strftime
> touch      | utimes        | futimes -> SYS_utimes
> 
> [clock_gettime(CLOCK_REALTIME, {1139826613, 157402000}) = 0]
> 
> > I wonder if you have a glibc new enough to
> > use the vDSO to obtain the time or if it's using the syscall... The vDSO
> > on ppc32 is very new.
> 
> It's glibc 2.3.5 (Debian libc6 2.3.5-13).
Ok, does not using NTP fixes it ?
Ben.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/