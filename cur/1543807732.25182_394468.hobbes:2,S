Date: Tue, 7 Feb 2006 13:34:50 +0100
From: Olaf Hering <>
Subject: Re: [PATCH] new tty buffering locking fix
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/2/7/100

 On Fri, Feb 03, Linux Kernel Mailing List wrote:
> [PATCH] new tty buffering locking fix
> 
> Change locking in the new tty buffering facility from using tty->read_lock,
> which is currently ignored by drivers and thus ineffective.  New locking
> uses a new tty buffering specific lock enforced centrally in the tty
> buffering code.
> 
> Two drivers (esp and cyclades) are updated to use the tty buffering
> functions instead of accessing tty buffering internals directly.  This is
> required for the new locking to work.
> 
> Minor checks for NULL buffers added to
> tty_prepare_flip_string/tty_prepare_flip_string_flags
> 
> Signed-off-by: Paul Fulghum <paulkf@microgate.com>
> Cc: Alan Cox <alan@lxorguk.ukuu.org.uk>
> Signed-off-by: Andrew Morton <akpm@osdl.org>
> Signed-off-by: Linus Torvalds <torvalds@osdl.org>
> 
>  drivers/char/cyclades.c  |    6 +--
>  drivers/char/esp.c       |    4 +-
>  drivers/char/tty_io.c    |   77 ++++++++++++++++++++++++++++++-----------------
>  include/linux/kbd_kern.h |    5 +++
>  include/linux/tty.h      |    2 +
>  include/linux/tty_flip.h |    7 +++-
>  6 files changed, 68 insertions(+), 33 deletions(-)
This patch breaks the hvc console, no input is accepted, even with
init=/bin/sash? Any idea what this driver needs to do now?
I wonder if it worked ok on -mm.
-- 
short story of a lazy sysadmin:
 alias appserv=wotan
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/