Date: Wed, 6 Oct 1999 16:09:09 +0200
From: Jens Axboe <>
Subject: Re: Re: 2.2.13pre15+Unified IDE+SMP exploded
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/10/6/60

On Wed, Oct 06 1999, thx@rivalnet.de wrote:
> ***************
> *** 1539,1552 ****
>   	}
>   	spin_unlock_irqrestore(&io_request_lock, flags);
>   	do_hwgroup_request(hwgroup);
> - 	save_flags(flags);	/* all CPUs; overkill? */
> - 	cli();			/* all CPUs; overkill? */
>   	if (action == ide_wait)
>   	{
>   		down(&sem);	/* wait for it to be serviced */
>   		rq->sem = NULL;
>   	}
> - 	restore_flags(flags);	/* all CPUs; overkill? */
>   	return rq->errors ? -EIO : 0;	/* return -EIO if errors */
>   }
> 
You definately need to make sure that the above part of the
patch applied, i.e. the current ide.c does _not_ contain
the "all CPUs;" comments.
-- 
*  Jens Axboe <axboe@image.dk>
*  Linux CD-ROM Maintainer
*  
http://www.kernel.dk
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/