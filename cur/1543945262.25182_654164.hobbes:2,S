Date: Fri, 15 Feb 2008 18:25:34 +0500
From: "Shahbaz Khan" <>
Subject: TPM-IMA Setup Problems
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/2/15/142

For the past 2 days I am trying to configure IMA on Dell Optiplex 745
with Broadcom TPM. The kernel version is 2.6.20-rc4-mm1 + all the
tpm3.2.0 patches from IBM IMA webpage. I've been through so much that
can't remember all but currently I can't find any braodcom tpm driver
modules and tpm_tis seems to be able to get to the TPM chip. I am
getting the following message on
[       ]# init_tpm /etc/bootkeys:
[       ]Unexpected error code 35
I am also encounterring IRQ conflicts of TPM with sometimes rtc, hdc,
fd0. It looks like this in /proc/interrupts:
           CPU0       CPU1
  0:     124995     105404   IO-APIC-edge      timer
  1:          2          0   IO-APIC-edge      i8042
  7:          1          0   IO-APIC-edge      parport0
  8:          3          0   IO-APIC-edge      rtc
  9:          0          0   IO-APIC-fasteoi   acpi
 11:	      3		 0   		                tpm0	
 12:          7          0   IO-APIC-edge      i8042
 14:      27408       1694   IO-APIC-edge      ide0
 16:         99          0   IO-APIC-fasteoi   uhci_hcd:usb1, HDA Intel
 17:          0          0   IO-APIC-fasteoi   uhci_hcd:usb2, uhci_hcd:usb4
 18:          2          0   IO-APIC-fasteoi   uhci_hcd:usb3, ehci_hcd:usb7
 19:        799        587   IO-APIC-fasteoi   uhci_hcd:usb5
 20:          0          0   IO-APIC-fasteoi   ehci_hcd:usb6
220:          4          0   PCI-MSI-edge      eth0
NMI:          0          0
LOC:     230430     230419
ERR:          0
MIS:          0
Any suggestions?