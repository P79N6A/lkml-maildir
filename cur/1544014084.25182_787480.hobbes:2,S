Date: Tue, 6 Jan 2009 12:32:47 +0100
From: "Frédéric Weisbecker" <>
Subject: Re: [PATCH 2/5] ftrace: infrastructure for supporting binary record
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2009/1/6/111

2009/1/5 Lai Jiangshan <laijs@cn.fujitsu.com>:
>
>>>
>>> Just for curiosity. Why do you need such a binary tracing?
>>> Do you need it because a string output is really too slow for your needs?
>
> Hi, Frederic Weisbecker,
>
> We have
> 1) lots of kinds events source(FUNCTION trace, TRACE_CTX, tracepoint, markers ...)
> 2) a generic and mature events log buffer - trace/ringbuffer.c
> 3) a generic and mature trace framework - trace/trace.c trace_ouput.c
>
> But we don't have a generic events log format, we record different
> events with different record formats: TRACE_FN, TRACE_CTX, TRACE_GRAPH_RET,
> TRACE_SPECIAL, ... We use different struct for recording different
> formats.
I understand better now. So it acts like an optimized ftrace_printk.
Instead of inserting formatted ftrace_printk entries on the ring buffer,
we insert the binary datas with the format and let the tracer decide
what to do with this,
providing a full generic entry transport....
That looks a good idea.