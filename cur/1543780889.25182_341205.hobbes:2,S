Date: Thu, 11 Aug 2005 18:56:51 +0200
From: Jean Delvare <>
Subject: Re: I2C block reads with i2c-viapro: testers wanted
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/8/11/195

Hi Hinko,
> > Could you try running "i2cdump 0 0x50" and "i2cdump 0 0x50 i" (with
> > the patch still applied), and compare both the outputs and the time
> > each command takes? You should see similar outputs, but the second
> > command should be magnitudes faster. This would confirm that the I2C
> > block mode works as intended on your VT8233 chip.
> 
> Hmm, not really. Here it takes 6 seconds for the first test nad about
> 5 seconds  for the second test (I just read the WARNING - need to
> substract 5s from the  results...).
With a recent version of i2cdump (2.8.8 or later), you can use the -y
flag, which will skip this delay. This is very convenient for timing
tests.
That being said...
> noa xtrm # time i2cdump 0 0x50
> (...)
> real	0m6.033s
> (...)
> noa xtrm # time i2cdump 0 0x50 i
> (...)
> real	0m5.174s
This is 1.033s down to 0.174s. This is just great, I2C block reads work
and allow faster dumps, as expected.
> while simple cat takes a lot less time:
> noa xtrm # time dd if=/sys/bus/i2c/devices/0-0050/eeprom bs=4
This goes through the eeprom driver, which has an internal cache, so the
results are not suitable for timing comparisons.
Thanks a lot for the testing again :)
-- 
Jean Delvare
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/