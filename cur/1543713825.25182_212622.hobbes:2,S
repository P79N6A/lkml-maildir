Date: Wed, 07 Apr 2004 15:42:26 -0400
From: Jeff Garzik <>
Subject: Re: cciss updates for 2.6.6xxx [1/2]
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/4/7/193

Miller, Mike (OS Dev) wrote:
> I like the idea of capping max commands based on the number of arrays. One problem is that we can add or remove a logical drive during runtime. How would Linux handle us reshuffling the max commands for each queue?
What is the maximum number of logical drives?
If you always assume the maximum number of logical drives are configured 
(let's say 32), then you can calculate based on that:
	1024 / 32 logical drives == 32 commands per logical drive
It certainly gets a bit more complex, if you truly want to handle 
something other than "hardcode max # of logical drives"...  I would 
suggest going to a round-robin anti-starvation approach at that point, 
like what I do in carmel.c.  The Carmel hardware has a single hardware 
queue for all of its 8 SATA ports, which is similar to cciss having 1024 
commands for all of its logical drives (if I understand things correctly).
	Jeff
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/