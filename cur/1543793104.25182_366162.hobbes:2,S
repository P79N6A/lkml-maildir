Date: Fri, 11 Nov 2005 12:09:50 -0800 (PST)
From: "David S. Miller" <>
Subject: Re: sparc64: Oops in pci_alloc_consistent with cingergyT2
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/11/11/214

From: Guido Guenther <agx@sigxcpu.org>
Date: Fri, 11 Nov 2005 16:33:55 +0100
> This is due to the fact that cinergyt2_alloc_stream_urbs calls
> pci_alloc_consistent with a NULL argument for the pci dev (it's a USB
> device):
> 
> cinergyt2->streambuf = pci_alloc_consistent(NULL,
>                                               STREAM_URB_COUNT*STREAM_BUF_SIZE,
>                                               &cinergyt2->streambuf_dmahandle);
> 
> dma_alloc_coherent doesn't seem to be implemented on sparc64, what would
> be the right way to tackle this?
It should be using "usb_buffer_alloc()" or similar.
No USB driver should be calling the DMA mapping interfaces
directly.
Where is this driver?  I can't find it in the 2.6.x sources.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/