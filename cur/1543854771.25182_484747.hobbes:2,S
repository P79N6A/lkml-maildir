Date: Tue, 21 Nov 2006 17:50:46 -0800
From: Chris Wright <>
Subject: Re: [stable] [PATCH 46/61] fix Intel RNG detection
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/11/21/315

* Jan Beulich (jbeulich@novell.com) wrote:
> >>> Chris Wright <chrisw@sous-sol.org> 21.11.06 03:21 >>>
> >Hmm, I wonder if the report is valid?  Jan's patch would have the correct
> >side effect of disabling false positives (for RNG identification).
> >Be good to check that it actually used to work.
> 
> Indeed, that is quite significant to know here.
It does appear to work w/out the patch.  I've asked for a small bit
of diagnostics (below), perhaps you've got something you'd rather see?
I expect this to be a 24C0 LPC Bridge.
diff --git a/drivers/char/hw_random/intel-rng.c b/drivers/char/hw_random/intel-rng.c
index 8efbc9c..c655f57 100644
--- a/drivers/char/hw_random/intel-rng.c
+++ b/drivers/char/hw_random/intel-rng.c
@@ -304,6 +304,10 @@ #ifdef CONFIG_SMP
 	set_mb(waitflag, 0);
 #endif
 
+	printk(PFX "pci vendor:device %hx:%hx fwh_dec_en1 %x bios_cntl_val %x "
+	       "mfc %x dvc %x\n", dev->vendor, dev->device,
+	       fwh_dec_en1_val, bios_cntl_val, mfc, dvc);
+
 	iounmap(mem);
 	pci_dev_put(dev);
 
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/