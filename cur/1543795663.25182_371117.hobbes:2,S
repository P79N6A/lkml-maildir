Date: Mon, 28 Nov 2005 10:15:39 -0600 (CST)
From: Kumar Gala <>
Subject: [DRIVER MODEL] Allow overlapping resources for platform devices
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/11/28/72

There are cases in which a device's memory mapped registers overlap
with another device's memory mapped registers.  On several PowerPC
devices this occurs for the MDIO bus, whose registers tended to overlap
with one of the ethernet controllers.
By switching from request_resource to insert_resource we can register
the MDIO bus as a proper platform device and not hack around how we
handle its memory mapped registers.
Signed-off-by: Kumar Gala <galak@kernel.crashing.org>
---
commit 32fa7cc4cb3ef6aed2d4ef06befa6686f6b7568a
tree 6f932a12c9663a9fc4705f31039c52159f14c59e
parent a20eafe40e6ae9d3db96918c9512c577b9a5814c
author Kumar Gala <galak@kernel.crashing.org> Mon, 28 Nov 2005 10:14:09 -0600
committer Kumar Gala <galak@kernel.crashing.org> Mon, 28 Nov 2005 10:14:09 -0600
 drivers/base/platform.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)
diff --git a/drivers/base/platform.c b/drivers/base/platform.c
index 8827daf..1091af1 100644
--- a/drivers/base/platform.c
+++ b/drivers/base/platform.c
@@ -257,7 +257,7 @@ int platform_device_add(struct platform_
 				p = &ioport_resource;
 		}
 
-		if (p && request_resource(p, r)) {
+		if (p && insert_resource(p, r)) {
 			printk(KERN_ERR
 			       "%s: failed to claim resource %d\n",
 			       pdev->dev.bus_id, i);
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/