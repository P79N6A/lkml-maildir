Date: Mon, 26 Nov 2001 20:41:52 +0100
From: Flavio Stanchina <>
Subject: Re: [PATCH] Remove needless BKL from release functions
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/11/26/176

On Monday 26 November 2001 18:46, David C. Hansen wrote:
> In the patch, in the open function, you do this:
>     if (handler)
>         new_fops = fops_get(handler->fops);
>
> But, the fops_get() #define already cheecks to make sure handler isn't
> null: #define fops_get(fops) \
>         (((fops) && (fops)->owner)      \
>                 ? ( try_inc_mod_count((fops)->owner) ? (fops) : NULL ) \
>                 : (fops))
Look closer, it doesn't check 'handler' (it couldn't).
-- 
Ciao,
    Flavio Stanchina
    Trento - Italy
"The best defense against logic is ignorance."
http://spazioweb.inwind.it/fstanchina/
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/