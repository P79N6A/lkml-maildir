Date: Tue, 28 Nov 2006 08:09:50 -0600
From: Eric Sandeen <>
Subject: Re: [PATCH/RFC] pass dio_complete proper offset from finished_one_bio
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/11/28/87

Eric Sandeen wrote:
> We saw problems w/ xfs doing AIO+DIO into a sparse file.
> 
https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=217098
> 
> It seemed that xfs was doing "extent conversion" at the wrong offsets, so
> written regions came up as unwritten (zeros) and stale data was exposed
> in the region after the write.  Thanks to Peter Backes for the very
> nice testcase.
> 
> This also broke xen with blktap over xfs.
Hrmph.  Zach's changes in -mm magically made this go away... I was about 
to submit a proper patch against -mm but it seem to be not needed.
So, now digging around to see why that is, and what exactly "fixed" things.
-Eric
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/