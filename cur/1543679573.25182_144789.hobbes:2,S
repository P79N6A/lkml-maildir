Date: Wed, 2 Jul 2003 11:59:54 +0100
From: Joe Thornber <>
Subject: Re: [dm-devel] Re: [RFC 3/3] dm: v4 ioctl interface
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/7/2/65

If dm_add_wait_queue() fails we need to set TASK_RUNNING.
--- diff/drivers/md/dm-ioctl-v4.c	2003-07-02 11:32:42.000000000 +0100
+++ source/drivers/md/dm-ioctl-v4.c	2003-07-02 11:32:23.000000000 +0100
@@ -719,6 +719,7 @@
 		schedule();
 		dm_remove_wait_queue(md, &wq);
 	}
+ 	set_current_state(TASK_RUNNING);
 
 	/*
 	 * The userland program is going to want to know what
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/