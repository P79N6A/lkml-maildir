Date: Mon, 15 May 2006 23:08:49 +0100
From: Alan Cox <>
Subject: Re: Updated libata PATA patch
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/5/15/366

On Mer, 2006-05-10 at 12:39 -0400, Kevin Radloff wrote:
> > I'll do some more digging, but putting printks into ata_qc_issue_prot to
> > see where it explodes is the next step I suspect.
> 
> Ah, I see.. I'll be waiting. :)
Much scratching of heads and tracing later it looks like a libata-core
bug rather than pata_pcmcia. Glad this blew up as its a nasty little bug
if I follow it right
Anyway try this patch as well
--- drivers/scsi/libata-core.c~	2006-05-15 22:38:21.282153688 +0100
+++ drivers/scsi/libata-core.c	2006-05-15 22:38:21.283153536 +0100
@@ -1853,7 +1853,8 @@
 		goto err_out;
 
 	/* step 3: set host DMA timings */
-	ata_host_set_dma(ap);
+	if(dev->dma_mode)
+        	ata_host_set_dma(ap);
 
 	/* step 4: update devices' xfer mode */
 	for (i = 0; i < ATA_MAX_DEVICES; i++) {
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/