Date: Fri, 9 Jan 2009 13:09:22 +0300
From: "Alexey Zaytsev" <>
Subject: Re: next-20090107: WARNING: at kernel/sched.c:4435 sub_preempt_count
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2009/1/9/79

One more instance of 
http://marc.info/?l=linux-kernel&m=123134586202636&w=2
Added Ingo Molnar to CC.
On Fri, Jan 9, 2009 at 02:17, Laurent Riffard <laurent.riffard@free.fr> wrote:
> hello,
>
> I'm getting this warning in dmesg since 2.6.28-next-20081229:
>
> WARNING: at kernel/sched.c:4435 sub_preempt_count+0x7e/0x8f()
> Hardware name: M68SM-S2L
> Modules linked in:
> Pid: 0, comm: swapper Not tainted 2.6.28-next-20090107-09542-gdbcea38 #71
> Call Trace:
>  [<c0224f35>] warn_slowpath+0x80/0xb6
>  [<c024140d>] lock_acquire+0x76/0x7e
>  [<c03be817>] _spin_unlock_irq+0x20/0x51
>  [<c0240278>] trace_hardirqs_on_caller+0xf8/0x12e
>  [<c03be81f>] _spin_unlock_irq+0x28/0x51
>  [<c03be83c>] _spin_unlock_irq+0x45/0x51
>  [<c022c865>] run_timer_softirq+0x178/0x180
>  [<c022211c>] run_rebalance_domains+0x27/0x8f
>  [<c023ef58>] trace_hardirqs_off_caller+0x2c/0x87
>  [<c0220788>] sub_preempt_count+0x7e/0x8f
>  <IRQ>  [<c024ef74>] handle_level_irq+0x0/0x9d
>  [<c022950e>] irq_exit+0x43/0x87
>  [<c0204d9e>] do_IRQ+0xec/0x102
>  [<c02035ec>] common_interrupt+0x2c/0x34
>  [<c02168dc>] native_safe_halt+0x2/0x3
>  [<c04aadd3>] check_bugs+0x9f/0xd8
>  [<c04a47e8>] start_kernel+0x2f9/0x306
> ---[ end trace 4eaa2a86a8e2da22 ]---
>
> In previous releases (2.6.27-next-20081020 to 2.6.28-rc7-next-20081203), I was getting "WARNING: at kernel/sched.c:4354 do_softirq" with more or less the same stack trace:
Rinning -next and not reporting bugs sounds a bit counter-productive. ;(
> Checking 'hlt' instruction... <4>------------[ cut here ]------------
> WARNING: at kernel/sched.c:4332 do_softirq+0x61/0xb3()
> Modules linked in:
> Pid: 0, comm: swapper Not tainted 2.6.28-rc2-next-20081027-02513-g5362c2b #46
> Call Trace:
>  [<c02234b8>] warn_on_slowpath+0x40/0x59
>  [<c023e07b>] trace_hardirqs_on_caller+0xe3/0x12d
>  [<c03b295a>] _spin_unlock_irq+0x3c/0x48
>  [<c0220deb>] run_rebalance_domains+0x29/0x96
>  [<c022793f>] __do_softirq+0xc5/0xf9
>  [<c022787a>] __do_softirq+0x0/0xf9
>  <IRQ>  [<c024bf72>] handle_level_irq+0x0/0x9f
>  [<c02279b6>] irq_exit+0x43/0x8b
>  [<c0205eec>] do_IRQ+0xef/0x107
>  [<c0204628>] common_interrupt+0x28/0x30
>  [<c04cfadf>] check_bugs+0x91/0xbb
>  [<c04c782c>] start_kernel+0x308/0x318
> ---[ end trace 4eaa2a86a8e2da22 ]---
> OK.
>
>
> Full dmesg and .config for 2.6.28-next-20090107 are attached (actually this is linux-next tree + reiser4 patches, but I verified that this WARNING does appear without reiser4 patches in 2.6.28-next-20081230).
>