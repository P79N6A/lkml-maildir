Date: Mon, 12 Jul 2004 11:03:09 -0300
From: Marcelo Tosatti <>
Subject: Re: parport - interrupt sharing possible?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/7/12/190

On Sun, Jul 11, 2004 at 10:51:19PM -0500, Ryan Underwood wrote:
> 
> Hi,
> 
> Does anyone know if the generic parport interrupt handler is okay (or not)
> for sharing interrupts?  The reason I ask is that I have a PCI parallel
> card with two ports on it.  Without a IRQ sharing capability, it is not
> possible for both of them to operate in interrupt-driven mode.  I tested
> a quick hack to enable IRQ sharing:
> 
http://home.icequake.net/~nemesis/parport.diff
> 
> and it seems to work okay with both ports in use.  I'm hoping someone
> more knowledgeable on the parallel port subject (Tim Waugh?) can shed
> some light on whether this is acceptable or not.  The interrupt handler
> eventually ends up in parport_ieee1284_interrupt which really doesn't do
> much besides wake up sleepers.
> 
> Thanks!
> 
> PS: Heh, the power just went out and back on as I wrote this.  Giving thanks
> for having multiple UPS units around!
Hi Ryan,
Quoting Tim Waugh:
> 2) Allows PCI parallel port to share an IRQ if possible.  In limited testing
> this seems to be ok, but maybe the interrupt handler was not written for
> sharing.  Someone else will need to ok this.
This seems dangerous to me.  There are some issues with IRQs in
parport, although I think they are known and there is a fix around:
http://lists.infradead.org/pipermail/linux-parport/2004-March/000048.html
Incidentally, I have asked if there is anyone with more time than me
who would like to maintain the paride/parport bits, but no-one has
stepped forward.  I see that Al Viro has fixed a lot of problems while
I've been busy with other things.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/