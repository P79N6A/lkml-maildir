Date: Fri, 21 Feb 2003 15:04:40 -0500
From: Jan Harkes <>
Subject: Re: 2.4 iget5_locked port attempt to 2.4
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/2/21/170

On Fri, Feb 21, 2003 at 10:03:41PM +0300, Oleg Drokin wrote:
> Ok, here is my simple attempt. I just took a patch from early 2.5
> days by jaharkes@cs.cmu.edu ;)
Nice to see that it is being considered for a backport to 2.4, that
would allow me to get rid of the lock around the call to iget4.
Why didn't you take the final version that was sent to Linus? It was
against 2.5.14, but should be pretty close for 2.4.x. You can find
it at 
http://delft.aura.cs.cmu.edu/icreate/,
 both broken up in small
steps, and as one big patch.
As far as I know, the only change/improvement that went into 2.5 at a
later time was the ilookup code.
> Coda changes are not tested, but look correct.
Those Coda changes are not correct as we really need to use iget4 (or
in the new code, iget5_locked). That patch looks like it won't even
compile, coda_inocmp is simply removed while it is still used by the two
calls to iget4 that you didn't replace with iget5_locked. Let alone
adding the inode initializer. I also don't know why you are adding an
unused local variable to coda_replace_fid.
Jan
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/