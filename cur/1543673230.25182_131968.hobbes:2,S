Date: Mon, 12 May 2003 10:48:25 -0400
From: Joe Korty <>
Subject: [PATCH][RFC] 2.4.21-rc1 fix to drivers/ide/Config.in
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/5/12/112

Alan,
 On April 1 Marcello accepted a patch to ide/drivers/Config.in that breaks
'make xconfig'.  The error is on line 46, where a new dep_tristate
variable was defined without the conditional value that dep_tristate
requires.  Apparently 'make config', 'make oldconfig', etc are able to
handle this syntax error somehow but 'make xconfig' cannot.
The attached patch is my guess as to what the conditional should be.
Could you verify that it is correct and let Marcelo know?  Several such
patches have been floated by others to Marcelo in the past but none have
been accepted, possibly because he wants your blessing on changes to
your code made by others.
Thanks,
Joe
--- drivers/ide/Config.in.orig	2003-05-12 10:15:07.000000000 -0400
+++ drivers/ide/Config.in	2003-05-12 10:23:30.000000000 -0400
@@ -43,7 +43,7 @@
 	    define_bool CONFIG_BLK_DEV_IDEDMA $CONFIG_BLK_DEV_IDEDMA_PCI
 	    dep_bool '      ATA Work(s) In Progress (EXPERIMENTAL)' CONFIG_IDEDMA_PCI_WIP $CONFIG_BLK_DEV_IDEDMA_PCI $CONFIG_EXPERIMENTAL
 #	    dep_bool '      Good-Bad DMA Model-Firmware (WIP)' CONFIG_IDEDMA_NEW_DRIVE_LISTINGS $CONFIG_IDEDMA_PCI_WIP
-            dep_tristate '    Pacific Digital ADMA-100 basic support' CONFIG_BLK_DEV_ADMA100
+            dep_tristate '    Pacific Digital ADMA-100 basic support' CONFIG_BLK_DEV_ADMA100 $CONFIG_BLK_DEV_IDEDMA_PCI
 	    dep_tristate '    AEC62XX chipset support' CONFIG_BLK_DEV_AEC62XX $CONFIG_BLK_DEV_IDEDMA_PCI
 	    dep_tristate '    ALI M15x3 chipset support' CONFIG_BLK_DEV_ALI15X3 $CONFIG_BLK_DEV_IDEDMA_PCI
 	    dep_mbool    '      ALI M15x3 WDC support (DANGEROUS)' CONFIG_WDC_ALI15X3 $CONFIG_BLK_DEV_ALI15X3
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/