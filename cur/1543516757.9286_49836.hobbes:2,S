Date: Mon, 22 Nov 1999 09:08:32 -0600
From: Bret Indrelee <>
Subject: RE: Hot PCI bus plugging
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/11/22/54

ak@ebox.de [mailto:ak@ebox.de] wrote:
> Is it possible to use a PCI or ISA card, that is inserted while
> the system is running, without rebooting? 
ISA: I don't know.
PCI: Not with the current architechure.
> It looks to me that at system startup time the PCI bus is scanned and
> any device that isn't recognized at that stage cannot be used anytime
> later. A module that is loaded for the specific card just doesn't find
> it, although it's definetly there. So I think the PCI-card driver asks
> the kernel about the available cards in some way, but the kernel only
> knows about the devices it sees at startup.
This is the case.
In addition, the PCI drivers tend to be removeable modules that only do
device detection when they are added to the system. Even if you were to fix
the configuration problem, you would want to change the PCI driver interface
so that the kernel could tell the driver when a new device matching it's
properties has been added to the system.
I believe the PCMCIA interface already has a way to do this, but I'm not
familiar with the particulars of that interface.
> In case of an ISA card it should be possible when using modules,
> because the ISA bus is not scanned in general at startup. The
> individual driver is completly responsible for detecting the card. Or
> am I wrong?
I would guess that the ISA drivers also only detect the devices when the
module is loaded.
> You may wonder, why somebody would want such a feature, because it's
> really not a very good idea to insert a PCI card into a running
> desktop system.
> 
> It's very useful in the combination of a laptop and a docking
> station. Most of them allow you to plug and unplug the laptop to and
> from the docking station while the laptop is up and running. 
This is one good example of why it may be wanted. There are also other
busses that are PCI derivatives (such as Compact PCI) that allow hot
swapping.
-Bret
-------------------------------------------------------------
SBS Technologies, Connectivity Products
      ... solutions for real-time connectivity
Bret Indrelee, Engineer
SBS Technologies, Inc., Connectivity Products
1284 Corporate Center Drive, St. Paul MN 55121
Direct:  (651) 905-4731
Main:  (651) 905-4700    Fax:  (651) 905-4701
E-mail: bindrelee@sbs-cp.com  
http://www.sbs.com
-------------------------------------------------------------
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/