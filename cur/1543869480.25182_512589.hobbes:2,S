Date: Sat, 24 Feb 2007 11:46:38 +0100
From: Vojtech Pavlik <>
Subject: Re: [KJ][RFC][PATCH] BIT macro cleanup
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/2/24/29

On Fri, Feb 23, 2007 at 01:44:41PM +0530, Milind Choudhary wrote:
> Hi all
> 	working towards the cleanup of BIT macro,
> I've added one to <linux/bitops.h> & cleaned some obvious users.
> 
> include/linux/input.h also has a BIT macro
> which does a wrap
> so currently i've done something like
> 
> +#undef BIT
> #define BIT(nr)        (1UL << ((nr) % BITS_PER_LONG))
Since the previous definition of
#define BIT(nr)		(1UL << (nr))
gives the same results as the above one for all reasonable usage
scenarios (you don't want to supply nr larger than BITS_PER_LONG),
why not just use the modulo version everywhere?
The only problem I see is that the compiler would not warn where nr IS
too large.
-- 
Vojtech Pavlik
Director SuSE Labs
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/