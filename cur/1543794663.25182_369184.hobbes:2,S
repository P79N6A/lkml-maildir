Date: Mon, 21 Nov 2005 22:35:27 +0100
From: Ingo Molnar <>
Subject: Re: [PATCH 4/5] Centralise NO_IRQ definition
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/11/21/268

* Paul Mackerras <paulus@samba.org> wrote:
> Ingo Molnar writes:
> 
> > is there any architecture where irq 0 is a legitimate setting that could 
> > occur in drivers, and which would make NO_IRQ define of 0 non-practical?  
> 
> Yes, G5 powermacs have the SATA controller on irq 0.  So if we can't 
> use irq 0, I can't get to my hard disk. :) Other powermacs also use 
> irq 0 for various things, as do embedded PPC machines.
oh well [*]. Then it's gotta be the !dev->irq.valid thing i guess. OTOH 
that has some disadvantages too: any normal access to dev->irq.nr will 
mean implicit 0xffffffff (or 0xffffffffffffffff) masking generated by 
the compiler. Also, unless there's some compiler trick, tons of drivers 
will be affected - because dev->irq isnt valid anymore. A quick grep 
suggests 5381 lines of code affected, spread out in 917 files. Quite 
impractical.  So we are back to square one and Matthew's patch(es).
	Ingo
[*] is there any weird architecture that hardcodes IRQ -1 to some
    device? ;-)
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/