Date: Thu, 24 Apr 2003 10:05:19 +0100
From: Jamie Lokier <>
Subject: Re: Fix SWSUSP & !SWAP
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/4/24/82

Pavel Machek wrote:
> Swapfile does not work, because even readonly mount wants to replay
> logs, and that'd be disk corruption.
I don't understand.  During suspend, you just need a list of blocks to
write to from the swapfile.  You can get that list before starting the
actual suspend, so that writing doesn't imply any filesystem activity.
When you're resuming, you just need a list of which disk blocks to
resume from.  Can't that list be stored in a few blocks of the
swapfile itself, with the only critical parameter being the first
block number to resume from?
(A bit like LILO has a map file containing the list of blocks which
contain the kernel to boot.)
-- Jamie
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/