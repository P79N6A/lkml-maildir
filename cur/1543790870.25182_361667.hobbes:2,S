Date: Sun, 30 Oct 2005 20:40:03 -0500
From: Bob Picco <>
Subject: Re: x86_64: 2.6.14 with NUMA panics at boot
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/10/30/218

Added Matt to cc:
Andi Kleen wrote:	[Sun Oct 30 2005, 09:12:17PM EST]
> On Monday 31 October 2005 01:17, Bob Picco wrote:
> 
> > This is a slightly modified patch I used on x86_64 for EXTREME testing. The
> > original 2.6.13-rc1-mhp1 patch didn't apply cleanly against 2.6.14. It will
> > apply with this untested patch.  The patch needs to have arch_sparse_init
> > which is only active for SPARSEMEM. This patch was just for testing EXTREME
> > on x86_64 NUMA and needs review.
> >
> > I think the bootmem allocator is being used before initialized.  This
> > wouldn't have happened before SPARSEMEM_EXTREME became the default.
> >
> > If you feel my analysis is correct, I'll generate a cleaner patch and
> > test on my 4 way.
> 
> Ok the question is - why did nobody submit this patch in time? When
> sparse was merged I assumed folks would actually test and maintain
> it. But that doesn't seem to be the case? Somewhat surprising.
Well I did post it on lhms mailing list.  However it's incomplete because
it doesn't address !NUMA. I used it specifically for looking at performance
regression as a result of SPARSEMEM_EXTREME which we were analyzing at that
time. It wasn't intended for inclusion.  Also EXTREME came later in the
initial SPARSEMEM submission to address very sparse arch platforms. So I think 
it slipped by us; at least me.
> 
> I personally don't care much about sparsemem right now because it doesn't have 
> any advantage and if it's unmaintained would consider to mark it 
> CONFIG_BROKEN. That's simply because we can't have highly experimental 
> CONFIGs in a production kernel that unsuspecting users can just set and break 
> their configuration.
> 
> Dave, is there someone in charge for sparsemem on x86-64?  
Well I think Matt (matthew.e.tolentino@intel.com) is maintaining but could be 
wrong. I'll pick it up should Matt not have the time or no other volunteer 
come forward.
> 
> -Andi
bob
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/