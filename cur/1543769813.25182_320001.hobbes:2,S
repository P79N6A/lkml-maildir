Date: Mon, 23 May 2005 00:27:36 -0500
From: Dmitry Torokhov <>
Subject: Re: Problem report: 2.6.12-rc4 ps2 keyboard being misdetected as /dev/input/mouse0
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/5/23/7

On Wednesday 18 May 2005 17:17, Kris Karas wrote:
> Dmitry Torokhov wrote:
> 
> >On 5/18/05, Pavel Machek <pavel@ucw.cz> wrote:
> > 
> >
> >>>Although... maybe the patch below is not too ugly.
> >>> 
> >>>
> >>Looks pretty much okay to me...
> >> 
> >>
> >
> >Does it work for you? If so I'll send it to Andrew to simmer in -mm.
> > 
> >
> 
> FWIW, I've tested the patch and it seems to be working just fine.  Thanks!
> 
> There is one exception, though it does not appear to be related to the 
> mouse code or the patch, as far as I can tell.   Pressing or releasing 
> the right-windows key sends a blank event to GPM (as reported by 'mev') 
> causing the mouse cursor to reappear.  If I use "showkey -s" to tell me 
> the scancode, nothing happens.  The key is evidently bound in the kernel 
> table, else I'd see the obligatory PRINTK encouraging me to bind it.  So 
> something is intercepting the key and sending it to GPM.   
> Experimentally, it appears as if the key press is delivered only if it 
> has not been pressed for roughly 3 seconds (256 Jiffies???).
> 
I wonder if the this patch from Vojtech will cure that problem...
-- 
Dmitry
===================================================================
From: Vojtech Pavlik <vojtech@suse.cz>
Input: Fix fast scrolling scancodes in atkbd.c
Signed-off-by: Vojtech Pavlik <vojtech@suse.cz>
--
 atkbd.c |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)
Index: dtor/drivers/input/keyboard/atkbd.c
===================================================================
--- dtor.orig/drivers/input/keyboard/atkbd.c
+++ dtor/drivers/input/keyboard/atkbd.c
@@ -171,9 +171,9 @@ static struct {
 	unsigned char set2;
 } atkbd_scroll_keys[] = {
 	{ ATKBD_SCR_1,     0xc5 },
-	{ ATKBD_SCR_2,     0xa9 },
-	{ ATKBD_SCR_4,     0xb6 },
-	{ ATKBD_SCR_8,     0xa7 },
+	{ ATKBD_SCR_2,     0x9d },
+	{ ATKBD_SCR_4,     0xa4 },
+	{ ATKBD_SCR_8,     0x9b },
 	{ ATKBD_SCR_CLICK, 0xe0 },
 	{ ATKBD_SCR_LEFT,  0xcb },
 	{ ATKBD_SCR_RIGHT, 0xd2 },
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/