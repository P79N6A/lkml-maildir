Date: Thu, 07 Feb 2008 12:53:43 -0800
From: "H. Peter Anvin" <>
Subject: Re: 2.6.24 says "serial8250: too much work for irq4" a lot.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/2/7/464

Rob Landley wrote:
> 
> Specifically, qemu isn't paravirtualized, it's fully virtualized.  The same 
> kernel can run on real hardware just fine.  (Sort of the point of the 
> project...)
> 
> I can yank the warning for the kernels I build (or set PASS_LIMIT to 9999999), 
> but I'd rather not carry any more patches than I can avoid...
> 
The right thing to do is to add virtual FIFO exhaustion into the Qemu 
device model.  It really isn't a valid emulation of a UART that it has 
an infinite FIFO behind it that can flood the interrupt handler for an 
arbitrary number of fetches.
I was going to give a technical description of how to do it here, but 
then I realized I might as well just write it up as a patch.  Stay tuned.
	-hpa