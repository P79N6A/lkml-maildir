Date: Fri, 11 Apr 2003 14:49:42 -0700
From: Andrew Morton <>
Subject: Re: [Lockmeter 2.5] BKL with 51ms hold time, prove me wrong
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/4/11/227

Hanna Linder <hannal@us.ibm.com> wrote:
>
> 
> Sure enough. I ported lockmeter to 2.5.67-mm1 and ran the same rmap-test
> and lo and behold all the ext3 issues went away. However, the one remaining
> long hold time moved to the top (unmap_vmas):
Ah, but the unmap_vmas lock was not kernel_flag, was it?  It'll be
page_table_lock.
That's OK I think.  The only time this is likely to bite anyone is if you
have a threaded application in which one thread it doing a massive munmap()
while another one is handling a pagefault, running mmap(), etc.  And given
that _establishing_ that large mapping in the first place takes tons of CPU,
the relative loss from the long hold time is small.
Famous last words.
> 
> Here is the port of lockmeter to the 2.5.67-mm1 kernel. If you would consider
> putting it in your tree that would be great and I would work on porting the
> rest of the architectures. 
> 
> 
http://prdownloads.sourceforge.net/lse/lockmeter1.5-2.5.67-mm1.patch?download
OK, that's pretty unintrusive.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/