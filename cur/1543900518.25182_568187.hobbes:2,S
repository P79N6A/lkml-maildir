Date: Thu, 12 Jul 2007 11:53:38 +1000
From: Michael Ellerman <>
Subject: Re: [PATCH 05/34] PCI: Use a weak symbol for the empty version of pcibios_add_platform_entries()
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/7/11/678

On Wed, 2007-07-11 at 18:54 -0600, Matthew Wilcox wrote:
> On Wed, Jul 11, 2007 at 05:39:23PM -0700, Greg KH wrote:
> > > This seems like a regression.  We go from having an empty inline
> > > function that gets optimised away to 0 to having a function call to a
> > > trivial function.  And on any architecture that *does* define this,
> > > (unless I misunderstand the GCC manual), we still include the weak
> > > definition, thus wasting space.
Regression is a little strong don't you think. I agree it wastes some
space, 1 instruction for an empty function?
> > Yeah, but it can be a big pain to add it to every architecture when only
> > 1 or two need it, which is why I see people using the week symbol stuff
> > more and more, right?  This is just following that trend.
> 
> But it's already there.  Deleting it now is pointless.
It's not pointless, the following patch changes the prototype. So rather
than update the prototype on every architecture, all of which don't use
it (bar one) I thought it was much cleaner to get rid of it.
But I really don't mind, I just wanted to fix the damn warning.
cheers
-- 
Michael Ellerman
OzLabs, IBM Australia Development Lab
wwweb: 
http://michael.ellerman.id.au
phone: +61 2 6212 1183 (tie line 70 21183)
We do not inherit the earth from our ancestors,
we borrow it from our children. - S.M.A.R.T Person
[unhandled content-type:application/pgp-signature]