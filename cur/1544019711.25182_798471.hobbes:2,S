Date: Thu, 29 Jan 2009 02:46:23 -0800
From: Jeremy Fitzhardinge <>
Subject: Re: [PATCH 2 of 7] x86/pvops: add a paravirt_ident functions to allow special patching
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2009/1/29/105

Rusty Russell wrote:
> I think I prefer:
>
> /* make_pte etc and pgd_val etc are identity functions. */
> #define paravirt_native_page_op \
> 	(sizeof(pte_t) == sizeof(u64) ? paravirt_ident_64 : paravirt_ident_32)
>
> Then use that everywhere rather than these defines?
> 
Hm, also I don't think that will work because paravirt_ident_32|64 
return different types.  The compiler might promote paravirt_ident_32 to 
returning a 64-bit number, which would be a bit disastrous. 
    J