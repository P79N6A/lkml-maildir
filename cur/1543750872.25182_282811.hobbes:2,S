Date: Tue, 4 Jan 2005 09:48:10 +0100
From: Jakob Oestergaard <>
Subject: Re: XFS: inode with st_mode == 0
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/1/4/28

On Wed, Dec 22, 2004 at 06:23:44PM +0000, Christoph Hellwig wrote:
...
> I have a better patch than the one I gave you (attached below).  If you
> send me a mail with steps to reproduce your remaining problems I'll put
> this very high on my TODO list after christmas.  Btw, any chance you could
> try XFS CVS (which is at 2.6.9) + the patch below instead of plain 2.6.9,
> there have been various other fixes in the last months.
I have been on XFS CVS + the patch you sent for five days now.
Summary:
 XFS and related dcache problems (seen in ext3 too) with files that get
created as symlinks to themselves or undeletable directories, or just
get plain wrong permissions or ownership:   These problems seem to have
gone away completely.   Very very nice!
 I still get NFS stale handle problems (the weird ones that can be
worked around at times by running a ls -l on the server-side).
 I talked Anders (as@cohaesio.com) into testing the same kernel on
another system he's running, where his main prolem were the stale
handles. He too now only sees the weird stale handle problems.
So, it looks like the current 2.6 status on file serving is:
 *) Can be done with XFS+NFS+SMP iff running a SGI kernel
 *) Will see weird NFS stale handle problems no matter which kernel
    is used
Which is a lot better than the previous "2.6 will eat your files and
make whatever remains owned by guest" situation   :)
Good work!
(Any suggestions on the knfsd issue with stale handles?)
-- 
 / jakob
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/