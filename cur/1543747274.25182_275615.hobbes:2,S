Date: Tue, 30 Nov 2004 08:34:04 -0800
From: David Brownell <>
Subject: Re: [linux-usb-devel] Re: [2.6.10-rc2-mm3] Broken usb2 mass-storage?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/11/30/121

On Monday 29 November 2004 3:20 pm, Greg KH wrote:
> > Then I try to access the disk (via fdisk or mount anything) and I get 
> > the following in dmesg:
> > 
> >   usb 1-2: reset high speed USB device using ehci_hcd and address 4
> >   usb 1-2: scsi_eh_0 timed out on ep0in
> 
> Ick, not good.
Has this device always needed a reset?  The interesting
bits of the log are probably the ones immediatelly preceding
the decision to reset it.  Two possibilities come to mind:
something broke the reset logic (the device is clearly not
working right after the reset) ... or something changed to
make the device go bonkers _before_ the reset, which seems
a bit more likely with my current lack-of-facts.  (Especially
if rc2 works and mm3 doesn't.)
- Dave
> ...
> 
> >   usb 1-2: device descriptor read/64, error -110
> >   usb 1-2: scsi_eh_0 timed out on ep0in
> >   usb 1-2: device descriptor read/64, error -110
> >   usb 1-2: reset high speed USB device using ehci_hcd and address 4
> >   usb 1-2: scsi_eh_0 timed out on ep0in
> >   usb 1-2: device descriptor read/64, error -110
> > 
> > Then it stalls a while and this shows up:
> > 
> >   scsi: Device offlined - not ready after error recovery: host 0 
> > channel 0 id 0 lun 0
> >   usb 1-2: USB disconnect, address 4
> >   scsi0 (0:0): rejecting I/O to offline device
> >   scsi0 (0:0): rejecting I/O to offline device
> >   usb-storage: device scan complete
> >   usb 1-2: new high speed USB device using ehci_hcd and address 5
> >   usb 1-2: khubd timed out on ep0in
> >   usb 1-2: device descriptor read/64, error -110
> > 
> > And repeats this.. I think you get the point ;)
> > The process trying to access the disk hangs.
> > Note: the drive works flawless under windows and has worked fine under 
> > linux during various stages of the 2.5 and early 2.6 kernels :)
> > 
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/