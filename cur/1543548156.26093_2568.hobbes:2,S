Date: Fri, 08 Sep 2000 14:12:09 +0100
From: David Howells <>
Subject: Re: [RFC] Wine speedup through kernel module
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/9/8/33

torvalds@transmeta.com (Linus Torvalds) wrote:
> >I've done an implementation of some of the Win32 "system calls" in a kernel
> >module in an attempt to speed up Wine.
> Hmm.. I have this feeling that it would be much nicer to just implement
> the NT system calls directly.
Yes, perhaps, but as far as I know, the MS DDK doesn't describe the usage of
most of these calls, and there's precious little information elsewhere.
> And we've already had the vm86 mode and the BIOS trap stuff speedups for
> DOSEMU for a long time.
>
> It looks like if you want to do this, it would be better to just try to
> do it outright, and have the same kind of "emulate the ones we know
> about and care about performance" in the kernel that we already have
> with the vm86 mode emulation.
Would you also be willing to accept a couple of kernel extensions to help
support this:
 (1) A death-knell callback list to be placed in the task structure. Each
     function so listed (if any) would be invoked upon exit, signal-death or
     execve.
 (2) Some sort of support for (dynamically allocated) system calls implemented
     in modules.
Of course, some sort of file change notification system wouldn't go amiss
either.
> I wouldn't be adverse to supporting Wine better - as long as it's fairly
> cleanly separated. This doesn't look too bad.
Cheers. Yes, it's my intention to keep it as a module, at least for now. I
might need the odd extra symbol or two exporting from the kernel though.
David
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/