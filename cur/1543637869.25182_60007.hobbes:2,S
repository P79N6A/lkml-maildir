Date: Mon, 29 Jul 2002 11:49:47 -0700
From: Dave Hansen <>
Subject: [PATCH] fix e1000 after irq craziness
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/7/29/184

I just duplicated the method used in:
drivers/net/tulip/de2104x.c
Compiles for me.
-- 
Dave Hansen
haveblue@us.ibm.com
diff -ur linux-2.5.29-clean/drivers/net/e1000/e1000_main.c linux-2.5.29/drivers/net/e1000/e1000_main.c
--- linux-2.5.29-clean/drivers/net/e1000/e1000_main.c	Fri Jul 26 19:58:36 2002
+++ linux-2.5.29/drivers/net/e1000/e1000_main.c	Mon Jul 29 11:43:18 2002
@@ -1699,7 +1699,7 @@
 {
 	atomic_inc(&adapter->irq_sem);
 	E1000_WRITE_REG(&adapter->hw, IMC, ~0);
-	synchronize_irq();
+	synchronize_irq(adapter->netdev->irq);
 }
 
 /**