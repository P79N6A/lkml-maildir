Date: Wed, 26 Dec 2007 17:10:59 +0900
From: Tejun Heo <>
Subject: Re: 2.6.24-rc6 and earlier: "host bus error" after STR
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/12/26/76

Hello,
Jeff Garzik wrote:
>> ata3.00: limiting speed to UDMA/33:PIO4
>> ata3.00: exception Emask 0x0 Sact 0x0 Serr 0x0 action 0x2
>> ata3.00: BMDMA stat 0x6
>> ata3.00: cmd ca/00:08:47:66:6e/00:00:00:00:00/eb tag 0 dma 4096 out
>> 	 res 51/84:08:47:66:6e/00:00:00:00:00/eb Emask 0x30 (host bus error)
>> ata3.00: status: { DRDY ERR }
>> ata3.00: error: { ICRC ABRT }
>> ata3: soft resetting link
> 
> host bus == PCI
> 
> So, your PCI bus is crapping itself in a major way.
> 
> One thing to try might be "libata.noacpi=1"
Yeah, BMDMA stat 0x6 is INTR and ERR which means the controller tried to
perform DMA write but couldn't pull data from main memory.  Maybe PCI
bus isn't setup properly after resuming.  Comparing the result of 'lspci
-xxx' before and after resume and see what changed can be helpful.
Thanks.
-- 
tejun