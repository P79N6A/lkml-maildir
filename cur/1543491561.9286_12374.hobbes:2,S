Date: Thu, 01 Apr 1999 00:35:27 +1000
From:  Stephen.Rothwell@canb ...
Subject: Re: APM battery status
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/3/31/93

Hi,
Olivier Chapuis <chapuis.olivier@wanadoo.fr> writes:
> 
> When compiling the kernel 2.2.5 I've got the following warning
> (using ggc-2.7.2.3):
> 
> 	apm.c: In function `apm_get_info':
> 	apm.c:1187: warning: unused variable `nbat'
> 	apm.c: At top level:
> 	apm.c:607: warning: `apm_get_battery_status' defined but not used 
These are just part of a work in progress and may be ignored (or
commented out if they annoy you).
> I am interested to know more about the apm errors because 
> my battery status is _alwyas_  "100%" (AC on/off-line works well).
We all need a battery like that :-)
> However I suspect an hardware problem: since apm works well with
> 2.2.x with x<4 and at some point with 2.2.4, I think, do not work
> any more for the % (I reboot on a 2.2.1, same problem).
> More precisely, I have remarked the problem after the installation 
> of Gnome and Kde and trying the "kdeapm" and "gnomeapm".
> Using this kind of soft can do damage ? (as xapm they can
> interfere with my PS/2 touch pad). 
I cannot think of any reason for this.  Is the % still wrong if you are
not running kdeapm, gnomeapm, or xapm?  How does xapm interfere with
the PS/2 touch pad? What sort of laptop is this?
> My configuration of the apm:
> 
> CONFIG_APM=y
> # CONFIG_APM_IGNORE_USER_SUSPEND is not set
> CONFIG_APM_DO_ENABLE=y
> CONFIG_APM_CPU_IDLE=y
> # CONFIG_APM_DISPLAY_BLANK is not set
> CONFIG_APM_POWER_OFF=y
> CONFIG_APM_IGNORE_MULTIPLE_SUSPEND=y
> CONFIG_APM_IGNORE_SUSPEND_BOUNCE=y
> # CONFIG_APM_RTC_IS_GMT is not set
> CONFIG_APM_ALLOW_INTS=y
Have any of these changed (from when you did not get a problem)?
Can you try with CONFIG_APM_ALLOW_INTS not set?
Cheers,
Stephen
--
Stephen Rothwell                    Stephen.Rothwell@canb.auug.org.au
http://www.canb.auug.org.au/~sfr/
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/