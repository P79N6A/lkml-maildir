Date: Wed, 15 Jun 2005 10:21:45 +0200
From: "Serge Noiraud" <>
Subject: RT :  nvidia driver and perhaps others
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/6/15/34

Hi,
	I try to compile the nvidia driver for my RT kernel.
It does not work anymore.
I have a great question : Do we need to modify all drivers ?
Isn't there a better way to avoid these modifications ?
for example to have the external fonction the same than non RT kernel.
and have an internal link to the new one or something like that ?
I will have the same problem with PVIC drivers I think.
These drivers are proprietary, so I can't modify them.
I think we should change :
1 - local_irq_* to raw_local_irq_*  : is it always true ?
    I done this and now the driver loads OK
    #  define NV_CLI()                      local_irq_disable()
    #  define NV_SAVE_FLAGS(eflags)         local_save_flags(eflags)
    #  define NV_RESTORE_FLAGS(eflags)      local_irq_restore(eflags)
2 - spin_* to raw_spin_*  ?
   #define nv_init_lock(lock)  spin_lock_init(&lock)
   #define nv_lock(lock)       spin_lock(&lock)
   #define nv_unlock(lock)     spin_unlock(&lock)
   #define nv_lock_irq(lock,flags)    spin_lock_irqsave(&lock,flags)
   #define nv_unlock_irq(lock,flags) spin_unlock_irqrestore(&lock,flags)
and other in two files ... too many modifications.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/