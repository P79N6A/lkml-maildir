Date: Sun, 13 Nov 2005 13:46:20 +0900
From: Junichi Uekawa <>
Subject: Re: [uml-user] 2.6.14.git: user-mode-linux/x86_64 does not build
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/11/12/233

Hi
> > UML does not build from linus's git tree for a while, with the
> > following compilation error.
> 
> Ok, I must start catching up - I have lots of fixes but not yet found the time 
> to re-read and send them. This is one of them.
> 
> > .config is attached later.
> 
> > CONFIG_X86_CMPXCHG=y
> 
> > CONFIG_RWSEM_GENERIC_SPINLOCK=y
> > CONFIG_RWSEM_XCHGADD_ALGORITHM=y
> 
> This is what's causing the error, these options should be mutually exclusive. 
> 
> > CONFIG_64BIT=y
> Arh, this is the problem... I made a mistake for x86_64, and the fix has not 
> yet been sent up. Patch attached.
With your patch it builds now, and somewhat runs, not excercised it enough yet.
A snippet of a log of a functional UML session:
sh-3.00# chroot /home/dancer/i386-chroot/1/ /bin/bash
chroot: cannot run command `/bin/bash': Exec format error
sh-3.00# file /home/dancer/i386-chroot/1/bin/bash
/home/dancer/i386-chroot/1/bin/bash: ELF 32-bit LSB executable, Intel 80386, version 1 (SYSV), for GNU/Linux 2.2.0, dynamically linked (uses shared libs), stripped
sh-3.00# uname -a
Linux (none) 2.6.14-g508862e4 #1 Sun Nov 13 13:30:32 JST 2005 x86_64 GNU/Linux
regards,
	junichi
-- 
dancer@{debian.org,netfort.gr.jp}   Debian Project
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/