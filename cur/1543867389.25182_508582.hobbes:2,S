Date: Wed, 14 Feb 2007 10:11:20 +0100
From: "Martin A. Fink" <>
Subject: SATA-performance part 2
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/2/14/42

Dear all,
now I installed oprofile as suggested, and very interesting things happend:
System: OpenSuSE 10.2 with AHCI on, disk: Solid State Disk (Flash Disk)
Test: Write blocks of 1MB. Do fsync() every 1GB. Measure time for each GB.
before installation of oprofile:
test						OpenSuSE 10.2			FreeBSD 6.2
write to raw device  25GB		26+/-1 MB/s at 4-10% CPU	48+/-0 MB/s at 1% CPU
write to ext3 2GB			39+/-5 MB/s at 10-15% CPU
after installation of oprofile:
test						OpenSuSE 10.2			FreeBSD 6.2
write to raw device  25GB		48+/-0.5 MB/s at 4-10% CPU	49+/-0 MB/s at 1% CPU
write to ext3 (writeback) 2GB	40+/-5 MB/s at 10-15% CPU
after deinstallation of oprofile and only soft reboots (no hardware power off) 
these values STAYED (linux 48 MB/s) !! even for a brand new installation of 
OpenSuSE 10.2 to another partition!
After a hardware power off everything was again like before (26 MB/s).
So now the interesting questions to me are:
1. What is oprofile doing with my system ?? Especially what is been changed 
that remains a reboot ??
2. Buffers: All those that told me, that linux raw devices are totally 
unbuffered and thus are slower than devices with filesystems. Are you sure? 
If yes, where do you think comes this increase of speed (26 to 48) ??
3. Advices using ext3 with writeback option: I do not see an increase of 
performance with that.
Thanks,
Martin
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/