Date: Tue, 26 Sep 2006 22:07:33 -0700
From: Greg KH <>
Subject: Re: Tiny error in printk output for clocksource : a3:<6>Time: acpi_pm clocksource has been installed.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/9/27/24

On Tue, Sep 26, 2006 at 09:56:22PM -0700, Randy Dunlap wrote:
> On Tue, 26 Sep 2006 21:52:35 -0700 Randy Dunlap wrote:
> 
> > On Tue, 26 Sep 2006 21:32:39 -0700 Greg KH wrote:
> > 
> > > On Tue, Sep 26, 2006 at 08:54:15PM -0700, Randy Dunlap wrote:
> > > > On Wed, 27 Sep 2006 02:36:58 +0200 Jesper Juhl wrote:
> > > > 
> > > > > On Wednesday 27 September 2006 02:33, Randy Dunlap wrote:
> > > > > > On Wed, 27 Sep 2006 02:22:18 +0200 Jesper Juhl wrote:
> > > > > > 
> > > > > > > I get this in dmesg with 2.6.18-git6 :
> > > > > > >       a3:<6>Time: acpi_pm clocksource has been installed.
> > > > > > > 
> > > > > > > Looks like some printk() somewhere is not adding \n correctly after
> > > > > > > outputting a message priority or a message priority too much is
> > > > > > > used... I've not investigated where this happens, but just wanted to
> > > > > > > report it.
> > > > > > 
> > > > > > Hi,
> > > > > > How about posting (pasting) some of the message log before that?
> > > > > > 
> > > > > Sure, below is the entire dmesg output from this boot of the box 
> > > > > (including the line above) :
> > > > 
> > > > I suppose that you have CONFIG_PCI_MULTITHREAD_PROBE=y ?
> > > > What happens if you change to to =n ?
> > > > 
> > > > > eth0: VIA Rhine II at 0xff5fec00, 00:50:ba:f2:<6>serio: i8042 AUX port at 0x60,0x64 irq 12
> > > > > serio: i8042 KBD port at 0x60,0x64 irq 1
> > > > > mice: PS/2 mouse device common for all mice
> > > > > EDAC MC: Ver: 2.0.1 Sep 27 2006
> > > > > TCP cubic registered
> > > > > NET: Registered protocol family 1
> > > > > NET: Registered protocol family 17
> > > > > Starting balanced_irq
> > > > > Using IPI Shortcut mode
> > > > > a3:<6>Time: acpi_pm clocksource has been installed.
> > > > > 1d, IRQ 18.
> > > > > eth0: MII PHY found at address 8, status 0x782d advertising 01e1 Link 45e1.
> > > > 
> > > > I'm pretty sure that this is caused by parallel device probing.
> > > > The serio and clocksource messages are interspersed with the
> > > > eth0 (via rhine) info.  Garbled.
> > > > 
> > > > Greg, is this expected?
> > > 
> > > Only if one bit of code doesn't write a full line to the printk()
> > > buffer, yes that could happen.
> > > 
> > > What driver writes "a3:"?  I couldn't find it anywhere in Linus's
> > > current tree.
> > 
> > Nope, that's part of the NIC's MAC address.  It was split up.
> 
> Sorry.  In this case, it was via-rhine.c:
> 
> 	for (i = 0; i < 5; i++)
> 		printk("%2.2x:", dev->dev_addr[i]);
> 	printk("%2.2x, IRQ %d.\n", dev->dev_addr[i], pdev->irq);
> 
> so it does break the printk()s up itself.
Ok, yes, so messed up log messages will happen with the multi-threaded
boot stuff.
sorry,
greg k-h
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/