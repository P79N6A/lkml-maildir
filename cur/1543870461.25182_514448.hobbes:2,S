Date: Thu, 1 Mar 2007 15:51:29 -0800
From: David Brownell <>
Subject: [patch 2.6.21-rc2] gpio_keys driver shouldn't be ARM-specific
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/3/1/383

The gpio_keys driver is wrongly ARM-specific; it can't build on
other platforms with GPIO suport.  This fixes that problem.
Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
---
MERGE NOTE:  this just moves gpio_keys.h; this patch does no GIT magic
 include/asm-arm/hardware/gpio_keys.h |   17 -----------------
 drivers/input/keyboard/gpio_keys.c   |    4 +---
 include/linux/gpio_keys.h            |   17 +++++++++++++++++
 3 files changed, 18 insertions(+), 20 deletions(-)
Index: ap7000/drivers/input/keyboard/gpio_keys.c
===================================================================
--- ap7000.orig/drivers/input/keyboard/gpio_keys.c	2007-03-01 12:24:26.000000000 -0800
+++ ap7000/drivers/input/keyboard/gpio_keys.c	2007-03-01 12:25:54.000000000 -0800
@@ -23,11 +23,9 @@
 #include <linux/platform_device.h>
 #include <linux/input.h>
 #include <linux/irq.h>
+#include <linux/gpio_keys.h>
 
 #include <asm/gpio.h>
-#include <asm/arch/hardware.h>
-
-#include <asm/hardware/gpio_keys.h>
 
 static irqreturn_t gpio_keys_isr(int irq, void *dev_id)
 {
Index: ap7000/include/asm-arm/hardware/gpio_keys.h
===================================================================
--- ap7000.orig/include/asm-arm/hardware/gpio_keys.h	2007-03-01 11:49:06.000000000 -0800
+++ /dev/null	1970-01-01 00:00:00.000000000 +0000
@@ -1,17 +0,0 @@
-#ifndef _GPIO_KEYS_H
-#define _GPIO_KEYS_H
-
-struct gpio_keys_button {
-	/* Configuration parameters */
-	int keycode;
-	int gpio;
-	int active_low;
-	char *desc;
-};
-
-struct gpio_keys_platform_data {
-	struct gpio_keys_button *buttons;
-	int nbuttons;
-};
-
-#endif
Index: ap7000/include/linux/gpio_keys.h
===================================================================
--- /dev/null	1970-01-01 00:00:00.000000000 +0000
+++ ap7000/include/linux/gpio_keys.h	2007-03-01 12:24:58.000000000 -0800
@@ -0,0 +1,17 @@
+#ifndef _GPIO_KEYS_H
+#define _GPIO_KEYS_H
+
+struct gpio_keys_button {
+	/* Configuration parameters */
+	int keycode;
+	int gpio;
+	int active_low;
+	char *desc;
+};
+
+struct gpio_keys_platform_data {
+	struct gpio_keys_button *buttons;
+	int nbuttons;
+};
+
+#endif
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/