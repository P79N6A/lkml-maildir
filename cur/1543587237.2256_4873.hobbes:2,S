Date: Wed, 11 Apr 2001 10:13:12 +0200 (CEST)
From: Matthias Hanisch <>
Subject: [PATCH] a new __init function in random.c
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/4/11/30

Hi!
The attached patch puts the following function into the .text.init
section.
batch_entropy_init
        called by rand_initialize (initfunc)
Patch is against 2.4.4pre1, to be included in the ac-series and in the
standard kernel.
Regards,
	Matze
-- 
Matthias Hanisch    mailto:matze@camline.com    phone: +49 8137 935-219
diff -ru linux-vanilla/drivers/char/random.c linux/drivers/char/random.c
--- linux-vanilla/drivers/char/random.c	Sun Mar 25 11:21:57 2001
+++ linux/drivers/char/random.c	Mon Apr  9 22:22:20 2001
@@ -610,7 +610,7 @@
 static void batch_entropy_process(void *private_);
 
 /* note: the size must be a power of 2 */
-static int batch_entropy_init(int size, struct entropy_store *r)
+static int __init batch_entropy_init(int size, struct entropy_store *r)
 {
 	batch_entropy_pool = kmalloc(2*size*sizeof(__u32), GFP_KERNEL);
 	if (!batch_entropy_pool)