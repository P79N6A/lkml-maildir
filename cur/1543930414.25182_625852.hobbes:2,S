Date: Sat, 8 Dec 2007 16:47:17 -0800 (PST)
From: Linus Torvalds <>
Subject: Re: Bug: get EXT3-fs error Allocating block in system zone
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/12/8/220

On Sat, 8 Dec 2007, Marco Gatti wrote:
> 
> Today, I tested with different amounts of RAM:
> 
> 2 GB: everything works fine
> 4 GB: same issue as described before with allocating block in system zone
> 
> So what to do, in order to use more than 2 Gigs of RAM?
Was there a dmesg out there somewhere?
With 4G of RAM, you probably have some of it above the 4GB mark (because 
of RAM remapping etc, and the PCI decode hole in the low 4GB). It does 
sound like this is a DMA problem, and your controller cannot correctly DMA 
to the upper 4GB.
So what controller/driver, what's the dmesg, and let's see if we can fix 
it by adding a DMA mask to it to limit it to the low 32 bits.
		Linus