Date: Thu, 7 Jun 2007 09:15:25 -0700
From: Greg KH <>
Subject: Re: 2.6.22-rc4-mm1
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/6/7/256

On Thu, Jun 07, 2007 at 09:06:32AM -0700, Andrew Morton wrote:
> On Thu, 7 Jun 2007 08:59:53 -0700 Greg KH <gregkh@suse.de> wrote:
> 
> > On Thu, Jun 07, 2007 at 08:52:00AM -0700, Andrew Morton wrote:
> > > On Thu, 7 Jun 2007 08:43:42 -0700 Greg KH <gregkh@suse.de> wrote:
> > > 
> > > > >  Fixed in mkinitrd-6.0.9-6 , which I'll build now and push to 
> > > > >  updates-testing.  Thanks for getting my attention here.
> > > > 
> > > > Great, Andrew, can you please reenable the block-device patch that is in
> > > > my tree now that the problem has been solved?
> > > 
> > > I think we're screwed, aren't we?  Everyone needs to upgrade mkinitrd to be
> > > able to boot the kernel?  Not viable :(
> > > 
> > > For example, what about my two-year-old yellowdog machine?
> > 
> > Enable CONFIG_SYSFS_DEPRECATED and it should all work just fine.  That's
> > what Michal said worked for him.
> > 
> 
> Actually, it _was_ enabled.
> 
> Ho hum, I'll have a poke at it this evening.
Yeah, that sounds odd, it should have worked.
> So...  what's the story here?  Should our position be that
> CONFIG_SYSFS_DEPRECATED=n should only be used by distro kernel-builders,
> who are concurrently shipping userspace which can handle it?
Yes.
There are a number of distros out there right now who can support that
option disabled.  I'm pretty sure they are the following right now:
	Gentoo unstable (actually stable works now for me, but I'm not
			 going to guarantee it just yet...)
	Debian unstable (again stable might work, but I have not heard
			 any reports from testers.)
	openSUSE FACTORY (the 10.3 alpha releases)
and now it sounds like Red Hat rawhide will also work properly.
> And that these distros should (probably) set CONFIG_SYSFS_DEPRECATED=y
> in their update kernels for older distributions?
Yes, unless they have tested things and it all works properly (all old
usages of libsysfs need to be removed and 'odd' initrd scripts need to
be updated as in the case of Red Hat.)
thanks,
greg k-h
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/