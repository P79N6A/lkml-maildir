Date: Sat, 11 Sep 2004 19:43:21 +0300
From: Denis Vlasenko <>
Subject: Re: [PATCH] udev: udevd shall inform us abot trouble
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/9/11/88

> > I built udev with:
> >
> > USE_LOG = true
> > DEBUG = false
> >
> > but udevd does not log anything under such setting (all
> > udevd messages are coded as debug messages).
> >
> > This patch improves situation by changing some dbg()'s
> > into info()'s.
>
> No, I don't like this change, as it increases the size of udevd pretty
> unnecessarily (errors like what happened to you are very rare, and we
> could blame them on pilot error...)
I do not fully agree, but it is not that important.
So far, udev is working fine for me.
I've seen only two regressons of udev versus devfs, both are not
very serious:
1. amixer races with udev if run directly after modprobe,
like this:
modprobe snd-via82xx
modprobe snd-mixer-oss
modprobe snd-pcm-oss
amixer set 'Master',0 90%,90% unmute
amixer set 'Master Mono',0 90% unmute
amixer set 'PCM',0 90%,90% unmute
amixer set 'Headphone',0 90%,90% unmute
Well, I lied a bit. These lines are from my home box, which is not
udev'ified yet. At the job, I sit on i815 box, and there amixer
fails to set volume. It happens 100% of the time. Adding "sleep 1"
after modprobing helps. With devfs it worked without sleep.
2. I have no processes on /dev/tty1. Nobody have open descriptors to it,
it is not a ctty for anyone. tty1 still has messages printed by init at boot
before init closed its stdin, stdout and stderr.
If I switch to vc1 and start to move a mouse (I have gpm running), it is
very sluggish. That's because hotplug+udev constantly registers and de-registers
vcs[a]N devices. Agian, I do not see such thing with devfs.
--
vda
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/