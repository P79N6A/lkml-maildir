Date: Mon, 22 May 2006 23:27:24 +0200
From: Rogier Wolff <>
Subject: Re: pcmcia oops on 2.6.17-rc[12]
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/5/22/261

On Mon, May 22, 2006 at 01:10:04PM +0100, Alan Cox wrote:
> On Llu, 2006-05-22 at 13:50 +0200, Rogier Wolff wrote:
> > I happen to know (ISA) hardware that CANNOT share an interrupt: It
> > drives the IRQ line either high or low, and has a driver that will
> 
> You happen to be wrong. Some ISA boards use the correct diodes and
> pulldowns and can share an IRQ line although being edge triggered you
> must take great care to get it right.
I feel like I'm repeating myself... I happen to know (ISA) hardware
that /cannot/ share an interrupt. It does /not/ use correct diodes and
pulldowns. I have equipped the driver with the knowledge that it
cannot share the interrupt.
Linus' sugesstion that as an intermediate measure request that
everybody explictly flag: shared is ok, or "NO WAY", sounds like a
plan. In the meanwhile the infrastructure may warn about that driver
so that some human thinks about it, and adds the right flag. Only after
a while, (when there is no longer anybody using the default) can we
change the default....
Alan and Linus know (ISA) hardware that /can/ share interrupts.
Fine. I know hardware that /cannot/ share interrupts. So, my driver
requesting an interrupt, and getting: "Can't allocate interrupt" is an
indication of a hardware configuration error. Or software (you've been
telling one of the drivers the wrong interrupt line). If you force
"shared mode", my driver will cope (it works just great on the PCI
version of the card, no problem). But will the hardware?
You guys maybe trying to fix very real problems in PCMCIA land, of
which I have very little knowledge. But changing what "not passing
SA_SHIRQ" means globlaly IMHO changes too much... 
	Rogier. 
-- 
** R.E.Wolff@BitWizard.nl ** 
http://www.BitWizard.nl/
 ** +31-15-2600998 **
*-- BitWizard writes Linux device drivers for any device you may have! --*
Q: It doesn't work. A: Look buddy, doesn't work is an ambiguous statement. 
Does it sit on the couch all day? Is it unemployed? Please be specific! 
Define 'it' and what it isn't doing. --------- Adapted from lxrbot FAQ
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/