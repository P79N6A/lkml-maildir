Date: Wed, 19 Sep 2007 08:50:32 -0700
From: Randy Dunlap <>
Subject: Re: UML dead with current -git?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/9/19/165

On Wed, 19 Sep 2007 14:43:23 +0200 Philipp Marek wrote:
> On Wednesday 19 September 2007 Jeff Dike wrote:
> > On Tue, Sep 18, 2007 at 07:55:13PM +0200, Sam Ravnborg wrote:
> > > Sounds to me like a known issue by you. Can you give a few more details
> > > so we maybe can get it fixed?
> > I believe what happened here is an x86_64 build followed by a
> > UML/x86_64 build with no intervening mrproper.
> Yes, after a "make mrproper" it compiles fine.
> However, the .config is gone afterwards ...
> 
> > I've always considered this to be a "don't do that" sort of thing.
> > However, maybe we could stick the arch of the current build somewhere
> > in the tree, check that before any serious part of a subsequent
> > build, and error out if $ARCH is different.
> Well, on this line it may be nice to be able to put the target architecture 
> somewhere ...
> 	make mrproper
> 	make menuconfig ARCH=um
> 	make ARCH=um
> ... some tweaking
> 	make menuconfig
> and the .config is overwritten with the "wrong" architecture.
> (I know about .config.bak and so on ... just a small wish)
Yes, I've tried to coerce the top-level Makefile into honoring/using
the include/asm symlink if it exists, i.e., taking ARCH from
readlink include/asm && sed -e 's/include-asm//', but sadly my
makefile foo was not good enough.
---
~Randy
*** Remember to use Documentation/SubmitChecklist when testing your code ***
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/