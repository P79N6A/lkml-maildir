Date: Tue, 27 Mar 2001 18:06:52 +0100
From: Padraig Brady <>
Subject: Re: Compact flash disk and slave drives in 2.4.2
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/3/27/98

OK the following assumes CF never have slaves which is just wrong.
The CF should be logically treated as an IDE harddisk. So the fix is
probably have a kernel parameter that causes the following check to
be skipped?
/*
   * Prevent long system lockup probing later for non-existant
   * slave drive if the hwif is actually a flash memory card of some 
variety:
   */
  if (drive_is_flashcard(drive)) {
          ide_drive_t *mate = &HWIF(drive)->drives[1^drive->select.b.unit];
          if (!mate->ata_flash) {
                mate->present = 0;
                ide_drive_t *mate = 
&HWIF(drive)->drives[1^drive->select.b.unit]
                mate->noprobe = 1;
          }
  }
But do we need this check? Is it just for speed. If you have an "ordinary"
harddrive as master with no slave, will the check for slave cause the same
"long system lockup", and if not, why.
Padraig.
Andre Hedrick wrote:
> Because in laptops, the primary use of CFA.
> Laptops using CFA do not have slaves.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/