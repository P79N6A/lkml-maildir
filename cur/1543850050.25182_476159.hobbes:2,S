Date: Tue, 24 Oct 2006 19:19:40 +0900
From: Akinobu Mita <>
Subject: Re: [PATCH] appletalk: prevent unregister_sysctl_table() with a NULL argument
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/10/24/64

On Tue, Oct 24, 2006 at 02:38:24AM -0700, David Rientjes wrote:
> The only way this would happen at atalk_unregister_sysctl is if the 
> kmalloc failed on register_sysctl_table during init.  In that case there 
> is no need to unregister atalk in the first place since it never came up, 
Yes. this patch doesn't cause failure if sysctl registration failed.
It aims to avoid that minor possible NULL pointer dereference.
> so this doesn't appear to be the correct fix.  Even if it were possible, 
> this check should be done at atalk_exit instead of 
> atalk_unregister_sysctl.
Are there any difference?
Because atalk_unregister_sysctl() is only called from atalk_exit(). And
atalk_table_header is static variable. So there is no way to know
whether sysclt registration was succeeded or not. Or is it better to
export atalk_table_header for that check from atalk_exit()?
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/