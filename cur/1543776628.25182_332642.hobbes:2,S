Date: Sun, 10 Jul 2005 13:12:03 +0200
From: Jan Dittmer <>
Subject: Re: arch xtensa does not compile
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/7/10/20

Christian Zankel wrote:
> Jan Dittmer wrote:
> 
>>I guess I'm using the wrong binutils version (2.15.94.0.2.2). Which is the
>>recommended gcc/binutils pair which is supposed to compile the kernel?
> 
> 
> Bob Wilson made some changes to binutils last week to address this 
> problem but he only submitted it to the latest binutils version.
> 
> With the latest gcc+binutils toolchain, the kernel compiles for me.
> Note, however, that I just submitted a patch that is not in Linus' tree, 
> yet.
> 
> gcc version 3.4.5 20050707 (prerelease)
> GNU ld version 2.16.91 20050707
Yep, using GNU ld 20050710 and gcc 3.4.4 20050513 I get much further now.
  CC      init/version.o
  LD      init/built-in.o
  LD      .tmp_vmlinux1
arch/xtensa/kernel/built-in.o: In function `__down_interruptible':
: dangerous relocation: l32r: literal target out of range: .sched.literal
arch/xtensa/kernel/built-in.o: In function `__down_interruptible':
: dangerous relocation: l32r: literal target out of range: (.sched.literal+0x4)
arch/xtensa/kernel/built-in.o: In function `__down_interruptible':
: dangerous relocation: l32r: literal target out of range: (.sched.literal+0x8)
arch/xtensa/kernel/built-in.o: In function `__down_interruptible':
: dangerous relocation: l32r: literal target out of range: (.sched.literal+0xc)
arch/xtensa/kernel/built-in.o: In function `__down_interruptible':
: dangerous relocation: l32r: literal target out of range: (.sched.literal+0xc)
arch/xtensa/kernel/built-in.o: In function `__down':
: dangerous relocation: l32r: literal target out of range: .sched.literal
arch/xtensa/kernel/built-in.o: In function `__down':
: dangerous relocation: l32r: literal target out of range: (.sched.literal+0x4)
arch/xtensa/kernel/built-in.o: In function `__down':
: dangerous relocation: l32r: literal target out of range: (.sched.literal+0x8)
arch/xtensa/kernel/built-in.o: In function `__down':
: dangerous relocation: l32r: literal target out of range: (.sched.literal+0xc)
kernel/built-in.o: In function `schedule':
... lots more of these, until ...
rwsem.c:(.sched.text+0x290): dangerous relocation: l32r: literal target out of range: (. sched.literal+0x18)
rwsem.c:(.sched.text+0x297): dangerous relocation: l32r: literal target out of range: (. sched.literal+0x1c)
rwsem.c:(.sched.text+0x29c): dangerous relocation: l32r: literal target out of range: (. sched.literal+0x20)
rwsem.c:(.sched.text+0x2bb): dangerous relocation: l32r: literal target out of range: (. sched.literal+0x24)
make: *** [.tmp_vmlinux1] Error 1
Is the gcc version still too old? Or do I need some special config option?
Reading specs from /usr/cc/xtensa/lib/gcc/xtensa-linux/3.4.4/specs
Configured with: ../configure --prefix=/usr/cc --exec-prefix=/usr/cc/xtensa --target=xtensa-linux --disable-shared --disable-werror --disable-nls
--disable-threads --disable-werror --disable-libmudflap --with-newlib --with-gnu-as --with-gnu-ld --enable-languages=c
Thread model: single
gcc version 3.4.4 20050513 (prerelease)
Thanks,
-- 
Jan
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/