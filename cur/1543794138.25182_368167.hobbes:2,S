Date: Fri, 18 Nov 2005 04:34:00 +0100
From: Adrian Bunk <>
Subject: [2.6 patch] fs/ext3/: small cleanups
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/11/17/339

This patch contains the following cleanups:
- there's no need for ext3_count_free() #ifndef EXT3FS_DEBUG
- having prototypes for ext3_count_free() in two different headers is
  nonsense
Signed-off-by: Adrian Bunk <bunk@stusta.de>
---
 fs/ext3/balloc.c |    2 --
 fs/ext3/bitmap.c |    8 +++++++-
 fs/ext3/bitmap.h |    8 --------
 fs/ext3/ialloc.c |    1 -
 4 files changed, 7 insertions(+), 12 deletions(-)
--- linux-2.6.15-rc1-mm1-full/fs/ext3/bitmap.c.old	2005-11-18 02:52:02.000000000 +0100
+++ linux-2.6.15-rc1-mm1-full/fs/ext3/bitmap.c	2005-11-18 02:54:14.000000000 +0100
@@ -7,8 +7,11 @@
  * Universite Pierre et Marie Curie (Paris VI)
  */
 
+#ifdef EXT3FS_DEBUG
+
 #include <linux/buffer_head.h>
-#include "bitmap.h"
+
+#include "ext3_fs.h"
 
 static int nibblemap[] = {4, 3, 3, 2, 3, 2, 2, 1, 3, 2, 2, 1, 2, 1, 1, 0};
 
@@ -24,3 +27,6 @@
 			nibblemap[(map->b_data[i] >> 4) & 0xf];
 	return (sum);
 }
+
+#endif  /*  EXT3FS_DEBUG  */
+
--- linux-2.6.15-rc1-mm1-full/fs/ext3/balloc.c.old	2005-11-18 02:52:55.000000000 +0100
+++ linux-2.6.15-rc1-mm1-full/fs/ext3/balloc.c	2005-11-18 02:53:02.000000000 +0100
@@ -20,8 +20,6 @@
 #include <linux/quotaops.h>
 #include <linux/buffer_head.h>
 
-#include "bitmap.h"
-
 /*
  * balloc.c contains the blocks allocation and deallocation routines
  */
--- linux-2.6.15-rc1-mm1-full/fs/ext3/ialloc.c.old	2005-11-18 02:53:26.000000000 +0100
+++ linux-2.6.15-rc1-mm1-full/fs/ext3/ialloc.c	2005-11-18 02:53:31.000000000 +0100
@@ -26,7 +26,6 @@
 
 #include <asm/byteorder.h>
 
-#include "bitmap.h"
 #include "xattr.h"
 #include "acl.h"
 
--- linux-2.6.15-rc1-mm1-full/fs/ext3/bitmap.h	2005-11-17 21:30:48.000000000 +0100
+++ /dev/null	2005-11-08 19:07:57.000000000 +0100
@@ -1,8 +0,0 @@
-/*  linux/fs/ext3/bitmap.c
- *
- * Copyright (C) 2005 Simtec Electronics
- *	Ben Dooks <ben@simtec.co.uk>
- *
-*/
-
-extern unsigned long ext3_count_free (struct buffer_head *, unsigned int );
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/