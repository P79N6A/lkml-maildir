Date: Thu, 15 Feb 2001 16:43:37 +0100
From: Herbert Pophal <>
Subject: Bug in FAT reading
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/2/15/50

Dear Kernel People,
Recently I experienced a dos formatted floppy which, after mounting it
vfat and issuing the df command produced the kernel messages below.
The original part is several hundreds line long. The message stream
persisted after a shutdown. If one waits long enough, it will stop.
I consider this behavior a bug. It appeared in 2.2.14-5.0 (RH6.2), 2.2.16,
2.2.18 and 2.4.1 kernels (all from kernel.org). The mount, unmount and ls
commands worked fine.
[ ... deleted repeated lines, during normal system operation
Feb 13 15:47:37 gaudi kernel: floppy0: sector not found: track 0, head 0, 
sector 5, size 2
Feb 13 15:47:37 gaudi kernel: floppy0: sector not found: track 0, head 0, 
sector 5, size 2
Feb 13 15:47:37 gaudi kernel: end_request: I/O error, dev 02:00 (floppy), 
sector 4
Feb 13 15:47:37 gaudi kernel: bread in fat_access failed 
Feb 13 15:47:38 gaudi kernel: floppy0: sector not found: track 0, head 0, 
sector 5, size 2
Feb 13 15:47:38 gaudi kernel: floppy0: sector not found: track 0, head 0, 
sector 5, size 2
Feb 13 15:47:38 gaudi kernel: end_request: I/O error, dev 02:00 (floppy), 
sector 4
Feb 13 15:47:38 gaudi kernel: bread in fat_access failed 
Feb 13 15:47:38 gaudi kernel: floppy0: sector not found: track 0, head 0, 
sector 5, size 2
Feb 13 15:47:39 gaudi kernel: floppy0: sector not found: track 0, head 0, 
sector 5, size 2
Feb 13 15:47:39 gaudi kernel: end_request: I/O error, dev 02:00 (floppy), 
sector 4
Feb 13 15:47:39 gaudi kernel: bread in fat_access failed
... and now we issue a shutdown ...
Feb 13 15:47:39 gaudi PAM_pwdb[685]: (xdm) session closed for user hp
Feb 13 15:47:39 gaudi gnome-name-server[1177]: input condition is: 0x10, 
exiting
Feb 13 15:47:39 gaudi kernel: floppy0: sector not found: track 0, head 0, 
sector 5, size 2
Feb 13 15:47:39 gaudi kernel: floppy0: sector not found: track 0, head 0, 
sector 5, size 2
Feb 13 15:47:39 gaudi kernel: end_request: I/O error, dev 02:00 (floppy), 
sector 4
Feb 13 15:47:39 gaudi kernel: bread in fat_access failed 
Feb 13 15:47:40 gaudi kernel: floppy0: sector not found: track 0, head 0, 
sector 5, size 2
Feb 13 15:47:40 gaudi kernel: floppy0: sector not found: track 0, head 0, 
sector 5, size 2
Feb 13 15:47:40 gaudi kernel: end_request: I/O error, dev 02:00 (floppy), 
sector 4
Feb 13 15:47:40 gaudi kernel: bread in fat_access failed 
Feb 13 15:47:41 gaudi rc: Stopping keytable succeeded
Feb 13 15:47:41 gaudi kernel: floppy0: sector not found: track 0, head 0, 
sector 5, size 2
Feb 13 15:47:41 gaudi Font Server[627]: terminating 
Feb 13 15:47:41 gaudi kernel: floppy0: sector not found: track 0, head 0, 
sector 5, size 2
Feb 13 15:47:41 gaudi kernel: end_request: I/O error, dev 02:00 (floppy), 
sector 4
Feb 13 15:47:41 gaudi kernel: bread in fat_access failed 
Feb 13 15:47:42 gaudi kernel: floppy0: sector not found: track 0, head 0, 
sector 5, size 2
Feb 13 15:47:42 gaudi kernel: floppy0: sector not found: track 0, head 0, 
sector 5, size 2
Feb 13 15:47:42 gaudi kernel: end_request: I/O error, dev 02:00 (floppy), 
sector 4
Feb 13 15:47:42 gaudi kernel: bread in fat_access failed 
... ] deleted repeated lines, during and after shutdown
The mdir output is:
plain_io: Input/output error
Error reading fat number 0
and proceeds with the normally expected dir listing.
The messages file contains then just two of the above blocks and
not this almost never ending junk.
I think if the fourth or so read attempt on the FAT is unsuccesfull the
kernel should proceed to the alternate FAT, as the mtools obviously do.
With best regards,
Herbert
pophal@zrz.tu-berlin.de
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/