Date: Mon, 21 Jun 2004 22:06:23 -0400
From: Jeff Garzik <>
Subject: Re: DMA API issues
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/6/21/226

Russell King wrote:
> On Mon, Jun 21, 2004 at 03:35:42PM +0200, Takashi Iwai wrote:
>>Yes, the struct page pointer is needed for vma_ops.nopage in mmap on
>>ALSA.  So far, this is broken on some architectures like ARM.  We need
>>a proper conversion from virtual/bus pointer to a page struct.
> 
> 
> Please get away from your nopage implementation.  We've been around this
> before with Linus, and the conclusion was that it's up to architectures
> to provide a MMAP method for DMA memory, which _may_ use the nopage
> method if and only if it is appropriate for their implementation.
Can you elaborate?
When I was writing sound/oss/via82cxxx_audio.c, Linus specifically 
recommended using ->nopage, which worked out quite well (modulo cleaning 
up VM_xxx flags).
	Jeff
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/