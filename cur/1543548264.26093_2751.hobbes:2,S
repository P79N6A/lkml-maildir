Date: Sat, 09 Sep 2000 12:11:42 +0200
From: Tim Brunne <>
Subject: Re: Notebook disk spindown
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/9/9/75

Richard Gooch wrote:
> Jamie Lokier writes:
> > Russell King wrote:
> > > > With laptops, people are willing
> > > > to assume the RAM is reliable -- accidentally pulling the plug out won't
> > > > lose the data.
> > >
> > > But a buggy apm implementation and the battery running down can.
> >
> > Well, perhaps the risk is worth it.
> At the least, people should be able to choose whether they are willing
> to take the risk or not. So a CONFIG_ option would do.
> Has such a patch been submitted?
I think Jamie is right. The nice feature of the old
bdflushd deamon was, that disk writes were possible
without spin up of the disk, because of RAM
buffering. This is achived again by patching the
kernel later than 2.2.10.
In my opinion a CONFIG_ option is not necessary:
In fs/buffer.c there are already *default values* and
*upper limits* for relevant kernel paramters present.
I just increased the upper limits *to be able* to modify
kernel parameters to suit my needs. Changing the upper
limits does *not* modify the default behaviour of the
kernel.
So I think my tiny patch or some similar one should
become part of future kernels. There may be a more
reasonable choice for the upper limits. --- Unfortunately
I do not know how to "officially submit" a patch, if that
is what Richard means.
Regarding the proposals of Russel. It's true what you say,
but also what Jamie said: I like to do some work on files
in some subdirectory "xyz", doing a "cat /..../xyz/* > /dev/null"
I can read, modify and write files without any hard disk
running. The system doesn't crash, so everything is nice.
I use the notebook a lot as a simple X-terminal without
accessing the local disk, so again in principle hours of work
are possible without a spinning hard disk. And I don't have
to tailor a lot of deamons, etc. . A simple write to
/proc/sys/vm/bdflush and calling hdparm once, both
in some startup script is sufficient.
Thanks to all of you for your replies and interest!
Regards,
Tim
--
patch: 
http://www.hmi.de/people/brunne/Spindown
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/