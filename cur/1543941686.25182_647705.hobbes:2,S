Date: Sun, 03 Feb 2008 14:22:21 +0300
From: Cyrill Gorcunov <>
Subject: [patch 4/4] SPARC: cleanup - use _AC macro to define PAGE_SIZE
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/2/3/78

Signed-off-by: Cyrill Gorcunov <gorcunov@gmail.com>
---
 page.h |   11 ++++-------
 1 file changed, 4 insertions(+), 7 deletions(-)
Index: linux-2.6.git/include/asm-sparc/page.h
===================================================================
--- linux-2.6.git.orig/include/asm-sparc/page.h	2008-01-21 19:35:29.000000000 +0300
+++ linux-2.6.git/include/asm-sparc/page.h	2008-02-03 14:02:48.000000000 +0300
@@ -10,18 +10,15 @@
 
 #ifdef __KERNEL__
 
+#include <linux/const.h>
+
 #ifdef CONFIG_SUN4
 #define PAGE_SHIFT   13
 #else
 #define PAGE_SHIFT   12
 #endif
-#ifndef __ASSEMBLY__
-/* I have my suspicions... -DaveM */
-#define PAGE_SIZE    (1UL << PAGE_SHIFT)
-#else
-#define PAGE_SIZE    (1 << PAGE_SHIFT)
-#endif
-#define PAGE_MASK    (~(PAGE_SIZE-1))
+#define PAGE_SIZE	(_AC(1, UL) << PAGE_SHIFT)
+#define PAGE_MASK	(~(PAGE_SIZE-1))
 
 #include <asm/btfixup.h>
 
-- 