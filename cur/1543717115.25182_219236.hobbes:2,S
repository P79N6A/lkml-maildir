Date: Sun, 9 May 2004 20:31:44 -0400 (EDT)
From: Zwane Mwaikambo <>
Subject: Re: [PATCH] Un-inline spinlocks on ppc64
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/5/9/80

yOn Sun, 9 May 2004, Andrew Morton wrote:
> Paul Mackerras <paulus@samba.org> wrote:
> >
> > The patch below moves the ppc64 spinlocks and rwlocks out of line and
> >  into arch/ppc64/lib/locks.c, and implements _raw_spin_lock_flags for
> >  ppc64.
> >
>
> It included a hunk against include/asm-ppc64/offsets.h, which I dropped.
Regarding CONFIG_INLINE_SPINLOCKS, could we call it CONFIG_SPINLINE as is
the current option supported on i386?
> > ...
> >  This patch depends on the patch from Keith Owens to add
> >  _raw_spin_lock_flags.  If you decide to drop that patch, let me know
> >  and I can do a new version without _raw_spin_lock_flags.
>
> Keith's patch and Zwane's x86 implemeentation are queued up and seem to
> work OK, so all is well, thanks.
I'd like to also make spin_lock_irq also enable interrupts on contention,
but the current generic headers don't make this really easy since it wants
the arch specific code to define _raw_spin_lock in terms of
_raw_spin_lock_flags in order to override the current behaviour. I may
have to resort to __builtin_constant games.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/