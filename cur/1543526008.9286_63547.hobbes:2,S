Date: Wed, 16 Feb 2000 00:34:46 -0500
From: john <>
Subject: 2.2.x access to /dev/mouse or psaux occasionally locks
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/2/16/15

I've been having a bit of trouble with my keyboard and mouse locking up
occasionally when switching between X and the console. I've got a
gigabyte GA-5AX R4 motherboard
(
http://www.gigabyte.com.tw/gigabyte-web/products/ga5ax4.htm
) with a
Logitech Mouseman wheel PS/2 mouse and PS/2 keyboard. I've seen this
with every 2.2.x kernel (currently 2.2.15pre4) I've used since october
when I installed the board. 
Basically, every once in awhile, when I'm changing back and fourth
between X and the console, I loose my mouse and keyboard. If I ssh in,
then run X :2, then ctrl-c, or restart gpm the mouse and keyboard
return. While they are locked, if I cat /proc/interupts, the count on
the mouse and keyboard do not change until I use the above methods to
unlock them, then everything I typed gets dumped to the screen and the
/proc/interupts counts increase. 
It seems that when I swap to the console, X closes /dev/mouse and gpm
opens it. Occasionally it seems that gpm hangs while accessing
/dev/mouse and will not let go until it is killed. If I'm swapping from
the console to X, the reverse happens and occasionally X gets locked up
on accessing /dev/mouse, and won't let go until I briefly run the second
copy of X which then grabs and releases the mouse. I've stopped using
gpm, and so far I've not lost the keyboard and mouse switching to a
console from X (however, I still occasionally lose it going into X). 
I'm using the XFree86 3.3.5 SVGA server on a Voodoo3 2000 and everything
else is working fine. I've bothered the Voodoo3 newsgroup about this
issue, but no one responded, and since the lockup sometimes happens on
boot before I get to X (when gpm initially grabs the mouse), I do not
believe it has to do with the X server. 
Are there any suggestions on how to work around this problem. I do not
always have access to a terminal from which I can ssh to my box, so
finding a way (other then not swapping from X to a console) to avoid
this issue would be nice.
Thanks
-john
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/