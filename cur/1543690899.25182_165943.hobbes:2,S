Date: Sun, 14 Sep 2003 09:52:02 +0100
From: John Bradford <>
Subject: Re: RFC: [2.6 patch] better i386 CPU selection
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/9/14/26

> > > I don't like the current user interface that says "if you want to
> > > support both an Athlon and a Pentium 4 in your kernel use the Pentium III
> > > option. And for better optimization, also check the "generic" option".
If we go with the bitmap of processors to support idea, the generic option will be unnecessary.
You would then be able to:
* Support, (I.E. include workarounds for, and not include instructions
  that are not supported by), as many or as few processors as you
  desire.
* Optimise, (I.E. set alignment, and code generation within the subset
  of instructions permitted in the 'Support' selection above), for one
  specific processor.
> > The big issue with your ifdefing of workarounds is that it causes subtle
> > support problems. A lot of settings for specific CPUs boot and work
> > fine on other CPUs (possibly with small performance impact, but they're
> > rarely noticeable without explicit benchmarking). Just when you don't
> > include the workarounds for the bugs on these other CPUs it will boot and
> > even run, but fail mysteriously once a month. And that would be a support
> > nightmare.
> it sounds like a nessasary part of this patch would be to detect the CPU
> type and complain VERY loudly if it's not one supported by the build.
>
> This is probably a good idea anyway.
It is a good idea for 99% of kernels, but still needs to be configurable.
Maybe the option should not be present in the kernel configurator, and
require manual editing of the .config file to enable it.
John.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/