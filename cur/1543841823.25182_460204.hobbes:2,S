Date: Mon, 4 Sep 2006 05:25:34 -0400
From: Josef Sipek <>
Subject: Re: [PATCH 05/22][RFC] Unionfs: Copyup Functionality
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/9/4/53

On Mon, Sep 04, 2006 at 08:59:08AM +0200, Jan Engelhardt wrote:
> >+	newattrs.ia_atime = old_hidden_dentry->d_inode->i_atime;
> >+	newattrs.ia_mtime = old_hidden_dentry->d_inode->i_mtime;
> >+	newattrs.ia_ctime = old_hidden_dentry->d_inode->i_ctime;
> 
> How about,
> 
> 	struct inode *ohi = old_hidden_dentry->d_inode;
> 	newattrs.ia_atime = ohi->i_atime;
> 
> reduces typing a little.
Makes sense.
> >+	} else {
> >+		printk(KERN_ERR "Unknown inode type %d\n",
> >+				old_mode);
> >+		BUG();
> >+	}
> 
> Is BUG the right thing, what do others think? (Using WARN, and set err to
> something useful?)
Well, it is definitely a condition which Unionfs doesn't expect - if it
doesn't know about the type, how could it copy it up?
> >+	if (!path)
> >+		;
> 
> Woha?!
Eeek. Good catch. The 'goto out' disappeared somehow.
Thanks for the comments.
Josef 'Jeff' Sipek.
-- 
Real Programmers consider "what you see is what you get" to be just as bad a
concept in Text Editors as it is in women. No, the Real Programmer wants a
"you asked for it, you got it" text editor -- complicated, cryptic,
powerful, unforgiving, dangerous.
-- 
VGER BF report: H 0.0308323
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/