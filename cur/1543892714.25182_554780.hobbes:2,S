Date: Fri, 8 Jun 2007 07:27:52 +0200 (CEST)
From: Jan Engelhardt <>
Subject: Re: Another version of cleanfile/cleanpatch
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/6/8/19

On Jun 8 2007 01:06, Oleg Verych wrote:
>- empty lines in the end of file (patches can't be handled, or can? :).
Yes it can.
>Body -- is a commented sed script with shell variables for source/patch
>handling switch and compatibility with other versions of sed, not only GNU.
>If you like more tabs, then i stated in whitespace damage, just use
>"unexpand".
sed just does not cut it anymore. Perl regexes win in the long term.
>> Yes, UNIX was designed to handle fork-exec efficiently, thank God. But
>> still.
>[]
>> >    efforts to remove bashizms...
>> 
>> I prefer bashisms over using a shell [referring to original sh or ksh]
>> that can't do a sane thing.
>
>I would like to know cases. Just to try to solve them.
>
>Two from my head are:
>
>- `set pipefail' option -- not problem at all [0]
>- arrays.
>
>Arrays. Well, that depends. My option is as follows.
If you need arrays or a lot of substr magic, well, it's perhaps time to
consider a switch to a scripted language (perl, python, php, whatever comes
around). But I really meant these handy bash features:
  for i in {1..5}; do ...; done;
  if [ ]; then ...; fi;
  echo $[ math expr ];
  echo `backtick` and $(backtick with dollar-parentheses);
  The possibility to say if [ "$any" == "" ] (not having to use
  crap like [ "x$any" == "x" ].
  The possibility to say if [ -z "$any" ]
On the other hand, if you wanted to extinguish bashisms, then you'd
also need to do so for kshisms like
  if [[ ]]
>OK, to not to go offtopic, i would say here, that if that temp file on the
>tmpfs, then Linux directly helps you with its efficient memory
>management, not libc (good addition to fork/clone-execve, isn't it? ;)
And don't assume everything is a UNIX. CreateProcess() is particularly
expensive on Windows, burdening even Cygwin's fork()/exec() emulation.
	Jan
-- 
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/