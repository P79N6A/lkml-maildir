Date: Fri, 13 Oct 2006 02:03:28 +0200 (CEST)
From: Jiri Kosina <>
Subject: Re: [PATCH] fix parport_serial_pci_resume() ignoring return value from pci_enable_device()
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/10/12/369

On Fri, 13 Oct 2006, Russell King wrote:
> In this case, you're calling parport_serial_pci_remove() in the failure 
> path.  That's fine, but this opens the possibility of it being called 
> twice - once on resume failure and once when the device/driver is 
> removed.  If this happens, we dereference a NULL pointer. *BAD*.
You are right, I missed this.
I am not currently sure what the proper fix is, though. We might be also 
ending doing very bad things, when we ignore the error returned by 
pci_enable_device() and proceed operating on non-existing device.
Thanks for spotting this,
-- 
Jiri Kosina
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/