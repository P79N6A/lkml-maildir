Date: Thu, 31 Dec 1998 09:51:15 -0800 (PST)
From: Linus Torvalds <>
Subject: Re: 2.2.0pre1 OOPS on boot.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1998/12/31/204

On Thu, 31 Dec 1998, Jakub Jelinek wrote:
> 
> Even the get_cycles case is easily fixed up during runtime.
Guys, you're looking at details, and are missing the big picture.
The big picture is that "cycles" is a really useful thing to have, but in
many cases it is useful only if it is fast. 
We can fix up things only within reason. Yes, we can for example decide
that we _always_ use rdtsc, and then if the machine doesn't have the
instruction, we just patch it up with
	xor %eax,%eax
	xor %edx,%edx
which essentially means that we conceptually guarantee that we always have
a cycle counter, but it may return constant zero values. 
However, in some cases the _algorithm_ may actually change with rdtsc is
available and reliable. gettimeofday() was one such case, but as long as
it is only one, we can still fix it up pretty easily. But do you intend to
continue to fix up cases forever? I don't.
Why can't you just accept the 2.2.0pre2 solution: you can compile for a
"generic Pentium", which will actually work for everything but a i386 (the
i386 case is one of those "major algorithm change" things - when WP
doesn't work correctly, copying to user space is just SOO different that I
refuse to even consider not doing it like we have done it for years). 
People who care (like me) can compile for a real Pentium or a PPro.
		Linus
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/