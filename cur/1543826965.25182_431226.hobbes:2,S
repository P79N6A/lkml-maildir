Date: Thu, 08 Jun 2006 19:57:46 -0500
From: James Bottomley <>
Subject: Re: [PATCH 2/3] SCSI core and sd: early detection of medium not present
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/6/8/306

On Tue, 2006-06-06 at 11:31 -0400, Alan Stern wrote:
> This patch (as695) changes the scsi_test_unit_ready() routine in the
> SCSI 
> core to set a new flag when no medium is present.  The sd driver is 
> changed to use this new flag for reporting -ENOMEDIUM in from the 
> sd_media_changed method.
This would appear to be duplicating the struct scsi_disk media_present
flag.  Moving the media_present flag from scsi_disk to scsi_device may
make a bit of sense long term ... however, there's also dupication with
the sr driver and the cdrom layer now (that stores media change at the
cdrom level), so is there an argument why it's better in scsi_device
than scsi_disk?
James
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/