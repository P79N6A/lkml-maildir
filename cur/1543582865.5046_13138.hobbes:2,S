Date: Fri, 23 Feb 2001 07:45:21 -0500
From: David Corbin <>
Subject: [PATCH]: console, kernel 2.2.18
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/2/23/47

Attached is my first submitted patch, so please be gentle.  It's
actually made against the 2.2.18 kernel, but it should work fine against
2.4.2 from what I can tell.
The patch is extremely simple, but I would welcome testing and feedback
(I am not on the kernel mailing list).
It provides an ioctl call that will forcibly blank the screen.  It is
essentially the counterpart to TIOCLINUX, subcode=4.
-- 
David Corbin 		
dcorbin@machturtle.com--- linux-2.2.18/drivers/char/console.c	Sun Dec 10 19:49:41 2000
+++ linux/drivers/char/console.c	Fri Feb 23 06:54:40 2001
@@ -66,6 +66,9 @@
  *
  * Resurrected character buffers in videoram plus lots of other trickery
  * by Martin Mares <mj@atrey.karlin.mff.cuni.cz>, July 1998
+ * 
+ * Added ioctl sub-code to forcibly blank screen.
+ * by David Corbin <dcorbin@ieee.org>, February 2001
  */
 
 #include <linux/module.h>
@@ -2139,6 +2142,9 @@
 			return 0;
 		case 12:	/* get fg_console */
 			return fg_console;
+		case 13:
+			blank_screen();
+			return 0;
 	}
 	return -EINVAL;
 }Provide ioctl on console to force immediate "blanking", David Corbin <dcorbin@ieee.org>