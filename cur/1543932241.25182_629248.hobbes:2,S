Date: Mon, 17 Dec 2007 15:26:46 -0800
From: "Tony Luck" <>
Subject: Re: Top kernel oopses/warnings this week
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/12/17/400

On Dec 17, 2007 3:17 PM, Arjan van de Ven <arjan@linux.intel.com> wrote:
>
> Tony Luck wrote:
> >> +       static char target[80];
> >  ...
> >> +               sprintf(target, "%02x%02x%02x%02x-%02x%02x-%02x%02x-%02x%02x-"
> >> +                       "%02x%02x%02x%02x%02x%02x",
> >
> > [80] is overkill ... [37] bytes should be enough (unless I went
> > cross-eyed counting the "%02x" :-)
> >
>
> %02x doesn't guarantee that it's at most 2, but at LEAST 2...
How will you fit a number that requires >2 hex digits into an
"unsigned char"?
Alternatively ... if %02x may spew more that 2 characters, can
you be sure that [80] is enough?
-Tony