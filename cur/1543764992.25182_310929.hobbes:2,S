Date: Tue, 12 Apr 2005 08:42:53 +0200
From: Ingo Molnar <>
Subject: Re: [patch] sched: unlocked context-switches
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/4/12/44

* David Mosberger <davidm@napali.hpl.hp.com> wrote:
> Now, Ingo says that the order is reversed with his patch, i.e., 
> switch_mm() happens after switch_to().  That means flush_tlb_mm() may 
> now see a current->active_mm which hasn't really been activated yet.  
> That should be OK since it would just mean that we'd do an early (and 
> duplicate) activate_context().  While it does not give me a warm and 
> fuzzy feeling to have this inconsistent state be observable by 
> interrupt-handlers (and, in particular, IPI-handlers), I don't see any 
> problem with it off hand.
thanks for the analysis. I fundamentally dont have any fuzzy feeling 
from having _any_ portion of the context-switch path nonatomic, but with 
more complex hardware it's just not possible it seems.
	Ingo
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/