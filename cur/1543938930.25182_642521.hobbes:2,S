Date: Thu, 24 Jan 2008 01:01:07 -0600
From: Kumar Gala <>
Subject: Re: [PATCH 5/5 v3] Add the memory management driver to RapidIO.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/24/26

On Jul 26, 2007, at 3:42 AM, Zhang Wei wrote:
> This patch adds the memory management driver to RapidIO.
> The RapidIO system size is changed to automatically detection.
> Add the memory mapping driver to RapidIO basic driver.
> Multi master ports are supported.
> Add a simple Bitmap RapidIO space allocator driver.
Can we break up the functionality here into separate patches.  I'm  
seeing 4 logical patches:
* system size is changed to automatic detection
* support for multi master ports
* bitmap allocator
* memory map driver
> Signed-off-by: Zhang Wei <wei.zhang@freescale.com>
> ---
> drivers/net/rionet.c                |   17 +-
> drivers/rapidio/Kconfig             |   18 +-
> drivers/rapidio/Makefile            |    1 +
> drivers/rapidio/rio-access.c        |   10 +-
> drivers/rapidio/rio-scan.c          |   53 +++--
> drivers/rapidio/rio-sysfs.c         |    3 +-
> drivers/rapidio/rio.c               |  479 ++++++++++++++++++++++++++ 
> ++++++++-
> drivers/rapidio/rio.h               |    9 +-
> drivers/rapidio/sallocator/Kconfig  |    9 +
> drivers/rapidio/sallocator/Makefile |   12 +
> drivers/rapidio/sallocator/bitmap.c |  382 ++++++++++++++++++++++++++ 
> ++
> include/linux/rio.h                 |   71 +++++-
> include/linux/rio_drv.h             |   41 +++-
> 13 files changed, 1046 insertions(+), 59 deletions(-)
> create mode 100644 drivers/rapidio/sallocator/Kconfig
> create mode 100644 drivers/rapidio/sallocator/Makefile
> create mode 100644 drivers/rapidio/sallocator/bitmap.c
[snip]
> +config RAPIDIO_PROC_FS
> +	bool "I/O and Memory resource debug"
> +	depends on RAPIDIO && PROC_FS
> +	default y
> +	---help---
> +	  Enable this option, it will create a /proc/riores node for
> +	  monitoring the RapidIO I/O and Memory resource.
> +
This isn't going to be acceptable.  You should use sysfs or debugfs  
not proc.
- k