Date: Tue, 4 Dec 2007 10:37:16 +0100
From: Ingo Molnar <>
Subject: Re: Regression - 2.6.24-rc3 - umem nvram card driver oops
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/12/4/49

* Neil Brown <neilb@suse.de> wrote:
> ### Diffstat output
>  ./drivers/block/umem.c |    3 ++-
>  1 file changed, 2 insertions(+), 1 deletion(-)
> 
> diff .prev/drivers/block/umem.c ./drivers/block/umem.c
> --- .prev/drivers/block/umem.c	2007-12-04 11:11:30.000000000 +1100
> +++ ./drivers/block/umem.c	2007-12-04 11:11:42.000000000 +1100
> @@ -484,7 +484,8 @@ static void process_page(unsigned long d
>  		page->idx++;
>  		if (page->idx >= bio->bi_vcnt) {
>  			page->bio = bio->bi_next;
> -			page->idx = page->bio->bi_idx;
> +			if (page->bio)
> +				page->idx = page->bio->bi_idx;
>  		}
> 
>  		pci_unmap_page(card->dev, desc->data_dma_handle,
btw., if anyone feels so inclined, this file has quite a number of 
coding style issues, as per scripts/checkpatch.pl output:
 total: 28 errors, 54 warnings, 1221 lines checked
	Ingo