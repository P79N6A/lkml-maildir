Date: Sun, 18 Apr 2004 22:25:58 +0200
From: wim delvaux <>
Subject: 2.6.5-mm4 :  problems with sis 648 and AGPv3
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/4/18/80

Hi all,
I checked the archive and noticed that for some reason the sis 648 cards with 
a minor level < 5 do not do agpv3 well.  Using v2 the aperture size IS 
detected on v3 isn't
I wonder why because my cards SAYS it supports agp3 and my graphics cards says 
it too (about the cards and the agp -> according to xfree log)
So I checked source and added some printk statements to see what was going on.
In regular v2 level (using sis-... functions) the card returns in 
sis_get_driver a temp_size for 0x40.  This means that the code in the 
sis_get_driver that checks for apeture size the & ~0x03  comparison makes the 
test match. and selects the proper aperture of 64.
When 'forcing' the code to agp3 (because the bridge says it supports agp3) and 
hence using the generic_... functions from generic.c temp_size is 0xff09 and 
no entry in the aperture table matches.
So what might be wrong with the card/code/table or whatever to make a card 
that claims to be agv3 not being detected ?  Sure would like to find out and 
help finding out ...
W
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/