Date: Fri, 19 Oct 2007 08:50:08 +0200 (CEST)
From: Thomas Gleixner <>
Subject: Re: nVidia HPET force enable - merge requirements? (resend)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/10/19/43

On Fri, 19 Oct 2007, Carlos Corbacho wrote:
> Back in April, Mikko posted a patch to force enable the HPET on some nVidia 
> chipsets:
>
> A) There is now a force_hpet boot parameter in the x86 tree (mm branch) 
> (rather than relying on the solution in the earlier patches of a config 
> option).
There is still a config option for hpet. the hpet=force boot param is
there to allow force enable hpet for not documented chip set features.
> B) On the other hand, the force-quirk's are going into quirks.c, whilst 
> Mikko's patch requires PCI scanning in early_quirks.c (could the PCI scanning 
> be done in early_quirks.c and the actual HPET enabling handled in quirks.c 
> later - or if not, could this early quirk play be made to obey the force_hpet 
> boot option)?
It's not necessary to scan in early_quirks.c at all. The force hpet
code handles the late DECLARE_PCI_FIXUP_HEADER() based detection just
fine.
So if there are working quirks, please refactor them analogous to the
existing ones in quirks.c.
All undocumented chipset poking needs to be protected by the
hpet=force boot option, so the default is not to do scan for it.
Thanks,
        tglx
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/