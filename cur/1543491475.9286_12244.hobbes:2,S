Date: Tue, 30 Mar 1999 16:33:56 -0500 (EST)
From: "Richard B. Johnson" <>
Subject: Linux Makefile uses 'ls', causes problems with color-ls (PATCH)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/3/30/161

The main Makefile uses 'ls' to 'Make modules_install' If you have
color-ls installed, this will fail.
Here is a patch that doesn't use 'ls'
--- linux/Makefile.orig	Tue Mar 30 16:12:21 1999
+++ linux/Makefile	Tue Mar 30 16:27:49 1999
@@ -323,7 +323,8 @@
 	if [ -f FC4_MODULES   ]; then inst_mod FC4_MODULES   fc4;   fi; \
 	if [ -f IRDA_MODULES  ]; then inst_mod IRDA_MODULES  net;   fi; \
 	\
-	ls *.o > $$MODLIB/.allmods; \
+	rm -f $$MODLIB/.allmods; \
+	for x in *.o; do echo $$x>>$$MODLIB/.allmods; done; \
 	echo $$MODULES | tr ' ' '\n' | sort | comm -23 $$MODLIB/.allmods - > $$MODLIB/.misc; \
 	if [ -s $$MODLIB/.misc ]; then inst_mod $$MODLIB/.misc misc; fi; \
 	rm -f $$MODLIB/.misc $$MODLIB/.allmods; \
Cheers,
Dick Johnson
                 ***** FILE SYSTEM WAS MODIFIED *****
Penguin : Linux version 2.2.4 on an i686 machine (400.59 BogoMips).
Warning : It's hard to remain at the trailing edge of technology.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/