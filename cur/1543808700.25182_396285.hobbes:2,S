Date: Mon, 13 Feb 2006 00:03:15 +0100
From: Bernd Schubert <>
Subject: Re: 2.6.15 Bug? New security model?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/2/12/148

> diff --git a/fs/reiserfs/super.c b/fs/reiserfs/super.c
> index ef5e541..acafe32 100644
> --- a/fs/reiserfs/super.c
> +++ b/fs/reiserfs/super.c
> @@ -1124,7 +1124,9 @@ static void handle_attrs(struct super_bl
>  					 "reiserfs: cannot support attributes until flag is set in
> super-block"); REISERFS_SB(s)->s_mount_opt &= ~(1 << REISERFS_ATTRS);
>  		}
> -	} else if (le32_to_cpu(rs->s_flags) & reiserfs_attrs_cleared) {
> +	} else if ((le32_to_cpu(rs->s_flags) & reiserfs_attrs_cleared) &&
> +		(get_inode_sd_version(s->s_root->d_inode) == STAT_DATA_V2)) {
> +		/* Enable attrs by default on v3.6-native file systems */
>  		REISERFS_SB(s)->s_mount_opt |= (1 << REISERFS_ATTRS);
>  	}
>  }
I'm afraid that still doesn't solve the problem for me, I added two printk to 
be sure whats going on - get_inode_sd_version(s->s_root->d_inode) returns 
STAT_DATA_V2 for all of my partitions.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/