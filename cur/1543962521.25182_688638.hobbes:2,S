Date: Fri, 2 May 2008 22:57:35 +0200
From: Ondrej Zajicek <>
Subject: Re: [PATCH] via-rhine: suspend/resume bugfix
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/5/2/448

On Fri, May 02, 2008 at 10:32:46PM +0200, Pavel Machek wrote:
> > Hmm, i will fix it. And i found that the patch might break
> > wakeup-on-LAN. So please discard it.
> 
> IRQ line should not be neccessary for WoL...?
IRQ line is not neccessary (i hope), but the patch puts this to
suspend path:
/* Switch to loopback mode to avoid hardware races. */
iowrite8(rp->tx_thresh | 0x02, ioaddr + TxConfig);
/* Disable interrupts by clearing the interrupt mask. */
iowrite16(0x0000, ioaddr + IntrEnable);
/* Stop the chip's Tx and Rx processes. */
iowrite16(CmdStop, ioaddr + ChipCmd);
(this was copied from shutdown path of the driver)
I suppose that the first one might break WoL. Unfortunately
on my hardware the WoL don't work even without the patch.
-- 
Elen sila lumenn' omentielvo
Ondrej 'SanTiago' Zajicek (email: santiago@crfreenet.org)
OpenPGP encrypted e-mails preferred (KeyID 0x11DEADC3, wwwkeys.pgp.net)
"To err is human -- to blame it on a computer is even more so."