Date: 06 Sep 2002 10:47:23 -0500
From: Paul Larson <>
Subject: Re: pid_max hang again...
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/9/6/130

On Fri, 2002-09-06 at 10:39, Ingo Molnar wrote:
> 
> On 6 Sep 2002, Paul Larson wrote:
> 
> > It looks like this change dropped us back to the same error all this was
> > originally supposed to fix.  When you hit PID_MAX, get_pid() starts
> > looping forever looking for a free pid and hangs.  I could probably make
> > my original fix work on this very easily if you'd like.
> 
> yes please send a patch for this. Reintroduction of the looping bug was
> unintended.
> 
> > I wonder though, would it be possible to do this in a more simple way by
> > just throttling max_threads back to something more sane if it gets
> > defaulted too high?  Since it gets checked before we even get to the
> > get_pid call in copy_process().  That would keep the number of processes
> > down to a sane level without the risk.
> 
> this is a good approach as well, but now pid_max can be adjusted runtime
> so truncating max_threads as a side-effect looks a bit problematic. We
> should rather fail the fork() cleanly.
I agree, unless this was just going to be temporary.  I'll pull the
get_pid() fix up to the current version and send it in a bit.
Thanks,
Paul Larson
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/