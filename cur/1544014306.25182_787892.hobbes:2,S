Date: Tue, 06 Jan 2009 23:40:00 +0000
From: Dave <>
Subject: Re: 2.6.28: warn_slowpath in orinoco receive path
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2009/1/6/525

Andrey Borzenkov wrote:
> On 06 January 2009 23:02:06 Dave wrote:
> 
>> Since we have to use spinlock we should introduce an rx_lock
>> specifically to protect the list so the tasklet is not held up by
>> anything else the driver is doing. I'll put something together if you
>> don't get round to it first.
>>
> 
> You mean something like attached patch? Not sure if it worth it frankly.
That's what I meant. I forgot we took orinoco_lock in orinoco_interrupt
though, and that highlights the fact that I've neglected to ensure
orinoco_lock is held when orinoco_rx is called from the tasklet.
So the locking gets simpler and fixes more problems than the one you
noticed. But there's some extra cleanup to do. I'll submit a patch in a
second.
I'm surprised my wireless hasn't misbehaved in the last year.
Dave.