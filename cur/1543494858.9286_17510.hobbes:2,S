Date: 06 May 1999 09:11:27 -0400
From: Camm Maguire <>
Subject: Re: 2.2.6 and Sangoma WANPIPE
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/5/6/121

Greetings!  Well, we just had the same failure occur again with
2.2.7ac1.  Script output below.  This is just to follow up on the
previous discussion of possible causes.  Usually, this lockup is cured
(at least temporarily) by stopping the router, unloading the modules,
and restarting.
Thanks to all for your work on this product.
=============================================================================
ping fails
/proc/net/wanrouter/status --> connected
sppp      Link encap:Point-to-Point Protocol  
          inet addr:192.168.2.252  P-t-P:192.168.2.251  Mask:255.255.255.255
          UP POINTOPOINT RUNNING  MTU:1500  Metric:1
          RX packets:58924 errors:0 dropped:0 overruns:0 frame:0
          TX packets:58847 errors:0 dropped:630 overruns:0 carrier:0
          Collisions:0 
          Interrupt:10 Base address:0x360 Memory:c00ee000-c00effff 
Ppipemon statistics:
g
508 Board
Transmit buffer allocation in percent: 60
Use alternate adapter frequency: No
Set interface type to RS-232: No
Baud rate in bps: 0
Update transmit statistics( user data ): No
Update receive statistics( user data ): No
Timestamp received packets: No
Maximum Receive/Transmit Unit(MRU/MTU): 1500
Minimum remote MRU required on connection: 1500
u
Restart timer: 30
Authentication restart timer: 30
Authentication wait timer: 300
DCD/CTS failure detection timer: 100
Drop DTR duration timer: 1
Connection attempt timeout: 0
Max-Configure counter: 10
Max-Terminate counter: 2
Max-Failure counter: 5
Max-Authenticate counter: 10
a
Allow the use of PAP for inbound/outbound: No
Allow the use of CHAP for inbound/outbound: No
i
Enable the use of IP: Yes
Notify remote of locally-configure address: No
Local IP address( 0.0.0.0 = request ): 192.168.2.252
Request remote to provide local address: No
Provide remote with pre-configured address: No
Remote IP address: 192.168.2.252.
Require that remote provide an address: No
x
Enable the use of IPX: Yes
Include network number in Config-Request: No
Network number( 00000000 = request ): 00 00 00 00
Include local node # in Config-Request: No
Local node number( 000000000000 = request ): 00 00 00 00 00 00
Force remote to accept remote node number: No
Remote node number: 00 00 00 00 00 00
Include config-complete in Config-Request: No
Routing protocol: Request default( normally RIP/SAP )
Local router name( max. 47 characters ): 
s
PPP Phase: Network Layer
LCP State: Opened
IPCP State: Opened
IPXCP State: Opened
PAP State: Initial( Inactive )
CHAP State: Initial( Inactive )
n
Remote Maximum Receive Unit: 1500
Negotiated IP options: 80( IP Enabled )
Local IP address: 192.168.2.252
Remote IP address: 0.0.0.0
Negotiated IPX options: A0( IPX Enabled )
IPX network number: 00 00 00 00
Local IPX node number: 00 00 00 00 00 00
Remote IPX node number: 00 00 00 00 00 00
Remote IPX router name: 
Authentication status: No inbound authentication negotiated
Inbound PeerID: 
c
Local request by termination phase: No
DCD and/or CTS dropped: No
Disabled communications locally: No
Inbound/Outbound authentication failed: No
Failed to negotiate inbound auth. protocol with peer: No
Rejected peer's request for authentication: No
Peer rejected MRU option of config-request: No
MRU of peer was below required minumum: No
Rejected peer's LCP option(s) too many times: No
Rejected peer's IPCP option(s) too many times: No
Rejected peer's IPXCP option(s) too many times: No
m
DCD: High
CTS: High
ds
                                 Total number of If_Send entries:  59631
                       Number of If_Send entries with SKB = NULL:  0
Number of If_Send entries with broadcast addressed pkt discarded:  0
Number of If_Send entries with multicast addressed pkt discarded:  0
             Number of If_Send entries with CRITICAL_RX_INTR set:  0
   Number of If_Send entries with Critical set and pkt discarded:  1
                  Number of If_Send entries with Device Busy set:  0
              Number of If_Send entries with Device Busy Timeout:  0
             Number of If_Send entries with DRIVER STATS Request:  30
           Number of If_Send entries with PTPIPE MONITOR Request:  123
                 Number of If_Send entries with WAN Disconnected:  630
                   Number of If_Send entries with Protocol Error:  0
              Number of If_Send entries with Adapter Send Failed:  0
       Number of If_Send entries with Transmit Interrupt Enabled:  0
              Number of If_Send entries with Adapter Send passed:  58847
               Number of times host irq left disabled in If_Send:  0
di
                                    Number of ISR entries:   59025
                  Number of ISR entries with Critical Set:   0
                              Number of Receive Interrupt:   58924
                             Number of Transmit Interrupt:   0
              Number of ISR entries for Interrupt Testing:   101
                             Number of Spurious Interrupt:   0
       Number of times Transmit Interrupts Enabled in ISR:   0
         Number of Receive Interrupts with Corrupt Buffer:   0
              Number of Receive Interrupts with No socket:   0
     Number of Receive Interrupts for DRIVER STAT Request:   0
  Number of Receive Interrupts for PTPIPE MONITOR Request:   0
 Number of Receive Interrupts with Buffer Passed to Stack:   58924
     Number of Receive Interrupts with Device not started:   0
    Number of Transmit Interrupts with Device not started:   0
dg
           Number of PTPIPE Monitor call with Kmalloc error:  0
      Number of PTPIPE Monitor call with Adapter Type error:  0
         Number of PTPIPE Monitor call with Direction Error:  0
 Number of PTPIPE Monitor call with Adapter Command Timeout:  0
      Number of PTPIPE Monitor call with Adapter Command OK:  106
  Number of PTPIPE Monitor call with pkt passed to Adapter:   0
    Number of PTPIPE Monitor call with pkt passed to Stack:   123
              Number of PTPIPE Monitor call with no socket:   0
             Number of DRIVER STAT call with Kmalloc error:   0
   Number of DRIVER STAT call with Adapter Command Timeout:   0
        Number of DRIVER STAT call with Adapter Command OK:   24
     Number of DRIVER STAT call with pkt passed to Adapter:   0
       Number of DRIVER STAT call with pkt passed to Stack:   35
                 Number of DRIVER STAT call with no socket:   0
                                    Number of Poll Entries:   21253436
                  Number of Poll Entries with Critical set:   0
                          Number of Poll Entries Processed:   1164724
            Number of times host irq left disabled in Poll:   0
j
    Router UP Time:  44 hour(s)
Invoking dial backup at Wed May 5 12:40:18 EDT 1999
=============================================================================
-- 
Camm Maguire			     			camm@enhanced.com
==========================================================================
"The earth is but one country, and mankind its citizens."  --  Baha'u'llah
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/