Date: Fri, 4 Feb 2005 12:18:27 +0200
From: "Michael S. Tsirkin" <>
Subject: Re: [RFC] Linux Kernel Subversion Howto
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/2/4/66

Hi, Stelian!
One thing everyone creating kernel patches with subversion
must be aware of, is the fact that the subversion built-in diff command does
not understand the gnu diff -p flag (or indeed, any gnu diff flags at all,
with the exception of -u, which is the default anyway).
Thus you must use an external diff command to create kernel patches,
passing the -up flags to gnu diff, otherwise the patch is much less readable. 
There are two good ways to do this that I know of:
1. Remember to always generate patches with:
	svn diff --diff-cmd=/usr/bin/diff -x -up
2. Make subversion use gnu diff -up by defult to generate patches.
To do this, create a script that runs diff -up, passing any additional
parameters exactly as they are:
cat > /usr/bin/svndiff << EOF
#!/usr/bin/perl
exec("diff","-up",@ARGV);
EOF
chmod +x /usr/bin/svndiff
And set it as the default diff command in subversion:
cat >> ~/.subversion/config << EOF
[helpers]
diff-cmd = /usr/bin/svndiff
EOF
Tested with subversion 1.1.3.
-- 
MST - Michael S. Tsirkin
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/