Date: Thu, 2 Mar 2000 20:33:23 +0100 (CET)
From: Andrea Arcangeli <>
Subject: Re: Linux 2.2.15pre12 [VM fixes]
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/3/3/162

Alan, the 2.2.15pre12 VM is not working correctly. I just complained about
that changes a few weeks ago and here are the first two bug reports
(different):
On Thu, 2 Mar 2000, Burton Windle wrote:
>
>Date: Thu, 2 Mar 2000 21:00:54 -0500 (EST)
>From: Burton Windle <bwindle@atlantic.net>
>To: alan@lxorguk.ukuu.org.uk
>Cc: andrea@suse.de
>Subject: 2.2.15pre12: OOM comments
>
>Is the OOM killing turned off by default on 2.2.15pre12?  I had just
>booted into it, and the first thing I did (besides noticed how
><linux/version.h> was wrong) was to telnet in as a normal user, and use
>all the RAM I could (perl -e '@a=(a..zzzzzzzzzzz').
>
>I logged in as root on the console, and watched top.  after a few seconds,
>my 64 RAM dwindled to 1047k free, and my 40 meg swap dropped to 0kfree.
>However, the OOM-killer never appeared, and the ram-hungry perl kept on
>living.  I had to alt+sysrq+k (which, btw, killed init ).
>
>Wouldn't one process using all the ram+swap be an ideal target for an
>OOM-Killer to kill?
>
>ps. while the machine stood there memory-less, I noticed that if I pinged
>it from a Win98 box with packets larger than 1474 bytes, it wouldn't
>repond; they had to be smaller than that.
>
>Intel P233mmx, 64 RAM, 40 swap, 2.2.15pre12, Slackware4, RealTek 8029 eth0
>
>Thanks,
>   Burton Windle
>
>
>
>
>
On Fri, 25 Feb 2000, Arjan van de Ven wrote:
>
>Date: Fri, 25 Feb 2000 18:43:32 +0100 (CET)
>From: Arjan van de Ven <arjan@fenrus.demon.nl>
>To: Andrea Arcangeli <andrea@suse.de>
>Subject: 2.2.15pre9 and virtual memory
>
>Hi,
>
>I am running tests on a SMP system with kernel 2.2.15pre9, and I see 
>some behavior I cannot explain. My machine has 96 Mb ram and 128 Mb
>swapspace, and the systemload is something like
>
>while (1) {
>	make mrproper
>	make randomconfig
>	make dep
>	make bzImage 
>}
>
>Once in a while (about every 4 hours or so), the gcc in the "make bzImage"
>aborts with the message "Out of virtual memory". 
>
>Can this be caused by bad hardware, or is this a bug/problem with the 
>memory-management in the kernel?
>(I can imagine that there are too many dirty pages, and the swap-IO to
>disk isn't fast enough, so no memory is available immediately. This would
>be an undiserable situation though...)
>
>Greetings,
>   Arjan van de Ven
>
>
>
Arjan just told me 2.2.14aa* is rock solid in the same conditions.
These are the VM changes that I propose for the official 2.2.15. They are
against 2.2.15pre12.
	
ftp://ftp
.*.kernel.org/pub/linux/kernel/people/andrea/proposed/v2.2/2.2.15pre12/VM-1.gz
Comments are welcome.
Thanks.
Andrea
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/