Date: Mon, 5 Mar 2007 14:59:18 +0100
From: Ingo Molnar <>
Subject: Re: [patch] paravirt: VDSO page is essential
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/3/5/152

* Andi Kleen <ak@suse.de> wrote:
> I think we would need to have a paravirt ops callback to decide this 
> first. But it doesn't look critical to me anyways.
well, it's critical to me in two ways: 1) to make the i386 paravirt code 
clean 2) to have a proper VDSO for a KVM paravirtual guest. The original 
change is also bad because it changes how a Linux guest behaves: it 
turns off the vdso by default, and disables the compat VDSO. I.e. it's a 
bad performance step backwards if CONFIG_PARAVIRT is enabled (uses int 
$0x80 instead of sysenter), which hurts only KVM and basically none of 
the other hypervisors. It also muddifies the VDSO picture wrt. 
virtualization.
i.e. it hurts the sane stuff and benefits the crappy stuff, and my 
change undoes that. That's enough for me to call it critical ;-)
	Ingo
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/