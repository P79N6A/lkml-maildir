Date: Thu, 26 Aug 2004 23:59:47 +0300
From: "O.Sezer" <>
Subject: 2.4.28-pre2 and ntfs-2.1.6b ?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/8/26/391

Hi all:
With 2.4.28-pre2, ntfs-2.1.6b from linux-ntfs site
started failing to compile at aops.c:
aops.c: In function `ntfs_read_block':
aops.c:315: parse error before "else"
-- or in case of gcc3.4 --
aops.c:315: error: syntax error before "else"
This happens with gcc-3.2.2 and gcc-3.4.0
and can be fixed by:
--- aops.c.BAK	2004-08-26 19:35:11.000000000 +0300
+++ aops.c	2004-08-26 21:41:53.000000000 +0300
@@ -310,10 +310,11 @@
  		return 0;
  	}
  	/* No i/o was scheduled on any of the buffers. */
-	if (likely(!PageError(page)))
+	if (likely(!PageError(page))) {
  		SetPageUptodate(page);
-	else /* Signal synchronous i/o error. */
+	} else { /* Signal synchronous i/o error. */
  		nr = -EIO;
+	}
  	unlock_page(page);
  	return nr;
  }
The very same code used to compile fine with
2.4.27 without any changes to it. I can't see
where the problem is (it's 23:57 here ;)).
Can anyone tell, please?
Regards,
Ozkan Sezer
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/