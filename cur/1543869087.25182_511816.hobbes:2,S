Date: Thu, 22 Feb 2007 01:58:40 -0500
From: Jeff Garzik <>
Subject: Re: [PATCH] ACPI driver support for pata
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/2/22/20

Robert Hancock wrote:
> Alan wrote:
>> - Add a driver for motherboard ACPI method devices
>> - Link it after normal drivers so ACPI is not preferred
>> - Hook the AMD driver to prefer ACPI for the Nvidia devices if ACPI is
>> active
>> - While we are at it fix up the simplex clear the AMD driver.
>>
>> Depends upon the set_mode -> do_set_mode wrapper patch
>>
>> Signed-off-by: Alan Cox <alan@redhat.com>
> 
> I tried out 2.6.21-rc1 with the pata_acpi patch. First off, when you 
> enable pata_acpi, it appears that the Fedora mkinitrd stuff decides that 
> that should be loaded as the first driver. On boot it promptly attempts 
> to attach to all of the ATA controllers, including the nForce SATA 
> controllers, which somehow it fails to actually drive causing a failure 
> to mount the root filesystem. I got around that by blacklisting 
> pata_acpi in /etc/modprobe.conf before installing the kernel and 
> un-blacklisting it afterwards, so it wouldn't make the initrd try and 
> load it, but there must be a better solution.
> 
> It does seem to drive the PATA controllers, but the cable detection 
> doesn't seem to be working:
> 
> scsi5 : pata_acpi
> ata5.00: ATAPI, max UDMA/66
> ata5.00: limited to UDMA/33 due to 40-wire cable
> ata5.00: configured for UDMA/33
Honestly I don't think pata_acpi is the best way to go.
Unless we know /nothing/ about the controller (not true, in sata_nv 
case), I think it would be better to initiate ACPI actions from specific 
drivers, rather than forcing the user to switch from pata_amd to pata_acpi.
	Jeff
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/