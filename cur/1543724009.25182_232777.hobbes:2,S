Date: Wed, 7 Jul 2004 15:20:15 -0700
From: "John W. Ross" <>
Subject: Increasing IDE Channels
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/7/7/221

Greetings,
I've spent several days working to increase the number of IDE channels above
the 10 allowed in the kernel.  Ideally I would like to raise the limit to
14. (to accomidate the 2 interfaces on the motherboard and 6 cheap dual
channel ide cards) Although I've found some references to others who would
like to do this, I can find noone who has actually both accomplished the
task and mentioned their success.  I decided to start small and try to get
up to 12.  To do this I:
Changed ide.h:
IDE_NR_PORTS  (10)
to
IDE_NR_PORTS  (12)
In major.h I added:
#define IDE10_MAJOR     240
#define IDE11_MAJOR     241
in ide.c I changed
static const u8 ide_hwif_to_major[] = { IDE0_MAJOR, IDE1_MAJOR,
     IDE2_MAJOR, IDE3_MAJOR,
     IDE4_MAJOR, IDE5_MAJOR,
     IDE6_MAJOR, IDE7_MAJOR,
     IDE8_MAJOR, IDE9_MAJOR };
to :
static const u8 ide_hwif_to_major[] = { IDE0_MAJOR, IDE1_MAJOR,
     IDE2_MAJOR, IDE3_MAJOR,
     IDE4_MAJOR, IDE5_MAJOR,
     IDE6_MAJOR, IDE7_MAJOR,
     IDE8_MAJOR, IDE9_MAJOR,
     IDE10_MAJOR, IDE11_MAJOR)
This was on a clean 2.6.7 kernel download.  I then ran menuconfig and the
only change I made was to select the processor as AMD Athlon.  After
compiling I still get the "too many ide interfaces, no room in table".
I'm certianly no kernel hacker at heart, so I may be trying to do the
impossible/impractical.
1.) Could someone please explain why there is a limit of 10 interfaces (is
this something that I shouldn't even try)?
2.)What did I miss on moving to 12?
3.) I could understand a limit of 12, as hda, hdb, hdc... hdw, hdx, would
only allow a possible 13th interface, but at 14 you would totally exhaust
the alphabet, but is that still relevant with the newer method of
enumerating partitions?
4.) Is there a kernel patch available already that I'm ignorant of?
5.) Are there references that I should review elsewhere?
6.) I generally use Mandrake but if there is another distribution patched to
allow additional interfaces pray tell.
Thank you for you time reading this, and for any help you may be able to
provide.
John
To respond, just click reply.  The spammers will get the address regardless
of anything I do to prevent it!
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/