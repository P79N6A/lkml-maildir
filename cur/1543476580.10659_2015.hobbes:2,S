Date: Sun, 10 Jan 1999 04:28:01 +0000
From: Jamie Lokier <>
Subject: Re: Open by inode?  (was Re: knfsd)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/1/11/16

On Sat, Jan 09, 1999 at 06:41:40PM -0500, Alexander Viro wrote:
> Jamie Lokier wrote:
> > There's really no need for extra syscalls for open-by-inode.
> > Implement /proc/inode/NNN instead...
> 
> 	I hope you are kidding, right? Do you realize *what* size this
> thing will have? Not to mention the fact that normal semantics wrt removal
> when the last reference goes away will be killed on spot. The main problem
> with opening by inode is in interaction with dcache. You'll introduce a
> slew of races and I pity one trying to fix *that* mess. Please, don't.
Of course, /proc/inode is for opening files, not for listing them.
If it were to list anything, it would list open files (the same ones as
in /proc/[0-9]*/fd), restricted according to the current process
permissions just as /proc/[0-9]*/fd are.  Unlike /proc/[0-9]*/fd, files
would appear as themselves.
It would probably make sense for it to mirror the structure of the mount
points, so e.g. /proc/inode/var/spool/NNN gets inode NNN on filesystem
/var/spool.
I still don't see how open-by-inode is useful, though.
The latest news servers, it is said, are fast enough without it.
-- Jamie
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/