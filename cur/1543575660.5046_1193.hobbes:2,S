Date: Tue, 12 Dec 2000 14:28:01 +0000 (GMT)
From: Riley Williams <>
Subject: 2.2.18: Patch to SysRq code
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/12/12/92

Hi Alan.
The enclosed patch deals with two problems relating to the Magic SysRq
function, as follows:
 1. One of my pet peeves with SysRq as implemented is the apparently
    random order theoptions as listed in the SysRq help list. This
    patch sorts that list into case-insensitive alphabetical order.
 2. According to the above-mentioned help list, the log level can be
    set in the range 0 to 8. The code additionally allows log level
    9 to be set, so this was added to the list.
Best wishes from Riley.
diff -urN linux-2.2.18.old/drivers/char/sysrq.c linux-2.2.18/drivers/char/sysrq.c
--- linux-2.2.18.old/drivers/char/sysrq.c	Thu May  4 01:16:39 2000
+++ linux-2.2.18/drivers/char/sysrq.c	Tue Dec 12 13:23:23 2000
@@ -134,16 +134,18 @@
 		orig_log_level = 8;
 		break;
 	default:					    /* Unknown: help */
-		if (kbd)
-			printk("unRaw ");
+		printk("Boot kIll killalL loglevel0-9 ");
+		if (sysrq_power_off)
+			printk("Off ");
 #ifdef CONFIG_VT
 		if (tty)
 			printk("saK ");
 #endif
-		printk("Boot ");
-		if (sysrq_power_off)
-			printk("Off ");
-		printk("Sync Unmount showPc showTasks showMem loglevel0-8 tErm kIll killalL\n");
+		printk("showMem showPc showTasks Sync tErm Unmount ");
+		if (kbd)
+			printk("unRaw ");
+		printk("\n");
+
 		/* Don't use 'A' as it's handled specially on the Sparc */
 	}
 