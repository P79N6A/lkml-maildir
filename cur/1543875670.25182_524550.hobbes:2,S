Date: Tue, 27 Mar 2007 23:02:36 +0200
From: Thomas Meyer <>
Subject: Re: appletouch quirk doesn't run at resume
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/3/27/263

Jiri Kosina schrieb:
> On Sun, 18 Mar 2007, Thomas Meyer wrote:
>
> 
>> Appletouch is bound to the device:
>> 
>
> OK, so the quirk actually works fine ...
> 
Yes, it works fine, but...
> 
>> But the X server touchpad driver doesn't work anymore, that means i 
>> can't emulte a right click by tapping with 3 fingers on the mouse pad. 
>> after restarting x the mouse driver works again. So i think this is 
>> maybe a problem in X?
>> 
>
> ... but there is something apparently wrong either with the appletouch 
> driver or X. Could you test via evtest whether the events are properly 
> generated by the kernel? If they do, I'd say it is almost certainly X bug.
> 
It seems, that after the resume all usb devices gets removed and plug in
again (virtually!). This results in a new input device name:
before suspend and resume:
appletouch Geyser 3 inited.
input: appletouch as /class/input/input2
after resume:
Restarting tasks ... <6>usb 1-2: USB disconnect, address 3
PM: Removing info for No Bus:usbdev1.3_ep83
PM: Removing info for usb:1-2:1.0
PM: Removing info for No Bus:usbdev1.3_ep81
input: appletouch disconnected
[cut]
PM: Adding info for No Bus:usbdev1.4_ep83
PM: Adding info for usb:1-2:1.1
appletouch Geyser 3 inited.
input: appletouch as /class/input/input15
This change confuses the X synaptics driver:
Touchpad no synaptics event device found (checked 11 nodes)
Touchpad The /dev/input/event* device nodes seem to be missing
(EE) xf86OpenSerial: Cannot open device /dev/input/event2
        No such file or directory.
(WW) Touchpad: cannot open input device
And so X falls back to my second pointer device which is a UsbMouse
under /dev/input/mice
One could say that the synaptics driver rightly complains about the
missing event2 device!
So is this a bug in the X synaptics driver?
Comments are welcome.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/