Date: Tue, 5 Sep 2000 22:53:23 +0200 (CEST)
From: Philipp Matthias Hahn <>
Subject: [PATCH] linux-2.4.0-test7/driver/sbus/char/vfc_dev.c
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/9/6/113

Hello!
I'm just trying to compile a kernel for my sparc and found a bug in the
above file:
In line 170:
        dev->de = devfs_register (devfs_handle, devname, DEVFS_FL_DEFAULT,
                                  VFC_MAJOR, instance,
                                  S_IFCHR | S_IRUSR | S_IWUSR,
                                  &vfc_fops, NULL);
the call needs
	static struct file_operations vfc_fops;
which is not defined until line 642. A forward declaration at the
beginning fixes the problem:
--- linux/drivers/sbus/char/vfc_dev.c.orig      Mon Sep  4 20:36:04 2000
+++ linux/drivers/sbus/char/vfc_dev.c   Mon Sep  4 20:31:28 2000
@@ -42,6 +42,7 @@
 #include "vfc.h"
 #include <asm/vfc_ioctls.h>
 
+static struct file_operations vfc_fops;
 static devfs_handle_t devfs_handle = NULL;  /*  For the directory  */
 struct vfc_dev **vfc_dev_lst;
 static char vfcstr[]="vfc";
The mentioned author can't be reached anymore so I'm sending this directly
to this list.
Philipp
-- 
  / /  (_)__  __ ____  __ Philipp Hahn
 / /__/ / _ \/ // /\ \/ /
/____/_/_//_/\_,_/ /_/\_\ pmhahn@titan.lahn.de
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/