Date: Tue, 13 Jul 1999 22:49:11 +0200 (MET DST)
From: Gerard Roudier <>
Subject: Re: littel Bug 2.2.10 make menuconfig and Tekram SCSI
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/7/13/144

On Tue, 13 Jul 1999, Joachim Knoke wrote:
> Hello folks,
> 
> with "make menuconfig" a Tekram SCSI Card 390 is not supported.
> 
> The problem is that 
> 
> CONFIG_SCSI_NCR53C8XX_NVRAM_DETECT=y
The driver had too many options, in my opinion an taste, and I have
decided to remove some that were not absolutely needed from the config
procedures. The nvram stuff can be disabled by the nvram=n driver option, 
either at boot-up or at module load time. 
At the time I took this decision, the Tekram boards that seem to make
problems didn't exist yet. I donnot have time neither appropriate hardware
to add nvram support for this board, and for now nobody has done the work.
I have studied this stuff by looking into Tekram driver sources and it
seem to me not that hard to add nvram support for newest Tekram boards. 
The problem is that newest Tekram boards use different NVRAMs, that, in
fact, should be readable by a procedure that is very similar to the one
used for reading SYMBIOS nvrams. 
Tekram support Linux by making available their own drivers for Linux. It
is their choice and I respect it. But I am not a magician, neither I am so
altruist that I will both spend time and money for supporting hardware I
donnot need, and that the vendor (Tekram) does seem to prefer to support
by it-self. The SCSI part of the chip is supported by the ncr53c8xx and
sym53c8xx drivers, since this one is inside the silicium provided by
SYMBIOS and cannot be changed.
> is not configurable by make menuconfig. (it was in 2.0.36)
> 
> drivers/scsi/README.ncr53x8 lead me to the solution.
Basically, SYMBIOS does document their GPIO wiring and vendors that want
to be compatible with SYMBIOS drivers and tools (SDMS) must follow some
compatibility with SYMBIOS implementation of GPIO wiring, or at least
should not allow a probe procedure to break something. 
Tekram elects to implement something different from SYMBIOS, but AFAIK
other vendors of board based on SYMBIOS chips seem to follow SYMBIOS GPIO
wiring, and doing so, support SYMBIOS drivers, unlike Tekram equivalent
boards. 
> I had to edit .config, added the line above. Thereafter the "can not mount
> root fs" message does not appear, the SCSI driver is loaded as suggested
> and everything works fine. As I am not a programmer, i am not able to fix
> this myself. Hope its small work to one of you. 
GÃ©rard.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/