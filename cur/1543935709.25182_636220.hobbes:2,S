Date: Wed, 09 Jan 2008 11:51:55 +0100
From: Marc Kleine-Budde <>
Subject: Re: Possible 2.6.24-rc7 issue w/respect to pthreads
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/9/95

tom@kavaga.com wrote:
> To Whom It May Concern,
> 
> After I patched my 2.6.23 kernel to 2.6.24-rc7 this morning, I noticed
> some odd behavior with respect to POSIX threads in a test program I had
> written (originally to test epoll.)
> 
> The behavior is as follows:
> 
> 1.  main() creates a new thread of execution with pthread_create
> 2.  thread_func() immediately calls pthread_detach(), which is supposed to
> ensure that thread resources are cleaned up when the thread terminates.
> 3.  The spawned thread sleeps and then prints a message "got here"
> 4.  The main thread calls pthread_join().  According to the POSIX
> documentation, this should suspend execution until the spawned thread has
> terminated.
Quoting the man page of pthread_detach():
After pthread_detach completes, subsequent attempts to perform
pthread_join on th will fail.
regard - Marc
-- 
 Marc Kleine-Budde              Phone: +49-231-2826-924
 Pengutronix - Linux Solutions for Science and Industry
 Vertretung West/Dortmund     
http://www.pengutronix.de
[unhandled content-type:application/pgp-signature]