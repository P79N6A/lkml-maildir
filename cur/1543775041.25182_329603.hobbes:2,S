Date: Tue, 28 Jun 2005 22:03:30 +0200
From: Jörn Engel <>
Subject: Re: wrong madvise(MADV_DONTNEED) semantic
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/6/28/332

On Tue, 28 June 2005 21:41:28 +0200, Samuel Thibault wrote:
> Robert Love, le Tue 28 Jun 2005 15:23:43 -0400, a écrit :
> > I think we need to resolve the differences between the man pages,
> > comments, expected user behavior, kernel implementation, POSIX standard,
> > and what other OS's do.  Figure out what to do, then unify everything.
> 
> Well, posix says data should be kept. The solaris man page for madvise,
> since it proposes a MADV_FREE case too do agree with posix.
Plus, common sense agrees with posix.  An implementation of madvice
that doesn't do anything should be perfectly sane and functionally
equivalent to any other implementation.  Only differences should be in
performance.
Dropping dirty pages is a clear functional difference.
> I've tested the program (thanks Andy) on solaris 5.8, it does work fine.
> On OSF1 it failed on the anonymous case.
> 
> Some people may want their data to be kept, so the safe side is to keep
> data safe, i.e. both kernel and manpage be corrected, but leave a bug
> notice in the manpage about previous kernels.
Sounds sane.
Jörn
-- 
There's nothing better for promoting creativity in a medium than
making an audience feel "Hmm ­ I could do better than that!"
-- Douglas Adams in a slashdot interview
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/