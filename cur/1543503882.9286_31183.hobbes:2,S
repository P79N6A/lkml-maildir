Date: Sun, 25 Jul 1999 01:41:47 -0600 (MDT)
From: Jason Gunthorpe <>
Subject: Re: real-time threaded IO with low latency (audio)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/7/25/13

On Sun, 25 Jul 1999, Oliver Xymoron wrote:
> No, I mean spooling to a normal filesystem. Ext2 is fast _on average_. It
> will get close to the disk bandwidth on average.
> 
> But realtime is not about averages, it's about the worst case. The worst
> case for filesystems can be pretty ugly - there are a lot of data
> structures that have to be updated atomically which means there are locks
Some time ago on the QNX news groups someone was having this problem with
QNX - they wanted to stream video onto disk at very nearly the full
bandwidth of the drive (8Meg/sec I think). They found that QNX faultered
and designed a test case that measured the best/worst/average for a write
call - turned out the worst case was just awefull - 2-3 times larger then
their upper limit and much larger than the average case.
I don't know exactly what the QNX developers did, but they actually did
fix it, they brought the worst case for write down into an acceptable
region. It was about at this time that their pre-allocation scheme showed
up in the file system so maybe that had something to do with it. 
They must have some resticitions, a largely unfragemented drive, AV disks
and only a single application are some likely candiates. But the people
who needed this simply accepted those limitations - I imagine if you
wanted to do this on linux you'd start with a dedicated AV drive (no ecc,
or thermal recalibrations - ment for realtime video streaming) that didn't
have swap or the root filesystem on it..
Jason
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/