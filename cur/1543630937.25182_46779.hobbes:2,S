Date: Sun, 19 May 2002 17:04:15 +0100 (BST)
From: Alan Cox <>
Subject: Re: MTRR problem in 2.4.7+ on Athlon+VIA? XFree86 can't write-combine
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/5/19/49

> (WW) NV(0): Failed to set up write-combining range (0xd4000000,0x800000)
> to XFree86.0.log. XFree86 works, but things like MPEG playback seem a 
> bit slow.
Thats more likely because the Nv driver doesn't support Xv or Xvmc 
extensions, which most other drivers have and give you nice accelerated
overlay/colourspace/scaling for video playback.
> I assume this is because cat /proc/mtrr looks like this before X starts:
> 
> reg00: base=0x00000000 (   0MB), size= 128MB: write-back, count=1
> reg01: base=0xd0000000 (3328MB), size= 128MB: uncachable, count=1
> 
>  From reading the mtrr doco I gather that because 0xd0000000 + 128mb is 
> already set up as an uncachable range, "nv" can't set up 0xd4000000 + 
> 8mb as write-combining.
You can tweak the ranges yourself, deleting the uncachable one and putting
it back as two ranges
> I've searched all through the 2.4.7-10 source code and can't see 
> anything that I'm using that explicitly asks for MTRR_TYPE_UNCACHABLE, 
> so I'm a bit perplexed. I've had a good look around the web and 
The BIOS sets them up for you
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/