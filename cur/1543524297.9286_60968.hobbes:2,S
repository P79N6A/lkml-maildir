Date: Mon, 31 Jan 2000 20:34:14 -0500 (EST)
From: Mike Porter <>
Subject: Re: Who else with a PIIX is getting -- (Re: 2.3.41 / hda: lost interrupt)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/2/1/20

On Mon, 31 Jan 2000, Steve Tooke wrote:
> On Mon, 31 Jan 2000 08:00:43 Andre Hedrick wrote:
> > 
> > If everyone is haveing problems with 2.3.41 piix.c code, please graba a
> > copy out of 2.3.40 and do a direct replacement.
> > 
> 
> I've been getting lost interrupts on both hda and hdb, I have also 
> experienced a lost interrupt on eth0 using 2.3.41.  Each time this has 
I built a non-smp kernel.  Same ide-dma timeout problem.
I mounted a partition r/w and grabbed dmesg.  The messages at the
end are:
hda: timeout waiting for DMA
hda: irq timeout: status=0xd0 { Busy }
hda: DMA disabled
ide0: reset: success
This kernel was built with ide.2.2.14.20000115.patch applied.
I enabled DMA for my cdrom drive using hdparm, and received
the same error.
See my last note for more information.
Mike
Linux version 2.2.14 (root@thedog.mbp.udel.edu) (gcc version egcs-2.91.66 19990314/Linux (egcs-1.1.2 release)) #1 Mon Jan 31 19:42:53 EST 2000
Detected 501144975 Hz processor.
Console: colour VGA+ 80x25
Calibrating delay loop... 499.71 BogoMIPS
Memory: 128132k/131008k available (920k kernel code, 416k reserved, 1500k data, 40k init)
Dentry hash table entries: 16384 (order 5, 128k)
Buffer cache hash table entries: 131072 (order 7, 512k)
Page cache hash table entries: 32768 (order 5, 128k)
CPU: Intel Pentium III (Katmai) stepping 03
Checking 386/387 coupling... OK, FPU using exception 16 error reporting.
Checking 'hlt' instruction... OK.
POSIX conformance testing by UNIFIX
mtrr: v1.35a (19990819) Richard Gooch (rgooch@atnf.csiro.au)
PCI: PCI BIOS revision 2.10 entry at 0xf0730
PCI: Using configuration type 1
PCI: Probing PCI hardware
Linux NET4.0 for Linux 2.2
Based upon Swansea University Computer Society NET3.039
NET4: Unix domain sockets 1.0 for Linux NET4.0.
NET4: Linux TCP/IP 1.0 for NET4.0
IP Protocols: ICMP, UDP, TCP
TCP: Hash tables configured (ehash 131072 bhash 65536)
Initializing RT netlink socket
Starting kswapd v 1.5 
Detected PS/2 Mouse Port.
Serial driver version 4.27 with no serial options enabled
ttyS00 at 0x03f8 (irq = 4) is a 16550A
ttyS01 at 0x02f8 (irq = 3) is a 16550A
pty: 256 Unix98 ptys configured
Real Time Clock Driver v1.09
Uniform Multi-Platform E-IDE driver Revision: 6.30
PIIX4: IDE controller on PCI bus 00 dev 21
PIIX4: not 100% native mode: will probe irqs later
    ide0: BM-DMA at 0xd800-0xd807, BIOS settings: hda:DMA, hdb:pio
    ide1: BM-DMA at 0xd808-0xd80f, BIOS settings: hdc:pio, hdd:DMA
hda: ST39140A, ATA DISK drive
hdd: ATAPI CD ROM DRIVE 50X MAX, ATAPI CDROM drive
ide0 at 0x1f0-0x1f7,0x3f6 on irq 14
ide1 at 0x170-0x177,0x376 on irq 15
hda: ST39140A, 8693MB w/448kB Cache, CHS=1108/255/63, UDMA(33)
hdd: ATAPI 50X CD-ROM drive, 128kB Cache, UDMA(33)
Uniform CDROM driver Revision: 2.56
Floppy drive(s): fd0 is 1.44M
FDC 0 is a post-1991 82077
(scsi0) <Adaptec AIC-7890/1 Ultra2 SCSI host adapter> found at PCI 6/0
(scsi0) Wide Channel, SCSI ID=7, 32/255 SCBs
(scsi0) Downloading sequencer code... 385 instructions downloaded
scsi0 : Adaptec AHA274x/284x/294x (EISA/VLB/PCI-Fast SCSI) 5.1.21/3.2.4
       <Adaptec AIC-7890/1 Ultra2 SCSI host adapter>
scsi : 1 host.
(scsi0:0:0:0) Synchronous at 10.0 Mbyte/sec, offset 15.
  Vendor: CONNER    Model: CFP2105S  2.14GB  Rev: 2B4B
  Type:   Direct-Access                      ANSI SCSI revision: 02
Detected scsi disk sda at scsi0, channel 0, id 0, lun 0
(scsi0:0:3:0) Synchronous at 5.0 Mbyte/sec, offset 8.
  Vendor: HP        Model: HP35470A          Rev: 1109
  Type:   Sequential-Access                  ANSI SCSI revision: 02
(scsi0:0:5:0) Using asynchronous transfers.
  Vendor: IBM       Model: CDRM00201     !F  Rev: 0724
  Type:   CD-ROM                             ANSI SCSI revision: 02
scsi : detected 1 SCSI disk total.
SCSI device sda: hdwr sector= 512 bytes. Sectors= 4194304 [2048 MB] [2.0 GB]
Partition check:
 sda: sda1 sda2
 hda: hda1 hda2 hda3 < hda5 hda6 hda7 hda8 >
VFS: Mounted root (ext2 filesystem) readonly.
Freeing unused kernel memory: 40k freed
Adding Swap: 130748k swap-space (priority -1)
Adding Swap: 130748k swap-space (priority -2)
Adding Swap: 135160k swap-space (priority -3)
Soundblaster audio driver Copyright (C) by Hannu Savolainen 1993-1996
SB 4.13 detected OK (220)
<SoundBlaster EMU8000 (RAM8192k)>
st: bufsize 32768, wrt 30720, max buffers 4, s/g segs 16.
Detected scsi tape st0 at scsi0, channel 0, id 3, lun 0
hda: timeout waiting for DMA
hda: irq timeout: status=0xd0 { Busy }
hda: DMA disabled
ide0: reset: success
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/