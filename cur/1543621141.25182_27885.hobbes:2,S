Date: Wed, 13 Feb 2002 14:26:46 -0600
From: kelley eicher <>
Subject: Re: scsi abort 0x2002 and eth0: too much work on a dual amd 760mpx system
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/2/13/233

rik-
i have done extensive cpu load + i/o testing on the 760mp machine. it handles
perfectly under very high cpu activity. one thing i should mention though is
that neither of these chipsets, amd 760mp and amd760mpx, work with multi-
processor specification 1.4 under linux. i had several problems using m.p.s.
1.4 on the 760mp in dual processor mode and the 760mpx wouldn't even boot
with m.p.s. 1.4 enabled.
as an fyi to anyone listening, the 760mpx crashed while loading any smp linux
kernel during apic timer calibration.
so my suggestion rik, if you haven't done this already, is to change the
multi- processor specification in your bios from 1.4 to 1.1.
-kelley
On Wed, Feb 13, 2002 at 01:31:35PM -0500, Rik Faith wrote:
> I'm seeing possibly related problems with a 760MP board (Tyan Tiger MP)
> and 3ware adapters.  I can very reproduce the problem if I run two
> instances of burnK7 (from cpuburn: 
http://users.ev1.net/~redelm/
) and
> then do an I/O operation.  Due to what I think is a bug in the 3ware
> code, however, my machine locks hard during the SCSI reset.  Could you
> try burnK7 (the idea is to load the CPUs -- not to heat them up) and see
> if your problem gets worse?
> 
> I was hoping to "fix" my problem by getting a AMD-760MPX MB from Asus,
> but I'm no longer sure that's a good idea.  I'm currently running Linux
> with maxcpus=1 on the boot prompt -- the system seems very stable when
> only one CPU is being used -- have you tried that?
> 
> The general problem may be that an interrupt gets lost, but I'd like to
> get more evidence that leads to that conclusion.  Thanks, Rik.
> 
> 
> BTW, I use:
>     while :; do date; strace fdisk -l /dev/sda; uptime; echo; sleep 5; done
> 
> and then look for a stall at "read(4," when I start the second burnK7.
> If I kill both burnK7's quick enough, the 3ware card will recover --
> otherwise, the machine locks.
-- 
 >> kelley j eicher
<<  UNIX architect
 >> Univ. of MN Astronomy Dept.
<<  ph: (612) 626-2067 or (612) 624-3589
 >> fx: (612) 626-2029
<<  office: 385 physics
 >> carde at astro dot umn dot edu
[unhandled content-type:application/pgp-signature]