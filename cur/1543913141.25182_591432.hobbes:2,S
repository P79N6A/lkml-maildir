Date: Tue, 4 Sep 2007 13:53:03 -0300
From: "Guilherme Vilela" <>
Subject: Problem to recognize that the file system is full
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/9/4/107

Hi,
I'm tryng to mount a nfs file system with the option async and run a
program that writes to the file system. The problem is that the
program keep writing even when the file system is full. It appears
that the nfs dont see that the file system is full and keeps writing
to the cache. This program does'nt occur when mounting with the sync
option or with async and noac option, but the performance get very
poor and that is important to my application. The problem doesnt occur
too with the local file system. I'm running linux centos 5.0.
Below is my test program.
Any idea how to resolve this problem?
Thanks,
Guilherme
//io-stress.cpp
#include <iostream>
#include <fstream>
#include <string>
using namespace std;
int main()
{
        int i = 0;
        string roller( "|/-\\" );
        string sample( "*", 1024 );
        ofstream ofs( "io-stress.txt" );
        ofs.exceptions( ios::failbit | ios::badbit );
        while ( ofs )
        {
                ofs << sample << endl << flush;
                ofs.flush();
                if ( i == 3 )
                        i = 0;
                cout << "\b" << roller[i++];
        }
        ofs.close();
        return 0;
}
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/