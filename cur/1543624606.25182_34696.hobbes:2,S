Date: Wed, 13 Mar 2002 21:21:28 -0800 (PST)
From: Andre Hedrick <>
Subject: Re: 2.5.6: ide driver broken in PIO mode
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/3/14/39

On Wed, 13 Mar 2002, Alan Cox wrote:
> > b) The block layer needs to be extended so the driver can walk
> >    all the request's segments prior to signalling completion
> >    against any of them.
> 
> This would be good - batching blocks by peeking down the queue is good
> for raid cards which tend to want stripe sized chunks
> 
Thank you Alan for the kind words.
Would you agree having the ablity to mark various BIOS' in process but not
retrun them back to the upper layers until the device driver can be
positive of a successful transfer?
The suggestion I put forward over many nights with the brillant Suparna,
was to create an in process marker on the a BIO handed to the driver.
She had enough guts to try out the idea but there still was a piece
missing.  We determined the needed part is an second path the do the
update delays and another function to clear any hold on the BIO for
release back to the top layers.
This has been my request from the beginning of BIO but not in the exact
words.  BIO does not address the granularity of the the hardware segment.
It does address all DMA transfers, but then again there are no partial
completions for the most part.  DMA speed is vastly quicker than PIO and
it is not possible to do partial updates in any sane way.
So what I am gathering from Alan is other hardware would benefit from this
feature/requirement.  Maybe now something will move forward.
Cheers,
Andre
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/