Date: Fri, 21 Jun 2002 12:51:40 +1000 (EST)
From: Neil Brown <>
Subject: Re: partition md raid?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/6/20/219

On Wednesday June 19, wt@electro-mechanical.com wrote:
> Is this possible (w/o using lvm)
Yes, but you need a patch...
http://www.cse.unsw.edu.au/~neilb/patches/linux-stable/
 2.4.19-pre8 section
      patch-Z-MdLocks
            Improve locking of MD related structure, particularly when reconfiguring 
      patch-a-RaidSplit
            Split raid requests that span chunks 
      patch-b-MdPart
            Enable partitioning of MD devices 
      patch-c-MdpMajor
            Define a static major number for mdp - partitioned md 
These patches should make the first 16 devices partitionable.
Without patch-c-MdpMajor, a free major number is allocated (usually
254, but no guarantees) and you have to either:
 - have a script which finds the number from /proc/devices and makes
   all the /dev entries, or
 - use devfs
With patch-c-MdpMajor, Major number "60" (LOCAL/EXPERIMENTAL USE) is
allocated for the partitioned md devices.
I use this in production.  I have two system discs (sda and sdb, or
hda and hdc) which are mirrored together as whole devices, and then
this is partitioned:
   mda1 == root
   mda2 == swap
   mda3 == other...
Getting lilo to cope was interesting, but it works.
NeilBrown
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/