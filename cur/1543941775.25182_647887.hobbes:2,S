Date: Mon, 4 Feb 2008 10:57:18 +0800
From: "Peter Teoh" <>
Subject: Section mismatch: kernel/workqueue.c
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/2/3/260

During compilation of the linus tree the following warnings are encountered:
WARNING: kernel/built-in.o(.data+0x2480): Section mismatch in
reference from the variable workqueue_cpu_callback_nb.14223 to the
function .devinit.text:workqueue_cpu_callback()
The variable workqueue_cpu_callback_nb.14223 references
the function __devinit workqueue_cpu_callback()
If the reference is valid then annotate the
variable with __init* (see linux/init.h) or name the variable:
*driver, *_template, *_timer, *_sht, *_ops, *_probe, *_probe_one, *_console,
This fix is to correct the following warning during compilation.
Based on my "elementary" analysis, as it is called from other
non-__init functions, this function cannot be declared as __devinit(),
correct?   Please comment.   Thanks :-).
Signed-off-by: Peter Teoh <htmldeveloper@gmail.com>
--- workqueue.c.orig    2008-02-04 10:47:03.000000000 +0800
+++ workqueue.c 2008-02-04 10:45:49.000000000 +0800
@@ -825,7 +825,7 @@ void destroy_workqueue(struct workqueue_
 }
 EXPORT_SYMBOL_GPL(destroy_workqueue);
-static int __devinit workqueue_cpu_callback(struct notifier_block *nfb,
+static int workqueue_cpu_callback(struct notifier_block *nfb,
                                                unsigned long action,
                                                void *hcpu)
 {