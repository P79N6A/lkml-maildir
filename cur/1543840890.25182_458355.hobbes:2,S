Date: Mon, 28 Aug 2006 14:11:41 -0400
From: Lennart Sorensen <>
Subject: Re: Strange transmit corruption in jsm driver on geode sc1200 system
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/8/28/217

On Fri, Aug 25, 2006 at 05:57:24PM -0400, Lennart Sorensen wrote:
> Of course given the __memcpy assembly seems to work fine unalligned on a
> pentium4, and probably most othe systems, what could make it not work
> correctly on a geode SC1200?
Related to the SC1200, I notied cyrix.c doesn't actually know about the
SC1200 that we are using.  This one returs dir0_msn = 11, while cyrix.c
only knows about 0 through 5.  If I add 11 to the block handling geode
GX1, then I get this cpuinfo:
processor       : 0
vendor_id       : CyrixInstead
cpu family      : 5
model           : 9
model name      : Geode(TM) Integrated Processor by National Semi
stepping        : 1
cpu MHz         : 266.729
cache size      : 16 KB
fdiv_bug        : no
hlt_bug         : no
f00f_bug        : no
coma_bug        : no
fpu             : yes
fpu_exception   : yes
cpuid level     : 2
wp              : yes
flags           : fpu tsc msr cx8 cmov mmx cxmmx
bogomips        : 535.35
So the get_model_name function seems to do something on it.  Otherwise I
get "model name" of Unknown, since there is no entry for it in cyrix.c
Since it is unknown, no setup calls are being done, although it seems a
number of features exist that could be enabled on the geode gx1, which I
believe is what a geode sc1200 really is.  The full label of the CPU is:
(national semi conductors logo)
Geode(tm)
SC1200
SC1200UL-266
(C)(M)NSC1999 D3
VS424AB
Does anyone know what should be called on this CPU type, and how to fix
cyrix.c to handle it correcly rather than ignoring it?
Forcing it to be treated like a GX1 and calling the geode_configure
function call, does not make my memcpy_toio problem go away.  On the
other hand I have a small optimistic hope that if it actually turns on
power saving on HLT, and some cache and memory optimizations, that it
might actually make the system run slightly faster and use slightly less
power.  If someone knows that part for sure I would love to know.
--
Len Sorensen
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/