Date: Tue, 28 Feb 2006 22:19:48 -0800
From: Andrew Morton <>
Subject: Re: 2.6.16-rc[1-5]: soft lockups on Athlon64 X2
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/3/1/11

Max Kellermann <max@duempel.org> wrote:
>
> the kernel 2.6.16-rc5 is receiving soft lockups when being run in SMP
>  mode.  When booting with "nosmp" (same kernel), everything is fine.
>  Hardware: Asus A8N-SLI (nForce4), Athlon64 X2.  I also tested rc1,
>  rc3, rc4, same error - 2.6.15.4 is ok.
> 
>  The soft lockups always occur when I try to mount a dm-crypted XFS
>  partition (another dm-crypted reiserfs partition on the same disk has
>  been mounted previously - both AES).
Strange.  I did remove a cond_resched() from invalidate_mapping_pages() so
that it could be run under spinlock but I cannot believe that you had so
many pages cached that the invalidate took more than ten seconds.
Does the machine recover and otherwise work OK?
Does it appear to you that the mount _really_ took over ten seconds system
CPU time??
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/