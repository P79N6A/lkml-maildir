Date: Sat, 17 Jun 2006 11:15:16 +0200 (MEST)
From: Jan Engelhardt <>
Subject: Re: squashfs size in statfs
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/6/17/31

>> > Yes, because CRAM does it that way, and maybe zisofs does it too:
>> 
>> Zisofs doesn't (H. Peter Anvin should know as he wrote it :-) ).
>> 
>> Statfs should return the size of the filesystem, not the amount of
>> data the filesystem  represents.  In this respect the behaviour of
>> Squashfs and Zisofs is correct.
>> 
>> This is analogous to performing stat on a gzipped file.  The stat
>> returns the size of the compressed file, not the uncompressed size.
>
> A better analogy is it is like statting a sparse file on, say, an ext3
> filesystem.  stat (ls -s) and statfs report the amount of storage consumed.
>
Too bad. Would have been a good indicator of how much space you need to 
copy an entire disc to disk, rather than running and waiting for du -s to 
complete.
So cramfs would need fixing.
Jan Engelhardt
-- 
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/