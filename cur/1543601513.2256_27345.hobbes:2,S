Date: Tue, 18 Sep 2001 20:18:10 +0200
From: Roger Larsson <>
Subject: Re: Feedback on preemptible kernel patch
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/9/18/224

On Tuesday den 18 September 2001 06:06, Dieter Nützel wrote:
> Yes, but no crash or oops for me.
> "Only" some "stalls" during MPEG/Ogg-Vorbis playback (2-5 sec) :-(
> > > But I get some hiccup during noatun (mp3, ogg, etc. player for KDE-2.2)
> > > or plaympeg together with dbench (16, 32). ReiserFS needs some
> > > preemption fixes, too?
> >
> > You may still get some small hiccups ( < 1 second?) even with the
> > preemption patch, as kernel locks prevent preemption (the patch can't
> > guarentee low latency, just preemption outside of the locks).
>
> Sadly 2-5 seconds at the beginning of dbench and during bonnie++ block
> operations (huge IO pressure, ~20% system, 3-5% user, 116308 kilobytes
> paged out).
>
> > However, how bad was the hiccups with preemption disabled?  I have heard
> > reports where it is 3-5sec at times.
>
> Yes, nearly the same.
>
Do you run with the playback process reniced -N?
It should really run with a low SCHED_FIFO or SCHED_RT policy.
But renicing it with a negative value gives some of the benefits...
(but you need to run as root)
In addition to this the program might need to lock its pages down - the
only thing I can think of that could cause several seconds delay would
be if it has been swapped out...
/RogerL
-- 
Roger Larsson
Skellefteå
Sweden
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/