Date: Wed, 21 Jan 2004 11:12:46 +1100
From: Rusty Russell <>
Subject: Re: CPU Hotplug: Hotplug Script And SIGPWR
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/1/20/334

In message <20040120083700.GB15733@hockin.org> you write:
> > off).  There are no correctness concerns AFAICT with userspace not
> > being on a particular CPU, just performance.
> 
> Correctness does matter if an affined task violates that affinity.  If we
> are going to provide explicit affinity, we need to honor it under all
> conditions, or at least provide an option to honor it.
WHY?  Think of an example where this is actually a problem.
"Under all conditions" is not something we can ever implement for
anything.
> I agree about invasiveness.  Maybe a combo?  Send SIGPWR iff a task is
> actually handling it, otherwise mark it TASK_UNRUNNABLE and let hotplug
> handle it?
Well, I think that violating affinity given that (1) affinity in
userspace is only a performance issue, and (2) we've been explicitly
told to take the CPU down, is a valid solution.
OTOH making tasks unrunnable until hotplug gets around to servicing
them could equally be a disaster.  Given that this requires
infrastructure not in Linus' tree and the "simply unbind" solution
doesn't, I'm leaning towards unbinding everything which would become
unrunnable, SIGPWR if they handle it, and hotplug at the end.
Thanks,
Rusty.
--
  Anyone who quotes me in their sig is an idiot. -- Rusty Russell.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/