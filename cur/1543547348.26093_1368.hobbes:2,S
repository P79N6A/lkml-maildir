Date: Sat, 2 Sep 2000 08:09:06 +0200 (CEST)
From: Mike Galbraith <>
Subject: Re: 2.4.0-test8-pre1 is quite bad
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/9/2/9

On Fri, 1 Sep 2000, Rik van Riel wrote:
> On Fri, 1 Sep 2000, Chris Evans wrote:
> > On Fri, 1 Sep 2000, Rik van Riel wrote:
> > > On Fri, 1 Sep 2000, Tigran Aivazian wrote:
> > > 
> > > > Any of you tried copying a 2G file in the same (ext2)
> > > > filesystem? It starts swapping like mad and generally behaves
> > > > indecently, despite the huge 1024M of RAM it has.
> > > 
> > > 
http://www.surriel.com/patches/2.4.0-t8p1-vmpatch2
> > > 
> > > I'm working on these issues and seem to be pretty close
> > > to having fixed most of them now...
> > 
> > Got any of the standard benchmarks (bonnie?) for us to drool over? :-)
> 
> On my (puny) test system, sequential output with bonnie increased
> from 3.5MB/s to 5MB/s.
Write throughput is up nicely (way to gooo Rik!), but read is still
well below stock (~13% here).
> But of course this doesn't really mean much. Also, IMHO the
> important thing is that the machine stays perfectly usable
> during the bonnie run.
I saw some serious stalls during streaming io.  vmstat here
is SCHED_RR and mlockall(now_and_forevermore), but occasionally
stalled long enough for up to 50mb of write io.. never stalled
on read.
test oddities:
I had three lockups while testing yesterday.. one hard and two
soft.  I can't attribute these to your patch directly, but have
had no such problems doing the same exact things with stock..
makes them worth mentioning.
The hard lock happened while repeatedly writing 1gig files.
Soft locks (box ended up doing _nothing_ visible except apm
bios calls) happened while beating upon the loop device.
	-Mike
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/