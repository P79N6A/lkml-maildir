Date: Thu, 20 Jan 2000 23:41:09 +0000
From: James Fidell <>
Subject: Re: IRQ clash problems with 2.2.14 and 2.3.33?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/1/21/113

Quoting Jeff Noxon (jeff@planetfall.com):
> ISA cards cannot share interrupts with other devices.  I don't know why it
> would work under Windows.
I think the ACPI issue is a red herring.  I didn't realise it was enabled
when I built the kernel and was surprised when I found it trying to share
an IRQ with the network card.  It's not enabled any more, but the card
still doesn't work :(
> What does /proc/interrupts look like?
I'm retyping this from the screen, since I can't get onto it over the
network.  I've checked for errors and don't see any, but you know how it
is...
With 2.2.14, I get:
  0: XT-PIC  timer
  1: XT-PIC  keyboard
  2: XT-PIC  cascade
  7: XT-PIC  soundblaster
  9: XT-PIC  eth0
 10: XT-PIC  aic7xxx
 11: XT-PIC  bttv
 12: XT-PIC  PS/2 mouse
 13: XT-PIC  fpu
 14: XT-PIC  ide0
2.3.33 gives me:
  0: XT-PIC  timer
  1: XT-PIC  keyboard
  2: XT-PIC  cascade
  7: XT-PIC  soundblaster
  9: XT-PIC  eth0
 10: XT-PIC  aic7xxx
 11: XT-PIC  uhci, bttv
 12: XT-PIC  PS/2 mouse
 13: XT-PIC  fpu
 14: XT-PIC  ide0
As far as I can ascertain, under Win98, I have:
 0 timer
 1 keyboard
 2 interrupt controller
 3 COM2
 4 COM1
 5 Maxtrox G200 and Hollywood Plus MP3 decoder
 6 Floppy controller
 7 Soundblaster 16
 8 Clock
 9 3c509
10 AHA2940
11 WinTV and PCI/USB controller
12 Mouse
13 FPU
14 Primary IDE Controller
15 Secondary IDE Controller
I see arp requests from the machine on the network, and I see responses from
the remote systems to those requests.  Clearly the kernel doesn't see them
though, and the IRQ count as displayed in /proc/interrupts never gets
above zero.
I'm building 2.3.39 as I type, but I don't hold out a whole lot of
hope for anything different.  After that I'm going to start pulling boards
out until the card starts working again, but I don't think that's going to
help me understand the problem much, nor to fix it.  If it didn't all
work under win98, I'd assume there was a hardware problem of some sort and
indeed that could still be the case.  I just don't know how to move forward
with this now.
James.
-- 
 "Yield to temptation --             | Consultancy: james@cloud9.co.uk 
  it may not pass your way again"    | 
http://www.cloud9.co.uk/james
                                     |
        - Lazarus Long               |              James Fidell
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/