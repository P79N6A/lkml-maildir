Date: Wed, 24 Jan 2001 18:47:26 -0500 (EST)
From: Robert Dale <>
Subject: agpgart (2.4.0 kernel)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/1/24/24

I have agpgart compiled into the kernel with both (Intel 440LX/BX/GX and
I815/I840/I850) and Intel I810/I815 drivers.  When the kernel boots I get:
  Linux agpgart interface v0.99 (c) Jeff Hartmann
  agpgart: Maximum main memory to use for agp memory: 27M
  agppart: agpgart: Detected an Intel i815, but could not find
  the secondary device.
  agpgart: no devices found
What is the secondary device it is looking for?
Then trying to load the DRI driver:
  [drm:r128_init] *ERROR* Cannot initialize agpgart module.
(Expected this since agpgart didn't initialize the first time)
The hardware is a Dell Inspiron 8000.  I have attached output
from dmesg and /proc/pci.  Please let me know if I can be of further
assistance.
Thank you.
-- 
Robert Dale
                   Digital Mission
Linux version 2.4.0 (torvalds@transmeta.com) (gcc version egcs-2.91.66
 19990314/Linux (egcs-1.1.2 release)) #3 Wed Jan 24 17:38:55 EST 2001
BIOS-provided physical RAM map:
 BIOS-e820: 000000000009fc00 @ 0000000000000000 (usable)
 BIOS-e820: 0000000000000400 @ 000000000009fc00 (reserved)
 BIOS-e820: 000000000000c000 @ 00000000000c0000 (reserved)
 BIOS-e820: 0000000003eec000 @ 0000000000100000 (usable)
 BIOS-e820: 0000000000004000 @ 0000000003fec000 (reserved)
 BIOS-e820: 0000000000200000 @ 00000000ffe00000 (reserved)
Scan SMP from c0000000 for 1024 bytes.
Scan SMP from c009fc00 for 1024 bytes.
Scan SMP from c00f0000 for 65536 bytes.
Scan SMP from c009fc00 for 4096 bytes.
On node 0 totalpages: 16364
zone(0): 4096 pages.
zone(1): 12268 pages.
zone(2): 0 pages.
mapped APIC to ffffe000 (01111000)
Kernel command line: auto BOOT_IMAGE=2.4.0-1 ro root=309
Initializing CPU#0
Detected 548.183 MHz processor.
Console: colour VGA+ 80x25
Calibrating delay loop... 1094.45 BogoMIPS
Memory: 62012k/65456k available (1119k kernel code, 3056k reserved, 427k data, 1
92k init, 0k highmem)
Dentry-cache hash table entries: 8192 (order: 4, 65536 bytes)
Buffer-cache hash table entries: 1024 (order: 0, 4096 bytes)
Page-cache hash table entries: 16384 (order: 4, 65536 bytes)
Inode-cache hash table entries: 4096 (order: 3, 32768 bytes)
VFS: Diskquotas version dquot_6.4.0 initialized
CPU: Before vendor init, caps: 0383f9ff 00000000 00000000, vendor = 0
CPU: L1 I cache: 16K, L1 D cache: 16K
CPU: L2 cache: 256K
Intel machine check architecture supported.
Intel machine check reporting enabled on CPU#0.
CPU: After vendor init, caps: 0383f9ff 00000000 00000000 00000000
CPU: After generic, caps: 0383f9ff 00000000 00000000 00000000
CPU: Common caps: 0383f9ff 00000000 00000000 00000000
CPU: Intel Pentium III (Coppermine) stepping 06
Enabling fast FPU save and restore... done.
Enabling unmasked SIMD FPU exception support... done.
Checking 'hlt' instruction... OK.
POSIX conformance testing by UNIFIX
mtrr: v1.37 (20001109) Richard Gooch (rgooch@atnf.csiro.au)
mtrr: detected mtrr type: Intel
PCI: PCI BIOS revision 2.10 entry at 0xfc06e, last bus=8
PCI: Using configuration type 1
PCI: Probing PCI hardware
Unknown bridge resource 2: assuming transparent
Unknown bridge resource 2: assuming transparent
PCI: Using IRQ router PIIX [8086/244c] at 00:1f.0
  got res[f2000000:f2000fff] for resource 0 of Texas Instruments PCI4451 PC card
 Cardbus Controller
  got res[f2001000:f2001fff] for resource 0 of Texas Instruments PCI4451 PC card
 Cardbus Controller (#2)
Linux NET4.0 for Linux 2.4
Based upon Swansea University Computer Society NET3.039
DMI 2.3 present.
60 structures occupying 2270 bytes.
DMI table at 0x000F63D0.
Starting kswapd v1.8
pty: 256 Unix98 ptys configured
Uniform Multi-Platform E-IDE driver Revision: 6.31
ide: Assuming 33MHz system bus speed for PIO modes; override with idebus=xx
PCI_IDE: unknown IDE controller on PCI bus 00 device f9, VID=8086, DID=244a
PCI_IDE: chipset revision 2
PCI_IDE: not 100% native mode: will probe irqs later
    ide0: BM-DMA at 0xbfa0-0xbfa7, BIOS settings: hda:DMA, hdb:DMA
    ide1: BM-DMA at 0xbfa8-0xbfaf, BIOS settings: hdc:pio, hdd:pio
hda: IBM-DJSA-220, ATA DISK drive
hdb: TOSHIBA DVD-ROM SD-C2402, ATAPI CDROM drive
ide0 at 0x1f0-0x1f7,0x3f6 on irq 14
hda: 39070080 sectors (20004 MB) w/1874KiB Cache, CHS=2432/255/63
hdb: ATAPI 24X DVD-ROM drive, 128kB Cache, UDMA(33)
Uniform CD-ROM driver Revision: 3.12
Partition check:
 hda: hda1 hda2 hda3 < hda5 hda6 hda7 hda8 hda9 hda10 hda11 >
Floppy drive(s): fd0 is 1.44M
FDC 0 is a post-1991 82077
Serial driver version 5.02 (2000-08-09) with MANY_PORTS SHARE_IRQ SERIAL_PCI ena
bled
ttyS00 at 0x03f8 (irq = 4) is a 16550A
ttyS01 at 0x02f8 (irq = 3) is a 16550A
eepro100.c:v1.09j-t 9/29/99 Donald Becker 
http://cesdis.gsfc.nasa.gov/linux/driv
ers/eepro100.html
eepro100.c: $Revision: 1.35 $ 2000/11/17 Modified by Andrey V. Savochkin <saw@sa
w.sw.com.sg> and others
eth0: OEM i82557/i82558 10/100 Ethernet, 00:20:E0:64:8C:0A, IRQ 11.
  Board assembly 727095-002, Physical connectors present: RJ45
  Primary interface chip i82555 PHY #1.
  General self-test: passed.
  Serial sub-system self-test: passed.
  Internal registers self-test: passed.
  ROM checksum self-test: passed (0x04f4518b).
  Receiver lock-up workaround activated.
Linux agpgart interface v0.99 (c) Jeff Hartmann
agpgart: Maximum main memory to use for agp memory: 27M
agpgart: agpgart: Detected an Intel i815, but could not find the secondary devic
e.
agpgart: no supported devices found.
Linux PCMCIA Card Services 3.1.22
  options:  [pci] [cardbus] [pm]
PCI: Found IRQ 11 for device 02:0f.0
PCI: The same IRQ used for device 00:1f.2
PCI: The same IRQ used for device 02:0f.1
PCI: The same IRQ used for device 02:0f.2
PCI: Found IRQ 11 for device 02:0f.1
PCI: The same IRQ used for device 00:1f.2
PCI: The same IRQ used for device 02:0f.0
PCI: The same IRQ used for device 02:0f.2
Intel PCIC probe: not found.
usb.c: registered new driver usbdevfs
usb.c: registered new driver hub
Yenta IRQ list 0698, PCI irq11
Socket status: 30000006
Yenta IRQ list 0698, PCI irq11
Socket status: 30000006
PCI: Found IRQ 11 for device 00:1f.2
PCI: The same IRQ used for device 02:0f.0
PCI: The same IRQ used for device 02:0f.1
PCI: The same IRQ used for device 02:0f.2
PCI: Setting latency timer of device 00:1f.2 to 64
uhci.c: USB UHCI at I/O 0xbce0, IRQ 11
uhci.c: detected 2 ports
usb.c: new USB bus registered, assigned bus number 1
hub.c: USB hub found
hub.c: 2 ports detected
NET4: Linux TCP/IP 1.0 for NET4.0
IP Protocols: ICMP, UDP, TCP, IGMP
IP: routing cache hash table of 512 buckets, 4Kbytes
TCP: Hash tables configured (established 4096 bind 4096)
NET4: Unix domain sockets 1.0/SMP for Linux NET4.0.
ACPI: System description tables found
ACPI: System description tables loaded
ACPI: Subsystem enabled
ACPI: System firmware supports: C2
ACPI: System firmware supports: S0 S1 S3 S4 S5
AC Adapter: found
Cmbatt: Battery socket 0 empty
Cmbatt: Battery socket 1 occupied
VFS: Mounted root (ext2 filesystem) readonly.
Freeing unused kernel memory: 192k freed
Adding Swap: 265064k swap-space (priority -1)
cs: IO port probe 0x1000-0x17ff: clean.
cs: IO port probe 0x0100-0x04ff: excluding 0x170-0x177 0x280-0x287 0x370-0x377 0
x4d0-0x4d7
cs: IO port probe 0x0a00-0x0aff: clean.
[drm:r128_init] *ERROR* Cannot initialize agpgart module.
PCI devices found:
  Bus  0, device   0, function  0:
    Host bridge: PCI device 8086:1130 (Intel Corporation) (rev 2).
      Prefetchable 32 bit memory at 0xe4000000 [0xe7ffffff].
  Bus  0, device   1, function  0:
    PCI bridge: PCI device 8086:1131 (Intel Corporation) (rev 2).
      Master Capable.  Latency=32.  Min Gnt=12.
  Bus  0, device  30, function  0:
    PCI bridge: PCI device 8086:2448 (Intel Corporation) (rev 2).
      Master Capable.  No bursts.  Min Gnt=6.
  Bus  0, device  31, function  0:
    ISA bridge: PCI device 8086:244c (Intel Corporation) (rev 2).
  Bus  0, device  31, function  1:
    IDE interface: PCI device 8086:244a (Intel Corporation) (rev 2).
      I/O at 0xbfa0 [0xbfaf].
  Bus  0, device  31, function  2:
    USB Controller: Intel Corporation 82820 820 (Camino 2) Chipset USB (Hub A) (
rev 2).
      IRQ 11.
      I/O at 0xbce0 [0xbcff].
  Bus  1, device   0, function  0:
    VGA compatible controller: PCI device 1002:4d46 (ATI Technologies Inc) (rev
0).
      IRQ 11.
      Master Capable.  Latency=32.  Min Gnt=8.
      Prefetchable 32 bit memory at 0xe8000000 [0xebffffff].
      I/O at 0xcc00 [0xccff].
      Non-prefetchable 32 bit memory at 0xfcffc000 [0xfcffffff].
  Bus  2, device   3, function  0:
    Multimedia audio controller: ESS Technology ES1983S Maestro-3i PCI Audio Acc
elerator (rev 16).
      IRQ 5.
      Master Capable.  Latency=32.  Min Gnt=2.Max Lat=24.
      I/O at 0xdc00 [0xdcff].
      Non-prefetchable 32 bit memory at 0xf6ffe000 [0xf6ffffff].
  Bus  2, device   6, function  0:
    PCI bridge: PCI device 1668:0100 (Action Tec Electronics Inc) (rev 17).
      Master Capable.  Latency=32.  Min Gnt=6.
  Bus  2, device  15, function  0:
    CardBus bridge: Texas Instruments PCI4451 PC card Cardbus Controller (rev 0)
.
      IRQ 11.
      Master Capable.  Latency=168.  Min Gnt=192.Max Lat=5.
      Non-prefetchable 32 bit memory at 0xf2000000 [0xf2000fff].
  Bus  2, device  15, function  1:
    CardBus bridge: Texas Instruments PCI4451 PC card Cardbus Controller (#2) (rev 0).
      IRQ 11.
      Master Capable.  Latency=168.  Min Gnt=192.Max Lat=5.
      Non-prefetchable 32 bit memory at 0xf2001000 [0xf2001fff].
  Bus  2, device  15, function  2:
    FireWire (IEEE 1394): PCI device 104c:8027 (Texas Instruments) (rev 0).
      IRQ 11.
      Master Capable.  Latency=32.  Min Gnt=2.Max Lat=4.
      Non-prefetchable 32 bit memory at 0xf6ffd800 [0xf6ffdfff].
      Non-prefetchable 32 bit memory at 0xf6ff8000 [0xf6ffbfff].
  Bus  8, device   4, function  0:
    Ethernet controller: Intel Corporation 82557 [Ethernet Pro 100] (rev 8).
      IRQ 11.
      Master Capable.  Latency=32.  Min Gnt=8.Max Lat=56.
      Non-prefetchable 32 bit memory at 0xf8fff000 [0xf8ffffff].
      I/O at 0xecc0 [0xecff].
      Non-prefetchable 32 bit memory at 0xf8e00000 [0xf8efffff].
  Bus  8, device   8, function  0:
    Communication controller: Lucent Microelectronics WinModem 56k (rev 1).
      IRQ 11.
      Master Capable.  No bursts.  Min Gnt=252.Max Lat=14.
      Non-prefetchable 32 bit memory at 0xf8ffec00 [0xf8ffecff].
      I/O at 0xecb8 [0xecbf].
      I/O at 0xe800 [0xe8ff].