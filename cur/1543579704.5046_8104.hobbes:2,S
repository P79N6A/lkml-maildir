Date: Tue, 23 Jan 2001 23:31:55 +0100
From: Rasmus Andersen <>
Subject: [PATCH] drivers/scsi/qlogicisp.c: return code from scsi_register (241p9)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/1/23/172

Hi.
The following patch adds a check for scsi_register's return code to
drivers/scsi/qlogicisp.c. It applies cleanly against ac10 and 241p9.
Comments?
--- linux-ac10-clean/drivers/scsi/qlogicisp.c	Sat Jan 20 15:17:13 2001
+++ linux-ac10/drivers/scsi/qlogicisp.c	Sat Jan 20 23:05:47 2001
@@ -682,6 +682,9 @@
 			continue;
 
 		host = scsi_register(tmpt, sizeof(struct isp1020_hostdata));
+		if (!host)
+			continue;
+
 		hostdata = (struct isp1020_hostdata *) host->hostdata;
 
 		memset(hostdata, 0, sizeof(struct isp1020_hostdata));
-- 
Regards,
        Rasmus(rasmus@jaquet.dk)
If we do not succeed, then we run the risk of failure.
		-- Vice President Dan Quayle, to the Phoenix Republican
		   Forum, March 1990
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/