Date: Tue, 17 Jul 2007 12:36:00 -0700 (PDT)
From: David Miller <>
Subject: Re: Q: a bogus set_fs(USER_DS) in setup_frame/setup_rt_frame ?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/7/17/452

From: Oleg Nesterov <oleg@tv-sign.ru>
Date: Tue, 17 Jul 2007 21:15:35 +0400
> Also, sparc does something strange with do_sigaltstack(). It first copies
> stack_t to the local variable, then sets KERNEL_DS to access it from
> do_sigaltstack().
> 
> IOW, what's wrong with the patch below? Why should we ignore errors other
> than -EFAULT?
Nothing wrong with it.
The code is this way because it was simply copied over from
the signal32.c implementation which has to translate around
the 32-bit types into the 64-bit ones the kernel wants.
But since the 64-bit side doesn't need the translations,
it doesn't need to do the funny do_sigaltstack() call sequence
either.
I'll apply your patch, thanks!
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/