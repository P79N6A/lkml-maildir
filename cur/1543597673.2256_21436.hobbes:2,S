Date: Mon, 13 Aug 2001 16:30:05 -0700
From: Ben Greear <>
Subject: Requesting clarification on IPTOS_* values w/regard to RFC-1349
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/8/13/87

I have a hard time believing that the kernel is wrong
on something so basic, but I cannot reconcile RFC-1349
with include/linux/ip.h
Here is the snippet from RFC-1349, found here:
http://www.cis.ohio-state.edu/cgi-bin/rfc/rfc1349.html
****************************************************************************
3 Specification of the Type of Service Octet
    The TOS facility is one of the features of the Type of Service
    octet in the IP datagram header. The Type of Service
    octet consists of three fields: 
                    0     1     2     3     4     5     6     7
                 +-----+-----+-----+-----+-----+-----+-----+-----+
                 |                 |                       |     |
                 |   PRECEDENCE    |          TOS          | MBZ |
                 |                 |                       |     |
                 +-----+-----+-----+-----+-----+-----+-----+-----+
    The first field, labeled "PRECEDENCE" above, is intended to denote the
    importance or priority of the datagram. This
    field is not discussed in detail in this memo. 
****************************************************************************
However, include/linux/ip.h defines the values as if RFC-1349 numbered
the bits backwards.  (It appears to me, for example, that the TOS_MASK
should be, in binary: 0111 1000, not 0001 1110 as ip.h shows.)
*************************************************
/* SOL_IP socket options */
#define IPTOS_TOS_MASK		0x1E
#define IPTOS_TOS(tos)		((tos)&IPTOS_TOS_MASK)
#define	IPTOS_LOWDELAY		0x10
#define	IPTOS_THROUGHPUT	0x08
#define	IPTOS_RELIABILITY	0x04
#define	IPTOS_MINCOST		0x02
*************************************************
Am I even more confused than normal, or is this really a problem?
Thanks,
Ben
-- 
Ben Greear <greearb@candelatech.com>          <Ben_Greear@excite.com>
President of Candela Technologies Inc      
http://www.candelatech.com
ScryMUD:  
http://scry.wanfear.com
     
http://scry.wanfear.com/~greear
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/