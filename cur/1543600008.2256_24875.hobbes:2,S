Date: Sun, 2 Sep 2001 19:04:32 +0200
From: Daniel Phillips <>
Subject: Re: Rik`s ac12-pmap2 vs ac12-vanilla perfcomp
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/9/2/53

On September 2, 2001 07:10 pm, Samium Gromoff wrote:
>    No flames please - i know these were low VM loads, i did this just to know 
> how big is test rmaps maitenance overhead. It shows us that even on low VM
> load there is a huge win in using rmap. And the win increases with the VM load.
>    Algo:
>       - booted ac12
>       - performed test A 7 times, then test B 7 times.
>       - booted ac12-pmap2
>       - performed test A 7 times, then test B 7 times.
> 
>       * each test was done 7 times, with the lowest and highest thrown away.
>       * due to high values of data and streaming usage pattern caching was 
>  unable to affect results, so it was ignored.
> 
> test A:
> "time find / -xdev" + (standard junk eating ~6% cpu (top procinfo))
>   descr: extremely low VM load, mostly IO dependent
> 
> test B:
> "time find / -xdev | grep --regexp="\/" | xargs echo" + background mpg123 +
>  + standard junk described above
>   descr: low, although higher than A, vm load (nearly absolutely no swap)
It's nice to see these tests aren't running any slower (and not crashing!)
but as I understand it, reverse mapping is a win only for shared mmaps and
swapping, which you aren't doing.  So it's not clear what effect is being
measured.
One thing that goes away with rmaps is the need to scan process page tables.
It's possible that this takes enough load off L1 cache to produce the effects
you showed, though it would be surprising.
(Note that I'm in the "reverse maps are good" camp, and I think Rik's design 
is fundamentally correct.)
--
Daniel
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/