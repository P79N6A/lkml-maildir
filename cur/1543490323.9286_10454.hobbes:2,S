Date: Thu, 18 Mar 1999 19:05:50 +0100 (CET)
From: <>
Subject: RE: Token Ring layer clobbers first byte of saddr
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/3/18/146

Giuliano Procida writes:
 > So the byte may be clobbered at the same time as rii_p is zero. If this
 > is an error case then it might be better to printk and abort early. If
 > not, the byte should be unclobbered before exit.
Alright, I see what you're getting at.  We get a frame with a RIF from 
a host on the local ring, but the RII is not restored before the
frame is passed up the stack.  Good catch.
rii_p is overloaded.  We use it both to determine "localness" and to
determine whether or not the RII should be restored.  Patch to follow
(unless you've got one coded.) 
 > Also, there are two exit points to the function, one on a alloc failure
 > and the other off the end. If the alloc fails the byte is not unclobbered.
 > OK, I admit this is picky!
"Picky" is good. :-)  This has already been identified and a patch
submitted.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/