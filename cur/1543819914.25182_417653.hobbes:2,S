Date: Fri, 21 Apr 2006 13:51:01 +0200
From: Nick Piggin <>
Subject: Re: assert/crash in __rmqueue() when enabling CONFIG_NUMA
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/4/21/113

On Fri, Apr 21, 2006 at 01:20:50PM +0200, Ingo Molnar wrote:
> 
> * Nick Piggin <npiggin@suse.de> wrote:
> 
> > It would be interesting to know which assertion failed. I guess it 
> > might be a zone alignment problem -- it would be interesting to turn 
> > the 2 HOLES_IN_ZONE tests into BUG_ONs, and enable them (ie. move them 
> > out of HOLES_IN_ZONE).
> 
> ok, i added a couple of printks (see the patch below), and got this:
> 
>  zone c1f0a600 (HighMem):
>  pfn: 00037d00
>  zone->zone_start_pfn: 00037e00
>  zone->spanned_pages: 00007e00
>  zone->zone_start_pfn + zone->spanned_pages: 0003fc00
>  ------------[ cut here ]------------
>  kernel BUG at mm/page_alloc.c:524!
> 
> so the pfn is 1MB below the zone's start address - not good. You can 
> find the full bootup log at:
The zones are 2MB aligned, discontig.c seems to do this. They should
be 4MB aligned so the page allocator's assumption that zones are 
contiguous to MAX_ORDER is satisfied.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/