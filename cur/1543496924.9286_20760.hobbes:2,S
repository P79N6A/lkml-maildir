Date: Thu, 27 May 1999 09:26:44 +0200
From: Juergen Vollmer <>
Subject: Re: Allocation of too much memory hangs system, kernel 2.2.*
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/5/28/195

Hi dear Giuliano,
> > [1.] One line summary of the problem:
> > Allocation of too much memory hangs system, kernel 2.2.*
> >
> > [2.] Full description of the problem/report:
> > a) An (erronous) program allocates memory in some kind of endless
> loop.
> >    After some while the system hangs.
> Hmm, I wrote these 2 simple prgms:
> //********** 1 ***
> void foo(){
>   char a[16384];
>   foo();
> }
> void main(){
>  foo();
> }
> //********** 2 ***
> void main(){
> void *i;
>   while(1) i=malloc(16384);
> }
> Program #1 ends with a huge core dump.
> Program #2 ends with a core too, but it is very little, about 8MB.
> Strange.
> Anyway the machine is still OK and prefectily working and stable. You
> should
> post the peice of code that cause you that troubles...
Please try the following:
-------------------------------------
 # include "stdio.h"
static int count = 0;
 # define MAX (1024*1024)
void foo(){
  char a[MAX];
  int i;
  printf ("%d\n", count++);
  for (i = 0; i < MAX; i += 100) {
    a[i] = i % 256;
  }
  foo();
}
int main(){
  foo();
  return 0;
}
-------------------------------------
after printing 375, the system stops as described in my problem report.
JÃ¼rgen
------------------------------------------------------------------------------
Dr. Juergen Vollmer, Viktoriastrasse 15, D-76133 Karlsruhe
office:          vollmer@cocolab.de  Tel: +49(721) 9204871 Fax: +49(721) 24874
private: Juergen.Vollmer@acm.org     Tel: +49(721) 24874   Fax: +49(721) 24874
WWW:     www.cocolab.de/vollmer
------------------------------------------------------------------------------
[unhandled content-type:application/pgp-signature]