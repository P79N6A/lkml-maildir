Date: Tue, 08 Mar 2005 22:25:29 -0800
From: Alex Aizman <>
Subject: Re: [ANNOUNCE 0/6] Open-iSCSI High-Performance Initiator for Linux
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/3/9/19

Matt Mackall wrote:
>On Tue, Mar 08, 2005 at 09:51:39PM -0800, Alex Aizman wrote:
> 
>
>>Matt Mackall wrote:
>>
>> 
>>
>>>How big is the userspace client?
>>>
>>> 
>>>
>>Hmm.. x86 executable? source?
>>
>>Anyway, there's about 12,000 lines of user space code, and growing. In 
>>the kernel we have approx. 3,300 lines.
>>
>> 
>>
>>>>- 450MB/sec Read on a single connection (2-way 2.4Ghz Opteron, 64KB block 
>>>>size);
>>>> 
>>>>
>>>With what network hardware and drives, please?
>>>
>>> 
>>>
>>Neterion's 10GbE adapters. RAM disk on the target side.
>> 
>>
>
>Ahh.
>
>Snipped my question about userspace deadlocks - that was the important
>one. It is in fact why the sfnet one is written as it is - it
>originally had a userspace component and turned out to be easy to
>deadlock under load because of it.
>
> 
>
There's (or at least was up until today) an ongoing discussion on our 
mailing list at 
http://groups-beta.google.com/group/open-iscsi.
 The 
short and long of it: the problem can be solved, and it will. Couple 
simple things we already do: mlockall() to keep the daemon un-swapped, 
and also looking into potential dependency created by syslog (there's 
one for 2.4 kernel, not sure if this is an issue for 2.6).
The sfnet is a learning experience; it is by no means a proof that it 
cannot be done.
Alex
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/