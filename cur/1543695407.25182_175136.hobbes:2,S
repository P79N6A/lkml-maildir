Date: Mon, 27 Oct 2003 15:22:22 +0300
From: "Andrey Borzenkov"  <>
Subject: Re:  2.6.0-testX and pppd/pppoe stuck after connecting
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/10/27/49

> Ever since I upgraded from 2.4.18 to 2.6.0-test? (now -test8),
> I have been encountering problems with my pppd/pppoe setup.
> Specifically, right after the ppp0 interface is brought up, and several
> packets go through that interface (4-5 packets RX/TX), no more packets
> are transmitted until I restart pppd and reconnect to my ISP.
> ping www.google.com will report 100% packet loss, and I cannot see the
> TX packet count on ppp0 increasing. Nothing suspicious appears in ppp.log.
> More often than not, I have to reconnect multiple times until at last
> a working connection is established.
I can confirm it with 2.6.0-test8 and simple modem connection (no pppoe). Connection
is established, I get IP, DNS - everything but no IP packet ever seems to either go out
or come in. The same works just fine with 2.6.0-test5; I have not tried intermediate
versions. Probably if test9 is going to have the same problem I will have to. This happens
every time on boot of test8 and works every time under test5
the system is Mandrake 9.2 without updates, compiler gcc-3.3.1 as shipped with
mdk 9.2. previous kernel was compiled under mdk 9.1 with whatever compiler it
had.
Enabling pppd debugging does not show anything interesting except it gets LCP
echo from remote so some data _is_ flowing between systems. Enabling iptables
LOG for all packets shows that packets _are_ submitted to ppp0.
So it looks like for whatever resons ppp0 either does not receive packet passed to it
or never processes them.
As my knowledge of networking layer is near to zero, I appreciate pointers to where
I can enable debugging, printk or whatever.
TIA
-andrey
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/