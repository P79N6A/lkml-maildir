Date: Mon, 12 Apr 1999 02:31:27 -0700 (PDT)
From: Michael Hasenstein <>
Subject: 2.2.5:fs/super.c comment indicates stacked mounts possible?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/4/12/32

in fs/super.c do_mount():
 * [21-Mar-97] T.Schoebel-Theuer: Now this can be overridden when
 * supplying a leading "!" before the dir_name, allowing "stacks" of
 * mounted filesystems. The stacking will only influence any pathname
lookups
 * _after_ the mount, but open file descriptors or working directories
that
 * are now covered remain valid. For example, when you overmount /home,
any
 * process with old cwd /home/joe will continue to use the old
versions,
 * as long as relative paths are used, but absolute paths like
/home/joe/xxx
 * will go to the new "top of stack" version. In general, crossing a
 * mount point will always go to the top of stack element.
 * Anyone using this new feature must know what he/she is doing. 
This seems to indicate I can mount several filesystems under one mount
point? (I didn't find any further comments/code for this)
I'm asking because I'm thinking about an overlay mount function, which
means you can mount a filesystem on top of another one on the same
mount point. Purpose: for example, I could overlay my minimal /usr
installation with a big nfs-mounted /usr filesystem, and all the files
that don't exist locally on the disk are taken (transparently) from the
nfs filesystem. The question above has not much to do with this except
that I'm curious now that I discovered that comment, but maybe some
people who're familiar with the fs-implementation could comment on the idea.
===
--
Michael Hasenstein
http://www.csn.tu-chemnitz.de/~mha/
Private Pilot (ASEL) since 1998
_________________________________________________________
Do You Yahoo!?
Get your free @yahoo.com address at 
http://mail.yahoo.com
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/