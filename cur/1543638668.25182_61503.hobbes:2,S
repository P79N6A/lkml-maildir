Date: Sun, 04 Aug 2002 18:39:50 -0700
From: Walt H <>
Subject: Raid0 slowdown from 2.4.19-rc1
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/8/4/151

Hello,
I've recently upgraded kernels from 2.4.19-rc1 to rc2 and on to final 
and have experienced a dramatic slowdown in raid0 performance since. 
Final 2.4.19 was patched with XFS and preempt and compiled using 
gcc-3.1.1 - I've tried switching compilers to 2.96 (mandrake 8.2), and 
cutting out preempt patches. First md1 array consists of two partitions 
from hda & hdc. hdparm for both drives looks fine by themselves:
[root@waltsathlon walt]# hdparm -t /dev/hda
/dev/hda:
  Timing buffered disk reads:  64 MB in  1.66 seconds = 38.55 MB/sec
/dev/hdc:
  Timing buffered disk reads:  64 MB in  1.65 seconds = 38.79 MB/sec
However, using them combined as raid0, md1:
/dev/md1:
  Timing buffered disk reads:  64 MB in  1.44 seconds = 44.44 MB/sec
In 2.4.18 and up through 2.4.19-rc1 I saw 66-70MB/sec from this array. 
Starting in rc2 it dropped to the mid 40's. I've also ran bonnie++ and 
confirmed several significant drops, however, not as bad as you would 
think considering the results of hdparm.
Hardware:
Soyo Dragon+ MB w/ Athlon 1800+, 512MB Ram
Drives connected via onboard Promise PDC20265 in ultra mode
2x40GB IBM Deskstar 60GXP (I know....)
Anything else you need, just ask. Please CC me in replies as I'm not a 
member of the list. Thanks,
-Walt
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/