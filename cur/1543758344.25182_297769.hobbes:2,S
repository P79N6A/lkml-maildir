Date: Sun, 27 Feb 2005 20:52:06 +0100
From: Michal Januszewski <>
Subject: Re: Bootsplash for 2.6.11-rc4
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/2/27/110

On Sun, Feb 27, 2005 at 08:31:39PM +0100, Arjan van de Ven wrote:
> well.. how much does it really need in kernel space? I mean, with all
> drivers as modules, and the "quiet" option, initramfs runs *really*
> fast. And that can just bang a bitmap to the framebuffer as first
> thing... (rhgb does it a bit later but that's a design choice in a
> feature vs early-boot tradeoff).
Most of the code in fbsplash handles the so-called 'verbose' mode,
ie. displaying a pretty picture in the background of the consoles. 
The 'silent' mode (progress bar and stuff) can be brought down to 
a single call to a userspace helper which can paint the initial bitmap
or do whatever else it wants to do. In fact, this is how it works now.
However, fbsplash currently not only calls the helper, but also tracks
whether we're running in the 'silent' mode or in the 'verbose' mode. 
I plan to remove that functionality, so we'll be left with the
following: 
- silent is handled 100% by userspace
- verbose is handled by fbsplash (ie. kernelspace)
- fbsplash takes care of the initial call to the userspace 
  helper when starting in the silent mode (splash=silent in
  the kernel command line)
Live long and prosper.
-- 
Michal 'Spock' Januszewski                        Gentoo Linux Developer
cell: +48504917690                         
http://dev.gentoo.org/~spock/
JID: spock@im.gentoo.org               freenode: #gentoo-dev, #gentoo-pl
[unhandled content-type:application/pgp-signature]