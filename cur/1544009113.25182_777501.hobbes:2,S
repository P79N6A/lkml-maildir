Date: Fri, 5 Dec 2008 19:41:14 +0100
From: Andi Kleen <>
Subject: Re: Device loses barrier support (was: Fixed patch for simple barriers.)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/12/5/266

On Fri, Dec 05, 2008 at 07:21:06PM +0100, Bodo Eggert wrote:
> Andi Kleen <andi@firstfloor.org> wrote:
> 
> >> Not when the fundamental design of the code is broken and trashes
> >> performance.
> > 
> > Sorry but that's just not correct. There's nothing in late failing
> > barriers that "trashes performance". The file system writers have 
> > to be careful to handle it, but at least the current ones all do.
> 
> So let's keep requiring the "trashes performance" hacks, because they're
Again there's nothing about the code that handles this that 
"trashes performance". 
Mickulas was just ranting that the current file systems don't use
barriers in the way he thinks they ought to be used, but that
is completely orthogonal to the problem if barriers may fail
late or not.
In Mickulas imaginary barrier world it would be slightly more 
complicated to handle it, but far from impossible. And again
if there it wouldn't affect performance. In the real world
Linux barrier world handling late failing barriers in the fs
is also very easy currently.
-Andi