Date: Mon, 18 Feb 2008 19:19:50 -0300
From: Sergio Luis <>
Subject: Re: [build bug] lguest build failure: drivers/lguest/x86/switcher_32.S:(.text+0x3815f8): undefined reference to `LGUEST_PAGES_regs_trapnum'
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/2/18/488

Christian Kujau wrote:
> On Sun, 17 Feb 2008, Sergio Luis wrote:
>> oops. sorry, I just realized I missed the makefile part. I changed
>> the config symbol to CONFIG_LGUEST_HYPERVISOR so I should change it on
>> the makefile as well. reposting an updated patch for testing:
> 
> Hm, now I cannot select LGUEST as a module any more:
> 
> $ make clean && time make
>   [...]
>   HOSTCC  scripts/kconfig/zconf.tab.o
>   HOSTLD  scripts/kconfig/conf
> scripts/kconfig/conf -s arch/x86/Kconfig
> .config:1793:warning: symbol value 'm' invalid for LGUEST
>   [...]
>   Linux hypervisor (LGUEST) [Y/n/?] (NEW)
if you select Y here it will prompt you about the lguest hypervisor, the code in question, the one you want to build, and you will then be able to select it as a module, if you want, or built-in into the kernel. 
I dont like this approach myself, but it does fix the problem. I was hoping people would come up with better ideas on how to properly fix it.
-sergio
> 
> Is this intentional? I've tried your patch with or without Rusty's
> patch, both gave me the same results. My .config:
> 
http://nerdbynature.de/bits/2.6.25-rc2/lguest/
> 
> Thanks,
> Christian.