Date: Sun, 23 May 2004 20:53:51 +1000
From: Herbert Xu <>
Subject: Re: Bug#250477: kernel-source-2.4.26: Lots of debug in RAID5
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/5/23/46

On Sun, May 23, 2004 at 10:58:00AM +0200, Leonardo Macchia wrote:
> Package: kernel-source-2.4.26
> Version: 2.4.26-2
> Severity: wishlist
> Tags: patch
> 
> If I use XFS on the top of RAID5 device, I get lots of:
> 
> raid5: switching cache buffer size, 0 --> 4096
> 
> and similar.
> Looking at the sources, I see a "printk" instead of "PRINTK" for this
> debug line. Maybe it is a mistake? However this is the simple patch to
> change it:
> 
> diff -Naru kernel-source-2.4.26/drivers/md/raid5.c kernel-source-2.4.26-nodebug/drivers/md/raid5.c
> --- kernel-source-2.4.26/drivers/md/raid5.c	2003-08-30 06:01:38.000000000 +0000
> +++ kernel-source-2.4.26-nodebug/drivers/md/raid5.c	2004-05-23 08:54:36.000000000 +0000
> @@ -282,7 +282,7 @@
>  				}
> 
>  				if (conf->buffer_size != size) {
> -					printk("raid5: switching cache buffer size, %d --> %d\n", oldsize, size);
> +					PRINTK("raid5: switching cache buffer size, %d --> %d\n", oldsize, size);
>  					shrink_stripe_cache(conf);
>  					if (size==0) BUG();
>  					conf->buffer_size = size;
Thanks for the patch.  This does indeed look like a typo.
Hi Neil, does this patch look OK to you?
Cheers,
-- 
Visit Openswan at 
http://www.openswan.org/
Email:  Herbert Xu 许志壬 <herbert@gondor.apana.org.au>
Home Page: 
http://gondor.apana.org.au/herbert/
PGP Key: 
http://gondor.apana.org.au/herbert/pubkey.txt
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/