Date: Tue, 25 Jul 2006 16:18:54 -0700
From: Kristen Carlson Accardi <>
Subject: [patch] pci/hotplug acpiphp: fix Kconfig for Dock dependencies
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/7/25/346

---
the build options submitted for 2.6.18-rcX for acpiphp and the dock
module are not quite right.  Can you please review this patch and 
make sure this makes sense?  I'd like this pushed to Linus as 
soon as possible.  
Change the build options for acpiphp so that it may build without
being dependent on the ACPI_DOCK option, but yet does not allow
the option of acpiphp being built-in when dock is built as a 
module.
Signed-off-by: Randy Dunlap <rdunlap@xenotime.net>
Signed-off-by: Kristen Carlson Accardi <kristen.c.accardi@intel.com>
---
 drivers/pci/hotplug/Kconfig |   17 ++++++++++++++++-
 1 file changed, 16 insertions(+), 1 deletion(-)
--- 2.6-git.orig/drivers/pci/hotplug/Kconfig
+++ 2.6-git/drivers/pci/hotplug/Kconfig
@@ -74,9 +74,10 @@ config HOTPLUG_PCI_IBM
 
 	  When in doubt, say N.
 
+if ACPI_DOCK=n
 config HOTPLUG_PCI_ACPI
 	tristate "ACPI PCI Hotplug driver"
-	depends on ACPI_DOCK && HOTPLUG_PCI
+	depends on ACPI && HOTPLUG_PCI
 	help
 	  Say Y here if you have a system that supports PCI Hotplug using
 	  ACPI.
@@ -85,6 +86,20 @@ config HOTPLUG_PCI_ACPI
 	  module will be called acpiphp.
 
 	  When in doubt, say N.
+endif
+if ACPI_DOCK!=n
+config HOTPLUG_PCI_ACPI
+	tristate "ACPI PCI Hotplug driver"
+	depends on HOTPLUG_PCI && ACPI_DOCK
+	help
+	  Say Y here if you have a system that supports PCI Hotplug using
+	  ACPI.
+
+	  To compile this driver as a module, choose M here: the
+	  module will be called acpiphp.
+
+	  When in doubt, say N.
+endif
 
 config HOTPLUG_PCI_ACPI_IBM
 	tristate "ACPI PCI Hotplug driver IBM extensions"
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/