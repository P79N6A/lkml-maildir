Date: Thu, 28 Oct 1999 09:34:37 +0200
From: Alan Watson <>
Subject: RE: Magneto Optical ATAPI (IDE) disk, Fujitsu, 2048 Bytes/sector
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/10/28/14

> Alan,
> 
I wrote the other day asking about 640 MByte MO
disks.  Sorry to keep on about it, but it still doesn't work
> for me.  I have now built a 2.2.x (x=6) kernel (no, I don't have a more
> recent one, but will get it if the required change has occurred in the
> last 6  versions - which I doubt).
> 
> Remember, it's an IDE(ATAPI) MO, not SCSI.  Now, inside the ide-floppy
> module, there's a check for device type 7, after which it happily goes and
> prints out that it's seen an "OPTICAL" disk device.  Great!  But, a few
> lines
> later (this is in the identify procedure, if I remember correctly - I'm
> not
> writing this from my Linux machine), the code goes and says that  " if the
> device type is not 0 (zero) then return FALSE" , with an error saying that
> it doesn't support this kind of device.  That's about as much use as a
> bicycle
> is to a fish.
> 
> So I hacked that piece of code to make it think that both types 0 and 7
> are acceptable IDE floppies.  And now I'm back to the "2048 bytes/sector
> not supported" problem - even in the 2.2.x kernel.  The first request sent
> to the device is only 1024 bytes long, and it fails.
> 
> Is there a patch to make these gadgets work?  Is there an "ide-mo.c"
> module
> that can be included, where the blocksize is correctly set up?  Because
> "ide-floppy" sure as heck doesn't set it up.  I even tried hacking
> blksize_size[major][minor]=2048 in the ide-floppy setup code.  That also
> doesn't work.
> 
> I am now at a loss to know how to make the ide drivers talk to Fujitsu's
> 640 MByte ATAPI MO disks.
> 
> Alan Watson
> Corporate Technologies
> Johannesburg
> South Africa
> 
> > they see my MO disk.  Linux now (kinda) believes that it can drive this
> > little gadget
> > as an ide-floppy (type 7) ATAPI device.  That's good.  And it sees all
> the
> > specs about
> > the disk.
> 
> Linux 2.2.x handles the disks fine, including the 2K block size. The 
> partitioning setup is also handled by 2.2.x and modern fdisk binaries
> 
> Alan
> 
> 
> -
> To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
> the body of a message to majordomo@vger.rutgers.edu
> Please read the FAQ at 
http://www.tux.org/lkml/
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/