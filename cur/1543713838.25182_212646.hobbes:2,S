Date: Wed, 7 Apr 2004 23:39:31 +0200
From: Andrea Arcangeli <>
Subject: Re: -mmX 4G patches feedback [numbers: how much performance impact]
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/4/7/217

On Wed, Apr 07, 2004 at 09:25:17AM +0200, Ingo Molnar wrote:
> but please be extremely careful with this testcase. It needs static
> linking & init= booting to produce stable, comparable numbers. I did
> this for a couple of key kernels and made sure the effect is the same as
> in the simple loop_print.c case, but it's a real PITA to ensure stable
> numbers.
you're basically testing the associativity of the TLB with your dTLB, no
surprise it gives very different results. the biggest noise generated by
page coloring is when the working set is equal the size of the cache,
for the tlb cache that's 64 pages on the prescott, but note I'm not
using a prescott, this is the first HT enabeld (P4 based) xeon I doubt
it has 64 dTLB entries, infact the biggest noise happens way below
256kbyte, I guess it has between 8 and 32 entries in the tlb (not sure
exactly, I've too old and too recent specifications none covering this
specific box, I didn't need to know this detail to benchmark accurately
and rule out page coloring by running multiple passes and verifiying
they're all the same).
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/