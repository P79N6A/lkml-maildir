Date: Fri, 10 Mar 2006 12:55:56 -0600
From: Matt Mackall <>
Subject: Re: [PATCH 3/7] inflate pt1: clean up input logic
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/3/10/210

On Tue, Mar 07, 2006 at 03:26:05PM -0800, H. Peter Anvin wrote:
> Followup to:  <20060225212247.GC15276@flint.arm.linux.org.uk>
> By author:    Russell King <rmk+lkml@arm.linux.org.uk>
> In newsgroup: linux.dev.kernel
> > 
> > All these are to do with decompressing a compressed kernel.  If they
> > fail, halting is perfectly reasonable because we probably don't have
> > an executable kernel.  Your arguments are fine for these.  But, that's
> > not the full story - there are two more places where this code is
> > used:
> > 
> > init/do_mounts_rd.c:#include "../lib/inflate.c"
> > init/initramfs.c:#include "../lib/inflate.c"
> > 
> > for these your arguments that halting is fine is _NOT_ correct nor is it
> > desirable.  The first of these is the cause of the problems both myself
> > and others saw, as detailed in the URL I posted previously in this thread.
> > Did you read that post?
> > 
> 
> These probably should use lib/zlib instead...
That's a reasonable suggestion. I have an eventual goal of getting
down to only one (cleaned up) zlib instance in the kernel and I'm
somewhat more appalled by the lib/zlib/inflate code so I haven't gone
that route.
-- 
Mathematics is the supreme nostalgia of our time.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/