Date: 11 Aug 1999 17:27:56 -0400
From: Karl Kleinpaste <>
Subject: 2.2.11-ac3 sound/maestro.c fails to declare locks
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/8/13/173

FYI.  During "make modules", I get this error:
make[2]: Entering directory `/usr/src/linux-2.2.11-ac3/drivers/sound'
...
maestro.c: In function `ac97_mixer_ioctl':
maestro.c:1554: `s' undeclared (first use this function)
maestro.c:1554: (Each undeclared identifier is reported only once
maestro.c:1554: for each function it appears in.)
make[2]: *** [maestro.o] Error 1
There are 4 instances of code of the form
			spin_lock_irqsave(&s->lock, flags);
			val = card->mix.recmask_io(card,1,0);
			spin_unlock_irqrestore(&s->lock, flags);
with no `s' in sight.  Just to make it compile (I don't actually use
this module; having it enabled for compilation was evidently a mousing 
error in "make xconfig"), I added a "struct ess_state *s;" at the top
of the function and "s = &card->channels[0];".
--karl
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/