Date: Fri, 18 Jan 2002 16:32:31 -0600
From: "Kent E Yoder" <>
Subject: Re: [PATCH] IBM Lanstreamer bugfixes
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/1/18/162

  Sorry, this mail was sent acidentally...  but since its out here...
> 5 & 11) Nope, I had not read Doc/networking/netdevices.txt, so I have a
question.  What does being inside rtnl_lock() imply other than the sleep
> issues?
>
>   The calls to cli() and save_flags() were wrong from the beginning.
They were imported by the last maintainer since this driver is a modified
version  > of the olympic token ring driver.  The current spin_lock() and
spin_unlock() calls protect the srb_queued variable.  If we were to set it
to one and then  > get interrupted before we actually write() to the srb,
the interrupt function will try to service whatever junk happens to be in
the srb.  If going into the
> interrupt function is covered by rtnl_lock(), this would be covered, but
I guess its not (?)....
  actually I should be using spin_lock_irqsave() in open() and close()
since the lock is taken inside the interrupt function, no?
Kent
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/