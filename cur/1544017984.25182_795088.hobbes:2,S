Date: Tue, 20 Jan 2009 20:09:07 +0000
From: Liam Girdwood <>
Subject: Re: [RFC] Regulator: Push lock out of _notifier_call_chain + add voltage change event.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2009/1/20/277

On Mon, 2009-01-19 at 18:20 +0000, Jonathan Cameron wrote:
> From: Jonathan Cameron <jic23@cam.ac.uk>
> Regulator: Push lock out of _notifier_call_chain and into caller functions
> (side effect of fixing deadlock in regulator_force_disable)
> + Add a voltage changed event.
> Signed-off-by: Jonathan Cameron <jic23@cam.ac.uk>
> 
> ---
> Follow up to Mark Brown's suggestion of moving the regulator lock out
> of the notifier code.  This avoids cases where it was previously necessary
> to unlock the regulator before notification occured.
> 
> Any scenarios where this will cause trouble?
> 
> I'll do a documentation patch when we've pinned down how to do this.
> + can break the patch into one for pushing the lock out and one for
> adding the event.
> 
>  drivers/regulator/core.c             |   15 ++++++++++-----
>  drivers/regulator/wm8350-regulator.c |    2 ++
>  drivers/regulator/wm8400-regulator.c |    2 +-
>  include/linux/regulator/consumer.h   |    2 ++
>  4 files changed, 15 insertions(+), 6 deletions(-)
> 
Applied and fixed trailing white space.
Thanks
Liam