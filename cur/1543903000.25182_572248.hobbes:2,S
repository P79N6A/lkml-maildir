Date: Fri, 20 Jul 2007 15:07:56 +1000
From: Nick Piggin <>
Subject: Re: [PATCH] [15/58] i386: Rewrite sched_clock (cmpxchg8b)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/7/20/14

Mathieu Desnoyers wrote:
> I tried it with and without the LOCK prefix on my Pentium 4.
> 
> Locked cmpxchg8b : 90 cycles
> Non locked cmpxchg8b: 30 cycles
> sti: 166 cycles
> cli: 159 cycles
> 
> So, hrm, even if we use the locked version, it is still much faster than
> the sti/cli. I am thoughtful about the comment in asm-i386/system.h:
Curious: what does it look like if the memory is not in cache? I
found that cmpxchg is relatively slower than other rmw instructions
in that case.
-- 
SUSE Labs, Novell Inc.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/