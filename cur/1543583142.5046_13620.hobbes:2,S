Date: Mon, 26 Feb 2001 17:34:30 -0700
From: Brian Grossman <>
Subject: Re: tcp stalls with 2.4 (but not 2.2)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/2/26/108

> > I'm seeing stalls sending packets to some clients.  I see this problem
> > under 2.4 (2.4.1 and 2.4.1ac17) but not under 2.2.17.
> 
> compiled in ECN support? SYNcookies?  try disabling through /proc
> tcp or udp? if udp check /proc/net/ipv4/ip_udpdloose or such
CONFIG_INET_ECN is not set in .config.
CONFIG_SYN_COOKIES is set, but tcp_syncookies but is set to 0.
> > My theory is there is an ICMP black hole between my server and some of its
> > clients.  Is there a tool to pinpoint that black hole if it exists?
> 
> ping is your friend.  -s lets you set size of packet. (to
> check for fragmentation) use tcpdump to capture
> a trace of this or a tcp session.
> email trace to me private if you want.
Does ping set the no fragment bit?
Ping -s 1500 to the router immediately before client's known IP address
works fine.  I'll get the owner of the client to help out later and send
those results with tcpdump to you privately.
Brian
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/