Date: Wed, 16 May 2007 18:10:13 -0700 (PDT)
From: Linus Torvalds <>
Subject: Re: 2.6.22-rc1 does not boot on VIA C3_2 cause of X86_CMPXCHG64
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/5/16/519

On Thu, 17 May 2007, Christian wrote:
>
> my small VIA C3_2 box does not boot with 2.6.22-rc1.
> It even does not uncompress the kernel.
> 
> The configuration as M386 M486 works. But M586 + MVIAC3_2
> does not work.
Ahh, from the EPIA HOWTO:
	13.2. Is the C3 Pentium compatible?
	Yes. But Samuel 2, Ezra, Ezra T C3 processors have a problem with 
	the cmpxchg8b (i.e. CMOV) opcode. Nehemiah and Antaur processors 
	are not affected.
However, that would imply that you don't have a VIA C3-2 (Nehamiah) at 
all, but the older original CyrixIII/VIA C3.
Can you check? The Nehemian (C3-2) should be model 9 or greater.
So afaik, you should use MCYRIXIII, and make _that_ be the one that 
disables the use of the cmpxchg8b instruction.
Can you please verify?
		Linus
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/