Date: Sat, 12 Jan 2002 22:03:21 +0000 (GMT)
From:  arjan@fenrus ...
Subject: Re: [PATCH] Additions to full lowlatency patch
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/1/12/137

In article <3C40AF23.18C811A8@kolumbus.fi> you wrote:
> --- linux-2.4.17-lowlatency/drivers/net/eepro100.c      Fri Dec 21 19:41:54 2001
> +++ linux-2.4.17-lowlatency-jl/drivers/net/eepro100.c   Mon Dec 31 22:41:42 2001
> @@ -324,7 +324,11 @@
> static inline void wait_for_cmd_done(long cmd_ioaddr)
> {
>        int wait = 1000;
> -       do  udelay(1) ;
> +       do
> +       {
> +                       conditional_schedule();
> +                       udelay(1) ;
> +       }
>        while(inb(cmd_ioaddr) && --wait >= 0);
> #ifndef final_version
>        if (wait < 0)
Did you audit all uses of this function ? It sort of looks like you're doing
"hey there's a udelay lets add a schedule".. ok that's a bit rude but I'm
not totally convinced that this function isn't called with spinlocks helt...
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/