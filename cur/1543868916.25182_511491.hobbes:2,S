Date: Wed, 21 Feb 2007 20:11:58 +0200
From: Avi Kivity <>
Subject: [PATCH 0/6] KVM userspace interface updates for 2.6.21
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/2/21/248

The following patchset moves the kvm userspace interface from having a 
single fd, to having three types of file descriptors:
- one fd returned by open("/dev/kvm") is used for generic access to the 
kvm driver, for example to get the API version and to create virtual 
machines
- when you create a virtual machine, you get back an fd that can be used 
to control vm-wide aspects, like guest memory configuratio
- when you create a virtual cpu, you get an fd that can be used to 
control the vcpu, for example getting and setting registers, and if 
you're really serious, running the guest
The motivation for this change is twofold:
- prevent having a 'struct inode' and 'struct file' with different file 
operation callbacks
- prevent cacheline bouncing of the 'struct file' when we support guest 
smp (by giving each vcpu its own file structure)
A side effect is that the code becomes somewhat cleaner, due to the vcpu 
number not being passed around and validated.
The change was discussed on kvm-devel some time ago.  Thanks to Arnd 
Bergmann for useful suggestions and to the epoll code for inspiration.
-- 
error compiling committee.c: too many arguments to function
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/