Date: Tue, 22 Jun 2004 21:23:19 +1000
From: Stephen Rothwell <>
Subject: Re: [RFC] iSeries virtual i/o sysfs files
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/6/22/48

Hi Jeff,
On Tue, 22 Jun 2004 02:20:44 -0400 Jeff Garzik <jgarzik@pobox.com> wrote:
>
> Stephen Rothwell wrote:
> > 
> > OK, this is what the patch does.  All the iSeries virtual devices now
> > appear in /sys/devices/vio and /sys/bus/vio/devices.  Unfortunately,
> > apart from the veth devices, there are all possible devices there at
> > the moment - I need to think about how to reduce it but that requires
> > moving all the probe code into vio.c ...
> 
> I'm not sure I entirely parse the third sentence in this paragraph, but 
> nonetheless...
What it means is that, as the patch stands, a node is created in
/sys/devices/vio (and /sys/bus/vio/devices) for all possible virtual
devices not just those actually present.  The exception is for virtual
ethernets which are relatively easy to enumerate.  To enumerate the other
devices precisely, I will need to extract the device probing code from
each of the other device drivers (viodasd, viocd and viotape) and include
some (hopefully simplified) form of the code directly into the bus probing
code for iSeries in vio.c.
> My general idea was that vio should be presented as a bus, so that 
> userland could enumerate all vio devices.  This approach seems along 
> these lines, and I have no objections to the patch.
Great, thanks.
-- 
Cheers,
Stephen Rothwell                    sfr@canb.auug.org.au
http://www.canb.auug.org.au/~sfr/
[unhandled content-type:application/pgp-signature]