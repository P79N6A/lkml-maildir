Date: Thu, 8 Jun 2006 09:01:08 +0200
From: Pavel Machek <>
Subject: Re: [linux-usb-devel] USB devices fail unnecessarily on unpowered hubs
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/6/8/23

Hi!
> > > If that does the job we need to somehow inherit the power supply maximum from
> > > PCI when we allocate the root hub's device structure.
> > 
> > I don't think there is such a convention that's generic for PCI.  There might
> > be ACPI-specific tables holding that value, but on embedded hardware the model
> > is often that the arch/.../board-ZZZ.c file just "knows" things like how much
> > power the regulator powering that port can provide, and arranges bus_mA to match.
> > Just like it knows all sorts of other details about how that board works.
> 
> Yes, I am afraid it cannot be done on the fly. But we might use a symbolic
> define which a subarch can override instead of a literal "500".
> If it turns out that this problem is one of power and not some other
> deficiency of this system's root hub.
That's bad... because we don't know exact model until runtime (ARM
tries to support many machines with single binary kernel, AFAICS), and
this is very likely going to be model-dependend.
								Pavel
-- 
(english) 
http://www.livejournal.com/~pavelmachek
(cesky, pictures) 
http://atrey.karlin.mff.cuni.cz/~pavel/picture/horses/blog.html
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/