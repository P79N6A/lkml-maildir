Date: Fri, 27 Jan 2006 07:27:43 -0500
From: Kyle Moffett <>
Subject: Re: RFC [patch 13/34] PID Virtualization Define new task_pid api
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/1/27/101

On Jan 27, 2006, at 04:04, Eric W. Biederman wrote:
> Basically my concern is that by using task structs internally the  
> kernel will start collecting invisible zombies.
So come up with a task_struct weakref system.  Maintain an (RCU?)  
linked list of struct task_weakref in the struct task_struct, and  
when the task struct is about to go away, run around all of the  
weakrefs and change their pointers to NULL.  The user of the weakref  
should check if the pointer is NULL and handle accordingly.  Sure, it  
would be tricky to get the locking right, but a couple extra bytes  
for a struct task_weakref would be a lot better than a whole pinned  
struct task_struct.
Cheers,
Kyle Moffett
--
Somone asked me why I work on this free (
http://www.fsf.org/
 
philosophy/) software stuff and not get a real job. Charles Schulz  
had the best answer:
"Why do musicians compose symphonies and poets write poems? They do  
it because life wouldn't have any meaning for them if they didn't.  
That's why I draw cartoons. It's my life."
   -- Charles Schulz
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/