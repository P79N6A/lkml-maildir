Date: Thu, 28 Sep 2000 16:27:08 +0100 (BST)
From: Tigran Aivazian <>
Subject: [patch-2.4.0-test9-pre7] misc fixes
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/9/28/151

Hi Linus,
Here is large patch with two small fixes:
a) now that you have rejected my suggestion to remove 'mm' argument from
swapout functions in vmscan.c, it makes sense to, at the _very_ least,
change their code to refer to the passed argument 'mm' instead of
vma->vm_mm as they currently do. On architectures where arguments can be
passed via registers this is an optimization.
b) using Keith' wonderful perl script which analyzes a vmlinux and
suggests what can be moved from data into bss I fixed a few most obvious
"offenders". This is not negligible - we are talking many kilobytes
here... I used "common sense" in addition to the perl script, i.e. I did
_not_ touch things like ATOMIC_INIT(0) or SOME_DEFINE_WITH_ZERO_VALUE
etc...
Regards,
Tigran
diff -urN -X dontdiff linux/arch/i386/kernel/apic.c fixes/arch/i386/kernel/apic.c
--- linux/arch/i386/kernel/apic.c	Mon Sep 11 13:34:22 2000
+++ fixes/arch/i386/kernel/apic.c	Thu Sep 28 15:24:19 2000
@@ -695,7 +695,7 @@
  * [ if a single-CPU system runs an SMP kernel then we call the local
  *   interrupt as well. Thus we cannot inline the local irq ... ]
  */
-unsigned int apic_timer_irqs [NR_CPUS] = { 0, };
+unsigned int apic_timer_irqs [NR_CPUS];
 
 void smp_apic_timer_interrupt(struct pt_regs * regs)
 {
diff -urN -X dontdiff linux/arch/i386/kernel/io_apic.c fixes/arch/i386/kernel/io_apic.c
--- linux/arch/i386/kernel/io_apic.c	Tue Sep 26 10:38:02 2000
+++ fixes/arch/i386/kernel/io_apic.c	Thu Sep 28 15:51:45 2000
@@ -38,7 +38,7 @@
 /*
  * # of IO-APICs and # of IRQ routing registers
  */
-int nr_ioapics = 0;
+int nr_ioapics;
 int nr_ioapic_registers[MAX_IO_APICS];
 
 /* I/O APIC entries */
@@ -48,7 +48,7 @@
 struct mpc_config_intsrc mp_irqs[MAX_IRQ_SOURCES];
 
 /* MP IRQ source entries */
-int mp_irq_entries = 0;
+int mp_irq_entries;
 
 #if CONFIG_SMP
 # define TARGET_CPUS cpu_online_map
@@ -172,8 +172,8 @@
 
 #define MAX_PIRQS 8
 int pirq_entries [MAX_PIRQS];
-int pirqs_enabled = 0;
-int skip_ioapic_setup = 0;
+int pirqs_enabled;
+int skip_ioapic_setup;
 
 static int __init ioapic_setup(char *str)
 {
diff -urN -X dontdiff linux/arch/i386/kernel/mpparse.c fixes/arch/i386/kernel/mpparse.c
--- linux/arch/i386/kernel/mpparse.c	Mon Sep 11 13:34:22 2000
+++ fixes/arch/i386/kernel/mpparse.c	Thu Sep 28 15:52:25 2000
@@ -28,7 +28,7 @@
 #include <asm/pgalloc.h>
 
 /* Have we found an MP table */
-int smp_found_config = 0;
+int smp_found_config;
 
 /*
  * Various Linux-internal data structures created from the
@@ -37,17 +37,17 @@
 int apic_version [MAX_APICS];
 int mp_bus_id_to_type [MAX_MP_BUSSES];
 int mp_bus_id_to_pci_bus [MAX_MP_BUSSES] = { -1, };
-int mp_current_pci_id = 0;
+int mp_current_pci_id;
 int pic_mode;
-unsigned long mp_lapic_addr = 0;
+unsigned long mp_lapic_addr;
 
 /* Processor that is doing the boot up */
 unsigned int boot_cpu_id = -1U;
 /* Internal processor count */
-static unsigned int num_processors = 0;
+static unsigned int num_processors;
 
 /* Bitmask of physically existing CPUs */
-unsigned long phys_cpu_present_map = 0;
+unsigned long phys_cpu_present_map;
 
 /*
  * Intel MP BIOS table parsing routines:
diff -urN -X dontdiff linux/arch/i386/kernel/mtrr.c fixes/arch/i386/kernel/mtrr.c
--- linux/arch/i386/kernel/mtrr.c	Tue Sep 26 10:38:02 2000
+++ fixes/arch/i386/kernel/mtrr.c	Thu Sep 28 15:19:59 2000
@@ -319,10 +319,10 @@
 #endif
 
 #ifdef USERSPACE_INTERFACE
-static char *ascii_buffer = NULL;
-static unsigned int ascii_buf_bytes = 0;
+static char *ascii_buffer;
+static unsigned int ascii_buf_bytes;
 #endif
-static unsigned int *usage_table = NULL;
+static unsigned int *usage_table;
 static DECLARE_MUTEX(main_lock);
 
 /*  Private functions  */
@@ -639,7 +639,7 @@
 }   /*  End Function centaur_get_mcr  */
 
 static void (*get_mtrr) (unsigned int reg, unsigned long *base,
-			 unsigned long *size, mtrr_type *type) = NULL;
+			 unsigned long *size, mtrr_type *type);
 
 static void intel_set_mtrr_up (unsigned int reg, unsigned long base,
 			       unsigned long size, mtrr_type type, int do_safe)
@@ -782,7 +782,7 @@
 
 static void (*set_mtrr_up) (unsigned int reg, unsigned long base,
 			    unsigned long size, mtrr_type type,
-			    int do_safe) = NULL;
+			    int do_safe);
 
 #ifdef CONFIG_SMP
 
diff -urN -X dontdiff linux/arch/i386/kernel/process.c fixes/arch/i386/kernel/process.c
--- linux/arch/i386/kernel/process.c	Mon Sep 11 13:34:22 2000
+++ fixes/arch/i386/kernel/process.c	Thu Sep 28 15:21:01 2000
@@ -50,17 +50,17 @@
 
 asmlinkage void ret_from_fork(void) __asm__("ret_from_fork");
 
-int hlt_counter=0;
+int hlt_counter;
 
 /*
  * Powermanagement idle function, if any..
  */
-void (*pm_idle)(void) = NULL;
+void (*pm_idle)(void);
 
 /*
  * Power off function, if any
  */
-void (*pm_power_off)(void) = NULL;
+void (*pm_power_off)(void);
 
 void disable_hlt(void)
 {
@@ -149,9 +149,9 @@
 
 __setup("idle=", idle_setup);
 
-static long no_idt[2] = {0, 0};
-static int reboot_mode = 0;
-static int reboot_thru_bios = 0;
+static long no_idt[2];
+static int reboot_mode;
+static int reboot_thru_bios;
 
 static int __init reboot_setup(char *str)
 {
diff -urN -X dontdiff linux/arch/i386/kernel/setup.c fixes/arch/i386/kernel/setup.c
--- linux/arch/i386/kernel/setup.c	Tue Sep 26 10:38:02 2000
+++ fixes/arch/i386/kernel/setup.c	Thu Sep 28 15:51:08 2000
@@ -95,22 +95,22 @@
  * Machine setup..
  */
 
-char ignore_irq13 = 0;		/* set if exception 16 works */
+char ignore_irq13;		/* set if exception 16 works */
 struct cpuinfo_x86 boot_cpu_data = { 0, 0, 0, 0, -1, 1, 0, 0, -1 };
 
-unsigned long mmu_cr4_features = 0;
+unsigned long mmu_cr4_features;
 
 /*
  * Bus types ..
  */
-int EISA_bus = 0;
-int MCA_bus = 0;
+int EISA_bus;
+int MCA_bus;
 
 /* for MCA, but anyone else can use it if they want */
-unsigned int machine_id = 0;
-unsigned int machine_submodel_id = 0;
-unsigned int BIOS_revision = 0;
-unsigned int mca_pentium_flag = 0;
+unsigned int machine_id;
+unsigned int machine_submodel_id;
+unsigned int BIOS_revision;
+unsigned int mca_pentium_flag;
 
 /*
  * Setup options
@@ -123,7 +123,7 @@
 	unsigned char table[0];
 };
 
-struct e820map e820 = { 0 };
+struct e820map e820;
 
 unsigned char aux_device_present;
 
@@ -291,7 +291,7 @@
 #endif
 
 
-static char command_line[COMMAND_LINE_SIZE] = { 0, };
+static char command_line[COMMAND_LINE_SIZE];
        char saved_command_line[COMMAND_LINE_SIZE];
 
 struct resource standard_io_resources[] = {
diff -urN -X dontdiff linux/arch/i386/kernel/smpboot.c fixes/arch/i386/kernel/smpboot.c
--- linux/arch/i386/kernel/smpboot.c	Tue Sep 26 10:38:02 2000
+++ fixes/arch/i386/kernel/smpboot.c	Thu Sep 28 15:23:46 2000
@@ -46,7 +46,7 @@
 #include <asm/pgalloc.h>
 
 /* Set if we find a B stepping CPU			*/
-static int smp_b_stepping = 0;
+static int smp_b_stepping;
 
 /* Setup configured maximum number of CPUs to activate */
 static int max_cpus = -1;
@@ -55,21 +55,21 @@
 int smp_num_cpus = 1;
 
 /* Bitmask of currently online CPUs */
-unsigned long cpu_online_map = 0;
+unsigned long cpu_online_map;
 
 /* which CPU (physical APIC ID) maps to which logical CPU number */
 volatile int x86_apicid_to_cpu[NR_CPUS];
 /* which logical CPU number maps to which CPU (physical APIC ID) */
 volatile int x86_cpu_to_apicid[NR_CPUS];
 
-static volatile unsigned long cpu_callin_map = 0;
-static volatile unsigned long cpu_callout_map = 0;
+static volatile unsigned long cpu_callin_map;
+static volatile unsigned long cpu_callout_map;
 
 /* Per CPU bogomips and other parameters */
 struct cpuinfo_x86 cpu_data[NR_CPUS];
 
 /* Set when the idlers are all forked */
-int smp_threads_ready = 0;
+int smp_threads_ready;
 
 /*
  * Setup routine for controlling SMP activation
@@ -194,7 +194,7 @@
 static atomic_t tsc_start_flag = ATOMIC_INIT(0);
 static atomic_t tsc_count_start = ATOMIC_INIT(0);
 static atomic_t tsc_count_stop = ATOMIC_INIT(0);
-static unsigned long long tsc_values[NR_CPUS] = { 0, };
+static unsigned long long tsc_values[NR_CPUS];
 
 #define NR_LOOPS 5
 
@@ -438,7 +438,7 @@
 		synchronize_tsc_ap();
 }
 
-int cpucount = 0;
+int cpucount;
 
 extern int cpu_idle(void);
 
diff -urN -X dontdiff linux/arch/i386/kernel/vm86.c fixes/arch/i386/kernel/vm86.c
--- linux/arch/i386/kernel/vm86.c	Tue Jul 11 19:26:47 2000
+++ fixes/arch/i386/kernel/vm86.c	Thu Sep 28 15:50:39 2000
@@ -565,8 +565,8 @@
 static struct vm86_irqs {
 	struct task_struct *tsk;
 	int sig;
-} vm86_irqs[16] = {{0},}; 
-static int irqbits=0;
+} vm86_irqs[16];
+static int irqbits;
 
 #define ALLOWED_SIGS ( 1 /* 0 = don't send a signal */ \
 	| (1 << SIGUSR1) | (1 << SIGUSR2) | (1 << SIGIO)  | (1 << SIGURG) \
diff -urN -X dontdiff linux/arch/mips/baget/vacserial.c fixes/arch/mips/baget/vacserial.c
--- linux/arch/mips/baget/vacserial.c	Fri Jul 28 09:58:58 2000
+++ fixes/arch/mips/baget/vacserial.c	Thu Sep 28 15:41:42 2000
@@ -2843,7 +2843,7 @@
  * device more directly.
  */
 
-static int initialized = 0;
+static int initialized;
 
 static int rs_debug_init(struct async_struct *info)
 {
diff -urN -X dontdiff linux/arch/mips/kernel/gdb-stub.c fixes/arch/mips/kernel/gdb-stub.c
--- linux/arch/mips/kernel/gdb-stub.c	Wed May 24 04:35:03 2000
+++ fixes/arch/mips/kernel/gdb-stub.c	Thu Sep 28 15:41:52 2000
@@ -115,7 +115,7 @@
 
 static char input_buffer[BUFMAX];
 static char output_buffer[BUFMAX];
-static int initialized = 0;	/* !0 means we've been initialized */
+static int initialized;	/* !0 means we've been initialized */
 static const char hexchars[]="0123456789abcdef";
 
 
diff -urN -X dontdiff linux/arch/ppc/kernel/ppc-stub.c fixes/arch/ppc/kernel/ppc-stub.c
--- linux/arch/ppc/kernel/ppc-stub.c	Sat May 13 09:32:07 2000
+++ fixes/arch/ppc/kernel/ppc-stub.c	Thu Sep 28 15:42:08 2000
@@ -122,9 +122,9 @@
 static char remcomInBuffer[BUFMAX];
 static char remcomOutBuffer[BUFMAX];
 
-static int initialized = 0;
-static int kgdb_active = 0;
-static int kgdb_started = 0;
+static int initialized;
+static int kgdb_active;
+static int kgdb_started;
 static u_int fault_jmp_buf[100];
 static int kdebug;
 
diff -urN -X dontdiff linux/arch/sparc/kernel/sparc-stub.c fixes/arch/sparc/kernel/sparc-stub.c
--- linux/arch/sparc/kernel/sparc-stub.c	Mon Jan  3 20:01:31 2000
+++ fixes/arch/sparc/kernel/sparc-stub.c	Thu Sep 28 15:42:17 2000
@@ -123,7 +123,7 @@
  */
 #define BUFMAX 2048
 
-static int initialized = 0;	/* !0 means we've been initialized */
+static int initialized;	/* !0 means we've been initialized */
 
 static const char hexchars[]="0123456789abcdef";
 
diff -urN -X dontdiff linux/drivers/acorn/block/fd1772.c fixes/drivers/acorn/block/fd1772.c
--- linux/drivers/acorn/block/fd1772.c	Thu Aug 24 08:08:44 2000
+++ fixes/drivers/acorn/block/fd1772.c	Thu Sep 28 15:26:17 2000
@@ -198,7 +198,7 @@
 #define MAX_DISK_SIZE 720
 
 static int floppy_sizes[256];
-static int floppy_blocksizes[256] = {0,};
+static int floppy_blocksizes[256];
 
 /* current info on each unit */
 static struct archy_floppy_struct {
diff -urN -X dontdiff linux/drivers/block/amiflop.c fixes/drivers/block/amiflop.c
--- linux/drivers/block/amiflop.c	Sat Jun 24 12:44:26 2000
+++ fixes/drivers/block/amiflop.c	Thu Sep 28 15:26:52 2000
@@ -140,7 +140,7 @@
 
 /* defaults for 3 1/2" HD-Disks */
 static int floppy_sizes[256]={880,880,880,880,720,720,720,720,};
-static int floppy_blocksizes[256]={0,};
+static int floppy_blocksizes[256];
 /* hardsector size assumed to be 512 */
 
 static int amiga_read(int), dos_read(int);
@@ -151,7 +151,7 @@
 };
 
 /* current info on each unit */
-static struct amiga_floppy_struct unit[FD_MAX_UNITS] = {{ 0,}};
+static struct amiga_floppy_struct unit[FD_MAX_UNITS];
 
 static struct timer_list flush_track_timer[FD_MAX_UNITS];
 static struct timer_list post_write_timer;
@@ -162,15 +162,15 @@
 /* Synchronization of FDC access */
 /* request loop (trackbuffer) */
 static volatile int fdc_busy = -1;
-static volatile int fdc_nested = 0;
+static volatile int fdc_nested;
 static DECLARE_WAIT_QUEUE_HEAD(fdc_wait);
  
 static DECLARE_WAIT_QUEUE_HEAD(motor_wait);
 
 static volatile int selected = -1;	/* currently selected drive */
 
-static int writepending = 0;
-static int writefromint = 0;
+static int writepending;
+static int writefromint;
 static char *raw_buf;
 
 #define RAW_BUF_SIZE 30000  /* size of raw disk data */
@@ -180,7 +180,7 @@
  * information to interrupts. They are the data used for the current
  * request.
  */
-static volatile char block_flag = 0;
+static volatile char block_flag;
 static DECLARE_WAIT_QUEUE_HEAD(wait_fd_block);
 
 /* MS-Dos MFM Coding tables (should go quick and easy) */
diff -urN -X dontdiff linux/drivers/block/floppy.c fixes/drivers/block/floppy.c
--- linux/drivers/block/floppy.c	Tue Sep 26 10:38:03 2000
+++ fixes/drivers/block/floppy.c	Thu Sep 28 15:18:43 2000
@@ -168,7 +168,7 @@
  * It's been recommended that take about 1/4 of the default speed
  * in some more extreme cases.
  */
-static int slow_floppy = 0;
+static int slow_floppy;
 
 #include <asm/dma.h>
 #include <asm/irq.h>
@@ -203,7 +203,7 @@
 void floppy_interrupt(int irq, void *dev_id, struct pt_regs * regs);
 static int set_dor(int fdc, char mask, char data);
 static void register_devfs_entries (int drive) __init;
-static devfs_handle_t devfs_handle = NULL;
+static devfs_handle_t devfs_handle;
 
 #define K_64	0x10000		/* 64KB */
 
@@ -221,7 +221,7 @@
 
 #include <asm/floppy.h>
 
-static int irqdma_allocated = 0;
+static int irqdma_allocated;
 
 #define MAJOR_NR FLOPPY_MAJOR
 
@@ -259,7 +259,7 @@
 
 /* End dma memory related stuff */
 
-static unsigned long fake_change = 0;
+static unsigned long fake_change;
 static int initialising=1;
 
 static inline int TYPE(kdev_t x) {
@@ -460,10 +460,7 @@
 #define SECTSIZE (_FD_SECTSIZE(*floppy))
 
 /* Auto-detection: Disk type used until the next media change occurs. */
-static struct floppy_struct *current_type[N_DRIVE] = {
-	NULL, NULL, NULL, NULL,
-	NULL, NULL, NULL, NULL
-};
+static struct floppy_struct *current_type[N_DRIVE];
 
 /*
  * User-provided type information. current_type points to
@@ -472,14 +469,14 @@
 static struct floppy_struct user_params[N_DRIVE];
 
 static int floppy_sizes[256];
-static int floppy_blocksizes[256] = { 0, };
+static int floppy_blocksizes[256];
 
 /*
  * The driver is trying to determine the correct media format
  * while probing is set. rw_interrupt() clears it after a
  * successful access.
  */
-static int probing = 0;
+static int probing;
 
 /* Synchronization of FDC access. */
 #define FD_COMMAND_NONE -1
@@ -487,7 +484,7 @@
 #define FD_COMMAND_OKAY 3
 
 static volatile int command_status = FD_COMMAND_NONE;
-static unsigned long fdc_busy = 0;
+static unsigned long fdc_busy;
 static DECLARE_WAIT_QUEUE_HEAD(fdc_wait);
 static DECLARE_WAIT_QUEUE_HEAD(command_done);
 
@@ -558,9 +555,7 @@
 #define NEED_1_RECAL -2
 #define NEED_2_RECAL -3
 
-/* */
-static int usage_count = 0;
-
+static int usage_count;
 
 /* buffer related variables */
 static int buffer_track = -1;
@@ -573,8 +568,8 @@
 static int fdc; /* current fdc */
 
 static struct floppy_struct *_floppy = floppy_type;
-static unsigned char current_drive = 0;
-static long current_count_sectors = 0;
+static unsigned char current_drive;
+static long current_count_sectors;
 static unsigned char sector_t; /* sector in track */
 static unsigned char in_sector_offset;	/* offset within physical sector,
 					 * expressed in units of 512 bytes */
@@ -625,7 +620,7 @@
 
 #define OLOGSIZE 20
 
-static void (*lasthandler)(void) = NULL;
+static void (*lasthandler)(void);
 static unsigned long interruptjiffies;
 static unsigned long resultjiffies;
 static int resultsize;
@@ -991,8 +986,7 @@
 {
 }
 
-static struct tq_struct floppy_tq =
-{ 0, 0, 0, 0 };
+static struct tq_struct floppy_tq;
 
 static void schedule_bh( void (*handler)(void*) )
 {
@@ -1269,7 +1263,7 @@
 } /* perpendicular_mode */
 
 static int fifo_depth = 0xa;
-static int no_fifo = 0;
+static int no_fifo;
 
 static int fdc_configure(void)
 {
diff -urN -X dontdiff linux/drivers/cdrom/sonycd535.c fixes/drivers/cdrom/sonycd535.c
--- linux/drivers/cdrom/sonycd535.c	Fri Jul 28 09:58:59 2000
+++ fixes/drivers/cdrom/sonycd535.c	Thu Sep 28 15:42:48 2000
@@ -217,16 +217,16 @@
 static unsigned short read_status_reg;
 static unsigned short data_reg;
 
-static int initialized = 0;			/* Has the drive been initialized? */
+static int initialized;			/* Has the drive been initialized? */
 static int sony_disc_changed = 1;	/* Has the disk been changed
 					   since the last check? */
-static int sony_toc_read = 0;		/* Has the table of contents been
+static int sony_toc_read;		/* Has the table of contents been
 					   read? */
 static unsigned int sony_buffer_size;	/* Size in bytes of the read-ahead
 					   buffer. */
 static unsigned int sony_buffer_sectors;	/* Size (in 2048 byte records) of
 						   the read-ahead buffer. */
-static unsigned int sony_usage = 0;	/* How many processes have the
+static unsigned int sony_usage;		/* How many processes have the
 					   drive open. */
 
 static int sony_first_block = -1;	/* First OS block (512 byte) in
@@ -242,7 +242,7 @@
 static Byte **sony_buffer;		/* Points to the pointers
 					   to the sector buffers */
 
-static int sony_inuse = 0;		/* is the drive in use? Only one
+static int sony_inuse;			/* is the drive in use? Only one
 					   open at a time allowed */
 
 /*
@@ -260,8 +260,8 @@
  *   I just kept the CDU-31A driver behavior rather than using the PAUSE
  * command on the CDU-535.
  */
-static Byte cur_pos_msf[3] = {0, 0, 0};
-static Byte final_pos_msf[3] = {0, 0, 0};
+static Byte cur_pos_msf[3];
+static Byte final_pos_msf[3];
 
 /* What IRQ is the drive using?  0 if none. */
 static int sony535_irq_used = CDU535_INTERRUPT;
diff -urN -X dontdiff linux/drivers/char/raw.c fixes/drivers/char/raw.c
--- linux/drivers/char/raw.c	Fri Jul 14 20:52:15 2000
+++ fixes/drivers/char/raw.c	Thu Sep 28 15:27:48 2000
@@ -19,10 +19,10 @@
 
 #define dprintk(x...) 
 
-static struct block_device *raw_device_bindings[256] = {};
-static int raw_device_inuse[256] = {};
-static int raw_device_sector_size[256] = {};
-static int raw_device_sector_bits[256] = {};
+static struct block_device *raw_device_bindings[256];
+static int raw_device_inuse[256];
+static int raw_device_sector_size[256];
+static int raw_device_sector_bits[256];
 
 static ssize_t rw_raw_dev(int rw, struct file *, char *, size_t, loff_t *);
 
diff -urN -X dontdiff linux/drivers/i2c/i2c-algo-bit.c fixes/drivers/i2c/i2c-algo-bit.c
--- linux/drivers/i2c/i2c-algo-bit.c	Fri Jul 28 09:58:59 2000
+++ fixes/drivers/i2c/i2c-algo-bit.c	Thu Sep 28 15:28:12 2000
@@ -62,9 +62,9 @@
 
 /* module parameters:
  */
-static int i2c_debug=0;
-static int bit_test=0;	/* see if the line-setting functions work	*/
-static int bit_scan=0;	/* have a look at what's hanging 'round		*/
+static int i2c_debug;
+static int bit_test;	/* see if the line-setting functions work	*/
+static int bit_scan;	/* have a look at what's hanging 'round		*/
 
 /* --- setting states on the bus with the right timing: ---------------	*/
 
diff -urN -X dontdiff linux/drivers/i2c/i2c-core.c fixes/drivers/i2c/i2c-core.c
--- linux/drivers/i2c/i2c-core.c	Fri Jul 28 09:58:59 2000
+++ fixes/drivers/i2c/i2c-core.c	Thu Sep 28 15:47:07 2000
@@ -105,7 +105,7 @@
 };
 #endif
 
-static int i2cproc_initialized = 0;
+static int i2cproc_initialized;
 
 #else /* undef CONFIG_PROC_FS */
 
diff -urN -X dontdiff linux/drivers/pci/quirks.c fixes/drivers/pci/quirks.c
--- linux/drivers/pci/quirks.c	Thu Aug 10 06:51:11 2000
+++ fixes/drivers/pci/quirks.c	Thu Sep 28 15:46:01 2000
@@ -46,7 +46,7 @@
     chipset level fix */
     
 
-int isa_dma_bridge_buggy = 0;		/* Exported */
+int isa_dma_bridge_buggy;		/* Exported */
     
 static void __init quirk_isa_dma_hangs(struct pci_dev *dev)
 {
@@ -56,7 +56,7 @@
 	}
 }
 
-int pci_pci_problems = 0;
+int pci_pci_problems;
 
 /*
  *	Chipsets where PCI->PCI transfers vanish or hang
diff -urN -X dontdiff linux/drivers/pnp/isapnp.c fixes/drivers/pnp/isapnp.c
--- linux/drivers/pnp/isapnp.c	Mon Sep 11 13:34:22 2000
+++ fixes/drivers/pnp/isapnp.c	Thu Sep 28 15:46:44 2000
@@ -48,14 +48,14 @@
 #define ISAPNP_DEBUG
 #endif
 
-struct resource *pidxr_res = NULL;
-struct resource *pnpwrp_res = NULL;
-struct resource *isapnp_rdp_res = NULL;
+struct resource *pidxr_res;
+struct resource *pnpwrp_res;
+struct resource *isapnp_rdp_res;
 
-int isapnp_disable = 0;			/* Disable ISA PnP */
-int isapnp_rdp = 0;			/* Read Data Port */
+int isapnp_disable;			/* Disable ISA PnP */
+int isapnp_rdp;			/* Read Data Port */
 int isapnp_reset = 1;			/* reset all PnP cards (deactivate) */
-int isapnp_skip_pci_scan = 0;		/* skip PCI resource scanning */
+int isapnp_skip_pci_scan;		/* skip PCI resource scanning */
 int isapnp_verbose = 1;			/* verbose mode */
 int isapnp_reserve_irq[16] = { [0 ... 15] = -1 };	/* reserve (don't use) some IRQ */
 int isapnp_reserve_dma[8] = { [0 ... 7] = -1 };		/* reserve (don't use) some DMA */
@@ -108,7 +108,7 @@
 
 static unsigned char isapnp_checksum_value;
 static DECLARE_MUTEX(isapnp_cfg_mutex);
-static int isapnp_detected = 0;
+static int isapnp_detected;
 
 /* some prototypes */
 
diff -urN -X dontdiff linux/drivers/scsi/sd.c fixes/drivers/scsi/sd.c
--- linux/drivers/scsi/sd.c	Tue Sep 26 10:38:04 2000
+++ fixes/drivers/scsi/sd.c	Thu Sep 28 15:45:18 2000
@@ -80,7 +80,7 @@
 
 struct hd_struct *sd;
 
-static Scsi_Disk *rscsi_disks = NULL;
+static Scsi_Disk *rscsi_disks;
 static int *sd_sizes;
 static int *sd_blocksizes;
 static int *sd_hardsizes;	/* Hardware sector size */
@@ -1018,7 +1018,7 @@
  * their size, and reads partition table entries for them.
  */
 
-static int sd_registered = 0;
+static int sd_registered;
 
 static int sd_init()
 {
diff -urN -X dontdiff linux/drivers/scsi/sr.c fixes/drivers/scsi/sr.c
--- linux/drivers/scsi/sr.c	Tue Sep 26 10:38:04 2000
+++ fixes/drivers/scsi/sr.c	Thu Sep 28 15:45:30 2000
@@ -696,7 +696,7 @@
 	return cgc->stat;
 }
 
-static int sr_registered = 0;
+static int sr_registered;
 
 static int sr_init()
 {
diff -urN -X dontdiff linux/drivers/sound/sound_timer.c fixes/drivers/sound/sound_timer.c
--- linux/drivers/sound/sound_timer.c	Thu Aug 24 08:08:45 2000
+++ fixes/drivers/sound/sound_timer.c	Thu Sep 28 15:43:08 2000
@@ -16,7 +16,7 @@
 
 #include "sound_config.h"
 
-static volatile int initialized = 0, opened = 0, tmr_running = 0;
+static volatile int initialized, opened, tmr_running;
 static volatile time_t tmr_offs, tmr_ctr;
 static volatile unsigned long ticks_offs;
 static volatile int curr_tempo, curr_timebase;
@@ -25,7 +25,7 @@
 static unsigned long prev_event_time;
 static volatile unsigned long usecs_per_tmr;	/* Length of the current interval */
 
-static struct sound_lowlev_timer *tmr = NULL;
+static struct sound_lowlev_timer *tmr;
 
 static unsigned long tmr2ticks(int tmr_value)
 {
diff -urN -X dontdiff linux/drivers/video/fbcon.c fixes/drivers/video/fbcon.c
--- linux/drivers/video/fbcon.c	Fri Jul 28 09:58:59 2000
+++ fixes/drivers/video/fbcon.c	Thu Sep 28 15:44:59 2000
@@ -143,7 +143,7 @@
  * if dispsw->cursor is NULL, use Atari alike software cursor
  */
 
-static int cursor_drawn = 0;
+static int cursor_drawn;
 
 #define CURSOR_DRAW_DELAY		(1)
 
@@ -154,8 +154,8 @@
 #define MAC_CURSOR_BLINK_RATE		(32)
 #define DEFAULT_CURSOR_BLINK_RATE	(20)
 
-static int vbl_cursor_cnt = 0;
-static int cursor_on = 0;
+static int vbl_cursor_cnt;
+static int cursor_on;
 static int cursor_blink_rate;
 
 static inline void cursor_undrawn(void)
@@ -218,7 +218,7 @@
 /*
  * On the Macintoy, there may or may not be a working VBL int. We need to probe
  */
-static int vbl_detected = 0;
+static int vbl_detected;
 
 static void fbcon_vbl_detect(int irq, void *dummy, struct pt_regs *fp)
 {
diff -urN -X dontdiff linux/drivers/video/fbmem.c fixes/drivers/video/fbmem.c
--- linux/drivers/video/fbmem.c	Thu Aug 10 06:51:11 2000
+++ fixes/drivers/video/fbmem.c	Thu Sep 28 15:44:23 2000
@@ -286,10 +286,10 @@
 
 
 struct fb_info *registered_fb[FB_MAX];
-int num_registered_fb = 0;
+int num_registered_fb;
 extern int fbcon_softback_size; 
 
-static int first_fb_vc = 0;
+static int first_fb_vc;
 static int last_fb_vc = MAX_NR_CONSOLES-1;
 static int fbcon_is_default = 1;
 
diff -urN -X dontdiff linux/drivers/video/matrox/matroxfb_base.c fixes/drivers/video/matrox/matroxfb_base.c
--- linux/drivers/video/matrox/matroxfb_base.c	Mon Sep 11 13:34:23 2000
+++ fixes/drivers/video/matrox/matroxfb_base.c	Thu Sep 28 15:56:42 2000
@@ -1286,43 +1286,43 @@
 };
 
 /* initialized by setup, see explanation at end of file (search for MODULE_PARM_DESC) */
-static unsigned int mem = 0;		/* "matrox:mem:xxxxxM" */
+static unsigned int mem;		/* "matrox:mem:xxxxxM" */
 static int option_precise_width = 1;	/* cannot be changed, option_precise_width==0 must imply noaccel */
-static int inv24 = 0;			/* "matrox:inv24" */
+static int inv24;			/* "matrox:inv24" */
 static int cross4MB = -1;		/* "matrox:cross4MB" */
-static int disabled = 0;		/* "matrox:disabled" */
-static int noaccel = 0;			/* "matrox:noaccel" */
-static int nopan = 0;			/* "matrox:nopan" */
-static int no_pci_retry = 0;		/* "matrox:nopciretry" */
-static int novga = 0;			/* "matrox:novga" */
-static int nobios = 0;			/* "matrox:nobios" */
+static int disabled;			/* "matrox:disabled" */
+static int noaccel;			/* "matrox:noaccel" */
+static int nopan;			/* "matrox:nopan" */
+static int no_pci_retry;		/* "matrox:nopciretry" */
+static int novga;			/* "matrox:novga" */
+static int nobios;			/* "matrox:nobios" */
 static int noinit = 1;			/* "matrox:init" */
-static int inverse = 0;			/* "matrox:inverse" */
+static int inverse;			/* "matrox:inverse" */
 static int hwcursor = 1;		/* "matrox:nohwcursor" */
 static int blink = 1;			/* "matrox:noblink" */
-static int sgram = 0;			/* "matrox:sgram" */
+static int sgram;			/* "matrox:sgram" */
 #ifdef CONFIG_MTRR
 static int mtrr = 1;			/* "matrox:nomtrr" */
 #endif
-static int grayscale = 0;		/* "matrox:grayscale" */
-static unsigned int fastfont = 0;	/* "matrox:fastfont:xxxxx" */
+static int grayscale;			/* "matrox:grayscale" */
+static unsigned int fastfont;		/* "matrox:fastfont:xxxxx" */
 static int dev = -1;			/* "matrox:dev:xxxxx" */
 static unsigned int vesa = ~0;		/* "matrox:vesa:xxxxx" */
 static int depth = -1;			/* "matrox:depth:xxxxx" */
-static unsigned int xres = 0;		/* "matrox:xres:xxxxx" */
-static unsigned int yres = 0;		/* "matrox:yres:xxxxx" */
+static unsigned int xres;		/* "matrox:xres:xxxxx" */
+static unsigned int yres;		/* "matrox:yres:xxxxx" */
 static unsigned int upper = ~0;		/* "matrox:upper:xxxxx" */
 static unsigned int lower = ~0;		/* "matrox:lower:xxxxx" */
-static unsigned int vslen = 0;		/* "matrox:vslen:xxxxx" */
+static unsigned int vslen;		/* "matrox:vslen:xxxxx" */
 static unsigned int left = ~0;		/* "matrox:left:xxxxx" */
 static unsigned int right = ~0;		/* "matrox:right:xxxxx" */
-static unsigned int hslen = 0;		/* "matrox:hslen:xxxxx" */
-static unsigned int pixclock = 0;	/* "matrox:pixclock:xxxxx" */
+static unsigned int hslen;		/* "matrox:hslen:xxxxx" */
+static unsigned int pixclock;		/* "matrox:pixclock:xxxxx" */
 static int sync = -1;			/* "matrox:sync:xxxxx" */
-static unsigned int fv = 0;		/* "matrox:fv:xxxxx" */
-static unsigned int fh = 0;		/* "matrox:fh:xxxxxk" */
-static unsigned int maxclk = 0;		/* "matrox:maxclk:xxxxM" */
-static int dfp = 0;			/* "matrox:dfp */
+static unsigned int fv;			/* "matrox:fv:xxxxx" */
+static unsigned int fh;			/* "matrox:fh:xxxxxk" */
+static unsigned int maxclk;		/* "matrox:maxclk:xxxxM" */
+static int dfp;				/* "matrox:dfp */
 static int memtype = -1;		/* "matrox:memtype:xxx" */
 static char fontname[64];		/* "matrox:font:xxxxx" */
 
diff -urN -X dontdiff linux/fs/block_dev.c fixes/fs/block_dev.c
--- linux/fs/block_dev.c	Tue Sep 26 10:38:05 2000
+++ fixes/fs/block_dev.c	Thu Sep 28 15:25:37 2000
@@ -468,9 +468,7 @@
 static struct {
 	const char *name;
 	struct block_device_operations *bdops;
-} blkdevs[MAX_BLKDEV] = {
-	{ NULL, NULL },
-};
+} blkdevs[MAX_BLKDEV];
 
 int get_blkdev_list(char * p)
 {
diff -urN -X dontdiff linux/fs/cramfs/uncompress.c fixes/fs/cramfs/uncompress.c
--- linux/fs/cramfs/uncompress.c	Thu Apr 27 09:01:30 2000
+++ fixes/fs/cramfs/uncompress.c	Thu Sep 28 15:43:23 2000
@@ -20,7 +20,7 @@
 #include "inflate/zlib.h"
 
 static z_stream stream;
-static int initialized = 0;
+static int initialized;
 
 /* Returns length of decompressed data. */
 int cramfs_uncompress_block(void *dst, int dstlen, void *src, int srclen)
diff -urN -X dontdiff linux/fs/devices.c fixes/fs/devices.c
--- linux/fs/devices.c	Thu Aug 10 06:51:11 2000
+++ fixes/fs/devices.c	Thu Sep 28 15:25:19 2000
@@ -36,9 +36,7 @@
 };
 
 static rwlock_t chrdevs_lock = RW_LOCK_UNLOCKED;
-static struct device_struct chrdevs[MAX_CHRDEV] = {
-	{ NULL, NULL },
-};
+static struct device_struct chrdevs[MAX_CHRDEV];
 
 extern int get_blkdev_list(char *);
 
diff -urN -X dontdiff linux/fs/inode.c fixes/fs/inode.c
--- linux/fs/inode.c	Tue Sep 26 10:38:05 2000
+++ fixes/fs/inode.c	Thu Sep 28 15:48:27 2000
@@ -519,9 +519,9 @@
  */
 static void clean_inode(struct inode *inode)
 {
-	static struct address_space_operations empty_aops = {};
-	static struct inode_operations empty_iops = {};
-	static struct file_operations empty_fops = {};
+	static struct address_space_operations empty_aops;
+	static struct inode_operations empty_iops;
+	static struct file_operations empty_fops;
 	memset(&inode->u, 0, sizeof(inode->u));
 	inode->i_sock = 0;
 	inode->i_op = &empty_iops;
diff -urN -X dontdiff linux/fs/lockd/host.c fixes/fs/lockd/host.c
--- linux/fs/lockd/host.c	Sat Jun 24 12:44:28 2000
+++ fixes/fs/lockd/host.c	Thu Sep 28 15:53:52 2000
@@ -29,8 +29,8 @@
 #define NLM_HOST_ADDR(sv)	(&(sv)->s_nlmclnt->cl_xprt->addr)
 
 static struct nlm_host *	nlm_hosts[NLM_HOST_NRHASH];
-static unsigned long		next_gc = 0;
-static int			nrhosts = 0;
+static unsigned long		next_gc;
+static int			nrhosts;
 static DECLARE_MUTEX(nlm_host_sema);
 
 
diff -urN -X dontdiff linux/fs/lockd/svc.c fixes/fs/lockd/svc.c
--- linux/fs/lockd/svc.c	Sat Jun 24 12:44:28 2000
+++ fixes/fs/lockd/svc.c	Thu Sep 28 15:54:27 2000
@@ -39,12 +39,12 @@
 #define ALLOWED_SIGS		(sigmask(SIGKILL))
 
 extern struct svc_program	nlmsvc_program;
-struct nlmsvc_binding *		nlmsvc_ops = NULL;
+struct nlmsvc_binding *		nlmsvc_ops;
 static DECLARE_MUTEX(nlmsvc_sema);
-static unsigned int		nlmsvc_users = 0;
-static pid_t			nlmsvc_pid = 0;
-unsigned long			nlmsvc_grace_period = 0;
-unsigned long			nlmsvc_timeout = 0;
+static unsigned int		nlmsvc_users;
+static pid_t			nlmsvc_pid;
+unsigned long			nlmsvc_grace_period;
+unsigned long			nlmsvc_timeout;
 
 static DECLARE_MUTEX_LOCKED(lockd_start);
 static DECLARE_WAIT_QUEUE_HEAD(lockd_exit);
@@ -53,7 +53,7 @@
  * Currently the following can be set only at insmod time.
  * Ideally, they would be accessible through the sysctl interface.
  */
-unsigned long			nlm_grace_period = 0;
+unsigned long			nlm_grace_period;
 unsigned long			nlm_timeout = LOCKD_DFLT_TIMEO;
 
 /*
diff -urN -X dontdiff linux/fs/nfs/unlink.c fixes/fs/nfs/unlink.c
--- linux/fs/nfs/unlink.c	Tue Sep 26 10:38:05 2000
+++ fixes/fs/nfs/unlink.c	Thu Sep 28 15:53:01 2000
@@ -23,7 +23,7 @@
 	unsigned int	count;
 };
 
-static struct nfs_unlinkdata	*nfs_deletes = NULL;
+static struct nfs_unlinkdata	*nfs_deletes;
 static struct rpc_wait_queue	nfs_delete_queue = RPC_INIT_WAITQ("nfs_delete_queue");
 
 /**
diff -urN -X dontdiff linux/fs/nfsd/export.c fixes/fs/nfsd/export.c
--- linux/fs/nfsd/export.c	Tue Sep 26 10:38:05 2000
+++ fixes/fs/nfsd/export.c	Thu Sep 28 15:43:42 2000
@@ -57,12 +57,12 @@
 	struct svc_client *	h_client;
 };
 static struct svc_clnthash *	clnt_hash[CLIENT_HASHMAX];
-static svc_client *		clients = NULL;
-static int			initialized = 0;
+static svc_client *		clients;
+static int			initialized;
 
-static int			hash_lock = 0;
-static int			want_lock = 0;
-static int			hash_count = 0;
+static int			hash_lock;
+static int			want_lock;
+static int			hash_count;
 static DECLARE_WAIT_QUEUE_HEAD(	hash_wait );
 
 
diff -urN -X dontdiff linux/fs/nfsd/nfsctl.c fixes/fs/nfsd/nfsctl.c
--- linux/fs/nfsd/nfsctl.c	Mon Sep 11 13:34:23 2000
+++ fixes/fs/nfsd/nfsctl.c	Thu Sep 28 15:43:53 2000
@@ -46,7 +46,7 @@
 static int	nfsctl_ugidupdate(struct nfsctl_ugidmap *data);
 #endif
 
-static int	initialized = 0;
+static int	initialized;
 
 int exp_procfs_exports(char *buffer, char **start, off_t offset,
                              int length, int *eof, void *data);
diff -urN -X dontdiff linux/fs/nfsd/nfssvc.c fixes/fs/nfsd/nfssvc.c
--- linux/fs/nfsd/nfssvc.c	Tue Sep 26 10:38:05 2000
+++ fixes/fs/nfsd/nfssvc.c	Thu Sep 28 15:53:16 2000
@@ -41,9 +41,9 @@
 
 extern struct svc_program	nfsd_program;
 static void			nfsd(struct svc_rqst *rqstp);
-struct timeval			nfssvc_boot = { 0, 0 };
-static struct svc_serv 		*nfsd_serv = NULL;
-static int			nfsd_busy = 0;
+struct timeval			nfssvc_boot;
+static struct svc_serv 		*nfsd_serv;
+static int			nfsd_busy;
 static unsigned long		nfsd_last_call;
 
 struct nfsd_list {
diff -urN -X dontdiff linux/fs/proc/generic.c fixes/fs/proc/generic.c
--- linux/fs/proc/generic.c	Thu Aug 24 08:08:46 2000
+++ fixes/fs/proc/generic.c	Thu Sep 28 15:25:56 2000
@@ -190,7 +190,7 @@
 	return 0;
 }
 
-static unsigned char proc_alloc_map[PROC_NDYNAMIC / 8] = {0};
+static unsigned char proc_alloc_map[PROC_NDYNAMIC / 8];
 
 static int make_inode_number(void)
 {
diff -urN -X dontdiff linux/mm/vmalloc.c fixes/mm/vmalloc.c
--- linux/mm/vmalloc.c	Thu Aug 10 06:51:12 2000
+++ fixes/mm/vmalloc.c	Thu Sep 28 15:07:12 2000
@@ -14,7 +14,7 @@
 #include <asm/pgalloc.h>
 
 rwlock_t vmlist_lock = RW_LOCK_UNLOCKED;
-struct vm_struct * vmlist = NULL;
+struct vm_struct * vmlist;
 
 static inline void free_area_pte(pmd_t * pmd, unsigned long address, unsigned long size)
 {
diff -urN -X dontdiff linux/mm/vmscan.c fixes/mm/vmscan.c
--- linux/mm/vmscan.c	Tue Sep 26 10:38:05 2000
+++ fixes/mm/vmscan.c	Thu Sep 28 15:08:07 2000
@@ -101,7 +101,7 @@
 		set_pte(page_table, swp_entry_to_pte(entry));
 drop_pte:
 		UnlockPage(page);
-		vma->vm_mm->rss--;
+		mm->rss--;
 		flush_tlb_page(vma, address);
 		deactivate_page(page);
 		page_cache_release(page);
@@ -169,9 +169,9 @@
 		struct file *file = vma->vm_file;
 		if (file) get_file(file);
 		pte_clear(page_table);
-		vma->vm_mm->rss--;
+		mm->rss--;
 		flush_tlb_page(vma, address);
-		vmlist_access_unlock(vma->vm_mm);
+		vmlist_access_unlock(mm);
 		error = swapout(page, file);
 		UnlockPage(page);
 		if (file) fput(file);
@@ -201,10 +201,10 @@
 	add_to_swap_cache(page, entry);
 
 	/* Put the swap entry into the pte after the page is in swapcache */
-	vma->vm_mm->rss--;
+	mm->rss--;
 	set_pte(page_table, swp_entry_to_pte(entry));
 	flush_tlb_page(vma, address);
-	vmlist_access_unlock(vma->vm_mm);
+	vmlist_access_unlock(mm);
 
 	/* OK, do a physical asynchronous write to swap.  */
 	rw_swap_page(WRITE, page, 0);
@@ -257,7 +257,7 @@
 
 	do {
 		int result;
-		vma->vm_mm->swap_address = address + PAGE_SIZE;
+		mm->swap_address = address + PAGE_SIZE;
 		result = try_to_swap_out(mm, vma, address, pte, gfp_mask);
 		if (result)
 			return result;
@@ -309,7 +309,7 @@
 	if (vma->vm_flags & VM_LOCKED)
 		return 0;
 
-	pgdir = pgd_offset(vma->vm_mm, address);
+	pgdir = pgd_offset(mm, address);
 
 	end = vma->vm_end;
 	if (address >= end)
diff -urN -X dontdiff linux/net/ipv4/inetpeer.c fixes/net/ipv4/inetpeer.c
--- linux/net/ipv4/inetpeer.c	Sat May 13 09:32:43 2000
+++ fixes/net/ipv4/inetpeer.c	Thu Sep 28 15:47:32 2000
@@ -82,12 +82,12 @@
 static rwlock_t peer_pool_lock = RW_LOCK_UNLOCKED;
 #define PEER_MAXDEPTH 40 /* sufficient for about 2^27 nodes */
 
-static volatile int peer_total = 0;
+static volatile int peer_total;
 int inet_peer_threshold = 65536 + 128;	/* start to throw entries more
 					 * aggressively at this stage */
 int inet_peer_minttl = 120 * HZ;	/* TTL under high load: 120 sec */
 int inet_peer_maxttl = 10 * 60 * HZ;	/* usual time to live: 10 min */
-struct inet_peer *inet_peer_unused_head = NULL,
+struct inet_peer *inet_peer_unused_head,
 		**inet_peer_unused_tailp = &inet_peer_unused_head;
 spinlock_t inet_peer_unused_lock = SPIN_LOCK_UNLOCKED;
 #define PEER_MAX_CLEANUP_WORK 30
diff -urN -X dontdiff linux/net/ipv4/protocol.c fixes/net/ipv4/protocol.c
--- linux/net/ipv4/protocol.c	Sun Feb 27 06:34:27 2000
+++ fixes/net/ipv4/protocol.c	Thu Sep 28 15:37:37 2000
@@ -112,10 +112,7 @@
 
 struct inet_protocol *inet_protocol_base = IPPROTO_PREVIOUS;
 
-struct inet_protocol *inet_protos[MAX_INET_PROTOS] = 
-{
-	NULL
-};
+struct inet_protocol *inet_protos[MAX_INET_PROTOS];
 
 /*
  *	Add a protocol handler to the hash tables
diff -urN -X dontdiff linux/net/ipv4/route.c fixes/net/ipv4/route.c
--- linux/net/ipv4/route.c	Mon Sep 11 13:34:23 2000
+++ fixes/net/ipv4/route.c	Thu Sep 28 15:50:21 2000
@@ -117,7 +117,7 @@
 int ip_rt_min_pmtu = 512+20+20;
 int ip_rt_min_advmss = 536;
 
-static unsigned long rt_deadline = 0;
+static unsigned long rt_deadline;
 
 #define RTprint(a...)	printk(KERN_DEBUG a)
 
diff -urN -X dontdiff linux/net/ipv4/tcp.c fixes/net/ipv4/tcp.c
--- linux/net/ipv4/tcp.c	Tue Sep 26 10:38:05 2000
+++ fixes/net/ipv4/tcp.c	Thu Sep 28 15:40:27 2000
@@ -436,7 +436,7 @@
 
 atomic_t tcp_orphan_count = ATOMIC_INIT(0);
 
-int sysctl_tcp_mem[3] = { 0, };
+int sysctl_tcp_mem[3];
 int sysctl_tcp_wmem[3] = { 4*1024, 16*1024, 128*1024 };
 int sysctl_tcp_rmem[3] = { 4*1024, 87380, 87380*2 };
 
diff -urN -X dontdiff linux/net/ipv4/tcp_ipv4.c fixes/net/ipv4/tcp_ipv4.c
--- linux/net/ipv4/tcp_ipv4.c	Tue Sep 26 10:38:05 2000
+++ fixes/net/ipv4/tcp_ipv4.c	Thu Sep 28 15:28:54 2000
@@ -82,21 +82,21 @@
  * First half of the table is for sockets not in TIME_WAIT, second half
  * is for TIME_WAIT sockets only.
  */
-struct tcp_ehash_bucket *tcp_ehash = NULL;
+struct tcp_ehash_bucket *tcp_ehash;
 
 /* Ok, let's try this, I give up, we do need a local binding
  * TCP hash as well as the others for fast bind/connect.
  */
-struct tcp_bind_hashbucket *tcp_bhash = NULL;
+struct tcp_bind_hashbucket *tcp_bhash;
 
-int tcp_bhash_size = 0;
-int tcp_ehash_size = 0;
+int tcp_bhash_size;
+int tcp_ehash_size;
 
 /* All sockets in TCP_LISTEN state will be in here.  This is the only table
  * where wildcard'd TCP sockets can exist.  Hash function here is just local
  * port number.
  */
-struct sock *tcp_listening_hash[TCP_LHTABLE_SIZE] = { NULL, };
+struct sock *tcp_listening_hash[TCP_LHTABLE_SIZE];
 char __tcp_clean_cacheline_pad[(SMP_CACHE_BYTES -
 				(((sizeof(void *) * (TCP_LHTABLE_SIZE + 2)) +
 				  (sizeof(int) * 2)) % SMP_CACHE_BYTES))] = { 0, };
diff -urN -X dontdiff linux/net/ipv4/tcp_timer.c fixes/net/ipv4/tcp_timer.c
--- linux/net/ipv4/tcp_timer.c	Thu Aug 24 08:08:47 2000
+++ fixes/net/ipv4/tcp_timer.c	Thu Sep 28 15:49:11 2000
@@ -29,7 +29,7 @@
 int sysctl_tcp_keepalive_intvl = TCP_KEEPALIVE_INTVL;
 int sysctl_tcp_retries1 = TCP_RETR1;
 int sysctl_tcp_retries2 = TCP_RETR2;
-int sysctl_tcp_orphan_retries = 0;
+int sysctl_tcp_orphan_retries;
 
 static void tcp_write_timer(unsigned long);
 static void tcp_delack_timer(unsigned long);
diff -urN -X dontdiff linux/net/ipv4/udp.c fixes/net/ipv4/udp.c
--- linux/net/ipv4/udp.c	Tue Sep 26 10:38:05 2000
+++ fixes/net/ipv4/udp.c	Thu Sep 28 15:38:19 2000
@@ -126,7 +126,7 @@
 rwlock_t udp_hash_lock = RW_LOCK_UNLOCKED;
 
 /* Shared by v4/v6 udp. */
-int udp_port_rover = 0;
+int udp_port_rover;
 
 static int udp_v4_get_port(struct sock *sk, unsigned short snum)
 {
diff -urN -X dontdiff linux/net/sunrpc/sched.c fixes/net/sunrpc/sched.c
--- linux/net/sunrpc/sched.c	Thu Aug 24 08:08:47 2000
+++ fixes/net/sunrpc/sched.c	Thu Sep 28 15:50:02 2000
@@ -24,7 +24,7 @@
 
 #ifdef RPC_DEBUG
 #define RPCDBG_FACILITY		RPCDBG_SCHED
-static int			rpc_task_id = 0;
+static int			rpc_task_id;
 #endif
 
 /*
@@ -56,7 +56,7 @@
 /*
  * All RPC tasks are linked into this list
  */
-static struct rpc_task *	all_tasks = NULL;
+static struct rpc_task *	all_tasks;
 
 /*
  * rpciod-related stuff
@@ -64,9 +64,9 @@
 static DECLARE_WAIT_QUEUE_HEAD(rpciod_idle);
 static DECLARE_WAIT_QUEUE_HEAD(rpciod_killer);
 static DECLARE_MUTEX(rpciod_sema);
-static unsigned int		rpciod_users = 0;
-static pid_t			rpciod_pid = 0;
-static int			rpc_inhibit = 0;
+static unsigned int		rpciod_users;
+static pid_t			rpciod_pid;
+static int			rpc_inhibit;
 
 /*
  * Spinlock for wait queues. Access to the latter also has to be
@@ -82,7 +82,7 @@
  * This is the last-ditch buffer for NFS swap requests
  */
 static u32			swap_buffer[PAGE_SIZE >> 2];
-static int			swap_buffer_used = 0;
+static int			swap_buffer_used;
 
 /*
  * Make allocation of the swap_buffer SMP-safe
diff -urN -X dontdiff linux/net/sunrpc/sysctl.c fixes/net/sunrpc/sysctl.c
--- linux/net/sunrpc/sysctl.c	Thu Apr 27 09:01:31 2000
+++ fixes/net/sunrpc/sysctl.c	Thu Sep 28 15:37:59 2000
@@ -25,14 +25,14 @@
 /*
  * Declare the debug flags here
  */
-unsigned int	rpc_debug  = 0;
-unsigned int	nfs_debug  = 0;
-unsigned int	nfsd_debug = 0;
-unsigned int	nlm_debug  = 0;
+unsigned int	rpc_debug;
+unsigned int	nfs_debug;
+unsigned int	nfsd_debug;
+unsigned int	nlm_debug;
 
 #ifdef RPC_DEBUG
 
-static struct ctl_table_header *sunrpc_table_header = NULL;
+static struct ctl_table_header *sunrpc_table_header;
 static ctl_table		sunrpc_table[];
 
 void
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/