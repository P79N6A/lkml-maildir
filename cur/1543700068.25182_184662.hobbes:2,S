Date: Wed, 17 Dec 2003 10:34:06 -0800
From: Greg KH <>
Subject: Re: [PATCH] udev-009: Allow build with empty EXTRAS
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/12/17/103

On Wed, Dec 17, 2003 at 11:11:14AM -0500, Adam Kropelin wrote:
> On Wed, Dec 17, 2003 at 12:31:00AM -0800, Greg KH wrote:
> > On Tue, Dec 16, 2003 at 10:04:06PM -0500, Adam Kropelin wrote:
> > > Need to let the shell expand $EXTRAS so it can properly detect an empty
> > > list. Without this patch, the build fails whenever $EXTRAS is empty.
> > 
> > $ export EXTRAS=
> > $ make
> > $ set | grep EXTRA
> > EXTRAS=
> > $ 
> > 
> > I can't duplicate this problem at all.  Someone else once reported it on
> > the linux-hotplug-devel list, with much the same fix up patch, but later
> > said they couldn't reproduce it either.
> > 
> > What version of make are you using?
> 
> It's actually the version of bash that's important. Prior to 2.05a, bash
> was unable to handle for loops with empty words lists. From the
> bash-2.05a changelog:
> 
> 	p.  `for' loops now allow empty word lists after `in', like the 
> 	    latest POSIX drafts require.
> 
> So bash-2.05 dies on...
> 
> 	for test in ; do echo $test ; done
> 
> ...while bash-2.05a accepts it just fine.
> 
> Both versions can handle this case if the shell itself does the
> expansion that results in the empty list. So that's where my workaround
> came from.
Ah, ok, thanks for the explaination.  I've applied this patch.
greg k-h
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/