Date: Wed, 4 Apr 2001 01:18:06 +0100 (BST)
From: Alan Cox <>
Subject: Re: memory size detection problem on 2.3.16+ and 2.4.x
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/4/3/140

> the bios will set the carry flag on the return from the call should
> there be an error.  However, the BIOS on my PC doesnt do this- infact
> it seems to simply return from the call without changing any registers.
Your BIOS is faulty. No new suprises.
>  meme801:
> +	xorl	%edx, %edx			# Clear regs to work around
> +	xorl	%ecx, %ecx			# flakey BIOSes which don't
> +						# use carry bit correctly
> +						# This way we get 0MB ram on
> +						# call failure
Wouldn't setting the carry flag be clearer ?
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/