Date: Sat, 26 Feb 2005 12:13:09 +1100
From: Benjamin Herrenschmidt <>
Subject: Re: 2.6.11-rc5
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/2/25/219

On Sat, 2005-02-26 at 01:41 +0100, Olaf Hering wrote:
> 
> modedb can not be __init because fb_find_mode() may get db == NULL.
> fb_find_mode() is called from modules.
Ahhh, good catch ! I though that was fixed long ago, looks like I was
wrong.
Ben.
> Signed-off-by: Olaf Hering <eolh@suse.de>
> 
> diff -purNx tags linux-2.6.11-rc5.orig/drivers/video/modedb.c linux-2.6.11-rc5/drivers/video/modedb.c
> --- linux-2.6.11-rc5.orig/drivers/video/modedb.c	2005-02-24 17:40:24.000000000 +0100
> +++ linux-2.6.11-rc5/drivers/video/modedb.c	2005-02-26 01:37:43.138003474 +0100
> @@ -37,7 +37,7 @@ const char *global_mode_option;
> 
>  #define DEFAULT_MODEDB_INDEX	0
> 
> -static const __init struct fb_videomode modedb[] = {
> +static const struct fb_videomode modedb[] = {
>      {
>  	/* 640x400 @ 70 Hz, 31.5 kHz hsync */
>  	NULL, 70, 640, 400, 39721, 40, 24, 39, 9, 96, 2,
-- 
Benjamin Herrenschmidt <benh@kernel.crashing.org>
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/