Date: Fri, 04 Jun 1999 19:37:04 +0200
From: Artur Skawina <>
Subject: Re: Stuff taking up kernel space
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/6/4/115

Dave Jones. wrote:
> 
> More disturbingly, I notice in the same image that the strings that
> are printk'd in the macros from include/linux/time.h seem to be
> occuring quite a lot.
it's a more general problem with string constants that are used in
"extern inline" functions etc - they end up in every object that
includes the definitions.
iirc, at least; i noticed this happening with parport.h a while ago.
> The comment in this file says that the macros are only a temp measure
> whilst the new waitqueue code is debugged, but can't these macros be
> changed to use 1 copy of each string?
when I looked if this was a problem for the kernel i only found the
case you're mentioning. You can use someting like this to check that
this isn't happening somewhere else:
objcopy /usr/src/linux/vmlinux /tmp/vmlinux -R .note -R .comment -v -S \
&& strings -n 4 /tmp/vmlinux|sort|uniq -cd|sort -nr|less;rm /tmp/vmlinux
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/