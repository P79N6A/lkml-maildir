Date: Sun, 6 Jun 1999 10:10:08 +0200
From: Ralf Baechle <>
Subject: Re: RTC driver changes (modularization+multiple process)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/6/6/129

On Sat, Jun 05, 1999 at 02:24:44PM +0200, root wrote:
> This patch apply against a clean 2.2.9 kernel. It can be found
> at the url 
http://www.ie2.u-psud.fr/~arnal/linux/index.html.
> The main goal is to change the rtc driver so many process can 
> access the interrupt counter at the same time. To obtain this, 
> process can read the value of the counter via a new entry in 
> the proc filesystem "/proc/rtcitr".
> 
> Other change make by this patch is the modularization of the driver.
> 
> I have some question about the mapping of memory in the kernel. At this
> time, operation support by the "/proc/rtcitr" is only read and select.
> I would like to add mapping, but have no success with it. I try to
> vmalloc a buffer in the driver, and then to call remap_page_range
> to mmap this buffer into user space. When I call mmap from the user
> process, it go in the get_rtc_intr_mmap function, calling the remap
> function with no error, but after this, try to display the buffer
> in user process give nothing. I can't find any documentation about 
> mapping anywhere, so can anyone tell me what's wrong with this code.
I've got patches for Linux/MIPS which add support for other RTC chips.
What I need is a clean abstraction for users of the RTC.  Also since
different RTC chips are not only incompatible but also have different
features things like RTC interrupts may not be available everywhere.
So we still need a facility to allow a user program to query available
features.
Given how few programs actually use /proc/rtc (hwclock, anything else?)
basically every feature is overkill ...
  Ralf
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/