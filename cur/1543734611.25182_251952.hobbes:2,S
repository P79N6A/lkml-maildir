Date: Mon, 13 Sep 2004 19:14:56 -0700
From: William Lee Irwin III <>
Subject: Re: [PATCH] fix for fsync ignoring writing errors
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/9/13/334

On Mon, Sep 13, 2004 at 04:12:55PM +0400, Andrey Savochkin wrote:
> AFACS, currently metadata writing errors are ignored and not returned from
> sys_fsync on ext2 and ext3 filesystems.
> That is, at least ext2 and ext3.
> Both ext2 and ext3 resort to sync_inode() in their ->sync_inode method, which
> in turn calls ->write_inode.  ->write_inode method has void type, and any IO
> errors happening inside are lost.
> Any objections to making ->write_inode return the error code?
> Signed-off-by: Andrey Savochkin <saw@saw.sw.com.sg>
While I've not reviewed this in any detail I'm very much in favor of
propagating any and all errors to fsync(), particular for the benefit
of userspace applications responsible for maintaining data integrity.
-- wli
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/