Date: Thu, 6 Feb 2003 13:49:39 +0000
From: Christoph Hellwig <>
Subject: Re: [patch] Update of the input subsystem - 37 csets
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/2/6/51

  * Some laptops take the 789uiojklm,. keys as number pad when NumLock is on.
  * This seems a good reason to start with NumLock off.
  */
+#ifndef CONFIG_X86_PC9800
 #define KBD_DEFLEDS 0
+#else
+#define KBD_DEFLEDS (1 << VC_NUMLOCK)
+#endif
 #endif
This ifdef is the wrong way around.
But having something like
#ifndef KBD_DEFLEDS
#define KBD_DEFLEDS 0
#endif
and the PC98-specific stuff in a asm header sounds like a much better plan.
--- bk/include/linux/serio.h	Thu Feb  6 13:10:36 2003
+++ bk+input/include/linux/serio.h	Thu Feb  6 13:21:56 2003
@@ -10,10 +10,13 @@
  */
 
 #include <linux/ioctl.h>
-#include <linux/list.h>
 
 #define SPIOCSTYPE	_IOW('q', 0x01, unsigned long)
 
+#ifdef __KERNEL__
+
+#include <linux/list.h>
Don't add more #ifdef __KERNEL__ - the kernel headers aren't supposed
to be included from userspace.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/