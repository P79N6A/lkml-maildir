Date: Thu, 05 Jul 2007 14:22:49 +0300
From: "Christian P. Schmidt" <>
Subject: serial_pci and AC'97 Softmodems
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/7/5/88

Hi,
Apparently the serial_pci module detects a lot of (non-existent?) serial
ports on my laptop:
ACPI: PCI Interrupt Link [LNKG] enabled at IRQ 3
PCI: setting IRQ 3 as level-triggered
ACPI: PCI Interrupt 0000:00:08.0[A] -> Link [LNKG] -> GSI 3 (level, low)
-> IRQ 3
0000:00:08.0: ttyS1 at I/O 0x8828 (irq = 3) is a 8250
0000:00:08.0: ttyS2 at I/O 0x8840 (irq = 3) is a 8250
0000:00:08.0: ttyS3 at I/O 0x8850 (irq = 3) is a 8250
0000:00:08.0: ttyS4 at I/O 0x8860 (irq = 3) is a 8250
0000:00:08.0: ttyS5 at I/O 0x8870 (irq = 3) is a 8250
These are not serial ports, as
00:08.0 0703: 10b9:5457 (prog-if 00 [Generic])
        Subsystem: 103c:0024
00:08.0 Modem: ALi Corporation M5457 AC'97 Modem Controller (prog-if 00
[Generic])
        Subsystem: Hewlett-Packard Company Pavilion ze4400 builtin Modem
Device
        Control: I/O+ Mem+ BusMaster- SpecCycle- MemWINV- VGASnoop-
ParErr- Stepping- SERR- FastB2B-
        Status: Cap+ 66MHz- UDF- FastB2B+ ParErr- DEVSEL=medium >TAbort-
<TAbort- <MAbort- >SERR- <PERR-
        Interrupt: pin A routed to IRQ 3
        Region 0: Memory at d0016000 (32-bit, non-prefetchable) [size=4K]
        Region 1: I/O ports at 8800 [size=256]
        Capabilities: [40] Power Management version 2
                Flags: PMEClk- DSI+ D1- D2- AuxCurrent=0mA
PME(D0-,D1-,D2-,D3hot+,D3cold+)
                Status: D0 PME-Enable- DSel=0 DScale=0 PME-
Would it make sense to include a blacklist for these kind of "modem"
devices? I currently can only avoid those bogus serial ports by loading
the hsfmodem driver to block the IO region (yeah, 2.6.22 will bring the
possibility to leave 8250_pci out, I know...)
Regards,
Chris
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/