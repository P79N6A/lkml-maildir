Date: Tue, 14 Feb 2006 09:17:41 -0800
From: Roland Dreier <>
Subject: Re: AMD 8131 and MSI quirk
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/2/14/316

 > Going a bit overboard on the type safety.  Please, leave bus_flags as an
 > unsigned short so as not to bloat the pci_bus structure unnecessarily.
Hmm:
> +typedef unsigned short __bitwise pci_bus_flags_t;
and:
> -	unsigned short  pad2;
> +	pci_bus_flags_t bus_flags;	/* Inherited by child busses */
This does make pci_bus_flags_t a short -- it just lets sparse catch
misuses of the enum values.
It's debatable whether it's worth the source obfuscation to let sparse
check this, since it seems rather unlikely that someone will screw it
up.  But I don't see how it makes any difference in the generated
code; certainly there's no bloat (beyond the extra source code)
 - R.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/