Date: Thu, 2 Aug 2007 17:42:28 +0200
From: Ingo Molnar <>
Subject: Re: SD still better than CFS for 3d   ?(was Re: 2.6.23-rc1)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/8/2/220

Kasper,
could you please try the "chew-max" latency-printing utility:
   
http://people.redhat.com/mingo/cfs-scheduler/tools/chew-max.c
if you start it on an idle system it prints a single line:
  $ ./chew-max
  pid 14506, prio   0, interval of 99984800 nsec
and prints nothing else. It continues looping and looping (using up 100% 
of CPU time), and the moment it's preempted, it prints a line about that 
preemption latency. Under higher load it will print something like this:
  out for   63 ms [max:   66], ran for    5 ms, load   7
  out for   85 ms [max:   85], ran for    4 ms, load   5
  out for    7 ms [max:   85], ran for    0 ms, load   0
  out for  105 ms [max:  105], ran for    3 ms, load   3
  out for  174 ms [max:  174], ran for    6 ms, load   3
  out for  219 ms [max:  219], ran for    3 ms, load   1
  out for   78 ms [max:  219], ran for    3 ms, load   3
so that we get a picture of your latencies, could you run this tool why 
you are seeing those 'bad' desktop latencies? (Since your CPU has two 
cores it might make sense to run two instances of chew-max.)
record the latencies like this:
  ./chew-max > chew1.out &
  ./chew-max > chew2.out &
and send us the chew1.out and chew2.out files (bzip2 -9 compressed). 
Thanks!
	Ingo
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/