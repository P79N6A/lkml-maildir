Date: Wed, 17 Nov 2004 23:12:53 +0100
From: Colin Leroy <>
Subject: Re: hotplug_path no longer exported
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/11/17/286

On 17 Nov 2004 at 13h11, Greg KH wrote:
Hi, 
> > hotplug_path is no longer exported, is this on purpose ?
> 
> Yes.
> 
> > It breaks linux-wlan-ng. If it is on purpose, I suppose
> > linux-wlan-ng should use kobject_hotplug() ?
> 
> Yes it should.  Why was it not useing that function in the first
> place?
Dunno. This driver has a reputation of being the worse wlan driver for
prism2 chipsets out there, but it's the only one supporting USB devices.
> No, please use kobject_hotplug().  Actually, what are they doing that
> they need to call kobject_hotplug() in the first place?
To propagate events to scripts, I think:
void    p80211_suspend(wlandevice_t *wlandev)
{
	p80211_run_sbin_hotplug(wlandev, WLAN_HOTPLUG_SUSPEND);
}
int register_wlandev(wlandevice_t *wlandev)
{
	netdevice_t	*dev = wlandev->netdev;
...	if (register_netdev(dev)) {
		return -EIO;
	}
...
	p80211_run_sbin_hotplug(wlandev, WLAN_HOTPLUG_REGISTER);
}
With p80211_run_sbin_hotplug doing stuff to call /sbin/hotplug... 
The one that will write a correct patch to linux-wlan-ng will have to
figure out the different events they use: "register" (instead of "add"),
"startup", "shutdown", "resume", "suspend"...
-- 
Colin
  
http://www.colino.net/
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/