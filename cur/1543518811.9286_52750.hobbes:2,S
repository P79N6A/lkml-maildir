Date: 10 Dec 1999 21:50:52 -0600
From: Peter Samuelson <>
Subject: Re: Modular fb-devs - unresolved symbols.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/12/10/234

[Daniel Kobras <daniel.kobras@student.uni-tuebingen.de>]
> The reason is I have matroxfb compiled as module and as apparently
> only matroxfb has any references to symbols defined in fbcmap.o, the
> linker won't include the fbcmap.o portions of video.a into vmlinux. I
> guess it's not for the first time this sort of problem arises, so
> what's the usual way to work around it?
It would be really nice if there were some easy way for EXPORT_SYMBOL()
to tell the linker "do not repeat *do* *not* GC this".
The only way I can think of is with a macro __export similar to __init
which puts exported symbols in a separate elf section.  (So much for
locality.)  Then the linker script uses KEEP() on that section.  This
would replace the current EXPORT_SYMBOL mechanism, and I don't know
enough about binary formats to know if it could even be gotten to work.
(Asking hackers to use *both* __export *and* EXPORT_SYMBOL would be a
bit much, obviously.)  And I haven't even *started* considering what
this might do to genksyms....
Oh well, it was a thought.
Peter
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/