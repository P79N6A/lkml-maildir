Date: Wed, 5 Oct 2005 03:12:08 -0400 (EDT)
From: Steven Rostedt <>
Subject: Re: 2.6.14-rc3-rt2
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/10/5/15

First, Please don't send to my kihontech.com account.  That's my email
that my customers use and I would really like to keep the spam noise down
an that account.  Thanks!
On Tue, 4 Oct 2005, Thomas Gleixner wrote:
> On Tue, 2005-10-04 at 11:58 -0700, Mark Knecht wrote:
> > > I guess its related to the priority leak I'm tracking down right now.
> > > Can you please set following config options and check if you get a bug
> > > similar to this ?
> > >
> > > BUG: init/1: leaked RT prio 98 (116)?
> > >
> > > Steven, it goes away when deadlock detection is enabled. Any pointers
>
> Thats actually a red hering caused by asymetric accounting which only
> happens when
>
> CONFIG_DEBUG_PREEMPT=y
> and
> # CONFIG_RT_DEADLOCK_DETECT is not set
>
Yep, I was going let you know but it seems you already figured it out :-)
The CONFIG_RT_DEADLOCK_DETECT turns on the trace_lock which makes all
locks run serially.  Without CONFIG_RT_DEADLOCK_DETECT, the importance of
the pi_lock of the task is greater.  So If something was changed that
didn't properly lock the pi_lock, then there could be problems with the
locking.
So looking at the patch you sent, are you saying that the leak was a false
positive?
I'm just starting to look at -rt7, and will be testing it today.
-- Steve
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/