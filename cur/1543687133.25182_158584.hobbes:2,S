Date: Tue, 19 Aug 2003 10:53:46 +0100
From: Simon Haynes <>
Subject: Re: File access
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/8/19/69

I actually had a character interface which I use for on the fly 
configuration. I have now implemented some code which uses a user process to 
pass the configuration to the driver. I have however run into problems trying 
to write files from the driver. I have tried implementing a user process 
which performs a blocking read. The user process is blocked with 
interruptible_sleep_on and is woken by the main part of the driver when it 
needs to write. The problem is I then need to stall the main part of the 
driver while the data gets written out. My problem is that this write needs 
to happen from an interrupt handler or a timer process. I cannot seem to 
block these with interruptible_sleep_on, the kernel crashes. I guess you 
cannot use this in these cases ? I have also tried semaphores without much 
success. I have looked for the howto but failed there also. 
Could you please tell me where I could find this FAQ.
Many Thanks
Simon.
On Thursday 14 Aug 2003 1:07 pm, Richard B. Johnson wrote:
> On Thu, 14 Aug 2003, Simon Haynes wrote:
> > I am currently developing a module which I would like to configure
> > via a simple text file.
> >
> > I cannot seem to find any information on accessing files via a kernel
> > module.
> >
> > Is this possible and if so how is it done ?
> >
> > Many Thanks
> >
> > Simon.
>
> This has become a FAQ. You make your module accept parameters
> from an ioctl(). Then you use a user-mode task to read file(s)
> and configure your module.
>
>
> Cheers,
> Dick Johnson
> Penguin : Linux version 2.4.20 on an i686 machine (797.90 BogoMips).
>             Note 96.31% of all statistics are fiction.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/