Date: Wed, 07 Jul 1999 20:56:37 -0400
From: Joe <>
Subject: Re: SMP (IO-APIC??) weirdness
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/7/7/88

There  is an interrupt bug in the IO-APIC's code:
    1) my BIOS can switch my 430HX  chip to behave like a 430FX chipset. If I
use the 430FX setting all my interrupts act funny (zip/printer/sound/scanner
->   Sound locks up my system.). If I set it to the HX chipset, then most
interrupt work fine.
(So I use the 430HX setting).
    2) I have had this bezerko mouse thing going on for a while, until I was
given a patch that allowed me to set a specific IRQ to XTPIC (thanks Jon).
Using this patch my bezerko mouse is gone, but all the mouse interrupts are
on CPU0.
Chances are that the 2300 has different hardware than the 1300, other than
the amount of RAM (onboard chipset?).
    Linux handling of IO-APICS seem to be picky, and just does not work with
all hardware.
    first try  kernel 2.2.9 or later, and at lilo boot with noapic
LILO:
    linux noapic
    if your problem goes away it is a kernel bug related to the Interrupts,
if not it is hardware.
> Two cases:
>
> (1)     Dell PowerEdge 1300, Dual P-II/400, 64MB RAM (local system).
>         Cyclom-8Yo ISA card (a multiport serial card).
>         Cyclades driver 2.2.2.3_SMP_2 (experimental).
>
> In this case, the Cyclom-Y card works just fine, being able to communicate
> with the standard serial port.
>
> (2)     Dell PowerEdge 2300, Dual P-II/400, 256MB RAM (client system).
>         Cyclom-8Yo ISA card.
>         Cyclades driver 2.2.2.3_SMP_2 (experimental).
>
> In this case, /proc/interrupts does not see any interrupts being generated
> by the Cyclom-Y card, even though the IRQ is registered by the driver
> (i.e., it's listed in /proc/interrupts, yet with '0' interrrupts
> generated).
>
> If kernel is compiled as UP, the Cyclom-Y works fine, using the _same_ IRQ
> that it tried to use on the SMP kernel.
>
> I'm suspecting of a hardware issue here (something related to the IO-APIC
> and the Cyclades ISA card, or something in this line), but I'm not sure.
>
> Comments ?? Hints ?? Suggestions ??
>
> Any help would be appreciated.
>
> Regards,
> Ivan Passos
>
> -
> Linux SMP list: FIRST see FAQ at 
http://www.irisa.fr/prive/mentre/smp-faq/
> To Unsubscribe: send "unsubscribe linux-smp" to majordomo@vger.rutgers.edu
--
Joseph Acosta ........ SMP Linux 2.2.10 / RedHat 6.0
home: joeja@mindspring.com
http://www.mindspring.com/~joeja
alias: josepha48@yahoo.com
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/