Date: Mon, 24 Dec 2007 17:10:29 +0800
From: "Peer Chen" <>
Subject: RE: [PATCH] msi: set 'En' bit of MSI Mapping Capability
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/12/24/15

I feel it's dangerous to set the En bit on Intel platform, If the HT MSI
En is set, the MSI should be expected to transform to HT INT message
format. It may cause interrupt lost or hardware internal state machine
failed depend on the hardware design.
BRs
Peer Chen
-----Original Message-----
From: Eric W. Biederman [mailto:ebiederm@xmission.com] 
Sent: Friday, December 21, 2007 6:48 AM
To: Peer Chen
Cc: peerchen; linux-kernel; akpm; Andy Currid
Subject: Re: [PATCH] msi: set 'En' bit of MSI Mapping Capability
"Peer Chen" <pchen@nvidia.com> writes:
> The quirk is for our Intel platform, we don't want HT MSI mapping
> enabled in any of our devices.
Why is this a problem?  I seem to recall a real hypertransport bus
downstream of the Intel cpu.
If there is a real hypertransport bus in the middle then what happens
if someone puts a tunnel that uses hypertransport between the two chips?
I feel very dense right now.  I don't understand why enabling the
mapping on an Intel based system is a problem.  I am afraid there is
some important gap in my understanding in which case we may need to
rethink enabling the hypertransport capability by default.
If disabling the hypertransport bus is simply an optimization, or it
is to deal with an issue that appears exclusive to Nvidia chips
I have no problem with your quirk.
Eric
-----------------------------------------------------------------------------------
This email message is for the sole use of the intended recipient(s) and may contain
confidential information.  Any unauthorized review, use, disclosure or distribution
is prohibited.  If you are not the intended recipient, please contact the sender by
reply email and destroy all copies of the original message.
-----------------------------------------------------------------------------------