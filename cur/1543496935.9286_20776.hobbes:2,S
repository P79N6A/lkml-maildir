Date: Thu, 27 May 1999 07:46:18 -0400 (EDT)
From: jamal <>
Subject: Re: [patch] TCP/IP delacks disabled with MPI
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/5/29/8

>cwnd=1 (measured in segments)
>1-byte payload => 41 byte TCP packet
>36*41=1476 bytes < MSS=1500 bytes (the initial congestion window)
>So rfc2001 would allow 36 tiny packets to be sent when cwnd=1, but Linux
>2.2.2 test reads
>if(tcp_packets_in_flight(tp) >= tp->snd_cwnd)
>and since 36 >= 1, Linux would not allow this. In fact, Linux would
Looks like packet counting fails in this specific situation.
However, I think your interpretation is slightly biased. 
Using your arguement, the initial cwnd (1 MSS) should be 36 packets  
(without applying the RFC2414 initial window cap).
It would be a good idea to avoid per-packet computation introduced by
Andrea's new patch (i think there are a lot more people who are *not* MPI
users). Could the problem be resolved by setting the sender MSS
to be very small (eg SMSS=64 bytes in the example you
provide -- and maintain the old fix)? I am not sure what effects that will
have on PMTU.
Your app should also ensure that the TOS is marked such that your packet
is queued on the highest prioirity queue (using the default three band
scheduler).
cheers,
jamal
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/