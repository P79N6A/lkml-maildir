Date: 29 Dec 1999 11:38:59 -0800
From: (Linus Torvalds)
Subject: Re: [PATCH] put_dirty_page doesn't dirty page
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/12/29/63

In article <199912291815.NAA01657@ccure.karaya.com>,
Jeff Dike  <jdike@karaya.com> wrote:
>This seems to me to be a definite bug.  If so, the patch is this:
>
>--- orig/mm/memory.c    Tue Dec 21 11:49:29 1999
>+++ um/mm/memory.c      Sun Dec 26 12:08:26 1999
>@@ -743,7 +743,7 @@
>                return 0;
>        }
>        flush_page_to_ram(page);
>-       set_pte(pte, pte_mkwrite(mk_pte(page, PAGE_COPY)));
>+       set_pte(pte, pte_mkdirty(pte_mkwrite(mk_pte(page, PAGE_COPY))));
> /* no need for flush_tlb */
>        return page;
> }
>
>If it's not, then I'd appreciate some advice.
Agreed, your patch looks fine..
		Linus
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/