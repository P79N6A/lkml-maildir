Date: Fri, 24 Aug 2007 21:06:40 +0530 (IST)
From: Satyam Sharma <>
Subject: Re: [PATCH] Remove superfluous definition of __setup_null_param() macro.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/8/24/189

On Fri, 24 Aug 2007, Robert P. J. Day wrote:
> 
> Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
> 
> ---
> 
>   since i apparently removed the final remaining reference to this
> macro in commit f4895925976977aaeda26ee2a603a99f17db500b (thanks,
> adrian), there seems to be little value in keeping this definition
> around.
How about ...
[PATCH] Remove superfluous definition of __setup_null_param() macro and broken (for MODULE) __setup_param()
From: Robert P. J. Day <rpjday@mindspring.com>
Remove superfluous definition of __setup_null_param() macro, as nobody
uses it anymore.
Also kill the #ifdef-MODULE-case (empty) definition for __setup_param.
It is only required for the !MODULE case, as __setup() is empty for
the MODULE case already. Also, no user outside init.h must use
__setup_null_param directly anyway (and nobody does), so it's not
something whose empty definition we necessarily need to make available
to rest of the kernel. Moreover, this MODULE case of __setup_param has
been broken for more than two years now -- as far back as git history
takes us. Let's get rid of it.
Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
Signed-off-by: Satyam Sharma <satyam@infradead.org>
---
 include/linux/init.h |    5 -----
 1 files changed, 0 insertions(+), 5 deletions(-)
diff --git a/include/linux/init.h b/include/linux/init.h
index 74b1f43..93b2ca5 100644
--- a/include/linux/init.h
+++ b/include/linux/init.h
@@ -165,9 +165,6 @@ struct obs_kernel_param {
 		__attribute__((aligned((sizeof(long)))))	\
 		= { __setup_str_##unique_id, fn, early }
 
-#define __setup_null_param(str, unique_id)			\
-	__setup_param(str, unique_id, NULL, 0)
-
 #define __setup(str, fn)					\
 	__setup_param(str, fn, fn, 0)
 
@@ -233,8 +230,6 @@ void __init parse_early_param(void);
 	{ return exitfn; }					\
 	void cleanup_module(void) __attribute__((alias(#exitfn)));
 
-#define __setup_param(str, unique_id, fn)	/* nothing */
-#define __setup_null_param(str, unique_id) 	/* nothing */
 #define __setup(str, func) 			/* nothing */
 #endif
 
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/