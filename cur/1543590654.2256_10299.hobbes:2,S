Date: Fri, 11 May 2001 10:37:41 -0700
From: David Brownell <>
Subject: Re: pci_pool_free from IRQ
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/5/11/109

> How about this (with documentation fixes by David-B):
Actually I'd be just as happy to call the ARM pci_free_consistent()
behavior (BUG in_interrupt) the problem.  Particularly if that ARM
patch works OK!  I've gotten success reports with pci_pool from
folk using about half the architectures in linux/arch, and only ARM
showed this particular problem.  It appears there's no real need
to update the interface spec to accomodate ARM.
That means the doc fixes are simpler:  in DMA-mapping.txt just clarify
that some routines may be called in_interrupt (currently unspecified),
and the pci.txt change about pci_device.remove() (agreed to by
both Alan and DaveM, appended).
- Dave
> diff -ur -X dontdiff linux-2.4.4/Documentation/pci.txt linux-2.4.4-niph/Documentation/pci.txt
> --- linux-2.4.4/Documentation/pci.txt Sun Sep 17 09:45:06 2000
> +++ linux-2.4.4-niph/Documentation/pci.txt Thu May 10 12:33:03 2001
> @@ -60,8 +60,8 @@
>   remove Pointer to a function which gets called whenever a device
>   being handled by this driver is removed (either during
>   deregistration of the driver or when it's manually pulled
> - out of a hot-pluggable slot). This function can be called
> - from interrupt context.
> + out of a hot-pluggable slot). This function always gets
> + called from process context, so it can sleep.
>   suspend, Power management hooks -- called when the device goes to
>   resume sleep or is resumed.
> 
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/