Date: Wed, 2 Jun 1999 15:27:04 +0100 (GMT)
From: Bryn Paul Arnold Jones <>
Subject: Re: Install driver
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/6/2/125

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1
On Tue, 1 Jun 1999, WANG,YIDING (HP-SanJose,ex1) wrote:
> Hi Community,
> 
Hi
> I am new to Linux and writing a Fiber Channel HBA device driver for Linux
> now.  The driver is done but have many difficulties on loading and debugging
> the driver.
> 
> I amd using RedHat release 6.0.  So far I have done:
> 1, have driver module ready and copied into /lib/modules/2.2.5-15/scsi;
Ok, you might want to update the kernel to 2.2.9 (or 2.2.10 when that's
released), as that is the latest stable kernel (may as well start with the
known bugs fixed ;).
> 2, added a few lines in /boot/module-info (may not needed) to show 
>    the driver name and the module is for scsi_hostadapter;
Ok, this seems to be a redhat-isum, and proberbly isn't required.
> 3, use command "insmod hpfc.o" to install driver.
> 
Right.
> Q1, I don't know any step I have been missing so far and hope can get help
> from the community.
> 
> When doing "insmod hpfc.o", A segmentation fault message comes out with lot
> of register values.  The print message I put into driver was scrolled up by
> those messges.
> 
Ok, that sounds like an oops.  You can decode the call trace by using the
ksymoops program which you will find in /usr/src/linux/scripts/ksymoops
assuming you have the full kernel source installed.
> Q2, Is there any document I can get in order to analyze the problem 
>     through those printed Stack value, Call Trace, etc?
> 
use ksymoops, it's automated ;).
> Q3, Does Linux has kernel debugger as those comercial unix such as 
>     Unixware, Solaris which can allow you to to setup break point and 
>     trace your driver?
> 
Yes, several.  Quoting an earlier mail to this list by "Studierende der
Universitaet des Saarlandes <masp0008@stud.uni-sb.de>":
<blockquote>
then there are (AFAIK) 3 kernel debuggers.
- - remote GDB, you need 2 computers and a serial connection.
www.gcom.com
- - a kernel debugger from SGI (www.linux.sgi.com)
You need only 1 computer, the complete debugger runs in kernel
mode.
- - the ikd kernel debugger.
this is a combined user mode & kernel mode debugger:
the kernel is interrupted, and switchted back into
user mode. I think you'll have problems
if you try to single step interrupts etc.
(I never used this debugger, 
ftp://e-mind.com/...
)
</blockquote>
> Q4, Does those message being logged somewher that I can check addition to
>     the display on console?
> 
This depends on the state of the box after the oops.  They will be
sysloged, providing syslogd and klogd are still working and the writes
make it to the disk ...  If they are sysloged they will end up in
/var/log/messages by default
> Many thanks!
> 
Hope that helps
> -eddie
> 
Bryn
- --
Or words to that effect ...
PGP pubkeys from 
http://www.gytha.demon.co.uk/pubkey.asc.
-----BEGIN PGP SIGNATURE-----
Version: PGPfreeware 5.0i for non-commercial use
Comment: Silly comment here ...
Charset: noconv
iQA/AwUBN1U/QN94IUtvfSqaEQLAMwCeI1RbLeOTeGWH4I8/NR25N2FoJRcAoNwp
oj4ELXFFeBVmpEVaYKT/sR7B
=FUR6
-----END PGP SIGNATURE-----
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/