Date: Mon, 1 Oct 2007 02:07:33 +0200
From: Frans Pop <>
Subject: Re: [2.6.23-rc8-mm2] System hangs (loops?) during boot
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/9/30/186

On Monday 01 October 2007, you wrote:
> On Sun, 30 Sep 2007 23:50:29 +0200 Frans Pop (FP) wrote:
> > I'm not sure what you mean. I fetched the branch I think you referred
> > to [1], but when I did a merge of that on top of v2.6.23-rc8-mm2 I
> > got "Already up-to-date", so AFAICT that branch is fully merged into mm
> > and I'm already running with you latest code...
>
> I was suggesting to download 2.6.23-rc8 and applying the -hrt patchset at
> 
http://www.kernel.org/pub/linux/kernel/people/tglx/hrtimers/2.6.23-rc8/
> on top of it.
Ah, OK. I'm afraid that was not at all clear from your previous message :-/
During 'make oldconfig' I got a config question about "CPU idle support", 
which does not seem to be in rc8-mm2; is that correct? I answered N.
> That excludes all the extra stuff in -mm and should give us a good hint
> whether HPET is really at fault.
The system does boot with rc8 + hrt1.
Andrew: any suggestions on how to trace the "real" culprit for the hang?
Udo: I did see one issue during boot with this rc8 + hrt1 kernel.
     System is Debian unstable.
Setting the system clock..
select() to /dev/rtc to wait for clock tick timed out
Also, if the patchset really is not the same as in mm, then that at least 
partially invalidates this test.
Relevant lines from dmesg diff:
-Linux version 2.6.23-rc6 [...]
+Linux version 2.6.23-rc8-hrt1 [...]
[...]
+hpet clockevent registered
+hpet0: at MMIO 0xfed00000, IRQs 2, 8, 0
+hpet0: 3 64-bit timers, 14318180 Hz
 ACPI: RTC can wake from S4
 Time: tsc clocksource has been installed.
[...]
-Marking TSC unstable due to: possible TSC halt in C2.
-Time: acpi_pm clocksource has been installed.
[...]
-Clocksource tsc unstable (delta = -473964036 ns)
[...]
 Real Time Clock Driver v1.12ac
[...]
+Marking TSC unstable due to: cpufreq changes.
+Time: hpet clocksource has been installed.
+Clocksource tsc unstable (delta = -125526392 ns)
# cat /sys/devices/system/clocksource/clocksource0/available_clocksource
hpet acpi_pm pit jiffies tsc
# cat /sys/devices/system/clocksource/clocksource0/current_clocksource
hpet
I noted that acpi_pm is no longer mentioned in dmesg, but is still present.
Cheers,
FJP
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/