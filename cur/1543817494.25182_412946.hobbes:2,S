Date: Sat, 01 Apr 2006 12:16:51 +1000
From: Nick Piggin <>
Subject: Re: Synchronizing Bit operations V2
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/3/31/307

Christoph Lameter wrote:
> On Fri, 31 Mar 2006, Chen, Kenneth W wrote:
> 
> 
>>>I think we could say that lock semantics are different from barriers. They 
>>>are more like acquire and release on IA64. The problem with smb_mb_*** is 
>>>that the coder *explicitly* requested a barrier operation and we do not 
>>>give it to him.
>>
>>I was browsing sparc64 code and it defines:
>>
>>include/asm-sparc64/bitops.h:
>>#define smp_mb__after_clear_bit()      membar_storeload_storestore()
>>
>>With my very naÃ¯ve knowledge of sparc64, it doesn't look like a full barrier.
>>Maybe sparc64 is broken too ...
> 
> 
> Dave, how does sparc64 handle this situation?
It looks like sparc64 always expects paired smp_mb__* operations,
before and after the clear_bit.
-- 
SUSE Labs, Novell Inc.
Send instant messages to your online friends 
http://au.messenger.yahoo.com
 
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/