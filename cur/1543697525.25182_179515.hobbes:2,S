Date: Sun, 23 Nov 2003 14:16:04 -0500
From: "Brown, Len" <>
Subject: RE: irq 15: nobody cared! with KT600 chipset and 2.6.0-test9
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/11/23/31

> So something in the ACPI code made IRQ15 active, or caused 
> there to be a 
> pending interrupt. I'd guess that ACPI incorrectly turns the 
> legacy IDE 
> interrupts to be PCI interrupts (level-triggered, active low) 
> instead of 
> legacy interrupts (edge-triggered, active high).
I think so too.
> Len - does ACPI ever change the polarity of an interrupt? 
> Just turning the 
> irq level-triggered shouldn't matter that much, but if some 
> part of ACPI 
> switches polarities around (and gets the wrong one) that 
> would be deadly 
> and would cause screaming interrupts when no event is pending.
I think that PCI Interrupt Link Devices were originally intended to map
PIRQs down into PIC IRQs with standard PCI semantics -- obsoleting the
bogus chip-set specific PIRQ router "standard".  But the BIOS can ask us
to do just about anything, and I'm finding that some system designers
and BIOS writers have become much more creative in their use;-)
Marco,
Please file a bug per below and attach the output of acpidmp and lspci
-v with full dmesg so I can decode what the BIOS is really asking us to
do.
Perhaps you can also add the dmesg and /proc/interrupts from the version
of 2.4 that worked.  I'm puzzled at what 2.6-specific change provoked
this failure.
Thanks,
-Len
How to file a bug against ACPI:
http://bugzilla.kernel.org/
Category: Power Management
Component: ACPI
Please attach the output from acpidmp, available in /usr/sbin/, or in
here
http://www.intel.com/technology/iapc/acpi/downloads/pmtools-20010730.tar
.gz
Please attach /proc/interrupts, lspci -v and the dmesg output showing
the failure, if possible.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/