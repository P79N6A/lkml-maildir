Date: Fri, 13 Jul 2007 15:35:42 -0700
From: Dan Williams <>
Subject: [-mm PATCH 0/2] 74% decrease in dispatched writes, stripe-queue take3
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/7/13/420

Neil, Andrew,
The following patches replace the stripe-queue patches currently in -mm.
Following your suggestion, Neil, I gathered blktrace data on the number
of reads generated by sequential write stimulus.  It turns out that
reduced pre-reading is not the cause of the performance increase, but
rather increased write merging.  The data, in patch #1, shows a 74%
decrease in the number of dispatched writes.  I can only assume that
this is the explanation for the 65% throughput improvement, because the
occurrence of reads actually increased with these patches applied.
This take also fixes observed data corruption while running i/o to a
synching array (it was wrong to move the flags parameter from r5dev to
r5_queue_dev as things could get out of sync... reverted).  Next step is
to test reshape under this new queuing model.
Regards,
Dan
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/