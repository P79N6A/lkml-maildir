Date: Wed, 22 Sep 1999 23:14:47 +0200
From: Pauline Middelink <>
Subject: Re: 1000ms delay in networking stack or driver, new bug?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/9/22/145

On Wed, Sep 22, 1999 at 07:58:11PM +0400, kuznet@ms2.inr.ac.ru wrote:
> 1. device is lost from run queue because of some bug in scheduler.
> 2. device stopped to receive rx interrupts.
> 
> I repeat the request: gentlemen, please, make tcpdump both on
> wire and on local host with "tcpdump -i eth0 -n -v -s 256 -x icmp",
> when pinging. The investigation even will not be started until
> I get at least one report of this kind.
Ok, here is mine (I have ppp link which has a magicly slowdown
at irregular times, only a restart of the daemon cures it.)
I'm running 2.2.12, RH5, gcc-2.7.2.3
Below the ping:
64 bytes from 195.108.17.21: icmp_seq=57 ttl=255 time=4130.1 ms
64 bytes from 195.108.17.21: icmp_seq=58 ttl=255 time=4140.0 ms
64 bytes from 195.108.17.21: icmp_seq=59 ttl=255 time=4120.1 ms
64 bytes from 195.108.17.21: icmp_seq=60 ttl=255 time=4120.1 ms
64 bytes from 195.108.17.21: icmp_seq=61 ttl=255 time=4130.0 ms
64 bytes from 195.108.17.21: icmp_seq=62 ttl=255 time=4120.2 ms
64 bytes from 195.108.17.21: icmp_seq=63 ttl=255 time=4140.1 ms
64 bytes from 195.108.17.21: icmp_seq=64 ttl=255 time=4140.0 ms
64 bytes from 195.108.17.21: icmp_seq=65 ttl=255 time=4130.0 ms
64 bytes from 195.108.17.21: icmp_seq=66 ttl=255 time=4130.0 ms
64 bytes from 195.108.17.21: icmp_seq=67 ttl=255 time=4130.0 ms
64 bytes from 195.108.17.21: icmp_seq=68 ttl=255 time=4140.0 ms
64 bytes from 195.108.17.21: icmp_seq=69 ttl=255 time=4130.0 ms
64 bytes from 195.108.17.21: icmp_seq=70 ttl=255 time=4120.1 ms
64 bytes from 195.108.17.21: icmp_seq=71 ttl=255 time=4130.1 ms
64 bytes from 195.108.17.21: icmp_seq=72 ttl=255 time=4130.1 ms
64 bytes from 195.108.17.21: icmp_seq=73 ttl=255 time=4130.1 ms
The tcpdump:
tcpdump: listening on ppp0
23:06:16.877780 195.108.17.65 > 195.108.17.21: icmp: echo request
23:06:17.007769 195.108.17.21 > 195.108.17.65: icmp: echo reply
23:06:17.877771 195.108.17.65 > 195.108.17.21: icmp: echo request
23:06:18.017793 195.108.17.21 > 195.108.17.65: icmp: echo reply
23:06:18.877770 195.108.17.65 > 195.108.17.21: icmp: echo request
23:06:19.007768 195.108.17.21 > 195.108.17.65: icmp: echo reply
23:06:19.877766 195.108.17.65 > 195.108.17.21: icmp: echo request
23:06:19.997776 195.108.17.21 > 195.108.17.65: icmp: echo reply
23:06:20.877767 195.108.17.65 > 195.108.17.21: icmp: echo request
23:06:20.997771 195.108.17.21 > 195.108.17.65: icmp: echo reply
23:06:21.877928 195.108.17.65 > 195.108.17.21: icmp: echo request
23:06:21.997780 195.108.17.21 > 195.108.17.65: icmp: echo reply
(I'm 195.108.17.65 and I'm pinging .21. The ping ought to be
120ms away, not 4 seconds!)
The tcpdump seems to indicate the physical delay is correct...
BTW: I have the impression the delay gets longer and longer. I forgot
     the ping a while back, and after a few hours this was visible:
     (clean link, no traffic excepts the pings, ping -i 10)
64 bytes from 195.108.17.21: icmp_seq=3983 ttl=255 time=30130.1 ms
64 bytes from 195.108.17.21: icmp_seq=3984 ttl=255 time=20830.1 ms
64 bytes from 195.108.17.21: icmp_seq=3985 ttl=255 time=20130.1 ms
64 bytes from 195.108.17.21: icmp_seq=3986 ttl=255 time=20130.1 ms
64 bytes from 195.108.17.21: icmp_seq=3987 ttl=255 time=20130.1 ms
64 bytes from 195.108.17.21: icmp_seq=3988 ttl=255 time=20130.1 ms
64 bytes from 195.108.17.21: icmp_seq=3989 ttl=255 time=30141.1 ms
64 bytes from 195.108.17.21: icmp_seq=3990 ttl=255 time=30130.1 ms
64 bytes from 195.108.17.21: icmp_seq=3991 ttl=255 time=30130.1 ms
64 bytes from 195.108.17.21: icmp_seq=3992 ttl=255 time=40141.1 ms
64 bytes from 195.108.17.21: icmp_seq=3993 ttl=255 time=40131.1 ms
64 bytes from 195.108.17.21: icmp_seq=3994 ttl=255 time=40130.1 ms
64 bytes from 195.108.17.21: icmp_seq=3995 ttl=255 time=40130.1 ms
64 bytes from 195.108.17.21: icmp_seq=3996 ttl=255 time=40120.1 ms
(no TCPdump of this though)
    Met vriendelijke groet,
        Pauline Middelink
-- 
PGP Key fingerprint = DE 6B D0 D9 19 AD A7 A0  58 A3 06 9D B6 34 39 E2
For more details look at my website 
http://www.polyware.nl/~middelin
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/