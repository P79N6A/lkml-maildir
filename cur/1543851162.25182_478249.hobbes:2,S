Date: Wed, 1 Nov 2006 10:25:00 +0800
From: "zhou drangon" <>
Subject: Re: reiser4 panic
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/10/31/415

It seams ok to copy or cat the file, but panic when browse the file from apache.
Apache use sendfile() to read the file
[pid  3536] read(10, "GET /Fedora/core/updates/6/i386/"..., 8000) = 513
[pid  3536] gettimeofday({1162347890, 56510}, NULL) = 0
[pid  3536] stat64("/opt/wwwroot/html/Fedora/core/updates/6/i386/repodata/repomd.xml",
{st_mode=S_IFREG|0644, st_size=1197, ...}) = 0
[pid  3536] open("/opt/wwwroot/html/Fedora/core/updates/6/i386/repodata/repomd.xml",
O_RDONLY|O_LARGEFILE) = 12
[pid  3536] setsockopt(10, SOL_TCP, TCP_CORK, [1], 4) = 0
[pid  3536] writev(10, [{"HTTP/1.1 200 OK\r\nDate: Wed, 01 N"...,
277}], 1) = 277
[pid  3536] sendfile64(10, 12, [0], 1197
2006/11/1, zhou drangon <drangon.mail@gmail.com>:
> Hi, all
>
> I try reiser4 and got a kernel panic.
>
> I use kernel 2.6.19-rc3-mm1, config kernel to enable reiser4,
> then I use reiser4progs-1.0.5 to excute following command,
>
> mkfs.reiser4 /dev/hda5
> mount -t reiser4 /dev/hda5 /hda5
> cd /hda5
> mkdir FC6_mirror
> nohup wget -m -np -nH --cut-dirs=3 -R *-debuginfo-*
> 
ftp://ftp.nara.wide.ad.jp/pub/Linux/fedora/core/updates/6/i386/
 &
> nohup wget -m -np -nH --cut-dirs=3 -R *-debuginfo-*
> 
ftp://ftp.kddilabs.jp/Linux/packages/fedora/core/updates/6/x86_64/
 &
>
> then I make a link at $wwwroot/html/Fedora to /hda5/FC6_mirror
> my web server is apache 2.2.3, use worker mpm,
>
> when I use web browser to access the Fedora mirror
> http://<myip>/Fedora/core/update/6/i386/
> download the rpm files if fine.
>
> until I try to access one file
> http://<myip>/Fedora/core/update/6/i386/repodata/repomd.xml
> the kernel panic.
>
> this file's size is 1197 bytes, a common file.
>
> the infomation print on the screen is something like :
> kernel panic, at reiser4/plugin/item/tail.c:426
>
> I reformat the partition and try again, the bug can reproduced.
>
> any idea?
>
> Best regards!
>
> drangon
> 2006-11-01
>
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/