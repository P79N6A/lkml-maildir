Date: Tue, 25 Mar 2003 17:39:40 GMT
From: Stephen Tweedie <>
Subject: [Patch 4/8] 2.4: Throttle ENOMEM warnings more aggressively.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/3/25/144

The VM can fail normal allocations quite often under severe load.  The
VFS just ignores this in getblk, retrying silently, but ext3 emits a
warning; the patch just makes them a bit less frequent.
--- linux-2.4-ext3push/fs/jbd/journal.c.=K0003=.orig	2003-03-25 10:59:15.000000000 +0000
+++ linux-2.4-ext3push/fs/jbd/journal.c	2003-03-25 10:59:15.000000000 +0000
@@ -1660,7 +1660,7 @@ void * __jbd_kmalloc (char *where, size_
 		 * messages. */
 		jbd_debug(1, "ENOMEM in %s, retrying.\n", where);
 
-		if (time_after(jiffies, last_warning + 5*HZ)) {
+		if (time_after(jiffies, last_warning + 120*HZ)) {
 			printk(KERN_NOTICE
 			       "ENOMEM in %s, retrying.\n", where);
 			last_warning = jiffies;
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/