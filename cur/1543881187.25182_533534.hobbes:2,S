Date: Sun, 22 Apr 2007 12:29:55 -0700 (PDT)
From: Linus Torvalds <>
Subject: Re: Today's 'master' leaves .idx/.pack in 0400
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/4/22/184

On Sun, 22 Apr 2007, Junio C Hamano wrote:
> 
> How about this as a replacement (hot off the press -- still
> running the tests).
Looks good, but..
> +		mode_t mode = umask(0);
> +
> +		umask(mode);
> +		mode = 0666 & ~mode;
I would really suggest just defaulting to
	mode = 0444 & ~mode;
since there simply is never any reason to allow a writable pack-file.
The fact that we have some tests that try to corrupt a pack-file is not 
really a reason. Just make them do "chmod +w" before corrupting it.
But your patch is an obvious improvement regardless, so I certainly don't 
think this is a *big* issue.
		Linus
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/