Date: Mon, 31 Oct 2005 19:11:33 +0100
From: Jean Delvare <>
Subject: [PATCH 2.6] i2c: writing-client doc update complement
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/10/31/198

Hi Linus,
Can you please apply the following patch to your git tree? Thanks.
* * * * *
My latest update to the writing-clients i2c documentation file was
incomplete, here's the complement.
Large parts of this file are still way out-of-date, but at least now
the memory allocation and freeing instructions are consistent.
Signed-off-by: Jean Delvare <khali@linux-fr.org>
---
 Documentation/i2c/writing-clients |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)
--- linux-2.6.14-git.orig/Documentation/i2c/writing-clients	2005-10-31 18:44:21.000000000 +0100
+++ linux-2.6.14-git/Documentation/i2c/writing-clients	2005-10-31 19:07:22.000000000 +0100
@@ -412,7 +412,7 @@
         release_region(address,FOO_EXTENT);
     /* SENSORS ONLY END */
     ERROR1:
-      kfree(new_client);
+      kfree(data);
     ERROR0:
       return err;
   }
@@ -443,7 +443,7 @@
       release_region(client->addr,LM78_EXTENT);
     /* HYBRID SENSORS CHIP ONLY END */
 
-    kfree(data);
+    kfree(i2c_get_clientdata(client));
     return 0;
   }
 
-- 
Jean Delvare
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/