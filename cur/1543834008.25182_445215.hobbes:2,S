Date: Tue, 18 Jul 2006 16:17:53 +0200
From: "Andrea Galbusera" <>
Subject: SPI driver development questions
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/7/18/124

I have to develop an SPI device driver to make a PowerPC (mcp5200)
custom board "talk" to an FPGA in order to program it at power on.
I'm using 2.6.16 kernel with support for the spi subsystem enabled. I
also had a look at some new spi-related files coming from 2.6.17
What I'd like to do is to be able to program my FPGA from user space
(namely init scripts), possibly using a standard char device
interface. The binary stream to program the FPGA is stored on the
linux filesystem, so this sounds as the most confortable way to go.
Let me say I have to use the dedicated SPI controller on the 5200, not
the generic PSC module.
I read docs in Documentation/spi and Documentation/driver-model, but
still many questions fly around...
How should I proceed?
Do I have to write a SPI Master Controller Driver for the 5200 first
and than a specific device driver for my FPGA? If so should the master
driver be similar to linux/drivers/spi/spi_mpc83xx.c, taking into
account low level differences in managing the interface?
What exactly will this master driver "export" to the specific device
driver for my FPGA?
I cannot figure out, after registering the master driver how to "bind"
the device driver to the master.
TIA
Regards,
Andrea G.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/