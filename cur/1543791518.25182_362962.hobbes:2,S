Date: Thu, 3 Nov 2005 10:12:14 +0200
From: Gleb Natapov <>
Subject: Re: Nick's core remove PageReserved broke vmware...
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/11/3/26

On Wed, Nov 02, 2005 at 10:02:49PM +0000, Hugh Dickins wrote:
> On Thu, 3 Nov 2005, Benjamin Herrenschmidt wrote:
> > On Wed, 2005-11-02 at 21:41 +0000, Hugh Dickins wrote:
> > 
> > > The only extant problem here is if the pages are private, and you
> > > fork while this is going on, and the parent user process writes to the
> > > area before completion: then COW leaves the child with the page being
> > > DMAed into, giving the parent a copied page which may be incomplete.
> > 
> > Won't happen, and if it does, it's a user error to rely on that working,
> > so it doesn't matter.
> 
> I wish everyone else would see it that way!  (But some people do
> have valid scenarios where it can't just be ruled out completely.)
> 
I am one of those people :)
Last discussion about this issue ended without resolution, but I remember
you mentioned the possibility to leave ptes writable in parent during fork 
for private pages mapped for DMA. Is this approach acceptable?
--
			Gleb.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/