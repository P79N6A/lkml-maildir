Date: Tue, 18 Sep 2007 10:48:25 +0200
From: Ingo Molnar <>
Subject: Re: Scheduler benchmarks - a follow-up
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/9/18/48

* Rob Hussey <robjhussey@gmail.com> wrote:
> The obligatory graphs:
> 
http://www.healthcarelinen.com/misc/benchmarks/BOUND_NOPREEMPT_lat_ctx_benchmark.png
> 
http://www.healthcarelinen.com/misc/benchmarks/BOUND_NOPREEMPT_hackbench_benchmark.png
> 
http://www.healthcarelinen.com/misc/benchmarks/BOUND_NOPREEMPT_pipe-test_benchmark.png
btw., it's likely that if you turn off CONFIG_PREEMPT for .21 and for 
.22-ck1 they'll improve a bit too - so it's not fair to put the .23 
!PREEMPT numbers on the graph as the PREEMPT numbers of the other 
kernels. (it shows the .23 scheduler being faster than it really is)
> A cursory glance suggests that performance wrt lat_ctx and hackbench 
> has increased (lower numbers), but degraded quite a lot for pipe-test. 
> The numbers for pipe-test are extremely stable though, while the 
> numbers for hackbench are more erratic (which isn't saying much since 
> the original numbers gave nearly a straight line). I'm still willing 
> to try out any more ideas.
the pipe-test behavior looks like an outlier. !PREEMPT only removes code 
(which makes the code faster), so this could be a cache layout artifact. 
(or perhaps we preempt at a different point which is disadvantageous to 
caching?) Pipe-test is equivalent to "lat_ctx -s 0 2" so if there was a 
genuine slowdown it would show up in the lat_ctx graph - but the graph 
shows a speedup.
	Ingo
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/