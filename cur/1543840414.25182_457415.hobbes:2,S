Date: Thu, 24 Aug 2006 22:24:05 -0400
From: Theodore Tso <>
Subject: Re: [Ext2-devel] [RFC][PATCH] Manage jbd allocations from its own slabs
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/8/24/413

On Thu, Aug 24, 2006 at 12:11:25PM -0700, Badari Pulavarty wrote:
> > Why can't you just use alloc_page?  I bet the whole slab overhead
> > eats more memory than what's wasted when using alloc_pages.  Especially
> > as the typical usecase is a 4k blocks filesystem with 4k pagesize
> > where the overhead of alloc_page is non-existant.
> 
> Yes. That was what proposed earlier. But for 1k, 2k allocations we
> end up wasting whole page.  Isn't it ? Thats why I created right
> sized slabs and disable slab-debug.  I guess, I can do this only for
> 1k, 2k filesystems and directly use alloc_page() for 4k and 8k - but
> that would make code ugly and also it doesn't handle cases for
> bigger base pagesize systems (64k power).
Is there some way we can cleanly have a shortcut case where we use
alloc_page() if fs_blocksize == PAGE_SIZE?  The efficiency gains for
what will be the common case on many architectures will probably make
this worthwhile....
						- Ted
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/