Date: Fri, 8 Oct 2004 16:04:56 +0100
From: Russell King <>
Subject: Re: [RFC] ARM binutils feature churn causing kernel problems
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/10/8/126

On Mon, Sep 27, 2004 at 09:03:05PM +0100, Russell King wrote:
> The ARM binutils seems to be in a problematical state at the moment.
> It has recently had a "bug" fixed where ARM specific "mapping symbols"
> were not generated in ELF objects.  These "mapping symbols" have names
> such as "$a" and "$d".
Ok, another tool which is affected by this is procps:
$ ps alx
Warning: /boot/System.map-2.6.9-rc3 not parseable as a System.map
Warning: /boot/System.map not parseable as a System.map
Warning: /usr/src/linux/System.map has an incorrect kernel version.
F   UID   PID  PPID PRI  NI   VSZ  RSS WCHAN  STAT TTY        TIME COMMAND
4     0     1     0  16   0  1244  508 do_sel S    ?          0:01 init [3]
...
$ grep -v '\$[adt]' /boot/System.map-2.6.9-rc3 > System.map-2.6.9-rc3
$ PS_SYSTEM_MAP=System.map-2.6.9-rc3 ps alx
F   UID   PID  PPID PRI  NI   VSZ  RSS WCHAN  STAT TTY        TIME COMMAND
4     0     1     0  16   0  1244  508 do_sel S    ?          0:01 init [3]
...
The System.map file is generated by ($1 = vmlinux $2 = System.map):
$NM -n $1 | grep -v '\( [aUw] \)\|\(__crc_\)' > $2
Can we change this to:
$NM -n $1 | grep -v '\( [aUw] \)\|\(__crc_\)\|\( \$[adt]\)' > $2
?
-- 
Russell King
 Linux kernel    2.6 ARM Linux   - 
http://www.arm.linux.org.uk/
 maintainer of:  2.6 PCMCIA      - 
http://pcmcia.arm.linux.org.uk/
                 2.6 Serial core
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/