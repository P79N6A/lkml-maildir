Date: Fri, 18 May 2007 08:23:35 -0700
From: "Tim Hockin" <>
Subject: Re: [PATCH] x86_64: mcelog tolerant level cleanup
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/5/18/209

On 5/18/07, Andi Kleen <ak@suse.de> wrote:
> >      * If RIPV is set it is not safe to restart, so set the 'no way out'
> >        flag rather than the 'kill it' flag.
>
> Why? It is not PCC. We cannot return of course, but killing isn't returning.
My understanding is that the absence of RIPV indicates that it is not
safe to restart, period.  Not that the running *task* is not safe* but
that the IP on the stack is not valid to restart at all.
> >      * Don't panic() on correctable MCEs.
>
> The idea behind this was that if you get an exception it is always a bit risky
> because there are a few potential deadlocks that cannot be avoided.
> And normally non UC is just polled which will never cause a panic.
> So I don't quite see the value of this change.
It will still always panic when tolerant == 0, and of course you're
right correctable errors would skip over the panic() path anyway.  I
can roll back the "<0" part, though I don't see the difference now :)
> > This patch also calls nonseekable_open() in mce_open (as suggested by akpm).
>
> That should be a separate patch
Andrew already sucked it into -mm - do you want me to break it out,
and re-submit?
> > +             0: always panic on uncorrected errors, log corrected errors
> > +             1: panic or SIGBUS on uncorrected errors, log corrected errors
> > +             2: SIGBUS or log uncorrected errors, log corrected errors
>
> Just saying SIGBUS is misleading because it isn't a catchable
> signal.
should I change that to "kill" ?
> Why did you remove the idle special case?
Because once the other tolerant rules are clarified, it's redundant
for tolerant < 2, and I think it's a bad special case for tolerant ==
2, and it's definately wrong for tolerant == 3.
Shall I re-roll?
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/