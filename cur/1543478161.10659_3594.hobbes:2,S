Date: Sat, 16 Jan 1999 10:27:41 +0000 (/etc/localtime)
From: Riccardo Facchetti <>
Subject: 2.2.0-pre7 report: aic7xxx and matroxfb problems.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/1/16/32

Hello,
I want to tell you my latest experiences with pre7.
pre7 seems to be good to me but ...
1) aic7xxx ... for the reason in 2) I have had to do a lot of fsck in the
   last days. My aha2940UW, during the fsck spit out at _every_ fsck at
   least one "scsi : aborting command due to timeout : pid 13475
   , scsi0, channel 0, id 0, lun 0 Write (6) 02 80 40 0a 00" if not two.
2) matroxfb ... yersterday I have installed on my PC a second video card.
   I am using matroxfb dual-head and set up the XF86_FBDev X11 server.
   Some times (not every time) when I start up the FBDev server the system
   lock up hard. I don't know what is really going on because the machine
   is completely death. No sysrq at all.
Attached you can find dmesg and lspci -vvvx.
Ciao,
	Riccardo.
17
Processor #1 Pentium(tm) APIC version 17
I/O APIC #2 Version 17 at 0xFEC00000.
Processors: 2
mapped APIC to ffffe000 (fee00000)
mapped IOAPIC to ffffd000 (fec00000)
Detected 199430793 Hz processor.
Console: colour VGA+ 80x25
Calibrating delay loop... 79.46 BogoMIPS
Memory: 95072k/98304k available (1252k kernel code, 416k reserved, 1492k data, 72k init)
VFS: Diskquotas version dquot_6.4.0 initialized
Checking 386/387 coupling... OK, FPU using exception 16 error reporting.
Checking 'hlt' instruction... OK.
Intel Pentium with F0 0F bug - workaround enabled.
POSIX conformance testing by UNIFIX
per-CPU timeslice cutoff: 1.56 usecs.
CPU0: Intel Pentium 75 - 200 stepping 0c
calibrating APIC timer ... 
..... CPU clock speed is 199.4161 MHz.
..... APIC bus clock speed is 66.4720 MHz.
Booting processor 1 eip 2000
Calibrating delay loop... 79.67 BogoMIPS
OK.
CPU1: Intel Pentium 75 - 200 stepping 0c
Total of 2 processors activated (159.13 BogoMIPS).
enabling symmetric IO mode... ...done.
ENABLING IO-APIC IRQs
init IO_APIC IRQs
 IO-APIC pin 0, 9, 10, 15, 19, 20, 21, 22, 23 not connected.
number of MP IRQ sources: 16.
number of IO-APIC registers: 24.
testing the IO APIC.......................
.... register #00: 02000000
.......    : physical APIC id: 02
.... register #01: 00170011
.......     : max redirection entries: 0017
.......     : IO APIC version: 0011
.... register #02: 00000000
.......     : arbitration: 00
.... IRQ redirection table:
 NR Log Phy Mask Trig IRR Pol Stat Dest Deli Vect:   
 00 000 00  1    0    0   0   0    0    0    00
 01 000 00  0    0    0   0   0    1    1    59
 02 0FF 0F  0    0    0   0   0    1    1    51
 03 000 00  0    0    0   0   0    1    1    61
 04 000 00  0    0    0   0   0    1    1    69
 05 000 00  0    0    0   0   0    1    1    71
 06 000 00  0    0    0   0   0    1    1    79
 07 000 00  0    0    0   0   0    1    1    81
 08 000 00  0    0    0   0   0    1    1    89
 09 000 00  1    0    0   0   0    0    0    00
 0a 000 00  1    0    0   0   0    0    0    00
 0b 000 00  0    0    0   0   0    1    1    91
 0c 000 00  0    0    0   0   0    1    1    99
 0d 000 00  1    0    0   0   0    0    0    00
 0e 000 00  0    0    0   0   0    1    1    A1
 0f 000 00  1    0    0   0   0    0    0    00
 10 0FF 0F  1    1    0   1   0    1    1    A9
 11 0FF 0F  1    1    0   1   0    1    1    B1
 12 0FF 0F  1    1    0   1   0    1    1    B9
 13 000 00  1    0    0   0   0    0    0    00
 14 000 00  1    0    0   0   0    0    0    00
 15 000 00  1    0    0   0   0    0    0    00
 16 000 00  1    0    0   0   0    0    0    00
 17 000 00  1    0    0   0   0    0    0    00
IRQ to pin mappings:
IRQ0 -> 2
IRQ1 -> 1
IRQ3 -> 3
IRQ4 -> 4
IRQ5 -> 5
IRQ6 -> 6
IRQ7 -> 7
IRQ8 -> 8
IRQ9 -> 18
IRQ10 -> 17
IRQ11 -> 11
IRQ12 -> 12
IRQ13 -> 13
IRQ14 -> 14
IRQ15 -> 16
.................................... done.
PCI: PCI BIOS revision 2.10 entry at 0xfb360
PCI: Using configuration type 1
PCI: Probing PCI hardware
Linux NET4.0 for Linux 2.2
Based upon Swansea University Computer Society NET3.039
NET4: Unix domain sockets 1.0 for Linux NET4.0.
NET4: Linux TCP/IP 1.0 for NET4.0
IP Protocols: ICMP, UDP, TCP, IGMP
IPv4 over IPv4 tunneling driver
early initialization of device tunl0 is deferred
Initializing RT netlink socket
Starting kswapd v 1.5 
parport0: PC-style at 0x378 [SPP,PS2,ECP,ECPPS2]
parport0: no IEEE-1284 device present.
matroxfb: Matrox Mystique 220 (PCI) detected
matroxfb: 1280x1024x24bpp (virtual: 1280x1024)
matroxfb: framebuffer at 0xE0000000, mapped to 0xc6807000, size 4194304
Console: switching to colour frame buffer device 160x64
fb0: MATROX VGA frame buffer device
matroxfb: Matrox Mystique (PCI) detected
matroxfb: 1280x1024x24bpp (virtual: 1280x1024)
matroxfb: framebuffer at 0xE4000000, mapped to 0xc6c0d000, size 4194304
fb1: MATROX VGA frame buffer device
fb1: initializing hardware
Serial driver version 4.27 with no serial options enabled
ttyS00 at 0x03f8 (irq = 4) is a 16550A
ttyS01 at 0x02f8 (irq = 3) is a 16550A
ttyS02 at 0x03e8 (irq = 4) is a 16550A
Rocketport device driver module, version 1.14c, 24-Aug-98
Rocketport controller #0 found at 0x180, 1 AIOPs
pty: 256 Unix98 ptys configured
lp0: using parport0 (polling).
Software Watchdog Timer: 0.05, timer margin: 60 sec
Real Time Clock Driver v1.09
Non-volatile memory driver v1.0
Sound initialization started
Audio Excel DSP 16 init v1.2 (SC-6000 3.1) [MSS]
<MSS audio codec (AD1848)> at 0x534 irq 11 dma 3,3
<Yamaha OPL3> at 0x388
Sound initialization complete
loop: registered device at major 7
PIIX3: IDE controller on PCI bus 00 dev 39
PIIX3: not 100% native mode: will probe irqs later
    ide0: BM-DMA at 0xf000-0xf007, BIOS settings: hda:pio, hdb:pio
hda: ST32132A, ATA DISK drive
hdb: ST51080A, ATA DISK drive
ide2: ports already in use, skipping probe
ide0 at 0x1f0-0x1f7,0x3f6 on irq 14
hda: ST32132A, 2015MB w/120kB Cache, CHS=1023/64/63
hdb: ST51080A, 1033MB w/256kB Cache, CHS=525/64/63
Floppy drive(s): fd0 is 1.44M, fd1 is 1.2M
FDC 0 is a post-1991 82077
(scsi0) <Adaptec AHA-294X Ultra SCSI host adapter> found at PCI 18/0
(scsi0) Wide Channel, SCSI ID=7, 16/255 SCBs
(scsi0) Warning - detected auto-termination
(scsi0) Please verify driver detected settings are correct.
(scsi0) If not, then please properly set the device termination
(scsi0) in the Adaptec SCSI BIOS by hitting CTRL-A when prompted
(scsi0) during machine bootup.
(scsi0) Cables present (Int-50 YES, Int-68 NO, Ext-68 NO)
(scsi0) Downloading sequencer code... 419 instructions downloaded
scsi0 : Adaptec AHA274x/284x/294x (EISA/VLB/PCI-Fast SCSI) 5.1.10/3.2.4
       <Adaptec AHA-294X Ultra SCSI host adapter>
scsi : 1 host.
  Vendor: QUANTUM   Model: FIREBALL SE6.4S   Rev: PJ0A
  Type:   Direct-Access                      ANSI SCSI revision: 02
Detected scsi disk sda at scsi0, channel 0, id 0, lun 0
(scsi0:0:0:0) Synchronous at 20.0 Mbyte/sec, offset 15.
  Vendor: PLEXTOR   Model: CD-ROM PX-32TS    Rev: 1.03
  Type:   CD-ROM                             ANSI SCSI revision: 02
Detected scsi CD-ROM sr0 at scsi0, channel 0, id 3, lun 0
(scsi0:0:3:0) Synchronous at 20.0 Mbyte/sec, offset 15.
  Vendor: FUJITSU   Model: M2512A            Rev: 1507
  Type:   Optical Device                     ANSI SCSI revision: 02
Detected scsi removable disk sdb at scsi0, channel 0, id 4, lun 0
scsi : detected 1 SCSI cdrom 2 SCSI disks total.
Uniform CDROM driver Revision: 2.51
SCSI device sda: hdwr sector= 512 bytes. Sectors= 12594960 [6149 MB] [6.1 GB]
sdb : READ CAPACITY failed.
sdb : status = 1, message = 00, host = 0, driver = 28 
sdb : extended sense code = 2 
sdb : block size assumed to be 512 bytes, disk size 1GB.  
PPP: version 2.3.3 (demand dialling)
TCP compression code copyright 1989 Regents of the University of California
PPP line discipline registered.
SLIP: version 0.8.4-NET3.019-NEWTTY (dynamic channels, max=256).
CSLIP: code copyright 1989 Regents of the University of California.
Partition check:
 sda: sda1 sda2 sda3 sda4 < sda5 sda6 >
 sdb:scsidisk I/O error: dev 08:10, sector 0
 unable to read partition table
 hda: hda1 hda2 hda3 hda4
 hdb: hdb1 hdb2
NTFS version 990102
VFS: Mounted root (ext2 filesystem) readonly.
Freeing unused kernel memory: 72k freed
Adding Swap: 137084k swap-space (priority -1)
sr0: CDROM not ready.  Make sure there is a disc in the drive.
sr0: CDROM not ready.  Make sure there is a disc in the drive.
cdrom: open failed.
Device not ready.  Make sure there is a disc in the drive.
VFS: Disk change detected on device sr(11,0)
registered device ppp0
PPP BSD Compression module registered
PPP Deflate Compression module registered
00:00.0 Host bridge: Intel Corporation 430HX - 82439HX TXC [Triton II] (rev 03)
	Control: I/O- Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR- FastB2B-
	Status: 66Mhz- UDF- FastB2B- ParErr- DEVSEL=medium >TAbort- <TAbort- <MAbort+ >SERR- <PERR-
	Latency: 64 set
00: 86 80 50 12 06 00 00 22 03 00 00 06 00 40 00 00
10: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
20: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
30: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00:07.0 ISA bridge: Intel Corporation 82371SB PIIX3 ISA [Natoma/Triton II] (rev 01)
	Control: I/O+ Mem+ BusMaster+ SpecCycle+ MemWINV- VGASnoop- ParErr- Stepping- SERR- FastB2B-
	Status: 66Mhz- UDF- FastB2B+ ParErr- DEVSEL=medium >TAbort- <TAbort- <MAbort- >SERR- <PERR-
	Latency: 0 set
00: 86 80 00 70 0f 00 80 02 01 00 01 06 00 00 80 00
10: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
20: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
30: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00:07.1 IDE interface: Intel Corporation 82371SB PIIX3 IDE [Natoma/Triton II] (prog-if 80)
	Control: I/O+ Mem- BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR- FastB2B-
	Status: 66Mhz- UDF- FastB2B+ ParErr- DEVSEL=medium >TAbort- <TAbort- <MAbort- >SERR- <PERR-
	Latency: 64 set
	Region 4: I/O ports at f000
00: 86 80 10 70 05 00 80 02 00 80 01 01 00 40 00 00
10: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
20: 01 f0 00 00 00 00 00 00 00 00 00 00 00 00 00 00
30: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00:12.0 SCSI storage controller: Adaptec AIC-7881U (rev 01)
	Subsystem: Unknown device 9004:7881
	Control: I/O+ Mem+ BusMaster+ SpecCycle- MemWINV+ VGASnoop- ParErr- Stepping- SERR- FastB2B-
	Status: 66Mhz- UDF- FastB2B+ ParErr- DEVSEL=medium >TAbort- <TAbort- <MAbort- >SERR- <PERR+
	Latency: 8 min, 8 max, 64 set, cache line size 08
	Interrupt: pin A routed to IRQ 9
	Region 0: I/O ports at 6400
	Region 1: Memory at e6000000 (32-bit, non-prefetchable)
00: 04 90 78 81 17 00 90 82 01 00 00 01 08 40 00 00
10: 01 64 00 00 00 00 00 e6 00 00 00 00 00 00 00 00
20: 00 00 00 00 00 00 00 00 00 00 00 00 04 90 81 78
30: 00 00 00 00 dc 00 00 00 00 00 00 00 09 01 08 08
00:13.0 VGA compatible controller: Matrox Graphics, Inc. MGA 1064SG [Mystique] (rev 03)
	Subsystem: Unknown device 102b:0100
	Control: I/O+ Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop+ ParErr- Stepping+ SERR- FastB2B-
	Status: 66Mhz- UDF- FastB2B+ ParErr- DEVSEL=medium >TAbort- <TAbort- <MAbort- >SERR- <PERR-
	Latency: 64 set
	Interrupt: pin A routed to IRQ 10
	Region 0: Memory at e0000000 (32-bit, prefetchable)
	Region 1: Memory at e1000000 (32-bit, non-prefetchable)
	Region 2: Memory at e2000000 (32-bit, non-prefetchable)
00: 2b 10 1a 05 a7 00 80 02 03 00 00 03 00 40 00 00
10: 08 00 00 e0 00 00 00 e1 00 00 00 e2 00 00 00 00
20: 00 00 00 00 00 00 00 00 00 00 00 00 2b 10 00 01
30: 00 00 00 00 00 00 00 00 00 00 00 00 0a 01 00 00
00:14.0 VGA compatible controller: Matrox Graphics, Inc. MGA 1064SG [Mystique] (rev 02)
	Subsystem: Unknown device 102b:051a
	Control: I/O- Mem+ BusMaster- SpecCycle- MemWINV- VGASnoop- ParErr- Stepping+ SERR- FastB2B-
	Status: 66Mhz- UDF- FastB2B+ ParErr- DEVSEL=medium >TAbort- <TAbort- <MAbort- >SERR- <PERR-
	Interrupt: pin A routed to IRQ 15
	Region 0: Memory at e3000000 (32-bit, non-prefetchable)
	Region 1: Memory at e4000000 (32-bit, prefetchable)
	Region 2: Memory at e5000000 (32-bit, non-prefetchable)
00: 2b 10 1a 05 82 00 80 02 02 00 00 03 00 40 00 00
10: 00 00 00 e3 08 00 00 e4 00 00 00 e5 00 00 00 00
20: 00 00 00 00 00 00 00 00 00 00 00 00 2b 10 1a 05
30: 00 00 00 00 00 00 00 00 00 00 00 00 0f 01 00 00