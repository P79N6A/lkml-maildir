Date: Sun, 21 Apr 2002 18:57:05 +0000
From: Pavel Machek <>
Subject: Re: 2.5.8: preemption + SMP broken ?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/4/22/80

Hi!
> > My machine (4cpu x86) hangs while booting a kernel with SMP
> > and preemption enabled. It hangs while executing one of
> > the initcalls, probably BIO since that is where the
> > next boot message comes from during a successful boot with SMP
> > (or preemption) disabled.
> > 
> > Has anyone tried out preemption with SMP ?
> 
> Sure, all my testing is on SMP.  The problem manifested itself in
> 2.5.8-pre when some changes where made to the migration code.  The race
> is in the migration code - I am not sure it is preempts fault, per se,
> but the attached patch should fix it.  It is pending with Linus for the
> next release.
Wel, if race is in migration code, you should fix migration, not add
preempt_disable(), right? [Or is race preempt-onlly?]
-- 
Philips Velo 1: 1"x4"x8", 300gram, 60, 12MB, 40bogomips, linux, mutt,
details at 
http://atrey.karlin.mff.cuni.cz/~pavel/velo/index.html.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/