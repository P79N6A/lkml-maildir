Date: Thu, 17 Mar 2005 15:06:21 -0800 (PST)
From: Christoph Lameter <>
Subject: Re: [PATCH] Prezeroing V8
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/3/17/172

On Thu, 17 Mar 2005, Nish Aravamudan wrote:
> > +       if (system_state != SYSTEM_RUNNING)
> > +               return;
> > +
> > +        while (avenrun[0] >= ((unsigned long)sysctl_scrub_load << FSHIFT))
> > +               schedule_timeout(30*HZ);
>
> This is a busy-loop, unless you set the state before you call
> schedule_timeout(). Additionally, you really want to sleep 30 seconds
Ahh. Missed that thanks.
> at a time? Please use msleep() or msleep_interruptible(), unless you
> expect wait-queue events.
I want to sleep 30 seconds because the system load is unlikely to change
frequently.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/