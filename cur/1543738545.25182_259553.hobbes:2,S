Date: Mon, 11 Oct 2004 13:19:19 +0100
From: Russell King <>
Subject: Re: MMC performance
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/10/11/67

On Mon, Oct 11, 2004 at 01:05:09PM +0200, Pierre Ossman wrote:
> Writing, however, only sends a single sector at a time. The queue 
> process eats up half of the CPU time on my machine during a write. And 
> since MMC cards have to clear a whole bunch of sectors before a write 
> shouldn't you send as many sectors as possible to them?
Only if you can reliably know how many bytes you've tranferred when
an error occurs.  Without that, the only safe way to do a write is
sector by sector.
And there are MMC controllers which just don't give you that
information, namely those found in Intel chips...
Since I'm having to be compatible with existing drivers, we need to
do this for the time being.  It's a shame we can't tell the BIO layer
about this type of quirk though.  Not that BIO itself understands
"sector by sector" IO at the moment.
-- 
Russell King
 Linux kernel    2.6 ARM Linux   - 
http://www.arm.linux.org.uk/
 maintainer of:  2.6 PCMCIA      - 
http://pcmcia.arm.linux.org.uk/
                 2.6 Serial core
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/