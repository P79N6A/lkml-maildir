Date: Sat, 26 Jan 2008 20:19:01 +1100
From: Rusty Russell <>
Subject: Re: [GIT PATCH] driver core patches against 2.6.24
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/26/44

On Saturday 26 January 2008 16:35:09 Greg KH wrote:
> On Sat, Jan 26, 2008 at 03:50:57PM +1100, Rusty Russell wrote:
> > That's pretty early, and before this backtrace.
>
> But that doesn't catch the case here, of trying to load a module when
> the code itself is already built into the kernel.
Ah, I missed that, sorry.
> For that we are 
> relying on the sysfs core to tell us we have a duplicate name problem,
> which happens much later.
>
> Is there any test you can do sooner, or is relying on the sysfs test
> acceptable?
As you pointed out, that's always been a "configure your kernel correctly, 
stupid" kind of bug.  Nicer would be to have a list of in-kernel "modules" 
generated by the build system, but sysfs is there and it's easy to hang our 
hats off...
So, no objections to this with that as a FIXME, and a change so the message 
says "module is already built into the kernel".
Thanks,
Rusty.