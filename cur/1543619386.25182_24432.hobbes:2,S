Date: 30 Jan 2002 15:35:53 -0800
From: "Jeffrey W. Baker" <>
Subject: Re: 2.4.17: pwrite destroys block I/O throughput
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/1/30/362

On Wed, 2002-01-30 at 14:55, Jeffrey W. Baker wrote:
> Hi there,
> 
> I've never heard of pwrite and pread before, but htdig apparently makes
> very heavy use of it.  On my 2.4.17 SMP 2GB HIGHMEM + ext3 system,
> running htdig destroys input rates for every other process.  htdig's
> output proceeds at approximately 2MB/s, but input for the entire system
> runs only at about 4KB/s (YES, KB!).  If I suspend htdig, system block
> input increases to the normal rate of 10-50MB/s.  Output still works, as
> a dd from /dev/zero to a 400MB file runs at about 25MB/s.
I looked around a little more and it seems that htdig is doing SYNC I/O
on its db2 files.  This may be the problem.  If so, it seems that sync
I/O is able to DoS all other I/O consumers on the machine.
-jwb
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/