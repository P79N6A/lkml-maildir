Date: Thu, 13 Jan 2005 11:07:33 -0600
From: "Justin M. Forbes" <>
Subject: Re: NUMA or not on dual Opteron
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/1/13/178

On Thu, Jan 13, 2005 at 11:02:19AM +0100, Raphael Jacquot wrote:
> >I was under the impression that NUMA is useful on > 2-way systems only.
> >Is this true, and if not, under what circumstances is NUMA useful on
> >2-way Opteron systems?
> >
> >In other words: why should one want NUMA to be enabled or disabled for
> >dual Opteron?
> >
> >Thanks in advance.
> >
> 
> Numa needs to be enabled on bi-opteron systems because each processor 
> controls part of the memory. unlike the intel memory architecture, where 
> processors share the same bus to access memory.
> Numa in opteron systems is thus required to allow sharing of memory .
This is somewhat true.  There are 2 types of dual opteron boards. Those in
the $200 US range only have one memory bank, which is attached to CPU0.
They operate as a single node, and may perform better with numa turned off.
Those in the $400+ range tend to have one bank per CPU and will certainly
perform better with numa on.  They do usually have a bios option to
interleave the nodes which would show up as a single node, and probably
perform better with numa turned off, but a better solution is to turn off
the node interleave in bios and run the kernel with numa support.
Basically if you have 2 CPUs and only one memory bank, maybe turning numa
off will give better performance, but if you have one memory bank per CPU
numa should be on.
Justin
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/