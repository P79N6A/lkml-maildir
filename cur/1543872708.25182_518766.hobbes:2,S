Date: Sun, 11 Mar 2007 09:43:20 -0700 (PDT)
From: Linus Torvalds <>
Subject: RE: [git patches] libata fixes
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/3/11/104

Paul,
 do I understand correctly that the *only* difference between the working 
setup is that you applied (by hand) the libata patch that Jeff sent out?
So plain 2.6.21-rc2 works fine, but with the patch applied, you get no 
interrupts on the DVD drive?
On Sun, 11 Mar 2007, Paul Rolland wrote:
> 
> > It seems like IRQ is not getting through.  The first IRQ 
> > driven command is failing for you.
> 
> Hmmmm.... 
> > Extract is :
> > ata7: PATA max UDMA/100 cmd 0x0000000000019c00 ctl 0x0000000000019882 bmdma 0x0000000000019400 irq 16
> > ata8: PATA max UDMA/100 cmd 0x0000000000019800 ctl 0x0000000000019482 bmdma 0x0000000000019408 irq 16
> 
> IRQ 16 is IO-APIC-fasteoi for libata, and is not shared... but all the
> others libata IRQ are IO-APIC-edge.
Ok, that's interesting, although IO-APIC-fasteoi certainly works for 
others (eg me), but it's still useful.
> > * Does giving 'acpi=off' or 'irqpoll' make any difference?
> > 
> > * Can you connect a harddisk to the channel and see whether 
> > that works?
>
> Tried that.. Disk is identified as ATA-7: Mastor 6Y080L0, YAR41BW0, max
> UDMA/13 and then timeout again...
> 
> Tried then with acpi=off, same result (identify is OK, but then timeout),
> and irqpoll and then it was OK !!!!
Whee... There were no changes that looked interrupt-related there..
		Linus
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/