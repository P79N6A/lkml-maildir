Date: Thu, 15 Jul 2004 15:23:48 +0200
From: Éric Brunet <>
Subject: Re: swsuspend not working
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/7/15/52

On Thu, Jul 15, 2004 at 02:18:25PM +0200, Pavel Machek wrote:
> You are not really using swsusp. You are using pmdisk. Fix your
> kernel config.
Oh, I am confused; I believed that /proc/acpi/sleep was for swsuspend and
/sys/power/state for pmdisk. Well, things are changing I guess.
Anyway, I recompiled and tried again (not forgetting this time to swapon;
swsuspend has a usefull error message) and it worked ! Twice in a row !
I then tried S3, but then, no luck. The computer printed some text,
apparently shut down. I hit the power button to wake it up, I can hear
the fan and the disk spinning up, but the screen remains black and the
keyboard does nothing (caps lock does not lit the led, Ctrl-Alt-Suppr
does not reboot.) I have to hit the reset button.
Next I tried to suspend with the standard Fedora kernel
(2.6.6-1.435.2.3). I booted normally, did a telinit 1, umounted
everything except /proc and /, removed all modules except jbd and ext3
and did echo 4 > /proc/acpi/sleep and nothing happened. Half a second
later, sh was waiting for more input. The screen didn't blink, no line
was output, nothing in the logs.
The next step will be to boot the Fedora kernel directly in runlevel 1
(or maybe with init=/bin/sh, but I have to understand initrd, then) so
that most modules will never get loaded, video will never get set up,
etc., and then try S4. And then, their will be the long dichotomy to see
what is not working.
But that will be on monday, I think.
Éric
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/