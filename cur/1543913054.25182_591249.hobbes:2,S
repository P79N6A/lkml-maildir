Date: Tue, 04 Sep 2007 01:33:49 +0800
From: Bryan Wu <>
Subject: Re: [PATCH] Blackfin BF54x NAND Flash Controller driver
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/9/3/157

On Mon, 2007-09-03 at 17:46 +0100, David Woodhouse wrote:
> On Mon, 2007-09-03 at 15:25 +0800, Bryan Wu wrote:
> > +       if (hardware_ecc) {
> > +               if (plat->page_size == NFC_PG_SIZE_256) {
> > +                       chip->ecc.bytes = 3;
> > +                       chip->ecc.size = 256;
> > +               } else if (mtd->writesize == NFC_PG_SIZE_512) { 
> 
> Comparing against plat->page_size in one case, but mtd->writesize in the
> other? 
This is a typo in development. I will fix it ASAP. -:)
> And elsewhere it seems plat->page_size is treated as a boolean,
> indicating only 256-byte vs. 512-byte pages (you don't support 2KiB or
> other page sizes at all?)
> 
When enabled hardware ECC, NFC of BF54x supports 256 and 512 bytes page
size ECC.
it's maybe little confusing with the NAND chip's pagesize. When NAND
chip is 2KiB or other page size, this driver can use multiple 256/512
pages to do hardware ECC. And it's handled by the driver software here.
-Bryan Wu
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/