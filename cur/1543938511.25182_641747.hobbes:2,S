Date: Tue, 22 Jan 2008 20:14:23 +0300
From: Cyrill Gorcunov <>
Subject: Re: [MUST-FIX] in today's Linus' git
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/22/199

[Guennadi Liakhovetski - Tue, Jan 22, 2008 at 04:08:15PM +0100]
| Hi
| 
| Could someone, please, fix this:
| 
| drivers/media/video/tcm825x.c:
| 
| 853:	if (sensor->platform_data == NULL
| 854:	    && !sensor->platform_data->is_okay())
| 
| I haven't looked through the entire file, so, cannot guarantee, that this 
| is the only place. Maybe, someone could review this file and the whole 
| commit it came in with properly...
| 
| Thanks
| Guennadi
| ---
| Guennadi Liakhovetski
Hi,
i hope this help ;)
		- Cyrill -
---
From: Cyrill Gorcunov <gorcunov@gmail.com>
Subject: [PATCH] driver: fix incorrect logical operator
This patch does fix potential NULL pointer dereference
due to incorrect logical operator.
The issue is pointed out by
Guennadi Liakhovetski <g.liakhovetski@pengutronix.de>
Signed-off-by: Cyrill Gorcunov <gorcunov@gmail.com>
---
Index: linux-2.6.git/drivers/media/video/tcm825x.c
===================================================================
--- linux-2.6.git.orig/drivers/media/video/tcm825x.c	2008-01-21 19:35:14.000000000 +0300
+++ linux-2.6.git/drivers/media/video/tcm825x.c	2008-01-22 20:07:21.000000000 +0300
@@ -851,7 +851,7 @@
 	sensor->platform_data = client->dev.platform_data;
 
 	if (sensor->platform_data == NULL
-	    && !sensor->platform_data->is_okay())
+	    || !sensor->platform_data->is_okay())
 		return -ENODEV;
 
 	sensor->v4l2_int_device = &tcm825x_int_device;