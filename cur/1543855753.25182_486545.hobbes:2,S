Date: Wed, 29 Nov 2006 07:32:10 -0700
From: Matthew Wilcox <>
Subject: Re: [2.6 patch] drivers/scsi/scsi_error.c should #include "scsi_transport_api.h"
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/11/29/132

On Wed, Nov 29, 2006 at 09:13:35AM -0500, James Smart wrote:
> would it only go in include/scsi if it intends to be an exported
> api for LLDD's and/or user apps ?  and stay in drivers/scsi if its
> an internal api within the scsi subsystem itself ?
It isn't clear to me that's the intended use of include/scsi.  If it is,
it's already being violated, eg by
$ find * -type f |xargs grep scsi_host_scan_allowed
drivers/scsi/scsi_scan.c:       if (scsi_host_scan_allowed(shost))
drivers/scsi/scsi_scan.c:       if (scsi_host_scan_allowed(shost))
drivers/scsi/scsi_scan.c:       if (scsi_host_scan_allowed(shost)) {
drivers/scsi/scsi_scan.c:       if (!scsi_host_scan_allowed(shost))
include/scsi/scsi_host.h: * scsi_host_scan_allowed - Is scanning of this
host allowed
include/scsi/scsi_host.h:static inline int scsi_host_scan_allowed(struct
Scsi_Host *shost)
(a good candidate to be moved to scsi_scan.c, in fact!)
scsi_host_state_name, scsi_normalize_sense, scsi_reset_provider,
scsi_test_unit_ready, scsi_put_command are all in similar usage to
scsi_schedule_eh.  There's probably more, I just picked some likely
looking candidates.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/