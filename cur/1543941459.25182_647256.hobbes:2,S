Date: Sat, 02 Feb 2008 03:57:07 +0100
From: Marcel Holtmann <>
Subject: Re: Build error on PowerPC
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/2/1/583

Hi Olof,
> Please define what kernel version and what config you're trying to
> build.
it is the latest kernel for Linus' git and the config is kinda obviously
enabling the awacs.c driver. Anyway, the driver didn't make use of the
NVRAM call and thus removing that include is perfectly fine. Attached
patch fixes that issue.
> Also, please cc linuxppc-dev@ozlabs.org for powerpc issues.
To be quite honest, it is highly likely that I forget the next time.
Good that you read LKML :)
Regards
Marcel
[PATCH] Fix compilation of sound/ppc/awacs.c
Including of asm/nvram.h in the awacs.c driver is not needed and it
fixes the following compilation error:
  CC [M]  sound/ppc/awacs.o
In file included from sound/ppc/awacs.c:25:
include/asm/nvram.h:62: error: field ‘partition’ has incomplete type
make[2]: *** [sound/ppc/awacs.o] Error 1
make[1]: *** [sound/ppc] Error 2
make: *** [sound] Error 2
Signed-off-by: Marcel Holtmann <marcel@holtmann.org>
---
commit 5613f9f9aa321cf59915137cc611aea9fd95ed75
tree 3c55137ccc3d16e49b757a0e6135f32fb2086ae3
parent aa6299926950c8dfe2fea638276cad6def092bc9
author Marcel Holtmann <marcel@holtmann.org> Sat, 02 Feb 2008 03:52:23 +0100
committer Marcel Holtmann <marcel@holtmann.org> Sat, 02 Feb 2008 03:52:23 +0100
 sound/ppc/awacs.c |    1 -
 1 files changed, 0 insertions(+), 1 deletions(-)
diff --git a/sound/ppc/awacs.c b/sound/ppc/awacs.c
index 8441e78..149c4aa 100644
--- a/sound/ppc/awacs.c
+++ b/sound/ppc/awacs.c
@@ -21,7 +21,6 @@
 
 
 #include <asm/io.h>
-#include <asm/nvram.h>
 #include <linux/init.h>
 #include <linux/delay.h>
 #include <linux/slab.h>