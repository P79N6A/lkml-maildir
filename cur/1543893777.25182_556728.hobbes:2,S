Date: Wed, 13 Jun 2007 12:38:06 +0200
From: Vojtech Pavlik <>
Subject: Re: Proposal: change keycode for scancode e0 32 from 150 to 172
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/6/13/82

On Tue, Jun 12, 2007 at 03:29:48PM -0700, H. Peter Anvin wrote:
> I just tested this using Microsoft Natural Keyboard Pro, which is a
> dual-mode (USB-PS/2) keyboard.
> 
> This key is labelled Web/Home and has a picture of a house on the keycap.
> 
> In PS/2 mode it reports E0 32 which gets converted to keycode 150.
> In USB mode it reports E0 02 which gets converted to keycode 172.
> 
> I don't know if it's the keyboard itself that's being inconsistent, or
> if it is the table in usbkbd.c that's broken (in which case it should be
> fixed to be consistent with the keyboard in PS/2 mode.)
USB keyboards don't send scancodes, what you see is smoke and mirrors.
Yes, the atkbd.c and hid-input.c mappings are inconsistent. We probably
want to fix atkbd.c (scancode->keycode mapping), and maybe also
char/keyboard.c (keycode->synth scancode mapping).
> > The logo on the key is a homepage logo, the text below is www/homepage.
> > So what to send? I believe that for consistency with the usb codes send
> > it should be KEY_HOMEPAGE, but thats based on a sample of 1 usb
> > keyboard. Input on what other usb keyboards send for the key with the
> > homepage iocn is very much welcome.
> 
> You seem to be of the opinion that "usb behaviour is correct", but don't
> give any motivation why usb should take precedence.  Offhand, I would
> expect there to be fewer translation layers for PS/2 and would therefore
> assume PS/2 is more inherently correct.
KEY_HOMEPAGE seems to better fit the description of how the key looks.
Microsoft calls it "WWW Home", and it's supposed to be e0 32. 
-- 
Vojtech Pavlik
Director SuSE Labs
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/