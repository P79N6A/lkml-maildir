Date: Fri, 30 Jul 1999 09:02:14 +0100
From: "Jones D (ISaCS)" <>
Subject: Misc patches for 2.3.12
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/7/30/26

A few resynced patches from me:
    o Documentation fix that made it into 2.2.x, but not 2.3.x
    o The NVRAM clean up I posted a few days ago
    o The fbcon fix I also posted.
regards,
d.
diff -urN linux.vanilla/Documentation/Configure.help
linux.dj/Documentation/Configure.help
--- linux.vanilla/Documentation/Configure.help	Wed Jul 28 00:05:50 1999
+++ linux.dj/Documentation/Configure.help	Thu Jul 29 23:10:26 1999
@@ -5534,7 +5534,7 @@
   section (except for CONFIG_IP_ROUTE_TOS and CONFIG_IP_ROUTE_FWMARK).
   At the moment, few devices support fast switching (tulip is one of
   them, modified 8390 can be found at
-  
ftp://ftp.inr.ac.ru/ip-routing/fastroute-8390.tar.gz
).
+  
ftp://ftp.inr.ac.ru/ip-routing/fastroute/fastroute-8390.tar.gz
).
 
   If unsure, say N.
 
@@ -5544,8 +5544,8 @@
   during periods of extremal congestion. At the moment only a couple
   of device drivers support it (really only one -- tulip, modified
   8390 can be found at
-  
ftp://ftp.inr.ac.ru/ip-routing/fastroute-8390.tar.gz
). Really, this
-  option is applicable to any machine attached to a fast enough
+  
ftp://ftp.inr.ac.ru/ip-routing/fastroute/fastroute-8390.tar.gz
).
+  Really, this option is applicable to any machine attached to a fast
enough
   network, and even a 10 Mb NIC is able to kill a not very slow box,
   such as a 120MHz Pentium.
 
diff -urN linux.vanilla/drivers/char/nvram.c linux.dj/drivers/char/nvram.c
--- linux.vanilla/drivers/char/nvram.c	Mon Aug 24 21:14:09 1998
+++ linux.dj/drivers/char/nvram.c	Thu Jul 29 23:11:59 1999
@@ -479,7 +479,7 @@
 #ifdef CONFIG_PROC_FS
 
 static char *floppy_types[] = {
-	"none", "5.25'' 360k", "5.25'' 1.2M", "3.5'' 720k", "3.5'' 1.44M"
+	"none", "5.25'' 360k", "5.25'' 1.2M", "3.5'' 720k", "3.5'' 1.44M",
"3.5'' 2.88M"
 };
 
 static char *gfx_types[] = {
@@ -521,14 +521,14 @@
 	PRINT_PROC( "HD 0 type      : " );
 	type = nvram[4] >> 4;
 	if (type)
-		PRINT_PROC( " %02x\n", type == 0x0f ? nvram[11] : type );
+		PRINT_PROC( "%02x\n", type == 0x0f ? nvram[11] : type );
 	else
 		PRINT_PROC( "none\n" );
 
 	PRINT_PROC( "HD 1 type      : " );
 	type = nvram[4] & 0x0f;
 	if (type)
-		PRINT_PROC( " %02x\n", type == 0x0f ? nvram[12] : type );
+		PRINT_PROC( "%02x\n", type == 0x0f ? nvram[12] : type );
 	else
 		PRINT_PROC( "none\n" );
 
@@ -644,7 +644,7 @@
 	if (i < 0)
 		PRINT_PROC( "0x%02x (undefined)\n", nvram[1] );
 
-	PRINT_PROC( "SCSI arbitration : %s\n", (nvram[16] & 0x80) ? "on" :
"off" );
+	PRINT_PROC( "SCSI arbitration : o%s\n", (nvram[16] & 0x80) ? "n" :
"ff" );
 	PRINT_PROC( "SCSI host ID     : " );
 	if (nvram[16] & 0x80)
 		PRINT_PROC( "%d\n", nvram[16] & 7 );
diff -urN linux.vanilla/drivers/video/fbcon.c linux.dj/drivers/video/fbcon.c
--- linux.vanilla/drivers/video/fbcon.c	Fri May 14 20:49:28 1999
+++ linux.dj/drivers/video/fbcon.c	Thu Jul 29 23:10:45 1999
@@ -215,7 +215,7 @@
 
 #ifdef CONFIG_MAC
 /*
- * On the Macintoy, there may or may not be a working VBL int. We need to
prob
+ * On the Macintoy, there may or may not be a working VBL int. We need to
probe
  */
 static int vbl_detected = 0;
 
@@ -1364,6 +1364,7 @@
 	p->dispsw->clear_margins(conp, p, 0);
     if (logo_shown == -2) {
 	logo_shown = fg_console;
+	fbcon_clear(conp, 0, 0, LOGO_H, p->var.xres-LOGO_W);
 	fbcon_show_logo(); /* This is protected above by initmem_freed */
 	update_region(fg_console,
 		      conp->vc_origin + conp->vc_size_row * conp->vc_top,
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/