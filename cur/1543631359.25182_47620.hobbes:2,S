Date: Thu, 23 May 2002 00:46:23 +0200 (MEST)
From:  Andries.Brouwer@cwi ...
Subject: Re: [PATCH] 2.5.17 /dev/port
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/5/22/293

> Anybody: if you've ever used /dev/ports, holler _now_.
Holler.
In my eyes /dev/port is a rather unimportant corner
of the kernel. Removing it does not streamline anything,
we hear that it saves 454 bytes. A worthy goal, but..
Today a few things use /dev/port. Some low level mouse,
keyboard and console utilities. kbdrate. hwclock.
Is it needed? Hardly - most uses can be replaced by inb()
and outb(). But I am not sure why that would be better.
And I seem to recall that hwclock on some flavours of Alpha
really needed the /dev/port way. But I may be mistaken.
I have also seen systems that used /dev/port as
the implementation of inb() and and outb():
 outb(int p, char v) { lseek(fd,p,0); write(fd,&v,1); }
That way one could access keyboard, sound, rtc etc
while the underlying hardware was rather different from i86.
A further advantage of having /dev/port is that it allows one
to set keyboard or mouse or whatever properties from anything
that is able to access a file. But outb() or ioctl() probably
require something close to a C environment.
Probably this is what Alan is saying.
It is rather unimportant, but there are a few uses, and removing it
does not really have any positive effect. Quickly the 454 bytes
won will be lost again to the new ioctls, and to the filesystem
that Al develops to set the border colour of the monitor screen
and become a bleeding edge developer too.
Andries
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/