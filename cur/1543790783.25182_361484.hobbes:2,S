Date: Sun, 30 Oct 2005 06:24:38 -0600
From: Rob Landley <>
Subject: What's wrong with tmpfs?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/10/30/35

Under User Mode Linux in 2.6.14, would someone please explain to me why this 
test:
static int graft_tree(struct vfsmount *mnt, struct nameidata *nd)
{
        int err;
        if (mnt->mnt_sb->s_flags & MS_NOUSER)
                return -EINVAL;
Is triggering when I try to mount tmpfs?  Is this happening for anybody else?  
Shouldn't I be getting a fresh superblock or something?  (Is this just a User 
Mode Linux issue?  Haven't got a spare box set up to boot it on real hardware 
just yet...)
If somebody needs a reproduction sequence, I'm happy to oblige.  In theory 
"mount -t tmpfs /mnt /mnt" should do it, but if it was _that_ simple it 
wouldn't have shipped...
Rob
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/