Date: 16 Mar 1999 00:20:48 +0100
From: Trond Myklebust <>
Subject: Re: oops with 2.2.3
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/3/15/129

a sun <asun@saul2.u.washington.edu> writes:
> hi,
> 
> i just realized that i'm doing something that has a high likelihood to
> be the cause of my problems. i'm guessing that other 64-bit users
> aren't setting byte locks above 0x7FFFFFFF. upon perusal of
> fs/locks.c, i noticed that OFFSET_MAX is 0x7FFFFFFF no matter what the
> architecture. as a result, it's possible to create a byte lock that
> starts at 0x80000000 and ends at 0x7FFFFFFF. much unhappiness results.
> anyways, i've attached the trivial fix at the end. 
> 
The trivial fix isn't always the correct one. The value of OFFSET_MAX
may depend on the filesystem used. In particular for NFSv2, the offset
remains a 32-bit quantity whatever your architecture, and so
OFFSET_MAX wants to be 32-bit as well...
Cheers,
  Trond
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/