Date: Mon, 27 Dec 2004 18:06:35 +0100 (MET)
From: Jan Engelhardt <>
Subject: Cannot compile without sysctl (+semi-patch)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/12/27/78

Hi,
in trying to make the smallest possible kernel for an old pc's needs (read: 
386sx) disabling sysctl support (CONFIG_SYSCTL) does not work, sys_setgroups 
and sys_setgroups16 still require it. (I get a linking error.)
It's not a blocker, but it would be nice if this got wrapped up in #ifdef or 
something :-) so that either sysctl is always on or sys_setgroups behaves a 
little different.
Preferably:
include/linux/limits.h:
#ifdef __KERNEL__
extern int ngroups_max;
# define NGROUPS_MAX ngroups_max
#else
# define NGROUPS_MAX __NGROUPS_MAX
#endif
to
#if defined(__KERNEL__) && defined(CONFIG_SYSCTL)
# define NGROUPS_MAX ngroups_max
#else
# define NGROUPS_MAX __NGROUPS_MAX
#endif
Jan Engelhardt
-- 
ENOSPC
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/