Date: Mon, 13 Aug 2007 14:30:32 +0200
From: Pavel Machek <>
Subject: Re: 2.6.22 regression: thermal trip points
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/8/13/1025

Hi!
> > > > For the
> > > > upstream kernel, I think it is more appropriate to expose and fix
> > > > the fundamental problems.  For distro kernels, I'm less concerned
> > > > if you hide bugs instead of fixing them.
> > > 
> > > This is okay as long as you are willing to work around the fundamental
> > > problems in kernel. You are unable to _fix_ them. They are broken
> > > BIOSes.
> > 
> > The thing Linux needs to figure out is why Windows doesn't
> > get confused by what Linux claims to be broken BIOS.
> 
> Why do you assume that Windows work? Yes, they probably will not have
> 'machine runs at 50% speed' problem, but I'd be very surprised if
> critical shutdown  worked properly on more than 90% of notebooks....
> 
> > So far I have one live sighting to be addressed by
> > the upstream kernel (from Knut).  I'm certainly looking
> > forward to the 2nd live sighting...
> 
> Ok, I guess I should steal that old xe3 I was talking about...
Done, xe3 was re-built from parts.
/proc/acpi/.../trip_points:
critical (S5):		100 C
passive:		83 C...
active[0]:		100 C...
(hmm, active=critical? Interesting. Fortunately fan seems to be driven
by BIOS).
Temperature is ~63 C in "normal" use. Now lets simulate fan failure...
and lets load the cpu...
temperature slowly rises, 1min00 -- 72C, 1min15 -- 75C, 1min30 --
77C, 1min45 -- 80C, 1min00 -- 82C, 1min15 -- 83C, 1min45 -- sudden
powerdown, presumably because of hardware failsafe.
So we have two bugs here: machine should have attempted to use passive
cooling sooner, so that critical temperature would not be reached, and
machine should have attempted shutdown before hardware failsafe killed
the power. I could do both in 2.6.21, with echo of new trip points and
enable of polling.
									Pavel
-- 
(english) 
http://www.livejournal.com/~pavelmachek
(cesky, pictures) 
http://atrey.karlin.mff.cuni.cz/~pavel/picture/horses/blog.html
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/