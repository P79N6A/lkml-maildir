Date: Sun, 21 Jul 2002 19:29:30 +0200
From: Francois Romieu <>
Subject: Re: [PATCH] 2.4.19-rc2-ac2 pdc202xx.c update (looks strange)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/7/21/98

Greetings,
support <support@promise.com.tw> :
[...]
>     Now we are the maintainer of pdc202xx controllers. We know the
> ASIC detail spec. So please let us modify and maintain.
> We can provide best support for world wide Promise users.
+#define set_2regs(a, b) \
+        OUT_BYTE((a + adj), indexreg); \
+       OUT_BYTE(b, datareg);
+
+#define set_reg_and_wait(value, reg, delay) \
+       OUT_BYTE(value, reg); \
+        mdelay(delay);
Hmmm...
[...]
+       if (speed == XFER_UDMA_2)
+               set_2regs(thold, (IN_BYTE(datareg) & 0x7f));
Oops
[...]
+       if (new_chip) {
+               if (id->capability & 4) /* IORDY_EN & PREFETCH_EN */
+                       set_2regs(iordy, (IN_BYTE(datareg) | 0x03));
+       }
Oops
-- 
Ueimor
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/