Date: Tue, 30 Nov 1999 20:53:55 +0100 (CET)
From: Thomas Graichen <>
Subject: linux nfs client problem
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/11/30/127

before i start to describe more - i'll just make clear that i'm
not intending to start any flamewars with this here - i'm really
only interested to get this thing solved (maybe it's already
solved - and i or others simply don't know - then sorry)
ok - we here tried to get postfix running on a linux machine
partially delivering mail via .forward mechanisms into the nfs
mounted homedirectories and ran across a little problem with the
linux nfs client implementation (which other unixes seem to have
too) which is in the words of wietse venema:
--- snip ---
> Wietse Venema wrote:
> > > If the problem is that you are open()ing as one user and then
> > > write()ing as another user, and this is failing, then this problem
> > > is not limited to linux's NFS.
> >
> > Stop speaking mysteries, please. The NFS client is supposed to use
> > the credentials from open() not the credentials the process has at
> > the time of write(). This is elementary.
>
> Sorry, I wasn't intending to be mysterious.
>
> I'm not sure if this is the same problem as the one we are discussing
> here, but if you do the following:
>
>   fd = open("foo", options, mode)
>   seteuid(someone-else)
>   read_or_write(fd, ...)
>
> then this will fail on more than one NFS implementation.
Said nfs CLIENT implementations are broken.
By design, the UNIX file system checks file access permissions with
OPEN, not WRITE.
In order to implement this over NFS, client WRITE operations must
use the credentials from OPEN not not the credentials the process
has at the time of WRITE.
--- snip ---
is there any way to get this corrected in the linux nfs client
implementation (btw. FreeBSD for instance does not give the
problem we observed here) ? - more details on all this you
might find in the postfix mailinglist under the subject
  postfix problem: linux + nfs
and i'm willing to give you as many details as you like (as i
think wietse might help you too in telling you what exactly seems
to be the problem - but i think it gets clear from the mailing-
listthread)
so is this a known problem, maybe you don't think this is a
problem, is ther any solution to this ? - i'm really interested
to get this working here ... ah - and please cc me directly
to any answers because i'm not on the associated mailinglists
a lot of thanks in advance
t
-- 
graichen@innominate.de
                                                        innominate AG
                                                    networking people
fon: +49.30.308806-13 fax: -77 web: 
http://innominate.de
 pgp: /pgp/tg
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/