Date: Thu, 7 Apr 2005 19:21:35 +0100
From: Luke Kenneth Casson Leighton <>
Subject: [2.4.27 arm skyminder] writing new keyboard handler - help!
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/4/7/196

hi, please respond cc to me because i am not on the lkml.
for a new arm linux embedded device called a skyminder, i'm responsible
for getting all the drivers working.  ha ha.
the success of this device presents the linux community with
an opportunity to own a linux-based mobile phone (even if it's
not a very small phone - 8cm x 10cm x 1cm) - and it has a GPS
module in it, as well.
i'm endeavouring to adapt various bits of code to create a
keyboard driver.  they've adopted 2.4.27 and are too far down
the line to move to 2.6 - yet.
i particularly want to avoid - if i can - compiling this keyboard
driver under development into the kernel (even though it's the primary
keyboard) because downloading 600k over a serial link into flash ram
isn't a) funny b) a good idea c) slows development time down.
with that in mind, so far, i have:
- cut/paste pc_keyb.c just like everyone else has (in celps_keyb.c,
  c711x_keyb.c, dummy_keyb.c etc.) to create k_translate,
  k_unexpected_up, k_setkeycode and k_getkeycode routines.
- cut/paste usbkbd.c and adapted it to successfully call
  input_report_key on a key press and key release.
then, on installation of module input, keybdev and sky_buttons,
i happily get debug messages indicating key presses (keycode 31
indicating 's') ... but no actual key events appear down my serial
console.
so, my question is: does anyone know off the top of their heads what i
may have missed out that causes the keybdev event handler to _not_
actually stuff keys out?
am i... like... missing something really obvious, given that
the console has been set to "serial"?
where should i look to, to find the keys being outputted, if they're
going anywhere?
help, help, gloop.
cheers,
l.
-- 
--
<a href="
http://lkcl.net
">
http://lkcl.net
</a>
--
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/