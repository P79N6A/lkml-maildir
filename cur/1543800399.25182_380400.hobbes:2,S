Date: Sat, 31 Dec 2005 18:10:37 +0100
From: Mike Galbraith <>
Subject: [2.6.15-rc7-rt1] explosions in nptl mutex tests
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/12/31/103

At 05:36 PM 12/31/2005 +0100, Mike Galbraith wrote:
>As luck would have it, just as I was collecting the data, there was a 
>major explosion.  Box was slogging through glibc make check, and when it 
>hit the mutex tests in nptl, KaBOOM.  Ding-dong-dead box... [reboot] oh 
>my, seems repeatable.  Guess I'll see if I can find my serial console 
>cable instead of typing make install as originally planned :)
>
>         -Mike
Oopsen attached.  First two times it exploded on tst-mutex7, this time that 
passed, but it exploded on tst-mutex7a.
         -Mike BUG: lock wait_list not initialized?
 [d0fb80d8] {<NULL>:0}
`/-1069818495[CPU#0]: BUG in init_lists at kernel/rt.c:1213
 [<c0104063>] dump_stack+0x23/0x30 (20)
 [<c011db1a>] __WARN_ON+0x6a/0xa0 (44)
 [<c0138bc9>] __down_trylock+0x339/0x4a0 (44)
 [<c0138d78>] rt_down_read_trylock+0x28/0x40 (16)
 [<c0115ffc>] do_page_fault+0xcc/0x570 (96)
 [<c0103c7b>] error_code+0x4f/0x54 (148)
 =======================
BUG: Unable to handle kernel NULL pointer dereference at virtual address 00000030
 printing eip:
c0103f3a
*pde = 00000000
Oops: 0000 [#1]
PREEMPT 
Modules linked in: nls_iso8859_1 nls_cp437
CPU:    0
EIP:    0060:[<c0103f3a>]    Not tainted VLI
EFLAGS: 00010007   (2.6.15-rc7-rt1) 
EIP is at show_trace+0x8a/0xe0
eax: 00000ffd   ebx: cb04e070   ecx: 00000001   edx: 00000004
esi: cb04e070   edi: 00000000   ebp: cb04df00   esp: cb04deec
ds: 007b   es: 007b   ss: 0068   preempt: 00000005
Process ` (pid: -1069818495, threadinfo=cb04d000 task=d0fb8020 stack_left=3768 worst_left=-1)
Stack: c03b4873 00000094 00000082 cb04d000 cb04d000 cb04df14 c0104063 d0fb8020 
       cb04df10 cb04df20 cb04df40 c011db1a c03b9b4c d0fb81d4 c03bdd81 00000000 
       c03a9170 c03bc10e 000004bd 00000000 d0fb80d8 cb04df6c c0138bc9 c03a9170 
Call Trace:
 [<c010401f>] show_stack+0x8f/0xb0 (28)
 [<c0104211>] show_registers+0x1a1/0x210 (56)
 [<c0104426>] die+0xf6/0x190 (64)
 [<c01162c5>] do_page_fault+0x395/0x570 (96)
 [<c0103c7b>] error_code+0x4f/0x54 (80)
 [<c0104063>] dump_stack+0x23/0x30 (20)
 [<c011db1a>] __WARN_ON+0x6a/0xa0 (44)
 [<c0138bc9>] __down_trylock+0x339/0x4a0 (44)
 [<c0138d78>] rt_down_read_trylock+0x28/0x40 (16)
 [<c0115ffc>] do_page_fault+0xcc/0x570 (96)
 [<c0103c7b>] error_code+0x4f/0x54 (148)
 =======================
BUG: Unable to handle kernel NULL pointer dereference at virtual address 00000030
 printing eip:
c0103f3a
*pde = 00000000
Oops: 0000 [#2]
PREEMPT 
Modules linked in: nls_iso8859_1 nls_cp437
CPU:    0
EIP:    0060:[<c0103f3a>]    Not tainted VLI
EFLAGS: 00010007   (2.6.15-rc7-rt1) 
EIP is at show_trace+0x8a/0xe0
eax: 00000ffd   ebx: cb04e070   ecx: 00000001   edx: 00000005
esi: cb04e070   edi: 00000000   ebp: cb04ddbc   esp: cb04dda8
ds: 007b   es: 007b   ss: 0068   preempt: 00000005
Process ` (pid: -1069818495, threadinfo=cb04d000 task=d0fb8020 stack_left=3444 worst_left=-1)
Stack: c03b4873 00000094 cb04df4c 00000018 00000000 cb04ddd8 c010401f d0fb8020 
       cb04deec cb04d000 cb04deb8 00000000 cb04de10 c0104211 00000000 cb04deec 
       ffffffff cb04d000 d0fb8020 00010007 c04046a2 00000068 00000001 cb04deb8 
Call Trace:
 [<c010401f>] show_stack+0x8f/0xb0 (28)
 [<c0104211>] show_registers+0x1a1/0x210 (56)
 [<c0104426>] die+0xf6/0x190 (64)
 [<c01162c5>] do_page_fault+0x395/0x570 (96)
 [<c0103c7b>] error_code+0x4f/0x54 (80)
 [<c010401f>] show_stack+0x8f/0xb0 (28)
 [<c0104211>] show_registers+0x1a1/0x210 (56)
 [<c0104426>] die+0xf6/0x190 (64)
 [<c01162c5>] do_page_fault+0x395/0x570 (96)
 [<c0103c7b>] error_code+0x4f/0x54 (80)
 [<c0104063>] dump_stack+0x23/0x30 (20)
 [<c011db1a>] __WARN_ON+0x6a/0xa0 (44)
 [<c0138bc9>] __down_trylock+0x339/0x4a0 (44)
 [<c0138d78>] rt_down_read_trylock+0x28/0x40 (16)
 [<c0115ffc>] do_page_fault+0xcc/0x570 (96)
 [<c0103c7b>] error_code+0x4f/0x54 (148)
 =======================
BUG: Unable to handle kernel NULL pointer dereference at virtual address 00000030
 printing eip:
c0103f3a
*pde = 00000000
Recursive die() failure, output suppressed
 `/-1069818495[CPU#0]: BUG in __spin_lock at kernel/rt.c:2387
 [<c0104063>] dump_stack+0x23/0x30 (20)
 [<c011db1a>] __WARN_ON+0x6a/0xa0 (44)
 [<c03a6c80>] __lock_text_start+0x50/0x60 (28)
 [<c026f4e8>] exit_io_context+0x38/0x100 (32)
 [<c011f840>] do_exit+0x430/0x480 (44)
 [<c01044bf>] die+0x18f/0x190 (64)
 [<c01162c5>] do_page_fault+0x395/0x570 (96)
 [<c0103c7b>] error_code+0x4f/0x54 (80)
 [<c010401f>] show_stack+0x8f/0xb0 (28)
 [<c0104211>] show_registers+0x1a1/0x210 (56)
 [<c0104426>] die+0xf6/0x190 (64)
 [<c01162c5>] do_page_fault+0x395/0x570 (96)
 [<c0103c7b>] error_code+0x4f/0x54 (80)
 [<c010401f>] show_stack+0x8f/0xb0 (28)
 [<c0104211>] show_registers+0x1a1/0x210 (56)
 [<c0104426>] die+0xf6/0x190 (64)
 [<c01162c5>] do_page_fault+0x395/0x570 (96)
 [<c0103c7b>] error_code+0x4f/0x54 (80)
 [<c0104063>] dump_stack+0x23/0x30 (20)
 [<c011db1a>] __WARN_ON+0x6a/0xa0 (44)
 [<c0138bc9>] __down_trylock+0x339/0x4a0 (44)
 [<c0138d78>] rt_down_read_trylock+0x28/0x40 (16)
 [<c0115ffc>] do_page_fault+0xcc/0x570 (96)
 [<c0103c7b>] error_code+0x4f/0x54 (148)
 =======================
 (several more before box quit breathing)