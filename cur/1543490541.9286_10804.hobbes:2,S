Date: Sun, 21 Mar 1999 23:00:37 +0100
From: Ruben Schattevoy <>
Subject: kernel freeze after lockd: attempt to release unknown file!
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/3/21/93

I experienced several system freezes in the last days (SuSE 6.0, glibc,
SMP
kernel-nfs, kernel 2.2.2 and 2.2.3-ac3). Apparently these freezes happen
under
heavy NFS traffic. More precise, from the last lines found in the
message file I
conclude it might be a problem which is NFS-lockd related. I appended
the last
minute of the message file from the last three crashes. The last message
is in
any case:
kernel: lockd: attempt to release unknown file!
I must say, that this warning appears from time to time without a crash
to
happen immediately. There is another event in common: there is an
automounter
call for a directory served from a Sun (named kant). This may but need
not to be
related, because the crash was in each case right after I started a
program
which spreads over ten Linux PC's and generates a lot of processes and a
lot of
NFS traffic. These processes make heavy use of process synchronization
via
NFS-lockf. The common automounter-directory lies on the machine which
crashes.
This happened under a 2.2.2 kernel. Since I read of some lockd related
bug fixes
in Alan's 2.2.3-ac3 I installed a 2.2.3 and patched it to ac3.
Unfortunately the
problem remains.
So here are my questions: Is this a kernel related problem? Is it a
known
problem? Is there any patch available? Can I do something more to trace
down the
problem?
Right now, I run the same program with the working directory lying on a
Sun,
i.e. without using NFS-lockd to a Linux server.
Thanks,
Ruben
--- kernel 2.2.2 ---
Mar 19 14:06:19 gen100 routed[153]: packet from unknown router, 0.0.0.0
Mar 19 14:06:22 gen100 routed[153]: packet from unknown router,
192.168.10.2
Mar 19 14:06:33 gen100 automount[439]: attempting to mount entry
/gen/asp
Mar 19 14:06:33 gen100 automount[20784]: lookup(yp): looking up asp
Mar 19 14:06:33 gen100 automount[20784]: lookup(yp): asp -> kant:/asp
Mar 19 14:06:33 gen100 automount[20784]: expanded entry: kant:/asp
Mar 19 14:06:33 gen100 automount[20784]: parse(sun): core of entry:
kant:/asp
Mar 19 14:06:33 gen100 automount[20784]: mount(nfs): calling mkdir
/gen/asp
Mar 19 14:06:33 gen100 automount[20784]: mount(nfs): calling mount -t
nfs -s -o rsize=8192,wsize=8192,actimeo=0 kant:/asp /gen/asp
Mar 19 14:06:33 gen100 automount[20784]: mount(nfs): mounted kant:/asp
on /gen/asp
Mar 19 14:06:44 gen100 portmap[21952]: connect from 192.168.234.22 to
getport(nlockmgr)
Mar 19 14:06:44 gen100 portmap[21953]: connect from 127.0.0.1 to
getport(status)
Mar 19 14:06:49 gen100 routed[153]: packet from unknown router, 0.0.0.0
Mar 19 14:06:52 gen100 mountd[371]: authenticated mount request from
gen101.imb-jena.de:601
Mar 19 14:06:52 gen100 portmap[23021]: connect from 192.168.234.2 to
getport(mountd)
Mar 19 14:06:52 gen100 portmap[23022]: connect from 192.168.234.3 to
getport(mountd)
Mar 19 14:06:52 gen100 portmap[23024]: connect from 192.168.234.20 to
getport(mountd)
Mar 19 14:06:53 gen100 portmap[23067]: connect from 192.168.234.2 to
getport(nfs)
Mar 19 14:06:53 gen100 routed[153]: packet from unknown router,
192.168.10.2
Mar 19 14:06:53 gen100 mountd[371]: authenticated mount request from
gen102.imb-jena.de:784
Mar 19 14:06:54 gen100 portmap[23139]: connect from 192.168.234.3 to
getport(nfs)
Mar 19 14:06:54 gen100 mountd[371]: authenticated mount request from
gen108.imb-jena.de:732
Mar 19 14:06:54 gen100 portmap[23175]: connect from 192.168.234.20 to
getport(nfs)
Mar 19 14:07:00 gen100 portmap[23684]: connect from 192.168.234.18 to
getport(nlockmgr)
Mar 19 14:07:00 gen100 portmap[23686]: connect from 192.168.234.19 to
getport(nlockmgr)
Mar 19 14:07:00 gen100 kernel: lockd: attempt to release unknown file!
Mar 19 14:07:00 gen100 portmap[23687]: connect from 127.0.0.1 to
getport(status)
Mar 19 14:07:00 gen100 portmap[23689]: connect from 127.0.0.1 to
getport(status)
Mar 19 14:07:00 gen100 kernel: lockd: attempt to release unknown file!
Mar 19 14:07:01 gen100 last message repeated 3 times
Mar 19 14:07:01 gen100 portmap[23720]: connect from 192.168.234.2 to
getport(nlockmgr)
Mar 19 14:07:01 gen100 kernel: lockd: attempt to release unknown file!
Mar 19 14:07:01 gen100 portmap[23722]: connect from 127.0.0.1 to
getport(status)
Mar 19 16:33:06 gen100 syslogd 1.3-3: restart.
--- kernel 2.2.2 ---
Mar 19 20:40:58 gen100 modprobe: can't locate module binfmt-464c
Mar 19 20:40:58 gen100 modprobe: can't locate module binfmt-464c
Mar 19 20:41:09 gen100 routed[191]: packet from unknown router,
192.168.10.2
Mar 19 20:41:11 gen100 routed[191]: packet from unknown router, 0.0.0.0
Mar 19 20:41:29 gen100 automount[534]: attempting to mount entry
/gen/asp
Mar 19 20:41:29 gen100 automount[963]: lookup(yp): looking up asp
Mar 19 20:41:29 gen100 automount[963]: lookup(yp): asp -> kant:/asp
Mar 19 20:41:29 gen100 automount[963]: expanded entry: kant:/asp
Mar 19 20:41:29 gen100 automount[963]: parse(sun): core of entry:
kant:/asp
Mar 19 20:41:29 gen100 automount[963]: mount(nfs): calling mkdir
/gen/asp
Mar 19 20:41:29 gen100 automount[963]: mount(nfs): calling mount -t nfs
-s -o rsize=8192,wsize=8192,actimeo=0 kant:/asp /gen/asp
Mar 19 20:41:29 gen100 automount[963]: mount(nfs): mounted kant:/asp on
/gen/asp
Mar 19 20:41:37 gen100 portmap[1032]: connect from 192.168.234.22 to
getport(nlockmgr)
Mar 19 20:41:37 gen100 portmap[1033]: connect from 127.0.0.1 to
getport(status)
Mar 19 20:41:40 gen100 routed[191]: packet from unknown router,
192.168.10.2
Mar 19 20:41:41 gen100 routed[191]: packet from unknown router, 0.0.0.0
Mar 19 20:42:04 gen100 portmap[1044]: connect from 192.168.234.4 to
getport(nlockmgr)
Mar 19 20:42:05 gen100 portmap[1049]: connect from 192.168.234.18 to
getport(nlockmgr)
Mar 19 20:42:05 gen100 portmap[1050]: connect from 127.0.0.1 to
getport(status)
Mar 19 20:42:07 gen100 kernel: lockd: attempt to release unknown file!
Mar 19 20:42:07 gen100 portmap[1052]: connect from 127.0.0.1 to
getport(status)
Mar 19 20:42:07 gen100 kernel: lockd: attempt to release unknown file!
Mar 19 20:42:07 gen100 portmap[1051]: connect from 192.168.234.19 to
getport(nlockmgr)
Mar 19 20:42:07 gen100 kernel: lockd: attempt to release unknown file!
Mar 19 20:42:07 gen100 last message repeated 7 times
Mar 19 20:42:07 gen100 portmap[1053]: connect from 192.168.234.5 to
getport(nlockmgr)
Mar 19 20:42:08 gen100 portmap[1054]: connect from 127.0.0.1 to
getport(status)
Mar 19 20:42:08 gen100 portmap[1055]: connect from 192.168.234.6 to
getport(nlockmgr)
Mar 19 20:42:08 gen100 kernel: lockd: attempt to release unknown file!
Mar 19 20:42:08 gen100 portmap[1056]: connect from 127.0.0.1 to
getport(status)
Mar 20 07:38:31 gen100 syslogd 1.3-3: restart.
--- kernel 2.2.3-ac3 ---
Mar 21 20:06:15 gen100 automount[432]: attempting to mount entry
/gen/asp
Mar 21 20:06:15 gen100 automount[10759]: lookup(yp): looking up asp
Mar 21 20:06:15 gen100 automount[10759]: lookup(yp): asp -> kant:/asp
Mar 21 20:06:15 gen100 automount[10759]: expanded entry: kant:/asp
Mar 21 20:06:15 gen100 automount[10759]: parse(sun): core of entry:
kant:/asp
Mar 21 20:06:15 gen100 automount[10759]: mount(nfs): calling mkdir
/gen/asp
Mar 21 20:06:15 gen100 automount[10759]: mount(nfs): calling mount -t
nfs -s -o rsize=8192,wsize=8192,actimeo=0 kant:/asp /gen/asp
Mar 21 20:06:15 gen100 automount[10759]: mount(nfs): mounted kant:/asp
on /gen/asp
Mar 21 20:06:21 gen100 portmap[10829]: connect from 192.168.234.22 to
getport(nlockmgr)
Mar 21 20:06:21 gen100 portmap[10830]: connect from 127.0.0.1 to
getport(status)
Mar 21 20:06:22 gen100 routed[154]: packet from unknown router,
192.168.10.2
Mar 21 20:06:27 gen100 portmap[10834]: connect from 192.168.234.6 to
getport(mountd)
Mar 21 20:06:27 gen100 mountd[366]: authenticated unmount request from
gen105.imb-jena.de:661
Mar 21 20:06:35 gen100 routed[154]: packet from unknown router, 0.0.0.0
Mar 21 20:06:41 gen100 portmap[10838]: connect from 192.168.234.6 to
getport(mountd)
Mar 21 20:06:41 gen100 kernel: svc: unknown version (3)
Mar 21 20:06:41 gen100 kernel: svc: unknown version (3)
Mar 21 20:06:41 gen100 portmap[10839]: connect from 193.174.234.70 to
getport(nfs)
Mar 21 20:06:41 gen100 mountd[366]: authenticated mount request from
gen105.imb-jena.de:664
Mar 21 20:06:41 gen100 portmap[10840]: connect from 193.174.234.70 to
getport(mountd)
Mar 21 20:06:41 gen100 portmap[10841]: connect from 193.174.234.69 to
getport(nfs)
Mar 21 20:06:41 gen100 portmap[10842]: connect from 193.174.234.69 to
getport(mountd)
Mar 21 20:06:42 gen100 portmap[10843]: connect from 192.168.234.6 to
getport(nfs)
Mar 21 20:06:42 gen100 portmap[10844]: connect from 193.174.234.196 to
getport(nfs)
Mar 21 20:06:42 gen100 kernel: svc: unknown version (3)
Mar 21 20:06:42 gen100 mountd[366]: authenticated mount request from
sarton.imb-jena.de:805
Mar 21 20:06:42 gen100 portmap[10845]: connect from 193.174.234.196 to
getport(mountd)
Mar 21 20:06:42 gen100 portmap[10846]: connect from 193.174.234.70 to
getport(nfs)
Mar 21 20:06:42 gen100 mountd[366]: authenticated mount request from
kant.imb-jena.de:790
Mar 21 20:06:42 gen100 portmap[10847]: connect from 193.174.234.70 to
getport(nfs)
Mar 21 20:06:42 gen100 portmap[10848]: connect from 193.174.234.70 to
getport(nlockmgr)
Mar 21 20:06:42 gen100 kernel: svc: unknown program 100227 (me 100003)
Mar 21 20:06:42 gen100 portmap[10849]: connect from 193.174.234.69 to
getport(nfs)
Mar 21 20:06:42 gen100 mountd[366]: authenticated mount request from
quine.imb-jena.de:783
Mar 21 20:06:42 gen100 portmap[10850]: connect from 193.174.234.69 to
getport(nfs)
Mar 21 20:06:42 gen100 portmap[10851]: connect from 193.174.234.69 to
getport(nlockmgr)
Mar 21 20:06:42 gen100 kernel: svc: unknown program 100227 (me 100003)
Mar 21 20:06:42 gen100 portmap[10852]: connect from 192.168.234.20 to
getport(mountd)
Mar 21 20:06:43 gen100 portmap[10853]: connect from 193.174.234.196 to
getport(nfs)
Mar 21 20:06:43 gen100 portmap[10854]: connect from 193.174.234.196 to
getport(nfs)
Mar 21 20:06:43 gen100 portmap[10855]: connect from 193.174.234.196 to
getport(nlockmgr)
Mar 21 20:06:43 gen100 kernel: svc: unknown program 100227 (me 100003)
Mar 21 20:06:43 gen100 mountd[366]: authenticated mount request from
gen108.imb-jena.de:825
Mar 21 20:06:43 gen100 portmap[10858]: connect from 192.168.234.20 to
getport(nfs)
Mar 21 20:06:46 gen100 portmap[10890]: connect from 192.168.234.21 to
getport(nlockmgr)
Mar 21 20:06:46 gen100 portmap[10891]: connect from 127.0.0.1 to
getport(status)
Mar 21 20:06:47 gen100 kernel: nfsd_create: dentry 07/15 not negative!
Mar 21 20:06:47 gen100 portmap[10914]: connect from 127.0.0.1 to
getport(status)
Mar 21 20:06:47 gen100 portmap[10913]: connect from 192.168.234.19 to
getport(nlockmgr)
Mar 21 20:06:49 gen100 portmap[10968]: connect from 127.0.0.1 to
getport(status)
Mar 21 20:06:49 gen100 portmap[10967]: connect from 192.168.234.18 to
getport(nlockmgr)
Mar 21 20:06:50 gen100 portmap[10993]: connect from 192.168.234.4 to
getport(nlockmgr)
Mar 21 20:06:50 gen100 portmap[10994]: connect from 127.0.0.1 to
getport(status)
Mar 21 20:06:50 gen100 portmap[10997]: connect from 192.168.234.6 to
getport(nlockmgr)
Mar 21 20:06:50 gen100 kernel: lockd: attempt to release unknown file!
Mar 21 20:06:50 gen100 kernel: lockd: attempt to release unknown file!
Mar 21 20:06:50 gen100 portmap[10998]: connect from 127.0.0.1 to
getport(status)
Mar 21 20:06:50 gen100 kernel: lockd: attempt to release unknown file!
Mar 21 20:27:46 gen100 syslogd 1.3-3: restart.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/