Date: Thu, 7 Jun 2007 09:05:49 -0700
From: "Paul E. McKenney" <>
Subject: [PATCH] Document the fact that RCU callbacks can run in parallel
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/6/7/250

Add an item to the RCU documentation checklist noting that RCU callbacks
can run in parallel.
Signed-off-by: Paul E. McKenney <paulmck@linux.vnet.ibm.com>
---
 checklist.txt |   10 +++++++++-
 1 file changed, 9 insertions(+), 1 deletion(-)
diff -urpNa -X dontdiff linux-2.6.21/Documentation/RCU/checklist.txt linux-2.6.21-RCUdoc/Documentation/RCU/checklist.txt
--- linux-2.6.21/Documentation/RCU/checklist.txt	2007-04-25 20:08:32.000000000 -0700
+++ linux-2.6.21-RCUdoc/Documentation/RCU/checklist.txt	2007-06-07 08:58:52.000000000 -0700
@@ -222,7 +222,15 @@ over a rather long period of time, but i
 	deadlock as soon as the RCU callback happens to interrupt that
 	acquisition's critical section.
 
-13.	SRCU (srcu_read_lock(), srcu_read_unlock(), and synchronize_srcu())
+13.	RCU callbacks can be and are executed in parallel.  In many cases,
+	the callback code simply wrappers around kfree(), so that this
+	is not an issue (or, more accurately, to the extent that it is
+	an issue, the memory-allocator locking handles it).  However,
+	if the callbacks do manipulate a shared data structure, they
+	must use whatever locking or other synchronization is required
+	to safely access and/or modify that data structure.
+
+14.	SRCU (srcu_read_lock(), srcu_read_unlock(), and synchronize_srcu())
 	may only be invoked from process context.  Unlike other forms of
 	RCU, it -is- permissible to block in an SRCU read-side critical
 	section (demarked by srcu_read_lock() and srcu_read_unlock()),
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/