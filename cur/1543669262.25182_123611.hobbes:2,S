Date: Tue, 8 Apr 2003 20:38:24 +0400
From: Ivan Kokshaysky <>
Subject: Re: [PATCH] [3/3] PCI segment support
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/4/8/118

On Tue, Apr 08, 2003 at 12:44:11AM +0100, Matthew Wilcox wrote:
>  - Add segment to pci_bus.
>  - Change the sysfs name of each device to include a 16-bit segment ID.
First of all, the "segment" name is extremely misleading. PCI spec
assumes everywhere that "segment" is a group of devices sitting
on the same wires (ie primary and secondary buses of the PCI-to-PCI
bridge are *different* segments).
Let's call it "configuration space domain" instead.
Second, why not
-	strcpy(dev->dev.bus_id,dev->slot_name);
+	sprintf(dev->dev.bus_id, "%04x:%s", pci_controller_num(dev),
+		dev->slot_name);
?
Ivan.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/