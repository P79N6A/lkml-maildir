Date: Tue, 7 Jan 2003 23:21:08 +0100
From: Robert Olsson <>
Subject: Re: NAPI and tg3
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/1/7/211

Steffen Persvold writes:
 > True, but it doesn't say that if you have two applications loaded on 
 > a SMP box, one which is for example constantly receiving and sending data 
 > from/to the network and doing computations on the data (100 % CPU) while 
 > some other app is only doing computations (also 100 % CPU), the ksoftirqd 
 > which should receive packets and refill the TX and RX rings will be put 
 > last in the queue because of its low nice level (19), thus the network 
 > dependent application has very much lower performance than what could be 
 > achieved with a nice level of 0 or even running the interrupt based 
 > mechanism. A nice level of 0 on ksoftirqd is still a heck of a lot better 
 > than interrupt context isn't it ?
 Yes my scripts test/production has even been setting -19 to ksoftirq just
 for that reason so I almost forgot this issue so I'm happy you brought
 this up. But dev->poll is not the only user of ksoftirq but for heavy
 networking it's gets pretty dominant. So we add something to NAPI_HOWTO 
 and pass the question about ksoftirq default priority to others.
From a GIGE router in production.
USER       PID %CPU %MEM  SIZE   RSS TTY STAT START   TIME COMMAND
root         3  0.2  0.0     0     0  ?  RWN Aug 15 602:00 (ksoftirqd_CPU0)
root       232  0.0  7.9 41400 40884  ?  S   Aug 15  74:12 gated 
Cheers.
						--ro
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/