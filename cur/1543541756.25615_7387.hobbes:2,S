Date: 14 Aug 2000 10:34:54 -0700
From: Philippe Troin <>
Subject: Re: Linux 2.2.17pre16 problems with audio CD on SCSI
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/8/14/120

Jens Axboe <axboe@suse.de> writes:
> On Mon, Aug 14 2000, Philippe Troin wrote:
> > Jens Axboe <axboe@suse.de> writes:
> > > Any chance you could send me those error messages?
> > 
> > Well just a plain SCSI bus reset. Here is a sample:
> 
> Ok, thanks anyway.
> 
> >     kernel: sr1: CDROM not ready yet.
> >     last message repeated 3 times
> 
> The drive acts very confused.
Yup !
> > The wierd thing is that so far, only quake and quake2 have trouble
> > playing CDs (with the uniform cd-rom driver 3.11). All other programs
> > have no trouble at all.
> 
> Could you strace quake and find out what it is sending to the drive?
Fairly standard stuff, AFAIK. This is what I filtered out from the
strace output. The complete strace output is enclosed.
  open("/dev/cdrom", O_RDONLY)      = 10
  ioctl(10, CDROMREADTOCHDR, 0xbffff8d2) = 0
  ioctl(10, CDROMREADTOCENTRY, 0xbffff808) = 0
  ioctl(10, CDROMPLAYTRKIND, 0xbffff7f4) = 0
  ioctl(10, CDROMRESUME, 0xbffff7f4) = 0
  ioctl(10, CDROMPAUSE, 0x2)        = 0
  ioctl(10, CDROMRESUME, 0xbffff96c) = 0
  ioctl(10, CDROMSUBCHNL, 0xbffff894) = 0
  ioctl(10, CDROMSUBCHNL, 0xbffff894) = 0
  ioctl(10, CDROMSTOP, 0xbffff96c)  = 0
If you've got some suggestions, I can do some experiments with this box.
Phil.
[unhandled content-type:application/octet-stream]