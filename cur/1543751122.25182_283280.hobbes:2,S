Date: Wed, 5 Jan 2005 14:37:42 +0100
From: Heiko Carstens <>
Subject: [PATCH] s390: add missing pte_read function
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/1/5/83

Hi Andrew,
this patch adds the missing pte_read function and makes s390 compile again.
Thanks,
Heiko
Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
diff -urN linux-2.6/include/asm-s390/pgtable.h linux-2.6-patched/include/asm-s390/pgtable.h
--- linux-2.6/include/asm-s390/pgtable.h	2005-01-05 11:46:12.000000000 +0100
+++ linux-2.6-patched/include/asm-s390/pgtable.h	2005-01-05 14:31:14.000000000 +0100
@@ -418,6 +418,14 @@
 	return 0;
 }
 
+extern inline int pte_read(pte_t pte)
+{
+	/* All pages are readable since we don't use the fetch
+	 * protection bit in the storage key.
+	 */
+	return 1;
+}
+
 /*
  * pgd/pmd/pte modification functions
  */
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/