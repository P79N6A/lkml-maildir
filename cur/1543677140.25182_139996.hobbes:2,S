Date: Thu, 12 Jun 2003 11:10:05 -0700
From: Andrew Morton <>
Subject: Re: ext[23]/lilo/2.5.{68,69,70} -- blkdev_put() problem?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/6/12/188

Andy Pfiffer <andyp@osdl.org> wrote:
>
> On Thu, 2003-06-12 at 10:53, Andrew Morton wrote:
> > Andy Pfiffer <andyp@osdl.org> wrote:
> > >
> > > Dirty:               0 kB	Dirty:               4 kB <---
> > 
> > OK.  And are you using initrd as well?
> 
> It is specified in lilo.conf (SuSE 8.0 distro) but I don't see any
> reason to keep it.  I'll yank it and see if it makes a difference.
> 
That would be interesting.
Also, what about this shot in the dark?
--- 25/fs/fs-writeback.c~a	2003-06-12 11:08:34.000000000 -0700
+++ 25-akpm/fs/fs-writeback.c	2003-06-12 11:08:39.000000000 -0700
@@ -368,7 +368,7 @@ void sync_inodes_sb(struct super_block *
 	};
 
 	get_page_state(&ps);
-	wbc.nr_to_write = ps.nr_dirty + ps.nr_unstable +
+	wbc.nr_to_write = ps.nr_dirty + ps.nr_unstable + 1024 +
 		(ps.nr_dirty + ps.nr_unstable) / 4;
 	spin_lock(&inode_lock);
 	sync_sb_inodes(sb, &wbc);
_
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/