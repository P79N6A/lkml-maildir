Date: Thu, 24 Feb 2000 16:13:16 -0500
From: Scott Lampert <>
Subject: [PATCH] Netgear FA310TX
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/2/24/172

        I'm not sure who is supposed to get this or if I'm duplicating
effort, but I just installed a new Netgear FA310TX 10/100 card with a
revision -D2 board and I had to modify the tulip driver to recognize it.
Its basically a Lite-On board with a different PCI vendor ID as far as I
can tell.  This was a 3 minute job so the driver will report any Lite-On
card as a Netgear FA310TX with this patch because I just made the
enumerations equal, but the vendor ID is there for the maintainer to fix
it up so that it says the right thing for the right card if they like.
I just needed this to work fast.
        It has a NGMC169 instead of the LC82C168 that the Lite-On in the
tulip driver seems to have, but referencing the 2.0.x driver that comes
with the Netgear card it seems to be coded to use the same code so I 
left well enough alone. ;)  Especially since its probably out of my
league to mess with it.
        Of note, the docs in the Netgear driver mention that the
unmodified tulip 0.89 driver turns on store-and-forward and that their
driver modifications turn it off for performance.  Does the current
2.3.x tulip.c driver have it on by default as well?
        The attached patch is against 2.3.46.
                -Scott
-- 
Scott Lampert              | Home Page: 
http://www.lampert.org
<fortunato@heavymetal.org> | PGP Key: finger fortunato@heavymetal.org
"Singe the Hare Hare,      +-----------------------------------------
   dance the Hoochie Koo!"
--- /usr/src/linux/drivers/net/tulip.c.orig	Thu Feb 24 15:14:16 2000
+++ tulip.c	Thu Feb 24 15:53:42 2000
@@ -277,6 +277,8 @@
   { "Digital DS21143 Tulip", 128, 0x0801fbff,
 	HAS_MII | HAS_MEDIA_TABLE | ALWAYS_CHECK_MII | HAS_PWRDWN | HAS_NWAY143,
 	t21142_timer },
+  { "NETGEAR NGMC169 MAC", 256, 0x0001ebef,
+	HAS_MII | HAS_PNICNWAY, pnic_timer },
   { "Lite-On 82c168 PNIC", 256, 0x0001ebef,
 	HAS_MII | HAS_PNICNWAY, pnic_timer },
   { "Macronix 98713 PMAC", 128, 0x0001ebef,
@@ -307,7 +309,7 @@
 	DC21041=1,
 	DC21140=2,
 	DC21142=3, DC21143=3,
-	LC82C168,
+	NGMC169=4, LC82C168=4,
 	MX98713,
 	MX98715,
 	MX98725,
@@ -326,6 +328,7 @@
 	{ 0x1011, 0x0009, PCI_ANY_ID, PCI_ANY_ID, 0, 0, DC21140 },
 	{ 0x1011, 0x0019, PCI_ANY_ID, PCI_ANY_ID, 0, 0, DC21143 },
 	{ 0x11AD, 0x0002, PCI_ANY_ID, PCI_ANY_ID, 0, 0, LC82C168 },
+	{ 0x1385, 0xf004, PCI_ANY_ID, PCI_ANY_ID, 0, 0, NGMC169 },
 	{ 0x10d9, 0x0512, PCI_ANY_ID, PCI_ANY_ID, 0, 0, MX98713 },
 	{ 0x10d9, 0x0531, PCI_ANY_ID, PCI_ANY_ID, 0, 0, MX98715 },
 	{ 0x10d9, 0x0531, PCI_ANY_ID, PCI_ANY_ID, 0, 0, MX98725 },