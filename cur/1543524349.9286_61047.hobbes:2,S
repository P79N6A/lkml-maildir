Date: Tue, 1 Feb 2000 16:11:14 +0100
From: Pavel Machek <>
Subject: Re: Cancel APM events from userspace ?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/2/1/100

Hi!
> ( kernel 2.2.14 )
> 
> I noticed that user-space APM clients ( receivers of APM events ),
> usually apmd, can not cancel a pending standby or suspend request.
> This would be usefull in some cases and the in-kernel clients
> ( apm.c/send_event() ) can do it.
It is supported with 2.3.X.
								Pavel
> What I want to do is to start a script ( by apmd ) when the power button
> is pressed ( it sends a an APM_USER_SUSPEND event to the OS and when
> the OS acknowledges it , the system goes into suspend ), which then executes
> "shutdown -r|-h now" and signals apmd to reject the suspend mode
> ( maybe like "exit 1" -> cancel the event ; "exit 0" -> execute
> event ).
I have got this implemented and it works pretty well.
								Pavel
-- 
The best software in life is free (not shareware)!		Pavel
GCM d? s-: !g p?:+ au- a--@ w+ v- C++@ UL+++ L++ N++ E++ W--- M- Y- R+
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/