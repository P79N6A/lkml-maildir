Date: Sat, 24 Jan 2009 09:12:39 -0600
From: Clark Williams <>
Subject: Re: serial8250 madness
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2009/1/24/56

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1
On Fri, 23 Jan 2009 18:00:33 +0000
Alan Cox <alan@lxorguk.ukuu.org.uk> wrote:
> 
> The big outstanding bug I know about is the incompatibility between the
> PnP 8250 drivers and serial console - that may be your machine C case.
> That one is rather hard to fix so on the long rather than short term hit
> list.
> 
> Alan
I spend a few days trying to figure out a panic in the uart driver that
turned out to be this issue. Would it make sense to add the following?
diff --git a/drivers/serial/Kconfig b/drivers/serial/Kconfig
index 579d63a..35acc6b 100644
- --- a/drivers/serial/Kconfig
+++ b/drivers/serial/Kconfig
@@ -91,7 +91,7 @@ config SERIAL_8250_PCI
 
 config SERIAL_8250_PNP
        tristate "8250/16550 PNP device support" if EMBEDDED
- -       depends on SERIAL_8250 && PNP
+       depends on SERIAL_8250 && PNP && ! SERIAL_8250_CONSOLE
        default SERIAL_8250
        help
          This builds standard PNP serial support. You may be able to
Clark
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2.0.10 (GNU/Linux)
iEYEARECAAYFAkl7L/MACgkQHyuj/+TTEp21NACgpQI89LMX5ZtJbVlMcpa9A/I0
6JkAoIa5Nwt4mvm6UJGzGkoUGKOCzn5V
=YUtB
-----END PGP SIGNATURE-----