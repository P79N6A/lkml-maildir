Date: Tue, 14 Dec 1999 17:33:28 GMT
From: Christian Lademann <>
Subject: iBCS crashes 2.2.13 - 2.2.14pre12
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/12/14/114

I have a major problem running SCO binaries under the current 2.2.X 
kernels.
It seems to be somehow related to file- or filedescriptor-management.
The programs run often, but not always. The first kernel-message that 
tells me
that I'm going to have trouble is »get_unused_fd: slot 7 not NULL« 
with different
slotnumbers.
Shortly afterwards the kernel crashes with a trace like this:
ksymoops 0.7c on i686 2.2.14pre12.  Options used
     -V (default)
     -k /proc/ksyms (default)
     -l /proc/modules (default)
     -o /lib/modules/2.2.14pre12/ (default)
     -m /System.map (default)
Warning: You did not tell me where to find symbol information.  I will
assume that the log matches the kernel and modules that are running
right now and I'll use the default options above for symbol 
resolution.
If the current kernel and/or modules do not match the log, you can get
more accurate output by telling me the kernel version and where to 
find
map, modules, ksyms etc.  ksymoops -h explains the options.
Unable to handle kernel paging request at virtual address cbfffdfc
current->tss.cr3 = 08103000, %cr3 = 08103000
*pde = 00000000
Oops: 0002
CPU:    0
EIP:    0010:[<c0129f80>]
Using defaults from ksymoops -t elf32-i386 -a i386
EFLAGS: 00010297
eax: cbfffdfc   ebx: c80a0000   ecx: 00000016   edx: c81a5560
esi: c879ce40   edi: fffffff7   ebp: 40000001   esp: c80a1f48
ds: 0018   es: 0018   ss: 0018
Process rts32 (pid: 900, process nr: 35, stackpage=c80a1000)
Stack: c0129f18 00000035 c83edf40 0045e4e4 c8101178 ca04e300 00000016 
40000000 
       00000000 ca04e1c7 c80a0000 0045d338 00000000 bfffecac 00003ebd 
c0129f18 
       ca067a14 00000001 00000016 40000000 00000000 bfffeac1 c010ca09 
00000000 
Call Trace: [<c0129f18>] [<ca04e300>] [<ca04e1c7>] [<c0129f18>] 
[<ca067a14>] [<c010ca09>] [<c010ca20>] 
       [<c010a43d>] [<c010a29e>] 
Code: 0f b3 08 83 c4 f8 52 56 e8 1f ff ff ff 89 c7 83 c4 10 b8 00 
>>EIP; c0129f80 <sys_close+68/98>   <=====
Trace; c0129f18 <sys_close+0/98>
Trace; ca04e300 <[iBCS]iABI_emulate+2b0/4e0>
Trace; ca04e1c7 <[iBCS]iABI_emulate+177/4e0>
Trace; c0129f18 <sys_close+0/98>
Trace; ca067a14 <[iBCS]iBCS_func_0x00+60/80>
Trace; c010ca09 <do_IRQ+3d/58>
Trace; c010ca20 <do_IRQ+54/58>
Trace; c010a43d <error_code+2d/40>
Trace; c010a29e <lcall7+3e/50>
Code;  c0129f80 <sys_close+68/98>
00000000 <_EIP>:
Code;  c0129f80 <sys_close+68/98>   <=====
   0:   0f b3 08                  btrl   %ecx,(%eax)   <=====
Code;  c0129f83 <sys_close+6b/98>
   3:   83 c4 f8                  addl   $0xfffffff8,%esp
Code;  c0129f86 <sys_close+6e/98>
   6:   52                        pushl  %edx
Code;  c0129f87 <sys_close+6f/98>
   7:   56                        pushl  %esi
Code;  c0129f88 <sys_close+70/98>
   8:   e8 1f ff ff ff            call   ffffff2c <_EIP+0xffffff2c> 
c0129eac <filp_close+0/6c>
Code;  c0129f8d <sys_close+75/98>
   d:   89 c7                     movl   %eax,%edi
Code;  c0129f8f <sys_close+77/98>
   f:   83 c4 10                  addl   $0x10,%esp
Code;  c0129f92 <sys_close+7a/98>
  12:   b8 00 00 00 00            movl   $0x0,%eax
I use iBCS version 980511.
Back on 2.0.38 everything works fine.
Any help welcome.
Christian Lademann <cal@zls.de>
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/