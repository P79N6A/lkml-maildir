Date: Wed, 28 Nov 2001 23:12:22 -0500 (EST)
From: Alexander Viro <>
Subject: Re: fsync02 test hangs 2.5.1-pre3 + patch
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/11/28/234

On Wed, 28 Nov 2001 rwhron@earthlink.net wrote:
> On Wed, Nov 28, 2001 at 09:32:43PM -0500, Alexander Viro wrote:
> > Umm...  With which patch?  Sorry for being dense, but I see no patches
> 
> Oops.
> 
> [PATCH] fix for drivers/char/pc_keyb.c in 2.5.1-pre3
> 
> 2.5.1-pre3 would not compile without Alan's patch for pc_keyb.c, etc.
> 
> I also noticed the logfile LTP "runalltests" was writing to has binary 
> data and snippets of kernel code in it.  (Normally it would all be text).
> 
> This was on a reiserfs system, btw.
Interesting...  I see two candidates in -pre3 - either fs/super.c cleanups
are fscked and something leaves superblock or superblock list locked
(either would have such effect, but that would have to happen at mount
or umount time and thing would lock up much earlier) or bio.c+ll_rw_blk.c+...
changes are acting up.
Obvious tests:
	a) 2.5.1-pre2
	b) 2.5.1-pre2 + fs/super.c from 2.5.1-pre3
	c) 2.5.1-pre3 + fs/super.c from 2.5.1-pre2
(fs/super.c changes are independent from everything else).
Another possibility is silent fs corruption from 2.5.0/2.4.15 - if you
ran these kernels you really ought to do fsck -f (or whatever is used
to force recovery of reiserfs).
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/