Date: Sat, 29 Jan 2005 09:08:14 +0100
From: Andi Kleen <>
Subject: Re: [PATCH] relayfs redux, part 2
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/1/29/19

Tom Zanussi <zanussi@us.ibm.com> writes:
> Hi,
>
> This patch is the result of the latest round of liposuction on relayfs
> - the patch size is now 44K, down from 110K and the 200K before that.
> I'm posting it as a patch against 2.6.10 rather than -mm in order to
> make it easier to review, but will create one for -mm once the changes
> have settled down.
The logging fast path seems still a bit slow to me. I would like
to have a logging macro that is not much worse than a stdio putc,
basically something like
          get_cpu();
          if (buffer space > N) { 
              memcpy(buffer, input, N);
              buffer pointer += N;
          } else { 
              FreeBuffer(input, N); 
          }    
          put_cpu();
This would need interrupt protection only if interrupts can access
it, best you use separate buffers for that too.
-Andi
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/