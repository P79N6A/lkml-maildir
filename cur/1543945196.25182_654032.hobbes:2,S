Date: Fri, 15 Feb 2008 10:54:44 +0530
From: "Thomas, Sujith" <>
Subject: [patch 5/6] ACPI video: check for error in thermal_cooling_device_register call
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/2/15/10

From: Thomas Sujith <sujith.thomas@intel.com>
Need to check whetherthermal_cooling_device_register
returned ERROR or not.
Signed-off-by: Thomas Sujith <sujith.thomas@intel.com>
---
 drivers/acpi/video.c |    3 +++
 1 files changed, 3 insertions(+)
Index: linux-2.6.24/drivers/acpi/video.c
===================================================================
--- linux-2.6.24.orig/drivers/acpi/video.c
+++ linux-2.6.24/drivers/acpi/video.c
@@ -731,6 +731,9 @@ static void acpi_video_device_find_cap(s
 
 		device->cdev = thermal_cooling_device_register("LCD",
 					device->dev,
&video_cooling_ops);
+		if (IS_ERR(device->cdev))
+			return;
+
 		if (device->cdev) {
 			printk(KERN_INFO PREFIX
 				"%s is registered as
cooling_device%d\n",[unhandled content-type:application/octet-stream]