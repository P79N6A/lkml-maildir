Date: Tue, 15 Aug 2006 19:29:57 +0200
From: Blaisorblade <>
Subject: Re: CONFIG_NETDEVICES does not do anything
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/8/15/207

On Sunday 13 August 2006 21:27, Sam Ravnborg wrote:
> On Thu, Aug 10, 2006 at 08:34:30AM +0200, Jan Engelhardt wrote:
> > Hello,
> >
> >
> > when deselecting CONFIG_NETDEVICES, many selectable items (PHY device
> > support, Ethernet 10/100/1000/10000) stay in place. Is there a reason
> > they are lacking 'depends on NETDEVICES' or did I found a bug^W glitch?
>
> It was changed by appended commit.
> I do not see why the if/endif was removed - Paolo?
I did not consider the "enable NET disable NETDEVICES" case, I was too much in 
a hurry. Sorry for that.
> diff --git a/drivers/net/Kconfig b/drivers/net/Kconfig
> index 6a6a084..47c72a6 100644
> --- a/drivers/net/Kconfig
> +++ b/drivers/net/Kconfig
> @@ -4,9 +4,9 @@ # Network device configuration
>  #
>
>  menu "Network device support"
> +	depends on NET
>
>  config NETDEVICES
> -	depends on NET
>  	default y if UML
>  	bool "Network device support"
>  	---help---
This hunk can be left, it's just the below ones which needs to be reversed.
> @@ -24,9 +24,6 @@ config NETDEVICES
>
>  	  If unsure, say Y.
>
> -# All the following symbols are dependent on NETDEVICES - do not repeat
> -# that for each of the symbols.
> -if NETDEVICES
>
>  config IFB
>  	tristate "Intermediate Functional Block support"
> @@ -2718,8 +2715,6 @@ config NETCONSOLE
>  	If you want to log kernel messages over the network, enable this.
>  	See <file:Documentation/networking/netconsole.txt> for details.
>
> -endif #NETDEVICES
> -
>  config NETPOLL
>  	def_bool NETCONSOLE
-- 
Inform me of my mistakes, so I can keep imitating Homer Simpson's "Doh!".
Paolo Giarrusso, aka Blaisorblade
http://www.user-mode-linux.org/~blaisorblade
Chiacchiera con i tuoi amici in tempo reale! 
http://it.yahoo.com/mail_it/foot/
*
http://it.messenger.yahoo.com
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/