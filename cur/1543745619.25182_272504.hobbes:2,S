Date: Fri, 19 Nov 2004 13:28:28 +0100
From: Adrian Bunk <>
Subject: Re: [discuss] RFC: let x86_64 no longer define X86
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/11/19/76

On Thu, Nov 18, 2004 at 05:31:14PM -0800, Paul Menage wrote:
> On Fri, 19 Nov 2004 01:51:17 +0100, Adrian Bunk <bunk@stusta.de> wrote:
> > I'd like to send a patch after 2.6.10 that removes the following from
> > arch/x86_64/Kconfig:
> > 
> >   config X86
> >         bool
> >         default y
> > 
> > Additionally, I'll also check all current X86 uses to prevent breakages.
> 
> Or, you could define an X86_32 config symbol in i386. This seems a
> little more backward compatible, and means that you can continue to
> just test X86 for the rather large set of code that works fine on both
> 32-bit and 64-bit.
> 
> I guess it depends on whether you think there are more places in the
> generic code that the two architectures share code, vs places that are
> 32-bit only.
We are not talking about thousands of places.
We are talking about less than hundred places.
And many people do currently get it wrong like with CONFIG_LBD.
The most important improvement would be to prevent such bugs and to have 
the X86_64 dependency explicitely stated.
The #ifdef CONFIG_X86 in init/main.c is an example where it currently 
takes some time to understand whether it's correct or a bug.
X86_32 would be a solution, but it would IMHO also create confusion 
since i386 and ia64 also have some things in common (e.g. ACPI support).
The cleanest thing is simply, to state X86_64 dependencies explicitely.
> Paul
cu
Adrian
-- 
       "Is there not promise of rain?" Ling Tan asked suddenly out
        of the darkness. There had been need of rain for many days.
       "Only a promise," Lao Er said.
                                       Pearl S. Buck - Dragon Seed
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/