Date: Sat, 12 Mar 2005 21:53:54 -0800 (PST)
From: Junfeng Yang <>
Subject: Re: [CHECKER] crash + fsck cause file systems to contain loops (msdos and vfat, 2.6.11)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/3/13/10

> Interesting.
>
> $ /devel/linux/works/fatfs/fatfstools/dosfstools-2.10/dosfsck/dosfsck -a bug10/crash.img
> dosfsck 2.10, 22 Sep 2003, FAT32, LFN
> /0006
>   Directory does not have any cluster  ("." and "..").
>   Dropping it.
> Reclaimed 3 unused clusters (6144 bytes) in 3 chains.
> Performing changes.
> crash.img: 8 files, 3/8167 clusters
>
> My fixed dosfsck found the above corruption in bug10/crash.img (bug7
> has same corruption). And probably you can see root directory via 0006
> directory, I guess your testing tree didn't have my patches yet (seems
> old behavior).
I'm using dosfsck 2.10, 22 Sep 2003, FAT32, LFN, and yes, I do see root
directory after I run dosfsck on the crashed disk image.  I'm checking
2.6.11.  By "your testing tree didn't have my patches yet", you mean you
have the patch but haven't made it public?  This "testing tree" is the
Linux source tree?  Can you be a little bit more specific?
> BTW, what mount options did you use?
I just used default mount.  mount -t msdos source target
no -o
Thanks,
-Junfeng
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/