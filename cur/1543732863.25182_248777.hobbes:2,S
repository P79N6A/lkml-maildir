Date: Fri, 03 Sep 2004 12:02:15 -0500
From: "K.R. Foley" <>
Subject: Re: [patch] voluntary-preempt-2.6.9-rc1-bk4-R0
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/9/3/249

Ingo Molnar wrote:
> i've released the -R0 patch:
> 
> 
http://redhat.com/~mingo/voluntary-preempt/voluntary-preempt-2.6.9-rc1-bk4-R0
> 
> ontop of:
> 
> 
http://redhat.com/~mingo/voluntary-preempt/diff-bk-040828-2.6.8.1.bz2
> 
> i've given up on the netdev_backlog_granularity approach, and as a
> replacement i've modified specific network drivers to return at a safe
> point if softirq preemption is requested. This gives the same end result
> but is more robust. For the time being i've fixed 8193too.c and e100.c.
> (will fix up other drivers too as latencies get reported)
> 
> this should fix the crash reported by P.O. Gaillard, and it should solve
> the packet delay/loss issues reported by Mark H Johnson. I cannot see
> any problems on my rtl8193 testbox anymore.
> 
> 	Ingo
> 
OK. I previously reported about the system hanging trying to boot this 
patch. It may have been a fluke. In any event, it doesn't hang 
consistently. I have rebooted several times now without problems. I do 
however still get some of these:
(ksoftirqd/0/2): new 131 us maximum-latency critical section.
  => started at: <netif_receive_skb+0x82/0x280>
  => ended at:   <netif_receive_skb+0x1d7/0x280>
  [<c0136789>] check_preempt_timing+0x119/0x1f0
  [<c0255017>] netif_receive_skb+0x1d7/0x280
  [<c0255017>] netif_receive_skb+0x1d7/0x280
  [<c013699d>] sub_preempt_count+0x4d/0x70
  [<c013699d>] sub_preempt_count+0x4d/0x70
  [<c0255017>] netif_receive_skb+0x1d7/0x280
  [<d08d40b7>] e100_poll+0x5b7/0x630 [e100]
  [<c013699d>] sub_preempt_count+0x4d/0x70
  [<c025527f>] net_rx_action+0x7f/0x110
  [<c011eb55>] ___do_softirq+0x75/0x90
  [<c011ec1e>] _do_softirq+0xe/0x20
  [<c011f034>] ksoftirqd+0x94/0xe0
  [<c012f8aa>] kthread+0xaa/0xb0
  [<c011efa0>] ksoftirqd+0x0/0xe0
  [<c012f800>] kthread+0x0/0xb0
  [<c0104575>] kernel_thread_helper+0x5/0x10
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/