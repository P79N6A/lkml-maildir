Date: 10 Feb 2007 13:58:13 +0100
From: Andi Kleen <>
Subject: Re: [PATCH] Make aout executables work again
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/2/10/70

Parag Warudkar <parag.warudkar@gmail.com> writes:
> This a reworked, replacement version of
> x86-fix-vdso-mapping-for-aout-executables-* series of patches in -mm.
> 
> 1) Define arch_setup_additional_pages() as weak in linux/interp.h
> 2) Include linux/interp.h in appropriate places
> 3) Conditionally call arch_setup_additional_pages() from binfmt_*.c if
> the arch defines it
> 4) EXPORT_SYMBOL_GPL(arch_setup_additional_pages) for all x86{64},
> powerpc, sh - binfmt_aout can be built as module
> 5) Get rid of ARCH_HAS_SETUP_ADDITIONAL_PAGES from various places
> 6) For x86_64 - define and export arch_setup_additional_pages as a
> wrapper over syscall32_setup_pages, call it from ia32_aout.c
> 
> Fully tested on x86. (Compile, boot and run the aout binary at
> 
http://ftp.funet.fi/pub/Linux/bin/as86.tar.Z
). Other arches - changes
> are minimal but still I'll appreciate if someone tests them.
I already fixed this in a different way -- just use the stack
trampoline on a.out
Can you double check
ftp://ftp.firstfloor.org/pub/ak/x86_64/quilt/patches/aout-no-vdso
works for you?
-Andi
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/