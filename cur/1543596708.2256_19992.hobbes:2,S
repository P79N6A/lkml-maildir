Date: Sat, 7 Jul 2001 17:24:15 -0500 (EST)
From: Adam <>
Subject: networking in v2.2 vs v2.4 kernels.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/7/7/94

kernels:
	Linux pepsi 2.4.6-pre1-packet #1 SMP Tue Jun 12 02:12:32 EDT 2001 i686
	Linux eax 2.2.20pre6 #1 Wed Jun 27 10:39:14 EST 2001 i586
I have a program which does :
  flags =  MSG_WAITALL;
  rawsock = socket(PF_INET,SOCK_RAW,IPPROTO_TCP);
  bytesread = recvfrom(rawsock,&buf,buflen,flags,
                       (struct sockaddr*)(&from),&fromlen
on my 2.4.x box it works pretty much as expected (excpet that for some
reason the from.sin_port is always set to 0).
However if I try to run the same piece of code on 2.2 kernel it basically
never blocks and always immediatelly returns, and for second thing, it
seems as if it getting some random junk from loopback device, and it never
seems to get any data from any other interface..
any idea what could the difference in behavior between 2.4 and 2.2 ?
-- 
Adam
http://www.eax.com
      The Supreme Headquarters of the 32 bit registers
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/