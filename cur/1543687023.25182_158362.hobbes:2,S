Date: Mon, 18 Aug 2003 14:09:41 -0400
From: Jeff Garzik <>
Subject: Re: Fix up riscom8 driver to use work queues instead of task queueing.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/8/18/147

On Mon, Aug 18, 2003 at 04:59:53PM +0000, Linux Kernel Mailing List wrote:
> @@ -425,7 +414,7 @@
>  	
>  	*tty->flip.char_buf_ptr++ = ch;
>  	tty->flip.count++;
> -	queue_task(&tty->flip.tqueue, &tq_timer);
> +	schedule_delayed_work(&tty->flip.work, 1);
>  }
>  
>  static inline void rc_receive(struct riscom_board const * bp)
> @@ -456,7 +445,7 @@
>  		*tty->flip.flag_buf_ptr++ = 0;
>  		tty->flip.count++;
>  	}
> -	queue_task(&tty->flip.tqueue, &tq_timer);
> +	schedule_delayed_work(&tty->flip.work, 1);
>  }
>  
>  static inline void rc_transmit(struct riscom_board const * bp)
Should we just make schedule_delayed_work(foo, 1) the default for a 
schedule_work() call?
I'm seeing this construct pop up more and more... and would rather have
it fixed at the source, not in every driver.
	Jeff
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/