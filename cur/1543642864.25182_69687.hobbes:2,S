Date: 10 Sep 2002 16:32:35 +0100
From: Alan Cox <>
Subject: Re: [PATCH][RFC] per isr in_progress markers
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/9/10/100

On Tue, 2002-09-10 at 16:05, David Woodhouse wrote:
> 
> mingo@elte.hu said:
> >  this is something i have a 0.5 MB patch for that touches a few
> > hundred drivers. I can dust it off if there's demand - it will break
> > almost nothing because i've done the hard work of adding the default
> > 'no work was done' bit to every driver's IRQ handler. 
> 
> Note that you can also survive IRQ storms this way -- if all handlers 
> returned 'no work was done' and you get over $N irqs per second, disable 
> that IRQ for a while.
You can do that without touching any drivers and its better that way
Firstly the "no work was done" check is insufficient if work is being
done but the IRQ rate is too high to keep up.
Secondly the check means mangling all the drivers when you can establish
if work was done anyway by checking bh/userspace has also had some run
time.
I'm all for surviving IRQ storms on a level triggered IRQ, but do it
purely on interrupt rate and measured system progress not on some
assumption that the driver knows what its doing.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/