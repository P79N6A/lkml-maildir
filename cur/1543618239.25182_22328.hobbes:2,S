Date: Tue, 22 Jan 2002 12:45:18 -0500
From: Pete Zaitcev <>
Subject: Re: 2.4.17:Increase number of anonymous filesystems beyond 256?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/1/22/105

> From: Rainer Krienke <krienke@uni-koblenz.de>
> Date: Tue, 22 Jan 2002 16:23:54 +0100
> Thanks for the hint. I fixed pmap_create() according to your proposal and now 
> nfsd works again. 
Care to share the patch?
> Raising the count of elements of 
> unnamed_dev_in_use in fs/super.c to eg 4096 resulted in the opportunity to 
> mount as many NFS directories.
You did not send your patch (yet again), so there is no way
to tell precisely what you have accomplished. I suspect that it may
create pages with same device number that belong to different
mounts. I do not pretend to understand how VFS and page cache
use device numbers. If device numbers are used for any indexing,
pages may be mixed up with resulting data corruption.
I cannot say if this scenario is likely without looking
at the VFS code. Perhaps we ought to ask Stephen, Al, or Trond
about it.
> Why did you 
> Pete base your patch on 4 new major device numbers whereas Andis patch did 
> not need them?
He probably never tested his patch. I asked him and we'll know
soon if it was so.
-- Pete
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/