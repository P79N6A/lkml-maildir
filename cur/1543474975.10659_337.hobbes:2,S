Date: Sun, 3 Jan 1999 21:11:22 +0200 (EET)
From: Matti Aarnio <>
Subject: Re: znote support oopses non-notebook computer on boot
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/1/4/49

> I tried and build a kernel including everything either as module 
> ( when available and not conflicting cf fast-switching option ) or built-in. 
> It doesn't seem to be a rich idea :
	Well, that particular network driver (znet) was not modularized
	way back when I pushed ahead a large scale modularization of
	drivers.  It seemed to do something extremely difficult about
	initial memory allocation, and then poke around the memory..
	Getting this report only now, and this way means that the original
	usage environment has not needed it at all ?
	This particular problem is that the reference address should
	be mapped via call:
		phys_to_virt()
	before being used -- well, like this:
		for (p=phys_to_virt(0xf0000),cnt=0;cnt<0x10000;++cnt,++p) {
			...
		}
	because the kernel address space does not match physical hardware
	in 1:1 mapping -- not anymore, that is.
	Alan, could you patchify that properly and feed to Linus ?
> <----  boot-time oops  ---->
> <----  excerpt from znet.c  ---->
> __initfunc(int znet_probe(struct device *dev))
> {
>         int i;
>         struct netidblk *netinfo;
>         char *p;
> 
>         /* This code scans the region 0xf0000 to 0xfffff for a "NETIDBLK". */
>         for(p = (char *)0xf0000; p < (char *)0x100000; p++)
>                 if (*p == 'N'  &&  strncmp(p, "NETIDBLK", 8) == 0)
>                         break;
> 
> *head scratch*
> Should I assume it's better to ignore this driver if I want to work
> with an asus p55t2p4 motherboard ?
	That is another approach.
> Ueimor
[Attachment, skipping...]
	/Matti Aarnio <matti.aarnio@sonera.fi>
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/