Date: Wed, 10 Oct 2001 00:51:12 -0400
From: Pete Zaitcev <>
Subject: Re: usb_bulk_msg timeout w/ rvmalloc
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/10/10/6

>      I have written a driver which, in part, facilitates the usb bulk 
>      transfer of raw image data. It works fine for small (CIF, QCIF) 
>      images, but for larger images, kmalloc will not allocate enough 
>      memory. 
How much do you need?
>      I copied the rvmalloc code from the cpia2 driver and used it in place 
>      of kmalloc. The memory allocates fine, but usb_bulk_msg now times out 
>      when using the pointer to the rvmalloc'd memory. I have been unable to 
>      find an instance of an existing driver using rvmalloc in conjunction 
>      with usb_bulk_msg. 
The best thing would be to use pipelined transfer with
several URBs, I think. If that is too difficult for you,
try to use __get_free_pages(), but mind that even if free
RAM is available, kernel may not be able to fulfill your
request. Check response codes carefuly.
-- Pete
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/