Date: Tue, 4 Mar 2008 13:36:02 +0100
From: Ingo Molnar <>
Subject: Re: Regression in 2.6.25-rc3: s2ram segfaults before suspending
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/3/4/173

* Klaus S. Madsen <ksm@hjernemadsen.org> wrote:
> So while I'm fairly confident in that I bisected correctly, the number 
> of attempts I had to go through to get a reliable result, and the fact 
> that I cannot make the problem go away by reverting the current code 
> to something similar, counts quite a lot against me.
> 
> However I'm 100% confident that the problem appears between 
> cf8fa920cb4271f17e0265c863d64bea1b31941a and 
> 925596a017bbd045ff711b778256f459e50a119, which is something like 16 
> commits. I have been at both points in the tree at least 2 times, and 
> confirmed that cf8fa920cb4271f17e0265c863d64bea1b31941a worked for me, 
> and 925596a017bbd045ff711b778256f459e50a119 didn't.
my guess would be that it's this commit that causes it:
| commit 6c3866558213ff706d8331053386915371ad63ec
| Author: Jeremy Fitzhardinge <jeremy@goop.org>
| Date:   Wed Jan 30 13:32:55 2008 +0100
|
|    x86: move all asm/pgtable constants into one place
> But I'm a bit puzzled by the fact that I'm aparently the only one how 
> have encountered the problem? Maybe it's only a problem if one also 
> uses PAE? (Thats just a wild guess to explain why I'm the only one 
> seeing this).
PAE activates NX on 32-bit. So we probably had an NX regression that got 
fixed by the side-effects of one of the unifications. Does it start 
working if you disable NX via the noexec=off boot option?
	Ingo