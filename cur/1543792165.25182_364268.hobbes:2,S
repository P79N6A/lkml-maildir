Date: Mon, 07 Nov 2005 13:20:43 +0100
From: Bodo Stroesser <>
Subject: Re: [uml-devel] [PATCH 8/10] UML - Maintain own LDT entries
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/11/7/87

Blaisorblade wrote:
> On Monday 31 October 2005 05:39, Jeff Dike wrote:
> 
>>From: Bodo Stroesser <bstroesser@fujitsu-siemens.com>
>>
>>Patch imlements full LDT handling in SKAS:
>> * UML holds it's own LDT table, used to deliver data on
>>   modify_ldt(READ)
>> * UML disables the default_ldt, inherited from the host (SKAS3)
>>   or resets LDT entries, set by host's clib and inherited in
>>   SKAS0
>> * A new global variable skas_needs_stub is inserted, that
>>   can be used to decide, whether stub-pages must be supported
>>   or not.
>> * Uses the syscall-stub to replace missing PTRACE_LDT (therefore,
>>   write_ldt_entry needs to be modified)
> 
> Two complaints against this patch (to be fixed afterwards, so I'm not CC'ing 
> akpm):
> 
> *) It reverts my cleanup and consolidation of ldt.c wrt. SKAS vs TT.
> 
> Or at least so I think (I must still give a proper look afterwards, and I'll 
> post patches). Actually it seems that this is done on purpose, but I don't 
> agree too much on this. I will see.
 From the beginning my new code for SKAS included the checks/buffering you later
inserted for TT and SKAS. So this patch is a second version adapted to your changes.
It shifts your improvements into TT path only (where I didn't do any changes in
my old patch), while it uses my own stuff for SKAS. Thus the patch doesn't really
revert your improvements, but restricts it to TT. As in SKAS0 UML now holds its own
LDT data, there is no need for buffering in this case. So I think it makes sense to
have separate code for SKAS.
	Bodo
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/