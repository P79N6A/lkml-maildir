Date: Thu, 31 Jan 2008 00:00:44 +0800
From: "Bryan Wu" <>
Subject: Re: [PATCH 1/1] [Scripts] add svn revision information to setlocalversion
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/30/287

On Jan 30, 2008 6:24 PM, Sam Ravnborg <sam@ravnborg.org> wrote:
> On Wed, Jan 30, 2008 at 06:15:25PM +0800, Bryan Wu wrote:
> > Signed-off-by: Bryan Wu <bryan.wu@analog.com>
> > ---
> >  scripts/setlocalversion |    4 ++++
> >  1 files changed, 4 insertions(+), 0 deletions(-)
> >
> > diff --git a/scripts/setlocalversion b/scripts/setlocalversion
> > index 52f032e..2d6645c 100644
> > --- a/scripts/setlocalversion
> > +++ b/scripts/setlocalversion
> > @@ -25,6 +25,10 @@ if head=`git rev-parse --verify HEAD 2>/dev/null`; then
> >       # All done with git
> >       exit
> >  fi
> > +# Check for svn and a svn repo.
> > +if rev=`svn info 2>/dev/null | grep '^Revision' | awk '{print $NF}'` ; then
> > +        printf -- '-svn%s' $rev
> > +fi
> >
> >  # Check for mercurial and a mercurial repo.
> >  if hgid=`hg id 2>/dev/null`; then
>
> Hi Bryna.
>
> Can I ask you to change the shell script to use
> a chained if so if we find git we do not try mercurial nor svn.
>
Do you mean follow the git and mercurial style to rewrite this svn patch?
No problem I will update it.
> I should have done so initially when adding the patch with mercurial
> support but it slipped my mind.
>
We add svn to this for some time, but I forget to sent it out.
Now I hope it can fix this hole.
Thanks
-Bryan