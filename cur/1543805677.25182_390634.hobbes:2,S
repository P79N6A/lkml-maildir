Date: Fri, 27 Jan 2006 08:16:21 +0100
From: Knut Petersen <>
Subject: netboot broken ?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/1/27/23

Hi everybody!
I spent too many hours trying to boot a machine via ethernet.
The nic includes a pxe boot rom, and without any problems I
manage to boot an old DOS disk image and memtest.
There are also no problems to _load_ the linux kernel.
But when it reaches the point of ip autoconfiguration
(I included ip=dhcp on the kernel command line and, of course,
I enabled dhcp autoconfiguration in the .config), nothing works.
It sends dhcp requests, dhcpd answers, and this repeats forever.
Well ... this is the second time dhcpd is asked ... without a
working and basically correct configured dhcpd the pxe boot
rom and pxelinux would have been unable to  load the kernel ?!
Ok, there is the possibility not to use dhcp autoconf but to
give the necessary information via ip=.... to the kernel. That
works. But after ip config the kernel needs to connect the server to
get the port of rpc 100003/2 and 100005/1. Both fail and timeout,
the kernel tells me to try the defaults, fails and panics.
Please donÂ´t tell me that I forget to start nfsd or mountd, that I
did not export the filesystem the kernel tries to mount etc. I
have no problems to mount that directory from other machines
on the network.
I tried a number of recent kernels, the oldest was 2.6.14.
Any ideas? Can anybody please
 - confirm that network booting does still work
 - confirm that it is broken.
Yes, I read Documentation/nfsroot ... and I am willing to update
it if anybody tells me how to boot that machine.
cu,
 Knut
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/