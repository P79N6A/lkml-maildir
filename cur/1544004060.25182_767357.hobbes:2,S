Date: Tue, 11 Nov 2008 10:27:10 +0530
From: "Nobin Mathew" <>
Subject: Re: sharing interrupt between PCI device
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/11/10/417

Adding david to CC
On Tue, Nov 11, 2008 at 2:04 AM, Grant Grundler
<grundler@parisc-linux.org> wrote:
> On Mon, Nov 10, 2008 at 09:12:05PM +0530, Nobin Mathew wrote:
>> I could not find the definition of acpi_unregister_gsi in i386/x86_64
>> code, it is defined only for ia64.
>
> Sorry - I was looking at the ia64 branch by mistake.
>
>>
>> Since it is defined as a weak symbol, I feel it is not getting called
>> (correct if I am wrong, I searched in google for this).
>
> You are right.
>
> sorry,
> grant
>
>> /* FIXME: implement x86/x86_64 version */
>> void __attribute__ ((weak)) acpi_unregister_gsi(u32 i)
>> {
>> }
>>
>> How this weak symbols work, is it something like
>> acpi_pci_irq_disable() will not call acpi_unregister_gsi() in some
>> platforms.
>>
>> Thanks
>> Nobin Mathew.
>>
>> On Mon, Nov 10, 2008 at 4:01 PM, Nobin Mathew <nobin.mathew@gmail.com> wrote:
>> > Yes USB Virtual Controller has input devices like keyboard and mouse
>> > (routed through hpilo card (remote console)), so those things stops
>> > working when we remove hpilo driver.
>> >
>> > Thanks
>> > Nobin Mathew
>> >
>> > On Mon, Nov 10, 2008 at 1:28 PM, Ingo Molnar <mingo@elte.hu> wrote:
>> >>
>> >> * Grant Grundler <grundler@parisc-linux.org> wrote:
>> >>
>> >>> [+ingo - question for you about disable_irq() below]
>> >>
>> >>> The same problem exists with disable_irq() : only takes a global
>> >>> IRQ# and no additional identifying information to prevent disabling
>> >>> a shared IRQ. So I'm not sure if this is a bug with ACPI or design
>> >>> flaw in generic IRQ APIs.  Ingo?
>> >>
>> >> that's how disable_irq() always worked: it disables all handlers on
>> >> that IRQ#. If the IRQ# is shared, it disables all handlers.
>> >>
>> >>        Ingo
>> >>
>> >
>