Date: Mon, 30 Apr 2007 14:30:19 +0200 (MEST)
From: Jan Engelhardt <>
Subject: [PATCH 35/36] Use menuconfig objects II - DVB
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/4/30/194

Change Kconfig objects from "menu, config" into "menuconfig" so
that the user can disable the whole feature without having to
enter the menu first.
Also remove one indirection (CONFIG_DVB) that does not seem to
be really used inside the kernel.
Signed-off-by: Jan Engelhardt <jengelh@gmx.de>
---
 drivers/media/Makefile             |    2 +-
 drivers/media/dvb/Kconfig          |   19 -------------------
 drivers/media/dvb/dvb-core/Kconfig |   16 +++++++++++++---
 3 files changed, 14 insertions(+), 23 deletions(-)
Index: linux-2.6.21-mm_20070428/drivers/media/Makefile
===================================================================
--- linux-2.6.21-mm_20070428.orig/drivers/media/Makefile
+++ linux-2.6.21-mm_20070428/drivers/media/Makefile
@@ -5,4 +5,4 @@
 obj-y := common/
 obj-$(CONFIG_VIDEO_DEV) += video/
 obj-$(CONFIG_VIDEO_DEV) += radio/
-obj-$(CONFIG_DVB)       += dvb/
+obj-$(CONFIG_DVB_CORE)  += dvb/
Index: linux-2.6.21-mm_20070428/drivers/media/dvb/Kconfig
===================================================================
--- linux-2.6.21-mm_20070428.orig/drivers/media/dvb/Kconfig
+++ linux-2.6.21-mm_20070428/drivers/media/dvb/Kconfig
@@ -2,23 +2,6 @@
 # Multimedia device configuration
 #
 
-menu "Digital Video Broadcasting Devices"
-
-config DVB
-	bool "DVB For Linux"
-	depends on NET && INET
-	---help---
-	  Support Digital Video Broadcasting hardware.  Enable this if you
-	  own a DVB adapter and want to use it or if you compile Linux for
-	  a digital SetTopBox.
-
-	  API specs and user tools are available from <
http://www.linuxtv.org/>.
-
-	  Please report problems regarding this driver to the LinuxDVB
-	  mailing list.
-
-	  If unsure say N.
-
 source "drivers/media/dvb/dvb-core/Kconfig"
 
 comment "Supported SAA7146 based PCI Adapters"
@@ -47,5 +30,3 @@ source "drivers/media/dvb/pluto2/Kconfig
 comment "Supported DVB Frontends"
 	depends on DVB_CORE
 source "drivers/media/dvb/frontends/Kconfig"
-
-endmenu
Index: linux-2.6.21-mm_20070428/drivers/media/dvb/dvb-core/Kconfig
===================================================================
--- linux-2.6.21-mm_20070428.orig/drivers/media/dvb/dvb-core/Kconfig
+++ linux-2.6.21-mm_20070428/drivers/media/dvb/dvb-core/Kconfig
@@ -1,12 +1,22 @@
-config DVB_CORE
-	tristate "DVB Core Support"
-	depends on DVB
+menuconfig DVB_CORE
+	tristate "DVB for Linux"
+	depends on NET && INET
 	select CRC32
 	help
+	  Support Digital Video Broadcasting hardware.  Enable this if you
+	  own a DVB adapter and want to use it or if you compile Linux for
+	  a digital SetTopBox.
+
 	  DVB core utility functions for device handling, software fallbacks etc.
 	  Say Y when you have a DVB card and want to use it. Say Y if your want
 	  to build your drivers outside the kernel, but need the DVB core. All
 	  in-kernel drivers will select this automatically if needed.
+
+	  API specs and user tools are available from <
http://www.linuxtv.org/>.
+
+	  Please report problems regarding this driver to the LinuxDVB
+	  mailing list.
+
 	  If unsure say N.
 
 config DVB_CORE_ATTACH
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/