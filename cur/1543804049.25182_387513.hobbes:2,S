Date: Wed, 18 Jan 2006 04:20:51 -0800
From: Andrew Morton <>
Subject: Re: PATCH: SBC EPX does not check/claim I/O ports it uses (2nd Edition)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/1/18/153

"Jiri Slaby" <xslaby@fi.muni.cz> wrote:
>
> > static void __exit watchdog_exit(void)
>  But now, you forgot to add release_region in this (exit) function :)?
yup.  That'll give a nice oops reading /proc/ioports after rmmod...
--- devel/drivers/char/watchdog/sbc_epx_c3.c~sbc-epx-does-not-check-claim-i-o-ports-it-uses-2nd-edition-fix	2006-01-18 04:19:58.000000000 -0800
+++ devel-akpm/drivers/char/watchdog/sbc_epx_c3.c	2006-01-18 04:19:58.000000000 -0800
@@ -213,6 +213,7 @@ static void __exit watchdog_exit(void)
 {
 	misc_deregister(&epx_c3_miscdev);
 	unregister_reboot_notifier(&epx_c3_notifier);
+	release_region(EPXC3_WATCHDOG_CTL_REG, 2);
 }
 
 module_init(watchdog_init);
_
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/