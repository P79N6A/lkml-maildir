Date: Thu, 07 Jul 2005 08:28:56 -0500
From: Brian King <>
Subject: Re: [PATCH 3/13]: PCI Err: IPR scsi device driver recovery
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/7/7/137

Linas Vepstas wrote:
> +/** This routine is called when the PCI bus has permanently
> + *  failed.  This routine should purge all pending I/O and
> + *  shut down the device driver (close and unload).
> + *  XXX Needs to be implemented.
> + */
> +static void ipr_eeh_perm_failure (struct pci_dev *pdev)
> +{
> +#if 0  // XXXXXXXXXXXXXXXXXXXXXXX
> +	ipr_cmd->job_step = ipr_reset_shutdown_ioa;
> +	rc = IPR_RC_JOB_CONTINUE;
> +#endif
> +}
What were your plans here? What can the device driver rely on here?
Are interrupts disabled? Will pci config accesses all fail?
Should the driver attempt to talk to the pci adapter at all, or should
it simply clean up after it?
-- 
Brian King
eServer Storage I/O
IBM Linux Technology Center
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/