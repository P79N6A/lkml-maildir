Date: 6 Jul 1999 03:18:41 GMT
From: (Marc MERLIN)
Subject: Ooops in FDDI defxx driver
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/7/6/23

I contacted the driver author, Larry Stefani, but didn't hear back. Maybe
someone else has an idea of what's happening:
Here's a little info about my machine:
Pentium 133 VX chipset (single processor machine)
3 ethernet cards (2 ISA 10MBit and 1 PCI 100Mbit) and a PCI DEFPA FDDI card.
Since I upgraded from 2.0.34 to  the 2.2.x series, your driver will randomly
oops at  ifconfig time (the  machine will boot fine  4 times out  of 5). The
version the FDDI  driver in 2.2.6 is 1.04 09/16/96,  so some interface could
have changed in the 2.2.x series without the driver ever being updated.
Unable to handle kernel NULL pointer dereference at virtual address 00000080
current->tss.cr3 = 02dd9000, %cr3 = 02dd9000
*pde = 00000000
Oops: 0000
CPU:    0
EIP:    0010:[<c01aa551>]
EFLAGS: 00010246
eax: 00000000   ebx: 00000000   ecx: c0092000   edx: 00000080
esi: 00000004   edi: 00000068   ebp: 00000360   esp: c2d8fe78
ds: 0018   es: 0018   ss: 0018
Process ifconfig (pid: 88, process nr: 10, stackpage=c2d8f000)
Stack: 00000000 00000080 c0092000 c01fb2e0 c008d7a8 00001043 0000006c c01aa284
       c0092000 c0092000 c01a93b2 c0092000 c0092000 c00921b4 c01a949f c0092000 
       00001002 c01fb2e0 00000000 c0153e7d c01fb2e0 00001002 c01fb2e0 00000000 
Call Trace: [<c01aa284>] [<c01a93b2>] [<c01a949f>] [<c0153e7d>] [<c015492a>] [<c0174440>] [<c015516d>] 
       [<c0176253>] [<c014ff8d>] [<c012b488>] [<c014ff6c>] [<c0107a40>] 
Code: 8b 8b 80 00 00 00 8d 44 0a ff f7 da 21 d0 29 c8 01 c1 89 8b
>>EIP: c01aa551 <unregister_netdev+14ad/27a4>
Trace: c01aa284 <unregister_netdev+11e0/27a4>
Trace: c01a93b2 <unregister_netdev+30e/27a4>
Trace: c01a949f <unregister_netdev+3fb/27a4>
Trace: c0153e7d <dev_open+25/80>
Trace: c015492a <dev_set_allmulti+82/5f0>
Trace: c0174440 <devinet_ioctl+250/d84>
Trace: c015516d <dev_ioctl+2d5/3d0>
Trace: c0176253 <inet_poll+387/99c>
Code:  c01aa551 <unregister_netdev+14ad/27a4>  00000000 <_EIP>: <===
Code:  c01aa551 <unregister_netdev+14ad/27a4>     0:    8b 8b 80 00 00  movl   0x80(%ebx),%ecx <===
Code:  c01aa556 <unregister_netdev+14b2/27a4>     5:    00 
Code:  c01aa557 <unregister_netdev+14b3/27a4>     6:    8d 44 0a ff     leal   0xffffffff(%edx,%ecx,1),%eax
Code:  c01aa55b <unregister_netdev+14b7/27a4>     a:    f7 da           negl   %edx
Code:  c01aa55d <unregister_netdev+14b9/27a4>     c:    21 d0           andl   %edx,%eax
Code:  c01aa55f <unregister_netdev+14bb/27a4>     e:    29 c8           subl   %ecx,%eax
Code:  c01aa561 <unregister_netdev+14bd/27a4>    10:    01 c1           addl   %eax,%ecx
Code:  c01aa563 <unregister_netdev+14bf/27a4>    12:    89 8b 00 00 00  movl   %ecx,0x0(%ebx)
Code:  c01aa568 <unregister_netdev+14c4/27a4>    17:    00 
If the kernel  doesn't oops at boot time (during  the ifconfig command) then
everything works  fine.  I have another  machine (K6/2 350 with  another DEC
card (cddi  this time) running 2.2.6  also and haven't experienced  any such
problems yet..
While I can't unfortunately reproduce this bug reliably, I'll still be happy
to assist in debugging this if I can.
Best,
Marc
-- 
Microsoft is to software what McDonalds is to gourmet cooking
 
Home page: 
http://marc.merlins.org/
 (friendly to non IE browsers)
Finger marc_f@merlins.org for PGP key and other contact information
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/