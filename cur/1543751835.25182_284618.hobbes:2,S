Date: Sun, 9 Jan 2005 02:20:58 +0100 (CET)
From: Jesper Juhl <>
Subject: Re: [PATCH][0/4] let's kill verify_area
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/1/8/303

On Thu, 6 Jan 2005, Andrew Morton wrote:
> Jesper Juhl <juhl-lkml@dif.dk> wrote:
> >
> > On Thu, 6 Jan 2005, Andrew Morton wrote:
> > 
> > > Jesper Juhl <juhl-lkml@dif.dk> wrote:
> > > >
> > > > verify_area() if just a wrapper for access_ok() (or similar function or 
> > > > dummy function) for all arch's.
> > > 
> > > This sounds more like "let's kill Andrew".  I count 489 instances in the
> > > tree.  Please don't expect this activity to take top priority ;)
> > > 
> > Heh, right, there's an aspect I hadn't really considered.
> > I'm not expecting top priority, not at all. This is nowhere near being 
> > anything important, just something that should happen eventually - so I 
> > thought, why not just deprecate it now and let it be cleaned up over time 
> > (and I'll do my share, don't worry :)
> > 
> > Accept the patch if you think it makes sense, drop it if you think it does 
> > not (or should wait). 
> 
> The way to do this is to fix up the callers first, in just ten or so
> patches.  Then mark the function deprecated when most of the conversion is
> done.
> 
> If we deprecate the functions first then 10000 people send small fixes via
> various snaky routes and it's really hard to coordinate the overlapping
> fixes.  The s/MODULE_PARM/module_param/ stuff did that, because we made it
> warn first, then I held the big sweep patch off for 2.6.11.
> 
Ok, that makes sense.
Here's my plan then:
I'll get to work on converting roughly one tenth og the verify_area 
occourances and then post a patch for that for review. If it turns out to 
be OK I'll get to work on the rest and do as many as I can and at that 
point (assuming those patches are also OK) I'll re-submit a patch to 
deprecate the function so the remaining instances can get cleaned up and 
the function removed.
This will probably take me a few days to do since A) it seems I didn't 
even get my initial conversions correct so I'll need to be more careful, 
and B) I have limited time.  But, I'll start doing the initial 1/10'th 
patch now and hopefully post that to lkml within a few days.
Thank you for your feedback.
-- 
Jesper Juhl
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/