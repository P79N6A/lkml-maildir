Date: Thu, 2 Mar 2000 16:51:18 +0100
From: Guest section DW <>
Subject: Re: EEK! Able to eject mounted Zip Disk (2.3.46/2.2.13)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/3/2/80

On Thu, Mar 02, 2000 at 11:08:58AM +0000, Simon Huggins wrote:
> [root@byers /home/www]# mount /mnt/zip
> [root@byers /home/www]# eject /dev/sdb
> 
> Click and out it comes...
> 
> [root@byers /home/www]# mount
> /dev/sdb4 on /mnt/zip type vfat (rw,gid=1000,umask=007)
> [root@byers /home/www]# mount /mnt/zip
> mount: /dev/sdb4 already mounted or /mnt/zip busy
> mount: according to mtab, /dev/sdb4 is already mounted on /mnt/zip
> 
> If I do:
> eject /dev/sdb4
> then it tells me it's mounted and refuses.
I suspect the following:
- eject uses privately constructed SCSI commands to eject your disk
  so you are doing this entirely behind the back of everybody,
  the kernel does not know what you did.
- refusing to eject /dev/sdb4 is something eject.c does for you;
  you might fix eject.c to also refuse /dev/sdb; send the patch
  to the maintainer.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/