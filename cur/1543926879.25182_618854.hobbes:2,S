Date: Sat, 17 Nov 2007 16:57:19 -0800
From: Andrew Morton <>
Subject: Re: [patch] Printk kernel version in WARN_ON
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/11/17/180

On Sun, 18 Nov 2007 01:42:18 +0100 Ingo Molnar <mingo@elte.hu> wrote:
> 
> * Arjan van de Ven <arjan@infradead.org> wrote:
> 
> > ok so how about putting the same into dump_stack() instead? (see 
> > below) added bonus is that it's now present for all dumps that use 
> > dump_stack(), not just WARN_ON() (the format I copied from the exact 
> > line used by oopses)
> 
> nice! I did things like this in -rt because it really helps to know 
> which process does a WARN_ON() or raw dump_stack().
> 
> > Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
> 
> Acked-by: Ingo Molnar <mingo@elte.hu>
> 
> unless objections we'll put this into the x86 git tree.
> 
Should be done for all architectures, methinks.
If so, an appropriate way to do that would be to do
s/dump_stack/arch_dump_stack/ and do a single all-arch implementation of
dump_stack().  (Where we might add new goodies in the future).
Problem is that this will add a new an pointless entry to all the stack
dumps, unless the arch_dump_stack() implementation is smart enough to skip the
innermost frame.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/