Date: Mon, 07 Aug 2006 09:18:22 +0100
From: "Jan Beulich" <>
Subject: Re: 2.6.18-rc3-g3b445eea BUG: warning at /usr/src/linux-git/kernel/cpu.c:51/unlock_cpu_hotplug()
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/8/7/57

>> It's a false-positive in this case - the backtrace was complete.  It would
>> be good if we could make the did-we-get-stuck detector a bit smarter.  Even
>> special-casing "sysenter_past_esp" would stop a lot of this..
>
>Actually it's not completely false in this case -- it should
>have reached user mode and stopped there, but for some reason
>I didn't and already stopped still in the kernel.
>
>Most likely the CFI annotation for that sysenter path is not complete.
Correct, the return point of sysexit (SYSENTER_RETURN) is still in kernel space,
but its annotations are invisible to the unwinder. We should make the VDSO be
treated as user-mode code despite living above PAGE_OFFSET.
>It's on my todo list to investigate but I still hope Jan does it first ;-)
I'll try to, once I've got through moving the Xen code from 2.6.16 to 2.6.18-rc3
Jan
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/