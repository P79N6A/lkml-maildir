Date: Sun,  4 Jan 2009 12:46:57 +0100
From: Geert Uytterhoeven <>
Subject: [PATCH/v2] Atari frame buffer fixes
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2009/1/4/71

This patchsets contains several fixes for the Atari frame buffer device, and
includes a refactoring of the c2p (Chunky-to-Planar) code:
  [1] fbdev: atafb - Fix line length handling
  [2] fbdev: atafb - Fix 16 bpp console
  [3] fbdev: c2p - Correct indentation
  [4] fbdev: c2p - Cleanups
  [5] fbdev: c2p - Extract common c2p core to c2p_core.h
  [6] fbdev: c2p/atafb - Add support for Atari interleaved bitplanes
  [7] fbdev: c2p - Rename c2p to c2p_planar
Changes since previous submission:
  - Convert macros to static inline functions
  - Make sure we get a build-time error (undefined reference to
    'c2p_unsupported') in case of future misuse
  - Replace `unsigned long' by `u32' in comp(), as that's what all callers use
  - Use {get,put}_unaligned_be32() in store_{iplan2,planar}{,_masked}()
If nobody objects, I'd like to push this to Linus via the m68k tree, as the
c2p code is used by m68k drivers (atafb and amifb) only.
 drivers/video/Makefile     |    4 +-
 drivers/video/amifb.c      |    6 +-
 drivers/video/atafb.c      |  101 ++++++++-----------
 drivers/video/c2p.c        |  232 --------------------------------------------
 drivers/video/c2p.h        |   11 ++-
 drivers/video/c2p_core.h   |  153 +++++++++++++++++++++++++++++
 drivers/video/c2p_iplan2.c |  153 +++++++++++++++++++++++++++++
 drivers/video/c2p_planar.c |  156 +++++++++++++++++++++++++++++
 8 files changed, 515 insertions(+), 301 deletions(-)