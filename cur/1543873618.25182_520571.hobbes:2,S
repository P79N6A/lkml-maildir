Date: Thu, 15 Mar 2007 15:36:13 -0700
From: Andrew Morton <>
Subject: Re: thread stacks and strict vm overcommit accounting
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/3/15/368

On Thu, 15 Mar 2007 23:33:43 +0000
Alan Cox <alan@lxorguk.ukuu.org.uk> wrote:
> > Stack RSS should certainly be included in Committed_AS,
> > but RLIMIT_STACK merely limits how big the stack vma may grow to:
> > at any moment the stack vma is probably very much smaller,
> > and only its current size is accounted in Committed_AS.
> 
> With a typical size as a fuzz factor preaccounted in later kernels.
Where's that done?
> > > > Is this the intended behaviour?
> > > 
> > > That sounds like a bug to me.
> > 
> > I'm suspecting it's an oddity rather than a bug.
> 
> It is intended behaviour.
Each instance of
main()
{
	sleep(100);
}
appears to increase Committed_AS by around 200kb.  But we've committed to
providing it with 8MB for stack.
How come this is correct?
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/