Date: Mon, 27 Aug 2001 21:06:21 +0100 (BST)
From: Alan Cox <>
Subject: Re: DOS2linux
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/8/27/96

> 1) set AX register to 0xd800
> 2) set slot number to DiSC_Id.slot, (eg. 1 in my case -> base is
> 0x1000)
> 3) set function number to read
> 4) assign a 320-byte buffer for standard configuration data block
> 5) execute a software interrupt via the DOS specific int86x function,
> this puts configuration data into the 320-byte buffer.
> 6) check if we get a valid return
> 7) if we have a valid situation, assign values from the configuration
> block to DiSC_Id.it (it level) and DiSC_Id.dma (dma level)
Oh god, thats the deep magic EISA weirdness department
> On 
http://www.ctyme.com/intr/rb-1641.htm
 I can see that this is all
> about reading data from an EISA SYSTEM ROM.  I can't imagine there
> doesn't exist some linux-API that allows me to do just the same.
Well actually its one of those things that needs writing cleanly but 
currently appears in its own form in some EISA drivers
EISA slots are I/O mapped at 0x1000, 0x2000, 0x3000, 0x4000 -> 0x8000
The ID port is at base+0xc80
Configuration data follows at base+0xc84, 0xc88 ...
I would assume the 320 byte buffer is providing this same data block, and
maybe more but I don't know the details. I thought EISA boards had gone
away
Alan
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/