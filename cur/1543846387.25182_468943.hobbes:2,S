Date: Tue, 03 Oct 2006 11:01:14 +0100
From: David Howells <>
Subject: Re: [PATCH 3/3] IRQ: Maintain regs pointer globally rather than passing to IRQ handlers
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/10/3/63

Ingo Molnar <mingo@elte.hu> wrote:
> i agree that we should do this in one go and in Linus' tree. I suspect 
> David has a script for this, so we can do it anytime for any tree, 
> right?
I wish.  No, it's not simple enough to script.  All the usages of struct
pt_regs have to be eyeballed and have to be poked with the compiler.  The
problem is when an interrupt handler passes regs down to someone else - that I
can't find.
However, I'm now in a position that I can just keep pulling Linus's GIT tree
with StGIT and fixing up the wibbly bits and grepping for new instances of
pt_regs and of course compile testing on a bunch of arches for which I have
compilers.
> the amount of code that truly relies on regs being present is very low. 
The same goes for the IRQ number itself too.  Very few things actually use
that, mostly they just use the arbitrary data argument.  I'm not sure we want
to do the same to that, though, since it makes cascaded PIC processing more
interesting as the IRQ number changes.
David
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/