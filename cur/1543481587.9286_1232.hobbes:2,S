Date: Fri, 22 Jan 1999 21:15:12 +0000
From:  edmundo@rano ...
Subject: pre9: PATCH for drivers/video/Config.in
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/1/22/349

I found this patch made "make xconfig" work for me w.r.t. "ATI Mach64
display support" and "IGA 168x display support" (under "Console
drivers").
It seems that make xconfig doesn't like the same option appearing
several times.
But I didn't test what effect this patch has on make config and make
menuconfig ...
Edmund
--- v2.2.0-pre9/linux/drivers/video/Config.in	Fri Jan 22 20:44:09 1999
+++ linux/drivers/video/Config.in	Fri Jan 22 20:58:45 1999
@@ -37,7 +37,6 @@
   fi
   if [ "$CONFIG_ATARI" = "y" ]; then
     bool 'Atari native chipset support' CONFIG_FB_ATARI
-    bool 'ATI Mach64 display support' CONFIG_FB_ATY
   fi
   if [ "$CONFIG_PPC" = "y" ]; then
     bool 'Open Firmware frame buffer device support' CONFIG_FB_OF
@@ -45,7 +44,6 @@
       bool 'Apple "control" display support' CONFIG_FB_CONTROL
       bool 'Apple "platinum" display support' CONFIG_FB_PLATINUM
       bool 'Apple "valkyrie" display support' CONFIG_FB_VALKYRIE
-      bool 'ATI Mach64 display support' CONFIG_FB_ATY
       bool 'IMS Twin Turbo display support' CONFIG_FB_IMSTT
       bool 'Chips 65550 display support' CONFIG_FB_CT65550
       bool 'S3 Trio display support' CONFIG_FB_S3TRIO
@@ -73,7 +71,6 @@
         bool '  G100/G200 support' CONFIG_FB_MATROX_G100
         bool '  Multihead support' CONFIG_FB_MATROX_MULTIHEAD
       fi
-      bool 'ATI Mach64 display support' CONFIG_FB_ATY
     fi
   fi
   if [ "$ARCH" = "sparc" -o "$ARCH" = "sparc64" ]; then
@@ -91,22 +88,20 @@
       fi
       bool '  Leo (ZX) support' CONFIG_FB_LEO
     fi
-  fi
-  if [ "$ARCH" = "sparc" ]; then
     if [ "$CONFIG_PCI" != "n" ]; then
       bool 'PCI framebuffers' CONFIG_FB_PCI
       if [ "$CONFIG_FB_PCI" != "n" ]; then
-        bool '  IGA 168x display support' CONFIG_FB_IGA
+	if [ "$ARCH" = "sparc" ]; then
+	  bool '  IGA 168x display support' CONFIG_FB_IGA
+        fi
       fi
     fi
   fi
-  if [ "$ARCH" = "sparc64" ]; then
-    if [ "$CONFIG_PCI" != "n" ]; then
-      bool 'PCI framebuffers' CONFIG_FB_PCI
-      if [ "$CONFIG_FB_PCI" != "n" ]; then
-        bool '  ATI Mach64 display support' CONFIG_FB_ATY
-      fi
-    fi
+  if [ "$CONFIG_ATARI" = "y" -o \
+       "$CONFIG_PPC" = "y" -a "$CONFIG_FB_OF" = "y" -o \
+       "$CONFIG_EXPERIMENTAL" = "y" -a "$CONFIG_PCI" != "n" -o \
+       "$ARCH" = "sparc64" -a "$CONFIG_PCI" != "n" -a "$CONFIG_FB_PCI" != "n" ]; then
+    bool 'ATI Mach64 display support' CONFIG_FB_ATY
   fi
   tristate 'Virtual Frame Buffer support (ONLY FOR TESTING!)' CONFIG_FB_VIRTUAL
 
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/