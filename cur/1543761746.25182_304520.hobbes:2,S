Date: Mon, 21 Mar 2005 11:15:32 +0100
From: Matthias Andree <>
Subject: Re: Why is NFS write so slow?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/3/21/47

On Mon, 21 Mar 2005, Xin Zhao wrote:
> I am trying to develop a new filesystem based on NFS, which runs in a
> very fast network environment. I used the source code of NFS2, but
> noticed that NFS write is very slow. Even if I changed wsize to 8192,
> it still can only reach 1MB/s. I don't know why. Because the network
> is extremely fast (over 100MB/s), I don't think network is the only
> reason. Any other reason?
> 
> Is the NFS write synchronous? Does that means the NFS server will not
> return before the data is flushed to disk?
Yes, that is the case here. You can use export or mount options to make
NFS asynchronous.
Plus, NFS3 has write clustering which may be worth a try depending on
your workload.
-- 
Matthias Andree
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/