Date: Tue, 8 Feb 2000 09:33:56 -0500
From: "Theodore Y. Ts'o" <>
Subject: Re: LSR safety check engaged
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/2/8/76

   From: Oliver Neukum <Oliver.Neukum@lrz.uni-muenchen.de>
   Date:   Mon, 7 Feb 2000 14:38:45 +0100
   I am getting syslog entries like:
   Feb  6 23:57:14 chani kernel: LSR safety check engaged!
   Feb  6 23:57:14 chani kernel: LSR safety check engaged!
   since switching to 2.3.42, shortly after switching into X
What sort of mouse are you using?  Is it a serial mouse?  If so, what
port is it attached to?  And does the mouse work after you start X?
The message you're seeing is a serial driver error, and it indicates
that a UART has returned 0xff in a condition where where it absolutely
shouldn't.  This typically means that a serial port is misconfigured,
and is an attempt open it has caused the serial to notice that the LSR
register is returning all 0xFF.   Since should never happen except when
a port is is misconfigured to an non-existing I/O region, and this can
cause the kernel hang in an infinite loop forever, the serial driver
checks for this case and prints the "LSR safety check engaged" message.
If this just appears when you moved to a newer kernel, then it's
probably not this case, though.  There seems to be some UART's that
temporarily go temporarily insane under some circumstances which I
haven't completely figured out in the new serial driver.  It doesn't
happen to me, and it's probably a question of some bogus bad 16550
clone, and figuring out how to work around it.
Can you give me information about which UART is apparently causing this
problem?  Try opening /dev/ttyS0, /dev/ttyS1, etc., until you see which
attempt to open the serial port causes the LSR safety check warning
message.  Then run "setserial -av /dev/ttySx" on that port.  Also, if
you can find out any information about what kind of UART is on that
port, and what kind of serial board (or if it's an on-motherboard serial
port, what kind of motherboard) you have, that would be most helpful.
Thanks!!
					- Ted
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/