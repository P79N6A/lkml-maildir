Date: Wed, 12 Sep 2007 12:52:53 +0200
From: Peter Zijlstra <>
Subject: Re: [RFC 0/3] Recursive reclaim (on __PF_MEMALLOC)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/9/12/71

On Wed, 2007-09-05 at 05:14 -0700, Christoph Lameter wrote:
> Using the VM to throttle networking is a pretty bad thing because it 
> assumes single critical user of memory. There are other consumers of 
> memory and if you have a load that depends on other things than networking 
> then you should not kill the other things that want memory.
The VM is a _critical_ user of memory. And I dare say it is the _most_
important user. 
Every user of memory relies on the VM, and we only get into trouble if
the VM in turn relies on one of these users. Traditionally that has only
been the block layer, and we special cased that using mempools and
PF_MEMALLOC.
Why do you object to me doing a similar thing for networking?
The problem of circular dependancies on and with the VM is rather
limited to kernel IO subsystems, and we only have a limited amount of
them. 
You talk about something generic, do you mean an approach that is
generic across all these subsystems?
If so, my approach would be it, I can replace mempools as we have them
with the reserve system I introduce.
[unhandled content-type:application/pgp-signature]