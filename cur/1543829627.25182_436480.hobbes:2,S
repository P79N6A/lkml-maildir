Date: Fri, 23 Jun 2006 22:27:12 -0400
From: "Albert Cahalan" <>
Subject: Re: [PATCH] sched.h: increment TASK_COMM_LEN to 20 bytes
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/6/23/475

Luben Tuikov writes:
> Lets use 19+1 chars.  This helps display properly
> kernel threads (e.g. SATA translation threads) which bear
> the address of the STP/SATA bridge where the SATA disk is
> connected. Those are 16+1 chars long.  Currently (15+1) the
> last character is not displayed as it is used by the '\0'.
This makes apps crash when they do this:
char buf[16];
prctl(PR_GET_NAME, buf, 42, 42, 42);
Check the last 15 lines of kernel/sys.c to see why.
Though none of my code breaks, I have to wonder about what might
be out there. (my code truncates it)
I tend to think that putting 64 bits of hex in the command name
is an abuse of the command name. Perhaps it is time to make argv
work for built-in kernel tasks. It's also long past time to group
these things by tgid, reducing the horrible clutter seen on
large systems.
As for the size chosen...
Solaris uses 15. (plus 80 for unswappable argv)
Darwin uses 16. (was 10 I believe)
OpenBSD uses 16.
NetBSD uses 16.
We use 15. (you propose 19)
FreeBSD uses 19.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/