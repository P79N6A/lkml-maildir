Date: Sun, 6 Aug 2000 09:00:27 +0100 (BST)
From: Russell King <>
Subject: Re: IDE driver porting problems
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/8/6/25

Andre Hedrick writes:
> On Mon, 24 Jul 2000, Russell King wrote:
> So Russell, you want a no assumption call?
Ideally yes, since writing to the drive/head register and then reading it
back and checking that it is actually what we wrote will fail if the disk
is not spun up.
However, there is a problem - bad interfaces which don't have a pull-down
resistor on IDE dataline 7 (as specified in the ATA specs).  In this case,
we may end up having to wait around 30 seconds or more before deciding that
there isn't actually a drive present.  (Note that some drives seem to take
45 seconds - you'll be glad to know that gb has one).  Note that the timeout
should be timed from the point when Linux starts, not the point at which you
start probing for the drive.
Maybe it ought to be a configuration option, so that architectures which can
guarantee that the drive is spun up (and therefore not busy, eg, x86) miss
out this check?  (or maybe an config option which is derived from the
architecture).
Whatever it is, if it appears in 2.4, then it should start of benign, and
the various architecture maintainers should be given the power to turn it
on (the users would complain at the 45 second timeout).  Otherwise, it
should probably be a 2.5 thing.
   _____
  |_____| ------------------------------------------------- ---+---+-
  |   |         Russell King        rmk@arm.linux.org.uk      --- ---
  | | | | 
http://www.arm.linux.org.uk/personal/aboutme.html
   /  /  |
  | +-+-+                                                     --- -+-
  /   |               THE developer of ARM Linux              |+| /|\
 /  | | |                                                     ---  |
    +-+-+ -------------------------------------------------  /\\\  |
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/