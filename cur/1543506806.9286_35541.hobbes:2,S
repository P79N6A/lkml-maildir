Date: Tue, 24 Aug 1999 15:09:26 +0100 (BST)
From: Alan Cox <>
Subject: Re: 2.3.14 continues to break perl with libc5 (or does 2.3.14 refuse to
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/8/24/71

> the following 2 line c program still doesn't compile with libc5 and 2.3.14
> cat qq.c
> #include <sys/msg.h>
> long infosize = sizeof(struct msqid_ds);
> 
> gcc -c qq.c
> In file included from /usr/include/sys/msg.h:7,
>                  from qq.c:1:
> /usr/include/linux/msg.h:22: parse error before `wait_queue_head_t'
> /usr/include/linux/msg.h:22: warning: no semicolon at end of struct or union
> /usr/include/linux/msg.h:23: warning: data definition has no type or storage class
> /usr/include/linux/msg.h:29: parse error before `}'
> qq.c:2: sizeof applied to an incomplete type
The message queue code was changed by someone without realising the damage
done I suspect. It is actually far worse than not compiling. Existing programs
using message queues do not work on 2.3.x either because a structure copied 
into the end users program has totally changed size/layout.
Alan
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/