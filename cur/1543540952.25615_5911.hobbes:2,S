Date: Mon, 7 Aug 2000 17:35:16 +0200
From: Oscar Roozen <>
Subject: /dev/random blocks forever on 2.2.12 and 2.2.16
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/8/7/66

Hello People,
Can somebody point me in the right direction for solving this problem?
When I cat or od -x /dev/random it will only give data when I hit the 
keyboard or chase the mouse.  It looks like no network or disk traffic
adds to the entropy pool and it also looks like (according to google
and deja) I'm the only one with this problem.  The process just blocks,
and even after a full weekend there is no new output.
The system is a Compaq Proliant 8500 / 4 Xeon III / 1 Gig machine. 
Attached is a Compaq SMART2 raid array and a Compaq Fibre Host Adaptor.
The kernels I tried are the stock kernel from redhat 6.1, which is 
2.2.12 with and without smp, but with a patch from Compaq that was later
incorporated into kernel 2.2.16 (or somewhere before). And now I'm 
running 2.2.16/smp, compiled by myself after applying a patch from compaq
to see the Fibre channel host adaptor.  Those Compaq patches don't seem
to do anything near a add_interrupt_randomness call, by the way.
There is network traffic going on. I can access /dev/ida/* (the SMART2)
or /dev/sda (The Fibre channel raid) as much as I want, but no calls are
being made to add_interrupt_randomness, so /dev/random is dead very soon.
Yes, I can put a monkey behind the keyboard, but if somebody knows a 
better solution, please don't be shy. ;)
(BTW, shouldn't there be some safety mechanism inside /dev/random to avoid
these endless blocks?  I'm not a real developer and neither play one, so
I'm just wondering...)
-- Oscar.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/