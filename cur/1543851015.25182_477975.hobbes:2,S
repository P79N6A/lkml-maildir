Date: Tue, 31 Oct 2006 13:37:27 +0100
From: Prakash Punnoor <>
Subject: Re: [PATCH] SCSI: Add the SGPIO support for sata_nv.c
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/10/31/136

Am Dienstag 31 Oktober 2006 11:40 schrieb Christoph Hellwig:
> On Tue, Oct 31, 2006 at 04:43:19PM +0800, Peer Chen wrote:
> > +	u32 cb_add, temp32;
> > +	struct device *dev = pci_dev_to_dev(pdev);
> > +	struct ata_host_set *host_set = dev_get_drvdata(dev);
> > +	u8 pro=0;
> > +	if (!(pro&0x40))
> > +		return;
> > +
> > +	temp32 = csr_add;
> > +	phost->host_sgpio.pcsr = (void *)temp32;
> > +	phost->host_sgpio.pcb = phys_to_virt(cb_add);
>
> Use of phys_to_virt is generally a bug.  What are you trying to do here?
I am also wondering whether casting of temp32 to a pointer is very 64bit 
friendly? At least my compiler on x86_64 gives a warning...
I also found 
http://lkml.org/lkml/2006/8/21/324
which looks alike at first glance and it seems NVidia didn't really fix what 
Andrew Morton told them to do so...
Cheers,
-- 
(°=                 =°)
//\ Prakash Punnoor /\\
V_/                 \_V
[unhandled content-type:application/pgp-signature]