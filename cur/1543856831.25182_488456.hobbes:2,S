Date: Tue, 05 Dec 2006 22:37:57 +0900
From: Magnus Damm <>
Subject: [PATCH 00/02] kexec: Move segment code to assembly files
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/12/5/97

kexec: Move segment code to assembly files
The following patches rearrange the lowlevel kexec code to perform idt,
gdt and segment setup code in assembly on the code page instead of doing 
it in inline assembly in the C files.
Our dom0 Xen port of kexec and kdump executes the code page from the 
hypervisor when kexec:ing into a new kernel. Putting as much code as
possible on the code page allows us to keep the amount of duplicated 
code low.
These patches are part of the Xen port of kexec and kdump which recently 
has been accepted into the xen-unstable.hg tree. Sending them upstream
now is an attempt to simplify future porting work.
Signed-off-by: Magnus Damm <magnus@valinux.co.jp>
---
 Applies to 2.6.19.
 arch/i386/kernel/machine_kexec.c     |   59 ----------------------------------
 arch/i386/kernel/relocate_kernel.S   |   58 ++++++++++++++++++++++++++++++---
 arch/x86_64/kernel/machine_kexec.c   |   58 ---------------------------------
 arch/x86_64/kernel/relocate_kernel.S |   50 +++++++++++++++++++++++++---
 4 files changed, 98 insertions(+), 127 deletions(-)
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/