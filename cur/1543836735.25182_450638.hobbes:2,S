Date: Sun, 6 Aug 2006 12:37:15 -0700
From: Andrew Morton <>
Subject: Re: sluggish system responsiveness under higher IO load
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/8/6/100

On Sun, 6 Aug 2006 15:54:42 +0200
Matthias Dahl <mlkernel@mortal-soul.de> wrote:
> > I'd suggest that you generate a kernel profile while the sluggishness is
> > happening.
> 
> Done...
Please always do reply-to-all, especially on linux-kernel.  I'm often two
days behind, sometimes five days.
> profile 1: (emerge of three huge packages which caused quite some IO)
> 
> ...
>
> ffffffff803a0430 scsi_dispatch_cmd                           459   0.7172
> ffffffff8026afda copy_user_generic_c                         854  22.4737
> ffffffff80270e00 default_idle                              49571 516.3646
> 0000000000000000 total                                     54590   0.0232
> 
> profile 2: (emerge of recent kernel sources- huge, causes quite some IO too)
> 
> ...
>
> ffffffff8020cae0 vm_normal_page                              814   4.2396
> ffffffff8026ad70 copy_page                                  1929   8.6116
> ffffffff802075e0 unmap_vmas                                 2362   1.2726
> ffffffff80207d20 copy_page_range                            2683   1.6938
> ffffffff80270e00 default_idle                              45081 469.5938
> 0000000000000000 total                                     64216   0.0273
> 
> I hope this helps.
Well, it rules a lot of things out.  There's plenty of idle time there, so
that rules out a lot of silly things and points the finger at IO scheduler
bustage, poor page-replacement decisions, etc.
hm.  Do you have any reason for thinking that it's specific to any
particular device driver or hardware setup?
How much memory does the machine have?
It'd be interesting if you could gather a `vmstat 1' trace during the
sluggish period.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/