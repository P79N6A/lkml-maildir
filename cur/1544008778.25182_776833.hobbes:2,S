Date: Thu, 4 Dec 2008 09:39:17 +0100
From: Ingo Molnar <>
Subject: Re: [PATCH 1/3] ftrace: graph of a single function
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/12/4/65

* Steven Rostedt <rostedt@goodmis.org> wrote:
> 
> On Wed, 3 Dec 2008, Andrew Morton wrote:
> 
> > On Wed, 3 Dec 2008 16:10:38 -0500 (EST)
> > Steven Rostedt <rostedt@goodmis.org> wrote:
> > > > > +
> > > > > +	seq_printf(m, "%s\n", str);
> > > > 
> > > > Can we use %pF here?
> > > 
> > > If there's a way to not print the "+offset".
> > 
> > Could be added, I guess.  I wonder if it would be
> > reused elsewhere.
> 
> There's lots of places in ftrace that would use it, and probably clean 
> up a bunch of code in the process.
Well, we do eventually want to have a trace_option that extends all 
function names with the +offset/size portion - and one that switches them 
to raw RIPs.
In rare occasions, when the same function has multiple call sites of the 
same child function, it can be useful. I ran into such scenarios with the 
latency tracer and it had this capability to do 'verbose' symbol 
printing.
So plain %pF wont cut it - please abstract out the "print function symbol 
string" bit within the ftrace infrastructure.
And the default trace_option for this should be to print without 
+offset/size spam, emphatically :)
	Ingo