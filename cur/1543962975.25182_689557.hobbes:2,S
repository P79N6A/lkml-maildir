Date: Mon, 05 May 2008 12:23:45 +0200
From: Andi Kleen <>
Subject: Re: [PATCH REPOST] CPA: Add statistics about state of direct mapping v4
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/5/5/151

>> +static unsigned long direct_pages_count[PG_LEVEL_NUM];
>> +
>> +void __meminit update_page_count(int level, unsigned long pages)
> 
> Why __meminit ? This is used in split_large_page()
True. Can you please just remove it? I think it came when this
was still only used in early memory init.
[insert standard rant about the work:code size benefit ratio of these
fine grained section identifiers being far too high]
>> +{
>> +#ifdef CONFIG_PROC_FS
> 
> Why keep an empty function when PROC_FS is disabled ?
So we don't have to add a ifdef in all the callers. Yes could probably
have an empty inline in that case in some header, but frankly that would
be a lot of code lines for saving only very minor code size in a very
unlikely CONFIG case.
-Andi