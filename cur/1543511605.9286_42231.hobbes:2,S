Date: Tue, 5 Oct 1999 19:25:43 +0200 (IST)
From: Oren Laadan <>
Subject: Major problems with knfsd-1.5.2
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/10/5/88

Hi,
I've been struggling to adapt knsfd-1.x.x ever since I upgraded to
RedHat 6.0. Below are several problems with the 1.5.2:
1. The package: the instructions for installation are unclear and
sometimes obsolete (e.g. "don't use the 'make install' but look at 
'etc/copy' script" - indeed, have a look at it ...
It would greatly help if there were complete instructions as to what
needs to be done, step-by-step to install it correctly.
2. Part of the patch nfsd-2.2.7-3.patch fails on 2.2.12.
After I compiled the package, the kernel, installed and reboot 
(assuming I did it correctly):
3. The server /etc/exports holds:
/usr	*.my.domain(ro,no_root_squash)
/usr/tmp	*.my.domain(rw,no_root_squash)
(where /usr/tmp is not a separate partition).
The client "mount server:/usr /mnt1" --> success, and then "mount
server:/usr/tmp /mnt2" --> fail (permission denied). The server wouldn't
export now anything to anyone. Had to unmount, kill and restart the
server knfsd. If the client tries the same in the reverse order - 
then /usr/tmp works and /usr fails. Same treatment is required.
4. The client mounts its root (NFSROOT) from server:/tftpboot/IP_ADDR.
This is done during boot (success). Later /etc/rc.d/rc3.d/netfs is
executed, which tries to mount server:/usr on /usr. This fails (though
the server reports success). The client machine now doesn't work at
all - since all file access results in "stale nfs handle" - don't forget,
root is mounted via NFS. So the client is completely screwed. The server
on the other hand, again - refuses to export anything to anyone after
that. Need to kill and restart.
I'd appreciate any help.
Oren.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/