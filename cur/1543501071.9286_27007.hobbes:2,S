Date: Tue, 29 Jun 1999 17:14:19 -0400
From: Jordan Mendelson <>
Subject: Re: Dual Ethernet Slowness Causing Lousy Benchmarks? (was: A very   informative benchmark.)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/6/29/107

Ingo Molnar wrote:
> 
> On Tue, 29 Jun 1999, Jordan Mendelson wrote:
> 
> > It seems to me that all the benchmarks used dual ethernet controllers
> > when they were benched against NT, and that's when the major degredation
> > showed up in performance (at least that's what this C'T article
> > suggests).
> 
> if by 'major degradation' you mean 'it can only deliver 1500 hits/sec',
> then yes. I mean, it must suck to be an OS that can serve only a meakly
> 129 million web pages per day on a single box ;)
By major degradation I mean, we can't deliver the same performance as an NT box
:)
> Such nonscaling is absolutely unacceptable to have around - so David S.
> Miller has SMP-scaled the networking code in 2.3 already - on my box and
> 2.3.9 TCP bandwith scales almost linearly on localhost - it shows almost
> no scaling on 2.2.10. (i do not have 4 100mbit ethernet connections - yet)
This is what I see from the C'T article (approximates):
Linux 1 CPU 4K files: 950 requests/second
NT 1 CPU 4K files: 940 requests/second
Linux 1 CPU 8K files: 850 requests/second
NT 1 CPU 8K files: 710 requests/second
Linux 4 CPU CGI: 240 requests/second
Linux 1 CPU CGI: 100 requests/second
NT 1 CPU CGI: 25 requests/second
NT 4 CPU CGI: 52 requests/second
Now here's the kicker:
Linux 4 CPU Dynamic Data/2 Eth: 1500 requests/second
Linux 1 CPU Dyanmic Data/2 Eth: 1100 requests/second
NT 4 CPU Dynamic Data/2 Eth: 2600 requests/second
NT 1 CPU Dyanmic Data/2 Eth: 2100 requests/second
Now scalability in SMP isn't the problem here, as even with 1 CPU we can't beat
NT's 1 CPU. It is either Apache's handling of the dynamic data generated by the
CGI, NT's version of perl is simply faster than ours, Linux's scheduler hurting
the perl process needed to delier dynamic data, or somewhere, the network load
balancing is not working and we are maxing out on bandwidth or CPU.
Now I'd say it's the CGI, but there was another CGI test which didn't suffer
like this, although it didn't generate the same dynamic data from what I can
tell.
These numbers also show that NT's SMP is about as bad as ours is. Is this a
problem with Intel's SMP itself or what?
Jordan
--
Jordan Mendelson     : 
http://jordy.wserv.com
Web Services, Inc.   : 
http://www.wserv.com
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/