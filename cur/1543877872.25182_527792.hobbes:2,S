Date: Thu, 5 Apr 2007 12:31:59 -0400
From: Jeff Dike <>
Subject: Re: [uml-devel] [PATCH 2/4] UML - tidy process.c
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/4/5/213

On Tue, Apr 03, 2007 at 07:50:16PM +0200, Blaisorblade wrote:
> Please, simply include uml-config.h and use just UML_CONFIG_MODE_TT.
okok :-)
	Jeff
Use only one ifdef to mark stack_sp as being tt mode only.
Signed-off-by: Jeff Dike <jdike@linux.intel.com>
--
 arch/um/include/kern_util.h |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)
Index: linux-2.6.21-mm/arch/um/include/kern_util.h
===================================================================
--- linux-2.6.21-mm.orig/arch/um/include/kern_util.h	2007-04-03 13:14:38.000000000 -0400
+++ linux-2.6.21-mm/arch/um/include/kern_util.h	2007-04-05 12:24:36.000000000 -0400
@@ -8,6 +8,7 @@
 
 #include "sysdep/ptrace.h"
 #include "sysdep/faultinfo.h"
+#include "uml-config.h"
 
 typedef void (*kern_hndl)(int, union uml_pt_regs *);
 
@@ -33,7 +34,7 @@ extern int nsyscalls;
 	UML_ROUND_DOWN(((unsigned long) addr) + PAGE_SIZE - 1)
 
 extern int kernel_fork(unsigned long flags, int (*fn)(void *), void * arg);
-#if defined(CONFIG_MODE_TT) || defined(UML_CONFIG_MODE_TT)
+#ifdef UML_CONFIG_MODE_TT
 extern unsigned long stack_sp(unsigned long page);
 #endif
 extern int kernel_thread_proc(void *data);
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/