Date: Mon, 28 Jan 2008 16:16:02 +0100
From: Toralf Förster <>
Subject: Re: (ondemand) CPU governor  regression between 2.6.23 and 2.6.24
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/28/195

Hello,
At Monday 28 January 2008 Ingo Molnar wrote :
> 
> it splits the CPU time between Xorg (root UID) and desktop apps. This 
> helps particularly well when there's compile jobs going on, etc. - Xorg 
good news for all Gentoo users ;)
> So if you have some time to play with this, could you please try the 
> following experiment. Put the following line into your 
> /etc/rc.d/rc.local file:
> 
>  echo 2 > /sys/kernel/uids/`grep -w dnetc /etc/passwd | cut -d: -f3`/cpu_share
>
> with group scheduling (CONFIG_FAIR_GROUP_SCHED=y) enabled. Also apply 
> the patch attached below as well - which fixes some interactivity 
> problems with group scheduling.
> Could you try that kernel and compare it to a FAIR_GROUP_SCHED-disabled 
> kernel's interactivity, and send us your observations?
With the patch and the sysfs-option my system works ok and last but not least
with the expected behaviour compared to a previous kernel.
In addition my first impression is that its responseness is better compared to
previous kernel versions and nearly the same compared to a kernel without
FAIR_GROUP_SCHED .
Compared to kernel 2.6.23 the 1-liner "time factor 819734028463158891" needs
now ~5.61 sec which is a little bit higher than the previous value of 5.44 sec.
Thanks for the solution (BTW b/c FAIR_GROUP_SCHED defaults to "y" I could bet
that more peoples run into this case).
-- 
MfG/Sincerely
Toralf Förster
pgp finger print: 7B1A 07F4 EC82 0F90 D4C2 8936 872A E508 7DB6 9DA3
[unhandled content-type:application/pgp-signature]