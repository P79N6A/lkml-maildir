Date: Wed, 26 Sep 2007 11:43:21 -0400
From: Erez Zadok <>
Subject: Re: [PATCH 10/25] Unionfs: add un/likely conditionals on copyup ops
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/9/26/213

In message <2DDDD55D-4445-4565-9384-4E4BE7B41D7D@mac.com>, Kyle Moffett writes:
> On Sep 26, 2007, at 09:40:20, Erez Zadok wrote:
[...]
> > Recently we've done a full audit of the entire code, and added un/ 
> > likely where we felt that the chance of succeeding is 95% or better  
> > (e.g., error conditions that should rarely happen, and such).
> 
> Actually due to the performance penalty on some systems I think you  
> only want to use it if the chance of succeeding is 99% or better, as  
> the benefit if predicted is a cycle or two and the harm if  
> mispredicted can be more than 50 cycles, depending on the CPU.
*That's* the information I was looking for, Kyle: what's the estimated
probability I should be using as my guideline.  I used 95% (20/1 ratio), and
you're telling me I should use 99% (100/1 ratio).  The difference between
the number of cycles saved/added is very compelling.  Given that I certainly
agree with you that I'm using un/likely too much.  I'll re-evaluate and
update my patch series then.
Thanks,
Erez.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/