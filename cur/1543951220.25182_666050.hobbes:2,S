Date: Mon, 10 Mar 2008 20:44:08 -0700 (PDT)
From: Roland McGrath <>
Subject: Re: [PATCH] x86: fix typo(?) in step.c
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/3/10/449

> So, is this going to be fully reverted, or is it worth pointing out/fixing
> other issues? The thing I'm recognizing right now is that
> eee3af4a2c83a97fff107ddc445d9df6fded9ce4 made the writes to
> DebugCtlMSR unconditional, which means any attempt to do
> debugging on i[345]86 will ultimately cause the kernel to oops. All of
> that stuff should really depend on CONFIG_X86_DEBUGCTLMSR...
I think it would be wise to excise all the BTS-related additions until
after 2.6.25.  But I am too swamped already and not planning to do
anything about this myself.  But, that said, FWIW it does not look to
me like debugctlmsr will ever be written on hardware that doesn't
support it.  The stores are all only enabled if TIF_DEBUGCTLMSR gets
set and thread.debugctlmsr is nonzero.  That can't be set by ptrace
unless arch_has_block_step() returns true.
Thanks,
Roland