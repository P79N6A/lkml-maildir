Date: Tue, 3 Sep 2002 10:50:27 -0700
From: "Feldman, Scott" <>
Subject: RE: TCP Segmentation Offloading (TSO)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/9/3/94

Jordi Ros wrote:
> What i am wondering is how come we only get a few percentage 
> improvement in throughput. Theoretically, since 64KB/1.5KB ~= 
> 40, we should get a throughput improvement of 40 times. 
You're confusing number of packets with throughput.  Cut the wire, and you
can't tell the difference with or without TSO.  It's the same amount of data
on the wire.  As David pointed out, the savings comes in how much data is
DMA'ed across the bus and how much the CPU is unburdened by the segmentation
task.  A 64K TSO would be one pseudo header and the rest payload.  Without
TSO you would add ~40 more headers.  That's the savings across the bus.
> Is there any other bottleneck in the system that prevents 
> us to see the 300% improvement? (i am assuming the card can 
> do tso at wire speed)
My numbers are against PCI 64/66Mhz, so that's limiting.  You're not going
to get much more that 940Mbps at 1GbE unidirectional.  That's why all of the
savings at unidirectional Tx are in CPU reduction.
-scott
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/