Date: Tue, 8 Aug 2000 14:01:34 +0200 (CEST)
From: Bert de Bruijn <>
Subject: 2.4.0-test6-pre7 sparc-smp boot failure (bootmem_init)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/8/8/46

on my dual cpu cparc20, 112 MB memory (64+16+16+16 in slots 0,1,2,3),
2.4.0-test6-pre7 (also tried pre5, same mm/ code, same result) dies at
boot time right before fb initialisation:
bootmem_init: Scan sp_banks,  init_bootmem(spfn[205],bpfn[205],mlpfn[c000])
free_bootmem: base[0] size[5000000]
free_bootmem: base[8000000] size[1000000]
reserve_bootmem: base[0] size[205000]
reserve_bootmem: base[205000] size[1800]
Booting Linux...
Level 15 InterruptLevel 15 Interrupt
and then it drops back to the ok prompt.
With nosmp as a kernel parameter, it only generates 1 Level 15 Interrupt
message..
From what I understand, free_bootmem should not only see the first two
chunks of physical address space (80MB @ offset 0, and 16 MB @ offset 128 
MB), but also the third one (16 MB @ offset 192 MB).
With mem=192m as a kernel parameter, it works as expected (96 MB memory
recognised and used). With mem=256, it's the same as without mem=
parameter.
btw, /proc/openprom/memory/available contains (all) 3 chunks of physical
memory: 
0x05000000 = 80 MB @ 0x0 = 0 MB, 
0x01000000 = 16 MB @ 0x08000000 = 128 MB, 
0x00f42000 = 16 MB - 760 KB @ 0x0c000000 = 192 MB
I don't know why the last SIMM isn't reported with it's full capacity.
-- 
/* Bert de Bruijn                 E-mail@work: bert.debruijn@mind.be  */
/* Linux & Open Source consultant     
http://alumni.ulyssis.org/~bob/
 */
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/