Date: Mon, 13 Mar 2006 21:31:56 +0100
From: Jean Delvare <>
Subject: [PATCH 4/8] adv7175: Drop unused encoder dump command
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/3/13/256

Drop support for the ENCODER_DUMP command in the adv7175 driver.
ENCODER_DUMP was never actually defined as far as I can see, so the
code was ifdef'd out, and I suspect it was never used, not even once,
as it includes an obvious array overrun.
The register values of this specific chip can be dumped in a generic
way using the i2c-dev driver and the "i2cdump" user-space tool if it
is ever really needed.
Signed-off-by: Jean Delvare <khali@linux-fr.org>
---
 drivers/media/video/adv7175.c |   26 --------------------------
 1 file changed, 26 deletions(-)
--- linux-2.6.16-rc5.orig/drivers/media/video/adv7175.c	2006-03-01 21:09:59.000000000 +0100
+++ linux-2.6.16-rc5/drivers/media/video/adv7175.c	2006-03-01 21:10:12.000000000 +0100
@@ -170,24 +170,6 @@
 	adv7175_write(client, 0x05, 0x25);
 }
 
-#ifdef ENCODER_DUMP
-static void
-dump (struct i2c_client *client)
-{
-	struct adv7175 *encoder = i2c_get_clientdata(client);
-	int i, j;
-
-	printk(KERN_INFO "%s: registry dump\n", I2C_NAME(client));
-	for (i = 0; i < 182 / 8; i++) {
-		printk("%s: 0x%02x -", I2C_NAME(client), i * 8);
-		for (j = 0; j < 8; j++) {
-			printk(" 0x%02x", encoder->reg[i * 8 + j]);
-		}
-		printk("\n");
-	}
-}
-#endif
-
 /* ----------------------------------------------------------------------- */
 // Output filter:  S-Video  Composite
 
@@ -406,14 +388,6 @@
 	}
 		break;
 
-#ifdef ENCODER_DUMP
-	case ENCODER_DUMP:
-	{
-		dump(client);
-	}
-		break;
-#endif
-
 	default:
 		return -EINVAL;
 	}
-- 
Jean Delvare
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/