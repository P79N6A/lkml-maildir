Date: Wed, 21 May 2003 10:43:55 +0100
From: Russell King <>
Subject: Re: [BUG] nfs client stuck in D state in linux 2.4.17 - 2.4.21-pre5
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/5/21/39

On Wed, May 21, 2003 at 10:29:23AM +0100, Russell King wrote:
> On Mon, May 19, 2003 at 05:20:27PM +0400, Vladimir Serov wrote:
> > My current kernel is 2.4.21-pre6 based with patches from 2.4.19-rmk7 
> > applied (well partially, except ide and pci cause i don't have them, 
> > board is mostly brutus). I'm using HARD mounted nfs
> > volume now !!! The tail of dmesg is following.
> 
> Looking back on stuff which happened a long time ago, there's a
> possibility that there's an ordering issue with set_current_state.
> 
> Please note that this is affects _all_ 2.4 architectures.
> 
> I think this was discussed about 6 months ago, so I'm surprised this
> hasn't made it into the 2.4.2x kernel (or no one else has seen the
> problem.)
Yes, it was first discovered 7 months ago, but it seems Marcelo didn't
merge the fix:
> Date: Fri, 18 Oct 2002 23:00:58 -0400 (EDT)
> From: Nicolas Pitre <nico@cam.org>
> To: Marcelo Tosatti <marcelo@conectiva.com.br>
> Subject: [PATCH] set_task_state() UP memory barriers
Nicolas included a more complete fix which updates all 2.4 architectures.
Nico - could you re-send your fix please?
-- 
Russell King (rmk@arm.linux.org.uk)                The developer of ARM Linux
             
http://www.arm.linux.org.uk/personal/aboutme.html
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/