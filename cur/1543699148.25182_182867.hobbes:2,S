Date: Tue, 09 Dec 2003 13:16:39 +0100
From: Petr Sebor <>
Subject: Re: Kernel 2.6-test10 on an Opteron
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/12/9/76

Ananda Bhattacharya wrote:
> Hello!
> 
> 	I was wondering if anyone has had any luck with 2.6 
> on a Dual Opteron system. I have a Broadcom 5702 ethernet 
> card, and the network starts up but it seems slugish. 
Hi,
I am playing with UP opteron system (2.6.0-t11) and have noticed the 
network slowness as well..
I am able to achieve max 8MBps on 100MBps network with the
Broadcom 5705...
00:0b.0 Ethernet controller: Broadcom Corporation NetXtreme BCM5705 
Gigabit Ethernet (rev 03)
         Subsystem: Micro-Star International Co., Ltd.: Unknown device 1300
         Flags: bus master, 66Mhz, medium devsel, latency 32, IRQ 16
         Memory at fa000000 (64-bit, non-prefetchable) [size=64K]
the board is MSI K8T - VIA KT800 chipset
with the 8MBps transferrate, the ftp daemon eats almost all of the
time and vmstat says that most of the time is spent inside of the 
kernel. (I am getting ~5MBps with rsync and SSH, so it is probably not
because of the proftpd)
on the sending side, the send-queue is 105168 (probably full) and on the 
receiving side the receive-queue (Recv-Q) has 65896 waiting packets.
dmesg reports:
tg3.c:v2.3 (November 5, 2003)
eth0: Tigon3 [partno(BCM95705A50) rev 3003 PHY(5705)] (PCI:33MHz:32-bit) 
10/100/1000BaseT Ethernet 00:0c:76:6a:b8:a7
tg3: eth0: Link is up at 100 Mbps, full duplex.
tg3: eth0: Flow control is on for TX and on for RX.
[vmstat report while proftpd running]
petr@opteron:~/music$ vmstat -n 1
procs -----------memory---------- ---swap-- -----io---- --system-- 
----cpu----
  r  b   swpd   free   buff  cache   si   so    bi    bo   in    cs us 
sy id wa
  1  0      0   4644  21988 802820    0    0     0  8192 2647    89  1 
99  0  0
  1  0      0   4132  22240 803060    0    0     0  8688 2674   122  0 
99  0  1
  1  0      0   4196  22244 803008    0    0     0  8192 2605   121  1 
95  4  0
  0  0      0   4760  22104 802588    0    0     0  8192 2727   388  1 
94  5  0
  1  0      0   4568  22112 802804    0    0     0     0 2808   651  1 
91  8  0
  1  0      0   5176  22096 802060    0    0     0 12288 2623    87  0 
100  0  0
  1  0      0   5048  22252 802040    0    0     0  8512 2663   119  1 
97  2  0
  1  0      0   4848  22264 802220    0    0     8  8192 2655   104  0 
99  1  0
  1  0      0   4848  22164 802484    0    0     0  8192 2628    77  1 
97  2  0
  1  0      0   4592  22108 802796    0    0     0  8192 2628    56  0 
98  2  0
  1  0      0   4368  22100 803012    0    0     0  8192 2648    81  1 
98  1  0
oops, sorry for the wrapped text ..
Regards,
Petr
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/