Date: Thu, 28 Aug 2003 14:11:56 -0300
From: Luiz Capitulino <>
Subject: Re: 2.6.0-test4-mm2
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/8/28/138

Em Qui, 2003-08-28 Ã s 13:02, Andrew Morton escreveu:
> Luiz Capitulino <lcapitulino@prefeitura.sp.gov.br> wrote:
> >
> > when using the hdparm program, thus:
> > 
> >  # hdparm /dev/hda
> > 
> >  I'm getting this:
> > 
> >  Oops: 0000 [#1]
> 
> This should fix it.
> 
> --- 25/include/linux/genhd.h~large-dev_t-12-fix	2003-08-27 10:36:32.000000000 -0700
> +++ 25-akpm/include/linux/genhd.h	2003-08-27 10:36:32.000000000 -0700
> @@ -197,7 +197,7 @@ extern void rand_initialize_disk(struct 
> 
>  static inline sector_t get_start_sect(struct block_device *bdev)
>  {
> -	return bdev->bd_part->start_sect;
> +	return bdev->bd_contains == bdev ? 0 : bdev->bd_part->start_sect;
>  }
>  static inline sector_t get_capacity(struct gendisk *disk)
>  {
 fixed! :)
 thanks,
-- 
Luiz Fernando N. Capitulino
<lcapitulino@prefeitura.sp.gov.br>
<
http://www.telecentros.sp.gov.br
>
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/