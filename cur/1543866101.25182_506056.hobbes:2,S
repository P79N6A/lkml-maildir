Date: Wed, 07 Feb 2007 11:13:58 +0100
From: John <>
Subject: Re: One-shot high-resolution POSIX timer periodically late
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/2/7/63

Ingo Molnar wrote:
> John wrote:
> 
>> Ingo Molnar wrote:
>> 
>>> 2.6.18-rt7 is pretty old, do you see the problem in 2.6.20-rc6-rt5 too?
>> 
>> Ingo, Thomas,
>> 
>> I cannot reproduce in 2.6.20-rc6-rt6, but it is not strictly an 
>> apples-to-apples comparison because I get a tsc clocksource in 
>> 2.6.20-rc6-rt6, and an acpi_pm clocksource in 2.6.18.6-rt7.
> 
> That suggests that the TSC was not deemed reliable by the newer kernel, 
> which almost always means it's not realiable. I think the problems you 
> were seeing are consistent with TSC being non-monotonic - so the fix is 
> to not use the TSC - and the newer kernel does this automatically.
Ingo,
Perhaps you've mis-read my message?
*2.6.18.6-rt7* installed an acpi_pm clocksource. When I used a boot 
parameter to force the clocksource to tsc, the high-resolution timer 
infrastructure broke (timers expired several *ms* too late).
On the other hand, *2.6.20-rc6-rt6* and *2.6.20-rt2* both installed a 
tsc clock source, and it works.
Therefore, it is not the newer kernel that ignored the tsc, but the 
older kernel. Thus I don't know what to make of your comment :-)
Regards,
John
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/