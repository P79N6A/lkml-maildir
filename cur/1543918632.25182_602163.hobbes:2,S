Date: Thu, 4 Oct 2007 16:22:52 -0700
From: Andrew Morton <>
Subject: Re: [patch 1/2] getattr - fill the size of pipes
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/10/4/431

On Tue, 2 Oct 2007 19:54:53 +0200 (CEST)
Jan Engelhardt <jengelh@computergmbh.de> wrote:
> [PATCH]: Fill the size of pipes
> 
> Instead of reporting 0 in size when stating() a pipe, we give the number of
> queued bytes. This might avoid using ioctl(FIONREAD) to get this information.
> 
> References and derived from: 
http://lkml.org/lkml/2007/4/2/138
> Cc: Eric Dumazet <dada1@cosmosbay.com>
> Signed-off-by: Jan Engelhardt <jengelh@gmx.de>
Cute feature, but it is (I assume) a Linux-specific extension and is
something which we'll need to maintain for ever and it invites
unportability to older Linuxes and other OSes and it introduces some risk
of breakage of existing applications.  And it slows down fstat on a pipe.
Given that the info can already be obtained via ioctl(FIONREAD) anyway, I
don't think that (gain > pain)?
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/