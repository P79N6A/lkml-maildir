Date: Fri, 19 Oct 2001 15:33:30 -0700
From: Andrew Morton <>
Subject: Re: [patch] ip autoconfig for PCMCIA NICs
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/10/19/137

David Woodhouse wrote:
> 
> akpm@zip.com.au said:
> >  Also, yenta_open() currently defers device initialisation to keventd,
> > so there is a good chance that cardbus init hasn't completed by the
> > time we hit ip autoconf, so the yenta_open_bh functionality is made
> > synchronous.
> 
> That was async at Linus' request - if we register the irq early, some
> boards die in an interrupt storm. Linux is currently fairly crap at
> noticing and recovering from interrupt storms.
> 
So any change in this area is untestable in the 2.4 context.  Sigh.
But how can the current code prevent IRQ problems?  AFAICT it just
delays the yenta_open_bh() operations by a short-but-random time
interval.
Should the IRQ be registered _after_ the call to cardbus_register()
when, presumably, the hardware is set up and has negated the IRQ
signal?
-
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/