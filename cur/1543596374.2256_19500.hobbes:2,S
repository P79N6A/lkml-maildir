Date: Wed, 4 Jul 2001 16:20:02 -0600
From: Steven Cole <>
Subject: [PATCH] 2.4.6-ac1 fix error in drivers/parport/parport_pc.c
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/7/4/87

I got this error building 2.4.6-ac1.
drivers/parport/driver.o: In function `parport_pc_find_ports':
drivers/parport/driver.o(.text.init+0x3f2): undefined reference to `init_pnp040x'
drivers/parport/driver.o(.text.init+0x400): undefined reference to `pnpbios_find_device'
drivers/parport/driver.o(.text.init+0x412): undefined reference to `init_pnp040x'
drivers/parport/driver.o(.text.init+0x420): undefined reference to `pnpbios_find_device'
make: *** [vmlinux] Error 1
My access to lkml archives is temporarily gone (marc.theaimsgroup.com is down
and other archive sites aren't very current), so please forgive me if someone else 
has already posted this fix.
Here is a patch which may be correct.  It worked for me.
Steven
--- linux-2.4.6-ac1/drivers/parport/parport_pc.c.original       Wed Jul  4 15:22:28 2001
+++ linux/drivers/parport/parport_pc.c  Wed Jul  4 15:26:03 2001
@@ -2828,12 +2828,14 @@
        detect_and_report_smsc ();
 #endif
 
+#if defined (CONFIG_PNPBIOS) || defined (CONFIG_PNPBIOS_MODULE)
        dev=NULL;
        while ((dev=pnpbios_find_device("PNP0400",dev)))
                count+=init_pnp040x(dev);
        dev=NULL;
         while ((dev=pnpbios_find_device("PNP0401",dev)))
                 count+=init_pnp040x(dev);
+#endif
 
        /* Onboard SuperIO chipsets that show themselves on the PCI bus. */
        count += parport_pc_init_superio (autoirq, autodma);
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/