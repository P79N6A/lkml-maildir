Date: Mon, 04 Mar 2002 22:21:43 -0800
From: "Martin J. Bligh" <>
Subject: Re: 2.4.19pre1aa1
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/3/5/38

>> seems to me to be that the way we do current swap-out scanning is
>> virtual,  not physical, and thus cannot be per zone => per node.
>
> actually if you do process bindings the pte should be all allocated
> local to the node if numa is enabled, and if there's no binding, no
> matter if you have rmap or not, the ptes can be spread across the whole
> system (just like the physical pages in the inactive/active lrus,
> because they're not per-node).
Why does it matter if the ptes are spread across the system?
I get the feeling I'm missing some magic trick here ...
In reality we're not going to hard-bind every process,
though we'll try to keep most of the allocations local.
Imagine I have eight nodes (0..7), each with one zone (0..7).
I need to free memory from zone 5 ... with the virtual scan,
it seems to me that all I can do is blunder through the whole
process list looking for something that happens to have pages
on zone 5 that aren't being used much? Is this not expensive?
Won't I end up with a whole bunch of cross-node mem transfers?
M.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/