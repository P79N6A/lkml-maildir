Date: Fri, 14 Mar 2008 15:34:48 +1100
From: Neil Brown <>
Subject: Re: sysfs Kernel BUG when RAID bitmap file has IO errors
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/3/14/8

On Wednesday March 12, akpm@linux-foundation.org wrote:
> On Wed, 12 Mar 2008 15:36:18 -0700
> Andrew Morton <akpm@linux-foundation.org> wrote:
> 
> > I assume this is the BUG_ON(count >= (ssize_t)PAGE_SIZE) in
> > fill_read_buffer().
That's a new "BUG_ON".
Before commit 8118a859dc7abd873193986c77a8d9bdb877adc8
it was 
       BUG_ON(count > (ssize_t)PAGE_SIZE);
But I've been looking for an excuse to remove the "super" file from
sysfs for a while.
It doesn't really fit the sysfs model, and now clearly breaks it.  And
it isn't really all that useful (you can just read from the raw device
if you want to see the superblock.
It was a "seems like a good idea at the time" thing which I now
regret.
So:  I'll just remove it. (with apologies to anyone who actually uses
it, but I suspect there are only two of you :-)
Patch to follow
NeilBrown