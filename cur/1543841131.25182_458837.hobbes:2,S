Date: Tue, 29 Aug 2006 17:08:46 -0400
From: "John Stoffel" <>
Subject: Re: [PATCH 17/17] BLOCK: Make it possible to disable the block layer [try #2]
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/8/29/340

>>>>> "Greg" == Greg KH <greg@kroah.com> writes:
Greg> On Tue, Aug 29, 2006 at 01:25:01PM +0100, Christoph Hellwig wrote:
>> On Tue, Aug 29, 2006 at 01:23:18PM +0100, David Howells wrote:
>> > Christoph Hellwig <hch@infradead.org> wrote:
>> > 
>> > > Same as above.  USB_STORAGE already selects scsi so it shouldn't need
>> > > to depend on block.
>> > 
>> > Ah, you've got it the wrong way round.
>> > 
>> > Because USB_STORAGE _selects_ SCSI rather than depending on it, even if SCSI
>> > is disabled, USB_STORAGE can be enabled, and that turns on CONFIG_SCSI, even
>> > if not all of its dependencies are available.
>> > 
>> > Run "make allyesconfig" and then try to turn off CONFIG_SCSI without this...
>> 
>> Eeek.  The easy fix is to change USB_STORAGE to depend on SCSI (*), but in
>> addition to that we should probably fix Kconfig aswell to adhere to
>> such constraints.
Greg> No, the reason this was switched around like this (it used to be the
Greg> other way), was that people constantly complained about not being able
Greg> to select the usb-storage driver in their configurations.
Maybe the better solution is to remove SCSI as an option, and to just
offer SCSI drivers and USB-STORAGE and other SCSI core using drivers
instead.  Then the SCSI core gets pulled in automatically.  It's not
like people care about the SCSI core, just the drivers which depend on
it.
John
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/