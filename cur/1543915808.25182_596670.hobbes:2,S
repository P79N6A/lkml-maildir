Date: Thu, 20 Sep 2007 12:59:45 +0400
From: Pavel Emelyanov <>
Subject: Re: 2.6.23-rc6-mm1 - make access to tasks nsproxy ligther (fix)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/9/20/144

Looks sane :)
[snip]
> Index: 2.6.23-rc6-mm1/kernel/exit.c
> ===================================================================
> --- 2.6.23-rc6-mm1.orig/kernel/exit.c
> +++ 2.6.23-rc6-mm1/kernel/exit.c
> @@ -408,6 +408,8 @@ void daemonize(const char *name, ...)
>  	current->fs = fs;
>  	atomic_inc(&fs->count);
> 
> +	if (current->nsproxy != init_task.nsproxy)
> +		get_nsproxy(init_task.nsproxy);
>  	switch_task_namespaces(current, init_task.nsproxy);
shouldn't we make the switch under this if() as well?
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/