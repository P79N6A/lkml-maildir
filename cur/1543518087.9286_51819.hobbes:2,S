Date: Mon, 06 Dec 1999 13:52:15 -0800
From: Erich Boleyn <>
Subject: Re: memory detection problems: 2.0.x vs. 2.2.x
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/12/6/150

nathan.zook@amd.com wrote:
> Okay, this looks like the problem we are having with some Athlon boards.  My
> guess is that the board supports ACPI, which includes SMAP (int 15/e820) for
> memory reporting.  Depending on the configuration, SMAP compliance may
> require that int 15/e801 memory reporting change.  At least one bios vendor
> has decided to remove int 15/e801 memory reporting instead, which is
> permitted.  2.2.x does not support SMAP (although it may, if I can get
> things together), so we end up with int 15/88 reporting.
> 
> POSSIBLE FIX:  It may be that if ACPI is turned off, int 15/e801 reporting
> is restored.  Since 2.2.x does not support ACPI, this should not result in
> any performance degredation.  If this does not work, you are stuck with
> using mem=XXX.
You might want to look at the code in the GRUB bootloader (look at
"
http://www.gnu.org/software/grub/".
  It does all this automatically...
AND has been tested on a bunch of systems (in particular, the SMAP feature
didn't always return contiguous memory as such in the table, so you have
to loop through the table and coalesce the entries, or just add them to
your page available pool and assume there can be multiple separate
sections of available memory).
It turned out to not take that much code, and if you absolutely want to
put the code into the Linux kernel, you can just steal/adapt the code
I wrote.
--
    Erich Stefan Boleyn                      \_         <erich@uruk.org>
  Mad but Happy Scientist                      \__    
http://www.uruk.org/
  Motto: "I'll live forever or die trying"        ---------------------------
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/