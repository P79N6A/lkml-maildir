Date: Fri, 14 Jan 2005 13:04:52 -0800
From: Ulrich Drepper <>
Subject: Re: short read from /dev/urandom
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/1/14/191

Theodore Ts'o wrote:
> What do you think?  Does gcc -pg calls sigaction with SA_RESTART, to
> avoid changing the behaviour of the programs that it is profiling?
Profiling certainly uses SA_RESTART.  But this was just one possible 
problem case.
I'm concerned that there is isgnificant code out there relying on the 
no-short-read promise.  And perhaps more importantly, other 
implementations promise the same.
The code in question comes from a crypto library which is in wide use 
(
http://www.cryptopp.com
) and it is using urandom under this assumption. 
  I fear there is quite a bit more code like this out there.  Changing 
the ABI after the fact is no good and dangerous in this case.
I know this is making the device special, but I really think the 
no-short-reads property should be perserved for urandom.
-- 
➧ Ulrich Drepper ➧ Red Hat, Inc. ➧ 444 Castro St ➧ Mountain View, CA ❖
[unhandled content-type:application/pgp-signature]