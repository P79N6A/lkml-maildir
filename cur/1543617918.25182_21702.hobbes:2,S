Date: Sat, 19 Jan 2002 19:34:05 +0100
From: Roberto Nibali <>
Subject: Re: Interface operative status detection
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/1/19/66

Hi,
 > interface, f.e. the ethernet link beat. This is a major show stopper
> against using Linux for "serious" IP routing.
[...]
> So what about the following idea: The network interface drivers use the
> netif_carrier_on() and netif_carrier_off() functions to update their
> interface card status (a bunch of drivers already do). To get this
> information forwarded to user mode via netlink socket, we use a kernel
> thread that goes through the device list, and everytime IFF_RUNNING
> and netif_carrier_ok() differ, IFF_RUNNING is updated and a message is
> sent via netlink.
A slightely different approach could be to use the alternative routes 
using the patch from Julian Anastasov [1] and set RTNH_F_BADSTATE. With 
the RTNH_F_DEAD we can select a new route in the multipath route setup.
You set up multiple routes and in case of link state problems you mark 
the route dead and the routeing code will not select the routes defined 
with that interface anymore. Together with an active NUD you get a 
fairly decent responsive HA system. But maybe I'm way off-topic and I 
missunderstood your concerns.
[1] 
http://www.linux-vs.org/~julian/01_alt_routes-2.4.12-5.diff
Cheers,
Roberto Nibali, ratz
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/