Date: Sat, 3 Nov 2001 09:34:45 -0800
From: George Garvey <>
Subject: 2.4.13-ac5 D-Link GigE and MSWin transfer timeout
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/11/3/56

   Made a pure 2.4.13-ac5 kernel. Linux system is P3 Asus CUV4X-E with
D-Link DGE550T. MS is an old Compaq P with DGE500T. Switch is 3-Com
3C16468 (copper, unmanaged). Attached is various system information.
   Samba (2.2.2) is used to mount the MS drive on Linux, and to mount
the Linux drive on MS.
   Moving a file from Linux to MS on MS results in a timeout
immediately:
	NETDEV WATCHDOG: eth0: transmit timed out
	eth0: Transmit timed out, TxStatus 570080
	NETDEV WATCHDOG: eth0: transmit timed out
	eth0: Transmit timed out, TxStatus 0000
The last TXStatus of 0000 is repeated until reboot. The first status is
not always the same, although the ?70080 seems consistent.
   Moving a file from Linux to MS on Linux results in a timeout much
later, but the symptom is the same.
   Using 2.4.13-ac3 I can move the file on the Linux system to MS
without problems. Moving it using the MS system always results in an
immediate timeout. The 2.4.13-ac3 always has nVidia's driver loaded, and
has RML's latency patch. The 2.4.13-ac5 was made with no other patches,
and booted without X. The modules loaded in the system are attached.
Kernels compiled with 2.59.3, rest of system with 3.0.1. MTU is 1500.
processor	: 0
vendor_id	: GenuineIntel
cpu family	: 6
model		: 8
model name	: Pentium III (Coppermine)
stepping	: 10
cpu MHz		: 999.759
cache size	: 256 KB
fdiv_bug	: no
hlt_bug		: no
f00f_bug	: no
coma_bug	: no
fpu		: yes
fpu_exception	: yes
cpuid level	: 2
wp		: yes
flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 mmx fxsr sse
bogomips	: 1992.29
           CPU0       
  0:      48247          XT-PIC  timer
  1:       1268          XT-PIC  keyboard
  2:          0          XT-PIC  cascade
  8:         27          XT-PIC  rtc
 10:      18357          XT-PIC  eth0
 11:        796          XT-PIC  cmpci, usb-uhci, usb-uhci
 14:       4503          XT-PIC  ide0
 15:       4073          XT-PIC  ide1
NMI:          0 
LOC:      48190 
ERR:          0
MIS:          0
Module                  Size  Used by
sr_mod                 11456   0  (autoclean) (unused)
usb-storage            41568   0  (unused)
sg                     22864   0  (unused)
ide-scsi                7392   0 
ide-cd                 26432   0 
cdrom                  29344   0  [sr_mod ide-cd]
scsi_mod               77520   3  [sr_mod usb-storage sg ide-scsi]
00:00.0 Host bridge: VIA Technologies, Inc. VT82C691 [Apollo PRO] (rev c4)
	Subsystem: Asustek Computer, Inc.: Unknown device 80e7
	Flags: bus master, medium devsel, latency 0
	Memory at f8000000 (32-bit, prefetchable) [size=64M]
	Capabilities: [a0] AGP version 2.0
	Capabilities: [c0] Power Management version 2
00:01.0 PCI bridge: VIA Technologies, Inc. VT82C598 [Apollo MVP3 AGP] (prog-if 00 [Normal decode])
	Flags: bus master, 66Mhz, medium devsel, latency 0
	Bus: primary=00, secondary=01, subordinate=01, sec-latency=0
	Memory behind bridge: ee000000-efdfffff
	Prefetchable memory behind bridge: eff00000-f7ffffff
	Capabilities: [80] Power Management version 2
00:04.0 ISA bridge: VIA Technologies, Inc. VT82C686 [Apollo Super] (rev 40)
	Subsystem: Asustek Computer, Inc.: Unknown device 80e7
	Flags: bus master, stepping, medium devsel, latency 0
	Capabilities: [c0] Power Management version 2
00:04.1 IDE interface: VIA Technologies, Inc. VT82C586 IDE [Apollo] (rev 06) (prog-if 8a [Master SecP PriP])
	Flags: bus master, stepping, medium devsel, latency 32
	I/O ports at d800 [size=16]
	Capabilities: [c0] Power Management version 2
00:04.2 USB Controller: VIA Technologies, Inc. VT82C586B USB (rev 16) (prog-if 00 [UHCI])
	Subsystem: Unknown device 0925:1234
	Flags: bus master, medium devsel, latency 32, IRQ 11
	I/O ports at d400 [size=32]
	Capabilities: [80] Power Management version 2
00:04.3 USB Controller: VIA Technologies, Inc. VT82C586B USB (rev 16) (prog-if 00 [UHCI])
	Subsystem: Unknown device 0925:1234
	Flags: bus master, medium devsel, latency 32, IRQ 11
	I/O ports at d000 [size=32]
	Capabilities: [80] Power Management version 2
00:04.4 Host bridge: VIA Technologies, Inc. VT82C686 [Apollo Super ACPI] (rev 40)
	Flags: medium devsel
	Capabilities: [68] Power Management version 2
00:05.0 Multimedia audio controller: C-Media Electronics Inc CM8738 (rev 10)
	Subsystem: Asustek Computer, Inc.: Unknown device 80e7
	Flags: bus master, stepping, medium devsel, latency 32, IRQ 11
	I/O ports at b800 [size=256]
	Capabilities: [c0] Power Management version 2
00:06.0 Serial controller: US Robotics/3Com 56K FaxModem Model 5610 (rev 01) (prog-if 02 [16550])
	Subsystem: US Robotics/3Com USR 56k Internal Voice Modem (Model 2976)
	Flags: medium devsel, IRQ 11
	I/O ports at b400 [size=8]
	Capabilities: [dc] Power Management version 2
00:09.0 Ethernet controller: D-Link System Inc: Unknown device 4000 (rev 07)
	Subsystem: D-Link System Inc: Unknown device 4000
	Flags: bus master, 66Mhz, medium devsel, latency 32, IRQ 10
	I/O ports at b000 [size=256]
	Memory at ed800000 (32-bit, non-prefetchable) [size=512]
	Expansion ROM at <unassigned> [disabled] [size=64K]
	Capabilities: [50] Power Management version 2
01:00.0 VGA compatible controller: nVidia Corporation NV15 (Geforce2 GTS) (rev a3) (prog-if 00 [VGA])
	Flags: bus master, 66Mhz, medium devsel, latency 64, IRQ 5
	Memory at ee000000 (32-bit, non-prefetchable) [size=16M]
	Memory at f0000000 (32-bit, prefetchable) [size=128M]
	Expansion ROM at efff0000 [disabled] [size=64K]
	Capabilities: [60] Power Management version 1
	Capabilities: [44] AGP version 2.0
        total:    used:    free:  shared: buffers:  cached:
Mem:  1053556736 143044608 910512128   143360 12038144 81121280
Swap: 2147467264        0 2147467264
MemTotal:      1028864 kB
MemFree:        889172 kB
MemShared:         140 kB
Buffers:         11756 kB
Cached:          79220 kB
SwapCached:          0 kB
Active:          76180 kB
Inact_dirty:     26552 kB
Inact_clean:         0 kB
Inact_target:   209696 kB
HighTotal:      130992 kB
HighFree:        24624 kB
LowTotal:       897872 kB
LowFree:        864548 kB
SwapTotal:     2097136 kB
SwapFree:      2097136 kB
[unhandled content-type:application/x-gunzip]