Date: Sun, 06 Jan 2008 14:53:12 +1100
From: Benjamin Herrenschmidt <>
Subject: Re: Idle loadavg of ~1, maybe MD related
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/5/245

> Maybe, but we can usually work around it pretty comfortably.
> 
> If smu_set_fan() is only ever called by a kernel thread then we can simply
> flip it over to using wait_for_completion_interruptible().
Hrm... as of today, it's mostly called from a kernel thread but I don't
totally iron out the possibility that we add control to those things via
sysfs... But that's definitely an option for now.
However, that's only part of the problem. There's a lot of I2C accesses
(and other SMU accesses to read SMU based sensors) and I doubt we can
make all of that "magically" interruptible.
I would much prefer if we had a way to tag a kernel thread to not add to
the load average when in interruptible sleep :-)
> If smu_set_fan() is also called from user processes then things aren't so
> easy...
Ben.