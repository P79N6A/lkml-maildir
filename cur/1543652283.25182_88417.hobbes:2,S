Date: Sun, 10 Nov 2002 17:51:37 -0800 (PST)
From: Linus Torvalds <>
Subject: Re: [PATCH][2.5] notsc option needs some attention/TLC
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/11/10/145

On Sun, 10 Nov 2002, William Lee Irwin III wrote:
> 
> Then the options have been mangled and it doesn't do this right anymore,
> with the net result that there's no way to turn off TSC synch ever. I've
> narrowed this down to config options setting CONFIG_X86_TSC for at least for
> all cpu revisions > 586
But that's the point. If you specify that you have a CPU > 586, then you 
specify at compile-time that you have TSC.
If your TSC is broken, then you shouldn't do that. You should compile for 
"generic x86" (386), and then say "notsc".
(Yeah, it should work for i486 too, but in general it's the "generic 386"  
that should work on all machines because it doesn't assume anything about
the capabilities of the machine).
But considering that we don't use the static TSC knowledge very much any
more, you might want to remove CONFIG_X86_TSC altogether, though, and
replace its uses with run-time checks. We've done that with a lot of the
other config stuff earlier (SSE/XMM) because the static compiled options
are just too inconvenient and not worth the maintenance hassles..
		Linus
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/