Date: Tue, 29 Apr 2008 19:49:24 -0400
From: "Michael Krufky" <>
Subject: Re: [v4l-dvb-maintainer] [GIT PATCHES] V4L/DVB updates and fixes for 2.6.26
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/4/29/710

On Tue, Apr 29, 2008 at 5:50 PM, Mauro Carvalho Chehab
<mchehab@infradead.org> wrote:
> Linus,
>
>  Please pull from:
>         ssh://master.kernel.org/pub/scm/linux/kernel/git/mchehab/v4l-dvb.git master
>
>  For the following:
>
>    - Fixes on mtm001, mtv022, pvrusb2, ivtv, cx88 and saa7134;
>    - new board additions on saa7134 and ivtv;
>    - load tuners only when needed;
>    - reorganization of tuner drivers that are shared between DVB and V4L;
>    - Addition of a new driver for Conexant CX23418 MPEG encoder chip (cx18).
[snip]
>  Mauro Carvalho Chehab (9):
>       Rename common tuner Kconfig names to use the same
>
>  Michael Krufky (4):
>       V4L/DVB (7789): tuner: remove static dependencies on analog tuner sub-modules
Linus has already merged the changes (thank you, Linus) ... However,
there is a bug.
My "remove static dependencies on analog tuner sub-modules" patch was
applied after Mauro's "Rename common tuner Kconfig names to use the
same" patch.
My patch has conditional behavior, based on CONFIG_DVB_CORE_ATTACH,
which was renamed to CONFIG_MEDIA_ATTACH in Mauro's patch.
To fix this, we need to do:
sed -i s/"CONFIG_DVB_CORE_ATTACH"/"CONFIG_MEDIA_ATTACH"/1
drivers/media/video/tuner-core.c
The issue will cause invalid module use counts upon unloading analog
tuner modules, if CONFIG_MEDIA_ATTACH is enabled.
I would be happy to fix this myself, but Mauro's patch has not yet
been backported into the linuxtv.org repository.
Mauro, can you do the above fix and send it in to Linus?
Thanks,
Mike Krufky