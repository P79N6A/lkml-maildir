Date: Sun, 7 Feb 1999 20:01:27 -0600 (CST)
From: "Andre M. Hedrick" <>
Subject: Re: UMC UM8886BF IDE DMA not usable
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/2/7/140

On Sun, 7 Feb 1999, Martin Mares wrote:
> Hello,
> 
> > > > The /proc/pci entry for the IDE chipset is the following:
> > > >   Bus  0, device  18, function  1:
> > > >     IDE interface: UMC UM8886BF (rev 16).
> > > >       Fast devsel.  Master Capable.  No bursts.
> > > >       Non-prefetchable 32 bit memory at 0x1f0 [0x1f0].
> > > >       Non-prefetchable unknown memory at 0x3f0 [0x3f6].
> > > >       Non-prefetchable 32 bit memory at 0x170 [0x170].
> > > >       Non-prefetchable unknown memory at 0x370 [0x376].
> > > 
> > > There is no address space for DMA-Busmaster.
> > 
> > Therefore it is a problem in the Linux PCI support,
> > since this case should never happen nowadays.
> > 
> > I have copied Martin (PCI guy) on this, so he can have a look.
> 
>    In this case, it's surely a hardware problem -- look at the /proc/pci
> entry above to see that the device is claiming these are _memory_
> regions, not I/O regions (!!), so I completely understand that the
> kernel didn't assign any I/O addresses to it. :-|
> 
>    Probably the only thing we can do is to add an exception to the
> PCI probing code to circumvent this bug. I'll look at it tomorrow.
I have a 486 UMC board sitting on top of my main system that I a can test
also and help with the work around.  I would bet that this chipset has
never reported this in the past and only did this in the most recent
kernels.  This is a result of listing it as an ide controller in
ide-pci.c.
Cheers,
Andre Hedrick
The (NEW) Linux IDE guy
http://www.dyer.vanderbilt.edu/server/udma/
You just need a bigger hammer, or learn how to swing the one you have better.
(C) me.....
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/