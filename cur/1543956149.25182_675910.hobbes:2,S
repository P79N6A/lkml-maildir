Date: Fri, 04 Apr 2008 18:45:34 +0200
From: Gerald Schaefer <>
Subject: [PATCH 0/3] hugetlbfs: cleanup and new primitives for s390, v3
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/4/4/245

On Thu, 2008-04-03 at 14:43 -0700, Andrew Morton wrote: 
> So basically the existing hugetlb arch support code needs a big de-macro
> crapectomy.  But your patch has gone and massively duplicated the existing
> crap, making that decrapectomy larger and harder.
ok, all good things come in threes I guess, so here is a new patchset that
also does the de-macro crapectomy. All macros are now replaced with inline
functions, which increased the total loc again by some amount.
This patchset cleans up hugetlbfs architecture headers and adds new
primitives as preparation for the s390 large page support. Most notably
we found that we need to add a new tlb flush for the copy-on-write of
a large page (patch 2/3). We think that this is a bug, but obviously one
that hasn't shown up so far on any of the other large page architectures.
Cross-Compile tests on the affected architectures (and one unaffected)
worked fine, but I had no cross-compiler for sh.
--
Gerald Schaefer