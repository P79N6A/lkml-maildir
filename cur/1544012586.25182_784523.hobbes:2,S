Date: Sun, 28 Dec 2008 20:30:46 +0100
From: Andi Kleen <>
Subject: Re: [PATCH 0/3] Remove interrupt stack table usage from x86_64 kernel
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/12/28/61

> One fatal problem is enough -- I don't thing that patch can be made to 
> work.  Pity since it did clean up some stuff.
Not sure that was true anyways.
> I would like however to speed up kvm.  Here's a plan:
> 
> 1. Add per-cpu IDT
You don't need that, do you?  Just two sets.
> 2. When switching to the guest TR (and other state), switch off IST use 
> in the current IDT
> 3. When switching away from the kvm task, restore the IST entries
> 
> per-cpu IDT would cost around 4K per cpu.  I propose to make it 
> kconfigurable, and have kvm select it.
If anything please make it runtime switchable and disable it on Intel
CPUs.
-Andi
-- 
ak@linux.intel.com