Date: Thu, 22 May 2003 18:22:49 +0200 (MEST)
From:  Andries.Brouwer@cwi ...
Subject: Re: keyboard.c/kd.h field width fixes
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/5/22/113

    From: William Lee Irwin III <wli@holomorphy.com>
    These guys get massive numbers of warnings about comparisons always true
    or false due to limited ranges of data types. This appears to kill off
    the warnings.
    diff -prauN mm8-2.5.69-1/include/linux/kd.h mm8-2.5.69-2/include/linux/kd.h
    --- mm8-2.5.69-1/include/linux/kd.h    2003-05-04 16:53:37.000000000 -0700
    +++ mm8-2.5.69-2/include/linux/kd.h    2003-05-22 07:57:24.000000000 -0700
    @@ -95,8 +95,8 @@ struct unimapinit {
     #define    KDSKBLED    0x4B65    /* set led flags (not lights) */
     
     struct kbentry {
    -    unsigned char kb_table;
    -    unsigned char kb_index;
    +    unsigned short kb_table;
    +    unsigned short kb_index;
         unsigned short kb_value;
     };
     #define        K_NORMTAB    0x00
Unfortunately it also changes the ioctl interface.
This should not be applied.
Andries
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/