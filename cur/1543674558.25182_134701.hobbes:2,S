Date: Thu, 22 May 2003 11:39:32 -0700
From: David Mosberger <>
Subject: Re: [PATCH] per-cpu support inside modules (minimal)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/5/22/147

  Rusty> OK, this does the *minimum* required to support
  Rusty> DEFINE_PER_CPU inside modules.  If we decide to change
  Rusty> kmalloc_percpu later, great, we can turf this out.
  Rusty> Basically, overallocates the amount of per-cpu data at boot
  Rusty> to at least PERCPU_ENOUGH_ROOM if CONFIG_MODULES=y
  Rusty> (arch-specific by default 16k: I have only 5700 bytes of
  Rusty> percpu data in my kernel here, so makes sense), and a special
  Rusty> allocator in module.c dishes it out.
  Rusty> Comments welcome!
Looks good to me.  For ia64, I guess I'll want to add a
	#define PERCPU_ENOUGH_ROOM	PERCPU_PAGE_SIZE
somewhere, but that doesn't sound so hard. ;-)
Thanks!
	--david
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/