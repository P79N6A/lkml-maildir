Date: Mon, 9 Jun 2003 13:26:37 -0700 (PDT)
From: Dan Carpenter <>
Subject: Re: memtest86 on the opteron
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/6/9/172

Thanks all,
Here is the patch for the CPU ID.
regards,
dan carpenter
Penguin Computing
--- init.c.orig	Mon Jun  9 10:23:10 2003
+++ init.c	Mon Jun  9 10:25:44 2003
@@ -402,6 +402,16 @@
 			}
 			l1_cache = cpu_id.cache_info[3];
 			l1_cache += cpu_id.cache_info[7];
+                case 15:
+                        switch(cpu_id.model) {
+                        case 5:
+				cprint(LINE_CPU, 0, "AMD Opteron");
+				off = 11;
+				l1_cache = cpu_id.cache_info[3];
+				l1_cache += cpu_id.cache_info[7];
+				l2_cache = (cpu_id.cache_info[11] << 8);
+				l2_cache += cpu_id.cache_info[10];
+                        }
 		}
 		break;
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/