Date: Mon, 4 Nov 2002 10:44:13 +0100
From: Jens Axboe <>
Subject: Re: swsusp: don't eat ide disks
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/11/4/33

On Sun, Nov 03 2002, Linus Torvalds wrote:
> 
> On Sun, 3 Nov 2002, Linus Torvalds wrote:
> > 
> > The above should work pretty much on all block drivers out there, btw:
> > the ones that don't understand SCSI commands should just ignore requests
> > that aren't the regular REQ_CMD commands.
> 
> Note that "should work" does not necessarily mean "does work". For
> example, in the IDE world, some of the generic packet command stuff is
> only understood by ide-cd.c, and the generic IDE layer doesn't necessarily
> understand it even if you have a disk that speaks ATAPI. I think Jens will 
> fix that wart.
It's probably not a good idea to rely on ata drives that also speak
atapi, to my knowledge only a few old WDC drives ever did that. Since we
are basically moving to the point where "SCSI" commands is the
commandset that the block layer uses to make drivers do things for it,
I had the idea of doing a rq -> taskfile conversion for ide. Just for
simple things like read/write and sync cache, basically stuff that is
directly translatable. That would make Linus' example actually work, and
it would also make the direct read/write programs using SG_IO work on
IDE drives as well.
-- 
Jens Axboe
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/