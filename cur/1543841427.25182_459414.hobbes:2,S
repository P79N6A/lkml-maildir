Date: Thu, 31 Aug 2006 12:43:12 -0400
From: Trond Myklebust <>
Subject: Re: bug in nfs in 2.6.18-rc5?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/8/31/177

On Thu, 2006-08-31 at 12:24 -0400, Shaya Potter wrote:
> why does the client care about server mounted file systems?
It wants to allow POSIX applications to work correctly even in the case
where the nfsd administrator is using 'nohide'. It wants those same
applications to work correctly in the case where the nfsd administrator
is exporting more than one filesystem over NFSv4.
>   The 
> server's nfsd has to tell them apart, otherwise shouldn't give them to 
> the client.  Otherwise it seems like the nfsd and the nfs client have to 
> have innate knowledge of each other.
Of course the server knows that it is crossing a mountpoint. The client
figures it out by looking at the 'fsid' attribute (which uniquely labels
the filesystem on that server) in order to figure out which filesystem
that the file/directory it just looked up belongs to. Whenever the
fileid changes between parent directory and child, that means that a
mountpoint was crossed on the server.
  Trond
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/