Date: Tue, 27 Jan 2004 10:18:58 -0700
From: Tom Rini <>
Subject: Re: Using 8 Instruction and Data BAT registers in 82xx
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/1/27/218

On Mon, Jan 26, 2004 at 10:29:41AM -0800, Dave Johnson wrote:
> 
> Hi All:
> As there are 8 data and Instruction BAT registers in
> some 82xx flavors, and Cort has posted a patch to ADD
> these registers
> (
http://www.ussg.iu.edu/hypermail/linux/kernel/0209.1/0871.html
)
> I was wondering if anyone has any idea how to use
> these addistional BAT regs be used?? Perhaps for new
> processes and threads, etc.
Step one would be to audit the usages of the 8_BATS feature to ensure
that they'll be fine if invoked on an 82xx with 8 BATS.  It's almost
certainly going to be true, but should still be done.
Step two would be to distinguish the 82xx's with 8 BATs from the ones
that don't.  I don't know if these have a different PVR, but I hope they
do, otherwise it'll be harder (but not impossible certainly) to.
Finally, as you've probably surmised, all that we do with these
additional BATs is to clear them out.  It could be possible to extend
io_block_mapping to make use of these additional BATs (and
v_mapped_by_bats/p_mapped_by_bats, etc).
Trying to do processes and/or threads (i.e. userland stuff) becomes a
giant pain (per-context BAT mappings have to be tracked), there's lots
of security implications to keep in mind, and of course the overhead of
doing all of this will probably cancel out any speed gain you would have
otherwise gotten.
-- 
Tom Rini
http://gate.crashing.org/~trini/
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/