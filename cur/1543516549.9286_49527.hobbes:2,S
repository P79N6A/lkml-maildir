Date: Fri, 19 Nov 1999 13:56:28 -0500
From: "Zachary Williams" <>
Subject: Re: Accept() problem
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/11/19/66

----- Original Message -----
From: Dean Gaudet <dgaudet-list-linux-kernel@arctic.org>
To: Lars Marowsky-Bree <lmb@kernel.org>
Cc: Zachary Williams <admin@ztnet.com>; <linux-kernel@vger.rutgers.edu>
Sent: Thursday, November 18, 1999 1:48 PM
Subject: Re: Accept() problem
>
>
> On Wed, 17 Nov 1999, Lars Marowsky-Bree wrote:
>
> > Otherwise, what you are describing is a well known problem with the
> > way Apache listens for new requests and is being addressed. You are
> > right that it requires support from the kernel and Apache at the same
> > time though.
>
> if it's so well known, why haven't i heard of it?  given that i'm the
> person who wrote the current apache 1.3.x accept loop.  perhaps you could
> explain what it is apache is doing wrong.
>
> Dean
>
Well, I don't believe apache is at fault.  I'm pretty sure this is an kernel
level issue.  Increasing the max_tcp_syn_backlog (from 128 to 1024) has made
it much more difficult to 'stall' apache.  I'm sure that the wakeone code in
2.3.x has taken care of that issue.  Just waiting for it to hit a stable
release in 2.4.  Keep in mind, this 'problem' (again, that apache does not
look to be at fault) is on EXTREME load.  Which means that our tulip drivers
(I think with some current bug in them) could be contributing as well.
There are many factors, and it's been narrowed to high load, with kernel
2.2.9-2.2.14pre6, with apache 1.3.6 or 1.3.9 (havn't tested lesser
versions).  And on multiple hardware platforms.  So, with all that in mind,
I've turned up the syn_backlog, and am hoping for the best, until wake-one
is implemented in a stable kernel.
Zach
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/