Date: Sun, 11 Jul 2004 03:42:58 -0700
From: Andrew Morton <>
Subject: Re: [announce] [patch] Voluntary Kernel Preemption Patch
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/7/11/59

Ingo Molnar <mingo@elte.hu> wrote:
>
> 
> * Andrew Morton <akpm@osdl.org> wrote:
> 
> > OK, but most of the new ones are unneeded with CONFIG_PREEMPT=y.  I'm
> > still failing to see why a non-preempt, voluntary preemption kernel
> > even needs to try to be competitive with a preemptible kernel?
> 
> the reason is difference in overhead (codesize, speed) and risks (driver
> robustness).
I don't recall any testing results which showed a significant performance
difference from CONFIG_PREEMPT.
> We do not want to enable preempt for Fedora yet because it
> breaks just too much stuff
What stuff?
> (Long-term i'd like to see preempt be used unconditionally - at which
> point the 10-line CONFIG_VOLUNTARY_PREEMPT Kconfig and kernel.h change
> could go away.)
We'll never get there if people don't at least report the broken "stuff",
let alone fix it.  And "stuff" is already broken on SMP, yes?
Your voluntary preempt patch will need to borrow preempt_spin_lock() and
preempt_write_lock() btw - otherwise it won't improve worst-case latencies
on SMP at all.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/