Date: Fri, 12 Jan 2007 23:52:02 +0300
From: Michael Tokarev <>
Subject: Re: O_DIRECT question
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/1/12/155

Michael Tokarev wrote:
[]
> After all the explanations, I still don't see anything wrong with the
> interface itself.  O_DIRECT isn't "different semantics" - we're still
> writing and reading some data.  Yes, O_DIRECT and non-O_DIRECT usages
> somewhat contradicts with each other, but there are other ways to make
> the two happy, instead of introducing alot of stupid, complex, and racy
> code all over.
By the way.  I just ran - for fun - a read test of a raid array.
Reading blocks of size 512kbytes, starting at random places on a 400Gb
array, doing 64threads.
 O_DIRECT: 336.73 MB/sec.
!O_DIRECT: 146.00 MB/sec.
Quite a... difference here.
Using posix_fadvice() does not improve it.
/mjt
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/