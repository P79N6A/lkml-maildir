Date: Mon, 31 Oct 2005 10:13:16 -0800
From: Fernando Lopez-Lezcano <>
Subject: Re: 2.6.14-rt1
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/10/31/199

On Sun, 2005-10-30 at 14:33 +0100, Ingo Molnar wrote:
> i have released the 2.6.14-rt1 tree, which can be downloaded from the 
> usual place:
> 
> 
http://redhat.com/~mingo/realtime-preempt/
> 
> this release is mainly about ktimer fixes: it updates to the latest 
> ktimer tree from Thomas Gleixner (which includes John Stultz's latest 
> GTOD tree), it fixes TSC synchronization problems on HT systems, and 
> updates the ktimers debugging code.
> 
> These together could fix most of the timer warnings and annoyances 
> reported for 2.6.14-rc5-rt kernels. In particular the new 
> TSC-synchronization code could fix SMP systems: the upstream TSC 
> synchronization method is fine for 1 usec resolution, but it was not 
> good enough for 1 nsec resolution and likely caused the SMP bugs 
> reported by Fernando Lopez-Lezcano and Rui Nuno Capela.
I just booted into 2.6.14-rt1 (SMP, no HIGH_REG_TIMERS) and got these:
... ITSC warped from 000000622fc9fbbf [0] to 000000622fc87638 [1].
softirq-timer/1/13[CPU#1]: BUG in __get_nsec_offset at
kernel/time/timeofday.c:181
 [<c0128167>] __WARN_ON+0x67/0x90 (8)
 [<c0143d16>] get_realtime_clock+0x266/0x2d0 (48)
 [<c014104f>] ktimer_run_queues+0x2f/0x130 (96)
 [<c01317ee>] run_timer_softirq+0xde/0x380 (48)
 [<c03750b5>] schedule+0x85/0x100 (24)
 [<c012d588>] ksoftirqd+0x118/0x1e0 (28)
 [<c012d470>] ksoftirqd+0x0/0x1e0 (44)
 [<c013d31c>] kthread+0xac/0xb0 (4)
 [<c013d270>] kthread+0x0/0xb0 (12)
 [<c0101545>] kernel_thread_helper+0x5/0x10 (16)
... ITSC warped from 00000064bbf83c4f [0] to 00000064bbf216ec [1].
softirq-timer/1/13[CPU#1]: BUG in __get_nsec_offset at
kernel/time/timeofday.c:181
 [<c0128167>] __WARN_ON+0x67/0x90 (8)
 [<c0143d16>] get_realtime_clock+0x266/0x2d0 (48)
 [<c014104f>] ktimer_run_queues+0x2f/0x130 (96)
 [<c01317ee>] run_timer_softirq+0xde/0x380 (48)
 [<c03750b5>] schedule+0x85/0x100 (24)
 [<c012d588>] ksoftirqd+0x118/0x1e0 (28)
 [<c012d470>] ksoftirqd+0x0/0x1e0 (44)
 [<c013d31c>] kthread+0xac/0xb0 (4)
 [<c013d270>] kthread+0x0/0xb0 (12)
 [<c0101545>] kernel_thread_helper+0x5/0x10 (16)
... ITSC warped from 0000006748267cdf [0] to 00000067481d6636 [1].
softirq-timer/1/13[CPU#1]: BUG in __get_nsec_offset at
kernel/time/timeofday.c:181
 [<c0128167>] __WARN_ON+0x67/0x90 (8)
 [<c0143d16>] get_realtime_clock+0x266/0x2d0 (48)
 [<c014104f>] ktimer_run_queues+0x2f/0x130 (96)
 [<c01317ee>] run_timer_softirq+0xde/0x380 (48)
 [<c03750b5>] schedule+0x85/0x100 (24)
 [<c012d588>] ksoftirqd+0x118/0x1e0 (28)
 [<c012d470>] ksoftirqd+0x0/0x1e0 (44)
 [<c013d31c>] kthread+0xac/0xb0 (4)
 [<c013d270>] kthread+0x0/0xb0 (12)
 [<c0101545>] kernel_thread_helper+0x5/0x10 (16)
... ITSC warped from 00000069d454bd6f [0] to 00000069d44857fc [1].
softirq-timer/1/13[CPU#1]: BUG in __get_nsec_offset at
kernel/time/timeofday.c:181
 [<c0128167>] __WARN_ON+0x67/0x90 (8)
 [<c0143d16>] get_realtime_clock+0x266/0x2d0 (48)
 [<c014104f>] ktimer_run_queues+0x2f/0x130 (96)
 [<c01317ee>] run_timer_softirq+0xde/0x380 (48)
 [<c03750b5>] schedule+0x85/0x100 (24)
 [<c012d588>] ksoftirqd+0x118/0x1e0 (28)
 [<c012d470>] ksoftirqd+0x0/0x1e0 (44)
 [<c013d31c>] kthread+0xac/0xb0 (4)
 [<c013d270>] kthread+0x0/0xb0 (12)
 [<c0101545>] kernel_thread_helper+0x5/0x10 (16)
... ITSC warped from 00000069d454bd6f [1] to 00000069d4515d11 [1].
softirq-timer/1/13[CPU#1]: BUG in __get_nsec_offset at
kernel/time/timeofday.c:181
 [<c0128167>] __WARN_ON+0x67/0x90 (8)
 [<c01436e6>] get_monotonic_clock+0x246/0x2b0 (48)
 [<c014104f>] ktimer_run_queues+0x2f/0x130 (96)
 [<c01317ee>] run_timer_softirq+0xde/0x380 (48)
 [<c03750b5>] schedule+0x85/0x100 (24)
 [<c012d588>] ksoftirqd+0x118/0x1e0 (28)
 [<c012d470>] ksoftirqd+0x0/0x1e0 (44)
 [<c013d31c>] kthread+0xac/0xb0 (4)
 [<c013d270>] kthread+0x0/0xb0 (12)
 [<c0101545>] kernel_thread_helper+0x5/0x10 (16)
-- Fernando
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/