Date: Tue, 22 Aug 2000 06:16:28 +0000
From: Gleb Natapov <>
Subject: Re: dev_mc_lock question.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/8/22/48

kuznet@ms2.inr.ac.ru wrote:
> 
> Hello!
> 
> >  Can somebody explain me please why 'dev_mc_lock' is global for all
> > network devices and not one per 'net_device' structure?
> 
> Do you modify mc lists each other microsecond? 8)8)
No, but I want to call 'dev_mc_add()', 'dev_mc_delete()' from
'dev->set_multicast_list()' (where 'dev' is virtual device) and this
cause deadlock on smp because of global 'dev_mc_lock'.
> 
> In any case, this lock is bug as whole. mc lists should be modified
> only under dev->xmit_lock.
So, is it safe to remove it? Do you want me to send patch?
PS: you accidentally CCed the answer to the old list (vger.rutgers.edu)
:)
--
			Gleb.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/