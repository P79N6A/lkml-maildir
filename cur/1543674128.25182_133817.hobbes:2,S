Date: Sun, 18 May 2003 21:59:13 +0200
From: Felix von Leitner <>
Subject: need better I/O scheduler for bulk file serving
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/5/18/82

I'm doing some network scalability testing on Linux.  I'm using sendfile
and epoll on non-blocking file descriptors, and I am uploading several
large files (CD images in my case) to several downloaders.
When only one peer is downloading, I get wire speed bandwidth
utilization.
When three people are downloading different images (my server "only" has
512 MB RAM, so it can't hold even one of the images in memory) at the
same time, the bandwidth utilization goes down to 6 MB/sec on my fast
ethernet NIC.  The hard disk appears to be busy seeking.
What knobs exist to tweak this?  This appears to be exactly the kind of
problem the I/O schedulers are trying to solve, right?  And the kernel
has perfect knowledge of what is going to happen because sendfile is
called with file size as length.  Larger read-ahead maybe?
Felix
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/