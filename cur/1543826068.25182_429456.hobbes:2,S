Date: Fri, 02 Jun 2006 09:20:52 -0600
From: (Eric W. Biederman)
Subject: Re: [Fastboot] [RFC][PATCH] Add missing notifier before crashing
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/6/2/175

Preben Traerup <Preben.Trarup@ericsson.com> writes:
> Something like out of memory and oops-es are enough to deeme the system must
> panic
> because it is simply not supposed to happen in a Telco server at any time.
That is clearly enough to deem that the system must take some sever action and
stop running.  You don't necessarily have to handle it through a kernel panic.
> kdump helps debugging these cases, but more importantly another server
> must take over the work, and this has and always will have highest priority.
>
> I'm happy about what crash_kexec does today, but the timing issue makes it
> unusable for
> notifications to external systems, if I need to wait until properly running in
> next kernel.
Nothing says you have to wait until properly running in the next kernel.
You can also write a dedicated piece of code that just pushes one packet
out the NIC.  Then you can start up a kernel for analysis purposes.
Although I have a hard time believing you can't tune a kernel to start
up quickly enough if you leave out just about everything.
And for purposes analysis assume that the oops happened somewhere in 
the network stack.
> That leaves me the choice of doing notification before executing crash_kexec ?
Only because you have assumed that you have to start another kernel and 
starting that other kernel must be an expensive operation.
> Since I'm apperantly not the only one left with this choice I rather prefer a
> solution
> made in public, that is known to be "bad" in some (well known) situations than
> each and everybody implements their own solution to the same problem.
It is certainly worth discussing.
Eric
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/