Date: Thu, 11 Nov 1999 00:45:33 -0500 (EST)
From: Michael Nelson <>
Subject: smbfs: "rm -rf" dircache problems
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/11/10/239

I noticed this weekend that "rm -rf" doesn't work very well on SMBFS
because as its dircache gets repopulated, a whole bunch of entries are
skipped which happen to now be below filp->f_pos.
A cursory glance at the NFS and NCPFS file systems seems to show that the
former doesn't have this problem, but NCPFS may.
Has this issue been raised before? Otherwise, thoughts/ideas? I've thought
about "snapshotting" the dircache during the initial readdir(), but it
seems like a waste of memory and there doesn't appear to be any clean way
to know when the user is done using readdir() unless they go all the way
to the last readdir() entry.
thanks,
-mike
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/