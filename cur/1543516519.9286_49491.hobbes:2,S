Date: Fri, 19 Nov 1999 13:09:47 +0000 (GMT)
From: Alan Cox <>
Subject: Re: 2.2.14pre7 and ethertap
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/11/19/30

> PPxP uses ethertap and it worked well with 2.2.14pre4 or
> earlier, but when I reboot after installation of 2.2.14pre7
> it didn't work.
Does reversing this fix it ?
diff -u --recursive --new-file --exclude=CVS --exclude=.cvsignore ../vanilla/2.2/linux/net/ethernet/eth.c linux/net/ethernet/eth.c
--- ../vanilla/2.2/linux/net/ethernet/eth.c	Mon Jan 12 15:28:25 1998
+++ linux/net/ethernet/eth.c	Thu Sep 23 12:23:28 1999
@@ -201,7 +201,7 @@
 	 *	seems to set IFF_PROMISC.
 	 */
 	 
-	else if(dev->flags&(IFF_PROMISC/*|IFF_ALLMULTI*/))
+	else if(1 /*dev->flags&IFF_PROMISC*/)
 	{
 		if(memcmp(eth->h_dest,dev->dev_addr, ETH_ALEN))
 			skb->pkt_type=PACKET_OTHERHOST;
If so then I actually think the bug is in the application, and this just
tripped it (ethertap used to miss some checks about packets being for its
mac address but the above bug fix also inadvertently cured ethertap 8))
Alan
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/