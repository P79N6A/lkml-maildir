Date: Tue, 6 Mar 2007 17:42:36 +0100
From: Eric Lacombe <>
Subject: Re: Linux 2.6.19.2: maybe a bug inside the r8169 network driver (was Re: Linux 2.6.19.2: Freeze with CIFS mount)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/3/6/257

Hello,
I've just triggered the bug again but _now_ without the nvidia proprietary 
module. Unfortunately, I hadn't enable the DEBUG options yet.
Nevertheless, It seems that the bug was triggered when the NAS was going to 
awake and that 2 user applications wanted to access it during his awakening.
Maybe it could give you some clues about where the problem could be (it seems 
to be a deadlock that occur when (maybe) the r8169 driver is waiting to serve 
one application and that an other one reclaim the same type of service, 
dunno...).
I will give you more information and a trace if I can obtain it.
Thanks
	Eric Lacombe
On Monday 05 March 2007 23:16:40 Francois Romieu wrote:
> Eric Lacombe <tuxiko@free.fr> :
> [...]
>
> > Also, if you have some new ideas about the problem or what I could try to
> > trigger it more frequently (I already wake up the NAS as more as I can,
> > but maybe I could write a script to do that), I would be thankful.
>
> You can add more DEBUG options for spinlock and stack usage, disable
> preempt and pray for a trace before the crash. If you do not have a
> second host to add more traffic (wrt to bandwidth and/or pps), try to
> dd your disk and/or your remote storage to /dev/null while watching TV.
>
> You are out of luck if it does not crash more easily.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/