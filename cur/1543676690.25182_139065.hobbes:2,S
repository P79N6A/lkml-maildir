Date: Mon, 9 Jun 2003 15:09:05 -0700
From: Andrew Morton <>
Subject: Re: [BENCHMARK] 12% improvement in fork load from mm3 to mm4
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/6/9/205

rwhron@earthlink.net wrote:
>
> > autoconf build test creates about 1.2 million processes in
> > 35 minutes.  On quad xeon, there was an improvement of
> > ~ 12% between 2.5.70-mm3 and 2.5.70-mm4.
> > 
> >               Avg of 3 runs
> > 2.5.70-mm3    829.0
> > 2.5.70-mm4    737.9
> 
> profile shows the biggest change is in do_page_fault.
Well that's amusing.  In mm4 I replaced the patch which runs
remap_file_pages() against all prot_exec mappings with a patch which just
prefaults those mappings into pagecache.
The difference _should_ be that in mm3, all pte's are set up at mmap time.
So -mm4 should have more pagefaults, not less.
Something fishy is going on there.  Makes one wonder if remap_file_pages()
is successfully avoiding the minor fault.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/