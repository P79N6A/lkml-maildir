Date: Tue, 22 Dec 1998 16:10:57 +0100
From: <>
Subject: Aiee, killing interupt handler
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1998/12/22/75

Hi,
First please excuse for my bad english.
Recently I checked out out the 2.1.131 kernel.
When I do a cat /proc/bus/pci/00/0f.0, which is imho the port of my
Dawi 2975 U (NCR 53c875 (rev 4).) controller, then following occurs:
---------------------cut------------------------------------------------
Dec 19 10:57:15 kitekat kernel: ncr53c875-0: SCSI parity error detected:
SCR1=65 DBC=50000000 SSTAT1=f 
Dec 19 10:57:34 kitekat kernel: scsi : aborting command due to timeout : pid
 3129, scsi0, channel 0, id 0, lun 0 Write (10) 00 00 29 31 99 00 00 02 00  
Dec 19 10:57:34 kitekat kernel: ncr53c8xx_abort: pid=3129 serial_number=3146
serial_number_at_timeout=3146 
Dec 19 10:57:34 kitekat kernel: ncr53c875-0: abort ccb=c3fbe020 (cancel) 
Dec 19 10:57:36 kitekat kernel: SCSI host 0 abort (pid 3129) timed out -
resetting 
Dec 19 10:57:36 kitekat kernel: SCSI bus is being reset for host 0 channel
0. 
Dec 19 10:57:36 kitekat kernel: ncr53c8xx_reset: pid=3129 reset_flags=2
serial_number=3146 serial_number_at_timeout=3146 
Dec 19 10:57:36 kitekat kernel: ncr53c875-0: resetting, command processing
suspended for 2 seconds 
Dec 19 10:57:36 kitekat kernel: ncr53c875-0: restart (scsi reset). 
Dec 19 10:57:36 kitekat kernel: ncr53c875-0: enabling clock multiplier 
Dec 19 10:57:36 kitekat kernel: ncr53c875-0: Downloading SCSI SCRIPTS. 
Dec 19 10:57:36 kitekat kernel: ncr53c875-0: command processing resumed 
Dec 19 10:57:36 kitekat kernel: ncr53c875-0-<0,*>: FAST-20 SCSI 20.0 MB/s
(50 ns, offset 15) 
-------------------------------cut---------------------------------------
Sometimes the kernel died with the following message. (Not logged,
typed manually) After this the kernel react only to sysqr messages.
After a reboot the filesystem is partially destroyed.
----------------------cut------------------------------------------------
...
Code: 89 02 85 C0 74 03 89 50 04 b8 01 00 00 00 eb 03 90 31 c0 c7
...
Aiee, killing interupt handler
Kernel panic: Attempted to kill the idle task!
In interupt handler - not syncing
...
---------------------cut-------------------------------------------------
The same thing occurs when I switch on dma with hdparm for the ide hdd.
hdparm -d1 /dev/hda.
When I copy a few files then the kernel died like before.
The dma mode works fine with win95, the other stuff fine with kernel 2.0.35.
Some infos (from 2.0.35)
-------------------------------------------cut----------------------------
PCI devices found:
  Bus  0, device  17, function  0:
    Ethernet controller: Realtek 8029 (rev 0).
      Medium devsel.  IRQ 9.  
      I/O at 0x6400.
  Bus  0, device  15, function  0:
    SCSI storage controller: NCR 53c875 (rev 4).
      Medium devsel.  IRQ 10.  Master Capable.  Latency=134.  Min Gnt=17.Max
La=64.
      I/O at 0x6300.
      Non-prefetchable 32 bit memory at 0xe2001000.
      Non-prefetchable 32 bit memory at 0xe2002000.
  Bus  0, device  13, function  0:
    VGA compatible controller: Unknown vendor Riva 128 (rev 16).
      Medium devsel.  Fast back-to-back capable.  IRQ 11.  Master Capable. 
Latncy=32.  Min Gnt=3.Max Lat=1.
      Non-prefetchable 32 bit memory at 0xe0000000.
      Prefetchable 32 bit memory at 0xe1000000.
  Bus  0, device   1, function  1:
    IDE interface: Silicon Integrated Systems 85C5513 (rev 208).
      Fast devsel.  IRQ 14.  Master Capable.  Latency=32.  
      I/O at 0x1f0.
      I/O at 0x3f4.
      I/O at 0x170.
      I/O at 0x374.
      I/O at 0x4000.
  Bus  0, device   1, function  0:
    ISA bridge: Silicon Integrated Systems 85C503 (rev 1).
      Medium devsel.  Master Capable.  No bursts.  
  Bus  0, device   0, function  0:
    Host bridge: Silicon Integrated Systems 5597/5598 Host (rev 2).
      Medium devsel.  Master Capable.  Latency=24.  
-----------------------cut--------------------------------------------
/usr/src/linux-1.1.131/.config
CONFIG_EXPERIMENTAL=y
CONFIG_M686=y
CONFIG_MTRR=y
CONFIG_MODULES=y
CONFIG_KMOD=y
CONFIG_NET=y
CONFIG_PCI=y
CONFIG_PCI_BIOS=y
CONFIG_PCI_DIRECT=y
CONFIG_PCI_QUIRKS=y
CONFIG_PCI_OLD_PROC=y
CONFIG_SYSVIPC=y
CONFIG_BSD_PROCESS_ACCT=y
CONFIG_SYSCTL=y
CONFIG_BINFMT_AOUT=m
CONFIG_BINFMT_ELF=y
CONFIG_BINFMT_MISC=m
CONFIG_BINFMT_JAVA=m
CONFIG_PARPORT=m
CONFIG_PARPORT_PC=m
CONFIG_CIPHERS=m
CONFIG_CIPHER_IDEA=m
CONFIG_PNP=y
CONFIG_BLK_DEV_FD=y
CONFIG_BLK_DEV_IDE=y
CONFIG_BLK_DEV_IDEDISK=y
CONFIG_BLK_DEV_IDECD=m
CONFIG_BLK_DEV_IDEPCI=y
CONFIG_BLK_DEV_IDEDMA=y
CONFIG_IDEDMA_AUTO=y
CONFIG_BLK_DEV_LOOP=m
CONFIG_BLK_DEV_LOOP_GEN=m
CONFIG_BLK_DEV_NBD=m
CONFIG_BLK_DEV_MD=y
CONFIG_MD_STRIPED=y
CONFIG_MD_BOOT=y
CONFIG_BLK_DEV_RAM=m
CONFIG_PARIDE_PARPORT=m
CONFIG_PACKET=m
CONFIG_NETLINK=y
CONFIG_RTNETLINK=y
CONFIG_NETLINK_DEV=m
CONFIG_FIREWALL=y
CONFIG_UNIX=y
CONFIG_INET=y
CONFIG_IP_FIREWALL=y
CONFIG_SYN_COOKIES=y
CONFIG_IP_NOSR=y
CONFIG_SCSI=y
CONFIG_BLK_DEV_SD=y
CONFIG_BLK_DEV_SR=m
CONFIG_CHR_DEV_SG=m
CONFIG_SCSI_CONSTANTS=y
CONFIG_SCSI_LOGGING=y
CONFIG_SCSI_NCR53C8XX=y
CONFIG_SCSI_NCR53C8XX_DEFAULT_TAGS=4
CONFIG_SCSI_NCR53C8XX_MAX_TAGS=32
CONFIG_SCSI_NCR53C8XX_SYNC=20
CONFIG_NETDEVICES=y
CONFIG_DUMMY=m
CONFIG_ETHERTAP=m
CONFIG_NET_ETHERNET=y
CONFIG_NET_EISA=y
CONFIG_NE2K_PCI=m
CONFIG_PPP=m
CONFIG_CD_NO_IDESCSI=y
CONFIG_SBPCD=m
CONFIG_ISP16_CDI=m
CONFIG_VT=y
CONFIG_VT_CONSOLE=y
CONFIG_SERIAL=m
CONFIG_UNIX98_PTYS=y
CONFIG_UNIX98_PTY_COUNT=128
CONFIG_PRINTER=m
CONFIG_PRINTER_READBACK=y
CONFIG_MOUSE=y
CONFIG_PSMOUSE=y
CONFIG_MINIX_FS=m
CONFIG_EXT2_FS=y
CONFIG_ISO9660_FS=m
CONFIG_JOLIET=y
CONFIG_FAT_FS=m
CONFIG_MSDOS_FS=m
CONFIG_UMSDOS_FS=m
CONFIG_VFAT_FS=m
CONFIG_PROC_FS=y
CONFIG_NFS_FS=m
CONFIG_NFSD=m
CONFIG_SUNRPC=m
CONFIG_LOCKD=m
CONFIG_SMB_FS=m
CONFIG_AUTOFS_FS=m
CONFIG_DEVPTS_FS=m
CONFIG_NLS=y
CONFIG_NLS_CODEPAGE_437=m
CONFIG_NLS_CODEPAGE_850=m
CONFIG_NLS_ISO8859_1=m
CONFIG_VGA_CONSOLE=y
CONFIG_SOUND=m
CONFIG_SOUND_OSS=m
CONFIG_SOUND_ADLIB=m
CONFIG_SOUND_MSS=m
CONFIG_SOUND_MAD16=m
CONFIG_SOUND_OPL3SA2=m
CONFIG_SOUND_YM3812=m
CONFIG_MAGIC_SYSRQ=y
#########################################################################
gcc 2.7.2.3
When you need any special files or infos please write me.
When you reply to this mail, please CC me, because I donÂ´t get the
kernel-mailing list.
thx
Kai,
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/