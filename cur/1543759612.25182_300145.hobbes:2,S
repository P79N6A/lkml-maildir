Date: Sun, 6 Mar 2005 02:54:51 -0800
From: Chris Wedgwood <>
Subject: Re: [PATCH] fix for 8250.c *wrongly* detecting XScale UART(s) on x86 PC
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/3/6/28

On Sun, Mar 06, 2005 at 10:19:12AM +0000, Russell King wrote:
> If it breaks here (due to your ports being "embraced and extended") it
> could well break elsewhere, and wrapping it in CONFIG_ARM doesn't solve
> that.
Yeah, I forgot other ARM stuff might have regular UART(s) which
potentially would break here too.
> I'm not sure what the solution to this is, but unless we can
> autodetect the port "type", it rather screws the current direction
> of 8250, which has been to move away from port types to a set of
> port capabilities.
Well, as I see it there are three types of serial port knowledge:
(1) Ports we know for (almost) certain we have.  For x86* we can
    probably assume ttyS0 has some fairly standard values like 0x3f8,4
    and if not expect the user to specify otherwise.
(2) Ports we know for (almost) certain we don't have.  We have
    #ifdef's for this in places already.  Basically things like PPC
    and ARM/XScale UARTs won't be found on PCs (though the reverse is
    clearly not true).
(3) Everything else.
If (1) & (2) end up being pretty limited and the bulk of 8250.c is
required for (3) then changing things around probably isn't worth
while at all.
> I wonder if its possible to get hold of any documentation for your
> misdetected serial port...
I assumed it's part of the AMD-768 southbridge but the documentation
for that mentions no UARTs so I wonder if it's an external chip
hanging of the LPC bus?  I'll have a closer look tomorrow if that will
help.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/