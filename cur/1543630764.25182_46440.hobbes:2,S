Date: Fri, 17 May 2002 08:36:07 +0200
From: Jens Axboe <>
Subject: [patch] ide tcq for 2.4.19-pre8
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/5/17/39

Hi,
Fixed a few bugs and missing functionality (recovery) since the initial
2.4 version. Changelog:
- (generic tcq) use list_for_each_safe() in blk_queue_invalidate_tags(),
  we are removing entries while browsning.
- (ide tcq) remember to honor max depth set.
- (ide tcq) fix auto_poll detection oops
- (ide tcq) enable use of NOP command to clear hardware tag queue on
  error.
- (ide tcq) hwgroup->rq clearing race
- (ide tcq) refuse to toggle tcq enable flag on busy drive. This will
  need to be fixed properly by serializing such requests with the normal
  request queue.
I have tested error recovery, and it works. I've provoked errors at full
queue depths, and the code correctly recovered and kept spinning without
data loss.
Generic tcq support:
*.kernel.org/pub/linux/kernel/people/axboe/patches/v2.4/2.4.19-pre8/block-tag-2419p8-2.bz2
IDE tcq support:
*.kernel.org/pub/linux/kernel/people/axboe/patches/v2.4/2.4.19-pre8/ide-tag-2419p8-2.bz2
All-in-one:
*.kernel.org/pub/linux/kernel/people/axboe/patches/v2.4/2.4.19-pre8/ide-block-tag-2419p8.bz2
Enjoy,
-- 
Jens Axboe
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/