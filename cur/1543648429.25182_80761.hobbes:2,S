Date: 16 Oct 2002 22:53:20 -0400
From: Robert Love <>
Subject: benchmarks of O_STREAMING in 2.5
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/10/16/407

I gave the O_STREAMING in Andrew's 2.5-mm tree the treatment..
Short summary: It works.
The streaming read test in the following benchmarks is simply a read()
in 64KB byte chunks of an 800MB file.
First test.  Show the cache effects are indeed as we intend and the
overhead is negligible.  Here, mem=2G.
	O_STREAMING?	Wall time	Cache Delta
	Yes		21.827s		0
	No		21.734s		+800MB
Second test.  Same deal, but mem=8M.  There was slight swapping, so I
suspect the reduced VM pressure is why the O_STREAMING run is faster.
	O_STREAMING?	Wall time	Cache Delta
	Yes		22.303s		0
	No		28.812s		+1MB
Third and final test. Kernel compile (make -j2) with a couple streaming
reads in the background.  Again, mem=2G.  This shows that actually
saving the pagecache from the horrid waste is useful.
	O_STREAMING	Wall time to complete Kernel compile
	Yes		5m30.494s
	No		4m59.661s
So, uh, Andrew's 2.5 code works ;-)
Someone buy me a dual Xeon,
	Robert Love
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/