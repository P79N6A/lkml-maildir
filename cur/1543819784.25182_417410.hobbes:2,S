Date: Thu, 20 Apr 2006 23:39:43 +0200
From: Jesper Juhl <>
Subject: [PATCH] OSS: cs46xx cleanup and tiny bugfix
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/4/20/293

Here's a patch for cs46xx that 
 - (mostly) cleans up the cs46xx driver according to CodingStyle
 - removes a bunch of pointless casts
 - fixes a small, potential use of uninitialized variable, bug
 - reduces the size of the compiled code by 36 bytes
 - reduces the size of the source file by 1831 bytes
I know I should probably have split this into bits, but since I only 
thought of that *after* doing all the edits, splitting it up would have 
been a royal pain. And since these are all pretty trivial changes I thought
I'd just submit the one huge patch and hope people could live with it (if 
not, then just tell me and I'll split it).
The bug fix that's in there may be hard to spot, so I'll point it out. It's 
the 
   -       int val, valsave, mapped, ret;
   +       int val, valsave, ret;
   +       int mapped = 0;
bit.
Without that change we may use `mapped' uninitialized if, in cs_ioctl, the 
first test of "if(state)" is false and the second "if(state)" test is true.
Patch is compile tested.
Due to the size of the patch (98838 bytes) I'm not including it inline in 
this email, but have instead attached it as a bzip2 compressed file.
Signed-off-by: Jesper Juhl <jesper.juhl@gmail.com>
 sound/oss/cs46xx.c | 1272 ++++++++++++++++++++---------------------------------
 1 files changed, 489 insertions(+), 783 deletions(-)
[unhandled content-type:application/x-bzip2]