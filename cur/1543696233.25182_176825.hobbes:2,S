Date: Thu, 6 Nov 2003 11:15:17 -0600
From: Jack Steiner <>
Subject: Re: [PATCH] - Allow architectures to increase size of MAX_NR_MEMBLKS
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/11/6/117

On Thu, Nov 06, 2003 at 08:57:35AM +0000, Christoph Hellwig wrote:
> On Wed, Nov 05, 2003 at 12:19:11PM -0600, Jack Steiner wrote:
> > This fixes a problem that occurs on system with >64 nodes. 
> > 
> > Previously, MAX_NR_MEMBLKS was defined as BITS_PER_LONG. This
> > patch allows an architecture to override this definition by
> > defining a value in the arch-specific asm-xxx/mmzone.h file.
> 
> IMHO this is too much clutter.  Just make it mandatory for the
> architectures to define their own MAX_NR_MEMBLKS in the numa case.
> 
> Or actually even better just have a 
> 
> #ifndef MAX_NR_MEMBLKS
> #define MAX_NR_MEMBLKS	1
> #endif
> 
> in the generic code and let every architecture that wants to override
> it do so.
I like this idea but wanted to minimize risk to other architectures 
at this point in 2.6.
AFAICT, the only other achitecture that would require change would 
be i386. I'm not familar with the i386 numa architecture. It
looks like the change would be to add the definition of
MAX_NR_MEMBLKS to include/asm-i386/numaq.h.
What is the value of MAX_NR_MEMBLKS for NUMAQ? 
Are any architectures affected that I am overlooking???
I'm ok with either approach. What do other think??
-- 
Thanks
Jack Steiner (steiner@sgi.com)          651-683-5302
Principal Engineer                      SGI - Silicon Graphics, Inc.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/