Date: Mon, 19 Mar 2001 15:05:55 -0800
From: Torrey Hoffman <>
Subject: on /etc/mtab vs. /proc/mounts (Was RE: Linux should better cope w ith power failure)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/3/19/94

(Recipients trimmed, as this is a major change of topic...)
[big cut]
> Actually, I think /etc/mtab is not needed at all.   
This is already mostly correct, AFAIK.
My embedded system uses "busybox" for mount and umount, /etc/mtab 
does not exist, and the root file system is readonly.  
But if I do "umount -a" it works.  So the busybox umount is already 
reading /proc/mounts.
The only oddity I see with using /proc/mounts is that it shows:
/dev/root / ext2 rw 0 0
instead of
/dev/hda1 / ext2 rw 0 0
but this doesn't seem to cause any problems... even though /dev/root
does not exist (!)
In fact, the "mount" man page on my Mandrake 7.2 system says:
"It is possible to replace /etc/mtab by a symbolic link to 
/proc/mounts..."  and then goes on to describe some of the issues and
problems with doing so - loopback, and paths with spaces seem to
be the significant ones.
Hopefully those problems can and will be solved soon, and then
we can get rid of /etc/mtab completely, and keep the root partition
read only almost all the time.
Torrey Hoffman
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/