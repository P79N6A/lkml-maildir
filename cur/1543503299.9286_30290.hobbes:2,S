Date: Mon, 19 Jul 1999 16:48:42 -0500 (CDT)
From: elijah wright <>
Subject: Re: ne2k and 0x378 lp ports
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/7/19/145

>  > doesn't matter.  the ne2k takes a 20-unit window... it runs from
>  > 0x360 to 0x380 in this case.
> Presumably you mean a 32-byte window?
sure :)  i was being lazy and didn't want to think about what 0x20 is in
decimal :)  its been one of those days.  :)
> That leads to a repeat of the above question: Exactly what port
> addresses does it use?
> I will emphasise that I am NOT able to change the io address of either
> the ne2k card or of ide1 so suggestions of doing that will be ignored.
0170-0177 : ide1
01f0-01f7 : ide0
0376-0376 : ide1
0378-037f : parport0
03f6-03f6 : ide0
03f8-03ff : serial(auto)
0778-077a : parport0
you must just be lucky and it doesn't use 376 :)
i did a brief scan of the code and didn't see anything that was real
obvious :)
heh.  i found the doc i was looking for.  Ethernet-HOWTO:
<begin snippet>:
Problem: NE*000 ethercard at 0x360 doesn't get detected anymore.
  Reason: Kernels ( > 1.1.7X) have more sanity checks with respect to
  overlapping i/o regions. Your NE2000 card is 0x20 wide in i/o space,
  which makes it hit the parallel port at 0x378.  Other devices that
  could be there are the second floppy controller (if equipped) at 0x370
  and the secondary IDE controller at 0x376--0x377.  If the port(s) are
  already registered by another driver, the kernel will not let the
  probe happen.
  Solution: Either move your card to an address like 0x280, 0x340, 0x320
  or compile without parallel printer support.
  Problem: Network `goes away' every time I print something (NE2000)
  Reason: Same problem as above, but you have an older kernel that
  doesn't check for overlapping i/o regions. Use the same fix as above,
  and get a new kernel while you are at it.
<end snippet>
the old advice was simply to make sure that you didn't use a ne2000 card
at 360 hex and a parallel port at 378.  the easiest remedy was to move
your parallel port to 0x3bc, the XT port address.
regardless, it would be easier to just buy new $1.99 network cards than to
try to make up some weird hack with the ioports that gets you around a
problem like this.
elijah
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/