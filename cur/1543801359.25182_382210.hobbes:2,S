Date: Thu, 5 Jan 2006 21:29:54 +0100 (CET)
From: Lukasz Trabinski <>
Subject: e1000_watchdog_task: NIC Link is Up/Down on kernels 2.4.15 2.4.14
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/1/5/379

Hello
I have machine with build in ethernet interafce, system is Linux Fedora 
Core 4.
Ethernet controller: Intel Corporation 82541GI/PI Gigabit Ethernet 
Controller. It's connected to cisco Catalyst 4000 switch:
#show interface GigabitEthernet3/5
GigabitEthernet3/5 is up, line protocol is up (connected)
   Hardware is Gigabit Ethernet Port, address is xxx
   Description: xxx
   MTU 1500 bytes, BW 1000000 Kbit, DLY 10 usec,
      reliability 255/255, txload 1/255, rxload 1/255
   Encapsulation ARPA, loopback not set
   Keepalive set (10 sec)
   Full-duplex, 1000Mb/s, link type is auto, media type is 10/100/1000-TX
   input flow-control is off, output flow-control is off
configuration on switch interface:
interface GigabitEthernet3/5
  switchport mode access
  switchport nonegotiate
  logging event link-status
  no cdp enable
end
on linux machine:
[root@w3cache ~]# ethtool eth0
Settings for eth0:
         Supported ports: [ TP ]
         Supported link modes:   10baseT/Half 10baseT/Full
                                 100baseT/Half 100baseT/Full
                                 1000baseT/Full
         Supports auto-negotiation: Yes
         Advertised link modes:  10baseT/Half 10baseT/Full
                                 100baseT/Half 100baseT/Full
                                 1000baseT/Full
         Advertised auto-negotiation: Yes
         Speed: 1000Mb/s
         Duplex: Full
         Port: Twisted Pair
         PHYAD: 0
         Transceiver: internal
         Auto-negotiation: on
         Supports Wake-on: umbg
         Wake-on: g
         Current message level: 0x00000007 (7)
         Link detected: yes
Some times I observe flaping eth0 interface:
Jan  5 18:31:19 w3cache kernel: e1000: eth0: e1000_watchdog_task: NIC Link 
is Down
Jan  5 18:31:21 w3cache kernel: e1000: eth0: e1000_watchdog_task: NIC Link 
is Up 1000 Mbps Full Duplex
Jan  5 18:31:25 w3cache kernel: e1000: eth0: e1000_watchdog_task: NIC Link 
is Down
Jan  5 18:31:27 w3cache kernel: e1000: eth0: e1000_watchdog_task: NIC Link 
is Up 1000 Mbps Full Duplex
Jan  5 18:56:30 w3cache kernel: e1000: eth0: e1000_watchdog_task: NIC Link 
is Down
Jan  5 18:56:33 w3cache kernel: e1000: eth0: e1000_watchdog_task: NIC Link 
is Up 1000 Mbps Full Duplex
Patchcords and other physical layer is OK. Tested kernels 
kernel-2.6.14-1.1653_FC4 and latest vanilla 2.4.15. I have tried set full 
duplex, speed 1000 on switch but it's happan again.
On cisco switch i don't have seen any flaps this interface or any errors.
Any idea? Thank You.
I have also commited this problem to redhat bugzilla:
https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=177043
-- 
≈ÅT
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/