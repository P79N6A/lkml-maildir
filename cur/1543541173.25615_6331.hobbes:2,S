Date: Wed, 9 Aug 2000 09:41:54 -0700
From: "Raj, Ashok" <>
Subject: need to understand bottom_halfs...
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/8/9/101

Hello.
network/performance gurus... please send me any suggestions.
Please reply to me directly for this email.
Have a question on how to run bottom halfs. The device carries network,
storage and IPC traffic on one link. For interrupt processing, i pushed the
bottom half to IMMEDIATE_BH. We noticed that the throughput on Linux was
about 1/8th. when compared to NT running the same software. 
we are running RH 6.2. ( i have seen the new 2.4.x code and there is a lot
of good, we will be moving to the new one soon)
the lan emulation stack we have receives callbacks when it receives packets.
Since our device bottom half runs in IMMEDIATE_BH, the LAN stack marks
NET_BH for further processing. This will be picked up by in the next run of
the bottom half, since these are single shot. 
I assumed that this is a reason for slow performance, and moved the bottom
half to run in TIMER_BH. I thought this way the dispatch for our emulation
stack would run before NET_BH, and the packets pushed during this call will
be ready when the NET_BH is scheduled. But this turned out to be even bad.
The ping response moved from 10.x ms to 30ms? i could not explain why this
happens.
Could someone suggest whats the best method to tackle this?
Any pointers would be appreciated.
ashokr
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/