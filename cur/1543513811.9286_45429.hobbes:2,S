Date: Sat, 23 Oct 1999 02:25:50 +0200 (CEST)
From: Andrea Arcangeli <>
Subject: Re: fd_offset is not page aligned
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/10/22/163

On Fri, 22 Oct 1999, Jamie Lokier wrote:
>Don't we need to support non-aligned shared mappings for Wine's sake?
mmap isn't changed at all.
As before the shared mappings can't use a file offset not PAGE_SIZE
aligned.
As before the private mappings can't use a file offset not blocksize
aligned.
But now the old zmagic binaries will run even if the blocksize is 4k. The
prink is to let know the user that an updated binary would produce a
better behaviour (a private mapping instead of an anonymous one). This
means better backwards compatibilty at the expense of performance (but if
you want performance you shouldn't use zmagic in first place).
>Of course I'm not suggesting sharing between different alignments.  And
2.3.x forbids you to do the blocksize alignment but enforce only the
PAGE_SIZE alignment.
>it would be entirely reasonable that a non-aligned mapping would pull
>stuff into the aligned page cache, copy it to non-aligned shared pages
You don't want to copy at all. 2.3.x enforce coherency and this simply
means better performance.
Andrea
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/