Date: Mon, 14 Aug 2000 16:01:55 -0400
From: Giuliano Pochini <>
Subject: Elevator problem ?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/8/14/142

Kernel 2.2.16 show very low disk performance on my
magneto-optical drive. When I write large files it
starts writing at its normal speed. After 10-20 sec.
speed drops from 500KB/s to 30KB/s :-(((((
I tried to change elevator tuning with the attached
program I wrote (please tell me if there's something
wrong) without success. The point is it starts writing
only 2KB small block without any apparent reason.
Another BIG problen is that when it starts crawling
also write accesses to my harddisk became way slow. I
have to wait a minute or so to copy a 100KB file !! And
it's not a question of memory because it happens even
if I still have 90MB free ram.
I noted that both MO-drive and the HD have the same
evevator-queue-ID. I think this is a bug, since they
are completely unrelated devices which are attached
to 2 different SCSI cards...
The HD alone don't have this problem, so I think it's
related with the slowness of the MO-drive, perhaps
blocks ageing is wrong.... I don't know.
I tried 2.2.6 and it works fine. I have no recent
kernels prior 2.2.16 now, but I'll try soon.
Bye.
    Giuliano.
P.S. Why disksnever r/w blocks larger than 64KB ? This
     issue lowers raw disk speed by ~30%[unhandled content-type:application/octet-stream]