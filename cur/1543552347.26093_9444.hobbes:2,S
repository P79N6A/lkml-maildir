Date: Mon, 23 Oct 2000 14:26:48 +0200
From: Klaus Naumann <>
Subject: I2O Code Bug when using DPT Controller
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/10/23/93

Hi all,
I'm trying to use a DPT RAID Controller (DPT RA4050) here and found,
that the code is buggy somehow. I've turned on debugging messages
and this is what I get:
Loading I2O Core - (c) Copyright 1999 Red Hat Software
Linux I2O PCI support (c) 1999 Red Hat Software.
i2o: Checking for PCI I2O controllers...
i2o: I2O controller on bus 0 at 161.
i2o: PCI I2O controller at 0xED000000 size=2097152
i2o/iop0: Installed at IRQ11
i2o: 1 I2O controller found and installed.
Activating I2O controllers...
This may take a few minutes if there are many devices
Calling i2o_activate_controller for i2o/iop0...
i2o/iop0: State = OPERATIONAL
i2o/iop0: Already running, trying to reset...
i2o/iop0: State = OPERATIONAL
i2o/iop0: POST WAIT TIMEOUT
i2o/iop0: Unable to quiesce (status=0x6e).
i2o/iop0: Get status timeout.
i2o/iop0: Reset in progress, waiting for reboot...
i2o/iop0: State = RESET
i2o/iop0: Reset completed.
i2o/iop0: Initializing Outbound Queue...
i2o_core: EXEC_HRT_GET, SUCCESS / SUCCESS.
i2o/iop0: HRT has 0 entries of 16 bytes each.
i2o_core: Calling i2o_build_sys_table...
i2o/iop0: State = HOLD
i2o/iop0: Initializing Outbound Queue...
i2o_core: EXEC_HRT_GET, SUCCESS / SUCCESS.
i2o/iop0: HRT has 0 entries of 16 bytes each.
i2o_core: Calling i2o_build_sys_table...
i2o/iop0: State = HOLD
sys_tbl[0] = 0x00000101
sys_tbl[1] = 0x00000000
sys_tbl[2] = 0x00000000
sys_tbl[3] = 0x00000000
sys_tbl[4] = 0x0000001b
sys_tbl[5] = 0x00000002
sys_tbl[6] = 0x00041000
sys_tbl[7] = 0x00000080
sys_tbl[8] = 0x00000000
sys_tbl[9] = 0x00000000
sys_tbl[10] = 0x20800040
sys_tbl[11] = 0x00000000
Calling i2o_online_controller for i2o/iop0...
i2o_core: EXEC_SYS_TAB_SET, SUCCESS / SUCCESS.
i2o/iop0: SysTab set.
i2o/iop0: State = READY
i2o/iop0: Attempting to enable...
i2o/iop0: State = READY
i2o_core: EXEC_SYS_ENABLE, SUCCESS / SUCCESS.
i2o/iop0: Enabled.
i2o/iop0: State = OPERATIONAL
i2o/iop0: Attempting to get/parse lct...
i2o_core: EXEC_LCT_NOTIFY, SUCCESS / SUCCESS.
i2o/iop0: LCT has 14 entries.
Target ID 50.
i2o_core: UTIL_PARAMS_GET, TRANSPORT_FAILURE.
  InitiatorId = 1, TargetId = 50
  LowestVersion = 0x00, HighestVersion = 0x00
  FailingHostUnit = 0xC331,  FailingIOP = 0x000
  Severity:  0x0F (FormatError), this msg can never be
delivered/processed.
(PathError), this msg can no longer be delivered/processed.
(PathState), the system state does not allow delivery.
(Congestion), resources temporarily not available;do not retry
immediately.
Dumping I2O message size 9 @ e0811600
  msg[0] = 0x00090051
  msg[1] = 0x06001032
  msg[2] = 0x80060000
  msg[3] = 0x00000000
  msg[4] = 0x00000000
  msg[5] = 0x5400000c
  msg[6] = 0x0189be8c
  msg[7] = 0xd0000018
  msg[8] = 0x0189be68
i2o/iop0: POST WAIT TIMEOUT
i2o_core: UTIL_PARAMS_GET, TRANSPORT_FAILURE.
  InitiatorId = 1, TargetId = 50
  LowestVersion = 0x00, HighestVersion = 0x00
  FailingHostUnit = 0xC331,  FailingIOP = 0x000
  Severity:  0x0F (FormatError), this msg can never be
delivered/processed.
(PathError), this msg can no longer be delivered/processed.
(PathState), the system state does not allow delivery.
(Congestion), resources temporarily not available;do not retry
immediately.
Dumping I2O message size 9 @ e0811800
  msg[0] = 0x00090051
  msg[1] = 0x06001032
  msg[2] = 0x80070000
  msg[3] = 0x00000000
  msg[4] = 0x00000000
  msg[5] = 0x5400000c
  msg[6] = 0x0189be94
  msg[7] = 0xd0000018
  msg[8] = 0x0189be70
I've tried looking through the sources to trace what it's doing,
but I didn't get an idea how it's working (mainly because I don't know
how this piece of hardware is programmed).
Can anyone with more knowledge about the I2O code make a statement
about this ?
	TIA, Klaus
-- 
Klaus Naumann (mailto:kernel@mgnet.de)
http://www.mgnet.de/
Phone: ++49/8761727852
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/