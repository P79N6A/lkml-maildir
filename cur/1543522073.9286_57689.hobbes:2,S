Date: Thu, 13 Jan 2000 23:28:02 +0100 (CET)
From: Rik van Riel <>
Subject: Re: [RFC] 2.3.39 zone balancing
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/1/15/53

On Thu, 13 Jan 2000, Kanoj Sarcar wrote:
	[snip Linus' winning idea]
> Yes, that's what everyone seems to be pointing at. As I mentioned, I am
> looking into this as I type. The only thing is, as Andrea points out, 
> 2.3 bh/irq handlers do not request HIGHMEM pages, so shouldn't the
> 2.3 kswapd do something more like: 
> 
>        more_work = 0;
>        for (i = 0; i < MAX_NR_ZONES; i++) {
> 		if (i != ZONE_HIGHMEM)
>                		more_work |= balance_zone(zone+i)
>        }
>        if (!more_work)
>                sleep()
Nope. We want to do page aging and reclamation in ZONE_HIGHMEM
too, otherwise all memory `rotation' is going to happen in the
other zones and the system can thrash in the remaining 1G of
memory while there's 3G of unused data in ZONE_HIGHMEM...
But I agree, we probably don't have to reclaim that many pages
in ZONE_HIGHMEM, something like freepages.min should be enough.
regards,
Rik
--
The Internet is not a network of computers. It is a network
of people. That is its real strength.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/