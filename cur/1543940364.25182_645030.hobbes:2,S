Date: Tue, 29 Jan 2008 10:13:21 -0500
From: Masami Hiramatsu <>
Subject: Re: [PATCH 0/3][RFC] x86: Catch stray non-kprobe breakpoints
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/29/169

Abhishek Sagar wrote:
> Placing a breakpoint on kprobe_handler (say) can loop into a recursive
> trap without allowing the debugger's notifier chain to be invoked. I'm
> assuming that non-kprobe exception notifiers may (or even should) run
> after kprobe's notifier callback (kprobe_exceptions_notify).
In that case, why don't you just reduce the priority of kprobe_exceptions_nb?
Then, the execution path becomes very simple.
int3 (non-kprobe) -> do_int3 -> non-krpobe/debugger
I also like to use a debugger for debugging kprobes. that will help us.
Best Regards,
-- 
Masami Hiramatsu
Software Engineer
Hitachi Computer Products (America) Inc.
Software Solutions Division
e-mail: mhiramat@redhat.com