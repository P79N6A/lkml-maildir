Date: Tue, 21 Mar 2000 12:56:55 -0800 (PST)
From: Andre Hedrick <>
Subject: Re: [2.3.99pre2] [CORRUPTION] Doh!  Corruption problems again...
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/3/21/277

On Tue, 21 Mar 2000, Simon Kirby wrote:
> On Tue, Mar 21, 2000 at 12:16:22PM -0800, Andre Hedrick wrote:
> 
> > On Tue, 21 Mar 2000, Simon Kirby wrote:
> > 
> > > - hdparm -u 1 vs hdparm -u 0 on all drives does not seem to make a
> > >   difference.
> > > 
> > > - hdparm -d 0 vs hdparm -d 1 on all drives tends to make the problem
> > >   happen even more often (guessing 5 times as often).  Tested with
> > >   both -u 1 and -u 0.
> > 
> > What is the rest of the hardware list?
> > You are fingering the difference between DMAING and PIO.
> > If you are trying to DMA with out autodma........you can and usually will
> > be "SHAFTED"!
> 
> What do you mean by trying to DMA without autodma?
> 
> I'm using an ASUS P2B-DS (PIIX4 tuning and all enabled in kernel config)
> with two Celerons.  128MB ECC SDRAM.  Three WD hard drives are attached:
> 
> hda: WDC WD273BA, 26105MB w/1961kB Cache, CHS=3328/255/63, UDMA(33)
> hdb: WDC WD273BA, 26105MB w/1961kB Cache, CHS=3328/255/63, UDMA(33)
> hdc: WDC AC28400R, 8063MB w/512kB Cache, CHS=16383/16/63, UDMA(33)
> 
> The first two are UDMA/66 drives, but everything is plugged into the
> UDMA/33 on-board controller.
OH MY !!!!............
You know that WDC blows of the UDMA CRC and you are pumping data at
ATA-3/4/5 trasfer rates with ATA-2 correction/dectection, which equals
NONE!!!!!!!!
Please send me a copy of  'lspci -bxxxs 00:07.1 > piix4.pci'
> Not using "hdparm" at all after boot still shows the the same problems.
> 
> The case where the problem shows up more with PIO mode looks just like
> the previous problem with the elevator changes -- the timing and/or
> slower I/O made it show up more easily... I don't think it has anything
> to do with incorrect settings (although I may be wrong)...
> 
> Simon-
> 
> [  Stormix Technologies Inc.  ][  NetNation Communcations Inc.  ]
> [       sim@stormix.com       ][       sim@netnation.com        ]
> [ Opinions expressed are not necessarily those of my employers. ]
> 
Andre Hedrick
The Linux ATA/IDE guy
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/