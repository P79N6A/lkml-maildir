Date: Thu, 12 Sep 2002 11:41:17 +0200
From: "Benjamin Herrenschmidt" <>
Subject: Re: 2.4.19 SCSI core bug?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/9/12/187

>1. we need to come up with a way of reasonably handing SCSI medium
>   errors if we are going to use the READ10 command with the FUA
>   bit clear.
>
>2. we could just set the FUA bit and bypass the drives on-board
>   cache completely.
>
>Note that the only reason I've found this is because my HBA drives
>are _really_ pedantic about checking that all expected data does
>in fact get transferred by the drive.
>
>I wonder how many other drives out there are buggy like this. 8/
What about setting FUA on the next command after an error ?
Would this work or may the disk really keep stale data around ?
I don't have a recent SCSI spec at hand, but is there a command
we can send after an error to force a cache flush & invalidate
or will it only flush dirty datas to platter and not invalidate ?
Ben.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/