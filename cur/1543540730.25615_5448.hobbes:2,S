Date: Fri, 4 Aug 2000 20:02:00 +1200
From: Chris Wedgwood <>
Subject: Re: [patch] lowlatency-2.4.0-test6-C4
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/8/4/13

On Fri, Aug 04, 2000 at 01:28:19AM +0200, Ingo Molnar wrote:
    the newest version of the lowlatency patch can be downloaded from:
      
http://www.redhat.com/~mingo/lowlatency-patches/lowlatency-2.4.0-test6-C4
What's is the point of?
--- linux/fs/ioctl.c.orig	Tue Aug  1 16:02:19 2000
+++ linux/fs/ioctl.c	Fri Aug  4 01:18:12 2000
@@ -39,8 +39,11 @@
 		case FIONREAD:
 			return put_user(inode->i_size - filp->f_pos, (int *) arg);
 	}
-	if (filp->f_op && filp->f_op->ioctl)
-		return filp->f_op->ioctl(inode, filp, cmd, arg);
+	if (filp->f_op && filp->f_op->ioctl) {
+		int ret;
+		ret = filp->f_op->ioctl(inode, filp, cmd, arg);
+		return ret;
+	}
 	return -ENOTTY;
 }
 
@@ -104,8 +107,9 @@
 			error = -ENOTTY;
 			if (S_ISREG(filp->f_dentry->d_inode->i_mode))
 				error = file_ioctl(filp, cmd, arg);
-			else if (filp->f_op && filp->f_op->ioctl)
+			else if (filp->f_op && filp->f_op->ioctl) {
 				error = filp->f_op->ioctl(filp->f_dentry->d_inode, filp, cmd, arg);
+			}
 	}
 	unlock_kernel();
 	fput(filp);
  --cw
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/