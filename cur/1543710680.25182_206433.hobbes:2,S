Date: Mon, 15 Mar 2004 00:19:08 -0500 (EST)
From: Pavel Roskin <>
Subject: [PATCH] MAC_PARTITION not enabled for PowerMac by default
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/3/15/3

Hello!
One should not have to enable CONFIG_PARTITION_ADVANCED just to get Mac
partition support on Power Macintosh, especially considering the
description of the option:
"Say Y here if you would like to use hard disks under Linux which
were partitioned under an operating system running on a different
architecture than your Linux system."
CONFIG_MAC is only defined for m68k systems.  Power Macintosh uses
CONFIG_PPC_PMAC.  Both m68k and PowerMacs use the same partition tables.
I left another occurrence of lone "MAC" unchanged, so after the patch,
unselecting CONFIG_PARTITION_ADVANCED for PowerMac enables Mac and MS-DOS
partitions.  The reason is that MacOS 9 (and almost certainly MacOS X)
allow formatting Zip drives in "DOS format", which means creating an
MS-DOS partition.  We want Linux running on the same architecture to read
those disks.
-- 
Regards,
Pavel Roskin
--- linux.orig/fs/partitions/Kconfig
+++ linux/fs/partitions/Kconfig
@@ -93,7 +93,7 @@
 
 config MAC_PARTITION
 	bool "Macintosh partition map support" if PARTITION_ADVANCED
-	default y if !PARTITION_ADVANCED && MAC
+	default y if !PARTITION_ADVANCED && (MAC || PPC_PMAC)
 	help
 	  Say Y here if you would like to use hard disks under Linux which
 	  were partitioned on a Macintosh.