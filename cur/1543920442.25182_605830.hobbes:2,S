Date: Tue, 16 Oct 2007 19:23:49 +0400
From: Vladislav Bolkhovitin <>
Subject: r8169 & TX offload
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/10/16/207

Hello,
I've recently bought Realtek RTL8169S-32 chip based Gigabit Ethernet card:
# lspci -vv
Ethernet controller: Realtek Semiconductor Co., Ltd. RTL-8169 Gigabit 
Ethernet (rev 10)
         Subsystem: Realtek Semiconductor Co., Ltd. RTL-8169 Gigabit 
Ethernet
         Control: I/O+ Mem+ BusMaster+ SpecCycle- MemWINV+ VGASnoop- 
ParErr- Stepping- SERR+ FastB2B-
         Status: Cap+ 66MHz+ UDF- FastB2B+ ParErr- DEVSEL=medium 
 >TAbort- <TAbort- <MAbort- >SERR- <PERR-
         Latency: 64 (8000ns min, 16000ns max), Cache Line Size 20
         Interrupt: pin A routed to IRQ 10
         Region 0: I/O ports at c400 [size=256]
         Region 1: Memory at fe9fec00 (32-bit, non-prefetchable) [size=256]
         Expansion ROM at fe9c0000 [disabled] [size=128K]
         Capabilities: [dc] Power Management version 2
                 Flags: PMEClk- DSI- D1+ D2+ AuxCurrent=375mA 
PME(D0-,D1+,D2+,D3hot+,D3cold+)
                 Status: D0 PME-Enable- DSel=0 DScale=0 PME-
I've noticed that all TX offload features (tx-checksumming, 
scatter-gather and TSO) are disabled by default and should be manually 
enabled by ethtool. I wonder, is there any particular reason for that? 
Why they are not enabled by default as it was done for e1000 or tg3? Are 
there any hidden drawbacks in enabling them?
Those offload options are definitely work. They give in my setup (32-bit 
66MHz PCI, Xeon 1.7GHz CPU, open-iscsi) CPU offload from 75% to 45% and 
data write throughput improvement from 55MB/s to 59MB/s.
Regards,
Vlad
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/