Date: Wed, 15 Dec 1999 21:26:51 -0800 (PST)
From: "Brent M. Smith" <>
Subject: 2.3.33: mount stuck in "D" state: More problems with CDROM/ALi15x3 ide chipset.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/12/16/13

Well, this is neat.
Just downloaded and compiled 2.3.33 kernel, and tried to mount the CDROM
drive. 
This is the result:
$ ps ax
  ...
  932 ?        D      0:00 mount /dev/hdc /mnt
  ...
$
ok, let's try again
$ mount /dev/hdc /mnt
hang....
(new terminal)
$ ps ax
  ...
  873 ?        D      0:00 mount /dev/hdc /mnt/
  932 ?        D      0:00 mount /dev/hdc /mnt
  ...
$
Both terminals on which I executed the mount command, never returned to
the prompt.  I had problems with resets being sent to the Cdrom drive(s)
in earlier kernels, but everything seemed to work after the reset occurred
on the drive.  This time it just died, effectively locking my cdrom in the
drive.  Guess I'll have to reboot.
Here are some relevant messages:
At boot:
========
ALI15X3: IDE controller on PCI bus 00 dev 78
ALI15X3: not 100% native mode: will probe irqs later
    ide0: BM-DMA at 0xb400-0xb407, BIOS settings: hda:DMA, hdb:pio
    ide1: BM-DMA at 0xb408-0xb40f, BIOS settings: hdc:pio, hdd:pio
hda: FUJITSU MPC3084AT, ATA DISK drive
hdc: Hewlett-Packard CD-Writer Plus 7500, ATAPI CDROM drive
hdd: TOSHIBA DVD-ROM SD-M1212, ATAPI CDROM drive
ide0 at 0x1f0-0x1f7,0x3f6 on irq 14
ide1 at 0x170-0x177,0x376 on irq 15
ALI15X3: Ultra DMA enabled
When I try to mount the CDROM, these appear at the bottom of "dmesg":
=========================
ALI15X3: MultiWord DMA enabled
hdc: ATAPI 24X CD-ROM CD-R/RW drive, 1024kB Cache, DMA
Uniform CD-ROM driver Revision: 3.06
ALI15X3: MultiWord DMA enabled
hdd: ATAPI 32X DVD-ROM drive, 256kB Cache, (U)DMA
lsmod
=====
[smitten@smitten]:~$ /sbin/lsmod
Module                  Size  Used by
ide-cd                 24076   2 (autoclean)
cdrom                  27356   0 (autoclean) [ide-cd]
[smitten@smitten]:~$ 
strace mount /dev/hdc /mnt
==========================
open("/dev/null", O_RDWR)               = 3
close(3)                                = 0
getuid()                                = 0
geteuid()                               = 0
lstat("/etc/mtab", {st_mode=S_IFREG|0644, st_size=145, ...}) = 0
rt_sigprocmask(SIG_BLOCK, ~[TRAP SEGV], NULL, 8) = 0
stat("/dev/hdc", {st_mode=S_IFBLK|0644, st_rdev=makedev(22, 0), ...}) = 0
open("/dev/hdc", O_RDONLY
[root@smitten]:~# strace -V
strace -- version 4.1
[root@smitten]:~# 
Is there anything else I can provide?
Thanks in advance,
-- 
    Brent M. Smith, <smitten@nextreality.net>
    
http://www.nextreality.net/
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/