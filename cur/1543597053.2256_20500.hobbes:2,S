Date: Wed, 11 Jul 2001 14:43:40 -0700
From: "Randy.Dunlap" <>
Subject: [patch-v2] i810 TCO Oops
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/7/11/168

Um, having lunch has created a better patch IMO.
It removes the "if (assignment_and_test)" line
and still fixes the Oops.
Please apply this one instead if possible...
to 2.4.7-preX and 2.3.6-acN.
Thanks.
-- 
~Randy--- linux/drivers/char/i810-tco.c.org	Mon Jul  2 13:56:41 2001
+++ linux/drivers/char/i810-tco.c	Wed Jul 11 14:25:21 2001
@@ -261,11 +261,13 @@
 	 */
 
 	pci_for_each_dev(dev) {
-		if (pci_match_device(i810tco_pci_tbl, dev))
+		if (pci_match_device(i810tco_pci_tbl, dev)) {
+			i810tco_pci = dev;
 			break;
+		}
 	}
 
-	if ((i810tco_pci = dev)) {
+	if (i810tco_pci) {
 		/*
 		 *      Find the ACPI base I/O address which is the base
 		 *      for the TCO registers (TCOBASE=ACPIBASE + 0x60)