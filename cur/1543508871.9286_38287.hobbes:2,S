Date: Fri, 10 Sep 1999 17:02:54 -0400
From:  fdavis112@juno ...
Subject: [PATCH] 2.3.17 imm.c
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/9/10/132

Hello,
      I have attached a patch for the 2.3.17 imm.c file. This fixes
declaration errors shown below.
Upon investigation, It was suggested that I take a look at the ppa.c file
for declarations.
After applying the patch, the file compiles without any errors.
imm.c:in function 'imm_detect':
imm.c:169: 'PARPORT_MODE_PCPS2' undeclared (first use in this function)
imm.c:172: 'PARPORT_MODE_PCECPPS2' undeclared (first use in this
function)
imm.c:176: 'PARPORT_MODE_PCECPEPP' undeclared (first use in this
function)
make[2]: *** [imm.o] Error 1
make[2]: Leaving directory '/usr/src/linux/drivers/scsi'
make[1]: *** [_modsubdir_scsi] Error 2
make[1]: Leaving directory '/usr/src/linux/drivers'
make: *** [_mod_drivers] Error 2
patched against 2.3.17 kernel
--- drivers/scsi/imm.c.old	Thu Sep  9 11:15:31 1999
+++ drivers/scsi/imm.c	Fri Sep 10 16:36:23 1999
@@ -166,14 +166,14 @@
 	 */
 	imm_hosts[i].mode = IMM_NIBBLE;
 
-	if (modes & PARPORT_MODE_PCPS2)
+	if (modes & PARPORT_MODE_TRISTATE)
 	    imm_hosts[i].mode = IMM_PS2;
 
-	if (modes & PARPORT_MODE_PCECPPS2) {
+	if (modes & PARPORT_MODE_ECP) {
 	    w_ecr(ppb, 0x20);
 	    imm_hosts[i].mode = IMM_PS2;
 	}
-	if (modes & PARPORT_MODE_PCECPEPP)
+	if ((modes & PARPORT_MODE_EPP) && (modes & PARPORT_MODE_ECP))
 	    w_ecr(ppb, 0x80);
 
 	/* Done configuration */
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/