Date: Wed, 10 Mar 1999 11:37:37 -0500 (EST)
From: Harvey Fishman <>
Subject: Re: Fujitsu MO 640 doesn't work with 2.2.2?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/3/10/109

On Wed, 10 Mar 1999, Richard B. Johnson wrote:
> On Wed, 10 Mar 1999, Harvey Fishman wrote:
> 
> > On Wed, 10 Mar 1999, Serguei Koubouchine wrote:
> > 
> > > The machine can be reliably crashed by writing to (or even reading lotta
> > > files from) the MO drive no matter whether it's plugged to the CDTxxxx or to
> > > a separate controller. No crashes when reading files from MO one-by-one with
> > > several seconds pause between reads. No crashes had been encountered on
> > > 2.2.0-pre6-ac2. Data corruption had been there since 2.1.129...
> > 
> > I have seen that sort of behavior also with Adaptec chips (AIC-7870 and
> > AIC-7895).  My solution has been to avoid wild-car writes.  Happens with
> > my M2513a but I do ever remember seeing it happen with the M2512a.
> > 
> > Harvey
> > 
> 
> I suggest turning off disconnect as a start. Adaptec and BusLogic
> controllers have a BIOS menu. If this temporarily fixes the problem,
> you probably have a drive that negotiates for a sync speed that it can't
> possibly handle. Setting (forcing) the sync speed to be less than what it
> negotiated will usually fix this problem.
> 
> Target 0: Queue Depth 28, Wide Synchronous at 40.0 MB/sec, offset 15
> Target 1: Queue Depth 28, Wide Synchronous at 20.0 MB/sec, offset 15
>    Seagate ST34573W Disk, artifically reduced ^^^^^
> Target 2: Queue Depth 28, Wide Synchronous at 40.0 MB/sec, offset 15
> Target 3: Queue Depth 3, Synchronous at 5.00 MB/sec, offset 11
>                                   CDROM ^^^^^^
> Target 4: Queue Depth 3, Synchronous at 4.00 MB/sec, offset 15
>                                    TAPE ^^^^^^
Thanks, but it IS set for 5 MHz.  The problem seems to be unique to Linux as
the machine dual boots Linux and NTW4 (SP4), and the problem only occurs 
Linux.  Can and do do wild card writes all day under NT and never a problem.
Since I use the MO drive for off-line storage, the wild card write is the
normal mode of usage for either O/S.  With Linux I am reduced to generating
a script with emacs and using that to do a file by file write.  That seems 
to work generally.
Harvey
----------------------------------------------------------------------------
 Harvey Fishman   |
fishman@panix.com |           A little heresy is good for the soul.
  718-258-7276    |
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/