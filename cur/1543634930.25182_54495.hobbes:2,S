Date: Thu, 4 Jul 2002 15:04:49 +0200
From: Vitez Gabor <>
Subject: Re: [announce] [patch] batch/idle priority scheduling, SCHED_BATCH
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/7/4/7

On Mon, Jul 01, 2002 at 02:26:42AM +0200, Ingo Molnar wrote:
> the load generated by multiple SCHED_BATCH processes does not show up in
> the load average - this is the straightforward solution to not confuse
> load-average-sensitive applications such as sendmail.
I think this will confuse atd too, which is an obvious candidate 
for the batch scheduler; it may end up starting all jobs which 
sit in it's "batch" queue.
I think a load-average calculation scheme like this would be better:
oldload: is the load average calculated the old way
batchload: is the load average calculated only from the batch scheduler
numcpus: number of cpus...
newload(){
if (oldload > numcpus) return oldload;
if ((oldload+batchload) > numcpus) return numcpus;
return (oldload+batchload)
}
So the batch processes would show the CPUs maxed out, but would not show 
up as overload in the load average. (and you could run 
"atd -l <numcpus - 0.3>")
	regards:
		Gabor Vitez
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/