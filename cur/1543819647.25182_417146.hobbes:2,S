Date: Thu, 20 Apr 2006 08:42:50 +0200
From: Jens Axboe <>
Subject: Re: new Areca driver in 2.6.16-rc6-mm2 appears to be broken
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/4/20/24

On Thu, Apr 20 2006, erich wrote:
> Dear Jens Axboe,
> 
> I  do "fsck -fy /dev/sda1" on driver MAX_XFER_SECTORS 512.
> The file system was not clean.
> I attach mesg.txt for you refer to.
> 
> =====================================
> == boot with driver MAX_XFER_SECTORS 4096
> =====================================
> #mkfs.ext2 /dev/sda1
> #reboot
> =====================================
> == boot with driver MAX_XFER_SECTORS 512
> =====================================
> #fsck -fy /dev/sda1
> /dev/sda1:clean,.............
> #reboot
> =====================================
> == boot with driver MAX_XFER_SECTORS 4096
> =====================================
> #mount /dev/sda1 /mnt/sda1
> #cp /root/aa /mnt/sda1
> #reboot
> =====================================
> == boot with driver MAX_XFER_SECTORS 512
> =====================================
> #fsck -fy /dev/sda1
> /dev/sda1: no clean,........and dump message such as the attach file 
> mesg.txt.
So the conclusion is that your driver and/or hardware corrupts data when
you set MAX_XFER_SECTORS too high. I can't help you anymore with this,
you should be in the best position to debug the driver and/or hardware
:-)
It could be that the higher setting just exposes another transfer
setting bug, like maximum number of segments or segment size, etc.
-- 
Jens Axboe
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/