Date: Wed, 11 Jul 2007 17:39:23 -0700
From: Greg KH <>
Subject: Re: [PATCH 05/34] PCI: Use a weak symbol for the empty version of pcibios_add_platform_entries()
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/7/11/651

On Wed, Jul 11, 2007 at 05:49:22PM -0600, Matthew Wilcox wrote:
> On Wed, Jul 11, 2007 at 04:31:19PM -0700, Greg Kroah-Hartman wrote:
> > I'm not sure if this is going to fly, weak symbols work on the compilers I'm
> > using, but whether they work for all of the affected architectures I can't say.
> > I've cc'ed as many arch maintainers/lists as I could find.
> > 
> > But assuming they do, we can use a weak empty definition of
> > pcibios_add_platform_entries() to avoid having an empty definition on every
> > arch.
> 
> This seems like a regression.  We go from having an empty inline
> function that gets optimised away to 0 to having a function call to a
> trivial function.  And on any architecture that *does* define this,
> (unless I misunderstand the GCC manual), we still include the weak
> definition, thus wasting space.
Yeah, but it can be a big pain to add it to every architecture when only
1 or two need it, which is why I see people using the week symbol stuff
more and more, right?  This is just following that trend.
thanks,
greg k-h
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/