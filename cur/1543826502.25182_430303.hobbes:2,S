Date: Mon, 5 Jun 2006 23:01:14 -0400
From: Chuck Ebbert <>
Subject: [patch] i386: print NUMA in oops messages
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/6/5/342

Print "NUMA" in oops messages if it is configured, since it makes a big
difference now that NUMA-aware code is common in the kernel.  "SMP"
could be removed since all NUMA machines are SMP, but it's probably
better to be backwards-compatible.
Signed-off-by: Chuck Ebbert <76306.1226@compuserve.com>
---
Applies after previous patch that added stack size printout.
 arch/i386/kernel/traps.c |   13 +++++++++----
 1 files changed, 9 insertions(+), 4 deletions(-)
--- 2.6.17-rc5-32.orig/arch/i386/kernel/traps.c
+++ 2.6.17-rc5-32/arch/i386/kernel/traps.c
@@ -368,16 +368,21 @@ void die(const char * str, struct pt_reg
 		handle_BUG(regs);
 		printk(KERN_EMERG "%s: %04lx [#%d]\n", str, err & 0xffff, ++die_counter);
 		printk(KERN_EMERG "%dK_STACKS ", THREAD_SIZE / 1024);
+		printk(
 #ifdef CONFIG_PREEMPT
-		printk("PREEMPT ");
+			"PREEMPT "
 #endif
 #ifdef CONFIG_SMP
-		printk("SMP ");
+			"SMP "
+#endif
+#ifdef CONFIG_NUMA
+			"NUMA "
 #endif
 #ifdef CONFIG_DEBUG_PAGEALLOC
-		printk("DEBUG_PAGEALLOC");
+			"DEBUG_PAGEALLOC"
 #endif
-		printk("\n");
+			"\n");
+
 		if (notify_die(DIE_OOPS, str, regs, err,
 					current->thread.trap_no, SIGSEGV) !=
 				NOTIFY_STOP) {
-- 
Chuck
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/