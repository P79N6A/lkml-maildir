Date: Thu, 31 Dec 1998 16:12:57 -0500
From: Gert Vervoort <>
Subject: 2.2.0-pre1 breaks ppa-driver
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1998/12/31/211

The assembler changes in ppa.c in linux-2.2.0-pre1 
break detections of a PS/2 parallel port.
Both gcc 2.7.2.3 and egcs 1.1.1 give the same result.
From dmesg:
--------------------------------------------------------------
ppa: Version 2.01
ppa: Found device at ID 6, Attempting to use EPP 32 bit
ppa: Found device at ID 6, Attempting to use PS/2
ppa: Unable to establish communication, aborting driver load.
scsi : 0 hosts.
scsi : detected total.
--------------------------------------------------------------
Workaround:
(disables assembler routines for i386 in ppa.c)
--- linux/drivers/scsi/ppa.c.ORIG	Thu Dec 31 15:43:50 1998
+++ linux/drivers/scsi/ppa.c	Thu Dec 31 15:46:46 1998
@@ -366,7 +366,7 @@
  * be very little improvement on the current 586+ machines as it is the
  * IO statements which will limit throughput.
  */
-#ifdef __i386__ 
+#ifdef 0
 #define BYTE_OUT(reg) \
 	"	movb " #reg ",%%al\n" \
 	"	outb %%al,(%%dx)\n" \
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/