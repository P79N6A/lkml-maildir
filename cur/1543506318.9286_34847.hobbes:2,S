Date: Thu, 19 Aug 1999 15:22:49 +0100 (BST)
From: "Stephen C. Tweedie" <>
Subject: [PATCH] 2.3.14: bug-fix for raw IO error recovery
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/8/19/33

Hi,
The patch below fixes a problem with map_user_kiobuf() failing to
reset its virtual address pointer before a retry if it encounters a
locked page.
--Stephen
----------------------------------------------------------------
--- mm/memory.c.~1~	Wed Aug 18 12:11:08 1999
+++ mm/memory.c	Thu Aug 19 14:58:03 1999
@@ -540,8 +540,10 @@
 		wait_on_page(map);
 	}
 	
-	if (++repeat < 16)
+	if (++repeat < 16) {
+		ptr = va & PAGE_MASK;
 		goto repeat;
+	}
 	return -EAGAIN;
 }
 
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/