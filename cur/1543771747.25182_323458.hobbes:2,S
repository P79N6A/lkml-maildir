Date: Mon, 6 Jun 2005 13:42:13 -0500
From: Michael Halcrow <>
Subject: Re: [PATCH 2/3, 2.6.12-rc5-mm1] eCryptfs: export user key type
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/6/6/123

On Mon, Jun 06, 2005 at 10:42:02AM +0100, David Howells wrote:
> Michael Halcrow <mhalcrow@us.ibm.com> wrote:
> > > +EXPORT_SYMBOL( key_type_user );
> > 
> > This is the only modification necessary to support eCryptfs.
> 
> Unfortunately, that might have to be EXPORT_SYMBOL_GPL() nowadays
> since I reimplemented the predefined keyring types of user and
> keyring using RCU.
Noted; new patch included below.
> > While we are working on getting it ready for merging into the
> > mainline kernel, we would like to distribute it as a separate
> > kernel module, and we would like for users or distro's do not need
> > to modify their kernels to build and run it.
> 
> "It" being?
eCryptfs.
> > Would there be any objections to exporting the key_type_user
> > symbol?  Is there any general reason why kernel modules should not
> > have access to the user key type struct?
> 
> No and no, but see above. You could also export the user defined key
> type ops and define your own key type using them.
I can imagine scenarios where new kernel modules make use some
universal key type (i.e., without userspace apps having to be aware of
a special keytype).  The ``user'' key type seems like a good candidate
for that.
Signed off by: Michael Halcrow <mhalcrow@us.ibm.com>
--- linux-2.6.12-rc5-mm1/security/keys/user_defined.c	2005-05-28 17:18:52.000000000 -0500
+++ linux-2.6.12-rc5-mm1-ecryptfs/security/keys/user_defined.c	2005-06-06 13:26:58.757403080 -0500
@@ -48,6 +48,8 @@
 	char		data[0];	/* actual data */
 };
 
+EXPORT_SYMBOL_GPL(key_type_user);
+
 /*****************************************************************************/
 /*
  * instantiate a user defined key
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/