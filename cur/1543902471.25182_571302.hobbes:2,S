Date: Wed, 18 Jul 2007 16:25:38 -0300
From: Mauro Carvalho Chehab <>
Subject: Re: [PATCH] Conexant 2388x: check for kthread_run
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/7/18/364

Hi Cyrill,
Em Qua, 2007-07-18 Ã s 22:56 +0400, Cyrill Gorcunov escreveu:
> This patch adds checking of kthread_run return code.
> 
> Signed-off-by: Cyrill Gorcunov <gorcunov@gmail.com>
> ---
> Probably we could just ignore a such situation (we do
> check for core->kthread value before trying to stop the
> thread) but we have to leave a footmark in kernel
> messages anyway I guess. Comments?
> +		if (IS_ERR(core->kthread)) {
> +			err = PTR_ERR(core->kthread);
> +			printk(KERN_ERR "Failed to create cx88 audio thread, err=%d\n",
> +			       err);
> +			goto fail_unreg;
I would just remove the goto from your patch. 
It is safe not starting the kernel thread, but keeping the driver
initializing.
The drawback of not having the thread is not changing to stereo on some
situations and not detecting audio standard changes (some countries may
have more than one audio standard when you changing from VHF to UHF or
on Cable TV).
-- 
Cheers,
Mauro
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/