Date: Thu, 04 Mar 2004 16:19:43 +0100
From: large <>
Subject: Patch: Plustek scanner driver (pt_drv) port to 2.6, correction for 2.6.3
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/3/4/118

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1
Hi,
I recently updated from 2.6.0-test4 to 2.6.3 and noticed that my pt_drv
won't work any more. It did not load, telling me something like
missing symbol: kdev_t_to_nr
I investigated and found the problem:
the inline function kdev_t_to_nr does not exist any longer, I think it's
depr. due to the kdev device changes in 2.6.3 (2.6.2?).
ptdrv.c:
255: int minor = MINOR(kdev_t_to_nr(ip->i_rdev));
Anyway, I could not figure out what function might be it's successor, so
I simply removed the function call, leading to:
ptdrv.c:
225: int minor = MINOR(ip->i_rdev);
All kdev_t.h functions existing in 2.6.3 did only bad stuff to the
numbers so think this might be correct.
I just removed it, as it works for me (and should logically, reviewing
how the MINOR inline works now). I could not test it with more than one
scanner device, so it might still be false.
Anyone out there who can proof whether this is OK like this?
Attached the changed patch...
cu,
~  Lars
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.3 (GNU/Linux)
Comment: Using GnuPG with Thunderbird - 
http://enigmail.mozdev.org
iD8DBQFAR0kO7V+LJJ0V3jwRAmM6AJkBzA2VciANIfuSUsP+8TqZfpvJ0ACfdfGs
+AR+ncqsDvRuqZZXGk4L5a8=
=4DJ7
-----END PGP SIGNATURE-----
[unhandled content-type:application/gzip]