Date: Mon, 26 Nov 2007 12:40:24 -0800
From: Randy Dunlap <>
Subject: Re: 2.6.24-rc3-mm1
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/11/26/218

On Mon, 26 Nov 2007 11:34:15 -0800 (PST) Christoph Lameter wrote:
> On Mon, 26 Nov 2007, Randy Dunlap wrote:
> 
> > On Tue, 20 Nov 2007 20:45:25 -0800 Andrew Morton wrote:
> > 
> > > 
> > > 
ftp://ftp.kernel.org/pub/linux/kernel/people/akpm/patches/2.6/2.6.24-rc3/2.6.24-rc3-mm1/
> > 
> > allnoconfig on x86_64 gives:
> > 
> > arch/x86/mm/init_64.c:84: error: implicit declaration of function 'pfn_valid'
> > mm/page_alloc.c:2533: error: implicit declaration of function 'pfn_valid'
> > mm/vmstat.c:518: error: implicit declaration of function 'pfn_valid'
> > mm/memory.c:400: error: implicit declaration of function 'pfn_valid'
> > drivers/char/mem.c:312: error: implicit declaration of function 'pfn_valid'
> 
> Hmmm... CONFIG_SPARSEMEM is not set if you do allnoconfig
> 
> config SPARSEMEM
>         def_bool y
>         depends on SPARSEMEM_MANUAL
> 
> So I guess we need to set SPARSEMEM_MANUAL
> 
> But arch/x86/Kconfig has
> 
> config SPARSEMEM_MANUAL
>         bool "Sparse Memory"
>         depends on ARCH_SPARSEMEM_ENABLE
>         help
>           This will be the only option for some systems, including
>           memory hotplug systems.  This is normal.
> 
> It needs to be not deselectable for x86_64. 
> 
> Inserting
> 
> 	def_bool y if X86_64
> 
> did not help....
> 
> Somehow make menuconfig did not give me an ability to even enable this 
> again.
Thanks for the hint.
ARCH_SELECT_MEMORY_MODEL depends on X86_32.  Is that too restrictive?
config ARCH_SELECT_MEMORY_MODEL
	def_bool y
	depends on X86_32 && ARCH_SPARSEMEM_ENABLE
---
~Randy
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/