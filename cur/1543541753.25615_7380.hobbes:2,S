Date: Mon, 14 Aug 2000 17:57:47 +0100
From:  jon@monster ...
Subject: aliasing
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/8/14/113

Hi,
I am trying to get IP aliasing up and running, not usually very hard,
but this is causing major probs.
I have seen in the archives people saying this problem is caused by
trying to ping broadcast, but i am
not in this case.
I have a machine with two physical interfaces, kernel2.2.14 (my build,
on RH6.2), ipchains firewall etc. Before you ask, this
all works, and IP aliasing support is definately in the kernel.
The machine has two interfaces eth0 and eth1. Which are opposite ends of
the firewall. I want to run a separate
logical private network on eth0.
I tryed:
ifconfig eth0:0 10.55.5.2
ifconfig eth0:0 netmask 255.255.255.0
ifconfig eth0:0 broadcast 10.55.5.255
then a:
route add -host 10.55.5.2 dev eth0:0
But, when I ping stuff on 10.55.5.0/24, I get the
ping: sendto:Operation not permitted
error.
So, here is an ifconfig dump and a route dump:
[root@myhost jon]# ifconfig
eth0      Link encap:Ethernet  HWaddr 00:10:4B:C2:FF:74
          inet addr: x.x.x.253  Bcast:x.x.x.255  Mask:255.255.255.252
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:83971 errors:0 dropped:0 overruns:0 frame:0
          TX packets:96359 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:100
          Interrupt:5 Base address:0xe400
eth0:0    Link encap:Ethernet  HWaddr 00:10:4B:C2:FF:74
          inet addr:10.55.5.2  Bcast:10.55.5.255  Mask:255.255.255.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          Interrupt:5 Base address:0xe400
eth1      Link encap:Ethernet  HWaddr 00:A0:CC:58:66:64
          inet addr: x.x.x.1  Bcast:x.x.x.251  Mask:255.255.255.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:94639 errors:0 dropped:0 overruns:0 frame:0
          TX packets:80622 errors:5 dropped:0 overruns:0 carrier:5
          collisions:0 txqueuelen:100
          Interrupt:9 Base address:0xe800
lo        Link encap:Local Loopback
          inet addr:127.0.0.1  Mask:255.0.0.0
          UP LOOPBACK RUNNING  MTU:3924  Metric:1
          RX packets:2 errors:0 dropped:0 overruns:0 frame:0
          TX packets:2 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
[root@gatekeeper jon]# route
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use
Iface
x.x.x.1   *               255.255.255.255 UH    0      0        0 eth1
x.x.x.253 *               255.255.255.255 UH    0      0        0 eth0
10.55.5.0       *               255.255.255.0   U     0      0        0
eth0
x.x.x.252 *               255.255.255.252 U     0      0        0 eth0
x.x.x.0   *               255.255.255.0   U     0      0        0 eth1
10.55.5.0       *               255.255.255.0   U     0      0        0
eth0
127.0.0.0       *               255.0.0.0       U     0      0        0
lo
default         x.x.x.254 0.0.0.0         UG    0      0        0 eth0
Before you ask, this is all done as root.
Anyone got any ideas because I am stumped? I also tried a 2.2.16 kernel,
but the behaviour is exactly the same.
I am half thinking that this is a bug, and half thinking that I am just
being stupid. Someone help me out here please.
Thanks
Jon
--
Jon Hulatt
Monster.com Europe Technology
 - T:  +44 (0) 1933 227780
 - F:  +44 (0) 1933 227715
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/