Date: Tue, 12 Jul 2005 21:16:48 -0500
From: Matt Domsch <>
Subject: Re: [PATCH 22/82] remove linux/version.h from drivers/message/fus ion
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/7/12/420

Eric, I have to have a similar compat file for the IPMI drivers
backported onto RHEL3, RHEL4, and SLES9.  They aren't in mainline of
course, but each OS has a slightly different copy for its needs, so my
DKMS packages carry it.
In general, this construct:
> > -#if (LINUX_VERSION_CODE < KERNEL_VERSION(2,6,6))
> > -static int inline scsi_device_online(struct scsi_device *sdev)
> > -{
> > -	return sdev->online;
> > -}
> > -#endif
is better tested as:
#ifndef scsi_device_inline
static int inline scsi_device_online(struct scsi_device *sdev)
{
    return sdev->online;
}
#endif
when you can.  It cleanly eliminates the version test, and tests for
exactly what you're looking for - is this function defined.
Thanks,
Matt
-- 
Matt Domsch
Software Architect
Dell Linux Solutions linux.dell.com & www.dell.com/linux
Linux on Dell mailing lists @ 
http://lists.us.dell.com
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/