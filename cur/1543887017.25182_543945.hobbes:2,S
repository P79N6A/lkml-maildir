Date: Sun, 13 May 2007 19:36:12 +0200
From: Thomas Gleixner <>
Subject: Re: [patch] make pit clocksource continuous
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/5/13/114

On Sun, 2007-05-13 at 21:23 +0400, Stas Sergeev wrote:
> Hello.
> 
> Thomas Gleixner wrote:
> >> Does this mean that on even an older
> >> boards (without acpi at all) the hrtimers
> >> won't work?
> > Not if PIT is the only clocksource available.
> So you mean it can work without both the
> pm_timer and hpet? Sorry for bothering you
> too much, but I am trying to use the hrtimers
> in my driver module, so I'd like to know all
> the corner-cases.
It does _NOT_ work without pm_timer or hpet for the reasons explained
before. 
When PIT is the only clocksource in the system, i.e. no HPET and no
PM_TIMER is available, then highres and dynticks are disabled.
> How can I test that situation when the hrtimers
> work only with PIT? Apparently disabling the
> pm_timer and hpet in config doesn't help testing
> it at all, since it simply refuses to work then.
It is supposed to refuse to switch to highres / dyntick when you
disabled pm_timer and hpet.
> Should I use hrtimer_get_res() to see if the
> hrtimers are available, or is there any better way?
hrtimer_get_res() works, but I have no idea why you need hrtimers in
your driver at all.
	tglx
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/