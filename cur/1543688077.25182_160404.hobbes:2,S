Date: Tue, 26 Aug 2003 14:58:21 +0100
From: Christoph Hellwig <>
Subject: Re: [Rdi1] Re: [PATCH] Add MOUNT_STATUS ioctl to cdrom device
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/8/26/110

On Tue, Aug 26, 2003 at 06:30:10PM +0700, Samphan Raruenrom wrote:
> >>This doesn't make sense at all.  Just try the unmount and
> >>tell the user if it failed - you can't say whether it will
> >>fail before trying.
> 
> Yes, you can! Reading the code, if vfsmount.mnt_count > 1 then
> umount on that device will fail.
if you are doing the unmount currently and nothing changes because
you hold the nessecary locks, yes.  But as soon as you drop the locks
this is void.  There's no way to find out whether you can unmount
a filesystem except trying it.
> Hmm. You seem to advice me to detect the 'eject' button then issue
> a umount? I don't know how and I guess it is impossible. But maybe
> I'm wrong.
See Jens' post.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/