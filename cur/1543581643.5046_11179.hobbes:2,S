Date: Mon, 12 Feb 2001 15:27:07 -0200
From: Arnaldo Carvalho de Melo <>
Subject: Re: [PATCH] to deal with bad dev->refcnt in unregister_netdevice()
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/2/12/135

Em Mon, Feb 12, 2001 at 01:56:18PM -0500, Thomas Hood escreveu:
> Sorry, but it turns out that the bug is not completely
> fixed by the change that acme made.  With the change,
> ifup-ing and if-downing eth0 with the ipx module loaded
> no longer reduces eth0's refcnt to an indefinitely low
> (larger and larger negative) number.  However if the ipx
> module is loaded first and ipx configured on eth0, and
> then the network card inserted and "ifconfig eth0 up" done,
> and then "ifconfig eth0 down" done, then once again the
> refcnt is too low, so that when I try to "cardctl eject"
> my ethernet card, "modprobe -r xirc2ps_cs" hangs up.
> This whole business of refcnts needs to be thought 
> through more carefully.
As I've told in the message I've sent, I'm unfortunately damn busy these
days and wrote this patch in a hurry, was waiting for your feedback to see
if it fixed the problem or not, but it was applied because it seemed
obviously correct. I'll try to work on this as soon as possible, but this
can take some time.
- Arnaldo
> > This bug was fixed by "acme" in 2.4.1-ac10.  :)
> > The ipx driver now increments refcnt on NETDEV_UP to
> > match downing the interface on NETDEV_DOWN.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://vger.kernel.org/lkml/