Date: Mon, 26 Jul 1999 18:53:40 +0100 (GMT)
From: Tim Waugh <>
Subject: Re: Problems with missing interrupts (probably my fault)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/7/26/64

On 26 Jul 1999, Harald [ISO-8859-1] NordgÃ¥rd-Hansen wrote:
>   When I poll the device for data (which creates a lot of CPU load),
> it seems to work all right.  But when I try to turn on interrupts on
> the underlying parallel port, I seem to get only about 1/4 of the
> interrupts that are supposed to be generated by the device.  (Turning
> off the interrupts and polling on bit 6 of the status register works
> nicely, though.)
Since you're getting interrupts at all, presumably it isn't just a
question of bit 4 of CTR being low and disabling interrupts from the port?
port->ops->enable_irq (port) will set it.
By looking at the comments, it looks like you're only getting about 500
interrupts a second, is that right?  I wonder how you're timing that.
You could have a wait_queue that the interrupt service routine wakes up,
and then sleep on that in the irq-driven read routine instead of just
doing a schedule.  It shouldn't make a difference though..
Tim.
*/
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/