Date: Mon, 23 Apr 2001 20:28:12 -0500
From: Peter Samuelson <>
Subject: Re: [upatch] lib/Makefile
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/4/23/161

  [Peter Samuelson]
> > Introduced in 2.4.4pre4, I believe.  $(export-objs) need not be
> > conditional, and the if statement was not really correct either,
> > although in this case it probably worked.
[Tom Rini]
> Er, are you sure changing the test for !"nn" is correct here?  I
> _think_ at least that is intentional and correct (since you can have
> one on but not the other).
I understand the intent.  The point is that in our current makefiles
you are not allowed to assume that a negative value is "n", because it
could be "".
2.4.4pre probably works because each 'config.in' file explicitly sets
these variables to "y" or "n".  However, it would be perfectly legal
for a config.in to unset the variable, or for that matter not even
mention it.  In that case the !"nn" test fails.
This is the same reason you cannot use 'ifdef CONFIG_*' in the
Makefiles.  Lots of people do, but each instance is a bug.  They are
assuming the opposite: that a variable will be "" rather than "n".
(N.B. this issue will go away with Keith's 2.5 Makefiles.  And there
was much rejoicing.)
Peter
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/