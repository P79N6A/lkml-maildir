Date: Fri, 05 May 2006 09:36:00 -0700
From: "H. Peter Anvin" <>
Subject: Bugs aren't features: X86_FEATURE_FXSAVE_LEAK
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/5/5/98

The recent fix for the AMD FXSAVE information leak had a problematic side effect.  It 
introduced an entry in the x86 features vector which is a bug, not a feature.
The problem with this is that the features vector is designed so that it can be ANDed 
between CPUs to find out the common feature set.  However, bugs aren't features, and bugs 
should be ORd, not ANDed.  In that sense, the *absence* of a bug is a feature.
There are two possible ways of dealing with this:
a) put bugs in the features vector, but sense-inversed, i.e. 1 = bug absent; 0 = bug present.
b) add a separate bugs vector.
When I originally wrote the code I always meant to do (b), but never got around to it. 
It's clear, though, that whatever way we go about this, it should also incorporate the 
fdiv, hlt, f00f, and coma bugs.
	-hpa
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/