Date: Wed, 05 Mar 2008 16:18:54 +0100
From: Jiri Slaby <>
Subject: Re: prctl(0x8) -> EINVAL [Was: 2.6.25-rc3-mm1]
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/3/5/203

On 03/05/2008 03:06 PM, Serge E. Hallyn wrote:
> From 4a66f19580489a3ac84f0a145e4585c09e65c88e Mon Sep 17 00:00:00 2001
> From: Serge E. Hallyn <serue@us.ibm.com>
> Date: Wed, 5 Mar 2008 06:02:32 -0800
> Subject: [PATCH 1/1] capabilities: use cap_task_prctl when !CONFIG_SECURITY
> 
> capabilities-implement-per-process-securebits.patch introduced
> cap_task_prctl() and moved the handling of capability-related
> prctl into it.  So when !CONFIG_SECURITY, the default
> security_task_prctl() needs to call cap_task_prctl() the way
> other default hooks call capability helpers when they exist.
> 
> This fixes a slew of userspace breakages when
> CONFIG_SECURITY=n.
> 
> Signed-off-by: Serge E. Hallyn <serue@us.ibm.com>
Tested-by: Jiri Slaby <jirislaby@gmail.com>