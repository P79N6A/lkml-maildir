Date: Fri, 25 May 2007 11:50:16 +0200 (CEST)
From: Jiri Kosina <>
Subject: Re: [BUG] USB input death then system freeze
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/5/25/131

On Thu, 24 May 2007, Nicolas Mailhot wrote:
> Most recent kernel where this bug did *NOT* occur: pre 2.6.21 mm
> kernels, non-mm 2.6.22-rc2
> Distribution: Fedora Devel
> Hardware Environment: EHCI input on external powered hub with CK804 mainboard
> Software Environment: Nothing specific
> Problem Description:
> After a few hours of activity 2.6.22-rc1-mm1 and 2.6.22-rc2-mm1 will lose USB
> HID INPUT (keyboard or mice with no priority), then the system will freeze
> drivers/hid/usbhid/hid-core.c: input irq status -75 received
This is now handled in bugzilla [1]. Zan Lynx also reported this problem, 
and from the HID_DEBUG output he provided is evident that it is caused by 
HID layer receiving a report of size 4294967284 (which corresponds to 
urb->actual_length of the URB received from USB core).
Alan Stern suggested to reproduce the bug with CONFIG_USB_DEBUG and also 
collect the usbmon trace, so that we can clearly understand what happens.
I am now inclined to think that this is caused by USB core messing up the 
URB somehow, HID core seems to receive the URB with already bogus values.
[1] 
http://bugzilla.kernel.org/show_bug.cgi?id=8535
Thanks,
-- 
Jiri Kosina
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/