Date: Thu, 6 May 1999 23:56:51 +0200 (CEST)
From: Andrea Arcangeli <>
Subject: Re: [patch] SMP race fix [was Re: SMP lockup & 3c509 on 2.2.x [aka.the  Deadly 'ping -f']]
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/5/6/251

On Thu, 6 May 1999, M.H.VanLeeuwen wrote:
>I've been running your changes on 2.2.6 for the last hour or so
>w/o any lockups.
If I remeber well you was able to reproduce trivially the lockup in some
minute of ping -f, right?
> 10:    4848399    4817093    IO-APIC-edge  eth0
			       ^^^^^^^^^^^^ fine ;)
>here is /var/log/kernel... one interesting item i've not seen before is
>the Infinite loop message, so far it's only happened once and eth0 continued
>to function normally.
The message are 3c509 related. nothing related to my fixes. The timeout is
because the incoming queue was full.
>May  6 12:58:23 linux1a kernel: eth0: Infinite loop in interrupt, status 2091.
I guess (and yes, this is only a guess, I don't have signed the NDA for
the 3c509 specs ;) that it can be that your machine was fast enough to
handling more work than max_interrupt_work. Everything 3c509 related and I
seen such message at once here too on UP some time ago if I remeber well.
But it has nothing to do with irq tha reenter itself, it's just that after
some time you are doing work in the irq, you then stop receiving data to
not stall too much in the irq.
So it seems that the race I spotted and fixed is the bug that was harming
you.
Andrea Arcangeli
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/