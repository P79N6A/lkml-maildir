Date: Wed, 7 Aug 2002 03:10:26 +0000 (GMT)
From: Julian Anastasov <>
Subject: Re: "new style" netdevice allocation patch for TUN driver (2.4.18 kernel)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/8/6/266

	Hello,
Jacek Konieczny wrote:
> I had a lot of problem with tun devices created with both openvpn and
> vtund. When I wanted to shut down my system when the devices were in
> use (eg. TCP connection established on tun0 interface), even if the
> tunneling daemon was killed, it stopped while trying to deconfigure
> network. And "unregister_netdevice: waiting for tun0 to become free"
> message was displayed again and again. I tried to resolve this problem
> using Google, but I have only found out, that this is behaviour of 2.4
> kernels, and that it is proper
...
> This is patch against 2.4.18 sources.
	Don't waste time, now when 2.4.19 is out can you try with it? It 
has fix for such problem if you have multipath routes with such devices, 
Alexey already forgot about it :) As for tun in kernel it looks correct, 
unregister_netdevice() under rtnl_lock, only that dev_close is redundant.
Regards
--
Julian Anastasov <ja@ssi.bg>
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/