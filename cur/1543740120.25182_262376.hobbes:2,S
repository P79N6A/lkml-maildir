Date: Wed, 20 Oct 2004 10:42:59 -0700
From: john stultz <>
Subject: Re: process start time set wrongly at boot for kernel 2.6.9
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/10/20/203

On Wed, 2004-10-20 at 07:51, George Anzinger wrote:
> john stultz wrote:
> > I've begun to agree with you about this issue. It seems that until we
> > can catch every use of jiffies for time, doing one by one is going to
> > cause consistency problems.  So I'd support the full backout of the
> > do_posix_clock_monotonic_gettime changes to the proc interface. 
> > 
> > George, would you protest this?
> 
> It seems to me that if we do that we will stop making any changes at all.  I.e. 
> we will not see the rest of the "jiffies for time" code, as it will not "hurt" 
> any more.
Sorry, not sure I followed that. Could you explain further?
> Also, the orgional change was made for a reason...
Right, but I thought it was you who made the original change, and I
don't recall you answering what that reason was? I wouldn't want the
code ripped out if it was fixing an actual problem, so that's why I'm
asking.
At the moment, I'd like the idea I think Tim is suggesting. Where we fix
time so we have a stable base, then we decouple xtime and jiffies from
the timer interrupt and instead emulate them from the time code. 
So rather then every tick incrementing jiffies, instead jiffies is set
equal to (monotonic_clock()*HZ)/NSEC_PER_SEC. 
Thoughts?
-john
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/