Date: Wed, 15 Jan 2003 21:25:20 +0200
From: Dan Aloni <>
Subject: Re: Linux v2.5.57
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/1/15/187

On Mon, Jan 13, 2003 at 10:44:25AM -0800, Linus Torvalds wrote:
> And special mention for Brian Gerst, who figured out and fixed a x86 page
> table initialization fix that would leave old machines unable to boot
> 2.5.x. That might explain a number of the "I can't run 2.5.x" that weren't
> seen by developers (most developers tend to have hardware studly enough
> that they'd never see the problem).
We can get most hardware to boot a little faster if we add this part of 
the patch which seems to have been dropped out, comparing to Brian's 
patch from 6 months ago.
--- linux-2.5.57/arch/i386/mm/init.c      2003-01-13 20:17:41.000000000 +0200
+++ linux-2.5.57/arch/i386/mm/init.c      2003-01-14 00:01:19.000000000 +0200
@@ -112,9 +112,7 @@
 
                pmd = pmd_offset(pgd, vaddr);
                for (; (pmd_ofs < PTRS_PER_PMD) && (vaddr != end); pmd++, pmd_ofs++) {
-                       if (pmd_none(*pmd)) 
-                               one_page_table_init(pmd);
-
+                       one_page_table_init(pmd);
                        vaddr += PMD_SIZE;
                }
                pmd_ofs = 0;
-- 
Dan Aloni
da-x@gmx.net
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/