Date: Wed, 16 Jan 2002 14:02:08 +0200
From: Silviu Marin-Caea <>
Subject: Re: Ramdisk doesn't work well in 2.4.17
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/1/16/86

On Tue, 15 Jan 2002 16:26:47 +0200
Silviu Marin-Caea <silviu@delrom.ro> wrote:
Thanks to all who answered.
To Andrew Morton: unfortunately, the patch doesn't fix it for me.
http://www.kernel.org/pub/linux/kernel/people/andrea/kernels/v2.4/2.4.18pre2aa2/00_ramdisk-buffercache-2
This is what I do:
compile a kernel with the attached .config
Notes about configuration:
* Loopback device support
* Network block device support
* RAM disk support with a default size of 40960 (that's not an error)
disk size* Initial RAM disk initrd support
* No Kernel module loader
Tried kernel versions: 2.4.17, 2.4.18pre1 with the above patch,
2.4.18pre3 and pre4
Then:
rdev bzImage /dev/fd0 && rdev -r bzImage 49152 && rdev -R bzImage 0
dd if=bzImage of=/dev/fd0
Using this rootdisk:
http://prdownloads.sourceforge.net/partimage/partimage-0.6.1-i386-rootdisk-1.raw
I also tried with a modified version that uses a regular init, not
busybox.
This happens:
RAMDISK: Compressed image found at block 0
...
VFS: Mounted root (minix filesystem).
Freeing unused kernel memory: 204k freed
Kernel panic: no init found.  Try passing init= option to kernel.
> The root disk is good, because I have built a 2.4.9 in a similar
> fashion, and it works with it.  The problem is I need NTFS support,
> and that doesn't compile in 2.4.9.
-- 
Silviu Marin-Caea - Network & Systems Administrator - Delta Romania
Phone +4093-267961
[unhandled content-type:application/x-gzip]