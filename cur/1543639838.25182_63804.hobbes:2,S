Date: Tue, 13 Aug 2002 15:08:56 -0500
From: Jeff Dike <>
Subject: Re: [PATCH] UML - part 2 of 3
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/8/13/214

torvalds@transmeta.com said:
> Please use "root=0xXXYY" instead, or consider figuring out the name
> _automatically_ from the list of genhd's in the system (ie the reverse
> of  blkdev_name() or whatever it is called).
OK, consider that patch withdrawn.  In its place is the one below.  It's in
UML arch code, so it needs to be applied after UML itself.  It disables
'root=/dev/ubdxx' in UML for the time being.
The root_dev_names array looks like it can be eliminated entirely, as long
as the gendisk list is populated before checksetup.  This means either there
needs to be a before_setup_initcall or the calculation of the rootdev kdev_t
needs to be split out from the argument parsing and put in a late initcall.
I don't know if that breaks anything.
If that is reasonable, I can start laying the groundwork.
				Jeff
--- linus/arch/um/kernel/um_arch.c~     Fri Aug  2 22:06:03 2002
+++ linus/arch/um/kernel/um_arch.c      Tue Aug 13 14:32:39 2002
@@ -38,7 +38,7 @@
 int fg_console;
 struct kbd_struct kbd_table[MAX_NR_CONSOLES];
 
-#define DEFAULT_COMMAND_LINE "root=/dev/ubd0"
+#define DEFAULT_COMMAND_LINE "root=6200"
 
 unsigned long thread_saved_pc(struct task_struct *task)
 {
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/