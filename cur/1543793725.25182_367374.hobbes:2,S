Date: Wed, 16 Nov 2005 11:35:17 +0900
From: KAMEZAWA Hiroyuki <>
Subject: Re: [PATCH 3/5] Light Fragmentation Avoidance V20: 003_fragcore
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/11/15/369

Hi,
> +/* Remove an element from the buddy allocator from the fallback list */
> +static struct page *__rmqueue_fallback(struct zone *zone, int order,
> +							int alloctype)
Should we avoid this fallback as much as possible ?
I think this is a weak point of this approach.
> +		/*
> +		 * If breaking a large block of pages, place the buddies
> +		 * on the preferred allocation list
> +		 */
> +		if (unlikely(current_order >= MAX_ORDER / 2)) {
> +			alloctype = !alloctype;
> +			change_pageblock_type(zone, page);
> +			area = &zone->free_area_lists[alloctype][current_order];
> +		}
Changing RCLM_NORCLM to RLCM_EASY is okay ??
If so, I think adding similar code to free_pages_bulk() is better.
-- Kame
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/