Date: Wed, 25 May 2005 08:55:50 +0200
From: "kus Kusche Klaus" <>
Subject: RE: RT patch acceptance
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/5/25/29

> Lee Revell wrote:
> >On Tue, 2005-05-24 at 19:20 -0700, Andrew Morton wrote:
> >
> >>Sven Dietrich <sdietrich@mvista.com> wrote:
> >>
> >>>I think people would find their system responsiveness / tunability
> >>> goes up tremendously, if you drop just a few unimportant IRQs into
> >>> threads.
> >>>
> >>People cannot detect the difference between 1000usec and 
> 50usec latencies,
> >>so they aren't going to notice any changes in responsiveness at all.
> >
> >The IDE IRQ handler can in fact run for several ms, which people sure
> >can detect.
> 
> Are you serious? Even at 10ms, the monitor refresh rate would 
> have to be
> over 100Hz for anyone to "notice" anything, right?... What 
> sort of numbers
> are you talking when you say several?
I measured IDE delays just a few weeks ago.
We are talking about up to 100 ms. 
Absolutely unacceptable for realtime systems.
*Very* noticeable even for interactive systems:
Keyboard and mouse lags, lost timer ticks, ...
Why that long?
* The system I tested uses a CF card connected to the standard IDE
  controller as its primary disk.
* The CF card runs in PIO mode. Hence, all data transfer is done
  by the CPU itself, in the interrupt handler, blocking the CPU.
* CF cards are slow, the worst I've seen does about 1.5 MB/s.
* On the other hand, CF cards deliver data continuosly:
  As soon as one sector has been read, the interrupt for the
  next sector arrives. No hole in between to do other things.
* Now, calculate the time for the standard sequential readahead,
  which is 128 KB. You end up with something close to 100 ms.
During this time, the CPU is completely occupied by IDE,
not reacting to anything else in the standard kernel.
With the RT kernel, at least everything above the IDE interrupt
priority level is able to continue.
-- 
Klaus Kusche                 (Software Development - Control Systems)
KEBA AG             Gewerbepark Urfahr, A-4041 Linz, Austria (Europe)
Tel: +43 / 732 / 7090-3120                 Fax: +43 / 732 / 7090-6301
E-Mail: kus@keba.com                                WWW: www.keba.com
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/