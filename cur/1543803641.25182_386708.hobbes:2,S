Date: Mon, 16 Jan 2006 07:47:50 -0800 (PST)
From: Christoph Lameter <>
Subject: Re: Race in new page migration code?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/1/16/142

On Mon, 16 Jan 2006, Hugh Dickins wrote:
> Indeed they are, at present and quite likely into posterity.  But
> they're not a common case here, and migrate_page_add now handles them
> silently, so why bother to complicate it with an unnecessary check?
check_range also is used for statistics and for checking if a range is 
policy compliant. Without that check zeropages may be counted or flagged 
as not on the right node with MPOL_MF_STRICT.
For migrate_page_add this has now simply become an optimization since
there is no WARN_ON occurring anymore.
> Or have you found the zero page mapcount distorting get_stats stats?
> If that's an issue, then better add a commented test for it there.
It also applies to the policy compliance check.
> Hmm, that battery of unusual tests at the start of migrate_page_add
> is odd: the tests don't quite match the comment, and it isn't clear
> what reasoning lies behind the comment anywa
Hmm.... Maybe better clean up the thing a bit. Will do that when I get 
back to work next week.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/