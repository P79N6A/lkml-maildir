Date: Mon, 26 Jan 2004 03:01:35 +0000
From: Philippe Elie <>
Subject: [PATCH] oprofile, typo in alpha driver
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/1/25/194

Unless I miss something this look like a typo, one user reported to get error
from the daemon: 'Unknown event for counter 1' (alpha ev6) and the behavior
was better but not completly sane after trying this patch: he get spurious
event for counter 1 when enabling only counter 0 but rarely now. No alpha box
to test this.
regards,
Phil
Index: arch/alpha/oprofile/common.c
===================================================================
RCS file: /usr/local/cvsroot/linux-2.5/arch/alpha/oprofile/common.c,v
retrieving revision 1.5
diff -u -p -r1.5 common.c
--- arch/alpha/oprofile/common.c	21 Jun 2003 16:20:31 -0000	1.5
+++ arch/alpha/oprofile/common.c	26 Jan 2004 02:43:38 -0000
@@ -57,7 +57,7 @@ op_axp_setup(void)
 
 	/* Compute the mask of enabled counters.  */
 	for (i = e = 0; i < model->num_counters; ++i)
-		if (ctr[0].enabled)
+		if (ctr[i].enabled)
 			e |= 1 << i;
 	reg.enable = e;
 
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/