Date: Fri, 19 Apr 2002 13:11:28 -0700
From: Paul Menage <>
Subject: Re: 12 way dbench analysis: 2.5.9, dalloc and fastwalkdcache
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/4/19/112

On Thursday Apr 18 17:32:19 2002, hannal@us.ibm.com wrote:
>However, I recently found a deadlock that no one else has been able to
>reproduce. Could you try doing a find on /proc and tell me if it
>deadlocks?  
You somehow lost the call to undo_locked() before calling permission()
in the event that exec_permission_lite() failed. This would cause any
lookup where the first component referred to a dentry with a
permission() operation to deadlock (in the case of find on /proc, it was
doing a chdir("..") from inside /proc/1/fd). The call to undo_locked()
was in earlier versions of your patch.
Paul
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/