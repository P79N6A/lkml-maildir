Date: Sun, 20 Aug 2006 19:27:02 +0200
From: Adrian Bunk <>
Subject: Re: Linux 2.4.34-pre1
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/8/20/108

On Sat, Aug 19, 2006 at 11:20:22AM +1000, Grant Coady wrote:
> On Sat, 19 Aug 2006 01:25:01 +0200, Adrian Bunk <bunk@stusta.de> wrote:
> 
> >Does anyone have an example with working kernels for both 2.4 and 2.6
> >and a significantely bigger functionally equivalent 2.6 kernel?
> 
> grant@peetoo:~$ ls -l /boot/bzImage-2.*
> -rw-r--r--  1 root root 1138921 2006-07-30 07:18 /boot/bzImage-2.4.30-hf32.7
> -rw-r--r--  1 root root 1139045 2006-07-30 06:35 /boot/bzImage-2.4.31-hf32.7
> -rw-r--r--  1 root root 1139058 2006-07-30 06:00 /boot/bzImage-2.4.32-hf32.7
> -rw-r--r--  1 root root 1138830 2006-08-12 15:55 /boot/bzImage-2.4.33-final
> -rw-r--r--  1 root root 1632535 2006-07-29 16:34 /boot/bzImage-2.6.16.27a
> -rw-r--r--  1 root root 1644014 2006-08-09 14:48 /boot/bzImage-2.6.17.8a
> -rw-r--r--  1 root root 1643932 2006-08-14 05:25 /boot/bzImage-2.6.17.8b
> -rw-r--r--  1 root root 1668673 2006-08-09 16:25 /boot/bzImage-2.6.18-rc4a
>...
> Looks like a consistent ~40% bloat to me ;)  
>...
Don't trust any statistics you did not fake yourself...
Your numbers show a 46.5% size increase from kernel to 2.4.33 to 
2.6.18-rc4.
But it's an extremely unfair comparison when I asked for "functionally 
equivalent" kernels, and you do e.g. compile your 2.4 kernel with APM 
support and your 2.6 kernel with ACPI support.
Numbers with a more fair comparison for this machine
(.config's attached) are:
-rw-rw-r-- 1 bunk bunk 1076676 2006-08-19 14:59 bzImage-2.4-gcc3.3
-rw-rw-r-- 1 bunk bunk 1431789 2006-08-19 14:59 bzImage-2.6-gcc3.3
That's only a 33% size increase.
Not that a 33% size increase was a good thing... Changes to the 
.config's can make the difference a bit smaller or bigger, but unless 
I'm cheating with CONFIG_CC_OPTIMIZE_FOR_SIZE=y, I'm not coming even 
remotely near to a similar size.
Unfortunately, there is not one thing that is causing the size increase. 
If only stuff like ACPI that shouldn't matter in size limited 
environments would become bigger it wasn't a big issue.
But looking at the objects, it seems that except for some subsystems 
without real development that stay at the same size (e.g. IDE, OSS, ext2), 
nearly everything grows by between 10% and 100%...  :-(
> Grant.
cu
Adrian
-- 
    Gentoo kernels are 42 times more popular than SUSE kernels among
    KLive users  (a service by SUSE contractor Andrea Arcangeli that
    gathers data about kernels from many users worldwide).
       There are three kinds of lies: Lies, Damn Lies, and Statistics.
                                                    Benjamin Disraeli
[unhandled content-type:application/octet-stream][unhandled content-type:application/octet-stream]