Date: Thu, 20 Sep 2007 09:15:50 -0700
From: David Brownell <>
Subject: Re: 2.6.23-rc6-mm1
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/9/20/271

On Thursday 20 September 2007, Kay Sievers wrote:
> 
> Isn't that all caused by the rtc driver registering itself without
> checking if it is able to grab the device? Wouldn't moving the
> request_resource() before doing any device registration do the magic?
I suspect it would.  Got patch?
I'm trying to remember why it registers before grabbing resources
(I/O region, irq) ... which is not the usual pattern, and is somewhat
of a surprise every time I notice it.  Though everything's undone on
error, so it "should" work just fine.
If that's not just some debugging leftover, the only thing that comes
to mind is that maybe it was to ensure that the resource labels in
/proc/{interrupts,ioports} clearly distinguished this from the legacy
driver.  The now-conventional way to label things there is by using
a logical name like "rtc0", which is the output of registration.
- Dave
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/