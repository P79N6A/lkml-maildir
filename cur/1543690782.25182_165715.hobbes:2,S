Date: Sat, 13 Sep 2003 17:34:57 +1000
From: Daniel Pittman <>
Subject: Re: PROBLEM: Impossible to read files from a CD-Rom
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/9/13/18

On Fri, 12 Sep 2003, Jens Axboe wrote:
> On Mon, Sep 08 2003, Samuel Thibault wrote:
>> On Mon 18 aug 2003 18:35:22 GMT, SÃ©bastien Hinderer wrote:
>> > I'm using a vanila linux-2.6.0-test3. When I try to use a CD-Rom,
>> > the mount is successful, so are the calls to ls. However, as soon
>> > as I try to read a file, I get a lot of messages such as :
[...]
>> We dug a little bit this Monday with Sebastien, and found out some
>> troubles: the call to set_capacity at the end of cdrom_read_toc()
>> writes a strange value, which is not always the same, even for the
>> same reinserted CD-ROM, seemingly because it came from
>> cdrom_get_last_written():
[...]
> I'd be more interested in fixing the real bug: why does your drive
> return zero length, and only sporadically?
This sounds somewhat like a problem I have playing DVD-R discs on one
DVD drive (Pioneer slot-loader), using Xine and the RAW device.
Basically, for some discs, the raw device cannot read any block, as the
capacity of the disc is reported as zero blocks.
I don't have trouble accessing the content on any other machine, though,
and can access the files through a mounted filesystem.
/proc/ide/hdc/capacity contains zero in these cases.
Occasionally, for a disc that does this, I get a valid (looking) size,
but not very often -- one time in twenty, at most.
I am happy to work on debugging this, if there is anything that can be
done to help identify the problem.
This only seems to occur with DVD-R discs, and without any predictable
pattern.
        Daniel
-- 
Gratitude is one of the least articulate of the emotions, 
especially when it is deep.
        -- Felix Frankfurter
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/