Date: Wed, 7 Nov 2007 17:10:07 -0500
From: Steven Rostedt <>
Subject: Re: [PATCH] sched: avoid large irq-latencies in smp-balancing
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/11/7/299

On Wed, Nov 07, 2007 at 10:27:25AM -0800, Andrew Morton wrote:
> > On Wed, 07 Nov 2007 13:17:00 +0100 Peter Zijlstra <peterz@infradead.org> wrote:
> > +	{
> > +		.ctl_name	= CTL_UNNUMBERED,
> > +		.procname	= "sched_nr_migrate",
> > +		.data		= &sysctl_sched_nr_migrate,
> > +		.maxlen		= sizeof(unsigned int),
> > +		.mode		= 644,
> > +		.proc_handler	= &proc_dointvec,
> > +	},
> 
> This (and all the other stuff in that table) should be described in
> Documentation/, please.
> 
> It would be nice if sched_nr_migrate didn't exist, really.  It's hard to
> imagine anyone wanting to tweak it, apart from developers.
I'm not so sure about that. It is a tunable for RT. That is we can tweak
this value to be smaller if we don't like the latencies it gives us.
This is one of those things that sacrifices performance for latency.
The higher the number, the better it can spread tasks around, but it
also causes large latencies.
I've just included this patch into 2.6.23.1-rt11 and it brought down an
unbounded latency to just 42us. (previously we got into the
milliseconds!).
Perhaps when this feature matures, we can come to a good defined value
that would be good for all. But until then, I recommend keeping this a
tunable.
Acked-by: Steven Rostedt <rostedt@goodmis.org>
-- Steve
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/