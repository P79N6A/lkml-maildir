Date: Tue, 14 Oct 2003 14:02:16 -0700
From: "Randy.Dunlap" <>
Subject: Re: Vortex full-duplex doesn't work?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/10/14/224

On Tue, 14 Oct 2003 22:31:09 +0200 Karel Kulhav√Ω <clock@twibright.com> wrote:
| Hello
| 
| I have collected from tidbits of information that
| ether=0,0,0x201,0,eth0 should set my 3c900 card to full duplex AUI.
| 
| I have tried this, then ifconfig eth0 up and then
| vortex-diag -vv and it still reports MAC Settings: half-duplex
| 
| When I rewrite all occurences of full_duplex in 3c59x.c for hard-coded
| "1", then I get MAC Settings: full-duplex
| 
| How do I set up this driver to force full-duplex AUI for 3c900 network
| card without using modules and without patching 3c59x.c?
BTW, what kernel version ???
As I indicated in another reply to you, <quote>
Please try this, although I'm not yet convinced that the 3c59x
driver calls all of the right hooks for this to work.
but good luck, and please report back on it. </quote>
It looks to me like (but I haven't traced it completely)
3c59x doesn't call netdev_boot_setup_check() [even indirectly],
and that is needed to set the irq/base/mem_start/mem_end
parameters for use during the probe() function.
(I'm looking at 2.4.22 source code for this.)
(3c59x uses mem_start for driver options flags.)
Can anyone confirm this?  If so, we could fix it, but I'd
like to have some confirmation of what I'm thinking on this
since I can't test it (no vortex/boomerang adapter).
--
~Randy
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/