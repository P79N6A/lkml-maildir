Date: Mon, 17 Sep 2007 13:20:05 +0400
From: Ivan Kokshaysky <>
Subject: Re: [PATCH]PCI:disable resource decode in PCI BAR detection
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/9/17/146

On Sun, Sep 16, 2007 at 11:34:35AM -0600, Robert Hancock wrote:
> > The most interesting fact there is that windows *does not* clear
> > PCI_COMMAND_MEMORY bits during PCI bus enumeration, so BIOS writers
> > have to rely on that. Yet another reason why your patch is unsafe.
> 
> Windows 98 doesn't, it says. That doesn't say anything about what newer 
> versions of Windows are doing (like Vista, which is the first to 
> actually use MMCONFIG).
But we're not going to drop support for hardware "designed for Windows 98",
aren't we?
> Check the code. We have a quirk to handle this, in 
> drivers/usb/host/pci-quirks.c
It doesn't help. It's a "final" fixup, so it runs much later than BAR sizing.
Ivan.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/