Date: Tue, 4 Sep 2007 04:02:21 +0530 (IST)
From: Satyam Sharma <>
Subject: Re: 2.6.23-rc4-mm1
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/9/3/212

Hi,
On Mon, 3 Sep 2007, Wim Van Sebroeck wrote:
> 
> > 
> > on x86_64:
> > drivers/watchdog/core/watchdog_dev.c:84:
> > warning: format '%i' expects type 'int', but argument 5 has type 'size_t'
Hmm, a warning I missed during my Sunday evening pastime.
> I'll have a look at it.
How about ... (unrelated cleanup thrown in, but SCNR)
* Fix this warning:
  drivers/watchdog/core/watchdog_dev.c:84:
  warning: format '%i' expects type 'int', but argument 5 has type 'size_t'
* CONFIG_xxx options are directly usable by preprocessor directives.
Signed-off-by: Satyam Sharma <satyam@infradead.org>
---
 drivers/watchdog/core/Makefile       |    5 -----
 drivers/watchdog/core/watchdog_dev.c |    6 +++---
 2 files changed, 3 insertions(+), 8 deletions(-)
--- linux-2.6.23-rc4-mm1/drivers/watchdog/core/Makefile~fix	2007-09-04 03:12:27.000000000 +0530
+++ linux-2.6.23-rc4-mm1/drivers/watchdog/core/Makefile	2007-09-04 03:12:45.000000000 +0530
@@ -4,8 +4,3 @@
 
 # The Generic Watchdog Driver
 obj-$(CONFIG_WATCHDOG_CORE)		+= watchdog_core.o watchdog_dev.o
-
-ifeq ($(CONFIG_WATCHDOG_DEBUG_CORE), y)
-EXTRA_CFLAGS += -DDEBUG
-endif
-
--- linux-2.6.23-rc4-mm1/drivers/watchdog/core/watchdog_dev.c~fix	2007-09-04 02:37:12.000000000 +0530
+++ linux-2.6.23-rc4-mm1/drivers/watchdog/core/watchdog_dev.c	2007-09-04 03:10:58.000000000 +0530
@@ -36,7 +36,7 @@
 #include <linux/init.h>		/* For __init/__exit/... */
 #include <linux/uaccess.h>	/* For copy_to_user/put_user/... */
 
-#ifdef DEBUG
+#ifdef CONFIG_WATCHDOG_DEBUG_CORE
 #define trace(format, args...) \
 	printk(KERN_INFO "%s(" format ")\n", __FUNCTION__ , ## args)
 #define dbg(format, arg...) \
@@ -81,7 +81,7 @@ static DEFINE_MUTEX(watchdog_register_mt
 static ssize_t watchdog_write(struct file *file, const char __user *data,
 				size_t len, loff_t *ppos)
 {
-	trace("%p, %p, %i, %p", file, data, len, ppos);
+	trace("%p, %p, %zu, %p", file, data, len, ppos);
 
 	if (!watchdogdev ||
 	    !watchdogdev->watchdog_ops ||
@@ -144,7 +144,7 @@ static int watchdog_ioctl(struct inode *
 		.identity =		"Watchdog Device",
 	};
 
-	trace("%p, %p, %i, %li", inode, file, cmd, arg);
+	trace("%p, %p, %u, %li", inode, file, cmd, arg);
 
 	if (!watchdogdev || !watchdogdev->watchdog_ops)
 		return -ENODEV;
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/