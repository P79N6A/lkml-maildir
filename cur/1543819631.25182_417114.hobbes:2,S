Date: Thu, 20 Apr 2006 09:54:20 +0800
From: "erich" <>
Subject: Re: new Areca driver in 2.6.16-rc6-mm2 appears to be broken
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/4/19/360

Dear Jens Axboe,
I  do "fsck -fy /dev/sda1" on driver MAX_XFER_SECTORS 512.
The file system was not clean.
I attach mesg.txt for you refer to.
=====================================
== boot with driver MAX_XFER_SECTORS 4096
=====================================
#mkfs.ext2 /dev/sda1
#reboot
=====================================
== boot with driver MAX_XFER_SECTORS 512
=====================================
#fsck -fy /dev/sda1
/dev/sda1:clean,.............
#reboot
=====================================
== boot with driver MAX_XFER_SECTORS 4096
=====================================
#mount /dev/sda1 /mnt/sda1
#cp /root/aa /mnt/sda1
#reboot
=====================================
== boot with driver MAX_XFER_SECTORS 512
=====================================
#fsck -fy /dev/sda1
/dev/sda1: no clean,........and dump message such as the attach file 
mesg.txt.
Best Regards
Erich Chen
----- Original Message ----- 
From: "Jens Axboe" <axboe@suse.de>
To: "erich" <erich@areca.com.tw>
Cc: <dax@gurulabs.com>; <billion.wu@areca.com.tw>; "Al Viro" 
<viro@ftp.linux.org.uk>; "Andrew Morton" <akpm@osdl.org>; "Randy.Dunlap" 
<rdunlap@xenotime.net>; "Matti Aarnio" <matti.aarnio@zmailer.org>; 
<linux-kernel@vger.kernel.org>; "James Bottomley" 
<James.Bottomley@steeleye.com>; "Chris Caputo" <ccaputo@alt.net>
Sent: Wednesday, April 19, 2006 9:19 PM
Subject: Re: new Areca driver in 2.6.16-rc6-mm2 appears to be broken
> On Wed, Apr 19 2006, erich wrote:
>> Dear Jens Axboe,
>>
>> About your request :
>>
>> ******************************************
>> ** boot with driver MAX_XFER_SECTORS 4096
>> ******************************************
>> #mkfs.ext2 /dev/sda1
>> #mount /dev/sda1 /mnt/sda1
>> #cp /root/aa /mnt/sda1/
>> #reboot
>> ******************************************
>> ** boot with driver MAX_XFER_SECTORS 512
>> ******************************************
>> #fsck /dev/sda1
>> /dev/sda1:clean,.............
>
> fsck -fy /dev/sda1
>
> You need to force a full check, the partition should be clean when you
> do this so fsck wont do anything.
>
>
> -- 
> Jens Axboe
> 
fsck 1.38 (30-Jun-2005)
e2fsck 1.38 (30-Jun-2005)
Pass 1: Checking inodes, blocks, and sizes
Inode 12 has illegal block(s).  Clear? yes
Illegal block #2060 (4294967295) in inode 12.  CLEARED.
Illegal block #2062 (4294967295) in inode 12.  CLEARED.
Illegal block #2064 (4294967295) in inode 12.  CLEARED.
Illegal block #2066 (4294967295) in inode 12.  CLEARED.
Illegal block #2068 (4294967295) in inode 12.  CLEARED.
Illegal block #2070 (4294967295) in inode 12.  CLEARED.
Illegal block #2072 (4294967295) in inode 12.  CLEARED.
Illegal block #2074 (4294967295) in inode 12.  CLEARED.
Illegal block #2076 (4294967295) in inode 12.  CLEARED.
Illegal block #2078 (4294967295) in inode 12.  CLEARED.
Illegal block #2080 (4294967295) in inode 12.  CLEARED.
Too many illegal blocks in inode 12.
Clear inode? yes
Restarting e2fsck from the beginning...
Pass 1: Checking inodes, blocks, and sizes
Pass 2: Checking directory structure
Entry 'aa' in / (2) has deleted/unused inode 12.  Clear? yes
Pass 3: Checking directory connectivity
Pass 4: Checking reference counts
Pass 5: Checking group summary information
Block bitmap differences:  -(14336--32767) -(33288--65535) -(66050--98303) -(98824--131071) -(131586--163839) -(164360--196607) -(197
122--229375) -(229896--248594)
Fix? yes
Free blocks count wrong for group #0 (13811, counted=32243).
Fix? yes
Free blocks count wrong for group #1 (0, counted=32248).
Fix? yes
Free blocks count wrong for group #2 (0, counted=32254).
Fix? yes
Free blocks count wrong for group #3 (0, counted=32248).
Fix? yes
Free blocks count wrong for group #4 (0, counted=32254).
Fix? yes
Free blocks count wrong for group #5 (0, counted=32248).
Fix? yes
Free blocks count wrong for group #6 (0, counted=32254).
Fix? yes
Free blocks count wrong for group #7 (13549, counted=32248).
Fix? yes
Free blocks count wrong (18993611, counted=19224248).
Fix? yes
Inode bitmap differences:  -12
Fix? yes
Free inodes count wrong for group #0 (16372, counted=16373).
Fix? yes
Free inodes count wrong (9781236, counted=9781237).
Fix? yes
/dev/sda1: ***** FILE SYSTEM WAS MODIFIED *****
/dev/sda1: 11/9781248 files (0.0% non-contiguous), 306941/19531189 blocks
linux:~ #