Date: Mon, 17 Oct 2005 20:24:52 +0200
From: Jesper Juhl <>
Subject: [PATCH] fix warning and small bug in cassini driver
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/10/17/198

Hi, 
  A small patch for you :)
This patch fixes the following compile warning:
  drivers/net/cassini.c:1930: warning: long unsigned int format, different type arg (arg 4)
While fixing the warning I noticed that if USE_TX_COMPWB is not defined, then
the printk will be in sore trouble since compwb won't be around. Fixed that as
well.  Perhaps a little ugly, but better than a bug IMHO.
Signed-off-by: Jesper Juhl <jesper.juhl@gmail.com>
---
 drivers/net/cassini.c |   11 ++++++++---
 1 files changed, 8 insertions(+), 3 deletions(-)
--- linux-2.6.14-rc4-mm1-orig/drivers/net/cassini.c	2005-10-11 22:41:10.000000000 +0200
+++ linux-2.6.14-rc4-mm1/drivers/net/cassini.c	2005-10-17 20:16:51.000000000 +0200
@@ -1925,9 +1925,14 @@ static void cas_tx(struct net_device *de
 #ifdef USE_TX_COMPWB
 	u64 compwb = le64_to_cpu(cp->init_block->tx_compwb);
 #endif
-	if (netif_msg_intr(cp))
-		printk(KERN_DEBUG "%s: tx interrupt, status: 0x%x, %lx\n",
-			cp->dev->name, status, compwb);
+	if (netif_msg_intr(cp)) {
+		printk(KERN_DEBUG "%s: tx interrupt, status: 0x%x",
+			cp->dev->name, status);
+#ifdef USE_TX_COMPWB
+		printk(", %llx", compwb);
+#endif
+		printk("\n");
+	}
 	/* process all the rings */
 	for (ring = 0; ring < N_TX_RINGS; ring++) {
 #ifdef USE_TX_COMPWB
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/