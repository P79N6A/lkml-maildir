Date: Sat, 19 Jan 2008 21:47:31 +0200
From: Török Edwin <>
Subject: Re: [PATCH] LatencyTop: make reason (blk_execute_rq+0x7a/0xd) known
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/19/130

Arjan van de Ven wrote:
> Török Edwin wrote:
>>
>> Cause                                               Maximum         
>> Average
>> SCSI device ioctl                                  34.2 msec       
>> 14.4 msec
>
> great! I'll put this into my patchkit!
Thanks.
>> I also noticed some unsigned overflows, my top latency was sometimes a
>> very large number (18................................), which
>> was probably -1, or some other negative number.  I haven't found a way
>> to reproduce it yet (it happens very rarely).
>
>
> I've not seen this; I'll take another peak at the code.
I just captured this:
Cause                                               Maximum          Average
Waiting for userspace lock                        18446744073638300.0
msec        9223372036783524.0 msec
Waiting for processes to die (waitpid)            18446744073638296.0
msec        9223372036783520.0 msec
Waiting for event (poll)                          18446744073565216.0
msec        764505121372.0 msec
SCSI device ioctl                                  35.2 msec        
13.7 msec
Application requested delay                        19.5 msec         
0.0 msec
page fault                                         18.6 msec         
4.0 msec
Reading from file                                  16.6 msec         
1.5 msec
Waiting for buffer IO                              15.2 msec         
3.0 msec
mutex lock                                         15.0 msec        
15.0 msec
I was also looking at /proc/latency_stats using watch, and I've seen
that there were negative number.
Unfortunately I couldn't copy+paste it, because it was gone too fast.
I was running a program with 4 threads doing usleep(0) in an inf-loop.
However I can't reproduce the overflow now with the same program.
Best regards,
--Edwin
--
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/