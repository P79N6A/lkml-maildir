Date: Wed, 23 Nov 2005 19:46:37 +0100
From: Andi Kleen <>
Subject: Re: [patch] SMP alternatives
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/11/23/253

On Wed, Nov 23, 2005 at 10:42:40AM -0800, Linus Torvalds wrote:
> 
> 
> On Wed, 23 Nov 2005, H. Peter Anvin wrote:
> >
> > Linus Torvalds wrote:
> > > What I suggested to Intel at the Developer Days is to have a MSR (or, better
> > > yet, a bit in the page table pointer %cr0) that disables "lock" in _user_
> > > space. Ie a lock would be a no-op when in CPL3, and only with certain
> > > processes.
> > 
> > You mean %cr3, right?
> 
> Yes. 
> 
> It _should_ be fairly easy to do something like that - just a simple 
> global flag that gets set and makes CPL3 ignore lock prefixes. Even timing 
> doesn't matter - it it takes a hundred cycles for the setting to take 
> effect, we don't care, since you can't write %cr3 from user space anyway, 
> and it will certainly take a hundred cycles (and a few serializing 
> instructions) until we get to CPL3.
Another bit for ring 0 would be actually useful too. Then the patching
patch here wouldn't be needed.
-Andi
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/