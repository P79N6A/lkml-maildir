Date: Mon, 27 Mar 2000 10:16:30 +0200 (MEST)
From: Philipp Matthias Hahn <>
Subject: [PATCH] /proc/irq/*
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/3/27/140

Hello!
The files /proc/irq/smp_affinity, /proc/irq/*/prof_cpu_mask have
permissions 0700. Are they realy executable?
If not, a patch is included as attachment.
Philipp
-- 
  / /  (_)__  __ ____  __ Philipp Hahn
 / /__/ / _ \/ // /\ \/ /
/____/_/_//_/\_,_/ /_/\_\ pmhahn@titan.lahn.de
--- linux-2.3.99/arch/alpha/kernel/irq.c.orig	Mon Mar 27 09:40:27 2000
+++ linux-2.3.99/arch/alpha/kernel/irq.c	Mon Mar 27 09:40:44 2000
@@ -373,7 +373,7 @@
 
 #ifdef CONFIG_SMP
 	/* create /proc/irq/1234/smp_affinity */
-	entry = create_proc_entry("smp_affinity", 0700, irq_dir[irq]);
+	entry = create_proc_entry("smp_affinity", 0600, irq_dir[irq]);
 
 	entry->nlink = 1;
 	entry->data = (void *)(long)irq;
@@ -397,7 +397,7 @@
 
 #ifdef CONFIG_SMP
 	/* create /proc/irq/prof_cpu_mask */
-	entry = create_proc_entry("prof_cpu_mask", 0700, root_irq_dir);
+	entry = create_proc_entry("prof_cpu_mask", 0600, root_irq_dir);
 
 	entry->nlink = 1;
 	entry->data = (void *)&prof_cpu_mask;
--- linux-2.3.99/arch/i386/kernel/irq.c.orig	Mon Mar 27 09:40:27 2000
+++ linux-2.3.99/arch/i386/kernel/irq.c	Mon Mar 27 09:40:52 2000
@@ -1127,7 +1127,7 @@
 	irq_dir[irq] = proc_mkdir(name, root_irq_dir);
 
 	/* create /proc/irq/1234/smp_affinity */
-	entry = create_proc_entry("smp_affinity", 0700, irq_dir[irq]);
+	entry = create_proc_entry("smp_affinity", 0600, irq_dir[irq]);
 
 	entry->nlink = 1;
 	entry->data = (void *)(long)irq;
@@ -1148,7 +1148,7 @@
 	root_irq_dir = proc_mkdir("irq", 0);
 
 	/* create /proc/irq/prof_cpu_mask */
-	entry = create_proc_entry("prof_cpu_mask", 0700, root_irq_dir);
+	entry = create_proc_entry("prof_cpu_mask", 0600, root_irq_dir);
 
 	entry->nlink = 1;
 	entry->data = (void *)&prof_cpu_mask;
--- linux-2.3.99/arch/ia64/kernel/irq.c.orig	Mon Mar 27 09:40:27 2000
+++ linux-2.3.99/arch/ia64/kernel/irq.c	Mon Mar 27 09:41:02 2000
@@ -1019,7 +1019,7 @@
 	irq_dir[irq] = proc_mkdir(name, root_irq_dir);
 
 	/* create /proc/irq/1234/smp_affinity */
-	entry = create_proc_entry("smp_affinity", 0700, irq_dir[irq]);
+	entry = create_proc_entry("smp_affinity", 0600, irq_dir[irq]);
 
 	entry->nlink = 1;
 	entry->data = (void *)(long)irq;
@@ -1040,7 +1040,7 @@
 	root_irq_dir = proc_mkdir("irq", 0);
 
 	/* create /proc/irq/prof_cpu_mask */
-	entry = create_proc_entry("prof_cpu_mask", 0700, root_irq_dir);
+	entry = create_proc_entry("prof_cpu_mask", 0600, root_irq_dir);
 
 	entry->nlink = 1;
 	entry->data = (void *)&prof_cpu_mask;
--- linux-2.3.99/arch/ppc/kernel/irq.c.orig	Mon Mar 27 09:40:27 2000
+++ linux-2.3.99/arch/ppc/kernel/irq.c	Mon Mar 27 09:41:06 2000
@@ -733,7 +733,7 @@
 	irq_dir[irq] = proc_mkdir(name, root_irq_dir);
 
 	/* create /proc/irq/1234/smp_affinity */
-	entry = create_proc_entry("smp_affinity", 0700, irq_dir[irq]);
+	entry = create_proc_entry("smp_affinity", 0600, irq_dir[irq]);
 
 	entry->nlink = 1;
 	entry->data = (void *)irq;
@@ -754,7 +754,7 @@
 	root_irq_dir = proc_mkdir("irq", 0);
 
 	/* create /proc/irq/prof_cpu_mask */
-	entry = create_proc_entry("prof_cpu_mask", 0700, root_irq_dir);
+	entry = create_proc_entry("prof_cpu_mask", 0600, root_irq_dir);
 
 	entry->nlink = 1;
 	entry->data = (void *)&prof_cpu_mask;