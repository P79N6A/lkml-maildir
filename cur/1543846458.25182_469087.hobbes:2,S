Date: Tue, 03 Oct 2006 10:51:55 -0700
From: Roland Dreier <>
Subject: Re: The change "PCI: assign ioapic resource at hotplug" breaks my system
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/10/3/211

    Kenji> The cause of this problem might be an wrong assumption that
    Kenji> the 'start' member of resource structure for ioapic device
    Kenji> has non-zero value if the resources are assigned by
    Kenji> firmware. The 'start' member of ioapic device seems not to
    Kenji> be set even though the resources were actually assigned to
    Kenji> ioapic devices by firmware.
    Kenji> I made a patch to fix this problem against
    Kenji> 2.6.18-git18. This patch checks command register instead of
    Kenji> checking 'start' member to see if the ioapic is already
    Kenji> enabled by firmware. Unfortunately, I don't have any system
    Kenji> to reproduce this problem. Could you please try it and let
    Kenji> me know whether the problem is fixed? If the patch below
    Kenji> fixes the problem, I'll resend it with description and
    Kenji> Signed-off-by.
Yes, applying this patch makes everything work on the same SuperMicro
motherboard that breaks with Linus's current tree.  Assuming this
doesn't break anything else, I think this should go upstream.
Thanks,
  Roland
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/