Date: Wed, 6 Sep 2000 10:30:44 -0300
From: Arnaldo Carvalho de Melo <>
Subject: Re: [PATCH] sr.c 2.4.0-test8-pre5 breakage
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/9/6/173

Em Wed, Sep 06, 2000 at 02:42:02AM -0700, Joshua Uziel escreveu:
> Heya acme... seems you fixed the sr.c driver a bit too much and
> killed an #ifdef MODULE that was needed if you build without
Nope, I didn't touched this, Jens?
- Arnaldo
> modules (as I do on some of my SPARCs)... this change was made
> in 2.4.0-test8-pre5...
> 
> drivers/scsi/scsidrv.o: In function `init_sr':
> drivers/scsi/scsidrv.o(.text+0x1ece8): undefined reference to
> `scsi_register_module'
> drivers/scsi/scsidrv.o: In function `exit_sr':
> drivers/scsi/scsidrv.o(.text+0x1ed08): undefined reference to
> `scsi_unregister_module'
> make: *** [vmlinux] Error 1
> 
> Patch is as follows:
> 
> --- linux/drivers/scsi/sr.c	Wed Sep  6 02:38:24 2000
> +++ linux-test/drivers/scsi/sr.c	Wed Sep  6 02:37:18 2000
> @@ -848,6 +848,8 @@
>  	return;
>  }
> 
> +#ifdef MODULE
> +
>  int init_sr(void)
>  {
>  	sr_template.module = THIS_MODULE;
> @@ -880,3 +882,5 @@
> 
>  module_init(init_sr);
>  module_exit(exit_sr);
> +
> +#endif	/* MODULE */
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/