Date: Mon, 3 Oct 2005 08:30:38 +0200
From: Ingo Molnar <>
Subject: Re: [PATCH] RCU torture testing
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/10/3/30

* Pavel Machek <pavel@ucw.cz> wrote:
> > The attached patch adds CONFIG_RCU_TORTURE_TEST, which enables a /proc-based
> > intense torture test of the RCU infrastructure.  This is needed due to the
> > continued changes to RCU infrastructure to accommodate dynamic ticks, CPU
> > hotplug, and so on.  Most of the code is in a separate file that is compiled
> > only if the CONFIG variable is set.  Documentation on how to run the test
> > and interpret the output is also included.
> > 
> > This code has been tested on i386 and ppc64, and an earlier version of the
> > code has seen extensive testing on a number of architectures as part of the
> > PREEMPT_RT patchset.
> > 
> > Signed-off-by: <paulmck@us.ibm.com>
> 
> Can you just run the tests from time to time inside IBM?
actually, i think RCU_TORTURE_TEST is a prime example of why this should 
be in the main kernel. The torture-test found RCU bugs that never popped 
up during normal use, and RCU bugs are hillariously hard to debug.  
Having that code outside of the main kernel will most certainly result 
in a degradation of the test - while it's role for the development of 
new architectures (and changes to the rcu code) is very important. I 
agree it should move to debugfs, and maybe in the future we'll need some 
better framework for a 'in-kernel integrated testsuite'. I think we 
should encourage such testsuites. I was thinking about writing something 
similar for spinlocks and rwlocks and semaphores. (we occasionally break 
them and they are hard to debug too)
	Ingo
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/