Date: Mon, 11 Feb 2002 14:17:05 +0000
From: Russell King <>
Subject: Re: RFC: scheduler, and per-arch switch_to
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/2/11/81

On Mon, Feb 11, 2002 at 08:29:36AM -0500, Jeff Garzik wrote:
> Do we really care about the third arg to the switch_to() macro?
> 
> IMHO it would be nice to define the architecture context switch
> interface like
> 
>   void switch_to(struct thread_info *from, struct thread_info *to);
> 
> because we don't really seem to do much with the third arg, AFAICS.
It used to be a method to get the previously running task struct so some
cleanup could be done after the actual switch.  Before you think about
"oh, that's prev anyway" think about what happens when "prev" is in some
random compiler defined CPU register, and your switch_to function saves
and restores all CPU registers.
In our current implementation, it looks like the third arg is no longer
necessary - Ingo?
-- 
Russell King (rmk@arm.linux.org.uk)                The developer of ARM Linux
             
http://www.arm.linux.org.uk/personal/aboutme.html
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/