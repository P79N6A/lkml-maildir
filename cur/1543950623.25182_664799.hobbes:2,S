Date: Thu, 6 Mar 2008 20:56:09 -0800
From: Chris Lattner <>
Subject: Re: Linux doesn't follow x86/x86-64 ABI wrt direction flag
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/3/6/528

On Mar 6, 2008, at 2:06 PM, Andi Kleen wrote:
> On Thu, Mar 06, 2008 at 12:56:16PM -0800, H. Peter Anvin wrote:
>> Richard Guenther wrote:
>>>
>>> A patched GCC IMHO makes only sense if it is always-on, yet  
>>> another option
>>> won't help in corner cases.  And corner cases is exactly what  
>>> people seem
>>> to care about.  For this reason that we have this single release,  
>>> 4.3.0,
>>> that
>>> behaves "bad" is already a problem.
>>>
>>
>> The option will help embedded vendors who can guarantee that it's  
>> not a
>> problem.
>
> For very very low values of "help".
>
> To be realistic it is very unlikely anybody will measure a difference
> from a few more or a few less clds in a program. It's not that they're
> expensive instructions
They aren't?  According to 
http://www.agner.org/optimize/instruction_tables.pdf
 
, they have a latency of 52 cycles on at least one popular x86 chip.
-Chris