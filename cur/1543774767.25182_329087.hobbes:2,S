Date: Mon, 27 Jun 2005 09:01:39 -0400
From: Jeff Sipek <>
Subject: [PATCH v2][TRIVIAL] Allocate kprobe_table at runtime
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/6/27/219

On Mon, Jun 27, 2005 at 08:14:12AM +0200, Andi Kleen wrote:
> Prasanna S Panchamukhi <prasanna@in.ibm.com> writes:
> 
> > Jeff,
> > 
> > On Sun, Jun 26, 2005 at 06:37:29PM +0000, Jeff Sipek wrote:
> > > Allocates kprobe_table at runtime.
> > > -	/* FIXME allocate the probe table, currently defined statically */
> > > +	kprobe_table = kmalloc(sizeof(struct hlist_head)*KPROBE_TABLE_SIZE, GFP_ATOMIC);
> > 
> > Memory allocation using GFP_KERNEL has more chances of success as compared to
> > GFP_ATOMIC. Why can't we use GFP_KERNEL here?
> 
> I don't see any sense in the change anyways. Just using BSS 
> should be fine.
> 
> Jeff, when you submit a patch you should add a small blurb
> describing why you think it is a good idea.
That patch was somewhat impulsive...I was looking at some code and saw a
FIXME that required minimal work. I agree that BSS is good enough.
Patch below removes the FIXME notice.
Pick one ;-) (Patch Monkey is CC'd).
Jeff.
Remove useless FIXME.
Signed-off-by: Josef "Jeff" Sipek
diff --git a/kernel/kprobes.c b/kernel/kprobes.c
--- a/kernel/kprobes.c
+++ b/kernel/kprobes.c
@@ -261,7 +261,6 @@ static int __init init_kprobes(void)
 {
 	int i, err = 0;
 
-	/* FIXME allocate the probe table, currently defined statically */
 	/* initialize all list heads */
 	for (i = 0; i < KPROBE_TABLE_SIZE; i++)
 		INIT_HLIST_HEAD(&kprobe_table[i]);[unhandled content-type:application/pgp-signature]