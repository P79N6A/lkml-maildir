Date: Tue, 7 Mar 2006 16:03:14 +0900
From: KAMEZAWA Hiroyuki <>
Subject: [PATCH] naming memory hotplug's phys_device take2 [3/3] name memory at boot
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/3/7/32

This patch shows ACPI information of rams which exists at boot time,
maybe will not be used until memory-hot-remove will be implemented.
Signed-Off-By: KAMEZAWA Hiroyuki <kamezawa.hiroyu@jp.fujitsu.com>
Index: linux-2.6.16-rc5-mm2/drivers/acpi/acpi_memhotplug.c
===================================================================
--- linux-2.6.16-rc5-mm2.orig/drivers/acpi/acpi_memhotplug.c	2006-03-07 15:28:08.000000000 +0900
+++ linux-2.6.16-rc5-mm2/drivers/acpi/acpi_memhotplug.c	2006-03-07 15:28:10.000000000 +0900
@@ -387,6 +387,10 @@
 
 	printk(KERN_INFO "%s \n", acpi_device_name(device));
 
+	/* if memory is available now (we have page memmap), name it */
+	if ( pfn_valid(mem_device->start_addr >> PAGE_SHIFT)) {
+		acpi_memory_device_export_name(mem_device);
+	}
 	return_VALUE(result);
 }
 
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/