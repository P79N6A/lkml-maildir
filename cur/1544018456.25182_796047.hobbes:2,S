Date: Thu, 22 Jan 2009 16:16:47 -0800
From: Josh Hunt <>
Subject: [PATCH] Add vmlinux to kernel rpm
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2009/1/22/402

Adds compressed vmlinux to rpm when doing "make {rpm-pkg,binrpm-pkg}".
Installs vmlinux.bz2 to /boot.
Signed-off-by: Josh Hunt <josh@scalex86.org>
Index: linux-2.6.28/scripts/package/mkspec
===================================================================
--- linux-2.6.28.orig/scripts/package/mkspec    2008-12-24
15:26:37.000000000 -0800
+++ linux-2.6.28/scripts/package/mkspec    2009-01-21
16:53:03.000000000 -0800
@@ -86,6 +86,14 @@ echo "%endif"
 echo 'cp System.map $RPM_BUILD_ROOT'"/boot/System.map-$KERNELRELEASE"
 echo 'cp .config $RPM_BUILD_ROOT'"/boot/config-$KERNELRELEASE"
+
+echo "%ifnarch ppc64"
+echo 'cp vmlinux vmlinux.orig'
+echo 'bzip2 -9 vmlinux'
+echo 'mv vmlinux.bz2
$RPM_BUILD_ROOT'"/boot/vmlinux-$KERNELRELEASE.bz2"
+echo 'mv vmlinux.orig vmlinux'
+echo "%endif"
+
 echo ""
 echo "%clean"
 echo '#echo -rf $RPM_BUILD_ROOT' 