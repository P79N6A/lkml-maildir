Date: Sun, 28 Jan 2001 10:27:24 +0100
From: Stefani Seibold <>
Subject: Re: patch for 2.4.0 disable printk
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/1/28/56

Hi Andrew,
thanks for your feddback, but... you are not right. Because i override the 
printk with a macro thats call a inline function printk_inline with no 
paramters and only return 0. So the compiler sill removes the paramters.
If you try this patch, you will see, that none of the parameters appear in 
the output.
The inline function is the best choice, because it it full compatible to old 
old printk. No side effects are expeted.
Thanks also for the link. I had a look on it and i think i will add a extrac 
option to disable also the panic messages.
Greetings,
Stefani
> Stefani Seibold wrote:
> > Second, i had change the macro so it calls now a inline funciton
> > printk_inline which always return 0. So it should be now compatibel to
> > the standard printk funciton.
>
> A #define is better.
>
> You see, even if printk is a null inline function,
>
> 	printk("foo");
>
> will still cause "foo" to appear in your output. Apparently
> very recent versions of gcc have fixed this.
>
> BTW: Graham Stoney prepared a similar patch for 2.2 last year.
> You may be able to borrow some ideas from that work, and the
> followup discussion.
>
> 
http://www.uwsg.iu.edu/hypermail/linux/kernel/0004.2/0709.html
>
> -
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/