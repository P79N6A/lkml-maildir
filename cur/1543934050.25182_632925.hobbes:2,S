Date: Mon, 31 Dec 2007 10:05:34 -0800
From: Randy Dunlap <>
Subject: [PATCH] sysfs: make SYSFS_DEPRECATED depend on SYSFS
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/12/31/97

From: Randy Dunlap <randy.dunlap@oracle.com>
Make SYSFS_DEPRECATED depend on SYSFS since files that check
CONFIG_SYSFS_DEPRECATED don't check for CONFIG_SYSFS first.
Also don't prompt user about SYSFS_DEPRECATED if SYSFS=n.
Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com>
---
 init/Kconfig |    1 +
 1 file changed, 1 insertion(+)
--- linux-2.6.24-rc6-mm1.orig/init/Kconfig
+++ linux-2.6.24-rc6-mm1/init/Kconfig
@@ -349,6 +349,7 @@ config RESOURCE_COUNTERS
 
 config SYSFS_DEPRECATED
 	bool "Create deprecated sysfs files"
+	depends on SYSFS
 	default y
 	help
 	  This option creates deprecated symlinks such as the