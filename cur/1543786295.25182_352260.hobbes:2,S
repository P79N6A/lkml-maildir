Date: Tue, 20 Sep 2005 23:59:44 -0700
From: Joshua Kwan <>
Subject: SATA suspend-to-ram patch - merge?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/9/21/11

Hi,
Debugging a friend's new IBM Thinkpad T43, I found that I had to use
this patch by Jens Axboe to get suspend-to-RAM working on his machine,
to prevent SATA from completely flipping out on resume and hanging on
any disk activity:
http://seclists.org/lists/linux-kernel/2005/May/0447.html
The patch is not in 2.6.13, and currently doesn't apply to either that
or 2.6.12 - a quick-and-(very-)dirty rediff for only the drivers needed
(ata_piix) worked for my purposes, and the machine suspends and resumes
correctly now.
I investigated a little and noticed that the patch in its current form
doesn't seem to exist in 2.6.14-rc1, but there are some new ATA commands
 -- ATA_CMD_STANDBY etc. that have been introduced, which seem vaguely
relevant to the problem. I'm not sure whether those changes do any of
the work that Jens' patch did, and I also haven't tested that kernel yet
on my friend's machine.
Is Jens' patch still relevant? If so, should it be rediffed and merged
into mainline? It doesn't seem to cause any weird side-effects.
More importantly, I would be inclined to properly rediff Jens' patch and
merge it into Debian 2.6.12 kernel sources if there aren't any such
side-effects, since it benefits everyone using SATA and suspend-to-ram
(that is, users of relatively modern laptops.)
Thanks!
-- 
Joshua Kwan
[unhandled content-type:application/pgp-signature]