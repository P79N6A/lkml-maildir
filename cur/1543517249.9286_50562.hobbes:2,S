Date: Sun, 28 Nov 1999 11:20:08 -0500
From: Brian Gerst <>
Subject: [PATCH] making version.h reentrant
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/11/28/22

This patch makes version.h protected from multiple inclusions.
-- 
						Brian Gerst--- linux-2.3.30-pre3/Makefile	Sun Nov 28 10:22:34 1999
+++ linux-2.3.30-pre3a/Makefile	Sun Nov 28 10:52:15 1999
@@ -309,9 +309,12 @@
 	@mv -f .ver $@
 
 include/linux/version.h: ./Makefile
-	@echo \#define UTS_RELEASE \"$(KERNELRELEASE)\" > .ver
-	@echo \#define LINUX_VERSION_CODE `expr $(VERSION) \\* 65536 + $(PATCHLEVEL) \\* 256 + $(SUBLEVEL)` >> .ver
+	@echo '#ifndef _LINUX_VERSION_H' > .ver
+	@echo '#define _LINUX_VERSION_H' >> .ver
+	@echo '#define UTS_RELEASE "$(KERNELRELEASE)"' >> .ver
+	@echo '#define LINUX_VERSION_CODE '`expr $(VERSION) \\* 65536 + $(PATCHLEVEL) \\* 256 + $(SUBLEVEL)` >> .ver
 	@echo '#define KERNEL_VERSION(a,b,c) (((a) << 16) + ((b) << 8) + (c))' >>.ver
+	@echo '#endif /* _LINUX_VERSION_H */' >> .ver
 	@mv -f .ver $@
 
 init/version.o: init/version.c include/linux/compile.h include/config/MARKER