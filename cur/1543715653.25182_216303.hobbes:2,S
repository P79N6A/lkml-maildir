Date: Mon, 26 Apr 2004 16:05:17 +0200
From: Duncan Sands <>
Subject: Re: [PATCH 1/9] USB usbfs: take a reference to the usb device
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/4/26/87

> Nice, I've applied all 9 patches here (with the updated patch 8
> version).  Feel free to send me an update for the warning issue you and
> Oliver talked about if you want to.
Hi Greg, thanks for applying the patches.  The following patch goes on top.
Hopefully it will make Oliver happy!
Ciao,
Duncan.
Be assertive.
 devio.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)
diff -Nru a/drivers/usb/core/devio.c b/drivers/usb/core/devio.c
--- a/drivers/usb/core/devio.c	Mon Apr 26 13:48:28 2004
+++ b/drivers/usb/core/devio.c	Mon Apr 26 13:48:28 2004
@@ -350,8 +350,8 @@
 	 * all pending I/O requests; 2.6 does that.
 	 */
 
-	if (ifnum < 8*sizeof(ps->ifclaimed))
-		clear_bit(ifnum, &ps->ifclaimed);
+	BUG_ON(ifnum >= 8*sizeof(ps->ifclaimed));
+	clear_bit(ifnum, &ps->ifclaimed);
 	usb_set_intfdata (intf, NULL);
 
 	/* force async requests to complete */
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/