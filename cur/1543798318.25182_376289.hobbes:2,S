Date: Wed, 14 Dec 2005 19:40:06 -0500
From: Dave Jones <>
Subject: Re: [2.6 patch] offer CC_OPTIMIZE_FOR_SIZE only if EXPERIMENTAL
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/12/14/388

On Wed, Dec 14, 2005 at 11:28:13PM +0100, Jesper Juhl wrote:
 > I should probably back this up with *why* it boggles my mind.
 > 
 > -Os has been in EMBEDDED for ages, so it's not been tested by the
 > majority of users with the wide range of compilers etc that people
 > use.
Fedora has had this enabled most of the time for x86, x86-64, ia64,
s390, s390x, ppc32 and ppc64 for a long time.  From time to time
when a gcc bug has been tickled it's been disabled again until its
been worked out, but for the most part, it's been a complete non-event
wrt regressions.  In the ~2 years that we've had it enabled I recall
2-3 occasions where it broke something badly (and it was really noticable,
like "networking doesn't work any more", or "x86-64 stopped booting"[1]),
and once or twice when moving to a newer gcc point release, it tripped an ICE.
The RHEL4 kernel has also been built this way since day 1.
		Dave
[1] In that particular case, it was broken asm-x86-64/ macros that 
    just happened to work at -O2 by chance, so it actually found latent bugs.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/