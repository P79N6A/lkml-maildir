Date: Sun, 10 Jul 2005 23:42:31 -0700
From: Jon Florence <>
Subject: Swapping broken on 2.6.9? Limit Page Cache growth?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/7/11/18

Hi,
I have got a box running  2.6.9-1.667smp (FC3) with 1GB of Physical
memory & 1GB of swap. I run 2 test programs on the box. The first one
mmaps 800M of memory and mlocks it. The second one tries to allocate
500M of memory in 100K chunks and frees it in the end. However, when
the 2nd program runs, my free swap memory as reported by "top" drops
to zero and OOM kicks in killing my first program. This appears to be
incorrect as I had expected the 2nd program to start swapping. If I
run the same 2 programs on similar hardware but with 2.4.20, I have no
problems. The 2nd program swaps as expected. Can anyone plz suggest
what I can do to remedy the situation or is this a known bug?
Also I seem to be having another problem with the page cache. I am
running Samba on a server with similar hardware as above (FC3). As
soon as I get large reads and/or writes, the page cache grows really
huge, causing OOM to kick in again. Is there is a way to limit page
cache growth or force VM to reclaim memory from page cache? I did find
an old patch which seems like it would work but didnt see much follow
up.
 
http://linux.derkeiler.com/Mailing-Lists/Kernel/2003-08/5747.html
Thanks in advance for any help!
Jon
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/