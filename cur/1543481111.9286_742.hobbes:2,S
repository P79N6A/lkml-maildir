Date: Thu, 21 Jan 1999 11:04:52 GMT
From: Edmund GRIMLEY EVANS <>
Subject: pre8 and ATAPI ZIP
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/1/21/138

> Beginning with the pre-8 in testing/ and continuing with the real pre8, my
> ATAPI ZIP drive is detected as a cdrom.
My LS-120 drive isn't working with 2.2.0-pre8, either. It worked with
2.1.132. Extract from dmesg below.
I only got as far as seeing that the offending word CDROM instead of
FLOPPY is apparently printed by drivers/block/ide-probe.c ... but that
file itself hasn't changed much since 2.1.132.
hdc: LS-120 VER4 06 UHD Floppy, ATAPI CDROM drive
                                      !!!!!
hdd: CD-ROM, ATAPI CDROM drive
ide0 at 0x1f0-0x1f7,0x3f6 on irq 14
ide1 at 0x170-0x177,0x376 on irq 15
hda: ST34321A, 4103MB w/128kB Cache, CHS=8894/15/63
hdc: packet command error: status=0x51 { DriveReady SeekComplete Error }
hdc: packet command error: error=0x54
ATAPI device hdc:
  Error: Illegal request -- (Sense key=0x05)
  Invalid field in command packet -- (asc=0x24, ascq=0x00)
  The failed "Mode Sense" packet command was: 
  "5a 00 2a 00 00 00 00 00 18 00 00 00 "
...
...
...
VFS: Disk change detected on device ide1(22,0)
hdc: cdrom_read_intr: data underrun (1 blocks)
end_request: I/O error, dev 16:00 (hdc), sector 1
FAT bread failed
hdc: packet command error: status=0x51 { DriveReady SeekComplete Error }
hdc: packet command error: error=0x54
ATAPI device hdc:
  Error: Illegal request -- (Sense key=0x05)
  Invalid command operation code -- (asc=0x20, ascq=0x00)
  The failed "<NULL>" packet command was: 
  "43 02 00 00 00 00 00 00 0c 00 00 00 "
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/