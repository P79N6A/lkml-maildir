Date: Thu, 14 Feb 2002 10:19:43 -0600
From: Dave McCracken <>
Subject: Re: setuid/pthread interaction broken? 'clone_with_uid()?'
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/2/14/133

--On Thursday, February 14, 2002 17:07:48 +0100 bert hubert <ahu@ds9a.nl>
wrote:
>> It's the expected behavior for a task-based model like Linux.  Each task
>> is independent and inherits the uid/gid from whoever called clone().
>> It's just one of several resources that are specified as process-wide in
>> POSIX, but are per-task in Linux.
> 
> Could this also be solved by making threads call 'clone' themselves? 
The only workaround I can think of is, as you discovered, to do the
setuid() call before you create any threads, and thus create underlying
kernel tasks.  Once the kernel tasks have been created each one has its own
credentials and has to be changed separately.
Dave McCracken
======================================================================
Dave McCracken          IBM Linux Base Kernel Team      1-512-838-3059
dmccr@us.ibm.com                                        T/L   678-3059
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/