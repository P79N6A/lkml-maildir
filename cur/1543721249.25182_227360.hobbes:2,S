Date: Tue, 15 Jun 2004 09:50:41 -0400
From: Jesse Barnes <>
Subject: Re: NUMA API observations
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/6/15/67

> > > > My kernel is compiled with NR_CPUS=128, the setaffinity syscall must
> > > > be called with a bitmap at least as big as the kernels cpumask_t. I
> > > > will submit a patch for this shortly.
> > >
> > > Umm, what a misfeature. We size the buffer up to the biggest
> > > running CPU. That should be enough.
> > >
> > > IMHO that's just a kernel bug. How should a user space
> > > application sanely discover the cpumask_t size needed by the kernel?
> > > Whoever designed that was on crack.
> >
> > glibc now uses a select style interface. Unfortunately the interface has
> > changed about three times by now.
>
> I have no plans to track the glibc interface of the week for this
> and numactl must run with older glibc anyways, that is why I always
> used an own stub to this. I am not sure they even solved the problem
> completely. With the upcomming numactl version it should work.
>
> What I wonder is why IA64 worked though. We tested on it previously,
> but somehow didn't run into this. The regression test suite
> needs to check this better.
Yeah, I tested it with a kernel compiled for 512p, and didn't have any 
problems.  But that was awhile ago--I may have fixed the code and lost the 
diff when I sent you the other patches...
Jesse
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/