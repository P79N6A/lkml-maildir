Date: Mon, 4 Jun 2007 16:28:55 +0200
From: Eric Dumazet <>
Subject: Re: [patch 1/2] ufd v1 - unsequential O(1) fdmap core
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/6/4/150

On Mon, 4 Jun 2007 06:35:16 -0700 (PDT)
Davide Libenzi <davidel@xmailserver.org> wrote:
> On Mon, 4 Jun 2007, Eric Dumazet wrote:
> 
> > You add conditional branches on very hot spots.
> 
> Keep BS for the ones you argue usually, and that are not able to reply.
> You *still* two bitmaps, because allocation spaces are far apart. So the 
> "if" will still be there.
I actually read your patches and spent time to see the pros and cons.
If you dont need reviewers, please dont post your patches on lkml.
If I am not mistaken, you added a test in fget()/fget_light(), which is a known hot point for said huge processes.
fget() dont need to access the bitmap at all. Using fd_slots means less (50%) file pointers per cache line.
On my machines, there is a ratio of 100/1 in cpu time for fget(),fget_light() against get_unused_fd().
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/