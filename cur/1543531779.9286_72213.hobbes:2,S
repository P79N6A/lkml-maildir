Date: Sat, 25 Mar 2000 21:39:48 -0800 (PST)
From: Andre Hedrick <>
Subject: Re: Bug with PCI initialization in pre2 on a dual P100
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/3/26/2

On Sat, 25 Mar 2000, John Gruenenfelder wrote:
> >First I want some Project Time over and above what the Time Committee will
> >give (former astronomer) ;-).
> 
> I'll see what I can get...  :)
> 
> >However, Martin, what changed in the auto-assignment of IO-Space that
> >does not get properly setup by the mainboard BIOS?
> 
> So, this is a problem with the mobo BIOS and not with the IDE card?
> If that is the case, I'm afraid that I probably won't be able to flash the
> BIOS.  Fugutech disappeared a while back, but now they have reappeared, but
> the website contains almost no English so I cannot even find my way to the
> BIOS section (if they even remember this board).
John, that is not the issue.
/*
 * Several BIOS'es forget to assign addresses to I/O ranges.
 * We try to fix it here, expecting there are free addresses
 * starting with 0x5800. Ugly, but until we come with better
 * resource management, it's the only simple solution.
 */
static int pci_last_io_addr __initdata = 0x5800;
static void __init pcibios_fixup_io_addr(struct pci_dev *dev, int idx)
{
        unsigned short cmd;
        unsigned int reg = PCI_BASE_ADDRESS_0 + 4*idx;
        unsigned int size, addr, try;
        unsigned int bus = dev->bus->number;
        unsigned int devfn = dev->devfn;
This appears to have gotten lost../linux-2.2.14/arch/i386/kernel/bios32.c
This what did the IO assignment.....
Andre Hedrick
The Linux ATA/IDE guy
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/