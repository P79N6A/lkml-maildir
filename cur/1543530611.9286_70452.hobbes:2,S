Date: Sat, 18 Mar 2000 18:29:11 +0100 (CET)
From: Tomasz Motylewski <>
Subject: Re: 3c509 driver in 2.2.15pre14 SMP stopped and other warnings
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/3/18/238

On Sat, 18 Mar 2000, Alan Cox wrote:
> > Another question is what happens when Rx interrupt is generated during the
> > time Tx disables interrupts. Rx interrupt status is not cleared then and
> > interrupts might be not generated (edge)?
> 
> The PIC will hold the interrupt until one occurs. Even if this didnt work the
> next TX timeout would recover 
Probably TX timeout routine should reset more things. ifconfig down up
makes it run again.
BTW. I am getting sometimes the following messages:
Mar 13 18:58:54 crds kernel: Uhhuh. NMI received for unknown reason 3c.
Mar 13 18:58:54 crds kernel: Dazed and confused, but trying to continue
Mar 13 18:58:54 crds kernel: Do you have a strange power saving mode enabled?
Mar 13 20:34:15 crds kernel: unexpected IRQ vector 208 on CPU#0!
Mar 15 10:23:12 crds kernel: unexpected IRQ vector 208 on CPU#1!
This I am seeing rarely:
Feb 28 10:55:47 crds kernel: lockd_up: no pid, 2 users??
Mar 15 13:33:40 crds kernel: lockd_up: no pid, 2 users??
This messages occure when the driver hangs:
Mar 17 16:43:18 crds kernel: eth0: transmit timed out, Tx_status 00 status
2019 Tx FIFO room 3068.
This message does not cause the hang:
Mar 13 13:51:48 crds kernel: eth0: transmit timed out, Tx_status 00 status
2000 Tx FIFO room 3068.
Another ones:
Feb 22 20:30:29 crds kernel: Uhhuh. NMI received for unknown reason 2c.
Also the problem with HDIO_UNREGISTER_HWIF is not fixed. I need to exercise
the newly registered and mounted disk a bit (running updatedb is usually
enough). Then I umount, sync, and call 
f = open("/dev/hda", O_RDONLY); (may be I should open /dev/hdc here?).
i = ioctl(f, HDIO_UNREGISTER_HWIF, 1); (1 corresponds to hdc).
The system hangs in 0.1 s to 0.5 s to few seconds to few minutes after
without a warning.
Best regards,
--
Tomek
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/