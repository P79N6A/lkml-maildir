Date: Thu, 13 Oct 2005 19:04:27 -0400
From: Jeff Garzik <>
Subject: Re: [PATCH ieee80211] fix TX skb allocation flags and size
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/10/13/151

Michael Buesch wrote:
> @@ -221,11 +221,13 @@ static struct ieee80211_txb *ieee80211_a
>   txb->frag_size = txb_size;
> 
>  	for (i = 0; i < nr_frags; i++) {
> -		txb->fragments[i] = dev_alloc_skb(txb_size);
> +		txb->fragments[i] = __dev_alloc_skb(txb_size + headroom,
> +						    gfp_mask | GFP_DMA);
>  		if (unlikely(!txb->fragments[i])) {
>  			i--;
Very wrong.  GFP_DMA means ISA DMA.
See pci_map_xxx() and other DMA API functions.
	Jeff
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/