Date: Thu, 25 Jul 2002 17:47:50 +0200 (SAST)
From: Zwane Mwaikambo <>
Subject: Re: [PATCH] drivers/ide/qd65xx: no cli/sti (2.4.19-pre3 & 2.5.28)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/7/25/195

On Thu, 25 Jul 2002, Samuel Thibault wrote:
>  static void qd_write_reg (byte content, byte reg)
>  {
>  	unsigned long flags;
> 
> -	save_flags(flags);	/* all CPUs */
> -	cli();			/* all CPUs */
> +	spin_lock_irqsave(&qd_iolock,flags);
>  	outb(content,reg);
Do we need a lock/cli for that one outb?
> +	spin_unlock_irqrestore(&qd_iolock,flags);
	Zwane
-- 
function.linuxpower.ca
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/