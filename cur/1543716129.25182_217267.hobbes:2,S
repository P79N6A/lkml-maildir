Date: Thu, 29 Apr 2004 11:32:21 -0700
From: "Brett E." <>
Subject: Re: ~500 megs cached yet 2.6.5 goes into swap hell
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/4/29/156

Horst von Brand wrote:
> "Brett E." <brettspamacct@fastclick.com> said:
> 
> [...]
> 
> 
>>I created a hack which allocates memory causing cache to go down, then 
>>exits, freeing up the malloc'ed memory. This brings free memory up by 
>>400 megs and brings the cache down to close to 0, of course the cache 
>>grows right afterwards. It would be nice to cap the cache datastructures 
>>in the kernel but I've been posting about this since September to no 
>>avail so my expectations are pretty low.
> 
> 
> Because it is complete nonsense. Keeping stuff around in RAM in case it
> is needed again, as long as RAM is not needed for anything else, is a mayor
> win. That is what cache is.
The key phrase in your post is "as long as RAM is not needed for 
anything else." My assertion was that this is not the case and it seems 
to favor cache over pages being used.  Sar shows heavy paging to/from 
disk even though 500 megs are reported in cache. I hope I don't need to 
go into what paging in/out in succession means regarding paging out 
pages which we will need shortly after they are paged out. Sar also 
reports no swapping, hence the need to figure out why there is a 
disprepency before continuing.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/