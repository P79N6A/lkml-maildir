Date: Tue, 15 Jan 2002 16:37:28 +0000
From: Russell King <>
Subject: New CRC32 fails to build
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/1/15/141

In 2.5.2, the new CRC stuff fails to build because the cleanup function
isn't marked with __exit:
/home/rmk/v2.5/linux-ebsa285/lib/lib.a(crc32.o): In function `cleanup_crc32':
crc32.o(.text+0x98): relocation truncated to fit: R_ARM_PC24 text.exit
crc32.o(.text+0x9c): relocation truncated to fit: R_ARM_PC24 text.exit
The following patch fixes the problem:
--- orig/lib/crc32.c	Tue Jan 15 14:16:27 2002
+++ linux/lib/crc32.c	Tue Jan 15 16:36:15 2002
@@ -558,7 +558,7 @@
 /**
  * cleanup_crc32(): frees crc32 data when no longer needed
  */
-static void cleanup_crc32(void)
+static void __exit cleanup_crc32(void)
 {
 	crc32cleanup_le();
 	crc32cleanup_be();
-- 
Russell King (rmk@arm.linux.org.uk)                The developer of ARM Linux
             
http://www.arm.linux.org.uk/personal/aboutme.html
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/