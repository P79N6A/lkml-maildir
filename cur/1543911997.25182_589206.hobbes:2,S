Date: Tue, 28 Aug 2007 09:22:04 +0300
From: "Janne Karhunen" <>
Subject: NFSv3 lock recovery
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/8/28/17

Hi,
Brief question about NFSv3 lock recovery to those who might
know - does Linux implementation (or NLM/NSM protocol)
properly support the case in which client and server state
change simultaneously?
Reason I'm asking is that this very case is occasionally giving
me stale locks. Given that NFSv3 server crashes it's possible
that client 'rooting' from it crashes as well. Now, once the
server comes back up it tries to notify the client that just
crashed. Hardly surprisingly, this notification doesn't go
anywhere and server discards the notification/client. And once
the client starts to boot again it tries to notify the server which
instantly whines about SM_NOTIFY when no-one is being
monitored. Thus, whole notification cycle is busted and lock
states go haywire :/. Is this even supposed to work?
-- 
// Janne
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/