Date: Wed, 10 Nov 1999 22:42:04 +0100
From: Marcel Lanz <>
Subject: Re: [question/comment/help] pseudo function-call from kernel to a  user-process
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/11/10/159

Pavel Machek wrote:
snip snap
> > OK. This works. My Questions:
> > - can I do this in an other way ? Is there any functionality in the
> > kernel to do somethin like this?
> > - as you can see int the code, I tried to use a self-defined spinlock to
> > protect the area, but that doesn't work, why? aren't spinlocks like
> > semaphores or mutex'es?
> 
> Spinlocks are NOP on uniprocessor.
> 
> > - are there any pitfalls ?
> 
> Yes. Think hard about deadlocks.
thank you, I have to think harder on it. I saw that I havent to use a
spinlock really, or a semaphore to protect somthing. All info is
task-local.
(spinlocks perhaps become more serious if I want to run it on
SMP-maschines)
> Well - when I was about to do something like this (block device in
> userland), I called it network block device. Loopback network is quite
> nice to use.
> 
> > void on_sigusr2(int signal)
> > {
> >  char* node_name;
> >  char* buff;
> >
> >  node_name = (char*) malloc(64);
> >  buff = (char*) malloc(64);
> >
> >  printf("sigusr2 from kernel reveived\n");
> >  dkmctl(DKM_MAP_REQ, buff, NULL);
> >  printf("buff is: %s\n", buff);
> >  strcpy(node_name, "orinoco");
> 
> What's that? Some kind of distributed system? I WANT THAT!
Yes. It's my diploma-work. dkm is "distributed kernel multiprocessing".
I'll send you a email, if it runs ;)
> I have two machines, and would like to use them both for kernel
> compiles. Bitcluster has some serious problems :-( and mj's slice is
> 2.2. only and I was unable to port it.
Yes, dkm should/will do that transparently.
greetings
marcel
-- 
Marcel Lanz <marcel.lanz@ds9.ch>
PGP-Key fingerprint = 71 BE AC 43 04 53 F9 2D  4F B7 B1 47 E5 9B 91 72
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/