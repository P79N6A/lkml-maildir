Date: Wed, 18 Oct 2006 11:55:29 -0400
From: Rob Landley <>
Subject: Re: [PATCH] kbuild: make*config usage doc.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/10/18/203

On Wednesday 18 October 2006 1:32 am, Randy Dunlap wrote:
> Is this useful for anyone?
It's quite nice.
> Is anything happening with mini.config or a replacement for it?
Sorry, didn't know anybody else was interested.
I'm working on a patch to make the actual C code (probably 
scripts/kconfig/confdata.c:conf_write()) to spit out a miniconfig without the 
nasty shell script that takes forever to run.  That's the big missing piece, 
the rest I already submitted two different patches to the list for.  (Well, I 
should also tweak the makefile dependencies a bit to automatically regenerate 
a missing or older .config from a mini.config if it exists, but that's a 
later patch.)
I also owe Andrew Morton a better explanation of miniconfig.  When I bumped 
into him at OLS he asked for a better explanation, but ever since I got back 
real life has pushed this off the back burner and into the refrigerator...
I'll try to scrape up some time this week to work on this.
(Oh, as long as Sam's cc'd: my todo item for this says "start from the klibc 
code", but klibc hasn't got the menuconfig infrastructure.  I assume that 
discussion was just about Kbuild and not menuconfig?  I'm still interested in 
using Kbuild for toybox, did you do any more work on this or is kbuild 1.4 
still the best starting point?)
> +KCONFIG_ALLCONFIG
> +--------------------------------------------------
> +(partially based on lkml email from/by Rob Landley, re: miniconfig)
> +--------------------------------------------------
> +The allyesconfig/allmodconfig/allnoconfig/randconfig variants can
> +also use the environment variable KCONFIG_ALLCONFIG as a flag or a
> +filename that contains config symbols that the user requires to be
> +set to a specific value.  If KCONFIG_ALLCONFIG is used without a
> +filename, "make *config" checks for a file named
> +"all{yes/mod/no/random}.config" (corresponding to the *config command
> +that was used) for symbol values that are to be forced.  If this file
> +is not found, it checks for a file named "all.config" to contain forced
> +values.
> +
> +This enables you to create "miniature" config (miniconfig) or custom
> +config files containing just the config symbols that you are interested
> +in.  Then the kernel config system generates the full .config file,
> +including dependencies of your miniconfig file, based on the miniconfig
> +file.
I'd keep just that bit, and then refer to the miniconfig documentation when it 
goes in.  Right now it doesn't tell you how to make a miniconfig, and the 
miniconfig patch adds an easier UI for using them anyway.
Lemme go poke at that now...
Rob
-- 
"Perfection is reached, not when there is no longer anything to add, but
when there is no longer anything to take away." - Antoine de Saint-Exupery
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/