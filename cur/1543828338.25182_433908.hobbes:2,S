Date: Sun, 18 Jun 2006 21:05:45 -0400
From: Brice Goglin <>
Subject: [PATCH 0/8] Improve MSI detection v2
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/6/18/219

[PATCH 0/8] Improve MSI detection v2
After my proposal to whitelist chipsets supporting MSI a couple days ago,
here's a patchset implementing what seemed to better suit what people replied.
We enable MSI by default on PCI-E and disable on non-PCI-E chipsets.
#1 - Rename PCI_CAP_ID_HT_IRQCONF to PCI_CAP_ID_HT
#2 - Factorize common MSI detection code from pci_enable_msi() and msix()
#3 - Blacklist PCI-E chipsets depending on Hypertransport MSI capabality
#4 - Stop inheriting bus flags and check root chipset bus flags instead
#5 - Whitelist Intel PCI chipsets that are known to support MSI
#6 - Disable MSI by default on non PCI-E chipsets
#7 - Drop existing quirks that disable MSI on some non PCI-E chipsets
#8 - Drop pci_msi_quirk
#1 to #4 are simple and could make it to 2.6.18 easily.
#6 might need the list of whitelisted chipsets to be improved to avoid
regressions (nVidia chipsets for Intel processors?).
#5 is useless without #6.
#7 and #8 are mainly cosmetic (remove obsolete stuff when the new model
is in place).
These patches are against 2.6.17-rc6-mm2.
I did not keep the option "pci=forcemsi" since it makes less sense than
in my previous RFC. But I'd be happy to reimplement it, or even something
at the device granularity.
Brice Goglin
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/