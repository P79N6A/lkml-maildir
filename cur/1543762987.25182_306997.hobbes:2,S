Date: Tue, 29 Mar 2005 09:30:56 -0700
From: Steven Cole <>
Subject: [PATCH] 2.6.12-rc1-mm3 Fix ver_linux script for no udev utils.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/3/29/176

Without the attached patch, the ver_linux script gives
the following if udev utils are not present.
./scripts/ver_linux: line 90: udevinfo: command not found
The patch causes ver_linux to be silent in the case of
no udevinfo command.
Steven
TSPA (Technical data or Software Publicly Available)
Signed-off-by: Steven Cole <elenstev@mesatop.com>
--- linux-2.6.12-rc1-mm3/scripts/ver_linux.orig	2005-03-29 08:52:35.000000000 -0700
+++ linux-2.6.12-rc1-mm3/scripts/ver_linux	2005-03-29 09:04:37.000000000 -0700
@@ -87,7 +87,7 @@
 
 expr --v 2>&1 | awk 'NR==1{print "Sh-utils              ", $NF}'
 
-udevinfo -V | awk '{print "udev                  ", $3}'
+udevinfo -V 2>&1 | grep version | awk '{print "udev                  ", $3}'
 
 if [ -e /proc/modules ]; then
     X=`cat /proc/modules | sed -e "s/ .*$//"`