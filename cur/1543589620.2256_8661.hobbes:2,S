Date: Tue, 1 May 2001 22:24:45 +0100 (BST)
From: Alan Cox <>
Subject: Re: Linux Cluster using shared scsi
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/5/1/164

> reserved.    But if you did such a hot swap you would have "bigger
> fish to fry" in a HA application... I mean, none of your data would be
> there! 
	You need to realise this has happened and do the right thing. Since
	it could be an md raid array the hotswap is not fatal.
	If its fatal you need to realise promptly before you either damage
	the disk contents inserted in error (if possible) and so the HA
	system can take countermeasures
> if the kernel (by this I mean the scsi midlayer) was maintaining
> reservations, that there would be some logic activated to "handle"
> this problem, whether it be re-reserving the device, or the ability to
Suppose the cluster nodes don't agree on the reservation table ?
> Bus resets in the Linux drivers also tend to happen frequently when a
> disk is failing, which has tended to leave the system in a somewhat
> functional but often an unusable state, (but that's a different story...)
The new scsi EH code in 2.4 for the drivers that use it is a lot better. Real
problem.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/