Date: Sat, 25 Nov 2006 22:30:47 +0100
From: Willy Tarreau <>
Subject: [PATCH-2.4] arm: incorrect use of "&&" instead of "&"
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/11/25/95

Hi Russell,
I'm about to merge this fix into 2.4. It's already been fixed in 2.6.
Do you have any objection ?
BTW, I have two email addresses for you, the one in the MAINTAINERS file
and the one you use on LKML. Which one do you prefer ? Just in case, I've
used both.
Thanks in advance,
Willy
From f3779aa6e0b38c0dfdad4f98b6bcddcd570b6aa7 Mon Sep 17 00:00:00 2001
From: Willy Tarreau <w@1wt.eu>
Date: Sat, 25 Nov 2006 22:00:12 +0100
Subject: [PATCH] arm: incorrect use of "&&" instead of "&"
In integrator_init_irq(), the use of "&&" in the following
statement causes all interrupts to be marked valid regardless
of INTEGRATOR_SC_VALID_INT, as long as it's non-zero :
     if (((1 << i) && INTEGRATOR_SC_VALID_INT) != 0)
Obvious fix is to replace it with "&". This was already fixed
in 2.6.
Signed-off-by: Willy Tarreau <w@1wt.eu>
---
 arch/arm/mach-integrator/irq.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)
diff --git a/arch/arm/mach-integrator/irq.c b/arch/arm/mach-integrator/irq.c
index 69d2e67..cc56534 100644
--- a/arch/arm/mach-integrator/irq.c
+++ b/arch/arm/mach-integrator/irq.c
@@ -55,7 +55,7 @@ void __init integrator_init_irq(void)
 	unsigned int i;
 
 	for (i = 0; i < NR_IRQS; i++) {
-	        if (((1 << i) && INTEGRATOR_SC_VALID_INT) != 0) {
+	        if (((1 << i) & INTEGRATOR_SC_VALID_INT) != 0) {
 		        irq_desc[i].valid	= 1;
 			irq_desc[i].probe_ok	= 1;
 			irq_desc[i].mask_ack	= sc_mask_irq;
-- 
1.4.2.4
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/