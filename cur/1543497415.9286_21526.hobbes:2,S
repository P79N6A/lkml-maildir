Date: Wed, 2 Jun 1999 02:14:09 +0100 (BST)
From: "Stephen C. Tweedie" <>
Subject: Re: 2.2.9 hangs in truncate_inode_pages
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/6/1/179

Hi,
On 01 Jun 1999 12:29:56 +0200, Trond Myklebust
<trond.myklebust@fys.uio.no> said:
> A naiive question on my part perhaps: but why is truncate_inode_pages
> calling page_cache_release(page) without having done an
> atomic_inc(&page->count) first?
Because truncate_inode_pages() is actively destroying the page cache for
those pages which are no longer valid for the inode in question,  and
the way it does that is to remove the page from the page cache lists and
then to free the page.  The reference count being destroyed by
truncate_inode_pages() is the one held by the page cache itself. 
--Stephen
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/