Date: Tue, 04 Jul 2000 22:32:14 +0300
From: Heikki Vatiainen <>
Subject: 2.4.0-test3 RAID lockup
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/7/4/80

I'm not on linux-kernel so any Cc:s are welcome.
Russell Coker reported last Sunday, Jul 2, about the RAID-1 lockups
he has experienced. I have also experienced similar lockups with a
three disk RAID-0 setup. The disks just stop working and every
process that touches them goes to an unkillable state. Commands
like sync or reboot -f just freeze and do nothing. /dev/hda which
is not part of RAID works normally. The only way to reboot is to 
press the reset button.
Disks hdc, hde and hdg are identical 17 GB Seagate disks with only
one, whole disk sized partition with id 0xfd. The machine has Abit
bp6 motherboard with two 433MHz Celerons and 256MB of memory. The
filesystem on /dev/md0 is reiserfs. The kernel is
linux-2.4.0-test2.tar.gz, patched with test3-pre1.gz and
linux-2.4.0-test3-pre1-reiserfs-3.6.10-patch.gz
The lockups have happened with heavy outbound rsync activity, 5 
rsyncs pulling files over a switched 100Base-T ethernet or when 
the machine has been doing a single rsync against a 600MB 
CD image file on another machine. No modules were in use during 
the lockups.
% uname -a
Linux trumpetti 2.4.0-test3 #3 SMP Thu Jun 29 23:00:31 EEST 2000 i686 unknown
% cat /proc/mdstat 
Personalities : [linear] [raid0] 
read_ahead 1024 sectors
md0 : active raid0 hdg1[2] hde1[1] hdc1[0]
      50524608 blocks 32k chunks
unused devices: <none>
% cat /etc/raidtab 
raiddev /dev/md0
    raid-level 0
    nr-raid-disks 3
    persistent-superblock 1
    chunk-size 32
    device /dev/hdc1
    raid-disk 0
    device /dev/hde1
    raid-disk 1
    device /dev/hdg1
    raid-disk 2
% df 
Filesystem           1k-blocks      Used Available Use% Mounted on
/dev/hda1              4031656    408432   3418428  11% /
/dev/md0              50523060  22517404  28005656  45% /disk
% mount
/dev/hda1 on / type ext2 (rw,errors=remount-ro,errors=remount-ro)
proc on /proc type proc (rw)
devpts on /dev/pts type devpts (rw,gid=5,mode=620)
/dev/md0 on /disk type reiserfs (rw)
Ethernet device is a 3c905B, here's a snippet from dmesg:
3c59x.c:v0.99L+LK1.1.6  28 May 2000  Donald Becker and others. 
http://www.scyld.com/network/vortex.html
 $Revision: 1.97 $
eth0: 3Com PCI 3c905B Cyclone 100baseTx at 0xd400,  00:50:04:73:1a:00, IRQ 17
  8K byte-wide RAM 5:3 Rx:Tx split, autoselect/Autonegotiate interface.
  MII transceiver found at address 24, status 786d.
  MII transceiver found at address 0, status 786d.
3c59x: Wake-on-LAN functions disabled
  Enabling bus-master transmits and whole-frame receives.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/