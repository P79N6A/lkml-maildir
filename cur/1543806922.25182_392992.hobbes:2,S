Date: Fri, 3 Feb 2006 10:20:42 +1000
From: Nigel Cunningham <>
Subject: Re: [ 01/10] [Suspend2] kernel/power/modules.h
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/2/2/427

Hi.
On Friday 03 February 2006 08:10, Rafael J. Wysocki wrote:
> I was referring to the (not so far) future situation when we have
> compression in the userland suspend/resume utilities.  The times of
> writing/reading the image will be similar to yours and IMHO it's usually
> possible to free 1/2 of RAM in a box with 512+ MB of RAM at a little cost
> as far as the responsiveness after resume is concerned.  Thus on machines
> with 512+ MB of RAM
> both solutions will give similar results performance-wise, but the
> userland-driven suspend gives you much more flexibility wrt what you can
> do with the image (eg. you can even send it over the network if need be).
>
> On machines with less RAM suspend2 will probably be better
> preformance-wise, and that may be more important than the flexibility.
Ok. So I bit the bullet and downloaded -mm4 to take a look at this interface 
you're making, and I have a few questions:
- It seems to be hardwired to use swap, but you talk about writing to a 
network image above. In Suspend2, I just bmap whatever the storage is, and 
then submit bios to read and write the data. Is anything like that possible 
with this interface? (Could it be extended if not?)
- Is there any way you could support doing a full image of memory with this 
approach? Would you take patches?
- Does the data have to be transferred to userspace? Security and efficiency 
wise, it would seem to make a lot more sense just to be telling the kernel 
where to write things and let it do bio calls like I'm doing at the moment.
- In your Documentation file, you say say opening /dev/snapshot for reading is 
done when suspending. Shouldn't that be open read for resume and write for 
suspend?
I'm not saying I'm going to get carried away trying to port Suspend2 to 
userspace. Just tentatively exploring. But if I did decide to port it, my 
default position would be to seek not to drop a single feature. I hope that's 
not too unreasonable!
NIgel
-- 
See our web page for Howtos, FAQs, the Wiki and mailing list info.
http://www.suspend2.net
                IRC: #suspend2 on Freenode
[unhandled content-type:application/pgp-signature]