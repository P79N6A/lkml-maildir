Date: Wed, 12 Mar 2008 14:59:12 -0800
From: David Brownell <>
Subject: Re: [PATCH 2/3] gpiolib: implement gpiochip_reserve
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/3/12/409

On Wednesday 12 March 2008, Anton Vorontsov wrote:
> > It
> > presumes the reserved bits and gpio chips are in fairly
> > close synch.
> 
> Probably I don't understand the synch part here. The thing is that
> I'm replacing if (!chip) with if (!chip && !test_bit(FLAG_RESERVED,
> &desc->flags)), so now "else" code might be executed when gpio is
> either reserved or the range of gpios is already managed by the chip.
OK then.
> Below the patch with __init attribute added.
> 
> - - - -
> From: Anton Vorontsov <avorontsov@ru.mvista.com>
> Subject: gpiolib: implement gpiochip_reserve
> 
> Function gpiochip_reserve() reserves range of gpios to use with
> platform code only, that is, this function used to mark specified
> range of gpios unavailable for the dynamic gpio base allocator.
> 
> Signed-off-by: Anton Vorontsov <avorontsov@ru.mvista.com>
Acked-by: David Brownell <dbrownell@users.sourceforge.net>
> ---
>  ...