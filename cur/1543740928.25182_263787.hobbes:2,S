Date: Sat, 23 Oct 2004 10:44:13 +0100
From: Christoph Hellwig <>
Subject: Re: getting rid of inter_module_xx
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/10/23/79

On Fri, Oct 22, 2004 at 01:08:08PM -0400, Jon Smirl wrote:
> I'm looking at getting rid of DRM's use of inter_module_xx. DRM makes
> use of this to locate and use the AGP module. AGP is an optional
> module since some system only have PCI graphics.
> 
> Right now DRM uses inter_module_get("AGP") to locate the module if it
> exists. It then changes behavior if this call secedes or fails.
> 
> If I remove inter_module_get("AGP") and use the symbols directly, such
> as agp_backend_acquire(), how do I resolve the symbol link when AGP is
> not loaded? If the symbols link as NULL DRM will see that and act
> correctly.
not at all.  Everything else in the kernel is compile-time depencies.
Just make the agp backend module mandatory if CONFIG_AGP is set, you'll
lose tons of complexity at a minimum amount of used memory, and as an
added benefit look like the rest of the kernel.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/