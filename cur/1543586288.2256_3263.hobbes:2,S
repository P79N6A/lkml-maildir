Date: Fri, 30 Mar 2001 15:02:54 -0500 (EST)
From: "" <>
Subject: Kernel 2.4.2-ac28/2.4.3 lockups, maybe es1371 driver?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/3/30/79

All,
I have been having pretty random crashes of my machine since I installed a
Creative EnsoniqAUdioPCI card a couple of weeks ago.  The card uses the es1371
sound driver.  I have compiled the driver as both a module and in the kernel
and the crashes happen all the time.  I use the desktop for a little under a
day and eventually it will crash, right now it crashes when I run java for some
reason.  I type in java -version and within a few seconds the machine locks up
and is unable to get telnet/serial on the machine.  Since it started happening
I have never seen any messages in the kernel when I have the crashes but this
time I saw that there was a vfree() error in the kernel log.  I looked back and
there was a problem at one time with sound drivers and this error.  Is there
any chance that it has reappeared?
Here is the error output from kernel.log:
Mar 30 03:14:49 hehehe kernel: NVRM: not using NVAGP, AGPGART is loaded!!
Mar 30 12:01:48 hehehe kernel: Undo loss 167.206.112.6/110 c2 l0 ss2/2 p0
Mar 30 12:01:58 hehehe kernel: Undo loss 167.206.112.6/110 c2 l0 ss2/2 p0
Mar 30 12:50:05 hehehe kernel: FAT bread failed
-->Mar 30 13:24:27 hehehe kernel: Trying to vfree() nonexistent vm area
(e5c46000)
Then the machine reboots.  I have had this problem pretty much since i bought
the AuidioPCI card.  I think that it might have to do with the recent driver
updates to es1371 driver but I am not sure.  I have attached my kernel
configuration and lspci output.  If any more information is needed then please
let me know.
Can anyone tell me what I should be doing to solve this problem?  I am willing
to test any patches that are needed.
Thanks,
Sean
root@hehehe ~ >lspci -vv
00:00.0 Host bridge: VIA Technologies, Inc. VT82C691 [Apollo PRO] (rev c4)
	Subsystem: Asustek Computer, Inc.: Unknown device 8017
	Control: I/O- Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr-
Stepping- SERR- FastB2B-
	Status: Cap+ 66Mhz- UDF- FastB2B- ParErr- DEVSEL=medium >TAbort-
<TAbort- <MAbort+ >SERR- <PERR-
	Latency: 0
	Region 0: Memory at e4000000 (32-bit, prefetchable) [size=64M]
	Capabilities: <available only to root>
00:01.0 PCI bridge: VIA Technologies, Inc. VT82C598/694x [Apollo MVP3/Pro133x
AGP] (prog-if 00 [Normal decode])
	Control: I/O+ Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr-
Stepping- SERR- FastB2B-
	Status: Cap+ 66Mhz+ UDF- FastB2B- ParErr- DEVSEL=medium >TAbort-
<TAbort- <MAbort+ >SERR- <PERR-
	Latency: 0
	Bus: primary=00, secondary=01, subordinate=01, sec-latency=0
	Memory behind bridge: d6000000-d7dfffff
	Prefetchable memory behind bridge: d7f00000-e3ffffff
	BridgeCtl: Parity- SERR- NoISA- VGA+ MAbort- >Reset- FastB2B-
	Capabilities: <available only to root>
00:04.0 ISA bridge: VIA Technologies, Inc. VT82C596 ISA [Mobile South] (rev 23)
	Subsystem: Asustek Computer, Inc.: Unknown device 8017
	Control: I/O+ Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr-
Stepping+ SERR- FastB2B-
	Status: Cap- 66Mhz- UDF- FastB2B- ParErr- DEVSEL=medium >TAbort-
<TAbort- <MAbort- >SERR- <PERR-
	Latency: 0
00:04.1 IDE interface: VIA Technologies, Inc. Bus Master IDE (rev 10) (prog-if
8a [Master SecP PriP])
	Control: I/O+ Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr-
Stepping+ SERR- FastB2B-
	Status: Cap+ 66Mhz- UDF- FastB2B+ ParErr- DEVSEL=medium >TAbort-
<TAbort- <MAbort- >SERR- <PERR-
	Latency: 32
	Region 4: I/O ports at d800 [size=16]
	Capabilities: <available only to root>
00:04.3 Host bridge: VIA Technologies, Inc. VT82C596 Power Management (rev 30)
	Control: I/O- Mem- BusMaster- SpecCycle- MemWINV- VGASnoop- ParErr-
Stepping- SERR- FastB2B-
	Status: Cap- 66Mhz- UDF- FastB2B+ ParErr- DEVSEL=medium >TAbort-
<TAbort- <MAbort- >SERR- <PERR-
00:09.0 Multimedia audio controller: Ensoniq CT5880 [AudioPCI] (rev 02)
	Subsystem: Ensoniq: Unknown device 2003
	Control: I/O+ Mem- BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr-
Stepping- SERR- FastB2B-
	Status: Cap+ 66Mhz- UDF- FastB2B- ParErr- DEVSEL=slow >TAbort- <TAbort-
<MAbort- >SERR- <PERR-
	Latency: 32 (3000ns min, 32000ns max)
	Interrupt: pin A routed to IRQ 4
	Region 0: I/O ports at d000 [size=64]
	Capabilities: <available only to root>
00:0a.0 SCSI storage controller: Adaptec AIC-7881U
	Control: I/O- Mem+ BusMaster+ SpecCycle- MemWINV+ VGASnoop- ParErr-
Stepping- SERR- FastB2B-
	Status: Cap- 66Mhz- UDF- FastB2B+ ParErr- DEVSEL=medium >TAbort-
<TAbort- <MAbort- >SERR- <PERR-
	Latency: 32 (2000ns min, 2000ns max), cache line size 08
	Interrupt: pin A routed to IRQ 10
	Region 0: I/O ports at b800 [disabled] [size=256]
	Region 1: Memory at d5800000 (32-bit, non-prefetchable) [size=4K]
	Expansion ROM at <unassigned> [disabled] [size=64K]
00:0c.0 Ethernet controller: Accton Technology Corporation SMC2-1211TX (rev 10)
	Subsystem: Accton Technology Corporation EN-1207D Fast Ethernet Adapter
	Control: I/O+ Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr-
Stepping- SERR- FastB2B-
	Status: Cap+ 66Mhz- UDF- FastB2B+ ParErr- DEVSEL=medium >TAbort-
<TAbort- <MAbort- >SERR- <PERR-
	Latency: 32 (8000ns min, 16000ns max)
	Interrupt: pin A routed to IRQ 11
	Region 0: I/O ports at b400 [size=256]
	Region 1: Memory at d5000000 (32-bit, non-prefetchable) [size=256]
	Capabilities: <available only to root>
00:0d.0 SCSI storage controller: Symbios Logic Inc. (formerly NCR) 53c895 (rev
01)
	Subsystem: Tekram Technology Co.,Ltd.: Unknown device 3907
	Control: I/O+ Mem+ BusMaster+ SpecCycle- MemWINV+ VGASnoop- ParErr+
Stepping- SERR- FastB2B-
	Status: Cap- 66Mhz- UDF- FastB2B- ParErr- DEVSEL=medium >TAbort-
<TAbort- <MAbort- >SERR- <PERR-
	Latency: 32 (7500ns min, 16000ns max), cache line size 08
	Interrupt: pin A routed to IRQ 4
	Region 0: I/O ports at b000 [size=256]
	Region 1: Memory at d4800000 (32-bit, non-prefetchable) [size=256]
	Region 2: Memory at d4000000 (32-bit, non-prefetchable) [size=4K]
	Expansion ROM at <unassigned> [disabled] [size=64K]
01:00.0 VGA compatible controller: nVidia Corporation NV15 (Geforce2 GTS) (rev
a3) (prog-if 00 [VGA])
	Subsystem: LeadTek Research Inc. WinFast GeForce2 GTS with TV output
	Control: I/O+ Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr-
Stepping- SERR- FastB2B-
	Status: Cap+ 66Mhz+ UDF- FastB2B+ ParErr- DEVSEL=medium >TAbort-
<TAbort- <MAbort- >SERR- <PERR-
	Latency: 248 (1250ns min, 250ns max)
	Interrupt: pin A routed to IRQ 11
	Region 0: Memory at d6000000 (32-bit, non-prefetchable) [size=16M]
	Region 1: Memory at d8000000 (32-bit, prefetchable) [size=128M]
	Expansion ROM at d7ff0000 [disabled] [size=64K]
	Capabilities: <available only to root>
[unhandled content-type:application/x-unknown]