Date: Sun, 29 Sep 2002 00:00:21 -0700 (PDT)
From: Arvind Gopalan <>
Subject: Re: 4 byte mem alignment
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/9/29/110

Thanks Dave, for confirming my doubt. I have some user
level code that uses raw sockets on
linux. The code ran on several dual PIII x86 machines
without any issues. But since the time we started
running (the same code with no changes) on the dual
x86 xeons, i have seen some wierd corruption issues
with the packets. This kernel already has the patch
for the xeon TLB flush bug. On some of the eth packets
that I dumped, i found that 8 bytes of data being
"copied and inserted"!. As in after a certain offset
into the packet, there would be a sequence of 8 bytes
that would be an exact copy of the 8 bytes that
appeared just before. All other following bytes were
literally shifted down by 8. How can i proceed to
debug this sort of a problem. if its a xeon specific
issue, how can i isolate it?. 
Thanks
-Arvind 
--- "David S. Miller" <davem@redhat.com> wrote:
>    From: Arvind Gopalan <arvind_gopalan@yahoo.com>
>    Date: Sat, 28 Sep 2002 23:26:46 -0700 (PDT)
> 
>    how strong the requirements are for
> copy_to_user().
>    does it fault to byte-by-byte mode gracefully
> when
>    given a non-4byte aligned buffer?.
> 
> The x86 processor handles unaligned memory accesses
> in hw.
> 
> On any platform, copy_to_user() must handle any user
> and kernel buffer
> alignment.
__________________________________________________
Do you Yahoo!?
New DSL Internet Access from SBC & Yahoo!
http://sbc.yahoo.com
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/