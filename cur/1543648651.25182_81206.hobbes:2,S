Date: Fri, 18 Oct 2002 08:49:00 +0200
From: "Ulrich Windl" <>
Subject: almost a patch for 2.4.19: /proc/sys/kernel/time
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/10/18/35

Hello,
I have a patch known as "PPSkit" that converts the kernel to use an 
internal time base of nanoseconds for wall time...
Some time ago (1999) I implemented a new sysctl directory 
/proc/sys/kernel/time that allows fixing some of the oddities having to 
do with time (e.g. setting the timezone, preventing the kernel from 
doing RTC updates, forcing the kernel to do RTC updates when the clock 
is set, etc.)
With the recent discussion about "HZ", I decided to implement 
/proc/sys/kernel/time/Hz as read-only variable.
I'll attach a part of the patch against 2.4.19 that was ripped out of 
"PPSpatch-2.4.19.gz" (that I uploaded today to the kernel master 
directory ...kernel.org:/pub/linux/daemons/ntp/PPS). The file is time-
sysctl.diff (6kB).
The patch against kernel/time.c will not work, but that's only lines to 
add. Leave out all variables that you don't know, and you should still 
get a working subset.
The documentation refers to the "PPSkit" version, so ignore any 
"nanosecond", or read it as "microsecond". I'd like to hear some 
comments about the idea.
Please mail directly to me too as I'm nut subscribed to linux-kernel.
Thanks & regards,
Ulrich Windl
[unhandled content-type:application/octet-stream]