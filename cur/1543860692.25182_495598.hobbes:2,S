Date: Tue, 02 Jan 2007 17:52:14 +0000
From: David Howells <>
Subject: Re: Removing MAX_ARG_PAGES (request for comments/assistance)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/1/2/163

Ollie Wild <aaw@google.com> wrote:
> - I haven't tested this on a NOMMU architecture.  Could someone please
> validate this?
There are a number of potential problems with NOMMU:
 (1) The argument data is copied twice (once into kernel memory and once out
     of kernel memory).
 (2) The permitted amount of argument data is governed by the stack size of
     the program to be exec'd.  You should assume that NOMMU stacks cannot
     grow.
 (3) VMAs on NOMMU are a shared resource.
However, we might be able to extend your idea to improve things.  If we work
out the stack size required earlier, we can allocate the VMA and the memory
for the stack *before* we reach the point of no return.  We can then fill in
the stack and load up all the parameters *before* releasing the original
executable.  That would eliminate one of the copied mentioned in (1).  Working
out the stack size earlier may be difficult though, as we may need to load the
interpreter header before we can do so.
Overall, I don't think there should be too many problems with this for NOMMU.
David
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/