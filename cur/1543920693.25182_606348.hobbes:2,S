Date: Wed, 17 Oct 2007 23:35:49 +0800
From: "Bryan Wu" <>
Subject: Re: [PATCH try #4] Input/Joystick Driver: add support AD7142 joystick driver
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/10/17/216

On 10/17/07, Jean Delvare <khali@linux-fr.org> wrote:
> Hi Bryan,
>
> On Wed, 17 Oct 2007 15:12:00 +0800, Bryan Wu wrote:
> > Subject: [PATCH try #4] Input/Joystick Driver: add support AD7142 joystick driver
>
> This driver is a good candidate for the new-style i2c infrastructure.
> Instead of letting i2c-core probe for the device on all available I2C
> buses, you would explicitly instantiate it from platform data. In
> practice this would mean:
> * Declare the ad7142 in platform data.
> * Call i2c_register_board_info() on that data.
> * In your ad7142 driver, implement .probe and .remove instead
>   of .attach_adapter and .detach_client.
>
I would like to rewrite it by using new-style i2c infrastructure.
But it will take some time. If I meet some problem, hope can get some advice
from you and the community.
> Of course this assumes that the underlying bus driver is also new-style
> ready (i.e. it uses i2c_add_numbered_adapter() instead of
> i2c_add_adapter()), and that you know in advance when the AD7142 is
> there or not. I hope this is the case?
>
Oh, currently i2c-bfin-twi driver is using the old-style code.
> Using a new-style i2c driver is especially important if the device
> can't be detected.
>
> Also see my i2c-related comments inline.
>
I will fix all the issues and try to pass our Blackfin AD7142 Joystick testcase.
and resubmit a patch.
Thanks
-Bryan
[!snip!]
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/