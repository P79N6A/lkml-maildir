Date: Sun, 17 Feb 2002 18:26:46 -0500
From: Jeff Garzik <>
Subject: Re: [PATCH] HDLC patch for 2.5.5 (1/3)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/2/17/20

Francois Romieu wrote:
> 
> [1/3]:
> - struct if_settings in struct ifreq becomes struct if_settings *
mostly ok... I'm wondering how this specific item (shown below in the
patch portion quoted) affects binary compatibility...  how does this
affect userland if ifru_settings is suddenly a pointer?
	Jeff
> --- linux-2.5.5-pre1-kh/include/linux/if.h      Sun Feb 17 17:39:24 2002
> +++ linux-2.5.5-pre1-ma_pomme/include/linux/if.h        Sun Feb 17 17:42:10 > @@ -95,10 +96,13 @@ struct ifmap
>  struct if_settings
>  {
>         unsigned int type;      /* Type of physical device or protocol */
> -       unsigned int data_length; /* device/protocol data length */
> -       void * data;            /* pointer to data, ignored if length = 0 */
> +       union {
> +               /* {atm/eth/dsl}_settings anyone ? */
> +               struct hdlc_settings ifsu_hdlc;
> +       } ifs_ifsu;
>  };
> 
> +#define ifs_hdlc       ifs_ifsu.ifsu_hdlc
> 
>  /*
>   * Interface request structure used for socket
> @@ -129,7 +133,7 @@ struct ifreq
>                 char    ifru_slave[IFNAMSIZ];   /* Just fits the size */
>                 char    ifru_newname[IFNAMSIZ];
>                 char *  ifru_data;
> -               struct  if_settings ifru_settings;
> +               struct  if_settings *ifru_settings;
>         } ifr_ifru;
>  };
>
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/