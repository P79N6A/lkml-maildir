Date: Mon, 24 Oct 2005 11:07:45 -0700
From: Jesse Barnes <>
Subject: Re: new PCI quirk for Toshiba Satellite?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/10/24/140

On Monday, October 24, 2005 10:45 am, Jesse Barnes wrote:
> Checks against the compiler defined arch are usually wrong since users
> could be cross compiling, and I'd like to avoid an ifdef altogether. 
> I think we can make the code collapse entirely by fixing linux/dmi.h. 
> If we remove the !defined(CONFIG_X86_64) check around the extern of
> dmi_check_system, all other arches will have it defined to simply
> return 0, causing gcc to remove the dead conditional in ohci1394.c.
Duh, I don't even think we have to do anything to dmi.h, it should work 
as described above as it stands now.  All we have to do is 
unconditionally add dmi.h to ohci1394.c and use the dmi stuff there; on 
x86 it'll do something, on other arches it should compile out just fine.
Jesse
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/