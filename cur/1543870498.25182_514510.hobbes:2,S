Date: Fri, 2 Mar 2007 12:25:09 +1100
From: Con Kolivas <>
Subject: Re: [PATCH] sched: remove SMT nice
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/3/1/445

On Friday 02 March 2007 12:30, Andrew Morton wrote:
> On Fri, 2 Mar 2007 09:33:37 +1100
>
> Con Kolivas <kernel@kolivas.org> wrote:
> > Remove the SMT-nice feature which idles sibling cpus on SMT cpus to
> > facilitiate nice working properly where cpu power is shared. The idling
> > of cpus in the presence of runnable tasks is considered too fragile, easy
> > to break with outside code, and the complexity of managing this system if
> > an architecture comes along with many logical cores sharing cpu power
> > will be unworkable.
> >
> > Remove the associated per_cpu_gain variable in sched_domains used only by
> > this code.
>
> Seems like a somewhat serious step.  Is this urgent enough for 2.6.21?
> If so, why?  The mysql thing?
No, Nish showed improvement in fact with SCHED_SMT enabled so this is 
unrelated. 
The reason is that with dynticks enabled, this code breaks without yet further 
tweaks so dynticks brought on the rapid demise of this code. So either we 
tweak this code or kill it off entirely. It was Ingo's preference to kill it 
off. Either way this needs to happen for 2.6.21 since dynticks has gone in.
-- 
-ck
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/