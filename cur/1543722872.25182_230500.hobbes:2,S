Date: Sat, 26 Jun 2004 17:23:04 -0500
From: Zinx Verituse <>
Subject: 8139too in 2.6.x tx timeout
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/6/26/99

This problem appears similar to the thread earlier this year with
the subject '2.6.3 - 8139too timeout debug info', but I don't think
it is, since the 2.6.2 driver and patches given in that thread
don't appear to work.
I have enabled debug in the stock Linux 2.6.7 8139too.c and posted it at:
http://zinx.xmms.org/misc/tmp/8139too.debug
The debug shows init, DHCP request (succeeded), then a ping -f that lasts
until shortly after it timed out.
It appears to be losing interrupts, but I don't know the cause, and
don't know how to work around it.  The BIOS is extremely dumb, and has
no option for level/edge, or anything even remotely useful.
I can apply patches, twiddle settings, and provide any debug info needed.
Network:
10mbps half-duplex (detected correctly)
Hardware:
Thinkpad 600E
GigaFast EE102-DLX (RTL-8139C chip)
Kernel config:
ACPI and APIC disabled completely (and the hardware does not support)
HZ=1000 and HZ=100 (via include/asm-i386/param.h); results seem identical.
Software (working with no timeouts):
Linux 2.4.24-xfs (knoppix v3.3 2004-02-16)
Software (extremely frequent tx timeouts, even under fairly low loads
such as only ssh):
Linux 2.6.7 (vanilla)
Linux 2.6.7 w/ "8139too-config-napi.patch"
Linux 2.6.7 + Linux 2.6.2 8139too.c w/ PF_IOTHREAD -> PF_FREEZE
-- 
Zinx Verituse                                    
http://zinx.xmms.org/
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/