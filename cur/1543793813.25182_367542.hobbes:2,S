Date: Thu, 17 Nov 2005 01:04:18 +1100
From: Eyal Lebedinsky <>
Subject: hware clock left bad after a system failure
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/11/16/140

I recently had two cases where my machine locked up and needed
a hard reset. The last time magic SysRq did not respond at all.
In these cases I found that the hware clock was set incorrectly
and the machine comes up with a bad date. It seems that the clock
is ahead by as much as my TZ (+10 in my case). I may be able
to understand if it was set 10h behind (kernel set it to UTC)
but this is the other way. The machine comes up with UTC+20.
Now this is just trouble. The machine comes up and spends 15m
fscking. I then reset the clock and reboot and it does the whole
fsck again because it thinks the fs was not checked for eons. It
does not understand time in the future.
So the points are
- why is the clock mangled in this way?
- should e2fsck not allow future check time (maybe within some
  limits)?
-- 
Eyal Lebedinsky (eyal@eyal.emu.id.au) <
http://samba.org/eyal/>
	attach .zip as .dat
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/