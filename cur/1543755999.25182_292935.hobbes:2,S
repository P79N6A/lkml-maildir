Date: Sat, 05 Feb 2005 06:29:06 +0100
From: Michael Frank at BerliOS <>
Subject: [PATCH] 2.6.11-rc3 fix compile failure in arch/i386/kernel/i387.c
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/2/5/2

Using patch-2.6.11-rc3.bz2 from kernel.org on top of 2.6.10, 
a compile failure in /arch/i386/kernel/i387.c due to tsk->used_math undef.
The patch log shows offsets but no rejects
patching file arch/i386/kernel/i387.c
Hunk #6 succeeded at 538 (offset 15 lines).
Hunk #7 succeeded at 553 (offset 15 lines).
Patch below fixes it.
 Regards
 Michael
Signed off by: Michael Frank <mhf@berlios.de>
diff -uN linux-2.6.11-rc3-Vanilla/arch/i386/kernel/i387.c linux-2.6.11-rc3-mhf241/arch/i386/kernel/i387.c
--- linux-2.6.11-rc3-Vanilla/arch/i386/kernel/i387.c    2005-02-04 10:43:06.000000000 +0100
+++ linux-2.6.11-rc3-mhf241/arch/i386/kernel/i387.c     2005-02-04 11:12:53.000000000 +0100
@@ -526,7 +526,7 @@
        int fpvalid;
        struct task_struct *tsk = current;
-       fpvalid = tsk->used_math && cpu_has_fxsr;
+       fpvalid = !!used_math() && cpu_has_fxsr;
        if ( fpvalid ) {
                unlazy_fpu( tsk );
                memcpy( fpu, &tsk->thread.i387.fxsave,
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/