Date: 19 Sep 2002 19:02:30 +0100
From: Alan Cox <>
Subject: Re: ide double init? + Re: BUG: Current 2.5-BK tree dies on boot!
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/9/19/138

On Thu, 2002-09-19 at 18:48, Patrick Mochel wrote:
> Yes, and that's the way it's set up: we check if the device has a driver 
> before we bind to it. However, dev->driver doesn't get set before the 
> device is registered with the core for PCI devices. That's fixed easily 
> enough. 
> 
> But, I'm a bit confused on where this is happening. The PCI layer will 
> probe for devices before any drivers are registered. The drivers are 
> registered, then they're attached to devices that were already discovered. 
> So, how are they getting init'ed twice? 
The IDE layer has to preserve ordering. It does that by doing pci device
ordered scans at boot then handing the driver registrations over to the
pci hotplug layer for new inserts.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/