Date: Mon, 5 Apr 1999 01:12:02 +0200 (MEST)
From: Ricardo Galli Granada <>
Subject: Re: NFS Problem
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/4/4/68

> A previously-intermittant bug has now become chronic.  Whenever I fire up 
> my newsreader (slrn) in a situation where home directory is nfs-mounted, the 
> ~/.newsrc file disappears on program exit, leaving only the *~ backup.
I was fighting hard against NFS, sendmail, qpopper and pine last days.
I won after lot of hours reading 
linux/Documentation/{locks.txt,mandatory.txt"
and linux/fs/{lock*,nfs*}.
Apart of going to knfsd, I found the next fstab nfs options work
reasonable well
   rsize=4096,wsize=4096,intr,hard,noac,acregmax=10
Note that noac should -I think- override acregmax, but it doesn't. If you
reboot the servers the server often add "bg" or trust in "soft" instead of
"hard".
In addition, if you are using userland nfsd, and the newsreader does use
fcntl, add "nolock" (and upgrade to 2.2.5).
If you program uses flock, pray you can compile it again to use fcntl.
I wonder if glibc2 implements flock using fcntl and why the root directory
can not be exported with kexportfs/kmountd
Best regards,
--
Ricardo Galli
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/