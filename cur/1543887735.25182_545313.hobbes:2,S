Date: Wed, 16 May 2007 19:37:25 +0200
From: Maciej Rutecki <>
Subject: Re: 2.6.22-rc1-mm1 [cannot change thermal trip points]
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/5/16/310

In 2.6.20.9 I can change trippoints:
echo "105:100:100:78:70:40:30" > /proc/acpi/thermal_zone/TZ0/trip_points
echo 10  > /proc/acpi/thermal_zone/TZ0/polling_frequency
Then I got:
cat /proc/acpi/thermal_zone/TZ0/*
<setting not supported>
cooling mode:   active
polling frequency:       10 seconds
state:                   active[2]
temperature:             45 C
critical (S5):           105 C
active[0]:               78 C: devices=0xdf415a40
active[1]:               70 C: devices=0xdf4159dc
active[2]:               40 C: devices=0xdf41598c
active[3]:               30 C: devices=0xdf41593c
cat /proc/acpi/fan/*/*
status:                  off
status:                  off
status:                  on
status:                  on
And fan turns on.
In 2.6.22-rc1-mm1:
echo "105:100:100:78:70:40:30" > /proc/acpi/thermal_zone/TZ0/trip_points
bash: echo: write error: BĹÄd wejĹcia/wyjĹcia (input/output error)
rutek:/home/maciek# cat /proc/acpi/thermal_zone/TZ0/*
<setting not supported>
polling frequency:       10 seconds
state:                   ok
temperature:             45 C
critical (S5):           256 C
active[0]:               78 C: devices=0xc1827a40
active[1]:               70 C: devices=0xc18279dc
active[2]:               60 C: devices=0xc182798c
active[3]:               50 C: devices=0xc182793c
rutek:/home/maciek# cat /proc/acpi/fan/*/*
status:                  off
status:                  off
status:                  off
status:                  off
Fan turns on when temperature is over 50*C. (want: 30)
A read this:
http://article.gmane.org/gmane.linux.acpi.devel/22750
But I don't have colling_policy, but only colling_mode:
ls /proc/acpi/thermal_zone/TZ0/
cooling_mode  polling_frequency  state  temperature  trip_points
Its bug or feature?
Config, acpidump, dmesg:
http://www.unixy.pl/maciek/download/kernel/2.6.22-rc1-mm1/
-- 
Maciej Rutecki
www.unixy.pl
Kernel Monkeys
(
http://kernel.wikidot.com/
)
[unhandled content-type:application/x-pkcs7-signature]