Date: Wed, 04 Aug 2004 23:39:06 +0200
From: "Marinos J. Yannikos" <>
Subject: 2.6.7 SATA (SCSI emulation) sw-raid1 - lockup when 1 drive is removed
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/8/4/242

Hi,
A box with a stock 2.6.7 kernel using the Promise SX4 controller 
(CONFIG_SCSI_SATA_SX4, i.e. libata driver) locks up completely when one 
of the 2 drives in a raid 1 configuration is removed. I believe this is 
not how raid 1 is supposed to work. ;-) swap was initially on the drive 
   I removed only (/dev/sdb2), but I also tested this with swap on a 
raid volume (/dev/md2 = /dev/sdb2 + /dev/sdc2)- the effect is exactly 
the same in both cases.
The last message seen is: "ata1 DMA timeout", then the console stops 
working. dmesg output and config.gz available at: 
http://stuff.geizhals.at/misc/2004-08-04/
Perhaps there is a work-around or this issue can be resolved quickly 
before one of the drives actually dies...
Regards,
  Marinos
-- 
Dipl.-Ing. Marinos Yannikos, CEO
Preisvergleich Internet Services AG
Obere Donaustrasse 63, A-1020 Wien
Tel./Fax: (+431) 5811609-52/-55
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/