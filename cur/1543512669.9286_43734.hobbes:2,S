Date: Tue, 12 Oct 1999 05:48:52 -0500 (CDT)
From:  danielt@digi ...
Subject: Re: scsi disk detection and /dev names,  RE: My $.02 on the raging de vfs debate
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/10/12/66

On Mon, 11 Oct 1999, Stephen Frost wrote:
> On 11 Oct 1999, H. Peter Anvin wrote:
> 
> > This is correct; the program "scsidev" by Eric Youngdale has done this
> > for a long time, for example.
> > 
> > A few more things to remember when you're talking about
> > "location-based names":
> > 
> > 1. PCI bus numbers are fairly volatile; they are assigned sequentially
> >    by a depth-first search.  Inserting a multiport Ethernet card
> >    (which usually have PCI-PCI bridges onboard) could move a whole lot
> >    of bus numbers for you.  Same thing with SCSI controller numbers.
> 
> 	Yes, but in my experiance, you're much less likely to have a
> controller die on you than a disk.  If you move a controller you realize
> that things may change.  You also tend to do things like change controllers
> during scheduled down-time.  The same is no where near true regarding
> disks.  Much of the problem being, if a disk dies, you have to spend time
> figuring out what disk died when you reboot, you can't just say 'oh, disk
> c0t3d0s0 died, well, that is target 3 on the chain..'...  You tend to have
> to mount all of this disks, then hope you can remember what was supposted
> to be on what disk.
>
Though the suggestion of using AIX-style naming is pretty
slick.  I think that devfs would provide a nice base for
an AIX style system since the system can keep track of what
you were using as well as what is currently available.
This would take the likely form of a /dev/ populated by daemon
from a /devices/.  
Present in /dev but not in /devices: Defined
Present in both /dev and /devices  : Available
Present in /devices but not /dev   : Not defined yet by user.
Well, AIX does have one weakness there, in that on AIX
devices _must_ be configured by root at least once.
I know that /devices/ _could_ be a file, but having it as a devfs
mount means that you can access changing devices if your daemon
dies or is otherwise broken.  Increased safety.  Permissions would
be 600:root:root by default I expect. Decent security.
This also allows drivers to use dynamic majors freely since the
/dev directory is not locked down, so a lot of the problems due
to minor number limits go away (say having a seperate major number
for each SCSI channel?), allowing the /dev directory to be normal
device nodes, and allowing an orderly move to 64 bit dev_t without
rushing things.
Comments?
-- 
Daniel Taylor      Senior Test Engineer     Digi International
danielt@digi.com                             Open systems win.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/