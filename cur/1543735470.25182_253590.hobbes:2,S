Date: Sun, 19 Sep 2004 00:18:38 +1000 (EST)
From: Sergei Haller <>
Subject: Re: lost memory on a 4GB amd64
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/9/18/60

On Fri, 17 Sep 2004, Sergei Haller (SH) wrote:
SH> AW> No - thats what I use. Do you have MTRR support enabled?
SH> 
SH> yes.
SH> 
SH> AW> I'll send you my .config file; Perhaps you could try that.
SH> 
SH> I just had a look at it. tomorrow morning I'll try out some of the
SH> options. 
I tried out many configurations of the kernel config, nothing helped.
now I switched off SMP and it runs stable! So what am I to do about it?
that's the summary:
* if the memory is configured in one chunk (0-4gb) then the SMP kernel 
  works, but I only have about 3.4 gb main memory. (I know why)
* if the memory configuration is as follows: the first 3gb ar at the 
  normal address range, the fourth gb is at the address range 4-5gb.
  then all 4gb are available (not quite -- a few mb ere missing, but 
  thats ok) and 
   - the SMP kernel panics as soon as I start X or allocate about 1.6gb of
     memory (maybe less would trigger that as well, that was the only test
     I ran) ahh, kernel compillation runs fine.
   - the non-SMP kernel runs stable.
   - memtest86 runs fine
all kernels I mention are 2.6.8.1 vanilla.
What do you think? Is there anything I can do?
        Sergei
-- 
--------------------------------------------------------------------  -?)
         eMail:       Sergei.Haller@math.uni-giessen.de               /\\
-------------------------------------------------------------------- _\_V
Be careful of reading health books, you might die of a misprint.
                -- Mark Twain
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/