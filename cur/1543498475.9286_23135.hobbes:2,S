Date: Thu, 10 Jun 1999 10:45:53 +1000
From: Richard Gooch <>
Subject: Re: Devfs, was Re: Migrating to larger numbers
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/6/9/207

Wakko Warner writes:
> > > Ugh, it will miss the _other_ CD-ROMs in your system.
> > > 
> > > /dev/parport/cd
> > > /dev/pcmcia/cd
> > > /dev/usb/cd
> > > 
> > > Doesn't look like the right way to me.
> 
> <serious replies only, I don't want flames for asking a question>
> Why bother seperating it out by interface?  I'm just asking.  It
> seems it would be better to go by controller/bus/id/lun[/partition]
> for all devices that connect to scsi, ide, usb, pcmcia, parport,
> etc.  It could get ugly having all of them in the same machine, or
> we could do it with the device name beginning with h for ide (like
> it is now actually), p for parport, (pcmcia is just another bus like
> isa/pci to me so I feel it's irrelevent), s for scsi, u for usb.
> say: u0b0i0l0 is id 0 on first bus on first usb controller..
> Obviously, I don't know if usb has more than 1 bus per controller, I
> know scsi does (used to have a dual channel adaptec eisa at one
> time)
There are good reasons for separating out the interface types. The
first is that it allows an interface driver (ide-cd, sr_mod and so on)
to manage a subdirectory. This makes the CD-ROM searching scheme I
outlined trivial to implement.
If you want to unify all controller numbers (at least IDE and SCSI),
then that requires a higher level of abstraction than we currently
have. Right now the IDE and SCSI code don't talk to a common base
(genhd is *not* a common base for *all* IDE and SCSI devices, before
anyone asks).
BTW: the scheme you outline is ugly, because you end up with a very
deep directory structure, with very few entries per directory. To find
all your SCSI discs (for example) becomes much harder. It's the other
extreme to the current mess of everything in /dev. I've gone for a
balance between these two extremes that is practical and is easy to
follow.
				Regards,
					Richard....
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/