Date: Sat, 26 Feb 2000 06:58:56 -0500 (EST)
From: ben soo <>
Subject: 2.3.47+ oddness with sendmail and telnet
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/2/26/26

Several days ago i reported that using 2.3.47+ kernels i was
unable to receive linux-kernel mail.  Here is a tcpdump of 
failed mail transactions between nic.funet.fi and my box:
my box was running 2.3.48pre3 when i logged this.
Also included is a tcpdump of a telnet hang problem which 
crops up only when i am booted into the same kernels that 
exhibit the sendmail problem.  i was on an xterm and 
telnetted to another box (which runs 2.2.15pre7) on the same 
LAN.  When i do "ls -alF --colour|less -r", the telnet session 
hangs and i have to kill telnet.
i don't experience these problems so long as i don't run
any kernels newer than 2.3.46.
System is ALi Alladin V mb, 450Mhz K6-3, 192Meg RAM, IDE,
tulip card.  Kernel 2.3.48pre3, Glibc 2.1.2, GCC 2.95.2,
sendmail 8.10.0.Beta12.
i become uncouth and clueless long before i reach this level of 
TCP/IP details, hope i've captured something useful and someone 
can make some sense of these logs.  Hey, and even tell me what 
types of foolishness i've committed.
--Apologies for the long logs.  If there are replies, best to CC 
me, as i gateway the mailing list into a newsgroup locally, and 
do lose some posts because the gateway perl script that's part 
of INN is imperfect and will reject some mails.
ben soo
<mason@soo.com>
----------------------------------------------------------
tcpdump of 2 (unless i count wrong) failed  sendmail transactions 
between nic.funet.fi (193.166.0.145) and my box (199.202.113.56):
tcpdump: listening on eth0
03:43:55.743440 193.166.0.145.44968 > 199.202.113.56.25: P 1893339885:1893341345(1460) ack 480069848 win 8760 (DF)
03:44:04.271191 193.166.0.145.44968 > 199.202.113.56.25: P 0:1460(1460) ack 1 win 8760 (DF)
03:44:11.851157 199.202.113.56.25 > 193.166.0.145.44968: F 1:1(0) ack 0 win 32696 (DF)
03:44:12.117207 193.166.0.145.44968 > 199.202.113.56.25: F 2033:2033(0) ack 2 win 8760 (DF)
03:44:12.117258 199.202.113.56.25 > 193.166.0.145.44968: R 480069849:480069849(0) win 0 (DF)
03:44:12.117321 193.166.0.145.44968 > 199.202.113.56.25: . ack 2 win 8760 (DF)
03:44:12.117335 199.202.113.56.25 > 193.166.0.145.44968: R 480069849:480069849(0) win 0 (DF)
03:54:35.224995 193.166.0.145.45125 > 199.202.113.56.25: S 3533861673:3533861673(0) win 8760 <mss 1460> (DF)
03:54:35.226588 199.202.113.56.25 > 193.166.0.145.45125: S 1150743495:1150743495(0) ack 3533861674 win 32120 <mss 1460> (DF)
03:54:35.514865 193.166.0.145.45125 > 199.202.113.56.25: . ack 1 win 8760 (DF)
03:54:35.795659 199.202.113.56.32788 > 193.166.0.145.113: S 1158439356:1158439356(0) win 31856 <mss 1460,sackOK,timestamp 152368 0,nop,wscale 0> (DF)
03:54:36.074706 193.166.0.145.113 > 199.202.113.56.32788: R 0:0(0) ack 1158439357 win 0 (DF)
03:54:36.077904 199.202.113.56.25 > 193.166.0.145.45125: P 1:88(87) ack 1 win 32696 (DF)
03:54:36.364593 193.166.0.145.45125 > 199.202.113.56.25: . ack 88 win 8760 (DF)
03:54:36.374615 193.166.0.145.45125 > 199.202.113.56.25: P 1:20(19) ack 88 win 8760 (DF)
03:54:36.374691 199.202.113.56.25 > 193.166.0.145.45125: . ack 20 win 32696 (DF)
03:54:36.374903 199.202.113.56.25 > 193.166.0.145.45125: P 88:281(193) ack 20 win 32696 (DF)
03:54:36.694631 193.166.0.145.45125 > 199.202.113.56.25: P 20:102(82) ack 281 win 8760 (DF)
03:54:36.710814 199.202.113.56.25 > 193.166.0.145.45125: . ack 102 win 32696 (DF)
03:54:36.886760 199.202.113.56.25 > 193.166.0.145.45125: P 281:352(71) ack 102 win 32696 (DF)
03:54:37.194492 193.166.0.145.45125 > 199.202.113.56.25: P 102:172(70) ack 352 win 8760 (DF)
03:54:37.230826 199.202.113.56.25 > 193.166.0.145.45125: . ack 172 win 32696 (DF)
03:54:37.318140 199.202.113.56.25 > 193.166.0.145.45125: P 352:404(52) ack 172 win 32696 (DF)
03:54:37.584289 193.166.0.145.45125 > 199.202.113.56.25: P 172:178(6) ack 404 win 8760 (DF)
03:54:37.584815 199.202.113.56.25 > 193.166.0.145.45125: P 404:454(50) ack 178 win 32696 (DF)
03:54:37.966276 193.166.0.145.45125 > 199.202.113.56.25: . 178:1638(1460) ack 454 win 8760 (DF)
03:54:38.125662 193.166.0.145.45125 > 199.202.113.56.25: P 1638:2211(573) ack 454 win 8760 (DF)
03:54:38.125766 199.202.113.56.25 > 193.166.0.145.45125: . ack 178 win 32696 (DF)
03:54:42.415991 193.166.0.145.45125 > 199.202.113.56.25: P 178:1638(1460) ack 454 win 8760 (DF)
03:54:50.712903 193.166.0.145.45125 > 199.202.113.56.25: P 178:1638(1460) ack 454 win 8760 (DF)
03:55:07.748463 193.166.0.145.45125 > 199.202.113.56.25: P 178:1638(1460) ack 454 win 8760 (DF)
03:55:41.799678 193.166.0.145.45125 > 199.202.113.56.25: P 178:1638(1460) ack 454 win 8760 (DF)
03:56:37.061825 199.202.113.56.25 > 193.166.0.145.45125: F 454:454(0) ack 178 win 32696 (DF)
03:56:37.333148 193.166.0.145.45125 > 199.202.113.56.25: . ack 455 win 8760 (DF)
03:56:37.343028 193.166.0.145.45125 > 199.202.113.56.25: F 2211:2211(0) ack 455 win 8760 (DF)
03:56:37.343057 199.202.113.56.25 > 193.166.0.145.45125: R 1150743950:1150743950(0) win 0 (DF)
04:00:17.335614 193.166.0.145.45423 > 199.202.113.56.25: S 1552518742:1552518742(0) win 8760 <mss 1460> (DF)
04:00:17.337169 199.202.113.56.25 > 193.166.0.145.45423: S 1523294078:1523294078(0) ack 1552518743 win 32120 <mss 1460> (DF)
04:00:17.615467 193.166.0.145.45423 > 199.202.113.56.25: . ack 1 win 8760 (DF)
04:00:17.866204 199.202.113.56.32789 > 193.166.0.145.113: S 1535538624:1535538624(0) win 31856 <mss 1460,sackOK,timestamp 186574 0,nop,wscale 0> (DF)
04:00:18.145330 193.166.0.145.113 > 199.202.113.56.32789: R 0:0(0) ack 1535538625 win 0 (DF)
04:00:18.148499 199.202.113.56.25 > 193.166.0.145.45423: P 1:88(87) ack 1 win 32696 (DF)
04:00:18.435287 193.166.0.145.45423 > 199.202.113.56.25: . ack 88 win 8760 (DF)
04:00:18.445249 193.166.0.145.45423 > 199.202.113.56.25: P 1:20(19) ack 88 win 8760 (DF)
04:00:18.445324 199.202.113.56.25 > 193.166.0.145.45423: . ack 20 win 32696 (DF)
04:00:18.445533 199.202.113.56.25 > 193.166.0.145.45423: P 88:281(193) ack 20 win 32696 (DF)
04:00:18.755303 193.166.0.145.45423 > 199.202.113.56.25: P 20:102(82) ack 281 win 8760 (DF)
04:00:18.773439 199.202.113.56.25 > 193.166.0.145.45423: . ack 102 win 32696 (DF)
04:00:18.887354 199.202.113.56.25 > 193.166.0.145.45423: P 281:352(71) ack 102 win 32696 (DF)
04:00:19.165191 193.166.0.145.45423 > 199.202.113.56.25: P 102:172(70) ack 352 win 8760 (DF)
04:00:19.203449 199.202.113.56.25 > 193.166.0.145.45423: . ack 172 win 32696 (DF)
04:00:19.288701 199.202.113.56.25 > 193.166.0.145.45423: P 352:404(52) ack 172 win 32696 (DF)
04:00:19.564954 193.166.0.145.45423 > 199.202.113.56.25: P 172:178(6) ack 404 win 8760 (DF)
04:00:19.565493 199.202.113.56.25 > 193.166.0.145.45423: P 404:454(50) ack 178 win 32696 (DF)
04:00:19.956977 193.166.0.145.45423 > 199.202.113.56.25: . 178:1638(1460) ack 454 win 8760 (DF)
04:00:19.985655 193.166.0.145.45423 > 199.202.113.56.25: P 1638:2211(573) ack 454 win 8760 (DF)
04:00:19.985735 199.202.113.56.25 > 193.166.0.145.45423: . ack 178 win 32696 (DF)
04:00:24.235819 193.166.0.145.45423 > 199.202.113.56.25: P 178:1638(1460) ack 454 win 8760 (DF)
04:00:32.773670 193.166.0.145.45423 > 199.202.113.56.25: P 178:1638(1460) ack 454 win 8760 (DF)
04:00:49.919030 193.166.0.145.45423 > 199.202.113.56.25: P 178:1638(1460) ack 454 win 8760 (DF)
04:01:24.180135 193.166.0.145.45423 > 199.202.113.56.25: P 178:1638(1460) ack 454 win 8760 (DF)
04:02:32.722193 193.166.0.145.45423 > 199.202.113.56.25: P 178:1638(1460) ack 454 win 8760 (DF)
04:04:49.806186 193.166.0.145.45423 > 199.202.113.56.25: P 178:1638(1460) ack 454 win 8760 (DF)
-------------------------------------------------------------
tcpdump of hung telnet connection between my box (199.202.113.56)
running 2.3.48pre3, and the next box on this LAN (199.202.113.33)
which runs 2.2.15pre7.  Hang occurs when i type
"ls -alF --colour|less -r"
tcpdump: listening on eth0
05:51:00.966561 199.202.113.56.32781 > 199.202.113.33.23: P 4215608866:4215608867(1) ack 4211925572 win 32616 <nop,nop,timestamp 26690 96810190> (DF) [tos 0x10]
05:51:00.967641 199.202.113.33.23 > 199.202.113.56.32781: P 1:2(1) ack 1 win 32120 <nop,nop,timestamp 96811104 26690> (DF)
05:51:00.967676 199.202.113.56.32781 > 199.202.113.33.23: . ack 2 win 32616 <nop,nop,timestamp 26690 96811104> (DF) [tos 0x10]
05:51:01.094775 199.202.113.56.32781 > 199.202.113.33.23: P 1:2(1) ack 2 win 32616 <nop,nop,timestamp 26703 96811104> (DF) [tos 0x10]
05:51:01.095637 199.202.113.33.23 > 199.202.113.56.32781: P 2:3(1) ack 2 win 32120 <nop,nop,timestamp 96811117 26703> (DF)
05:51:01.123829 199.202.113.56.32781 > 199.202.113.33.23: . ack 3 win 32616 <nop,nop,timestamp 26706 96811117> (DF) [tos 0x10]
05:51:01.450543 199.202.113.56.32781 > 199.202.113.33.23: P 2:4(2) ack 3 win 32616 <nop,nop,timestamp 26738 96811117> (DF) [tos 0x10]
05:51:01.451548 199.202.113.33.23 > 199.202.113.56.32781: P 3:5(2) ack 4 win 32120 <nop,nop,timestamp 96811152 26738> (DF)
05:51:01.463843 199.202.113.56.32781 > 199.202.113.33.23: . ack 5 win 32616 <nop,nop,timestamp 26740 96811152> (DF) [tos 0x10]
05:51:01.506845 199.202.113.33.23 > 199.202.113.56.32781: P 5:30(25) ack 4 win 32120 <nop,nop,timestamp 96811158 26740> (DF)
05:51:01.506859 199.202.113.56.32781 > 199.202.113.33.23: . ack 30 win 32616 <nop,nop,timestamp 26744 96811158> (DF) [tos 0x10]
05:51:01.513977 199.202.113.33.23 > 199.202.113.56.32781: P 30:1014(984) ack 4 win 32120 <nop,nop,timestamp 96811158 26744> (DF)
05:51:01.519367 199.202.113.33.23 > 199.202.113.56.32781: P 1014:2050(1036) ack 4 win 32120 <nop,nop,timestamp 96811159 26744> (DF)
05:51:01.704509 199.202.113.33.23 > 199.202.113.56.32781: P 30:1014(984) ack 4 win 32120 <nop,nop,timestamp 96811178 26744> (DF)
05:51:02.104375 199.202.113.33.23 > 199.202.113.56.32781: P 30:1014(984) ack 4 win 32120 <nop,nop,timestamp 96811218 26744> (DF)
05:51:02.904175 199.202.113.33.23 > 199.202.113.56.32781: P 30:1014(984) ack 4 win 32120 <nop,nop,timestamp 96811298 26744> (DF)
05:51:04.503764 199.202.113.33.23 > 199.202.113.56.32781: P 30:1014(984) ack 4 win 32120 <nop,nop,timestamp 96811458 26744> (DF)
05:51:07.702923 199.202.113.33.23 > 199.202.113.56.32781: P 30:1014(984) ack 4 win 32120 <nop,nop,timestamp 96811778 26744> (DF)
05:51:12.911903 199.202.113.56.32781 > 199.202.113.33.23: P 4:6(2) ack 30 win 32616 <nop,nop,timestamp 27884 96811778> (DF) [tos 0x10]
05:51:12.930363 199.202.113.33.23 > 199.202.113.56.32781: . ack 6 win 32120 <nop,nop,timestamp 96812301 27884> (DF)
05:51:13.097327 199.202.113.56.32781 > 199.202.113.33.23: P 6:8(2) ack 30 win 32616 <nop,nop,timestamp 27903 96811778> (DF) [tos 0x10]
05:51:13.110312 199.202.113.33.23 > 199.202.113.56.32781: . ack 8 win 32120 <nop,nop,timestamp 96812319 27903> (DF)
05:51:13.273203 199.202.113.56.32781 > 199.202.113.33.23: P 8:10(2) ack 30 win 32616 <nop,nop,timestamp 27920 96811778> (DF) [tos 0x10]
05:51:13.290263 199.202.113.33.23 > 199.202.113.56.32781: . ack 10 win 32120 <nop,nop,timestamp 96812337 27920> (DF)
05:51:14.101239 199.202.113.33.23 > 199.202.113.56.32781: P 30:1014(984) ack 10 win 32120 <nop,nop,timestamp 96812418 27920> (DF)
05:51:16.890529 199.202.113.33.23 > 199.202.113.56.32794: P 3656417764:3656418748(984) ack 3663413502 win 32120 <nop,nop,timestamp 96812697 800030> (DF)
05:51:22.092168 199.202.113.56.32781 > 199.202.113.33.23: F 10:10(0) ack 30 win 32616 <nop,nop,timestamp 28802 96812418> (DF) [tos 0x10]
05:51:22.092626 199.202.113.33.23 > 199.202.113.56.32781: . ack 11 win 32120 <nop,nop,timestamp 96813217 28802> (DF)
05:51:22.095730 199.202.113.33.23 > 199.202.113.56.32781: FP 2050:2567(517) ack 11 win 32120 <nop,nop,timestamp 96813217 28802> (DF)
05:51:22.095770 199.202.113.56.32781 > 199.202.113.33.23: R 4215608877:4215608877(0) win 0 (DF)
----------------------------------------------------------------
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/