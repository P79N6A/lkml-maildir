Date: Wed, 26 Feb 2003 10:56:34 -0500
From: jpiszcz <>
Subject: Re: Question about DMA and cd burning.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/2/26/113

Yes, hdparm -d1 /dev/hd{b,c} did not work on older kernels for me, but 
2.4.20 appears to work successfully.
However, second question, both of my Plextors support UDMA2, and both 
are on 80 PIN/IDE cables, when I enabled -d1 -X66, the kernel, it 
crashed the kernel.
Feb 26 10:30:55 war kernel: hdc: drive_cmd: status=0x41 { DriveReady Error }
Feb 26 10:30:55 war kernel: hdc: drive_cmd: error=0x04
Feb 26 10:30:59 war kernel: hdc: drive_cmd: status=0x41 { DriveReady Error }
Feb 26 10:30:59 war kernel: hdc: drive_cmd: error=0x04
Feb 26 10:31:02 war kernel: hdc: drive_cmd: status=0x41 { DriveReady Error }
Feb 26 10:31:02 war kernel: hdc: drive_cmd: error=0x04
Feb 26 10:32:22 war kernel: scsi : aborting command due to timeout : pid 
11206, scsi1, channel 0, id 1, lun 0 Read (10) 00 00 00 00 00 00 00 02 00
Feb 26 10:32:22 war kernel: hdc: timeout waiting for DMA
Feb 26 10:32:22 war kernel: ide_dmaproc: chipset supported 
ide_dma_timeout func only: 14
Feb 26 10:32:22 war kernel: hdc: status timeout: status=0xd8 { Busy }
Feb 26 10:32:22 war kernel: hdc: drive not ready for command
After this, X froze and the keyboard lights were blinking, I could not 
change to console or anything to see the kernel messages.
1] Why does the kernel turn DMA off by default?
     config: 
http://installkernel.tripod.com/config-2.4.20.txt
2] Why does the kernel crash when I try to enable UDMA2 on the cdrw?
vishwas@india.hp.com wrote:
> use: hdparam -d1 /dev/<hdX>
>
> to enable DMA, if it still says it cannot enable DMA.
> try enabling the xfermode,which gives me the same
> performace as DMA enabled.
>
> hdparam -X<num> /dev/<hdX>
>     put num greater than 32..like 33,34 etc  (for multiword DMA)
>     OR  greater that 64....like 65 66 etc.   (for UltraDMA)
>
> -vvp
>
>
>
>
>
>
>
>
>
>
>
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/