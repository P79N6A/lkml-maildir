Date: Wed, 8 Dec 2004 09:02:16 -0800
From: Chris Wright <>
Subject: Re: oops in proc_pid_stat() on task->real_parent?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/12/8/133

* Andrew Morton (akpm@osdl.org) wrote:
> Chris Wright <chrisw@osdl.org> wrote:
> >
> > * Andrew Morton (akpm@osdl.org) wrote:
> > > yup, we fixed that one.
> > 
> > I thought the same thing, but this oops is from proc_pid_stat, not
> > proc_pid_status.  The code is now in do_task_stat(), and the oops is
> > within the orignal tasklist lock (instead of dropping and reaquiring the
> > lock).  So, might be fixed, but if so, I think for a different reason.
> > 
> 
> Ah, thanks.
> 
> I'm not sure that the holding of tasklist_lock is going to save us there. 
> But then, Manfred recently did an audit, so I'm probably missing something.
> 
> Manfred, should we do this?
Yeah, I wondered the same.  Although I don't see why pid_alive() check
would be useful if it's the real_parent that's gone.  Dave mentioned
that he's got slab poisoning enabled, and the real_parent pointer was
valid (i.e. not 6b6b6b6b).  So wouldn't tasklist_lock serialize against
exiting real_parent?
thanks,
-chris
-- 
Linux Security Modules     
http://lsm.immunix.org
     
http://lsm.bkbits.net
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/