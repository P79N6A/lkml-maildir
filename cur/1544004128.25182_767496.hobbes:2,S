Date: Tue, 11 Nov 2008 15:33:27 +0300
From: Alexey Dobriyan <>
Subject: Re: [patch] add /proc/pid/stack to dump task's stack trace
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/11/11/138

On Tue, Nov 11, 2008 at 01:25:36PM +0100, Marcin Slusarz wrote:
> On Fri, Nov 07, 2008 at 10:03:04AM +0100, Ingo Molnar wrote:
> > 
> > btw., the feature works beautifully:
> > 
> > task sleeping/blocked:
> > 
> >  # cat /proc/1/stack
> >  [<ffffffff802bfe75>] do_select+0x51a/0x582
> >  [<ffffffff802c0059>] core_sys_select+0x17c/0x218
> >  [<ffffffff802c0344>] sys_select+0x99/0xc1
> >  [<ffffffff8020c23b>] system_call_fastpath+0x16/0x1b
> >  [<ffffffffffffffff>] 0xffffffffffffffff
> > 
> > task running on this CPU:
> > 
> >  # cat /proc/self/stack
> >  [<ffffffff80216f79>] save_stack_trace_tsk+0x26/0x44
> >  [<ffffffff802f59a5>] proc_pid_stack+0x6e/0xd3
> >  [<ffffffff802f6da3>] proc_info_read+0x68/0xba
> >  [<ffffffff802b2f17>] vfs_read+0xa9/0xe3
> >  [<ffffffff802b301f>] sys_read+0x4c/0x73
> >  [<ffffffff8020c23b>] system_call_fastpath+0x16/0x1b
> >  [<ffffffffffffffff>] 0xffffffffffffffff
> > 
> > task running on another CPU in user-space:
> > 
> >  # cat /proc/18579/stack
> >  [<ffffffffffffffff>] 0xffffffffffffffff
> 
> so this file provides view of _kernel_ stack only?
Of course!
> shouldn't it be named kernel-stack then?
> 
> > task running on another CPU in kernel-space:
> > 
> >  # cat /proc/18579/stack
> >  [<ffffffff8026f111>] audit_syscall_exit+0x9c/0xed
> >  [<ffffffff80214b49>] syscall_trace_leave+0x94/0xbb
> >  [<ffffffffffffffff>] 0xffffffffffffffff