Date: Thu, 14 Feb 2008 00:14:04 -0500
From: Kyle McMartin <>
Subject: Re: parisc compile error
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/2/14/5

On Wed, Feb 13, 2008 at 07:49:12AM +0100, rubisher wrote:
> --- include/asm-parisc/pgtable.h.Orig	2007-10-22 08:19:20.000000000 +0000
> +++ include/asm-parisc/pgtable.h	2008-02-12 16:28:36.000000000 +0000
> +extern  void *vmalloc_start;
> +#define PCXL_DMA_MAP_SIZE   (8*1024*1024)
> +#define VMALLOC_START   ((unsigned long)vmalloc_start)
> +/* this is a fixmap remnant, see fixmap.h */
> +#define VMALLOC_END	(KERNEL_MAP_END)
> +
i moved this to fixmap.h, since i think it makes more sense there,
really.
> static inline void pte_free_kernel(struct mm_struct *mm, struct page *pte)
> {
>         pgtable_page_dtor(pte);
>         pte_free_kernel(page_address((pte));
> }
> 
this is a stunning bit of ignorant patching courtesy of
2f569afd9ced9ebec9a6eb3dbf6f83429be0a7b4 which:
-#define pte_free(mm, page) pte_free_kernel(page_address(page))
+static inline void pte_free_kernel(struct mm_struct *mm, struct page
*pte)
+{
+       pgtable_page_dtor(pte);
+       pte_free_kernel(page_address((pte));
+}
only wrong on *two* counts.
anyway, fixed this up. sigh.