Date: Fri, 05 May 2006 10:22:28 -0500
From: Dave Kleikamp <>
Subject: Re: [PATCH 10/13: eCryptfs] Mmap operations
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/5/5/80

On Thu, 2006-05-04 at 22:43 +0100, David Howells wrote:
> Pekka Enberg <penberg@cs.helsinki.fi> wrote:
> 
> > > +               rc = mapping->a_ops->readpage(file, page);
> > 
> > What's the purpose of this second read?
> 
> When writing CacheFiles, I noticed that ext3 would occasionally unlock a page
> that had neither PG_uptodate nor PG_error set, and so I had to force another
> readpage() on it.
I understand this comes from the FiST package.  In that code, there is a
comment in one of these functions explaining the second read.  It would
be nice to have that comment in here too:
   /*
    * call readpage() again if we returned from wait_on_page with a
    * page that's not up-to-date; that can happen when a partial
    * page has a few buffers which are ok, but not the whole
    * page.
    */
I'm a bit surprised that this could happen.
Shaggy
-- 
David Kleikamp
IBM Linux Technology Center
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/