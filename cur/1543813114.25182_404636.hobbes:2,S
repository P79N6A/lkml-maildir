Date: Wed, 8 Mar 2006 16:55:00 -0500 (EST)
From: Alan Stern <>
Subject: Re: [linux-usb-devel] Re: Fw: Re: oops in choose_configuration()
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/3/8/283

On Wed, 8 Mar 2006, Andrew Morton wrote:
> Alan Stern <stern@rowland.harvard.edu> wrote:
> >
> > What about those scheduler changes you found through the bisection search?  
> >  Any word on that?
> 
> Ingo's gone over them pretty closely.  The current theory is that the CPU
> scheduler change alters timing sufficiently for the bug to bite.
> 
> The machine passes memtest86.
> 
> Ingo's suspecting stack corruption.  Do you know whether USB anywhere does
> DMA into automatically-allocated storage (ie: kernel stacks)?
We try to avoid doing that, but such things have been known to creep into
the sources from time to time.  We fix them whenever they surface.  I'm
pretty sure that usbcore and usb-storage are clean in this respect, and
probably usbhid is also (I haven't gone through it to check personally;  
presumably others have).  The only drivers listed in your
/proc/bus/usb/devices were hub and usbhid, and the ALPS UGX device didn't
have any drivers bound.
Have you tried running your test with the USB devices unplugged?  That 
won't prevent usb_choose_configuration from getting called (since it's 
used for the virtual root hubs exported by the host controller drivers) 
but it should make everything more deterministic.
Alan Stern
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/