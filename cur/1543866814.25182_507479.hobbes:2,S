Date: Sun, 11 Feb 2007 18:37:58 +0100
From: Jiri Slaby <>
Subject: Re: KVM oops: killing interrupt handler
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/2/11/95

Avi Kivity napsal(a):
> Jiri Slaby wrote:
>> Avi Kivity napsal(a):
>>> kvm suspend/resume support is only present in -mm (what's more, I 
>>> don't think in any released -mm).  A workaround is to rmmod kvm_intel 
>>> before suspending.
>>
>> BTW. will kvm-13's external module work?
>>
> 
> Try and report back :)
Yeah :). But while installing I revealed one problem.
I had to do this in kernel/Makefile:
         $(MAKE) -C $(KERNELDIR) M=`pwd` "$$@"
  install:
-       mkdir -p $(DESTDIR)/$(INSTALLDIR)
-       cp *.ko $(DESTDIR)/$(INSTALLDIR)
-       /sbin/depmod -a
+       $(MAKE) -C $(KERNELDIR) M=`pwd` modules_install
  tmpspec = .tmp.kvm-kmod.spec
  RPMDIR = $$(pwd)/../RPMS
Otherwise it installs modules into build directory, which is not usable too much ;):
kernel# make install
mkdir -p //home/xpapiez/install/linux-2.6.19
cp *.ko //home/xpapiez/install/linux-2.6.19
/sbin/depmod -a
I used this configure params:
./configure --qemu-cc=gcc --prefix=/usr/local/kvm/ --disable-gcc-check
Now, he's going to test it...
thanks,
-- 
http://www.fi.muni.cz/~xslaby/
            Jiri Slaby
faculty of informatics, masaryk university, brno, cz
e-mail: jirislaby gmail com, gpg pubkey fingerprint:
B674 9967 0407 CE62 ACC8  22A0 32CC 55C3 39D4 7A7E
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/