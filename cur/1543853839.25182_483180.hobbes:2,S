Date: Thu, 16 Nov 2006 13:32:09 -0800
From: Stephane Eranian <>
Subject: Re: [discuss] Re: 2.6.19-rc5: known regressions (v3)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/11/16/220

Hello,
On Thu, Nov 16, 2006 at 10:34:56AM -0500, William Cohen wrote:
> 
> Is this going to require sharing the nmi interrupt and knowing which perfcounter 
> register triggered the interrupt to get the correct action?  Currently the 
> oprofile interrupt handler assumes any performance monitoring counter it sees 
> overflowing is something it should count.
> 
Yes, you need to share the NMI interrupt. In my next perfmon patch you will
see that this can be made to work. You just need to add one check in the 
NMI handler callback: is it for me or else try perfmon? Perfmon can auto-detect
if NMI is active and give up the right counter (there is an API to check
what is reserved). The interface propagates the list of available counters
to apps which then pass the information onto libpfm which tries to use
the remaining counters.
-- 
-Stephane
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/