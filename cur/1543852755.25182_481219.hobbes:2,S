Date: Fri, 10 Nov 2006 08:56:00 -0500
From: Jeff Garzik <>
Subject: Re: [discuss] Re: 2.6.19-rc4: known unfixed regressions (v3)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/11/10/158

Linus Torvalds wrote:
> We really should stop using MMCONFIG entirely, until we have a 
> per-southbridge true knowledge of what the real decoding is. The BIOS 
> tables for this are simply too damn unreliable.
FWIW:  MMCONFIG is required for PCI domain support (or "PCI segments" as 
ACPI calls them).  Only a few mass market OEM boxes exist that need this 
-- and they are all pretty new (Opteron multi-core) -- but more are coming.
I have a patch in -mm that works for this.  Without the patch, my 
sata_mv card and the machine's built-in MPT-Fusion do not appear at all 
in PCI bus scans (nor do the associated hard drives) on this production 
HP box.  So far these machines are rare, /usually/ with a BIOS switch to 
turn off PCI domains.
This says nothing about BIOS table reliability, of course.  I agree that 
MMCONFIG probing is highly unreliable at present.  Whitelisting "<2007" 
systems like Andi proposed may be the only option in some cases.
	Jeff
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/