Date: Mon, 26 Jan 2009 01:02:30 +0530
From: Jaswinder Singh Rajput <>
Subject: Re: building custom module on 2.6.28 fails
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2009/1/25/88

On Mon, Jan 26, 2009 at 12:48 AM, Sam Ravnborg <sam@ravnborg.org> wrote:
> On Sun, Jan 25, 2009 at 07:57:37PM +0530, Jaswinder Singh Rajput wrote:
>> On Sun, 2009-01-25 at 14:47 +0100, Sam Ravnborg wrote:
>> > On Sun, Jan 25, 2009 at 04:49:16PM +0530, Satish Eerpini wrote:
>> > > >> It seems you run "make clean" or "make distclean" in your kernel sources
>> > > >>
>> > > >> run "make prepare" in your kernel sources then you will not get this
>> > > >> error.
>> > > >
>> > >
>> > > I ran make clean and then make prepare but it gives an error saying
>> > > "no such file or directory : modpost ", ....
>> > > Then i ran make( in the kernel source tree) , and terminated it after
>> > > a few files were compiled and then again tried to compile my module,
>> > > this time it worked without any errors, ....... any particular reason
>> > > for this ??
>> > We are currently lacking a dependency on "scripts" so doing:
>> > make scripts
>> > make prepare
>> > is needed today.
>>
>> As per makefile:
>> # make clean     Delete most generated files
>> #                Leave enough to build external modules
>>
>> So is this OK to delete include/linux/bounds.h by 'make clean'.
> No - only mrproper and distclean should delete it.
>
[jsr@jaswinder linux-2.6-tip]$ ls -l include/linux/bo*
-rw-rw-r-- 1 jsr jsr 4848 2008-08-21 19:55 include/linux/bootmem.h
-rw-rw-r-- 1 jsr jsr  224 2008-12-08 11:35 include/linux/bottom_half.h
-rw-rw-r-- 1 jsr jsr  224 2009-01-17 20:31 include/linux/bounds.h
[jsr@jaswinder linux-2.6-tip]$ make clean
  CLEAN   arch/x86/boot/compressed
  CLEAN   arch/x86/boot
  CLEAN   /home/jsr/jaswinder-git/linux-2.6-tip
  CLEAN   arch/x86/kernel/acpi/realmode
  CLEAN   arch/x86/kernel/cpu
  CLEAN   arch/x86/kernel
  CLEAN   arch/x86/vdso
  CLEAN   drivers/char
  CLEAN   drivers/scsi/aic7xxx
  CLEAN   drivers/video/logo
  CLEAN   firmware
  CLEAN   init
  CLEAN   kernel
  CLEAN   lib
  CLEAN   usr
  CLEAN   .tmp_versions
  CLEAN   vmlinux System.map .tmp_kallsyms0.o .tmp_kallsyms0.S
.tmp_kallsyms1.o .tmp_kallsyms1.S .tmp_kallsyms2.o .tmp_kallsyms2.S
.tmp_kallsyms3.o .tmp_kallsyms3.S .tmp_vmlinux0 .tmp_vmlinux0.stripped
.tmp_vmlinux1 .tmp_vmlinux1.stripped .tmp_vmlinux2
.tmp_vmlinux2.stripped .tmp_vmlinux3 .tmp_vmlinux3.stripped
.tmp_System.map
[jsr@jaswinder linux-2.6-tip]$ ls -l include/linux/bo*
-rw-rw-r-- 1 jsr jsr 4848 2008-08-21 19:55 include/linux/bootmem.h
-rw-rw-r-- 1 jsr jsr  224 2008-12-08 11:35 include/linux/bottom_half.h
[jsr@jaswinder linux-2.6-tip]$
--
JSR