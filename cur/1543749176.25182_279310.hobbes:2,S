Date: Wed, 15 Dec 2004 15:15:51 -0800
From: Jesse Barnes <>
Subject: Re: [PATCH] add legacy I/O and memory access routines to /proc/bus/pci API
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/12/15/214

On Wednesday, December 15, 2004 1:03 pm, Andreas Dilger wrote:
> On Dec 15, 2004  09:27 -0800, Jesse Barnes wrote:
> > +write
> > +  Legacy I/O port space reads and writes must also be to a file
> > +  position >64k--the kernel will route them to the target device.
>
> Shouldn't that be < 64k based on the description of lseek?
Err.. yes
> > +lseek
> > +  Can be used to set the current file position.  Note that the file
> > +  size is limited to 64k as that's how big legacy I/O space is.
> >
> > +ioctl
> > +  Note that not all architectures support the *_MMAP_* or *_RW_* ioctl
> > +  commands.  If they're not supported, ioctl will return -EINVAL.
>
> Shouldn't they return -ENOTTY?  That indicates to the caller that the
> ioctl isn't handled, vs -EINVAL which indicates bad value being passed
> (e.g. bad write size).
Maybe, but that's not how /proc/bus/pci behaves right now...
Jesse
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/