Date: Mon, 28 Jun 1999 11:03:03 -0700 (PDT)
From: Dean Gaudet <>
Subject: Re: Apache performance: Run queue proportional to number of connections?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/6/28/157

> > >created something that has massive concurrency in the networking path in
> > >SMP.  4 interfaces all constantly raising interrupts kills us dead.  all
> > >the hacking of the scheduler and vm and such are just noise when compared
> > >to this bottleneck.
I think I mentioned this a long time ago... at high speeds, various NT
network drivers switch from interrupt-driven to polling.  The interrupts
just kill you after some point... and it's pointless to take them all,
when you could just take a clock interrupt and go fetch packets. 
Another thing to think about -- is ways to have CPU/network card affinity. 
You don't want to be playing L1/2 cache ping-pong on the RAM you use to
load the packets off the card.  You hopefully want to use the packets in
the CPU that you first read them on.  The way we're restructuring apache
will let us plug in whatever extra syscall goop is needed to help this. 
Dean
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/