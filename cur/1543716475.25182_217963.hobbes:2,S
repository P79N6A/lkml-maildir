Date: Mon, 3 May 2004 13:58:37 +0200
From: Jan Kara <>
Subject: Deadlock problems
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/5/3/31

  Hi Andrew!
  I've found hard to fix problem causing deadlock - call path is
generally following:
  some operation -> quota code -> read/write quota -> vfs -> needs a page ->
shrink caches -> free inodes -> free quota -> Ouch... (we need to acquire
some lock which is already held by the quota code)
   I hope I can fix the problems with quota locks but there's also a
problem that transaction can be already started when we want to free
some inodes etc. So I'd like to ask: Is there somewhere documented what
can/cannot hold a caller using GFP_FS?
  One a bit hacky solution would also be to clear GFP_FS from i_mapping
of quotafile inode. Do you think that is a reasonable solution?
								Honza
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/