Date: 30 May 2006 00:51:28 +0200
From: Christer Weinigel <>
Subject: Re: [v4l-dvb-maintainer] Re: Stradis driver conflicts with all other SAA7146 drivers
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/5/29/236

Michael Hunold <hunold@linuxtv.org> writes:
> Up to now, this problem did not show up so drastically. On the one hand,
> just a few dozen people use the MXB, a handful use the hexium_orion and
> the dpc7146 is really rare. All these users then simply tweaked their
> environment so that it works for the next boot.
> 
> In order to fix this, these drivers should not be autoloaded because
> there is no sane way to autodetect these cards. In theory, you could do
> an i2c bus scan and check if all devices are there. But since MXB and
> dpc7146 both use the saa7111 video decoder on address 0x11 IIRC, the
> dpc7146 will grab any MXB device if loaded before.
Ouch.   Oh well, that means that those cards will need some kind of
manual intervention.
> Distributions probably should keep these drivers from being autoloaded.
I'm not too sure of how the module autoloading works, but would it
help just remove the line with:
    MODULE_DEVICE_TABLE(pci, pci_tbl);
from those drivers?  If I understand correctly, the contens of
MODULE_DEVICE_TABLE is what ends up in modules.pcimap.  That should
fix it for most distributions and the owners of those cards have to
add a manual modprobe command to their rc.local.
  /Christer
-- 
"Just how much can I get away with and still go to heaven?"
Freelance consultant specializing in device driver programming for Linux 
Christer Weinigel <christer@weinigel.se>  
http://www.weinigel.se
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/