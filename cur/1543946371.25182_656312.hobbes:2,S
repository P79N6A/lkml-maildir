Date: Tue, 19 Feb 2008 19:44:42 +0100
From: Segher Boessenkool <>
Subject: Re: [patch 07/13] Initialize per cpu lowcores on cpu hotplug.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/2/19/322

>>>> +	/*
>>>> +	 * Only need to copy the first 512 bytes from address 0. But since
>>>> +	 * the compiler emits a warning if src == NULL for memcpy use 
>>>> copy_page
>>>> +	 * instead. Copies more than needed but this code is not 
>>>> performance
>>>> +	 * critical.
>>>> +	 */
>>>> +	copy_page(lowcore, &S390_lowcore);
>>>
>>> Boah, workaround alert. Why do you not fix the compiler?
>>
>> We need to copy from address 0 (that's where the lowcore resides). 
>> But gcc
>> insists to complain if memcpy is used with src == NULL.. Now what?
>
> Erm sorry, misread your question. Usually it's a bug to use memcpy with
> src == NULL. In this case it's ok. So I think it's perfectly ok if gcc
> emits a warning.
> If you know of a better way to get around this please let me know.
-ffreestanding or -Wno-nonnull?
Segher