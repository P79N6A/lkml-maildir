Date: Sun, 12 Dec 1999 16:58:41 +0000 (GMT)
From: Alan Cox <>
Subject: Re: PATCH: boot-time DHCP
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/12/12/65

> >Doing it by a small user mode program in a initrd is much more sane.
> >Near all modern distributions rely on initrd now anyways.
> >
> Please don't go that way, what about the following scenario:
> diskless machine with bootrom, requests ip with bootp, gets kenrel image
> with tftp boots kernelimage. Now where should the initrd come from, from
> the server and how does it get to the server if it doesn't have an ip?
> And replacing 100+ bootroms to add initrd knowledge is NOT an option.
You can compile the initrd into the kernel image. The PPC folks were doing
that at one point. Its not in the standard kernel core but it is very 
very easy to do
(Instead of passing the initrd address in you do
struct my_initrd = {
#include "initrd.hex"
}
(and page align/fill it)
)
> 
> I also know cases with a kernel image inside the bootrom.
> 
> So please don't remove bootp, rarp on the other hand is obsolote imho.
> 
> With diskless root-over-nfs setups which I happen to use a lott for
> embedded systems and the like, having in kernel bootp for getting an ip
> and finding the server for example is a must.
> 
> I don't understand why people would want dhcp however since every dhcp
> server can server bootp too (yes even NT) as long as you use static ip's
> which is preferable anyways.
> 
> Regards,
> 
> Hans
> 
> -
> To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
> the body of a message to majordomo@vger.rutgers.edu
> Please read the FAQ at 
http://www.tux.org/lkml/
> 
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/