Date: Mon, 18 Feb 2008 11:54:41 +0100
From: Pavel Machek <>
Subject: Re: WARN_ON(): proc_dir_entry 'rtc' already registered
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/2/18/143

Hi!
> > I'm getting this during bootup:
> > 
> > PM: Adding info for No Bus:event6
> > PM: Adding info for No Bus:uinput
> > PM: Adding info for No Bus:rtc0
> > proc_dir_entry 'rtc' already registered
> > Pid: 1, comm: swapper Not tainted 2.6.25-rc1 #125
> >  ... deletia
> >  =======================
> > rtc_cmos 00:07: rtc core: registered rtc_cmos as rtc0
> > rtc0: alarms up to one month, y3k
> > PM: Adding info for platform:coretemp.0
> > PM: Adding info for No Bus:hwmon1
> > 
> > ... .config attached.
> 
> Which shows:
> 
>  CONFIG_GEN_RTC=y
>  CONFIG_GEN_RTC_X=y
> 
> Disable that, then those warnings will vanish.  (I'm told that
> having proc_register() return a fault code is off the table,
> much like impeachment.)
Ok.
> How to fix ... how about:  instead of just warning folk
> off such legacy RTC drivers [1] we just wrap them with
> an "if RTC_LIB != n" so this mistake won't be possible.
Yes, disabling bad configs in Kconfig seems like way to go.
									Pavel
-- 
(english) 
http://www.livejournal.com/~pavelmachek
(cesky, pictures) 
http://atrey.karlin.mff.cuni.cz/~pavel/picture/horses/blog.html