Date: Wed, 23 Jun 1999 15:02:15 +0300
From: Catalin Muresan <>
Subject: bonnie and 2.3.8
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/6/23/78

	Hi,
	doing a test run for bonnie on an 100M file, after a ton of `attempt
	to access beyond end of device' came a BUG:
Jun 23 10:23:17 Cnn kernel: attempt to access beyond end of device 
Jun 23 10:23:17 Cnn kernel: 03:01: rw=0, want=50462977, limit=2015968 
    ....
Jun 23 10:23:17 Cnn kernel: 03:01: rw=0, want=5, limit=2015968 
Jun 23 10:23:17 Cnn kernel: attempt to access beyond end of device 
    ....
Jun 23 10:23:18 Cnn kernel: attempt to access beyond end of device 
Jun 23 10:23:18 Cnn kernel: 03:01: rw=0, want=185207049, limit=2015, limit=2015968 
    ....
Jun 23 10:23:18 Cnn kernel: attempt to access beyond end of device 
Jun 23 10:23:18 Cnn kernel: 03, limit=2015968 
    ....
Jun 23 10:23:19 Cnn kernel: attempt to access beyond end, limit=2015968 
Jun 23 10:23:19 Cnn kernel: attempt to access beyond end of device 
    ....
Jun 23 10:23:20 Cnn kernel: attempt to access beyond end of device 
Jun 23 10:23:20 Cnn kernel: 03:01: rw=0, want=1532647769, limit=2015968 
Jun 23 10:23:20 Cnn kernel: 2015968 
    ....
Jun 23 10:23:46 Cnn kernel: attempt to access beyond end of device 
Jun 23 10:23:46 Cnn kernel: 03:01: rw=0, want=2138996093, limit=2015968 
Jun 23 10:23:46 Cnn kernel: attempt to access beyond end of device 
Jun 23 10:23:46 Cnn kernel: 03:01: rw=0, want=2138996093, limit=2015968 
Jun 23 10:23:46 Cnn kernel: attempt to access beyond end of device 
Jun 23 10:23:46 Cnn kernel: 03:01: rw=0, want=2138996093, limit=2015968 
Jun 23 10:23:46 Cnn kernel: attempt to access beyond end of device 
Jun 23 10:23:46 Cnn kernel: 03:01: rw=0, want=2138996093, limit=2015968 
Jun 23 10:24:23 Cnn kernel: attempt to access beyond end of device 
Jun 23 10:24:23 Cnn kernel: 03:01: rw=0, want=0, limit=2015968 
Jun 23 10:24:23 Cnn kernel: attempt to access beyond end of device 
Jun 23 10:24:23 Cnn kernel: 03:01: rw=0, want=0, limit=2015968 
Jun 23 10:24:23 Cnn kernel: kernel BUG at buffer.c:1235! 
Jun 23 10:24:23 Cnn kernel: invalid operand: 0000 
Jun 23 10:24:23 Cnn kernel: CPU:    0 
Jun 23 10:24:23 Cnn kernel: EIP:    0010:[end_buffer_io_async+228/304] 
Jun 23 10:24:23 Cnn kernel: EFLAGS: 00010292 
Jun 23 10:24:23 Cnn kernel: eax: 0000001d   ebx: 00000000   ecx: c01ada28   edx: c0c42000 
Jun 23 10:24:23 Cnn kernel: esi: c0273218   edi: c16e4060   ebp: c1fb3e74   esp: c1fb3e2c 
Jun 23 10:24:23 Cnn kernel: ds: 0018   es: 0018   ss: 0018 
Jun 23 10:24:23 Cnn kernel: Process bonnie (pid: 917, process nr: 22, stackpage=c1fb3000) 
Jun 23 10:24:23 Cnn kernel: Stack: 000004d3 c01b5440 c16e4060 00000000 c0167ad1 c16e4060 00000000 00000001  
Jun 23 10:24:23 Cnn kernel:        c1fb3ed4 00000004 00000002 00000286 00000003 0000000c 000000ff c0125d4d  
Jun 23 10:24:23 Cnn kernel:        ffffffff fffffffe 00000003 c0167c0d 00000003 00000000 c16e4060 c16e40c0  
Jun 23 10:24:23 Cnn kernel: Call Trace: [make_request+1141/1152] [__brelse+85/104] [ll_rw_block+305/400] [block_read_full_page+393/480] [block_read_full_page+393/480] [try_to_read_ahead+129/176] [try_to_read_ahead+153/176]  
Jun 23 10:24:23 Cnn kernel:        [do_generic_file_read+1571/2068] [generic_file_read+97/124] [file_read_actor+0/84] [sys_read+169/192] [system_call+52/56]  
Jun 23 10:24:23 Cnn kernel: Code: 0f 0b 83 c4 0c c7 46 34 00 00 00 00 0f b3 5e 18 19 c0 85 c0  
buffer.c
1233:        if (!PageError(page))
1234:                SetPageUptodate(page);
1235:        if (page->owner != -1)
1236:                PAGE_BUG(page);
1237:        page->owner = (int)current;
1238:        UnlockPage(page);
	I think the log was also corrupted by this bug becouse I can't
explain the strange messages logged by the kernel. (syslogd couldn't handle
the load ?).
	egcs-2.91.66 19990314/Linux (egcs-1.1.2 release), kernel 2.3.8
(tested on 2.3.6 and 2.2.10 and bonnie run ok)
-- 
 Catalin Muresan                     -o)                   CM1206-RIPE
 CODEC Electronic Products           /\\          voice: +40-64-432450
 Internet Services Department       _\_v          email: cata@codec.ro
-----------------------------------------------------------------------
  2:50pm  up 7 days,  2:11, 13 users,  load average: 0.20, 0.16, 0.16
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/