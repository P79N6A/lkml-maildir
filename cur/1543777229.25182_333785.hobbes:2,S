Date: Wed, 13 Jul 2005 11:04:56 -0600
From: Alex Williamson <>
Subject: Re: serial: 8250 fails to detect Exar XR16L2551 correctly
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/7/13/136

On Mon, 2005-07-11 at 15:17 -0600, Alex Williamson wrote:
>    No, I think this is a problem with the broken A2 UARTs getting
> confused in serial8250_set_sleep().  If I remove either UART_CAP_SLEEP
> or UART_CAP_EFR from the capabilities list for this UART, it behaves
> normally.  Also, just commenting out the UART_CAP_EFR chunks of
> set_sleep make it behave.  I'll ping Exar for more data.  Thanks,
Hi Russell,
   I don't know enough about the extended UART programming model, but I
notice that when UART_CAP_EFR and UART_CAP_SLEEP are set on a UART, we
set the UART_IERX_SLEEP bit in the UART_IER immediately after it's found
and configured.  It's from this point until we hit userspace and clear
that bit that output from the UART is garbled.  Are UARTs supposed to
output data with sleep mode enabled?  Are there known working configs
where a UART w/ EFR and SLEEP are able to be used as a serial console?
This system with the A2 rev ST16C2550 part that's not working is the
only one I have with a console UART w/ these capabilities.  Just trying
to make sure that there's not a latent bug that we enable a bad sleep
mode when the UART is being used for the console.  Thanks,
	Alex
-- 
Alex Williamson                             HP Linux & Open Source Lab
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/