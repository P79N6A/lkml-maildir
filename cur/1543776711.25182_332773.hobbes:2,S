Date: Sun, 10 Jul 2005 19:36:27 +0000
From: Olaf Hering <>
Subject: [PATCH 79/82] move KERNEL_VERSION from linux/version.h to linux/utsname.h
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/7/10/151

changing CONFIG_LOCALVERSION rebuilds too much, for no appearent reason.
KERNEL_VERSION is a static macro, it doesnt belong to a changing header file.
stuff which relies on UTS_RELEASE or LINUX_VERSION_CODE does already
include linux/version.h
some drivers use KERNEL_VERSION for different purposes
Signed-off-by: Olaf Hering <olh@suse.de>
Makefile                |    1 -
include/linux/utsname.h |    3 +++
2 files changed, 3 insertions(+), 1 deletion(-)
Index: linux-2.6.13-rc2-mm1/include/linux/utsname.h
===================================================================
--- linux-2.6.13-rc2-mm1.orig/include/linux/utsname.h
+++ linux-2.6.13-rc2-mm1/include/linux/utsname.h
@@ -33,4 +33,7 @@ struct new_utsname {
extern struct new_utsname system_utsname;
extern struct rw_semaphore uts_sem;
+
+#define KERNEL_VERSION(a,b,c) (((a) << 16) + ((b) << 8) + (c))
+
#endif
Index: linux-2.6.13-rc2-mm1/Makefile
===================================================================
--- linux-2.6.13-rc2-mm1.orig/Makefile
+++ linux-2.6.13-rc2-mm1/Makefile
@@ -836,7 +836,6 @@ define filechk_version.h
fi;  	(echo #define UTS_RELEASE "$(KERNELRELEASE)";  	  echo #define LINUX_VERSION_CODE `expr $(VERSION) \* 65536 + $(PATCHLEVEL) \* 256 + $(SUBLEVEL)`; -	 echo '#define KERNEL_VERSION(a,b,c) (((a) << 16) + ((b) << 8) + (c))';  	)
endef
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/