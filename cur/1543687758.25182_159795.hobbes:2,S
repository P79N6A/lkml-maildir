Date: Sat, 23 Aug 2003 17:13:36 +0200
From: Arno Wagner <>
Subject: BUG: 2.6.0-test3: dmesg buffer still too small
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/8/23/113

Hi,
I have been patching my kernels for too small dmesg 
buffer size (LOG_BUF_LEN in kernel/printk.c in 2.6.x)
for almost 2 years now. I have a single CPU Athlon 
system and get 25kB bootup messages. On other similar
machines I get 22kB, 16kB and 15kb, the two latter
without RAID
Since 2.6.x still seems to have the insufficient 16kB
buffer size ad default, I now consider this to be
a bug that would be best fixed now while 2.6.x is still
evolving.
Fix: 
a) Make it at least 32kB or better 64kB as
   default for standard PC architectures, i.e.
   set CONFIG_LOG_BUF_SHIFT to 16 in linux/kernel.h
   for these architectures.
or
b) Add a configuration option to set the buffer size
   in kernel configuration.
Doing both would probably be best.
I can continue patching my kernel manually (although it
is annoying and I have to katch printk.c to ignore 
CONFIG_LOG_BUF_SHIFT), but others might not have the 
expertise to do so. And showing all these nice messages 
to the user with no way to retrieve them afterwards is
probaly not a good idea...
Arno
-- 
Arno Wagner, Communication Systems Group, ETH Zuerich, wagner@tik.ee.ethz.ch
GnuPG:  ID: 1E25338F  FP: 0C30 5782 9D93 F785 E79C  0296 797F 6B50 1E25 338F
----
For every complex problem there is an answer that is clear, simple, 
and wrong. -- H L Mencken
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/