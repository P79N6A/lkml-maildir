Date: Tue, 18 Dec 2007 22:07:39 -0500
From: 	Valdis.Kletnieks@vt ...
Subject: Re: pnpacpi : exceeded the max number of IO resources
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/12/18/404

On Wed, 05 Dec 2007 13:39:04 MST, Bjorn Helgaas said:
> > -#define PNP_MAX_PORT		24
> > +#define PNP_MAX_PORT		128
> >  #define PNP_MAX_MEM		12
> >  #define PNP_MAX_IRQ		2
> >  #define PNP_MAX_DMA		2
> 
> I don't think we can increase PNP_MAX_PORT to 128.  Only one or two
> devices need that many, so just bumping the max wastes a LOT of space.
> A struct resource is seven longs, so on a 32-bit system with sixteen
> PNP devices, we'd be wasting (128-24)*7*4*16 = almost 47Kbytes.
> 
> In hindsight, I should not have removed drivers/acpi/motherboard.c
> until we had dynamic PNP resource tables.  We could revert that
> change [1], but the driver's been gone since 2.6.21, so I don't
> think it's that urgent.  It's just that we used to silently ignore
> resources past the limits, and in -mm, we now print a KERN_ERR message.
> 
> So I think we should either remove the message altogether (so we're
> exactly like 2.6.23 in this regard), or at least tone it down to
> a KERN_WARN or something.
> 
> And we need to get Thomas' dynamic patch into -mm ASAP :-)
*ping*! :)
My laptop still hits the PNP_MAX_MEM=12 warning in -rc5-mm1 - what's the
status on Thomas's patch?  No biggie - I just want to make sure it hasn't
been dropped through the cracks someplace....
[unhandled content-type:application/pgp-signature]