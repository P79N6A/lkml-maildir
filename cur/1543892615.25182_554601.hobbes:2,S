Date: Thu, 7 Jun 2007 14:38:40 -0700
From: Andrew Morton <>
Subject: Re: [PATCH 9/36] drivers edac new intel 5000X mc driver
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/6/7/404

On Sun, 3 Jun 2007 07:40:26 -0700 (PDT)
Doug Thompson <norsk5@yahoo.com> wrote:
> From:	Eric Wollesen <ericw@xmtp.net>
> 
> Eric Wollesen ported the Bluesmoke Memory Controller driver (written by
> Doug Thompson) for the Intel 5000X/V/P (Blackford/Greencreek) 
> chipset to the in kernel EDAC model.
> 
> This patch incorporates the module for the 5000X/V/P chipset family
> 
> ...
>
> +static void i5000_get_error_info(struct mem_ctl_info *mci,
> +				 struct i5000_error_info * info)
> +{
> +	struct i5000_pvt *pvt;
> +	u32 value;
> +
> +	pvt = (struct i5000_pvt *)mci->pvt_info;
pvt_info is (correctly) void *, so this cast is unneeded
> +static void i5000_process_fatal_error_info(struct mem_ctl_info *mci,
> +					   struct i5000_error_info * info,
s/* /*/
> + * i5000_process_fatal_error_info(struct mem_ctl_info *mci,
> + * 				  struct i5000_error_info *info,
> + * 				  int handle_errors);
> + *
> + *	handle the Intel NON-FATAL errors, if any
> + */
> +static void i5000_process_nonfatal_error_info(struct mem_ctl_info
> *mci,
> +					      struct i5000_error_info * info,
ditto (please check whole patch)
(I thought checkpatch.pl would catch this, but it doesn't?)
> +
> +/******************************************************************************
The zillion-asterisks can be removed from all these comments.
> + *	i5000_put_devices	'put' all the devices that we have
> + *				reserved via 'get'
> + */
> +static void i5000_put_devices(struct mem_ctl_info *mci)
> +{
> +	struct i5000_pvt *pvt;
> +
> +	pvt = (struct i5000_pvt *)mci->pvt_info;
Unneeded cast.
> +	pci_dev_put(pvt->branchmap_werrors);	/* FUNC 1 */
> +	pci_dev_put(pvt->fsb_error_regs);	/* FUNC 2 */
> +	pci_dev_put(pvt->branch_0);	/* DEV 21 */
> +
> +	/* Only if more than 2 channels do we release the second branch */
> +	if (pvt->maxch >= CHANNELS_PER_BRANCH) {
> +		pci_dev_put(pvt->branch_1);	/* DEV 22 */
> +	}
Unneeded braces.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/