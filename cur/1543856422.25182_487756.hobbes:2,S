Date: Sat, 02 Dec 2006 20:28:56 -0500
From: Bill Davidsen <>
Subject: Re: [patch 14/23] x86 microcode: dont check the size
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/12/2/198

Willy Tarreau wrote:
> Shaohua,
> 
> this one seems appropriate for 2.4 too. It is OK for you if I merge it ?
> 
> Thanks,
> Willy
> 
> On Wed, Nov 29, 2006 at 02:00:25PM -0800, Chris Wright wrote:
>> -stable review patch.  If anyone has any objections, please let us know.
>> ------------------
>>
>> From: Shaohua Li <shaohua.li@intel.com>
>>
>> IA32 manual says if micorcode update's size is 0, then the size is
>> default size (2048 bytes). But this doesn't suggest all microcode
>> update's size should be above 2048 bytes to me. We actually had a
>> microcode update whose size is 1024 bytes. The patch just removed the
>> check.
I agree with what you said, but unless I miss something, not what you 
did... I don't see the code to get the size and set it to 2k if it's 
zero. I would expect after the call to get_totalsize() that there would 
be a line like:
   if (unlikely(total_size == 0)) total_size = DEFAULT_UCODE_TOTALSIZE;
or some similar logic to do what the manual suggests, that zero is a 
valid value.
I may be totally misreading this, of course, I'm taking the manual quote 
as gospel.
-- 
Bill Davidsen <davidsen@tmr.com>
   "We have more to fear from the bungling of the incompetent than from
the machinations of the wicked."  - from Slashdot
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/