Date: Fri, 1 Jun 2001 21:51:22 -0400
From: Carlos E Gorges <>
Subject: [PATCH] cmpci pc-speaker volume control support
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/6/1/154

-----BEGIN PGP SIGNED MESSAGE-----
Hash: RIPEMD160
Hi all, the following patch adds pc-speaker volume control to
cmpci driver.
- --- linux/drivers/sound/cmpci.c.orig	Thu May 31 20:32:44 2001
+++ linux/drivers/sound/cmpci.c	Thu May 31 21:02:41 2001
@@ -1293,10 +1293,10 @@
 	[SOUND_MIXER_CD]     = { DSP_MIX_CDVOLIDX_L,     DSP_MIX_CDVOLIDX_R,     MT_5MUTE,     0x04, 0x02 },
 	[SOUND_MIXER_LINE]   = { DSP_MIX_LINEVOLIDX_L,   DSP_MIX_LINEVOLIDX_R,   MT_5MUTE,     0x10, 0x08 },
 	[SOUND_MIXER_MIC]    = { DSP_MIX_MICVOLIDX,      DSP_MIX_MICVOLIDX,      MT_5MUTEMONO, 0x01, 0x01 },
- -
 	[SOUND_MIXER_SYNTH]  = { DSP_MIX_FMVOLIDX_L,  	 DSP_MIX_FMVOLIDX_R,     MT_5MUTE,     0x40, 0x00 },
 	[SOUND_MIXER_VOLUME] = { DSP_MIX_MASTERVOLIDX_L, DSP_MIX_MASTERVOLIDX_R, MT_5MUTE,     0x00, 0x00 },
- -	[SOUND_MIXER_PCM]    = { DSP_MIX_VOICEVOLIDX_L,  DSP_MIX_VOICEVOLIDX_R,  MT_5MUTE,     0x00, 0x00 }
+	[SOUND_MIXER_PCM]    = { DSP_MIX_VOICEVOLIDX_L,  DSP_MIX_VOICEVOLIDX_R,  MT_5MUTE,     0x00, 0x00 },
+	[SOUND_MIXER_SPEAKER]= { DSP_MIX_SPKRVOLIDX,	 DSP_MIX_SPKRVOLIDX,	 MT_5MUTEMONO, 0x01, 0x01 }
 };
 
 #ifdef OSS_DOCUMENTED_MIXER_SEMANTICS
@@ -1359,7 +1359,8 @@
 	[SOUND_MIXER_MIC]    = 3,
 	[SOUND_MIXER_SYNTH]  = 4,
 	[SOUND_MIXER_VOLUME] = 5,
- -	[SOUND_MIXER_PCM]    = 6
+	[SOUND_MIXER_PCM]    = 6,
+	[SOUND_MIXER_SPEAKER]= 7
 };
 
 #endif /* OSS_DOCUMENTED_MIXER_SEMANTICS */
- --
	 _________________________
	 Carlos E Gorges          
	 (carlos@techlinux.com.br)
	 Tech inform√°tica LTDA
	 Brazil                   
	 _________________________
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.6 (GNU/Linux)
Comment: For info see 
http://www.gnupg.org
iQIXAwUBOxhGnhfQA3nqPEsZFAM5KwgAn3PwYejzyNk8KrdVIAnAFHUENDZfOddT
t+IN9NIEia8kXRtCx1sNJCzjCJmgumZJ9e0C6W/TKpUdHiuqH2FvGl4PmTjWsvW8
XbcQQj1HhU5nuE6TxKDwvaUiHs2dodKp943z8YQXm8eiPgqHWr1C1gMNOzw+Fx6q
4rIb8WtOU4fwSEvfOwGtJVdExewi/pJyL7sZgtE8m4SMpQtM4tUD6ugIlPTxjjcA
yNBm8VwV+E0vnkceurP54MNlXTMyeQ+D9gIkcdd0CIKe8FVo0DTwBvgzhxlFMibl
WeRMs2kH0Zml7Wg4hibAzskYopDGMPBy5ubWwYDInfaK4dK9O/11EQf8CySglQeK
lst7wVAlVi1mRagH+4I23ZdXqPzZAUnm94WFJcF3NwQCs6LkWzmF92rMiA8QFKv6
ZWEfh02RwgMRSnes6+Kupg2mN11xJQ9p7G/i7j8LcD1DRjccT/WAl6SoAwHkOfUD
gb44mVOLODSKLer3svMlNAcVE8fnOJkxMcHgN1xlWQ8Eb2Ii6u3D6dYCAPsSe0Fb
uQh91omuRJPsoLCEq0K8fYJaRZkPCi96nb0EJCPneKAqx9frXvO+rI5jozUHNKVI
aaMbgero3Dit1i4X8sBs1vRc2lOSJqiYrdZpuxEtUMHpjAEGqJSZKxV6APXIuElb
Bp9DyJKfIRBxGQ==
=WoFD
-----END PGP SIGNATURE-------- linux/drivers/sound/cmpci.c.orig	Thu May 31 20:32:44 2001
+++ linux/drivers/sound/cmpci.c	Thu May 31 21:02:41 2001
@@ -1293,10 +1293,10 @@
 	[SOUND_MIXER_CD]     = { DSP_MIX_CDVOLIDX_L,     DSP_MIX_CDVOLIDX_R,     MT_5MUTE,     0x04, 0x02 },
 	[SOUND_MIXER_LINE]   = { DSP_MIX_LINEVOLIDX_L,   DSP_MIX_LINEVOLIDX_R,   MT_5MUTE,     0x10, 0x08 },
 	[SOUND_MIXER_MIC]    = { DSP_MIX_MICVOLIDX,      DSP_MIX_MICVOLIDX,      MT_5MUTEMONO, 0x01, 0x01 },
-
 	[SOUND_MIXER_SYNTH]  = { DSP_MIX_FMVOLIDX_L,  	 DSP_MIX_FMVOLIDX_R,     MT_5MUTE,     0x40, 0x00 },
 	[SOUND_MIXER_VOLUME] = { DSP_MIX_MASTERVOLIDX_L, DSP_MIX_MASTERVOLIDX_R, MT_5MUTE,     0x00, 0x00 },
-	[SOUND_MIXER_PCM]    = { DSP_MIX_VOICEVOLIDX_L,  DSP_MIX_VOICEVOLIDX_R,  MT_5MUTE,     0x00, 0x00 }
+	[SOUND_MIXER_PCM]    = { DSP_MIX_VOICEVOLIDX_L,  DSP_MIX_VOICEVOLIDX_R,  MT_5MUTE,     0x00, 0x00 },
+	[SOUND_MIXER_SPEAKER]= { DSP_MIX_SPKRVOLIDX,	 DSP_MIX_SPKRVOLIDX,	 MT_5MUTEMONO, 0x01, 0x01 }
 };
 
 #ifdef OSS_DOCUMENTED_MIXER_SEMANTICS
@@ -1359,7 +1359,8 @@
 	[SOUND_MIXER_MIC]    = 3,
 	[SOUND_MIXER_SYNTH]  = 4,
 	[SOUND_MIXER_VOLUME] = 5,
-	[SOUND_MIXER_PCM]    = 6
+	[SOUND_MIXER_PCM]    = 6,
+	[SOUND_MIXER_SPEAKER]= 7
 };
 
 #endif /* OSS_DOCUMENTED_MIXER_SEMANTICS */