Date: Mon, 03 Mar 2003 09:40:01 -0800
From: "Martin J. Bligh" <>
Subject: Re: percpu-2.5.63-bk5-1 (properly generated)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/3/3/163

> On Sun, Mar 02, 2003 at 04:07:01PM -0800, Martin J. Bligh wrote:
>> Failing that, if you can split it into 3 or 4 patches along the lines I
>> suggested earlier, I'll try benching each bit seperately for you.
> 
> Last ditch effort. No per_node stuff at all, and no new per_cpu users.
OK, that seems to get rid of the SDET degradation, but I rigged up the
same test you were doing (make -j) and see only marginal improvement
from the full patch (pernode2) ... not the 6s you were seeing.
Kernbench: (make -j N vmlinux, where N = 2 x num_cpus)
                              Elapsed      System        User         CPU
              2.5.63-mjb2       44.09       94.38      557.26     1477.00
     2.5.63-mjb2-pernode2       44.54       96.38      557.30     1466.75
     2.5.63-mjb2-pernode3       44.01       95.22      556.69     1481.25
Kernbench: (make -j N vmlinux, where N = 16 x num_cpus)
                              Elapsed      System        User         CPU
              2.5.63-mjb2       45.53      118.06      560.48     1489.50
     2.5.63-mjb2-pernode2       45.25      116.68      561.28     1497.50
     2.5.63-mjb2-pernode3       45.30      116.91      559.82     1492.00
Kernbench: (make -j vmlinux, maximal tasks)
                              Elapsed      System        User         CPU
              2.5.63-mjb2       45.17      117.80      560.62     1500.50
     2.5.63-mjb2-pernode2       44.91      115.95      560.98     1505.25
     2.5.63-mjb2-pernode3       45.47      118.07      560.25     1491.75
-pernode2 was your full patch with the fix you sent, -pernode3 was the 
smaller patch you sent last. Can you try to reproduce the improvment
were seeing, and grab a before and after profile? I don't seem to be 
able to replicate it.
M.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/