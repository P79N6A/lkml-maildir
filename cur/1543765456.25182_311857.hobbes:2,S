Date: Thu, 14 Apr 2005 12:56:23 -0500
From: Nathan Lynch <>
Subject: [PATCH] generate hotplug events for cpu online
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/4/14/101

We already do kobject_hotplug for cpu offline; this adds a
kobject_hotplug call for the online case.  This is being requested by
developers of an application which wants to be notified about both
kinds of events.
Signed-off-by: Nathan Lynch <ntl@pobox.com>
Index: linux-2.6.12-rc2-mm3/drivers/base/cpu.c
===================================================================
--- linux-2.6.12-rc2-mm3.orig/drivers/base/cpu.c	2005-03-02 01:37:53.000000000 -0600
+++ linux-2.6.12-rc2-mm3/drivers/base/cpu.c	2005-04-14 10:56:29.000000000 -0500
@@ -37,6 +37,8 @@ static ssize_t store_online(struct sys_d
 		break;
 	case '1':
 		ret = cpu_up(cpu->sysdev.id);
+		if (!ret)
+			kobject_hotplug(&dev->kobj, KOBJ_ONLINE);
 		break;
 	default:
 		ret = -EINVAL;
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/