Date: Fri, 05 Nov 1999 08:08:52 -0500
From: Wade Hampton <>
Subject: re:  Subject: filecorruption [kernel]
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/11/5/49

Greetings,
We are having file corruption problems with ZIP drives too.  
I have been using pre-formatted DOS (vfat) zips for several years
to transfer from the laptop to desktop (on an intranet), and 
for interchange with WIndows clients.  
Sometime about a year ago, my ATAPI internal ZIP in my laptop
stopped working well (locked up several times, file corruption
and similar).  I thought it was most likely hardware and have
since gotten a new laptop.
However, I am finding that this is a common problem with ATAPI
ZIPS and 2.2.x kernels in our shop.  We have 2 Toshiba T8000
laptops with CMF internal ZIPS.  Copying large files to a 
vfat mounted zip often results in corrupted files or errors like:
Nov  4 07:45:08 wadester kernel: ide-floppy: hdc: I/O error, pc =  0,
key =  2, asc = 3a, ascq =  0 
Nov  4 07:45:08 wadester kernel: ide-floppy: hdc: I/O error, pc = 1b,
key =  2, asc = 3a, ascq =  0 
Nov  4 07:45:08 wadester kernel: hdc: The drive reports both 100663296
and 0 bytes as its capacity 
Nov  4 07:53:53 wadester kernel: ide-floppy: hdc: I/O error, pc =  0,
key =  2, asc = 3a, ascq =  0 
Nov  4 07:53:53 wadester kernel: ide-floppy: hdc: I/O error, pc = 1b,
key =  2, asc = 3a, ascq =  0 
Nov  4 07:53:53 wadester kernel: hdc: The drive reports both 100663296
and 0 bytes as its capacity 
Nov  4 07:53:57 wadester kernel: ide-floppy: hdc: I/O error, pc =  0,
key =  2, asc =  4, ascq =  1 
Nov  4 07:53:57 wadester kernel: ide-floppy: hdc: I/O error, pc = 1b,
key =  2, asc =  4, ascq =  1 
Nov  4 07:53:57 wadester kernel: hdc: The drive reports both 100663296
and 0 bytes as its capacity 
Also a desktop we have with an internal ATAPI ZIP will not mount a 
Win98 formatted vfat disk.  If I run fdisk on it, I get all 4 partitions
and a bunch of warnings.  Removing all partions and making partition 4,
type
6, then using mkfs to make a dos partion seems to work for Linux, but
the
disk is not readable under Windows.  A Windows reformat messes up the 
partition table and makes a disk that is not readable under Linux.
I Have seen a similar fdisk problem, e.g., when you do /sbin/fdisk
/dev/hdc4,
instead of /dev/hdc, but the problem with this desktop happens when you
do fdisk on hdc!  
One Toshiba is RedHat 6.0 the other 6.1 with 2.2.13pre15 kernel.  The
desktop
is RedHat 6.1 with stock shipped kernel (2.2.12 RH).
If anyone has any ideas, could they please mail me directly -- I am just
on the Kernel digest for now (too much volume to keep up when on other
projects).
Thanks,
-- 
W. Wade, Hampton  <whampton@staffnet.com>  
Linux is new, it's come out of nowhere, it's free. Hard to beat that 
price. And it's taking marketshare left and right.  
--Microsoft's lawyer, in closing argument, Bristol v. Microsoft,
http://www.microsoft.com/presspass/bti/07-15closing.htm
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/