Date: Fri, 9 Apr 1999 11:35:49 +0100 (BST)
From: "Stephen C. Tweedie" <>
Subject: Re: Tasks raising to 95% of %CPU / SOLVED
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/4/9/37

Hi,
On Thu, 8 Apr 1999 13:26:00 -0400 (EDT), Chuck Lever <cel@monkey.org>
said:
> it's not clear from context, and i didn't see the beginning of this
> thread.  is this also a problem with 2.2.x kernels?  
Absolutely.  The proper simple fix is not too hard, but it is new code
in some very critical bits of the filesystem so it's not necessarily a
candidate for 2.2.  All we need is a way to link dirty buffer_heads
against a per-inode dirty buffer queue.  Shared buffer_heads aren't a
problem at all: the only shared buffers we need to worry about are
inodes, and those are trivial to force to disk.
The short-term simple fix is to resort to sync_dev when fsync()ing
sufficiently large files.
> would this be a reasonable change for administrators running, say, a
> directory server on recent versions of Linux?
Funny you should ask that.  :)  Yes, absolutely it would, if you rely
on fsync() rather than O_SYNC.
--Stephen
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/