Date: Sun, 09 Dec 2007 19:57:13 -0500
From: Steven Rostedt <>
Subject: Re: RT Load balance changes in sched-devel
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/12/9/174

Gregory Haskins wrote:
>> btw., both cases would be addressed by placing load-balance points
>> into sched_class_rt->{enqueue,dequeue}_task_rt()... push_rt_tasks()
>> and pull_rt_tasks() respectively. As a side effect (I think,
>> technically, it would be possible), 3 out of 4 *_balance_rt() calls
>> (the exception: schedule_tail_balance_rt()) in schedule() would become
>> unnecessary.
>>
>> _BUT_
>>
>> the enqueue/dequeue() interface would become less straightforward,
>> logically-wise.
>> Something like:
Also push and pull_rt use activate,deactivate as well. So this would 
make that code a bit more complex.
>>
>> rq = activate_task(rq, ...) ; /* may unlock rq and lock/return another one 
>> */
>>
>> would complicate the existing use cases.
>>
> 
> I think I would prefer to just fix the setscheduler/setprio cases for the class transition than change the behavior of these enqueue/dequeue calls.  But I will keep an open mind as I look into this issue.
I agree with Gregory on this. I prefer to fix the two you found. I 
thought about them before, but somehow they were missed :-/
Anyway, I'll be working on adding some more patches on Monday. There may 
be other ways to clean this up.
> 
> Thanks for the review!
Yeah, thanks from me too!
-- Steve