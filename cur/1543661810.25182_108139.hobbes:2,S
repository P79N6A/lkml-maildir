Date: Fri, 7 Feb 2003 23:53:39 -0800
From: Paul Laufer <>
Subject: Re: OSS Sound Blaster sb_card.c rewrite (PnP, module options, etc)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/2/8/4

Sorry, I sent a version of sb_card.c that was what I last minute
tested minus one change. The #include for sb_card.h should be under
the #include of pnp.h. Here is the patch. It should work after you
apply this.
Thanks for testing.
Paul
--- sb_card.c.orig	2003-02-06 00:35:10.000000000 -0800
+++ sb_card.c	2003-02-07 23:46:50.000000000 -0800
@@ -19,6 +19,7 @@
  * Melo, Daniel Church, and myself.
  *
  * 02-05-2003 Original Release, Paul Laufer <paul@laufernet.com>
+ * 02-07-2003 Bug made it into first release. Take two.
  */
 
 #include <linux/config.h>
@@ -31,11 +32,10 @@
 #include "sound_config.h"
 #include "sb_mixer.h"
 #include "sb.h"
-#include "sb_card.h"
-
 #ifdef CONFIG_PNP_CARD
 #include <linux/pnp.h>
 #endif
+#include "sb_card.h"
 
 MODULE_DESCRIPTION("OSS Soundblaster ISA PnP and legacy sound driver");
 MODULE_LICENSE("GPL");
On Fri, Feb 07, 2003 at 10:17:42PM -0500 or thereabouts, Shawn Starr wrote:
> >This is a rewrite of sound/oss/sb_card.c which handles detection of
> >Soundblaster ISA cards and clones. This rewrite uses the new PnP and
> >module APIs.
> 
> >Attached are two files sb_card.c and sb_card.h that are drop in
> >replacements for sb_card.c. Verified to work with current bk.
> 
> >Please test if you have ISA Soundblaster and clone cards and provide
> >feedback.
> 
> >Thanks,
> >Paul Laufer
> 
> I do, but it doesn't compile against 2.5.59 vanilla?
> 
> In file included from sound/oss/sb_card.c:34:
> sound/oss/sb_card.h:26: elements of array `sb_pnp_card_table' have incomplete 
> type
> sound/oss/sb_card.h:28: unknown field `id' specified in initializer
> sound/oss/sb_card.h:28: warning: excess elements in struct initializer
> sound/oss/sb_card.h:28: warning: (near initialization for 
> `sb_pnp_card_table[0]')
> sound/oss/sb_card.h:28: unknown field `driver_data' specified in initializer
> sound/oss/sb_card.h:28: warning: excess elements in struct initializer
> sound/oss/sb_card.h:28: warning: (near initialization for 
> `sb_pnp_card_table[0]')
> sound/oss/sb_card.h:28: unknown field `devs' specified in initializer
> sound/oss/sb_card.h:28: extra brace group at end of initializer
> 
> etc..
> 
> either my 2.5.59 is not really a vanilla or something else. I took  a 2.5.58 
> bz2 and patched it with 2.5.59 patch it should be fine.
> 
> Or, do I need bk?
> 
> Shawn.
> 
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/