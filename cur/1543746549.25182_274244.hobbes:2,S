Date: Wed, 24 Nov 2004 23:57:41 +1100
From: Nigel Cunningham <>
Subject: Suspend 2 merge: 11/51: Export vt functions.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/11/24/187

On wide > 128 char displays, the text display gets messed up if gotoxy's
and gotoxay's variables are signed (I should confirm that this is still
the case - it's been a while).
We need to modify kmsg_redirect to see our messages when debugging :>
diff -ruN 401-export-vt-functions-old/drivers/char/vt.c 401-export-vt-functions-new/drivers/char/vt.c
--- 401-export-vt-functions-old/drivers/char/vt.c	2004-11-06 09:24:03.326462744 +1100
+++ 401-export-vt-functions-new/drivers/char/vt.c	2004-11-04 16:27:40.000000000 +1100
@@ -913,7 +913,7 @@
  */
 static void gotoxy(int currcons, int new_x, int new_y)
 {
-	int min_y, max_y;
+	unsigned int min_y, max_y;
 
 	if (new_x < 0)
 		x = 0;
@@ -940,7 +940,7 @@
 }
 
 /* for absolute user moves, when decom is set */
-static void gotoxay(int currcons, int new_x, int new_y)
+static void gotoxay(int currcons, unsigned int new_x, unsigned int new_y)
 {
 	gotoxy(currcons, new_x, decom ? (top+new_y) : new_y);
 }
@@ -3312,6 +3312,7 @@
  *	Visible symbols for modules
  */
 
+EXPORT_SYMBOL(kmsg_redirect);
 EXPORT_SYMBOL(color_table);
 EXPORT_SYMBOL(default_red);
 EXPORT_SYMBOL(default_grn);
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/