Date: Tue, 29 Jan 2008 18:56:46 -0500
From: Pavel Roskin <>
Subject: Re: ndiswrapper and GPL-only symbols redux
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/29/474

On Tue, 2008-01-29 at 22:45 +0000, Alan Cox wrote:
> > - it's a fair game to taint the kernel in some way if ndiswrapper has
> > been loaded at some point, since tainting per se is just an indicator
> > that the kernel has been used in an unsupportable way
> 
> That's all the patch appears to do. Se the taint flag.
There are two taint flags.  Let's see:
        if (strcmp(mod->name, "ndiswrapper") == 0)
-               add_taint(TAINT_PROPRIETARY_MODULE);
+               add_taint_module(mod, TAINT_PROPRIETARY_MODULE);
And that's add_taint_module():
static inline void add_taint_module(struct module *mod, unsigned flag)
{
        add_taint(flag);
        mod->taints |= flag;
}
The module taint is set before the symbols are resolved.  Therefore, the
GPL-only symbols won't be resolved.
> > - if this change stands, ndiswrapper will be renamed, which would only
> > create more confusion and would thus defeat the purpose of tainting
> 
> Not a productive approach. It will only harm support for everyone.
I know.  But ndiswrapper is a maintained program, which is regularly
updated to work with the latest kernels.  If the author fails to make
the necessary updates for the next kernel for whatever reason, somebody
will fork it and make such updates.
-- 
Regards,
Pavel Roskin