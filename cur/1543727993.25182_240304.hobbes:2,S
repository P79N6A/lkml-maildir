Date: Mon, 9 Aug 2004 17:31:19 -0400 (EDT)
From: Zwane Mwaikambo <>
Subject: Re: [PATCH][2.6] Completely out of line spinlocks / x86_64
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/8/9/335

On Mon, 9 Aug 2004, Andi Kleen wrote:
> I think the 50k number is wrong. I took a look at it and the big
> difference is only seen when you enable interrupts during spinning, which
> we didn't do before.  If you compare it to the old implementation the
> difference is much less.
Yes agreed the increase wouldn't be of as high a magnitude if compared to
the original code, but it's still a decent saving.
> I don't really like the config option. Either it's a good idea
> then it should be done by default without option or it should not be done at all.
>
> Did you do any lock intensive benchmarks that could show a slowdown?
I went for a file IO type benchmark, the differences looked like
statistical noise, possibly the best bet would be to check for cache
hits/misses.
> You should make this file assembly only.
Ok you're the second person to mention that, i don't have a problem with
switching to assembly only and dumping the exports in x8664_ksyms.c
Thanks,
	Zwane
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/