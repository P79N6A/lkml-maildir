Date: Tue, 4 Sep 2007 16:25:10 +0200
From: Oliver Neukum <>
Subject: umount triggers a warning in jfs and takes almost a minute
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/9/4/73

Hi,
using jfs on a flash drive (which is a bit unusual: 2K sectors) unmounting
triggers a warning and takes 52 second, if I have used the filesystem. (ls -l)
is sufficient. This is 2.6.23-rc4 on x86_64.
mkfs.jfs version 1.1.11, 05-Jun-2006
	Regards
		Oliver
Sep  4 16:18:57 oenone kernel: WARNING: at fs/jfs/jfs_logmgr.c:1643 jfs_flush_journal()
Sep  4 16:18:57 oenone kernel:
Sep  4 16:18:57 oenone kernel: Call Trace:
Sep  4 16:18:57 oenone kernel:  [<ffffffff8856b96e>] :jfs:jfs_flush_journal+0x26a/0x27d
Sep  4 16:18:57 oenone kernel:  [<ffffffff8029f39e>] dispose_list+0xde/0xf7
Sep  4 16:18:57 oenone kernel:  [<ffffffff88559003>] :jfs:jfs_umount+0x30/0xe5
Sep  4 16:18:57 oenone kernel:  [<ffffffff88555a31>] :jfs:jfs_put_super+0xd/0x5e
Sep  4 16:18:57 oenone kernel:  [<ffffffff8028e68b>] generic_shutdown_super+0x60/0xf0
Sep  4 16:18:57 oenone kernel:  [<ffffffff8028e728>] kill_block_super+0xd/0x1e
Sep  4 16:18:57 oenone kernel:  [<ffffffff8028e7f3>] deactivate_super+0x6a/0x82
Sep  4 16:18:57 oenone kernel:  [<ffffffff802a1880>] sys_umount+0x249/0x25a
Sep  4 16:18:57 oenone kernel:  [<ffffffff80260e2f>] audit_syscall_entry+0x141/0x174
Sep  4 16:18:57 oenone kernel:  [<ffffffff8020be8c>] tracesys+0xdc/0xe1
oenone:/home/oliver # mount -t jfs /dev/sdd1 /mnt
oenone:/home/oliver # ls -l /mnt
insgesamt 72
-rw-r--r-- 1 root root 72797  4. Sep 14:51 config
oenone:/home/oliver # time umount /mnt
real    0m52.608s
user    0m0.000s
sys     0m0.008s
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/