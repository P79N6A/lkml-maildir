Date: 13 Mar 2003 21:04:15 +0000
From: "Stephen C. Tweedie" <>
Subject: Re: [Ext2-devel] Re: [Bug 417] New: htree much slower than regular ext3
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/3/13/172

Hi,
On Thu, 2003-02-27 at 21:00, Andreas Dilger wrote:
> I've got a patch which should help here, although it was originally written
> to speed up the "create" case instead of the "lookup" case.  In the lookup
> case, it will do a pre-read of a number of inode table blocks, since the cost
> of doing a 64kB read and doing a 4kB read is basically the same - the cost
> of the seek.
No it's not --- you're evicting 16 times as much other
potentially-useful data from the cache for each lookup.  You'll improve
the "du" or "ls -l" case by prefetching, but you may well slow down the
overall system performance when you're just doing random accesses (eg.
managing large spools.)
It would be interesting to think about how we can spot the cases where
the prefetch is likely to be beneficial, for example by observing
"stat"s coming in in strict hash order.
--Stephen
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/