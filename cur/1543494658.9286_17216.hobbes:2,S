Date: Thu, 06 May 1999 12:10:48 +0200
From: Manfred Spraul <>
Subject: Re: Oops assist...
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/5/5/80

Alan Cox wrote:
> Even more ideal would be to dump the oops to somewhere non volatile over
> a reboot. I'm not sure there are good candidates for this on a PC.
What about the swap file?
i.e. the Oops is dumped to the first (after the header) sector of the
swap file. The computer is restarted automatically. I don't
think that it a good idea to continue after an Oops:
if you kill a kernel thread, then you have memory corruptions,
lost spinlocks, lost semaphores: the computer will crash in a few
seconds anyway.
sys_swapoff() clears the first data sector,
sys_swapon() checks if the swap partition contains a oops, and if there 
is an oops it transfers the oops into the system log, and then
clears the first sector.
AFAIK, this is would similar to the NT implemenation: if you have
no swap file, then the system cannot dump BSOD's.
Regards,
	Manfred
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/