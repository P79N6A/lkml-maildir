Date: Sat, 28 Apr 2007 00:09:18 +0200
From: "Rafael J. Wysocki" <>
Subject: Re: [PATCH -mm 2/2] Introduce freezer flags
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/4/27/526

On Friday, 27 April 2007 23:49, Rafael J. Wysocki wrote:
> On Friday, 27 April 2007 23:40, Gautham R Shenoy wrote:
> > On Fri, Apr 27, 2007 at 05:40:16PM +0200, Rafael J. Wysocki wrote:
> > > From: Rafael J. Wysocki <rjw@sisk.pl>
> > > 
> > > Move all of the freezer-related flags to a separate field in task_struct and
> > > introduce functions to operate them using set_bit() etc.
> > > 
> > > 
> > > Index: linux-2.6.21-rc7-mm2/include/linux/sched.h
> > > ===================================================================
> > > --- linux-2.6.21-rc7-mm2.orig/include/linux/sched.h
> > > +++ linux-2.6.21-rc7-mm2/include/linux/sched.h
> > > @@ -1006,7 +1006,10 @@ struct task_struct {
> > >  	/* Deadlock detection and priority inheritance handling */
> > >  	struct rt_mutex_waiter *pi_blocked_on;
> > >  #endif
> > > -
> > > +#ifdef CONFIG_FREEZER
> > > +	/* Used by the process freezer, defined in freezer.h */
> > > +	unsigned int freezer_flags;
> > 
> > unsigned long freezer_flags; ??
> 
> I guess so.
Still, on x86_64, for example, we'll waste 4 bytes by using 'unsigned long'
here, which I wouldn't like to do.
Is it acceptable to use explicit type casting in set_bit() and friends?
Rafael
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/