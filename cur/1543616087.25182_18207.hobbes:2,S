Date: Tue, 08 Jan 2002 09:04:14 +0100
From: Giacomo Catenazzi <>
Subject: Re: [kbuild-devel] Re: Hardware Inventory [was: Re: ISA slot detection on PCI systems?]
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/1/8/23

Greg KH wrote:
> On Mon, Jan 07, 2002 at 10:50:01AM -0800, Greg KH wrote:
> 
>>And the /sbin/hotplug program knows about _all_ devices that the
>>currently compiled kernel can handle due to the MODULE_DEVICE_TABLE tags
>>in the drivers.
>>
> 
> Along these lines, I am very disappointed in looking at the
> autoconfigure stuff in CML2.  It should be taking all of the device and
> driver matching information from the kernel itself, as it is already
> specified there.
> 
> Look at the modules.*map files.  They specify the kernel drivers that
> specific devices work for.  They are automatically created from the
> kernel that you just built.
modules.*map exist only on compiled kernel. And entry depends on
architecture and on configuration.
But don't worry. I use the kernel source to find the
MODULES_DEVICE_TABLE (with a partially automated script) to build the
new tables.
For USB and PNP this works great. For PCI I have some more problems:
the item found with MODULES_DEVICE_TABLE are the item marked with '#!'.
You see that the not all drivers use MODULES_DEVICE_TABLE.
An the most important missing dirvers are the IDE cards.
> 
> Eric, if you are going to keep your "2000+" configuration probes up to
> date by hand, good luck.  Look at all of the new USB drivers that have
> been added in just the 2.5.2-pre series alone.  That's a lot of data to
> keep track of.
> 
> The rest of us have decided to rely on automatic tools for this process :)
Slowly I make the proces more automatic (adding more 'special' cases),
i.e. I now I try to find the '#IFDEF' in the middle of the
*_device_id tables and setting the data correctly).
The sources is always the kernel.
	giacomo
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/