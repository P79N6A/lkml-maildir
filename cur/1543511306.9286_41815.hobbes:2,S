Date: Fri, 01 Oct 1999 18:36:59 -0400
From: "Brandon S. Allbery KF8NH" <>
Subject: Re: BIOS shadowing.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/10/1/105

In message <EB62C0C34246D111A39A00805FA6A85504834D8E@ems2.glam.ac.uk>, 
"Jones D
 (ISaCS)" writes:
+-----
| > >  As Linux doesn't use the system BIOS calls much after 
| > > initial setup, Would I be better off disabling BIOS
| > > shadowing, and regaining that few pages of RAM?
| > If your motherboard actually remaps that area somewhere else: 
| > yes. AFAIK most motherboards don't do that.
| 
| I thought that most of them would steal some space in
| System RAM, re-route memory reads to that memory-range,
| and then mark that range as 'used'.
| If this is incorrect, how do they work?
+--->8
PC memory is laid out like this:
|---- 0-640 ----|- 640-1M -|------ 1M-top ------|
                |  R  R  RR|
where the R's are various ROMs.  When the system is turned on, the ROM space 
"replaces" the 640k-1M region, which is then only accessible via 
chipset-specific mechanisms (and may not even be visible as "memory" at that 
point).  If BIOS shadowing is turned on, then the BIOS copies selected or 
all parts of the 640k-1M space to the hidden RAM, and then the RAM is 
swapped in place of the ROM and marked as read-only.
The problem is that there's no standards whatsoever for accessing that 
shadow RAM.  It *might* be implemented as a 384k block that can be remapped 
elsewhere --- or it might be available only via outb() and/or outw().  It's 
entirely up to the chipset.  And you might have trouble getting your hands 
on sufficient chipset documentation to find out how to access it, to say 
nothing of coming up with code that will work with *all* the chipsets out 
there (it could easily be much larger than the 384k you hope to gain...).
-- 
brandon s. allbery	   os/2,linux,solaris,perl	allbery@kf8nh.apk.net
system administrator	   kthkrb,heimdal,gnome,rt	  allbery@ece.cmu.edu
carnegie mellon / electrical and computer engineering			kf8nh
    We are Linux. Resistance is an indication that you missed the point.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/