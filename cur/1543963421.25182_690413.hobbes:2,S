Date: Thu, 8 May 2008 19:58:47 +0100 (BST)
From: Hugh Dickins <>
Subject: Re: [PATCH] x86: fix PAE pmd_bad bootup warning
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/5/8/351

On Thu, 8 May 2008, Dave Hansen wrote:
> 
> But, I do think it is absolutely insane to have pmd_clear_bad() going
> after perfectly good hugetlb pmds.  The way it is set up now, people are
> bound to miss the hugetlb pages because just about every single
> pagetable walk has to be specially coded to handle or avoid them.  We
> obviously missed it, here, and we had two good examples in the same
> file! :)
Like it or not, the pgd/pud/pmd/pte hierarchy cannot be assumed once
you're amongst hugepages.  What happens varies from architecture to
architecture.  Perhaps the hugepage specialists could look at what
in fact the different architectures we know today are doing, and
come up with a better abstraction to encompass them all.  But it's
simply wrong for a "generic" pagewalker to be going blindly in there.
Two good examples in the same file??
Hugh