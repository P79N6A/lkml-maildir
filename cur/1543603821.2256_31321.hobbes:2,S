Date: Sun, 7 Oct 2001 09:21:05 +0200 (CEST)
From: Gérard Roudier <>
Subject: Re: how to get virtual address from dma address
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/10/7/11

On 6 Oct 2001, Jes Sorensen wrote:
> >>>>> "Paul" == Paul Mackerras <paulus@samba.org> writes:
>
> Paul> David S. Miller writes:
> >> I can not even count on one hand how many people I've helped
> >> converting, who wanted a bus_to_virt() and when I showed them how
> >> to do it with information the device provided already they said "oh
> >> wow, I never would have thought of that".  That process won't
> >> happen as often with the suggested feature.
>
> Paul> Well, let's see if we can come up with a way to achieve this
> Paul> goal as well as the other.
>
> Paul> I look at all the hash-table stuff in the usb-ohci driver and I
> Paul> think to myself about all the complexity that is there (and I
> Paul> haven't managed to convince myself yet that it is actually
> Paul> SMP-safe) and all the time wasted doing that stuff, when on
> Paul> probably 95% of the machines that use the usb-ohci driver, the
> Paul> hashing stuff is totally unnecessary.  I am talking about
> Paul> powermacs, which don't have an iommu, and where the reverse
> Paul> mapping is as simple as adding a constant.
>
> I haven't looked at the ohci driver at all, however doesn't it return
> anything but the dma address? No index, no offset, no nothing? If
> thats the case, someone really needs to go visit the designers with a
> large bat ;-(
I would apply the bat to people that wants such a dma to virtual general
translation. This thing is obviously gross shit.
I would also apply the bat to people that look into stuff of other people
and, instead of trying to actually understand the code, just give a look
and send inappropriate statements to the list.
  Gérard.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/