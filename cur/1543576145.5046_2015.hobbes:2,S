Date: Sun, 17 Dec 2000 16:35:05 -0500 (EST)
From: Alexander Viro <>
Subject: Re: test12: innd bug came back?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/12/17/93

On Sun, 17 Dec 2000, Jorg de Jong wrote:
> > >On 13 Dec 2000, Henrik [ISO-8859-1] StÐ¬rner wrote:
> > >
> > >> Just to add a "me too" on this. I didn't report when I saw it last week,
> 
> I'd like to second that. ME TOO !
> Since I switched to 2.4.0.test12 I again have the innd bug.
> ( well at least the same symptoms !)
Guys, what blocksize are you using? BTW, old testcase was
cat >foo.c <<EOF
#include <unistd.h>
main(argc,argv)
int argc;
char **argv;
{
	int fd;
	char c=0;
	truncate(argv[1], 10);
	fd = open(argv[1], 1);
	lseek(fd, 16384, 0);
	write(fd, &c, 1);
	close(fd);
}
EOF
gcc foo.c
./a.out /tmp/something_old
od -c </tmp/something_old
where something_old would be something not touched for long (i.e.
completely out of cache). Buggy kernels would leave much more than
10 non-zero bytes. Correct result is a file with bytes 11-16385 being zero.
I doubt that it would be the same beast, though...
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/