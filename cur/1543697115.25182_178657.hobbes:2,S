Date: Mon, 17 Nov 2003 21:13:04 +0000
From: Jamie Lokier <>
Subject: Re: [PATCH] POSIX message queues - syscalls & SIGEV_THREAD
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/11/17/133

Ulrich Drepper wrote:
> IMO, for 2.6 FUTEX_FD should be removed or disabled.  It doesn't work
> reliably.
It is useful for some things, but it isn't a suitable async
replacement for FUTEX_WAIT.  My way of judging it is to observe that
you can't build userspace scheduled FUTEX_WAIT-like interface out of
FUTEX_FD, so FUTEX_FD is flawed.
> As for later, and which extensions to add, Ingo and I discussed this
> quite a bit already.  One of the problems is that once you extend the
> basic set of operations the possible way are very numerous and the
> interfaces can explode in number.
I don't see an explosion, unless you mean several orthogonal bits in
the op word.  A lot can be built on top of FUTEX_WAIT+FUTEX_WAKE; the
explosion of more complex operators is mostly up to userspace.
One thing I thought might be useful is to another argument to
FUTEX_WAKE which is returned to the woken waiter.
> I am not sure that this list is the adequate forum for discussing the
> futex extensions.  If somebody says where it should take place and
> somebody actually declares willingness to work on the implementation
> side, I can write down my thoughts and post it.
So far, this or phil-list are the only place I've seen any futex
discussion.  I'm willing to work on implementation if you have
thoughts to share; I did the most recent batch of futex changes, after
all.  (Btw, do you have any benchmark results for the current code?)
Feel free to share your thoughts privately if you don't want to share
with the list just yet; although I think it is good to let whoever may
be interested see the discussion, it is up to you.
-- Jamie
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/