Date: Thu, 21 Feb 2008 03:53:30 -0500
From: Len Brown <>
Subject: Re: acpi: new sparse warnings in 2.6.25-rc2
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/2/21/44

On Thursday 21 February 2008 02:32, Harvey Harrison wrote:
> Introduced between 2.6.25-rc1 and -rc2.
> 
> drivers/acpi/executer/exregion.c:369:8: warning: incorrect type in argument 3 (different type sizes)
> drivers/acpi/executer/exregion.c:369:8:    expected unsigned int [usertype] *value
> drivers/acpi/executer/exregion.c:369:8:    got unsigned long long [usertype] *value
> drivers/acpi/executer/exregion.c: In function ‘acpi_ex_pci_config_space_handler’:
> drivers/acpi/executer/exregion.c:369: warning: passing argument 3 of ‘acpi_os_read_pci_configuration’ from incompatible pointer type
> 
Subject: ACPI: fix build warning
From: Ming Lin <ming.m.lin@intel.com>
CC      drivers/acpi/executer/exregion.o
drivers/acpi/executer/exregion.c: In function
‘acpi_ex_pci_config_space_handler’:
drivers/acpi/executer/exregion.c:369: attention : passing argument 3 of
‘acpi_os_read_pci_configuration’ from incompatible pointer type
exposed by 10270d4838bdc493781f5a1cf2e90e9c34c9142f
http://bugzilla.kernel.org/show_bug.cgi?id=9989
Signed-off-by: Ming Lin <ming.m.lin@intel.com>
---
diff --git a/drivers/acpi/executer/exregion.c b/drivers/acpi/executer/exregion.c
index 2e9ce94..3f51b7e 100644
--- a/drivers/acpi/executer/exregion.c
+++ b/drivers/acpi/executer/exregion.c
@@ -338,6 +338,7 @@ acpi_ex_pci_config_space_handler(u32 function,
 	acpi_status status = AE_OK;
 	struct acpi_pci_id *pci_id;
 	u16 pci_register;
+	u32 value32;
 
 	ACPI_FUNCTION_TRACE(ex_pci_config_space_handler);
 
@@ -364,9 +365,9 @@ acpi_ex_pci_config_space_handler(u32 function,
 	switch (function) {
 	case ACPI_READ:
 
-		*value = 0;
 		status = acpi_os_read_pci_configuration(pci_id, pci_register,
-							value, bit_width);
+							&value32, bit_width);
+		*value = value32;
 		break;
 
 	case ACPI_WRITE:
--
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/