Date: Mon, 18 Oct 1999 11:28:14 +0100 (BST)
From: "Stephen C. Tweedie" <>
Subject: Re: fs specific union in struct buffer head? Optimal implementation of  allocate on flush seems to require a b_parent field in struct  buffer_head.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/10/18/23

Hi,
On Fri, 15 Oct 1999 23:22:23 +0400, Hans Reiser <reiser@idiom.com>
said:
> Vladimir and I are discussing how to implement allocate on flush in our next
> major version (not for 2.4) of reiserfs.
>> If you are going to reallocate on flush unformatted nodes you must be able
>> to:
Remember, there is a huge difference between allocate-on-flush and
reallocate-on-flush.  In the former case, you simply don't have
buffer_heads present until the final flush: everything has to be
maintained in the filesystem itself or the VM, not in the buffer
cache, until the final flush (because the buffer cache is really only
for storing blocks whose on-disk location is known).
In the reallocate case, a buffer_head b_fs_private pointer to
fs-specific metadata would allow the fs to deal with this
independently of the buffer cache layer itself.  For
allocate-on-flush, though, you need to be able to look up the
information from the VM, not from the buffer cache.
--Stephen
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/