Date: Tue, 10 Jul 2007 14:49:20 +0530
From: Satyam Sharma <>
Subject: [RFC][PATCH v2 -mm 0/9] netconsole: Multiple targets and dynamic reconfigurability
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/7/10/78

[0/9] netconsole: Multiple targets and dynamic reconfigurability
This patchset is a rework of the original idea and patches posted by
Keiichi Kii and Takayoshi Kochi at: 
http://lkml.org/lkml/2007/6/13/72
This is v2 of the patchset, the previous version is available at:
http://lkml.org/lkml/2007/7/4/107
This is diffed against 2.6.22-rc6-mm1 + the earlier netpoll fixlet and the
configfs cleanup patches (those are already merged in -mm AFAIK, and hence
not reproduced here).
[1/9] netconsole: Cleanups, codingstyle, prettyfication
[2/9] netconsole: Remove bogus check
[3/9] netconsole: Simplify boot/module option setup logic
[4/9] netconsole: Add some useful tips to documentation
[5/9] netconsole: Introduce netconsole_target
[6/9] netconsole: Introduce netconsole_netdev_notifier
[7/9] netconsole: Use netif_running() in write_msg()
[8/9] netconsole: Support multiple logging targets
[9/9] netconsole: Support dynamic reconfiguration using configfs
Changes since v1:
=================
* Split / merge various patches in the patchset as suggested in reviews.
* Get rid of redundant "id" and "dev_status" fields.
* Use netif_running() instead of IFF_UP.
* Explain the boot/module option setup simplification and the netdev
  notifier patches in more detail (justify why they're good / required).
* Get rid of possible trailing newline from echo(1) in store_dev_name().
* Fix a panic bug -- now, when no boot/module option is specified, we
  skip only the part that creates and inserts param string-created
  targets. Rest of the initialization (notifier, configfs subsystem)
  is done as usual.
* Get rid of lock-skipping special-casing where possible.
* Use config_item_name() instead of "empty_item".
* Introduce netpoll_print_options() in netpoll and use it.
* Style cleanups (reduce #ifdefs, indentation, whitespace fixes, etc).
* Miscellaneous fixes in documentation (as suggested in reviews).
About this patchset:
====================
What?
Support multiple remote logging targets in netconsole. Also, ability to
dynamically add or remove targets or modify parameters (IP, port, remote
MAC address) of targets at runtime, from userspace, using configfs.
Why?
From Keiichi Kii's original post:
[...] current netconsole is not flexible. For example, if you want to change
ip address for logging agent, in the case of built-in netconsole, you can't
change config except for changing boot parameter and rebooting your system,
or in the case of module netconsole, you need to remove it and reload
with different parameters. [...] and we have been losing serial console
port with PCs and Servers.
(... and especially laptops, I would add.)
Kindly review and comment.
Satyam
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/