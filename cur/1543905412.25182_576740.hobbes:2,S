Date: Mon, 30 Jul 2007 17:01:45 +0200
From: "Rafael J. Wysocki" <>
Subject: Re: [PATCH] APM support depends on CONFIG_PM_SLEEP
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/7/30/143

On Monday, 30 July 2007 12:12, Stephen Rothwell wrote:
> Commit 296699de6bdc717189a331ab6bbe90e05c94db06 broke building APM
> support if CONFIG_PM_SLEEP is not set.
Sorry for the breakage, my fault.
> Reported by Toralf FÃ¶rster <toralf.foerster@gmx.de>
> 
> Signed-off-by: Stephen Rothwell <sfr@canb.auug.org.au>
> ---
>  arch/i386/Kconfig |    2 +-
>  1 files changed, 1 insertions(+), 1 deletions(-)
> 
> -- 
> Cheers,
> Stephen Rothwell                    sfr@canb.auug.org.au
> 
> diff --git a/arch/i386/Kconfig b/arch/i386/Kconfig
> index abb582b..7eefa7d 100644
> --- a/arch/i386/Kconfig
> +++ b/arch/i386/Kconfig
> @@ -938,7 +938,7 @@ source "drivers/acpi/Kconfig"
> 
>  menuconfig APM
>  	tristate "APM (Advanced Power Management) BIOS support"
> -	depends on PM && !X86_VISWS
> +	depends on PM && !X86_VISWS && PM_SLEEP
PM_SLEEP depends on PM, so I'd do
+	depends on PM_SLEEP && !X86_VISWS
>  	---help---
>  	  APM is a BIOS specification for saving power using several different
>  	  techniques. This is mostly useful for battery powered laptops with
Greetings,
Rafael
-- 
"Premature optimization is the root of all evil." - Donald Knuth
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/