Date: Wed, 12 Jul 2006 20:56:00 +0200
From: Blaisorblade <>
Subject: Re: [uml-devel] [PATCH 4/5] UML - Reenable SysRq support
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/7/12/266

On Wednesday 12 July 2006 18:40, Jeff Dike wrote:
> Sysrq works fine on UML.
>
> Signed-off-by: Jeff Dike <jdike@addtoit.com>
>
> Index: linux-2.6.17/lib/Kconfig.debug
> ===================================================================
> --- linux-2.6.17.orig/lib/Kconfig.debug	2006-07-12 11:26:41.000000000 -0400
> +++ linux-2.6.17/lib/Kconfig.debug	2006-07-12 11:33:02.000000000 -0400
> @@ -18,7 +18,6 @@ config ENABLE_MUST_CHECK
>
>  config MAGIC_SYSRQ
>  	bool "Magic SysRq key"
> -	depends on !UML
>  	help
>  	  If you say Y here, you will have some control over the system even
>  	  if the system crashes for example during kernel debugging (e.g., you
Please reject this patch, the setting for UML is just elsewhere, in 
arch/um/Kconfig (and depends on MCONSOLE).
If kbuild doesn't handle well having an option declared twice now (it isn't 
very happy but it worked when I added the above dependency) we can rename the 
one in arch/um/Kconfig to MAGIC_SYSRQ_UML and make the one above like this 
(untested):
config MAGIC_SYSRQ
	bool
	prompt "Magic SysRq key" if !UML
	depends on MAGIC_SYSRQ_UML || !UML
	default y if UML
-- 
Inform me of my mistakes, so I can keep imitating Homer Simpson's "Doh!".
Paolo Giarrusso, aka Blaisorblade
http://www.user-mode-linux.org/~blaisorblade
Chiacchiera con i tuoi amici in tempo reale! 
 
http://it.yahoo.com/mail_it/foot/
*
http://it.messenger.yahoo.com
 
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/