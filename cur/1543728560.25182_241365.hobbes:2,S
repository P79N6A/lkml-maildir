Date: Thu, 12 Aug 2004 14:56:14 -0400
From: Alan Cox <>
Subject: Re: IDE hackery: lock fixes and hotplug controller stuff
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/8/12/163

On Thu, Aug 12, 2004 at 07:12:35PM +0200, Bartlomiej Zolnierkiewicz wrote:
> It is a correct analysis for /proc/ide/hdx/settings:ide-scsi but not 
> for /proc/ide/hdx/driver which works just fine (modulo being racy)
> and your patch removes both interfaces...
I see no viable way to fix it, and I see nobody using it so it should
die. If someone does want to keep it then they can rewrite the ide layer
to make it work.
BTW I've been over the proc stuff and fixed that up including all the
locking. I can now happily insmod it8212, rmmod it8212, insmod it8212 etc
and the /proc files behave. I did have to make a couple of tweaks to cover
the locking cases not covered. 
I also have the it8212 working in smart but non raid now. Seems issuing an
LBA 48 cache flush (0xEF) crashes the firmware which is why it died on load 
for some users.  To do that I've added hwif->raw_taskfile() so that an
interface can filter commands.
Next stop disk hot plugging.
Alan
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/