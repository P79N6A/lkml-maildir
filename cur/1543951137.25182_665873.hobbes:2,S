Date: Mon, 10 Mar 2008 21:17:07 +0100
From: "H. Peter Anvin" <>
Subject: Re: P6 NOPs again: MPSC?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/3/10/272

Hugh Dickins wrote:
> I've now noticed that the machine I call MPENTIUM4 for 32-bit kernels
> is called MPSC for 64-bit kernels, and in that case it still doesn't
> get the P6 NOPs which I'm guessing it ought to (yeah, I'm so excited
> about the speedup I can expect from P6 NOPs, can we perhaps have a
> little silvery "Using Genuine P6 NOPs" sticker to put on the box? ;)
> 
> I'm suspecting that the patch below is actually wrong, and that it's
> really the "(X86_64 || !X86_GENERIC) &&" which should be changed;
> but very unsure of my ground and what's right for CPU_GENERIC -
> the 32/64 heritage of x86/Kconfig.cpu rather confuses me.
> 
> Over to you to do the right thing, I'm hoping, please, Peter!
> 
X86_64 && !X86_GENERIC comes from not wanting to be a compatibility 
issue when compiling for generic CPUs.  There are some 32-bit otherwise 
i686-compatible chips (from VIA and Transmeta) which don't have these NOPs.
	-hpa