Date: Sun, 06 Jan 2008 19:01:20 +0100
From: Stefan Richter <>
Subject: Re: [PATCH 2/5] USB Kconfig: Select SCSI for USB Mass Storage support
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/6/195

Stefan Richter wrote:
> Al Boldi wrote:
>> Stefan Richter wrote:
>>> Still wrong. SCSI also needs HAS_DMA and SCSI_DMA.
>> I don't think so.  SCSI selects SCSI_DMA, it doesn't depend on it.
> 
> "A selects B" == "A depends on B, but please don't hide A when B is off
> and silently switch B on when A is switched on".
> 
> config SCSI
> 	tristate "SCSI device support"
> 	depends on BLOCK
> 	select SCSI_DMA if HAS_DMA
> 
> So, SCSI doesn't actually need SCSI_DMA per se, but it apparently needs
> it whenever HAS_DMA != n.
In fact, only a number of SCSI low-level drivers need SCSI_DMA.  But
libata and usb-storage are currently not among those drivers.  For them
it's currently harmless if SCSI_DMA is off.
SCSI_DMA only includes the symbols scsi_dma_map() and scsi_dma_unmap()
into the scsi core.  libata and usb-storage don't call these.
-- 
Stefan Richter
-=====-==--- ---= --==-
http://arcgraph.de/sr/