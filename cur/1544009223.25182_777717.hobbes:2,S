Date: Sat, 6 Dec 2008 09:27:26 -0800 (PST)
From: Linus Torvalds <>
Subject: Re: [RFC PATCH v1 2/3] Add %v support to vsnprintf()
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/12/6/101

On Sat, 6 Dec 2008, Nick Andrew wrote:
>
> Add %v support to vsnprintf()
No can do. gcc will always warn, and I don't want to see an extension that 
will generate unfixable warnings.
If you want to do this, you'd need to do it the same way we did some othe 
printf extensions, ie by not passing the valist entry itself, but 
passing the _pointer_ to it, and using "%pV" as the format modifier.
(Quite frankly, "va_list" can be rather large, so passing a pointer to it 
is probably a better idea anyway).
Of course, gcc may implement "va_list" as an array (or just a pointer) 
internally, and then it will be passed as a pointer anyway (and you'd not 
need the address-of), but that's certainly not in any way guaranteed, and 
is very possibly architecture-dependent.
			Linus