Date: Wed, 26 Jan 2000 16:40:27 +0100
From: Jens Axboe <>
Subject: RFC: request merges with active heads
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/1/26/123

Hi,
Currently we have a problem merging requests properly for low level
drivers that have active heads. Consider this:
64KB write comes in. The first block (assuming 2048 sector size here,
but that is not relevant) gets a new request. When __make_request
is invoked a second time it finds a current_request but skips this
one, because the driver might be working on it right now.
So instead of one nice request, the low level driver gets two. One
for the first block and a second with the rest merged. I propose
that we add a RQ_STARTED flag or similar to let ll_rw_blk determine
whether it is safe to merge with the current_request for drivers
that have an active request head.
Comments?
-- 
*  Jens Axboe <axboe@suse.de>
*  Linux CD-ROM Maintainer
*  
http://www.kernel.dk
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/