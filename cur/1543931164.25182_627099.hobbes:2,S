Date: Wed, 12 Dec 2007 12:46:13 -0500
From: "J. Bruce Fields" <>
Subject: Re: A peek at the future of storage
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/12/12/255

On Wed, Dec 12, 2007 at 08:46:18AM -0800, Daniel Phillips wrote:
> Incidentally, we ran our tests with 128 knfsd threads.  The default of 8 
> threads produces miserable performance on the SSD, which gave us a good 
> scare on our initial test run.  It would be very nice to implement an 
> algorithm to scale the knfsd thread pool automatically, in order to 
> eliminate this class of thing that can go wrong.  If somebody became 
> inspired to take on that little project that would be great, otherwise 
> it is in our pipeline for, hmm, Christmas delivery.  (Exactly which 
> Christmas is left unspecified.)
People have proposed writing a daemon that just reads /proc/net/rpc/nfsd
periodically and uses that to adjust the number of threads from
userspace, probably subject to some limits in a config file someplace.
(Think that could do the job, or is there some reason this would be
easier in the kernel?)
--b.