Date: Thu, 7 Mar 2002 22:15:27 +0100
From: Anders Gustafsson <>
Subject: [PATCH] make irtty.c compile again
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/3/7/241

Hi,
irtty.c includes irqueue.h which includes linux/cache.h (via
asm/processor.h <- asm/thread_info.h <- linux/thread_info.h <-
linux/spinlock.h)
both irqueue.h and cache.h defines a ALIGN (for different
purposes). 
This patch renames ALIGN in irqueue.h to IRDA_ALIGN.
Guess i'll go grepping for more places ALIGN might be defined.
-- 
//anders/g
--- linux-2.5.6-pre3/include/net/irda/irda.h	Thu Mar  7 19:13:01 2002
+++ linux-2.5.6-pre3-mekk/include/net/irda/irda.h	Thu Mar  7 21:24:18 2002
@@ -54,8 +54,8 @@
 #define IRDA_MIN(a, b) (((a) < (b)) ? (a) : (b))
 #endif
 
-#ifndef ALIGN
-#  define ALIGN __attribute__((aligned))
+#ifndef IRDA_ALIGN
+#  define IRDA_ALIGN __attribute__((aligned))
 #endif
 #ifndef PACK
 #  define PACK __attribute__((packed))
diff -ru linux-2.5.6-pre3/include/net/irda/irqueue.h linux-2.5.6-pre3-mekk/include/net/irda/irqueue.h
--- linux-2.5.6-pre3/include/net/irda/irqueue.h	Thu Mar  7 19:39:58 2002
+++ linux-2.5.6-pre3-mekk/include/net/irda/irqueue.h	Thu Mar  7 21:24:18 2002
@@ -49,8 +49,8 @@
 #define HASHBIN_SIZE   8
 #define HASHBIN_MASK   0x7
 
-#ifndef ALIGN 
-#define ALIGN __attribute__((aligned))
+#ifndef IRDA_ALIGN 
+#define IRDA_ALIGN __attribute__((aligned))
 #endif
 
 #define Q_NULL { NULL, NULL, "", 0 }
@@ -75,8 +75,8 @@
 	__u32      magic;
 	int        hb_type;
 	int        hb_size;
-	spinlock_t hb_mutex[HASHBIN_SIZE] ALIGN;
-	irda_queue_t   *hb_queue[HASHBIN_SIZE] ALIGN;
+	spinlock_t hb_mutex[HASHBIN_SIZE] IRDA_ALIGN;
+	irda_queue_t   *hb_queue[HASHBIN_SIZE] IRDA_ALIGN;
 
 	irda_queue_t* hb_current;
 } hashbin_t;
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/