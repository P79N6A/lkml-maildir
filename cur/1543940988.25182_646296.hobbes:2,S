Date: Thu, 31 Jan 2008 14:24:38 +0100
From: Ingo Molnar <>
Subject: Re: [PATCH 4/4] x86_64: increse MAX_EARLY_RES for NODE_DATA and bootmap
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/31/192

* Yinghai Lu <Yinghai.Lu@Sun.COM> wrote:
> ok, discard 3, and 4.
> 
> how about 2 v2?
i'm leaning towards v4, but the more fundamental breakage is in the 
early_node_mem() ad-hoc allocator that got butchered into this code a 
year ago:
  commit a8062231d80239cf3405982858c02aea21a6066a
  Author: Andi Kleen <ak@suse.de>
  Date:   Fri Apr 7 19:49:21 2006 +0200
      [PATCH] x86_64: Handle empty PXMs that only contain hotplug memory
  ...
  +static void * __init
  +early_node_mem(int nodeid, unsigned long start, unsigned long end,
  +             unsigned long size)
and we are now suffering the side-effects of that hack.
what i suspect we need instead is a proper early-allocator that works in 
the e820 space.
	Ingo