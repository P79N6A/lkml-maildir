Date: Sun, 20 May 2007 21:15:22 +1000
From: Herbert Xu <>
Subject: Re: [5/5] 2.6.22-rc2: known regressions
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/5/20/65

Stephen Hemminger <shemminger@linux-foundation.org> wrote:
> 
> Looks more like the IPV6 SNMP6 OOPS, I saw and fixed with:
> 
> commit 5632c5152aa621885d87ea0b8fdd5a6bb9f69c6f
> Author: Stephen Hemminger <shemminger@linux-foundation.org>
> Date:   Sat Apr 28 21:16:39 2007 -0700
> 
>    [IPV6]: Track device renames in snmp6.
> 
>    When network device's are renamed, the IPV6 snmp6 code
>    gets confused. It doesn't track name changes so it will OOPS
>    when network device's are removed.
> 
>    The fix is trivial, just unregister/re-register in notify handler.
> 
>    Signed-off-by: Stephen Hemminger <shemminger@linux-foundation.org>
>    Signed-off-by: David S. Miller <davem@davemloft.net>
It's quite possible that this fixes it, especially since the version
in Ubuntu's bug report came out the day before your fix went in :)
However, I don't really get why it's crashing in the first place.
Without your patch, if the device is renamed the proc entry just
keeps the original name.  When it goes down it should still get
removed correctly.
Could you explain this in a bit more detail?
Thanks,
-- 
Visit Openswan at 
http://www.openswan.org/
Email: Herbert Xu 许志壬 <herbert@gondor.apana.org.au>
Home Page: 
http://gondor.apana.org.au/herbert/
PGP Key: 
http://gondor.apana.org.au/herbert/pubkey.txt
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/