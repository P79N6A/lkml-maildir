Date: Sun, 21 Feb 1999 15:14:17 -0800
From: "G. Allen Morris III" <>
Subject: Re: knfsd : some questions
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/2/21/65

>>>Thierry Danis said:
 > 1)	using knfsd, is it necessary to run kexportfs -a in the startup
 > 	script. Here is what I am currently using :
mountd reloads the xtab file on startup.  So you don't have to run
`kexportfs -a' on starup unless you ran `kexportfs -ua' on shutdown.
There is also a `-r' switch to kexportfs that you should read about.
If you want the startup to be fast you should do two things:
1) Use IPs rather than names.
2) Don't use wildcards.
 > 2)	The servers may have to reboot (we are doing that perdiodically,
 > 	once every week sometimes). I have observed bad behavior from
 > 	the 2.2.x Linux clients when one of their server is rebooting
 > 	(the load gets very high, and the machine is almost unusable).
What is running up the load?  It could be that client programs are upset
that they can't find files.
 > 3)	We plan to replace an old Sun IPC which serves as DNS server,
 > 	NIS master, sendmail router (and deliver), samba, xntp, UUCP, plus
 > 	other things, (and which has a propension to CPU Panic up and
 > 	there these latests weeks) by a Linux box.
 > 	We need NFS performance for mail delivery (via procmail), so
 > 	for me the only reasonnable option is to use a 2.2.x kernel.
 > 	I guess we will have to wait a few more weeks for things to
 > 	stabilize, but what is your opinion ?
I know of no reason not to do this.  The problems that are being
reported about knfd have to do with subtle file semantics.  If you
are just exporting mail there should be no problem.  You do need to
make sure that you setup the locking correctly, though.
    Allen
---------------------------------
       G. Allen Morris III
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/