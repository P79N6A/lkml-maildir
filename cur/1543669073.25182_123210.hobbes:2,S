Date: Mon, 07 Apr 2003 12:05:54 -0400
From: Christopher Curtis <>
Subject: OOPS in airo driver, 2.4 serial, skbuff.c: 315
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/4/7/82

Marc Giger wrote:
> On Fri, 04 Apr 2003 17:47:55 -0500
> Christopher Curtis <chris.curtis@riptidesoftware.com> wrote:
>> > I use a cisco pcmcia aironet card.
>> > kernel: kernel BUG at skbuff.c:315!
>>
>>I have the same problem with 2.4.21-pre5; do you know of a patch?
> 
> Yep, look @ 
http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/airo-linux/airo-linux/kernel/
> This driver is fixed but I still have the same problem...it just takes a little more time until it shows up...
> IMPORTANT: Please report bugs to Javier Achirica <achirica@telefonica.net> AND to the lkml linux-kernel@vger.kernel.org!
Hello all,
I had been running a 2.4.19 kernel with the same configuration without 
any problems.  I was told that I had to cut the TxPower from 100mW to 
20mW and found that this could only be done in the prepatches for the 
2.4.x series, so I upgraded to the latest 2.4.21-pre5 kernel.  I had 
been using the card without any problems using apt-get.  Then I tried 
connecting to the machine using VNC.  The system would OOPS in under a 
minute, regularly and repeatedly.
This morning I came in regretting not only the time change, but the 
possibility that I'd have to spend the next few days bug hunting. 
However, it appears that there may be a 'tell': aux_bap.  Normally, the 
only airo.o option I specified was the SSID, which defaulted the aux_bap 
setting to 0.  I set this value to 1, disabled my firewall settings, and 
ran VNC again.  No crashes.  I re-enabled the firewall and let it run. 
No crashes.  It ran fine for about 1/2 hr.
I then removed the aux_bap parameter, reloaded the driver, and tried to 
test some more.  Within 10 seconds, before VNC had painted the full 
screen, I got:
airo: BAP error 4000 2ocal Loopback
Warning kfree_skb passed an skb still on a list (from d0ae27dc)
kernel BUG at skbuff.c:315!
invalid operand: 0000
...
and a bunch of other things I can't ksymoops.
I think the "ocal Loopback" is cruft from a previous ifconfig.  However, 
it may be important to note that I was doing an ifconfig when this 
happened (probably not).  FWIW: eth0 (onboard) printed fine, as did eth1 
(the airo), then the 'lo' was overwritten by the OOPS.
I hope this is helpful to someone,
Chris
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/