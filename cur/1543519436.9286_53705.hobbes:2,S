Date: Thu, 16 Dec 1999 09:50:10 +1100 (EST)
From: Neil Brown <>
Subject: Re: Ok, making ready for pre-2.4 and code-freeze..
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/12/15/231

(I trimmed the cc list ofthe individuals, but I expect they will
see it anyway).
On Tuesday December 14, viro@math.psu.edu wrote:
> 
> 
> On Tue, 14 Dec 1999, Alan Cox wrote:
> 
> > > For less critical stuff (== near post-2.4.0):
> > > 	->fhandle_to_dentry() (maybe it will go before the 2.4)
> > 
> > That one is pretty critical for NFS
> 
> OK, I'll bump it up in the queue.
Certainly I would like to have this, but I don't know that it is
critical for 2.4.  The new file-handle-to-dentry code in 2.3.current
works reasonably well, as long as you don't export a FAT filesystem.
However when specific support for nfsd is included in the vfs
interface, there also needs to be:
    dentry_to_filehandle
    sync_inode
    get_fs_attributes
dentry_to_filehandle and filehande_to_dentry should not expect to see
the whole filehandle, but only the filesystems specific part of it.
sync_inode is needed to force a SETATTR or a CREATE to disc before replying.
There also needs to be a way to force a symlink creation to disc -
maybe sync_inode could do that too?
get_fs_attributes should report about case-insensitivity, max filename
length, max link count, and possibly others.
I had in mind an nfsd_operations structure, but putting the various
operations in super_operations, and inode_operations as appropriate
would be reasonable.
NeilBrown
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/