Date: Sun, 16 Jan 2005 14:02:50 +0100
From: Nils Radtke <>
Subject: Re: ethX interface rx errors AND RE: Promise module (old) broken
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/1/16/66

  Hi, 
 a month and a half ago, I asked about a solution for the bad performance 
 of 8139too _and_ 3c509 cards.
Another email was about the bad performance of the PROMISE20565
controller and making hard disks go mad (and me, too).
Thx to Nick Warne, Bernd Eckenfels (both about RX errors), Bartlomiej
Zolnierkiewicz, Alan Pope (both about PROMISE20565) for answers and suggestions.
Both topics have more or less been solved (at least they are handled in a way
the system runs stably again), see below, read on:
The main (ethx RX errors) problem has not been solved yet. Still, there are 
RX errors.
But: they amount of RX errors has dramatically decreased!
What did I do?
1) plug the cards into different pci-slots. Mainly, I swapped all of the
plugged PCI cards one card slot above. Previously, the cards were
plugged in PCI slot 4 and 5, so they are now at 3 and for. I did this as
on the Asus P3BF mainboard slots 4 and 5 share interrupts with each
other. Slot 5 also shares IRQ with USB. Moreover, I cared about not to
let share interrupts between the slot the NICs and the PROMISE20565
cards are plugged. The PROMISE20565 controller card driver is also
something special and causing trouble on itself. More on that below.
The problem was the same with one 8139too and one 3c509 cards plugged.
Now, there are only two 8139too cards in the system, again.
2) switch to kernel 2.6.10 
Thats what took me some convincing with myself as 2.6.8-2.6.9 had caused
some serious issues with the beloved PROMISE20565 driver..
Hey, who dares wins! (sometimes) 
With 2.6.10 (and the PCI slots swapped) the RX errors are much less AND 
the PROMISE20565 controller works (almost) out of the box. 
The controller driver previously made me beleive a brandnew WD 120GB HDD 
be defective. 
But it isn't. It's the driver making the HDD shaking. 
Or better, has been. Now, the HDD is running fast (as it wasn't before) 
and w/o disk drive seek errors all the time, causing the kernel to 
read-only mount the disk. That was nasty. Better now.
(PROMISE20565 controller card is on a different PCI slot as well, now)
  Thanks for all your suggestions and answers!
    With kind regards,
      Nils Radtke
-- 
A+
* N.Radtke@                 * University of Stuttgart *    icq / lc   *
*      www.Think-Future.de  *    dep.comp.science     * 9336272/92045 *
:x                            UTM 32 0515651 5394088                 :)
   You just wait, I'll sin till I blow up!   -- Dylan Thomas 
[unhandled content-type:application/pgp-signature]