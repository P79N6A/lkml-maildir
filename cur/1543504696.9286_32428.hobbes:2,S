Date: Tue, 3 Aug 1999 12:33:35 +0200
From: Andi Kleen <>
Subject: Re: More linker magic..
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/8/3/54

On Tue, Aug 03, 1999 at 12:10:47PM +0200, Ingo Molnar wrote:
> 
> On 3 Aug 1999, Andi Kleen wrote:
> 
> > Would it make sense to add a "priority" argument to __initcall ?  This
> > would allow to express simple dependencies between modules. Of course
> > this could be emulated by immediate functions that do the traditional
> > manual initialization. 
> 
> wouldnt it be better to explicitly list initialization dependencies in
> some way? Thats a whole lot more generic and flexible than static
> 'priorities'. (eg. just because you introduce a new intermediate
> dependency you'd have to shift down all sub-modules.) The boot code then
> would resolve these dependencies. (and detect things like circular
> dependencies as well) 
Can't the Mathematicans express all that in a single number ? @)
The shifting down is no problem if you use a reasonable structure
in the linux/initpri.h #defines (all subsystems are SUBSYSBASE+ index,
SUBSYSBASE is defined on the "higher level" subsystem etc. - if all
is dependent on other symbols it is easy to change). 
Also trying too overengineer it is probably wasted time, because more and
more will shift to modules anyways, which already has a advanced dependency
system. If you really want arbitary dependencies then make the module system
work for all kernel modules (or rather everything would be a module, and
the kernel startup is just a special case of module loading). But this 
is really not 2.4 material ("no driver changes" etc)
-Andi
-- 
This is like TV. I don't like TV.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/