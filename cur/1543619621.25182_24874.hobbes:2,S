Date: 01 Feb 2002 08:32:40 +0200
From: Momchil Velikov <>
Subject: Re: [PATCH] Radix-tree pagecache for 2.5
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/2/1/3

>>>>> "Anton" == Anton Blanchard <anton@samba.org> writes:
Anton> Hi Ingo,
>> Yes, it's very nice. Anton Blanchard has benchmarked both patch variants
>> (tree vs. scalable-hash page buckets) for SMP scalability against the
>> stock hash, on big RAM, many CPUs boxes, via dbench load. He has found
>> performance of radix trees vs. scalable hash to be at least equivalent. (i
>> think Anton has a few links to show the resulting graphs.)
Anton> Here are some results on a 12 way machine. (2.4.16-splay is the radix
Anton> patch):
Anton> 
http://samba.org/~anton/linux/pagecache_locking/1/summary.png
A correction, "-splay" is the very first variant I posted, which used
splay trees for the page cache.
Anton> As you can see both patches give pretty much equal improvements.
Anton> The other problem with the current pagecache hash is that it maxes out
Anton> at order 9 (due to the get_free_pages limitation) which starts to hurt
Anton> at 4GB RAM and above. On a 32GB machine the average hashchain depth
Anton> was very high:
Anton> 
http://samba.org/~anton/linux/pagecache/pagecache_before.png
Anton> There were a few solutions (from davem and ingo) to allocate a larger
Anton> hash but with the radix patch we no longer have to worry about this.
Anton> So the radix patch solves 2 problems quite nicely :)
Anton> Anton
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/