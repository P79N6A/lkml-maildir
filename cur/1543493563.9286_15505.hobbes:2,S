Date: Thu, 22 Apr 1999 14:37:37 +0200 (CEST)
From: Tomasz Lemiech <>
Subject: BUG: 2.2.x and serial network interfaces
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/4/22/23

Hello,
  Sorry if this was already mentioned, but it's important for me.
  2.2.x (and also late versions of 2.1) kernels improperly handle serial
network devices, when the controlling daemon (pppd, dip, slattach) dies.
When I issue: killall -INT pppd, the daemon quits (ie. it writes "Exit" to
syslog) and sets the interface ppp* down. But when I issue: 
killall -9 pppd, the kernel doesn't set the interface down (as I think,
it should, and 2.0.x does). The problem looks identically when doing SLIP
connects with dip. Killing slattach is even more problematic - no matter
which signal I send to slattach, the interface sl0 persists. This causes
an annoying problem - the interface stays up, so the route via it
persists. On the next start of pppd, the daemon notices, that ppp0 is
busy, so it uses ppp1. But because 2.2.x adds routes automatically, pppd
also notices, that the requested route already exists (but via ppp0, not
ppp1). So what do I have? ppp0 up (configured by previous pppd instance),
ppp1 up (configured by new pppd) and the route which points to ppp0,
instead of ppp1. Maybe it sounds a bit difficult, but it's annoying. I
asked a few other people and they also experienced this problem. Does
anybody know, where the problem is? Any patches?
Regards,
			     	       *Szpajder* aka Tomasz Lemiech
				     <mailto: szpajder@staszic.waw.pl>
PS.: Appears with ppp 2.3.3, 2.3.4, 2.3.5, 2.3.7, 
SLIP 0.8.4-NET3.019-NEWTTY dip 3.3.7o-uri, slattach 1.1.91, all 2.2
kernels and late 2.1. Works fine on 2.0.x.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/