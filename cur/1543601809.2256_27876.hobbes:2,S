Date: Thu, 20 Sep 2001 15:29:19 -0700 (PDT)
From: "David S. Miller" <>
Subject: Re: flush_tlb_all in vmalloc_area_pages
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/9/20/206

   From: Andrea Arcangeli <andrea@suse.de>
   Date: Fri, 21 Sep 2001 00:25:47 +0200
   The only question I'd like to get a answer is "what is actually the
   data that can be virtually indexed) in the vmalloc range at the time we
   run vmalloc?" Where does it cames from?
>From the the direct PAGE_OFFSET mappings.
   Furthmore I recall on sparc you cannot flush the cache if you don't have
   a mapping in place,
This is only true of Hypersparc sparc32 chips for page based flushes,
not whole flushes.
   If anybody is using at boot time the vmalloc range for whatever purpuse
   it should be its own business to flush the cache before dropping the
   mappings from there.
That isn't the problem, it's dirty cache lines left over from the
usual access addresses for physical memory (ie. via PAGE_OFFSET linear
mappings).
Please, I would heavily suggest leaving this area until 2.5.x there
are already a traumatic amount of changes going on in 2.4.x
Later,
David S. Miller
davem@redhat.com
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/