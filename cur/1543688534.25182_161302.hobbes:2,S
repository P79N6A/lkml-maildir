Date: Fri, 29 Aug 2003 09:34:24 -0700
From: Andrew Morton <>
Subject: Re: 2.6.0-test4-mm3
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/8/29/146

Cliff White <cliffw@osdl.org> wrote:
>
> This also breaks STP. We installed module-init-tools using the 'moveold' 
> method,
> so we can still run 2.4.
> Our depmod is in /usr/local/sbin. 
> Using /sbin/depmod hoses us. Using PATH works for us.
Hrm, but your build must be playing up already:
dhcp-140-218:/usr/src/25> grep DEPMOD Makefile
DEPMOD          = /sbin/depmod
        @if [ -z "`$(DEPMOD) -V | grep module-init-tools`" ]; then \
        if [ -r System.map ]; then $(DEPMOD) -ae -F System.map $(depmod_opts) $(KERNELRELEASE); fi
> [root@stp1-002 linux]# depmod -V
> module-init-tools 0.9.12
> 
> [root@stp1-002 linux]# /sbin/depmod -V
> depmod version 2.4.22
> 
> [root@stp1-002 linux]# /usr/local/sbin/depmod -V
> module-init-tools 0.9.12
> 
> Please send patch, we'll get some tests moving.
--- 25/Makefile~old-module-tools-warning-fix	Fri Aug 29 09:31:46 2003
+++ 25-akpm/Makefile	Fri Aug 29 09:32:16 2003
@@ -609,7 +609,7 @@ _modinst_:
 	@if [ -z "`$(DEPMOD) -V | grep module-init-tools`" ]; then \
 		echo "Install a current version of module-init-tools"; \
 		echo "See 
http://www.codemonkey.org.uk/post-halloween-2.5.txt";
\
-		/bin/false; \
+		sleep 1; \
 	fi
 	@rm -rf $(MODLIB)/kernel
 	@rm -f $(MODLIB)/build
_
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/