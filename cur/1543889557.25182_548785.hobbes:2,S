Date: Thu, 24 May 2007 11:32:07 -0700
From: Roland Dreier <>
Subject: Re: Status of CONFIG_FORCED_INLINING?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/5/24/271

 > The problem is that inline functions in headers are intended to be 
 > called from different C files.
 > 
 > gcc might not inline it in the C files where it is called more than 
 > once.
 > 
 > But it will always inline it if it's called only once.
 > 
 > One of both will be suboptimal, but from gcc's perspective it was 
 > optimal.
Yes, we could probably get huge benefits from --combine and/or
-fwhole-program to let gcc see more than one file at a time.
But I still don't see the issue with having gcc do the best it can on
each file it compiles.  If you force the inlining, then that means
that on files where not inlining was better, you've forced gcc to
generate worse code.  (I don't see how not inlining could be locally
better on a single file but globally worse, even though it generated
better code on each compiled file)
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/