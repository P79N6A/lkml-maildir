Date: Wed, 4 Oct 2000 13:01:56 +0200 (CEST)
From: Urban Widmark <>
Subject: Re: smbfs.o error
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/10/4/64

On Wed, 4 Oct 2000, Aleksey Cheusov wrote:
> 1. error in smbfs.o
> 
> 2. I've SMBMOUNTed NT shared directory //server/sharename.
NT4 Service pack ?
>     SMBMOUNT returns 0 and I see the most of nested directories in
> //server/sharename, but
>    when I "CD" to directory "NTRS" smbfs.o write the following messages
> in log file and don't show subdirectories.
Could you send me an archive of some sort (zip, tgz) of the files in that
directory or, if the files are secret or large or something, a list of the
filenames. Preferrably as an archive of empty files.
Previous directory listing problems have all been related to what
filenames are put in the same dir and I would like to try and reproduce
this.
Bouns points if you can test that the files in the archive generates
problems when moved to a different NT box or to a different directory.
> 7.5
> smbmount version is 2.0.7
Thanks for a very complete report. I am looking into a few other reports
on dir listings that doesn't always work on various kernel version vs NT4,
OS/2, and NetApps.
If you feel like looking at the problem, it is almost certainly related to
fs/smbfs/proc.c and the smb_proc_readdir_long function.
That function was changed for 2.2.14 to fix a dir listing problem with
identical error messages as you get. It was changed again for 2.2.16 to
remove some code that was believed to be broken, causing lots of
complaints from people depending on that code. So it was added back for
2.2.17 or early 2.2.18pre (I forget). Testing these versions might show
something.
Also, smbclient does something very similar to smbfs, so testing smbclient
in 2.0.7 and perhaps some earlier version might help.
/Urban
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/