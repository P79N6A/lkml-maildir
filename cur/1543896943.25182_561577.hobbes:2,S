Date: Sat, 23 Jun 2007 14:42:21 -0400
From: Dave Jones <>
Subject: Re: [PATCH][AGPGART] intel_agp: don't load if no IGD and AGP port
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/6/23/192

On Sat, Jun 23, 2007 at 09:52:03AM -0700, Andrew Morton wrote:
 > > On Thu, 21 Jun 2007 13:43:18 +0800 Wang Zhenyu <zhenyu.z.wang@intel.com> wrote:
 > > Thanks Carlo to report this problem. The following patch should fix
 > > his and potential issue.
 > > 
 > > [AGPGART] intel_agp: don't load if no IGD detected and no AGP port
 > > 
 > > After i915 chip, GMCH has no AGP port. Origin bridge driver in device
 > > table will try to access illegal regs like APBASE, APSIZE, etc. This
 > > may cause problem.
 > > 
 > > So mark them as NULL in the table, we won't load if no IGD got detect
 > > and bridge has no AGP port.
 > 
 > Looking at the above, I have no way of telling what the actual bug is, nor
 > have I any way of telling what the consequences would be of not having this
 > patch in 2.6.22.  Nor can I tell whether we want it in 2.6.21.x.
 > 
 > I probably _could_ work this out, and kinda did with a bit of list-trolling
 > (verdict: needed in 2.6.22) but please, take care to describe the
 > importance of a patch in the changelog?
This got merged a day or two ago.
"will try to access illegal regs.." being the key part of the changelog
above.  Without this diff, it goes bang, and stops booting on certain
chipsets.
	Dave
-- 
http://www.codemonkey.org.uk
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/