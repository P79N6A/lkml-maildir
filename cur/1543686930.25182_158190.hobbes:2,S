Date: Mon, 18 Aug 2003 00:49:54 +0200
From: Petr Vandrovec <>
Subject: [PATCH] Recent i2c changes broke matroxfb
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/8/17/176

Hi Linus,
   Name member of i2c clients & adapters moved again back to the
i2c_* from generic device. Please apply following patch. Thanks to Petri
Koistinen for bringing this to my attention.
						Thanks,
							Petr Vandrovec
diff -urdN linux/drivers/video/matrox/i2c-matroxfb.c linux/drivers/video/matrox/i2c-matroxfb.c
--- linux/drivers/video/matrox/i2c-matroxfb.c	2003-08-17 23:32:54.000000000 +0200
+++ linux/drivers/video/matrox/i2c-matroxfb.c	2003-08-18 00:33:31.000000000 +0200
@@ -111,7 +111,7 @@
 	b->mask.data = data;
 	b->mask.clock = clock;
 	b->adapter = matrox_i2c_adapter_template;
-	snprintf(b->adapter.dev.name, DEVICE_NAME_SIZE, name,
+	snprintf(b->adapter.name, DEVICE_NAME_SIZE, name,
 		minfo->fbcon.node);
 	i2c_set_adapdata(&b->adapter, b);
 	b->adapter.algo_data = &b->bac;
diff -urdN linux/drivers/video/matrox/matroxfb_maven.c linux/drivers/video/matrox/matroxfb_maven.c
--- linux/drivers/video/matrox/matroxfb_maven.c	2003-08-17 23:32:04.000000000 +0200
+++ linux/drivers/video/matrox/matroxfb_maven.c	2003-08-18 00:34:29.000000000 +0200
@@ -1255,7 +1255,7 @@
 	new_client->adapter = adapter;
 	new_client->driver = &maven_driver;
 	new_client->flags = 0;
-	strcpy(new_client->dev.name, "maven client");
+	strcpy(new_client->name, "maven client");
 	if ((err = i2c_attach_client(new_client)))
 		goto ERROR3;
 	err = maven_init_client(new_client);
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/