Date: Fri, 18 Jan 2008 13:56:35 -0500
From: Dave Jones <>
Subject: Re: [PATCH] X86: fix typo PAT to X86_PAT
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/18/419

On Fri, Jan 18, 2008 at 10:47:05AM -0800, Venki Pallipadi wrote:
 > >This exclusion is going to be a real pain in the ass for 
 > >distro kernels.
 > >It's impossible for example to build a kernel that will now support
 > >the MTRR-alike registers on the AMD K6/early Cyrix etc and also
 > >support PAT.
 > 
 > Actually, this exclusion will not work at all with the current code.
 > Infact it should be PAT selects MTRR, for the current code. As
 > pat_init() is called during mtrr init as the rules for how to change PAT
 > and how to change MTRR are same. Further, MTRR is always required on
 > SMP, as we read the MTRR setting from boot CPU and set it on Aps at boot
 > time. We should only remove the /proc/mtrr write permissions with
 > CONFIG_PAT. We need to deprecate it for a while before that...
 > Ingo, can you remove this PAT MTRR exclusion.
The removal of write-permission also needs to be decided at runtime rather than
compile time, or we screw over the "doesn't support PAT" CPUs in distro kernels.
	Dave
-- 
http://www.codemonkey.org.uk