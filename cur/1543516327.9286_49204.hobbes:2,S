Date: Wed, 17 Nov 1999 10:46:14 +0000
From: Hannes Reinecke <>
Subject: OOPS on writing to FAT-file
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/11/17/22

Hiya,
yesterday I tried using Staroffice, which crashed horribly on trying to
write to a (V)FAT file. I almost felt like on MSWin :-(.
Machine: AMD K6-II 233, 64 Mb, Linux 2.3.28, gcc-2.95
Nov 16 16:51:31 rm233b kernel: kernel BUG at file.c:94! 
Nov 16 16:51:31 rm233b kernel: invalid operand: 0000 
Nov 16 16:51:31 rm233b kernel: CPU:    0 
Nov 16 16:51:31 rm233b kernel: EIP:    0010:[<c014a6fd>] 
Using defaults from ksymoops -t elf32-i386 -a i386
Nov 16 16:51:31 rm233b kernel: EFLAGS: 00010282 
Nov 16 16:51:31 rm233b kernel: eax: 00000019   ebx: 00000000   ecx:
00000031   edx: 0000000a 
Nov 16 16:51:31 rm233b kernel: esi: 00000001   edi: c163a320   ebp:
c2dd6b40   esp: c2a0de60 
Nov 16 16:51:31 rm233b kernel: ds: 0018   es: 0018   ss: 0018 
Nov 16 16:51:31 rm233b kernel: Process smbd (pid: 4841,
stackpage=c2a0d000) 
Nov 16 16:51:31 rm233b kernel: Stack: 0000005e 00000001 00000200
00000008 00000001 c012be56 c163a320 00000001  
Nov 16 16:51:31 rm233b kernel:        c2dd6b40 00000001 c10a3900
00000001 00000000 00000000 00000000 c28e4200  
Nov 16 16:51:31 rm233b kernel:        c28e4200 c2dd6ba0 00000001
00000000 00000200 00000000 00000007 00000001  
Nov 16 16:51:31 rm233b kernel: Call Trace: [<c012be56>] [<c014a8ae>]
[<c012213e>] [<c014a91f>] [<c014a780>] [<c014a8f2>] [<c012925d>]  
Nov 16 16:51:31 rm233b kernel:        [<c010b854>]  
Nov 16 16:51:31 rm233b kernel: Code: 0f 0b 83 c4 0c b8 fb ff ff ff eb 70
8d b4 26 00 00 00 00 8b  
>>EIP; c014a6fd <fat_get_block+5d/e0>   <=====
Trace; c012be56 <block_write_cont_page+276/49c>
Trace; c014a8ae <fat_write_partial_page+12e/148>
Trace; c012213e <generic_file_write+256/330>
Trace; c014a91f <default_fat_file_write+27/5c>
Trace; c014a780 <fat_write_partial_page+0/148>
Trace; c014a8f2 <fat_file_write+2a/30>
Trace; c012925d <sys_write+bd/dc>
Trace; c010b854 <system_call+34/40>
Code;  c014a6fd <fat_get_block+5d/e0>
00000000 <_EIP>:
Code;  c014a6fd <fat_get_block+5d/e0>   <=====
   0:   0f 0b                     ud2a      <=====
Code;  c014a6ff <fat_get_block+5f/e0>
   2:   83 c4 0c                  add    $0xc,%esp
Code;  c014a702 <fat_get_block+62/e0>
   5:   b8 fb ff ff ff            mov    $0xfffffffb,%eax
Code;  c014a707 <fat_get_block+67/e0>
   a:   eb 70                     jmp    7c <_EIP+0x7c> c014a779
<fat_get_block+d9/e0>
Code;  c014a709 <fat_get_block+69/e0>
   c:   8d b4 26 00 00 00 00      lea    0x0(%esi,1),%esi
Code;  c014a710 <fat_get_block+70/e0>
  13:   8b 00                     mov    (%eax),%eax
-- 
Hannes Reinecke                                 <civhr@civ.hw.ac.uk>
Fluid Loading and Instrumentation Center        Tel: (+44) 131 451 3149
Dept. of Civil & Offshore Engineering           Fax: (+44) 131 451 3154
Heriot Watt University, Edinburgh EH14 4AS
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/