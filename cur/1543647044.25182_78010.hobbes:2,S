Date: Tue, 8 Oct 2002 12:52:23 -0700
From: Chris Wedgwood <>
Subject: Re: [PATCH] O_STREAMING - flag for optimal streaming I/O
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/10/8/237

On Tue, Oct 08, 2002 at 03:17:16PM -0400, Robert Love wrote:
> Yep.  Linux treats most "hints" (e.g. madvise) as a requirement - it
> fails if it cannot do it.  That is against the spec most of the
> time, but oh well...
There is no spec for O_DIRECT... SGI 'invented' this in '93 or perhaps
earlier (but the idea wasn't new) for IRIX.
O_DIRECT is a very special thing, you shouldn't ask for this unless
yoy know you want it and how to deal with it --- treating it as
anything less that a requirement is bogus IMO.
> Shrug.  I do not have much experience with O_DIRECT.  I suspect the
> synchronous nature and the requirement of aligned buffers is not
> ideal.
I'm not sure how being synchornous matters if you use a different
thread (perhaps it's a pain), this also allows your own user-space
code to implement read-ahead?  Buffer alignment issues in practice
really aren't that bad.
If someone can think of a meaningful benchmark that would be cool; if
not, then I'll hack up the code I wrote to stream DVD vobs about and
see how that compares.
  --cw
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/