Date: Thu, 06 Jan 2000 12:46:36 +0100
From: Martin Costabel <>
Subject: Re: 2.3.36-USB-keyboard: missing scancode
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/1/6/59

Vojtech Pavlik wrote:
> 
> On Thu, Jan 06, 2000 at 11:48:09AM +0100, Martin Costabel wrote:
> 
> > Was the kernel USB code ever supposed to work on anything but US
> > keyboards?
> > On Apple ISO USB keyboards in any case, there were always 2 keys
> > (scancode 50 and 100) unmapped by the keycode matrix. From looking at
> > the 2.3.36 version, this doesn't seem to have changed. (This cannot
> > really be tested on a Pmac, because the PPC architecture was left behind
> > at 2.3.29 or so).
> 
> Well, I tried to include as many key mappings as possible. If you send
> me the key meanings and scancodes, I'll add them to the tables.
On a French Apple USB ISO keyboard, they are
- "50 = grave poundsterling(?)", that would be "backslash bar" for a
usb.map,
   same as scancode 49, so there should be a "43" instead of "0" at   
   usb_kbd_keycode[50]
- "100 = at numbersign". This key doesn't exist on Apple ANSI keyboards. 
   In the USB->ADB map, this should be mapped to keycode 10, so if I
understand 
   correctly, because of usb_kbd_keycode[100]=86, there 
   should be a keybdev_mac_codes[86]=10 (it is 0 right now.)
This will still not be quite perfect (and it's impossible to get it
perfect, I think). The keys 100=at/numbersign and 53=less/greater will
be interchanged compared to an Apple ADB keyboard (you can't interchange
them for ISO USB keyboards without perturbing ANSI USB keyboards), but
at least the keys produce non-void keycodes that can be redefined using
a userspace keymap.
I apologize for any possible incorrectness in the above. I don't have
any specs, this is all from experience.
--
Martin
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/