Date: Thu, 20 Dec 2007 03:59:35 -0800 (PST)
From: Roland McGrath <>
Subject: [PATCH -mm 26/43] x86-64 wired cpu_has macros
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/12/20/111

This adds hard-wired definitions for the remaining cpu_has_* macros
that correspond to flags required-features.h demands are set for
64-bit.  Using these can efficiently avoid some #ifdef's when
merging 32-bit and 64-bit code together.
Signed-off-by: Roland McGrath <roland@redhat.com>
Signed-off-by: Ingo Molnar <mingo@elte.hu>
Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
---
 include/asm-x86/cpufeature.h |   12 ++++++++++++
 1 files changed, 12 insertions(+), 0 deletions(-)
diff --git a/include/asm-x86/cpufeature.h b/include/asm-x86/cpufeature.h
index 87dd900..75e2f78 100644
--- a/include/asm-x86/cpufeature.h
+++ b/include/asm-x86/cpufeature.h
@@ -192,9 +192,21 @@
 #undef  cpu_has_centaur_mcr
 #define cpu_has_centaur_mcr	0
 
+#undef  cpu_has_pse
+#define cpu_has_pse		1
+
 #undef  cpu_has_pge
 #define cpu_has_pge		1
 
+#undef  cpu_has_xmm
+#define cpu_has_xmm		1
+
+#undef  cpu_has_xmm2
+#define cpu_has_xmm2		1
+
+#undef  cpu_has_fxsr
+#define cpu_has_fxsr		1
+
 #endif /* CONFIG_X86_64 */
 
 #endif /* _ASM_X86_CPUFEATURE_H */
-- 
1.5.3.6