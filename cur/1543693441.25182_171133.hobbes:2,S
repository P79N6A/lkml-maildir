Date: Tue, 07 Oct 2003 17:17:23 -0400
From: Chris Meadors <>
Subject: Re: devfs and udev
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/10/7/187

On Tue, 2003-10-07 at 16:52, Greg KH wrote:
> On Tue, Oct 07, 2003 at 11:47:41PM +0300, insecure wrote:
> > It seems that we have a bit of misunderstanding here.
> > 
> > I just don't want to go back to /dev being actually placed on
> > real, on-disk fs.
> > 
> > I won't mind if naming scheme will change as long
> > as device names start with '/dev/' and appear
> > there (semi-)automagically. That's what I call devfs.
> > If udev can do this, I am all for that.
> 
> udev can do this.  Is there some documentation that you read that has
> suggested otherwise?
Lets see if I can make this clear, devfs is a virtual file system.  If I
mount my root drive without mounting devfs, the /dev directory is
empty.  udev is not like this, it is like the normal /dev that can be
built with mknod, special files in a real filesystem.  But udev is told
by the kernel what files to make and remove.  So it is still a dynamic
filesystem, just in userland with kernel notifications rather than a
filesystem that is entirely in kernel space.
devfsd could use a "/dev-state" (or similar) directory to preserve the
state of any changes made to the virtual filesystem using normal
userland tools are mirrored in that directory.
I am also a huge devfs fan.  I was building 2.2.x kernels with Richard's
patches before 2.4.0 was released.  I like just having an empty /dev and
knowing the kernel will take care of everything I need at boot.
I'm thinking this will not exactly work with udev, as you will need a
few seed nodes to get to userland so udev can be started.  Then udev
will create the entries for devices that actually exist on the machine,
and then these entries will still be present at the next boot.  So it
will just be a problem for initial installs.
Right?
I can handle all of this.  I'm flexible.  Just make it work.  :)
-- 
Chris
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/