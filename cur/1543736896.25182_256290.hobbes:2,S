Date: Wed, 29 Sep 2004 18:19:05 +0200
From: maks attems <>
Subject: [patch 2.4] menuconfig fix crash due to infinite recursion
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/9/29/157

gawk(1) tells that getline "returns 0 on end of file and -1 on an error."
in current script for menuconfig if getline has an error,
it is still treated as true.
2.6 don't use that script anymore.
fix suggestion from Aharon Robbins <arnold@skeeve.com>
debian bts has 2 bugs open concerning that issue,
this is the one containing belows fix:
http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=147469
[TM] tested.
menuconfig still works for me. ;)
--- a/scripts/Menuconfig	2002-08-03 02:39:46.000000000 +0200
+++ b/scripts/Menuconfig	2004-09-29 18:00:29.000000000 +0200
@@ -714,7 +714,7 @@ BEGIN {
 
 function parser(ifile,menu) {
 
-	while (getline <ifile) {
+	while ((getline < ifile) > 0) {
 		if ($1 == "mainmenu_option") {
 			comment_is_option = "1"
 		}
--
maks
kernel janitor  	
http://janitor.kernelnewbies.org/
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/