Date: Fri, 6 Feb 2004 21:30:10 +1100
From: Anton Blanchard <>
Subject: Re: [PATCH] Load balancing problem in 2.6.2-mm1
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/2/6/49

Hi,
> This patch allows for this_load to set max_load, which if I understand
> the logic properly is correct.  It then adds a check to imbalance to make
> sure a negative number hasn't been coerced into a large positive number.
> With this patch applied, the algorithm is *much* more conservative ...
> maybe *too* conservative but that's for another round of testing ...
Good stuff, I just gave the patch a spin and things seem a little
calmer. However Im still seeing a lot of balancing going on within a
node.
Setup:
2 threads per cpu.
2 nodes of 16 threads each.
I ran a single "yes > /dev/null"
And it looks like that process is bouncing around the entire node.
Below is a 2 second average.
Anton
cpu    user  system    idle             cpu    user  system    idle
node 0:
cpu0      2       0      99             cpu1      9       0      91
cpu2      1       0      99             cpu3      8       0      92
cpu4      3       0      97             cpu5     10       0      90
cpu6      2       0      98             cpu7     10       0      90
cpu8      2       0      98             cpu9      9       0      90
cpu10     3       0      96             cpu11     9       0      90
cpu12     2       0      98             cpu13    10       0      90
cpu14     2       1      97             cpu15    10       1      89
node 1:
cpu16     0       0     100             cpu17     0       0     100
cpu18     0       0     101             cpu19     0       0     100
cpu20     0       0     100             cpu21     0       0     101
cpu22     0       0     101             cpu23     0       0     100
cpu24     0       0     100             cpu25     0       0     100
cpu26     0       0     100             cpu27     0       0     100
cpu28     0       0     101             cpu29     0       0     100
cpu30     0       0     100             cpu31     0       0     100
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/