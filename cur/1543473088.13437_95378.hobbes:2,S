Date: 26 Dec 1998 12:34:52 -0800
From: (david parsons)
Subject: Re: scary ext2 filesystem question
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1998/12/26/51

In article <linux.kernel.m3iuezxr3m.fsf@trantor.cosmic.com>,
Mirian Crzig Lennox  <mirian@xensei.com> wrote:
>o.r.c@p.e.l.l.p.o.r.t.l.a.n.d.o.r.u.s (david parsons) writes:
>> >Obviously, if [any] computer system crashes, bad things can happen.
>> >That was not my point of confusion; rather, I was bewildered because
>> >the author seemed to be implying that these kinds of problems could
>> >occur *even during normal filesystem operation*.
>> 
>>     The comment about fsck failing was, at least to me, pretty clear
>>     indication that the author was talking about what happens during
>>     a crash.
>
>I agree that that would make the most sense, but that's *not* what the 
>author wrote:
>
>"Although the file system consistency check would ensure that the file
> system is consistent, the lack of ordering on operations can lead to
> confused applications or, even worse, crashing applications because of
> the inconsistencies in the order of modifications to the file system."
>
>He's talking about events *leading up to* a crash (after fsck has
>succeeded).
  Well, I'm reading this in exactly the opposite way -- fsck silently
  assigning metadata improperly, leading to garbaged and/or misplaced
  files.   (But in either case, I don't have enough context to make
  more than a wild guess about what the author intended to say.)
>> >I'm inclined to agree, especially since elsewhere he refers to ext2 as
>> >"the fast and unsafe grandchild" of FFS.
>> 
>>     I don't know if it's a grandchild of FFS, but it is a little bit
>>     less safe theoretically
>
>Very very extreeeeeeemely marginally less safe, maybe... and even then
>there's much room for debate -- FFS didn't get its nickname "Fast n'
>Loose Filesystem" for nothing. :)
   It may depend on the type of load that's being applied to the filesystem.
   I'd suspect that ext2fs is a lot more likely to leave filesystem poop
   all over the platter when the system crashes than it is to leave meta-
   correct junk there, so at least from the dubious evidence of all the
   times McAfee's _WebShield_ product crashed under heavy load (an artifact
   of using 2.0.28 as the base kernel) and ended up rebuilding filesystems
   after fsck gave up in despair.
   It's certainly not something that's likely to show up on regular machines
   (the test case I was using to provoke these crashes was to ram several
   thousand connections, and several gigabytes of net traffic, through the
   box as quickly as possible) or workstations.
                 ____
   david parsons \bi/ You never needed that copy of /etc/password, did you?
                  \/
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/