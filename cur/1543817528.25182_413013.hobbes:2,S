Date: Sat, 01 Apr 2006 20:00:27 +0200
From: Mike Galbraith <>
Subject: Re: [patch 2.6.16-mm2 5/9] sched throttle tree extract - correct idle sleep logic
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/4/1/56

On Sat, 2006-04-01 at 11:53 -0500, Lee Revell wrote:
> On Sat, 2006-04-01 at 10:59 +0200, Mike Galbraith wrote:
> > This patch corrects the idle sleep logic to place a long sleeping task
> > into the runqueue at a barely interactive priority such that it can
> > not destroy interactivity should it immediately begin consuming
> > massive cpu. 
> 
> Did you test this extensively with bloated apps like Evolution and
> Firefox that need to be scheduled as interactive tasks even though they
> often peg the CPU?
I use both Evolution and Firefox with no problems.  Well, no problems
isn't quite true, Evolution slogs along terribly when IO is going on,
but that isn't a scheduler issue.  My desktop experience has zero
problems with these patches, but YMMV.
These patches are much more about anti-starvation than interactive task
selection.  Tasks which were scheduled as interactive before should
remain so, but that's not to say that they won't ever be throttled.
There is no way to differentiate between nice cpu hog and evil cpu hog,
and these patches do no even attempt to do so.  These patches simply
enforce a set of rules.  There is no doubt in my mind that these rules
will not be favorable to every interactive task situation.
I can give you one right off the top of my head.  A visualization for
your mp3 player is a pure cpu hog right from the start, and will be
throttled.  If you test this, you'll see that despite that, it does a
pretty darn good job with the problem.
	-Mike
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/