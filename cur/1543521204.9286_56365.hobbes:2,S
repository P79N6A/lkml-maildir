Date: Fri, 7 Jan 2000 18:45:15 +0100
From: Joop Stakenborg <>
Subject: Re: 2.3.37 compile breaks in isapnp.o, probing PCI bios
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/1/7/186

On Fri, Jan 07, 2000 at 04:38:42PM +0100, Martin Mares wrote:
> Hello,
> 
> > PCI: BIOS reporting unknown device 00:00
> > PCI: Device 00:00 not found by BIOS
> > PCI: BIOS reporting unknown device 00:08
> > PCI: Device 00:08 not found by BIOS
> > PCI: BIOS reporting unknown device 00:38
> > PCI: Device 00:38 not found by BIOS
> > PCI: BIOS reporting unknown device 00:39
> > PCI: Device 00:39 not found by BIOS
> > PCI: BIOS reporting unknown device 00:3b
> > PCI: Device 00:3b not found by BIOS
> > PCI: BIOS reporting unknown device 00:40
> > PCI: Device 00:40 not found by BIOS
> > PCI: BIOS reporting unknown device 00:48
> > PCI: Device 00:48 not found by BIOS
> > PCI: BIOS reporting unknown device 00:50
> > PCI: Device 00:50 not found by BIOS
> 
>    Please try this fix.
> 
> 				Have a nice fortnight
> -- 
> Martin `MJ' Mares   <mj@ucw.cz>   
http://atrey.karlin.mff.cuni.cz/~mj/
> Faculty of Math and Physics, Charles University, Prague, Czech Rep., Earth
> "Spelling checkers at maximum!  Fire!"
> 
> 
> --- arch/i386/kernel/pci-pc.c.mj	Fri Jan  7 16:36:07 2000
> +++ arch/i386/kernel/pci-pc.c	Fri Jan  7 16:36:07 2000
> @@ -633,9 +633,8 @@
>  	unsigned char bus, devfn;
> 
>  	DBG("PCI: Sorting device list...\n");
> -	while (pci_devices.next != &pci_devices) {
> +	while (!list_empty(&pci_devices)) {
>  		ln = pci_devices.next;
> -		list_del(ln);
>  		dev = pci_dev_g(ln);
>  		idx = found = 0;
>  		while (pci_bios_find_device(dev->vendor, dev->device, idx, &bus, &devfn) == PCIBIOS_SUCCESSFUL) {
> 
Looks okay now:
Jan  7 18:41:09 aba kernel: POSIX conformance testing by UNIFIX
Jan  7 18:41:09 aba kernel: PCI: PCI BIOS revision 2.10 entry at 0xfb0e0
Jan  7 18:41:09 aba kernel: PCI: Using configuration type 1
Jan  7 18:41:09 aba kernel: PCI: Probing PCI hardware
Thanks a lot,
Joop
-- 
 Joop Stakenborg PA4TU, ex-PA3ABA 
      <pa3aba@debian.org>
 Linux Amateur Radio Software Database
    
http://radio.linux.org.au
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/