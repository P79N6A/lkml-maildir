Date: Mon, 14 Nov 2005 15:23:45 -0600
From: "Serge E. Hallyn" <>
Subject: [RFC] [PATCH 04/13] Change pid accesses: include/.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/11/14/179

Replace-Subject: Change pid accesses: include/.
From: Serge Hallyn <serue@us.ibm.com>
Change pid accesses under include/.
Signed-off-by: Dave Hansen <haveblue@us.ibm.com>
Signed-off-by: Serge Hallyn <serue@us.ibm.com>
---
 include/linux/reiserfs_fs.h |    2 +-
 include/net/scm.h           |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)
Index: linux-2.6.15-rc1/include/linux/reiserfs_fs.h
===================================================================
--- linux-2.6.15-rc1.orig/include/linux/reiserfs_fs.h
+++ linux-2.6.15-rc1/include/linux/reiserfs_fs.h
@@ -83,7 +83,7 @@ void reiserfs_warning(struct super_block
 if( !( cond ) ) 								\
   reiserfs_panic( NULL, "reiserfs[%i]: assertion " #cond " failed at "	\
 		  __FILE__ ":%i:%s: " format "\n",		\
-		  in_interrupt() ? -1 : current -> pid, __LINE__ , __FUNCTION__ , ##args )
+		  in_interrupt() ? -1 : task_pid(current), __LINE__ , __FUNCTION__ , ##args )
 
 #if defined( CONFIG_REISERFS_CHECK )
 #define RFALSE( cond, format, args... ) RASSERT( !( cond ), format, ##args )
Index: linux-2.6.15-rc1/include/net/scm.h
===================================================================
--- linux-2.6.15-rc1.orig/include/net/scm.h
+++ linux-2.6.15-rc1/include/net/scm.h
@@ -40,7 +40,7 @@ static __inline__ int scm_send(struct so
 	memset(scm, 0, sizeof(*scm));
 	scm->creds.uid = current->uid;
 	scm->creds.gid = current->gid;
-	scm->creds.pid = current->tgid;
+	scm->creds.pid = task_tgid(current);
 	if (msg->msg_controllen <= 0)
 		return 0;
 	return __scm_send(sock, msg, scm);
--
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/