Date: Wed, 01 Nov 2006 17:51:20 -0800
From: Zach Brown <>
Subject: Re: [PATCH] dio: lock refcount operations
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/11/1/428

> zach.brown> that path before the recent dio completion patch set.  We
> zach.brown> shouldn't expect significant performance regression from
> zach.brown> returning to the behaviour that existed before the completion
> zach.brown> clean up work. 
> 
> Are you going to quantify this at all?  I think we should.
I spotted some free time on an old dual athlon and got an initial look
at the cpu cost of the dio cleanup patches currently in -mm.
I ran two aio-stress instances doing O_DIRECT 64k sequential reads and
writes to an existing 1gig file on ext3 on an old pata drive.  I ran a
pair of cycle soakers measuring cpu load every second.  After trimming
out the 8 highest and lowest samples the remaining samples were
averaged.  I did this three times against 2.6.19-rc4-mm1 before and
after applying the dio-* patches.
before: 5.02% 5.23% 5.27%
after:  5.27% 5.33% 5.32%
So I'm not *gravely* concerned that we've regressed, but it'd be nice to
measure the impact of the dio-* patches on more capable hardware.
- z
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/