Date: Tue, 11 Mar 2003 21:08:50 -0500
From: Xiong Jiang <>
Subject: [Bug] module unloading or unmap_vma bug ?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/3/11/215

Hi, folks,
Maybe this was reported or maybe not...
Plain 2.5.64 kernel, with isofs as modules, using the new module-init-tool.
Try modprobe isofs and unload it, then try it again, then I got following
segfault. Then modules system got something wrong and have to reboot.
And shutdown procedure is halted when iptable service is to be stopped.
Here is now to reproduce it:
/sbin/modprobe isofs
/sbin/rmmod isofs
/sbin/rmmod zlib_inflate
/sbin/modprobe isofs
/sbin/rmmod isofs
Process rmmod (pid: 693, threadinfo=cd096000 task=cd2d07c0)
Stack: 40017000 cd097f38 c0141bf4 c03035a4 d0864d74 d0864d60 00000000 cd097f2c
       c01aba94 d0864d74 d0864d74 cd097f3c c01abab4 d0864d74 00000000 cd097f50
       c016a562 d0864d74 c0288518 d0864f40 cd097f5c d0861ac2 d0864d60 cd097fbc
Call Trace:
 [<c0141bf4>] unmap_vmas+0xc4/0x220
 [<d0864d74>] iso9660_fs_type+0x14/0x80 [isofs]
 [<d0864d60>] iso9660_fs_type+0x0/0x80 [isofs]
 [<c01aba94>] kobject_del+0x14/0x20
 [<d0864d74>] iso9660_fs_type+0x14/0x80 [isofs]
 [<d0864d74>] iso9660_fs_type+0x14/0x80 [isofs]
 [<c01abab4>] kobject_unregister+0x14/0x20
 [<d0864d74>] iso9660_fs_type+0x14/0x80 [isofs]
 [<c016a562>] unregister_filesystem+0x32/0x40
 [<d0864d74>] iso9660_fs_type+0x14/0x80 [isofs]
 [<d0864f40>] +0x0/0x140 [isofs]
 [<d0861ac2>] +0x12/0x20 [isofs]
 [<d0864d60>] iso9660_fs_type+0x0/0x80 [isofs]
 [<c01330d3>] sys_delete_module+0x1b3/0x1f0
 [<c0145667>] sys_munmap+0x57/0x80
 [<c010b282>] sysenter_entry+0x52/0x70
Code: 0f 0b 0a 01 56 1e 26 c0 ff 07 83 4f 04 08 85 ff 0f 84 37 01
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/