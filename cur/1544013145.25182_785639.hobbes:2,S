Date: Fri, 2 Jan 2009 00:03:43 +0800
From: Yan Li <>
Subject: Enable CONFIG_USB_SUSPEND by default or some mobile HD can't be unplugged safely
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2009/1/1/48

Hello List,
By default CONFIG_USB_SUSPEND is not enabled and today I got bite by
this when I got a new WDC My Book hard drive. I have no way to unplug
it safely, according to it's manual, with a kernel that doesn't have
CONFIG_USB_SUSPEND=y.
On it's manual read "you should unplug and remove the device only when
the light is off." On Linux unmounting it won't turn it's light off
and I can feel it's motor is still running.  The only way to unplug it
properly on a Linux system, as to my knowledge, is to echo `suspend'
to `/sys/bus/usb/devices/$DEV/power/level'. And one has to have
CONFIG_USB_SUSPEND=y to do this.
On Windows and Mac OS, `safely remove this device' function effectly
turns it into `suspend' mode, and it's light off.
I'm new in this field and I understood people's concern on enabling
autosuspend.  As to my understanding, `enabling suspend' and `enabling
autosuspend' should be controlled by two different knobs.  I did a
quick search in LKML and haven't found specific oppose to enable USB
suspend by default, and Debian has started shipping a kernel with
it turned on since 2.6.26.
Perhaps we should consider turning it on by default?  Thanks!
-- 
Li, Yan