Date: Fri, 07 Oct 2005 15:33:25 +1000
From: Nigel Cunningham <>
Subject: Re: [PATCH] Free swap suspend from dependency on PageReserved
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/10/7/7

Hi Nick.
On Thu, 2005-10-06 at 20:14, Nick Piggin wrote:
> Nigel Cunningham wrote:
> > From: Nigel Cunningham <nigel@suspend2.net>
> > 
> > This patch removes the dependency that swap suspend currently has on
> > PageReserved. In the places where PageReserved is currently set and
> > cleared, we also set and clear PageNosave, and in swap suspend itself,
> > we only reference PageNosave. The ongoing effort at freeing PageReserved
> > thus achieves another step forward.
> > 
> 
> Any reason you can't use page_is_ram directly? I would rather you
> do this than moving swsusp specific flags out into the wider tree.
> The reason is that these flags now become just as hard to kill as
> PageReserved is.
> 
> You'll have to slightly modify i386's page_is_ram, because it
> appears that you'll actually want
> 
>    'page_is_ram(pfn) && !(bad_ppro && page_kills_ppro(pfn))'
Thanks for the suggestion!
I suppose we could do something like what you are suggesting. I'll take
a look. I'm not promising to do it immediately though - too busy trying
to finish off Suspend2 at the mo.
> Thanks, glad someone is looking into this!
Always glad to be of service!
Nigel
> Nick
-- 
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/