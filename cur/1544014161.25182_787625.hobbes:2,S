Date: Tue, 6 Jan 2009 10:28:38 -0800 (PST)
From: Linus Torvalds <>
Subject: Re: [PATCH][RFC]: mutex: adaptive spin
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2009/1/6/257

On Tue, 6 Jan 2009, Steven Rostedt wrote:
> 
> Caching the rq is an interesting idea. But since the rq struct is local to 
> sched.c, what would be a good API to do this?
Just move the whole "spin_or_schedule()" into sched.c, and you're all 
done.
Yeah, that requires having sched.c know a bit about mutex locking rules, 
but the data structures are already exported in <linux/mutex.h>, and while 
_normal_ code should never care or know exactly how it is used, I think 
the scheduler might as well. Mutexes are clearly very much a scheduling 
entity, so it's not too much of a break with internal knowledge.
		Linus