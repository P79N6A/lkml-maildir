Date: Sat, 4 Mar 2006 00:29:38 +0100
From: Adrian Bunk <>
Subject: [2.6 patch] add missing pm_power_off's
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/3/3/262

This untested patch adds the missing pm_power_off's for the h8300, v850 
and xtensa architectures.
Signed-off-by: Adrian Bunk <bunk@stusta.de>
---
@Andrew:
Please apply for the next -mm.
The build on these architectures is anyway broken due to this issue, and 
I'll check at 
http://l4x.org/k/
 whether this patch really fixes it.
 arch/h8300/kernel/process.c  |    3 +++
 arch/v850/kernel/process.c   |    3 +++
 arch/xtensa/kernel/process.c |    3 +++
 3 files changed, 9 insertions(+)
--- linux-2.6.16-rc5-mm2-full/arch/h8300/kernel/process.c.old	2006-03-04 00:24:12.000000000 +0100
+++ linux-2.6.16-rc5-mm2-full/arch/h8300/kernel/process.c	2006-03-04 00:24:59.000000000 +0100
@@ -45,6 +45,9 @@
 #include <asm/setup.h>
 #include <asm/pgtable.h>
 
+void (*pm_power_off)(void) = NULL;
+EXPORT_SYMBOL(pm_power_off);
+
 asmlinkage void ret_from_fork(void);
 
 /*
--- linux-2.6.16-rc5-mm2-full/arch/v850/kernel/process.c.old	2006-03-04 00:25:16.000000000 +0100
+++ linux-2.6.16-rc5-mm2-full/arch/v850/kernel/process.c	2006-03-04 00:25:30.000000000 +0100
@@ -30,6 +30,9 @@
 #include <asm/system.h>
 #include <asm/pgtable.h>
 
+void (*pm_power_off)(void) = NULL;
+EXPORT_SYMBOL(pm_power_off);
+
 extern void ret_from_fork (void);
 
 
--- linux-2.6.16-rc5-mm2-full/arch/xtensa/kernel/process.c.old	2006-03-04 00:25:43.000000000 +0100
+++ linux-2.6.16-rc5-mm2-full/arch/xtensa/kernel/process.c	2006-03-04 00:26:02.000000000 +0100
@@ -64,6 +64,9 @@
 
 struct task_struct *current_set[NR_CPUS] = {&init_task, };
 
+void (*pm_power_off)(void) = NULL;
+EXPORT_SYMBOL(pm_power_off);
+
 
 #if XCHAL_CP_NUM > 0
 
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/