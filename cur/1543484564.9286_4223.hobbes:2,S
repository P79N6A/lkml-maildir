Date: Fri, 5 Feb 1999 04:24:59 -0800 (PST)
From: David <>
Subject: Re: STB TV-PCI tuner not working since pre9
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/2/5/67

On Fri, 5 Feb 1999, Alan Cox wrote:
> Date: Fri, 5 Feb 1999 12:24:04 +0000 (GMT)
> From: Alan Cox <alan@lxorguk.ukuu.org.uk>
> To: David <david@killerlabs.com>
> Cc: alan@lxorguk.ukuu.org.uk, krakken@ncn.net, linux-kernel@vger.rutgers.edu,
     perrye@gilfillan.org
> Subject: Re: STB TV-PCI tuner not working since pre9
> 
> > Midnight kernel: bttv0: audio chip: TDA9850 
> > Midnight kernel: bttv0: model: MIRO 
> 
> If you compiled it in you forgot to force a card type -  note it says
> Miro
> 
> Alan
aforehand you told me i was forcing it to find an msp3400 in my modules and
that's why it found the msp chip. i said i wasn't, i was using it compiled
in as defaults and i didn't even have a modules conf file.
it worked until now, always showing up as a MIRO but that being aside, let's
start again:
according to the source, it should correctly auto detect, snippits:
#ifndef CARD_DEFAULT
/* card type (see bttv.h) 0=autodetect */
#define CARD_DEFAULT 0
static unsigned int card[BTTV_MAX] = { CARD_DEFAULT, CARD_DEFAULT, 
                                       CARD_DEFAULT, CARD_DEFAULT };
        /* Default the card to the user-selected one. */
        btv->type=card[i];
        btv->tuner_type=-1; /* use default tuner type */
        /* If we were asked to auto-detect, then do so! 
           Right now this will only recognize Miro, Hauppauge or STB
           */
        if (btv->type == BTTV_UNKNOWN) 
============
(unknown defined as 0x0)
i added a few printks to show what some of these critters are
  Midnight kernel: returned (idcard:0)
that being the value of i.
so card[i] having a 0 for it's value should auto detect.
the test for the card type at bttv.c:2872 appears to break because it thinks
it finds an msp3400 chip and sets my card type to a MIRO.  a couple of
kernels back, it figured it was a MIRO PRO for one patch revision.
now the chips on my board say stb and tda.  it finds the tda9850 chip
correctly, then later thinks it has an msp3400 on it.
i don't have the time at the moment to spend a couple days playing with the
driver, but i can compile a new kern with this as modular and include the
debugging with which i can post relevant figures to anyone interested.
i'd love to fix this frustration for once and all but every moment i get a
spare minute to work on something of this like, another issue (in life)
always seems to spring forth :(
-d
-- 
  Do you remember how to -think- ? Do you remember how to experiment? Linux
__ is an operating system that brings back the fun and adventure in computing.
\/  for linux-kernel: please read linux/Documentation/* before posting problems
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/