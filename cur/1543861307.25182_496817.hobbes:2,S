Date: Sat, 06 Jan 2007 08:44:51 -0500
From: 	Valdis.Kletnieks@vt ...
Subject: Re: 2.6.20-rc3-mm1 - rewrite-lock-in-cpufreq-to-eliminate-cpufreq-hotplug-related-issues.patch
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/1/6/55

On Thu, 04 Jan 2007 22:02:00 PST, Andrew Morton said:
> 	
ftp://ftp.kernel.org/pub/linux/kernel/people/akpm/patches/2.6/2.6.20-rc3/2.6.20-rc3-mm1/
One of these 3 patches:
rewrite-lock-in-cpufreq-to-eliminate-cpufreq-hotplug-related-issues.patch
rewrite-lock-in-cpufreq-to-eliminate-cpufreq-hotplug-related-issues-fix.patch
ondemand-governor-restructure-the-work-callback.patch
causes an oops in kref_put during early boot ("unable to handle paging
request at 00078"). 
Dell Latitude D820 laptop, Core2 T7200 with a 64-bit kernel.
Hand-copied trace of the oops:
kobject_put+0x19/0x1b
cpufreq_cpu_put+0xd/0x1e
cpufreq_get+0x45/0x51
handle_cpufreq_delayed_get+0x1e/0x41
run_workqueue+0x9c/0x14e
worker_thread+0x0/0x145
worker_thread+0x10e/0x145
default_wake_function+0x0/0xf
worker_thread+0x0/0x145
kthread+0x8/0x10b
schedule_tail+0x38/0xa1
child_rip+0xa/0x12
kthread+0x0/0x10b
child_rip+0x0/0x12
With the 3 listed patches plus:
ondemand-governor-use-new-cpufreq-rwsem-locking-in-work-callback.patch
reverted, the system boots OK.
This ring any bells?
[unhandled content-type:application/pgp-signature]