Date: Sat, 31 Jul 1999 20:26:26 +0200 (NST)
From:  jelle@flying ...
Subject: Re: [PATCH] HZ=100 assumptions
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/7/31/49

On Fri, 30 Jul 1999, Albert D. Cahalan wrote:
> First of all, fix your mail software and/or account information.
> (try the "chfn" command) The linux-kernel archives think you are
> Stephen C. Tweedie, but the email address isn't right for him.
First of all, why not fix the broken mail archiving software instead? All
that's different is that I don't have my full name in /etc/passwd, which
doesn't break any RFC (you tell me where pine and qmail break an RFC when
the full name is not in /etc/passwd). The archives obviously aren't kept
correctly. Excerpt from the (qmail) maillog of that message:
Jul 29 23:43:32 info msg 74911: bytes 4160 from <jelle@flying.demon.nl> qp 21400 uid 7791
Jul 30 02:16:41 starting delivery 2523: msg 74911 to remote linux-kernel@vger.rutgers.edu
Jul 30 02:16:51 delivery 2523: success: 128.6.190.2_accepted_message./Remote_host_said:_250_2.6.0_S154925AbPG3ARy_message_accepted/
See the from? No Tweedie here... The linux-kernel-digest, from which I
receive my mail also knows that I'm not Steven Tweedie, and 
www.dejanews.com also knows that I'm jelle. (Even so, I have
put my full name in /etc/passwd to make you happy, and because I don't
want to be accused of impersonating Steven on purpose).
Ok, but enough off-topic, now to get back on topic:
I'm afraid that I *did* make a miscalculation: 14.31818Mhz/12/65536 is
18.2Hz (I had 18.3Hz stamped in my head), so I strand corrected for that.
However (see my other mail to the mailing list), it's approx 65543 ticks
per hour, not 65536, and not designed as such by any _software_ people.
It's a hardware cost related design choice by IBM _hardware_ people (cheap
and as few as possible oscillator crystals in the PC). There is also no
14.316558Mhz clock in any PC, the standardized frequency is 14.31818Mhz,
generated by a 14.31818Mhz crystal, or a cheap(er) crystal with an
approximately equal frequency such as 14.3Mhz or 14.318Mhz. Check your
motherboards and you'll see it by the markings on the crystal oscillators.
My other mail to the mailing list explains it all, with references to
where you can verify the information.
Jelle.
> Unidentified person writes:
> > On Thu, 29 Jul 1999, Steve Underwood wrote:
> >> "Albert D. Cahalan" wrote:
> >>> Eric Lammerts writes:
> >>>> On Wed, 28 Jul 1999, Riley Williams wrote:
> 
> >>>>> However, the standard used by MSDOS (which I assume is what you're
> >>>>> referring to) is for the clock to tick ~18.2 times per second (to
> >>>>> be more accurate, 65536 ticks per hour), in which case the correct
> >>>>
> >>>> This is incorrect. The BIOS/MSDOS clock is generated from a 14.31818MHz
> >>>> crystal clock divided by 12 * 65536.
> >>>
> >>> Nope. Clock frequency varies. Originally it was related to a standard
> >>> video frequency. More recent computers use a frequency designed to make
> >>> DOS timekeeping be more accurate. (the 65536 ticks/hour I suppose)
> >> 
> >> Nope. Many modern computers use an el. cheapo clock that is just plain
> >> inaccurate, and they don't keep time very well. Any Compaq ProLiant
> ...
> > 65536 ticks per hour would be approx 18.2hz, which definitely can't be
> 
> There is a divider that gives an approximately 18.2 Hz clock.
> Linux resets this to get approximately 100 Hz.
> 
> The original PC used a video standard crystal. The divider was set
> to give approximately 65536 ticks per hour, which made it easy to
> detect an hour change. The BIOS needed to update something hourly.
> 
> DOS was designed to use this. DOS timekeeping was poor because it
> didn't get a perfectly even number of ticks in an hour. After video
> cards switched to other clock sources, the frequency could be adjusted
> to make everything come out perfect. Now the clock is often made to
> agree with what used to be just an approximation used by the BIOS.
> 
> This isn't a very big difference of course. (14.316558 vs. 14.31818)
> DOS would use an "hour" of 3599.592 seconds with the old frequency.
> Linux seems to assume a frequency of 14.31816 -- none of the above.
> 
> Only one way to resolve this: somebody measure a few thousand modern
> computers from different vendors, years, and production runs.
> 
> Please read the FAQ at 
http://www.tux.org/lkml/
> 
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/