Date: Sun, 12 Nov 2000 07:16:17 +0100
From: Jens Axboe <>
Subject: Re: [PATCH] CDROMPLAYTRKIND translation in sr_ioctl.c for idescsi
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/11/12/82

On Sat, Nov 11 2000, Daniel R Risacher wrote:
> Summary:
> 
> Many audio-cdrom-playing programs don't work correctly with ATAPI
> CDROM drives under ide-scsi translation, because ATAPI doesn't support
> the PLAYAUDIO_TI command. The ide-cd driver handles this by
> transforming CDROMPLAYTRKIND ioctls into something that the ATAPI
> drive will understand, but this mechanism is bypassed when using
> ide-scsi translation.
Yup
> This patch creates a new kernel option,
> CONFIG_SCSI_IDESCSI_WORKAROUND, that is available whenever ide-scsi
> translation is enabled. Enabling this new option includes a
> tranlation mechanism into the SCSI CDROM (sr) driver similar to the
> mechanism in the ide-cd driver.
> 
> Hopefully this will make life much easier for those of us who use
> ide-scsi for CDROM drives. It is essentially the same thing as the
> patch I posted for 2.2.12 on 19 Oct 1999, but updated for 2.4.0-test9.
> This probably isn't the most elegant solution, but maybe it'll help
> some people out until Jens figures out something better.
I would take this patch, if you made it a fall back path when
PLAYAUDIO_TI fails with 05/20/00 sense. That makes a lot more sense
to me (pun intended) than a config option. What do you think, will
you do that?
For 2.5 the CD-ROM setup will be feature based. This is all supported
by newer drives, but it should be possible to make pseudo feature
profiles for older drives. This has the advantage that we always
'know' what is supported and what is not -- no more trial and error.
-- 
* Jens Axboe <axboe@suse.de>
* SuSE Labs
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/