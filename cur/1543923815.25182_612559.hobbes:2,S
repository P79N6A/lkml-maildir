Date: Wed, 31 Oct 2007 10:41:48 +0100
From: Sam Ravnborg <>
Subject: Re: 32bit builds on x86-64 host.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/10/31/99

On Wed, Oct 31, 2007 at 08:57:39AM +0000, Christoph Hellwig wrote:
> On Tue, Oct 30, 2007 at 06:00:01PM -0700, Jeremy Fitzhardinge wrote:
> > Christoph Hellwig wrote:
> > > Which seems rather unnatural to me.  All other merge architectures have
> > > ARCH=<archdir> where archdir is the name under arch, e.g. mips, powerpc,
> > > s390.  They then have a CONFIG_FOO_64 and set the utsname and -m32/-m64
> > > respectively.  It would be nice if x86 could behave like all other
> > > architectures in this respect.  Especially as the behaviour of the other
> > > architectures is a lot more intuitive.
> > >   
> > 
> > Yes, that would be nice.  I keep forgetting the ARCH= in my crossbuild
> > trees, and end up with strange mismashes.
> 
> That's a problem with all architectures currently.  But I think Sam has
> a patch that at least stores ARCH when using objdir != srcdir builds.
kbuild check's the asm symlink and error out if it is wrong.
So forgetting ARCH should be captured. But the check does not
store ARCH which is what I hope to have fixed for next merge window.
So for now if you forget ARCH you should be warned.
And in the future kbuild will remember what ARCH (and CROSS_COMPILE)
you used when configuring the kernel.
For x86 the current check does not help use because the asm symlink
is the same for i386 and x86_64 - so for now we are out of luck.
	Sam
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/