Date: Sun, 16 Jan 2000 04:29:30 -0600
From: Joe Cooper <>
Subject: Re: Very rapid inode leak in 2.2.14|13...
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/1/16/76

Keith Owens wrote:
> On Sat, 15 Jan 2000 18:01:43 -0800,
> Data point.  2.2.12 with minimal services, a few getty, minilog, kswapd
> and friends.  No squid, mail, httpd, named, X etc.
> 
> # cat /proc/sys/fs/inode-state
> 2430    28      0       0       0       0       0
> # stat /dev/ttyS2
>   File: "/dev/ttyS2"
>   Size: 0            Filetype: Character Device
>   Mode: (0600/crw-------)         Uid: (    0/    root)  Gid: (    5/     tty)
> Device:  3,2   Inode: 2802      Links: 1         Device type:  4,66
> Access: Wed May  6 06:32:27 1998(00620.13:04:26)
> Modify: Wed May  6 06:32:27 1998(00620.13:04:26)
> Change: Thu Jul 22 19:32:16 1999(00178.00:04:37)
> # cat /proc/sys/fs/inode-state
> 2430    27      0       0       0       0       0
> # find /etc > /dev/null
> # cat /proc/sys/fs/inode-state
> 2610    7       0       0       0       0       0
Thanks, Keith, I've been trying to figure out what 'normal' is ever
since all this started!  My 2.2.14 workstation under light load also
seems to be eating a lot of inodes (it tops the 16k max after a day or
two)...so I've got no point of reference.  Tell me, does your 2.2.12
continue to grow perpetually, until finally inode-nr crosses inode-max
or does it always hover along below it somewhere?  My box seems to want
to cross the max no matter how high it is set.
After seeing yours, I'm still pretty sure there's a leak somewhere.  If
I let 'em, they'll shoot straight through the roof.  And every time they
hit the ceiling again, my proxies performance drops through the floor.
-- 
Joe Cooper <joe@swelltech.com>
http://www.swelltech.com
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/