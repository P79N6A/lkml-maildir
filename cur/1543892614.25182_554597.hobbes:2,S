Date: Thu, 07 Jun 2007 14:31:15 -0700
From: Ulrich Drepper <>
Subject: Re: [patch 7/8] fdmap v2 - implement sys_socket2
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/6/7/400

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1
Linus Torvalds wrote:
> 	syscall_indirect(unsigned long flags, sigset_t *, 
> 			 int syscall, unsigned long args[6]);
It's a kernel detail, so if this is how you want it, let it be.  I can
certainly live with this.  The only comment about the comments I would
have are
- - think hard about the additional things you want to set
- - make it a bit expendable so that we don't run out of bits.  Maybe
  we also have to pass some additional integer values.
At userlevel this is of course something we cannot expose.  Here we will
need new interfaces like acceptNG, socketNG, etc which themselves can
call this syscall.
This extension reminds me of something we've talked about several times
in the past (I know that I at least discussed this with Ingo).  You
basically implement little scriptlets.  In your call they are simply
    current->flags_arg = flags;
    current->sigmask_arg = sigmask;
    r = syscall(nr, ...);
    current->flags_arg = 0;
    current->sigmask_arg = NULL;
    return r;
This could be made more generic in that you can allow the script to do
more.  The threadlets etc are not too different from this.
If all this is unwanted then go with what you proposed.  Otherwise think
about a more generic approach.
- --
➧ Ulrich Drepper ➧ Red Hat, Inc. ➧ 444 Castro St ➧ Mountain View, CA ❖
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.7 (GNU/Linux)
iD8DBQFGaHkj2ijCOnn/RHQRAhWoAJ4loMzrYJQDCU4e6jdOfjL4LG/TsACguhUL
ldVvp0PWIazV2iAWraCc+IU=
=VGDR
-----END PGP SIGNATURE-----
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/