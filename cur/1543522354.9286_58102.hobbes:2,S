Date: Mon, 17 Jan 2000 12:50:49 +0100
From: Helge Hafting <>
Subject: Re: [Patch] Cleanup struct gendisk registration, 2.3.40-pre1
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/1/17/88

> The only point of delaying flushes to disk is to merge two writes into one
> single flush. This applyes even more strongly to floppies that are very
> slow to write data. The slower the disk is, the more delay you want to
> have between the flushes.
> 
I am not sure about this.  Consider this scenario:
Program writes something to floppy, the floppy starts writing
immediately
instead of waiting for more data to merge into a bigger write.
This first write takes a lot of time.  During that time, the program 
writes lots and lots of data.  The device is busy, so all this queues up
so the *next* write is a nice single operation.  And the same applies
to the next set of writes and so on.  
Only the very first write is penalized,
but it starts without waiting.  Following writes will be merged using
the
previous write as the delay.
The device may be idle so long that the writes complete and we get a new
penalized "first write" but we aren't really starved for bandwith in
that case.
Maybe I am missing something obvious here, but it seems to me that the
slow device can be its own delay device too.  Perfectly dynamic.
Helge Hafting
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/