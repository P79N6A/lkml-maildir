Date: Wed, 16 Oct 2002 19:51:41 +0800
From: Hu Gang <>
Subject: patch: make software suspend speedup in vmware virtual machine.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/10/16/92

Hello all:
With this patch 2.5.43 can resume only need ~5sec.
without this patch 2.5.43 also can resume, but need ~240sec.
This patch also can work in normal machine. But need more test.
--------------------------------------------------
--- arch/i386/kernel/suspend.c~old	Wed Oct 16 19:39:42 2002
+++ arch/i386/kernel/suspend.c	Wed Oct 16 19:38:21 2002
@@ -290,8 +290,8 @@
 		for (loop2=0; loop2 < PAGE_SIZE; loop2++) {
 			*(((char *)((pagedir_nosave+loop)->orig_address))+loop2) =
 				*(((char *)((pagedir_nosave+loop)->address))+loop2);
-			__flush_tlb();
 		}
+		__flush_tlb();
 	}
 
 	restore_processor_context();
-- 
		- Hu Gang
[unhandled content-type:application/pgp-signature]