Date: Thu, 18 Mar 1999 19:31:25 +1100
From:  gmkelly@zip ...
Subject: Re: Lockup with 2.2.3 on SMP system
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/3/18/57

Further on Keyboard lockups in 2.2.3. In debugging further, by running
multiple xterms watching /proc/interrupts, /proc/stat etc. it 
appears that on my machine at least - the keyboard controller
chip is being placed in a "invalid state", how I don't know.
I have noticed that on reboot (by pulling the power plug on
my UPS so that system shutdown automatically, and restarts
without me touching anything) that on reboot the bios complains
saying "Keyboard failure or keyboard doesn't exist". This is
really strange, as I thought the h/w would reset this, keep
in mind that I don't remove power from the system, only trying
to narrow down the problem. Keyboard interrupts don't increment
but that may be just the result not the cause.
My h/w is SMP PPro 150Mhz, 128Mb mem, Buslogic SCSI's drives (4)
IDE drives (hda, hdc), RocketPort8, 3 x Parallel ECP ports,
4Mb Matrox Millennium, PCI NE2000 Ethernet, VideoTV Card, etc...
I do however have:
[root@bushrock /proc]# cat ./interrupts 
           CPU0       CPU1       
  0:    1634481    1637087    IO-APIC-edge  timer
  1:       8688       8574    IO-APIC-edge  keyboard
  2:          0          0          XT-PIC  cascade
  3:      44148      43481    IO-APIC-edge  serial
  5:          0          3    IO-APIC-edge  soundblaster
  8:          0          1    IO-APIC-edge  rtc
 13:          1          0          XT-PIC  fpu
 15:          6          1    IO-APIC-edge  ide1
 16:      12294      12137   IO-APIC-level  BusLogic BT-946C
 18:     744943     743523   IO-APIC-level  bttv
 19:          0          0   IO-APIC-level  eth0
NMI:          0
ERR:          0
a mixture of level and edge interrupt triggering which has not
been a problem on past releases. Interesting the RTC intr
doesn't inc much. You'll also notice that I get the keyboard
hang without Ethernet activity (I disconnected network to
narrow down problem). 
So, in summary I have only got 2 keyboard hangs, 1 after 4 days,
another within 12 hours of reboot, same results both times,
no log info, same reboot keyboard indications. 
Hope this helps the debugging process.
Cheers, Grahame
-- 
------------------------------------------------------
Sydney Linux User Group - Coordinator &  Member (SLUG) 
see 
http://www.slug.org.au
 for details on activities
------------------------------------------------------
-- 
------------------------------------------------------
Sydney Linux User Group - Coordinator &  Member (SLUG) 
see 
http://www.slug.org.au
 for details on activities
------------------------------------------------------
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/