Date: Sun, 06 Feb 2000 17:27:29 -0500
From: Jeff Garzik <>
Subject: Re: SCSI Makefile cleanup
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/2/6/67

david parsons wrote:
> Jeff Garzik wrote:
> > david parsons wrote:
> > >     It might be worthwhile to add a requirements function call to the
> > >     kernel, so you can have drivers explicitly load what they depend
> > >     on before they start loading.   Something like:
> > >         need("aha1542");
> > >     in the buslogic driver?
> > That would be wonderful...  I really don't like defining driver load
> > order implicitly through Makefile link order.  I imagine "need()" would
> > have to be some sort of trigger which ld (or a pre-ld script) uses to
> > figure out the link order for the static kernel image?
>     That would work better than what I was thinking about:.  I was
>     actually thinking of maintaining some sort of (dare I say it?)
>     kernel registry, but that would be massive overkill for these
>     purposes.
In a discussion along a similar vein on linux-kernel a while back, I
learned that you can have tons of different ELF sections pretty easily. 
At least in theory :) it shouldn't be too hard to stick each module into
its own ELF section, and then have a Perl script or similar re-order the
sections in the kernel's ld script, prior to the final link.  
Different magic would be needed for depmod/kmod though, possibly just a
generic module parm exported and processed in userspace.
I'm no ELF wizard so there might be a better way...
	Jeff
-- 
Jeff Garzik         | Post-Linux-Expo TODO:  Learn more
Building 1024       | French curse words from Pixel.
MandrakeSoft, Inc.  |
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/