Date: Thu, 31 Jan 2008 04:02:14 +0100
From: Andi Kleen <>
Subject: Re: PATCH] x86_64: make bootmap_start page align v4
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/30/646

> I don't think so, that is setup_node_bootmem's problem.
>
> it is supposed to round_up instead of just do PAGE_SHIFT...
>
> other caller will just use the address instead change it page.
You're right. In this case it really is the best way to round up in the 
caller. I retract my earlier objection.
That said there is not really any true requirement for the bootmem
map to be page aligned (AFAIK) so an alternative might be to 
fix the bootmem interface to not take a PFN. But that would be a 
much more intrusive patch because you would need to fix 
other architectures too or add compat wrappers.
-Andi