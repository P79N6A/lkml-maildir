Date: Tue, 7 Jun 2005 02:56:36 +0200
From: Blaisorblade <>
Subject: Re: [uml-devel] [PATCH 3/5] UML - Clean up tt mode remapping of UML binary
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/6/6/238

On Tuesday 07 June 2005 01:53, Al Viro wrote:
> On Tue, Jun 07, 2005 at 01:05:19AM +0200, Blaisorblade wrote:
> > On Monday 06 June 2005 22:08, Jeff Dike wrote:
> > > From Al Viro - this turns the tt mode remapping of the binary into arch
> > > code.
> >
> > NACK at all, definitely, don't apply this one please. This patch:
> >
> > 1) On i386 does not fix the problem it was supposed to fix when I
> > originately sent the first version (i.e. avoiding to create a
> > .thread_private section to allow linking against NPTL glibc). It's done
> > on x86_64 and forgot on i386.
>
> True.  i386 still assumes non-NPTL (as it is on the box I'm working on -
> such setups *do* exist).
Yes, it's the most common one, and it's even the setup for my box currently.
> > 2) Splitting the linker script for subarchs is definitely not needed.
>
> Per-subarch - perhaps not.  Per-glibc-type - definitely needed.
No, because the setup for NPTL glibc works also on non-NPTL one. Actually, to 
be exact, I've tested it *only* on normal glibc. I'm still waiting to get 
some testing in NPTL environments, but I expect it to work.
> > 3) This removes the fix (done through objcopy -G switcheroo) to a link
> > time conflict happening on some weird glibc combinations.
> *What* link-time conflict?  We don't link libc into switcheroo anymore.
Hmm, yes, I noted this... and maybe it could even be good (it makes sense, at 
least). Probably you are right on this, too.
P.S: is it only me or you've sent about 20 copies of your last message?
-- 
Inform me of my mistakes, so I can keep imitating Homer Simpson's "Doh!".
Paolo Giarrusso, aka Blaisorblade (Skype ID "PaoloGiarrusso", ICQ 215621894)
http://www.user-mode-linux.org/~blaisorblade
___________________________________ 
Yahoo! Mail: gratis 1GB per i messaggi e allegati da 10MB 
http://mail.yahoo.it
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/