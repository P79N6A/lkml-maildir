Date: Wed, 07 Sep 2005 18:06:23 +0100
From: Alan Cox <>
Subject: Re: [patch 4/4] ide: Break ide_lock -- remove ide_lock  from piix driver
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/9/7/126

On Maw, 2005-09-06 at 16:44 -0700, Ravikiran G Thirumalai wrote:
> Patch to convert piix driver to use per-driver/hwgroup lock and kill
> ide_lock.  In the case of piix, hwgroup->lock should be sufficient.
PIIX requires that both channels are quiescent when retuning in some
cases. It wasn't totally safe before, its now totally broken. Start by
fixing the IDE layer locking properly (or forward porting my patches and
then fixing them for all the refcounting changes and other stuff done
since).
Better yet move to the SATA driver - it can drive never PIIX chips in
PATA mode and its in my experience already more reliable.
Alan
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/