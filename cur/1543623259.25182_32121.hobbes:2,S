Date: Mon, 4 Mar 2002 11:22:04 +0100
From: Thomas Krennwallner <>
Subject: [PATCH] apm bootparam 2.4.18
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/3/4/52

Hi!
Bootparam handling in apm.c is broken. apm=on and apm=off turns APM off, no
bootparam turns apm on.
so long
Thomas
--- linux-2.4.18/arch/i386/kernel/apm.c	Mon Feb 25 20:37:53 2002
+++ linux/arch/i386/kernel/apm.c	Fri Mar  1 10:36:34 2002
@@ -392,7 +392,7 @@
 static int			got_clock_diff;
 #endif
 static int			debug;
-static int			apm_disabled = -1;
+static int			apm_disabled = 0;
 #ifdef CONFIG_SMP
 static int			power_off;
 #else
@@ -1868,7 +1868,7 @@
 	if (realmode_power_off)
 		apm_info.realmode_power_off = 1;
 	/* User can override, but default is to trust DMI */
-	if (apm_disabled != -1)
+	if (apm_disabled)
 		apm_info.disabled = apm_disabled;
 
 	/*
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/