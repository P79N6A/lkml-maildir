Date: Wed, 2 Feb 2000 21:30:36 -0500 (EST)
From: root <>
Subject: PIIX4 IDE tunning Bug (2.3.42)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/2/2/141

Enableing tuning of PIIX4 controller resulted in not being able to use dma
and some timouts as listed below after diabling this in the kernel and a
recompile all was well. 
Feb  2 20:51:35 debian kernel: hda: timeout waiting for DMA
Feb  2 20:51:35 debian kernel: hda: irq timeout: status=0x58 { DriveReady
SeekCo
mplete DataRequest }
Feb  2 20:51:35 debian kernel: hda: timeout waiting for DMA
Feb  2 20:51:35 debian kernel: hda: irq timeout: status=0x58 { DriveReady
SeekCo
mplete DataRequest }
and that continues for a while until the drive is reset and boot up
continues.
I have:
Linux debian 2.3.42 #1 Wed Feb 2 20:57:33 EST 2000 i686 unknown
Bus  0, device   7, function  1:
    IDE interface: Intel Corporation 82371AB PIIX4 IDE (rev 1).
      Master Capable.  Latency=64.
      I/O at 0xf000 [0xf00f].
/dev/hda is a Maxtor 90648D3 
/dev/hdb is Maxtor 90680D4
With out enabling the tunning feature it all works well so far.
/dev/hda:
 multcount    = 16 (on)
 I/O support  =  1 (32-bit)
 unmaskirq    =  0 (off)
 using_dma    =  1 (on)
 keepsettings =  0 (off)
 nowerr       =  0 (off)
 readonly     =  0 (off)
 readahead    =  8 (on)
 geometry     = 787/255/63, sectors = 12656448, start = 0
/dev/hdb:
 multcount    = 16 (on)
 I/O support  =  1 (32-bit)
 unmaskirq    =  0 (off)
 using_dma    =  1 (on)
 keepsettings =  0 (off)
 nowerr       =  0 (off)
 readonly     =  0 (off)
 readahead    =  8 (on)
 geometry     = 826/255/63, sectors = 13281408, start = 0
root@debian:~# hdparm -t /dev/hda
/dev/hda:
 Timing buffered disk reads:  64 MB in  4.33 seconds = 14.78 MB/sec
root@debian:~# hdparm -t /dev/hdb
/dev/hdb:
 Timing buffered disk reads:  64 MB in  5.24 seconds = 12.21 MB/sec
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/