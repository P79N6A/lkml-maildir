Date: Sun, 24 Jun 2007 21:31:36 +0100
From: "Jay L. T. Cornwall" <>
Subject: Re: 2.6.22-rc5: pdflush oops under heavy disk load
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/6/24/113

Jay Cliburn wrote:
>> The common factor here seems to be the buffer_head circular list
>> leading to invalid pointers in bh->b_this_page.
>>
>> I'm beginning to suspect the Attansic L1 Gigabit Etherner driver
>> (marked as EXPERIMENTAL in 2.6.22-rc5). I can't reproduce these
>> panics on disk-to-disk copies or SCP across the localhost interface.
>> However, SCP from a server onto either of two different HDDs hits
>> these oopses fairly quickly.
> How much RAM is installed in your machine?  If it's 4GB or more, does
> your problem go away if you boot with mem=3000M?
Intriguing. Yes, this machine has 4GB of RAM. If I boot with mem=3000M
the problem does indeed go away - I can't induce an oops even after
transferring tens of GB across the interface.
I'm not sure I follow why that would be the case, except that it relates
to pci_map_page behaviour. But I guess you have an inkling?
-- 
Jay L. T. Cornwall, 
http://www.esuna.co.uk/~jay/
PhD Student
Imperial College London
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/