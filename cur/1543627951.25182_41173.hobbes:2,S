Date: Fri, 19 Apr 2002 00:18:58 +0200
From: Pavel Machek <>
Subject: Kill unneccessary delays from swsusp
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/4/18/142

Hi!
This patch kills unneccessary delays from suspend.h. I used them for
debugging and forgot them in. Please apply,
								Pavel
--- clean.ac//include/asm-i386/suspend.h	Sun Apr  7 10:55:12 2002
+++ linux-swsusp.24/include/asm-i386/suspend.h	Fri Apr 19 00:15:41 2002
@@ -123,17 +123,13 @@
 	int nr = smp_processor_id();
 	struct tss_struct * t = &init_tss[nr];
 
-	printk("Tss desc..."); mdelay(1000);
 	set_tss_desc(nr,t);	/* This just modifies memory; should not be neccessary. But... This is neccessary, because 386 hardware has concept of busy tsc or some similar stupidity. */
         gdt_table[__TSS(nr)].b &= 0xfffffdff;
 
-	printk("Tr..."); mdelay(1000);
 	load_TR(nr);		/* This does ltr */
 
-	printk("LDT..."); mdelay(1000);
 	load_LDT(current->active_mm);	/* This does lldt */
 
-	printk("Debug..."); mdelay(1000);
 	/*
 	 * Now maybe reload the debug registers
 	 */
@@ -154,7 +150,6 @@
 {
         /* restore FPU regs if necessary */
 	/* Do it out of line so that gcc does not move cr0 load to some stupid place */
-	printk("FPU..."); mdelay(1000);
         kernel_fpu_end();
 }
 
@@ -223,12 +218,9 @@
 	asm volatile ("lldt (%0)" :: "m" (saved_context.ldt));
 
 #if 0
-	printk("Reloading old TR..."); mdelay(1000);
-
 	asm volatile ("ltr (%0)"  :: "m" (saved_context.tr));
 #endif
 
-	printk("Calling fix_processor_context..."); mdelay(1000);
 	fix_processor_context();
 
 	/*
-- 
(about SSSCA) "I don't say this lightly.  However, I really think that the U.S.
no longer is classifiable as a democracy, but rather as a plutocracy." --hpa
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/