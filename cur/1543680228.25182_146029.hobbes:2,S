Date: Tue, 08 Jul 2003 15:50:27 +0000
From:  bzzz@tmi ...
Subject: Re: [RFC] parallel directory operations
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/7/8/60

>>>>> Andi Kleen (AK) writes:
 AK> On Tue, 08 Jul 2003 15:28:27 +0000
 AK> bzzz@tmi.comex.ru wrote:
 >> dynlocks implements 'lock namespace', so you can lock A for namepace N1 and
 >> lock B for namespace N1 and so on. we need this because we want to take lock
 >> on _part_ of directory.
 AK> Ok, a mini database lock manager. Wouldn't it be better to use a small hash 
 AK> table and lock escalation on overflow for this?  Otherwise you could
 AK> have quite a lot of entries queued up in the list if the server is slow.
well, it makes sense. AFAIU, only problem with this solution is that we need
very well-tuned hash function. BTW, dynlocks are taken for operation time only.
so, in most often case, for dir entry creation/lookup we need two locks: one for
dcache locking and another for htree's leaf locking.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/