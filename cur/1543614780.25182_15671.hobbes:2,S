Date: Fri, 28 Dec 2001 16:07:00 -0800
From: Richard Henderson <>
Subject: Re: [Alpha/Linux ] Stack layout/and register values for ret_from_sys_call
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/12/28/181

On Mon, Dec 17, 2001 at 11:50:57PM +0530, Aneesh Kumar K.V wrote:
>  Can someone explain me what should be the stack layout and register
> value( if there is any restriction ) before calling ret_from_syscall for
> Alpha.
Top of stack should contain a struct pt_regs.  See asm/ptrace.h.
>   lda     $8,0x3fff
>   bic     $30,$8,$8
> 
> If someone can expain what happens in the above two assembly statement
> it will be really helpful.
This computes the value for "current".  The stack plus task structure
is aligned on a two-page boundary.  See task_union in linux/sched.h.
r~
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/