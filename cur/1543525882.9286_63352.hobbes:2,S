Date: 15 Feb 2000 13:32:13 +0100
From: Francis GALIEGUE <>
Subject: Of removable devices
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/2/15/45

Like many other people, I strongly wish that removable device
management were easier under Linux. The supermount patch helped, but
as previously mentioned on this list, it is not clean wrt VFS stuff.
So, the problem remains to be solved.
To the (small) extent of my knowledge, putting this functionality into
the kernel would require that:
- each time a file is accessed on such a device, the VFS should verify
  whether the media hasn't changed upon us, and if so, invalidate the
  previous superblock, "load" the new one, and check whether the
  accessed file exists;
- accessing a file on the device when there's no media should return
  -ENOENT and not -EIO, like supermount does;
- prevent dentries preload for such a device
And probably other things I've missed.
What is missing right now in the 2.3.x series in order to create a new
mount flag, say, MS_SLOPPYMOUNT, which would allow for a clean
management of such peripherals?
-- 
fg
# rm *;o
o: command not found
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/