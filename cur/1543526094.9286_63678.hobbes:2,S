Date: Wed, 16 Feb 2000 19:44:25 +0000 (GMT)
From: "Stephen C. Tweedie" <>
Subject: Re: Of removable devices
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/2/16/146

Hi,
On Wed, 16 Feb 2000 09:45:10 -0500, "Theodore Y. Ts'o" <tytso@MIT.EDU>
said:
>    First, sorry for yelling earlier. I'm conscious of problems with PC
>    floppies. Calling block_fsync() regulary is not even a solution, I'm
>    aware of this as well - too much overhead for not so much. But a
>    newbie is not as stupid to eject a floppy when he sees the LED is on
>    (well, at least I hope so :)
> Right.  That was the basic design behind supermount, as I understand
> it.  Users have been well programmed that if the LED light is off, it's
> safe to pop the disk out.  Because Linux normally has different rules,
> this violates the principal of least surprise.
Exactly.  The two things supermount was designed to ensure were:
1) All blocks are flushed to disk and the filesystem remounted readonly
   as soon as there are no more files open for write on the medium; and
2) supermount "overlays" its own directories on top of the directory
   inodes owned by the underlying filesystem, so that even if you have
   "cd"ed to a supermounted filesystem, you can still safely remove the
   medium. 
> So the question is whether it's possible to do something relatively
> painless which allows the right thing to happen under most
> circumstances.  
These two things appear to be the Right Thing as far as naive users are
concerned.  The real problem is how to do it cleanly.
> By the way, ext2 has a serial number, so it *would* be possible to
> make ext2 check the superblock parameter when it was informed that a
> media change may have happened.  So it's not just the FAT filesystem
> that can do this.
--Stephen
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/