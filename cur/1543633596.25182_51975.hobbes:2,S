Date: Tue, 11 Jun 2002 19:29:20 +0200
From: Benjamin Herrenschmidt <>
Subject: Re: PCI DMA to small buffers on cache-incoherent arch
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/6/12/102

>This may use less memory than 1) or 2) above on some architectures but
>will use more than 1) on cache-coherent architectures.  It makes the
>code even more complex since now the code that allocates the dma
>buffer has to know which PCI device will use it (for example, in USB,
>the hub driver is separated from the HCD driver, which is who knows
>about the PCI bus).
What about an arch that can be both coherent or incoherent (the same
kernel binary would boot both) ?
I can also imagine quite a bunch of embedded stuffs where you may have
both coherent and non-coherent devices depending on the bus the live
on or on bridge bugs.
For your example, I don't buy it. You could well design the USB urb
allocation in such a way that they are passed down the controller of
a given device.
Ben.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/