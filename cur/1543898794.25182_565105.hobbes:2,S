Date: Wed, 4 Jul 2007 23:32:02 +0530 (IST)
From: Satyam Sharma <>
Subject: Re: [PATCH -mm 4/9] netconsole: Introduce netconsole_netdev_notifier
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/7/4/224

On Wed, 4 Jul 2007, Matt Mackall wrote:
> On Wed, Jul 04, 2007 at 04:37:59PM +0530, Satyam Sharma wrote:
> > From: Satyam Sharma <ssatyam@cse.iitk.ac.in>
> > 
> > [4/9] netconsole: Introduce netconsole_netdev_notifier
> > 
> > To update fields of underlying netpoll structure at runtime on
> > corresponding NETDEV_CHANGEADDR or NETDEV_CHANGENAME notifications.
> [...]
> I can have a host with DHCP that uses netconsole to log to a private
> network address. This breaks that.
Hmm, could you explain that a bit more?
(and the breakage that could happen?)
(1) Please note that NETDEV_CHANGEADDR is a response to SIOCSIFHWADDR,
i.e. when the _hardware_ or MAC address of the particular _local_
(ethernet) network interface device that the netpoll is attached to
(i.e. np->dev) is changed -- say using:
# ip link set eth0 set address 01:23:45:67:89:ab
This has nothing to do with DHCP / IP addresses, AFAICT.
(2) NETDEV_CHANGENAME is a response to SIOCSIFNAME, i.e. when the name
of the particular (ethernet) network interface device is changed,
say something like:
# ip link set eth0 name ieee80230
(which would rename "eth0" to "ieee80230")
So I'm not following how DHCP could pose problems for us (or private
network addresses of remote logging agent), sorry ...
On Wed, 4 Jul 2007, Matt Mackall wrote:
> On Wed, Jul 04, 2007 at 04:37:59PM +0530, Satyam Sharma wrote:
> > [...]
> > To update fields of underlying netpoll structure at runtime on
> > corresponding NETDEV_CHANGEADDR or NETDEV_CHANGENAME notifications.
> 
> It's not obvious that we want to do that.
I'd want to retain this, if possible, please. Kindly note that configfs
makes all these attributes (that are members of struct netpoll) visible
from userspace -- so that user can both read and write to them. We
wouldn't want to display obsolete values for any of these parameters.
Say the interface was called "eth0" when the user / admin created the
target and "enabled" it. And say somewhere in between the interface
name got changed to "eth2". We wouldn't want the user to get obsolete/
incorrect information if / when he does a "cat dev_name" from
/config/netconsole/mytarget123/, for example.
Satyam
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/