Date: Mon, 21 Jan 2008 09:21:53 +0000
From: 	swhiteho@redhat ...
Subject: [PATCH 35/58] [GFS2] Fix typo in log.c
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/21/80

From: Steven Whitehouse <swhiteho@redhat.com>
An inequality was the wrong way around causing gfs2_logd to wake
up too often. This fixes it.
Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>
diff --git a/fs/gfs2/log.c b/fs/gfs2/log.c
index 7f9ab89..9bece94 100644
--- a/fs/gfs2/log.c
+++ b/fs/gfs2/log.c
@@ -802,7 +802,7 @@ void gfs2_log_commit(struct gfs2_sbd *sdp, struct gfs2_trans *tr)
 	up_read(&sdp->sd_log_flush_lock);
 
 	if (atomic_read(&sdp->sd_log_pinned) > atomic_read(&sdp->sd_log_thresh1) ||
-	    ((sdp->sd_jdesc->jd_blocks - atomic_read(&sdp->sd_log_blks_free)) <
+	    ((sdp->sd_jdesc->jd_blocks - atomic_read(&sdp->sd_log_blks_free)) >
 	    atomic_read(&sdp->sd_log_thresh2)))
 		wake_up(&sdp->sd_logd_waitq);
 }
-- 
1.5.1.2