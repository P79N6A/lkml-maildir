Date: Thu, 31 Jul 2003 10:12:51 -0400 (EDT)
From: "Charles Lepple" <>
Subject: Re: linux-2.6.0-test2: Never using pm_idle (CPU wasting power)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/7/31/127

Christian Vogel said:
> on a Thinkpad 600X I noticed the CPU getting very hot. It turned
> out that pm_idle was never called (which invokes the ACPI pm_idle
> call in this case) and default_idle was used instead.
The amd76x_pm patch[1] also hooks pm_idle, and while I'm not 100% sure
about this (haven't instrumented it all the way), it also appears that
pm_idle is not being called (for up to an hour, in some cases). Sometimes
it takes only a few minutes, and other times, it appears to kick in after
heavy CPU usage (kernel compiles, cpuburn, etc.). After pm_idle is called
once, things seem normal-- after the system quiesces, pm_idle is always
called when nothing is ready to run.
Since the amd76x_pm patch appears to work pretty well under 2.4.x, I get
the feeling that the problem lies in the cpu_idle() function. (But I
realize there could be SMP interactions in this case-- in the amd76x_pm
patch, C2 isn't entered unless both CPUs are idle; hence the need for
further instrumentation.)
[1] http://marc.theaimsgroup.com/?l=linux-kernel&m=105665646000758&w=3
-- 
Charles Lepple <clepple@ghz.cc>
http://www.ghz.cc/charles/
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/