Date: Mon, 14 Jan 2002 10:52:17 -0800
From: "Torrey Hoffman" <>
Subject: RE: [PATCH] Rx FIFO Overrun error found
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/1/14/217

Manfred Spraul wrote, and my ears perked up:
...
> Attached is the patch against the nic hang. Now all rx error bits
> trigger netdev_rx - it doesn't hurt and could catch further hardware
> oddities.
hello natsemi-users ...  
We've been having difficult-to-reproduce problems with IP 
multicast receive on our natsemi hardware, could this be 
related?
Our application receives an IP multicast stream (MPEG-2
video) at about 4 Mb/sec, and sometimes, randomly, 
multicast packets just stop showing up at the app layer.
This typically happens after hours of no problems.
(Kernel is 2.4.16 with low-latency patch)
When this happens, tcpdump on the same machine doesn't 
see the multicast packets either, but: TCP connections 
like FTP still work fine, and other machines on the same 
hub still see the multicast traffic, so we are sure the 
packets are on the wire.
Our app detects the unexpected loss of the stream and 
repeatedly does multicast joins to try to get it back, 
but this does not seem to help.  However, switching to a 
different IP multicast address works - if we change to
a different channel and then back again, everything
will work again... until next time.
I wonder if the multicast hash table is getting corrupted 
somehow...
Maybe I should force the multicast hash table to be
rebuilt on any rx error?
Advice welcome, even suggestions on where to put printk
statements...
Torrey
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/