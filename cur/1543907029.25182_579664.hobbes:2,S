Date: Mon, 06 Aug 2007 00:34:41 -0700 (PDT)
From: David Miller <>
Subject: Re: 2.6.23-rc2 cross compile regressions (alpha,sparc,xtensa)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/8/6/45

From: Jan Dittmer <jdi@l4x.org>
Date: Mon, 06 Aug 2007 09:31:55 +0200
> sparc/defconfig:
>   CC      init/main.o
> In file included from include/linux/proc_fs.h:5,
>                  from init/main.c:14:
> include/linux/fs.h:848: warning: `struct flock' declared inside parameter list
> include/linux/fs.h:848: warning: its scope is only this definition or declaration, which is probably not what you want
> include/linux/fs.h:850: warning: `struct flock' declared inside parameter list
> include/linux/fs.h:853: warning: `struct flock64' declared inside parameter list
> include/linux/fs.h:855: warning: `struct flock64' declared inside parameter list
> init/main.c: In function `init_post':
> init/main.c:782: error: `O_RDWR' undeclared (first use in this function)
> init/main.c:782: error: (Each undeclared identifier is reported only once
> init/main.c:782: error: for each function it appears in.)
> make[2]: *** [init/main.o] Error 1
> make[1]: *** [init] Error 2
> make: *** [_all] Error 2
Fix below has already been submmited.
BTW, you'll have much better luck with reports like this if you
direct them to the platform specific mailing list, which would
be sparclinux@vger.kernel.org in this case.
commit c8154c8a9aaf548ad91e413da8b319858e37bc52
Author: Mark Fortescue <mark@mtfhpc.demon.co.uk>
Date:   Sat Aug 4 21:17:18 2007 -0700
    [SPARC32]: Fix build.
    Correct incorrect removal of asm-generic/fcntl.h from asm-sparc/fcntl.h by
    commit 6ba60d2195cd65d72eaf7ce3903a707c5bf20c7b.
    Signed-off-by: Mark Fortescue <mark@mtfhpc.demon.co.uk>
    Signed-off-by: David S. Miller <davem@davemloft.net>
diff --git a/include/asm-sparc/fcntl.h b/include/asm-sparc/fcntl.h
index 7bbdfc7..5ec5463 100644
--- a/include/asm-sparc/fcntl.h
+++ b/include/asm-sparc/fcntl.h
@@ -32,5 +32,6 @@
 #define __ARCH_FLOCK_PAD	short __unused;
 #define __ARCH_FLOCK64_PAD	short __unused;
 
+#include <asm-generic/fcntl.h>
 
 #endif
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/