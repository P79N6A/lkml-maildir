Date: Tue, 15 Jan 2002 18:47:44 -0500
From: David Garfield <>
Subject: Re: Query about initramfs and modules
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/1/15/344

Greg KH writes:
 > On Tue, Jan 15, 2002 at 06:15:02PM -0500, David Garfield wrote:
 > > 
 > > Can/will the initramfs mechanism be made to implicitly load into the
 > > kernel the modules (or some of the modules) in the image?
 > 
 > Most of the mechanism for loading modules for physical devices will be
 > the /sbin/hotplug interface:
 > 	- when the pci core code scans the pci bus, and finds a new
 > 	  device, it calls out to /sbin/hotplug the pci device
 > 	  information.
 > 	- /sbin/hotplug looks up the pci device info and tries to match
 > 	  it up with a driver that will work for this device (see the
 > 	  linux-hotplug.sf.net site for more info on how this works.)
 > 	- if it finds a module for the device, it calls modprobe on the
 > 	  module, and now that pci device has a module loaded.
 > 
 > Repeat this process for the USB, IEEE1394, and other busses that support
 > MODULE_DEVICE_TABLE in the kernel tree.
Seems like a great idea *after* the system is fully running (or the
root partition is at least mounted).
Seems like overkill to boot most systems.
As I understand it, all that should need to go into the initramfs is
enough to mount the root partition.  Normally, this would probably be
a handful of drivers that are unconditionally known to be needed.  So
why go through several user-mode programs to make a decision that can
be made once and built in?
--David Garfield
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/