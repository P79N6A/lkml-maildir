Date: Thu, 15 Mar 2001 11:30:38 -0500 (EST)
From: "Richard B. Johnson" <>
Subject: Re: Need help with allocating a 2M buffer size
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/3/15/56

On Thu, 15 Mar 2001, Byron Stanoszek wrote:
> I have a real picky tape drive (DLT series) that likes to be fed large chunks
> of data at once, otherwise after every 2-4KB of data it halts and rewinds
> itself because its cache for writing to the tape is empty.
> 
> My best solution to this problem was to use 'tar -b 4096', which sends 4096 x
> 512-byte blocks at once for a total of a 2MB buffer size. This worked fine for
> several weeks, until 2 days ago I got this message (and the backup fails):
> 
> st: failed to enlarge buffer to 2097152 bytes.
> 
Look at ../linux/drivers/scsi/st_options.h .
You might want to set ST_MAX_BUFFERS to a higher value. This wastes
some memory when the driver is not in-use, but you can reduce the
tendency to need to allocate more space at run-time.
You can also lower the ST_WRITE_THRESHOLD.
Cheers,
Dick Johnson
Penguin : Linux version 2.4.1 on an i686 machine (799.53 BogoMips).
"Memory is like gasoline. You use it up when you are running. Of
course you get it all back when you reboot..."; Actual explanation
obtained from the Micro$oft help desk.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/