Date: Mon, 26 Feb 2007 00:45:00 -0600
From: (Florin Iucha)
Subject: 2.6.20-rc1: CIFS cheers, NFS4 jeers
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/2/26/14

Hello, it's me and my 70 GB of photos again.
I have tested both CIFS and NFSv4 clients in kernel 2.6.20-rc1 . CIFS
passed with flying colors and NFSv4 stalled after 7 GB.
Configuration:
   Server: PIII/1GHz, 512 MB RAM, Debian testing,
      distro kernel 2.6.18-3-vserver-686, Intel E1000 NIC, 
      filesystem 170 GB ext3 with default mkfs values on a SATA disk
   Client: AMD x2 4200+, 2 GB RAM, Debian testing/unstable
      kernel 2.6.20-rc1, Marvell SKGE onboard,
      filesystem 120 GB ext3 with default mkfs values on a SATA disk
After the writing stalls, I have echoed 't' into /proc/sysrq-trigger
and got a trace, which is at 
http://iucha.net/20-rc1/after.1.
  There was
no oops before the trace request; the 'before' dmesg is at
http://iucha.net/20-rc1/before.1
 .
Running 'top', one core is idle and the other is 99% waiting, while
the 'cp' program is in 'D' state.  Also, after NFSv4 stalls, invokations
of 'lsof' stall as well.  I can 'ssh' into the box without problems.
florin
-- 
Bruce Schneier expects the Spanish Inquisition.
      
http://geekz.co.uk/schneierfacts/fact/163
[unhandled content-type:application/pgp-signature]