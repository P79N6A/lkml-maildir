Date: Sat, 25 Nov 2006 23:21:23 +0100
From: Samuel Thibault <>
Subject: Re: Tulip dmfe carrier detection
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/11/25/122

Hi,
Samuel Thibault, le Fri 10 Nov 2006 15:49:19 +0100, a Ã©crit :
> The dmfe module lacks netif stuff for carrier detection, while the board
> does report carrier status. Here is a patch.
Just an additional fixup: the default state should be carrier off.
This fixes boot carrier detection.
Samuel
--- drivers/net/tulip/dmfe-orig.c	2006-10-01 16:09:49.000000000 +0200
+++ drivers/net/tulip/dmfe.c	2006-11-25 21:23:52.000000000 +0100
@@ -426,6 +426,7 @@
 	dev->poll_controller = &poll_dmfe;
 #endif
 	dev->ethtool_ops = &netdev_ethtool_ops;
+	netif_carrier_off(db->dev);
 	spin_lock_init(&db->lock);
 
 	pci_read_config_dword(pdev, 0x50, &pci_pmr);
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/