Date: Fri, 1 Feb 2008 16:22:27 +0100
From: Ingo Molnar <>
Subject: Re: [2.6 patch] x86: allow 64bit setting in Kconfig
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/2/1/279

* Adrian Bunk <bunk@kernel.org> wrote:
>  # Select 32 or 64 bit
>  config 64BIT
> -	bool "64-bit kernel" if ARCH = "x86"
> +	bool "64-bit kernel"
>  	default ARCH = "x86_64"
NACK. You have just broken:
    make ARCH=i386 randconfig
on a 64-bit box that has a 32-bit .config in its kernel directory.
The randconfig/allyesconfig/allnoconfig variants override whatever is in 
the current .config. Making the result depend on whatever is in the 
.config at the moment is fundamentally wrong.
"oldconfig" on the other hand has correct sensitivity to the existing 
.config - and that always worked correctly. So if you pop a 32-bit or a 
64-bit .config into a kernel tree, that will be listened to, no matter 
whether you are on a 32-bit or on a 64-bit host.
	Ingo