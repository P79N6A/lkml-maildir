Date: Sun, 20 Dec 1998 17:01:57 +0000 (GMT)
From: Riley Williams <>
Subject: Patch to shrink Configure.help
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1998/12/20/52

Hi Alan.
I'd like to submit the enclosed patch against 2.1.131ac13 which can be
used to shrink the size of linux/Documentation/Configure.help down in
size by removing the various repeated comments therein, and having the
various configuration scripts auto-add them when applicable.
One other benefit of this patch is that the relevant comments will
always appear when they're needed, which they sometimes don't with the
current setup. Another is that the wording becomes standardised.
The sections currently added in these patches are:
 1. If there is a http URL anywhere in the description that includes
    the http at the beginning of it, the comment regarding browsing
    the WWW is inserted.
 2. If the current option can be selected as a module, the comment
    about doing so is added.
Note that I have included patches for both the "make config" and "make
menuconfig" scripts, but NOT for the "make xconfig" script, as I've
not been able to develop one for the latter.
Also, because no patch has been developed for "make xconfig", I
haven't included a patch to take the relevant comments out of
Documentation/Configure.help at this time.
Finally, I haven't included the listed maintainers for "make config"
or "make xconfig" in this posting because their sites bounce all email
from bigfoot.com so they'd never receive it from me anyway. If one of
you could forward this to them, it'd be appreciated...
Best wishes from Riley.
--- linux/scripts/Configure.v1	Thu Nov 26 01:21:48 1998
+++ linux/scripts/Configure	Tue Dec 15 13:22:37 1998
@@ -106,6 +106,20 @@
      then
 	  echo; echo "  Sorry, no help available for this option yet.";echo
      else
+	  if echo "$text" | grep http > /dev/null ; then
+		text="$text
+
+  To browse the WWW, you need to have access to a machine with a link
+  to the internet which has available a web browser. Common browsers
+  include Netscape, Lynx and similar programs."
+	  fi
+	  if [ -n "$2" ]; then
+		text="$text
+
+  If you wish to compile this driver as a module ( = code which can be
+  inserted in and removed from the running kernel whenever you wish),
+  say M here and read Documentation/modules.txt in the linux source tree."
+	  fi
 	  (echo; echo "$text") | ${PAGER:-more}
      fi
   else
@@ -227,7 +241,7 @@
 			      break ;;
 	      [mM] )          define_bool "$2" "m"
 			      break ;;
-	      * )             help "$2"
+	      * )             help "$2" Yes
 			      ;;
 	    esac
 	  done
@@ -288,7 +302,7 @@
    echo "  as a module as well (with M) or leave it out altogether (N)."
 				      echo
 				      ;;
-		      * )             help "$var"
+		      * )             help "$var" Yes
 				      ;;
 		  esac
 		done
--- linux/scripts/Menuconfig.v4	Mon Dec 14 22:42:20 1998
+++ linux/scripts/Menuconfig	Tue Dec 15 13:56:37 1998
@@ -294,6 +294,20 @@
           echo "There is no help available for this kernel option."
 	  return 1
      else
+	  if echo "$text" | grep http > /dev/null ; then
+		text="$text
+
+To browse the WWW, you need to have access to a machine with a link
+to the internet which has a web browser available. Common browsers
+include Netscape, Lynx and similar programs."
+	  fi
+	  if [ -n "$2" ]; then
+		text="$text
+
+If you wish to compile this driver as a module ( = code which can be
+inserted in and removed from the running kernel whenever you wish),
+say M here and read Documentation/modules.txt in the linux source tree."
+	  fi
 	  echo "$text"
      fi
   else
@@ -308,7 +322,11 @@
 # Activate a help dialog.
 #
 function help () {
+	local MODULE="`grep $1 MCradiolists | grep tristate`"
+	if [ -n "$MODULE" ]; then
+		MODULE=Yes
+	fi
-	if extract_help $1 >help.out
+	if extract_help $1 $MODULE >help.out
 	then
 		$DIALOG	--backtitle "$backtitle" --title "$2"\
 			--textbox help.out $ROWS $COLS