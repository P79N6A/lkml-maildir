Date: Wed, 15 Sep 2004 08:59:54 +1000
From: Nick Piggin <>
Subject: Re: 2.6.8.1 mempool subsystem sickness
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/9/14/410

Jeff V. Merkey wrote:
> 
> Hi Jeff,
> 
>> Can you give us a few more details please? Post the allocation failure
>> messages in full, and post /proc/meminfo, etc. Thanks.
>> -
>>
> Here you go.
> 
Thanks.
> Jeff
> 
> Sep 14 14:18:59 datascout4 kernel: if_regen2: page allocation failure. 
> order:3, mode:0x20
> Sep 14 14:18:59 datascout4 kernel:  [<80106c7e>] dump_stack+0x1e/0x30
> Sep 14 14:18:59 datascout4 kernel:  [<80134aac>] __alloc_pages+0x2dc/0x350
> Sep 14 14:18:59 datascout4 kernel:  [<80134b42>] __get_free_pages+0x22/0x50
> Sep 14 14:18:59 datascout4 kernel:  [<80137d9f>] kmem_getpages+0x1f/0xd0
> Sep 14 14:18:59 datascout4 kernel:  [<8013897a>] cache_grow+0x9a/0x130
> Sep 14 14:18:59 datascout4 kernel:  [<80138b4b>] 
> cache_alloc_refill+0x13b/0x1e0
> Sep 14 14:18:59 datascout4 kernel:  [<80138fa4>] __kmalloc+0x74/0x80
> Sep 14 14:18:59 datascout4 kernel:  [<80299298>] alloc_skb+0x48/0xf0
> Sep 14 14:18:59 datascout4 kernel:  [<f8972e67>] 
> create_xmit_packet+0x57/0x100 [dsfs]
> Sep 14 14:18:59 datascout4 kernel:  [<f8973150>] regen_data+0x60/0x1d0 
> [dsfs]
> Sep 14 14:18:59 datascout4 kernel:  [<80104355>] 
> kernel_thread_helper+0x5/0x10
> Sep 14 14:18:59 datascout4 kernel: printk: 12 messages suppressed.
> 
> MemTotal:      1944860 kB
> MemFree:        200008 kB
Wow. You have 200MB free, and can't satisfy an order 3 allocation (although it
is atomic).
Now it just so happens that I have a couple of patches that are supposed to fix
exactly this. Unfortunately I haven't had the hardware to properly test them
(they're pretty stable though). Want to give them a try? :)
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/