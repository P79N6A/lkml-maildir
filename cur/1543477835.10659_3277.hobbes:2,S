Date: Fri, 15 Jan 1999 3:31:19 MET
From: Heinz Mauelshagen <>
Subject: SCSI CD-ROM media change not recognized
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/1/14/269

Hi everybody!
I dont' know when it started, but with 2.2.0-pre7, aic7xxx 5.1.10,
TEAC CD-R55S attached to an Adaptec 2940W CD media changes aren't
recognized any longer and the door is not locked, when the media
is in use (for egg. mounted).
It worked with at least some of the 2.1.x kernels.
A workaround is to try an access when the unit is _not_ ready.
This leads to a corresponding test unit read error in linux/drivers/scsi/sr.c,
function sr_media_changed(), which then reports a media change to the VFS.
Obviously, the lower scsi level never sets device->changed != 0 ?!
Any suggestions?
Happy hacking,
Heinz
--
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
Systemmanagement Entwicklungsbereich 2           Deutsche Telekom AG
                                                 Entwicklungszentrum Darmstadt
Heinz Mauelshagen                                Otto-Roehm-Strasse 71c
                                                 Postfach 10 05 41
mge@ez-darmstadt.telekom.de                      64205 Darmstadt
                                                 Germany
                                                 +49 6151 886-425
                                                          FAX-386
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/