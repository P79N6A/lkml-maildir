Date: Fri, 16 Jan 2004 12:16:23 -0800
From: Mike Fedyk <>
Subject: Re: Stale Filehandles was: [2.6] nfs_rename: target $file busy, d_count=2
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/1/16/192

On Fri, Jan 16, 2004 at 10:55:04AM -0800, Mike Fedyk wrote:
> On Fri, Jan 16, 2004 at 10:40:31AM -0800, Mike Fedyk wrote:
> > I only had a few nfs clients doing light load, (kde home directories, and
> > such) and was able to reproduce stale nfs file handles just by running "find
> > > /dev/null" on the nfs share.
> > 
> > Have you tried the -mm tree recently?  2.6.1-mm4 even has some new nfsd
> > patches in there (maybe you should wait until -mm5 though, there are a few
> 
> Stale filehandles is the main problem right now, and I don't see how
> nfs_raname would be related (just that it was there while I was having
> trouble with the stale file handles...)
> 
> 
http://www.kernel.org/pub/linux/kernel/people/akpm/patches/2.6/2.6.1/2.6.1-mm4/broken-out/nfsd-01-stale-filehandles-fixes.patch
> 
> This one looks particularly interesting...
> 
Most of the nfs client patches are for NFS4 or RPCSEC_GSS.  Except for:
http://www.kernel.org/pub/linux/kernel/people/akpm/patches/2.6/2.6.1/2.6.1-mm4/broken-out/
nfs-26-sock_disconnect.patch
nfs-31-attr.patch
nfs-client-deadlock-fix.patch
nfs-fix-bogus-setattr-calls.patch
nfs-open-intent-fix.patch
nfs-optimise-COMMIT-calls.patch
nfs-readonly-mounts-fix.patch
nfs-rpc-debug-oops-fix.patch
These might be interesting to test, but so far I haven't had troubles with
the stock Linus 2.6 nfs3 client.
Mike
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/