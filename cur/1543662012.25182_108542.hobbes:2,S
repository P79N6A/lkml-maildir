Date: Mon, 10 Feb 2003 20:06:31 +0100
From: Bas Zoetekouw <>
Subject: 2.4.20 nfs bug
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/2/10/170

Hi guys!
Yesterday I encountered the following bug in my 2.4.20 kernel.  My
machine froze (not instaneously, but disk reads didn't work; I had to
hard resetmy machine), and the following entries were written to syslog:
Feb  9 17:40:31 localhost kernel: kernel BUG at inode.c:1034!
Feb  9 17:40:31 localhost kernel: invalid operand: 0000
Feb  9 17:40:31 localhost kernel: CPU:    0
Feb  9 17:40:31 localhost kernel: EIP:    0010:[iput+552/592]    Tainted: P 
Feb  9 17:40:31 localhost kernel: EFLAGS: 00010246
Feb  9 17:40:31 localhost kernel: eax: 00000001   ebx: c5d01580   ecx: c5d01724   edx: c5d01701
Feb  9 17:40:31 localhost kernel: esi: 00000000   edi: ccf19c00   ebp: ccb9b540   esp: cde1ff04
Feb  9 17:40:31 localhost kernel: ds: 0018   es: 0018   ss: 0018
Feb  9 17:40:31 localhost kernel: Process rpciod (pid: 183, stackpage=cde1f000)
Feb  9 17:40:31 localhost kernel: Stack: c9da0d40 ca123e3c 00000046 c9da0cc0 c5d01580 c5d01724 d4ac4dfa c5d01580 
Feb  9 17:40:31 localhost kernel:        c9da0cd0 c9da0cc0 c10db3e8 d4ac40cc c9da0cc0 c7d02294 cea647c0 ccb9b540 
Feb  9 17:40:31 localhost kernel:        d4ac7c90 cf8ac618 d4a9b1a5 ccb9b668 ccb9b5e4 ccb9b5c8 ccb9b594 ccb9b540 
Feb  9 17:40:31 localhost kernel: Call Trace:    [nfs:__insmod_nfs_S.text_L58808+44410/58808] [nfs:__insmod_nfs_S.text_L58808+41036/58808] [nfs:__insmod_nfs_S.text_L58808+56336/58808] [nfs:__insmod_nfs_O/lib/modules/2.4.20/kernel/fs/nfs/nfs.o_M3E3E+-126555/128] [nfs:__insmod_nfs_O/lib/modules/2.4.20/kernel/fs/nfs/nfs.o_M3E3E+-112815/128]
Feb  9 17:40:31 localhost kernel:   [schedule+513/832] [nfs:__insmod_nfs_O/lib/modules/2.4.20/kernel/fs/nfs/nfs.o_M3E3E+-111907/128] [nfs:__insmod_nfs_O/lib/modules/2.4.20/kernel/fs/nfs/nfs.o_M3E3E+-109948/128] [nfs:__insmod_nfs_O/lib/modules/2.4.20/kernel/fs/nfs/nfs.o_M3E3E+-110112/128] [kernel_thread+46/64] [nfs:__insmod_nfs_O/lib/modules/2.4.20/kernel/fs/nfs/nfs.o_M3E3E+-69600/128]
Feb  9 17:40:31 localhost kernel:   [nfs:__insmod_nfs_O/lib/modules/2.4.20/kernel/fs/nfs/nfs.o_M3E3E+-110112/128]
Feb  9 17:40:31 localhost kernel: 
Feb  9 17:40:31 localhost kernel: Code: 0f 0b 0a 04 43 4e 27 c0 e9 fb fd ff ff c7 04 24 2c 00 00 00 
F
This is an Athlon 1800+, 256MB memory, SiS mobo, IDE (SiS 5513), scsi
(advansys), running 2.4.20 with the 20021212-2.4.20 acpi patch from
acpi.sf.net.  The machine has nfs utils version 1.0.2 installed (Debian
unstable) and is running nfs-kernel-server.  There were nfs-mounted
disks from a client that was also running Debian unstable with nfs utils
1.0.2.  The mount options were rsize=8192,wsize=8192,nfsvers=3,bg,intr.
The NFS-related lines from my .config are:
CONFIG_NFS_FS=m
CONFIG_NFS_V3=y
# CONFIG_ROOT_NFS is not set
CONFIG_NFSD=m
CONFIG_NFSD_V3=y
CONFIG_NFSD_TCP=y
CONFIG_SUNRPC=m
CONFIG_LOCKD=m
CONFIG_LOCKD_V4=y
I hope this is any help to you.
-- 
Kind regards,
+---------------------------------------------------------------+
| Bas Zoetekouw                  | Si l'on sait exactement ce   |
|--------------------------------| que l'on va faire, a quoi    |
| bas@o2w.nl, bas@debian.org     | bon le faire?                |
| GPG key: 0644fab7              |               Pablo Picasso  |
+---------------------------------------------------------------+ 
[unhandled content-type:application/pgp-signature]