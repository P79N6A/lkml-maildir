Date: Wed, 30 Apr 2008 11:38:00 +0100
From: Alasdair G Kergon <>
Subject: Re: [PATCH] Optimize lock in queue unplugging
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/4/30/116

On Wed, Apr 30, 2008 at 09:14:15AM +0200, Jens Axboe wrote:
> So it's basically dm calling into blk_unplug() all the time, which
> doesn't check if the queue is plugged. The reason why I didn't like the
> initial patch is that ->unplug_fn() really should not be called unless
> the queue IS plugged. So how about this instead:
> 
> 
http://git.kernel.dk/?p=linux-2.6-block.git;a=commit;h=c44993018887e82abd49023e92e8d8b6000e03ed
> 
> That's a lot more appropriate, imho.
Makes sense to me, ack.
Alasdair
-- 
agk@redhat.com