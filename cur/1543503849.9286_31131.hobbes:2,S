Date: Sat, 24 Jul 1999 22:01:24 +0100 (IST)
From: Paul Jakma <>
Subject: Re: Joking PCI bridges: still another one.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/7/24/100

On Sat, 24 Jul 1999, Gerard Roudier wrote:
  On Sat, 24 Jul 1999, Paul Jakma wrote:
  The latest -ac patches incorporates a wrong change in the alpha specific
  code that breaks the ncr53c8xx driver and most of the sym53c8xx driver
  versions for ALPHA. This change may be reverted and, anyway, a fix will be
  supplied in further diffs (not by me). 
So it's a known problem? (phew... relief!) this has been bugging me
for weeks, and noone could tell me exactly why -ac wouldn't boot. At
last someone knows why! :)
You can't supply a diff, but would you know where in the Alpha
specific code the change is? So that i can try to revert back to the
2.2.10 behaviour.
(I need 2.2.11pre cause I've been having terrible problem's with
module loading oopsing, and 2.2.11pre2 apparently has all the fixes 
- but so far i can't get it to recognise the sym53c875!).
  The offending change had the effect to prevent PCI transactions targetted 
  from a PCI device to the PCI bus address space to work as expected.
  The drivers affected are, for example, those that let the PCI
  device self-master itself from the PCI BUS.
  Latest sym53c8xx driver version didn't use anymore PCI self-mastering, but
  the ncr53c8xx driver cannot work without this feature since the support of
  old NCR chips precludes use of LOAD/STORE instructions that hadn't yet
  been invented for this chip family at the time of earliest NCR53C8XX
  chips. 
so if i grab the latest sym53c8xx from your site it should work on
Alpha and 2.2.?-ac?/2.2.11pre2/2.3? Excellent!
  > The other compiled in drives seem to detect their controllers fine,
  > eg IDE.
  
  The linux ncr53c8xx driver and other drivers that deal with this chip
  family are perhaps the only drivers that are affected (ALPHA only). 
  
  And by the way, the sym53c8xx driver (recent versions) is probably the 
  only driver for SYM53C8XX chips that does not require PCI self-mastering.
  
Ok. Thanks very much Gerard for the info! I'll try your latest
SYM53C8XX.
I'm also cc'ing this onto the Redhat Alpha list, as it might be
useful info for other alpha users. Also, do any of the Linux-Alpha
coders have a fix for the PCI Self-Mastering breakage that Gerard
reffered to?
regards,
-- 
Paul Jakma
paul@clubi.ie	
http://hibernia.clubi.ie
PGP5 key: 
http://www.clubi.ie/jakma/publickey.txt
-------------------------------------------
Fortune:
Immigration is the sincerest form of flattery.
		-- Jack Paar
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/