Date: Thu, 8 Aug 2002 15:09:57 +0530
From: Ravikiran G Thirumalai <>
Subject: Re: [Lse-tech] [patch] Scalable statistics counters with /proc reporting
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/8/8/82

On Wed, Aug 07, 2002 at 10:02:16AM +0100, Christoph Hellwig wrote:
>...
> What about a general s/_proc//g for the API?
Sure ...I was initially thinking of something like statctr_pentry,
but then thought statctr_proc_entry would be explicit although lengthy.
> 
> For statctr_init the flags argument would much better be named gfp_mask,
I'll do that. I was just following the same conventions as kmalloc and
kmem_cache_alloc; but gfp_mask is much better; thanx.
> the val argument should be removed and the counter initialized to zero
> by default - that's 90% of the uses..
Yup, I'll do this too.
> 
> Also the /proc-based implementation is really ugly.  It should be moved
> over to the seq_file interface at least, a simple ramfs-style own
> filesystem ("stats" filesystem type) would be the cleanest solution.
If I want to create difft proc files for difft groups of statctrs like 
say /proc/statistics/vmstats, /proc/statistics/netstats etc., dynamically,
using seq_file implementation might be not very neat...I have to 
confess I don't know much about seq_file interfaces....so pls correct
me if I am missing something......I just looked at them after your pointer. 
We wanted to keep things simple right now ... IMHO a custom file system 
right now might be complicating the patch.....maybe later when there are many 
users of statctrs 8-) ...
Thanks,
Kiran
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/