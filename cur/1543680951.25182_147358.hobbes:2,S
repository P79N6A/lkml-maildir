Date: Sat, 12 Jul 2003 06:46:01 -0400
From: Ivan Gyurdiev <>
Subject: Re: 2.5.75 does not boot - TCQ oops
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/7/12/46

Okay, I figured out some more things.
I split my root fs in half and made two identical copies  - one on reiser and 
one on xfs. I compiled a bunch of kernels, and tested some more.
A TCQ enabled kernel with AS, queue depth of 32 works fine on both reiser and 
xfs. A TCQ enabled kernel with deadline, queue depth of 32 works fine on both 
reiser and xfs. Note the depth of 32. I had TCQ enabled on previous <74 
kernels and it worked fine, everywhere with depth 32. 
However, the kernel that crashed was using the default
(The default is 8, even though the comment says 32).
I tested that kernel again with reiserfs, TCQ, the two elevators, and queue 
depth 8 - on-boot fsck detects corruption every time, marks the system 
unclean, and requires --rebuild-tree or --fix-fixable on any further mounts. 
I now get "Wrong amount of used blocks." message.
Have not tested depth 8 TCQ kernel with xfs, since that's my surviving root 
fs, and I'd like to avoid corruption there. 
Have not tested queue depths other than 8 and 32. 
I could test some more on reiser now that I have a backup root fs.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/