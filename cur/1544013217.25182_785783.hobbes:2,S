Date: Fri, 2 Jan 2009 19:29:16 +0900
From: "MinChan Kim" <>
Subject: Re: [PATCH] mm: stop kswapd's infinite loop at high order allocation take2
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2009/1/2/69

On Fri, Jan 2, 2009 at 7:00 PM, KOSAKI Motohiro
<kosaki.motohiro@jp.fujitsu.com> wrote:
>> Hi, kosaki-san.
>>
>> I read the previous threads now. It's rather late :(.
>>
>> I think it's rather awkward that sudden big change of order from 10 to 0.
>>
>> This problem causes zone_water_mark's fail.
>> It mean now this zone's proportional free page per order size is not good.
>> Although order-0 page is very important, Shouldn't we consider other
>> order allocations ?
>>
>> So I want to balance zone's proportional free page.
>> How about following ?
>>
>> if (nr_reclaimed < SWAP_CLUSTER_MAX) {
>>   if (order != 0) {
>>     order -=1;
>>     sc.order -=1;
>>   }
>> }
>>
>> It prevents infinite loop and do best effort to make zone's
>> proportional free page per order size good.
>>
>> It's just my opinion within my knowledge.
>> If it have a problem, pz, explain me :)
>
> Please read Nick's expalin. it explain very kindly :)
Hm. I read Nick's explain.
I understand his point.
Nick said,
"A higher kswapd reclaim order shouldn't weaken kswapd
postcondition for order-0 memory."
My patch don't prevent order-0 memory reclaim. After all, it will do it.
It also can do best effort to reclaim other order size.
In this case, others order size reclaim is needless  ?
-- 
Kinds regards,
MinChan Kim