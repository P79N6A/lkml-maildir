Date: Wed, 25 Jun 2003 12:38:16 +0200
From: Jan Dittmer <>
Subject: [PATCH] export flush_tlb_all for drm modules
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/6/25/51

This adds an export for flush_tlb_all to i386_ksyms.c. The drm modules
miss this, when compiling for SMP.
Original fix from Pasi Savolainen, but for some reason this was not
included until now (2.5.73-mm1).
His comment:
  > drivers/char/drm/drm_memory.h needs this to compile as module (at
  > least)on SMP, where flush_tlb_all() isn't a inline macro.
Rediffed against 2.5.73-mm1. Tested loading of the module on UP/k7 with 
SMP config. I only have a R300 board, so I can't really test the driver.
I think the other drm modules should also be loadable again with this patch.
Thanks,
Jan
--- linux-mm/arch/i386/kernel/i386_ksyms.c	2003-05-31 14:14:59.000000000 +0200
+++ 2.5.73-mm1/arch/i386/kernel/i386_ksyms.c	2003-06-25 09:34:57.000000000 +0200
@@ -159,6 +159,7 @@
 
 /* TLB flushing */
 EXPORT_SYMBOL(flush_tlb_page);
+EXPORT_SYMBOL(flush_tlb_all);
 #endif
 
 #ifdef CONFIG_X86_IO_APIC