Date: Thu, 29 Nov 2007 15:14:44 +0100
From: Norbert Preining <>
Subject: Re: Add the infamous Huawei E220 to option.c
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/11/29/153

Hi Pete, hi all,
On Mi, 28 Nov 2007, Pete Zaitcev wrote:
> It looks like the Huawei E220 saga is not over yet. A collegue of mine,
> David Russll, reported that the modem does not work reliably on Fedora 8,
> which does have the initializer in usb-storage.
That is what I said.
> it's random which wins. If usb-storage wins, everything is fine. If option
> wins, it binds to modem still in storage mode and does not work.
That could be the source of my disconnect/reconnect cycles.
> This way no matter which driver wins the modem gets initialized. The
> patch is tested on David's modem, but I would like someone give it more
> testing.
> 
> I dunno, do we want some kind of code sharing between storage and option?
> They both could use the normal usb_control_msg, I think.
> 
> Also, from archives it looks like Johann may need PID 0x1004 added.
> 
> Since we're on topic, David's modem has exactly same IDs as Norbert's,
> but works fine with the length of 1. Although it's possible that the
> firmware is different without different firmware reported in USB desc-
> riptors. Does anyone know a magic AT command? ATI or something?
> Norbert, please try my patch, maybe it'll work this time.
I tried your patch with the reverted 0x1 -> 0 change. But it didn't
work. I get connects/reconnects.
So to be clear: kernl 2.6.24-rc3 + your patch gives me permanent cycles
and an error:
	option_start_huawei: HUAWEI E220 setup failed (1)
I attach the syslog part which exhibits the behaviour.
> And finally, pleas stop using that script from the polish website and
Did it already, but without the 0x1->0 change it does not work here.
> above all quit using the generic serial subdriver. The option must
Long done, I assume that the option module depending on usbserial is not
the problem.
> work now with the patch. Please let me know if it fails.
It does.
Best wishes
Norbert
-------------------------------------------------------------------------------
Dr. Norbert Preining <preining@logic.at>        Vienna University of Technology
Debian Developer <preining@debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
MUNDERFIELD (n.) A meadow selected, whilst driving past, as being
ideal for a picnic which, from a sitting position, turns out to be
full of stubble, dust and cowpats, and almost impossible to enjoy
yourself in.
			--- Douglas Adams, The Meaning of Liff
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/