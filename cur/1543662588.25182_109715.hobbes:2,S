Date: Fri, 14 Feb 2003 14:00:31 -0600
From: Corey Minyard <>
Subject: Re: Kexec, DMA, and SMP
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/2/14/216

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1
Werner Almesberger wrote:
|Zwane Mwaikambo wrote:
|
|>I don't think suspending devices is safe at that stage since removing
|>devices and walking lists and freeing memory and disabling devices and...
|>kicks up quite a storm.
|
|
|If you *really* don't want to stop devices, you can use the
|"reserved, non-DMA memory" approach, kexec the kernel that
|records the crash dump, and then do a system-wide reset, or
|such.
|
|But if you don't have that - possibly considerable - amount
|of memory to spare, you don't have much of a choice than to
|stop devices. Of course, crash dumps don't need a neat and
|clean shutdown, so you can avoid all the kfrees, and such.
|
|(So adding a special mode to the power management code may
|be too much overhead. Besides, sometimes, you can just pull
|a reset line, and don't have to do anything even remotely
|related to power management.)
True, I didn't mean the high-level power management code directly.  But the
PCI API defines a suspend operation that could take a special mode for this.
Or maybe a new field in the PCI structure (and equivalent for other 
things, if
there are any).  But the suspend and resume operations should at least give
a good idea where its needed and how to use it.
- -Corey
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.6 (GNU/Linux)
Comment: Using GnuPG with Mozilla - 
http://enigmail.mozdev.org
iD8DBQE+TUrdmUvlb4BhfF4RAn2aAJ40Ktn3x6Zygs1RMnAs/HLp5YqtHwCaA3kD
lRNA6aXFagCkjbE87e+DZCw=
=9wf1
-----END PGP SIGNATURE-----
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/