Date: Thu, 28 Nov 2002 22:36:12 +0100
From: KELEMEN Peter <>
Subject: Re: NFS performance ...
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/11/28/128

* Trond Myklebust (trond.myklebust@fys.uio.no) [20021128 17:40]:
> > The culprit turned out to be an inherited CONFIG_NFS_DIRECTIO
> > setting.  Having the client kernel (2.4.20rc2aa1) this option
> > turned off, performance is stable 4 MB/sec (server hasn't
> > changed).  This is almost twice as good as with 2.4.19-rmap14b.
> Huh? Sounds like something is seriously screwed up in your
> kernel build then. CONFIG_NFS_DIRECTIO should should result in 2
> things only: [...] None of the ordinary NFS read and write code
> paths should be affected by the above.
Well, weird as it may seem, this is what happened.  I compiled
2.4.20rc2aa1 with my .config, NFS sucked.  make menuconfig, turned
off CONFIG_NFS_DIRECTIO, make -j2 bzImage modules modules_install
(no compiler errors), install kernel, lilo, reboot, NFS flies.
Confirmed on other machine as well.  gcc is 3.2.1 (Debian sid).
Wish to seek more input on the case?
Peter
-- 
    .+'''+.         .+'''+.         .+'''+.         .+'''+.         .+''
 Kelemen PÃ©ter     /       \       /       \       /      fuji@elte.hu
.+'         `+...+'         `+...+'         `+...+'         `+...+'
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/