Date: Wed, 30 Apr 2008 08:35:52 +0200
From: Sam Ravnborg <>
Subject: Re: Additional kconfig targets (cloneconfig, nonint_oldconfig etc)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/4/30/35

> > The commands we have today for kconfig is:
> > 
> > # Command line variants
> > make oldconfig
> > make silentoldconfig
> > make defconfig
> > make XXX_defconfig
> > 
> > (The other frontends are left out on purpose).
> > The challenge here is to come up with a syntax that
> > allows us to select between the three behaviours,
> > while keeping backward compatibility.
> > 
> > The best suggestion I have so far is to say that:
> > a) if defconfig is specified then we use method 1)
> > b) if oldconfig is specified then we use method 2)
> > c) if newconfig is specified then we use method 3)
> > 
> 
> 'newconfig' sounds to me like you're creating a new config; the exact
> opposite of what it does.  I'd suggest 'listnewconfig' or some such thing.
listnewconfig is better - will use that.
> Then again, 'defconfig' and 'oldconfig' are primarily what I care about,
> as I haven't been in a situation where I would have found method 3) to
> be useful.
> 
> > And we add support for a new 'commandline' parameter
> > 'K' so I can say:
> > 
> > make K=/proc/config.gz defconfig
> > make K=i386_defconfig  defconfig
> > make K=i386_defconfig  oldconfig
> > make K=/proc/config.gz newconfig
> > 
> > So K is used to specify what config file we use
> > to start out from.
> 
> Sounds good, I highly prefer specifying the config via env variable
> rather than embedded in the target (ie, 'make olpc_defconfig').
I will try to come up with some simple algorithm to locate the file.
I guess something like:
a) Try in local dir with name supplied
b) If filname does not start with '/' try in arch/$ARCH/configs/*
c) If filname does not start with '/' try in arch/$ARCH/configs/*_defconfig
If filename is prefixed .gz unpack it
	Sam