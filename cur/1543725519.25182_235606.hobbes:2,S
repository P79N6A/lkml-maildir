Date: Thu, 22 Jul 2004 09:27:44 +0200
From: Amon Ott <>
Subject: Re: 4K stack kernel get Oops in Filesystem stress test
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/7/22/20

On Dienstag, 20. Juli 2004 16:39, Jeffrey E. Hundstad wrote:
> Steve Lord wrote:
> > Don't use 4K stacks and XFS. What you hit here is a path where the
> > filesystem is getting full and it needs to free some reserved space
> > by flushing cached data which is using reserved extents. Reserved
> > extents do not yet have an on disk address and they include a
> > reservation for the worst case metadata usage. Flushing them will
> > get you room back.
> >
> > As you can see, it is a pretty deep call stack, most of XFS is going
> > to work just fine with a 4K stack, but there are end cases like
> > this one which will just not fit.
> 
> If this is a known truth with XFS maybe it would be a good idea to have 
> 4K stacks and XFS be an impossible combination using the config tool.
It would be good if there was some warning in the 4K stack option help, 
there have been quite many cases already where the kernel broke with odd 
symptoms because of this switch.
E.g.
Warning: Use this option with care, as it might break your system under 
load. If you experience weird crashes or oopses, please retry with this 
option turned off.
Amon.
-- 
http://www.rsbac.org
 - GnuPG: 2048g/5DEAAA30 2002-10-22
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/