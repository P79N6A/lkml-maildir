Date: Thu, 28 Jun 2007 18:49:56 -0400 (EDT)
From: Steven Rostedt <>
Subject: [PATCH RT] Move RECURSION_LIMIT define up for global use.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/6/28/308

Ingo,
If one has CONFIG_PROVE_LOCKING off but CONFIG_TRACE_IRQFLAGS on, the
RECURSION_LIMIT definition is not defined.  This patch move
RECURSION_LIMIT up for global use.
Signed-off-by: Steven Rostedt <rostedt@goodmis.org>
Index: linux-2.6.21.5-rt18/kernel/lockdep.c
===================================================================
--- linux-2.6.21.5-rt18.orig/kernel/lockdep.c	2007-06-28 18:36:32.000000000 -0400
+++ linux-2.6.21.5-rt18/kernel/lockdep.c	2007-06-28 18:36:51.000000000 -0400
@@ -44,6 +44,8 @@
 #include "lockdep_internals.h"
+#define RECURSION_LIMIT 40
+
 #ifdef CONFIG_PROVE_LOCKING
 int prove_locking = 1;
 module_param(prove_locking, int, 0644);
@@ -740,8 +742,6 @@ static noinline int print_circular_bug_t
 	return 0;
 }
-#define RECURSION_LIMIT 40
-
 static int noinline print_infinite_recursion_bug(void)
 {
 	if (!debug_locks_off_graph_unlock())
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/