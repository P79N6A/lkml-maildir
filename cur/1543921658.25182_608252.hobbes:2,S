Date: Mon, 22 Oct 2007 16:29:36 -0200
From: Mauro Carvalho Chehab <>
Subject: Re: [v4l-dvb-maintainer] DVB: BANDWIDTH_TO_KHZ strangeness
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/10/22/236

> I know that in the future the linux-dvb-API will also support other 
> bandwidths so I'm begging for mercy for those 3 things here to not get too 
> much out-of-sync with our internal code.
I don't see much problem on keeping this for a while. 
However, if not causing to much troubles for you to manage, I would to
this, instead:
#if 0
	/* Currently, DVB API allows only bandwidths starting from 5 GHz */
        factor = BANDWIDTH_TO_KHZ(ch->u.ofdm.bandwidth);
        if (factor >= 5000)
                factor = 1;
        else
                factor = 6;
#else
	factor = 6;
#endif
With the above code, gentree.pl scripts will automatically remove the
dead code from the Kernel, while keeping it defined at the development
environment.
If you want, you may also replace the #if 0 by something like:
#ifdef API_SUPPORTS_LOW_BANDWIDTH
In this case, by adding API_SUPPORTS_LOW_BANDWIDTH to gentree.pl, the
same effect of eliminating the dead code from kernel can be produced,
since gentree.pl is capable of evaluating cpp macros like the above to 0
(or 1) for the constants declared on a table inside its code.
-- 
Cheers,
Mauro
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/