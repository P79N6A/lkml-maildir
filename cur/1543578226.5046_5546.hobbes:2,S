Date: Tue, 9 Jan 2001 20:28:55 -0600
From: Peter Samuelson <>
Subject: Re: Linux 2.2.19pre7
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/1/9/327

[Mike van Smoorenburg]
> Also calling kwhich with multiple arguments was actually the idea
> behind the script.
Yes, and that's why my optimization patch (in 2.2.19pre3, since
reverted) broke -- it relied on multiple arguments.
Alan, could you put it back in now?
Peter
--- 2.2.19-7/Makefile~	Tue Jan  9 20:20:14 2001
+++ 2.2.19-7/Makefile	Tue Jan  9 20:27:27 2001
@@ -24,12 +24,14 @@
 LD	=$(CROSS_COMPILE)ld
 #
 #	foo-bar-gcc for cross builds
-#	gcc272 for Debian's old compiler for kernels
 #	kgcc for Conectiva, Mandrake and Red Hat 7
+#	gcc272 for Debian
 #	otherwise 'cc'
 #
-CC	=$(shell if [ -n "$(CROSS_COMPILE)" ]; then echo $(CROSS_COMPILE)gcc; else \
-	$(CONFIG_SHELL) scripts/kwhich gcc272 2>/dev/null || $(CONFIG_SHELL) scripts/kwhich kgcc 2>/dev/null || echo cc; fi) \
+CCFOUND :=$(shell $(CONFIG_SHELL) scripts/kwhich kgcc gcc272 cc gcc)
+## Better, but requires GNU make 3.78
+##CC	=$(if $(CROSS_COMPILE),$(CROSS_COMPILE)gcc,$(CCFOUND)) -D__KERNEL__ -I$(HPATH)
+CC	=$(shell if [ -n "$(CROSS_COMPILE)" ]; then echo $(CROSS_COMPILE)gcc; else echo $(CCFOUND); fi) \
 	-D__KERNEL__ -I$(HPATH)
 CPP	=$(CC) -E
 AR	=$(CROSS_COMPILE)ar
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/