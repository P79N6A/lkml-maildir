Date: Thu, 4 Feb 1999 11:59:07 +0300 (MSK)
From: Oleg Drokin <>
Subject: Re: [patch] fixed 2.2.1 inode-leakage due bogus design of the free_inodes algorithm [was [Re: [showstopper] Memory leak in 2.2.1]]
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/2/4/31

> >     I've got Andrea's IKD patch for 2.2.1 and here is the results (output of 
> >     diff between "dosum" output before and after copying).
> 
> The IKD info is been very useful. I just noticed and fixed the leak. The
> bug is a _design_ bug. There was a performance optimization that make tons
> of sense in a dynamic (shrinkable) structure but it's completly bogus in a
> not shrinkable sturcutre like the inode pool is. 
This does not work at all!
angband:/tmp$ cp -a test test1
(test is directory with 12 subdirs, with 10k files in each)
and machine is dead in few seconds (well, sysrq works, but this is only thing
that works) When I compile in 2 printks, one in inode.c to show allocated page,
and one in mm/filemap.c, to show when page is freed, I see a lot of
pages allocated, then a lot freed and death. sysrq-u does not work.
> Apply it and be happy ;).
:-\ I want to be happy, but I cannot.
Bye,
    Oleg
-- 
 [RAVE *SUCKS* TEAM] [Team $Ui(iDE] [Trans-M Must Die!] [Sepultura Fans Team]
                         [Tolkien forever team]
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/