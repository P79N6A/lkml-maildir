Date: Tue, 12 Jun 2001 12:32:07 +1000 (EST)
From: Neil Brown <>
Subject: Re: NFS PANIC and FIX in 2.4
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/6/11/112

On Saturday June 9, James.Bottomley@SteelEye.com wrote:
> Hi All,
> 
> I get this panic running RedHat 2.4.3-6:
> 
> Unable to handle kernel NULL pointer dereference at virtual address 00000004
> c014b13d
....
> 
> The problem is pretty specific to 2.4.3-6 because it has code in list_del() to 
> null out the prev and next pointers (I don't know where they picked it up, but 
> its gone in 2.4.5).   However, it exposes a bug in NFS, namely that d_splice() 
> also calls list_del() on tdentry->d_child.  This shouldn't be done because it 
> makes the d_child list invalid, so any subsequent call to list_del on d_child 
> could panic.  I think the correct fix (attached below) is to change the NFS 
> list_del to list_del_init.
Yep, that looks good.  I'll forward it to Linus with a few other fixes
I have pending.
Thanks,
NeilBrown
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/