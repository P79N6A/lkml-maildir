Date: Tue, 6 Jan 2009 15:30:59 +0200
From: "Pekka Enberg" <>
Subject: Re: 2.6.29 -mm merge plans
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2009/1/6/147

Hi Ryusuke,
[snip nilfs patches]
On Mon, Jan 5, 2009 at 11:40 AM, Ryusuke Konishi
<konishi.ryusuke@lab.ntt.co.jp> wrote:
>>  Dunno.   Has this been reviewed enough?
>>
>
> I'm now working to follow some comments from Chris, and
> I think nilfs should be reviewed more widely.
>
> I'll aim for the next merge window or so.
It would be nice if BUG(), BUG_ON(), and panic() calls would be
converted to proper error handling using WARN_ON() calls. The BUG()
call in nilfs_cpfile_delete_checkpoints(), for example, looks to be
triggerable from user-space via the ioctl() system call (albeit I
didn't look too closely). Furthermore, the BUG() calls in error paths
of fs/nilfs2/ioctl.c look really fishy.
On a related note, there are quite a few new ioctls there. Are they
described somewhere? Also, can they be converted to use
->unlocked_ioctl? It's bit sad that we're adding new users of BKL in
shiny new code.
                           Pekka