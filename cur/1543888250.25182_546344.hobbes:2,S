Date: Fri, 18 May 2007 23:25:52 +0200
From: "Jiri Slaby" <>
Subject: Re: [PATCH 1/1] Misc: phantom, move to unlocked_ioctl
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/5/18/336

On 5/18/07, Andrew Morton <akpm@linux-foundation.org> wrote:
> On Fri, 18 May 2007 22:34:53 +0200 (CEST)
> Jiri Slaby <jirislaby@gmail.com> wrote:
>
> > @@ -118,7 +125,9 @@ static int phantom_ioctl(struct inode *inode, struct file *file, u_int cmd,
> >               if (r.reg > 7)
> >                       return -EINVAL;
> >
> > +             spin_lock(&dev->ioctl_lock);
> >               r.value = ioread32(dev->iaddr + r.reg);
> > +             spin_unlock(&dev->ioctl_lock);
>
> What is that locking protecting in here?
Well, what led me to do it is that I didn't know how much atomic are
ioread and iowrite. If concurrent process writes something to the
place in that space while the other one is reading it, doesn't matter,
correct?
thanks,
-- 
http://www.fi.muni.cz/~xslaby/
            Jiri Slaby
faculty of informatics, masaryk university, brno, cz
e-mail: jirislaby gmail com, gpg pubkey fingerprint:
B674 9967 0407 CE62 ACC8  22A0 32CC 55C3 39D4 7A7E
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/