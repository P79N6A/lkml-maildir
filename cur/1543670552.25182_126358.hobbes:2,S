Date: Sun, 20 Apr 2003 18:25:05 +0100 (BST)
From: John Bradford <>
Subject: Re: Are linux-fs's drive-fault-tolerant by concept?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/4/20/68

> >> You will if it writes and fails to read back. The disk can't invent a
> >> sector that is gone. 
> >
> > but linux can if you use an raid1 mirror... maybe we should teach the md
> > layer to write back the data from the other disk on a "bad sector"
> > error.
> 
> 
>   I have some ugly code that forces all reads from a mirror set to
> a specific copy, set via a global sysctl.  This lets you do things
> like make a backup from disk 0, then verify against disk 1 and take
> action if something is wrong.
That's interesting.  Have you thought of making it read from _both_
disks and check that the data matches, before passing it back?
RAID1 mirrors guard against drive failiure, but if a drive returns bad
data, but doesn't report an error, that will usually go unnoticed.
By reading from both disks, and checking that the data was the same,
we could guard against broken firmware.
Of course, this would reduce performane quite a bit, but it might have
some uses.
John.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/