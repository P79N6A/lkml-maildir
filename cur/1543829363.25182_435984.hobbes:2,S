Date: Thu, 22 Jun 2006 22:09:42 -0400
From: Dave Jones <>
Subject: remove useless checks in cifs connect.c
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/6/22/492

The ; at the end of the 2nd if line in this diff caught my eye.
On closer inspection the whole line is unnecessary
anyway as kfree(NULL) is ok.
Also nuked another one a few lines up.
Signed-off-by: Dave Jones <davej@redhat.com>
--- linux-2.6/fs/cifs/connect.c~	2006-06-22 22:07:04.000000000 -0400
+++ linux-2.6/fs/cifs/connect.c	2006-06-22 22:07:42.000000000 -0400
@@ -2822,15 +2822,13 @@ CIFSNTLMSSPNegotiateSessSetup(unsigned i
 							    = 0;
 						} /* else no more room so create dummy domain string */
 						else {
-							if(ses->serverDomain)
-								kfree(ses->serverDomain);
+							kfree(ses->serverDomain);
 							ses->serverDomain =
 							    kzalloc(2,
 								    GFP_KERNEL);
 						}
 					} else {	/* no room so create dummy domain and NOS string */
-						if(ses->serverDomain);
-							kfree(ses->serverDomain);
+						kfree(ses->serverDomain);
 						ses->serverDomain =
 						    kzalloc(2, GFP_KERNEL);
 						if(ses->serverNOS)
-- 
http://www.codemonkey.org.uk
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/