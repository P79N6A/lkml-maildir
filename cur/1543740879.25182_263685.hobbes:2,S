Date: Fri, 22 Oct 2004 13:33:14 -0600
From: Chris Friesen <>
Subject: Re: Gigantic memory leak in linux-2.6.[789]!
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/10/22/501

Kristian SÃ¸rensen wrote:
> Anyway - How does this work in practice? Does the file system 
> implementation use a wrapper for kfree or?
When an app faults in new memory and there is no unused memory, the system will 
page out apps and/or filesystem data from the page cache so the memory can be 
given to the app requesting it.
> Is there any way to force instant free of kernel memory - when freed?
It's not free, it's in use by the page cache.  This is a performance feature--we 
try and keep around as much stuff as possible that might be needed by running apps.
> Else it is quite hard testing for possible memory leaks in our Umbrella 
> kernel module ... :-/
Such is life.  As a crude workaround, on a swapless system you can start one or 
two memory hogs and they will force the system to free up as much memory as 
possible.
Chris
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/