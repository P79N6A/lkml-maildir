Date: Sat, 15 Jan 2005 09:21:20 +0800
From: 	hugang@soulinfo ...
Subject: Re: 2.6.10-mm3: swsusp: out of memory on resume (was: Re: Ho ho ho - Linux v2.6.10)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/1/14/291

On Sat, Jan 15, 2005 at 12:42:35AM +0100, Rafael J. Wysocki wrote:
> On Friday, 14 of January 2005 15:34, you wrote:
> > On Thu, Jan 13, 2005 at 07:09:24PM +0100, Rafael J. Wysocki wrote:
> > > Hi,
> > > 
> > > 
> > > Has this patch been ported to x86_64?  Or is there a newer version of it anywhere,
> > > or an alternative?
> > > 
> > 
> > Ok, Here is a new patch with x86_64 support, But I have not machine, So
> > Need someone test it. 
> > 
> > 2.6.11-rc1-mm1 
> >  -> 2005-1-14.core.diff 	core patch		TEST PASSED
> >   -> 2005-1-14.x86_64.diff	x86_64 patch	NOT TESTED
> 
> Unfortunately, on x86_64 it goes south on suspend, probably somwhere in write_pagedir(),
> but I'm not quite sure as I can't make it print any useful stuff to the serial console
> (everything is dumped to a virtual tty only).  Seemingly, it prints some
> "write_pagedir: ..." debug messages and then starts to print garbage in
> an infinite loop.
Try enable debug in swsusp, 
<....>
#include "power.h"
#undef pr_debug
#define pr_debug printk
<....>
 Enable serial conosole, 
 Adding console=ttyS0 in boot command line.
Then do software suspend, And send the log to me, that will useful. 
For other reference, I using qemu As X86-64 emulation, But current qemu
X86-64 not full works, the kernel hang after copy_page in suspend, I'll
enable CPU and ASM log in qemu to finger other where is the problem.
-- 
Hu Gang       .-.
              /v\
             // \\ 
Linux User  /(   )\  [204016]
GPG Key ID   ^^-^^   
http://soulinfo.com/~hugang/hugang.asc
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/