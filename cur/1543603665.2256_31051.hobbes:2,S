Date: Fri, 05 Oct 2001 14:06:52 -0400
From: Peter Rival <>
Subject: Re: [PATCH] change name of rep_nop
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/10/5/128

Alan Cox wrote:
>>Here is a patch that addresses those three issues.  It adds an empty
>>definition of cpu_relax for all architectures except x86 (for x86 it
>>is defined to be rep_nop), and it changes smp_init to use a barrier
>>instead of making wait_init_idle be volatile.
>>
>>
> 
> Looks good to me
You also need to move the call to smp_boot_cpus() below the 
clear_bit(...) line in smp_init().  Without it, my Wildfire doesn't get 
past the while(wait_init_idle) loop - seems all of the CPUs have already 
done their work before the mask is set.  Besides, it's the right place 
for it anyway.  I'd generate a patch, but my system is bogged down in a 
benchmark for the next couple of hours.  If someone says so, I'll 
generate the patch after that...
  - Pete
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/