Date: Thu, 2 Mar 2000 10:57:59 +0800
From: Andrey Savochkin <>
Subject: Re: PROBLEM: Network interface fails after RX packet count cycles back to zero
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/3/1/238

Hello,
The information provided is quite strange.
I've seen the counters happily overrun on my systems.
I'll try to make counters reach 2^31-2^32 again and see what happens.
Best regards
					Andrey V.
					Savochkin
On Mon, Feb 28, 2000 at 09:56:14PM -0500, Simon Kirby wrote:
> On Mon, Feb 28, 2000 at 01:28:05PM -0500, Jon Rifkin wrote:
> 
> > > > number of RX packets as steadily increasing.  Once this number
> > > > reaches 2147483647 (2^31-1) after about 6 days it stops
> > > > increasing and remains constant.  After another 6 days, presumably 
> > > > when 2^32 packets have passed by, the interface stops reading packets.  
> > > > The only solution I've found it to reboot the system.
> > 
> > > The most important information is missing. What is the ethernet board
> > > driver you are using?
> > 
> > 
> > The board is an Intel Etherexpress Pro 10/100, the driver is eepro100.c, 
> > CONFIG_EEXPRESS_PRO100=y was defined in /usr/src/linux/.config
> > when the kernel was compiled.
> > 
> > Here's what the kernel reports on startup..
> > 
> > eth1: OEM i82557/i82558 10/100 Ethernet at 0xe8e0, 00:90:27:3A:70:30, IRQ 14.
> >   Board assembly 697680-002, Physical connectors present: RJ45
> >   Primary interface chip i82555 PHY #1.
> >   General self-test: passed.
> >   Serial sub-system self-test: passed.
> >   Internal registers self-test: passed.
> >   ROM checksum self-test: passed (0x24c9f043).
> >   Receiver lock-up workaround activated.
> > 
> > 
> > Anything else?
> > 
> > Thanks again for your time.
> 
> We had this exact same problem in 2.2.14.  Actually, it happened on eth1
> with a machine with four eepro100 cards.  I was able to login through
> eth0 and remove/reinsert the eepro100 modules to fix it.
> 
> I _think_ the patch that went into 2.2.15preX may fix it (I've seen the
> counters stopping at 2^31-1 but things still working with this patch),
> but now that you mention that it seems to take another 2^31 packets
> before it actually dies, perhaps it's not fixed (the machine has been
> rebooted since).  I've seen both eth0 and eth1 at 2^31-1 before the
> reboot.
> 
> I suppose I could leave "ping -f" running for a while and see what
> happens... :)
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/