Date: Mon, 14 Jun 1999 08:37:29 -0700 (PDT)
From: Linus Torvalds <>
Subject: Re: pre-2.3.7-1 fails compile
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/6/14/88

On Mon, 14 Jun 1999, Andrea Arcangeli wrote:
> 
> If I understood well the code there are other problems that may cause FS
> corruption. For example we must not allow a buffer shared with the page
> cache to be placed in the free list.
That is correct, but I think the correct way to do that is not to add a
BH_Shared flag, but instead make sure that it never happens.
(BH_Shared might be part of a debugging aid, but should not change how the
code works).
For example, for both of the routines you mention (set_blocksize() and
invalidate_buffers()) it would be a bug to call them on a shared buffer in
the first place - trying to fix it up after the fact only hides the real
bug. 
Anyway, the real problem to some degree is that we just got this working.
I finally have patches that =really= fix the writable mapping case, and
only now do we have a system that appears really stable.
We'll end up fixing up small things, both performance- and correctness-
wise for the next two months, I'm sure. This is going to be one of the
"big changes" between 2.2 and 2.4, so don't expect it to be completely
painless. You haven't seen the rather broken versions that Ingo has been
fighting for the last few weeks - you're only seeing the end result ;)
		Linus
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/