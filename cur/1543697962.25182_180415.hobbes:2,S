Date: Fri, 28 Nov 2003 02:41:20 +0100
From: Tonnerre Anklin <>
Subject: [I4L] isdn_ppp_ccp.c uses uninitialized spinlock
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/11/27/154

Salut,
This spinlock was used uninitialized. Gave me a lot of warnings.
More on this patch can be found at
<URL:
http://keepsake.keepsake.ch/~thunder/noyau/2.6.0-test11-ta1/isdn_ccp_uninitialized_spinlock.xml>
				Thunder
diff -Nur linux-2.6.0-test9-mm3/drivers/isdn/i4l/isdn_ppp_ccp.c linux-2.6.0-test9-mm3-ta1/drivers/isdn/i4l/isdn_ppp_ccp.c
--- linux-2.6.0-test9-mm3/drivers/isdn/i4l/isdn_ppp_ccp.c	2003-10-08 21:24:04.000000000 +0200
+++ linux-2.6.0-test9-mm3-ta1/drivers/isdn/i4l/isdn_ppp_ccp.c	2003-11-24 13:41:47.000000000 +0100
@@ -557,7 +557,7 @@
 }
 
 static LIST_HEAD(ipc_head);
-static spinlock_t ipc_head_lock;
+static spinlock_t ipc_head_lock = SPIN_LOCK_UNLOCKED;
 
 int
 ippp_ccp_set_compressor(struct ippp_ccp *ccp, int unit,[unhandled content-type:application/pgp-signature]