Date: Mon, 21 May 2007 09:35:47 -0700
From: "H. Peter Anvin" <>
Subject: Re: 2.6.22-rc1-mm1
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/5/21/298

young dave wrote:
> Hi,
> 
> kernel booting and stopped in edd.c:read_sector.
> 
> I add debug messages around the two inline assemblly sentence, recompile
> kernel,
> now strange thing happend, the kernel booting directly, but the printf
> messages can't be seen because it's too rapid.
> 
> can we use printk in boot code?
Well, it's spelt "printf", but same thing.  (Since it doesn't take a
logging priority, it seems better to name it printf.)
This implies a miscompile somewhere, *or* that your bios stomps on
registers that gcc expect preserved, and adding printf's disturbs the
register allocation sufficiently.
Could you send me the arch/i386/boot/setup.elf file from the original,
failed, build?
Thanks.
	-hpa
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/