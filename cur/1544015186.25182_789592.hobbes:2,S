Date: Fri, 9 Jan 2009 18:30:58 -0500 (EST)
From: Parag Warudkar <>
Subject: [PATCH] Fix net/irda build breakage
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2009/1/9/450

commit af0490810cfa159b4894ddecfc5eb2e4432fb976 breaks build for net/irda -
drivers/net/irda/donauboe.c: In function 'toshoboe_interrupt':
drivers/net/irda/donauboe.c:1197: error: 'struct toshoboe_cb' has no member named 'stats'
drivers/net/irda/donauboe.c:1201: error: 'struct toshoboe_cb' has no member named 'stats'
drivers/net/irda/donauboe.c:1283: error: 'struct toshoboe_cb' has no member named 'stats'
make[3]: *** [drivers/net/irda/donauboe.o] Error 1
make[2]: *** [drivers/net/irda] Error 2
Fix this.
Signed-off-by: Parag Warudkar <parag.lkml@gmail.com>
diff --git a/drivers/net/irda/donauboe.c b/drivers/net/irda/donauboe.c
index 687c2d5..5acb8b2 100644
--- a/drivers/net/irda/donauboe.c
+++ b/drivers/net/irda/donauboe.c
@@ -1194,13 +1194,13 @@ toshoboe_interrupt (int irq, void *dev_id)
                txp = txpc;
                txpc++;
                txpc %= TX_SLOTS;
-              self->stats.tx_packets++;
+		self->netdev->stats.tx_packets++;
                if (self->ring->tx[txpc].control & OBOE_CTL_TX_HW_OWNS)
                    self->ring->tx[txp].control &= ~OBOE_CTL_TX_RTCENTX;
              }
-          self->stats.tx_packets--;
+		self->netdev->stats.tx_packets--;
  #else
-          self->stats.tx_packets++;
+		self->netdev->stats.tx_packets++;
  #endif
            toshoboe_start_DMA(self, OBOE_CONFIG0H_ENTX);
          }
@@ -1280,7 +1280,7 @@ dumpbufs(self->rx_bufs[self->rxs],len,'<');
                        skb_put (skb, len);
                        skb_copy_to_linear_data(skb, self->rx_bufs[self->rxs],
  					      len);
-                      self->stats.rx_packets++;
+			self->netdev->stats.rx_packets++;
                        skb->dev = self->netdev;
                        skb_reset_mac_header(skb);
                        skb->protocol = htons (ETH_P_IRDA);