Date: Wed, 5 Mar 2008 00:13:39 +0100
From: Bartlomiej Zolnierkiewicz <>
Subject: Re: -rc3 regression (was Re: 2.6.25-rc2 + smartd = hang )
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/3/4/490

On Tuesday 04 March 2008, Bartlomiej Zolnierkiewicz wrote:
> I must admit that after auditing the patch & code for n-th time I still fail
> to see the source of the problem (especialy now that the theory about exposing
> races in the tuning code has also failed) as the _only_ changes introduced by
> the guilty commit are that we are using different rq->cmd_type and testing for
> rq->special instead of rq->buffer but both should be NULL. [ as it can be seen
> be looking at ide_cmd_ioctl(), execute_drive_cmd() and ide_end_drive_cmd() ]
> 
> If anybody has some ideas on what could be wrong please help, in the meantime
> I'm going to take a look at smartd code...
This is getting more interesting as smartd doesn't seem to be using "empty"
HDIO_DRIVE_CMD requests at all!
[ IOW the guilty commit should have zero influence on smartd. ]
Anders, could you send me ide-taskfile.s (make drivers/ide/ide-taskfile.s)
from before and after the commit?  Maybe it is simply a compiler bug...
Thanks.
Bart