Date: Mon, 11 Nov 2002 01:43:28 -0800 (PST)
From: "David S. Miller" <>
Subject: Re: [PATCH] NCR53C9x ESP: C99 designated initializers
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/11/11/31

   From: Geert Uytterhoeven <geert@linux-m68k.org>
   Date: Mon, 11 Nov 2002 10:31:23 +0100 (MET)
[ Doug, you should just care about my eh_reset callback comments ]
   On 10 Nov 2002, Alan Cox wrote:
   > Reset is called with the lock held surely. How can the wait_event be
   > right ? 
   
   I don't know. I just ported the Sun/SPARC ESP SCSI driver changes in 2.5.45 to
   the NCR53C9x ESP SCSI drivers. If you're right, the same bug is present in
   esp.c.
   
   Dave?
   
That's a little inconvenient.
I have to wait for an interrupt from the chip to know the RESET
started by the eh_reset_bus_handler code is done, and I'm certainly
not going to spin there for 5 seconds or however long it decides to
take. :-)
Either eh_reset_bus_handler needs to be allowed to sleep, or it needs
to be changed so that an "RESET in progress, please wait" status can
be returned.
Doug?
   BTW, what about merging esp.c and NCR53C9x.c?
   
I don't have the time to abstract away all of the various DMA portion
of the ESP chip handling to allow that.  There are 12 different
combinations of ESP + DMA controller combinations on Sparc, so if you
do the changes you'll need to test that :-)
Franks a lot,
David S. Miller
davem@redhat.com
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/