Date: Fri, 21 May 1999 13:54:15 +0000
From: Matthew Vanecek <>
Subject: Re: Printer and Zip drive don't work together.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/5/21/150

Tim Waugh wrote:
> 
> On Thu, 20 May 1999, Matthew Vanecek wrote:
> 
> > :: 4. With the Zip drive still in, load the ppa module.  Find out if printing
> > :: works.  If it did before, and doesn't now, it's a parport/ppa interaction.
> >
> > Loaded the ppa module.  Now have ppa, lp, parport, and parport_pc
> > loaded.  Tried to print a couple of test pages.  Nothing doing. Stopped
> > cold.
> 
> Okay.  Now can you show me the kernel messages (dmesg) that ppa spits out
> when it loads?  I need to know the mode it's using to talk to the Zip
> drive.
They are attached below.
> 
> Also:
> 
> - what mode is your parallel port set to in the BIOS?
For this trial, I set it to EPP.  Saw a message in linux-parport about
that and decided to try.  For the last one it was ECP+EPP.  As far as I
can tell, there isn't any difference in what's happening.
> - what kernel messages does parport_pc give when it loads?
> 
None.  See below.
-- 
Matthew Vanecek
Course of Study: 
http://www.unt.edu/bcis
Visit my Website at 
http://people.unt.edu/~mev0003
For answers type: perl -e 'print
$i=pack(c5,(41*2),sqrt(7056),(unpack(c,H)-2),oct(115),10);'
*****************************************************************
For 93 million miles, there is nothing between the sun and my shadow
except me. I'm always getting in the way of something...root:reliant /root$ insmod parport
root:reliant /root$ insmod parport_pc
root:reliant /root$ insmod lp
root:reliant /root$
root:reliant /root$ lsmod
Module                  Size  Used by
lp                      5116   0  (unused)
parport_pc              5588   1
parport                 6916   1  [lp parport_pc]
lm_sensors             34700   0  (unused)
vfat                   11196   0  (autoclean) (unused)
fat                    25120   0  (autoclean) [vfat]
root:reliant /root$ insmod ppa
ppa: Version 2.03 (for Linux 2.2.x)
ppa: Found device at ID 6, Attempting to use EPP 32 bit
ppa: Communication established with ID 6 using EPP 32 bit
scsi2 : Iomega VPI0 (ppa) interface
scsi : 3 hosts.
  Vendor: IOMEGA    Model: ZIP 100           Rev: D.08
  Type:   Direct-Access                      ANSI SCSI revision: 02
Detected scsi removable disk sdb at scsi2, channel 0, id 6, lun 0
SCSI device sdb: hdwr sector= 512 bytes. Sectors= 196608 [96 MB] [0.1 GB]
sdb: Write Protect is off
 sdb: sdb4
Linux version 2.2.9 (root@reliant.voyager.home) (gcc version egcs-2.91.66 19990314/Linux (egcs-1.1.2 release)) #5 Thu May 20 15:55:54 CDT 1999
Detected 350808691 Hz processor.
Console: colour VGA+ 80x25
buffer hashtable: buckets = 8192, size = 32768 bytes
Calibrating delay loop... 699.60 BogoMIPS
Memory: 62700k/65472k available (1188k kernel code, 408k reserved, 1088k data, 88k init)
VFS: Diskquotas version dquot_6.4.0 initialized
Enabling new style K6 write allocation for 63 Mb
CPU: AMD AMD-K6(tm) 3D processor stepping 0c
Checking 386/387 coupling... OK, FPU using exception 16 error reporting.
Checking 'hlt' instruction... OK.
POSIX conformance testing by UNIFIX
mtrr: v1.34 (19990310) Richard Gooch (rgooch@atnf.csiro.au)
PCI: PCI BIOS revision 2.10 entry at 0xf0560
PCI: Using configuration type 1
PCI: Probing PCI hardware
Linux NET4.0 for Linux 2.2
Based upon Swansea University Computer Society NET3.039
NET4: Unix domain sockets 1.0 for Linux NET4.0.
NET4: Linux TCP/IP 1.0 for NET4.0
IP Protocols: ICMP, UDP, TCP, IGMP
Initializing RT netlink socket
Starting kswapd v 1.5 
Detected PS/2 Mouse Port.
Serial driver version 4.27 with no serial options enabled
ttyS00 at 0x03f8 (irq = 4) is a 16550A
ttyS01 at 0x02f8 (irq = 3) is a 16550A
pty: 256 Unix98 ptys configured
apm: BIOS version 1.2 Flags 0x03 (Driver version 1.9)
Real Time Clock Driver v1.09
es1371: version v0.11 time 15:57:23 May 20 1999
es1371: found adapter at io 0xb400 irq 10
es1371: features: joystick 0x200
es1371: codec vendor TRA revision 3
es1371: codec features none
es1371: stereo enhancement: no 3D stereo enhancement
js: Version 1.2.13 using 350 MHz RDTSC timer.
js0: Analog 2-axis 4-button joystick at 0x201
RAM disk driver initialized:  16 RAM disks of 4096K size
Floppy drive(s): fd0 is 1.44M
FDC 0 is a post-1991 82077
scsi: ***** BusLogic SCSI Driver Version 2.1.15 of 17 August 1998 *****
scsi: Copyright 1995-1998 by Leonard N. Zubkoff <lnz@dandelion.com>
scsi0: Configuring BusLogic Model BT-932 PCI Ultra SCSI Host Adapter
scsi0:   Firmware Version: 5.02, I/O Address: 0xA800, IRQ Channel: 11/Level
scsi0:   PCI Bus: 2, Device: 4, Address: 0xDE000000, Host Adapter SCSI ID: 7
scsi0:   Parity Checking: Enabled, Extended Translation: Enabled
scsi0:   Synchronous Negotiation: UFFFFFU#, Wide Negotiation: Disabled
scsi0:   Disconnect/Reconnect: NYYYYYY#, Tagged Queuing: NYYYYYY#
scsi0:   Driver Queue Depth: 255, Scatter/Gather Limit: 128 segments
scsi0:   Tagged Queue Depth: Automatic, Untagged Queue Depth: 3
scsi0:   Error Recovery Strategy: Default, SCSI Bus Reset: Enabled
scsi0:   SCSI Bus Termination: Enabled, SCAM: Enabled, Level 1
scsi0: *** BusLogic BT-932 Initialized Successfully ***
scsi1: Configuring BusLogic Model BT-932 PCI Ultra SCSI Host Adapter
scsi1:   Firmware Version: 5.02, I/O Address: 0xA400, IRQ Channel: 11/Level
scsi1:   PCI Bus: 2, Device: 8, Address: 0xDD800000, Host Adapter SCSI ID: 7
scsi1:   Parity Checking: Enabled, Extended Translation: Enabled
scsi1:   Synchronous Negotiation: FFFFFNF#, Wide Negotiation: Disabled
scsi1:   Disconnect/Reconnect: YYYYYNY#, Tagged Queuing: YYYYYNY#
scsi1:   Driver Queue Depth: 255, Scatter/Gather Limit: 128 segments
scsi1:   Tagged Queue Depth: Automatic, Untagged Queue Depth: 3
scsi1:   Error Recovery Strategy: Default, SCSI Bus Reset: Enabled
scsi1:   SCSI Bus Termination: Enabled, SCAM: Enabled, Level 2
scsi1: *** BusLogic BT-932 Initialized Successfully ***
scsi0 : BusLogic BT-932
scsi1 : BusLogic BT-932
scsi : 2 hosts.
  Vendor: SEAGATE   Model: ST34520N          Rev: 1444
  Type:   Direct-Access                      ANSI SCSI revision: 02
Detected scsi disk sda at scsi0, channel 0, id 0, lun 0
  Vendor: MATSHITA  Model: CD-ROM CR-508     Rev: XS03
  Type:   CD-ROM                             ANSI SCSI revision: 02
Detected scsi CD-ROM sr0 at scsi0, channel 0, id 1, lun 0
  Vendor: JVC       Model: XR-W2010          Rev: 1.51
  Type:   WORM                               ANSI SCSI revision: 02
Detected scsi CD-ROM sr1 at scsi1, channel 0, id 5, lun 0
scsi0: Target 0: Queue Depth 3, Synchronous at 20.0 MB/sec, offset 15
scsi0: Target 1: Queue Depth 3, Synchronous at 10.0 MB/sec, offset 15
scsi1: Target 5: Queue Depth 3, Asynchronous
scsi : detected 2 SCSI cdroms 1 SCSI disk total.
sr0: scsi3-mmc drive: 0x/0x caddy
Uniform CDROM driver Revision: 2.55
sr1: scsi3-mmc drive: 0x/0x caddy
SCSI device sda: hdwr sector= 512 bytes. Sectors= 8888924 [4340 MB] [4.3 GB]
PPP: version 2.3.7 (demand dialling)
TCP compression code copyright 1989 Regents of the University of California
PPP line discipline registered.
tulip.c:v0.89H 5/23/98 becker@cesdis.gsfc.nasa.gov
eth0: Lite-On 82c168 PNIC at 0xb800, 00 a0 cc 3b 58 81, IRQ 5.
eth0:  MII transceiver found at MDIO address 1, config 1000 status 782d.
eth0:  Advertising 01e1 on PHY 1, previously advertising 01e1.
Partition check:
 sda: sda1 sda2 sda3 sda4 < sda5 sda6 >
VFS: Mounted root (ext2 filesystem) readonly.
Freeing unused kernel memory: 88k freed
Adding Swap: 104384k swap-space (priority -1)
Adding Swap: 120452k swap-space (priority -2)
nfsd_init: initialized fhcache, entries=256
eth0: Changing PNIC configuration to half-duplex, CSR6 816e0000.
lm_sensors version 1.4.12 (19981230)
SMBus: Error: Can't detect PIIX4!
SMBus setup failed.
SMBus setup failed.
SMBus Initialization failed.
W83781D detected and installed (accessed through the ISA bus, I/O address 0x0290)
Winbond temperature sensors (2) accessed through the ISA bus