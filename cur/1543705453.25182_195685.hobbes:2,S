Date: Tue, 3 Feb 2004 14:08:31 +1030
From: Ryan Verner <>
Subject: Promise PDC20269 (Ultra133 TX2) + Software RAID
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/2/2/248

Howdy,
I did an upgrade on a system the other day; we went from 2 * 8G drives 
in software RAID1, running off the motherboard's IDE chipset, to 2 * 
80G drives in software RAID1, running off a Promise Ultra133 TX2 card.
I upgraded the kernel at the same time to 2.4.24 w/ grsec patches.  The 
drives are detected fine:
PDC20269: IDE controller at PCI slot 00:0d.0
PCI: Found IRQ 10 for device 00:0d.0
PDC20269: chipset revision 2
PDC20269: not 100% native mode: will probe irqs later
PDC20269: ROM enabled at 0xe5000000
     ide2: BM-DMA at 0xe400-0xe407, BIOS settings: hde:pio, hdf:pio
     ide3: BM-DMA at 0xe408-0xe40f, BIOS settings: hdg:pio, hdh:pio
hde: WDC WD800JB-00ETA0, ATA DISK drive
blk: queue c01a2db8, I/O limit 4095Mb (mask 0xffffffff)
hdg: WDC WD800JB-00ETA0, ATA DISK drive
blk: queue c01a3224, I/O limit 4095Mb (mask 0xffffffff)
ide2 at 0xd400-0xd407,0xd802 on irq 10
ide3 at 0xdc00-0xdc07,0xe002 on irq 10
hde: attached ide-disk driver.
hde: host protected area => 1
hde: 156301488 sectors (80026 MB) w/8192KiB Cache, CHS=9729/255/63, 
UDMA(100)
hdg: attached ide-disk driver.
hdg: host protected area => 1
hdg: 156301488 sectors (80026 MB) w/8192KiB Cache, CHS=9729/255/63, 
UDMA(100)
However, we get these sorts of errors often:
hdg: dma_timer_expiry: dma status == 0x22
hdg: error waiting for DMA
hdg: dma timeout retry: status=0x58 { DriveReady SeekComplete 
DataRequest }
hdg: status timeout: status=0xd0 { Busy }
PDC202XX: Secondary channel reset.
hdg: drive not ready for command
ide3: reset: success
And the machine is randomly locking up, and of course, on reboot, the 
raid array is rebuilt.  Ouch.  Any clues as to why?  I'm sure the hard 
drive hasn't failed as it's brand new; I suspect a chipset 
compatibility problem or something.
R
--
Signature space for rent.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/