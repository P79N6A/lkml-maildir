Date: Mon, 18 Feb 2002 09:57:38 +0100
From: Francois Romieu <>
Subject: Re: [PATCH] HDLC patch for 2.5.5 (1/3)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/2/18/40

Jeff Garzik <jgarzik@mandrakesoft.com> :
> Francois Romieu wrote:
> > 
> > [1/3]:
> > - struct if_settings in struct ifreq becomes struct if_settings *
> 
> mostly ok... I'm wondering how this specific item (shown below in the
> patch portion quoted) affects binary compatibility...  how does this
> affect userland if ifru_settings is suddenly a pointer?
2.4.18-preX:include/linux/if.h
[...]
        union {
                struct  sockaddr ifru_addr;
                struct  sockaddr ifru_dstaddr;
                struct  sockaddr ifru_broadaddr;
                struct  sockaddr ifru_netmask;
                struct  sockaddr ifru_hwaddr;
                short   ifru_flags;
                int     ifru_ivalue;
                int     ifru_mtu;
                struct  ifmap ifru_map;
                char    ifru_slave[IFNAMSIZ];   /* Just fits the size */
                char    ifru_newname[IFNAMSIZ];
                char *  ifru_data; <-- Nothing after this field.
        } ifr_ifru;
};
The member ifru_settings is added to the union by Krzysztof's patch.
Existing userland (Krzysztof's new utility aside) shouldn't matter as
- it ignores this member;
- the member doesn't make the union bigger (Krzysztof noticed my previous
  patch choked on this).
If nobody does it before, the utility will be modified when I feel like it's
time to test the code. Shouldn't be long (TM).
-- 
Ueimor
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/