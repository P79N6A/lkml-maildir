Date: Sat, 3 May 2003 20:39:08 +0200
From: Francois Romieu <>
Subject: Re: DECNET in latest BK
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/5/3/82

David S. Miller <davem@redhat.com> :
[...]
> Turn off CONFIG_DECNET_ROUTE_FWMARK, aparently even the maintainer
> doesn't even enable this option :-)
Does the attached patch make sense ?
 net/decnet/dn_route.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)
diff -puN net/decnet/dn_route.c~decnet-compile-fix net/decnet/dn_route.c
--- linux-2.5.68-1.1118.1.6-to-1.1192/net/decnet/dn_route.c~decnet-compile-fix	Fri May  2 23:19:48 2003
+++ linux-2.5.68-1.1118.1.6-to-1.1192-fr/net/decnet/dn_route.c	Fri May  2 23:19:48 2003
@@ -1055,7 +1055,7 @@ make_route:
 	rt->fl.oif        = oldflp->oif;
 	rt->fl.iif        = 0;
 #ifdef CONFIG_DECNET_ROUTE_FWMARK
-	rt->fl.fld_fwmark = flp->fld_fwmark;
+	rt->fl.fld_fwmark = oldflp->fld_fwmark;
 #endif
 
 	rt->rt_saddr      = fl.fld_src;
@@ -1180,7 +1180,7 @@ static int dn_route_input_slow(struct sk
 				       .saddr = cb->src,
 				       .scope = RT_SCOPE_UNIVERSE,
 #ifdef CONFIG_DECNET_ROUTE_FWMARK
-				       .fwmark = skb->fwmark
+				       .fwmark = skb->nfmark
 #endif
 				    } },
 			    .iif = skb->dev->ifindex };
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/