Date: Fri, 23 Jul 2004 16:46:35 -0400
From: 	Valdis.Kletnieks@vt ...
Subject: Re: Ext3 problems in dual booting machine with SE Linux
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/7/23/127

On Fri, 23 Jul 2004 08:37:15 PDT, Steve G <linux_4ever@yahoo.com>  said:
> At this point, 'umount /dev/sda3' is impossible. Its reported as busy. The on
ly
> [root@buildhost root]# cat /proc/mounts
> /dev/root / ext3 rw 0 0
> /dev/sda3 /mnt/target ext3 rw 0 0
> [root@buildhost root]# rm -rf /mnt/target/tmp/
> [root@buildhost root]# rm -rf /mnt/target/usr/
> Segmentation fault
> [root@buildhost root]#
> Message from syslogd@buildhost at Fri Jul 23 10:50:53 2004 ...
> buildhost kernel: Assertion failure in journal_revoke_Rsmp_9762279c() at
> revoke.c:329: "!(__builtin_constant_p(BH_Revoked) ?
> constant_test_bit((BH_Revoked),(&bh->b_state)) :
> variable_test_bit((BH_Revoked),(&bh->b_state)))"
> 
> At this point the system is non-functional since it oops'ed. Here's the Oops
Fix your boot to not use /dev/root, but an actual partition number.
What's happening is that /dev/sda3 is *both* your /mnt/target *and* your
root filesystem.  So when you start rm -rf'ing, you trash your root filesystem and
things go pear-shaped.
[unhandled content-type:application/pgp-signature]