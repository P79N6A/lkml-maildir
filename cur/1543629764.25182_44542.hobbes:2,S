Date: Tue, 7 May 2002 14:00:42 -0400 (EDT)
From: Bill Davidsen <>
Subject: Re: P4 Xeon summary inquiry
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/5/7/162

On Tue, 7 May 2002, Jesse Wyant wrote:
> However, 'dnetc's throughput in RC5 keys/s is much lower with HT enabled: 
> it runs 4 clients, and each client chugs through about 720kKeys/s.  
> With HT disabled, the two dnetc clients run through 2.8MKeys/s each.  (So
> it's around half as fast with HT enabled!)  When I'm finished downloading
> RedHat 7.3, I'll reboot into Hyperthreading-enabled mode, and run 
> 'dnetc --benchmark' to confirm this.
  I believe that what you are seeing is caused by the two threads in each
CPU contending for cache, at least at L1 level, perhaps also L2. Other
than a careful study of the code or a hardware probe, I don't know if you
could even roughly qualtify that, but I'm moderately sure you're beating
the cache to death.
  If you had a Xeon with larger L2 it might be interesting to see if HT
ran at the same speed as the single thread CPU with half the cache. And if
you want to play more, you could use the BIOS to disable the L1 or L2
cache and see how much the performance changes. Doesn't matter, unless you
have another algorithm it doesn't address the behaviour.
-- 
bill davidsen <davidsen@tmr.com>
  CTO, TMR Associates, Inc
Doing interesting things with little computers since 1979.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/