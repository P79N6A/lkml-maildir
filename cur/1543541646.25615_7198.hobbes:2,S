Date: Mon, 14 Aug 2000 08:40:26 +1000
From: David Luyer <>
Subject: Re: NTFS-like streams?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/8/13/154

Linus Torvalds wrote:
> On Sun, 13 Aug 2000, Alan Cox wrote:
> > If it has the same inode number lots of other stuff breaks so I fear it doesnt
> 
> Ehh.. The "lots of stuff breaks" is, I assume, basically again just "tar".
> Nothing else really ever tends to care about inode numbers.
In a few moments' thought: tar, pax, cpio, suidperl both locally and via NFS 
under other OS's we can't hope to control.
tar and friends - basically any Unix archiver; tar, pax, cpio, others.  Whether
running locally or remotely over NFS.  Which is a bit much to fix if you want
to maintain traditional semantics - you can't fix the remote copies of cpio,
tar, etc to be aware of your local changes in the semantics of filesystems.
I wonder how this works with union mounts under *BSD should the inode
number match in some file in the upper filesystem and some file somewhere else
in the lower filesystem, not necessarily both in the relevant caches at
the same time to even know the same inode number is used on both - silent
breakage?  Anyone on the list know?  Or are some of the more significant bits 
in the inode number used to represent which filesystem?
NFS filehandles traditionally are keyed on inode numbers, hence the need under 
SunOS et al to separately export mountpoints under exported domains - although
I seem to recall this changed in Linux.
Also anything else which wants to detect what files are linked together by
looking at what files share inode numbers on the same filesystem would 
obviously break.
Potential security implications for suidperl and friends.  Trick them by 
making a symlink into a separate 'stream' (or whatever the correct name is)
of a file and then swap the symlink underneath as per traditional race 
conditions, but breaking things because the check that the inode number hasn't 
changed still succeeds.  That's just the first thought of security issues,
there's bound to be more.
David.
-- 
----------------------------------------------
David Luyer
Senior Network Engineer
Pacific Internet (Aust) Pty Ltd
Phone:  +61 3 9674 7525
Fax:    +61 3 9699 8693
Mobile: +61 4 1064 2258, +61 4 1114 2258
http://www.pacific.net.au
        NASDAQ: PCNTF
<< fast 'n easy >>
----------------------------------------------
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/