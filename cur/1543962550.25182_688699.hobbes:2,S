Date: Sat, 03 May 2008 09:19:43 +1000
From: Benjamin Herrenschmidt <>
Subject: Re: [POWERPC][v2] Bolt in SLB entry for kernel stack on secondary cpus
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/5/2/509

On Fri, 2008-05-02 at 19:03 +1000, Paul Mackerras wrote:
> David Gibson writes:
> 
> > Do you even need the processor ID test at all?  The boot processor
> > should always have its stack covered by SLB entry 0 when we come
> > through here, shouldn't it?
> 
> I was concerned that get_paca()->kstack wouldn't have been initialized
> by the time the boot cpu calls slb_initialize().  If that fear is
> unfounded then the check could go.
No, you are correct, it's not initialized. However, I find that a bit
weird, as we shouldn't have a problem initializing it in
start_here_multiplatform rather than start_here_common.
The whole stack setup part of these here seems like a dup to me.
Ben.