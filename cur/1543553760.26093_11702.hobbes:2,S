Date: Mon, 06 Nov 2000 15:19:41 -0800
From: David Ford <>
Subject: Re: current snapshots of pcmcia
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/11/6/222

(cc: lkml)
David Hinds wrote:
> On Mon, Nov 06, 2000 at 01:10:24AM -0800, David Ford wrote:
> > :(
> >
> > Ok.  Here's the story.  2.3/2.4 kernel pcmcia gave up the ghost on my
> > socket controller several versions back.  It is unable to assign an irq.
>
> PCMCIA in 2.4 (whether you build the modules in the kernel, or build
> the modules in the standalone package) is completely dependent on the
> kernel PCI layer to assign PCI interrupts (I assume that's what you
> mean by "an irq"?  without system log messages I can't be sure).
> There has been no change in this in recent months; there may have been
> changes in the PCI layer that broke your setup.
>
> > What changed in the last ~two weeks?  I notice that the current snapshot
> > also loads pci fixup.
>
> I don't understand the second sentence.  Please explain.
Undoubtedly :(  But it used to work when I used your i82365 module instead of
the kernel's yenta module.  The i82365 module now gives the same failure
output as the yenta module.
I modprobed the following to get things up and running, (all your pkg)
pcmcia_core, i82365, and ds.  Then ran cardmgr.  All was well.  Now when I
load i82365, it yields the pci irq failure and the irq type is changed.
2nd sentc: What changed in the last two-three weeks?  I notice that the
current pcmcia (yours) code loads a new module called pci_fixup.
The dmesg output from loading i82365 is:
Intel PCIC probe: <4>PCI: No IRQ known for interrupt pin A of device 00:03.0.
PCI: No IRQ known for interrupt pin B of device 00:03.1.
  Ricoh RL5C478 rev 03 PCI-to-CardBus at slot 00:03, mem 0x10000000
    host opts [0]: [isa irq] [io 3/6/1] [mem 3/6/1] [no pci irq] [lat
168/176] [bus 2/5]
    host opts [1]: [serial irq] [io 3/6/1] [mem 3/6/1] [no pci irq] [lat
168/176] [bus 6/9]
    ISA irqs (default) = 3,4,7,11 polling interval = 1000 ms
Previous output was:
  Ricoh RL5C478 rev 03 PCI-to-CardBus at slot 00:03, mem 0x10000000
    host opts [0]: [serial irq] [io 3/6/1] [mem 3/6/1] [no pci irq] [lat
168/176] [bus 2/5]
    host opts [1]: [serial irq] [io 3/6/1] [mem 3/6/1] [no pci irq] [lat
168/176] [bus 6/9]
    ISA irqs (default) = 3,4,7,11 polling interval = 1000 ms
Notice the change from serial irq to isa irq.
-d
--
"The difference between 'involvement' and 'commitment' is like an
eggs-and-ham breakfast: the chicken was 'involved' - the pig was
'committed'."
begin:vcard 
n:Ford;David
x-mozilla-html:TRUE
adr:;;;;;;
version:2.1
email;internet:david@kalifornia.com
title:Blue Labs Developer
x-mozilla-cpt:;14688
fn:David Ford
end:vcard