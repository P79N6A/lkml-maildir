Date: Fri, 05 Oct 2007 01:15:05 +0200
From: Miklos Szeredi <>
Subject: Re: [patch 12/12] fuse: add blksize field to fuse_attr
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/10/4/425

> > From: Miklos Szeredi <mszeredi@suse.cz>
> > 
> > Allow the userspace filesystem to supply a blksize value to be
> > returned by stat() and friends.  If the field is zero, it defaults to
> > the old PAGE_CACHE_SIZE value.
> > 
> 
> Why does fuse need this feature?
There are cases, when the filesystem will be passed the buffer from a
single read or write call, namely:
 1) in 'direct-io' mode (not O_DIRECT), read/write requests don't go
    through the page cache, but go directly to the userspace fs
 2) currently buffered writes are done with single page requests, but
    if Nick's ->perform_write() patch goes it, it will be possible to
    do larger write requests.  But only if the original write() was
    also bigger than a page.
In these cases the filesystem might want to give a hint to the app
about the optimal I/O size.
Miklos
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/