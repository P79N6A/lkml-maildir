Date: Fri, 3 Sep 2004 22:13:11 +0100
From: Dave Jones <>
Subject: Pointer dereference before NULL check in ACPI thermal driver.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/9/3/355

Again, found with coverity's checker.
Signed-off-by: Dave Jones <davej@redhat.com>
--- linux-2.6.8/drivers/acpi/thermal.c~	2004-09-03 22:11:22.630428496 +0100
+++ linux-2.6.8/drivers/acpi/thermal.c	2004-09-03 22:11:44.392120216 +0100
@@ -659,7 +659,7 @@
 	struct acpi_thermal	*tz = (struct acpi_thermal *) data;
 	unsigned long		sleep_time = 0;
 	int			i = 0;
-	struct acpi_thermal_state state = tz->state;
+	struct acpi_thermal_state state;
 
 	ACPI_FUNCTION_TRACE("acpi_thermal_check");
 
@@ -668,6 +668,8 @@
 		return_VOID;
 	}
 
+	state = tz->state;
+
 	result = acpi_thermal_get_temperature(tz);
 	if (result)
 		return_VOID;
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/