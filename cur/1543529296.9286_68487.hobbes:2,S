Date: Wed, 08 Mar 2000 00:55:05 +0100
From: Jorge Nerin <>
Subject: ping -s 61992 vs  ping -s 61993 in 2.3.48
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/3/10/81

Problem: ping with a size greater than 61992 (+8 from pÃ¬ng) doesn't
reply from 2.3.48.
One machine:
name head : Linux head.redvip.net 2.2.11 #1 Tue Dec 14 05:55:15 CET 1999
i486 unknown
eth0: 3c509
The other:
name quartz : Linux quartz.redvip.net 2.3.48 #9 SMP lun feb 28 01:00:27
CET 2000 i586 unknown
eth0: ne2k-pci (Realtek 8029)
head console:
[root@head /root]# ping -s 61992 quartz -c 1
PING quartz.redvip.net (192.168.0.3): 61992 data bytes
62000 bytes from 192.168.0.3: icmp_seq=0 ttl=255 time=166.5 ms
--- quartz.redvip.net ping statistics ---
1 packets transmitted, 1 packets received, 0% packet loss
round-trip min/avg/max = 166.5/166.5/166.5 ms
[root@head /root]# ping -s 61993 quartz -c 1
PING quartz.redvip.net (192.168.0.3): 61993 data bytes
--- quartz.redvip.net ping statistics ---
1 packets transmitted, 0 packets received, 100% packet loss
[root@head /root]#
And a tcpdump from quartz:
short:
00:31:46.414304 head.redvip.net > quartz.redvip.net: (frag
4572:1320@60680)
00:31:46.416247 head.redvip.net > quartz.redvip.net: (frag
4572:1480@59200+)
00:31:46.490558 head.redvip.net > quartz.redvip.net: icmp: echo request
(frag 4572:1480@0+)
00:31:46.492921 quartz.redvip.net > head.redvip.net: (frag
3175:1320@60680)
00:31:46.493181 quartz.redvip.net > head.redvip.net: (frag
3175:1480@59200+)
00:31:46.543032 quartz.redvip.net > head.redvip.net: icmp: echo reply
(frag 3175:1480@0+)
00:31:50.542692 head.redvip.net > quartz.redvip.net: (frag
4584:1321@60680)
00:31:50.544529 head.redvip.net > quartz.redvip.net: (frag
4584:1480@59200+)
00:31:50.618560 head.redvip.net > quartz.redvip.net: icmp: echo request
(frag 4584:1480@0+)
full:
00:31:46.414304 head.redvip.net > quartz.redvip.net: (frag
4572:1320@60680)
00:31:46.416247 head.redvip.net > quartz.redvip.net: (frag
4572:1480@59200+)
00:31:46.418145 head.redvip.net > quartz.redvip.net: (frag
4572:1480@57720+)
00:31:46.420121 head.redvip.net > quartz.redvip.net: (frag
4572:1480@56240+)
00:31:46.421925 head.redvip.net > quartz.redvip.net: (frag
4572:1480@54760+)
00:31:46.423961 head.redvip.net > quartz.redvip.net: (frag
4572:1480@53280+)
00:31:46.425820 head.redvip.net > quartz.redvip.net: (frag
4572:1480@51800+)
00:31:46.427706 head.redvip.net > quartz.redvip.net: (frag
4572:1480@50320+)
00:31:46.429483 head.redvip.net > quartz.redvip.net: (frag
4572:1480@48840+)
00:31:46.431380 head.redvip.net > quartz.redvip.net: (frag
4572:1480@47360+)
00:31:46.433137 head.redvip.net > quartz.redvip.net: (frag
4572:1480@45880+)
00:31:46.435095 head.redvip.net > quartz.redvip.net: (frag
4572:1480@44400+)
00:31:46.436865 head.redvip.net > quartz.redvip.net: (frag
4572:1480@42920+)
00:31:46.438737 head.redvip.net > quartz.redvip.net: (frag
4572:1480@41440+)
00:31:46.440577 head.redvip.net > quartz.redvip.net: (frag
4572:1480@39960+)
00:31:46.442274 head.redvip.net > quartz.redvip.net: (frag
4572:1480@38480+)
00:31:46.444257 head.redvip.net > quartz.redvip.net: (frag
4572:1480@37000+)
00:31:46.445963 head.redvip.net > quartz.redvip.net: (frag
4572:1480@35520+)
00:31:46.447864 head.redvip.net > quartz.redvip.net: (frag
4572:1480@34040+)
00:31:46.449669 head.redvip.net > quartz.redvip.net: (frag
4572:1480@32560+)
00:31:46.451549 head.redvip.net > quartz.redvip.net: (frag
4572:1480@31080+)
00:31:46.453417 head.redvip.net > quartz.redvip.net: (frag
4572:1480@29600+)
00:31:46.455259 head.redvip.net > quartz.redvip.net: (frag
4572:1480@28120+)
00:31:46.457084 head.redvip.net > quartz.redvip.net: (frag
4572:1480@26640+)
00:31:46.458920 head.redvip.net > quartz.redvip.net: (frag
4572:1480@25160+)
00:31:46.460816 head.redvip.net > quartz.redvip.net: (frag
4572:1480@23680+)
00:31:46.462694 head.redvip.net > quartz.redvip.net: (frag
4572:1480@22200+)
00:31:46.464551 head.redvip.net > quartz.redvip.net: (frag
4572:1480@20720+)
00:31:46.466398 head.redvip.net > quartz.redvip.net: (frag
4572:1480@19240+)
00:31:46.468189 head.redvip.net > quartz.redvip.net: (frag
4572:1480@17760+)
00:31:46.470081 head.redvip.net > quartz.redvip.net: (frag
4572:1480@16280+)
00:31:46.471936 head.redvip.net > quartz.redvip.net: (frag
4572:1480@14800+)
00:31:46.473996 head.redvip.net > quartz.redvip.net: (frag
4572:1480@13320+)
00:31:46.475828 head.redvip.net > quartz.redvip.net: (frag
4572:1480@11840+)
00:31:46.477578 head.redvip.net > quartz.redvip.net: (frag
4572:1480@10360+)
00:31:46.479457 head.redvip.net > quartz.redvip.net: (frag
4572:1480@8880+)
00:31:46.481267 head.redvip.net > quartz.redvip.net: (frag
4572:1480@7400+)
00:31:46.483150 head.redvip.net > quartz.redvip.net: (frag
4572:1480@5920+)
00:31:46.485024 head.redvip.net > quartz.redvip.net: (frag
4572:1480@4440+)
00:31:46.486854 head.redvip.net > quartz.redvip.net: (frag
4572:1480@2960+)
00:31:46.488698 head.redvip.net > quartz.redvip.net: (frag
4572:1480@1480+)
00:31:46.490558 head.redvip.net > quartz.redvip.net: icmp: echo request
(frag 4572:1480@0+)
00:31:46.492921 quartz.redvip.net > head.redvip.net: (frag
3175:1320@60680)
00:31:46.493181 quartz.redvip.net > head.redvip.net: (frag
3175:1480@59200+)
00:31:46.494294 quartz.redvip.net > head.redvip.net: (frag
3175:1480@57720+)
00:31:46.495575 quartz.redvip.net > head.redvip.net: (frag
3175:1480@56240+)
00:31:46.496809 quartz.redvip.net > head.redvip.net: (frag
3175:1480@54760+)
00:31:46.498056 quartz.redvip.net > head.redvip.net: (frag
3175:1480@53280+)
00:31:46.499303 quartz.redvip.net > head.redvip.net: (frag
3175:1480@51800+)
00:31:46.500552 quartz.redvip.net > head.redvip.net: (frag
3175:1480@50320+)
00:31:46.501794 quartz.redvip.net > head.redvip.net: (frag
3175:1480@48840+)
00:31:46.503048 quartz.redvip.net > head.redvip.net: (frag
3175:1480@47360+)
00:31:46.504310 quartz.redvip.net > head.redvip.net: (frag
3175:1480@45880+)
00:31:46.505560 quartz.redvip.net > head.redvip.net: (frag
3175:1480@44400+)
00:31:46.506799 quartz.redvip.net > head.redvip.net: (frag
3175:1480@42920+)
00:31:46.508049 quartz.redvip.net > head.redvip.net: (frag
3175:1480@41440+)
00:31:46.509288 quartz.redvip.net > head.redvip.net: (frag
3175:1480@39960+)
00:31:46.510540 quartz.redvip.net > head.redvip.net: (frag
3175:1480@38480+)
00:31:46.511781 quartz.redvip.net > head.redvip.net: (frag
3175:1480@37000+)
00:31:46.513034 quartz.redvip.net > head.redvip.net: (frag
3175:1480@35520+)
00:31:46.514288 quartz.redvip.net > head.redvip.net: (frag
3175:1480@34040+)
00:31:46.515532 quartz.redvip.net > head.redvip.net: (frag
3175:1480@32560+)
00:31:46.516784 quartz.redvip.net > head.redvip.net: (frag
3175:1480@31080+)
00:31:46.518025 quartz.redvip.net > head.redvip.net: (frag
3175:1480@29600+)
00:31:46.519279 quartz.redvip.net > head.redvip.net: (frag
3175:1480@28120+)
00:31:46.520520 quartz.redvip.net > head.redvip.net: (frag
3175:1480@26640+)
00:31:46.521775 quartz.redvip.net > head.redvip.net: (frag
3175:1480@25160+)
00:31:46.523014 quartz.redvip.net > head.redvip.net: (frag
3175:1480@23680+)
00:31:46.524275 quartz.redvip.net > head.redvip.net: (frag
3175:1480@22200+)
00:31:46.525513 quartz.redvip.net > head.redvip.net: (frag
3175:1480@20720+)
00:31:46.526769 quartz.redvip.net > head.redvip.net: (frag
3175:1480@19240+)
00:31:46.528008 quartz.redvip.net > head.redvip.net: (frag
3175:1480@17760+)
00:31:46.529256 quartz.redvip.net > head.redvip.net: (frag
3175:1480@16280+)
00:31:46.530502 quartz.redvip.net > head.redvip.net: (frag
3175:1480@14800+)
00:31:46.531754 quartz.redvip.net > head.redvip.net: (frag
3175:1480@13320+)
00:31:46.532998 quartz.redvip.net > head.redvip.net: (frag
3175:1480@11840+)
00:31:46.534260 quartz.redvip.net > head.redvip.net: (frag
3175:1480@10360+)
00:31:46.535512 quartz.redvip.net > head.redvip.net: (frag
3175:1480@8880+)
00:31:46.536782 quartz.redvip.net > head.redvip.net: (frag
3175:1480@7400+)
00:31:46.538025 quartz.redvip.net > head.redvip.net: (frag
3175:1480@5920+)
00:31:46.539273 quartz.redvip.net > head.redvip.net: (frag
3175:1480@4440+)
00:31:46.540525 quartz.redvip.net > head.redvip.net: (frag
3175:1480@2960+)
00:31:46.541775 quartz.redvip.net > head.redvip.net: (frag
3175:1480@1480+)
00:31:46.543032 quartz.redvip.net > head.redvip.net: icmp: echo reply
(frag 3175:1480@0+)
00:31:50.542692 head.redvip.net > quartz.redvip.net: (frag
4584:1321@60680)
00:31:50.544529 head.redvip.net > quartz.redvip.net: (frag
4584:1480@59200+)
00:31:50.546456 head.redvip.net > quartz.redvip.net: (frag
4584:1480@57720+)
00:31:50.548383 head.redvip.net > quartz.redvip.net: (frag
4584:1480@56240+)
00:31:50.550118 head.redvip.net > quartz.redvip.net: (frag
4584:1480@54760+)
00:31:50.552176 head.redvip.net > quartz.redvip.net: (frag
4584:1480@53280+)
00:31:50.553926 head.redvip.net > quartz.redvip.net: (frag
4584:1480@51800+)
00:31:50.555836 head.redvip.net > quartz.redvip.net: (frag
4584:1480@50320+)
00:31:50.557613 head.redvip.net > quartz.redvip.net: (frag
4584:1480@48840+)
00:31:50.559473 head.redvip.net > quartz.redvip.net: (frag
4584:1480@47360+)
00:31:50.561308 head.redvip.net > quartz.redvip.net: (frag
4584:1480@45880+)
00:31:50.563138 head.redvip.net > quartz.redvip.net: (frag
4584:1480@44400+)
00:31:50.564983 head.redvip.net > quartz.redvip.net: (frag
4584:1480@42920+)
00:31:50.566863 head.redvip.net > quartz.redvip.net: (frag
4584:1480@41440+)
00:31:50.568649 head.redvip.net > quartz.redvip.net: (frag
4584:1480@39960+)
00:31:50.570462 head.redvip.net > quartz.redvip.net: (frag
4584:1480@38480+)
00:31:50.572333 head.redvip.net > quartz.redvip.net: (frag
4584:1480@37000+)
00:31:50.574182 head.redvip.net > quartz.redvip.net: (frag
4584:1480@35520+)
00:31:50.576022 head.redvip.net > quartz.redvip.net: (frag
4584:1480@34040+)
00:31:50.577870 head.redvip.net > quartz.redvip.net: (frag
4584:1480@32560+)
00:31:50.579719 head.redvip.net > quartz.redvip.net: (frag
4584:1480@31080+)
00:31:50.581574 head.redvip.net > quartz.redvip.net: (frag
4584:1480@29600+)
00:31:50.583425 head.redvip.net > quartz.redvip.net: (frag
4584:1480@28120+)
00:31:50.585269 head.redvip.net > quartz.redvip.net: (frag
4584:1480@26640+)
00:31:50.587067 head.redvip.net > quartz.redvip.net: (frag
4584:1480@25160+)
00:31:50.588921 head.redvip.net > quartz.redvip.net: (frag
4584:1480@23680+)
00:31:50.590734 head.redvip.net > quartz.redvip.net: (frag
4584:1480@22200+)
00:31:50.592617 head.redvip.net > quartz.redvip.net: (frag
4584:1480@20720+)
00:31:50.594471 head.redvip.net > quartz.redvip.net: (frag
4584:1480@19240+)
00:31:50.596381 head.redvip.net > quartz.redvip.net: (frag
4584:1480@17760+)
00:31:50.598188 head.redvip.net > quartz.redvip.net: (frag
4584:1480@16280+)
00:31:50.600043 head.redvip.net > quartz.redvip.net: (frag
4584:1480@14800+)
00:31:50.601888 head.redvip.net > quartz.redvip.net: (frag
4584:1480@13320+)
00:31:50.603733 head.redvip.net > quartz.redvip.net: (frag
4584:1480@11840+)
00:31:50.605571 head.redvip.net > quartz.redvip.net: (frag
4584:1480@10360+)
00:31:50.607416 head.redvip.net > quartz.redvip.net: (frag
4584:1480@8880+)
00:31:50.609211 head.redvip.net > quartz.redvip.net: (frag
4584:1480@7400+)
00:31:50.611017 head.redvip.net > quartz.redvip.net: (frag
4584:1480@5920+)
00:31:50.612955 head.redvip.net > quartz.redvip.net: (frag
4584:1480@4440+)
00:31:50.614809 head.redvip.net > quartz.redvip.net: (frag
4584:1480@2960+)
00:31:50.616716 head.redvip.net > quartz.redvip.net: (frag
4584:1480@1480+)
00:31:50.618560 head.redvip.net > quartz.redvip.net: icmp: echo request
(frag 4584:1480@0+)
As one can see the packets came and get replied if their total size is
under 62001, if it's greater it's ignored, it doesn't ever show up in
tcpdump.
And BTW in the other direction works ok.
[root@quartz ~]#  ping -s 61993 quartz -c 1
PING quartz.redvip.net (192.168.0.3) from 192.168.0.3 : 61993 data bytes
62001 bytes from 192.168.0.3: icmp_seq=0 ttl=255 time=19.1 ms
--- quartz.redvip.net ping statistics ---
1 packets transmitted, 1 packets received, 0% packet loss
round-trip min/avg/max = 19.1/19.1/19.1 ms
[root@quartz ~]# 
-- 
Jorge Nerin
<jnerin@svalero.es>
<comandante@zaralinux.com>
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/