Date: Thu, 29 Aug 2002 01:20:48 +0100
From: Russell King <>
Subject: Re: [BUG] mysterious tty deadlock
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/8/28/25

On Wed, Aug 28, 2002 at 05:05:44PM -0700, Andrew Morton wrote:
> Well Bill's trace is claiming that we're doing a schedule_timeout(0x7fffffff)
> for some reason.
Umm, I didn't see that:
wli> #0  schedule_timeout (timeout=-150765944) at timer.c:864
wli> #1  0xc01a28a3 in uart_wait_until_sent (tty=0xf7669000, timeout=2147483647)
wli>     at core.c:1320
Its legal for uart_wait_until_sent to be called with 2147483647 (it means
"wait until all characters are sent no matter what").  However, we'll
still call schedule_timeout with a really small value (one character
time) which means we'll be waking up pretty regularly there.
> But yes, he seems to be able to hit it too frequently for this to be
> the cause.
wli - please let me know if Andrew's patch makes any difference for you.
-- 
Russell King (rmk@arm.linux.org.uk)                The developer of ARM Linux
             
http://www.arm.linux.org.uk/personal/aboutme.html
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/