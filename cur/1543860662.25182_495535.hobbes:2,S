Date: Tue, 2 Jan 2007 15:01:37 +0100
From: "Remy Bohmer" <>
Subject: [BUG-RT] RTC has been stopped-> long delay during boot, soft reboot->GRUB fails to call getrtsecs()
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/1/2/100

Hello Ingo,
I have discovered 3 problems that are likely all related to the same
root-cause, likely to be caused by the RT-kernel.
I use the 2.6.19-rt15 kernel, with the configuration attached to this mail.
It is running on a standard x86, i945, Celeron 2.93 GHZ (=UP), Fedora Core 6
So, I have set the following options:
CONFIG_HIGH_RES_TIMERS=y
CONFIG_NO_HZ=y
The problems:
1. During (cold and warm) boot the synchronisation of the hardware
clock takes often very long time, up to approx. 30 seconds. (This is
the call: /sbin/hwclock --hctosys --localtime)
2. After reboot the next boot into grub hangs on the getrtsecs() call
(in Grub 0.97 code). (RTC clock does not run or has been stopped by
the last boot)
3. After the same reboot, looking into the BIOS, the time-of-day clock
is stopped also (system clock).
Do you recognise this problem?
Can it be related to the CONFIG_NO_HZ option?
Notice that we do not call "hwclock  --systohc" on shutdown or reboot
to sync the hardware clock. Does this call also restart the RTC clock
normally? (If it does, I think this would be strange (I believe that
if the kernel itself stops the RTC, it has to restarted by the kernel
also), otherwise it is probably not allowed to execute this command
during normal runtime)
Kind Regards,
Remy Bohmer
[unhandled content-type:application/octet-stream]