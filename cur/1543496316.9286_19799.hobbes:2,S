Date: Wed, 19 May 1999 19:27:51 +0200 (CEST)
From: Andrea Arcangeli <>
Subject: Re: andrea buffer code (2.2.9-C.gz)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/5/20/138

On Wed, 19 May 1999, Manfred Spraul wrote:
>It seems there is a bug in your buffer code.
>if I start:
>	#hdparm -t /dev/hda1
>then the kernel printk's:
>	"invalidate_buffers(): b_count 1!"
>at the end of the hdparm.
>(around 10 messages)
Right, but the bug is the printk :-). You can safely ignore it. The old
code was simply ignoring inuse-buffers. Since I couldn't figure how the
kernel could recall invalidate_buffers with a mounted fs I added the
printk just to wait an harmless report like your one. Now I know it can
happens so I'll remove the printk from the next patches. (I'll also search
for where invalidate_buffers() got recalled). You can continue to use my
2.2.9-C patch safely all the time (just ignore such message while
accessing the rawblockdevice with an ext2 fs mounted at the same time).
Thanks.
>Then you have NT: They prove that if you decide everywhere 'scale'
>instead of 'effective', the result becomes bloated & not much faster.
If you want to save memory you must compile the kernel UP with a not-buggy
compiler. Then you won't waste memory.
Andrea Arcangeli
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/