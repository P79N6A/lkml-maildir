Date: Mon, 11 Feb 2002 10:08:41 -0500
From: James Bottomley <>
Subject: Re: [PATCH: NEW ARCHITECTURE FOR 2.5.3] support for NCR voyager
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/2/11/107

It's historical creep.
Initially the question about being Voyager was asked immediately below 
CONFIG_MCA, which was then at the top level.  Then that got wrapped by if != 
VISW, so it ends up looking like this.
How about:
if [ "$CONFIG_VISWS" != "y" ]; then
    bool 'MCA support' CONFIG_MCA
else
    define_bool CONFIG_MCA n
fi
if [ "$CONFIG_MCA" = "y" ]; then
    bool '   Support for the NCR Voyager Architecture' CONFIG_VOYAGER
    define_bool CONFIG_X86_TSC n
fi
Actually, this also exposes a bug, the last statement should be:
if [ "$CONFIG_MCA" = "y" ]; then
    bool '   Support for the NCR Voyager Architecture' CONFIG_VOYAGER
    if [ "$CONFIG_VOYAGER" = "y"]; then
        define_bool CONFIG_X86_TSC n
    fi
fi
Since MCA machines may use the pentium TSC but voyager may not.
James
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/