Date: Mon, 11 Sep 2006 11:36:44 -0700
From: Zach Brown <>
Subject: Re: [PATCH 10/10] check pr_debug() arguments
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/9/11/188

>> This results in a seemingly insignificant code size increase.  A x86-64
>> allyesconfig:
>>
>>    text    data     bss     dec     hex filename
>> 25354768        7191098 4854720 37400586        23ab00a vmlinux.before
>> 25354945        7191138 4854720 37400803        23ab0e3 vmlinux
> 
> Which would indicate that we might have expressions-with-side-effects
> inside pr_debug() statements somewhere, which is risky.  I wonder where?
I browsed through some of the functions that bloat-o-meter reported an
increase for.  Some seemed reasonable as they used things like current
or AFFS_I() in arguments.  Others seemed pretty mysterious as they
didn't have obvious pr_debug() calls.
$ uname -m ; gcc --version
x86_64
gcc (GCC) 4.1.1 20060525 (Red Hat 4.1.1-1)
> btw, what's up with aio.c using a combination of pr_debug() and dprintk(),
> and a combination of `#ifdef DEBUG' and `#if DEBUG > 1'?  Confusing.
I'm not sure how it got that way but I don't think anyone will object to
simplifying it.  I'll spend those 5 minutes :).
> It would be nice to have a single way of doing developer-debug in-tree.  We
> have 182(!) different definitions of dprintk().  Please nobody cc me on that
> discussion though ;)
Agreed, on both counts :).
- z
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/