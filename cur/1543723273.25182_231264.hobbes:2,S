Date: Wed, 30 Jun 2004 20:55:15 +1000
From: Paul Mackerras <>
Subject: Re: [PATCH] [2.6] PPC64: log firmware errors during boot.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/6/30/71

Linas,
> Firmware can report errors at any time, and not atypically during boot.
> However, these reports were being discarded until th rtasd comes up,
> which occurs fairly late in the boot cycle.  As a result, firmware
> errors during boot were being silently ignored. 
As far as I can see the main change is in log_rtas_len, which is
called from pSeries_log_error, which is called from do_event_scan and
rtasd(), and do_event_scan is only called from rtasd().  And
get_eventscan_parms() is already called at the beginning of rtasd().
So I don't see the point of the get_eventscan_parms call in
log_rtas_len.  The other change is also in pSeries_log_error.
What am I missing?
> This patch at least gets them printk'ed so that at least they show 
> up in boot.msg/syslog.  There are two other logging mechanisms,
> nvram and rtas, that I didn't touch because I don't understand 
> the reprecussions.  In particular, nvram logging isn't enabled
> until late in the boot ... but what's the point of nvram logging
> if not to catch messages that occured very early in boot ?? 
Indeed.
As for printk'ing the errors, it is annoying and it seems of somewhat
dubious benefit to me, given that it is just incomprehensible hex
numbers that can go on and on.  There has to be a better way.  Putting
it in nvram seems like a better option to me.  I don't know of any
reason why we can't use nvram quite early on.
Paul.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/