Date: Sat, 9 Jun 2007 17:54:54 +0100
From: Al Viro <>
Subject: Re: [patch 7/8] fdmap v2 - implement sys_socket2
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/6/9/112

On Sat, Jun 09, 2007 at 09:26:34AM -0700, Ulrich Drepper wrote:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
> 
> Al Viro wrote:
> > So which code is supposed to do that open/write in your example?  Library?
> > Unmodified application?  Application specifically modified to make *that*
> > open() randomized?
> 
> Why should that matter?  All of the above.
I asked for real-world example.  Can I have one, please?
> In whatever way you look at it, there currently is a problem which
> cannot be solved except with truly horrible, horrible hack (open N
> descriptors and randomly select one to use; yep, horrible, I said so).
That's simply not true.  On the current kernel nothing stops you from e.g.
picking a random number and using F_DUPFD.  Voila - there's your randomized
descriptor.  Portable to earlier kernels.
Moreover, nonsense^H^H^Hq_fd() can be implemented in userland just fine
if we allow F_DUPFD to arbitrary number - just pass it a random one *or*
base chosen like davedel is doing (constant + 20bit random chosen at start
time).
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/