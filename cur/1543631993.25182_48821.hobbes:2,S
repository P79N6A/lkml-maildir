Date: Tue, 28 May 2002 17:31:15 +0200
From: Martin Dalecki <>
Subject: [PATCH] airo
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/5/28/98

Since apparently no body else did care thus far, and
since I'm using this driver, well here it comes:
- Adjust the airo wireless LAN card driver for the fact that modules
   don't export symbols by default any longer.
- Make some stuff which obivously should be static there static as well.
   (Plenty of code in Linux actually deserves a review for this
    far too common bug...)
diff -ur linux-2.5.18/drivers/net/wireless/airo.c linux/drivers/net/wireless/airo.c
--- linux-2.5.18/drivers/net/wireless/airo.c	2002-05-25 03:55:19.000000000 +0200
+++ linux/drivers/net/wireless/airo.c	2002-05-28 18:20:41.000000000 +0200
@@ -1146,6 +1146,8 @@
 	kfree( dev );
 }
 
+EXPORT_SYMBOL(stop_airo_card);
+
 static int add_airo_dev( struct net_device *dev );
 
 struct net_device *init_airo_card( unsigned short irq, int port, int is_pcmcia )
@@ -1239,7 +1241,9 @@
 	return NULL;
 }
 
-int waitbusy (struct airo_info *ai) {
+EXPORT_SYMBOL(init_airo_card);
+
+static int waitbusy (struct airo_info *ai) {
 	int delay = 0;
 	while ((IN4500 (ai, COMMAND) & COMMAND_BUSY) & (delay < 10000)) {
 		udelay (10);
@@ -1283,7 +1287,9 @@
 	return 0;
 }
 
-int wll_header_parse(struct sk_buff *skb, unsigned char *haddr)
+EXPORT_SYMBOL(reset_airo_card);
+
+static int wll_header_parse(struct sk_buff *skb, unsigned char *haddr)
 {
 	memcpy(haddr, skb->mac.raw + 10, ETH_ALEN);
 	return ETH_ALEN;