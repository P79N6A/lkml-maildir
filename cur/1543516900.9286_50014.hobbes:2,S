Date: Wed, 24 Nov 1999 09:22:27 -0600
From: Bret Indrelee <>
Subject: RE: Hot PCI bus plugging
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/11/24/45

ak@ebox.de wrote:
[ snip ]
> The thoughts I have are, that at the beginning only a modified kernel
> is needed, that would allow to retrigger the PCI scanning at any
> time. Nothing automatic is done further, the current PCI configuration
> is just recorded.
> 
> Then it should be possible to insmod standard drivers. They won't see
> any difference between a card that was active at system start, and a
> card that was later inserted and added to the system by a rescan of
> the bus.
This doesn't handle the common case of adding another card of the same type
as already exist in the system. In that case if you don't want to redesign
the driver interface you have to remove the driver, reconfigure, and then
install the driver again.
> If you want to unplug the card you would have to remove the module
> manually before unplugging, to prevent that the driver crashes badly.
> 
> A PCI bus rescan would then remove that PCI card from the kernel list,
> preventing accidently loading a driver for a not more existing
> card. It's not strictly necessary therefore, if you know, what you are
> doing, I think.
You most definately would have to remove it from the device list. The device
list is what the drivers are supposed to use to detect any instances of
their device installed in the system. You don't want a device detecting it
exists when it has been removed from the system.
-Bret
-------------------------------------------------------------
SBS Technologies, Connectivity Products
      ... solutions for real-time connectivity
Bret Indrelee, Engineer
SBS Technologies, Inc., Connectivity Products
1284 Corporate Center Drive, St. Paul MN 55121
Direct:  (651) 905-4731
Main:  (651) 905-4700    Fax:  (651) 905-4701
E-mail: bindrelee@sbs-cp.com  
http://www.sbs.com
-------------------------------------------------------------
 
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/