Date: Tue, 11 Nov 2008 23:55:13 +0200
From: Izik Eidus <>
Subject: Re: [PATCH 2/4] Add replace_page(), change the mapping of pte from one page into another
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/11/11/372

Christoph Lameter wrote:
> On Tue, 11 Nov 2008, Avi Kivity wrote:
>
> 
>> Christoph Lameter wrote:
>> 
>>> page migration requires the page to be on the LRU. That could be changed
>>> if you have a different means of isolating a page from its page tables.
>>>
>>> 
>> Isn't rmap the means of isolating a page from its page tables?  I guess I'm
>> misunderstanding something.
>> 
>
> In order to migrate a page one first has to make sure that userspace and
> the kernel cannot access the page in any way. User space must be made to
> generate page faults and all kernel references must be accounted for and
> not be in use.
> 
This is really not the case for ksm,
in ksm we allow the page to be accessed all the time, we dont have to 
swap the page
like migrate.c is doing...