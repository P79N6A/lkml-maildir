Date: Wed, 12 Mar 2008 10:52:12 -0700
From: Dave Hansen <>
Subject: Re: [patch 10/10] System z large page support.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/3/12/261

On Wed, 2008-03-12 at 18:32 +0100, Martin Schwidefsky wrote:
> 
> +pte_t *huge_pte_alloc(struct mm_struct *mm, unsigned long addr)
> +{
> +       pgd_t *pgdp;
> +       pud_t *pudp;
> +       pmd_t *pmdp = NULL;
> +
> +       pgdp = pgd_offset(mm, addr);
> +       pudp = pud_alloc(mm, pgdp, addr);
> +       if (pudp)
> +               pmdp = pmd_alloc(mm, pudp, addr);
> +       return (pte_t *) pmdp;
> +}
That looks pretty generic.  Why can't you share with the version we
already have?
-- Dave