Date: Thu, 02 Dec 2004 03:05:45 -0500
From: Jeff Garzik <>
Subject: [PATCH/RFC] deprecate some drivers
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/12/2/23

I'm looking to eliminate some horribly broken/dup drivers.  Since 2.6 is 
an ongoing matter, I want a 'flashing-red warning sign' that drivers 
will soon be disappearing, rather than just killing the driver and 
listening for the screams.
IPhase driver is broken+abandoned, and xirtulip is 
broken+duplicate+abandoned, and are two prime candidates for my prefence 
of handling this matter:  CONFIG_DEPRECATED.
See patch for example.
===== drivers/net/Kconfig 1.100 vs edited =====
--- 1.100/drivers/net/Kconfig	2004-11-05 05:37:26 -05:00
+++ edited/drivers/net/Kconfig	2004-12-02 02:57:56 -05:00
@@ -2544,7 +2544,7 @@
 
 config IPHASE5526
 	tristate "Interphase 5526 Tachyon chipset based adapter support"
-	depends on NET_FC && SCSI && PCI && BROKEN
+	depends on NET_FC && SCSI && PCI && BROKEN && DEPRECATED
 	help
 	  Say Y here if you have a Fibre Channel adaptor of this kind.
 
===== drivers/net/tulip/Kconfig 1.12 vs edited =====
--- 1.12/drivers/net/tulip/Kconfig	2004-09-21 22:19:24 -04:00
+++ edited/drivers/net/tulip/Kconfig	2004-12-02 02:58:27 -05:00
@@ -150,7 +150,7 @@
 
 config PCMCIA_XIRTULIP
 	tristate "Xircom Tulip-like CardBus support (old driver)"
-	depends on NET_TULIP && CARDBUS && BROKEN_ON_SMP
+	depends on NET_TULIP && CARDBUS && BROKEN_ON_SMP && DEPRECATED
 	select CRC32
 	---help---
 	  This driver is for the Digital "Tulip" Ethernet CardBus adapters.
===== init/Kconfig 1.57 vs edited =====
--- 1.57/init/Kconfig	2004-10-27 16:16:47 -04:00
+++ edited/init/Kconfig	2004-12-02 02:59:27 -05:00
@@ -40,6 +40,20 @@
 
 	  If unsure, say Y
 
+config IGNORE_DEPRECATED
+	bool "Elide drivers soon to be removed from the kernel"
+	default y
+	help
+	  Select this option to avoid features and drivers
+	  that will soon be removed from the kernel.
+
+	  If unsure, say Y
+
+config DEPRECATED
+	bool
+	depends on !IGNORE_DEPRECATED
+	default y
+
 config BROKEN
 	bool
 	depends on !CLEAN_COMPILE