Date: Tue, 10 Apr 2007 16:44:16 +0200
From: Cornelia Huck <>
Subject: Re: [PATCHSET #master] sysfs: make sysfs disconnect immediately on deletion, take 2
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/4/10/148

On Mon, 9 Apr 2007 13:18:46 +0900,
Tejun Heo <htejun@gmail.com> wrote:
> With all the patches applied, the same test used in the last take ran
> 9+hrs without any problem.
I get the following on startup:
=====================================
[ BUG: bad unlock balance detected! ]
-------------------------------------
start_udev/197 is trying to release lock (&sd->s_active) at:
[<0000000000209024>] release_sysfs_dirent+0x8c/0x118
but there are no more locks to release!
other info that might help us debug this:
no locks held by start_udev/197.
stack backtrace:
000000001ea4fad8 0000000000000002 0000000000000000 000000001ea4fbe8 
       000000001ea4fb60 00000000004bebf6 00000000004bebf6 0000000000103854
       0000000000000000 0000000000000000 0000000000000000 0000000000602cb0
       0000000000000000 000000001ea4fba8 000000001ea4fb48 000000000000000e
       000000000042a810 000000000010389e 000000001ea4fb48 000000001ea4fb98
Call Trace:
([<00000000001037f4>] show_trace+0xf8/0xfc)
 [<00000000001038ce>] show_stack+0xd6/0x100
 [<0000000000103926>] dump_stack+0x2e/0x3c
 [<0000000000153c98>] print_unlock_inbalance_bug+0x114/0x138
 [<0000000000156dce>] lock_release+0x166/0x1bc
 [<000000000014f8c2>] up_write+0x3e/0x98
 [<0000000000209024>] release_sysfs_dirent+0x8c/0x118
 [<000000000020912e>] sysfs_dir_close+0x7e/0x90
 [<00000000001a7088>] __fput+0xe4/0x20c
 [<00000000001a71fc>] fput+0x4c/0x5c
 [<00000000001a3aa4>] filp_close+0x7c/0xb4
 [<00000000001a3fcc>] sys_close+0xdc/0x128
 [<00000000001107c8>] sysc_noemu+0x10/0x16
 [<0000020000107dd0>] 0x20000107dd0
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/