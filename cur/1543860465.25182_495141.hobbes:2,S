Date: Sat, 30 Dec 2006 23:30:04 -0700 (MST)
From: "Randy Pierce" <>
Subject: sbull example on 2.6.18 fc5 x86_64 has refcount problem
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/12/31/10

Sorry if I am being dense here. I have been playing with the driver
examples in LDD3 specifically the sbull block level driver example. On
2.6.17 it was running OK after two little fixes ...
comment out include of config.h
and
end_that_request_last(req);
needs to be
end_that_request_last(req,0);
...
On 2.6.18 I now get the wrong refcount after loading the module. Of course
you can't unload the module then because you get ERROR: Module sbull is in
use
cat'ing /proc/modules shows an initial refcount of 8 ??
>cat /proc/modules | grep sbull
sbull 18192 8 - Live 0xffffffff884a1000
dmesg doesn't show any errors, nor does /var/log/messages.
This is my version...
>uname -a
Linux vstore1 2.6.18-1.2257.fc5 #1 SMP Fri Dec 15 16:07:14 EST 2006 x86_64
x86_64 x86_64 GNU/Linux
I am running a dual core AMD 64 bit machine.
What did I miss here? I didn't see anything in the archives. Please CC me
directly if you can help me out randy@virtualstorageinc.com
I really appreciate it. Thank you very much.
randy
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/