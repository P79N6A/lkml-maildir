Date: Mon, 21 Aug 2006 14:40:32 +0200
From: Andrzej Szymanski <>
Subject: Re: Strange write starvation on 2.6.17 (and other) kernels
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/8/21/107

Neil Brown wrote:
> On Thursday August 17, miquels@cistron.nl wrote:
> 
> Can you report the contents of /proc/meminfo before, during, and after
> the long pause?
> I'm particularly interested in MemTotal, Dirty, and Writeback, but the
> others are of interest too.
> 
> Thanks,
> NeilBrown
I've prepared two logs, from different machines, the first one is on 
software RAID5 (4 ATA disks) with deadline scheduler, the second on a 
single ATA disk with CFQ scheduler. In the first case 10 writer threads 
are sufficient to give large delays, in the second case I've run an 
additional tar thread reading from the disk.
The logs are here:
http://galaxy.agh.edu.pl/~szymans/logs/
Each writer starts with:
Writing 200 MB to stdout without fsync
than reports each write() that lasts > 3s along with pid:
6582 - Delayed 4806 ms.
And finishes with:
Max write delay: 14968 ms.
Andrzej.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/