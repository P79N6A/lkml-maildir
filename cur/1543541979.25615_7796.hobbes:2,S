Date: Sun, 20 Aug 2000 12:42:42 -0700
From: Ralf Baechle <>
Subject: Re: portable way for issuing a far jmp?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/8/21/96

On Sat, Aug 19, 2000 at 03:46:52AM +0200, Julien Oster wrote:
> Is there any macro or something as a clean way to jump to a function, instead
> of calling it? I don't want to use assembler as my modules are fairly
> portable by now.
> 
> Sometime I want to _jump_ to a function instead of calling it. e.g., when
> wrapping around sys_delete_module, I like to jump to the old handler of
> sys_delete_module. The reason is, that when the module wrapping it gets
> deleten, the return from the old sys_delete_module gets into the area of the
> no longer available module (since the old sys_delete_module deletes it)...
> 
> I could accomplish this with a little bit of assembler, tweaking with the
> stack and issueing a "JMP FAR" (on ix86), but that isn't portable in any
> way...
There are patches for gcc which implement tail optimization.  Afaik
very recent gcc's have them implemented but most distributions ship
without such a compiler so you'd better not use that possibility.  The
safer alternative is to arrange for a userprocess to do the module
unload.
  Ralf
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/