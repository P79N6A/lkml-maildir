Date: Wed, 24 Nov 2004 01:20:40 -0500
From: Daniel Phillips <>
Subject: Re: [PATCH] [Request for inclusion] Filesystem in Userspace
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/11/24/7

Hi Andrew,
On Thursday 18 November 2004 15:57, Andrew Morton wrote:
> I've seen one 2.4-based project which had essentially a userspace
> blockdevice driver.  Marking that special, trusted process PF_MEMALLOC did
> indeed fix low-on-memory deadlocks.  Obviously it's something one does with
> caution, but there are times when it makes sense.
Like the cluster stack, unless we're happy with inhaling all the membership, 
failover, fencing and etc code into the kernel.
> I think there are codepaths which unconditionally turn off PF_MEMALLOC, so
> they need to be tweaked to do a save/set/restore operation for it all to
> work.
The only one I spotted is in dm-ioctl.c.  We get away with the one in 
page_alloc.c by branching around it in PF_MEMALLOC mode.
Regards,
Daniel
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/