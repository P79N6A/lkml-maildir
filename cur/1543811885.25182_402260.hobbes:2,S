Date: Wed, 1 Mar 2006 16:10:26 +1100
From: Michael Ellerman <>
Subject: Re: [PATCH] leave APIC code inactive by default on i386
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/3/1/2

On Wed, 1 Mar 2006 15:33, Dave Jones wrote:
> On Wed, Mar 01, 2006 at 02:57:05PM +1100, Michael Ellerman wrote:
>  > On 1/20/06, Darrick J. Wong <djwong@us.ibm.com> wrote:
>  > > Hi there,
>  > >
>  > > Some old i386 systems have flaky APIC hardware that doesn't always
>  > > work right.  Right now, enabling the APIC code in Kconfig means that
>  > > the APIC code will try to activate the APICs unless 'noapic nolapic'
>  > > are passed to force them off.  The attached patch provides a config
>  > > option to change that default to keep the APICs off unless specified
>  > > otherwise, disables get_smp_config if we are not initializing the
>  > > local APIC, and makes init_apic_mappings not init the IOAPICs if they
>  > > are disabled. Note that the current behavior is maintained if
>  > > CONFIG_X86_UP_APIC_DEFAULT_OFF=n.
>  >
>  > Did this hit the floor?
>
> It's still being kicked around.  I saw one patch off-list earlier this
> week that has some small improvements over the variant originally posted,
> but still had 1-2 kinks.
Cool. Let's get ironing. I have no idea about the implementation, but the 
concept is double ++ good as far as I'm concerned.
> The number of systems that actually *need* APIC enabled are in the
> vast (though growing) minority, so it's unlikely that most newbies
> will hit this.  The problem is also the inverse of what you describe.
> Typically the distros have DMI lists of machines that *need* APIC
> to make it enabled by default so everything 'just works'.
Ok, even more reason for it to go in. Someone might want to let the folks at 
Ubuntu know too, they seem to have it enabled in their installer kernel. :D
cheers
[unhandled content-type:application/pgp-signature]