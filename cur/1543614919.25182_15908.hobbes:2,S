Date: Sat, 29 Dec 2001 12:32:53 -0800
From: Andrew Morton <>
Subject: Re: [PATCH] exporting seq_* stuff
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/12/29/165

Alexander Viro wrote:
> 
> [snip the attached horror]
[ replace with a different one :-) ]
> diff -urN C2-pre3/kernel/ksyms.c C2-pre3-fix/kernel/ksyms.c
> --- C2-pre3/kernel/ksyms.c      Thu Dec 27 19:48:04 2001
> +++ C2-pre3-fix/kernel/ksyms.c  Sat Dec 29 13:48:12 2001
> @@ -46,6 +46,7 @@
>  #include <linux/tty.h>
>  #include <linux/in6.h>
>  #include <linux/completion.h>
> +#include <linux/seq_file.h>
>  #include <asm/checksum.h>
> 
>  #if defined(CONFIG_PROC_FS)
> @@ -480,6 +481,12 @@
>  EXPORT_SYMBOL(reparent_to_init);
>  EXPORT_SYMBOL(daemonize);
>  EXPORT_SYMBOL(csum_partial); /* for networking and md */
> +EXPORT_SYMBOL(seq_escape);
> +EXPORT_SYMBOL(seq_printf);
> +EXPORT_SYMBOL(seq_open);
> +EXPORT_SYMBOL(seq_release);
> +EXPORT_SYMBOL(seq_read);
> +EXPORT_SYMBOL(seq_lseek);
Personally, I prefer to see the EXPORT_SYMBOL() near the
definition of the thing being exported.  For functions, the
convention I like is:
void foo()
{
}
EXPORT_SYMBOL(foo);
It's nicer, and prevents patch conflicts.
I'd propose that we drop the concept of EXPORT_OBJ by making all
files eligible for exporting symbols, and that the janitors be given
a mandate to scrap the ksyms files.
Is this acceptable?
-
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/