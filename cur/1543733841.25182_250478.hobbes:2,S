Date: Thu, 09 Sep 2004 11:42:04 +0200
From: Eric Valette <>
Subject: Re: 2.6.9-rc1-mm4 badness in rtl8150.c ethernet driver : fixed
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/9/9/38

Eric Valette wrote:
> I tried your new test kernel and it broke my USB/Ethernet adapter. 
> Adapter is detected, ifup works but no ping using IP adress on a point 
> to point ethernet network. I saw the file change in the diff and 
> probably something broke (either bogus endianness fixes or changed reset 
> code data or ...). Bitkeeper being unreachable I can hardly follow what 
> incremental broke it but, for sure, it is broken (FYI 2.6.9-rc1-mm2 works).
Andrew,
Here is a small patch that makes the card functionnal again. I've 
forwarded the patch to driver author also.
Signed off by <eric.valette@free.fr>
Move value used to reset the card back to its previous definition.
-- 
    __
   /  `                   	Eric Valette
  /--   __  o _.          	6 rue Paul Le Flem
(___, / (_(_(__         	35740 Pace
Tel: +33 (0)2 99 85 26 76	Fax: +33 (0)2 99 85 26 76
E-mail: eric.valette@free.fr
--- linux/drivers/usb/net/rtl8150.c-2.6.9-rc1-mm4.orig	2004-09-09 11:15:11.000000000 +0200
+++ linux/drivers/usb/net/rtl8150.c	2004-09-09 11:15:46.000000000 +0200
@@ -341,7 +341,7 @@
 
 static int rtl8150_reset(rtl8150_t * dev)
 {
-	u8 data = 0x11;
+	u8 data = 0x10;
 	int i = HZ;
 
 	set_registers(dev, CR, 1, &data);