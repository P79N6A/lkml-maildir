Date: Tue, 22 May 2007 13:20:11 +0200
From: Ingo Molnar <>
Subject: Re: [PROBLEM] 2.6.22-rc2 panics on x86-64 with slub
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/5/22/124

* Srihari Vijayaraghavan <sriharivijayaraghavan@yahoo.com.au> wrote:
> Compiled slub with SMP & CONFIG_PROVE_LOCKING. No luck. It still hangs 
> solid after the second spinlock lockup call trace.
hm. This suggests that the spinlock got corrupted - otherwise lockdep 
would have complained about the lockup before the spinlock-debug code 
had its chance.
> Surprisingly, with CONFIG_SMP=n, CONFIG_PROVE_LOCKING produces this 
> with slub (then hangs solid):
yes - PROVE_LOCKING reactivates spinlocks even on UP. At least this 
suggests that you'd have gotten the hang even with maxcpus=1 - i.e. the 
spinlock corruption is not caused by some genuine SMP race.
furthermore, PROVE_LOCKING also turns on DEBUG_LOCK_ALLOC, so we now 
know that it's most likely not use-after-free type of corruption.
	Ingo
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/