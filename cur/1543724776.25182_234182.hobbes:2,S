Date: Tue, 13 Jul 2004 17:24:55 -0400
From: Will Beers <>
Subject: Re: [linux-usb-devel] [PATCH] proper bios handoff in ehci-hcd
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/7/13/194

 > Sounds to me like your BIOS may be broken.  But if you're
 > up for it, you could try using byte access to write that one
Changing the pci_read_config to a byte access fixes it, thanks!
(included a diff)
-Will
diff -Nru a/drivers/usb/host/ehci-hcd.c b/drivers/usb/host/ehci-hcd.c
--- a/drivers/usb/host/ehci-hcd.c       2004-07-13 01:09:00.000000000 -0400
+++ b/drivers/usb/host/ehci-hcd.c       2004-07-13 17:06:00.000000000 -0400
@@ -300,7 +300,7 @@
                 do {
                         msleep(10);
                         msec -= 10;
-                       pci_read_config_dword(pdev, where, &cap);
+                       pci_read_config_byte(pdev, where, &cap);
                 } while ((cap & (1 << 16)) && msec);
                 if (cap & (1 << 16)) {
                         ehci_err (ehci, "BIOS handoff failed (%d, %04x)\n",[unhandled content-type:application/x-pkcs7-signature]