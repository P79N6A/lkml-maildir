Date: Fri, 1 Feb 2008 10:22:03 -0500 (EST)
From: Alan Stern <>
Subject: Re: Removing dev.power.power_state (WAS: Feature Removals for 2.6.25)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/2/1/278

On Thu, 31 Jan 2008, David Brownell wrote:
> Quoth Harvey Harrison:
> 
> > Ping?
> > What:	dev->power.power_state
> > When:	July 2007
> > Why:	Broken design for runtime control over driver power states, confusing
> > 	driver-internal runtime power management with:  mechanisms to support
> > 	system-wide sleep state transitions; event codes that distinguish
> > 	different phases of swsusp "sleep" transitions; and userspace policy
> > 	inputs.  This framework was never widely used, and most attempts to
> > 	use it were broken.  Drivers should instead be exposing domain-specific
> > 	interfaces either to kernel or to userspace.
> > Who:	Pavel Machek <pavel@suse.cz>
> 
> A lot of the infrastructure using that has already been deleted, and
> there are some incremental improvements pending for 2.6.25:
> But there are still quite a few users left, and a new one was (sigh)
> recently added.
>  - drivers/usb/... has various users, HCDs look easy enough to fix but
>    the other bits will take more thought
>  - drivers/scsi/mesh.c
> I'll probably send in a few more patches for easy stuff in areas
> that I touch semi-frequently, but other folk should fix ATA, IDE,
> SCSI, SERIO, and so forth.  It'd be good if Alan would help fix
> the USB stuff too.  I'm not sure what Pavel's doing there...
I can look at the USB and SCSI stuff.  It shouldn't be all that bad.  
The userspace interface has been gone for quite some time now, and most 
of the remaining uses of that field are write-only.
Alan Stern