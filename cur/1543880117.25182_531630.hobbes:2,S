Date: Wed, 18 Apr 2007 00:05:02 +1000
From: Peter Williams <>
Subject: Re: [patch] CFS (Completely Fair Scheduler), v2
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/4/17/188

Ingo Molnar wrote:
> * William Lee Irwin III <wli@holomorphy.com> wrote:
> 
>> On Tue, Apr 17, 2007 at 04:46:57PM +1000, Peter Williams wrote:
>>
>>> Have you considered using rq->raw_weighted_load instead of 
>>> rq->nr_running in calculating fair_clock?  This would take the nice 
>>> value (or RT priority) of the other tasks into account when 
>>> determining what's fair.
>> I suspect you mean 
>> (curr->load_weight*delta_exec)/rq->raw_weighted_load in update_curr().
> 
> good idea, i'll try that.
In the longer term, I'd suggest modifying this idea to use the maximum 
of rq->raw_weighted_load and a running average of rq->raw_weighted_load 
much the same as was done within the load balancer code.  This will tend 
to make scheduling "smoother".  To try the idea out you could (on an SMP 
system) use one of the rq->cpu_load[] metrics as the running average.
Peter
-- 
Peter Williams                                   pwil3058@bigpond.net.au
"Learning, n. The kind of ignorance distinguishing the studious."
  -- Ambrose Bierce
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/