Date: 24 Feb 2003 12:21:44 -0800
From: Rusty Lynch <>
Subject: CPCI stopped building
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/2/24/206

Attempting to turn on cpci support on the latest kernel breaks the build.
The problem is that pci_is_dev_in_use() has been removed, but 
cpci_hotplug_pci.c still calls the non-existant function in 
unconfigure_visit_pci_dev_phase1().
It looks like pci_dev_driver(dev) can be used in replacement (since that is
what driver/pci/hotplug.c is now doing in pci_remove_device_safe(), but 
I haven't taken the time to really understand what is happening.
    --rustyl
Here is the changeset comment:
ChangeSet 1.1002.8.3 2003/02/21 13:44:13 hch@sgi.com
  [PATCH] try_module_get(THIS_MODULE) is bogus
  In most cases the fix is to add an struct module * member to the operations
  vector instead and manipulate the refcounts in the callers context.
  For the ALSA cases it was completly superflous (when will people get it that
  using an exported symbol will make it's module unloadable?..)
drivers/pci/hotplug.c 1.11 2003/02/21 11:43:17 hch@sgi.com
  try_module_get(THIS_MODULE) is bogus
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/