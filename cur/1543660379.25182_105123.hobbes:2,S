Date: Wed, 22 Jan 2003 16:31:46 +0100
From: Thomas Tonino <>
Subject: Re: Problem with Qlogic 2200 and 2.4.20
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/1/22/92

PrzemysÅ‚aw Maciuszko wrote:
> Hello.
> I have a strange problem with 2.4.20 (also 2.4.19) and Qlogic FC 2200.
> 
> The machine runs test news-server, so disk load is high.
> After few minutes of running I get the following errors on console:
> 
> qlogifc0 : no handle slots, this should not happen
> hostdata->queued is 19, in_ptr: 63
> qlogifc0 : no handle slots, this should not happen
> hostdata->queued is 19, in_ptr: 6a
> qlogifc0 : no handle slots, this should not happen
> hostdata->queued is 19, in_ptr: 70
> 
> and so on.
This is a long standing problem. Andrew Patterson gave a patch on the list:
http://groups.google.com/groups?selm=linux.scsi.1019759258.2413.1.camel
%40lvadp.fc.hp.com
Without this patch, 2.4.18 would lock up in a few minutes syncing a software 
raid. With the patch, it has been running multiple megabytes I/O a second for 
months. And yes it can sync software RAIDs too.
The driver seems to be working for some people without the patch, but the 
problem appears so quickly on some systems that it is strange the fix has not 
been incorporated yet. In my case, I tested with ISP2200 cards and a JBOD with 
Cheetah 10k4 and 10k5 drives.
Thomas
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/