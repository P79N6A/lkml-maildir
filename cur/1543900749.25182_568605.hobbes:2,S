Date: Thu, 12 Jul 2007 18:14:27 -0700
From: Sean Hefty <>
Subject: Re: [ofa-general] Further 2.6.23 merge plans...
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/7/12/390

>  - Take a look at Sean's local SA caching patches.  I merged
>    everything else from Sean's tree, but I'm still undecided about
>    these.  I haven't read them carefully yet, but even aside from that
>    I don't have a good feeling about whether there's consensus about
>    this yet.  Any opinions about merging, for or against, would be
>    appreciated here.
Obviously I'm biased here, but we've definitely seen local caching of 
path records (PR) greatly improve performance for large MPI job runs. 
(Our largest jobs wouldn't run without it.)  The development of the 
feature was requested and paid for by the US national labs. 
Infinicon/Silverstorm/QLogic also had this feature in their IB stack for 
scalability reasons as well.  PR caching is done in the stack today by 
IPoIB.
The implementation is hidden under the current kernel ib_sa interface, 
is disabled by default, and automatically fails over to standard PR 
queries if needed.  Removing the cache later should be fairly easy.
But to be fair, it will be difficult to enable both QoS and local PR 
caching.  To me, this would be the strongest reason against using it. 
However, QoS places additional burden on the SA, which will make scaling 
even more challenging.
- Sean
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/