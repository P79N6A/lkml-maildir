Date: Tue, 10 Oct 2000 02:00:01 +0100
From:  richardj_moore@uk ...
Subject: Re: The case for a standard kernel debugger
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/10/9/93

>Hence, yes I can provide an interface from the kernel to log a trace event
>with a variable length buffer, but I don't think that taking away the
statically
>defined trace points is the right thing to do. (I might have gotten this
>completely wrong, though ... My presumption about your suggestion of using
>Dprobes to "drive" LTT, is that you mean that all events should come from
>Dprobes and Drpobes alone. I could be wrong).
>
>So here's what I suggest:
>There's already two event types within the events recognized by LTT which
>had been planned for this type of usage. They are: "New event" and "Custom
>event". The first is used to declare a new event type and the second is
used
>to log all such events. To declare a new event, the caller would call upon
>an event ID creation function providing it with an event size. The
function
>would use the "New event" type to declare a new event in the log and would
>return a unique event ID. Thereafter, the normal tracing function, already
>available through the LTT kernel patch, could be used to log the new
events.
>This could be used by Dprobes to enable dynamically inserted probe points
to
>be logged within a normal trace and, thereafter, be part of trace
analysis.
>Does this fit your needs?
1) No I'm not suggestingf replacing static trace with dynmamic. One needs
standard instrumentation built in. Its a matter of choice how that's
implemented.
2) DProbes is amied at the "when all else fails" scenario and you need to
develop additional tracepoints very quickly and possibly modify them as
debugging proceeds. Of could you could open up the original code and put
additional static tracepoints in, but that's not always desirable.
3) Yes, I think what you are suggesting is what we want. I'll pass this
round the team and get back to you.
Thanks for you interest....
Richard Moore -  RAS Project Lead - Linux Technology Centre (PISC).
http://oss.software.ibm.com/developerworks/opensource/linux
Office: (+44) (0)1962-817072, Mobile: (+44) (0)7768-298183
IBM UK Ltd,  MP135 Galileo Centre, Hursley Park, Winchester, SO21 2JN, UK
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/