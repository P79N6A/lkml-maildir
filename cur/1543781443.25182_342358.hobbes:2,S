Date: 16 Aug 2005 15:15:35 +0200
From: Andi Kleen <>
Subject: Re: [RFC] [PATCH] cache pollution aware __copy_from_user_ll()
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/8/16/99

Arjan van de Ven <arjan@infradead.org> writes:
> 
> not on kernel entry afaik.
> However just save the register on the stack and put it back at the
> end...
You need to do more than that, like disabling lazy FPU mode. 
That is what kernel_fpu_begin/end takes care of. 
However it disables preemption, which especially for bigger
copies will probably make the low latency people unhappy.
Without disabling preemption there is no way to use SSE right now.
Note that there is also an integer NT store in SSE1, however at least
in Athlon K7 it is microcoded and very slow. 
-Andi
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/