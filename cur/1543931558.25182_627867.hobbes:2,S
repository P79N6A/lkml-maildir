Date: Fri, 14 Dec 2007 10:10:30 +1100
From: Benjamin Herrenschmidt <>
Subject: Re: What was the problem with quicklists and x86-64?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/12/13/510

On Thu, 2007-12-13 at 14:36 -0800, Christoph Lameter wrote:
> On Fri, 14 Dec 2007, Benjamin Herrenschmidt wrote:
> 
> > > No this may mean that the problem does not exist on powerpc since it 
> > > seems to be okay to free pages before all processors have flushed the 
> > > TLBs? Or are you deferrring the freeing of the pages via RCU?
> > 
> > I'm deferring the freeing with RCU.
> 
> The deferral works on a page level or for the whole list of pages that 
> have been gathered?
We have a separate batch to store page table pages with an RCU head on
it, we fire it off when it's full or when tlb gather is complete.
Ben.