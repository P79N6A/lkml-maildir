Date: Tue, 12 Jun 2001 21:03:23 -0400
From: Jeff Garzik <>
Subject: Re: Minor "cleanup" patches for 2.4.5-ac kernels
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/6/12/141

Michal Jaegermann wrote:
> --- linux-2.4.5ac/drivers/pci/quirks.c~ Tue Jun 12 16:31:12 2001
> +++ linux-2.4.5ac/drivers/pci/quirks.c  Tue Jun 12 17:13:18 2001
> @@ -18,6 +18,7 @@
>  #include <linux/pci.h>
>  #include <linux/init.h>
>  #include <linux/delay.h>
> +#include <linux/sched.h>
> 
>  #undef DEBUG
> 
> There is no problem if SMP is not configured.
no the better place for this is include/asm-i386/delay.h.  Otherwise you
wind up solving the same problem over and over again in each similar
driver.
I --just-- went through on Alpha, and included linux/sched.h in
include/asm-alpha/delay.h.  Not an hour ago :)  Then Andrea suggested to
simply un-inline udelay, which solved the compile problem in an even
better way.  (we cannot un-inline udelay on x86 I think)
> --- 2.4.5-ac11/include/linux/binfmts.h  Mon Jun  4 14:19:00 2001
> +++ linux/include/linux/binfmts.h       Mon Jun  4 20:24:50 2001
> @@ -32,6 +32,9 @@ struct linux_binprm{
>         unsigned long loader, exec;
>  };
> 
> +/* Forward declaration */
> +struct mm_struct;
> +
I added this one to the MDK kernel compile.  I think it is an 'ac'
thing, I don't get these warnings on vanilla 2.4.[56]-pre.
-- 
Jeff Garzik      | Andre the Giant has a posse.
Building 1024    |
MandrakeSoft     |
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/