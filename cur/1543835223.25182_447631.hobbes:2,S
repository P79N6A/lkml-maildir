Date: Fri, 28 Jul 2006 11:53:51 -0400
From: 	Valdis.Kletnieks@vt ...
Subject: [PATCH] 2.6.18-rc2-mm1 i386 add_memory_region undefined
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/7/28/155

On Thu, 27 Jul 2006 01:56:39 PDT, Andrew Morton said:
> 
ftp://ftp.kernel.org/pub/linux/kernel/people/akpm/patches/2.6/2.6.18-rc2/2.6.18-rc2-mm1/
Building with -Werror-implicit-function-declaration fails:
  CC      arch/i386/pci/mmconfig.o
arch/i386/pci/mmconfig.c: In function 'pci_mmcfg_force':
arch/i386/pci/mmconfig.c:232: error: implicit declaration of function 'add_memory_region'
Problem is a missing #include, patch attached.  Problem was introduced by
add-force-of-use-mmconfig.patch. This is a bug even without the -Werror, as the
implicit declaration doesn't match the real one.
Patch attached.
Signed-Off-By: Valdis Kletnieks <valdis.kletnieks@vt.edu>
--- linux-2.6.18-rc2-mm1/arch/i386/pci/mmconfig.c.broken	2006-07-28 10:21:59.000000000 -0400
+++ linux-2.6.18-rc2-mm1/arch/i386/pci/mmconfig.c	2006-07-28 11:45:30.000000000 -0400
@@ -15,6 +15,7 @@
 #include <linux/dmi.h>
 #include <linux/efi.h>
 #include <asm/e820.h>
+#include <asm/setup.h>
 #include "pci.h"
 
 /* aperture is up to 256MB but BIOS may reserve less */
[unhandled content-type:application/pgp-signature]