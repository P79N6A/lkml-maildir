Date: Tue, 23 May 2006 11:07:00 +1200
From: Sam Vilain <>
Subject: Re: [PATCH] namespaces: uts_ns: make information visible via	/proc/PID/uts directory
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/5/22/282

Alan Cox wrote:
>On Llu, 2006-05-22 at 17:24 +1200, Sam Vilain wrote:
> 
>
>>From: Sam Vilain <sam.vilain@catalyst.net.nz>
>>
>>Export the UTS information to a per-process directory /proc/PID/uts,
>>that has individual nodes for hostname, ostype, etc - similar to
>>those in /proc/sys/kernel
>> 
>>
>
>Can you explain the locking being used here against the name being
>changed at the same moment ?
>
Is this a test?  :-)
Let's see, get_task_pid locks the task struct (so that it doesn't go
away while we're de-referencing the nsproxy and uts_ns etc), and the
kobj references are assumed to be enough to avoid the references
dropping away in the meantime.
I didn't grab uts_sem.  That semaphore could be made per-uts_ns, in
theory.  Whether anyone cares about contention that much is another
question.
I intended this to be exploratory, it wasn't really mergable.  Should
have added an [RFC] tag, sorry about that.
Sam.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/