Date: Wed, 30 Jan 2008 17:45:48 +0100
From: Nicolas Ferre <>
Subject: [PATCH] at91_mci: minor cleanup
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/30/308

From: Marc Pignat <marc.pignat@hevs.ch>
MMC_POWER_ON is a noop, no need to set the power pin again.
Signed-off-by: Marc Pignat <marc.pignat@hevs.ch>
Signed-off-by: Nicolas Ferre <nicolas.ferre@atmel.com>
---
MMC_POWER_OFF/MMC_POWER_UP turn the power OFF/ON, there is nothing to change
when ios->power_mode==MMC_POWER_ON.
Also changed indentation for the switch (CodingStyle), because there is no other
switch statement in this driver.
--- a/drivers/mmc/host/at91_mci.c
+++ b/drivers/mmc/host/at91_mci.c
@@ -658,13 +658,14 @@ static void at91_mci_set_ios(struct mmc_
 	/* maybe switch power to the card */
 	if (host->board->vcc_pin) {
 		switch (ios->power_mode) {
-			case MMC_POWER_OFF:
-				at91_set_gpio_value(host->board->vcc_pin, 0);
-				break;
-			case MMC_POWER_UP:
-			case MMC_POWER_ON:
-				at91_set_gpio_value(host->board->vcc_pin, 1);
-				break;
+		case MMC_POWER_OFF:
+			at91_set_gpio_value(host->board->vcc_pin, 0);
+			break;
+		case MMC_POWER_UP:
+			at91_set_gpio_value(host->board->vcc_pin, 1);
+			break;
+		default:
+			break;
 		}
 	}
 }