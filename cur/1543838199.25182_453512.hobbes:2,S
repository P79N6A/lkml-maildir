Date: Mon, 14 Aug 2006 23:22:02 +1000
From: Keith Owens <>
Subject: Re: md mirror / ext3 / dual core performance strange phenomenon?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/8/14/112

Erik Slagter (on Mon, 14 Aug 2006 15:12:14 +0200) wrote:
>Now, what puzzles me, is that compiling the kernel (2.6.17.7) using
>either "make -j1 ..." or "make -j2 ..." or "make -j3 ..." makes the
>building take about 6.5 minutes, which is really dissatisfying for this
>cpu/harddisks combination. Also, top shows that most of the time both
>core are between 10-40% idle.
>
>BUT... starting from -j4 (and upwards) the compile time suddenly goes to
>3.5 minutes!
Nothing to do with the disks, it is a design flaw in the kernel build
system.  If you want a useful parallel make using -j<n>, set <n> to 3,
4 or 5 higher than the real number of parallel jobs that you want.  The
exact value to add depends on which kernel tree you are building.  See
http://marc.theaimsgroup.com/?l=linux-kernel&m=115553906404695&w=2
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/