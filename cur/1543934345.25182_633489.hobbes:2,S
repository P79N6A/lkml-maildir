Date: Wed, 02 Jan 2008 13:37:14 -0500
From: Bill Davidsen <>
Subject: Re: semi-regular plea for stable device mapping
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/2/164

Jan Engelhardt wrote:
> On Jan 1 2008 10:54, Gene Heskett wrote:
>> BUT!  This defeats a fix I've had in my modprobe.conf for over a year now that 
>> gave the LVM stuff a stable major device # of 238, and now my LVM major is 
>> back to whatever mood the kernel is in, in this particular bootup case to 
>> #253.
>>
>> It may now be stable for a bit at that number because I see that pktcdvd has 
>> been given a stable address of its own, apparently with a major of 10.  That 
>> was the wedgie that fscked things up originally for me.  But what else lurks 
>> in the deep end of this experimental pool, to play piranna with us again when 
>> we least expect it?
> 
> Why exactly would you require a fixed major - not running udev or thelike?
> Use the boot parameter, dm_mod.major=238.
> 
What? And what happens when that gets used for something else? And if 
you say "we'll avoid using that" then you are treating it as a fixed 
value anyway.
>> This drives tar up a wall because it uses this device number as part of the 
>> file comparisons it does, and it thinks everything is therefore new and needs 
>> a full level 0 backup.  This is not at all practical, and requires that 
> 
> I wonder how FreeBSD gets around this, because they've got dynamic numbers
> everywhere.
Did they? I haven't tried using tar in the appropriate ways on BSD to 
see if it behaves in the same way. Of course on a system which doesn't 
change between backups I guess the dynamic number would be the same in 
any case.
-- 
Bill Davidsen <davidsen@tmr.com>
   "We have more to fear from the bungling of the incompetent than from
the machinations of the wicked."  - from Slashdot