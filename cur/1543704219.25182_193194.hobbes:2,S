Date: Fri, 23 Jan 2004 06:35:25 +0000
From:  davej@redhat ...
Subject: logic error in aty128fb
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/1/23/10

Negate the expression not the register seems more sensible?
    Dave
diff -urpN --exclude-from=/home/davej/.exclude bk-linus/drivers/video/aty/aty128fb.c linux-2.5/drivers/video/aty/aty128fb.c
--- bk-linus/drivers/video/aty/aty128fb.c	2003-10-15 05:00:42.000000000 +0100
+++ linux-2.5/drivers/video/aty/aty128fb.c	2004-01-14 07:07:10.000000000 +0000
@@ -2102,7 +2102,7 @@ aty128_set_backlight_enable(int on, int 
 	reg |= LVDS_BL_MOD_EN | LVDS_BLON;
 	if (on && level > BACKLIGHT_OFF) {
 		reg |= LVDS_DIGION;
-		if (!reg & LVDS_ON) {
+		if (!(reg & LVDS_ON)) {
 			reg &= ~LVDS_BLON;
 			aty_st_le32(LVDS_GEN_CNTL, reg);
 			(void)aty_ld_le32(LVDS_GEN_CNTL);
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/