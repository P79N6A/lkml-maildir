Date: Sat, 13 Dec 2008 00:41:37 +0300
From: Cyrill Gorcunov <>
Subject: Re: [RFC] x86: entry_64 - introduce FTRACE_ frame macro
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/12/12/309

[Cyrill Gorcunov - Sat, Dec 13, 2008 at 12:35:38AM +0300]
| 
...
| | Why add assembly condition? We only want this if CONFIG_FUNCTION_TRACER 
| | is enabled, right?  We could combine it with the current #ifndef inside 
| | the CONFIG_FUNCTION_TRACER. But I would make do:
| | 
| | #ifdef __ASSEMBLY__
| | <your stuff>
| | #else
| | < C stuff >
| | #endif
| | 
| | -- Steve
| 
| Steve, here is how it could look like:
| (I liked first proposal more :)
If you meant to put them under CONFIG_FUNCTION_TRACER only it would
lead to more hard to parse by human representation I believe :)
That is why I put __ASSEMBLY__ in that way (I mean only two sections
__ASSEMBLY__ and #else and all original stuff here) Btw there was an
error in ftrace.h. Iirc gas know nothing about (long) so MCOUNT_ADDR
should be under #ifndef actually. But that is not that serious since
we dont use it now in *.S (don't we?).
		- Cyrill -