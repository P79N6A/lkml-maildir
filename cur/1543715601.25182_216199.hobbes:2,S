Date: Sun, 25 Apr 2004 16:26:34 -0500 (CDT)
From: (Bob Tracy)
Subject: Re: [PATCH] sym53c500_cs PCMCIA SCSI driver (round 3 - the charm?)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/4/25/59

Russell King wrote:
> Hmm, so what happens if you're in the middle of a transaction, and
> you receive a CS_EVENT_CARD_RESET.  What happens to the command in
> progress ?
Candidly, I don't know.  A fair question to ask in return is, under
what circumstances might a PCMCIA driver see a CS_EVENT_CARD_RESET?
None of the existing PCMCIA SCSI drivers I saw do anything other than
reset the hardware: evidently the assumption is there's no command in
progress at that point, or we don't care.  The nsp_cs driver toggles a
stop flag in the per-instance data to indicate the host is accepting
I/O: the flag is set to block I/O upon receipt of a suspend, physical
reset, or card removal event.  The card reset code in the nsp_cs driver,
as in mine, is a subset of (fall-through case for) the resume logic.
Given the above, I'm tempted to believe the mid and/or upper driver
layers are handling the "command in progress" issue, but I haven't
delved into that code deeply enough to know.
-- 
-----------------------------------------------------------------------
Bob Tracy                   WTO + WIPO = DMCA? 
http://www.anti-dmca.org
rct@frus.com
-----------------------------------------------------------------------
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/