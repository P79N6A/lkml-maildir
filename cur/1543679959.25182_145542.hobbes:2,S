Date: 06 Jul 2003 00:41:05 +0200
From: Peter Osterlund <>
Subject: Re: Synaptics driver on HP6100 and 2.5.73
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/7/5/108

Peter Osterlund <petero2@telia.com> writes:
> Mike Keehan <mike_keehan@yahoo.com> writes:
> 
> > The touchpad is recognised OK when the kernel boots,
> > and my usb
> > connected mouse works fine.  But I get the following
> > message in
> > the syslog when I try to use the mousepad or any of
> > the buttons :-
> > 
> >     ... kernel: Synaptics driver lost sync at 1st byte
> > 
> > Relevant /var/log/dmesg content:-
> > 
> >  drivers/usb/core/usb.c: registered new driver hid
> >  drivers/usb/input/hid-core.c: v2.0:USB HID core
> > driver
> >  mice: PS/2 mouse device common for all mice
> >  synaptics reset failed
> >  synaptics reset failed
> >  synaptics reset failed
> 
> The logs from your other mail show that the touchpad is still in
> relative mode (using 3 byte packets) instead of absolute mode (using 6
> byte packets.) I don't know why this happens, but ...
OK, the problem is that the touchpad needs a lot of time to wake up
after a reset command. As we found out in private conversation, 3
seconds is barely enough, so I suggest the following patch to fix the
problem:
--- linux/drivers/input/mouse.resume/psmouse-base.c	Sat Jul  5 23:39:14 2003
+++ linux/drivers/input/mouse/psmouse-base.c	Sun Jul  6 00:23:17 2003
@@ -201,7 +201,7 @@
 	psmouse->cmdcnt = receive;
 
 	if (command == PSMOUSE_CMD_RESET_BAT)
-                timeout = 2000000; /* 2 sec */
+                timeout = 4000000; /* 4 sec */
 
 	if (command & 0xff)
 		if (psmouse_sendbyte(psmouse, command & 0xff))
-- 
Peter Osterlund - petero2@telia.com
http://w1.894.telia.com/~u89404340
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/