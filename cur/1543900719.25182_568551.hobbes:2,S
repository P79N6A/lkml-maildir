Date: Thu, 12 Jul 2007 17:41:05 -0400
From: Phil Turmel <>
Subject: Re: Problem recovering a failed RIAD5 array with 4-drives.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/7/12/336

James wrote:
[snip /]
>>On Thu, Jul 12, 2007 at 08:49:15AM -0500, James wrote:
>>>I've tried a few cautions things to bring the array back up with the three 
>>>good drives with no luck. 
>>>
[snip /]
> 
> mdadm --create --verbose /dev/md0 --assume-clean --level=raid5 --raid-devices=4 --spare-devices=0  /dev/sda1 /dev/sdb1 /dev/sdc1 /dev/sdd1
> 
[snip /]
> 
> I should have included more information. When I attempted to --assemble the 
> array I received the following:
> 
> []# mdadm --assemble [--force --run] /dev/md0 /dev/sda1 /dev/sdb1 
> [/dev/sdc1]  /dev/sdd1
> mdadm: failed to RUN_ARRAY /dev/md0: Input/output error
> 
> 
> From what I read I assumed I could use the --assume-clean option with --create 
> to bring the array back at least in some semblance of working order. 
> 
> I'd like to recover as much as possible from the RAID array. I actually have a 
> nice new SATA configuration sitting here waiting to receive the data. This 
> thing failed a day too early. I'm gnashing my teeth over this one. 
> 
> I'd truly appreciate any help/advice.
> 
Hi James,
mdadm allows you to specify "missing" in place of a failed device 
when assembling or creating arrays, like so:
mdadm --assemble /dev/md0 --run \
	/dev/sda1 /dev/sdb1 missing /dev/sdd1
I don't know if using --create has already trashed your array, 
but this is worth a try.  You may also want to try --force with 
the above.
HTH,
Phil
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/