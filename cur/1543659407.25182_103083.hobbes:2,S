Date: Mon, 13 Jan 2003 23:19:43 +0100
From: Sam Ravnborg <>
Subject: Re: [RFC] Consolidate vmlinux.lds.S files
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/1/13/279

On Mon, Jan 13, 2003 at 01:13:28PM -0600, Kai Germaschewski wrote:
> On Mon, 13 Jan 2003, Sam Ravnborg wrote:
> 
> > The purpose was to define common stuff in a single place.
> > Ask Rusty Russell if it is fun to add the same section to > 50
> > .lds files.
> > 
> > Based on the feedback I will try to come up with a lighter proposal,
> > that does not hurt readability.
> > I still want the common stuff separated away.
> 
> I second this, though I also agree that your first cut was hiding away 
> stuff more than necessary.
What I posted was to get feedback, not what I had in mind as first step.
I agree to take small steps - but wanted to find out the direction.
> I would suggest an approach like the following, of course showing only a 
> first simple step.
But you do not deal with different alingment of the sections.
I have not yet fully understood all the requirements, but wanted to
keep the original ALIGN settings.
In the patch you posted some architectures use ALIGN(4) {cris},
other nothing, but most of them ALIGN(16).
Is it OK to force them all to ALIGN(16) then?
> A series of steps like this should allow for a serious 
> reduction in size of arch/*/vmlinux.lds.S already, while being obviously 
> correct and allowing archs to do their own special thing if necessary (in 
> particular, IA64 seems to differ from all the other archs).
My main objective was that adding new stuff, like __gpl_ksyms could
be done in one place only.
Or .gnu.linkonce.vermagic, or whatever will be used for that.
Thats why I collected so much in INIT_SECTION_CMD(...).
I will come back with something during the week - as time permits.
	Sam
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/