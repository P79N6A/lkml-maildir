Date: Thu, 20 Apr 2006 10:04:57 -0700
From: "Siddha, Suresh B" <>
Subject: Re: [patch] smpnice: don't consider sched groups which are lightly loaded for balancing
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/4/20/206

On Thu, Apr 20, 2006 at 03:19:52PM +1000, Peter Williams wrote:
> > 
> > This patch doesn't fix this issue for example:
> > 4-way simple MP system. P0 containing two high priority tasks, P1 containing
> > one high priority and two normal priority tasks, one high priotity task
> > each on P2, P3. Current load balance doesn't detect/fix the
> > imbalance by moving one of the normal priority task running on P1 to P2 or P3.
> 
> Is this always the case or just a possibility?  Please describe the hole 
> it slips through (and please do that every time you provide a scenario).
I thought a scenario is enough to show the hole :) Anyhow, I brought this 
issue before also..
http://www.ussg.iu.edu/hypermail/linux/kernel/0604.0/0517.html
Load balance on P2 or P3 will always show P0 as max load but it will not
be able to move any load from P0. As
imbalance will be always < busiest_load_per_task and
max_load - this_load will be < imbn(2) * busiest_load_per_task...
and pwr_move will be <= pwr_now...
Basically sched groups with highest priority tasks can mask the 
imbalance between the other sched groups with in the same domain. 
thanks,
suresh
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/