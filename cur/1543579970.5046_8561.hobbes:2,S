Date: Sun, 28 Jan 2001 02:26:32 -0500
From: "paradox3" <>
Subject: Poor SCSI drive performance on SMP machine, 2.2.16
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/1/28/35

I have an SMP machine (dual PII 400s) running 2.2.16 with one 10,000 RPM IBM
10 GB SCSI drive
(AIC 7890 on motherboard, using aic7xxx.o), and four various IDE drives. The
SCSI drive
performs the worst. In tests of writing 100 MB and sync'ing, one of my IDE
drives takes 31 seconds. The SCSI drive (while doing nothing else) took
2 minutes, 10 seconds. This is extremely noticable in file transfers that
completely
monopolize the SCSI drive, and are much slower than when involving the IDE
drives.
After a large data operation on the SCSI drive, the system will hang for
several minutes.
Anyone know what could be causing this? Thanks.
Attached are some data to help.
Thanks,
    Para-dox (paradox3@maine.rr.com)
           CPU0       CPU1       
  0:   43661720   59171710    IO-APIC-edge  timer
  1:     233992     282694    IO-APIC-edge  keyboard
  2:          0          0          XT-PIC  cascade
  8:          1          0    IO-APIC-edge  rtc
 13:          1          0          XT-PIC  fpu
 14:         20         10    IO-APIC-edge  ide0
 15:   46455293   50354306    IO-APIC-edge  ide1
 16:   14508949   14462778   IO-APIC-level  eth0
 17:    3939554    4293901   IO-APIC-level  eth1
 18:     750747     761816   IO-APIC-level  aic7xxx
NMI:          0
ERR:          0
PCI devices found:
  Bus  0, device   0, function  0:
    Host bridge: Intel 440BX - 82443BX Host (rev 2).
      Medium devsel.  Master Capable.  Latency=64.  
      Prefetchable 32 bit memory at 0xe8000000 [0xe8000008].
  Bus  0, device   1, function  0:
    PCI bridge: Intel 440BX - 82443BX AGP (rev 2).
      Medium devsel.  Master Capable.  Latency=64.  Min Gnt=136.
  Bus  0, device   7, function  0:
    ISA bridge: Intel 82371AB PIIX4 ISA (rev 2).
      Medium devsel.  Fast back-to-back capable.  Master Capable.  No bursts.  
  Bus  0, device   7, function  1:
    IDE interface: Intel 82371AB PIIX4 IDE (rev 1).
      Medium devsel.  Fast back-to-back capable.  Master Capable.  Latency=64.  
      I/O at 0xf000 [0xf001].
  Bus  0, device   7, function  2:
    USB Controller: Intel 82371AB PIIX4 USB (rev 1).
      Medium devsel.  Fast back-to-back capable.  IRQ 10.  Master Capable.  Latency=64.  
      I/O at 0xe000 [0xe001].
  Bus  0, device   7, function  3:
    Bridge: Intel 82371AB PIIX4 ACPI (rev 2).
      Medium devsel.  Fast back-to-back capable.  
  Bus  0, device   8, function  0:
    Ethernet controller: Intel 82557 (rev 5).
      Medium devsel.  Fast back-to-back capable.  IRQ 16.  Master Capable.  Latency=64.  Min Gnt=8.Max Lat=56.
      Prefetchable 32 bit memory at 0xef101000 [0xef101008].
      I/O at 0xe400 [0xe401].
      Non-prefetchable 32 bit memory at 0xef000000 [0xef000000].
  Bus  0, device   9, function  0:
    Ethernet controller: Winbond NE2000-PCI (rev 0).
      Medium devsel.  Fast back-to-back capable.  IRQ 17.  
      I/O at 0xe800 [0xe801].
  Bus  0, device  12, function  0:
    SCSI storage controller: Adaptec AIC-7890/1 (rev 0).
      Medium devsel.  Fast back-to-back capable.  BIST capable.  IRQ 18.  Master Capable.  Latency=64.  Min Gnt=39.Max Lat=25.
      I/O at 0xec00 [0xec01].
      Non-prefetchable 64 bit memory at 0xef100000 [0xef100004].
  Bus  1, device   0, function  0:
    VGA compatible controller: S3 Inc. ViRGE/GX2 (rev 6).
      Medium devsel.  IRQ 16.  Master Capable.  Latency=64.  Min Gnt=4.Max Lat=255.
      Non-prefetchable 32 bit memory at 0xe0000000 [0xe0000000].