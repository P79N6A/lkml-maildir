Date: Mon, 30 Jul 2007 15:59:39 -0700
From: Andrew Morton <>
Subject: Re: ttyS1: LSR safety check engaged! - misidentification?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/7/30/414

On Sun, 29 Jul 2007 18:26:58 +0300
"Christian P. Schmidt" <charlie@digadd.de> wrote:
> Hi all,
> 
> Ever since Kernel 2.6.21(rc) or so I'm plagued with this message,
> disabling my serial ports that have been working perfectly from 2.6.14
> till that day (and are still doing so, given that I continuously remove
> the code from the source).
> Actually I cannot blame the code, but it seems that on both of my
> laptops the LSR is actually not readable. So, is there any plan to
> remove that piece of code again, or at least change it so it can be
> disabled conditionally?
> 
afaict this code:
	/*
	 * At this point, there's no way the LSR could still be 0xff;
	 * if it is, then bail out, because there's likely no UART
	 * here.
	 */
	if (!(up->port.flags & UPF_BUGGY_UART) &&
	    (serial_inp(up, UART_LSR) == 0xff)) {
		printk("ttyS%d: LSR safety check engaged!\n", up->port.line);
		return -ENODEV;
	}
is unchanged since 2.6.1, so I'm unsure what change you're proposing here?
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/