Date: Fri, 10 Aug 2007 10:14:56 -0500
From: <>
Subject: RE: EHCI Regression in 2.6.23-rc2
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/8/10/220

Jiri Kosina wrote:
> On Fri, 10 Aug 2007, Daniel Exner wrote:
> 
>> After some serious hangs with 2.6.23-rc2 I did some bisects and this
>> was the result:
>> 196705c9bbc03540429b0f7cf9ee35c2f928a534 is first bad commit commit
>> 196705c9bbc03540429b0f7cf9ee35c2f928a534
>> Author: Stuart_Hayes@Dell.com <Stuart_Hayes@Dell.com>
>> Date:   Thu May 3 08:58:49 2007 -0700
> 
> I guess that the patch attached to bug 8535 in kernel.org bugzilla --
> 
http://bugzilla.kernel.org/attachment.cgi?id=12228&action=view
 --
> solves your issues, right?  
> 
> Stuart, did you submit this fix for upstream already please?
Yes... 
http://marc.info/?l=linux-usb-devel&m=118598561010046&w=2
However, I have not tested this with a VIA EHCI controller (though it's
been tested with Intel, Broadcom, and nVidia).  This patch uses the
"inactivate" bit in the QH, which wasn't previously used by the linux
kernel, and I found that the different vendors of EHCI controllers
(Intel, Broadcom, nVidia) all handle this a little differently.  There's
probably something about the way VIA controllers respond to seeing this
bit set that is breaking things.
I'll try to get my hands on a VIA EHCI controller so I can look at
this... if you happen to know of an add-in card that has one of these,
please let me know!  It would be a lot easier for me to debug this
myself here than to try to get someone else to run test kernels for
me...
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/