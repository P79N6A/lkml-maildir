Date: Mon, 20 Mar 2006 16:22:51 -0300
From: "Matheus Izvekov" <>
Subject: Re: Who uses the 'nodev' flag in /proc/filesystems ???
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/3/20/390

On 3/20/06, Jeff Dike <jdike@addtoit.com> wrote:
> On Mon, Mar 20, 2006 at 01:17:59PM -0300, Matheus Izvekov wrote:
> > If a filesystem is nodev, then what would you fsck? Am i missing something?
>
> There's a UML filesystem for which the nodev-implies-no-fsck behavior
> is inconvenient.  It stores its files as files on the host, where the
> file metadata is stored separately from the file data.  If the two
> fall out of sync after a crash, we need to fsck it.  In this case,
> fsck would do a hostfs mount of the data and metadata (where the files
> are available as they exist on the host) and fix things up.
>
> So, in this case, the thing being fscked is a directory hierarchy on
> the host.
>
>                                 Jeff
>
I see, i didnt know about this. But then pam_mount would need to do
special treatment for this. I imagine it has been only coded to work
in the case where there is a device to pass to fsck as a parameter.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/