Date: Mon, 8 Jan 2007 10:14:02 +1100
From: David Chinner <>
Subject: Re: xfslogd-spinlock bug?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/1/7/202

On Wed, Dec 27, 2006 at 01:58:06PM +0100, Haar János wrote:
> Hello,
> 
> ----- Original Message ----- 
> From: "David Chinner" <dgc@sgi.com>
> To: "David Chinner" <dgc@sgi.com>
> Cc: "Haar János" <djani22@netcenter.hu>; <linux-xfs@oss.sgi.com>;
> <linux-kernel@vger.kernel.org>
> Sent: Tuesday, December 19, 2006 5:47 AM
> Subject: Re: xfslogd-spinlock bug?
> 
> 
> > On Tue, Dec 19, 2006 at 01:52:29PM +1100, David Chinner wrote:
> >
> > The filesystem was being shutdown so xfs_inode_item_destroy() just
> > frees the inode log item without removing it from the AIL. I'll fix that,
> > and see if i have any luck....
> >
> > So I'd still try that patch i sent in the previous email...
> 
> I still using the patch, but didnt shows any messages at this point.
> 
> I'v got 3 crash/reboot, but 2 causes nbd disconneted, and this one:
> 
> Dec 27 13:41:29 dy-base BUG: warning at
> kernel/mutex.c:220/__mutex_unlock_common_slowpath()
> Dec 27 13:41:29 dy-base Unable to handle kernel paging request at
> 0000000066604480 RIP:
> Dec 27 13:41:29 dy-base  [<ffffffff80222c64>] resched_task+0x12/0x64
> Dec 27 13:41:29 dy-base PGD 115246067 PUD 0
> Dec 27 13:41:29 dy-base Oops: 0000 [1] SMP
> Dec 27 13:41:29 dy-base CPU 1
> Dec 27 13:41:29 dy-base Modules linked in: nbd rd netconsole e1000 video
> Dec 27 13:41:29 dy-base Pid: 4069, comm: httpd Not tainted 2.6.19 #3
> Dec 27 13:41:29 dy-base RIP: 0010:[<ffffffff80222c64>]  [<ffffffff80222c64>]
> resched_task+0x12/0x64
> Dec 27 13:41:29 dy-base RSP: 0018:ffff810105c01b78  EFLAGS: 00010083
> Dec 27 13:41:29 dy-base RAX: ffffffff807d5800 RBX: 00001749fd97c214 RCX:
Different corruption in RBX here. Looks like semi-random garbage there.
I wonder - what's the mac and ip address(es) of your machine and nbd
servers?
(i.e. I suspect this is a nbd problem, not an XFS problem)
Cheers,
Dave.
-- 
Dave Chinner
Principal Engineer
SGI Australian Software Group
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/