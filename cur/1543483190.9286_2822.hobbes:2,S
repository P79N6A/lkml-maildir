Date: Sat, 30 Jan 1999 10:43:51 +0000 (GMT)
From: Tim Waugh <>
Subject: Re: runaway SCSI eh thread
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/1/30/22

On Fri, 29 Jan 1999 grant@torque.net wrote:
> Are there any known issues with semaphores that explain this ?  I suppose
> it is possible that I am stomping on the eh_wait semaphore somehow, but
> that seems an unlikely explanation.
Yes -- they are recursive now.  That means that once down() returns zero
for you, it will return with zero immediately on subsequent calls because
you 'own' the semaphore.
I've said before, and I'll say it again, that this doesn't make any sense
for semaphores, even though it might be appropriate for a mutex.
This change also broke my IEEE1284 code for parport, which I'm maintaining
as a patch outside of the main kernel sources.
For my code I've worked around the problem by using wait_queues (suggested
by Ingo), but that doesn't make recursive semaphores make any more sense.
IMHO, of course.
Tim.
*/
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/