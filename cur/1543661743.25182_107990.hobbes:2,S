Date: Wed, 5 Feb 2003 22:39:19 +0100
From: Pavel Machek <>
Subject: Re: Switch APIC to driver model (and make S3 sleep with APIC on)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/2/7/32

Hi!
> > Unfortunately my systems seems to miss bfd.h, required by libutil++.
> 
> The debian package is apparently called binutils-dev
Thanx. oprofile now seems to work for me.
> > > I haven't seen where you added these checks. They did not exist before:
> > > oprofile took responsibility for the NMI/perfctr handling off the NMI
> > > watchdog entirely, then handed it back when oprofile finished.
> > 
> > Ouch, I did not see that code. It seems not to be in nmi_int.c; where
> > is that?
> 
> oprofile saves the perfctr config when it starts in nmi_int.c, then
> calls the set_nmi_pm_callback. Then the suspend/resume calls oprofile's,
> and we assume we have unique access to controlling the generated NMIs
> (ie it becomes oprofile's job to ensure no NMIs are generated by the
> perfctrs whilst suspended).
I can see set_nmi_pm_callback() in nmi_setup(), but can not see where
nmi.c's pm_callback is restored in nmi_shutdown(). Perhaps that's a
bug?
> It's pretty ugly, so a correct cleanup would be appreciated.
> 
> I suppose this is quite an unusual case for the PM model ?
Yes, it is pretty unusual.
								Pavel
-- 
Worst form of spam? Adding advertisment signatures ala sourceforge.net.
What goes next? Inserting advertisment *into* email?
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/