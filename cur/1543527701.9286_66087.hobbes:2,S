Date: Sun, 27 Feb 2000 18:11:38 +0100 (CET)
From: Andrea Arcangeli <>
Subject: Re: [PATCH] proposed scheduler enhancements and fixes
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/2/27/109

On Sun, 27 Feb 2000, Linus Torvalds wrote:
>It is not really single-threaded. In fact, in theory it could use 2 CPU*s
Ok. I was thinking with a pipe buffer to 1 byte but it's PAGE_SIZE large
instead of course ;).
So my smp scheduler changes are probably the culprit for the lat_ctx
numbers.
Applying this patch:
	
ftp://ftp
.*.kernel.org/pub/linux/kernel/people/andrea/kernels/v2.3/2.3.48pre1aa1/smp-sched-2.gz
on top of 2.3.48 and this second below patch on the top of the previos
patch:
--- sched-2/kernel/sched.c.~1~	Sun Feb 27 18:00:58 2000
+++ sched-2/kernel/sched.c	Sun Feb 27 18:07:28 2000
@@ -232,7 +232,7 @@
 	 * only if it's RT or if it's iteractive and the preferred
 	 * cpu won't reschedule shortly.
 	 */
-	if ((p->avg_slice < cacheflush_time && cpu_curr(best_cpu)->avg_slice > cacheflush_time) ||
+	if (p->avg_slice < cacheflush_time ||
 	    ((p->policy & ~SCHED_YIELD) != SCHED_OTHER))
 	{
 		int weight, best_weight = 0;
is going to allow interactive tasks to preemt heavily all other tasks (if
that doesn't help enlarging cacheflush_time should at least do the trick).  
I'll test this ASAP. Thanks.
Andrea
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/