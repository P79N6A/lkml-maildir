Date: Tue, 28 Aug 2001 13:45:45 +0200
From: Jens Axboe <>
Subject: Re: [patch] zero-bounce block highmem I/O, #13
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/8/28/48

On Tue, Aug 28 2001, Christoph Rohland wrote:
> Hi Jens,
> 
> On Tue, 28 Aug 2001, Jens Axboe wrote:
> > On Tue, Aug 28 2001, Christoph Rohland wrote:
> >> Hi Jens,
> >> 
> >> I tested both #11 and #13 on my 8GB machine with sym53c8xx. The
> >> initialization of a SAP DB database takes 20 minutes with 2.4.9 and
> >> with 2.4.9+b13 it took nearly 2.5 hours :-(
> > 
> > DaveM hinted that it's probably the bounce test failing, so it's
> > bouncing all the time. That would explain the much worse
> > performance.  Could you try with this incremental patch on top of
> > b13 for 2.4.9? I still want to see the boot detection info, btw.
> 
> Apparently it did not help. See attachments: vmstat was 'vmstat
> 5'. The b13 output is only the end. The b13-1 is still running but the
> blockout rate is again low. So I do not wait another 2 hours...
Nope fine, no need to wait :-)
The -2 patch I sent should fix it, performance looks good here (just a
5min test run to verify).
What happened was that we would fall back to single segment requests all
the time. A real performance killer for SCSI.
-- 
Jens Axboe
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/