Date: Sat, 06 Feb 1999 19:00:06 -0500 (EST)
From: Jim Bauer <>
Subject: PATCH: removal of obsolete config option (CONFIG_IP_NOSR)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/2/6/101

This patch, relative to 2.2.1, removes that last
traces of CONFIG_IP_NOSR.
Sometime between 2.0.x and 2.2.x the config option
CONFIG_IP_NOSR was replaced by a sysctl.  i.e.
/proc/sys/net/ipv4/conf/*/accept_source_route.
Although it is no longer used, the config option
istself still exists.  This could be rather confusing
to some people (like me).
Jim Bauer, jfbauer@home.com
diff -u --recursive --new-file linux-2.2.1/Documentation/Changes linux-2.2.1-jfb
/Documentation/Changes
--- linux-2.2.1/Documentation/Changes	Tue Jan 19 12:48:01 1999
+++ linux-2.2.1-jfb/Documentation/Changes	Sat Feb  6 18:06:29 1999
@@ -250,6 +250,11 @@
    The ISDN code in the stock 2.0 kernel may not work for you.  If it
 doesn't, look in 
ftp://ftp.suse.com/pub/isdn4linux
 for updated versions.
 
+   In 2.0.x the kernel could be configured to drop source routed IP
+packets via a compile time configuration option.  In 2.2.x, this has
+been replaced by a sysctl.  See Documentation/networking/ip-sysctl.txt
+for more information.
+
 Memory
 ======
 
diff -u --recursive --new-file linux-2.2.1/Documentation/Configure.help linux-2.
2.1-jfb/Documentation/Configure.help
--- linux-2.2.1/Documentation/Configure.help	Wed Jan 20 14:05:32 1999
+++ linux-2.2.1-jfb/Documentation/Configure.help	Sat Feb  6 18:06:36 1999
@@ -2709,20 +2709,6 @@
   enabled. Those programs that would benefit from disabling this
   facility can do it on a per connection basis themselves.
 
-IP: Drop source routed frames
-CONFIG_IP_NOSR
-  Usually, the originator of an IP frame (packet) specifies only the
-  destination, and the hosts along the way do the routing, i.e. they
-  decide how to forward the frame. However, there is a feature of the
-  IP protocol that allows to specify the full route for a given frame
-  already at its origin. A frame with such a fully specified route is
-  called "source routed". The question now is whether we should honour
-  these route requests when such frames arrive, or if we should drop
-  all those frames instead. Honouring them can introduce security
-  problems (and is rarely a useful feature), and hence it is
-  recommended that you say Y here unless you really know what you're
-  doing.
-
 IP: Allow large windows (not recommended if <16 MB of memory)
 CONFIG_SKB_LARGE
   On high speed, long distance networks the performance limit on
diff -u --recursive --new-file linux-2.2.1/arch/alpha/defconfig linux-2.2.1-jfb/
arch/alpha/defconfig
--- linux-2.2.1/arch/alpha/defconfig	Wed Dec 23 10:34:11 1998
+++ linux-2.2.1-jfb/arch/alpha/defconfig	Sat Feb  6 17:55:16 1999
@@ -108,7 +108,6 @@
 # (it is safe to leave these untouched)
 #
 # CONFIG_INET_RARP is not set
-CONFIG_IP_NOSR=y
 CONFIG_SKB_LARGE=y
 
 #
diff -u --recursive --new-file linux-2.2.1/arch/arm/defconfig linux-2.2.1-jfb/ar
ch/arm/defconfig
--- linux-2.2.1/arch/arm/defconfig	Wed Aug  5 02:42:22 1998
+++ linux-2.2.1-jfb/arch/arm/defconfig	Sat Feb  6 17:56:25 1999
@@ -99,7 +99,6 @@
 # (it is safe to leave these untouched)
 #
 # CONFIG_INET_RARP is not set
-CONFIG_IP_NOSR=y
 # CONFIG_SKB_LARGE is not set
 # CONFIG_IPV6 is not set
 
diff -u --recursive --new-file linux-2.2.1/arch/i386/defconfig linux-2.2.1-jfb/a
rch/i386/defconfig
--- linux-2.2.1/arch/i386/defconfig	Wed Jan 20 14:33:56 1999
+++ linux-2.2.1-jfb/arch/i386/defconfig	Sat Feb  6 17:55:12 1999
@@ -121,7 +121,6 @@
 # (it is safe to leave these untouched)
 #
 # CONFIG_INET_RARP is not set
-CONFIG_IP_NOSR=y
 CONFIG_SKB_LARGE=y
 
 #
diff -u --recursive --new-file linux-2.2.1/arch/m68k/defconfig linux-2.2.1-jfb/a
rch/m68k/defconfig
--- linux-2.2.1/arch/m68k/defconfig	Tue Jan 19 13:58:26 1999
+++ linux-2.2.1-jfb/arch/m68k/defconfig	Sat Feb  6 17:56:17 1999
@@ -95,7 +95,6 @@
 # (it is safe to leave these untouched)
 #
 # CONFIG_INET_RARP is not set
-CONFIG_IP_NOSR=y
 # CONFIG_SKB_LARGE is not set
 # CONFIG_IPV6 is not set
 
diff -u --recursive --new-file linux-2.2.1/arch/mips/defconfig linux-2.2.1-jfb/a
rch/mips/defconfig
--- linux-2.2.1/arch/mips/defconfig	Tue Oct 20 16:52:54 1998
+++ linux-2.2.1-jfb/arch/mips/defconfig	Sat Feb  6 17:55:38 1999
@@ -107,7 +107,6 @@
 # (it is safe to leave these untouched)
 #
 # CONFIG_INET_RARP is not set
-CONFIG_IP_NOSR=y
 # CONFIG_SKB_LARGE is not set
 
 #
diff -u --recursive --new-file linux-2.2.1/arch/ppc/apus_defconfig linux-2.2.1-j
fb/arch/ppc/apus_defconfig
--- linux-2.2.1/arch/ppc/apus_defconfig	Wed Dec 23 10:34:11 1998
+++ linux-2.2.1-jfb/arch/ppc/apus_defconfig	Sat Feb  6 17:56:02 1999
@@ -118,7 +118,6 @@
 # (it is safe to leave these untouched)
 #
 CONFIG_INET_RARP=y
-CONFIG_IP_NOSR=y
 CONFIG_SKB_LARGE=y
 # CONFIG_IPV6 is not set
 
diff -u --recursive --new-file linux-2.2.1/arch/ppc/chrp_defconfig linux-2.2.1-j
fb/arch/ppc/chrp_defconfig
--- linux-2.2.1/arch/ppc/chrp_defconfig	Wed Dec 23 10:34:11 1998
+++ linux-2.2.1-jfb/arch/ppc/chrp_defconfig	Sat Feb  6 17:55:53 1999
@@ -99,7 +99,6 @@
 CONFIG_IP_ALIAS=y
 # CONFIG_SYN_COOKIES is not set
 CONFIG_INET_RARP=y
-CONFIG_IP_NOSR=y
 CONFIG_SKB_LARGE=y
 # CONFIG_IPV6 is not set
 # CONFIG_IPX is not set
diff -u --recursive --new-file linux-2.2.1/arch/ppc/common_defconfig linux-2.2.1
-jfb/arch/ppc/common_defconfig
--- linux-2.2.1/arch/ppc/common_defconfig	Thu Jan  7 15:06:57 1999
+++ linux-2.2.1-jfb/arch/ppc/common_defconfig	Sat Feb  6 17:56:06 1999
@@ -100,7 +100,6 @@
 # CONFIG_IP_ALIAS is not set
 CONFIG_SYN_COOKIES=y
 # CONFIG_INET_RARP is not set
-# CONFIG_IP_NOSR is not set
 CONFIG_SKB_LARGE=y
 # CONFIG_IPV6 is not set
 # CONFIG_IPX is not set
diff -u --recursive --new-file linux-2.2.1/arch/ppc/defconfig linux-2.2.1-jfb/ar
ch/ppc/defconfig
--- linux-2.2.1/arch/ppc/defconfig	Mon Jan  4 18:32:42 1999
+++ linux-2.2.1-jfb/arch/ppc/defconfig	Sat Feb  6 17:55:44 1999
@@ -120,7 +120,6 @@
 # (it is safe to leave these untouched)
 #
 CONFIG_INET_RARP=y
-CONFIG_IP_NOSR=y
 CONFIG_SKB_LARGE=y
 # CONFIG_IPV6 is not set
 
diff -u --recursive --new-file linux-2.2.1/arch/ppc/mbx_defconfig linux-2.2.1-jf
b/arch/ppc/mbx_defconfig
--- linux-2.2.1/arch/ppc/mbx_defconfig	Wed Dec 23 10:34:11 1998
+++ linux-2.2.1-jfb/arch/ppc/mbx_defconfig	Sat Feb  6 17:56:12 1999
@@ -90,7 +90,6 @@
 # CONFIG_IP_ALIAS is not set
 # CONFIG_SYN_COOKIES is not set
 # CONFIG_INET_RARP is not set
-CONFIG_IP_NOSR=y
 # CONFIG_SKB_LARGE is not set
 # CONFIG_IPV6 is not set
 # CONFIG_IPX is not set
diff -u --recursive --new-file linux-2.2.1/arch/ppc/pmac_defconfig linux-2.2.1-j
fb/arch/ppc/pmac_defconfig
--- linux-2.2.1/arch/ppc/pmac_defconfig	Mon Jan  4 18:32:42 1999
+++ linux-2.2.1-jfb/arch/ppc/pmac_defconfig	Sat Feb  6 17:55:57 1999
@@ -120,7 +120,6 @@
 # (it is safe to leave these untouched)
 #
 CONFIG_INET_RARP=y
-CONFIG_IP_NOSR=y
 CONFIG_SKB_LARGE=y
 # CONFIG_IPV6 is not set
 
diff -u --recursive --new-file linux-2.2.1/arch/ppc/prep_defconfig linux-2.2.1-j
fb/arch/ppc/prep_defconfig
--- linux-2.2.1/arch/ppc/prep_defconfig	Wed Dec 23 10:34:11 1998
+++ linux-2.2.1-jfb/arch/ppc/prep_defconfig	Sat Feb  6 17:55:49 1999
@@ -97,7 +97,6 @@
 # CONFIG_IP_ALIAS is not set
 CONFIG_SYN_COOKIES=y
 # CONFIG_INET_RARP is not set
-# CONFIG_IP_NOSR is not set
 CONFIG_SKB_LARGE=y
 # CONFIG_IPV6 is not set
 # CONFIG_IPX is not set
diff -u --recursive --new-file linux-2.2.1/arch/sparc/defconfig linux-2.2.1-jfb/
arch/sparc/defconfig
--- linux-2.2.1/arch/sparc/defconfig	Fri Dec 18 17:01:48 1998
+++ linux-2.2.1-jfb/arch/sparc/defconfig	Sat Feb  6 17:55:34 1999
@@ -118,7 +118,6 @@
 # (it is safe to leave these untouched)
 #
 CONFIG_INET_RARP=m
-CONFIG_IP_NOSR=y
 CONFIG_SKB_LARGE=y
 CONFIG_IPV6=m
 # CONFIG_IPV6_EUI64 is not set
diff -u --recursive --new-file linux-2.2.1/arch/sparc64/defconfig linux-2.2.1-jf
b/arch/sparc64/defconfig
--- linux-2.2.1/arch/sparc64/defconfig	Fri Dec 18 17:01:48 1998
+++ linux-2.2.1-jfb/arch/sparc64/defconfig	Sat Feb  6 17:56:21 1999
@@ -145,7 +145,6 @@
 # (it is safe to leave these untouched)
 #
 CONFIG_INET_RARP=m
-CONFIG_IP_NOSR=y
 CONFIG_SKB_LARGE=y
 CONFIG_IPV6=m
 # CONFIG_IPV6_EUI64 is not set
diff -u --recursive --new-file linux-2.2.1/net/ipv4/Config.in linux-2.2.1-jfb/ne
t/ipv4/Config.in
--- linux-2.2.1/net/ipv4/Config.in	Sat Jan  9 13:01:56 1999
+++ linux-2.2.1-jfb/net/ipv4/Config.in	Sat Feb  6 17:54:18 1999
@@ -78,7 +78,6 @@
 tristate 'IP: Reverse ARP' CONFIG_INET_RARP
 #bool 'IP: Path MTU Discovery (normally enabled)' CONFIG_PATH_MTU_DISCOVERY
 #bool 'IP: Disable NAGLE algorithm (normally enabled)' CONFIG_TCP_NAGLE_OFF
-bool 'IP: Drop source routed frames' CONFIG_IP_NOSR
 bool 'IP: Allow large windows (not recommended if <16Mb of memory)' CONFIG_SKB_
LARGE
 #if [ "$CONFIG_EXPERIMENTAL" = "y" ]; then 
 #bool 'IP: support experimental checksum copy to user for UDP'  CONFIG_UDP_DELA
Y_CSUM