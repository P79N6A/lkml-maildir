Date: Mon, 24 Sep 2007 04:13:19 -0400
From: 	Valdis.Kletnieks@vt ...
Subject: Re: [PATCH] Uninline kcalloc()
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/9/24/33

On Mon, 24 Sep 2007 11:44:35 +0400, Alexey Dobriyan said:
> Interesting. Here is output from kernel with patch applied and leak
> plugged into proc_dointvec() (I checked twice):
> 
>         $ grep kcalloc /proc/slab_allocators
>         $ grep proc_dointvec /proc/slab_allocators
>         size-64: 19 proc_dointvec+0x48/0xa0
Argh, went to "cancel" that previous msg and retry when I realized you meant it was
with *your* patch installed, managed to send it anyhow..
I wonder if the only reason it's working for you is because gcc is doing
some tail-recursion magic on the kcalloc() call (which calls to __kmalloc),
which just happens to make it work, and if the tail-recursion wasn't happening
it would be busticated.
[unhandled content-type:application/pgp-signature]