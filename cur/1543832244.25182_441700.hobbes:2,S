Date: Fri, 7 Jul 2006 23:09:22 +0200
From: "J.A. Magall√≥n" <>
Subject: Re: 2.6.17-mm6
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/7/7/295

On Fri, 07 Jul 2006 16:37:44 -0400, Jeff Garzik <jeff@garzik.org> wrote:
> Alan Cox wrote:
> > Ar Gwe, 2006-07-07 am 16:14 -0400, ysgrifennodd Jeff Garzik:
> >> I'm a bit surprised to see pata_sis and pata_via:  are you certain there 
> >> is not confusion based on the fact that newer SiS, ULi and VIA 
> >> controllers provide both SATA and PATA on the same controller?
> > 
> > Hard to be sure but it looks like some vendors briefly used marvell
> > bridges of some form with a few generic PATA chipsets.
> 
> Yep.  The sata_xxx should cover most of the Marvell-SATA-bridge + PATA 
> chip controllers already.
> 
> Pretty much everybody except Silicon Image used the Marvell bridge for 
> their first generation SATA.
> 
Dumb view from outside the ATA world: why dont assume all controllers
can do both SATA and PATA, require some {p,s}ata_init(),
{p,s}ata_enumerate_drives() and so on, and provide no-ops as default
for them ? So SATA only can override sata_ ones, same for PATA and
the weird (really ICH5 is so strange ?) ones override both.
So you can decide later about doing
for each controller
	pata_init
	sata_init
or
for each controller
	sata_init
	pata_init
or
for each controller
	sata_init
for each controller
	pata_init
Just an idea. Good designed inheritance is good ;).
AH, and all the drivers could be named as 'ata_xxxx'. Nice.
--
J.A. Magallon <jamagallon()ono!com>     \               Software is like sex:
                                         \         It's better when it's free
Mandriva Linux release 2007.0 (Cooker) for i586
Linux 2.6.17-jam01 (gcc 4.1.1 20060518 (prerelease)) #2 SMP PREEMPT Wed
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/