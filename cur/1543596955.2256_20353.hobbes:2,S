Date: Wed, 11 Jul 2001 01:04:07 -0500
From: Dirk Wetter <>
Subject: Re: dead mem pages
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/7/11/9

Rik,
thx for your answer. :)
Rik van Riel wrote:
>On Tue, 10 Jul 2001, Dirk Wetter wrote:
>
>>>It would be good to know what these 2.8GB of cached pages are.
>>>
>>believe me, i would like to know too where all the $$$ memory
>>went to. ;-)
>>
>
>Most likely swap cache, that means it is the memory from your
>simulations, just removed from the page tables and put in the
>swap cache.
>
but why was the machine actually swapping then? sar definetely showed swap
and disk activity as the applications started.
>>>Again on a general note, the 2.4 kernel's VM is new and hence not fully
>>>mature.  So the short and unhelpful answer to your query is probably that
>>>the current VM system is not well tuned for your workload (4.3GB of memory
>>>hungry simulations on a 4GB machine).
>>>
>>concerning the maturity that's also the answer i got from the kernel
>>guru's at last USENIX in boston. but ihmo it *should* become soon
>>better for the future if Linux intends to become bigger in the server
>>business. (my $0.02)
>>
>
>It'll get better as soon as we have the time, for 2.4.7
>the VM statistics have already improved a bit so people
>are no longer fooled by large "cached" figures ;)
>
Rik (and Wayne): it's *not only* the statistics. they were swapping like 
crazy.
the only thing the machines were responding immediately to were icmp 
packets.
no tcp/udp. keystrokes on the console were echoed 2 minutes after i 
typed the command
in. with some patience i managed to execute "top" i caught pictures were 
kswapd
was in the first line having 99% or so of one CPU and the load was between
20 and 30.
>
>Actual improvements to the code, if needed at all, will
>come with time ... more than $0.02 will get you ;)
>
not that i don't appreciate very much your work, but i had to learn that 
improvements are
needed:  we could swap our 4GB machines to death just by submitting jobs 
in the size
of the ~physical memory to them. but i don't have any doubts that you 
guys will manage
to do neccessary changes:-)
i do the profile tests Marcelo suggested (thx) and come back with some 
numbers.
tschuess :-)
        ~dirkw
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/