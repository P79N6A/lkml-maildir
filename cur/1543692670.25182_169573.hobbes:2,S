Date: Tue, 30 Sep 2003 15:35:50 -0700
From: Greg KH <>
Subject: Re: [PATCH] PCI fixes for 2.6.0-test6
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/9/30/291

ChangeSet 1.1349, 2003/09/29 12:48:49-07:00, adobriyan@mail.ru
[PATCH] PCI: Remove setting TASK_RUNNING after schedule_timeout in /drivers/pci/
 drivers/pci/hotplug/cpqphp.h |    1 -
 drivers/pci/pool.c           |    1 -
 2 files changed, 2 deletions(-)
diff -Nru a/drivers/pci/hotplug/cpqphp.h b/drivers/pci/hotplug/cpqphp.h
--- a/drivers/pci/hotplug/cpqphp.h	Tue Sep 30 15:20:28 2003
+++ b/drivers/pci/hotplug/cpqphp.h	Tue Sep 30 15:20:28 2003
@@ -766,7 +766,6 @@
 	set_current_state(TASK_INTERRUPTIBLE);
 	/* Sleep for up to 1 second to wait for the LED to change. */
 	schedule_timeout(1*HZ);
-	set_current_state(TASK_RUNNING);
 	remove_wait_queue(&ctrl->queue, &wait);
 	if (signal_pending(current))
 		retval =  -EINTR;
diff -Nru a/drivers/pci/pool.c b/drivers/pci/pool.c
--- a/drivers/pci/pool.c	Tue Sep 30 15:20:28 2003
+++ b/drivers/pci/pool.c	Tue Sep 30 15:20:28 2003
@@ -296,7 +296,6 @@
 
 			schedule_timeout (POOL_TIMEOUT_JIFFIES);
 
-			current->state = TASK_RUNNING;
 			remove_wait_queue (&pool->waitq, &wait);
 			goto restart;
 		}
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/