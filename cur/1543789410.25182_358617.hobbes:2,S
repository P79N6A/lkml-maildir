Date: Mon, 17 Oct 2005 12:04:17 -0700 (PDT)
From: Linus Torvalds <>
Subject: Re: [discuss] Re: x86_64: 2.6.14-rc4 swiotlb broken
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/10/17/214

On Mon, 17 Oct 2005, Muli Ben-Yehuda wrote:
>
> On Mon, Oct 17, 2005 at 08:32:45PM +0200, Andi Kleen wrote:
> 
> > > and would like to be able to run 2.6.14 on them when it 
> > > comes out...
> > 
> > So you're saying you tested it and it doesn't work? 
> 
> Not quite; I'm saying that form the description up-thread it sounds
> like there's a good chance it won't. Jon Mason (CC'd) has access to
> such a  machine. Jon, can you please try the latest hg tree with and
> without the patch and see how it fares?
NOTE! Even if the machine has 4GB or more of memory, it's entirely likely 
that the quick "use NODE(0)" hack will work fine. 
Why? Because the bootmem memory should still be allocated low-to-high by 
default, which means that as logn as NODE(0) has _enough_ memory in the 
DMA range, we should be ok.
So I _think_ the simple one-liner NODE(0) patch is sufficient, and should 
work (and is a lot more acceptable for 2.6.14 than switching the node 
ordering around yet again, or doing bigger surgery on the bootmem code).
So the only thing that worried me (and made me ask whether there might be 
machines where it doesn't work) is if some machines might have their high 
memory (or no memory at all) on NODE(0). It does sound unlikely, but I 
simple don't know what kind of strange NUMA configs there are out there.
And I'm definitely only interested in machines that are out there, not 
some theoretical issues.
			Linus
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/