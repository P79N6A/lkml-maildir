Date: Wed, 20 Oct 2004 11:32:43 +0100 (WEST)
From: "Rui Nuno Capela" <>
Subject: Re: [patch] Real-Time Preemption, -RT-2.6.9-rc4-mm1-U8
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/10/20/70

Ingo Molnar wrote:
>
>> Changes since -U7:
>>
>
> - fix block-loopback assert reported by Mark H Johnson, Matthew L
>   Foster and Rui Nuno Capela. (usually triggers during 'make install'
>   of a kernel compile.)
>
Is this fix already on U8 ? I don't seem to get out of mkinitrd (which is
triggered by kernel make install).
OTOH, still on my laptop (P4/UP) I'm getting this very often:
RTNL: assertion failed at net/ipv4/devinet.c (1049)
 [<c0104ee4>] dump_stack+0x1e/0x20 (20)
 [<c02afa2b>] inet_dump_ifaddr+0x135/0x13a (52)
 [<c027a533>] rtnetlink_dump_all+0x92/0xaa (40)
 [<c028117f>] netlink_dump+0x6c/0x211 (56)
 [<c0280f97>] netlink_recvmsg+0x209/0x21b (92)
 [<c0268a40>] sock_recvmsg+0xcc/0xf0 (248)
 [<c026a4cc>] sys_recvmsg+0x110/0x1fb (284)
 [<c026a628>] sys_socketcall+0x71/0x234 (68)
 [<c01040a9>] sysenter_past_esp+0x52/0x71 (-8124)
preempt count: 00000001
. 1-level deep critical section nesting:
.. entry 1: print_traces+0x16/0x4a / (dump_stack+0x1e/0x20)
And I also found this once:
------------[ cut here ]------------
kernel BUG at lib/rwsem-generic.c:598!
invalid operand: 0000 [#1]
PREEMPT
Modules linked in: realtime commoncap snd_seq_oss snd_seq_midi_event
snd_seq snd_pcm_oss snd_mixer_oss snd_usb_usx2y snd_usb_lib snd_rawmidi
snd_seq_device snd_hwdep snd_ali5451 snd_ac97_codec snd_pcm snd_timer
snd_page_alloc snd soundcore prism2_cs p80211 ds yenta_socket pcmcia_core
natsemi crc32 loop subfs evdev ohci_hcd usbcore thermal processor fan
button battery ac
CPU:    0
EIP:    0060:[<c01b7e30>]    Not tainted VLI
EFLAGS: 00010202   (2.6.9-rc4-mm1-RT-U8.0)
EIP is at up_write+0x1d4/0x202
eax: d4edc000   ebx: e003f967   ecx: d4eb8d40   edx: dee04020
esi: de9b4214   edi: de9b443c   ebp: d4eddfcc   esp: d4eddfac
ds: 007b   es: 007b   ss: 0068   preempt: 00000001
Process loop0 (pid: 6672, threadinfo=d4edc000 task=d4eb8d40)
Stack: c0113b01 00000001 c0384d90 c0384d60 00000282 e003f967 de9b4000
de9b443c
       d4eddfec e003f9c8 d4eb8d40 ffffffec 00000000 e003f967 00000000
00000000
       00000000 c0102305 de9b4000 00000000 00000000
Call Trace:
 [<c0104eb0>] show_stack+0x80/0x96 (28)
 [<c010504b>] show_registers+0x165/0x1de (56)
 [<c010525d>] die+0xf6/0x191 (64)
 [<c0105797>] do_invalid_op+0x10b/0x10d (188)
 [<c0104b0d>] error_code+0x2d/0x38 (100)
 [<e003f9c8>] loop_thread+0x61/0x11b [loop] (32)
 [<c0102305>] kernel_thread_helper+0x5/0xb (722608148)
preempt count: 00000002
. 2-level deep critical section nesting:
.. entry 1: die+0x3a/0x191 / (do_invalid_op+0x10b/0x10d)
.. entry 2: print_traces+0x16/0x4a / (show_stack+0x80/0x96)
Code: e8 af f9 ff ff 89 f8 e8 f1 af f5 ff e9 35 ff ff ff 0f 0b a5 00 43 e4
2c c0 e9 da fe ff ff 0f 0b a4 00 43 e4 2c c0 e9 c4 fe ff ff <0f> 0b 56 02
cf 70 2d c0 e9 3c fe ff ff e8 d7 56 10 00 e9 22 ff
(config.gz is attached)
Bye now.
-- 
rncbc aka Rui Nuno Capela
rncbc@rncbc.org[unhandled content-type:application/x-gzip-compressed]