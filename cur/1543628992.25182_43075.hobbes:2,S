Date: 29 Apr 2002 15:13:05 -0700
From: Daniel Quinlan <>
Subject: Re: [RFC/FYI] cramfs 6/6 - boot/root stuff
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/4/29/175

Johan Adolfsson <johan.adolfsson@axis.com> writes:
> <ugly hack warning>
> 6. (RFC/FYI) In our tree we have a hack that allows us
>    to append the cramfs image to the kernel image and use it to boot from.
> [...]
> Any hints of other approaches?
It seems much cleaner to use the padding option to put some boot code
in the first 512 bytes of the cramfs image which you can use to jump
to anywhere in the image.
What we did for x86 was to put boot code in the first 512 bytes (the
"-p" option to mkcramfs), then jump to 512 bytes after the superblock
start (offset 1024) which was where we put the kernel (put there via the
"-i" option to mkcramfs, just a normal kernel image padded at the
beginning by 436 bytes so it would start at offset 1024).
We could have just jumped to offset 588 instead of 1024 and not padded
the kernel, but we used even numbers for some (aesthetic?) reason that I
can't recall.
Dan
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/