Date: Thu, 23 Feb 2006 23:21:49 +1100
From: Nick Piggin <>
Subject: Re: isolcpus weirdness
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/2/23/86

Emmanuel Pacaud wrote:
> Hi,
> 
> When specifying isolcpus kernel parameters, isolated cpu is always the
> same, not the one I asked for.
> 
> I'm working with a dual xeon machine, with linux kernel 2.6.15
> (unpatched, from kernel.org), hyperthreading desactivated (number of cpu
> = 2). I've tried to isolate cpu1, using isolcpus, but I always end with
> cpu0 isolated, even with isolcpus=1. With invalid isolcpus argument
> (cpuid > 1), no cpu is isolated, which is ok.
> 
> You'll find below content of /proc/version, /proc/cpuinfo, the output of
> dmesg, and a snapshot of top when running 3 cpuburn processes.
> 
> What's wrong ?
> 
If you have 2 CPUs, and "isolate" one of them, the other is isolated
from it. Ie. there is no difference between isolating one or the other,
the net result is that they are isolated from each other.
This means that the scheduler will never automatically move a task
running on an isolated CPU to another CPU. You have to move all the
tasks manually, for example by using cpu affinity.
-- 
SUSE Labs, Novell Inc.
Send instant messages to your online friends 
http://au.messenger.yahoo.com
 
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/