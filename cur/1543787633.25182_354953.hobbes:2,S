Date: Fri, 30 Sep 2005 16:03:55 -0600
From: "Christopher Friesen" <>
Subject: Re: dentry_cache using up all my zone normal memory
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/9/30/216

Friesen, Christopher [CAR:VC21:EXCH] wrote:
> With a bit of digging the culprit appears to be the dentry_cache.  The 
> last log I have shows it using 817MB of memory.  Right after that the 
> oom killer kicked me off the system.  When I logged back in, the cache 
> usage was back down to normal and everything was fine.
There hasn't been any new suggestions as to the culprit, so I started 
experimenting a bit.
It turns out that if I limit the memory on the system to 896MB, the 
dcache slab usage peaks at around 600MB and sits there for the duration 
of the test.
When I limit the memory to 1024MB, the dcache slab chews up all my zone 
normal memory and the oom killer runs.
It almost seems like the dcache responds to memory pressure on the 
system as a whole, but not as well to pressure on zone normal.  Would 
this make sense?
Chris
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/