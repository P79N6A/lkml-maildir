Date: Fri, 21 Dec 2001 20:47:18 +0100 (CET)
From: Tobias Ringstrom <>
Subject: [PATCH] Linux 2.4.17 - compile error in drivers/video/aty/aty_base.c
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/12/21/61

On Fri, 21 Dec 2001, Marcelo Tosatti wrote:
> Well, 
> 
> Here it is... 
Argh... I knew I should have tried the -rc kernels.  Compiling
CONFIG_FB_ATY_GX as a module gives me the following error:
gcc -D__KERNEL__ -I/usr/src/linux-2.4.17/include -Wall -Wstrict-prototypes 
-Wno-trigraphs -O2 -fomit-frame-pointer -fno-strict-aliasing -fno-common 
-pipe -mpreferred-stack-boundary=2 -march=i686 -DMODULE   -DEXPORT_SYMTAB 
-c atyfb_base.c
atyfb_base.c:388: `ram_resv' undeclared here (not in a function)
atyfb_base.c:388: initializer element is not constant
atyfb_base.c:388: (near initialization for `aty_gx_ram[7]')
atyfb_base.c:250: warning: `curblink' defined but not used
The following patch fixes the error:
diff -ru linux-2.4.17.orig/drivers/video/aty/atyfb_base.c linux-2.4.17/drivers/video/aty/atyfb_base.c
--- linux-2.4.17.orig/drivers/video/aty/atyfb_base.c	Fri Dec 21 19:18:45 2001
+++ linux-2.4.17/drivers/video/aty/atyfb_base.c	Fri Dec 21 20:35:42 2001
@@ -366,6 +366,7 @@
 
 #if defined(CONFIG_FB_ATY_GX) || defined(CONFIG_FB_ATY_CT)
 static char ram_dram[] __initdata = "DRAM";
+static char ram_resv[] __initdata = "RESV";
 #endif /* CONFIG_FB_ATY_GX || CONFIG_FB_ATY_CT */
 
 #ifdef CONFIG_FB_ATY_GX
@@ -378,7 +379,6 @@
 static char ram_sgram[] __initdata = "SGRAM";
 static char ram_wram[] __initdata = "WRAM";
 static char ram_off[] __initdata = "OFF";
-static char ram_resv[] __initdata = "RESV";
 #endif /* CONFIG_FB_ATY_CT */
 
 #ifdef CONFIG_FB_ATY_GX
Better luck next time, Dave!  ;-)
/Tobias
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/