Date: Sun, 13 Nov 2005 22:56:15 +0100
From: Thomas Gleixner <>
Subject: Re: [PATCH] rt11 Fill out default_simple_type
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/11/13/91

On Sat, 2005-11-12 at 15:48 +0100, Ingo Molnar wrote:
> doesnt apply. Also, the set_type line has whitespace damage.
> 
> 	Ingo
I have integrated the initial patch from Tom Rini into the arm generic
irq patch set.
http://www.tglx.de/projects/armirq/
	tglx
-------- Forwarded Message --------
From: Tom Rini <trini@kernel.crashing.org>
To: Thomas Gleixner <tglx@linutronix.de>
Subject: Re: ARM genirqs on OMAP
Date: Thu, 10 Nov 2005 10:11:12 -0700
Here it all is.  I've been talking with Daniel right now and got it all
trimmed down:
Signed-off-by: Tom Rini <trini@kernel.crashing.org>
Signed-off-by: Daniel Walker <dwalker@mvista.com>
 arch/arm/mach-omap1/board-osk.c |    2 +-
 arch/arm/plat-omap/gpio.c       |    2 +-
 kernel/irq/handle.c             |    5 +++--
 3 files changed, 5 insertions(+), 4 deletions(-)
Index: linux-2.6.14/arch/arm/mach-omap1/board-osk.c
===================================================================
--- linux-2.6.14.orig/arch/arm/mach-omap1/board-osk.c
+++ linux-2.6.14/arch/arm/mach-omap1/board-osk.c
@@ -29,7 +29,7 @@
 #include <linux/kernel.h>
 #include <linux/init.h>
 #include <linux/device.h>
-#include <linux/interrupt.h>
+#include <linux/irq.h>
 
 #include <linux/mtd/mtd.h>
 #include <linux/mtd/partitions.h>
Index: linux-2.6.14/arch/arm/plat-omap/gpio.c
===================================================================
--- linux-2.6.14.orig/arch/arm/plat-omap/gpio.c
+++ linux-2.6.14/arch/arm/plat-omap/gpio.c
@@ -736,7 +736,7 @@ static void gpio_irq_handler(unsigned in
 
        desc->chip->ack(irq);
 
-       bank = (struct gpio_bank *) desc->data;
+       bank = (struct gpio_bank *) desc->handler_data;
        if (bank->method == METHOD_MPUIO)
                isr_reg = bank->base + OMAP_MPUIO_GPIO_INT;
 #ifdef CONFIG_ARCH_OMAP1510
Index: linux-2.6.14/kernel/irq/handle.c
===================================================================
--- linux-2.6.14.orig/kernel/irq/handle.c
+++ linux-2.6.14/kernel/irq/handle.c
@@ -196,8 +196,9 @@ struct irq_type default_level_type = {
  */
 struct irq_type default_simple_type = {
        .typename       = "default_simple",
-       .enable         = noop,
-       .disable        = noop,
+       .enable         = default_enable,
+       .disable        = default_disable,
+       .set_type       = default_set_type,
        .handle_irq     = handle_simple_irq,
 };
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/