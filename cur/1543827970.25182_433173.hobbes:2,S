Date: Thu, 15 Jun 2006 13:40:59 +0200 (CEST)
From: Roman Zippel <>
Subject: Re: clocksource
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/6/15/82

Hi,
On Thu, 8 Jun 2006, john stultz wrote:
> > This code gets only limited testing in -mm, it needs to run for weeks 
> > or months, which I don't expect from the average -mm kernel. This makes 
> > userspace simulations so damn important and if you don't do this, you're 
> > playing a very risky game with a kernel which is supposed to be stable.
> 
> Agreed, simulation is nice. Thus, I've revived the old simulator which
> builds using the existing code in -mm. Its a bit fast/dirty and isn't
> exactly like your sim, but maybe you can take a look at it and send
> patches to improve it?
> 
> You can find it at:
> 
http://sr71.net/~jstultz/tod/simulator_C2.tar.bz2
At 
http://www.xs4all.nl/~zippel/ntp/simulator_C2
+patches.tar.bz2 is my 
version where I added a number of patches (all p? patches) to get it into 
an acceptable state. You have a number of bugs which actually didn't let 
the clock oscillate that much but instead added random jitter (and in some 
cases a lot of it).
I disabled the lost interrupt simulation, so the effect of adjustments are 
better visible, the error should return to near zero after it. Look for 
the "ppm" prints and watch the time difference.
In the series file you can enable some debug patches (d?) to add extra 
prints or simulate large update delays to see the effect on the error 
difference.
bye, Roman
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/