Date: Thu, 21 Dec 2006 10:11:26 +0530
From: Vivek Goyal <>
Subject: Re: Patch "i386: Relocatable kernel support" causes instant reboot
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/12/20/404

On Wed, Dec 20, 2006 at 09:43:40PM +0100, Jean Delvare wrote:
> Hi Eric,
> 
> On Wed, 20 Dec 2006 07:00:11 -0700, Eric W. Biederman wrote:
> > Jean Delvare writes:
> > > One of my test machines (i586, Asus P4P800-X) reboots instantly when I
> > > try to boot a 2.6.20-rc1 kernel. 2.6.19 and 2.6.19.1 boot OK. I ran a
> > > git bisect and it pointed me to this patch:
> >
> > I don't think this is a know issue.
> >
> > The most straight forward way to debug this is to put infinite
> > loops in arch/i386/boot/compressed/head.S moving progressively farther
> > in until you find where the line in head.S that the machine reboots
> > on you is.
> 
> I could try that with some guidance. What instructions should I insert
> to create an infinite loop?
> 
> > Although it is possible the problem falls in misc.c as well.
> >
> > If you have a serial console setup we can probably make this
> > process a little easier.
> 
> I can setup a serial console if needed, what are we looking for? Just
> to know where exactly the reboot happens?
> 
> > One hunch is that we did something stupid, and have an instruction
> > that only executes on an i686 in there somewhere.
> 
> This is a Pentium 4, I'm compiling for i586 for compatibility with my
> another test systems. So an i686 instruction would work fine, it has to
> be something else.
> 
Hi Jean,
What's the value of CONFIG_PHYSICAL_ALIGN? How much RAM is present in your
system? Though very unlikely, just trying to find that we are not running
short of RAM while trying to align the kernel to a large value.
Can you please provide your config file. Is it possible to provide your
bzImage? Can you upload it somewhere? Will try to boot it on my box just
to find out if it could be in some way related to compiler/linker.
Thanks
Vivek
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/