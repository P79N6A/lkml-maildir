Date: Mon, 09 Oct 2006 15:08:37 +0200
From: Stefan Richter <>
Subject: Re: [2.6.19 patch] ATA must depend on BLOCK
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/10/9/124

Adrian Bunk wrote:
> This patch fixes the following compile error with CONFIG_ATA=y, 
> CONFIG_BLOCK=n:
[...]
>  config ATA
>  	tristate "ATA device support"
> +	depends on BLOCK
>  	depends on !(M32R || M68K) || BROKEN
>  	depends on !SUN4 || BROKEN
>  	select SCSI
The Kconfig isn't broken but the tool which generated the .config.
"config ATA\ select SCSI" implies a dependency of ATA on SCSI. SCSI
depends on BLOCK.
Therefore "select SCSI" && "config SCSI\ depends on BLOCK" implies
either "config ATA\ select BLOCK" or "config ATA\ depends on BLOCK".
{Ignore all what I said if ATA code directly uses the block API. Usages
of the block API to manipulate SCSI data structures, particularly the
request queue, does not necessarily count as independent usage of the
block API though.}
-- 
Stefan Richter
-=====-=-==- =-=- -=---
http://arcgraph.de/sr/
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/