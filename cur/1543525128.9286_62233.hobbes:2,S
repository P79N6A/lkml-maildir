Date: Wed, 9 Feb 2000 22:05:50 -0500
From: "Theodore Y. Ts'o" <>
Subject: Re: 2.4 Features
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/2/9/192

   From: "Peter T. Breuer" <ptb@it.uc3m.es>
   Date:   Thu, 10 Feb 2000 02:15:19 +0100 (MET)
   > I wouldn't even do that much.  Take the code out of the kernel entirely,
   > and then provide a user-mode utility that goes through the filesystem,
   > and converts the files compressed with a depcreated algorithm to either
   > being uncompressed or compressed with a better format.  The goal here is
   > to keep the kernel as long-term maintainable as possible.
   Can this be done in user space?  ... e2fsck does things at that level!
   It's just playing on the raw device. 
Of course it can be done in user space!  It will require unmounting the
filesystem, but that's about it.  
Basically, you just interate over each of the inodes, and then convert
each inode one at a time.  Look at e2fsck/swapfs.c for an example for
what the overall structure should look like --- this byte swaps an
entire filesystem by iterating over each inode.  (This was used to
convert over very old 68k filesystems to the standard ext2 format.)
It's not hard, but it does require someone who understands the 0.3 and
0.4 e2compr to write the appropriate conversion code.  I'm willing to
help someone who needs help using the ext2 library to do this, but
fundamentally it's not terribly difficult.
						- Ted
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/