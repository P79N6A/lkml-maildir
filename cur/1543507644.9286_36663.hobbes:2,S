Date: Tue, 31 Aug 1999 10:55:53 -0700 (PDT)
From: George Bonser <>
Subject: IPIP Tunneling
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/8/31/78

I am just about at wits end trying to get ipip tunneling working with
2.2.x
Example configuration:
System A has:
192.168.50.254
172.16.0.254
System B has:
192.168.50.107
10.1.1.1
(This is a lab environment)
I have the iproute tools installed.
My goal is to create a tunnel between sysA and sysB so that traffic
between the 172.16.0.0/16 and 10.1.1.0/24 is routed over the tunnel.
I have tried just about everything. The procedure that should be most
promising:
On system A:
insmod ipip
ip tunnel add tun0 mode ipip remote 10.1.1.1 local 172.16.0.254
ip addr add 172.16.0.254 dev tun0
ip link set tun0 up
ip route add 10.1.1.0/24 dev tun0 
On system B:
insmod ipip
ip tunnel add tun0 mode ipip remote 192.168.50.254 local 10.1.1.1
ip addr add 10.1.1.1 dev tun0
ip link set tun0 up
ip route add 176.16.0.0/16 dev tun0 
None of the commands complain.
When I attempt to ping 172.16.0.254 from sys B, I can see the packets
arrive on the 192.168.50.254 interface ... tcpdump says that an icmp echo
request has arrived and it sees it as ipip. It never tries to send a
reply.  Exactly the same happens at the other end. I can see the pings
arrive but it never seems to even try to reply. It is as if the ipip
packets arrive but are not being decapsulated (my speculation only).
Is the above not the proper way to configure the tunnel? Is there a better
way?
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/