Date: Sat, 17 Sep 2005 21:56:46 +0400
From: Sergey Vlasov <>
Subject: Re: free free irq and Oops on cat /proc/interrupts (2)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/9/17/109

On Sat, 17 Sep 2005 19:20:45 +0400 Manu Abraham wrote:
> Can somebody give me a pointer as to what i am possibly doing wrong.
> 
> The module loads fine..
> The module unloads fine.. But i get a "free free IRQ" on free_irq()..
You are not calling pci_enable_device() in your probe handler.  You
MUST call this function, check for success, and only after that you
can use pdev->irq (recent kernels perform interrupt routing only after
the device is enabled, so the value of pdev->irq before the call to
pci_enable_device() may not be valid).
[unhandled content-type:application/pgp-signature]