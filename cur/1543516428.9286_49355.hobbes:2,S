Date: Thu, 18 Nov 1999 01:02:37 -0700 (MST)
From: Andreas Dilger <>
Subject: Re: `filetype' ext2 feature causes dump to SEGV
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/11/18/7

Stelian writes:
>    By the way, Ted: I plan to reimplement the ext2fs access code in dump
>    (actually the entire traverse.c code), in order to make dump more
>    filesystem independent (to be able to add in the future some support for
>    other filesystems, such as ext3, BSD, etc). I was wondering why dump uses
>    direct disc access (open and read directly the direct, indirect and doubly
>    indirect blocks), instead of using the associated e2fsprogs library
>    functions.   
I would suggest that rather than making the single dump program smart enough
to handle all different filesystem types, you follow the lead of fsck and
make a generic "dump" front-end which determines the filesystem type and then
calls the apropriate dump.<fstype> back-end.  This would allow you to have
dump.ext2, dump.ufs, etc, without making a single dump program so complex.
Ted writes:
> If you want to make dump use more of the ext2 library's features, that's
> probably a good thing.  I would very strongly encourage you to keep the
> on-tape format compatible with the BSD dump program, however.  Being
> able to exchange dump tape between BSD and Linux can be a very handy
> feature from time to time.
Actually, I was even able to restore an AIX mksysb tape (essentially a by-file
dump) on Linux using dump 0.4b4, so I think it very important not to change
the on-tape dump format - it might even be a POSIX standard, just like tar.
Now if only there was the ability to have the system boot from a Linux dump
tape, and re-create all of the partitions and filesystems ala AIX during
the restore, I'd be a happy camper...
Cheers, Andreas
-- 
Andreas Dilger   University of Calgary  \"If a man ate a pound of pasta and
                 Micronet Research Group \ a pound of antipasto, would they
Dept of Electrical & Computer Engineering \   cancel out, leaving him still
http://www-mddsp.enel.ucalgary.ca/People/adilger/
       hungry?" -- Dogbert
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/