Date: Thu, 12 Aug 2004 18:36:00 -0700
From: Dave Hansen <>
Subject: Re: [PATCH] allocate page caches pages in round robin fasion
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/8/12/316

On Thu, 2004-08-12 at 16:38, Jesse Barnes wrote:
> On a NUMA machine, page cache pages should be spread out across the system 
> since they're generally global in nature and can eat up whole nodes worth of 
> memory otherwise.  This can end up hurting performance since jobs will have 
> to make off node references for much or all of their non-file data.
Wouldn't this be painful for any workload that accesses a unique set of
files on each node?  If an application knows that it is touching truly
shared data which every node could possibly access, then they can use
the NUMA API to cause round-robin allocations to occur.  
Maybe a per-node watermark on page cache usage would be more useful. 
Once a node starts to get full, and it's past the watermark, we can go
and shoot down some of the node's page cache.  If the data access is
truly global, then it has a good chance of being brought in on a
different node.  
-- Dave
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/