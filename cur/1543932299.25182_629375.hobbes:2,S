Date: Mon, 17 Dec 2007 21:50:10 -0700
From: (Eric W. Biederman)
Subject: Re: [RFC PATCH 02/12] PAT 64b: Basic PAT implementation
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/12/17/527

Venki Pallipadi <venkatesh.pallipadi@intel.com> writes:
> Checking the manual for this. You are right, we had missed some steps here.
> Actually, manual says on MP, PAT MSR on all CPUs must be consistent (even when
> they are not really using it in their page tables.
> So, this will change the init and shutdown parts significantly and there may be
> some challenges with CPU offline and KEXEC. We will redo this part in next
> iteration.
Well the normal kexec path is no worse then reboot.  The kdump path is a
mess but only a minor one, and with us only changing the UC- case we
can probably just ignore it and leave the system started with that
pat register set to WC :)
What we are doing really should be no worse the MTRR setup except
that disabling it at reboot is polite.
CPU online and offline that is weird, but so far it is always weird,
and I don't think ever quite correct.
Eric