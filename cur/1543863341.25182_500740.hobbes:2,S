Date: Mon, 22 Jan 2007 21:47:19 +0100
From: Klaus Vink Slott <>
Subject: mixer hw loosing its settings during suspend
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/1/22/206

Hi
I was discussing yesterday with Danny on his blok 
http://dkukawka.blogspot.com/2006/11/kpowersave-config-tutorial.html
 about  
how to restore sound on my old laptop. He told me that I should drop you a 
note as my problem in reality  should be handled by the kernel. 
Short story is that I have a old Dell X200 with a Intel sound controller. 
lspci says:
00:1f.5 Multimedia audio controller: Intel Corporation 82801CA/CAM AC'97 Audio 
Controller (rev 02)
After a suspend cycle sound is muted on all channels until the corresponding 
sliders hav been moved. 
For my purpose I saved a zero file (mixer setting all zero) and saved this 
as /etc/asound.zero. Then I made a /etc/pm/hooks/63sound script in pm-utils
#!/bin/bash
case $1 in
    hibernate|suspend)
        /usr/sbin/alsactl store
        /usr/sbin/alsactl -f /etc/asound.zero restore
        ;;
    thaw|resume)
        /usr/sbin/alsactl restore
        ;;
esac
This hack solves the problem on openSUSE 10.2. Feel free to ignore my letter 
as I guess most X200 is dead and gone by now - and my english is bad to :-)
--
Regards
Klaus
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/