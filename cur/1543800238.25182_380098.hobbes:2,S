Date: Fri, 30 Dec 2005 11:15:27 +0100
From: Erik Mouw <>
Subject: Re: patch for "scripts/package/buildtar" to pickup "localversion" on "/boot" file objects
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/12/30/44

On Thu, Dec 29, 2005 at 10:33:16PM -0800, Linda A. Walsh wrote:
> BTW -- here is a "quick" patch to pick up the "local version" to append to
> the files in "/boot" for the "tar[x]-pkg's"...
> 
> --- scripts/package/buildtar.orig       2005-11-24 14:10:21.000000000 -0800
> +++ scripts/package/buildtar    2005-12-29 22:26:34.543513254 -0800
> @@ -15,7 +15,8 @@
> #
> # Some variables and settings used throughout the script
> #
> -version="${VERSION}.${PATCHLEVEL}.${SUBLEVEL}${EXTRAVERSION}${EXTRANAME}"
> +version="$(grep UTS_RELEASE include/linux/version.h| \
> +       sed 's/^#[^"]*"// ; s/"$// ')"
A much easier way is to use:
  version="${KERNELRELEASE}"
A patch for this is already in -mm, I expect/hope Linus will pick it up
after 2.6.15.
Erik
-- 
+-- Erik Mouw -- www.harddisk-recovery.com -- +31 70 370 12 90 --
| Lab address: Delftechpark 26, 2628 XH, Delft, The Netherlands
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/