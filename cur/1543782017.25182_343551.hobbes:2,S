Date: Mon, 22 Aug 2005 14:53:23 -0500
From: Joel Schopp <>
Subject: Re: [patch] ibmvscsi timeout fix
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/8/22/11

> This patch fixes a long term borkenness in
> ibmvscsi where we were using the wrong timeout
> field from the scsi command (and using the 
> wrong units.)  Now broken by the fact that the
> scsi_cmnd timeout field is gone entirely.
> This only worked before because all the SCSI
> targets assumed that 0 was default.
That was fast.  I report the error to you and get a patch next time I 
look at my mail.  This does fix the build break I saw in a 
2.6.13-rc6-mm1 defconfig on ppc64.
Adding Andrew Morton to the distribution list since somebody else is 
bound to notice that ppc64 -mm doesn't compile anymore.
Acked-by: Joel Schopp <jschopp@austin.ibm.com>
> 
> Signed-off-by: Dave Boutcher <boutcher@us.ibm.com>
> 
> --- linux-2.6.13-rc6-mm1-orig/drivers/scsi/ibmvscsi/ibmvscsi.c	2005-08-22 13:54:20.111955197 -0500
> +++ linux-2.6.13-rc6-mm1/drivers/scsi/ibmvscsi/ibmvscsi.c	2005-08-22 14:22:56.265042174 -0500
> @@ -594,7 +594,7 @@
>  	init_event_struct(evt_struct,
>  			  handle_cmd_rsp,
>  			  VIOSRP_SRP_FORMAT,
> -			  cmnd->timeout);
> +			  cmnd->timeout_per_command/HZ);
> 
>  	evt_struct->cmnd = cmnd;
>  	evt_struct->cmnd_done = done;
> 
> 
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/