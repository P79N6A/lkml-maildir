Date: Wed, 3 Oct 2007 10:21:57 +0200
From: Ingo Molnar <>
Subject: Re: Linux 2.6.23-rc9 and a heads-up for the 2.6.24 series..
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/10/3/52

* Mel Gorman <mel@csn.ul.ie> wrote:
> > > Nice one Ingo - got it first try. The problem commit was 
> > > dd41f596cda0d7d6e4a8b139ffdfabcefdd46528 and it's clear that the 
> > > code removed in this commit is put back by this latest patch.  
> > > When applied, profile=sleep works as long as CONFIG_SCHEDSTAT is 
> > > set.
> > > 
> > And if it isn't set? I can easily see building a new kernel with 
> > stats off and forgetting to change the boot options.
> 
> If CONFIG_SCHEDSTAT is off and profile=sleep is set, you see with 
> Ingo's patch and readprofile;
> 
>      0 *unknown*
>      0 total                                      0.0000
> 
> That is a tad confusing hence my follow-up patch which would say 
> "/proc/profile" doesn't exist when readprofile is used and the warning 
> in dmesg.
yep - that's the best we can do for the stable release.
We could improve quality of behavior here by not offering /proc/profile 
in that case and by printk-ing something if profile=sleep is specified 
on a !CONFIG_SCHEDSTATS kernel. I'm willing to apply patches that do 
that :)
	Ingo
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/