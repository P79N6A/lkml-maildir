Date: Thu, 16 Feb 2006 01:38:27 +0000
From: Alan Cox <>
Subject: Re: [BUG] kernel 2.6.15.4: soft lockup detected on CPU#0!
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/2/15/327

On Mer, 2006-02-15 at 13:19 -0500, Lee Revell wrote:
> AFAICT in PIO mode if a huge IO request is submitted and/or the device
> is slow to respond there's nothing to prevent us spending a long time in
> the IDE driver.
IDE is basically bits of ISA bus decode stuffed down a cable and then
sped up/fancified later. In PIO0 each cycle is pretty slow and we may
issue quite a few in one transfer. If IORDY is enabled as is normally
the case the drive also has the power to tell us to shut up and can do
so for as long as it likes.
> IIRC this can't be made preemptible due to data corruption issues on
> some hardware.  Maybe we should touch the watchdog in there.
Some chips disable IRQs here and need to so that the stream of data
doesn't stall and stuff fall apart. Touching the watchdog would be
sensible.
Possibly the same is needed in the new libata pata bits too
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/