Date: Tue, 10 Jul 2001 00:34:05 -0400
From: Douglas Gilbert <>
Subject: Re: [PATCH-2.4.3] scsi logging
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/7/10/6

Andrew wrote:
> I'd like to propose the following patch to 3 SCSI mid-layer 
> files from kernel 2.4.3.  I have tested this with 2.4.3, 
> but it should be relevant to other 2.4.x kernels also.
> 
> It has the following changes/enhancements:
> 1) Log the disk serial number during scsi_scan() 
>    - scsi_scan.c.
>    Why: This is a requirement in some environments to 
>    ensure unambiguous identification of a particular 
>    problem disk.
> 2) Interpret additional values in print_sense_internal()
>    - constants.c.  Why: The detail wrt Illegal Requests 
>    is very useful, since it can indicate either an 
>    application bug or an incompatible feature of the device.
> 3) Don't skip logging sense errors for sg functions - sg.c.
>    Why: All sense errors should be logged so that a 
>    potential scsi device hardware problem doesn't go
>    unrecognized.
Andrew,
I would object to point 3). SANE, and to a lesser extent
cdrecord, execute lots of commands that give SCSI check
conditions and would bloat the log and the console with
many serious looking messages. Those error 
indications are conveyed back to the app via the sg 
interface so the information is not lost. There is an 
ioctl in the sg driver [SG_SET_DEBUG] to turn on that 
output to the log/console [the default is off (to
stop the curious querying the maintainer about the
strange messages in their logs)].
Doug Gilbert
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/