Date: Fri, 27 Apr 2007 11:12:56 -0700
From: William Lee Irwin III <>
Subject: Re: [00/17] Large Blocksize Support V3
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/4/27/387

On Fri, 2007-04-27 at 12:55 -0400, Theodore Tso wrote:
>> Unfortunately, this isn't a problem with hardware getting better, but
>> a willingness to break backwards compatibility.
>> x86_64 uses a 4k page size to avoid breaking 32-bit applications.  And
>> unfortunately, iirc, even 64-bit applications are continuing to depend
>> on 4k page alignments for things like the text and bss segments.  If
>> the userspace ELF and other compiler/linker specifications were
>> appropriate written so they could handle 16k pagesizes, maybe 5 years
>> from now we could move to a 16k pagesize.  But this is going to
>> require some coordination between the userspace binutils folks and
>> AMD/Intel in order to plan such a migration.
On Fri, Apr 27, 2007 at 10:32:07AM -0700, Nicholas Miell wrote:
> The AMD64 psABI requires binaries to work with any page size up to 64k.
> Whether that's true in practice is another matter entirely, of course.
64-bit applications are a non-issue. The ABI requires them to handle it.
It's 32-bit applications on x86-64 that are the concern. ABI emulation
for them is more involved when 4K 32-bit ABI's are to be emulated on
kernels compiled for larger native pagesizes. In practice, so many use
getpagesize() it may not be much of an issue, but consider WINE and
other sorts of non-Linux-native 32-bit apps, among other issues.
-- wli
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/