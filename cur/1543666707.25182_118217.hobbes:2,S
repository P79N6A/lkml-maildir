Date: 18 Mar 2003 11:38:43 -0500
From: Tom Sightler <>
Subject: Re: 2.5.64-mm8 breaks MASQ
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/3/18/149

On Tue, 2003-03-18 at 05:55, Andrew Morton wrote:
> Shawn <core@enodev.com> wrote:
> >
> > This actually broke in -mm7, but I don't know what causes it.
> > 
> > I have to admit, I haven't even looked at the patch to see what changed.
> > Oh well, I suspect good ol' 65-mm1 will fix things up. If so, my TiVo
> > could stop holding it's breath. ;)
> > 
> > Anyone else seeing this?
> 
> Stephen is looking into it.  Please send him your iptables
> configuration info. 
My iptables config is just a simple one-liner as follows:
iptables -t nat -A POSTROUTING -o eth1 -j MASQUERADE
eth1 is an Aironet PCCARD wireless adapter connected to my corporate
network
eth0 is 3c556 (3c59x driver) Mini-PCI 10/100 with various systems
connected to it.
I also regularly NAT my VMware virtual machine (normally configured for
host only networking) which sits on vmnet1.
I've tried several variations of the iptables option, such as:
iptables -t nat -A POSTROUTING -s 192.168.4.1/24 -j MASQUERADE
iptables -t nat -A POSTROUTING -o ! eth0 -j MASQUERADE
All of these variations work without the brlock patches backed out. 
Actually, I haven't been able to get any MASQ/NAT options to work with
the brlock removal patches.
Let me know if you need more info.
Later,
Tom
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/