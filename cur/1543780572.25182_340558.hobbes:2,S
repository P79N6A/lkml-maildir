Date: Tue, 09 Aug 2005 19:28:25 +0200
From: Alexander Fieroch <>
Subject: Re: PROBLEM: "drive appears confused" and "irq 18: nobody cared!"
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/8/9/189

Andrew Morton wrote:
> Please check 2.6.13-rc6 when it's out - this might fix the IRQ problem.
The errors "irq XXX: nobody cared" and "hdb: cdrom_pc_intr: The drive
appears confused (ireason = 0x01)"  still occur in kernel 2.6.13rc6-git1.
Trying to copy files from the "confused" cdrom causes a kernelpanic:
# cp -r /cdrom/* /tmp/.
hdb: media error (bad sector): status=0x51 { DriveReady SeekComplete Error }
hdb: media error (bad sector): error=0x30 { LastFailedSense=0x03 }
NMI Watchdog detected LOCKUP on CPU0CPU0
Modules linked in: lp 8250_pnp 8250 serial_core analog parport_pc
parport snd_bt87x i2c_i801 snd_hda_intel snd_hda_codec snd_seq_oss
snd_seq_midi snd_seq_midi_event snd_seq snd_mpu401 snd_mpu401_uart
snd_ens1370 snd_rawmidi snd_seq_device snd_pcm_oss snd_mixer_oss snd_pcm
snd_timer snd_page_alloc snd_ak4531_codec snd
Pid: 0, comm: swapper Not tainted 2.6.13-rc6-git1
RIP: 0010:[<ffffffff8043c393>] <ffffffff8043c393>{_spin_lock+97}
RSP: 0018:ffffffff805e5b80  EFLAGS: 00000002
RAX: 0000000000000000 RBX: ffffffff80666928 RCX: ffff810081763f60
RDX: 0000000000020001 RSI: ffffffff805e5bb8 RDI: 0000000000000001
RBP: 0000000000000000 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000001 R11: 0000000000aaaaaa R12: ffffffff80666900
R13: ffffffff80666928 R14: ffffffff805e5bb8 R15: ffffffff805e5ca8
FS:  0000000000000000(0000) GS:ffffffff80665800(0000) knlGS:0000000000000000
CS:  0010 DS: 0018 ES: 0018 CR0: 000000008005003b
CR2: 00002aaaaaaae000 CR3: 0000000030144000 CR4: 00000000000006e0
Process swapper (pid: 0, threadinfo ffffffff80670000, task ffffffff804db800)
Stack: 0000000000000000 ffffffff801553b8 0000000000000001 0000000000007358
       0000000000007358 0000000000007356 ffffffffffffff6a 0000000000000202
       ffffffff805e5ca8 ffffffff8011055b
Call Trace: <IRQ> <ffffffff801553b8>{__do_IRQ+125}
<ffffffff8011055b>{do_IRQ+69}
       <ffffffff8010e030>{ret_from_intr+0}
<ffffffff8013460e>{release_console_sem+345}
       <ffffffff80135189>{vprintk+752} <ffffffff8012dadd>{__wake_up+56}
       <ffffffff801351fc>{printk+78} <ffffffff8012ddf5>{activate_task+133}
       <ffffffff80130831>{try_to_wake_up+994}
<ffffffff8031a0b9>{ide_dump_status+1366}
       <ffffffff803223cf>{cdrom_decode_status+708}
<ffffffff8032271e>{cdrom_read_intr+0}
       <ffffffff80322786>{cdrom_read_intr+104}
<ffffffff8013cc3e>{lock_timer_base+27}
       <ffffffff8032271e>{cdrom_read_intr+0}
<ffffffff80317a62>{ide_intr+396}
       <ffffffff80155a4c>{note_interrupt+284}
<ffffffff8015542d>{__do_IRQ+242}
       <ffffffff8011055b>{do_IRQ+69} <ffffffff8010e030>{ret_from_intr+0}
        <EOI> <ffffffff8043b728>{preempt_schedule_irq+95}
<ffffffff8010e15e>{retint_kernel+38}
       <ffffffff8010c4a3>{mwait_idle+90}
<ffffffff8027ebf0>{acpi_processor_idle+299}
       <ffffffff8010c42d>{cpu_idle+79} <ffffffff806727aa>{start_kernel+464}
       <ffffffff806721fc>{_sinittext+508}
Code: 0f b6 03 84 c0 7e 0b eb 9a c7 43 04 00 00 00 00 5b c3 8b 7b
console shuts up ...
 <0>Kernel panic - not syncing: Aiee, killing interrupt handler!
Syslog with kernel parameters "pci=routeirq apic=debug acpi=debug
irqpoll", the kernelpanic and /proc/interrupts are attached.
> If
> any bugs remain, please raise entries for them at bugzilla.kernel.org,
> thanks.
Hm, I don't know if this is a bug related to ACPI, device drivers or
IO/Storage.
Regards,
Alexander
           CPU0       CPU1       
  0:      50402          0    IO-APIC-edge  timer
  1:        188          0    IO-APIC-edge  i8042
  7:          0          0    IO-APIC-edge  parport0
  8:          0          0    IO-APIC-edge  rtc
  9:          0          0   IO-APIC-level  acpi
 10:          0          0    IO-APIC-edge  MPU401 UART
169:        863          0   IO-APIC-level  skge, uhci_hcd:usb5, HDA Intel
177:        209          0   IO-APIC-level  eth1, Ensoniq AudioPCI
185:          1          0   IO-APIC-level  ide2, ehci_hcd:usb1, uhci_hcd:usb2
193:       9069          0   IO-APIC-level  libata, uhci_hcd:usb3
201:     200000          0   IO-APIC-level  ide0, uhci_hcd:usb4
209:          5          0   IO-APIC-level  bttv0, ohci1394, Bt87x audio
NMI:         51          1 
LOC:      53431      53415 
ERR:          1
MIS:          0
hdb: media error (bad sector): status=0x51 { DriveReady SeekComplete Error }
hdb: media error (bad sector): error=0x30 { LastFailedSense=0x03 }
NMI Watchdog detected LOCKUP on CPU0CPU0
Modules linked in: lp 8250_pnp 8250 serial_core analog parport_pc parport snd_bt87x i2c_i801 snd_hda_intel snd_hda_codec snd_seq_oss snd_seq_midi snd_seq_midi_event snd_seq snd_mpu401 snd_mpu401_uart snd_ens1370 snd_rawmidi snd_seq_device snd_pcm_oss snd_mixer_oss snd_pcm snd_timer snd_page_alloc snd_ak4531_codec snd
Pid: 0, comm: swapper Not tainted 2.6.13-rc6-git1
RIP: 0010:[<ffffffff8043c393>] <ffffffff8043c393>{_spin_lock+97}
RSP: 0018:ffffffff805e5b80  EFLAGS: 00000002
RAX: 0000000000000000 RBX: ffffffff80666928 RCX: ffff810081763f60
RDX: 0000000000020001 RSI: ffffffff805e5bb8 RDI: 0000000000000001
RBP: 0000000000000000 R08: 0000000000000000 R09: 0000000000000000
R10: 0000000000000001 R11: 0000000000aaaaaa R12: ffffffff80666900
R13: ffffffff80666928 R14: ffffffff805e5bb8 R15: ffffffff805e5ca8
FS:  0000000000000000(0000) GS:ffffffff80665800(0000) knlGS:0000000000000000
CS:  0010 DS: 0018 ES: 0018 CR0: 000000008005003b
CR2: 00002aaaaaaae000 CR3: 0000000030144000 CR4: 00000000000006e0
Process swapper (pid: 0, threadinfo ffffffff80670000, task ffffffff804db800)
Stack: 0000000000000000 ffffffff801553b8 0000000000000001 0000000000007358
       0000000000007358 0000000000007356 ffffffffffffff6a 0000000000000202
       ffffffff805e5ca8 ffffffff8011055b
Call Trace: <IRQ> <ffffffff801553b8>{__do_IRQ+125} <ffffffff8011055b>{do_IRQ+69}
       <ffffffff8010e030>{ret_from_intr+0} <ffffffff8013460e>{release_console_sem+345}
       <ffffffff80135189>{vprintk+752} <ffffffff8012dadd>{__wake_up+56}
       <ffffffff801351fc>{printk+78} <ffffffff8012ddf5>{activate_task+133}
       <ffffffff80130831>{try_to_wake_up+994} <ffffffff8031a0b9>{ide_dump_status+1366}
       <ffffffff803223cf>{cdrom_decode_status+708} <ffffffff8032271e>{cdrom_read_intr+0}
       <ffffffff80322786>{cdrom_read_intr+104} <ffffffff8013cc3e>{lock_timer_base+27}
       <ffffffff8032271e>{cdrom_read_intr+0} <ffffffff80317a62>{ide_intr+396}
       <ffffffff80155a4c>{note_interrupt+284} <ffffffff8015542d>{__do_IRQ+242}
       <ffffffff8011055b>{do_IRQ+69} <ffffffff8010e030>{ret_from_intr+0}
        <EOI> <ffffffff8043b728>{preempt_schedule_irq+95} <ffffffff8010e15e>{retint_kernel+38}
       <ffffffff8010c4a3>{mwait_idle+90} <ffffffff8027ebf0>{acpi_processor_idle+299}
       <ffffffff8010c42d>{cpu_idle+79} <ffffffff806727aa>{start_kernel+464}
       <ffffffff806721fc>{_sinittext+508}
Code: 0f b6 03 84 c0 7e 0b eb 9a c7 43 04 00 00 00 00 5b c3 8b 7b
console shuts up ...
 <0>Kernel panic - not syncing: Aiee, killing interrupt handler!