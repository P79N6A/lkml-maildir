Date: 02 Jun 2004 19:49:44 +0200
From: Sau Dan Lee <>
Subject: Re: [PATCH] serio.c: dynamically control serio ports bindings via procfs
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/6/2/168

The name fix  on serio devices is as simply  as the following example,
which can be applied to the  'atkbd' module.  We just need to add back
the  .name field  to the  'struct serio_dev'.   My previous  patch can
detect this and use the meaningful name immediately!
--- linux-2.6.7-rc1/drivers/input/keyboard/atkbd.c	2004/06/01 07:45:00	1.2
+++ linux-2.6.7-rc1.name-fix/drivers/input/keyboard/atkbd.c	2004/06/02 17:44:47
@@ -818,20 +818,21 @@
 		atkbd_enable(atkbd);
 
 		if (atkbd_command(atkbd, param, ATKBD_CMD_SETLEDS))
 			return -1;
 	}
 
 	return 0;
 }
 
 static struct serio_dev atkbd_dev = {
+	.name = "atkbd",
 	.interrupt =	atkbd_interrupt,
 	.connect =	atkbd_connect,
 	.reconnect = 	atkbd_reconnect,
 	.disconnect =	atkbd_disconnect,
 	.cleanup =	atkbd_cleanup,
 };
 
 int __init atkbd_init(void)
 {
 	serio_register_device(&atkbd_dev);
-- 
Sau Dan LEE                     李守敦(Big5)                    ~{@nJX6X~}(HZ) 
E-mail: danlee@informatik.uni-freiburg.de
Home page: 
http://www.informatik.uni-freiburg.de/~danlee
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/