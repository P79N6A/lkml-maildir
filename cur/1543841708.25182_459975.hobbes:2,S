Date: Sun, 03 Sep 2006 00:45:20 +0200
From: Krzysztof Halasa <>
Subject: Re: 2.6.18-rc5 + pata-drivers on MSI K9N Ultra report, AMD64
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/9/2/90

Alan Cox <alan@lxorguk.ukuu.org.uk> writes:
>> scsi3 : pata_amd
>> ata4: port is slow to respond, please be patient
>> ata4: port failed to respond (30 secs)
>
> Please send me an lspci -vxxx. This might be BIOS or might be us
> misparsing disable/enable bits.
(removed CC: netdev)
Hmmm... is it that 0x62, isn't it?
        static struct pci_bits amd_enable_bits[] = {
                { 0x40, 1, 0x02, 0x02 },
                { 0x40, 1, 0x01, 0x01 }
        };
        if (!pci_test_config_bits(pdev, &amd_enable_bits[ap->port_no])) {
                ata_port_disable(ap);
                printk(KERN_INFO "ata%u: port disabled. ignoring.\n", ap->id);
Perhaps this code isn't called at all? It looks I can debug it if you
want so (i.e., if there is no obvious visible bug here).
00:04.0 IDE interface: nVidia Corporation MCP55 IDE (rev a1) (prog-if 8a [Master
 SecP PriP])
        Subsystem: Unknown device f462:7250
        Flags: bus master, 66MHz, fast devsel, latency 0
        I/O ports at ffa0 [size=16]
        Capabilities: [44] Power Management version 2
00: de 10 6e 03 05 00 b0 00 a1 8a 01 01 00 00 00 00
10: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
20: a1 ff 00 00 00 00 00 00 00 00 00 00 62 f4 50 72
30: 00 00 00 00 44 00 00 00 00 00 00 00 00 00 03 01
40: 62 f4 50 72 01 00 02 00 00 00 00 00 00 00 00 00
    ^^
50: 02 f0 04 00 00 00 00 00 a8 a8 a8 20 3f 00 ff 20
60: 00 00 00 c0 00 00 00 00 00 00 00 00 00 00 00 00
70: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
80: 00 00 00 00 60 a0 bb 3e 00 00 02 10 00 00 00 00
90: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 01
a0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
b0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
c0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
d0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
e0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
f0: 00 00 00 00 00 00 00 00 10 00 00 00 00 00 00 00
-- 
Krzysztof Halasa
-- 
VGER BF report: U 0.500121
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/