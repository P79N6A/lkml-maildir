Date: Fri, 14 Jul 2000 19:12:45 +0200 (CEST)
From: Andrea Arcangeli <>
Subject: Re: [Announce] BKL shifting into drivers and filesystems - beware
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/7/14/110

On Thu, 13 Jul 2000, Alan Cox wrote:
>6 weeks to fix the VM is too short. But then I think we may have to accept
>that we dont get the VM perfect until 2.5. We just need to get it back working
>as well as 2.0 did 
IMHO the fact the memory balancing doesn't know about the _class_zone
where the user want to allocate memory is one major problem that we have
in 2.4.x. Without that chance Juan's kernel will keep trying to take some
ISA DMA memory free even if he doesn't use floppy or ISA soundcard and it
won't provide LRU behaviour within the classzone. 2.0.x wasn't wasting 
time this way.
This is one of the things that is fixed since _ages_ ago (I trapped it as
soon as it seen the light) in classzone.
What I mean is that if shrink_mmap doesn't get a zone_t pointer as
parameter, the VM will always end doing something wrong. There's no way to
fix that except reinserting the parameter that gives the information about
the allocation as I did in classzone.
Also in the long term we'll pass much more than the zone_t information to
the memory balancing code (we'll add the order of the allocation for
keeping care of fragmentation and the wanted colour of the page for
example).
I'll be glad to extract such part of classzone as a clean patch against
latest Linus's tree if somebody is interested.
Andrea
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/