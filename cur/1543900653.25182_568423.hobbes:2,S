Date: Thu, 12 Jul 2007 12:26:48 -0400
From: "Gregory Haskins" <>
Subject: Re: Forward port of latest RT patch (2.6.21.5-rt20) to 2.6.22 available
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/7/12/208

On Thu, 2007-07-12 at 14:07 +0200, Ingo Molnar wrote:
> great! We had the upstream -rt port to .22 in the works too, it was just 
> held up by the hpet breakage - which Thomas managed to fix earlier 
> today. I've released the 2.6.22.1-rt1 patch to the usual place:
> 
> 
http://redhat.com/~mingo/realtime-preempt/
Hi Ingo,
  For the most part, it seems you guys have resolved most of the issues
that we ran into as well (e.g. early-flush-tlb, relocated die-notifier,
etc, come to mind).  I found one patch that was missing that allows
debug configurations to build properly.  Heres that patch:
--- linux-2.6.21.orig/kernel/latency_trace.c
+++ linux-2.6.21/kernel/latency_trace.c
@@ -24,6 +24,7 @@
 #include <linux/utsrelease.h>
 #include <asm/uaccess.h>
 #include <asm/unistd.h>
+#include <asm/asm-offsets.h>
 #include <asm/rtc.h>
 #include <linux/stacktrace.h>
With this patch in place, I am able to build/boot both a 21.1-rt1 kernel
with a standard x86_64 PREEMPT_RT+SMP both with and without the usual
debug options, so that is great!
We did find a regression.  I was mistaken earlier when I mentioned our
T60p laptops couldn't boot.  It turns out that issue was resolved
somewhere along the way and our published patches based on 21.5-rt19 do
allow the laptop to boot event with acpi=on.  With 22.1-rt1 the laptop
crashes unless acpi=off.  Now that we have your queue we will bisect
this and post that fix as well.
Thanks!
-Greg
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/