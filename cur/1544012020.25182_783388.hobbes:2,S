Date: Mon, 22 Dec 2008 21:24:33 +0000
From: Alasdair G Kergon <>
Subject: Re: [dm-devel] Re: Device mapper support for more than one target ?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/12/22/206

On Tue, Dec 23, 2008 at 12:24:49AM +0530, Sandeep K Sinha wrote:
> On Tue, Dec 23, 2008 at 12:20 AM, Alasdair G Kergon <agk@redhat.com> wrote:
> > On Mon, Dec 22, 2008 at 10:52:08PM +0530, Sandeep K Sinha wrote:
> > Because whether or not it makes sense to send any specific ioctl to more
> > than one target in parallel depends on what that ioctl does.  When we
> > added that code we said that we could add hard-coding for specific
> > ioctls if the need arose, but so far it hasn't.
> No, the philosophy should be that we send the ioctl's to the mapped
> device and not to the targets underlying that mapped-device.
That's not what the current implementation was for, viz. passing scsi
ioctls through dm multipath devices.
> And doing so, I should be able to access the complete map that belongs
> to that mapped device. If I implement an ioctl of my own and try to
> serve it, the problem would be that it would never allow me to serve
> it if has more than one target.
As I said above, if the need arises we can have a whitelist mechanism
for ioctls to be handled differently, but the only safe default
behaviour is the one that has been implemented.
Alasdair
-- 
agk@redhat.com