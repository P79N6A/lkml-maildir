Date: Mon, 4 Mar 2002 08:59:26 +0000 (GMT)
From: Steve Hill <>
Subject: Re: [Patch] ALi M7101 watchdog
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/3/4/40

On Fri, 1 Mar 2002, Tim Hockin wrote:
> The WDT in the 7101 is almost USELESS from user-space.  It has a MAXIMUM 1
> second timeout, and is tied straight to RESET.  If you miss ONE feeding,
> you reboot.  In our kernel we have a 1/4 second timer to feed the watchdog,
If you look at the code you will see that I am refreshing the watchdog as 
1/4 second intervals - the userspace watchdog is handled in software so 
that if it does not get a heartbeat every 30 seconds then the driver stops 
sending the automated 1/4 second heartbeats to the hardware.
We've been using a similar (very hacked about) watchdog for about a year 
without any problems but I have only just gotten around to neatening it 
up.
> random reboots.  If I was allowed to, I would have used the WDT for reboot
> ONLY, and had it off otherwise - it is WAAAAY finicky.
Under this patch, if you don't open /dev/watchdog then the watchdog is 
only ever activated for reboots.
-- 
- Steve Hill
System Administrator         Email: steve@navaho.co.uk
Navaho Technologies Ltd.       Tel: +44-870-7034015
        ... Alcohol and calculus don't mix - Don't drink and derive! ...
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/