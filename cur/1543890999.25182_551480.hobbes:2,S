Date: Thu, 31 May 2007 15:34:26 +0200
From: Ingo Molnar <>
Subject: Re: [PATCH] x86_64 irq: check remote IRR bit before migrating level triggered irq (v2)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/5/31/150

looks good to me:
  Acked-by: Ingo Molnar <mingo@elte.hu>
with a few minor style nits:
> +static int io_apic_level_ack_pending(unsigned int irq)
> +{
> +	struct irq_pin_list *entry;
> +	unsigned long flags;
> +	int pending = 0;
> +	spin_lock_irqsave(&ioapic_lock, flags);
newline after variable sections please.
> +	entry = irq_2_pin + irq;
> +	for (;;) {
> +		unsigned int reg;
> +		int pin;
> +		pin = entry->pin;
ditto.
> +		if (pin == -1)
> +			break;
> +		reg = io_apic_read(entry->apic, 0x10 + pin*2);
> +		/* Is the remote IRR bit set? */
> +		pending |= (reg >> 14) & 1;
> +		if (!entry->next)
> +			break;
> +		entry = irq_2_pin + entry->next;
> +	}
> +	spin_unlock_irqrestore(&ioapic_lock, flags);
> +	return pending;
optional: it looks a bit better with a newline before the 'return' 
statement.
> +}
> +
> +
and here there's one too much newline :-)
	Ingo
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/