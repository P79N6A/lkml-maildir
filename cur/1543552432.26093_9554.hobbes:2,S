Date: Tue, 24 Oct 2000 23:37:42 +0200
From: Bernd Eckenfels <>
Subject: Re: unfair stress on non memory allocating apps while swapout (in 2.4)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/10/24/29

On Mon, Oct 23, 2000 at 02:21:11PM -0200, Rik van Riel wrote:
> 1) some process allocates gobs of memory
> 2) the kernel swaps out memory from all processes
> 3) some of the other - partly swapped out - processes
>    wake up and need to be swapped in
> 4) these other processes have to ALLOCATE MEMORY to be
>    able to page in parts of themselves ... this can be
>    very slow at times
So the question is we have 2 problems here, one is that we surely want to
page out all idle/unused pages of an other process before we swap out a page
of the process which is having the need for new mem (this is based on the
asumption that a growing process is doing something usefull with the recet
accessed memory). On the other hand it puts a heavy penalty on a running
process. something which wonders me is, if we should try to actually switch
between both modes in my situation:
a) process a is growing and consumes all memory
b) process b is sleeping an can be swaped out
c) process c is running
now there will be some time when all process b's are swaped out. So the
pages of actual running programs (in my case vmstat) are on the list for
next to be swaped out pages. In this case the VM should try to avoid paging
out other (non growing but active) process but instead fall back to page out
pages from the growing a process.
This way we wont reduce the IO for paging, but the penalty is on the
offending process.
I am not too deep into the VM, is there a LRU list over all swap-out-able
pages and can we recognize the fact that the "oldest" page in that list is
"too new"? This will realy optimize the behavious on low memory and wont
change the behaviour in normal swap out situations.
Greetings
Bernd
> 
> regards,
> 
> Rik
> --
> "What you're running that piece of shit Gnome?!?!"
>        -- Miguel de Icaza, UKUUG 2000
> 
> 
http://www.conectiva.com/
		
http://www.surriel.com/
> 
> 
> 
-- 
  (OO)      -- Bernd_Eckenfels@Wendelinusstrasse39.76646Bruchsal.de --
 ( .. )  ecki@{inka.de,linux.de,debian.org} 
http://home.pages.de/~eckes/
  o--o     *plush*  2048/93600EFD  eckes@irc  +497257930613  BE5-RIPE
(O____O)  When cryptography is outlawed, bayl bhgynjf jvyy unir cevinpl!
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/