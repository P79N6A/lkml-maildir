Date: Thu, 11 Nov 1999 11:20:47 +0000
From: David Woodhouse <>
Subject: Re: [Fwd: Getting IOCTL's into VFS File System Drivers]
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/11/11/31

When the Linux kernel boots with an ext2 root filesystem, it mounts it 
readonly. During the boot procedure, after control has passed to userspace, 
the init scripts will fsck the root filesystem and only after that will they 
mount it read only.
Why can't you do the same for nwfs? If you can pass enough information to the 
kernel to allow it to find a single copy of the filesystem, you don't actually 
need to bring any mirrors online or enable read/write operation until later.
jmerkey@timpanogas.com said:
> 1.  Config mirror groups during boot.
If the kernel on its own can find the block device(s) needed to mount 
read-only, then it doesn't actually need to find the mirror devices until 
later, when it's mounted read/write.
> 2.  Ask User Config Questions by querying FS data, if needed.
Also not needed before it's mounted RW.
> 3.  Check Volume Tables if fsck is required (rather than build them
>	twice in user space)
As above.
> 4.  not createing chicken/egg scenario becuase NWFS needs EXT2 to create
>	it's "IOCTL" access point to perform the operations above without EXT2.
If the kernel can manage to mount the filesystem readonly at boot, then you can
happily either mount /proc or use /dev nodes for this. In the init scripts.
> 5.  Utilities can talk to FS for namespace maintenance, etc. during
>	normal opns. 
I don't understand this one, but I severely doubt that it has to happen 
before the init scripts are run, which the filesystem is still mounted 
readonly.
----                                ----                                 ----
David Woodhouse       David.Woodhouse@mvhi.com      Office: (+44) 1223 810302
 Project Leader,    Process Information Systems     Mobile: (+44) 7976 658355
    Axiom (Cambridge) Ltd., Swaffham Bulbeck, Cambridge, CB5 0NA, UK.
             finger dwmw2@ferret.lmh.ox.ac.uk for PGP key.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/