Date: 08 Dec 2004 07:31:51 -0500
From: jamal <>
Subject: Re: Hard freeze with 2.6.10-rc3 and QoS, worked fine with 2.6.9
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/12/8/77

On Wed, 2004-12-08 at 00:17, Patrick McHardy wrote:
> I think these tests are a waste of time. struct tcf_police is not
> userspace-visible, so it's highly unlikely that the tc version matters.
> Why an old kernel needs to be tested is beyond me. 
Regression testing. 
You need both backward and forward compatibility.
Old kernels must continue to work with new tc for the policer using the
old syntax.
new kernels must continue to work with old tc for policer management
using old syntax.
Policer existed before any tc action code was written and has a very
different layout of the structure. User tools and classifiers (accessed
from user tools) do touch that code.
These kind of tests constitute about 50% or more of my testing.
> For possible in-kernel
> breakage caused by the restructuring, without CONFIG_NET_CLS_ACT,
> struct tcf_police is only used in police.c, without any casts or
> assumptions about layout, so I can't see what could break. With
> CONFIG_NET_CLS_ACT, the only place where it is used outside of
> police.c is tcf_action_copy_stats, and this is exactly what this patch
> (tested) fixes.
> 
> If you still want to do these test, please use the attached patch.
No rush now that its in (I also dont have time or equipment at the
moment). Lets hope no more freezes reported. When i get time i will look
into it. 
cheers,
jamal
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/