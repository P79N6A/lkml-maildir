Date: Sat, 20 Feb 1999 22:23:10 +0100
From:  jens@pinguin ...
Subject: Suspending my box...
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/2/20/80

Hi,
I have an ATX mainboard with this cool(tm) feature that you can choose
whether the big switch on the front turns the machine off or just enters
suspend mode. Now I have configured my machine in the BIOS to enable APM,
and to enter suspend mode after 15 minutes. Kernel 2.1.131ac10 is running
here, with APM support compiled in. Still, although _absolutely nothing_
happens on the machine (tested it with init S;sync and waiting 20 minutes),
it does not enter suspend mode.
If I press the big red button, it enters suspend all right, but doesn't wake
up on it's own if there is network traffic (I have a PCI Realtek on IRQ 9
and set this "Primary INTR" thing in the APM configuration to "Primary" [the
mainboard docs are a little misleading there...]). Grumble...
What I would like, is a daemon that checks for IRQ activity (configurable
from Linux, not in the BIOS), and if there is no activity at certain IRQs
for a certain time, enters sleep mode, then enters suspend mode, but before
this turns off (some of) my SCSI hard disks. scsi-idle patch from 2.1.105
does this well (with a little bit of manual patching), but not as soon as
the CPU clock is down to zero.
I do *not* want the machine to be switched off (like the
suspend-to-swapspace patch does, that was announced here recently), it must
be ready again in a matter of seconds in case of network traffic.
And, of course, I would like the machine to wake up in time for the next
cron job. =;)
Anyone care to comment? Is this at all possible, stopping SUSPEND mode by
software? 
My hardware:
- EPOX MVP3E-M board, VIA chipset, BIOS from 10/31/1998
- Tekram DC390F (U/W) SCSI host
- 3 hard disks
- anything else important?
Thanks!
-- 
_ciao, Jens_______________________________ 
http://www.pinguin.conetix.de
    cat /dev/boiler/water | tea | sieve > /cup
    mount -t hdev /dev/human/mouth01 /mouth ; cat /cup >/mouth/gulp
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/