Date: Thu, 11 Nov 2004 00:42:03 +0100
From: Pavel Machek <>
Subject: Re: [PATCH]a tar filesystem for 2.6.10-rc1-mm3
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/11/11/48

Hi!
>   let's think about the way we access the file which contained in a tar file
> may we can untar the whole thing and we find the file we want to access
> or we can use the t option with tar to list all the files in the tar
> and then untar
> the only one file we want to access.
> 
>   but with the help of the tarfs,we can mount a tar file to some dir and access
> it easily and quickly.it's like the tarfs in mc.
> 
>  just mount -t tarfs tarfile.tar /dir/to/mnt -o loop
> then access the files easily.
> 
> it was writen by Kazuto Miyoshi (kaz@earth.email.ne.jp) Hirokazu
> Takahashi (h-takaha@mub.biglobe.ne.jp) for linux 2.4.0
> 
> and i make it work for linux 2.6.0. now a patch for linux
> 2.6.10-rc1-mm3
Hmm, at least it needs to be indented by tab, see
Documentation/CodingStyle. If it could do compressed tars... well I
could find a use for _that_...
									Pavel
> +static int tarfs_readdir(struct file * filp,
> +                        void * dirent, filldir_t filldir)
> +{
> +  struct inode *inode = filp->f_dentry->d_inode;
> +  int err;
> +  struct tarent *dir_tarent, *ent;
> +  int dtype=0;
> +  int count, stored;
> +
> +  dir_tarent = TARENT(inode);
> +
> +  message("tarfs: tarfs_readdir (dir_tarent %p, f_pos %ld)\n",
> +         dir_tarent, (long)filp->f_pos);
> +
-- 
People were complaining that M$ turns users into beta-testers...
...jr ghea gurz vagb qrirybcref, naq gurl frrz gb yvxr vg gung jnl!
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/