Date: Tue, 20 Mar 2007 19:01:21 +0100
From: Pavel Machek <>
Subject: Re: "reboot" swsusp mode leaves moon icon blinking
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/3/20/228

Hi!
> > ...and cause is really simple.
> > 
> > During resume, we do not know that "reboot" method was used, so we
> > assume plaform and make the led blink...
> 
> What does the "reboot" swsusp mean?
echo reboot > ...disk.
> I am having this (or a similar problem):
> 
> 	echo shutdown > /sys/power/disk; echo disk > /sys/power/state
Yep, that's duplicate. Try patch below.
								Pavel
> I saved some /proc files (interrupts, acpi/processor/power, ...) and
> compared them before the suspend and after the resume but I could not
> find any differences.
> 
> > diff --git a/kernel/power/disk.c b/kernel/power/disk.c
> > index 873cdf8..dee0ff4 100644
> > --- a/kernel/power/disk.c
> > +++ b/kernel/power/disk.c
> > @@ -241,18 +241,11 @@ static int software_resume(void)
> >  		goto Done;
> >  	}
> >  
> > -	error = platform_prepare();
> > -	if (error) {
> > -		swsusp_free();
> > -		goto Thaw;
> > -	}
> > -
> 
> What is platform_prepare() actually good for when _resuming_? I tried to
> follow the function calls and it seems to disable a lot of thing instead
> of re-enabling them...?
> 
> =Hannes
> -
> To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
> the body of a message to majordomo@vger.kernel.org
> More majordomo info at  
http://vger.kernel.org/majordomo-info.html
> Please read the FAQ at  
http://www.tux.org/lkml/
-- 
(english) 
http://www.livejournal.com/~pavelmachek
(cesky, pictures) 
http://atrey.karlin.mff.cuni.cz/~pavel/picture/horses/blog.html
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/