Date: Thu, 8 Apr 1999 13:59:09 +0200 (CEST)
From: Henrik Laurila <>
Subject: Re: Socket termination problem
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/4/8/26

On Fri, 26 Mar 1999, Andi Kleen wrote:
> If you can reproduce it could you supply a tcpdump of a connection that leads
> to such a stuck socket?
Now I have been able to grab a whole session. This is only the last lines, 
the whole log is over 200 kbytes... 
After this the socket state turned into CLOSE_WAIT, with the socket timers
turned off, and the sending process (sendmail) was never notified. If a
SIGIO is send manually to the sendmail process, it would terminate and the
socket would go to LAST_ACK and stay there `forever'. 
/Henrik
13:04:08.000000 bore.fysik.lu.se.23556 > mail2.hotmail.com.smtp: P
                2330343:2331803(1460) ack 309 win 16060
13:04:08.000000 mail2.hotmail.com.smtp > bore.fysik.lu.se.23556: . ack
                2320123 win 21900 (DF)
13:04:08.000000 bore.fysik.lu.se.23556 > mail2.hotmail.com.smtp: P
                2331803:2333263(1460) ack 309 win 16060
13:04:08.000000 bore.fysik.lu.se.23556 > mail2.hotmail.com.smtp: P
                2333263:2334723(1460) ack 309 win 16060
13:04:08.000000 bore.fysik.lu.se.23556 > mail2.hotmail.com.smtp: P
                2334723:2336183(1460) ack 309 win 16060
13:04:08.000000 mail2.hotmail.com.smtp > bore.fysik.lu.se.23556: . ack
                2317203 win 24820 (DF)
13:04:08.000000 mail2.hotmail.com.smtp > bore.fysik.lu.se.23556: . ack
                2323043 win 18980 (DF)
13:04:08.000000 mail2.hotmail.com.smtp > bore.fysik.lu.se.23556: . ack
                2325963 win 16060 (DF)
13:04:08.000000 bore.fysik.lu.se.23556 > mail2.hotmail.com.smtp: P
                2336183:2337643(1460) ack 309 win 16060 (DF)
13:04:08.000000 bore.fysik.lu.se.23556 > mail2.hotmail.com.smtp: P
                2337643:2339103(1460) ack 309 win 16060 (DF)
13:04:08.000000 bore.fysik.lu.se.23556 > mail2.hotmail.com.smtp: P
                2339103:2340563(1460) ack 309 win 16060 (DF)
13:04:08.000000 bore.fysik.lu.se.23556 > mail2.hotmail.com.smtp: P
                2340563:2342023(1460) ack 309 win 16060 (DF)
13:04:08.000000 mail2.hotmail.com.smtp > bore.fysik.lu.se.23556: . ack
                2327423 win 14600 (DF)
13:04:08.000000 mail2.hotmail.com.smtp > bore.fysik.lu.se.23556: . ack
                2328883 win 13140 (DF)
13:04:08.000000 mail2.hotmail.com.smtp > bore.fysik.lu.se.23556: . ack
                2330343 win 11680 (DF)
13:04:08.000000 mail2.hotmail.com.smtp > bore.fysik.lu.se.23556: . ack
                2333263 win 8760 (DF)
13:04:08.000000 mail2.hotmail.com.smtp > bore.fysik.lu.se.23556: . ack
                2336183 win 5840 (DF)
13:04:08.000000 mail2.hotmail.com.smtp > bore.fysik.lu.se.23556: . ack
                2342023 win 0 (DF)
13:04:08.000000 mail2.hotmail.com.smtp > bore.fysik.lu.se.23556: . ack
                2339103 win 2920 (DF)
13:04:09.000000 bore.fysik.lu.se.23556 > mail2.hotmail.com.smtp: . ack 309
                win 16060
13:04:09.000000 mail2.hotmail.com.smtp > bore.fysik.lu.se.23556: . ack
                2342023 win 0 (DF)
13:04:10.000000 mail2.hotmail.com.smtp > bore.fysik.lu.se.23556: F
                373:373(0) ack 2342023 win 0 (DF)
13:04:10.000000 bore.fysik.lu.se.23556 > mail2.hotmail.com.smtp: . ack 309
                win 16060 (DF)
13:04:10.000000 mail2.hotmail.com.smtp > bore.fysik.lu.se.23556: P
                309:373(64) ack 2342023 win 0 (DF)
13:04:10.000000 bore.fysik.lu.se.23556 > mail2.hotmail.com.smtp: . ack 374
                win 16060 (DF)
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/