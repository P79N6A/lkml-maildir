Date: Thu, 12 Jul 2001 11:26:13 +0200
From: Andi Kleen <>
Subject: Re: [lvm-devel] Re: 2x Oracle slowdown from 2.2.16 to 2.4.4
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/7/12/16

On Thu, Jul 12, 2001 at 04:30:46AM +0200, Andrea Arcangeli wrote:
> I will soon somehow make those changes in the lvm (based on beta7) in my
> tree and it will be interesting to see if this will make a difference. I
> will also have a look to see if I can improve a little more the lvm_map
> but other than those non rw semaphores there should be not a significant
> overhead to remove in the lvm fast path.
Even if you fix the snapshot_sem you still have the down on the _pe_lock 
in lvm_map. The part covered by the PE lock is only a few tenths of cycles
shorter than the part covered by the snapshot semaphore; so it is unlikely
that you see much difference unless you change both to rwsems.
Wouldn't a single semaphore be enough BTW to cover both? 
-Andi
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/