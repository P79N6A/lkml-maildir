Date: Sun, 9 Mar 2003 17:32:42 +0100
From: Andi Kleen <>
Subject: [PATCH] Work around console initialization ordering problem
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/3/9/72

Works around the console ordering problem in 2.5.64-bk3. Following 
the similar fix I did for x86-64.
-Andi
--- linux-2.5.64-work/arch/i386/kernel/setup.c-o	2003-03-05 10:40:08.000000000 +0100
+++ linux-2.5.64-work/arch/i386/kernel/setup.c	2003-03-09 17:27:57.000000000 +0100
@@ -516,6 +516,9 @@
 	int len = 0;
 	int userdef = 0;
 
+	if (!strstr(saved_command_line, "console="))
+	     strcat(saved_command_line, " console=tty0");
+
 	/* Save unparsed command line copy for /proc/cmdline */
 	memcpy(saved_command_line, COMMAND_LINE, COMMAND_LINE_SIZE);
 	saved_command_line[COMMAND_LINE_SIZE-1] = '\0';
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/