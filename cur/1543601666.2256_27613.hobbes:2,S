Date: Thu, 20 Sep 2001 02:01:00 +0200
From: Andrea Arcangeli <>
Subject: Re: pre12 VM doubts and patch
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/9/19/267

On Thu, Sep 20, 2001 at 12:51:06AM +0100, Hugh Dickins wrote:
> I'm off-by-one when I try it tomorrow.
yes you're off by one but that was because of something I wasn't allowed
to do safely ;) sorry (see my last email to Linus).
> I don't think so: as the comment says, one for the page cache,
> one for the caller of writepage, one (perhaps) for page->buffers.
btw, we should be even smarter, even if there are buffers we should
still drop both the buffers and then the page from the pagecaceh. It's
just an orphan, it must be collected away cleanly without any I/O even
if there are buffers.  The other option would be to cleanup the orphans
from free_page_and_swap_cache but that would not be optimal as we try to
be lazy and to avoid the swap_count checks in the exit(2)/munmap(2) fast
paths.
Andrea
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/