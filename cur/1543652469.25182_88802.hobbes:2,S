Date: 12 Nov 2002 16:00:36 +0000
From: Alan Cox <>
Subject: Re: [PATCH] [RFC] increase MAX_ADDR_LEN
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/11/12/108

On Tue, 2002-11-12 at 15:14, Roland Dreier wrote:
> Hmm... the problem I would like to solve is that IP-over-InfiniBand
> has 20 byte hardware addresses.  One can implement a driver that lies
> about its HW address len (you have an internal ARP cache and only
> expose a hash value/cookie to the rest of the world).  In fact I've
> done just that for IPoIB.
Our ARP code handles AX.25 fine, and that can include long addresses, so
either we have a live bug or it works 8). The multicast layer does have
problems with addresses over 8 bytes (MAX_ADDR_LEN).
> It works but it's ugly and overly complex.  I would like to find a
> clean solution for 2.5/2.6, but it looks like it will require changes
> to the net core.  I'd like to do those now so the IPoIB driver can
> just drop in cleanly later.  (I want to be able to just add
> drivers/infiniband during 2.6 without and invasive changes required)
I think you need to do two things.
1. Increase MAX_ADDR_LEN
2. Add some new address setting ioctls, and ensure the old ones keep the
old address length limit. That is needed because the old caller wont
have allocated enough address space for a 20 byte address return.
You have to solve both though, and the first patch should probably be
the one to add more sensible address set/get functions.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/