Date: Tue, 15 Feb 2000 12:19:04 -0500
From: "Theodore Y. Ts'o" <>
Subject: Re: char/Serial.c
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/2/15/104

   Date: Tue, 15 Feb 2000 08:46:05 -0500
   From: Uncle George <gatgul@voicenet.com>
   I might say that NT, the other half of my 486 is quite content with
   the disposition of the I/O card, even with the ( I personnaly didn't
   know it was set at ) strange IRQ setting.  One does not understand
   why the current set of kernels could not do the same!
   I dont understand where the problems could crop up. If I were to try
   to detect the IRQ for each of the well know Serial I/O addresses, I
   would simply redirect the interrupt vectors ( temporarily ) to
   addresses that I am aware of.  This appears to be exceedingly simple,
   but I suppose the concept of modules, may make that dangerous to do.
That is indeed how to do IRQ autodetecting.  Unfortunately,
1) Some number of (non-serial) devices will send interrupts when you're
not expecting them, confusing the interrupt detection algorithm.
2) Some cheap UART-clones (and the internal modems were the worst of
lot) couldn't be counted upon to generate an interrupt on demand from
the serial testing code.
Microsoft has the advantage that they have a huge sofware testing lab
where they can get one of the hundreds of cheap sh*t hardware out there,
and try to find something that works for all of them.  They also have
the advantage that the developers don't get all of the complaints when
their overly clever algorithms don't work.  
(And being my family's designated-computer-troubleshooter, I can
guarantee you, from personal experience, it doesn't work all the time
for Windows, and you have to struggle with Windows control panels and
reboots the machine multiple times when you try to get it working.  When
Windows doesn't handle things, it gets really ugly.)
If you want to do autodetection, you can do it by running the setserial
program.  "setserial /dev/ttyS1 auto_irq autoconfig".  If it works for
you, congratulations.  It doesn't work for everone, and I got tired of
the fielding all of support questions when it didn't work.
						- Ted
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/