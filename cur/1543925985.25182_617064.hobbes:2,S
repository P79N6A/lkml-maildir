Date: Wed, 14 Nov 2007 01:25:17 +0100
From: Andi Kleen <>
Subject: Re: [PATCH] [13/45] x86_64: Increase VDSO_TEXT_OFFSET for ancient binutils
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/11/13/483

On Wednesday 14 November 2007 01:21:07 CaT wrote:
> On Fri, Sep 21, 2007 at 10:44:54PM +0200, Andi Kleen wrote:
> > For some reason old binutils genertate larger headers so
> > increase the text offset of the vdso to avoid linker errors.
> > 
> > Signed-off-by: Andi Kleen <ak@suse.de>
> > 
> > ---
> >  arch/x86_64/vdso/voffset.h |    2 +-
> >  1 file changed, 1 insertion(+), 1 deletion(-)
> > 
> > Index: linux/arch/x86_64/vdso/voffset.h
> > ===================================================================
> > --- linux.orig/arch/x86_64/vdso/voffset.h
> > +++ linux/arch/x86_64/vdso/voffset.h
> > @@ -1 +1 @@
> > -#define VDSO_TEXT_OFFSET 0x500
> > +#define VDSO_TEXT_OFFSET 0x600
> 
> This still breaks under Debian sarge. There is this (german) forum
> thread about it:
iirc sarge was the one with the unfixable 2MB text pages, generating gigantic 
vDSOs. At least from my side i essentially gave up on that one because
there was no way to generate a reasonable vDSO.
You'll need to either up- or downgrade your binutils. There was only a narrow 
window where binutils were broken such, but that release unfortunately hit it.
-Andi
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/