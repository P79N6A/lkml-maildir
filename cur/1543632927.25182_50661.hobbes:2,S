Date: Thu, 6 Jun 2002 12:07:01 +1000
From: Peter Chubb <>
Subject: [PATCH] Fix sys_capset in 2.5.20+patches...
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/6/5/246

Hi,
	The current head-of-bk-tree 2.5 kernel breaks capset() (and so
named, for one, won't run).  SYS_setcap() will *always* return -EINVAL
with the current tree.
--- /tmp/geta315	Thu Jun  6 12:05:43 2002
+++ linux-2.5-import/kernel/capability.c	Thu Jun  6 12:05:19 2002
@@ -134,10 +134,11 @@
      if (get_user(version, &header->version))
 	     return -EFAULT; 
 
-     if (version != _LINUX_CAPABILITY_VERSION)
+     if (version != _LINUX_CAPABILITY_VERSION) {
 	     if (put_user(_LINUX_CAPABILITY_VERSION, &header->version))
 		     return -EFAULT; 
              return -EINVAL;
+     }
 
      if (get_user(pid, &header->pid))
 	     return -EFAULT; 
--
Peter C					    peterc@gelato.unsw.edu.au
You are lost in a maze of BitKeeper repositories, all almost the same.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/