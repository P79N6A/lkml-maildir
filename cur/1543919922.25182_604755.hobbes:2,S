Date: Sat, 13 Oct 2007 20:45:20 +0200
From: Michael Buesch <>
Subject: Re: [patch 7/8] b43 wireless needs <linux/io.h>
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/10/13/193

On Saturday 13 October 2007 20:38:43 Geert Uytterhoeven wrote:
> On Sat, 13 Oct 2007, Larry Finger wrote:
> > Geert Uytterhoeven wrote:
> > > linux/drivers/net/wireless/b43/pio.h: In function 'b43_pio_write':
> > > linux/drivers/net/wireless/b43/pio.h:89: error: implicit declaration of function 'mmiowb'
> > >
> > > linux/drivers/net/wireless/b43/phy.c: In function 'b43_phy_write':
> > > linux/drivers/net/wireless/b43/phy.c:301: error: implicit declaration of function 'mmiowb'
> > >
> > > linuxdrivers/net/wireless/b43/sysfs.c: In function 'b43_attr_interfmode_store':
> > > linuxdrivers/net/wireless/b43/sysfs.c:147: error: implicit declaration of function 'mmiowb'
> > 
> > From the distribution list for this E-mail, I presume this error occurred for m68k. Is this correct?
> 
> That's correct.
> 
> > If so, I will probably need to prepare a similar patch for b43legacy.
> 
> I had no problems compiling b43legacy on m68k, though. Probably
> <linux/io.h> was included through some other include file.
> Of course it's safer to always #include <linux/io.h> when using I/O.
> 
> During linking, I did get a bunch of `undefined reference to `dma_*''
> errors, with both b43 and b43legacy (and a few other drivers). Probably
> they need to depend on HAS_DMA.
> I'll post separate patches for those after I've sorted them out.
We could make the b43 and b43legacy DMA engine code depend on HAS_DMA
then. So it can still be compiled with PIO. (Though, I don't know if
anybody would put such a card into a machine without DMA, anyway).
The DMA engine code is a seperate kconfig option.
-- 
Greetings Michael.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/