Date: Sun, 7 Jan 2001 18:23:31 +0100 (CET)
From: Trond Myklebust <>
Subject: Re: Even slower NFS mounting with 2.4.0
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/1/7/123

>>>>> " " == Alan Cox <alan@lxorguk.ukuu.org.uk> writes:
    >> > This is caused by 2.3/2.4 changes in the network code error
    >> > reporting of unreachables with UDP I suspect. It looks like
    >> > the NFS code hasn't yet caught up with the error notification
    >> > stuff
    >>
    >> No. It was the fact that he was forgetting to start the
    >> portmapper before mounting an NFS partition with locking
    >> enabled.
     > Its both. If you support the error notification then you see
     > the PORT UNREACH and you abandon early even if the user makes
     > that error
Hmm... How should we respond to that sort of thing? In principle the
NFS layer supposes that if we have a hard mount, then unreachable
ports etc are a temporary problem, and we should wait them out.  (In
fact, I've made an RPC 'ping' routine that improves on that behaviour
but which unfortunately didn't make it into 2.4.0.)
If we want to check that the port is reachable at the moment when we
mount, I think we should concentrate on making 'mount' more
intelligent. Perhaps have it RPC-ping the various ports (including the
local portmapper when we specify locking)?
Cheers,
  Trond
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/