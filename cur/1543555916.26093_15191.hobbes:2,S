Date: Tue, 28 Nov 2000 02:36:52 +0100
From: Andries Brouwer <>
Subject: Re: KERNEL BUG: console not working in linux
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/11/27/137

On Mon, Nov 27, 2000 at 08:27:38PM +0100, Petr Vandrovec wrote:
>   could original complainer (and peoples with AMD SC*) test following
> patch? It just does nothing in case that A20 enabled bit is already
> set - such as in case when there is nobody listening on 0x92 and
> so inb returns 0xFF... (patch is for 2.4.0-test11) 
> 
> --- linux/arch/i386/boot/setup.S.orig	Mon Oct 30 23:44:29 2000
> +++ linux/arch/i386/boot/setup.S	Mon Nov 27 20:22:04 2000
> @@ -647,8 +647,11 @@
>  #	Brown from Linux 2.2
>  #
>  	inb	$0x92, %al			# 
> +	testb   $02, %al
> +	jnz     no92
>  	orb	$02, %al			# "fast A20" version
>  	outb	%al, $0x92			# some chips have only this
> +no92:
> 
What about adding an additional
	andb	$0xfe, %al
in front of the outb?
If I understand things correctly, bit 0 of 0x92 is write-only
on some hardware, and writing 1 to it causes a reset, so we
never want that.
Andries
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/