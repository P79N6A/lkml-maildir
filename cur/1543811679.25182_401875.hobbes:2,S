Date: Tue, 28 Feb 2006 11:45:43 +0800
From: "Luke Yang" <>
Subject: Re: [PATCH] Replace "vmalloc_node" with "vmalloc" for no-mmu architectures in oprofile driver
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/2/27/441

On 2/28/06, Andrew Morton <akpm@osdl.org> wrote:
> You wanted CONFIG_MMU there.
    Yes.
>
> A better fix is to provide vmalloc_node() on nommu architectures.  COuld you
> compile-test this please?
    Tested.  Then my patch is obsolete. Thanks!
>
> --- devel/mm/nommu.c~nommu-implement-vmalloc_node       2006-02-27 19:30:47.000000000 -0800
> +++ devel-akpm/mm/nommu.c       2006-02-27 19:31:53.000000000 -0800
> @@ -53,7 +53,6 @@ DECLARE_RWSEM(nommu_vma_sem);
>  struct vm_operations_struct generic_file_vm_ops = {
>  };
>
> -EXPORT_SYMBOL(vmalloc);
>  EXPORT_SYMBOL(vfree);
>  EXPORT_SYMBOL(vmalloc_to_page);
>  EXPORT_SYMBOL(vmalloc_32);
> @@ -205,6 +204,13 @@ void *vmalloc(unsigned long size)
>  {
>         return __vmalloc(size, GFP_KERNEL | __GFP_HIGHMEM, PAGE_KERNEL);
>  }
> +EXPORT_SYMBOL(vmalloc);
> +
> +void *vmalloc_node(unsigned long size, int node)
> +{
> +       return vmalloc(size);
> +}
> +EXPORT_SYMBOL(vmalloc_node);
>
>  /*
>   *     vmalloc_32  -  allocate virtually continguos memory (32bit addressable)
> _
>
>
--
Best regards,
Luke Yang
magic.yyang@gmail.com; luke.adi@gmail.com
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/