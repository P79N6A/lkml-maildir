Date: Sat, 21 Jul 2007 10:00:49 +0200
From: Michal Piotrowski <>
Subject: Re: [broken-out-2007-07-20-00-22] kernel bug at kernel/params:570
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/7/21/56

Satyam Sharma pisze:
> On 7/21/07, Satyam Sharma <satyam.sharma@gmail.com> wrote:
>> Hopefully this bug should be 100% reproducible at boot time anyway.
>> Don't care much for XFS and unionfs, but hoping deselecting ATA from
>> the config doesn't change the variables much in this equation. ]
> 
> 
> Gargh! My system obviously cannot boot without libata. Guess it's
> time to go through git log and see how to fix that build breakage
> myself ...
> 
> Michal, how did you even manage to build / boot this kernel!
I commented origin.patch and mm.patch in series file, reverted xfs patches,
fixed libata build, deselected unionfs.
Here is a patch for libata
--- linux-work3-clean/drivers/ata/libata-core.c	2007-07-20 16:53:26.000000000 +0200
+++ linux-work3/drivers/ata/libata-core.c	2007-07-20 17:26:30.000000000 +0200
@@ -2036,7 +2036,7 @@ int ata_dev_configure(struct ata_device 
 		dev->max_sectors = min_t(unsigned int, ATA_MAX_SECTORS_128,
 					 dev->max_sectors);
 
-	if (ata_device_blacklisted(dev) & ATA_HORKAGE_ALPM) {
+	if (ata_dev_blacklisted(dev) & ATA_HORKAGE_ALPM) {
 		dev->horkage |= ATA_HORKAGE_ALPM;
 
 		/* reset link pm_policy for this port to no pm */
Regards,
Michal
-- 
LOG
http://www.stardust.webpages.pl/log/
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/