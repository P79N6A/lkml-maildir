Date: Wed, 23 Jan 2008 17:10:44 +0100
From: Willy Tarreau <>
Subject: Re: 2.6.24-rc8 hangs at mfgpt-timer
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/23/214

On Wed, Jan 23, 2008 at 09:36:46AM -0700, Jordan Crouse wrote:
> > Why not just ajust the constant in MFGPT_HZ since it's the only place (aside
> > the comments) where this is referenced ?
> > 
> > If you want I can send you a patch and adjust the comments at the same time.
> 
> That would be great.
OK will do ASAP.
> I think not allowing MFGPT timers for broken BIOSen is the right way to go.
> We can do  just-in-time detection the first time one of the drivers (timer
> tick or watchdog) asks for a timer, instead of the current way of probing
> automatically.
> 
> That way, you can go merrily on your way if you don't try to use any of
> the MFGPTs.  TinyBIOS users can compile out CONFIG_GEODE_MFGPT_TIMER and
> boot.
I like this method a lot. At least, people with broken bioses would have
trouble only if they modprobe geodewdt or do such things. They will easily
find the relation between their action and the problem. Right now, we only
know that it hangs after "NET: ...".
> I'll write up a patch.
Fine.
Thanks,
Willy