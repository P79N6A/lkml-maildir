Date: Wed, 09 Jan 2008 16:06:17 -0500
From: 	Valdis.Kletnieks@vt ...
Subject: Re: [PATCH][RFC][BUG] updating the ctime and mtime time stamps in msync()
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/9/281

On Wed, 09 Jan 2008 15:50:15 EST, Rik van Riel said:
> Could you explain (using short words and simple sentences) what the
> exact problem is?
> 
> Eg.
> 
> 1) program mmaps file
> 2) program writes to mmaped area
> 3) ???                   <=== this part, in equally simple words :)
> 4) data loss
It's like this:
Monday  9:04AM:  System boots, database server starts up, mmaps file
Monday  9:06AM:  Database server writes to mmap area, updates mtime/ctime
Monday <many times> Database server writes to mmap area, no further update..
Monday 11:45PM:  Backup sees "file modified 9:06AM, let's back it up"
Tuesday 9:00AM-5:00PM: Database server touches it another 5,398 times, no mtime
Tuesday 11:45PM: Backup sees "file modified back on Monday, we backed this up..
Wed  9:00AM-5:00PM: More updates, more not touching the mtime
Wed  11:45PM: *yawn* It hasn't been touched in 2 days, no sense in backing it up..
Lather, rinse, repeat....
[unhandled content-type:application/pgp-signature]