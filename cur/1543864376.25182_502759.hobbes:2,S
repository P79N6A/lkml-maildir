Date: Mon, 29 Jan 2007 15:51:25 +0000
From: Alan <>
Subject: Re: via irq quirk breakage
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/1/29/133

> Fix VIA quirks that were recently broken by Alan Cox in the upstream
> kernel (commit 1597cacbe39802d86656d1f2e6329895bd2ef531).
> 
> My understanding is that pci_find_present() doesn't work yet at the
> time the quirks are run. So I used a two-step quirk as is done for
> some other quirks already. First we detect the VIA south bridges
> and set the right low and high device limits, then we are ready to
> actually run the quirks on the affected devices.
My PCI tree is somewhat different to the default one and I did test it
but possibly sucked in some dependancies on the cyrix and other early PCI
handling changes in my dev tree. 
> Signed-off-by: Jean Delvare <jdelvare@suse.de>
Acked-by: Alan Cox <alan@redhat.com>
This is a lot neater than the original patch too. Only problem I see is
pci=reverse might need more care.
Alan
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/