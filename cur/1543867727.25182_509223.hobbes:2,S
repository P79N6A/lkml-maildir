Date: Thu, 15 Feb 2007 13:19:12 -0800
From: Jeremy Fitzhardinge <>
Subject: [PATCH] No need to use -traditional for processing asm in i386/kernel/
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/2/15/343

No need to use -traditional for processing asm in i386/kernel/
Signed-off-by: Jeremy Fitzhardinge <jeremy@xensource.com>
diff -r 2d901729b314 arch/i386/kernel/Makefile
--- a/arch/i386/kernel/Makefile	Thu Feb 15 13:00:50 2007 -0800
+++ b/arch/i386/kernel/Makefile	Thu Feb 15 13:10:49 2007 -0800
@@ -44,8 +44,6 @@ obj-$(CONFIG_PARAVIRT)		+= paravirt.o
 obj-$(CONFIG_PARAVIRT)		+= paravirt.o
 obj-y				+= pcspeaker.o
 
-EXTRA_AFLAGS   := -traditional
-
 obj-$(CONFIG_SCx200)		+= scx200.o
 
 # vsyscall.o contains the vsyscall DSO images as __initdata.
diff -r 2d901729b314 arch/i386/kernel/entry.S
--- a/arch/i386/kernel/entry.S	Thu Feb 15 13:00:50 2007 -0800
+++ b/arch/i386/kernel/entry.S	Thu Feb 15 13:10:49 2007 -0800
@@ -635,7 +635,7 @@ ENTRY(name)				\
 	SAVE_ALL;			\
 	TRACE_IRQS_OFF			\
 	movl %esp,%eax;			\
-	call smp_/**/name;		\
+	call smp_##name;		\
 	jmp ret_from_intr;		\
 	CFI_ENDPROC;			\
 ENDPROC(name)
diff -r 2d901729b314 include/asm-i386/percpu.h
--- a/include/asm-i386/percpu.h	Thu Feb 15 13:00:50 2007 -0800
+++ b/include/asm-i386/percpu.h	Thu Feb 15 13:10:49 2007 -0800
@@ -20,10 +20,10 @@
 #ifdef CONFIG_SMP
 #define PER_CPU(var, cpu) \
 	movl __per_cpu_offset(,cpu,4), cpu;	\
-	addl $per_cpu__/**/var, cpu;
+	addl $per_cpu__##var, cpu;
 #else /* ! SMP */
 #define PER_CPU(var, cpu) \
-	movl $per_cpu__/**/var, cpu;
+	movl $per_cpu__##var, cpu;
 #endif	/* SMP */
 
 #endif /* !__ASSEMBLY__ */
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/