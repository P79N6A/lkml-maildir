Date: Sat, 11 Aug 2007 09:23:42 +0200
From: Jean Delvare <>
Subject: Re: [PATCH] Add missing newlines to some uses of dev_<level> messages
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/8/11/34

Hi Joe,
On Tue, 07 Aug 2007 18:09:39 -0700, Joe Perches wrote:
> Found these while looking at printk uses.
> 
> Add missing newlines to dev_<level> uses
> Add missing KERN_<level> prefixes to multiline dev_<level>s
> Fixed a wierd->weird spelling typo
> Added a newline to a printk
Thanks for doing this.
> diff --git a/drivers/i2c/busses/i2c-pmcmsp.c b/drivers/i2c/busses/i2c-pmcmsp.c
> index 17cecf1..be99c02 100644
> --- a/drivers/i2c/busses/i2c-pmcmsp.c
> +++ b/drivers/i2c/busses/i2c-pmcmsp.c
> @@ -591,18 +591,18 @@ static int pmcmsptwi_master_xfer(struct i2c_adapter *adap,
>  	if (msg->flags & I2C_M_TEN)
>  		pmcmsptwi_set_twi_config(&oldcfg, data);
> 
> -	dev_dbg(&adap->dev, "I2C %s of %d bytes ",
> -		(msg->flags & I2C_M_RD) ? "read" : "write", msg->len);
> +	dev_dbg(&adap->dev, "I2C %s of %d bytes %s\n",
> +		(msg->flags & I2C_M_RD) ? "read" : "write", msg->len,
> +		(ret == MSP_TWI_XFER_OK) ? "succeeded" : "failed");
> +
>  	if (ret != MSP_TWI_XFER_OK) {
>  		/*
>  		 * TODO: We could potentially loop and retry in the case
>  		 * of MSP_TWI_XFER_TIMEOUT.
>  		 */
> -		dev_dbg(&adap->dev, "failed\n");
>  		return -1;
>  	}
> 
> -	dev_dbg(&adap->dev, "succeeded\n");
>  	return 0;
>  }
> 
> diff --git a/drivers/i2c/busses/i2c-pnx.c b/drivers/i2c/busses/i2c-pnx.c
> index 17376fe..f8d0dff 100644
> --- a/drivers/i2c/busses/i2c-pnx.c
> +++ b/drivers/i2c/busses/i2c-pnx.c
> @@ -575,7 +575,7 @@ static int __devinit i2c_pnx_probe(struct platform_device *pdev)
>  	else {
>  		freq_mhz = PNX_DEFAULT_FREQ;
>  		dev_info(&pdev->dev, "Setting bus frequency to default value: "
> -		       "%d MHz", freq_mhz);
> +		       "%d MHz\n", freq_mhz);
>  	}
> 
>  	i2c_pnx->adapter->algo = &pnx_algorithm;
> diff --git a/drivers/i2c/chips/menelaus.c b/drivers/i2c/chips/menelaus.c
> index 48a7e2f..76d4eda 100644
> --- a/drivers/i2c/chips/menelaus.c
> +++ b/drivers/i2c/chips/menelaus.c
> @@ -1198,7 +1198,7 @@ static int menelaus_probe(struct i2c_client *client)
>  		err = request_irq(client->irq, menelaus_irq, IRQF_DISABLED,
>  				  DRIVER_NAME, menelaus);
>  		if (err) {
> -			dev_dbg(&client->dev,  "can't get IRQ %d, err %d",
> +			dev_dbg(&client->dev,  "can't get IRQ %d, err %d\n",
>  					client->irq, err);
>  			goto fail1;
>  		}
drivers/i2c parts reviewed and
Acked-by: Jean Delvare <khali@linux-fr.org>
Note that there are 3 more messages to fix in
drivers/i2c/chips/menelaus.c (3 calls to pr_err.)
-- 
Jean Delvare
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/