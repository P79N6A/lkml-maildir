Date: Wed, 5 Mar 2008 02:28:34 +0100
From: Andi Kleen <>
Subject: Re: preempt bug in set_pmd_pfn?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/3/4/609

On Wednesday 05 March 2008 01:19:36 Jeremy Fitzhardinge wrote:
> Andi Kleen wrote:
> > On Wednesday 05 March 2008 01:07:11 Jeremy Fitzhardinge wrote:
> > 
> >> Andi Kleen wrote:
> >> 
> >>>> Won't this leave a stale tlb on the old processor?
> >>>> 
> >>>> 
> >>> __set_fixmap should be only used in early boot, so it's always
> >>> on CPU 0
> >>> 
> >> vdso32-setup.c:map_compat_vdso() uses it to create the compat vdso 
> >> mapping, which typically happens on the first execve(),
> >> 
> >
> > First execve for 32bit binaries?
> > 
> 
> Yes, 32-bit kernel.
Ok I'm talking about 64bit. If you ask me something about 32bit please
always mention it especially.
> > Anyways __set_fixmap is __init and at the first  execve (unless you have initramfs) 
> > init.text should be already freed.
> 
> No, its not __init.  If it were I don't think there would have been much 
> booting going on for the last few months.
For 64bit my original statement was correct.
-Andi