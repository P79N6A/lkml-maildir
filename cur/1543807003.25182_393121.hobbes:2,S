Date: Fri, 3 Feb 2006 13:09:25 +0100
From: Holger Eitzenberger <>
Subject: Re: Linux 2.6.15.2
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/2/3/86

On Mon, Jan 30, 2006 at 11:34:27PM -0800, Andrew Morton wrote:
> - A skbuff_head_cache leak causes oom-killings.
> 
> All of these only seem to affect a small minority of machines.
Hi,
I have searched for a description for the above mentioned bug report,
but havent found any.  Can you tell me?
The reason why I am asking that I am facing a similar problem on
kernel 2.6.10.  During performance tests (Intel XEON, SMP, PCI-X,
e1000, 2 - 4 Gig RAM) the machine was out of memory.
Tests showed that LowFree went linearly down to a few megabytes, where
most of the memory was used in skb_head_cache and size-1024 slab
caches.  These two summed up to ~270 MG, which was the reason for
that.
/proc/net/tcp showed that most of the memory was stuck in the RX
queues of some processes (two processes with ~1000 sockets each).
A look into /proc/sys/net/ipv4/tcp_mem showed that that the values in
there were way to high.  I hope that a reduction of these values will
help (not done yet).
/holger
-- 
ICQ 2882018 ++ Jabber: octavian@amessage.de ++
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/