Date: Wed, 26 Feb 2003 13:16:15 -0800
From: "Martin J. Bligh" <>
Subject: Re: [Lse-tech] [PATCH] New dcache / inode hash tuning patch
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/2/26/228

>> It actually seems a fraction slower (see systimes for Kernbench-16,
>> for instance).
> 
> Can you play a bit with the hash table sizes? Perhaps double the 
> dcache hash and half the inode hash ?
I quadrupled the dcache hash size ... helped a bit. Is still a little
slower, which I don't understand ... your plan should make it go faster,
AFAICS. Those off-node accesses to ZONE_NORMAL are really expensive for me.
Kernbench-2: (make -j N vmlinux, where N = 2 x num_cpus)
                              Elapsed        User      System         CPU
              2.5.62-mjb3       44.24      558.12       94.17     1473.83
         2.5.62-mjb3-andi       44.28      557.90       95.79     1475.67
      2.5.62-mjb3-andi-4x       44.20      557.96       94.77     1475.83
Kernbench-16: (make -j N vmlinux, where N = 16 x num_cpus)
                              Elapsed        User      System         CPU
              2.5.62-mjb3       45.19      560.95      114.77     1495.00
         2.5.62-mjb3-andi       45.39      561.29      117.73     1495.67
      2.5.62-mjb3-andi-4x       45.34      560.54      116.85     1493.50
> I suspect it really just needs a better hash function. I'll cook
> something up based on FNV hash.
Sounds good ;-)
M.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/