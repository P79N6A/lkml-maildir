Date: Tue, 2 Dec 2003 18:31:25 -0500
From: Ben Collins <>
Subject: Re: [PATCH] fix use-after-free in sbp2.c
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/12/2/219

On Mon, Dec 01, 2003 at 10:02:12PM +0100, Martin Waitz wrote:
> hi :)
> 
> when using some checking code (CONFIG_DEBUG_{SLAB,SPINLOCK_SLEEP},
> sbp2 fails to log in into my external hd enclosure.
> 
> that is because sbp2_agent_reset sends a packet and waits
> for its delivery.
> however, the function used to create the packet activates
> auto-destruct of the packet via hpsb_set_packet_complete_task.
> thus, the semaphore used for synchronization is destroyed
> while the sending task is waiting.
> 
> the following patch (against -test11) fixes sbp2 for me
Could you test what's in our repo first? We've already fixed this, but
it was done in a way different way than you did (we got rid of the
semaphore).
-- 
Debian     - 
http://www.debian.org/
Linux 1394 - 
http://www.linux1394.org/
Subversion - 
http://subversion.tigris.org/
WatchGuard - 
http://www.watchguard.com/
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/