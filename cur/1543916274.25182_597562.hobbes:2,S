Date: Sat, 22 Sep 2007 00:14:41 +0100
From: David Howells <>
Subject: Re: [PATCH 11/22] CacheFiles: Permit the page lock state to be monitored
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/9/21/521

Trond Myklebust <Trond.Myklebust@netapp.com> wrote:
> > This is used by CacheFiles to detect read completion on a page in the
> > backing filesystem so that it can then copy the data to the waiting netfs
> > page.
> 
> Won't it in any case want to lock the page too?
No.  Why would it?  All it wants to do is to read the page (copying it to the
netfs's page), assuming it becomes PG_uptodate.
> That would be the only way to ensure that the page is still mapped into the
> address space when you're writing it out...
I don't understand what you're getting at.  Write the page out where?  We've
just read it in from the cache, so why would we be writing it back out?
David
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/