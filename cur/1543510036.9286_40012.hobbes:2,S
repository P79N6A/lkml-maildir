Date: Mon, 20 Sep 1999 17:50:40 -0700
From: Ryan Murray <>
Subject: Re: [patch] stime/settimeofday/adjtimex SMP races (2.2.12 and 2.3.18ac5)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/9/20/204

On Tue, Sep 21, 1999 at 02:38:58AM +0200, Andrea Arcangeli wrote:
> On Mon, 20 Sep 1999, Ryan Murray wrote:
> 
> >set_rtc_mmss error messages are back when I removed RTC from the kernel.
> 
> Ok. This sound odd to me so there's definetly still something we are
> missing.
> 
> >hwclock seems to return a clock that is all over the map, right now it
> 
> Could you discover why hwclock is running in your system also after the
> boot script and before shutdown?
It doesn't run other than the boot script, and right before reboot,
except if I run it from a prompt.
> hwclock should never run while the system is at the production runlevel.
Agreed.
> Maybe you have some cron running hwclock? With ntpd enabled you shouldn't
I don't think anything is, I looked recently and didn't find anything.
> CMOS at the same time. Anyway the race seems very small to me and I would
> be surprised if you triggered it at shutdown time.
Yes, since it runs fine when the system is up (and it can be interrupted
with ^C :))
> Also make sure your hwclock binary is safe. If a binary hwclock out there
> is buggy then we are wasting time looking at the kernel 8).
I don't think that's it, but it could be:
> andrea@laser:~/kernel > hwclock -v
> hwclock 2.4c/util-linux 2.9t
$ hwclock -v
hwclock 2.4c/util-linux 2.9w
-- 
Ryan Murray (rmurray@cyberhqz.com, rmurray@glenayre.com)
Software Designer, Glenayre Technologies Inc.
The opinions expressed here are my own.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/