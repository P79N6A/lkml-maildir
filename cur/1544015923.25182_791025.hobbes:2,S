Date: Mon, 12 Jan 2009 15:36:29 -0800
From: (Eric W. Biederman)
Subject: Re: PCI, ACPI, IRQ, IOAPIC: reroute PCI interrupt to legacy boot interrupt equivalent
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2009/1/12/594

I don't get it. Why are we trying to do such a stupid thing?
This hardware behavior is not specific to boot interrupts or Intel.
This is the classic x86 ioapic behaviour of redirecting a ioapic irq
into a legacy irq when the ioapic entry is disabled.
If you really want not to have problems ensure all irqs 0-15
are disabled, and not needed.  Otherwise you are taking the chance
on something like this happening.
Disabling irqs generically appears to be a crap shoot, and not on a
path hardware vendors look at or care about heavily.  Disabling an irq
in hardware on every interrupt, increasing the cost of the interrupt
and walking down these neglected hardware paths seems stupid.  Especially
when the interrupt line might be shared and we can be disabling several
devices at once.
Is this case really so interesting and compelling that we want to fight
through and figure what we need to do to make this work reliably on every
x86 chipset?
Eric