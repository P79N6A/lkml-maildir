Date: Tue, 25 May 2004 13:53:42 -0700
From: john stultz <>
Subject: Re: System clock speed too high - 2.6.3 kernel
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/5/25/281

On Tue, 2004-05-25 at 02:22, Joris van Rantwijk wrote:
> On Fri, 26 Mar 2004, Praedor Atrebates wrote:
> > I have Mandrake 10.0, kernel-2.6.3-7mdk installed, on an IBM Thinkpad 1412
> > laptop, celeron 366, 512MB RAM.  I am finding that my system clock is ticking
> > away at a rate of about 3:1 vs reality, ie, I count ~3 seconds on the system
> > clock for every 1 real second.  I am running ntpd but this is unable to keep
> > up with the rate of system clock passage.
> 
> I have the same problem with kernel 2.6.6, only in my case the speed is
> exactly doubled (not 3:1). Saying "clock=tsc" at boot time solves this
> perfectly.
> 
> My mainboard is Asus P5A (4 years old) with ALi M1541 chipset.
> Linux detects a PM-Timer at port 0xec08. I measured the counting rate
> of this port (while safely running with clock=tsc) and it comes out at
> about 7159155 ticks per second. The rate expected by
> arch/i386/kernel/timer/timer_pm.c is 3579545 ticks per second, so this
> explains the double speed very nicely.
> 
> Perhaps this should be documented in the kernel config info.
> If there are many systems with this problem, then calibrating the PM timer
> against the PIT timer at boot time (possibly rejecting invalid rates)
> might be an option.
Check out bugme bug #2375. Some systems have ACPI PM timers that run too
fast. Running w/ "clock=tsc" is the proper workaround, but we need to
blacklist such systems from using it. If you could add dmidecode output
to the bug, I'll add your system to the list. 
http://bugme.osdl.org/show_bug.cgi?id=2375
thanks
-john
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/