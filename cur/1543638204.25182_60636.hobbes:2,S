Date: Thu, 1 Aug 2002 11:44:50 +0200
From: Erland Hedman <>
Subject: APM Console blanking not complete ?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/8/1/50

Hi,
With a 2.4.18 kernel running on a Dell Inspiron 8000 I have the BIOS APM 
console blanking working properly for both the VT consoles as well as in X, 
but only when the laptop's internal keyboard and mouse is used. After having 
browsed the kernel source I guess that this blanking, turning off the power 
to the laptop backlight, is handled by the APM features in the BIOS 
independent of the Linux kernel.
The problem is that when I use an external mice, in this case a wireless 
track ball connected to an USB port some distance from the laptop, a touch of 
that mice does not turn on the laptop backlight again as I first took for 
granted. It works in windows 2k  ;-(
By adding a timer routine to drivers/input/mousedev.c (inspired by console.c) 
I managed to "fix" my particular problem by implicitly  call the 
apm_console_blank()  (apm.c) via the console_blank_hook used by console.c and 
do the display blanking  timimg independent of the BIOS settings.
This is a fix however, and does not address the problem in a general way and 
I guess that USB a keyboard and possible other external devices will face the 
same problem. In addition it does not sync with any BIOS settings of the 
blanking time, nor does this  fix reset the timer if the laptops mouse or 
keyboard is touched.
So my question here (if my observations are valid) is if there are interest 
to address this issue and/or if there is any work in progress for future 
releases.
PS. The question is not related to DPMS, nor  to the VT console's blanking 
controlled by setterm. DS.
Please CC me at erland.hedman@telia.com
-- 
Best Regards,
Erland Hedman
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/