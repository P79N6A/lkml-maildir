Date: Fri, 3 Feb 2006 11:14:14 -0800
From: Andrew Morton <>
Subject: Re: Linux 2.6.15.2
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/2/3/240

Holger Eitzenberger <holger@my-eitzenberger.de> wrote:
>
> On Mon, Jan 30, 2006 at 11:34:27PM -0800, Andrew Morton wrote:
> 
> > - A skbuff_head_cache leak causes oom-killings.
> > 
> > All of these only seem to affect a small minority of machines.
> 
> Hi,
> 
> I have searched for a description for the above mentioned bug report,
> but havent found any.  Can you tell me?
http://www.mail-archive.com/netdev@vger.kernel.org/msg06355.html
> The reason why I am asking that I am facing a similar problem on
> kernel 2.6.10.  During performance tests (Intel XEON, SMP, PCI-X,
> e1000, 2 - 4 Gig RAM) the machine was out of memory.
> 
> Tests showed that LowFree went linearly down to a few megabytes, where
> most of the memory was used in skb_head_cache and size-1024 slab
> caches.  These two summed up to ~270 MG, which was the reason for
> that.
> 
> /proc/net/tcp showed that most of the memory was stuck in the RX
> queues of some processes (two processes with ~1000 sockets each).
> 
> A look into /proc/sys/net/ipv4/tcp_mem showed that that the values in
> there were way to high.  I hope that a reduction of these values will
> help (not done yet).
> 
Sounds different.  Please test a more recent kernel and if the problem is
still there, send a report to linux-kernel and cc netdev@vger.kernel.org. 
Include the contents of /proc/meminfo and /proc/slabinfo.  Thanks.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/