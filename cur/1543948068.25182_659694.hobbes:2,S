Date: Mon, 25 Feb 2008 21:20:56 -0600
From: Paul Jackson <>
Subject: Re: [patch 1/6] mempolicy: convert MPOL constants to enum
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/2/25/516

David wrote:
+enum {
+	MPOL_DEFAULT,
+	MPOL_PREFERRED,
+	MPOL_BIND,
+	MPOL_INTERLEAVE,
+	MPOL_MAX,	/* always last member of enum */
Aren't the values that these constants take part of the
user visible kernel API?
In other words, if someone added another MPOL_* in the middle
of this enum, it would break mbind/set_mempolicy/get_mempolicy
users, right:
+enum {
+	MPOL_DEFAULT,
+	MPOL_PREFERRED,
+	MPOL_YET_ANOTHER_FLAG,		/* <== added flag ... oops */
+	MPOL_BIND,
+	MPOL_INTERLEAVE,
+	MPOL_MAX,	/* always last member of enum */
I'm thinking that we should still specify the specific value
of each of these flags, by way of documenting these necessary
values, as in:
+enum {
+	MPOL_DEFAULT = 0,
+	MPOL_PREFERRED = 1,
+	MPOL_BIND = 2,
+	MPOL_INTERLEAVE = 3,
+	MPOL_MAX,	/* always last member of enum */
-- 
                  I won't rest till it's the best ...
                  Programmer, Linux Scalability
                  Paul Jackson <pj@sgi.com> 1.940.382.4214