Date: Tue, 12 Oct 2004 09:39:10 +0200
From: "Jan Beulich" <>
Subject: linux build problem with
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/10/12/40

Christophe,
building a kernel with distinct source and object trees I noted that
there is a consistent (but ignored) failure in generating the fore200e
firmware images. The problem is that in such a configuration there
simply is no include/asm link in the source tree. Consequently, a change
similar to the one below is necessary (this one's against a SuSE
derivate of 2.6.5, but checking with the 2.6.8.1 sources shows that the
relevant code doesn't seem to have changed).
Regards, Jan
--- drivers/atm/Makefile.0	2004-04-04 05:36:15.000000000 +0200
+++ drivers/atm/Makefile	2004-10-12 09:22:04.569674328 +0200
@@ -39,7 +39,8 @@ ifeq ($(CONFIG_ATM_FORE200E_PCA),y)
   fore_200e-objs		+= fore200e_pca_fw.o
   # guess the target endianess to choose the right PCA-200E firmware
image
   ifeq ($(CONFIG_ATM_FORE200E_PCA_DEFAULT_FW),y)
-    CONFIG_ATM_FORE200E_PCA_FW = $(shell if test -n "`$(CC) -E -dM
$(src)/../../include/asm/byteorder.h | grep ' __LITTLE_ENDIAN '`"; then
echo $(obj)/pca200e.bin; else echo $(obj)/pca200e_ecd.bin2; fi)
+    byteorder.h                 := include$(if $(patsubst
$(srctree),,$(objtree)),2)/asm/byteorder.h
+    CONFIG_ATM_FORE200E_PCA_FW  := $(obj)/pca200e$(if $(shell $(CC) -E
-dM $(byteorder.h) | grep ' __LITTLE_ENDIAN '),.bin,_ecd.bin2)
   endif
 endif
[unhandled content-type:application/octet-stream]