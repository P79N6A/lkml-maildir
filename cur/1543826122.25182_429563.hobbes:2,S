Date: Fri, 2 Jun 2006 16:53:01 -0400
From: Daniel Jacobowitz <>
Subject: Re: 2.6.17-rc5-mm2
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/6/2/282

On Fri, Jun 02, 2006 at 09:51:50AM +0200, Ingo Molnar wrote:
> 
> * Jan Beulich <jbeulich@novell.com> wrote:
> 
> > >firstly, i'd suggest to use another magic value for 'bottom of call 
> > >stacks' - it is way too common to jump or call a NULL pointer. Something 
> > >like 0xfedcba9876543210 would be better.
> > 
> > That's contrary to common use (outside of the kernel). I'm opposed to 
> > this. Detecting an initial bad EIP isn't a problem, and the old code 
> > can be used easily in that case.
> 
> but 0 is pretty much the worst choice for something that needs to be 
> reliable - it's the most common type of machine word in existence, 
> amongst all the 18446744073709551616 possibilities. And we need not care 
> about userspace's prior choices, this code and data is totally under the 
> kernel's control.
I've missed some context here, but assuming you're talking about DWARF
and reliably marking the end of the backtrace, why not actually mark
stack termination instead of futzing around with zeros?  GDB now
detects the return address column in the unwind info being set to
undefined and treats that as an end of stack.  Then you can treat any
other zeros you encounter as problems.
-- 
Daniel Jacobowitz
CodeSourcery
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/