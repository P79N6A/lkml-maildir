Date: Thu, 12 Dec 2002 20:33:34 +1100
From: Anton Blanchard <>
Subject: [PATCH] 2.5 fix for > 25 disks
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/12/12/25

Hi,
2.5 currently tries to register disk sda twice. Not nice and now we use
sysfs to do name to dev_t mapping, I couldnt mount my root filesystem.
Anton
===== drivers/scsi/sd.c 1.96 vs edited =====
--- 1.96/drivers/scsi/sd.c	Sat Nov 30 09:56:42 2002
+++ edited/drivers/scsi/sd.c	Thu Dec 12 20:19:12 2002
@@ -1217,7 +1217,7 @@
 	gd->minors = 16;
 	gd->fops = &sd_fops;
 
-	if (index > 26) {
+	if (index >= 26) {
 		sprintf(gd->disk_name, "sd%c%c",
 			'a' + index/26-1,'a' + index % 26);
 	} else {
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/