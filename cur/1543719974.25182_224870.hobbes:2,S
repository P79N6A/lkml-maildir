Date: 03 Jun 2004 11:55:51 -0400
From: "Patrick J. LoPresti" <>
Subject: Re: 2.6.x partition breakage and dual booting
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/6/3/151

Bartlomiej Zolnierkiewicz <B.Zolnierkiewicz@elka.pw.edu.pl> writes:
> > So one approach is to leave HDIO_GETGEO alone, and to have a
> > userspace gadget run early to "fix" the kernel's notion of the
> > geometry.  This would avoid the need to rewrite every partitioning
> > tool.
> 
> This is a bandaid not a solution and it is just silly (you push
> some values into kernel just to read them back by user-space).
It might be silly if we were designing all this from scratch.  But in
the context of current practice and current tools, it is not so
obvious, at least to me.  HDIO_GETGEO has existed forever, and it is
used by all current partitioning tools (and some non-partitioning
tools, such as dosemu).
> Also what if kernel is compiled with CONFIG_PROC_FS=n
> or if I decide to pull out /proc/ide/hdx/settings one day?
Then my code will break.  :-)
I have no theoretical objection to eliminating HDIO_GETGEO and
/proc/ide/hdx/settings.  But it would be polite to have a nice long
deprecation period because these interfaces ARE in use.  It is the
only way to use Parted for my application, for example.
 - Pat
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/