Date: Thu, 4 Sep 2003 17:25:36 +0400 (MSD)
From:  kuznet@ms2 ...
Subject: Re: tasklet_kill will always hang for recursive tasklets on a UP
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/9/4/126

Hello!
> All is fine, but the recursive tasklet problem is still there. We need 
> to add another state to tasklet TASKLET_STATE_KILLED which is set once 
> tasklet_kill is called. Once this is set tasklet_schedule just does not 
> schedule the tasklet.
Maybe. But all my past experience says me that it is some thing,
next to useless. Look, if you try to schedule some event not even caring
that the event handler is going to die, you do something really wrong.
State of death is connected not to tasklet but to source of events
which wake up the tasklet and need handling inside tasklet.
So, you just cannot tasklet_kill() before the source is shutdown and,
therefore, there are no good reasons to hold the bit inside the struct.
Alexey
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/