Date: Tue, 15 Jan 2008 17:25:13 +0100
From: Sam Ravnborg <>
Subject: Re: [PATCH x86] [15/16] Force __cpuinit on for CONFIG_PM without HOTPLUG_CPU
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/15/204

On Tue, Jan 15, 2008 at 04:17:42PM +0100, Ingo Molnar wrote:
> 
> * Sam Ravnborg <sam@ravnborg.org> wrote:
> 
> > > find below the current set of warnings on -git. There are 62.
> > 
> > The correct figure is 112.
> > 
> > You need to do a:
> > make KCFLAGS=-fno-unit-at-a-time
> > build to see them all.
> 
> btw., please add a .config option to trigger the -fno-unit-at-a-time 
> flags. Something like CONFIG_SECTION_ERRORS=y - plus perhaps combine it 
> with the patch below that turns such section bugs into detectable build 
> errors. A distro does not want to build a kernel that could potentially 
> corrupt kernel memory. (it's a security risk as well.) If we make the 
> err=1 dependent on CONFIG_SECTION_ERRORS then we'll have this 
> configurable.
The plan is to let section mismatch warnings become errors 
after the merge window - so we hit -mm first.
And I will add a config option to:
- set -fno-unit-at-a-time
- add no-inline to all functions marked __init*
- and maybe disable __inline if that gives additional errors
Slowly getting there.
Need to beat modpost in shape to get much less configuration
dependent warnings/errors first.
	Sam