Date: Fri, 22 Oct 1999 18:58:34 +0200
From: Ragnar Hojland Espinosa <>
Subject: Re: 2.3.21: corrupt vfat mount hanging on D
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/10/22/143

On Thu, Oct 21, 1999 at 01:51:49PM +0100, Alan Cox wrote:
> > lightside:~/build/x/src/engine/roam# umount /dev/fd0
> > lightside:~/build/x/src/engine/roam# mount /dev/fd0
> > Segmentation fault
> 
> Was there a matching oops in the log with this
Oh! Yes, of course.  Since it's easily reproducible, here's what our friend
ksymoops says:
Options used: -V (default)
              -o /lib/modules/2.3.21-UP (specified)
              -k /proc/ksyms (default)
              -l /proc/modules (default)
              -m /lib/modules/2.3.21-UP/System.map (specified)
              -c 1 (default)
Warning: ksyms_base symbol __rta_fill_R__ver___rta_fill not found in System.map.  Ignoring ksyms_base entry
Warning: ksyms_base symbol neigh_add_R__ver_neigh_add not found in System.map.  Ignoring ksyms_base entry
Warning: ksyms_base symbol neigh_delete_R__ver_neigh_delete not found in System.map.  Ignoring ksyms_base entry
Warning: ksyms_base symbol neigh_dump_info_R__ver_neigh_dump_info not found in System.map.  Ignoring ksyms_base entry
Warning: ksyms_base symbol netlink_ack_R__ver_netlink_ack not found in System.map.  Ignoring ksyms_base entry
Warning: ksyms_base symbol netlink_broadcast_R__ver_netlink_broadcast not found in System.map.  Ignoring ksyms_base entry
Warning: ksyms_base symbol netlink_dump_start_R__ver_netlink_dump_start not found in System.map.  Ignoring ksyms_base entry
Warning: ksyms_base symbol netlink_kernel_create_R__ver_netlink_kernel_create not found in System.map.  Ignoring ksyms_base entry
Warning: ksyms_base symbol netlink_set_err_R__ver_netlink_set_err not found in System.map.  Ignoring ksyms_base entry
Warning: ksyms_base symbol netlink_unicast_R__ver_netlink_unicast not found in System.map.  Ignoring ksyms_base entry
Warning: ksyms_base symbol nf_getinfo_R__ver_nf_getinfo not found in System.map.  Ignoring ksyms_base entry
Warning: ksyms_base symbol nf_hook_slow_R__ver_nf_hook_slow not found in System.map.  Ignoring ksyms_base entry
Warning: ksyms_base symbol nf_register_hook_R__ver_nf_register_hook not found in System.map.  Ignoring ksyms_base entry
Warning: ksyms_base symbol nf_register_interest_R__ver_nf_register_interest not found in System.map.  Ignoring ksyms_base entry
Warning: ksyms_base symbol nf_register_sockopt_R__ver_nf_register_sockopt not found in System.map.  Ignoring ksyms_base entry
Warning: ksyms_base symbol nf_reinject_R__ver_nf_reinject not found in System.map.  Ignoring ksyms_base entry
Warning: ksyms_base symbol nf_unregister_hook_R__ver_nf_unregister_hook not found in System.map.  Ignoring ksyms_base entry
Warning: ksyms_base symbol nf_unregister_interest_R__ver_nf_unregister_interest not found in System.map.  Ignoring ksyms_base entry
Warning: ksyms_base symbol nf_unregister_sockopt_R__ver_nf_unregister_sockopt not found in System.map.  Ignoring ksyms_base entry
Warning: ksyms_base symbol rtattr_parse_R__ver_rtattr_parse not found in System.map.  Ignoring ksyms_base entry
Warning: ksyms_base symbol rtnetlink_dump_ifinfo_R__ver_rtnetlink_dump_ifinfo not found in System.map.  Ignoring ksyms_base entry
Warning: ksyms_base symbol rtnetlink_links_R__ver_rtnetlink_links not found in System.map.  Ignoring ksyms_base entry
Warning: ksyms_base symbol rtnetlink_put_metrics_R__ver_rtnetlink_put_metrics not found in System.map.  Ignoring ksyms_base entry
Warning: ksyms_base symbol rtnl_R__ver_rtnl not found in System.map.  Ignoring ksyms_base entry
Warning: ksyms_base symbol sk_run_filter_R__ver_sk_run_filter not found in System.map.  Ignoring ksyms_base entry
Unable to handle kernel NULL pointer dereference at virtual address 00000020
c681d0b4
*pde = 00000000
Oops: 0000
CPU:    0
EIP:    0010:[<c681d0b4>]
EFLAGS: 00010282
eax: 00000000   ebx: 00000069   ecx: c2a76000   edx: c526dc20
esi: c526dc20   edi: 00000001   ebp: c2a76000   esp: c2ed3dac
ds: 0018   es: 0018   ss: 0018
Process mount (pid: 3251, stackpage=c2ed3000)
Stack: c6820730 c2a76000 c526dc20 c682303b c2a76000 c6826010 c682846c c5422000
       00001720 c526dc20 00000202 00000016 00000001 00000293 00000000 0000d3d3
       c5b9b000 00000000 00000200 00000000 00000000 c018997d 00863a6c c018b930
Call Trace: [<c6820730>] [<c682303b>] [<c6826010>] [<c682846c>] [<c018997d>] [<c018b930>] [<c018baba>]
       [<c018b930>] [<c01da02b>] [<c01121e2>] [<c01119ad>] [<c6828046>] [<c6828558>] [<c682846c>] [<c012eef0>]
       [<c012f440>] [<c68281bd>] [<c68281bd>] [<c012f9c2>] [<c68281bd>] [<c0109c94>]
Code: 8b 40 20 ff d0 83 c4 08 c3 8d 76 00 53 8b 54 24 08 8b 4c 24
>>EIP: c681d0b4 <fat_brelse+14/20>
Trace: c6820730 <fat_read_super+2b0/9a0>
Trace: c682303b <detect_cvf+6bb/1470>
Trace: c6826010 <cvf_format_use_count+1e50/1e90>
Trace: c682846c <cleanup_module+35c/????>
Trace: c018997d <start_motor+10d/120>
Trace: c018b930 <redo_fd_request+0/330>
Trace: c018baba <redo_fd_request+18a/330>
Trace: c018b930 <redo_fd_request+0/330>
Trace: c012f440 <do_mount+d0/170>
Code:  c681d0b4 <fat_brelse+14/20>             00000000 <_EIP>: <===
Code:  c681d0b4 <fat_brelse+14/20>                0:	8b 40 20       	movl   0x20(%eax),%eax <===
Code:  c681d0b7 <fat_brelse+17/20>                3:	ff d0          	call   *%eax
Code:  c681d0b9 <fat_brelse+19/20>                5:	83 c4 08       	addl   $0x8,%esp
Code:  c681d0bc <fat_brelse+1c/20>                8:	c3             	ret    
Code:  c681d0bd <fat_brelse+1d/20>                9:	8d 76 00       	leal   0x0(%esi),%esi
Code:  c681d0c0 <fat_mark_buffer_dirty+0/20>      c:	53             	pushl  %ebx
Code:  c681d0c1 <fat_mark_buffer_dirty+1/20>      d:	8b 54 24 08    	movl   0x8(%esp,1),%edx
Code:  c681d0c5 <fat_mark_buffer_dirty+5/20>     11:	8b 4c 24 00    	movl   0x0(%esp,1),%ecx
25 warnings issued.  Results may not be reliable.
-- 
____/|  Ragnar HÃ¸jland     Freedom - Linux - OpenGL      Fingerprint  94C4B
\ o.O|                                                   2F0D27DE025BE2302C
 =(_)=  "Thou shalt not follow the NULL pointer for      104B78C56 B72F0822
   U     chaos and madness await thee at its end."       hkp://keys.pgp.com
Handle via comment channels only.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/