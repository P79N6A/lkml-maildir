Date: Wed, 25 Jul 2007 02:19:18 +0200
From: "Kay Sievers" <>
Subject: Re: sysfs/udev broken in 2.6.23-rc1 [input, i2c, ...] (Was: sysfs/udev broken in latest git?)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/7/24/496

On 7/24/07, Simon Arlott <simon@fire.lp0.eu> wrote:
> On 24/07/07 17:34, Kay Sievers wrote:
> > On 7/24/07, Simon Arlott <simon@fire.lp0.eu> wrote:
> >> On 24/07/07 13:54, Cornelia Huck wrote:
> >> > On Tue, 24 Jul 2007 11:20:02 +0200,
> >> > "Kay Sievers" <kay.sievers@vrfy.org> wrote:
> >> >
> >> >> It looks fine to me. "device" links must never point to anything else
> >> >> than a bus device.
While it's still true, for input we have special rules because the
"stacked class devices" existed only there. At least for
SYSFS_DEPRECATED, all input devices should have a "device" symlink
pointing to the bus-device.
> >> > Hm, but then
> >> > 1. The patch sneaks this check in (the old code only checked for
> >> >    dev->parent)
> >> > 2. The code is rather inconsistent now, since none of the other code
> >> >    paths check for dev->parent->bus...
Yeah, that's true.
> >> Removing the dev->parent->bus check fixes it:
Yes, let's remove the check, I will check now if we possibly need to
fix more than this or only the block-device patch.
Thanks,
Kay
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/