Date: Wed, 15 Dec 1999 12:09:14 -0500
From: Richard Guy Briggs <>
Subject: NEC VERSA 6030X laptop suspend problems after BIOS upgrade
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/12/15/148

Hi,
I have posted this question to the APMD list and go no useful
response, so in some frustration, I post it here for some suggestions
and ideas how to solve this problem.
I have a NEC VERSA 6030X P133 laptop which *almost worked perfectly*
with apmd-3.0beta5, driver version 1.9.
Since then, it has been into the shop for a warranty motherboard and
I/O board ECO to correct a suspected cold solder problem with the
PCMCIA cardcage.  The BIOS was updated in the process to 2.00.16 and
some things have broken.
Originally, all of the apm functions in the BIOS worked with the
exception of save to file, which would be nice, but I can manage
without.  (If anyone can point to a utility that can format a
save-to-disk partition that would be most helpful.)
Now, BIOS settings of standby mode power for some peripherals causes a
complete lockup of the machine.  This problem I can live with by
simply preventing standby mode for those peripherals.  
The really big problem is: whenever it comes out of suspend, the caps
lock and scroll lock keyboard indicators flash alternately for about 30
seconds and the keyoard locks up, restarting the flashing upon any
keystroke *except* <shift> or <fn>.  This latter problem sounds like a
software issue rather than hardware, but it has been suggested that it
could be a lack of keyboard CPU reset at the appropriate time now, or
perhaps previously.  
First, I would like any hints as to whether this is the keyboard
controller flashing at me (ie. hardware) or if it is Linux that is
confused and flashing the keyboard indicators.  I would strongly
suspect it is Linux since I am able to use <fn> to switch CRT/LCD,
toggle the power saving features, change the speaker volume, etc.
I am running RH6.0, 2.2.12 kernel with PCMCIA and FreeS/WAN compiled
into the kernel.
This is a real pain in the butt, even with two batteries installed to
avoid going into suspend and sounds like it should be relatively easy
to fix, if I knew where to look...
I am able to gracefully shutdown the system with a serial console and
associated getty or by inserting an ethernet card, having it
automatically configure itself on PCMCIA init and log in via SSH.
Any hints?
	slainte mhath, RGB
-- 
Richard Guy Briggs -- PGP key available                Auto-Free Ottawa! Canada
<
http://www.conscoop.ottawa.on.ca/rgb/>
                   </www.flora.org/afo/>
Prevent Internet Wiretapping!       --      FreeS/WAN:<www.xs4all.nl/~freeswan>
Thanks for voting Green! -- <green.ca>          Marillion:<www.marillion.co.uk>
[unhandled content-type:application/pgp-signature]