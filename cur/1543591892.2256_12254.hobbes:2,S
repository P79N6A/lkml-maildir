Date: Mon, 21 May 2001 23:49:14 +0200 (MET DST)
From: Mikael Pettersson <>
Subject: Re: 2.2.19+ide: corrupts ide tape output
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/5/21/170

On 21 May 2001 14:49:55 -0400, Camm Maguire <camm@enhanced.com> wrote:
>Greetings!  2.2.19+ide, applied the patch because this box has a new
>Promise PDC20267 ide controller.  14GB HP Colorado tape drive.  Before
>we installed the new ide controller and patched the kernel, i.e. with
>unpatched 2.2.19 running on a different ide controller, this setup
>works just fine.  Now I get the following occasionally, which results
>in corrupted dumps to tape:
>
>May 21 10:27:47 intech9 kernel: hdh: status error: status=0x40 { DriveReady }
>May 21 10:27:47 intech9 kernel: ide-scsi: Strange, packet command initiated yet DRQ isn't asserted
You added a Promise Ultra100 PCI card, right?
From what I hear, it doesn't support ATAPI devices well, only disks.
So if you moved the HP tape drive to the PDC, move it back to
the mainboard's IDE controller.
Also, don't disable the mainboard's controller thinking you can save
some interrupts that way. Andre Hedrick (Linux IDE guy) once wrote
that this could cause the PDC to grab IRQ 14, which had some nasty
side-effects.
(My main box runs with disks on a Promise Ultra100 card and
ATAPI CD-RW and tape on the mainboard's IDE (440BX) controller.
Both 2.2+ide and 2.4 work fine.)
/Mikael
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/