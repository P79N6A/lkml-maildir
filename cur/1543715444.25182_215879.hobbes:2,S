Date: Fri, 23 Apr 2004 12:46:00 +0200 (CEST)
From: Peter Berg Larsen <>
Subject: Re: [RFT] ALPS touchpad driver
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/4/23/37

On Fri, 23 Apr 2004, Dmitry Torokhov wrote:
> I found on the net a possible way to detect ALPS driver so I made some changes
> to your driver. Unfortunately I do not have ALPS touchpad so if anyone could
> give it a spin I's appreciate it.
> +	/* Now try "E7 report". ALPS should return 0x33 in byte 1 */
> +	param[0] = 0;
> +	if (psmouse_command(psmouse, param, PSMOUSE_CMD_SETRES) ||
> +	    psmouse_command(psmouse,  NULL, PSMOUSE_CMD_SETSCALE21) ||
> +	    psmouse_command(psmouse,  NULL, PSMOUSE_CMD_SETSCALE21) ||
> +	    psmouse_command(psmouse,  NULL, PSMOUSE_CMD_SETSCALE21))
> +		return 0;
> +
> +	param[0] = param[1] = param[2] = 0xff;
> +	if (psmouse_command(psmouse, param, PSMOUSE_CMD_GETINFO))
> +		return 0;
> +
> +	printk(KERN_INFO "alps.c: E7 report: %2.2x %2.2x %2.2x\n",
> +		param[0], param[1], param[2]);
> +
> +	return param[0] != 0x33;
Depending on ALPS version this request is also known to return one of
glidepats:
0x33,0x02,0x0a,
0x53,0x02,0x0a,
0x53,0x02,0x14,
0x63,0x02,0x0a,
0x63,0x02,0x14,
0x63,0x02,0x28,
0x63,0x02,0x3c,
0x63,0x02,0x50,
0x63,0x02,0x64,
0x73,0x02,0x0a,
glidepoints:
0x20,0x02,0x0e,
0x22,0x02,0x0a,
0x22,0x02,0x14,
Peter
--
E-Mail:       pebl@math.ku.dk
Real name:    Peter Berg Larsen
Where:        Department of Computer Science, Copenhagen Uni., Denmark
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/