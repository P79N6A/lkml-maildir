Date: 11 May 2005 08:47:09 -0700
From: Badari Pulavarty <>
Subject: Re: [RFC/PATCH 2/5] mm/fs: add execute in place support
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/5/11/116

On Wed, 2005-05-11 at 08:33, Carsten Otte wrote:
> Christoph Hellwig wrote:
> 
> > This is a lot of code for a very special case.
> >
> >Could you try to put all the xip code into a separate file, e.g. mm/xip.c
> >that's only built when CONFIG_XIP is set?  It would probably require
> >duplicating a little more code if you want clean interfaces, e.g. probably
> >a separate set of generic operations.
> >
> > 
> >
> Indeed that seems reasonable. There is no exact reason to have
> this built into a kernel on a platform that does not have a bdev
> for this. On the other hand, I believe the code should stay in
> filemap.c, because it fits there conceptually. And I personally
> dislike #ifdef in the middle of a file.
While I agree with your reasoning, since you are affecting very hot
code path for every architecture, irrespective of "bdev" support
for this - you may want to look into some how eliminating few
function pointer de-refs and checks for those who don't care.
(#ifdef, unlikely(), or some arch & config magic).
To be honest, that file is already complicated enough - every time
I look at it my head hurts :(
Thanks,
Badari
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/