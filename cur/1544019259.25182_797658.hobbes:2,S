Date: Tue, 27 Jan 2009 20:10:41 -0800 (PST)
From: Davide Libenzi <>
Subject: Re: [patch 016/104] epoll: introduce resource usage limits
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2009/1/27/455

On Wed, 28 Jan 2009, Bron Gondwana wrote:
> On Tue, Jan 27, 2009 at 07:46:18PM -0800, Davide Libenzi wrote:
> > On Wed, 28 Jan 2009, Bron Gondwana wrote:
> > 
> > > On Tue, Jan 27, 2009 at 04:35:19PM -0800, Greg KH wrote:
> > > > Can you resubmit all 4 patches, and cc: the epoll author, Davide?  He's
> > > > the one that needs to accept these changes.
> > > 
> > > It's three now (two of them deserved to merged) and re-ordered so the
> > > first two are trivial and the complex bits are easily skipped if you
> > > don't want them.  
> > > 
> > > Just looking for Davide's email address.  Found it :)  I'll follow up
> > > this message with the patches.  I'm not going to CC everyone else again
> > > - but I'll CC LKML so you can follow it there if you want.
> > 
> > I already gave you my opinion on such code. There is no need for it. If 
> > your servers are loaded, in the same way you bump NFILES (and likely 
> > even other default configs), you bump up max_user_instances:
> 
> How can you tell if it's heavily loaded if you can't tell what the
> current usage is?  Just wait until you hit the limit?
In my servers, I know if they are going to be loaded, and I bump NFILES 
(and a few other things) to the correct place. Since many of those 
limits do not actually pre-allocate any resource, I don't need to wait and 
monitor the values, before taking proper action.
Sorry, the whole patch set is a big NACK for many reasons.
We'd have happily avoided those limits altogether, but 100-160MB of kernel 
memory able to be pinned by unprivileged users is easily a DoS on multiuser
systems.
- Davide