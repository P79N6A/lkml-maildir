Date: Mon, 29 Oct 2001 23:26:09 +0100 (CET)
From: willy tarreau <>
Subject: Re: Ethernet NIC dual homing
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/10/29/152

> Currently only the link status is used to monitor a
> NIC.
> So it would be nice if an ioctl was available to
> force a NIC switch-over
> (especially in active-backup policy). This could be
> used by a user-space
> daemon in case for instance no traffic is detected.
the 2.4 driver provides a mode which sends ARP packets
to test the link (far more reliable than MII), and the
appropriate ioctl for the NIC switch-over you need. It
is available to user through ifenslave -c bond0 eth0
for example.
> I see that the bonding driver is included in 2.2.18,
> what is its status in 2.4.x ?
well, it works for me each time I download a new
release, but I don't have prod servers on it to test
for a long time, nor have I passed all the intensive
tests that Constantine Gavrilov did when I was working
on 2.2. BTW, the last release (20011026) seems to have
a buggy ifenslave which activates all the NICs flags
(to be confirmed, just seen this today and replaced
with the previous one). If this is confirmed, I'll
mail
Chad about this problem.
If there are still people interested in 2.2, I'll try
to find some time to back-port the switch-over ioctl
from 2.4.
Regards,
Willy
___________________________________________________________
Do You Yahoo!? -- Une adresse @yahoo.fr gratuite et en fran√ßais !
Yahoo! Courrier : 
http://courrier.yahoo.fr
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/