Date: Wed, 10 Oct 2007 11:56:13 +0200
From: John Sigler <>
Subject: Re: halt does not shut the system down
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/10/10/49

Hello Remy,
Remy Bohmer wrote:
> John Sigler wrote:
> 
>> When I run 'halt' the kernel prints:
>> Halting.
>> Shutdown: hdc
>> ACPI: PCI interrupt for device 0000:01:05.0 disabled
>> ACPI: PCI interrupt for device 0000:01:04.0 disabled
>> ACPI: PCI interrupt for device 0000:01:03.0 disabled
>> ACPI: PCI interrupt for device 0000:01:02.0 disabled
>> Power down.
>> acpi_power_off called
>>
>> But the system does not shut down. (The fans keep spinning, the LEDs
> 
> I have seen this behavior earlier on a system with the SMI interrupt
> disabled. I do not know if this the case here, it is just a hint.
Thanks for the suggestion. I didn't see anything related to SMM in the 
BIOS menus. However, the system has real-time constraints. Thus, I'd 
turn SMM off if I knew how :-)
    Phoenix - AwardBIOS v6.00PG, An Energy Star Ally
    Copyright (C) 1984-2003, Phoenix Technologies, LTD
*** NAMB-3140 BIOS V1.20 ***
03/27/2006-i845GV-W83627-6A69VAKHC-00
> By the way, some distros bring the CPU in a halted state on a 'halt'
> command, instead of powering off (actually very logical). For real
> powering off these distros require the obvious 'poweroff' command.
Good suggestion. I'm using sysvinit-2.86
http://freshmeat.net/projects/sysvinit/
AFAIU, poweroff is equivalent to halt -p
halt (no option) calls reboot(RB_HALT);
poweroff or halt -p calls reboot(RB_POWER_OFF);
man 2 reboot
Alas, when I run 'poweroff' the kernel prints the same information:
Halting.
Shutdown: hdc
ACPI: PCI interrupt for device 0000:01:05.0 disabled
ACPI: PCI interrupt for device 0000:01:04.0 disabled
ACPI: PCI interrupt for device 0000:01:03.0 disabled
ACPI: PCI interrupt for device 0000:01:02.0 disabled
Power down.
acpi_power_off called
Regards.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/