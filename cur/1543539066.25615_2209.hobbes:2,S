Date: Mon, 17 Jul 2000 00:08:46 +0200 (CEST)
From: Andrzej Krzysztofowicz <>
Subject: [PATCH] to compile a few framebufer drivers
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/7/16/47

Hi,
   The following patch fixes compilation problems (duplicated symbol names)
in sisfb/vesafb drivers in 2.4.0test4/5pre1:
sisfb.o(.data+0x20): multiple definition of `video_type'
vesafb.o(.data+0x0): first defined here
make[3]: *** [video.o] Error 1
make[2]: *** [first_rule] Error 2
make[1]: *** [_subdir_video] Error 2
make: *** [_dir_drivers] Error 2
Regards
   Andrzej
***************************************************************************
diff -u --recursive linux-2.4test4/drivers/video/sisfb.c linux-moj/drivers/video/sisfb.c
--- linux-2.4test4/drivers/video/sisfb.c	Wed Jul 12 20:23:37 2000
+++ linux-moj/drivers/video/sisfb.c	Fri Jul 14 22:37:13 2000
@@ -186,10 +186,10 @@
 unsigned long rom_vbase;
 
 /* mode */
-int video_type = FB_TYPE_PACKED_PIXELS;
-int video_linelength;
-int video_cmap_len;
-int sisfb_off = 0;
+static int video_type = FB_TYPE_PACKED_PIXELS;
+static int video_linelength;
+static int video_cmap_len;
+static int sisfb_off = 0;
 
 static struct fb_var_screeninfo default_var = {
 	0, 0, 0, 0, 0, 0, 0, 0,
diff -u --recursive linux-2.4test4/drivers/video/vesafb.c linux-moj/drivers/video/vesafb.c
--- linux-2.4test4/drivers/video/vesafb.c	Fri Jul 14 21:25:49 2000
+++ linux-moj/drivers/video/vesafb.c	Fri Jul 14 22:37:10 2000
@@ -47,14 +47,14 @@
 char *video_vbase;        /* mapped */
 
 /* mode */
-int  video_bpp;
-int  video_width;
-int  video_height;
-int  video_height_virtual;
-int  video_type = FB_TYPE_PACKED_PIXELS;
-int  video_visual;
-int  video_linelength;
-int  video_cmap_len;
+static int  video_bpp;
+static int  video_width;
+static int  video_height;
+static int  video_height_virtual;
+static int  video_type = FB_TYPE_PACKED_PIXELS;
+static int  video_visual;
+static int  video_linelength;
+static int  video_cmap_len;
 
 /* --------------------------------------------------------------------- */
 
**************************************************************************
-- 
=======================================================================
  Andrzej M. Krzysztofowicz               ankry@mif.pg.gda.pl
  phone (48)(58) 347 14 61
Faculty of Applied Phys. & Math.,   Technical University of Gdansk
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/