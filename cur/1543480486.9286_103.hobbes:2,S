Date: Mon, 18 Jan 1999 18:35:59 +0100
From: Martin Maciaszek <>
Subject: 2.2.0-pre7-ac7 oopsing again (was Re: aic7xxx still flaky )
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/1/18/103

I just compiled 2.2.0-pre7-ac7. Guess what. It still oopses. So once again you'll find the oops trace, and the contents of /proc/pci, /proc/scsi/scsi and /proc/scsi/aic7xxx/0. Please tell me if it is a known problem and if somebody is working on it. It's my 3rd oops report on this issue but so far nobody anwered my mails.
ksymoops output:
Jan 18 15:39:19 nexus kernel: Unable to handle kernel NULL pointer dereference at virtual address 00000400
Jan 18 15:39:19 nexus kernel: current->tss.cr3 = 01f01000, `r3 = 01f01000
Jan 18 15:39:19 nexus kernel: *pde = 00000000
Jan 18 15:39:19 nexus kernel: Oops: 0000
Jan 18 15:39:19 nexus kernel: CPU:    0
Jan 18 15:39:19 nexus kernel: EIP:    0010:[<c01247fe>]
Jan 18 15:39:19 nexus kernel: EFLAGS: 00010206
Jan 18 15:39:19 nexus kernel: eax: 00000400   ebx: 000144fa   ecx: 00000b02   edx: 00000400
Jan 18 15:39:19 nexus kernel: esi: 00000800   edi: 00000800   ebp: 000144fa   esp: c1f07cec
Jan 18 15:39:19 nexus kernel: ds: 0018   es: 0018   ss: 0018
Jan 18 15:39:19 nexus kernel: Process dd (pid: 612, process nr: 79, stackpage=c1f07000)
Jan 18 15:39:19 nexus kernel: Stack: c0124837 00000b02 000144fa 00000800 00000001 00000800 000144fa c1f00b02 
Jan 18 15:39:19 nexus kernel:        c0124acb 00000b02 000144fa 00000800 00000001 00000000 c1f07e90 c1f07e94 
Jan 18 15:39:19 nexus kernel:        00000002 c0127c91 00000b02 000144fa 00000800 c1fcb140 0804c3da 0804c3da 
Jan 18 15:39:19 nexus kernel: Call Trace: [<c0124837>] [<c0124acb>] [<c0127c91>] [<c010fcc3>] [<c01a085c>] [<c010fcc3>] [<c018cf5a>] 
Jan 18 15:39:19 nexus kernel:        [<c011053f>] [<c011053f>] [<c011060a>] [<c0116bb5>] [<c0109b75>] [<c0108a7c>] [<c01233da>] [<c01089e0>] 
Jan 18 15:39:19 nexus kernel: Code: 8b 12 39 58 04 75 f3 39 70 08 75 ee 66 39 48 0c 75 e8 89 c2 
>>EIP: c01247fe <find_buffer+2a/44>
Trace: c0124837 <get_hash_table+1f/60>
Trace: c0124acb <getblk+1f/224>
Trace: c0127c91 <block_read+30d/524>
Trace: c010fcc3 <schedule+1f3/21c>
Trace: c01a085c <aic7xxx_queue+148/158>
Trace: c010fcc3 <schedule+1f3/21c>
Trace: c018cf5a <scsi_ioctl+296/390>
Trace: c011053f <update_process_times+5b/64>
Code:  c01247fe <find_buffer+2a/44>            00000000 <_EIP>: <===
Code:  c01247fe <find_buffer+2a/44>               0:    8b 12           movl   (%edx),%edx <===
Code:  c0124800 <find_buffer+2c/44>               2:    39 58 04        cmpl   %ebx,0x4(%eax)
Code:  c0124803 <find_buffer+2f/44>               5:    75 f3           jne     c01247f8 <find_buffer+24/44>
Code:  c0124805 <find_buffer+31/44>               7:    39 70 08        cmpl   %esi,0x8(%eax)
Code:  c0124808 <find_buffer+34/44>               a:    75 ee           jne     c01247f8 <find_buffer+24/44>
Code:  c012480a <find_buffer+36/44>               c:    66 39 48 0c     cmpw   %cx,0xc(%eax)
Code:  c012480e <find_buffer+3a/44>              10:    75 e8           jne     c01247f8 <find_buffer+24/44>
Code:  c0124810 <find_buffer+3c/44>              12:    89 c2           movl   %eax,%edx
/proc/pci
PCI devices found:
  Bus  0, device   0, function  0:
    Host bridge: Intel 82437 (rev 2).
      Medium devsel.  Master Capable.  Latency=32.  
  Bus  0, device   7, function  0:
    ISA bridge: Intel 82371FB PIIX ISA (rev 2).
      Medium devsel.  Fast back-to-back capable.  Master Capable.  No bursts.  
  Bus  0, device   7, function  1:
    IDE interface: Intel 82371FB PIIX IDE (rev 2).
      Medium devsel.  Fast back-to-back capable.  Master Capable.  Latency=32.  
      I/O at 0x3000 [0x3001].
  Bus  0, device   8, function  0:
    SCSI storage controller: Adaptec AIC-7881U (rev 0).
      Medium devsel.  Fast back-to-back capable.  IRQ 11.  Master Capable.  Latency=32.  Min Gnt=8.Max Lat=8.
      I/O at 0x6000 [0x6001].
      Non-prefetchable 32 bit memory at 0xf2000000 [0xf2000000].
  Bus  0, device   9, function  0:
    VGA compatible controller: S3 Inc. Vision 968 (rev 0).
      Medium devsel.  IRQ 10.  
      Non-prefetchable 32 bit memory at 0xf0000000 [0xf0000000].
/proc/scsi/scsi
Attached devices: 
Host: scsi0 Channel: 00 Id: 00 Lun: 00
  Vendor: CONNER   Model: CFP2105S  2.14GB Rev: 2D4D
  Type:   Direct-Access                    ANSI SCSI revision: 02
Host: scsi0 Channel: 00 Id: 01 Lun: 00
  Vendor: QUANTUM  Model: FIREBALL_TM2110S Rev: 300X
  Type:   Direct-Access                    ANSI SCSI revision: 02
Host: scsi0 Channel: 00 Id: 02 Lun: 00
  Vendor: NEC      Model: CD-ROM DRIVE:501 Rev: 2.2 
  Type:   CD-ROM                           ANSI SCSI revision: 02
Host: scsi0 Channel: 00 Id: 03 Lun: 00
  Vendor: SCSI-CD  Model: ReWritable-2x2x6 Rev: 2.00
  Type:   CD-ROM                           ANSI SCSI revision: 02
Host: scsi0 Channel: 00 Id: 04 Lun: 00
  Vendor: PLEXTOR  Model: CD-ROM PX-6XCS   Rev: 2.05
  Type:   CD-ROM                           ANSI SCSI revision: 02
/proc/scsi/aic7xxx/0
Adaptec AIC7xxx driver version: 5.1.10/3.2.4
Compile Options:
  AIC7XXX_RESET_DELAY    : 3
  AIC7XXX_TAGGED_QUEUEING: Adapter Support Enabled
                             Check below to see which
                             devices use tagged queueing
  AIC7XXX_PAGE_ENABLE    : Enabled (This is no longer an option)
  AIC7XXX_PROC_STATS     : Disabled
Adapter Configuration:
           SCSI Adapter: Adaptec AHA-294X Ultra SCSI host adapter
                           Ultra Wide Controller
    PCI MMAPed I/O Base: 0xf2000000
 Adapter SEEPROM Config: SEEPROM found and used.
      Adaptec SCSI BIOS: Enabled
                    IRQ: 11
                   SCBs: Active 0, Max Active 2,
                         Allocated 15, HW 16, Page 255
             Interrupts: 20940
      BIOS Control Word: 0x1894
   Adapter Control Word: 0x001c
   Extended Translation: Enabled
Disconnect Enable Flags: 0xffff
     Ultra Enable Flags: 0x0000
 Tag Queue Enable Flags: 0x0000
Ordered Queue Tag Flags: 0x0000
Default Tag Queue Depth: 12
    Tagged Queue By Device array for aic7xxx host instance 0:
      {255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255}
    Actual queue depth per device for aic7xxx host instance 0:
      {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}
Statistics:
(scsi0:0:0:0)
  Device using Narrow/Sync transfers at 10.0 MByte/sec, offset 15
  Transinfo settings: current(25/15/0), goal(25/15/0), user(25/15/0)
  Total transfers 18040 (17820 reads and 220 writes)
(scsi0:0:1:0)
  Device using Narrow/Sync transfers at 10.0 MByte/sec, offset 15
  Transinfo settings: current(25/15/0), goal(25/15/0), user(25/15/0)
  Total transfers 2739 (2295 reads and 444 writes)
(scsi0:0:2:0)
  Device using Narrow/Async transfers.
  Transinfo settings: current(0/0/0), goal(0/0/0), user(0/0/0)
  Total transfers 0 (0 reads and 0 writes)
(scsi0:0:3:0)
  Device using Narrow/Sync transfers at 10.0 MByte/sec, offset 15
  Transinfo settings: current(25/15/0), goal(25/15/0), user(25/15/0)
  Total transfers 0 (0 reads and 0 writes)
(scsi0:0:4:0)
  Device using Narrow/Sync transfers at 5.0 MByte/sec, offset 15
  Transinfo settings: current(50/15/0), goal(25/15/0), user(25/15/0)
  Total transfers 0 (0 reads and 0 writes)
Regards
Martin
1 warning issued.  Results may not be reliable.
-- 
It is easier to write an incorrect program than understand a correct one.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/