Date: Sat, 25 Jun 2005 11:09:41 +0200
From: Ingo Molnar <>
Subject: Re: 2.6.12-mm1 boot failure on NUMA box.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/6/25/36

* Martin J. Bligh <mbligh@mbligh.org> wrote:
> > (btw., if the TSC is that unreliable on numaq boxes, shouldnt we disable 
> > it for userspace apps too? Or are those hangs purely kernel bugs? In 
> > which case it might make sense to debug those a bit more - large-scale 
> > TSC unsyncedness is something that could slip in on other hardware too.)
> 
> Well it reads reliably. it just reliably reads utter random crap 
> (well, across CPUs). Not many things read tsc from userspace, and it 
> won't hang I guess .... depends what their expecations are. I do like 
> gettimeofday not to go backwards though - that tends to bugger things 
> up ;-)
the patch only adds the TSC back for purposes of sched_clock() (whose 
call sites are robust against cross-CPU migration) - gettimeofday() is 
still using the PIT or HPET.
but i intended this to be an problem-free change - if it causes any 
problems i'll switch the code to use gettimeofday() and not the 
[thus-]lower-accuracy sched_clock().
	Ingo
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/