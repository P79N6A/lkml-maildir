Date: Sun, 13 Nov 2005 12:50:54 -0500
From: Trond Myklebust <>
Subject: [GIT] Fix memory leak in lease code
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/11/13/55

Hi Linus
Please pull from the repository at
    git://git.linux-nfs.org/pub/linux/nfs-2.6.git
This will change the following files, through the appended changesets.
Cheers,
  Trond
---
 fs/locks.c |    1 -
 fs/locks.c |    2 +-
 2 files changed, 1 insertions(+), 2 deletions(-)
commit f3a9388e4ebea57583272007311fffa26ebbb305
Author: Chris Wright <chrisw@osdl.org>
Date:   Fri Nov 11 17:20:14 2005 -0800
    [PATCH] VFS: local denial-of-service with file leases
     Remove time_out_leases() printk that's easily triggered by users.
     Signed-off-by: Chris Wright <chrisw@osdl.org>
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
commit dc15ae14e97ee9d5ed740cbb0b94996076d8b37e
Author: J. Bruce Fields <bfields@fieldses.org>
Date:   Thu Nov 10 19:08:00 2005 -0500
    [PATCH] VFS: Fix memory leak with file leases
     The patch
     
http://linux.bkbits.net:8080/linux-2.6/diffs/fs/locks.c@1.70??nav=index.htm
     introduced a pretty nasty memory leak in the lease code. When freeing
     the lease, the code in locks_delete_lock() will correctly clean up
     the fasync queue, but when we return to fcntl_setlease(), the freed
     fasync entry will be reinstated.
     This patch ensures that we skip the call to fasync_helper() when we're
     freeing up the lease.
     Signed-off-by: J. Bruce Fields <bfields@fieldses.org>
     Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/