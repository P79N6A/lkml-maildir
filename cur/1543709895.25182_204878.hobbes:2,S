Date: Tue, 9 Mar 2004 02:11:33 -0500
From: Dmitry Torokhov <>
Subject: Re: OOPS when copying data from local to an external drive (ieee1394)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/3/9/16

On Monday 08 March 2004 01:50 am, Zwane Mwaikambo wrote:
> On Sun, 7 Mar 2004, Dmitry Torokhov wrote:
> 
> > I started getting oopses when cpying data from local IDE to an external
> > Firewire drive. Not always, but quite often. The kernel is a bk pull a
> > day before 2.6.4-rc2 was released, I do not see any ieee1394 updates
> > since.
> >
> > Unfortunately the oops was not saves in the logs, so here is what I managed
> > to write down:
> 
> > Oops: 00002 [#1]
> > PREEMPT
> > CPU: 0
> > EIP: 0060 [<c0243d087>] Tainted: P
> > EFLAGS: 00010047
> > EIP is at hpsb_packet_sent+0x86/0x90
> > eax: 00100100 ebx: dfd74000 ecx: dd6edfb0 edx: 00200200
> 
> A spot of linked list corruption.
> 
> > esi: 00000001 edi: dd6cdf60 ebp: c03e3ee0 esp: c03c3edc
> > ds: 007b es: 007b ss: 0068
> > Process swapper (pid: 0; threadinfo=c03c2000, task=c034a800)
> > ....
> > Call trace:
> > [<co25306e>] dma_trm_tasklet+0xae/0x1b0
> 
> Does this patch help any?
> 
Unfortunately I am still getting oopses with exactly the same call trace.
On top of that I am now seeing the following in the logs:
Mar  9 01:41:21 core kernel: ieee1394: sbp2: aborting sbp2 command
Mar  9 01:41:21 core kernel: Write (10) 00 11 27 de 17 00 00 f8 00
Mar  9 01:41:21 core kernel: ieee1394: sbp2: aborting sbp2 command
Mar  9 01:41:21 core kernel: Write (10) 00 11 27 df 0f 00 00 f8 00
Mar  9 01:41:21 core kernel: ieee1394: sbp2: aborting sbp2 command
Mar  9 01:41:21 core kernel: Write (10) 00 11 27 e0 07 00 00 f8 00
Mar  9 01:41:21 core kernel: ieee1394: sbp2: aborting sbp2 command
Mar  9 01:41:21 core kernel: Write (10) 00 11 27 e0 ff 00 00 f8 00
Mar  9 01:41:21 core kernel: ieee1394: sbp2: aborting sbp2 command
Mar  9 01:41:21 core kernel: Write (10) 00 11 27 e1 f7 00 00 f8 00
Mar  9 01:41:21 core kernel: ieee1394: sbp2: aborting sbp2 command
Mar  9 01:41:21 core kernel: Write (10) 00 11 27 e3 e7 00 00 f8 00
Mar  9 01:41:21 core kernel: ieee1394: sbp2: aborting sbp2 command
Mar  9 01:41:22 core kernel: Write (10) 00 11 27 e4 df 00 00 f8 00
Mar  9 01:41:23 core kernel: ieee1394: sbp2: aborting sbp2 command
Mar  9 01:41:23 core kernel: Write (10) 00 11 27 e5 d7 00 00 f8 00
Mar  9 01:41:26 core kernel: ieee1394: sbp2: sbp2util_node_write_no_wait failed
Mar  9 01:41:28 core last message repeated 8 times
Mar  9 01:41:56 core kernel: ieee1394: sbp2: aborting sbp2 command
Mar  9 01:41:56 core kernel: Write (10) 00 11 2a f8 ff 00 00 f8 00
Mar  9 01:41:56 core kernel: ieee1394: sbp2: aborting sbp2 command
Mar  9 01:41:56 core kernel: Write (10) 00 11 2a f9 f7 00 00 f8 00
Mar  9 01:41:56 core kernel: ieee1394: sbp2: aborting sbp2 command
Mar  9 01:41:56 core kernel: Write (10) 00 11 2a fa ef 00 00 f8 00
Mar  9 01:41:56 core kernel: ieee1394: sbp2: aborting sbp2 command
Mar  9 01:41:56 core kernel: Write (10) 00 11 2a fb e7 00 00 f8 00
Mar  9 01:41:56 core kernel: ieee1394: sbp2: aborting sbp2 command
Mar  9 01:41:56 core kernel: Write (10) 00 11 2a fc df 00 00 f8 00
Mar  9 01:41:56 core kernel: ieee1394: sbp2: aborting sbp2 command
Mar  9 01:41:56 core kernel: Write (10) 00 11 2a fe cf 00 00 f8 00
I did not have these messages before. The kernel was pulled today
from bkbits plus your patch (and some of my patches but they only
affect input drivers).
-- 
Dmitry
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/