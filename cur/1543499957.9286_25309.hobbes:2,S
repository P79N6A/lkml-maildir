Date: Mon, 21 Jun 1999 13:49:12 -0700
From: Ben Woodard <>
Subject: I know that I am doing bad things but...
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/6/21/170

I know that I am the one doing the bad things but I've crashed my
computer a half dozen times doing this and it would be nice if someone
could look into this. I think that the kernel something in the kernel
is getting fouled up.
Background:
-----------
I have a digital camera that uses flash memory cards that fit into an
adapter that goes into the pcmcia slot on my laptop. The cards pretend
to be little vfat formatted disks.
Steps to reproduce:
-------------------
1) insert card
2) mount card "mount -t vfat /dev/hdc1 /mnt/pccard"
3) cd /mnt/pccard
4) eject card
5) Re-insert card
6) mount card again
First the mount process hangs and the computer becomes rather
unresponsive. The mouse freezes for a few seconds then catches
up. However, the computer seems to be unstable and eventually hangs
completely. Sort of like the way that Windows does if you keep going
after a GPF.
Note:
-----
Everything is OK as long as I don't happen to have a shell in a
directory that is on the pcmcia device. The pcmcia services seem to do
the right thing and unmount the file system and then free up the
device. 
I bet the problem is that the kernel or the PCMCIA services don't know 
how to deal with the fact that the umount fails because the file
system is buxy. 
-ben
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/