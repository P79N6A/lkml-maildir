Date: Tue, 2 Jan 2007 23:41:24 -0800
From: Bill Huey (hui) <>
Subject: [PATCH] lock stat for -rt 2.6.20-rc2-rt2.2.lock_stat.patch
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/1/3/22

On Sat, Dec 30, 2006 at 12:19:40PM +0100, Ingo Molnar wrote:
> your patch looks pretty ok to me in principle. A couple of suggestions 
> to make it more mergable:
> 
>  - instead of BUG_ON()s please use DEBUG_LOCKS_WARN_ON() and make sure 
>    the code is never entered again if one assertion has been triggered.
>    Pass down a return result of '0' to signal failure. See
>    kernel/lockdep.c about how to do this. One thing we dont need are
>    bugs in instrumentation bringing down a machine.
I'm using a non-fatal error checking instead of BUG_ON. BUG_ON was a more
aggressive way that I use to find problem initiallly.
>  - remove dead (#if 0) code
Done.
>  - Documentation/CodingStyle compliance - the code is not ugly per se
>    but still looks a bit 'alien' - please try to make it look Linuxish,
>    if i apply this we'll probably stick with it forever. This is the
>    major reason i havent applied it yet.
I reformatted most of the patch to be 80 column limited. I simplified a
number of names, but I'm open to suggestions and patches to how to go
about this. Much of this code was a style experiment, but now I have to
make this more mergable.
>  - the xfs/wrap_lock change looks bogus - the lock is initialized
>    already. What am i missing?
Correct. This has been removed.
I've applied Daniel Walker's changes as well.
Patch here:
	
http://mmlinux.sourceforge.net/public/patch-2.6.20-rc2-rt2.2.lock_stat.patch
bill
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/