Date: Tue, 02 Jan 2007 10:13:37 +0200
From: Artem Bityutskiy <>
Subject: Re: [PATCH] NAND: nandsim bad block injection
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/1/2/18

On Sun, 2006-12-31 at 20:43 +0530, Vijay Kumar wrote:
> Artem Bityutskiy writes:
>  > 1. Suppose we decided to emulate an erase failure for a certain
>  > eraseblock. Then the MTD user re-tries the operation and succeeds.
>  > Shouldn't we start always returning erase errors for this eraseblock
>  > instead?
> 
> You are right. We should be mantaining the bad block state within the
> simulator. I will update the code accordingly.
Well, may be it is also useful to sporadically emulate errors which go
away after re-try.
>  > 2. In case of I/O errors, the correct MTD user should mark the bogus
>  > eraseblock bad. So, after some time we end up with most of our
>  > eraseblocks marked bad which is not very nice.
>  > 
>  > How would you comment this?
> 
> We can have an upper limit on the no. of blocks that can turn bad. It
> can be provided as a module parameter.
Yeah.
Also, one more nice feature would be to emulate bit-flips from time to
time. Just change one bit and let NAND level to fix it using ECC. This
would be good for testing both NAND layer and applications (MTD returns
-EUCLEAN in case of a bit flip, and applications should not panic in
this case - because the bit-flip was corrected). That's just an idea.
-- 
Best regards,
Artem Bityutskiy (Битюцкий Артём)
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/