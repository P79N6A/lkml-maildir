Date: Fri, 12 Apr 2002 14:57:08 +0200
From: Abraham vd Merwe <>
Subject: Re: Stolen Memory <- i830M video chip
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/4/12/66

Hi Josh!
> i've cut the key bits out for back-reference.  (btw, your .sig is kinda
> hefty :)
> 
> > > so if it's a BIOS problem that can only be fixed by Dell, how were these guys
> > > able to do the fix?  and why can't the open source guys (XFree or Linux kernel) 
> > > seem to do the same?
> > 
> > I've told people before: If you want it to work, write a non-BIOS setmode.
> > I'll even give you tips if you try, but that is all I can do. 
> 
> ok, let me see if i'm following what you're saying.  the XFree86 drivers don't
> use the BIOS or anything else - they rely on the kernel.  the kernel, however, 
> is relying on the BIOS to tell it what's going on.  when the I8x0 video interface
> activates, it asks the BIOS which lies through its teeth.
No, the X Server is using the BIOS to set video modes. Since the video
chipset doesn't have any onboard memory, it needs to "steal" some of your
system memory. The BIOS does that for you (hence the term stolen memory).
However, if your BIOS steals only 1mb memory, it isn't enough to support
high resolution modes.
This isn't a problem since we allocate more memory by stealing some memory
in the kernel and then populating the card's page table with those pages.
The problem is that the BIOS don't know about those extra pages and when you
do a setmode, it checks whether there is enough memory, sees only 1mb and
then refuses to set the mode...
-- 
Regards
 Abraham
I give you the man who -- the man who -- uh, I forgets the man who?
		-- Beauregard Bugleboy
__________________________________________________________
 Abraham vd Merwe - 2d3D, Inc.
 Device Driver Development, Outsourcing, Embedded Systems
  Cell: +27 82 565 4451         Snailmail:
   Tel: +27 21 761 7549            Block C, Aintree Park
   Fax: +27 21 761 7648            Doncaster Road
 Email: abraham@2d3d.co.za         Kenilworth, 7700
  Http: 
http://www.2d3d.com
        South Africa
[unhandled content-type:application/pgp-signature]