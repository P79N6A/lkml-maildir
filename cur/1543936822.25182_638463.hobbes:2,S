Date: Tue, 15 Jan 2008 17:07:38 +0900
From: Yasunori Goto <>
Subject: Re: [RFC PATCH 4/4] [RESEND] Recomputing msgmni on memory add / remove
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/15/24

Hello Nadia-san.
> @@ -118,6 +122,10 @@ struct ipc_namespace {
>  	size_t		shm_ctlall;
>  	int		shm_ctlmni;
>  	int		shm_tot;
> +
> +#ifdef CONFIG_MEMORY_HOTPLUG
> +	struct notifier_block ipc_memory_hotplug;
> +#endif
>  };
I'm sorry, but I don't see why each ipc namespace must have each callbacks
of memory hotplug.
I prefer only one callback for each subsystem, not for each namespace.
In addition, the recompute_msgmni() calculation looks very similar for
all ipc namespace.
Or do you wish each ipc namespace have different callback for the future?
BTW, have you ever tested this patch? If you don't have any test environment
for memory hotplug code, then I'll check it. :-)
Bye.
-- 
Yasunori Goto 