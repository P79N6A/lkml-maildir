Date: Sun, 03 Mar 2002 21:38:10 -0800
From: Andrew Morton <>
Subject: Re: Loopback (2.4.18)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/3/4/35

Jon Masters wrote:
> 
> Hi,
> 
> I'm trying to use "multiCD" to backup around 3 lots of 25GB of data in to
> handy CD sized images. The software is a perl script which uses a loopback
> mounted file on which a standard ext2 filesystem with data is written,
> etc. I'm sure everyone gets the idea. These then get scp'd/burned.
> 
The loop driver does really naughty things which defeat the kernel's
management of dirty data.  It's quite easy to livelock machines with
it, especially if you increase the dirty buffer thresholds.
Alas, it's tricky.  I have three patches, none of which fix it.
Fourth time lucky, maybe.
I expect the problem will go away if you drop the dirty buffer
thresholds:
	echo 10 0 0 0 500 3000 25 0 0 > /proc/sys/vm/bdflush
Could you please try that?   Also, if/when it locks up again,
the SYSRQ-P information will be interesting.  Use the key
sequence several times, record the EIP values, look them up
after reboot.   Probably, they point at shrink_cache().
Thanks.
-
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/