Date: Sun, 11 Nov 2007 17:25:26 -0500
From: Erez Zadok <>
Subject: [PATCH] init/calibrate.c compile error (MMOTM-2007-11-10-19-05)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/11/11/116

I'm using -mm (MMOTM-2007-11-10-19-05) and getting
$ make
  CC      init/calibrate.o
In file included from include/linux/jiffies.h:8,
                 from init/calibrate.c:7:
include/linux/timex.h:246: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'read_current_timer'
init/calibrate.c: In function 'calibrate_delay_direct':
init/calibrate.c:41: error: implicit declaration of function 'read_current_timer'
make[1]: *** [init/calibrate.o] Error 1
make: *** [init] Error 2
That's because the definition of __devinit isn't known at that point.  The
following small patch appears to fix the compilation error.  Someone should
verify that it's the proper fix.
Cheers,
Erez.
Signed-off-by: Erez Zadok <ezk@cs.sunysb.edu>
diff --git a/include/linux/timex.h b/include/linux/timex.h
index 40383f9..57bb18c 100644
--- a/include/linux/timex.h
+++ b/include/linux/timex.h
@@ -55,6 +55,7 @@
 
 #include <linux/compiler.h>
 #include <linux/time.h>
+#include <linux/init.h>
 
 #include <asm/param.h>
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/