Date: Thu, 28 Feb 2002 14:51:17 -0800 (PST)
From: "David S. Miller" <>
Subject: Re: hardware VLAN acceleration
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/2/28/81

   From: "Leech, Christopher" <christopher.leech@intel.com>
   Date: Thu, 28 Feb 2002 13:47:25 -0800
   Is vlan_rx_kill_vid only there to ensure locking between vlan_hwaccel_rx and
   unregister_802_1Q_vlan_dev?  If so, could this be handled outside of the
   driver?
It is there because the VLAN layer has no buisness knowing how to lock
out receive interrupt processing in your driver.
The Acenic driver, for example, uses no SMP locking at all and runs
it's RX interrupts %100 lockless requiring a global "cli()" in order
to implement vlan_rx_kill_vid().
   Also, when a vlan dev is unregistered, does the driver need to know that the
   vlan_group passed in to vlan_rx_register is no longer valid?
The group is still valid, groups are never destroyed by the VLAN layer
once they are created.
Franks a lot,
David S. Miller
davem@redhat.com
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/