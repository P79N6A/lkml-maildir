Date: Wed, 13 Mar 2002 21:40:55 +0000 (GMT)
From: Hugh Dickins <>
Subject: Re: 23 second kernel compile / pagemap_lru_lock improvement
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/3/13/189

On Tue, 12 Mar 2002, Martin J. Bligh wrote:
> >>>> Linus:
> >>>>
> >>>> Anyway, some obvious LRU lock improvements are clearly available: 
> >>>> activate_page_nolock() shouldn't even need to take the lru lock if the 
> >>>> page is already active. 
> 
> Your suggestion seems to improve the pagemap_lru_lock contention a little:
> (make bzImage , 16 way NUMA-Q, 5 runs each)
I'm surprised it made any difference at all, I think the patch mainly
adds more tests: activate_page is only called from mark_page_accessed
(after testing !PageActive) and from fail_writepage (where usually
!PageActive).  I don't think many !PageLRU pages can get there.
Or is activate_page being called from other places in your tree?
Hugh
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/