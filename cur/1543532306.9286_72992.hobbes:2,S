Date: Wed, 29 Mar 2000 14:38:41 -0500
From: Bryan -TheBS- Smith <>
Subject: Final compilation of solutions -- Re: Kernel 2.2.14, dirty buffers, stalls in interactivity of system/NFS-clients ...
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/3/29/150

Final compilation of solutions -- Re: Kernel 2.2.14, dirty buffers,
stalls in interactivity of system/NFS-clients ...
Okay, thanx to everyone on the Linux Kernel mailing list for helping
out a newbie.  Sorry that I was a complete, oblivious moron and
totally missed the kernel docs on the VM system (DOOH!).
Anyhoo, here's a list (for reference) of things that I have looked
at, done and probably still need to checkout (most of the later can
only be done on downtime):
Sources of information:
   /usr/src/linux/Documenatation/sysctl/vm.txt
   
http://www.bb-zone.com/Proc/chapter2.html#section2.4
[ The second is on Bodo Bauer's site, a guru at TurboLinux ]
Run-Time Tweaks (/proc filesystem):
   /proc/sys/vm/bdflush
It takes 9 parameters (6 used -- 2.2.14 default in ()'s ):
   1)	Percentage of DB cache before fluishing (40)
   2)	Maximum # of DB to write per flush (500)
   3)	Number of clean buffers per refill (64)
   4)	DB refill threshold before flushing (256)
   5)	UNUSED (500)
   6)	Maximum DB age before flush (3000)
   7)	Maximum superblock DB age before flush (500)
   8)	UNUSED (1884)
   9)	UNUSED (2)
E.g.:
   echo "25 50 64 256 500 1000 100 1884 2" > /proc/sys/vm/bdflush
[ The above is what I am running with now, seems to have removed
  the massive disk writes I was previously experiencing on a
  server with 1GB of RAM. ]
Kernel Tweaks to Consider:
   A)  Use the latest RAID Controller driver **
   B)  Mount filesystems with the 'noatime' option
       (to avoid updating access times, therefore
        removing disk writes on reads)
Hardware Downtime Tweaks to Consider:
   A)  Update RAID Controller BIOS
   B)  Set mainboard BIOS to enable 'passive release' and 
       'delayed transaction' (**?)
   C)  Avoid sharing IRQs (especially between NIC/RAID) **
   D)  Set NIC IRQ to a higher priority (lower IRQ)
[ ** I'm already doing/have done these.  Not sure about C) though. ]
Again, thanx all!!!
-- TheBS
-- 
 Bryan "TheBS" Smith -- Engineer, IT Professional and Hacker
      E-mail:  mailto:thebs@theseus.com,b.j.smith@ieee.org
  Disclaimer:  
http://www.SmithConcepts.com/legal.html
*************************************************************
  TheBS ... Serving E-mail filters to /dev/null since 1989
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/