Date: Tue, 21 May 2002 16:48:35 +0200 (CEST)
From: Martin Devera <>
Subject: Oops report USB-OHCI
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/5/21/123

The Oops from ksymoops is attached. There is one warning
but the System.map was correct (I tested twice).
The problem is repetable - I tested on 3 computers. It occured
with two types of phillips camera and with modem.
On UHCI it works, with OHCO - Opti chipset is fails.
Kernel 2.4.18, no patches. Tested on Pentium and PII computers.
There is
kernel BUG at usb-ohci.h:464!
always before Oops. It seems definitely to be bug in kernel.
Probably TD/ED memory is freed twice ..
devik
ksymoops 2.4.5 on i586 2.4.18.  Options used
     -V (default)
     -k /proc/ksyms (default)
     -l /proc/modules (default)
     -o /lib/modules/2.4.18/ (default)
     -m /boot/System.map-2.4.18 (specified)
Warning (compare_maps): mismatch on symbol partition_name  , ksyms_base says c020c1e0, System.map says c01498f0.  Ignoring ksyms_base entry
kernel BUG at usb-ohci.h:464!
invalid operand: 0000
CPU:    0
EIP:    0010:[<c020811f>]    Not tainted
Using defaults from ksymoops -t elf32-i386 -a i386
EFLAGS: 00010082
eax: 0000001e   ebx: 00000000   ecx: c02b0268   edx: 00002367
esi: c00547f8   edi: c1802000   ebp: c00547f0   esp: c0631f28
ds: 0018   es: 0018   ss: 0018
Process sshd (pid: 13333, stackpage=c0631000)
Stack: c02980c1 000001d0 c0084800 00000000 c1802000 c00848b4 c0086c60 c02d9900 
       00000000 00000000 c00547f8 0250d282 00000282 c020934f c0084800 00000001 
       c0047960 04000001 0000000b c0631fc4 00000004 c0107def 0000000b c0084800 
Call Trace: [<c020934f>] [<c0107def>] [<c0107f5e>] 
Code: 0f 0b 83 c4 08 8b 1b 89 5c 24 14 8b 55 08 8b 4c 24 30 83 e2 
>>EIP; c020811f <dl_del_list+7b/5a4>   <=====
>>ecx; c02b0268 <console_sem+0/14>
>>edx; 00002367 Before first symbol
>>esi; c00547f8 Before first symbol
>>edi; c1802000 <_end+14cea28/14dfa28>
>>ebp; c00547f0 Before first symbol
>>esp; c0631f28 <_end+2fe950/14dfa28>
Trace; c020934f <hc_interrupt+ef/134>
Trace; c0107def <handle_IRQ_event+2f/58>
Trace; c0107f5e <do_IRQ+72/b4>
Code;  c020811f <dl_del_list+7b/5a4>
00000000 <_EIP>:
Code;  c020811f <dl_del_list+7b/5a4>   <=====
   0:   0f 0b                     ud2a      <=====
Code;  c0208121 <dl_del_list+7d/5a4>
   2:   83 c4 08                  add    $0x8,%esp
Code;  c0208124 <dl_del_list+80/5a4>
   5:   8b 1b                     mov    (%ebx),%ebx
Code;  c0208126 <dl_del_list+82/5a4>
   7:   89 5c 24 14               mov    %ebx,0x14(%esp,1)
Code;  c020812a <dl_del_list+86/5a4>
   b:   8b 55 08                  mov    0x8(%ebp),%edx
Code;  c020812d <dl_del_list+89/5a4>
   e:   8b 4c 24 30               mov    0x30(%esp,1),%ecx
Code;  c0208131 <dl_del_list+8d/5a4>
  12:   83 e2 00                  and    $0x0,%edx
 <0>Kernel panic: Aiee, killing interrupt handler!
1 warning issued.  Results may not be reliable.