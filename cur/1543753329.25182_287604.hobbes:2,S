Date: Tue, 18 Jan 2005 09:36:45 +0000
From: Christoph Hellwig <>
Subject: Re: [PATCH] Support compat_ioctl for block devices
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/1/18/37

On Tue, Jan 18, 2005 at 10:31:58AM +0100, Andi Kleen wrote:
> >  - please don't introduce a new API with the BKL held.
> 
> Nope, I'm not going to audit zillions of low level functions for this.
So just stick a lock_kernel() unlock_kernel() into the handler, it's
not like there's more than a handfull of them.
> >  - prototype isn't nice.  just passing the gendisk for block_device
> >    should be enough.
> 
> No, it isn't, the compat handler needs cmd and arg, and file is useful
> when you pass it to an existing ioctl handler.
cmd/arg is needed, file shouldn't.  If you care for the underlying handler
add a version that doesn't take the file * either.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/