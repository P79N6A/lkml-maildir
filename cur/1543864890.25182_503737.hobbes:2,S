Date: Wed, 31 Jan 2007 09:38:11 -0800
From: Zach Brown <>
Subject: Re: [PATCH 0 of 4] Generic AIO by scheduling stacks
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/1/31/215

>> - We would now have some measure of task_struct concurrency.  Read  
>> that twice,
>> it's scary.
> That's the one scaring me in fact ... Maybe it will end up being an  
> easy
> one but I don't feel too comfortable...
Indeed, that was my first reaction too.  I dismissed the idea for a  
good six months after initially realizing that it implied sharing  
journal_info, etc.
But when I finally sat down and started digging through the  
task_struct members and, after quickly dismissing involuntary  
preemption of the fibrils, it didn't seem so bad.  I haven't done an  
exhaustive audit yet (and I won't advocate merging until I have) but  
I haven't seen any train wrecks.
> we didn't create fibril-like
> things for threads, instead, we share PIDs between tasks. I wonder if
> the sane approach would be to actually create task structs (or have a
> pool of them pre-created sitting there for performances) and add a way
> to share the necessary bits so that syscalls can be run on those
> spin-offs.
Maybe, if it comes to that.  I have some hopes that sharing by  
default and explicitly marking the bits that we shouldn't share will  
be good enough.
- z
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/