Date: Mon, 25 Feb 2008 12:14:40 -0800
From: Andrew Morton <>
Subject: Re: Clocksource tsc is always unstable with 2.6.25-* kernels and CONFIG_NO_HZ=y on my box
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/2/25/306

On Sun, 24 Feb 2008 01:31:21 +0100 Gabriel C <nix.or.die@googlemail.com> wrote:
> Hi,
> 
> I noticed tsc is always marked unstable on my box with 2.6.25* , 2.6.24 is fine.
> 
> ...
> 
> [    0.825760] ACPI: PCI Interrupt 0000:03:0e.0[A] -> GSI 22 (level, low) -> IRQ 22
> [    0.805755] Switched to high resolution mode on CPU 1
> [    0.794244] Switched to high resolution mode on CPU 2
> [    0.766968] Switched to high resolution mode on CPU 3
> [    1.083944] Switched to high resolution mode on CPU 0
> [   15.388792] Clocksource tsc unstable (delta = 9373391604 ns)
> [   15.714648] Time: acpi_pm clocksource has been installed.
> 
> ...
> 
> Booting nohz=off fixes that.
> 
> Another strange thing is when I try to boot that kernel with clocksource=acpi_pm it just hangs.
> 
> config is attached.
> 
> Please let me know if you need more infos / want me to try patches or anything else.
> 
> 
I suppose we should consider this a regression.  If only because acpi_pm is
slower.  But mainly because (afaik) this change was not intentional.