Date: 14 Feb 2001 01:02:05 +0100
From: Trond Myklebust <>
Subject: Re: Stale NFS handles on 2.4.1
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/2/13/177

>>>>> " " == stergaard  <Jakob> writes:
     > What happens is that one machine will finish compiling, and
     > another machine will immediately thereafter do a "touch
     > some_output.o". This "touch" sometimes fails with a stale
     > handle message.
Does the appended patch change anything?
Cheers,
  Trond
--- linux-2.4.1/fs/nfs/inode.c.orig	Tue Dec 12 02:46:04 2000
+++ linux-2.4.1/fs/nfs/inode.c	Wed Feb 14 01:00:33 2001
@@ -100,6 +100,7 @@
 	inode->i_rdev = 0;
 	NFS_FILEID(inode) = 0;
 	NFS_FSID(inode) = 0;
+	NFS_FLAGS(inode) = 0;
 	INIT_LIST_HEAD(&inode->u.nfs_i.read);
 	INIT_LIST_HEAD(&inode->u.nfs_i.dirty);
 	INIT_LIST_HEAD(&inode->u.nfs_i.commit);
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/