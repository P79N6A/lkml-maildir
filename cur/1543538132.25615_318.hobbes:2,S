Date: Mon, 03 Jul 2000 21:48:25 +0200
From: Dieter Nützel <>
Subject: Re: 2.4.0-test3-pre1: OOPS with 'rmmod -a'
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/7/3/318

Jens Axboe wrote:
> On Mon, Jul 03 2000, Dieter Nützel wrote:
> > Hello,
> >
> > I got some oops with 'rmmod -a'.
>
> [snip]
>
> I know this happens now -- does attached patch cure the problem?
Yes, it does! :-)
Only one thing still exists.
'lilo -v' (or whatever) live locks if no IDE module is loaded before.
I can kill it from another console/shell.
modules.conf
# configure /dev/hda (DMA)
#
alias block-major-3 ide-probe-mod
post-install ide-disk /usr/local/sbin/hdparm -d 1 /dev/hda
snipped from dmesg:
Uniform Multi-Platform E-IDE driver Revision: 6.31
ide: Assuming 33MHz system bus speed for PIO modes; override with idebus=xx
AMD7409: IDE controller on PCI bus 00 dev 39
AMD7409: chipset revision 3
AMD7409: not 100% native mode: will probe irqs later
AMD7409: disabling single-word DMA support (revision < C4)
    ide0: BM-DMA at 0xf000-0xf007, BIOS settings: hda:DMA, hdb:pio
    ide1: BM-DMA at 0xf008-0xf00f, BIOS settings: hdc:pio, hdd:pio
hda: WDC AC32500H, ATA DISK drive
ide0 at 0x1f0-0x1f7,0x3f6 on irq 14
hda: Disabling (U)DMA for WDC AC32500H
hda: 4999680 sectors (2560 MB) w/128KiB Cache, CHS=4960/16/63
 hda: hda1
request_module[ide-disk]: waitpid(339,...) failed, errno 512
Thank you very much.
-Dieter
--
Dieter Nützel
Graduate Student, Computer Science
University of Hamburg
Department of Computer Science
Cognitive Systems Group
Vogt-Kölln-Straße 30
D-22527 Hamburg, Germany
email: nuetzel@kogs.informatik.uni-hamburg.de
@home: dieter.nuetzel@myokay.net
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/