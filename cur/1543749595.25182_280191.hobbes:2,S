Date: Mon, 20 Dec 2004 19:03:57 +1100
From: Con Kolivas <>
Subject: Re: 2.6.10-rc3: kswapd eats CPU on start of memory-eating task
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/12/20/41

Nick Piggin wrote:
> Andrew Morton wrote:
> 
>> Voluspa <lista4@comhem.se> wrote:
>>
>>> Would be nice though if someone else could verify...
>>
>>
>>
>> Well I'd love to, but afaik the only workloads which we currently know of
>> involve complex userspace apps which I have no experience running.
>>
>> Did anyone come up with a simple step-by-step procedure for 
>> reproducing the
>> problem?  It would be good if someone could do this, because I don't 
>> think
>> we understand the root cause yet?
>>
> 
> I admit to generally being in the same boat as you with respect to
> running complex userspace apps.
> 
> However, based on this and other scattered reports, I'd say it seems
> quite likely that token based thrashing control is the culprit. Based
> on the cost/benefit, I wonder if we should disable TBTC by default for
> 2.6.10, rather than trying to fix it, and try again for 2.6.11?
> 
> Rik? Andrew?
> 
> Also, it would be nice to have a sysctl to *completely* disable TBTC,
> that would make testing easier.
Logistically what makes sense is if a timeout of 0 is used as a test 
that completely disables it (avoids another sysctl too). In time for 
2.6.10 we should disable it by default until the regressions are better 
understood. Tuning it into a useful "on" position can happen later and I 
suspect requires more code.
Con
[unhandled content-type:application/pgp-signature]