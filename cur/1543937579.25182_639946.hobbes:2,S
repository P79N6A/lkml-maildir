Date: Thu, 17 Jan 2008 15:48:16 -0800 (PST)
From: Linus Torvalds <>
Subject: Re: [PATCH] fix wrong sized spinlock flags argument
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/17/476

Applied.
However, the patch itself didn't apply cleanly, because in my souce tree, 
these two lines are in a different order:
On Thu, 17 Jan 2008, Daniel Walker wrote:
> 
>  	pci_set_power_state(pci_dev, PCI_D0);
>  	pci_restore_state(pci_dev);
but I actually think your order is the *correct* one (because I'm not at 
all sure that config space writes are even guaranteed to make a difference 
when in D3cold).
So I wonder, did you have some other fix applied to your "original" tree 
(it sure isn't original 2.6.23, since that whole suspend/resume code was 
added later.
Maxim? Mauro? Pretty much all other drivers do
	pci_set_power_state(pdev, PCI_D0);
	pci_restore_state(pdev);
in that order, and I really do think that D3cold is allowed to not 
actually react fully to all config space accesses (ie we have to re-write 
them after bringing it out of D3)
			Linus