Date: Mon, 3 Mar 2008 15:48:31 +0000
From: Alan Cox <>
Subject: Re: [patch] Re: using long instead of atomic_t when only set/read is required
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/3/3/222

> Ok, so linux actually atomicity of long?
No it doesn't. And even if it did you couldn't use long for this because
atomic_t also ensures the points operations complete are defined. You
might just about get away with volatile long * objects on x86 for simple
assignments but for anything else gcc can and will generate code to
update values whichever way it feels best - which includes turning
	long *x = a + b;
into
	*x = a;
	*x += b;
Alan