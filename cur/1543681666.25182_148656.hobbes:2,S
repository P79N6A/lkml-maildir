Date: Wed, 16 Jul 2003 15:34:38 +0400
From: Ivan Kokshaysky <>
Subject: Re: Trying to get DMA working with IDE alim15x3 controller
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/7/16/79

On Tue, Jul 15, 2003 at 06:32:02PM -0500, Art Haas wrote:
> I've been using the 2.5 series for a long time now, but I have vague
> memories of not needing to use 'ide=nodma' before this patch was added:
> 
> ===== setup-pci.c 1.5 vs 1.6 =====
> --- 1.5/drivers/ide/setup-pci.c	Sat Sep 21 07:59:59 2002
> +++ 1.6/drivers/ide/setup-pci.c	Tue Sep 24 09:24:57 2002
> @@ -250,6 +250,7 @@
> 
>  		switch(dev->device) {
>  			case PCI_DEVICE_ID_AL_M5219:
> +			case PCI_DEVICE_ID_AL_M5229:
>  			case PCI_DEVICE_ID_AMD_VIPER_7409:
>  			case PCI_DEVICE_ID_CMD_643:
>  			case PCI_DEVICE_ID_SERVERWORKS_CSB5IDE:
Hmm, interesting. This line has been added at early stage of IDE rewrite
to work around some unrelated bug, IIRC. I strongly suspect that it's
not needed anymore (will verify it later today), and it also might explain
weird DMA breakage with older ALi chips.
BTW, have you tried recent 2.4 kernels? Looks like this line should be
removed in 2.4 as well.
Ivan.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/