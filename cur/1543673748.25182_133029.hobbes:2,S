Date: Thu, 15 May 2003 00:51:57 +0200
From: Pavel Machek <>
Subject: Re: 2.5.69-mm5: CONFIG_ACPI_SLEEP compile error
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/5/14/350

Hi!
Mikpe, is this your diff? 
revision 1.16
date: 2003/05/11 18:58:48;  author: mikpe;  state: Exp;  lines: +2 -4
restore sysenter MSRs at APM resume
I do not know why you changed it (it has certainly nothing to do with
APM resume)... Please revert it.
								Pavel
Index: suspend.c
===================================================================
RCS file:
/home/pavel/sf/bitbucket/bkcvs/linux-2.5/arch/i386/kernel/suspend.c,v
retrieving revision 1.15
retrieving revision 1.16
diff -u -r1.15 -r1.16
--- suspend.c   8 Apr 2003 16:46:44 -0000       1.15
+++ suspend.c   11 May 2003 18:58:48 -0000      1.16
@@ -27,9 +27,7 @@
 #include <asm/tlbflush.h>
 static struct saved_context saved_context;
-unsigned long saved_context_eax, saved_context_ebx,
saved_context_ecx, saved_context_edx;
-unsigned long saved_context_esp, saved_context_ebp,
saved_context_esi, saved_context_edi;
-unsigned long saved_context_eflags;
+static void fix_processor_context(void);
 extern void enable_sep_cpu(void *);
@@ -107,7 +105,7 @@
        do_fpu_end();
 }
-void fix_processor_context(void)
+static void fix_processor_context(void)
 {
        int cpu = smp_processor_id();
        struct tss_struct * t = init_tss + cpu;
> It seems the following problem comes from Linus' tree:
> 
> <--  snip  -->
> 
> ...
> ... --end-group  -o .tmp_vmlinux1
> arch/i386/kernel/built-in.o(.data+0x1fae): In function `do_suspend_lowlevel':
> : undefined reference to `saved_context_esp'
> arch/i386/kernel/built-in.o(.data+0x1fb3): In function `do_suspend_lowlevel':
> : undefined reference to `saved_context_eax'
> arch/i386/kernel/built-in.o(.data+0x1fb9): In function `do_suspend_lowlevel':
> : undefined reference to `saved_context_ebx'
> ...
> make: *** [.tmp_vmlinux1] Error 1
> 
-- 
When do you have a heart between your knees?
[Johanka's followup: and *two* hearts?]
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/