Date: Fri, 2 Mar 2007 22:39:59 +0100
From: Heiko Carstens <>
Subject: Re: [patch] timer/hrtimer: take per cpu locks in sane order
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/3/2/310

> > +/*
> > + * double_timer_lock/unlock are used to ensure that on cpu hotplug the
> > + * per cpu timer locks are always taken in the same order.
> > + */
> > +static void __devinit double_timer_lock(tvec_base_t *base1,
> > +					tvec_base_t *base2, int ind)
> > +	__acquires(base1->lock)
> > +	__acquires(base2->lock)
> 
> hm.  Can we not just pass in the spinlock_t*'s and use a common function?
> 
> 	void double_spin_lock(spinlock_t *l1, spinlock_t *l2, int ind);
> 
> that way it has nothing to do with timers and can potentially be used
> elsewhere in the kernel, too.
> 
> (what does "ind" mean?)
Sure. Will put a static inline function into include/linux/spinlock.h.
"ind" is supposed to be the short form of "indicator".
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/