Date: Thu, 18 Feb 1999 23:26:56 +0200 (EET)
From: Tuomas Heino <>
Subject: 2.2.x memory allocation (was Re: TEAC CD-R55S doesn't work)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/2/18/120

On Thu, 18 Feb 1999, Raphael Becker wrote:
[snip]
> RAM: 96 MB
[snip]
> cdrecord: Cannot allocate memory. Cannot send SCSI cmd via ioctl
[snip]
>  _    _ Powered by SuSE___   ___   _  
> | |  (_)_ _ _  ___ __ |_  ) |_  ) / | 
> | |__| | ' \ || \ \ /  / / _ / / _| | 
> |____|_|_||_\_,_/_\_\ /___(_)___(_)_|
Hmm... I think there's something wrong with the way 2.2.1 allocates memory...
... as in there seems to be no memory for some parts of the kernel... like
DMA:ble memory for example
let me show you what trying to get sound working w/ 2.2.1 gave me:
# uptime
 11:10pm  up 19 days,  2:22, 10 users,  load average: 1.04, 1.01, 1.00
## OSS/free (standard sound driver)
# modprobe gus
# strace head -c 0 /dev/audio
open("/dev/audio", O_RDONLY)            = -1 ENOMEM (Cannot allocate memory)
Sound error: Couldn't allocate DMA buffer
# free
             total       used       free     shared    buffers     cached
Mem:        128068     125036       3032      31456      48772      10116
-/+ buffers/cache:      66148      61920
Swap:       130748        996     129752
# modprobe -r gus
## ALSA
# modprobe snd-interwave; amixer -r
# strace head -c 0 /proc/asound/dev/pcmC0D0
open("/proc/asound/dev/pcmC0D0", O_RDONLY) = -1 ENOMEM (Cannot allocate memory)
# modprobe -r snd-interwave
## OSS/Linux
# soundon
This copy of OSS is licensed to Tuomas Heino
Sound error: Couldn't allocate DMA buffer
Sound error: Couldn't allocate DMA buffer
Sound error: Couldn't allocate DMA buffer
# soundoff
# free
             total       used       free     shared    buffers     cached
Mem:        128068     123852       4216      31456      46476      11380
-/+ buffers/cache:      65996      62072
Swap:       130748        996     129752
# free; modprobe gus; head -c 0 /dev/audio; modprobe -r gus; modprobe \
  snd-interwave; head -c 0 /proc/asound/dev/pcmC0D0; modprobe -r \
  snd-interwave; soundon; soundoff; free
             total       used       free     shared    buffers     cached
Mem:        128068     123868       4200      31456      46492      11380
-/+ buffers/cache:      65996      62072
Swap:       130748        996     129752
Sound error: Couldn't allocate DMA buffer
head: /dev/audio: Cannot allocate memory
isapnp: Device 'UltraSound Plug & Play'
isapnp: 1 Plug & Play device detected total
head: /proc/asound/dev/pcmC0D0: Cannot allocate memory
This copy of OSS is licensed to Tuomas Heino
Sound error: Couldn't allocate DMA buffer
Sound error: Couldn't allocate DMA buffer
Sound error: Couldn't allocate DMA buffer
             total       used       free     shared    buffers     cached
Mem:        128068     123892       4176      31456      46504      11380
-/+ buffers/cache:      66008      62060
Swap:       130748        996     129752
... hmm doesn't seem to affect free memory too much ... gotta stop writing this message ;)
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/