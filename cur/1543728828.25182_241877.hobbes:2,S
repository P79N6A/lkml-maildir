Date: Sat, 14 Aug 2004 03:41:58 -0700 (PDT)
From: Linus Torvalds <>
Subject: Re: Linux v2.6.8 - Oops on NFSv3
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/8/14/39

On Sat, 14 Aug 2004, Willy Tarreau wrote:
> 
> I've just compiled and booted 2.6.8 on my dual athlon. Everything went
> OK before I logged in as a non-root user whose home is mounted from
> another linux box over NFSv3/UDP.
Damn. I think the stupid typo in fs/nfs/file.c from the fcntl f_op removal
patch is the problem.
Andrew, since I'm gone in another hour, how about you try to make a
2.6.8.1 with this, since this is clearly a good reason for one?
		Linus
--- 1.40/fs/nfs/file.c	2004-08-09 11:58:00 -07:00
+++ edited/fs/nfs/file.c	2004-08-14 03:35:11 -07:00
@@ -89,7 +89,7 @@
 	int res;
 
 	res = nfs_check_flags(filp->f_flags);
-	if (!res)
+	if (res)
 		return res;
 
 	lock_kernel();
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/