Date: Fri, 30 Jul 2004 08:15:16 +1000
From: Nigel Cunningham <>
Subject: Re: fixing usb suspend/resuming
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/7/29/291

Hi.
On Thu, 2004-07-29 at 22:51, Oliver Neukum wrote:
> > Regarding the spinning down before suspending to disk, I have a patch in
> > my version that adds support for excluding part of the device tree when
> > calling drivers_suspend. I take the bdevs we're writing the image to,
> > trace the structures to get the relevant device tree entry/ies and then
> > move (in the correct order) those devices and their parents from the
> > active devices list to a 'dont' touch' list (I don't call it that in
> 
> How do you deal with md, loop, etc... ?
The loop thread is NOFREEZE, so it should work fine. Until you said it,
I hadn't considered md, but it shouldn't be too hard to add some more
code to check if the devices are part of raid arrays. The other devices
could be given the same treatment.
As far as setting them up again at boot time, I've just added proper
initrd support, so one will be able to do any configuration needed from
an initrd (provided filesystems aren't mounted), get suspend to check if
it needs to resume and then carry on in the rest of the initrd mounting
filesystems and so on.
Regards,
Nigel
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/