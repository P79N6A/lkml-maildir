Date: Sun, 13 Nov 2005 08:17:16 +0100
From: Ingo Molnar <>
Subject: Re: ia64 SN2 - migration costs: 1) nearly zero 2) BUG 3) repeated
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/11/13/9

* Paul Jackson <pj@sgi.com> wrote:
> I turned on migration_debug=3 at boot, enabled CONFIG_PREEMPT and some 
> other CONFIG DEBUG options, and captured the output from the tty 
> console instead of via the /var/log/messages file.  This resulted in 
> the following.  Now I don't see the BUG, and the cost matrix makes 
> more sense (not all 0's), and the matrix output is not repeated.  I 
> don't understand why.  Feel free to ask me to try various 
> combinations, Ingo, if this doesn't make sense to you either.
hm, these calibration results looks quite sane. Could you try 
migration_debug=3 with the .config that failed before? (if it doesnt 
fail, could you re-check it still fails with migration_debug=2?) Zero 
results in the cost matrix usually are a sign of time resolution 
problems - but that shouldnt be an issue on ia64 which should have a 
globally synced TSC, right?
until these problems are solved, you should be able to work around it by 
booting with the migration_cost=0,7512036,45850376 boot option.
you can work around the warning message via changing the:
	int cpu1 = -1, cpu2 = -1, cpu, orig_cpu = smp_processor_id();
line to:
	int cpu1 = -1, cpu2 = -1, cpu, orig_cpu = raw_smp_processor_id();
i'll do the correct fix.
	Ingo
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/