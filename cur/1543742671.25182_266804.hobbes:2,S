Date: Sun, 31 Oct 2004 10:48:25 +1100
From: CaT <>
Subject: Re: PDC20267 bug and corruption (was: Re: [BK PATCHES] ide-2.6 update)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/10/30/256

On Sat, Oct 30, 2004 at 08:06:11PM +0200, Bartlomiej Zolnierkiewicz wrote:
> On Sat, 30 Oct 2004 13:47:45 +1000, CaT <cat@zip.com.au> wrote:
> > 2. dd if=/dev/hde of=/dev/null
> >    dd if=/dev/zero of=/dev/hdh
...
> > With method #2, a whole lot more fun occurs. The logfile I have is big
> > (almost 400k) so I've compressed it and included it as an attachment.
> > This is with kernel 2.6.10-rc1-bk7 (no logs survived from me testing
> > this with rc1-mm2).
> 
> Indeed, this is a lot more fun. ;)
:)
> Is this bug new/old?
old.
> Is it pdc202xx_old specific?  Does the same havoc happen
Can I use new with the 20267? According to config help and the source
code I looked at the 20267 is not listed as one of the devices for new.
> if you connect drives to the on-board Intel IDE controller?
I haven't tried that yet (mainly cos it's a bit of a pain - I have 3
devs connected to it, inc boot stuff - and i didn't know if it'd be
really useful info) but I will if need be. Just shout.
I have tried going fron hdd to hdh but nothing bad happened. It's only
when going from hde to hdh that fun occurs.
> Please post /proc identify data for both drives and PCI config
hde:
045a 3fff 37c8 0010 0000 0000 003f 0000
0000 0000 2020 2020 2020 564e 5642 3031
4732 5241 4b38 5848 0003 0e3b 0034 5632
324f 4136 3341 4943 3335 4c30 3630 4156
5632 3037 2d30 2020 2020 2020 2020 2020
2020 2020 2020 2020 2020 2020 2020 8010
0000 2f00 4000 0200 0200 0007 ffff 0001
003f ffc1 003e 0110 a120 0728 0000 0007
0003 0078 0078 00f0 0078 0000 0000 0000
0000 0000 0000 001f 0000 0000 0000 0000
007c 0019 74eb 7fea 4023 7468 3c02 4023
203f 000f 0000 0000 fffe 600b 80fe 0000
0000 0000 0000 0000 a120 0728 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0001 000b 0000 0000 0000 001b 0000 0000
4000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 8000 0000
424f 0000 0000 0182 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 74a5
hdh:
0c5a 3fff c837 0010 0000 0000 003f 0000
0000 0000 2020 2020 2020 2020 2020 2020
334c 4a32 3259 3846 0000 4000 0004 332e
3031 2020 2020 5354 3332 3030 3832 3241
2020 2020 2020 2020 2020 2020 2020 2020
2020 2020 2020 2020 2020 2020 2020 8010
0000 2f00 4000 0200 0200 0007 ffff 0001
003f ffc1 003e 0110 ffff 0fff 0000 0007
0003 0078 0078 00f0 0078 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
007e 001b 346b 7d01 4003 3469 3c01 4003
203f 0000 0000 fefe 0000 6d00 8000 0000
0000 0000 0000 0000 f1b0 1749 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0001 f1b0 1749 f1b0 1749 2020 0002 42b6
0000 008a 3c06 3c0a 0000 07c6 0100 0800
10f0 1000 0002 0030 0000 0000 0000 fe06
0000 fe03 0000 0000 0000 0000 00e3 000b
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 0000
0000 0000 0000 0000 0000 0000 0000 d8a5
> space dump for PDC20267 so someone can verify them.
0000:00:0d.0 Unknown mass storage controller: Promise Technology, Inc.  PDC20267 (FastTrak100/Ultra100) (rev 02)
00: 5a 10 30 4d 07 00 10 02 02 00 80 01 00 40 00 00
10: f1 10 00 00 01 18 00 00 f9 10 00 00 05 18 00 00
20: 81 10 00 00 00 00 00 42 00 00 00 00 5a 10 33 4d
30: 00 00 00 00 58 00 00 00 00 00 00 00 0b 01 00 00
40: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
50: ce 33 00 00 00 00 00 00 01 00 01 00 00 00 00 00
60: f1 24 41 00 c4 f3 4f 00 04 f3 4f 00 31 24 41 00
70: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
80: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
90: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
a0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
b0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
c0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
d0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
e0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
f0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
-- 
    Red herrings strewn hither and yon.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/