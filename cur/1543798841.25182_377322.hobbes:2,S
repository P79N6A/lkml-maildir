Date: Sun, 18 Dec 2005 03:33:56 -0500
From: Trond Myklebust <>
Subject: Re: lockd: couldn't create RPC handle for (host)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/12/18/13

On Sat, 2005-12-17 at 14:45 -0500, Ryan Richter wrote:
> > So what do you mean when you say that there is "no lockd process
> > running" on the client?
> > 
> > Is it not appearing in the output of 'ps -ef' either?
> 
> Nope.
> 
> $ ps -ef|grep lock
> root        77     5  0 Nov20 ?        00:00:00 [kblockd/0]
> foo       6811  6800  0 14:29 pts/0    00:00:00 grep -E lock
Any Oopses? (use 'dmesg')
Could you also check dmesg for any entries of the form
'lockd: new process, skipping host shutdown'
or
'lockd_up: makesock failed, error='
> > Is anything at all listening on port 32768 on 'jacquere'? (check using
> > 'netstat -ap | grep 32768').
> 
> Er... sort of?
> 
> # netstat -ap | grep 32768
> udp    11144      0 *:32768                 *:*                                -                   
> I'm not sure what that means...  lsof|grep 32768 returns nothing.
That could be a kernel process. The RPC client has no reason to set up a
full file descriptor for the socket.
Could you please finally double-check that the entries in /proc/mounts
for your NFS mounts do contain the 'lock' mount option.
Finally, please do
echo 1 > /proc/sys/sunrpc/rpc_lockd
then unmount one of your NFS partitions, and then mount it again.
Cheers,
  Trond
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/