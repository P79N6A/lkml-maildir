Date: Thu, 31 Oct 2002 03:05:12 -0700
From: Erik Andersen <>
Subject: Re: CONFIG_TINY
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/10/31/70

On Thu Oct 31, 2002 at 09:24:40AM +0100, Rasmus Andersen wrote:
> On Thu, Oct 31, 2002 at 01:53:14AM +0100, Adrian Bunk wrote:
> 
> Hi Adrian,
> > 
> > could you try to use "-Os" instead of "-O2" as gcc optimization option
> > when CONFIG_TINY is enabled? Something like the following (completely
> > untested) patch:
> 
> I tried -Os once, and it didn't boot for me. So I dumped it.
I build all my kernels with -Os and it works just fine for me.
--- orig/Makefile	Tue Aug 20 06:44:25 2002
+++ linux-2.4.19/Makefile	Tue Aug 20 06:44:25 2002
@@ -88,7 +88,7 @@
 
 CPPFLAGS := -D__KERNEL__ -I$(HPATH)
 
-CFLAGS := $(CPPFLAGS) -Wall -Wstrict-prototypes -Wno-trigraphs -O2 \
+CFLAGS := $(CPPFLAGS) -Wall -Wstrict-prototypes -Wno-trigraphs -Os \
 	  -fno-strict-aliasing -fno-common
 ifndef CONFIG_FRAME_POINTER
 CFLAGS += -fomit-frame-pointer
 -Erik
--
Erik B. Andersen             
http://codepoet-consulting.com/
--This message was written using 73% post-consumer electrons--
[unhandled content-type:application/pgp-signature]