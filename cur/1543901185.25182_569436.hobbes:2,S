Date: Sun, 15 Jul 2007 09:51:44 +0200
From: Olaf Hering <>
Subject: Re: [PATCH] remove PAGE_SIZE from headers_install
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/7/15/23

On Sat, Jul 14, Mike Frysinger wrote:
> On 7/14/07, Olaf Hering <olaf@aepfle.de> wrote:
> >Declare PAGE_SIZE as getpagesize() for userspace.
> >PAGE_SIZE is used in resource.h and shm.h
> >
> >define PAGE_SIZE in asm-generic/page.h
> >guard get_order() with _ARCH_HAS_GET_ORDER for ia64 and xtensa
> >include asm-generic/page.h in asm/page.h
> >make asm/page.h nearly empty by moving the #ifdef guards up
> >remove unneeded page.h export from frv
> 
> imo, asm/page.h should just go away for userspace.  the attached patch
> is what i've been using in Gentoo ... but somethings (like an arch or
> two in glibc) still assume asm/page.h is OK.  in general though,
> considering asm/page.h has become so unreliable lately (a large number
> of arches ifdef the whole thing out), most packages out there have
> updated already to use the userspace interface from unistd.h.
> -mike
nothing appears to use linux/shm.h and linux/resource.h
strace-4.5.15 uses linux/a.out.h in #ifdef LINUXSPARC
glibc uses asm/elf.h in sys/procfs.h, also in alpha and powerpc.
kexec-tools use linux/elf.h
psmisc and ltrace use linux/user.h
glibc (for sh) and mono-debugger use asm/user.h
And alot of asm/page.h users.
Thats the upstream status today. What you do at home doesnt really
matter.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/