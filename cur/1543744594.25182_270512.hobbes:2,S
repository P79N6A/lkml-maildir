Date: Fri, 12 Nov 2004 15:30:38 +0100
From: Adrian Bunk <>
Subject: [patch] 2.6.10-rc1-mm5: some reiser4 cleanups
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/11/12/72

This patch (gzip'ed due to the 100 kB limit on linux-kernel) is not 
intended for immediate applying but requires a review.
I've gone throught the reiser4 code in 2.6.10-rc1-mm5, removed unused 
code and made needlessly global code static.
Size comparison (with all through Kconfig available debugging enabled,
gcc 3.4 on i386):
1787503 2004-11-12 15:12 built-in.o
1821820 2004-11-11 23:55 built-in.o-before-cleanup
That's a 1.9% space saving with zero functionality loss.
diffstat output:
 fs/reiser4/Makefile                       |    5 
 fs/reiser4/block_alloc.c                  |   29 ---
 fs/reiser4/block_alloc.h                  |   10 -
 fs/reiser4/carry.c                        |   25 +--
 fs/reiser4/carry.h                        |   20 --
 fs/reiser4/cluster.h                      |    4 
 fs/reiser4/context.c                      |    6 
 fs/reiser4/context.h                      |    5 
 fs/reiser4/coord.c                        |   43 -----
 fs/reiser4/coord.h                        |    4 
 fs/reiser4/debug.c                        |   31 ---
 fs/reiser4/debug.h                        |    4 
 fs/reiser4/estimate.c                     |    6 
 fs/reiser4/flush.c                        |   16 -
 fs/reiser4/flush.h                        |    2 
 fs/reiser4/flush_queue.c                  |    4 
 fs/reiser4/inode.c                        |   13 -
 fs/reiser4/inode.h                        |    2 
 fs/reiser4/jnode.c                        |   19 +-
 fs/reiser4/jnode.h                        |    8 
 fs/reiser4/kassign.c                      |   37 ----
 fs/reiser4/kassign.h                      |    3 
 fs/reiser4/kcond.c                        |   15 -
 fs/reiser4/kcond.h                        |    3 
 fs/reiser4/lnode.c                        |  177 ----------------------
 fs/reiser4/lnode.h                        |    6 
 fs/reiser4/lock.c                         |    2 
 fs/reiser4/log.c                          |   44 -----
 fs/reiser4/log.h                          |   10 -
 fs/reiser4/page_cache.c                   |   10 -
 fs/reiser4/page_cache.h                   |    1 
 fs/reiser4/plugin/cryptcompress.c         |   33 +---
 fs/reiser4/plugin/cryptcompress.h         |    1 
 fs/reiser4/plugin/dir/dir.c               |    4 
 fs/reiser4/plugin/dir/hashed_dir.c        |    2 
 fs/reiser4/plugin/file/file.c             |   31 +--
 fs/reiser4/plugin/file/funcs.h            |    1 
 fs/reiser4/plugin/file/pseudo.c           |    2 
 fs/reiser4/plugin/file/tail_conversion.c  |   10 -
 fs/reiser4/plugin/item/ctail.c            |    9 -
 fs/reiser4/plugin/item/ctail.h            |    2 
 fs/reiser4/plugin/item/extent.c           |    8 
 fs/reiser4/plugin/item/extent.h           |    2 
 fs/reiser4/plugin/item/extent_flush_ops.c |    4 
 fs/reiser4/plugin/item/item.c             |    2 
 fs/reiser4/plugin/item/tail.c             |    2 
 fs/reiser4/plugin/node/node.c             |   92 -----------
 fs/reiser4/plugin/node/node.h             |    5 
 fs/reiser4/plugin/node/node40.c           |   16 -
 fs/reiser4/plugin/node/node40.h           |    2 
 fs/reiser4/plugin/object.c                |    8 
 fs/reiser4/plugin/object.h                |    2 
 fs/reiser4/plugin/plugin.c                |   23 --
 fs/reiser4/plugin/plugin_set.c            |   37 +---
 fs/reiser4/plugin/plugin_set.h            |    4 
 fs/reiser4/plugin/space/bitmap.c          |    6 
 fs/reiser4/plugin/space/bitmap.h          |    1 
 fs/reiser4/pool.c                         |    2 
 fs/reiser4/pool.h                         |    1 
 fs/reiser4/repacker.c                     |    6 
 fs/reiser4/repacker.h                     |    1 
 fs/reiser4/safe_link.c                    |    2 
 fs/reiser4/safe_link.h                    |    1 
 fs/reiser4/search.c                       |   37 ----
 fs/reiser4/stats.c                        |    2 
 fs/reiser4/stats.h                        |    3 
 fs/reiser4/super.c                        |   75 ---------
 fs/reiser4/super.h                        |    8 
 fs/reiser4/tap.c                          |    9 -
 fs/reiser4/tap.h                          |    2 
 fs/reiser4/tree.c                         |   16 -
 fs/reiser4/tree.h                         |    9 -
 fs/reiser4/txnmgr.c                       |   79 ---------
 fs/reiser4/txnmgr.h                       |   11 -
 fs/reiser4/wander.c                       |    2 
 fs/reiser4/znode.c                        |  155 ++++---------------
 fs/reiser4/znode.h                        |   11 -
 77 files changed, 189 insertions(+), 1116 deletions(-)
cu
Adrian
-- 
       "Is there not promise of rain?" Ling Tan asked suddenly out
        of the darkness. There had been need of rain for many days.
       "Only a promise," Lao Er said.
                                       Pearl S. Buck - Dragon Seed
[unhandled content-type:application/octet-stream]