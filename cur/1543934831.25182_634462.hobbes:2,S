Date: Sat, 05 Jan 2008 01:38:53 +0000
From: "Phil Endecott" <>
Subject: Re: strace, accept(), ERESTARTSYS and EINTR
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/4/294

Frederik Deweerdt wrote:
> On Fri, Jan 04, 2008 at 09:01:38PM +0000, Phil Endecott wrote:
>> struct sockaddr_in client_addr;
>> socklen_t client_size=sizeof(client_addr);
>> int connfd = accept(fd,(struct sockaddr*)(&client_addr),&client_size);
>> if (connfd==-1) {
>>   // [1]
>>   .....report error and terminate......
> Replacing the (connfd == -1) check with (connfd < 0),
> could you try printf'ing connfd and errno here?
> Just to confirm strace's output.
Yes, I've already added something like that.  Now we just need to wait 
for it to crash again, which will happen faster if people in a 
different timezone go and play with 
http://demos.anyterm.org/bastet/anyterm.html
 while I sleep....
Phil.
(Your are welcome to Cc: me in any replies)