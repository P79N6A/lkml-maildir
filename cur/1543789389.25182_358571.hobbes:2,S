Date: Mon, 17 Oct 2005 12:04:38 +0200
From: Pavel Machek <>
Subject: Fix /proc/acpi/events around suspend
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/10/17/168

Fix -EIO on /proc/acpi/events after suspends. This actually breaks
suspending by power button in many setups.
Signed-off-by: Pavel Machek <pavel@suse.cz>
---
commit a6660667ecd52e68a1b51ab9135d722d974ba171
tree e915e150ec69ec6b1cf15a8d9302bf06665ad1f6
parent cce1c483de7404e3d6320d650af23373be4c39af
author <pavel@amd.(none)> Tue, 11 Oct 2005 23:10:55 +0200
committer <pavel@amd.(none)> Tue, 11 Oct 2005 23:10:55 +0200
 drivers/acpi/event.c |    5 ++---
 1 files changed, 2 insertions(+), 3 deletions(-)
diff --git a/drivers/acpi/event.c b/drivers/acpi/event.c
--- a/drivers/acpi/event.c
+++ b/drivers/acpi/event.c
@@ -58,9 +58,8 @@ acpi_system_read_event(struct file *file
 			return_VALUE(-EAGAIN);
 
 		result = acpi_bus_receive_event(&event);
-		if (result) {
-			return_VALUE(-EIO);
-		}
+		if (result)
+			return_VALUE(result);
 
 		chars_remaining = sprintf(str, "%s %s %08x %08x\n",
 					  event.device_class ? event.
-- 
Thanks, Sharp!
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/