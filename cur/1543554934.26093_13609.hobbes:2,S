Date: Fri, 17 Nov 2000 16:28:18 +0100
From: "J . A . Magallon" <>
Subject: Re: [RHSA-2000:108-02] Up2.2.16-22 Kernel Compile errors...
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/11/17/137

On Fri, 17 Nov 2000 11:39:28 jeffrey wrote:
> Hi guys.I just did a clean install(of RedHat 7) on my box.I'm trying to
> recompile my kernel to support a second NIC(SMC Ultra) and when I
> do   make zImage
> the compile process start but immediately stops with the following error
> message:
> 
> >  make all_targets
> >  > make[2]: Entering directory `/usr/src/linux-2.2.16/kernel'
> >  > kgcc -D__KERNEL__ -I/usr/src/linux/include -Wall -Wstrict-prototypes -O2
> -fomit-
> >  > frame-pointer -fno-strict-aliasing -pipe -fno-strength-reduce -m386
> -DCPU=386
> >  > -DEXPORT_SYMTAB -c ksyms.c
> >  > In file included from /usr/src/linux/include/linux/modversions.h:50,
> >  >                  from /usr/src/linux/include/linux/module.h:19,
> >  >                  from ksyms.c:14:
> >  > /usr/src/linux/include/linux/modules/i386_ksyms.ver:6: warning:
> `cpu_data' redef
> >  > ined
> >  > /usr/src/linux/include/asm/processor.h:96: warning: this is the location
> of the
> >  > previous definition
> >  > /usr/src/linux/include/linux/modules/i386_ksyms.ver:28: warning:
> `smp_num_cpus'
> >  > redefined
> >  > /usr/src/linux/include/linux/smp.h:77: warning: this is the location of
> the prev
> >  > ious definition
> >  > /usr/src/linux/include/linux/modules/i386_ksyms.ver:118: warning:
> `smp_call_func
> >  > tion' redefined
> >  > /usr/src/linux/include/linux/smp.h:83: warning: this is the location of
> the prev
> >  > ious definition
> >  > In file included from /usr/src/linux/include/linux/interrupt.h:51,
> >  >                  from ksyms.c:21:
> >  > /usr/src/linux/include/asm/hardirq.h:23: warning: `synchronize_irq'
> redefined
> >  > /usr/src/linux/include/linux/modules/i386_ksyms.ver:138: warning: this is
> the lo
> >  > cation of the previous definition
> >  > In file included from /usr/src/linux/include/linux/interrupt.h:52,
> >  >                  from ksyms.c:21:
> >  > /usr/src/linux/include/asm/softirq.h:75: warning: `synchronize_bh'
> redefined
> >  > /usr/src/linux/include/linux/modules/i386_ksyms.ver:142: warning: this is
> the lo
> >  > cation of the previous definition
> >  > /usr/src/linux/include/linux/kernel_stat.h: In function `kstat_irqs':
> >  > In file included from ksyms.c:17:
> >  > /usr/src/linux/include/linux/kernel_stat.h:47: `smp_num_cpus' undeclared
> (first
> >  > use in this function)
> >  > /usr/src/linux/include/linux/kernel_stat.h:47: (Each undeclared
> identifier is re
> >  > ported only once
> >  > /usr/src/linux/include/linux/kernel_stat.h:47: for each function it
> appears in.)
> >  > make[2]: *** [ksyms.o] Error 1
> >  > make[2]: Leaving directory `/usr/src/linux-2.2.16/kernel'
> >  > make[1]: *** [first_rule] Error 2
> >  > make[1]: Leaving directory `/usr/src/linux-2.2.16/kernel'
> >  > make: *** [_dir_kernel] Error 2
> >  >
> >
>  I've looked all over, and I haven't been able to get a solution to this
> problem.Any
> ideas?
> 
Yes, delete that /usr/src/linux/include/linux/modules/i386_ksyms.ver. Or
save your .config file, make a mrproper, and rebuild. If it still
does not work, get a clean 2.2.17 and 2.2.18-pre21 patch and build your own from
standard sources. That kernel in RH seems to have a non-standard build tree.
I don't know what patches come with rh tree, but you can get all the published
patches at www.kernel.org, mainly in the kernel/people/[alan,andrea,hedrick]
dirs.
-- 
Juan Antonio Magallon Lacarta                                 #> cd /pub
mailto:jamagallon@able.es                                     #> more beer
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/