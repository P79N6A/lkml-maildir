Date: Thu, 23 Mar 2000 11:27:58 -0800
From: "Quang Nguyêñ (formerly Ngô)" <>
Subject: ** How to use ide-scsi.o instead of ide-tape.o?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/3/23/104

Assuming I have 1 IDE drive on the first IDE controller, and 1 IDE tape
drive on the second controller.  The tape drive would be on /dev/hdc.  I
want to use the SCSI emulation (ide-scsi.o) for tape drive.  There are
currently 2 solutions I can think of:
    1) Recompile the kernel without ide-tape and simply modprobe the
ide-scsi.o module
    2) Add append="hdc=ide-scsi" in the /etc/lilo.conf file and run lilo
I'm looking for a third solution that would work automatically without using
the solutions mentioned above.  Let's say the kernel is compiled with
ide-tape compiled-in and ide-scsi.o as a module.  If my program tries to
access /dev/hdc the IDE driver will have the ide-tape do the work since it's
compiled as part of the kernel, and it's registered before the ide-scsi.o
module.
Is there a way to programmatically deactivate ide-tape even it's compiled as
part of the kernel so that the IDE driver would have the ide-scsi.o module
do the work if my program tries to access /dev/hdc?
I tried:
     unregister_chrdev("ht0", 37);  // 37 is major id for ide-tape
But that didn't seem to deactive the ide-tape at all.
Help!
Thanks,
Quang
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/