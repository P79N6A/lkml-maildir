Date: Sat, 2 Jun 2007 21:08:18 +1000
From: "Mitch Davis" <>
Subject: Re: [2.6.22-rc3][ACPI?] Resume from s2r doesn't work.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/6/2/42

Hi Olaf,
I'm also having troubles with the resume part of STR, although since
your hardware is significantly different to mine, the cause is likely
to be different.
On 6/2/07, Rafael J. Wysocki <rjw@sisk.pl> wrote:
> > >>
> > >> > On Friday, 1 June 2007 22:27, Olaf Dietsche wrote:
> > >> >> When I resume, everything seems to come up (fan becomes busy, disk and
> > >> >> dvd spin up for a short time),
>
> First, you can check if the patch
>
> 
http://www.sisk.pl/kernel/hibernation_and_suspend/2.6.22-rc3/patches/20-ACPI-preserve-the-ebx-value-in-acpi_copy_wakeup_routine.patch
>
> helps, by chance.
(Rafael's suggestion may help you but it didn't help me)
> Second, you can use PM_TRACE (Documentation/power/s2ram.txt) to find the
> place where it really fails.
I modified my kernel source so it uses PM_TRACE to trace both the
suspend, and whether the BIOS ever jumps back into the kernel on
resume.  (In my case, I don't think the BIOS is doing the jump).
I also compiled with only the bare minimum of options turned on, and
use an initramfs to rule out device interactions.
If what I did is useful to you, you can find it here:
  
http://bugzilla.kernel.org/show_bug.cgi?id=7988
And if you haven't already (and your problem occurs with a stock
kernel), you might want to log this as a bug like I did.
Hope this helps.
Mitch.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/