Date: Wed, 12 Nov 2003 18:06:42 +0300
From: Ivan Kokshaysky <>
Subject: Re: 2.6.0-test9-bk16 ALi M5229 kernel boot error
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/11/12/66

On Tue, Nov 11, 2003 at 10:58:45PM -0800, David S. Miller wrote:
> On Wed, 12 Nov 2003 04:31:34 +0000
> viro@parcelfarce.linux.theplanet.co.uk wrote:
> > Wrong fix, AFAICS.  Original condition is bogus, no arguments here.
> > However, the point is
> > 	"tweak our southbridge only if northbridge is known to be OK with that"
> > and not
> > 	"tweak southbridge only if it's ours"
> > 
> > IOW, proper check is || of those two.
> 
> I agree with Al's analysis, and this is the kind of logic needed on
> sparc64 boxes as well.
I'm not sure there was any logic at all, given extremely misleading
comments in the original code. That "south-bridge's enable bit" stands
for "enable input pins for 80-conductor cable detection" according
to my (rather sparse) docs, and I don't understand why the hell it has
anything to do with a northbridge.
Someone with a more complete ALi documentation ought to verify that...
> Indeed, blindly deref'ing 'isa_dev' here was pretty bogus :)
Perhaps the source of this bug was the fact that M5229 controllers
are always part of the southbridge chip and therefore respective
"isa_dev" must exist. However, PCI IDs are re-writable on newer
ALi chips, which was probably the case.
Ivan.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/