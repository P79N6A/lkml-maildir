Date: Tue, 4 May 1999 13:21:38 +0200
From: Jan Kara <>
Subject: Re: [PATCH] Minor cleanup/fix in quota_on().
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/5/4/63

> > > 	quota_on() contains almost verbatim copy of filp_open(), except
> > > that it returns EMFILE instead of ENFILE (wrong, since EMFILE is about
> > > per-process limit and it's not the case here) and calls open_namei() with
> > > slightly wrong arguments (as the result read permissions are not checked).
> > > 	I replaced the cruft with call of filp_open(). Could you apply the
> > > following patch?
> >   Ooops. Your patch seems to collide with mine fixes in quotas (I also did some
> > cleanup in quota_on, added locks for serializing quota_on, quota_off...). I'll
> > probably merge your cleanup with mine and submit it...
> 
> I've looked at your patch now. Seems to be trivially mergeable with mine -
> new version of quota_on in the combined variant would looks so:
<snip>
Agreed. I'll put it in source and rediff it. If someone is interested it
should be available on: 
ftp://atrey.karlin.mff.cuni.cz/pub/local/jack/quota-fix-2.2.6-2.diff.gz
But I don't have sources at hand now so don't expect it to be there before 20:00 GMT...
						Thanks, Honza.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/