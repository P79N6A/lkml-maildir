Date: Fri, 12 Sep 2003 22:45:23 -0400
From: Jeff Garzik <>
Subject: Re: [FIX] Re: 2.4.23-pre3-pac2 broke PIIX ata-scsi
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/9/12/304

Bernhard Rosenkraenzer wrote:
> Since this is probably the first version of ATA_PIIX that does compile 
> with modular SCSI, I'd like some feedback on whether or not it actually 
> works w/ modular SCSI (I don't have any test hardware).
Red Hat ships it modular.  This version of libata of woefully out of 
date.  I need to get you an update :)
> diff -urN linux-2.4.23-pre3-pac2/drivers/scsi/Config.in linux-2.4.23-pre3-pac3/drivers/scsi/Config.in
> --- linux-2.4.23-pre3-pac2/drivers/scsi/Config.in	2003-09-13 02:35:08.000000000 +0200
> +++ linux-2.4.23-pre3-pac3/drivers/scsi/Config.in	2003-09-13 02:41:35.000000000 +0200
> @@ -71,7 +71,7 @@
>     dep_tristate 'AMI MegaRAID support (new driver)' CONFIG_SCSI_MEGARAID2 $CONFIG_SCSI
>  fi
> 
> -dep_bool 'SATA support' CONFIG_SCSI_ATA $CONFIG_SCSI
> +dep_tristate 'SATA support' CONFIG_SCSI_ATA $CONFIG_SCSI
This is not correct.  It should "dep_mbool".
> diff -urN linux-2.4.23-pre3-pac2/include/linux/ata.h linux-2.4.23-pre3-pac3/include/linux/ata.h
> --- linux-2.4.23-pre3-pac2/include/linux/ata.h	2003-09-13 02:35:11.000000000 +0200
> +++ linux-2.4.23-pre3-pac3/include/linux/ata.h	2003-09-13 02:41:51.000000000 +0200
> @@ -629,13 +629,6 @@
>  	return status;
>  }
> 
> -/*
> - * 2.5 compat.
> - */
> -
> -typedef void irqreturn_t;
> -#define IRQ_RETVAL(x)	/* nothing */
> -
Yes, this is what I have checked in locally.
Once I return from a conference next week, I'll send you an update patch 
specific with -pac kernels...
	Jeff
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/