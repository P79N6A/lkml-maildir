Date: Fri, 3 Oct 2003 16:55:01 -0700
From: Andrew Morton <>
Subject: Re: [PATCH] applicom: fix LEAK, unwind on errors;
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/10/3/194

"Randy.Dunlap" <rddunlap@osdl.org> wrote:
>
> -#warning "LEAK"
> -	RamIO = ioremap(mem, LEN_RAM_IO * MAX_ISA_BOARD);
> +	maxRamIO = ioremap(mem, LEN_RAM_IO * MAX_ISA_BOARD);
> 
> -	if (!RamIO) 
> +	if (!maxRamIO) 
>  		printk(KERN_INFO "ac.o: Failed to ioremap ISA memory space at 0x%lx\n", mem);
It seems that this driver is just testing to see if it can ioremap the
whole region before going through and mapping each board.
If we want to keep this sanity check then the iounmap should come
immediately after the ioremap, or it should just be removed.
Probably the latter: if the individual ioremaps work then they've worked,
haven't they?
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/