Date: Wed, 4 Jan 2006 15:01:39 -0800
From: Andrew Morton <>
Subject: Re: [patch 2.6.15] i386: Optimize local APIC timer interrupt code
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/1/4/392

Chuck Ebbert <76306.1226@compuserve.com> wrote:
>
> Local APIC timer interrupt happens HZ times per second on each CPU.
> 
> Optimize it for the case where profile multiplier equals one and does
> not change (99+% of cases); this saves about 20 CPU cycles on Pentium II.
> 
> Also update the old multiplier immediately after noticing it changed,
> while values are register-hot, saving eight bytes of stack depth.
The code which you're patching is cheerfully nuked by a patch in Andi's
tree:
ftp://ftp.firstfloor.org/pub/ak/x86_64/quilt-current/patches/no-subjiffy-profile
I don't immediately understand that patch and I don't recall seeing it
discussed - maybe I was asleep.
It removes the profile multiplier (readprofile -M).  I've used that
occasionally, but can't say that I noticed much benefit from it.
What's the thinking here?
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/