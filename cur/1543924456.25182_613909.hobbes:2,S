Date: Sun, 4 Nov 2007 10:55:01 +0100
From: Jean Delvare <>
Subject: Re: [i2c] [PATCH] Fix i2c module parameter permissions for read/write
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/11/4/15

Hi John,
On Sun, 4 Nov 2007 00:55:15 -0400, Jon Smirl wrote:
> The permissions of i2c module parameters were set to zero making the
> parameters invisible and unsettable from the kernel command line. This
> patch changes the permissions to the standard 0644 read/write.
These permissions have nothing to do with the kernel command line. They
define whether a file is created in sysfs for the respective module
parameter. Even with permissions set to 0, you can still set the value
in question from the kernel command line with <module>.<parm>=<value>.
Also, there's no such think as "standard 0644" permissions. For some
parameters, it doesn't make much sense to expose them in sysfs. For
others it doesn't make sense (or could even be dangerous) to make them
writable. Each parameter has its own requirements.
> 
> Signed-off-by: Jon Smirl <jonsmirl@gmail.com>
> ---
> 
> diff --git a/include/linux/i2c.h b/include/linux/i2c.h
> index 8033e6b..395e430 100644
> --- a/include/linux/i2c.h
> +++ b/include/linux/i2c.h
> @@ -588,7 +588,7 @@ union i2c_smbus_data {
>  #define I2C_CLIENT_MODULE_PARM(var,desc) \
>    static unsigned short var[I2C_CLIENT_MAX_OPTS] = I2C_CLIENT_DEFAULTS; \
>    static unsigned int var##_num; \
> -  module_param_array(var, short, &var##_num, 0); \
> +  module_param_array(var, short, &var##_num, 0644); \
>    MODULE_PARM_DESC(var,desc)
> 
>  #define I2C_CLIENT_MODULE_PARM_FORCE(name)                             \
> 
> 
-- 
Jean Delvare
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/