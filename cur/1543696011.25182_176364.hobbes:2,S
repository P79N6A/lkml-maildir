Date: Mon, 3 Nov 2003 13:25:55 -0800
From: David Mosberger <>
Subject: Re: [linux-usb-devel] Re: serious 2.6 bug in USB subsystem?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/11/3/131

>>>>> On Sun, 02 Nov 2003 19:46:38 -0800, David Brownell <david-b@pacbell.net> said:
  David> I'm not sure that if the HID driver were to pass a null
  David> buffer pointer, it would be caught anywhere.
  >>  OK, I'll try to find some time to trace the I/O MMU calls to see
  >> if something isn't kosher at that level.  Is there a good way of
  >> getting a relatively high-level of tracing in the USB subsystem
  >> that would some me what's going on between the HID and the core
  >> USB level?
  Dave.B> Most of that story is just submitting and completing URBs.
Yeah.  And it appears that it's the very first call to
hid_submit_ctrl() that's triggering the problem (not always, but about
9 out of 10 times).  I dumped some of the key fields for the URB being
submitted and they all looked saned to me.
  Dave.B> I'd either try changing the spots in drivers/usb/core/hcd.c
  Dave.B> marked as appropriate for generic MONITOR_URB hooks (printk
  Dave.B> if it's your HID device, maybe), or manually turn on
  Dave.B> whatever HCD-specific hooks exist (maybe use a VERBOSE
  Dave.B> message level).
OK, thanks for the suggestion.  I'll keep looking, but will be on
travel this week, so I may not be able to spend much time on this
problem.
	--david
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/