Date: Thu, 1 Feb 2007 13:01:51 +0100
From: Andi Kleen <>
Subject: Re: [-mm patch] x86_64 GTOD: offer scalable vgettimeofday
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/2/1/112

On Thursday 01 February 2007 12:46, Ingo Molnar wrote:
> 
> * jbohac@suse.cz <jbohac@suse.cz> wrote:
> 
> > Inter-CPU monotonicity can not, however, be guaranteed in a vsyscall, 
> > so vsyscall is not used by default. [...]
> 
> note that this is not actually the case. My patch below, ontop of -mm, 
> implements a fully monotonic gettimeofday as an optional vsyscall 
> feature.
> 
> The 'price' paid for it is lower resolution - but it's still good for 
> those benchmarking TPC-C runs - and /alot/ simpler. It's also quite a 
> bit faster than any TSC based vgettimeofday, because it doesnt have to 
> do an RDTSC (or RDTSCP) instruction nor any approximation of the time.
I believe that should be also a separate clock_gettime() CLOCK_ 
Global settings for these things are bad. Even if you run TPC-C you don't
want your other programs that rely on monotonic time to break.
-Andi
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/