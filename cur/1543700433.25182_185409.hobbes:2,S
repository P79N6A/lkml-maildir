Date: Sun, 21 Dec 2003 16:58:14 +0100
From: (M책ns Rullg책rd)
Subject: Re: Firewire/sbp2 troubles with Linux 2.6.0
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/12/21/71

Ben Collins <bcollins@debian.org> writes:
> On Sun, Dec 21, 2003 at 11:42:05AM +0100, M?ns Rullg?rd wrote:
>> Ben Collins <bcollins@debian.org> writes:
>> 
>> > On Sun, Dec 21, 2003 at 04:26:11AM +0100, M?ns Rullg?rd wrote:
>> >> 
>> >> I'm having some trouble connecting a Firewire hard disk box to a
>> >> laptop running Linux 2.6.0.  The disk is correctly detected when
>> >> connected, and can be mounted.  The problems start when I try to read
>> >> large files from the disk.  It will start off reading at about 10
>> >> MB/s, which seems a bit slow for Firewire.  The disks I've used are
>> >> capable of much more.  That's not the real problem, though.  After a
>> >> little while, sometimes as little as 1 MB, sometimes after about 50
>> >> MB, the reading will stall and this message is printed in the kernel
>> >> log:
>> >> 
>> >> ieee1394: sbp2: aborting sbp2 command
>> >> 0x28 00 03 6f d2 f1 00 00 f8 00 
>> >
>> > Please try the code in the repo on linux1394.org. I've done a lot of
>> > work to sbp2 since my last sync with Linus.
>> 
>> No difference at all.  What I think is strange, is that small reads or
>> reading at a slow rate works perfectly.  Any further ideas?
>
> I've seen that before with an old card that I had. I was forced to
> either serialize the serial commands in sbp2, or reduce the max speed to
> S200.
Setting serialize_io=1 seems to help.  I managed to read an 800 MB
file at 10 MB/s.  What's the penalty for setting that?  And isn't 10
MB/s a little slow for Firewire?
-- 
M책ns Rullg책rd
mru@kth.se
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/