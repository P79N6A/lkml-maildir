Date: Mon, 07 Aug 2006 01:51:44 -0600
From: Robert Hancock <>
Subject: Re: [2.6.18-rc2-mm1] libata cdroms not automounted
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/8/7/50

J.A. MagallÃ³n wrote:
> Hi...
> 
> Following with my switch to libata for everything...
> After latest patches, my burner and dvd work ok, apart from the fact that
> they do not get auto-mounted in gnome environment.
> udevmonitor shows nothing when a CD is inserted.
I don't think udev does anything with this, hal is the task that polls 
to see when a disc has been inserted.
> 
> More:
> - USB sticks work
> - IDE ZIP drive works:
> UEVENT[1154559818.714967] add@/block/sda/sda1
> UEVENT[1154559820.046948] mount@/block/sda/sda1
> - cdroms work under the old IDE driver (not tested in the same box, but
>   with the same software)
> - srX cdroms generated by libata do not automount (tested in 2 boxes)
> 
> As software is the same in the 3 boxes, and some things work, I suspect
> the kernel is not generating the correct events ?
> Or is the combo udev+dbus+hal userspace what fails ?
> But as udevmonitor shows events for zip drive but none for cdrom, I would
> vote against the kernel :)
 From what I can tell it looks like this is due to some broken 
assumptions in HAL that I described in this RH Bugzilla entry:
https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=201533
Essentially it seems to assume that any sysfs filename like sr0 which 
ends in a number corresponds to a partition, which in this case (and 
likely others) is wrong. This looks to have been fixed in the HAL git 
repository but hasn't made it into a HAL release yet.
IOW, from what I can see the kernel is vindicated..
-- 
Robert Hancock      Saskatoon, SK, Canada
To email, remove "nospam" from hancockr@nospamshaw.ca
Home Page: 
http://www.roberthancock.com/
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/