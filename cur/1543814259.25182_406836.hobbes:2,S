Date: Wed, 15 Mar 2006 17:31:33 +0100
From: Adrian Bunk <>
Subject: [2.6 patch] i4l/isdn_tty.c: fix a check-after-use
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/3/15/121

This patch fixes a check-after-use spotted by the Coverity checker.
Signed-off-by: Adrian Bunk <bunk@stusta.de>
--- linux-2.6.16-rc6-mm1-full/drivers/isdn/i4l/isdn_tty.c.old	2006-03-14 02:41:38.000000000 +0100
+++ linux-2.6.16-rc6-mm1-full/drivers/isdn/i4l/isdn_tty.c	2006-03-14 02:42:10.000000000 +0100
@@ -2345,12 +2345,15 @@ isdn_tty_at_cout(char *msg, modem_info *
 	u_long flags;
 	struct sk_buff *skb = NULL;
 	char *sp = NULL;
-	int l = strlen(msg);
+	int l;
 
 	if (!msg) {
 		printk(KERN_WARNING "isdn_tty: Null-Message in isdn_tty_at_cout\n");
 		return;
 	}
+
+	l = strlen(msg);
+
 	spin_lock_irqsave(&info->readlock, flags);
 	tty = info->tty;
 	if ((info->flags & ISDN_ASYNC_CLOSING) || (!tty)) {
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/