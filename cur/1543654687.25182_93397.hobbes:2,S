Date: Mon, 2 Dec 2002 15:02:44 +0000
From: Matthew Wilcox <>
Subject: [PATCH] Neaten up mm/Makefile
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/12/2/87

This patch removes the include of (the now empty) Rules.make, gets rid of
the ifndef clause and fixes the indentation.
===== mm/Makefile 1.20 vs edited =====
--- 1.20/mm/Makefile	Tue Nov 26 08:33:23 2002
+++ edited/mm/Makefile	Mon Dec  2 06:01:36 2002
@@ -4,18 +4,13 @@
 
 export-objs := shmem.o filemap.o mempool.o page_alloc.o page-writeback.o
 
-obj-y	    := bootmem.o filemap.o mempool.o oom_kill.o page_alloc.o \
-	       page-writeback.o pdflush.o readahead.o slab.o swap.o \
-	       truncate.o vcache.o vmscan.o
+mmu-y			:= nommu.o
+mmu-$(CONFIG_MMU)	:= fremap.o highmem.o madvise.o memory.o mincore.o \
+			   mlock.o mmap.o mprotect.o mremap.o msync.o rmap.o \
+			   shmem.o vmalloc.o
 
-obj-$(CONFIG_MMU)	+= fremap.o highmem.o madvise.o memory.o \
-			   mincore.o mlock.o mmap.o mprotect.o mremap.o \
-			   msync.o rmap.o shmem.o vmalloc.o
+obj-y			:= bootmem.o filemap.o mempool.o oom_kill.o \
+			   page_alloc.o page-writeback.o pdflush.o readahead.o \
+			   slab.o swap.o truncate.o vcache.o vmscan.o $(mmu-y)
 
 obj-$(CONFIG_SWAP)	+= page_io.o swap_state.o swapfile.o
-
-ifneq ($(CONFIG_MMU),y)
-obj-y			+= nommu.o
-endif
-
-include $(TOPDIR)/Rules.make
-- 
"It's not Hollywood.  War is real, war is primarily not about defeat or
victory, it is about death.  I've seen thousands and thousands of dead bodies.
Do you think I want to have an academic debate on this subject?" -- Robert Fisk
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/