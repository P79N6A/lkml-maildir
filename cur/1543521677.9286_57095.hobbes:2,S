Date: Tue, 11 Jan 2000 15:04:42 -0500
From: "Jeff McNeil" <>
Subject: Re: YIKES!!!  A very scary thing happened today [2.2.13] Memory bug?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/1/12/11

> >IM(not so)HO: Linux needs better resource accounting. Perhaps it should
> >be called "controled resource allocation".
HP Currently makes a product for HPUX called "Process Resource Manager". It
basically allows you to set quotas for everything and it's brother; disk
bandwidth, CPU usage, memory, etc.
The algorithm it uses is pretty slick as well.  For example:
UserX has a CPU cap of 50%.
UserY has a cap of 10%.
If X only needs 10%, and Y needs 60%, the PRM software will allow this. But,
as CPU utilization aproaches 100%, PRM takes over, and throttles Y in order
to allow for X.  It's a almost carry over from the MPE/iX world where
billing is per CPU Cycle.
It's basically a beefed up scheduler.  I've pondered porting something of
the like to linux a few times, and even gotten so far as hacking up linux
accounting code, but never really had the time to put some serious work into
it.  Personally, a think that something like this on linux would make a
tremendous impact.  Especially for ISPs and WPP.
Thanks,
Jeff McNeil
----- Original Message -----
From: Jesse Pollard <pollard@tomcat.admin.navo.hpc.mil>
To: <linux-kernel@vger.rutgers.edu>
Sent: Tuesday, January 11, 2000 9:02 AM
Subject: Re: YIKES!!! A very scary thing happened today [2.2.13] Memory bug?
> i-wear-spammers-skulls-jan-2000@paypc.com (Lord Apollyon):
> >I was just calming down but still rather perplexed when I typed "dmesg"
> >just to see if the kernel barfed any messages about the process
> >closures... and I saw the final clue which unravelled the puzzle:
> >
> >Out of memory for nmbd.
> >
> >Out of memory for klogd.
> >
> >Out of memory for atalkd.
> >
> >Out of memory for checkups.
> >
> >Out of memory for powerd.
> >
> >Out of memory for rpc.mountd.
> >
> >Out of memory for rpc.nfsd.
> >
> >Out of memory for tiff2bin.
> >
> >Aha!  tiff2bin is a utility I wrote to rapidly print faxes to HP Laserjet
> >printers at extremely high speed by simply converting the tiff images to
> >200x200 dpi [line doubling the low quality faxes], and then
> >raster-compressing them using HP's FASST! algorithms.  It works great,
> >however, the TIFF library is a bit of a bitch to deal with so I use the
> >"read entire file into core" method.
> >....
>
> Your problem has been seen before - Out Of Memory  (virtual that is)
>
> Currently there is no resource accounting (I blame it on this) that can
> protect a system from a memory hog. The system allocates until no more is
> available.
>
> The NEXT process that asks for memory (not necessarily the pig) will get
> a null pointer from malloc. This usually causes the process to terminate
> (the "Out of memory for xxx messages usually preceed the exit).
> Forks can also cause aborts (since the fork allocates memory for stack),
> which can abort the parent process (telnetd, inetd, init (rarely), web
> servers, etc).
>
> In the short term - try adding more swap space.
>
> IM(not so)HO: Linux needs better resource accounting. Perhaps it should
> be called "controled resource allocation".
>
> -------------------------------------------------------------------------
> Jesse I Pollard, II
> Email: pollard@navo.hpc.mil
>
> Any opinions expressed are solely my own.
>
> -
> To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
> the body of a message to majordomo@vger.rutgers.edu
> Please read the FAQ at 
http://www.tux.org/lkml/
>
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/