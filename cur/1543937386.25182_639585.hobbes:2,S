Date: Thu, 17 Jan 2008 14:12:59 +0100
From: Jan Kiszka <>
Subject: Re: [PATCH 14/21] KGDB: KGDB arch support for ARM
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/17/115

Jason Wessel wrote:
> Signed-off-by: Jason Wessel <jason.wessel@windriver.com>
> 
...
> --- a/drivers/serial/pxa.c
> +++ b/drivers/serial/pxa.c
> @@ -42,6 +42,9 @@
>  #include <linux/tty.h>
>  #include <linux/tty_flip.h>
>  #include <linux/serial_core.h>
> +#ifdef CONFIG_KGDB_CONSOLE
> +#include <linux/kgdb.h>
> +#endif
> 
>  #include <asm/io.h>
>  #include <asm/hardware.h>
> @@ -690,6 +693,8 @@ serial_pxa_console_init(void)
>  console_initcall(serial_pxa_console_init);
> 
>  #define PXA_CONSOLE	&serial_pxa_console
> +#elif defined(CONFIG_KGDB_CONSOLE)
> +#define PXA_CONSOLE	&kgdbcons
>  #else
>  #define PXA_CONSOLE	NULL
>  #endif
This is the only spot in the whole kgdb series where kgdbcons is used
outside its home kernel/kgdb.c. Is this really required in order to use
the kgdb console with PXA? And why is it like this only for this platform?
[Note that this forces kgdbcons to become non-static, ie. we will have
to fully initialize it, unlike it is done so far...]
Thanks,
Jan
-- 
Siemens AG, Corporate Technology, CT SE 2
Corporate Competence Center Embedded Linux