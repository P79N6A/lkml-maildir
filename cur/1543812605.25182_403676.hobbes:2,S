Date: Sun, 05 Mar 2006 23:41:49 +0000
From: Chris Ball <>
Subject: Re: [OT] inotify hack for locate
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/3/5/166

>> On 5 Mar 2006 21:36:19, Jon Masters <jonmasters@gmail.com> said:
   > I'm fed up with those finds running whenever I power on. Has
   > anyone written an equivalent of the Microsoft indexing service to
   > update locate's database?
I think the reason this hasn't been done is that inotify_add_watch()es
are non-recursive:  you'd need a watch over every directory, and you'd 
need a crawling step (churn, churn) to enumerate the directories to
add watches for.
Beagle (which only indexes home directories, by default) uses an 
algorithm for placing watches as it crawls, such that by the end 
of the crawl you can guarantee not to have a lost a race on new 
directories being created while the crawl was happening:
http://mail.gnome.org/archives/dashboard-hackers/2004-October/msg00022.html
- Chris.
-- 
Chris Ball   <cjb@mrao.cam.ac.uk>    <
http://www.mrao.cam.ac.uk/~cjb/>
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/