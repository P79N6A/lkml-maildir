Date: Tue, 8 Mar 2005 05:56:27 +0000
From: Christoph Hellwig <>
Subject: Re: [PATCH] unified device list allocator
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/3/8/20

On Mon, Mar 07, 2005 at 09:50:35PM -0800, Andrew Morton wrote:
> > register_blkdev only happens at module_init time (and in fact should go
> > away completely, so I'm not happy wit hthe surgey to keep it barely alive
> > at all)
> 
> Is anyone working on that?
I had a patch from a long time ago that just killed it, but that one isn't
useable for current users anymore.
There's two things it's doing currently:
 - when called with the major argument as 0 it returns an unused major number
   from the top of the old 255 entries major list.  This should be replaced
   by a real dynamic dev_t allocator, similar to alloc_chrdev_region.
 - /proc/devices.  This interface has traditionally been used by things
   like installer but these day's it's totally bogus as the one major, one
   driver limitation got lifeted.  We'll probably have to deprecate it and
   kill it in half a year or a similar timespan.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/