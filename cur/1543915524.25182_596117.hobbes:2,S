Date: Wed, 19 Sep 2007 12:41:25 +0200
From: Peter Zijlstra <>
Subject: [RFC][PATCH 0/6] using lockdep to validate rcu usage
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/9/19/78

This patch set uses lockdep to validate rcu usage.
It annotates rcu_read_{,un}lock{,_bh}() to catch imbalances. And further uses
that information to establish a proper context for rcu_dereference().
It also separates implicit from explicit preempt_disable() usage, in order to
separate rcu_dereference() from the locking model.
A kernel (2.6.23-rc4-mm1) with these patches boots but does have some funnies -
I suspect it calls printf from places it doesn't like.
The first patch should be safe to apply, the rest is RFC.
If people want to see the very noisy bootlog this generates:
  
http://programming.kicks-ass.net/kernel-patches/lockdep_rcu/lockdep_rcu.log
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/