Date: Fri, 15 Mar 2002 00:48:42 +0100 (CET)
From: joy ping <>
Subject: probably bug in kernel-2.4.14, compiling error in block.o, loop
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/3/14/239

hi,
i has problems compiling kernel-2.4.14 or loading the module loop.
modprobe loop does not work and making blockdevice loop residing in kernel
does not work.
probably a bug.
all other options works fine for a few months now.
modprobe loop gives an error: unresolved symbol deactivate_page.
see details in modprobe_error.out.
also compiling the kernel with loop-device switched on gives a similar error:
drivers/block/block.o: In function `lo_send':
drivers/block/block.o(.text+0xa775): undefined reference to `deactivate_page'
drivers/block/block.o(.text+0xa79d): undefined reference to `deactivate_page'
make: *** [vmlinux] Fehler 1
keywords: compiler error, loop, blockdevice
kernelversion: 2.4.14 with ext3-patch 2.4-0.9.15-2414
for details see the attached files.
current system:		     sysinfo-14-04-2002.txt
output of ver_linux:	     ver_linux.out
error output of modprobe:    modprobe_error.out
log of making the kernel:    make_kernel.log.tar.gz
sincerly
joy
[unhandled content-type:application/octet-stream]/lib/modules/2.4.14/kernel/drivers/block/loop.o: unresolved symbol deactivate_page
/lib/modules/2.4.14/kernel/drivers/block/loop.o: insmod /lib/modules/2.4.14/kernel/drivers/block/loop.o failed
/lib/modules/2.4.14/kernel/drivers/block/loop.o: insmod loop failed
If some fields are empty or look unusual you may have an old version.
Compare to the current minimal requirements in Documentation/Changes.
Linux localhost.localdomain 2.4.14 #1 Don MÃ¤r 14 13:28:29 CET 2002 i686 unknown
Gnu C                  2.95.3
Gnu make               3.79.1
binutils               2.11.2
util-linux             2.11h
mount                  2.11h
modutils               2.4.10
e2fsprogs              1.27
reiserfsprogs          3.x.0i
PPP                    2.4.1
Linux C Library        2.2.4
Dynamic linker (ldd)   2.2.4
Procps                 2.0.6
Net-tools              1.60
Kbd                    1.06
Sh-utils               2.0
Modules Loaded         snd-card-ens1371 snd-pcm snd-timer snd-rawmidi snd-seq-device snd-ac97-codec snd via686a eeprom i2c-proc i2c-isa i2c-viapro i2c-core ext3 jbd nls_iso8859-1 nls_cp437 vfat fat apm rtc
Distro: LFS, based on Mandrake 7.1
Kernel: 2.4.14 with ext3-patch 2.4-0.9.15-2414
Compiler: gcc version 2.95.3 20010315 (release)
X-Version: 4.1.0
ld: GNU ld version 2.11.2 (with BFD 2.11.2
as: GNU assembler version 2.11.2 (i686-pc-linux-gnu) using BFD version 2.11.2
HARDWARE:
-------------
cpu:
processor       : 0
vendor_id       : AuthenticAMD
cpu family      : 6
model           : 4
model name      : AMD Athlon(tm) Processor
stepping        : 2
cpu MHz         : 801.827
cache size      : 256 KB
fdiv_bug        : no
hlt_bug         : no
f00f_bug        : no
coma_bug        : no
fpu             : yes
fpu_exception   : yes
cpuid level     : 1
wp              : yes
flags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov 
pat pse36 mmx fxsr syscall mmxext 3dnowext 3dnow
bogomips        : 1599.07
video card:
SIS 3D PRO AGP, chipset SIS6326 4MB
soundcard:
Multimedia audio controller: Ensoniq 5880 AudioPCI (rev 03)
Subsystem: Giga-byte Technology: Unknown device a000
Flags: bus master, slow devsel, latency 64, IRQ 10
I/O ports at d000
Capabilities: [dc] Power Management version 2
hd: IBM-DTLA-305030, ATA DISK drive
dvd: Pioneer DVD-ROM ATAPIModel DVD-103S 011A
motherboard: Gigabyte, GA-7ZX
chipset: VIA KT133