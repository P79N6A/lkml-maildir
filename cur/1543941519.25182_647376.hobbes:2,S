Date: Sat, 2 Feb 2008 14:50:37 +0100
From: Ingo Molnar <>
Subject: Re: [linux-pm] sleepy linux self-test
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/2/2/103

* Pavel Machek <pavel@ucw.cz> wrote:
> > Plus, the way you're doing it now is violating the locking protocol 
> > used by that driver.
> 
> Yep, you are right, but that is the easy issue to fix. There's hard 
> issue: I need
> 
> struct rtc_device *rtc
> 
> for the rtc that can be used for system resume, and I'd like to get it 
> without violating too many layers. How to do that?
> 
> Ideally, I need 
> 
> set_alarm(int)
> 
> ...that will magically pick the right rtc device to talk to, and set 
> alarm on it. I don't see how to implement it with current code.
i'd really love to have a /dev/rtc device compatibility APIs, both 
inside and outside the kernel. I really dont know why the new RTC code 
does not do it - why does it put up artificial anti-adoption barriers to 
make it harder to migrate to the new code?
	Ingo