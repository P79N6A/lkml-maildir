Date: Tue, 24 Jul 2007 12:36:09 +0200
From: Tilman Schmidt <>
Subject: Re: 2.6.22-git17 boot failure
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/7/24/159

Olaf Hering schrieb:
> On Tue, Jul 24, Andi Kleen wrote:
> 
>> > Andi, any thoughts about how to debug the suse boot sequence?
> 
> The SuSE boot sequence is rather long. Which part (and which version) are we talking about?
Quick summary of the problem:
Opensuse 10.2 32-bit install on a Pentium D 940
Kernel 2.6.22-git17 or later (last reproduced with 2.6.23-rc1)
A kernel built with CONFIG_XEN=y fails to detect the SATA disks during
boot, so the root filesystem cannot be mounted and I'm thrown into
the emergency /bin/sh. With CONFIG_XEN=n everything works fine.
Netconsole logs with initcall_debug=1 of a successful and a
failing startup and corresponding .config-s are available at
http://www.phnxsoft.com/~ts/linux/
> As Andi said, putting a 'set -x' into /init script generated by /sbin/mkinitrd
> is one thing.
I'll try. I guess I'll have to unpack/repack the finished initrd
image (gzipped cpio archive, AFAICS) for that - or is there a way
to have mkinitrd inject that statement for me?
> You can also boot with 'linuxrc=trace' to generate a huge
> amount of udev and /init debug.
That looks simple enough, so I'll try that first, although it looks
to me like the trouble happens before udev comes into play.
> Booting with 'confirm' will allow you to step each runlevel script, see
> /etc/init.d/boot, look for DO_CONFIRM=.
Thanks,
Tilman
-- 
Tilman Schmidt                    E-Mail: tilman@imap.cc
Bonn, Germany
Diese Nachricht besteht zu 100% aus wiederverwerteten Bits.
Ungeöffnet mindestens haltbar bis: (siehe Rückseite)
[unhandled content-type:application/pgp-signature]