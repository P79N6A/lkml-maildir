Date: Thu, 21 Feb 2008 16:29:57 +0100
From: Hoang-Nam Nguyen <>
Subject: [PATCH 2.6.25] lib/vsprintf.c: Fix bug omitting minus sign of numbers (module_param)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/2/21/173

lib/vsprintf.c: Fix bug omitting minus sign of numbers (module_param)
This exists in 2.6.25 only.
Signed-off-by: Hoang-Nam Nguyen <hnguyen@de.ibm.com>
---
 lib/vsprintf.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)
diff --git a/lib/vsprintf.c b/lib/vsprintf.c
index fd987b1..6021757 100644
--- a/lib/vsprintf.c
+++ b/lib/vsprintf.c
@@ -234,7 +234,7 @@ int strict_strto##type(const char *cp, unsigned int base, valtype *res)	\
 	int ret;							\
 	if (*cp == '-') {						\
 		ret = strict_strtou##type(cp+1, base, res);		\
-		if (ret != 0)						\
+		if (!ret)						\
 			*res = -(*res);					\
 	} else								\
 		ret = strict_strtou##type(cp, base, res);		\
-- 
1.5.2