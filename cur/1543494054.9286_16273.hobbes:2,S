Date: Wed, 28 Apr 1999 08:21:51 -0400 (EDT)
From: "Richard B. Johnson" <>
Subject: Re: Linux 2.2.6 IO-APIC <feature>
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/4/28/32

On Wed, 28 Apr 1999, Ingo Molnar wrote:
> 
> On Tue, 27 Apr 1999, Richard B. Johnson wrote:
> 
> > Hello IO-APIC/SMP gurus,
> > 
> > I have finally upgraded all my CPUs to linux 2.2.6. They all work
> > except this one! This one refuses to use IRQ0 on both CPUs. The
> > kernel declares that the timer is not connected to the APIC. However,
> > Linux version 2.1.127 (the last version running on that machine)
> > found and used the timer without any problem!
> > 
> > Perhaps there still needs to be some work done here?
> > 
> >            CPU0       CPU1       
> >   0:      54716          0          XT-PIC  timer
> 
> i would not be worried too much about the timer interrupt. It only does
> timekeeping. even in 2.1.127 it was not 'perfect' IO-APIC interrupt, but a
> special 'ExtINT' interrupt, delivered to all CPUs. This proved to give
> problems on certain boxes. Moving timer-list handling from IRQ0 to the
> local per-CPU interrupt in 2.3 should solve this problem. (then IRQ0 will
> only be used for timekeeping) [the timer IRQ does not execute the timer
> lists, but it's the IRQ mostly likely to trigger timer_bh processing)
> 
> if you want to experiment wether your system is able to distribute all
> ExtINT interrupts to all CPUs, just change setup_ExtINT_pin() in
> io_apic.c:
> 
> -       entry.dest.physical.physical_dest = boot_cpu_id;
> +       entry.dest.physical.physical_dest = 0xff;
> 
> -- mingo
> 
Okay, Thanks, I will check it out.
Cheers,
Dick Johnson
                 ***** FILE SYSTEM WAS MODIFIED *****
Penguin : Linux version 2.2.6 on an i686 machine (400.59 BogoMips).
Warning : It's hard to remain at the trailing edge of technology.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/