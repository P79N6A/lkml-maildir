Date: Sat, 26 Aug 2006 17:04:04 -0700
From: David Brownell <>
Subject: Re: waking system up using RTC (was Re: rtcwakeup.c)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/8/26/93

On Saturday 26 August 2006 2:43 pm, Pavel Machek wrote:
> Hi!
> 
> > > Your new RTC driver seems to work for me (thinkpad x60), but no, I
> > > can't get wakeup using RTC to work:
> > 
> > Does it work using /proc/acpi/alarm?  In my experience, ACPI wakeup
> > doesn't work on Linux ... hence my pleasant surprise to see it work
> 
> No, I could not get it working using /proc/acpi/alarm.
Then I suspect that's the root cause of your problem ... ACPI code,
in either Linux or your BIOS, is not sufficiently cooperative.  All
that the rtc-acpi driver does is move the wakeup code, it doesn't
actually change what the /proc/acpi/alarm stuff does.
> No, machine actually suspends okay, it just does not wake up :-(.
The usual ACPI wakeup symptoms I've seen are the hardware giving the
signal, system starting to wake up, then botching somewhere early in
the resum.  So I suspect you're not actually getting the hardware
wakeup signal ... as if maybe it wasn't set up correctly.
You may be able to tell your BIOS to do the alarm by itself, and
then test to see whether Linux handles the wakeup side OK.
> rtc-acpi 00:07: AT compatible RTC (S4wake) (y3k), 1 month alarm
Seems like Intel's chips won't do one year alarms ... so sad.  :)
- Dave
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/