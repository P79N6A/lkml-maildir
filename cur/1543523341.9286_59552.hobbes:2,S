Date: Mon, 24 Jan 2000 15:33:33 +0100 (CET)
From: willy tarreau <>
Subject: Re: SYSRQ...(part2)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/1/24/138

> It is very apparent to me that my keyboard's
behaviour
> is relatively broken.
ok, now there's no doubt about that.
> Ah, but you don't understand...  SYSRQ is a unique
> code that only appears while ALT is held down.
ok, you're right in that I didn't understand that this
code only appears under this condition.
> So... since my keyboard is broken and sends the make
> and break
> codes for PRINT_SCREEN and SYSRQ simultaneously, the
> only way to
> fix it is to recode the keyboard handler to work
> with my
> keyboard and its screwed up SYSRQ key, or else to
> recode it to
> use some other combination.  Unfortunately if I
> choose a single
> keycode, I'll have a dangerous live key on my
> keyboard that
> activates SYSRQ without any modifiers being pressed.
>  As such,
> I'll have to hack up some convoluted keystroke that
> is unlikely
> to ever get pressed during usage such as
> LALT-RSHIFT-ESC-ENTER or
> something like that...
One interesting way to code this in the keyboard
driver would be :
- if the code 0x54 is read, then turn a SYSRQ_FLAG on.
  This code only appears if both ALT and SYSRQ are
  pressed.
- if the code 0xB8 is read, then turn SYSRQ_FLAG off.
  This code only appears if any ALT is released, no
  matter the state of the sysrq key.
- if any key is pressed while SYSRQ_FLAG is on,
process
  it as a SYSRQ combination.
This allows to simply ignore the 0xD5 code sent by the
defective SYSRQ key. Moreover, this would give a
simpler SYSRQ usage : it would allow to :
  - press ALT
  - press SYSRQ then release it
  - press the desired key [ then release it ]
  - release ALT
at any time, only two keys would be pressed
simultaneously, while staying compatible with the
current behaviour. One of my friends who has lost one
arm would now be able to use SysRQ !
Willy
___________________________________________________________
Do You Yahoo!?
Achetez, vendez! Ã€ votre prix! Sur 
http://encheres.yahoo.fr
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/