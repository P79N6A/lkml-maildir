Date: Wed, 31 Mar 1999 13:52:50 -0500
From: Arvind Sankar <>
Subject: Re: Linux-2.2.5 - and a vacation
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/3/31/131

On Wed, Mar 31, 1999 at 12:54:38PM -0600, Brandon Black wrote:
> Arvind Sankar wrote:
> 
> > On Tue, Mar 30, 1999 at 02:42:55PM -0600, Brandon Black wrote:
> > > I'm actually way past taking my life in my own hands, in that the
> > > binutils, compiler, and kernel have all been built using egcs-1.1.2 with
> > > the following optimization flags:
> > >
> > > -march=pentiumpro -O6 -fomit-frame-pointer -malign-loops=0
> > > -malign-functions=0 -malign-jumps=0
> > > (yes, even the kernel at O6).
> >
> > well, if you have a pentiumpro, that should really be
> > -malign-loops=4 etc. You might also try adding -funroll-loops.
> >
> > I wonder if -fno-strict-aliasing might be better for the kernel?
> >
> > btw, egcs doesn't really have -O levels beyond 3.
> >
> > -- arvind
> 
> hmmm... I've tried -fstrcit-aliasing and -fno-strict-aliasing, and I can't
> see any notable difference, but I don't have any way of qualitatively
> profiling the kernel's performance, they both compile and work though.
I figure the kernel will do weird things which screw up -fstrict-aliasing, so
its for correctness, not speed.
> 
> About alignment.... the info I have found was that pentiums like -malign-*=2,
> and PPro's supposedly liked either 2 or 4 depending on who you ask, and then
> I read somewhere else that PII (at least the latest Deschutes ones) and later
> processors should go back to 0, because for some reason the alignment didn't
> help them much, and removing the padding would save space in the L2 (and to a
> small degree the L1) cache.... so that's why I went with zero.  Do you (or
> anybody on the list) no for sure the optimal alignment for the PII Deschutes?
Hm. I think I read somewhere on Intel's page (some doc about optimizing for pentium
class cpus) that p2 likes alignment on 16-byte boundaries. Will check again later.
> 
> I kind-of assumed since gcc (I think) does thigns at least to 6, and so does
> pgcc, both of which go into egcs, that egcs would have an O6... oh well :)
oh, gcc does too? that's weird...
-- arvind
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/