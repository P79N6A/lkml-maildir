Date: Wed, 23 Dec 1998 22:19:44 -0500 (EST)
From: "Steve Snyder" <>
Subject: No-console kernel *still* corrupts /etc/mtab on RH system
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1998/12/23/174

Disabling the VGA text console in v2.1.132 causes /etc/tab corruption.
Here's how to do it on a RedHat v5.x system:
In the v2.1.132 config, disable the VGA text console and rebuild the 
kernel.  Edit /etc/inittab to comment out the starting of the mingetty 
tasks (no console = mingetty is pointless).  Reboot the system to run the 
newly-built kernel.  Examination of /etc/mtab now shows a portion of the 
text that would have been written to the screen had a console existed.
The /etc/mtab file on my RH v5.2 system has been fine all along.  After 
installing the no-console kernel, mtab now looks like this:
*** start mtab ***
[root@pluto 2.1.132]# cat /etc/mtab                    
Finding module dependencies... done                    
Checking filesystems.                                  
Parallelizing fsck version 1.12 (9-Jul-98)             
Checking all file systems.                             
----------------------------------                     
Mounting local filesystems.                            
Turning on user and group quotas for local filesystems 
Setting clock (utc): Wed Dec 23 22:01:33 EST 1998      
Enabling swap space.                                   
Initializing random number generator...                
*** end mtab ***
Naturally, any processes that depends on the values held in mtab are now 
screwed up as well.
This is not a new problem.  This behavior can be seen in at least the last 
15 versions of kernel 2.1.x.
Am I still the only one that tries to run Linux without a text console?
*** Steve Snyder ***
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/