Date: Wed, 26 Jul 2000 18:56:04 -0400 (EDT)
From: Alexander Viro <>
Subject: Re: multimounting cdroms ???
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/7/26/125

On Wed, 26 Jul 2000, Rik van Riel wrote:
> Only one problem though.
> 
> A user can mount the same filesystem multiple times on the
> same mountpoint, but will be unable to umount the filesystem
> again ...
> 
> umount -f does the trick, but is restricted to root
... but doing umount the same number of times you've done mount isn't ;-)
Actually, the more I'm looking at it, the more it seems that correct
solution is to consider mount as
	if (nothing mounted)
		mount
	else if (mounted is not busy)
		replace
	else
		fail
Makes sense for union-mounts too - normal mount is =, union is += ...
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/