Date: Tue, 7 Oct 2003 17:03:47 +0100
From: Dave Jones <>
Subject: Re: powernow-k8: don't crash system at boot
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/10/7/108

On Sun, Oct 05, 2003 at 09:00:57PM +0200, Pavel Machek wrote:
<Please don't send these to Rusty, such changes are far from trivial.
 Not that I don't trust Rusty to pass on them, but it's one less thing
 he has to worry about..>
 > powernow-k8 module fails to initialize government on boot, leading to
 > nasty crash at boot.
See below.
 > This fixes it. Plus find_closest_find really wants to be static. Fix
 > it, too.
Applied. Thanks.
 > @@ -971,6 +971,7 @@
 >  	pol->cpuinfo.max_freq = 1000 * find_freq_from_fid(ppst[numps-1].fid);
 >  	pol->min = 1000 * find_freq_from_fid(ppst[0].fid);
 >  	pol->max = 1000 * find_freq_from_fid(ppst[batps - 1].fid);
 > +	pol->governor = CPUFREQ_DEFAULT_GOVERNOR;
 > 
 >  	printk(KERN_INFO PFX "cpu_init done, current fid 0x%x, vid 0x%x\n",
 >  	       currfid, currvid);
Already fixed differently. Dominik's patch also nuked the setting of ->policy
a few lines above.
		Dave
-- 
 Dave Jones     
http://www.codemonkey.org.uk
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/