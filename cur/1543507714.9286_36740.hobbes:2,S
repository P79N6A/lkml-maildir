Date: Wed, 1 Sep 1999 14:29:14 +0900
From: Klaus Kudielka <>
Subject: Re: 2048 bytes/sector media in 2.2.12
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/9/1/5

On Tue, Aug 31, 1999 at 08:05:00PM -0500, Benjamin Carter wrote:
> However, after dd-ing /dev/zero over the first sector (the partition
> table), the same error (from ll_rw_block) still occurs.  Viewing the
> strace output (included below) makes it appear as though the HDIO_GETGEO
> ioctl() call is the one that produces the printk(), as it appears before
Exactly. I have the same printk with a Panasonic DVD-RAM. The line
probably causing it is in scsicam_bios_param(), which is called by the
ioctl:
    if (!(bh = bread(MKDEV(MAJOR(dev), MINOR(dev)&~0xf), 0, 1024)))
        return -1;
Anyway, if I use the '-b 2048' option for both fdisk and mke2fs,
everything seems to work. It's just an annoying printk.
BTW, shouldn't be fdisk and mke2fs be smart enough to realize that we have
2kB blocks? AFAIK the SCSI devices _do_ report this.
-Klaus
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/