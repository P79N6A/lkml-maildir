Date: Tue, 27 Nov 2007 12:47:46 -0800 (PST)
From: Davide Libenzi <>
Subject: Re: [patch 2/4] Timerfd v3 - new timerfd API
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/11/27/258

On Tue, 27 Nov 2007, Andrew Morton wrote:
> On Sun, 25 Nov 2007 14:14:19 -0800 Davide Libenzi <davidel@xmailserver.org> wrote:
> 
> > +static struct file *timerfd_fget(int fd)
> > +{
> > +	struct file *file;
> > +
> > +	file = fget(fd);
> > +	if (!file)
> > +		return ERR_PTR(-EBADF);
> > +	if (file->f_op != &timerfd_fops) {
> > +		fput(file);
> > +		return ERR_PTR(-EINVAL);
> > +	}
> > +
> > +	return file;
> > +}
> 
> I suppose we could use fget_light() in here sometime.  It is significantly
> quicker in microbenchmarks.  Or it was - nobody has checked that in a few
> years afaik.
Should I now? Half of the internet traffic of the last three month was 
generated by me posting those timerfd patches :)
- Davide
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/