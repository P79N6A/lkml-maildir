Date: Sun, 10 Dec 2000 08:19:10 -0800 (PST)
From: Linus Torvalds <>
Subject: Re: Serial cardbus code.... for testing, please.....
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/12/10/99

On Sun, 10 Dec 2000, Theodore Y. Ts'o wrote:
> 
>    You should also just test having it compiled in - I know some people love
>    modules, but there is nothing quite as liberating as just having a kernel
>    that finds the devices it needs and doesn't need anything else.
> 
> Interesting.  Yup, the serial driver works with it compiled in.
Ho humm.. Why wouldn't it work as a module? Strange.
Are you sure cardmgr inserts the right module? If cardmgr tries to insert
serial_cb, and you have warring drivers, you'll break. 
Oh, serial_cb shouldn't work anyway, I think.
> However, the epic driver fails after I eject and remove the card, and
> then re-insert it (it hangs on the re-insertion).  It looks like a
> deadlock; after it hangs, "ifconfig" also hangs, presumably waiting on
> the same lock (ps alx reports it's waiting on "down").
This is almost certainly the silly hotplug issue that we have - there's a
problem with execin'g /sbin/hotplug and the semaphore that protects the
device state. That will be fixed in the next patch..
> In any case, I think I know how to fix the serial driver to not loop in
> receive_chars().  If I get this working, do you want to take a serial
> driver update now or post 2.4.0?
Pls do it now, this is only going to clean it up (I bet we'll also be able
to remove some of the serial.c PCI device lists, because many of them
probably work with the general "is this a serial device?" test and do not
need to be explicitly listed).
		Linus
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/