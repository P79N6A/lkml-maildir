Date: Thu, 27 May 1999 16:36:00 +0200
From: Andi Kleen <>
Subject: Re: 2.2.9 probs (ide hd, quota, 128MB (+sort))
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/5/28/125

In muc.lists.linux-kernel, you wrote:
>On Mon, 24 May 1999, Guest section DW wrote:
>
>> 
>> > The ide-dma code does/can not enable UDMA-3/4; therefore, it is not used.
>> 
>> Maybe I should not ask since I do not know about these things,
>> but you said that this was a ATA/66 problem. How precisely is
>
>I do not know yet, but I will ramble about what I have observed and tested.
>
>> this caused? And what is the problem, if disabling DMA does not cure it?
>
>There appears to be an ugly transistion period in the standard.
>
>There are chipsets that claim to ATA-66 compliant....
>Translation ::
>
>We can detect/trigger but not make use of UDMA-3/4.
>Known offenders are the ALI1543 AGP-PRO and VIA???? AGP-PRO.
>This is different from the ALI1543 TX-PRO and VIA82c568 TX-PRO.
>It appears through imperical tests that the evolution of the TX-PRO to the
>AGP-PRO as gone very wrong.  This may not have any thing to do with
>Intel's BX chipset, but something is very bad.  There appears to be no bit
>sensing of capablity in all directions.
I am not sure if this is related, but 2.3.3 doesn't boot on my
Acer M5229 + IBM DTTA+351010. It detects the disks fine, but cannot
find init. 
2.2.8 + your big IDE patch works fine.
So far I haven't tracked down the cause. I first suspected a egcs 1.1 aliasing
bug, but recompiling with -fno-string-aliasing didn't help. The geometries
in the 2.3.3 boot screen look correct.
Output from the working 2.2.8+patch kernel:
Uniform Multi-Platform E-IDE driver Revision: 6.19
ALI15X3: IDE controller on PCI bus 00 dev 78
ALI15X3: not 100% native mode: will probe irqs later
    ide0: BM-DMA at 0xb800-0xb807, BIOS settings: hda:DMA, hdb:pio
    ide1: BM-DMA at 0xb808-0xb80f, BIOS settings: hdc:pio, hdd:pio
hda: IBM-DTTA-351010, ATA DISK drive
ide0 at 0x1f0-0x1f7,0x3f6 on irq 14
hda: IBM-DTTA-351010, 9671MB w/466kB Cache, CHS=1232/255/63, UDMA(33)
Any clues on how to fix it?
Recompiling 2.3.3 without ALI 15x3 support didn't help.
-Andi
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/