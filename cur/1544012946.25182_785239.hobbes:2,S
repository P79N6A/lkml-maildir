Date: Tue, 30 Dec 2008 16:04:45 -0800 (PST)
From: Roland McGrath <>
Subject: Re: [RFC][PATCH 5/7][v4] Protect cinit from blocked fatal signals
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/12/30/259

> > + * If @signal refers to a container-init and @signr is neither SIGKILL nor
> > + * SIGSTOP, it was queued because it was blocked when it was posted.
> 
> This is not right too. It is possible that init had a handler when
> the signal was sent, and the handler was set to SIG_DFL before the
> signal was dequeued.
do_sigaction's sig_handler_ignored() should exclude that.
Thanks,
Roland