Date: Thu, 13 Jul 2000 17:20:07 -0400 (EDT)
From: "Richard B. Johnson" <>
Subject: Re: Multithreaded TCP/IP stack
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/7/14/3

On Fri, 14 Jul 2000, Chris Wedgwood wrote:
> On Thu, Jul 13, 2000 at 01:18:28PM -0700, David Lang wrote:
> 
>     I have been told by multiple software venders (and from sun) that
>     solaris does not have a multi-threaded TCP/IP stack, therefor if
>     your software spends almost all it's time in the stack
>     (router/firewall/load balancing/other low level stuff) buying a
>     SMP box gains you very little performance. I tend to believe this
>     as these are the folks who would be selling the more expensive
>     SMP box if it was better :-)
> 
> I don't know if this is true -- but under high network load, Solaris
> (2.6) does appear to perform better than Linux 2.2.x last time I
> looked into this.
> 
> 
>   --cw
> 
This whole discussion is getting toooo tired. In spite, I'll point out
some specifics at this site.
We have over 1200 PCs. Most of them run some sort of Windows. Early-on,
I set up a name-server that runs Linux.
# nslookup
Default Server:  boneserver.analogic.com
Address:  204.178.40.210
> set type=ANY
> analogic.com
Server:  boneserver.analogic.com
Address:  204.178.40.210
analogic.com
	origin = boneserver.analogic.com
	mail addr = root.boneserver.analogic.com
	serial = 1562
	refresh = 3600 (1H)
	retry   = 600 (10M)
	expire  = 864000 (1w3d)
	minimum ttl = 86400 (1D)
analogic.com	CPU = i686	OS = Linux 2.2.6
analogic.com	text = "Linux boneserver 2.2.6  gcc 2.8.1"
analogic.com	nameserver = boneserver.analogic.com
analogic.com	internet address = 204.178.40.2
analogic.com	preference = 10, mail exchanger = aloggw.analogic.com
analogic.com	preference = 100, mail exchanger = boneserver.analogic.com
analogic.com	nameserver = boneserver.analogic.com
boneserver.analogic.com	internet address = 204.178.40.210
aloggw.analogic.com	internet address = 204.178.40.2
> lserver bombserver
Default Server:  bombserver.analogic.com
Addresses:  204.178.40.210, 10.100.2.210
> exit
# exit
exit
Script done on Thu Jul 13 16:51:19 2000
The Windows machines are on the 10.100.x.x network. A windows/NT
server, with lots of RAM and two fast CPUs was supposed to be the
name-server for the 10.100.x.x network. It failed horribly at anything 
over 100 hits/second.
I claimed that my Linux server could easily do over 1000 hits/second.
I was told by the M$ groupies that this was impossible.
So I kept quiet. Everyone on the 204.178.x.x network (non M$ machines,
using my Linux server) was able to do their Web Lookups just fine. Those
on the expensive M$ server dragged with several seconds between lookups.
Eventually I was asked; "Could you please set up your machine as a
name-server on the 10.100.x.x network also?" I asked why. The answer
was that a six-month-long investigation had shown that NT networking
sucks. They needed to off-load the name-serving so they had some
CPU cycles available for file-sharing.
So my Linux machine, with a 0.08 CPU average, gets over 1200 hits/second
so the M$ machines can be useful. In the meantime, M$ thinks they have
networking performance. They don't even have networking capabilities!
Since I do networking for a living, I have run a few benchmarks here
and there. I don't know how M$ benchmarks are rated, but with this
workstation running Linux, I can send network data to a null-sink
at 8.8 megabytes/second. The same hardware, with Windows 2000 runs 2.4 +/-
megabytes/second. The same hardware, with Win/NT (the latest crap-upgrade)
runs some kilobytes/second.
I just cannot understand how they get away with such lies. Anybody can
test this stuff! Doesn't anybody ever program anything on M$ platforms?
Don't they test the results?  Simple answer, NO. It if "works", it
"works" that's good enough. It it isn't fast enough, blame in on the
CPU speed, and believe the sales-hype.
Cheers,
Dick Johnson
Penguin : Linux version 2.2.15 on an i686 machine (797.90 BogoMips).
"Memory is like gasoline. You use it up when you are running. Of
course you get it all back when you reboot..."; Actual explanation
obtained from the Micro$oft help desk.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/