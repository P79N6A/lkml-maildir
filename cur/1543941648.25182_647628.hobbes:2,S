Date: Sun, 3 Feb 2008 05:54:41 +0100
From: Ingo Molnar <>
Subject: [patch] scsi: fix spurious build failures in aic7xxx
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/2/2/355

* Ingo Molnar <mingo@elte.hu> wrote:
> > I could not reproduce the bug myself but I think I spotted it. We 
> > had a missing dependency to the _reg.h file. Try following patch and 
> > let me now if it continue to break.
> 
> thanks! I threw this into the test setup and will know by tomorrow 
> whether there's any breakage.
good news: hundreds of successful kernel builds and no failures 
overnight. I've Cc:-ed the aic7xxx people.
	Ingo
------------------->
Subject: scsi: fix spurious build failures in aic7xxx
From: Sam Ravnborg <sam@ravnborg.org>
We had a missing dependency to the _reg.h file.
Signed-off-by: Ingo Molnar <mingo@elte.hu>
---
 drivers/scsi/aic7xxx/Makefile |    9 ++-------
 1 file changed, 2 insertions(+), 7 deletions(-)
Index: linux/drivers/scsi/aic7xxx/Makefile
===================================================================
--- linux.orig/drivers/scsi/aic7xxx/Makefile
+++ linux/drivers/scsi/aic7xxx/Makefile
@@ -44,13 +44,8 @@ clean-files += aic79xx_seq.h aic79xx_reg
 
 # Dependencies for generated files need to be listed explicitly
 
-$(obj)/aic7xxx_core.o: $(obj)/aic7xxx_seq.h
-$(obj)/aic7xxx_core.o: $(obj)/aic7xxx_reg.h
-$(obj)/aic79xx_core.o: $(obj)/aic79xx_seq.h
-$(obj)/aic79xx_core.o: $(obj)/aic79xx_reg.h
-
-$(addprefix $(obj)/,$(aic7xxx-y)): $(obj)/aic7xxx_seq.h
-$(addprefix $(obj)/,$(aic79xx-y)): $(obj)/aic79xx_seq.h
+$(addprefix $(obj)/,$(aic7xxx-y:.o=.c)): $(obj)/aic7xxx_seq.h $(obj)/aic7xxx_reg.h
+$(addprefix $(obj)/,$(aic79xx-y:.o=.c)): $(obj)/aic79xx_seq.h $(obj)/aic79xx_reg.h
 
 aic7xxx-gen-$(CONFIG_AIC7XXX_BUILD_FIRMWARE)	:= $(obj)/aic7xxx_reg.h
 aic7xxx-gen-$(CONFIG_AIC7XXX_REG_PRETTY_PRINT)	+= $(obj)/aic7xxx_reg_print.c