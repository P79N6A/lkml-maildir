Date: Wed, 14 Apr 2004 17:26:37 +0100
From:  viro@parcelfa ...
Subject: Re: [Patch] BME, noatime and nodiratime
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/4/14/148

On Wed, Apr 14, 2004 at 08:14:18AM -0700, Linus Torvalds wrote:
> Ignoring noatime is potentially the only one we should look at, but since 
> tty's really _are_ "noatime" as far as the filesystem is concerned, I 
> think it makes sense in the situation we are in anyway. The real reason 
> for "noatime" is to avoid unnecessary filesystem activity, not that we 
> necessarily want a constant atime.
Another thing we are ignoring is r/o.  Oh, well - the same arguments apply.
> > There are similar places in some other char drivers.  Obvious step would
> > be to have them do file_accessed() instead; however, I'd really like to
> > hear the rationale for existing behaviour.  Comments?
> 
> I don't know about other char drivers, those may well be wrong. But for
> tty's in particular, idle time calculations really do pretty much require
> the behaviour (apart from #3 - and #3 is, I think, effectively required by
> not wanting to touch the disk on keyboard accesses).
AFAICS, they simply copy what tty_io.c does.  Out of these guys busmouse.c
might have a similar excuse; qtronix.c and sonypi.c AFAICS have no reason
to touch atime at all.  No idea what should usb/core/devio.c do...
Anyway, I'm going down right now; expect a patchbomb tonight after I get
some sleep...
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/