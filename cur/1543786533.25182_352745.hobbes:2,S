Date: Fri, 23 Sep 2005 18:32:46 +0400
From: Victor <>
Subject: [PATCH] fglrx-8.16.20, kernel 2.6.13-mm3
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/9/22/183

This patch will help you to compile fglrx driver on mm kernel :-) I test 
it on 2.6.13-mm3, maybe it will work on others :-)
glxinfo|grep direct
return
direct rendering: yes
Best regards, Victor :-)
--- firegl_public.c.orig	2005-08-16 20:13:33.000000000 +0400
+++ firegl_public.c	2005-09-23 17:25:49.000000000 +0400
@@ -121,7 +121,7 @@
 #endif
 
 #ifdef __x86_64__
-#include "asm/ioctl32.h"
+#include "linux/ioctl32.h"
 #if LINUX_VERSION_CODE >= KERNEL_VERSION(2,6,2)
 #include "linux/syscalls.h"
 #endif
@@ -1425,7 +1425,7 @@
 
 int ATI_API_CALL __ke_verify_area(int type, const void * addr, unsigned long size)
 {
-    return verify_area(type, addr, size);
+    return access_ok(type, addr, size);
 }
 
 int ATI_API_CALL __ke_get_pci_device_info(__ke_pci_dev_t* dev, __ke_pci_device_info_t *pinfo)