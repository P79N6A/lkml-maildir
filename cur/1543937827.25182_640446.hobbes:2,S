Date: Fri, 18 Jan 2008 13:24:37 -0500
From: Dave Jones <>
Subject: Re: [PATCH] X86: fix typo PAT to X86_PAT
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/18/380

On Fri, Jan 18, 2008 at 01:31:40PM +0100, Ingo Molnar wrote:
 > * Yinghai Lu <Yinghai.Lu@Sun.COM> wrote:
 >
 > > > thanks. But, i think we should rather do the following: if X86_PAT
 > > > is eanbled then /proc/mtrr should be read-only. There's no problem
 > > > _looking_ at MTRR contents, as long as we do not try to modify them.
 > > > Hm?
 > >
 > > anyway
 > >
 > > depends on !PAT
 > >
 > > need to be removed.
 > >
 > > it seems when PAT is used, some code still touch MTRR.
 >
 > you mean modifies MTRRs? Which code is that? (besides the /proc/mtrr
 > userspace API)
This exclusion is going to be a real pain in the ass for distro kernels.
It's impossible for example to build a kernel that will now support
the MTRR-alike registers on the AMD K6/early Cyrix etc and also
support PAT.
Additionally, given people tend to update their kernels a lot more often
than they update to a whole new version of X, it means until userspace
has caught up, we can't ship a kernel with PAT supported, or else
X gets a lot slower due to the missing mtrr support.
	Dave
-- 
http://www.codemonkey.org.uk