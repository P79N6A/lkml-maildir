Date: Wed, 22 Jan 2003 13:25:44 +1000
From: Greg Ungerer <>
Subject: Re: common RODATA in vmlinux.lds.h (2.5.59)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/1/21/220

Hi Kai,
Kai Germaschewski wrote:
> First of all, asm-generic/vmlinux.lds.h is there to share common code 
> where possible, so if it's not possible, you still have the option of 
> having your own special code in arch/$(ARCH)/vmlinux.lds.S
And that is exactly what I have done as an immediate fix.
It would be nice if all architectures could use this
common code. Saves me having to specifically fix m68knommu
linker script when ever things inside RODATA change.
> Having said that, you could add
> 
> 	#define TEXT_MEM > flash
> 
> at the beginning of arch/m68knommu/vmlinux.lds.S
> 
> and
> 
> 	#ifndef TEXT_MEM
> 	#define TEXT_MEM
> 	#endif
> 
> at the beginning of include/asm-generic/vmlinux.lds.h and then change
> 
> 	.text : {
> 		*(.text)
> -	}
> +	} TEXT_MEM
> 
> Would that work for you?
Yep, I would be happy with that.
Regards
Greg
------------------------------------------------------------------------
Greg Ungerer  --  Chief Software Wizard        EMAIL:  gerg@snapgear.com
SnapGear Pty Ltd                               PHONE:    +61 7 3435 2888
825 Stanley St,                                  FAX:    +61 7 3891 3630
Woolloongabba, QLD, 4102, Australia              WEB:   www.SnapGear.com
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/