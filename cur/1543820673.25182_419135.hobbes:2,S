Date: Wed, 26 Apr 2006 11:38:35 -0700
From: "Randy.Dunlap" <>
Subject: Re: Problems with EDAC coexisting with BIOS
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/4/26/183

On Wed, 26 Apr 2006 11:26:38 -0700 mark gross wrote:
> Signed-off-by: Mark Gross <mark.gross@intel.com>
> 
> 
> Trying mutt.
Yes, much better.  Almost there.
> diff -urN -X linux-2.6.16/Documentation/dontdiff linux-2.6.16/drivers/edac/e752x_edac.c linux-2.6.16_edac/drivers/edac/e752x_edac.c
> --- linux-2.6.16/drivers/edac/e752x_edac.c	2006-03-19 21:53:29.000000000 -0800
> +++ linux-2.6.16_edac/drivers/edac/e752x_edac.c	2006-04-26 08:36:25.000000000 -0700
> @@ -755,8 +756,16 @@
>  	debugf0("MC: " __FILE__ ": %s(): mci\n", __func__);
>  	debugf0("Starting Probe1\n");
> 
> -	/* enable device 0 function 1 */
> +	/* check to see if device 0 function 1 is enbaled; if it isn't, we
"enabled"
> +	 * assume the BIOS has reserved it for a reason and is expecting
> +	 * exclusive access, we take care not to violate that assumption and
> +	 * fail the probe. */
>  	pci_read_config_byte(pdev, E752X_DEVPRES1, &stat8);
> +	if (!force_function_unhide && !(stat8 & (1 << 5))) {
> +		printk(KERN_INFO "Contact your BIOS vendor to see if the "
> +			"E752x error registers can be safely un-hidden\n");
> +			goto fail;
The goto is indented too much...
> +	}
Thanks.
---
~Randy
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/