Date: Sun, 10 Feb 2008 04:31:28 -0500
From: Christoph Hellwig <>
Subject: Re: [3/6] kgdb: core
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/2/10/78

> +#ifdef UART_CAP_UUE
> +	if (up->capabilities & UART_CAP_UUE)
> +#else
> +	if (up->port.type == PORT_XSCALE)
> +#endif
This looks very odd.  Can anyone explain what's going on here?
Especially as UART_CAP_UUE is defined in drivers/serial/8250.h
unconditionally.
> diff --git a/drivers/serial/kgdboc.c b/drivers/serial/kgdboc.c
> new file mode 100644
> index 0000000..5079d32
> --- /dev/null
> +++ b/drivers/serial/kgdboc.c
> @@ -0,0 +1,164 @@
> +/*
> + * drivers/serial/kgdboc.c
Didn't you say there was no file left with these?
> diff --git a/include/asm-generic/kgdb.h b/include/asm-generic/kgdb.h
> new file mode 100644
> index 0000000..115972e
> --- /dev/null
> +++ b/include/asm-generic/kgdb.h
Didn't you agree to kill this file in one of the last mails?
> +#ifndef __ASSEMBLY__
> +static inline void arch_kgdb_breakpoint(void)
> +{
> +	asm("   int $3");
> +}
> +# define BREAK_INSTR_SIZE	1
> +# define CACHE_FLUSH_IS_SAFE	1
> +#endif
this ifdef should go away.
> +#endif				/* _ASM_KGDB_H_ */
> +#endif				/* __KERNEL__ */
and the __KERNEL__ aswell as these files are in no way exported
to userspace.
> +/*
> + *	kgdb_get_shadow_thread - Get the shadowed &task_struct of @threadid.
> + *	@regs: The &struct pt_regs of the current thread.
> + *	@threadid: The thread id of the shadowed process to get information on.
> + *
> + *	RETURN:
> + *	This returns a pointer to the &struct task_struct of the shadowed
> + *	thread, @threadid.
> + */
> +extern struct task_struct *kgdb_get_shadow_thread(struct pt_regs *regs,
> +						  int threadid);
So we have kerneldoc comments in both places now?  Didn't you say
you converted these to something else?
> +++ b/kernel/kgdb.c
> @@ -0,0 +1,2019 @@
> +/*
> + * kernel/kgdb.c
Another one.