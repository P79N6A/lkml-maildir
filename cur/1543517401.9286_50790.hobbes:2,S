Date: Tue, 30 Nov 1999 14:01:36 +0100
From: Gabor Lenart <>
Subject: Re: fbcon + scrolling = irq timeouts?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/11/30/67

On Mon, Nov 29, 1999 at 01:25:54PM +0100, Benno Senoner wrote:
> Gabor Lenart wrote:
> 
> > On Mon, Nov 29, 1999 at 12:39:26PM +0100, Benno Senoner wrote:
> > > PS: Alan , I think most mp3 players use a relatively big buffersize
> > > (most of time the full 64k of soundcard), and I don't think that VESA
> > > disables
> > > the IRQs for 370ms ( the time it takes to play the 64k audio buffer)
> >
> > Yes, but imho redrawing frame buffer console blocks the kernel, scheduling,
> > IRQ processing, right ? If so, it's possible to remain only a few kilobytes
> > to play for DMA, and it can't play newer buffer block since end of dma
> > irq or so is not received since IRQs are locked during frame buffer console
> > redrawings. Or I'm wrong and even during this scheduling and IRQ receiving is
> > enabled ?
> >
> > (maybe something kernel thread would be usefull for framebuffer updates
> > because scheduler can schedule it as well ...)
> 
> sorry I'm not a framebuffer expert, but it remains to be seens if the BIOS really
> locks the IRQs that long, or the framebuffer code spends too much time in the
> update routines without checking need_resched.
In redraw mode there is NO any BIOS call after mode intialization AFAIK with
vesa frame buffer as well. The only thing : redrawing the screen takes
too much time in kernel time without process scheduling etc ... That's
why I suggested a kernel thread to do this instead. But I think this problem
is present with other non-vesa frame buffers as well if screen redrawing
is not fast enough (however latency would be definitly better with kernel
thread based frame buffer redrawing etc). This letter is strongly afaik and
imho however :)
-- 
 ---[ LGB/DC ]------------[ University Of Veszprém ]------[ Lénárt Gábor ]---
 "The truth is out there"  "We're l{ea,i}ving together" "The future is dark."
 ---[ 30/2270823 ]--------[ 
http://lgb.hal.vein.hu
 ]---------[ 87/477074 ]---
 finger lgb@hal2000.hal.vein.hu for more  !LINUX!  SMS : lgblgb@westel900.net
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/