Date: Fri, 23 May 2003 02:13:34 +0200
From: Thomas Schlichter <>
Subject: Re: Error during compile of 2.5.69-mm8
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/5/22/230

On May 23, David S. Miller wrote:
>    From: Thomas Schlichter <schlicht@uni-mannheim.de>
>    Date: Fri, 23 May 2003 01:47:00 +0200
>
>    There was a discussion about SET_MODULE_OWNER here on the list, once.
>    You can find it here:
>
> I know about it and in fact Rusty is the one that told me
> to do what I did with SET_MODULE_OWNER.
>
> FACT: SET_MODULE_OWNER() tracks how to set the module reference
>       for a struct netdevice.
>
> It always lived in netdevice.h and always served exactly this purpose.
As far as I can see it lived in modules.h... (Even in 2.4.10 if the sources 
here on my disk don't lie)
So nothing (not even the name) indicated its membership to netdevice for a 
very long time!
> So when I deleted ->owner from struct netdevice, SET_MODULE_OWNER
> became a nop.
For netdevice you are right!
> Therefore, it was a complete error for anyone else to start using this
> macro for other structures.
So nobody should better use THIS_MODULE?! Well it currently is defined in 
module.h, but perhaps it was first defined in isdn.h and may be removed by 
its maintainer when he thinks he does not need it anymore...
For ME and many other driver developers SET_MODULE_OWNER does not belong to 
netdevice, it belongs to the module infrastructure!
Best regards
   Thomas Schlichter
[unhandled content-type:application/pgp-signature]