Date: Sun, 03 Feb 2008 14:22:20 +0300
From: Cyrill Gorcunov <>
Subject: [patch 3/4] FRV: cleanup - use _AC macro to define PAGE_SIZE
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/2/3/75

Signed-off-by: Cyrill Gorcunov <gorcunov@gmail.com>
---
 mem-layout.h |   10 +++-------
 1 file changed, 3 insertions(+), 7 deletions(-)
Index: linux-2.6.git/include/asm-frv/mem-layout.h
===================================================================
--- linux-2.6.git.orig/include/asm-frv/mem-layout.h	2008-01-21 19:35:27.000000000 +0300
+++ linux-2.6.git/include/asm-frv/mem-layout.h	2008-02-03 13:45:25.000000000 +0300
@@ -12,6 +12,8 @@
 #ifndef _ASM_MEM_LAYOUT_H
 #define _ASM_MEM_LAYOUT_H
 
+#include <linux/const.h>
+
 #ifndef __ASSEMBLY__
 #define __UL(X)	((unsigned long) (X))
 #else
@@ -22,13 +24,7 @@
  * PAGE_SHIFT determines the page size
  */
 #define PAGE_SHIFT			14
-
-#ifndef __ASSEMBLY__
-#define PAGE_SIZE			(1UL << PAGE_SHIFT)
-#else
-#define PAGE_SIZE			(1 << PAGE_SHIFT)
-#endif
-
+#define PAGE_SIZE			(_AC(1, UL) << PAGE_SHIFT)
 #define PAGE_MASK			(~(PAGE_SIZE-1))
 
 /*****************************************************************************/
-- 