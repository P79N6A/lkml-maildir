Date: Mon, 22 Dec 2003 10:26:58 -0500
From: Ethan Weinstein <>
Subject: Re: minor e1000 bug
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/12/22/71

Feldman, Scott wrote:
>>--- linux-2.4.20/drivers/net/e1000/e1000_main.c~    
>>2003-08-03 00:40:21.000000000 +0200
>>+++ linux-2.4.20/drivers/net/e1000/e1000_main.c 2003-08-08 
>>+++ 13:20:06.000000000 +0200
>>@@ -1390,7 +1390,7 @@
>>        netif_stop_queue(netdev);
>> 
>>    /* Reset the timer */
>>-   mod_timer(&adapter->watchdog_timer, jiffies + 2 * HZ);
>>+   mod_timer(&adapter->watchdog_timer, jiffies + HZ);
>> }
> 
> 
> That should be OK if you're not linked at half duplex or using a 82541/7
> Ethernet controller.  e1000_smartspeed() and e1000_adaptive_ifs() are
> sensitive to the watchdog interval, so we'll need to make sure those are
> OK before adjusting the timer from 2 to 1 seconds.  This issue is
> tracker here: 
http://bugme.osdl.org/show_bug.cgi?id=1192.
This modification appears to somewhat remedy the problem, however, 
bandwidth measurement seems to be much more accurate with many other 
cards.  By what method does, say, the 3c59x card export its statistics 
to /proc/net/dev that makes it easier to measure?
Ethan
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/