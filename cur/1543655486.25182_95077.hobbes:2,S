Date: Tue, 10 Dec 2002 01:26:21 +0100
From: Marc-Christian Petersen <>
Subject: [PATCH 2.4.21-BK] Missing bits for new IDE from -AC
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/12/9/195

Hi Marcelo,
again a missing bit for $subject to fix this at reboot(8)/halt(8) time:
- flushing ide devices: hda hdb ... hd$foo
... in an endless loop.
Taken, by advice from Alan, out of latest -ac :)
ciao, Marc--- linux-2.4.21-BK/drivers/block/ll_rw_blk.c	2002-12-05 18:54:22.000000000 +0100
+++ linux-2.4.20-ac1/drivers/block/ll_rw_blk.c	2002-12-06 16:14:01.000000000 +0100
@@ -1413,12 +1452,6 @@
 #ifdef CONFIG_ISP16_CDI
 	isp16_init();
 #endif
-#if defined(CONFIG_IDE) && defined(CONFIG_BLK_DEV_IDE)
-	ide_init();		/* this MUST precede hd_init */
-#endif
-#if defined(CONFIG_IDE) && defined(CONFIG_BLK_DEV_HD)
-	hd_init();
-#endif
 #ifdef CONFIG_BLK_DEV_PS2
 	ps2esdi_init();
 #endif