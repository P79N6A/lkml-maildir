Date: Wed, 13 Dec 2006 21:40:34 +0100 (CET)
From: Roman Zippel <>
Subject: Re: [RFC] HZ free ntp
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/12/13/244

Hi,
On Wed, 13 Dec 2006, john stultz wrote:
> > The largest possible interval is freq cycles (or 1 second without
> > adjustments). That is the base interval and without redesigning NTP we
> > can't change that. This base interval can be subdivided into smaller
> > intervals for incremental updates.
> 
> Indeed, larger then 1 second intervals would require the second_overflow
> code to be reworked too.
There isn't much to rework without a complete redesign.
> > You cannot choose arbitrary intervals otherwise you get other problems,
> > e.g. with your patch time_offset handling is broken.
> 
> I'm not seeing this yet. Any more details? 
time_offset is scaled to HZ in do_adjtimex, which needs to be changed as 
well.
> > You don't have to introduce anything new, it's tick_length that changes
> > and HZ that becomes a variable in this function.
> 
> So, forgive me for rehashing this, but it seems we're cross talking
> again. The context here is the dynticks code. Where HZ doesn't change,
> but we get interrupts at much reduced rates.
I know and all you have to change in the ntp and some related code is to 
replace HZ there with a variable, thus make it changable, so you can 
increase the update interval (i.e. it becomes 1s/hz instead of 1s/HZ).
> However, in doing so we have to
> work w/ the ntp.c code which (as Ingo earlier mentioned) has a number of
> HZ based assumptions.
Repeating Ingo's nonsense doesn't make it any more true. :-(
bye, Roman
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/