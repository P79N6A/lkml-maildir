Date: Mon, 14 Feb 2000 20:32:11 -0500 (EST)
From: Paul <>
Subject: Re: char/Serial.c
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/2/14/181

On Mon, 14 Feb 2000, Uncle George wrote:
@>
@>Apparently my ttyS1 had an IRQ if 5 ( rather than the usual setting of
@>IRQ 3 ). It seems that the serial driver does not really detect the IRQ
@>settings at all . Without the proper IRQ settings, the port simply times
@>out, and does the next chunk of chars. Very slow, and chunks/fifo fills
@>are also not (always) in multiples of 16.
@>
@>My IRQ settings for ttyS2 & ttyS3 are not what serial.c expects as 4 & 3
@>respectively ( i use 5 & 9 ), but the log in var/log/messages say thet
@>they were detected/set as 4 & 3.
@>
@>This failure to detect the port IRQ's seems to be a boo boo. Do I get to
@>annoy the last serial.c maintainer ( if there is still one )
@>
@>gat
@>
	From the Serial-HOWTO:
=-=-=-
  12.6.  The Startup Screen Show Wrong IRQs for the Serial Ports.
  Linux does not do any IRQ detection on startup.  When the serial
  module loads it only does serial device detection.  Thus, disregard
  what it says about the IRQ, because it's just assuming the standard
  IRQs.  This is done, because IRQ detection is unreliable, and can be
  fooled.  But if and when setserial runs from a start-up script, it
  changes the IRQ's and displays the new (and hopefully correct) state
  on on the startup screen.  If the wrong IRQ is not corrected by a
  later display on the screen, then you've got a problem.
  So, even though I have my ttyS2 set at IRQ 5, I still see
       ttyS02 at 0x03e8 (irq = 4) is a 16550A
  at first when Linux boots.  (Older kernels may show "ttyS02" as
  "tty02") You have to use setserial to tell Linux the IRQ you are
  using.
=-=-=-=-
RTFM for more info...
Paul
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/