Date: Wed, 2 Jan 2008 09:49:56 +0000
From: Andy Whitcroft <>
Subject: Re: [PATCH] checkpatch.pl: recognize the #elif preprocessor directive
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/2/39

On Tue, Jan 01, 2008 at 12:12:22PM +0200, Benny Halevy wrote:
> checkpatch.pl does not recognize #elif as a preprocessor directive
> causing it to print bogus errors for, e.g.:
> ERROR: need consistent spacing around '&' (ctx:WxV)
> when the operator is not recognized as unary in this context.
> 
> for example:
> 
> void foo(void)
> {
> 	int x, y, z;
> 	void *p[1] = {
> #if defined(X)
> 		&x
> #elif defined(Y)
> 		&y
> #else
> 		&z
> #endif
> 	};
> }
> 
> Signed-off-by: Benny Halevy <bhalevy@panasas.com>
Yes, thanks; good catch.  Commited this and added tests for it.
Will be in 0.13 which is imminent.
-apw