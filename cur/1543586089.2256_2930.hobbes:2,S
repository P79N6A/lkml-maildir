Date: Wed, 28 Mar 2001 20:09:19 +0200 (MET DST)
From: Szabolcs Szakacsits <>
Subject: Re: OOM killer???
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/3/28/104

On Tue, 27 Mar 2001, Rogier Wolff wrote:
> Out of Memory: Killed process 117 (sendmail).
[ ... many of these ... ]
> Out of Memory: Killed process 117 (sendmail).
>
> What we did to run it out of memory, I don't know. But I do know that
> it shouldn't be killing one process more than once... (the process
> should not exist after one try...)
I already noted this last week. Processes in TASK_UNINTERRUPTIBLE state
can't be scheduled so won't be killed immediately. This state can be
also permanent if the process using [buggy?] smbfs, nfs without the
'hard,intr' option, buggy drivers or hardwares. What worse, if this
state is permanent, a lockup is guaranteed [the other, random OOM killer
in page fault handler never gets the chance to run for some mysterious
reasons (it worked fine in 2.2)]. Solution is easy, one bit in task
structure should indicate that the process already SIGKILL'ed ... oops
but it must be already there, so it should be just taken into account by
OOM killer. Hopefully it won't result a massacre ... [that would be
still better then a lockup, wouldn't be ;)]
	Szaka
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/