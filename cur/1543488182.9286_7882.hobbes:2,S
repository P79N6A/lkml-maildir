Date: Wed, 03 Mar 1999 02:36:26 +0200
From: Pavel Ravits <>
Subject: Re: (U)DMA issues - another for the blacklist? (was Re: Maybe Disk Problem.)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/3/2/148

Hi,
Steve Dodd wrote:
> So your problem's solved then :) Now all we have to do is figure out if it's
> the motherboard or the drive.. do you have another machine with a different
> motherboard you could stick the drive in?
I put already the disk on my brother p133 computer, I guess what there exists
DMA at least, and I think it really worked then faster, but I can't remember for
sure. ( one thing right - it worked correctly).
> Hmm, what does the kernel say about your IDE controller on startup? How
> about /proc/pci? (cat /proc/pci | grep IDE)
/proc/pci | grep IDE and the boot output are attached.
 
> Umm, if (U)DMA is broken for your particular drive/motherboard combination,
> you're basically stuck. You can try winging at the manufacturers or retailers,
> but I don't know how far that'll get you. But not having DMA shouldn't make
> your system unusably slow, anyway?
If I will need it - it will be possible for me to exchange(get other) the board and/or the
harddrive. The question is - are they really bad and if they bad then what is good.
About the speed: it indeed matters:
*from hdparm read rate after turning on (U)DMA is four times the read rate without it.
*for example netscape will load instead of 10 - just three sec. or something.
*eventually as memory isn't that cheep - using swap is must - so all my computer speed
 depends on the harddrive.Linux version 2.2.2 (root@darkcastle.org) (gcc version 2.7.2.3) #2 Tue Mar 2 12:41:10 IST 1999
Detected 267279854 Hz processor.
Console: colour VGA+ 80x25
Calibrating delay loop... 266.24 BogoMIPS
Memory: 63352k/65536k available (876k kernel code, 412k reserved, 856k data, 40k init)
CPU: Intel Pentium II (Deschutes) stepping 02
Checking 386/387 coupling... OK, FPU using exception 16 error reporting.
Checking 'hlt' instruction... OK.
POSIX conformance testing by UNIFIX
PCI: PCI BIOS revision 2.10 entry at 0xfb330
PCI: Using configuration type 1
PCI: Probing PCI hardware
Linux NET4.0 for Linux 2.2
Based upon Swansea University Computer Society NET3.039
NET4: Unix domain sockets 1.0 for Linux NET4.0.
NET4: Linux TCP/IP 1.0 for NET4.0
IP Protocols: ICMP, UDP, TCP
Starting kswapd v 1.5 
Detected PS/2 Mouse Port.
Serial driver version 4.27 with no serial options enabled
ttyS00 at 0x03f8 (irq = 4) is a 16550A
ttyS01 at 0x02f8 (irq = 3) is a 16550A
pty: 256 Unix98 ptys configured
apm: BIOS version 1.2 Flags 0x07 (Driver version 1.9)
es1370: version v0.17 time 12:42:42 Mar  2 1999
es1370: found adapter at io 0xe400 irq 10
es1370: features: joystick off, line in, mic impedance 0
PIIX4: IDE controller on PCI bus 00 dev 39
PIIX4: not 100% native mode: will probe irqs later
    ide0: BM-DMA at 0xf000-0xf007, BIOS settings: hda:pio, hdb:pio
    ide1: BM-DMA at 0xf008-0xf00f, BIOS settings: hdc:pio, hdd:pio
hda: QUANTUM FIREBALL EL5.1A, ATA DISK drive
hdc: SAMSUNG SHD-3212A (APOLLO-4) AD, ATA DISK drive
hdd: ATAPI CD-ROM DRIVE 32X MAXIMUM, ATAPI CDROM drive
ide0 at 0x1f0-0x1f7,0x3f6 on irq 14
ide1 at 0x170-0x177,0x376 on irq 15
hda: QUANTUM FIREBALL EL5.1A, 4892MB w/418kB Cache, CHS=623/255/63
hdc: SAMSUNG SHD-3212A (APOLLO-4) AD, 407MB w/128kB Cache, CHS=1002/16/52
hdd: ATAPI 27X CD-ROM drive, 120kB Cache
Uniform CDROM driver Revision: 2.52
Floppy drive(s): fd0 is 1.44M
FDC 0 is a post-1991 82077
PPP: version 2.3.3 (demand dialling)
TCP compression code copyright 1989 Regents of the University of California
PPP line discipline registered.
SLIP: version 0.8.4-NET3.019-NEWTTY (dynamic channels, max=256) (6 bit encapsulation enabled).
CSLIP: code copyright 1989 Regents of the University of California.
SLIP linefill/keepalive option.
Partition check:
 hda: hda1 hda2 < hda5 hda6 hda7 hda8 hda9 >
 hdc: hdc1
VFS: Mounted root (ext2 filesystem) readonly.
Freeing unused kernel memory: 40k freed
TIOCSER?WILD ioctl obsolete, ignored.
TIOCSER?WILD ioctl obsolete, ignored.
    IDE interface: Intel 82371AB PIIX4 IDE (rev 1).