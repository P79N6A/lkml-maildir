Date: Sun, 2 Jan 2005 17:41:57 -0800 (PST)
From: Linus Torvalds <>
Subject: Re: [PATCH] Fix typo in i386 single step changes
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/1/2/133

On Sun, 3 Jan 2005, Andi Kleen wrote:
> 
> Also looking at the code more closely the comment above doesn't 
> match what the code does. I fixed that too.
The comment is slightly stale, but yours perpetuates the staleness, and 
doesn't fix the first comment which also talks about staleness.
Back when we were really broken with TF handling, we also used to set TF
when we started single-stepping, but we never cleared it until we got a
stale DR_STEP event. In fact, we could have the debugger detach from the
process, and leave TF set. That's not true any more, and I don't think it
was true even before the latest changes - the code (and comment) has been
stale for quite a while.
So the whole "lazy TF" thing is really incorrect, and these days it's
about the user setting TF on its own.
And the _code_ was corrupted too (and working, but only because it could
never trigger anyway).
I'll remove it and fix up the comments.
		Linus
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/