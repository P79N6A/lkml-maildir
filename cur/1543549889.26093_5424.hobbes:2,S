Date: Tue, 26 Sep 2000 09:40:55 -0500 (CDT)
From: Jeff Garzik <>
Subject: Re: tty and ldisc module safety
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/9/26/92

On Wed, 27 Sep 2000, Andrew Morton wrote:
> 
> --- linux-2.4.0-test9-pre7/include/linux/tty_driver.h	Sat Aug  5 13:35:24 2000
> +++ linux-akpm/include/linux/tty_driver.h	Wed Sep 27 00:47:24 2000
> @@ -117,6 +117,15 @@
> 
>  #include <linux/fs.h>
> 
> +#ifdef CONFIG_MODULES
> +#include <linux/module.h>
> +struct module;
> +#define SET_TTY_OWNER(driver)	\
> +	do { (driver)->owner = THIS_MODULE; } while (0)
> +#define SET_LDISC_OWNER(ldisc)	\
> +	do { (ldisc)->owner = THIS_MODULE; } while (0)
> +#endif
Why ifdef MODULE?  And why the "struct module;"?  Simply including
linux/modules.h should take care of both cases...  Like pci.h, modules.h
should work fine even when !MODULES...
	Jeff
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/