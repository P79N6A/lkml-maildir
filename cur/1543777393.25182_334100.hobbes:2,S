Date: Thu, 14 Jul 2005 09:02:32 -0700
From: Daniel McNeil <>
Subject: Re: [rfc patch 2/2] direct-io: remove address alignment check
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/7/14/109

On Thu, 2005-07-14 at 06:18, Andi Kleen wrote:
> Daniel McNeil <daniel@osdl.org> writes:
> 
> > This patch relaxes the direct i/o alignment check so that user addresses
> > do not have to be a multiple of the device block size.
> 
> The original reason for this limit was that lots of drivers
> (not only IDE) explode when you give them odd sizes. Sometimes
> it is even worse.
> 
> I doubt all of them have been fixed.
> 
> Very risky change.
> 
That is exactly why I made this a separate patch, so that we
can test and find out where the problems are and work to fix
them.
Are there problems only with odd sizes, or do drivers have problems
with non-512 sizes?
Allowing 4-byte aligned user addresses would be a good step
forward, since it looks like malloc() returns 4-byte aligned 
addresses.
Daniel
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/