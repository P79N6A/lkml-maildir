Date: Mon, 28 Nov 2005 15:32:04 +0100
From: "Jörn Dreyer" <>
Subject: [PATCH] nfsroot.c, kernel 2.6.14.3, do not silently stop parsing on an unknown option
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/11/28/59

Hello,
I think it would be helpful if the kernel did not silently stop parsing
nfs options, but instead warned about any he does not recognize. The
attached patch adds one printk to do just that.
It took me a couple of hours to find my configuration mistake - it is a
trivial patch, nevertheless, I would like to see the patch included to
save others the time ...
Sincerely
Jörn Dreyer
--- linux-2.6.14.3/fs/nfs/nfsroot.c     2005-11-24 23:10:21.000000000 +0100
+++ linux/fs/nfs/nfsroot.c      2005-11-28 14:50:59.223111632 +0100
@@ -276,6 +277,7 @@
                                nfs_data.flags |= NFS_MOUNT_NOACL;
                                break;
                        default :
+                               printk(KERN_WARNING "Root-NFS: unknown option: %s\n", p);
                                return 0;
                }
        }