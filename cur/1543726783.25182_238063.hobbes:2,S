Date: Mon, 2 Aug 2004 12:10:37 +0200
From: Arjan van de Ven <>
Subject: Re: Oops in register_chrdev, what did I do?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/8/2/53

On Mon, Aug 02, 2004 at 12:09:43PM +0200, Måns Rullgård wrote:
> Arjan van de Ven <arjanv@redhat.com> writes:
> 
> >> OTOH, wouldn't it be a good idea to refuse loading modules not
> >> matching the running kernel?
> >
> > we do that already... provided you use the kbuild infrastructure instead
> > of a broken self-made makefile hack....
> 
> I used "make -C /lib/modules/`uname -r` SUBDIRS=$PWD modules".  Is
> that not correct?  The breakage was my fault, though.
that is correct
> 
> The problem I see is that a modules contain information about certain
> compiler flags used, e.g. -mregparm, but insmod still attempts to load
> them even they do not match the kernel.  This is independent of what
> build system you used.
that is odd, which modutils is that ? Afaik insmod is supposed to just
refuse (and I've seen it do that as well)
[unhandled content-type:application/pgp-signature]