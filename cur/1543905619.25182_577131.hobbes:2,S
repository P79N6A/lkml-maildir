Date: Mon, 30 Jul 2007 20:45:25 -0700
From: Badari <>
Subject: Re: [PATCH] add check do_direct_IO() return val
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/7/30/535

Joe Jin wrote:
>> Well, I'm having a heck of a time getting this to fail.  It looks  
>> possible, though.  Joe, were you guys able to narrow it down to a  
>> reproducible test case?  Do you have any oops output messages from  
>> the crashes?
>> 
>
> Zach, it easy to reproduce through fio with following config file
>
> # cat jobfile
> [global]
> bs=8k
> iodepth=1024
> iodepth_batch=60
> randrepeat=1
> size=1m
> directory=/home/oracle
> numjobs=20
> [job1]
> 	ioengine=sync
> 	bs=1k
> 	direct=1
> 	rw=randread
> 	filename=file1:file2
> [job2]
> 	ioengine=libaio
> 	rw=randwrite
> 	direct=1
> 	filename=file1:file2
> [job3]
> 	bs=1k
> 	ioengine=posixaio
> 	rw=randwrite
> 	direct=1
> 	filename=file1:file2
> [job4]
> 	ioengine=splice
> 	direct=1
> 	rw=randwrite
> 	filename=file1:file2
> [job5]
> 	bs=1k
> 	ioengine=sync
> 	rw=randread
> 	filename=file1:file2
> [job7]
> 	ioengine=libaio
> 	rw=randwrite
> 	filename=file1:file2
> [job8]
> 	ioengine=posixaio
> 	rw=randwrite
> 	filename=file1:file2
> [job9]
> 	ioengine=splice
> 	rw=randwrite
> 	filename=file1:file2
> [job10]
> 	ioengine=mmap
> 	rw=randwrite
> 	bs=1k
> 	filename=file1:file2
> [job11]
> 	ioengine=mmap
> 	rw=randwrite
> 	direct=1
> 	filename=file1:file2 
>
> 
Hmm.. in this config file, whats causing DIO to panic ? Which test actually
passing faulty buffer ?
Thanks,
Badari
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/