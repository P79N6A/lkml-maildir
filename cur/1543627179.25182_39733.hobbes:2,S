Date: Wed, 10 Apr 2002 15:39:05 -0700
From: Kevin Hilman <>
Subject: ioremap() >= 128Mb (was: Memory problem with bttv driver)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/4/10/229

I followed the 'Memory problem with bttv driver' thread from the
archives and was curious if there was any resolution.
The basic problem is that I have a machine with 1G physical memory and
a device with an 128Mb of on-board memory that I would like to
ioremap().  Of course, since VMALLOC_RESERVE is 128Mb this will always
fail if there have been any previous calls to vmalloc() or ioremap()
(which is aways true when the driver loads as a module.)
So far I have a few workarounds, but no good long term solution.
- boot the kernel with less than 1G on cmdline: mem=768M
- hack VMALLOC_RESERVE 
Is it reasonable to make VMALLOC_RESERVE be configurable at boot-time
instead of compile time?
Or, is there a better way to get memory-mapped access to all of the
devices on-board memory?
Thanks.
-- 
Kevin Hilman <kevin@hilman.org>
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/