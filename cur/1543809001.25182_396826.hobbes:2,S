Date: Tue, 14 Feb 2006 00:31:14 +0100
From: Johannes Stezenbach <>
Subject: Re: dirty pages (Was: Re: [PATCH] Prevent large file writeback starvation)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/2/13/469

On Mon, Feb 13, 2006 at 03:04:57PM -0800, Andrew Morton wrote:
> Johannes Stezenbach <js@linuxtv.org> wrote:
> >
> > On Mon, Feb 13, 2006, Andrew Morton wrote:
> >  > Johannes Stezenbach <js@linuxtv.org> wrote:
> >  > > Now copying a 700MB file makes "Dirty" go up to 350MB. It then
> >  > > slowly decreases to 325MB and stays there.
> >  > 
> >  > It shouldn't.  Did you really leave it for long enough?
> >  > 
> >  > If you did, then why does it happen there and not here?
> > 
> >  Good question. I just repeated the execise, rebooted and
> >  copied a 700MB file. After ~30min "Dirty" is down to ~130MB, and
> >  continues to decrease very slowly.
> > 
> >  On my Desktop machine (P4 HT, 1G RAM) "Dirty" goes down near
> >  zero after ~30sec, as expected.
> 
> Are you using any unusual mount options?
> 
> Which filesystem types are online (not that this should affect it...)
$ cat /proc/mounts
rootfs / rootfs rw 0 0
/dev/root / ext3 rw,data=ordered 0 0
proc /proc proc rw,nodiratime 0 0
sysfs /sys sysfs rw 0 0
usbfs /proc/bus/usb usbfs rw 0 0
/dev/root /dev/.static/dev ext3 rw,data=ordered 0 0
tmpfs /dev tmpfs rw 0 0
tmpfs /dev/shm tmpfs rw 0 0
devpts /dev/pts devpts rw 0 0
/dev/hda6 /home ext3 rw,data=ordered 0 0
nfsd /proc/fs/nfsd nfsd rw 0 0
$
I found that if I copy a large number of small files (e.g. the linux
source tree), "Dirty" drops back near zero after ~30sec. Only if
I copy large files it won't.
Johannes
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/