Date: Tue, 02 Feb 1999 18:16:27 +0000
From: David Woodhouse <>
Subject: Re: howto disable auto route setup?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/2/2/133

Fred.Reimer@eclipsys.com said:
>  Note that I don't use diald and don't know the details on how it
> works. But, if it is simply a dial-on-demand daemon with filtering
> capabilities that I think it is, why would anyone continue to use it
> when that functionality has been incorporated into the base code? 
The reason I continue to use diald is because of the filtering it provides. 
Certain packets, such as NTP, should be transmitted when the link is up, but 
the link shouldn't be brought up for them. The ISDN dial-on-demand feature 
wasn't sophisticated enough to do this last time I looked. But of course I 
didn't look very hard, as diald already does that job quite nicely.
> It just seems to me that diald is not using the new features available in
> the newer kernel to provide the functionality it tries to.  It appears
> that the fundamental structure of the diald process needs to be
> re-examined.  For instance: 
 ...
>  Have diald listen on this interface and if it detects a packet that
> should cause a connection, fire up pppd, and resend the packet through
> the ethertap interface to the original destination
s/ethertap/sl0/ and you're close to how it works already. 
But we can't take down the interface every time - it's too slow to come back
up. For seamless dial-on-demand, we want the reconnection time to be as small
as possible. That's why people don't take down the ippp interface, but just
have diald call 'isdnctrl hangup' and 'isdnctrl dial' to control the link.
On the subject of getting rid of diald altogether - in order to do that, we
need to make the kernel solutions offer the same functionality.
Currently, ipchains and the {ISDN,pppd} dial-on-demand code don't meet those
criteria, AFAICT. If I'm wrong, please enlighten me. For a start, please 
explain how I can implement the following...
 NTP packets : Don't bring link up, but send packets if the link is already up.
 WWW connection: Bring link up, keep link up for 10 minutes after socket 
		closed, because there are likely to be more.
Fred.Reimer@eclipsys.com said:
>  Explain, please, why you would want to configure IP on an interface
> if you didn't want to "route" out to that local subnet? 
Fred.Reimer@eclipsys.com said:
> It's a difficult concept because it does not make sense.  Why would
> you want to configure an IP, again I ask, if you don't want to
> communicate with that IP? 
Performance. For seamless dial-on-demand, we don't want to have to set the 
whole thing up each time - we just want to activate it and deactivate it.
It wouldn't be so much of a problem if the kernel got the route _right_. 
But when I configure the interface as point-to-point, it goes and makes a 
network route for it.
----                                 ----                                 ----
David Woodhouse        David.Woodhouse@mvhi.com       Office: (+44) 1223 810302
 Project Leader,     Process Information Systems      Mobile: (+44) 976 658355
    Axiom (Cambridge) Ltd., Swaffham Bulbeck, Cambridge, CB5 0NA, UK.
             finger dwmw2@ferret.lmh.ox.ac.uk for PGP key.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/