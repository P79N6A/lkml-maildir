Date: Fri, 14 May 2004 15:11:00 +0200 (MEST)
From: Geert Uytterhoeven <>
Subject: ata_piix: port disabled.  ignoring.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/5/14/69

	Hi Jeff,
I'm trying to install Linux on a SATA disk in a Dell PowerEdge 750, which has
an Intel 82875P chipset with an Intel 6300ESB SATA Storage Controller.
I managed to do the actual installation by booting from a Knoppix 3.4 CD (using
kernel 2.4.26 or 2.6.5 (apparently SATA drivers were not included), doesn't
matter much) in an external USB CD-ROM driver, and installing Debian testing
using FAI (Fully Automatic Installation). It took a while because the SATA
drive was used in backwards compatiblity mode without DMA, but it succeeded.
The kernel I installed was kernel-image-2.6.5-1-686-smp from Debian, which has
SATA support included. But when I want to boot it, I get (manual copy):
| ata1: PATA max UDMA/33 cmd 0x1F0 ctl 0x3F6 bmdma 0xFEA0 irq 14
| ata1: port disabled. ignoring.
I don't care, no PATA devices attached.
| ata2: SATA max UDMA/133 cmd 0x170 ctl 0x376 bmdma 0xFEA8 irq 15
| ata2: port disabled. ignoring.
Bad, the Maxtor 6Y080M0 I want to boot from is there :-(
And after that it tries the normal IDE driver, which of course fails with:
| ide0: I/O resource 0x1F0-0x1F7 not free
I looked at ata_piix.c, and apparently the driver decides whether a port is
disabled by checking a bit in PCI config space, so this looks like a BIOS setup
problem to me. But the BIOS has the first SATA port enabled (`AUTO', and it
does see a 80 GB disk there), while the PATA and second SATA ports are marked
`OFF'.
Just to be sure, I also tried acpi=off and pci=noacpi, but no avail.
Do you have a clue? Would it help to try 2.6.6?
Thanks for all suggestions!
Gr{oetje,eeting}s,
						Geert
--
Geert Uytterhoeven -- Sony Network and Software Technology Center Europe (NSCE)
Geert.Uytterhoeven@sonycom.com ------- The Corporate Village, Da Vincilaan 7-D1
Voice +32-2-7008453 Fax +32-2-7008622 ---------------- B-1935 Zaventem, Belgium
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/