Date: Thu, 23 Mar 2000 06:28:39 -0500 (EST)
From: Ion Badulescu <>
Subject: Re: [PATCH] bsd disklabel detection
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/3/23/31

On Thu, 23 Mar 2000 Andries.Brouwer@cwi.nl wrote:
> > The first patch is fairly trivial: it changes the value for the unused
> > BSDI_PARTITION flag (which was wrong: I have BSDI 2.1 and 4.1 here, and
> > both of them failed to see their own partitions after changing their flag
> > to 0xb7).
> 
> but the use of 0xb7 and 0xb8 for BSDI seems well established.
> Is going to 0x9f a recent change? Or are these different systems?
> Does the BSDI fdisk have a list of types built-in?
From /usr/include/machine/bootblock.h on BSDI 2.1:
#define MBS_BSDI        0x9F    /* BSD system partition */
This is the only code the boot loader is looking for (yes I have the
source code in front of me). If it doesn't find it, it assumes the disk is
not partitioned and goes on blindly to load the second stage loader from
the next few sectors of the disk.
As for BSDI 4.1 (latest version afaik), as I said, I have it installed in
a partition type 0x9F, and when I changed the type to 0xB7 using the linux
fdisk, it failed to mount its root. I'm not sure what other versions of
BSDI could be using 0xB7...
What "BSDI" system that you know of uses 0xB7? This one is
BSD/OS foo.bar.com 2.1 BSDI BSD/OS 2.1 i386 unknown
> For the time being I suppose we should accept both 0xb7 and 0x9f.
That can't hurt, indeed.
BTW, what do you think about the second patch?
Thanks,
Ion
-- 
  It is better to keep your mouth shut and be thought a fool,
            than to open it and remove all doubt.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/