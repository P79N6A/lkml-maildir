Date: Sun, 06 Feb 2005 08:26:28 +1100
From: Nigel Cunningham <>
Subject: [PATCH] Missing Select in NFS server support causes comile error
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/2/5/154

Hi.
(Resent in a format that can be more easily applied).
This issues was picked up by Peter FrÃ¼hberger.
If NFS server support is selected, but ExportFS is not, the following
compile time errors occur:
> > >   LD      init/built-in.o
> > >   LD      .tmp_vmlinux1
> > > fs/built-in.o(.text+0x7329f): In function `fh_verify':
> > > : undefined reference to `export_op_default'
> > > fs/built-in.o(.text+0x738b7): In function `fh_compose':
> > > : undefined reference to `export_op_default'
> > > fs/built-in.o(.text+0x73bb7): In function `fh_update':
> > > : undefined reference to `export_op_default'
> > > fs/built-in.o(.text+0x73e80): In function `_fh_update':
> > > : undefined reference to `export_op_default'
> > > fs/built-in.o(.text+0x78150): In function `check_export':
> > > : undefined reference to `find_exported_dentry'
> > > make[1]: *** [.tmp_vmlinux1] Error 1
> > > 
Signed-off by: Nigel Cunningham <ncunningham@linuxmail.org>
diff -ruNp 990-select-exportfs-on-nfs-server-old/fs/Kconfig 990-select-exportfs-on-nfs-server-new/fs/Kconfig
--- 990-select-exportfs-on-nfs-server-old/fs/Kconfig	2005-02-03 22:33:40.000000000 +1100
+++ 990-select-exportfs-on-nfs-server-new/fs/Kconfig	2005-02-06 08:22:25.000000000 +1100
@@ -1400,6 +1400,7 @@ config NFSD
 	tristate "NFS server support"
 	depends on INET
 	select LOCKD
+	select EXPORTFS
 	select SUNRPC
 	help
 	  If you want your Linux box to act as an NFS *server*, so that other
-- 
Nigel Cunningham
Software Engineer, Canberra, Australia
http://www.cyclades.com
Ph: +61 (2) 6292 8028      Mob: +61 (417) 100 574
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/