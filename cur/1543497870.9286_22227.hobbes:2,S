Date: Sat, 5 Jun 1999 17:18:13 -0400 (EDT)
From: Alexander Viro <>
Subject: Re: [PATCH] speedup for directory tree traversals
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/6/5/90

On Sat, 5 Jun 1999, Jamie Lokier wrote:
>   I've implemented the fs-specifics for msdos and ext2.  vfat is hairier
>   and I thought it'd tread on Alex Viro's toes.  Unfortunately the
Jamie, it's pretty easy atop of FAT patch, both for msdos and vfat. Look
for fat_build_inode() - all we need is to add an argument want_directory
and pass 1 from lookup() in case of O_DIRECTORY in flags.
fat_build_inode() should reject the non-directory stuff if this argument
is set (*res=-ENOTDIR; return NULL;) and there we go.
Linus, could you apply the FAT patch to 2.2? It is stable and I have a
couple of optimizations (cyclic search upon lookup, small internal page
cache for unicode translations) that would require additional testing. It
would be much more convenient to test them with the main code already in
place. I've seen no complaints on this patch and it's running in 2.3.x
since, erm, May 14th. Plus there were several months of testing before
that. Original patch (against 2.2.8) should apply with a couple of line
number mismatches. If you prefer a rediffed variant - just tell and I'll
send it to you immediately.
							Cheers,
								Al
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/