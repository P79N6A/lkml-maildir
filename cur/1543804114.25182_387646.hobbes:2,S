Date: Wed, 18 Jan 2006 14:38:11 -0500 (EST)
From: Jason Baron <>
Subject: Re: [patch 1/2] x86_64: pageattr use single list
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/1/18/288

On Wed, 18 Jan 2006, Nick Piggin wrote:
> Use page->lru.next to implement the singly linked list of pages rather
> than the struct deferred_page which needs to be allocated and freed for
> each page.
> 
> Signed-off-by: Nick Piggin <npiggin@suse.de>
> Acked-by: Andi Kleen <ak@suse.de>
> 
> Index: linux-2.6/arch/x86_64/mm/pageattr.c
> ===================================================================
...
> +
> +	flush_map((dpage && !dpage->lru.next) ? (unsigned long)page_address(dpage) : 0);
> +	while (dpage) {
> +		__free_page(dpage);
> +		dpage = (struct page *)dpage->lru.next;
>  	} 
>  } 
> 
do you want to be touching a struct page that was just freed?
-Jason
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/