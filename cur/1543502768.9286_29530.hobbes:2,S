Date: Thu, 15 Jul 1999 13:34:23 +0400 (MSD)
From: "Khimenko Victor" <>
Subject: Re: Linux Kernel Upwards-Compatibility Deficiencies
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/7/15/58

In <000b01bececc$a99950c0$c6408cd4@gtjh> GERALD HOOPER (ghphpr@tesco.net) wrote:
> Hi Larry
> I am not an expert in the internal of kernel device drivers but I need to contact someone who is and who can help me.
Hardly needed. I honestly can not see problem with kernel device drivers in you
report yet. MUCH MORE like just a bunch of "pilot errors". /dev/lp0 (NOT /dev/lp1
anymore!) is not recognized since you do not have proper driver installed/tuned,
vfat is not supported since you can not load vfat.o without fat.o, etc.
Of course there are CAN BE driver problems -- it's really strange that partition
check does not work for LS-120... It should...
> The help desk staff at RedHat do not seem to have the necessary levels of expertise to sort out what is a very real problem with the linux kernels and in particular the differences between 2.0.36-0.7 (Linux 5.2) and 2.2.5-15 (Linux 6.0).
Never tried to contact with them :-) From conversation looks like they are just
not trained enough to read someone's brain...
> My problem is that the kernels do not seem to be upwardly compatible.
They are not. It's well-known truth. Take a look on
http://www.kernelnotes.org/change22.html
 , for example :-)
> I have a system which uses a modern BX board with built in AIC 7895 scsi controllers on which I have three scci 4.3 scci disks mounted. I also have an LS120 drive with a standard floppy. The reason for my upgrading from 5.2 to 6.0 was because of timeout problems on the scci bus where the 2.0.36 kernel keeps resetting after a timeout. The 6.0 system appears to be better in this respect but using the 2.2.5-15 kernel gives rise to more serious problems namely that the parallel port does not appear to have been configured in the kernel and I cannot gain access to my LS120 drive because it is not prperly detected by the system.
It should not be configured in kernel. You must make approriate changes
in /etc/conf.modules. LS-120 problem is more interesting, though.
Still it's not clear if it's kernel problem or just local configuration problem.
> The essential fault appears to lie in the specification of the /proc/devices directory which is a virtual file system which forms part of the kernel.
Thnx for explanation about /proc :-)
> If you examine this directory on both the 2.0.36-07 (Linux Version 5.2) and 2.2.5-15 (Linux Version 6.0) kernels you will see that they are very different and that the key 'lp' item is missing from the 2.2.5-15 kernel.
And it's correct. lp driver is not loaded right now -- why it should be in
/proc/devices ? When it will be needed and will be autoloaded you'll see
key 'lp' there.
> The label for the 'lp' item is 6 which I believe to be the major port number in the 'major minor' number port identifier sequence.
Huh. What are that ports you are talking about ? 6 in just major number for
/dev/lp* special files if you mean this...
> The way  in which the /proc directory is used by the rest of the system is critical but I have yet to find any documentation on this.
Hmm. You can live well without /proc at all. Some utilities (like ps) will not
work then, of course but to said that it's "critical" is little overboard IMO.
> To put matters right you would need to rebuild the kernel but Redhat do not provide the means to do this or of copies of the make files from which the kernels were originally constructed, so that their construction can be verified against their specification.
Huh. HEAVY AND UNFAIR INSULT. Full build procedure including all needed source
files, configuration files and so on must be in kernel*.src.rpm on CD with
sources... And yes, in such situations usually better to cook up new kernel,
of course.
> Doing a cat on the /proc/devices virtual directory for kernel 2.2.5-15
> gave the following results
> Character devices:    Block devices:
>   1 mem                     1 ramdisk
>   2 pty                        2 fd
>   3 ttyp                       3 ide0
>   4 ttyS                       8 sd
>   5 cua                        9 md
>   7 vcs                        22 ide1
>  10 misc
>  29 fb
>  36 netlink
> 128 ptm
> 136 pts
> The corresponding values for the 2.0.36-07 kernel were
> Character devices:    Block devices:
>   1 mem                  1 ramdisk
>   2 pty                     2 fd
>   3 ttyp                    3 ide0
>   4 ttyp                    8 sd
>   5 cua                    9 md
>   6 lp                       22 ide1
>   7 vcs
>  10 misc
> While the Block devices are the same the Character Devices differ significantly
As is should be :-) Kernel 2.0 and 2.2 are quite different beasts.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/