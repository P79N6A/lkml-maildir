Date: Tue, 17 Jan 2006 09:32:29 -0800
From: Ulrich Drepper <>
Subject: Re: [robust-futex-3] futex: robust futex support
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/1/17/192

On 1/16/06, david singleton <dsingleton@mvista.com> wrote:
>         I've fixed another memory leak in free_robust_list.   The entries in
> the slab caches
> now look correct through the full test suite up to 7500 threads.   Does
> your glibc
> work correctly with this patch?
I'll see shortly.
But looking at the patch, I don't understand the use of
FUTEX_ATTR_SHARED.  The EADDRNOTAVAIL error is something the kernel
has to return if the address is not that of an object in a shared
memory region.  It's not information directly provided by the user of
futex_register.
So, I suggest removing the attr parameter from futex_register and
after get_futex_key, when you know where the futex is actually
located, return -EADDRNOTAVAIL if the futex is in private memory.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/