Date: Wed, 19 Oct 2005 14:52:30 -0400
From: Phillip Susi <>
Subject: Re: Keep initrd tasks running?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/10/19/183

I thought that the key difference between initrd and initramfs is that 
initrd uses pivot_root, initramfs does not.  From what I have read, some 
consider pivit_root to be an ugly hack, so initramfs was made in such a 
way that you don't pivot.  Is this incorrect?
The whole reason that pivot was made was to allow the initrd filesystem 
to be moved and the real root mounted, all while processes ( at least 
init, because it can't exit ) continued to execute, maintaining their 
open files on the initrd filesystem.  Just instead of those files being 
in / they got moved to /initrd.
Under that system it is possible to leave things running, but I thought 
that with initramfs, init actually exited and the kernel unmounted the 
initramfs, and mounted the real root and ran the real init.
John Richard Moser wrote:
> 
> AFAIK it's pivoted and then umounted, which frees it.  This doesn't mean
> it has to be freed..  . .
> 
> 
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/