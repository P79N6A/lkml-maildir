Date: Mon, 23 Apr 2007 09:06:29 +0100
From: "Jan Beulich" <>
Subject: Re: 2.6.20.7 locking up hard on boot
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/4/23/65

>Considering where it failed and that 2.6.20.3 worked, I would be 
>extremely surprised if this wasn't one more report of 
>adjust-legacy-ide-resource-setting.patch breaking booting (and we 
>already have confirmed reports for this)...
>
>But AFAIK we still don't understand how this patch managed to break 
>things.
Given that all of the reports are in cases when the adjustment is *not*
being done (and only a message is being printed), I can only assume that
the breakage results from the adding of PCI_BASE_ADDRESS_SPACE_IO
into the resource flags. I considered this unconditional setting of the flags
odd already in the original code, and added this extra flag only for
consistency reasons (because the settings reported by X indicated that
this was missing). Perhaps the adjustment (original and the added
extra flag) shouldn't be done if IORESOURCE_IO wasn't already set.
Perhaps one of those seeing the issue could try out returning from the
function right after that printk(), without any adjustment to the flags.
Jan
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/