Date: Thu, 2 Mar 2000 19:08:17 -0500 (EST)
From: Ricky Beam <>
Subject: Re: EEK! Able to eject mounted Zip Disk (2.3.46/2.2.13)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/3/2/185

On Thu, 2 Mar 2000, Lars Kellogg-Stedman wrote:
>I'm way out of my league on this one, but doesn't SCSI provide a way to
>"lock" removable media into a device, such that an "unlock" command is
>required before it can be ejected?
Yes it does, but that generally only applies to the eject button.  I've only
seen one DVD drive that applied it to a bus provided command.
>It seems that mounting a removeable device (and I believe removable
>devices are identified as such) should lock the media so that eject, even
>if it's sending an eject command directly to the device, will fail to
>eject media with a mounted filesystem.
Yes, the kernel does submit a "prevent allow" command to the drive on mount
and releases it on umount -- usually :-)  But as above, that doesn't always
prevent a "start stop unit" command from unloading the media.
Given the other number of bugs/problems with IOMEGA drives... I doubt it's
preventing ejection by command.
--Ricky
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/