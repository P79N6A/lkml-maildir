Date: Thu, 7 Dec 2006 12:49:17 -0800
From: Randy Dunlap <>
Subject: Re: [PATCH] kbuild : Restructure Device Drivers menu for entry selectability
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/12/7/244

On Thu, 7 Dec 2006 04:01:47 -0500 (EST) Robert P. J. Day wrote:
> 
>   Rewrite a number of the Kconfig files under the drivers/ directory
> so that those driver submenus can be selected or de-selected
> directly from the Drivers menu using the kbuild "menuconfig" feature
> without having to enter the submenu itself.
> 
> Signed-off-by: Robert P. J. Day <rpjday@mindspring.com>
> 
> ---
> 
>   NOTE:  Only those drivers submenus for which the Kconfig change was
> *immediately* obvious are included here.  Some of the other Kconfig
> files have "issues" with dependencies so that they'll need some extra
> cleanup before they can be tweaked like this as well.  So this first
> pass of a patch is just the beginning.
InfiniBand is presented in the wrong location in xconfig
with this patch.  After changing this to be
"menuconfig INFINIBAND"
it works as expected and looks good.
Acked-by: Randy Dunlap <randy.dunlap@oracle.com>
> diff --git a/drivers/infiniband/Kconfig b/drivers/infiniband/Kconfig
> index 9edface..25454e8 100644
> --- a/drivers/infiniband/Kconfig
> +++ b/drivers/infiniband/Kconfig
> @@ -1,13 +1,13 @@
> -menu "InfiniBand support"
> -
>  config INFINIBAND
> -	depends on PCI || BROKEN
>  	tristate "InfiniBand support"
> +	depends on PCI || BROKEN
>  	---help---
>  	  Core support for InfiniBand (IB).  Make sure to also select
>  	  any protocols you wish to use as well as drivers for your
>  	  InfiniBand hardware.
> 
> +if INFINIBAND
> +
>  config INFINIBAND_USER_MAD
>  	tristate "InfiniBand userspace MAD support"
>  	depends on INFINIBAND
> @@ -45,4 +45,4 @@ source "drivers/infiniband/ulp/srp/Kconf
> 
>  source "drivers/infiniband/ulp/iser/Kconfig"
> 
> -endmenu
> +endif
---
~Randy
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/