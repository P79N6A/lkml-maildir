Date: Fri, 29 Feb 2008 20:05:42 -0800
From: Christoph Lameter <>
Subject: [rfc 08/10] Export NR_MAX_ZONES to the preprocessor
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/2/29/469

Signed-off-by: Christoph Lameter <clameter@sgi.com>
---
 include/linux/bounds.h |    1 +
 include/linux/mmzone.h |    3 ++-
 kernel/bounds.c        |    1 +
 3 files changed, 4 insertions(+), 1 deletion(-)
Index: linux-2.6/include/linux/mmzone.h
===================================================================
--- linux-2.6.orig/include/linux/mmzone.h	2008-02-29 18:18:19.000000000 -0800
+++ linux-2.6/include/linux/mmzone.h	2008-02-29 18:20:30.000000000 -0800
@@ -17,6 +17,7 @@
 #include <linux/pageblock-flags.h>
 #include <asm/atomic.h>
 #include <asm/page.h>
+#include <linux/bounds.h>
 
 /* Free memory management - zoned buddy allocator.  */
 #ifndef CONFIG_FORCE_MAX_ZONEORDER
@@ -177,7 +178,7 @@ enum zone_type {
 	ZONE_HIGHMEM,
 #endif
 	ZONE_MOVABLE,
-	MAX_NR_ZONES
+	__MAX_NR_ZONES
 };
 
 /*
Index: linux-2.6/kernel/bounds.c
===================================================================
--- linux-2.6.orig/kernel/bounds.c	2008-02-29 18:18:19.000000000 -0800
+++ linux-2.6/kernel/bounds.c	2008-02-29 18:18:53.000000000 -0800
@@ -14,4 +14,5 @@
 void foo(void)
 {
 	DEFINE(NR_PAGEFLAGS, __NR_PAGEFLAGS);
+	DEFINE(MAX_NR_ZONES, __MAX_NR_ZONES);
 }
Index: linux-2.6/include/linux/bounds.h
===================================================================
--- linux-2.6.orig/include/linux/bounds.h	2008-02-29 18:18:19.000000000 -0800
+++ linux-2.6/include/linux/bounds.h	2008-02-29 18:20:32.000000000 -0800
@@ -8,5 +8,6 @@
  */
 
 #define NR_PAGEFLAGS 32 /* __NR_PAGEFLAGS	# */
+#define MAX_NR_ZONES 4 /* __MAX_NR_ZONES	# */
 
 #endif
-- 