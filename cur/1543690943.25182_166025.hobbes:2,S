Date: Sun, 14 Sep 2003 21:48:55 +0200
From: Manfred Spraul <>
Subject: Re: [PATCH] add likely around access_ok for uaccess
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/9/14/109

Manfred Spraul wrote:
> Andrew Morton wrote:
>
>> +#define access_ok(type,addr,size) (likely(__range_ok(addr,size) == 0))
>> 
>>
> I don't know. What happens if access_ok is used outside of an if 
> statement?
> One example is
>
> int get_compat_timespec(struct timespec *ts, struct compat_timespec *cts)
> {
>        return (verify_area(VERIFY_READ, cts, sizeof(*cts)) ||
>                        __get_user(ts->tv_sec, &cts->tv_sec) ||
>                        __get_user(ts->tv_nsec, &cts->tv_nsec)) ? 
> -EFAULT : 0;
> }
Duh. Reading is difficult.
The functions with access_ok are get_compat_itimerval and 
put_compat_itimerval.
--
    Manfred
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/