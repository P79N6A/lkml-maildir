Date: Sun, 9 Jan 2000 18:02:43 +0000 (GMT)
From: Andre Cornelis van Veen <>
Subject: loop on partion check prevents linux-2.2.14 from booting with IDE-Zipdrive
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/1/9/66

Hallo
This bugreport ist structured as described in REPORTING-BUGS
[1] loop on partion check prevents booting linux-2.2.14 with IDE-Zipdrive
[2] On my system a IDE-Zipdrive is installed as device hdc. Up to
    kernel 2.2.13 i was able to boot linux without a zipdisc
    inserted into the Zipdrive an got just one warning like
    'hdc: lost interrupt' while the partition check was performed
    and before the system continioued to boot. 
    This changed with linux-2.2.14 as this warning seens to loop
    and prevents the system from booting.
    If a Zipdisc is inserted into the drive there seems to be no
    problem, as the normal partition information is printed and
    the system boots up normally.
[3] partition check; ide-driver; IDE-Zipdrive
[4] the offending linux version: Linux version 2.2.14 (root@joy.veenet.de) (gcc version 2.95.2 19991024 (release)) #1 Sun Jan 9 13:44:05 CET 2000
[5] parts from a bootlog with Zipdisc inserted (sucessful boot),
    '<= XXX' marks the postion where there infinite loop starts
    for the unsucessful boot without Zipdisc inserted.
Inspecting /System.map
Loaded 7467 symbols from /System.map.
Symbols match kernel version 2.2.14.
No module symbols loaded.
klogd 1.3-3, log source = /proc/kmsg started.
<4>Linux version 2.2.14 (root@joy.veenet.de) (gcc version 2.95.2 19991024 (release)) #1 Sun Jan 9 13:44:05 CET 2000
<4>Detected 451026999 Hz processor.
<4>ide_setup: hdd=cdrom
<4>Console: colour VGA+ 80x25
<4>Calibrating delay loop... 448.92 BogoMIPS
<4>Memory: 192808k/196608k available (1172k kernel code, 412k reserved, 2172k data, 44k init)
<4>Dentry hash table entries: 32768 (order 6, 256k)
<4>Buffer cache hash table entries: 262144 (order 8, 1024k)
<4>Page cache hash table entries: 65536 (order 6, 256k)
<5>VFS: Diskquotas version dquot_6.4.0 initialized
<4>CPU: Intel Pentium III (Katmai) stepping 02
<6>Checking 386/387 coupling... OK, FPU using exception 16 error reporting.
<6>Checking 'hlt' instruction... OK.
<4>POSIX conformance testing by UNIFIX
<4>mtrr: v1.35a (19990819) Richard Gooch (rgooch@atnf.csiro.au)
<4>PCI: PCI BIOS revision 2.10 entry at 0xfb220
<4>PCI: Using configuration type 1
<4>PCI: Probing PCI hardware
.....
<4>PIIX4: IDE controller on PCI bus 00 dev 39
<4>PIIX4: not 100% native mode: will probe irqs later
<4>    ide0: BM-DMA at 0xf000-0xf007, BIOS settings: hda:DMA, hdb:DMA
<4>    ide1: BM-DMA at 0xf008-0xf00f, BIOS settings: hdc:pio, hdd:DMA
<4>hda: IBM-DTTA-351680, ATA DISK drive
<4>hdb: IBM-DHEA-38451, ATA DISK drive
<4>hdc: IOMEGA ZIP 100, ATA DISK drive
<4>hdd: DC5-E6, ATAPI CDROM drive
<4>ide0 at 0x1f0-0x1f7,0x3f6 on irq 14
<4>ide1 at 0x170-0x177,0x376 on irq 15
<6>hda: IBM-DTTA-351680, 16124MB w/462kB Cache, CHS=2055/255/63, UDMA
<6>hdb: IBM-DHEA-38451, 8063MB w/472kB Cache, CHS=1027/255/63, UDMA
<6>hdc: IOMEGA ZIP 100, 96MB w/16kB Cache, CHS=512/12/32
<4>hdd: ATAPI 6X CD-ROM drive, 128kB Cache
<6>Uniform CDROM driver Revision: 2.56
.....
<4>Partition check:
<4> hda: hda1 hda2 hda3 hda4 < hda5 hda6 hda7 hda8 >
<4> hdb: hdb1 hdb2 hdb3 hdb4
<4> hdc: hdc4                         <= XXX: 'hdc: lost interrupt' is
                                              continiously outputed
<4>VFS: Mounted root (ext2 filesystem).
<4>Freeing unused kernel memory: 44k freed
<6>Adding Swap: 120480k swap-space (priority -1)
[6] The problem gets triggered when booting on my system with IDE-Zipdrive
    and no Zipdisc inserted (no partion table is found for this drive).
[7.2] Processor-Information:
processor	: 0
vendor_id	: GenuineIntel
cpu family	: 6
model		: 7
model name	: Pentium III (Katmai)
stepping	: 2
cpu MHz		: 451.026999
cache size	: 512 KB
fdiv_bug	: no
hlt_bug		: no
sep_bug		: no
f00f_bug	: no
coma_bug	: no
fpu		: yes
fpu_exception	: yes
cpuid level	: 2
wp		: yes
flags		: fpu vme de pse tsc msr pae mce cx8 sep mtrr pge mca cmov pat pse36 mmx fxsr xmm
bogomips	: 448.92
[7.5] output of /proc/ide/drivers
ide-cdrom version 4.54
ide-disk version 1.08
I hope the suppied information is detailed enough to find a fix for the
problem. For further questions I may be contacted via e-mail:
Andre.C.VanVeen@ruhr-uni-bochum.de
Best regards,
                Andre van Veen
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/