Date: Tue, 18 Jan 2000 15:54:24 -0600
From: Bill Wendling <>
Subject: Re: [Patch] Polling on more than 16000 file descriptors
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/1/19/24

Also sprach Andi Kleen:
} > And, btw, since now the number of users of vmalloc() in
} > performance-critical paths is growing, perhaps it is worth to come back to
} > the patch I submitted for review ages ago that adds vmlist_lock rw
} > spinlock and makes vmalloc() SMP-safe?
} 
} I think vmalloc in every poll is totally out of question. The patch
} needs to be fixed to either allocate only once per process (ugly, eats
} lots of memory, needs infrastructure to free on memory pressure), or better
} rework the poll interface to support a linked list of poll blocks.
} 
Maybe if vmalloc was the "thing to use" for allocations and have it call
kmalloc/gfp whenever necessary? Could be a big hassle, though.
Anyway, I tried implementing the linked-list version of the poll(). It
was wrought with problems. The code looked fine (I submitted an alternate
patch about it awhile ago...It should be in the archives), but the
poll()ing would simply poll over and over in some cases...
*shrug*
-- 
|| Bill Wendling			wendling@ganymede.isdn.uiuc.edu
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/