Date: Mon, 06 Nov 2006 01:36:09 +0100
From: Rene Herman <>
Subject: Re: New filesystem for Linux
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/11/5/183

H. Peter Anvin wrote:
> Rene Herman wrote:
>> For primary (and extended) partitions, yes. I haven't used any version 
>> of DOS that has ever objected to arbitrarily aligned partitions in the 
>> MBR (and I do align them arbitrarily since I always make my partitions 
>> some exact size and start the next partition in the next sector).
>>
>> Different though for logical partitions inside an extended. As late as 
>> Windows 98, DOS would object to non-aligned logicals, at the very 
>> least with some settings for the BIOS use/don't use LBA or "Large" 
>> settings.
>>
>> Linux doesn't care; I've used type 0x85 instead of 0x05 for my 
>> extended partitions dus to that for years. DOS just ignores that one...
>>
> 
> DOS, or FDISK?
DOS. It was something like DOS accepting the non cylinder-aligned 
logical but then proceding as if it were cylinder aligned anyway, 
rounding the starting sector down. This obviously is not good.
Also see the "--DOS-extended" comment in the sfdisk man page. Since I do 
remember differences when using different "Large" CHSs in the BIOS, for 
all I remember I was experiencing that problem when I ran into it. If 
so, the DOS underlying Windows 98 is among the "some versions".
In any case, yes, non-cylinder aligned logical partitions (for whichever 
defintion of "aligned" fits DOS' idea of the geometry) really do cause 
trouble.
The DR-DOS (-> Novel DOS -> Caldera OpenDOS) warning in that manpage 
seems to imply that cylinder alignment was a good idea for all 
partitions seen by it, and I do remember it being a pain in that regard 
as well. Guess it's pretty safe to not care about DR-DOS anymore though.
Rene.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/