Date: Thu, 27 Feb 2003 16:53:18 +0200
From: Muli Ben-Yehuda <>
Subject: [PATCH] AD1848 OSS driver build fix for 2.5.63-bk (bug #289)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/2/27/89

This patch fixes bugzilla bug #289,
http://bugme.osdl.org/show_bug.cgi?id=289,
 PNP API breakage in the
ad1848 sound driver. 
Tested and works fine. Please apply. 
diff -Nru a/sound/oss/ad1848.c b/sound/oss/ad1848.c
--- a/sound/oss/ad1848.c	Thu Feb 27 10:32:05 2003
+++ b/sound/oss/ad1848.c	Thu Feb 27 10:32:05 2003
@@ -2987,7 +2987,7 @@
 	if (err < 0)
 		return(NULL);
 
-	if((err = pnp_activate_dev(dev,NULL)) < 0) {
+	if((err = pnp_activate_dev(dev)) < 0) {
 		printk(KERN_ERR "ad1848: %s %s config failed (out of resources?)[%d]\n", devname, resname, err);
 
 		pnp_device_detach(dev);
@@ -3024,7 +3024,7 @@
 
 static int __init ad1848_isapnp_init(struct address_info *hw_config, struct pnp_card *bus, int slot)
 {
-	char *busname = bus->name[0] ? bus->name : ad1848_isapnp_list[slot].name;
+	char *busname = bus->dev.name[0] ? bus->dev.name : ad1848_isapnp_list[slot].name;
 
 	/* Initialize this baby. */
 
-- 
Muli Ben-Yehuda
http://www.mulix.org
[unhandled content-type:application/pgp-signature]