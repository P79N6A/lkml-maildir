Date: Tue, 2 Sep 2003 18:42:36 +0100
From: Christoph Hellwig <>
Subject: Re: 2.6-test4 Traditional pty and devfs
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/9/2/193

On Tue, Sep 02, 2003 at 10:21:41AM -0700, Andrew Morton wrote:
> > > Both patches suffer from a problem. The slave is always only RW
> > > root. 2.4 sets the owner of the slave to that of the process opening
> > > the master. I cannot see a way to make this happen with 2.6-test. 
> > 
> > Well, that's why we have UNIX98 ptys.  My preferred fix for this
> > issue would be to just axe traditional ptys, although this would probably
> > make it us incompatible with libc5.
> 
> Unless we made an explicit decision to kill off old-style ptys (and we did
> not do that), they should continue to work as in 2.4, yes?
They work as they do in 2.4 and 2.6 (and any previous kernel) without
devfs, remember the pt_chown pain?
There's no point in emulating half of the UNIX98 pty semantics
in devfs when we have UNIX98 ptys that do it right anyway.
> IOW: we broke it.  Have you any theory as to which change caused this?
That's the magic use uid/gid of the process calling devfs_Register flag
I killed.  With a big HEADSUP and explanation on lkml..
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/
On Tue, Sep 02, 2003 at 10:21:41AM -0700, Andrew Morton wrote:
> > > Both patches suffer from a problem. The slave is always only RW
> > > root. 2.4 sets the owner of the slave to that of the process opening
> > > the master. I cannot see a way to make this happen with 2.6-test. 
> > 
> > Well, that's why we have UNIX98 ptys.  My preferred fix for this
> > issue would be to just axe traditional ptys, although this would probably
> > make it us incompatible with libc5.
> 
> Unless we made an explicit decision to kill off old-style ptys (and we did
> not do that), they should continue to work as in 2.4, yes?
They work as they do in 2.4 and 2.6 (and any previous kernel) without
devfs, remember the pt_chown pain?
There's no point in emulating half of the UNIX98 pty semantics
in devfs when we have UNIX98 ptys that do it right anyway.
> IOW: we broke it.  Have you any theory as to which change caused this?
That's the magic use uid/gid of the process calling devfs_Register flag
I killed.  With a big HEADSUP and explanation on lkml..
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/