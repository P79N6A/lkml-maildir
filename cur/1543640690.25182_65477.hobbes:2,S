Date: Wed, 21 Aug 2002 14:16:42 -0400
From: Andrew Rodland <>
Subject: Re: problem with modules (modutils) and 2.5.31 kernel
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/8/21/119

On Wed, 21 Aug 2002 14:50:17 +1000
Keith Owens <kaos@ocs.com.au> wrote:
> On Tue, 20 Aug 2002 20:25:19 -0600, 
> moret@cs.unm.edu wrote:
> >I searched for, but could not find references to, a problem
> >I have with 2.5.31 and modutils.
> >  insmod, depmod, update-modules all fail with the message:
> >
> >=>   kernel: QM_SYMBOLS: Bad address
> 
> Disable CONFIG_PREEMPT and rebuild the kernel.
or, as per a previous thread on the same issue, change line 181 of
arch/i386/mm/fault.c from:
if (preempt_count() || !mm)
to:
if (in_interrupt() || !mm)
and rebuild.
Sorry, no time to fool around with diff right now. Hope it was helpful.
--hobbs
[unhandled content-type:application/pgp-signature]