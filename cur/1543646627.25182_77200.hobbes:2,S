Date: Sun, 6 Oct 2002 21:43:29 +0200
From: Marc-Christian Petersen <>
Subject: Re: Is it a bug ?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/10/6/185

Hi Rebert,
> I have try many times to compile a kernel 2.4.18 and 2.4.19 for my k6-2 (it
> is a desktop computer i don't need pcmia as a module or compiled in the
> kernel so i haven't stick it) but every time there si a bug when i make
> "make modules_install" I can see this bug !!!  Can you help me please ? I
> think it's a bug, what do you think about this ?
> depmod: *** Unresolved symbols in /lib/modules/2.4.18/kernel/fs/binfmt_elf.o
> depmod:         empty_zero_page
> depmod:         get_user_pages
> make: *** [_modinst_post] Error 1
for 2.4.18 this is true, but I think it cannot be true for 2.4.19. The missing 
things were added in 2.4.19-pre1. Patch attached for 2.4.18.
-- 
Kind regards
        Marc-Christian Petersen
http://sourceforge.net/projects/wolk
PGP/GnuPG Key: 1024D/569DE2E3DB441A16
Fingerprint: 3469 0CF8 CA7E 0042 7824 080A 569D E2E3 DB44 1A16
Key available at www.keyserver.net. Encrypted e-mail preferred.
diff -Naur -X /home/marcelo/lib/dontdiff tmp/linux/arch/i386/kernel/i386_ksyms.c linux/arch/i386/kernel/i386_ksyms.c
--- tmp/linux/arch/i386/kernel/i386_ksyms.c	Mon Feb 25 20:28:49 2002
+++ linux/arch/i386/kernel/i386_ksyms.c	Mon Feb 25 20:04:47 2002
@@ -73,6 +73,7 @@
 EXPORT_SYMBOL(get_cmos_time);
 EXPORT_SYMBOL(apm_info);
 EXPORT_SYMBOL(gdt);
+EXPORT_SYMBOL(empty_zero_page);
 
 #ifdef CONFIG_DEBUG_IOVIRT
 EXPORT_SYMBOL(__io_virt_debug);
diff -Naur -X /home/marcelo/lib/dontdiff tmp/linux/mm/memory.c linux/mm/memory.c
--- tmp/linux/mm/memory.c	Mon Feb 25 20:28:51 2002
+++ linux/mm/memory.c	Mon Feb 25 20:04:48 2002
@@ -44,6 +44,7 @@
 #include <linux/iobuf.h>
 #include <linux/highmem.h>
 #include <linux/pagemap.h>
+#include <linux/module.h>
 
 #include <asm/pgalloc.h>
 #include <asm/uaccess.h>
@@ -523,6 +523,8 @@
 	i = -EFAULT;
 	goto out;
 }
+
+EXPORT_SYMBOL(get_user_pages);
 
 /*
  * Force in an entire range of pages from the current process's user VA,