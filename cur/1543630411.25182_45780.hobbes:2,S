Date: Mon, 13 May 2002 15:28:56 -0700 (PDT)
From: dean gaudet <>
Subject: downgrade ata udma mode at boot time?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/5/13/213

kernel: linux-2.4.19-pre7-ac4
ide hardware: promise 20268 ... a pair of ultra100/tx2
disks: 4x maxtor 6L080J4 80GB D740X
so far in my searching i've only found the hdparm -X switch for
downgrading the ata udma mode (to give me temporary respite from 80-pin
cables which are too long). is there any way to do this on the kernel boot
line?
the problem i'm having is that md is kicking in early enough doing a
parity reconstruct, and udma100 is more demanding than my cables can
satisfy.  the case this hardware is in won't accomodate anything less than
24"  cables... long term i'll be replacing the case and cables, i was just
looking for a temporary workaround.
if i try "hdparm -X66 /dev/hd[egik]" while the parity reconstruct is in
process, i get various results.  rarely it succeeds on all disks.
sometimes it succeeds on 3 of 4 disks, but fails on one.  sometimes it
locks up after trying to set /dev/hde.  (it may not actually be completely
locked up, but it's not responding to the console.)
as far as i can tell the system needs to be completely inactive for the
hdparm to succeed, and there's no way for me to guarantee this at boot
time because md will start reconstructing right away.
thanks
-dean
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/