Date: Wed, 23 May 2001 10:13:32 +0100
From: "Stephen C. Tweedie" <>
Subject: Re: Why side-effects on open(2) are evil. (was Re: [RFD w/info-PATCH]device arguments from lookup)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/5/23/29

Hi,
On Tue, May 22, 2001 at 01:16:42PM -0600, Peter J. Braam wrote:
> File system journal recovery can corrupt a snapshot, because it copies
> data that needs to be preserved in a snapshot.
Journal recovery may move data from the journal to other locations on
the device, yes, but that doesn't change the logical contents of the
filesystem.  I don't see how that results in "corruption": the
snapshot is (or at least, ought to be!) fully independent of the
original version of the data, so such recovery should only be taking
the snapshot from one consistent state to a different but equivalent
state.
> During journal replay such
> data may be copied again, but the source can have new data already.
Only if you are recovering a live volume, surely?  And that is
*guaranteed* to cause problems.  
--Stephen
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/