Date: Wed, 23 Jan 2008 08:04:38 -0800
From: Arjan van de Ven <>
Subject: Re: [patch] x86: test case for the RODATA config option
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/23/202

On Wed, 23 Jan 2008 16:27:28 +0100
Andi Kleen <andi@firstfloor.org> wrote:
> 
> > What it does is check if the rodata marking was succesful.
> 
> The only difference I see is that you check that the TLB flush works,
> but for that it looks awfully incomplete.
you think one level too small.
It tests if mark_rodata_ro() operated correctly.
Yes internally that uses c-p-a, but there's more code there, including a set of boundary conditions etc.
And for the page table to work, cr0 needs to be set up correctly etc etc etc.
> Other than it is identical [modulo the kernel mapping bit on 64bit]--
it's a test of mark_rodata_ro(), not of c-p-a. Not the same thing.
> What I meant using the more extensive test in pageattr-test.c
> to test a few changes in the 64bit kernel mapping too, not moving your
> code. I don't think moving your code makes sense. Sorry for being
> unclear.
then I just don't get your comment at all; sorry.
-- 
If you want to reach me at my work email, use arjan@linux.intel.com
For development, discussion and tips for power savings, 
visit 
http://www.lesswatts.org