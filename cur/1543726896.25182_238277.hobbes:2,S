Date: Tue, 3 Aug 2004 02:08:05 +0200
From: Andi Kleen <>
Subject: Re: [PATCH] subset zonelists and big numa friendly mempolicy MPOL_MBIND
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/8/2/267

On Mon, 2 Aug 2004 16:35:06 -0700 (PDT)
Paul Jackson <pj@sgi.com> wrote:
> I hope that this patch will end up in *-mm soon.
[...]
That's a *lot* of complexity and overhead you add. I hope it is really 
worth it. I suppose you need this for your cpu memset stuff, right? 
On a large machine it will be quite cache blowing too.
What's the worst case memory usage of all this?
And do you have any benchmarks that show that it is worth it?
My first reaction that if you really want to do that, just pass
the policy node bitmap to alloc_pages and try_to_free_pages
and use the normal per node zone list with the bitmap as filter. 
This way you would get the same effect with a lot less complexity
and only slightly more overhead in the fallback case.
For the simple libnuma it was still good enough to construct the 
zones without core changes, but for such complex things it is better
to attack the core of things.
-Andi
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/