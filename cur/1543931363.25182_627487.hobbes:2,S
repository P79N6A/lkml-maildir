Date: Thu, 13 Dec 2007 08:51:02 +0000
From: "Jan Beulich" <>
Subject: [PATCH] i386: hard_{en,dis}able_TSC can be static
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/12/13/130

Signed-off-by: Jan Beulich <jbeulich@novell.com>
 arch/x86/kernel/process_32.c   |    4 ++--
 include/asm-x86/processor_32.h |    2 --
 2 files changed, 2 insertions(+), 4 deletions(-)
--- linux-2.6.24-rc5/arch/x86/kernel/process_32.c	2007-12-12 11:28:18.000000000 +0100
+++ 2.6.24-rc5-i386-seccomp-tsc-static/arch/x86/kernel/process_32.c	2007-12-04 16:09:33.000000000 +0100
@@ -573,7 +573,7 @@ int dump_task_regs(struct task_struct *t
 }
 
 #ifdef CONFIG_SECCOMP
-void hard_disable_TSC(void)
+static void hard_disable_TSC(void)
 {
 	write_cr4(read_cr4() | X86_CR4_TSD);
 }
@@ -588,7 +588,7 @@ void disable_TSC(void)
 		hard_disable_TSC();
 	preempt_enable();
 }
-void hard_enable_TSC(void)
+static void hard_enable_TSC(void)
 {
 	write_cr4(read_cr4() & ~X86_CR4_TSD);
 }
--- linux-2.6.24-rc5/include/asm-x86/processor_32.h	2007-12-12 11:29:30.000000000 +0100
+++ 2.6.24-rc5-i386-seccomp-tsc-static/include/asm-x86/processor_32.h	2007-12-04 16:09:33.000000000 +0100
@@ -222,9 +222,7 @@ extern int bootloader_type;
 
 #define HAVE_ARCH_PICK_MMAP_LAYOUT
 
-extern void hard_disable_TSC(void);
 extern void disable_TSC(void);
-extern void hard_enable_TSC(void);
 
 /*
  * Size of io_bitmap.