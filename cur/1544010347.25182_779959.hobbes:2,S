Date: Fri, 12 Dec 2008 11:35:32 -0500
From: Rik van Riel <>
Subject: Re: [PATCH] block: Fix LSF default inconsistency
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/12/12/203

Hugh Dickins wrote:
> On Sat, 13 Dec 2008, KOSAKI Motohiro wrote:
> 
>> To move mlocked file cache page to unevictable list is useful although
>> swapless embedded device.
>> 
>
> Yes, I don't understand why Rik suggested CONFIG_SWAP for it either.
On swapless systems (with CONFIG_SWAP=n), we never scan
the anon lists, so we do not need to split out the mlocked pages from
the anon pages.
On a system with swap, we want to split out the mlocked pages
so that scan balancing always works right.  So whenever
CONFIG_SWAP is on, we want CONFIG_UNEVICTABLE_LRU
to be on as well.
That means we can replace CONFIG_UNEVICTABLE_LRU
with CONFIG_SWAP throughout the code, and get a kernel
with the desired behaviour either way.