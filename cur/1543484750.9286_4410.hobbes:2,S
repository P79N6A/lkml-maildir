Date: Sat, 6 Feb 1999 17:32:24 -0800 (PST)
From: Linus Torvalds <>
Subject: Re: Linux-2.2.2-pre2..
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/2/6/112

Uhhuh, just for fun, please apply this patch and tell me whether the
problems go away or get worse.. In any case, it should make it a lot more
repeatable (either repeatably solid, or repeatably crashing ;)
		Linus
----
--- v2.2.1/linux/drivers/char/pty.c	Mon Oct  5 13:13:39 1998
+++ linux/drivers/char/pty.c	Sat Feb  6 17:28:37 1999
@@ -84,7 +84,6 @@
 	wake_up_interruptible(&tty->link->write_wait);
 	set_bit(TTY_OTHER_CLOSED, &tty->link->flags);
 	if (tty->driver.subtype == PTY_TYPE_MASTER) {
-		tty_hangup(tty->link);
 		set_bit(TTY_OTHER_CLOSED, &tty->flags);
 #ifdef CONFIG_UNIX98_PTYS
 		{
@@ -95,6 +94,7 @@
 			}
 		}
 #endif
+		tty_vhangup(tty->link);
 	}
 }
 
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/