Date: Thu, 6 May 1999 14:00:59 -0400 (EDT)
From: Brad Burdick <>
Subject: help with recurring kswapd deaths (zombie)?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/5/6/198

we have a server:
 dual intel PII 400Mhz
 512MB RAM
 BusLogic BT-958 scsi
running:
 kernel 2.2.5 w/ raid0145-19990309 patch.
 debian 2.1r2
 dump 0.4b4-13
the problem:
We are having problems with dump causing a panic with kswapd.  This is a
repeatable condition.  With a raid0 device configured and mounted, but unused
beyond mounting, at some point during the dump kswapd generates the below
Oops and becomes a zombie process.  System may remain up for a brief time
after this but will hang if not rebooted quickly.  The error seems dependent
on the amount of data being backed up by dump as well.  I.e., if we do not
do a full dump of all filesystems, the dump completes normally.
This error does NOT occur with the 2.0.36 kernel or without SMP support AND
raid0145 support (using the alpha raid patch and raidtools 0.90 from 19990309)
and a mounted (but idle) raid filesystem.  This error does occur with 2.2.3,
2.2.5 and 2.2.6.  Have not yet tried 2.2.7.
We have a second server with identical hardware/software configuration that
is working fine, which leads me to believe we have a hardware problem most
likely, but....
At this point, i am trying to identify whether this is a software (kernel) or
hardware (RAM or swap disk partition) problem.  I'd be happy to provide more
specific information if someone can tell me what would be useful.
memory[56]# uname -a
Linux memory 2.2.5 #6 SMP Fri Apr 30 20:34:30 PDT 1999 i686 unknown
memory[57]# 
memory[57]# cat /proc/swaps
Filename                        Type            Size    Used    Priority
/dev/sda7                       partition       128484  0       1
/dev/sdb1                       partition       265036  0       1
/dev/sdc1                       partition       265036  0       1
memory[58]# 
memory[58]# cat /proc/mdstat
Personalities : [linear] [raid0] [raid1] [raid5] 
read_ahead 1024 sectors
md0 : active raid0 sdj1[5] sdi1[4] sdh1[3] sdg1[2] sdf1[1] sde1[0] 52531968 blocks 32k chunks
unused devices: <none>
memory[59]# 
memory[59]# df
Filesystem         1024-blocks  Used Available Capacity Mounted on
/dev/sda5             792800  351834   400002     47%   /
/dev/sda1              23300    2185    19912     10%   /boot
/dev/sda6            3354255  378386  2802369     12%   /opt
/dev/sdb2            8311395   61916  8249479      1%   /logs
/dev/sdc2            8311395 1065569  7245826     13%   /web
memory[60]# 
May  3 10:38:05 memory kernel: Oops: 0002 
May  3 10:38:05 memory kernel: CPU:    1 
May  3 10:38:05 memory kernel: EIP:    0010:[kmem_cache_free+379/412] 
May  3 10:38:05 memory kernel: EFLAGS: 00010282 
May  3 10:38:05 memory kernel: eax: 0000003d   ebx: c07db740   ecx: c000a000   edx: c07de000 
May  3 10:38:05 memory kernel: esi: ca3bec20   edi: 00000282   ebp: 78827289   esp: c000bf6c 
May  3 10:38:05 memory kernel: ds: 0018   es: 0018   ss: 0018 
May  3 10:38:05 memory kernel: Process kswapd (pid: 4, process nr: 5, stackpage=c000b000) 
May  3 10:38:05 memory kernel: Stack: ca3bec20 c042fb50 c07de000 ca3bec7c c01121a7 c01290b9 c07db740 ca3bec20  
May  3 10:38:05 memory kernel:        ca3bec20 ca3bec20 c0129b67 ca3bec20 ca3bec20 c042fb50 000007ff 00000030  
May  3 10:38:05 memory kernel:        c000a000 c011e1da c042fb50 00000010 00000006 c0123487 00000006 00000030  
May  3 10:38:05 memory kernel: Call Trace: [schedule+811/928] [put_unused_buffer_head+33/76] [try_to_free_buffers+79/136] [shrink_mmap+222/304] [do_try_to_free_pages+63/172] [tvecs+5147/35276] [kswapd+87/224]  
May  3 10:38:05 memory kernel:        [get_options+0/116] [kernel_thread+35/48]  
May  3 10:38:05 memory kernel: Code: c7 05 00 00 00 00 00 00 00 00 5b 5e 5f 5d 83 c4 0c c3 8d 76  
May  3 18:04:50 memory kernel: Oops: 0002 
May  3 18:04:50 memory kernel: CPU:    1 
May  3 18:04:50 memory kernel: EIP:    0010:[kmem_cache_free+379/412] 
May  3 18:04:50 memory kernel: EFLAGS: 00010286 
May  3 18:04:50 memory kernel: eax: 0000003d   ebx: c07db740   ecx: c000a000   edx: c07de000 
May  3 18:04:50 memory kernel: esi: c8b82ea0   edi: 00000286   ebp: 0cc2201e   esp: c000bf6c 
May  3 18:04:50 memory kernel: ds: 0018   es: 0018   ss: 0018 
May  3 18:04:50 memory kernel: Process kswapd (pid: 4, process nr: 5, stackpage=c000b000) 
May  3 18:04:50 memory kernel: Stack: c8b82ea0 c0402808 c07de000 c8b82efc c01121a7 c01290b9 c07db740 c8b82ea0  
May  3 18:04:50 memory kernel:        c8b82ea0 c8b82ea0 c0129b67 c8b82ea0 c8b82ea0 c0402808 000007ff 00000030  
May  3 18:04:50 memory kernel:        c000a000 c011e1da c0402808 00000017 00000006 c0123487 00000006 00000030  
May  3 18:04:50 memory kernel: Call Trace: [schedule+811/928] [put_unused_buffer_head+33/76] [try_to_free_buffers+79/136] [shrink_mmap+222/304] [do_try_to_free_pages+63/172] [tvecs+5147/35276] [kswapd+87/224]  
May  3 18:04:50 memory kernel:        [get_options+0/116] [kernel_thread+35/48]  
May  3 18:04:50 memory kernel: Code: c7 05 00 00 00 00 00 00 00 00 5b 5e 5f 5d 83 c4 0c c3 8d 76  
-brad
-- 
Brad Burdick - UUcom Inc.
Email: bburdick@uucom.com | Voice: 703.461.1350 | Fax: 703.461.1360
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/