Date: Sun, 10 Feb 2002 17:00:52 +0200
From: Jussi Laako <>
Subject: Re: [PATCH] improving O(1)-J9 in heavily threaded situations
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/2/10/61

Ingo Molnar wrote:
> 
> there is one more thing in the -K2 patch that could cause your problems.
> In kernel/softirq.c, you'll find this line:
> //__initcall(spawn_ksoftirqd);
> please uncomment it - this was just a debugging thing that was left in 
> the patch accidentally. I've made a -K3 patch that has this fixed. Do you
> still see the audio problems?
I did this and also tried -K3. It didn't fix the problem.
I addded lost block count printing to the SCHED_FIFO server processes. Most
of the loss (about 75%) happens at lowest level soundcard server and rest in
distributor process. Usually it looses 1 block at time but occasionally
there is peak of about 18 lost blocks.
If I make the client process read larger blocks (> 4kB) from the distributor
process number of lost blocks at soundcard server raises significantly. I
can make it a bit smaller without increased loss, but of course it means
larger overhead and eventually more lost blocks if made something like 512
bytes. 4 kB is optimal block size as it's also internal block size used by
soundcard and distributor servers.
4 kB block size means 2.9 ms in time in this case.
 - Jussi Laako
-- 
PGP key fingerprint: 161D 6FED 6A92 39E2 EB5B  39DD A4DE 63EB C216 1E4B
Available at PGP keyservers
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/