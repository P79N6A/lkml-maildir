Date: Tue, 12 Sep 2000 10:33:27 +0200
From: octave klaba <>
Subject: Re: fun ?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/9/12/134

Hello,
> > > Could you please see where lilo is sleeping?
> > >
> > > You can do this with: ps xeo "command wchan" | grep lilo
> > >
> > > Note that System.map must be in the correct place.
well, it looks like we forgot to copy system.map. grr :/
# ps xeo "command wchan" | grep lilo
Warning: /boot/System.map has an incorrect kernel version.
Warning: /usr/src/linux/System.map has an incorrect kernel version.
/sbin/lilo LESSO 1237b9
grep lilo LESSOP 128b07
> Ooh, this seems familiar.  My configuration is very similar to the one
> mentioned above (with Adaptec controller, driver is AIC7xxx) and I have
> seem this problem of LILO hanging with RAID 0.90.  This was after the
> 'popper' got stuck in the R state as an unkillable process and 'kupdate'
> and 'kswapd' were stuck in the D state.  I originally ran 2.2.17 with
> stock RAID and the same thing happened with the 'popper' daemon there
> although I did not try LILO that time.
I have a server running 2.2.17 + raid-patches from
http://people.redhat.com/mingo/raid-patches/
with adaptec aic7xxx using qpopper. It works fine.
What we realized is when the RAM is not enought (2.2.17 too)
server uses swap and the process are going to be in D state. Probably
it is normal since read/write is slower on HD and it should be
normal to not be able to kill a process writing in memory ?
Anyway 
We tested this night a server on 2.2.17 (celeron/128ram/ide/intelpro) 
thought apache (70 req/sec / 6-7Mbs)
After 3-4h of work server swapped and all went down. 
dmesg gave:
VM: do_try_to_free_pages failed for httpd...
 10:15pm  up  4:39,  1 user,  load average: 124.72, 146.16, 119.71
296 processes: 286 sleeping, 9 running, 1 zombie, 0 stopped
CPU states: 17.7% user, 41.2% system,  0.0% nice, 41.0% idle
Mem:   128364K av,  126200K used,    2164K free,  205328K shrd,    3824K buff
Swap:  265032K av,   35556K used,  229476K free                   62088K cached
Octave
Amicalement,
oCtAvE 
"Peu importe ce qu'il y a de l'autre côté.
Tout ce qu'on laisse ici n'est qu'une histoire
qu'on se souviendra ou non."
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/