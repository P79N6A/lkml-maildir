Date: Thu, 17 Jan 2008 01:01:21 +0100
From: Jarek Poplawski <>
Subject: Re: [PATCH 7/7] driver-core : convert semaphore to mutex in struct class
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/16/414

On Wed, Jan 16, 2008 at 10:27:54AM -0500, Alan Stern wrote:
> On Wed, 16 Jan 2008, Dave Young wrote:
> 
> > The lockdep warining was posted in the below thread, actually, I have
> > built and run this patced kernel for several days, there's no more
> > warnings.
> > 
http://lkml.org/lkml/2008/1/3/2
> 
> Your meaning isn't clear.  Do you mean that your patch doesn't generate
> any lockdep warnings at all?  Or do you mean that it generates a single
> lockdep warning at boot time and then no more warnings afterward?
So it wasn't only my sleeping problem! This:
"One lockdep warning detected as following, thus use mutex_lock_nested
 with SINGLE_DEPTH_NESTING in class_device_add"
seems to say that mutex_lock_nested is used in the patch just to remove
this one possible warning...
Regards,
Jarek P.