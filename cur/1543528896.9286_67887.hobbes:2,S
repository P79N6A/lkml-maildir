Date: Tue, 7 Mar 2000 14:15:27 +0100
From:  almesber@lrc ...
Subject: Re: DMA mapping
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/3/7/57

David S. Miller wrote:
> The bus_to_virt() interface is just for lazy driver authors :-)
As long as it stays around, I'm happy ;-)
I depend on it in the ZeitNet driver. That card takes a lot of
pre-allocated buffers, fills them, and returns them in more or
less arbitrary order. What I get from the card is a pointer to
the buffer (in card address space).
Now I could of course introduce hashes and caches to implement
a fast lookup that makes this work with the new scheme, but the
problem is that the card is pretty obsolete (original company
(ZeitNet) got bought, new company (Cabletron) killed the product,
and it only works in Pentium 1 or older, so the assumptions made
by bus_to_virt are intact anyway), so anything beyond trivial
maintenance is likely to cause more damage then improvement.
Maybe a case for
#define OBSOLETE_HARDWARE
#include <linux/ugly-old-stuff.h>
;-)
- Werner
-- 
  _________________________________________________________________________
 / Werner Almesberger, ICA, EPFL, CH       werner.almesberger@ica.epfl.ch /
/_IN_N_032__Tel_+41_21_693_6621__Fax_+41_21_693_6610_____________________/
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/