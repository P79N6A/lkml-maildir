Date: Thu, 21 Jun 2007 22:57:36 +0200
From: Rudolf Marek <>
Subject: Re: [PATCH] hwmon/coretemp: Fix a broken error path - microcode update fix
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/6/21/347

Hello Soeren,
Sorry for the delay.
I'm ccing all lists maybe some other people are interested. There is known 
errata AE18 which prevents coretemp from working correctly on some mobile Core 
processors (family 6 model e). My driver refuses to load and now thanks to 
soeren will not crash ;) However what to do when no microcode update (no new 
BIOS) is available?
Soeren pointed at some T60, T60p BIOS update and luckily, there is a easy way 
how to extract the microcode update and even convert it into the .txt format as 
microcode update utility (
http://www.urbanmyth.org/microcode/
) expects.
Attached scripts generates the mcode.txt file which may be used by the update 
utility. Please can you give a try?
It seems that there is microcode update for CPUID 06E8 version 0x39 just as my 
driver is checking. So if your CPUID is 06e8 too you should get the coretemp 
driver working.
If so I will post a patch and document the script in documentation directory (or 
at least some general instructions how to do that)
Please tell me your stepping:
cat /proc/cpuinfo  | grep stepping
Thanks,
Rudolf
#!/bin/bash
#get the BIOS 
http://www-307.ibm.com/pc/support/site.wss/MIGR-63024.html
wget 
ftp://ftp.software.ibm.com/pc/pccbbs/mobiles/79uj20us.exe
cabextract -F "*PAT" 79uj20us.exe
 ls -1 *PAT | while read line; do echo "/* Microcode from $line */" ;  hexdump -e  ' 4/4 "0x%08X, " "\n"'  $line ;done >mcode.txt