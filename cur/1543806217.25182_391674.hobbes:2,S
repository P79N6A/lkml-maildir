Date: Mon, 30 Jan 2006 14:15:31 -0700
From: (Eric W. Biederman)
Subject: Re: [PATCH 4/5] vt: Update spawnpid to use a task_ref.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/1/30/301

Pavel Machek <pavel@ucw.cz> writes:
> Hi!
>
>> >> 7ed8301463a49ad03f8c9de2bbf8c41a5d9843ea
>> >> diff --git a/drivers/char/keyboard.c b/drivers/char/keyboard.c
>> >> index 8b603b2..4e1f2e0 100644
>> >> --- a/drivers/char/keyboard.c
>> >> +++ b/drivers/char/keyboard.c
>> >> @@ -109,7 +109,8 @@ struct kbd_struct kbd_table[MAX_NR_CONSO
>> >>  static struct kbd_struct *kbd = kbd_table;
>> >>  static struct kbd_struct kbd0;
>> >> 
>> >> -int spawnpid, spawnsig;
>> >> +TASK_REF(spawnpid);
>> >
>> > Could we get some nicer syntax of declaration? This does not look like
>> > declaration, and looks ugly to my eyes.
>> 
>> Any suggestions?
>> 
>> Does 
>> struct task_ref *spawnpid = &init_tref;
>
> Looks must better...
The challenge for me is that I make assumptions that a struct task_ref *
always points to something valid.
Maybe it is sufficient to spell that out in comments.  Having a helper
function though feels like it encourages it even more.  I guess
the code oopsing if it is a NULL pointer helps too.
Eric
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/