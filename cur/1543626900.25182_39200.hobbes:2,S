Date: Mon, 8 Apr 2002 14:38:04 +0200 (MEST)
From: (Rogier Wolff)
Subject: Re: faster boots?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/4/8/69

Helge Hafting wrote:
> Itai Nahshon wrote:
> > 
> > On Sunday 07 April 2002 17:42 pm, Pavel Machek wrote:
> > > Hi!
> > >
> > > > I'm curios, how much work can you accomplish on your laptop
> > > > without any disk access (but you still need to save files - keeping
> > > > them in buffers until it's time to actually write them).
> > >
> > > Debugging session (emacs/gcc/gdb) for half an hour with disks stopped is
> > > easy to accomplish.
> > >                                                               Pavel
> > 
> > My suggestion was: there should _never_ be dirty blocks for disks that
> > are not spinning. 
> 
> Why not?  Are you afraid that the spun-down disk won't
> start the next time it is needed?
I think he is. The problem is: then it's almost always "too late"
anyway: What are you going to do with a system that suddenly doesn't
have a disk anymore? 
Suppose you enforce that, and first try to spin up the disk before
allowing teh write to continue. Suppose that the spin up fails: 
	vi: EIO writing source.c
Now to recover from this situation you may want to writ the source to 
a floppy then. So in another VC you type:
	mount /dev/fd0 /mnt/floppy
	IO error reading "mount". 
Remember the main disk couldn't be spun up....
This is almost no worse than the write going into the buffer cache,
and the appliction not knowing something went wrong...
			Roger. 
-- 
** R.E.Wolff@BitWizard.nl ** 
http://www.BitWizard.nl/
 ** +31-15-2137555 **
*-- BitWizard writes Linux device drivers for any device you may have! --*
* There are old pilots, and there are bold pilots. 
* There are also old, bald pilots. 
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/