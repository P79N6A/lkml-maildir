Date: Sat, 15 Jul 2006 14:29:32 +0300
From: Al Boldi <>
Subject: Re: [PATCH] x86: Don't randomize stack unless current->personality permits it
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/7/15/37

Arjan van de Ven wrote:
> > BTW, why does randomize_stack_top() mod against (8192*1024) instead of
> > (8192) like arch_align_stack()?
>
>  because it wants to randomize for 8Mb, unlike arch_align_stack which
> wants to randomize the last 8Kb within this 8Mb ;)
Randomizing twice?
Anyway, I tried different combinations of turning off randomization in both 
functions and got mixed results, so it looks like there is some interaction 
here.
Trying different compiler versions and switches also show different results.
Calling these slowdowns blips is really an understatement, as there are cases 
which lock into 800% hits. i.e: processes that, when repeatedly called, lock 
into a continuous 8x slowdown on i686P4.
There is even a case where a mere rename or running through an extra shell 
causes a slowdown.  And that's with randomization turned off.
2.4.31 doesn't show these slowdowns.
What is 2.6 doing?
Thanks!
--
Al
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/