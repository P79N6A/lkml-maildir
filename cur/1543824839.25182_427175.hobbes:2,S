Date: Fri, 26 May 2006 11:35:36 +0200
From: Andi Kleen <>
Subject: Re: [discuss] Re: [PATCH 2/4] x86-64: Calgary IOMMU - move valid_dma_direction into the callers
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/5/26/90

> > On the other hand if the problem of passing wrong parameters here
> > isn't common I would be ok with dropping them.
> 
> As the author noted, it was only used in early platform bring-up.  And 
> simply reviewing the patch... it is clear that screwing up the 
> parameters would cause massive, noticeable problems immediately -- such 
> as on EM64T with swiotlb.
Well the point is that even if you don't run on swiotlb
(which most people even on EM64T don't use because they don't have more than
3GB of RAM) you won't screw them up.
On the other hand correct IOMMU operation needs much more than passing
these parameters so only checking for this might not be very useful.
BTW we've had these checks forever - Jon just moved them to a different place.
But they indeed might have outlived their usefulness.
-Andi
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/