Date: Sun, 25 May 2003 11:27:20 +1000
From: Con Kolivas <>
Subject: Re: I/O problems in 2.4.19/2.4.20/2.4.21-rc3
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/5/24/72

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1
On Sun, 25 May 2003 10:43, Christian Klose wrote:
> On Saturday 24 May 2003 16:28, William Lee Irwin III wrote:
>
> Hi wli,
>
> > > --- old/kernel/sched.c	2003-05-24 14:45:57.000000000 +0200
> > > +++ 2.5-mcp/kernel/sched.c	2003-05-24 16:18:42.000000000 +0200
> > > @@ -65,7 +65,7 @@
> > >   * they expire.
> > >   */
> > >  #define MIN_TIMESLICE		( 10 * HZ / 1000)
> > > -#define MAX_TIMESLICE		(200 * HZ / 1000)
> > > +#define MAX_TIMESLICE		( 10 * HZ / 1000)
> > >  #define CHILD_PENALTY		50
> > >  #define PARENT_PENALTY		100
> > >  #define EXIT_WEIGHT		3
> >
> > This looks highly suspicious as it essentially removes dynamic timeslice
> > sizing. If this fixes something, then dynamic timeslice heuristics are
> > going wrong somewhere that should be properly described and handled, not
> > this kind of shenanigan.
>
> I somewhat agree with you but this "properly described" are all the bug
> reports on lkml containing "bad interactivity in 2.5, cpu starving in 2.5"
> and such...
>
> This isn't a shenanigan, at least not for the interactivity for a desktop.
> This is a workaround for users who are complaining about bad interactivity
> in 2.5!
>
> ciao, Marc
Even though you're not Marc I do agree with you. The problem is well described 
as either poor interactivity (the window wiggle test) or starvation in the 
presence of certain scheduler hogs (for whatever reason) since the 
interactivity patch from mingo. Dropping the max timeslice is a bandaid but 
destroys priority based timeslice scheduling. Dropping the min timeslice will 
bring this back, but at some point the timeslice will be so low that low 
priority cpu intensive tasks will spend most of their time cache trashing.
A reasonable compromise for the desktop would be
min 5 
max 25
but some granularity will be lost in the different sizes of timeslices at 
different priorities.
is there any point having longer timeslices than this?
Con
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.1 (GNU/Linux)
iD8DBQE+0Bv6F6dfvkL3i1gRAhpfAKCG3fjkK02lYbAs1p3978rSL/PYAQCcCeK7
gHqR6bgrITE3CSjKCqntw+g=
=rq1o
-----END PGP SIGNATURE-----
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/