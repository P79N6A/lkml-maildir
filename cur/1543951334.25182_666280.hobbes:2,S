Date: Tue, 11 Mar 2008 16:43:31 +0100
From: Mikael Pettersson <>
Subject: [PATCH 2.6.25-rc5] x86: correct/clarify comment in nops.h
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/3/11/228

<asm-x86/nops.h> describes certain multibyte instructions as
"generic" nops when in fact they aren't nops at all in 64-bit
mode (missing REX.W causing truncation of a register).
Update the comment to state that K8 or P6 style nops should be
used in 64-bit mode. This matches what the alternatives code does.
Signed-off-by: Mikael Pettersson <mikpe@it.uu.se>
---
diff -rupN linux-2.6.25-rc5/include/asm-x86/nops.h linux-2.6.25-rc5.x86-generic-nops-arent/include/asm-x86/nops.h
--- linux-2.6.25-rc5/include/asm-x86/nops.h	2008-03-10 20:05:39.000000000 +0100
+++ linux-2.6.25-rc5.x86-generic-nops-arent/include/asm-x86/nops.h	2008-03-11 16:22:22.000000000 +0100
@@ -5,6 +5,8 @@
 
 /* generic versions from gas
    1: nop
+   the following instructions are NOT nops in 64-bit mode,
+   for 64-bit mode use K8 or P6 nops instead
    2: movl %esi,%esi
    3: leal 0x00(%esi),%esi
    4: leal 0x00(,%esi,1),%esi