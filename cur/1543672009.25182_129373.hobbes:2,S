Date: Fri, 2 May 2003 13:41:22 -0700
From: Bob Miller <>
Subject: [PATCH 2.5.68] Convert ipmi_kcs_intf.c to remove check_region().
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/5/2/149

Removed the now defunct check_mem_region() and check_region() calls.
The driver doesn't use the memory/ioport address between the check_region()
and request_region() calls so it is safe to just remove the check_region()
call.
-- 
Bob Miller					Email: rem@osdl.org
Open Source Development Lab			Phone: 503.626.2455 Ext. 17
diff -Nru a/drivers/char/ipmi/ipmi_kcs_intf.c b/drivers/char/ipmi/ipmi_kcs_intf.c
--- a/drivers/char/ipmi/ipmi_kcs_intf.c	Fri May  2 09:52:22 2003
+++ b/drivers/char/ipmi/ipmi_kcs_intf.c	Fri May  2 09:52:22 2003
@@ -1118,24 +1118,14 @@
 	if (kcs_trydefaults) {
 #ifdef CONFIG_ACPI
 		if ((physaddr = acpi_find_bmc())) {
-			if (!check_mem_region(physaddr, 2)) {
-				rv = init_one_kcs(0, 
-						  0, 
-						  physaddr, 
-						  &(kcs_infos[pos]));
-				if (rv == 0)
-					pos++;
-			}
-		}
-#endif
-		if (!check_region(DEFAULT_IO_PORT, 2)) {
-			rv = init_one_kcs(DEFAULT_IO_PORT, 
-					  0, 
-					  0, 
-					  &(kcs_infos[pos]));
+			rv = init_one_kcs(0, 0, physaddr, &(kcs_infos[pos]));
 			if (rv == 0)
 				pos++;
 		}
+#endif
+		rv = init_one_kcs(DEFAULT_IO_PORT, 0, 0, &(kcs_infos[pos]));
+		if (rv == 0)
+			pos++;
 	}
 
 	if (kcs_infos[0] == NULL) {
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/