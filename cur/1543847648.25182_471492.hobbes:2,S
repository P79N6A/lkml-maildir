Date: Tue, 10 Oct 2006 11:34:41 +0200
From: Jean Delvare <>
Subject: Re: [PATCH] hwmon/abituguru: handle sysfs errors
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/10/10/77

Hans,
> > * We want to delete all the device files at regular cleanup time (after
> >   unregistering with the hwmon class).
> 
> Is this really nescesarry? AFAIK the files get deleted when the device
> gets deleted.
The point is that the device shouldn't be deleted if we were following
the device driver model. After all the uGuru device exists in your
system before the abituguru driver is loaded, and is still there after
the driver is unloaded.
Now I agree that for now it won't make a difference, be we are
preparing for the future, and all other hardware monitoring drivers
were updated that way already.
> > * It's OK to call device_create_file() on a non-existent file, so the
> >   error path can be simplified.
> 
> ?? You mean device_remove_file I assume?
Oops, yes, that was a typo, sorry.
Thanks,
-- 
Jean Delvare
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/