Date: Wed, 23 Jun 1999 18:39:17 +0100 (BST)
From: "Stephen C. Tweedie" <>
Subject: Re: File Corruption Bug.. continued
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/6/23/164

Hi,
On Wed, 23 Jun 1999 17:38:10 +0200 (CEST), Andrea Arcangeli
<andrea@suse.de> said:
>> with their brain firmly wrapped around the page cache/vfs verify this change
>> that was made is absolutely safe
> It's absolutely safe. read_swap_cache and lookup_swap_cache can't
> return a not swap cache page. See read_swap_cache_async and
> lookup_swap_cache(). If the patch made a difference it means that
> there's a race somewhere (but I really don't think it's the case).
read_swap_cache_async sets up the swap cache but then blocks waiting for
IO, so if there is a race somewhere which leads to the swap cache being
torn down in the mean time, we may suddenly be tripping up on it now.
However, we'd expect to be getting VM debugging printks from
remove_from_swap_cache if we went down that path.
--Stephen
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/