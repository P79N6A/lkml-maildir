Date: Sat, 04 Jun 2005 07:58:38 -0700
From: Roland Dreier <>
Subject: Re: pci_enable_msi() for everyone?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/6/4/60

    Dave> What if MSI support has been disabled in the bridge due to
    Dave> some quirk (like the recent AMD 8111 quirk) ?  Maybe the
    Dave> above function should check pci_msi_enable as well ?
You can't disable MSI at a bridge -- according to the PCI spec, as
soon as a device has the MSI enable turned on, it must start using MSI
for interrupts and must not ever assert an interrupt pine.  The issue
with AMD 8131 is that it doesn't have any MSI support and just
silently throws away MSI messages, and so the host never gets
interrupts from devices in MSI mode.  Which means any device below
such a host bridge better not have MSI or MSI-X enabled.
 - R.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/