Date: Sat, 22 May 1999 22:53:40 +0200
From: Dieter Nützel <>
Subject: Re: 2.2.9/2.3.3-ac2 kernel NULL pointer with IDE & 'rmmod -a'
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/5/25/41

Tim Waugh wrote:
> On Fri, 21 May 1999, Dieter [iso-8859-1] Nützel wrote:
>
> > SunWave1>rmmod -a
> > Unable to handle kernel NULL pointer dereference at virtual address
>
> [...]
Sorry for this, should NOT happen, again!!!
This should look much better?! :-)
SunWave1>./ksymoops -m /System.map < 2.3.3-ac2-error.log
Options used: -V (default)
              -o /lib/modules/2.3.3-ac2/ (default)
              -k /proc/ksyms (default)
              -l /proc/modules (default)
              -m /System.map (specified)
              -c 1 (default)
              -a - same as ksymoops (default)
Warning in compare_ksyms_lsmod, module awe_wave is in lsmod but not in
ksyms, probably no symbols exported
Unable to handle kernel NULL pointer dereference at virtual address
00000004
current->tss.cr3 = 0e81a000, %cr3 = 0e81a000
*pde = 00000000
Oops: 0000
CPU:    0
EIP:    0010:[<d1831319>]
EFLAGS: 00010212
eax: 00000000   ebx: 00000000   ecx: 00000040   edx: 00000803
esi: d183aa00   edi: 00000301   ebp: 00000001   esp: ce655f6c
ds: 0018   es: 0018   ss: 0018
Process rmmod (pid: 200, process nr: 31, stackpage=ce655000)
Stack: 00000001 00000061 00000040 00000297 00000000 d183a940 d1834c96
00000000
       d182f000 d182f000 c0118b20 d182f000 d182b000 00000001 c0117e1d
d182f000
       00000001 ce654000 bffffb28 bffff9d4 ce655fc4 c010ab54 00000000
0804f6cb
Call Trace: [<c0118b20>] [<c0117e1d>] [<c010ab54>]
Code: 83 7c d8 04 00 7e 3a 8b 4c 24 1c 8b 54 24 10 66 0f b6 b9 74
Copying default arch from ksymoops, bfd_arch=8 bfd_mach=0
>>EIP; d1831319 <END_OF_CODE+fedcd9/????>
Trace; c0118b20 <sys_get_kernel_syms+191/1e5>
Trace; c0117e1d <sys_init_module+24a/4e3>
Trace; c010ab54 <do_signal+268/27c>
Code;  d1831319 <END_OF_CODE+fedcd9/????>      00000000 <_EIP>:
Code;  d1831319 <END_OF_CODE+fedcd9/????>         0: 83 7c d8 04 00
cmpl   $0x0,0x4(%eax,%ebx,8)
Code;  d183131e <END_OF_CODE+fedcde/????>         5: 7e 3a
jle    41 <_EIP+0x41> d183135a <END_OF_CODE+fedd1a/????>
Code;  d1831320 <END_OF_CODE+fedce0/????>         7: 8b 4c 24 1c
movl   0x1c(%esp,1),%ecx
Code;  d1831324 <END_OF_CODE+fedce4/????>         b: 8b 54 24 10
movl   0x10(%esp,1),%edx
Code;  d1831328 <END_OF_CODE+fedce8/????>         f: 66 0f b6 b9 74 00 00
movzbw 0x74(%ecx),%di
Code;  d183132f <END_OF_CODE+fedcef/????>        16: 00
1 warning issued.  Results may not be reliable.
*******************************************************************************
Second Oops, same prog:
SunWave1>./ksymoops -m /System.map < syslog
Options used: -V (default)
              -o /lib/modules/2.3.3-ac2/ (default)
              -k /proc/ksyms (default)
              -l /proc/modules (default)
              -m /System.map (specified)
              -c 1 (default)
              -a - same as ksymoops (default)
Warning in compare_ksyms_lsmod, module awe_wave is in lsmod but not in
ksyms, probably no symbols exported
May 22 20:10:02 SunWave1 kernel: Unable to handle kernel NULL pointer
dereference at virtual address 00000004
May 22 20:10:02 SunWave1 kernel: current->tss.cr3 = 0aabf000, %cr3 =
0aabf000
May 22 20:10:02 SunWave1 kernel: *pde = 00000000
May 22 20:10:02 SunWave1 kernel: Oops: 0000
May 22 20:10:02 SunWave1 kernel: CPU:    0
May 22 20:10:02 SunWave1 kernel: EIP:    0010:[<d088b3b9>]
May 22 20:10:02 SunWave1 kernel: EFLAGS: 00010212
May 22 20:10:02 SunWave1 kernel: eax: 00000000   ebx: d0894b60   ecx:
00000040   edx: 00000802
May 22 20:10:02 SunWave1 kernel: esi: 00000000   edi: 00000301   ebp:
00000001   esp: c397ff54
May 22 20:10:02 SunWave1 kernel: ds: 0018   es: 0018   ss: 0018
May 22 20:10:02 SunWave1 kernel: Process rmmod (pid: 10927, process nr:
65, stackpage=c397f000)
May 22 20:10:02 SunWave1 kernel: Stack: 00000001 00000061 00000040
00000297 00000000 d0894aa0 c6bb69a0 d088ed77
May 22 20:10:02 SunWave1 kernel:        00000000 d088ed60 d0889000
d0889000 d089a000 c0118b94 d0889000 d0885000
May 22 20:10:02 SunWave1 kernel:        00000001 c0118265 d0889000
00000001 c397e000 bffffecb bffffdd4 cc207478
May 22 20:10:02 SunWave1 kernel: Call Trace: [<d0894aa0>] [<d088ed77>]
[<d088ed60>] [<d0889000>] [<d0889000>] [<d089a000>] [free_module+32/169]
May 22 20:10:02 SunWave1 kernel:        [<d0889000>] [<d0885000>]
[sys_delete_module+431/491] [<d0889000>] [error_code+45/64]
[system_call+52/64]
May 22 20:10:02 SunWave1 kernel: Code: 83 7c f0 04 00 7e 3d 8b 4c 24 1c 8b
54 24 10 66 0f b6 b9 74
Copying default arch from ksymoops, bfd_arch=8 bfd_mach=0
>>EIP; d088b3b9 <END_OF_CODE+47d79/????>
Trace; d0894aa0 <END_OF_CODE+51460/????>
Trace; d088ed77 <END_OF_CODE+4b737/????>
Trace; d088ed60 <END_OF_CODE+4b720/????>
Trace; d0889000 <END_OF_CODE+459c0/????>
Trace; d0889000 <END_OF_CODE+459c0/????>
Trace; d089a000 <END_OF_CODE+569c0/????>
Trace; d0889000 <END_OF_CODE+459c0/????>
Trace; d0885000 <END_OF_CODE+419c0/????>
Code;  d088b3b9 <END_OF_CODE+47d79/????>       00000000 <_EIP>:
Code;  d088b3b9 <END_OF_CODE+47d79/????>          0: 83 7c f0 04 00
cmpl   $0x0,0x4(%eax,%esi,8)
Code;  d088b3be <END_OF_CODE+47d7e/????>          5: 7e 3d
jle    44 <_EIP+0x44> d088b3fd <END_OF_CODE+47dbd/????>
Code;  d088b3c0 <END_OF_CODE+47d80/????>          7: 8b 4c 24 1c
movl   0x1c(%esp,1),%ecx
Code;  d088b3c4 <END_OF_CODE+47d84/????>          b: 8b 54 24 10
movl   0x10(%esp,1),%edx
Code;  d088b3c8 <END_OF_CODE+47d88/????>          f: 66 0f b6 b9 74 00 00
movzbw 0x74(%ecx),%di
Code;  d088b3cf <END_OF_CODE+47d8f/????>         16: 00
1 warning issued.  Results may not be reliable.
Have a nice Whitsun.
--Dieter
---
Dieter Nützel
Graduate Student, Computer Science
University of Hamburg
Department of Computer Science
Cognitive Systems Group
Vogt-Kölln-Straße 30
D-22527 Hamburg, Germany
email: Dieter Nützel <nuetzel@kogs.informatik.uni-hamburg.de>
@home: Dieter Nützel <dieter.nuetzel@arcormail.de>
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/