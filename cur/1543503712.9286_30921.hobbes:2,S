Date: Fri, 23 Jul 1999 11:55:54 -0400
From: "Terry Katz" <>
Subject: Max Processes and Linux 2.2.x
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/7/23/62

I'm trying to boost the maximum number of processes (system wide, and per
user) to 4000 (from the default 512 total, 256 per user).
Using Linux revision 2.2.10..
I changed the NR_TASKS definition to 4000 in tasks.h, along with
NR_TASKS_PER_USER to be the same, recompiled, installed, and rebooted.
Today the processes topped out on the system at about 500 (the system is a
web server, each httpd (apache) was running a cgi which was connecting to a
mysql database), shortly after the 500 mark the system ran out of processes.
The system is a Dell PowerEdge 6300, Quad Xeon 500 mhz 2mb cache each with
2gig of memory.
As a test, I tried doing the same on my workstation (Dell optiplex GX1, 400
mhz, 128 mb).. I wrote a short program to spawn any number of processes to
test it .. I confirmed that the per user limit was indeed higher than 256,
but at around 450 processes the system hang.  (I could switch virtual
terminals, but got no response from any of the shells)   I was able to break
out of the program (ctrl-c) and everything returned to normal.  If I ran 200
procs per user between 3 users, it did the same (first two users ran 200
each fine, the third users topped out at like 50-60 and all hang).
I tried the same with 2.3.11 (I just compiled the kernel as is, as I see
stuff has changed .. ie, no more NR_TASKS [for intel at least], and no
tasks.h...)  Got the same results with 2.3.11..
Any ideas?  Am I missing some other values needing change as well?
Thanks in advance,
Terry Katz
katz@advanced.org
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/