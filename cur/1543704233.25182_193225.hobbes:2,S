Date: Fri, 23 Jan 2004 19:21:19 +1100
From: Benjamin Herrenschmidt <>
Subject: Re: swsusp vs  pgdir
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/1/23/41

> Now, I'm apparently rewriting swapper_pg_dir with itself (same
> data). That's not too clean, but CPUs do not notice it...
Well... ok, you _hope_ it's same data :) I suppose with same kernel,
same text and same amount of RAM, you indeed have the same data, though
this is a bit hairy.
For PPC, I have to go to a different way though. I'll probably end up
allocating a small hash table for G5 like CPUs on resume outside of
the space that gets overwriten, though that is definitely a bit nasty,
since the minimum size of a hash table is 256K, so I'll need that
contiguous at least...
For now, I'm just disabling the data translation on the MMU and
assume the BAT is covering me for resume, but that's a bit hairy
too and definitely slow on some CPUs 
Ben.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/