Date: Thu, 30 Dec 2004 03:14:07 +0100
From: Pierre Ossman <>
Subject: [PATCH] MMC block removable flag
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/12/29/171

A MMC card is a highly removable device. This patch makes the block 
layer part of the MMC layer set the removable flag.
--
Pierre
Index: linux-wbsd/drivers/mmc/mmc_block.c
===================================================================
--- linux-wbsd/drivers/mmc/mmc_block.c	(revision 99)
+++ linux-wbsd/drivers/mmc/mmc_block.c	(revision 100)
@@ -384,6 +384,7 @@
 		md->disk->private_data = md;
 		md->disk->queue = md->queue.queue;
 		md->disk->driverfs_dev = &card->dev;
+		md->disk->flags |= GENHD_FL_REMOVABLE;
 
 		sprintf(md->disk->disk_name, "mmcblk%d", devidx);
 		sprintf(md->disk->devfs_name, "mmc/blk%d", devidx);