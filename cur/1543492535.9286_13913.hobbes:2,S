Date: Sun, 11 Apr 1999 14:55:48 +0400
From: Valery Kornienkov <>
Subject: PROBLEM: Bad data from GOLDSTAR GCD-R580B
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/4/11/14

[1.] Bad data from GOLDSTAR GCD-R580B
[2.] If to turn on dma (hdparm -d1 /dev/cdrom) I obtain bad data - md5sum
     files error, and not obtain anyone kernel message of errors.
     But if to turn off dma (hdparm -d0 /dev/cdrom) - all ok, i'm obtain
     good data from device. This error to make appearance in patch-2.2.4
[3.] kernel ide-cd
[4.] 2.2.5
[7.2.]
processor	: 0
vendor_id	: CyrixInstead
cpu family	: 6
model		: 2
model name	: M II 3.5x Core/Bus Clock
stepping	: 8
cpu MHz		: 233.033084
fdiv_bug	: no
hlt_bug		: no
sep_bug		: no
f00f_bug	: no
fpu		: yes
fpu_exception	: yes
cpuid level	: 1
wp		: yes
flags		: fpu de tsc msr cx8 pge cmov mmx
bogomips	: 232.65
[7.3.] 
isofs                  17096   1 (autoclean)
nls_iso8859-1           2024   1 (autoclean)
nls_cp437               3548   1 (autoclean)
vfat                   11392   1 (autoclean)
ide-cd                 21080   1
cdrom                  12060   0 [ide-cd]
awe_wave              155560   1
sb                     31272   1
uart401                 5628   1 [sb]
sound                  55200   0 [awe_wave sb uart401]
soundlow                 240   0 [sound]
soundcore               2208   7 [sb sound]
[X.]
I'm reason this patch is no best way, but he help to me.
--- linux-2.2.5/drivers/block/ide-cd.c.orig	Sat Apr 10 16:50:18 1999
+++ linux-2.2.5/drivers/block/ide-cd.c	Sat Apr 10 18:11:14 1999
@@ -3006,6 +3006,7 @@
 		else if (!strcmp(drive->id->model, "SAMSUNG CD-ROM SCR-2432"))
 			CDROM_CONFIG_FLAGS (drive)->limit_nframes = 1;
 		else if (!strcmp (drive->id->model, "GCD-R580B"))
+			if (!drive->using_dma)
 			CDROM_CONFIG_FLAGS (drive)->limit_nframes = 1;
 				/* 124/SECTORS_PER_FRAME; ? */
 	}
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/