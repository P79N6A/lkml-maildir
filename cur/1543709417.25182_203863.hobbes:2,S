Date: Thu, 4 Mar 2004 00:56:29 +0100
From: Michael Weiser <>
Subject: Re: [ANNOUNCE] udev 021 release
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/3/3/263

On Wed, Mar 03, 2004 at 07:15:00AM -0800, Greg KH wrote:
> > > Major changes from the 019 version:
> > > 	- new variable $local for the udev.permission file allows
> > > 	  permissions to be set for the currently logged in user.
> > Yay, just the other day I thought that might be a nice feature in
> > concert with RedHat's/Fedora's pam_console module. Am I right in
> > assuming that the current utmp based code will give the file to the user
> > that most recently logged into the local console? This could cause some
> > confusion with the pam_console-method which gives files to the user that
> > logged in *first* on a local console.
> I don't know, care to test it out?
Aye. It's even worse. The user logged into the lowest-numbered console
will get owner of the newly created file when using $local.
So if I log into tty2 and plug in my USB stick I will be owner of
/dev/sda1. If another guy comes along, logs into tty1, unplugs my USB
stick and replugs it, he'll be owner of /dev/sda1. But if I log out now,
re-login on tty2 and replug the stick again, I won't get the owner of
/dev/sda1 but the other guy again. This will certainly break things - at
least on Fedora Core 1. Maybe it's different with other
distributions/glibc/utmp variants/versions.
Would it be an option to check for /var/run/console.lock and use the
username stored there by pam_console if present?
-- 
Micha
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/