Date: Tue, 13 Nov 2007 21:20:06 +0530
From: Ananth N Mavinakayanahalli <>
Subject: [patch 2/2] Kprobes: Build kretprobe samples only if arch supports kretprobes
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/11/13/166

From: Ananth N Mavinakayanahalli <ananth@in.ibm.com>
This patch builds samples/kprobes/kretprobe_example.c only on archs that
support kretprobes.
Signed-off-by: Ananth N Mavinakayanahalli <ananth@in.ibm.com>
---
 samples/kprobes/Makefile |    7 +++++--
 1 files changed, 5 insertions(+), 2 deletions(-)
Index: kernel-13nov/samples/kprobes/Makefile
===================================================================
--- kernel-13nov.orig/samples/kprobes/Makefile
+++ kernel-13nov/samples/kprobes/Makefile
@@ -1,5 +1,8 @@
 # builds the kprobes example kernel modules;
 # then to use one (as root):  insmod <module_name.ko>
 
-obj-$(CONFIG_SAMPLE_KPROBES) += kprobe_example.o jprobe_example.o \
-		kretprobe_example.o
+obj-$(CONFIG_SAMPLE_KPROBES) += kprobe_example.o jprobe_example.o
+
+ifeq ($(CONFIG_ARCH_SUPPORTS_KRETPROBES),y)
+obj-$(CONFIG_SAMPLE_KPROBES) += kretprobe_example.o
+endif
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/