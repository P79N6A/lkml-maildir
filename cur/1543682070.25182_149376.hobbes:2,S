Date: Fri, 18 Jul 2003 08:53:35 +0400
From: Andrey Panin <>
Subject: Re: [Bug 954] New: link failure for arch/ppc/mm/built-in.o, function mem_pieces_find
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/7/18/2

On 198, 07 17, 2003 at 08:30:45 -0700, Martin J. Bligh wrote:
> 
http://bugme.osdl.org/show_bug.cgi?id=954
> 
>            Summary: link failure for arch/ppc/mm/built-in.o, function
>                     mem_pieces_find
>     Kernel Version: 2.6.0-test1 + cset-20030717_2009
>             Status: NEW
>           Severity: blocking
>              Owner: bugme-janitors@lists.osdl.org
>          Submitter: barryn@pobox.com
> 
> 
> Distribution: Gentoo
> Hardware Environment: 400MHz Apple PowerMac G4 (AGP Graphics model)
> Software Environment: gcc 2.95.3, binutils 2.12.90.0.7 20020423
> Problem Description:
> When I try to compile linux-2.6.0-test1 + the cset-20030719_2009 patch (i.e.,
> the latest BitKeeper snapshot on kernel.org as of this writing), I get this
> compile error:
>   LD      .tmp_vmlinux1
> arch/ppc/mm/built-in.o: In function `mem_pieces_find':
> arch/ppc/mm/built-in.o(.init.text+0x8f8): undefined reference to `__va'
> arch/ppc/mm/built-in.o(.init.text+0x8f8): relocation truncated to fit:
> R_PPC_REL24 __va
> make: *** [.tmp_vmlinux1] Error 1
Does this one-line patch helps ?
diff -u linux-2.6.0-test1.vanilla/arch/ppc/mm/mem_pieces.c linux-2.6.0-test1/arch/ppc/mm/mem_pieces.c
--- linux-2.6.0-test1.vanilla/arch/ppc/mm/mem_pieces.c	2003-07-18 08:47:49.000000000 +0400
+++ linux-2.6.0-test1/arch/ppc/mm/mem_pieces.c	2003-07-18 08:48:53.000000000 +0400
@@ -19,6 +19,7 @@
 #include <linux/stddef.h>
 #include <linux/blk.h>
 #include <linux/init.h>
+#include <asm/page.h>
 
 #include "mem_pieces.h"
 
-- 
Andrey Panin		| Linux and UNIX system administrator
pazke@donpac.ru		| PGP key: wwwkeys.pgp.net[unhandled content-type:application/pgp-signature]