Date: Fri, 4 Apr 2008 20:51:06 +0200
From: Alexander van Heukelum <>
Subject: [PATCH] Build fix for uml/i386
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/4/4/279

Build fix for uml/i386, which was broken by:
x86: remove x86-specific implementations of find_first_bit
Signed-off-by: Alexander van Heukelum <heukelum@fastmail.fm>
---
Hi Ingo,
I broke uml again :(
This patch fixes the problem for i386. These changes should
have been included in:
x86: generic versions of find_first_(zero_)bit, convert i386
Greetings,
	Alexander
 arch/um/Kconfig.i386      |    4 ++++
 arch/um/sys-i386/Makefile |    2 +-
 2 files changed, 5 insertions(+), 1 deletions(-)
diff --git a/arch/um/Kconfig.i386 b/arch/um/Kconfig.i386
index 164d29c..f694cff 100644
--- a/arch/um/Kconfig.i386
+++ b/arch/um/Kconfig.i386
@@ -43,6 +43,10 @@ config ARCH_REUSE_HOST_VSYSCALL_AREA
 	bool
 	default y
 
+config GENERIC_FIND_FIRST_BIT
+	bool
+	default y
+
 config GENERIC_FIND_NEXT_BIT
 	bool
 	default y
diff --git a/arch/um/sys-i386/Makefile b/arch/um/sys-i386/Makefile
index 964dc1a..598b5c1 100644
--- a/arch/um/sys-i386/Makefile
+++ b/arch/um/sys-i386/Makefile
@@ -6,7 +6,7 @@ obj-y = bug.o bugs.o checksum.o delay.o fault.o ksyms.o ldt.o ptrace.o \
 	ptrace_user.o setjmp.o signal.o stub.o stub_segv.o syscalls.o sysrq.o \
 	sys_call_table.o tls.o
 
-subarch-obj-y = lib/bitops_32.o lib/semaphore_32.o lib/string_32.o
+subarch-obj-y = lib/semaphore_32.o lib/string_32.o
 subarch-obj-$(CONFIG_HIGHMEM) += mm/highmem_32.o
 subarch-obj-$(CONFIG_MODULES) += kernel/module_32.o
 