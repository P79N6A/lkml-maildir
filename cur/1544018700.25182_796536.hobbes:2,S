Date: Sat, 24 Jan 2009 18:55:33 +0530
From: Jaswinder Singh Rajput <>
Subject: Re: why usr/include/linux/if_frad.h is required
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2009/1/24/40

On Wed, 2009-01-21 at 15:37 -0800, David Miller wrote:
> From: Stephen Hemminger <shemminger@vyatta.com>
> Date: Wed, 21 Jan 2009 17:38:38 +1100
> 
> > There are no references if_frad.h in the version of Sangoma (out of
> > tree) code that we use in Vyatta.
> 
> frad-0.20:src/dlcicfg.c
> 
> It includes linux/if_frad.h and also performs the DLCI_SET_CONF
> ioctl.
> 
> Enough evidence to show we need to keep this header in the
> export set.  Let's just kill the bogus CONFIG_* ifdef
> tests in there.
After killing CONFIG_DLCI and CONFIG_DLCI_MODULE, it is also killing the
kernel:
  CC      net/socket.o
In file included from net/socket.c:75:
include/linux/if_frad.h:170: error: ‘CONFIG_DLCI_MAX’ undeclared here (not in a function)
make[1]: *** [net/socket.o] Error 1
make: *** [net] Error 2
because these things still depends on CONFIG_DLCI:
struct frad_local
{
   struct net_device_stats stats;
   /* devices which this FRAD is slaved to */
   struct net_device     *master[CONFIG_DLCI_MAX];
   short             dlci[CONFIG_DLCI_MAX];
Are you still sure we do not need CONFIG_DLCI.
--
JSR
--
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/