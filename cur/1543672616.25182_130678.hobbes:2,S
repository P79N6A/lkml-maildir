Date: Wed, 7 May 2003 10:42:49 -0700 (PDT)
From: Linus Torvalds <>
Subject: Re: [PATCH] 2.5 ide 48-bit usage
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/5/7/226

On Wed, 7 May 2003, Jens Axboe wrote:
> > 
> > And testing. In particular, you might want to test whether a device 
> > properly supports 48-bit addressing, either from the kernel or from user 
> > programs.
> 
> For that, a forced 48-bit hwif->addressing inherited by drives will
> suffice. And I agree, we should have that.
No no no.
You definitely do NOT want to set "hwif->addressing" to 1 before you've 
tested whether it even _works_.
Imagine something like "hdparm" - other things are already in progress,
the system is up, and IDE commands are potentially executing concurrently.  
What something like that wants to do is to send one request out to check
whether 48-bit addressing works, but it absolutely does NOT want to set 
some interface-global flag that affects other commands.
Only after it has verified that 48-bit addressing does work should it set 
the global flag.
> If you are doing that from userspace by sending in taskfiles with the
> appropriate commands, then you just create the commands like you want
> them. rq_lba48() just checks whether file system requests should be
> executed with 28 or 48-bit commands. If you send in taskfiles (your
> SG_IO example), you have complete control over this already.
That may well be sufficient. 
		Linus
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/