Date: Thu, 07 Feb 2008 14:34:26 -0800
From: "H. Peter Anvin" <>
Subject: Re: [rft] s2ram wakeup moves to .c, could fix few machines
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/2/7/545

Sam Ravnborg wrote:
>> +
>> +	. = 0;
>> +	.text		: { *(.text*) }
>> +
>> +	. = ALIGN(16);
> Why?
It's good practice to have at least paragraph (segment boundary) 
alignment between different types of data.  In the case of the .bss, it 
also allows cleaning with rep;movsl.
It's technically not all that necessary (except for 4-byte alignment for 
the .bss), but it makes things easier to debug on the assembly level.
>> +	/* Adjust this as appropriate */
>> +	/* This allows 4 pages (16K) */
>> +	. = ASSERT(_end <= 0x4000, "Wakeup too big!");
> PAGE_SIZE * 4?
Not really, because it's not at all related to the kernel page size; the 
reference to pages there is informal.  If we go to a larger virtual page 
size we do NOT want this to change.
	-hpa