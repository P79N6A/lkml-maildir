Date: Mon, 16 Oct 2000 17:40:47 +0100
From: Stephen Tweedie <>
Subject: Re: mapping user space buffer to kernel address space
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/10/16/184

Hi,
On Fri, Oct 13, 2000 at 12:30:49PM +0100, Malcolm Beattie wrote:
>     free_kiovec(1, &iobuf);    /* does an implicit unlock_kiovec */
> 
> It doesn't do an unmap_kiobuf(iobuf) so I don't understand where
> the per-page map->count that map_user_kiobuf incremented gets
> decremented again. Anyone?
The 2.4 raw code I'm looking at does an explicit unmap_kiobuf after
each brw_kiovec().
> Lowlevel I/O on a kiovec can be done
> with something like an ll_rw_kiovec which sct said was going to get
> put in but since I haven't read anything more recent than
> 2.4.0-test5 at the moment, I can't say if it's there or what it
> looks like.
It's being maintained inside the SGI XFS tree right now.  They've got
it pretty stable under XFS load so I'll probably put together the
ll_rw_kio functionality using their low level code the next time I do
a kiovec release.  I believe that the XFS tree has 2.4.0-test9 support
for this code.
Cheers,
 Stephen
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/