Date: Sun, 18 Feb 2001 22:48:00 +0300 (MSK)
From:  kuznet@ms2 ...
Subject: Re: SO_SNDTIMEO: 2.4 kernel bugs
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/2/18/116

Hello!
> .. unless that page was partially written, in which case a short write
> count is returned (rather than a timeout error), and the loop goes around
> again.
sendfile() does not return on partial write and tries to push more
until error. On fast link it most likely succeeds, so that it is unkillable
even with SIGKILL.
> Which is good, because SO_SNDTIMEO is an inactivity monitor.
Then why did you blame? 8)8)
I do not think so. It is rather scheduling breaker. If connection
is idle 99% of time, but wakes each sndtimeo-1usec, it must yuild,
otherwise thread is lost for production.
Alexey
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/