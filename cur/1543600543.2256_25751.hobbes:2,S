Date: Fri, 7 Sep 2001 09:17:16 -0500
From: Tim Walberg <>
Subject: Re: nfs is stupid ("getfh failed")
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/9/7/99

On 09/07/2001 08:58 -0400, Michael Rothwell wrote:
>>	From: "Neil Brown" <neilb@cse.unsw.edu.au>
>>
>>	> This is not allowed, and makes no sense.
>>
>>	It apparently is (or was, anyway) allowed, because it worked until the
>>	server was rebooted. Fluke?
>>	Are you saying that, if I export "/export", I can mount "/export/home" from
>>	a client machine? That's nice.
>>
Yes. At least that's how Solaris, Irix, HP/UX, and several others do it. The
general rule is something along the lines of "if /a is exported, anything that
is a subdirectory of /a is accessible via NFS, so long as it is on the same
device (partition - actually major/minor pair)". So, if /export/home in your
case lives in the same file system as /export, it is accessible via NFS
as well. Now if /export/home is it's own mount point (i.e. a separate file
system), then it needs to be exported explicitly.
>>	> Simply remove the second line and your problems should go away.
>>
>>	Thanks. I actually switched to two explicit exports; /export/files and
>>	/export/home, which works.
>>
This works as well, with the caveat that you cannot then mount /export itself
on client machines.
				tw
-- 
twalberg@mindspring.com
[unhandled content-type:application/pgp-signature]