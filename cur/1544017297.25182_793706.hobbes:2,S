Date: Sat, 17 Jan 2009 02:38:04 +0000
From: Matthew Garrett <>
Subject: [PATCH] misc: dell-laptop should depend on POWER_SUPPLY
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2009/1/16/512

dell-laptop makes use of the power supply class information to choose 
which backlight interface to change. Add a depends on it.
Signed-off-by: Matthew Garrett <mjg@redhat.com>
---
diff --git a/drivers/misc/Kconfig b/drivers/misc/Kconfig
index 419c378..03de0a2 100644
--- a/drivers/misc/Kconfig
+++ b/drivers/misc/Kconfig
@@ -225,6 +225,7 @@ config DELL_LAPTOP
 	depends on EXPERIMENTAL
 	depends on BACKLIGHT_CLASS_DEVICE
 	depends on RFKILL
+	depends on POWER_SUPPLY
 	default n
 	---help---
 	This driver adds support for rfkill and backlight control to Dell
-- 
Matthew Garrett | mjg59@srcf.ucam.org