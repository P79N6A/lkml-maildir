Date: Wed, 7 Apr 2004 11:40:35 -0500
From: Matt Mackall <>
Subject: Re: 2.6.5-rc1-tiny1 for small systems
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/4/7/148

On Wed, Apr 07, 2004 at 08:33:25AM +0300, Denis Vlasenko wrote:
> On Wednesday 17 March 2004 00:25, Matt Mackall wrote:
> > This is the latest release of the -tiny kernel tree. The aim of this
> > tree is to collect patches that reduce kernel disk and memory
> > footprint as well as tools for working on small systems. Target users
> > are things like embedded systems, small or legacy desktop folks, and
> > handhelds.
> >
> > This release is primarily a resync with 2.6.5-rc1 and contains various
> > compile fixes and other cleanups.
> >
> > The patch can be found at:
> >
> > 
http://selenic.com/tiny/2.6.5-rc1-tiny1.patch.bz2
> > 
http://selenic.com/tiny/2.6.5-rc1-tiny1-broken-out.tar.bz2
> >
> > Webpage for your bookmarking pleasure:
> >
> > 
http://selenic.com/tiny-about/
> 
> With attached .config, I get this:
>   CC      lib/div64.o
>   CC      lib/dump_stack.o
>   CC      lib/errno.o
>   CC      lib/extable.o
>   CC      lib/idr.o
>   CC      lib/inflate.o
> lib/inflate.c:138: syntax error before "void"
> make[1]: *** [lib/inflate.o] Error 1
> make: *** [lib] Error 2
> 
> lib/inflate.c:
> static u32 crc_32_tab[256];
> 
> static INIT void makecrc(void)
>        ^^^^
> {
>         unsigned i, j;
>         u32 c = 1;
Just changing that to __init should fix things. That got broken in a
recent patch reordering and doesn't get compiled with the CRC
shrinking option on.
> Originally I wanted to have CONFIG_MEASURE_INLINES=y,
> but it died even earlier, looks like my gcc does not like
> the fact that there is way too many warnings for
> eisa-bus.c.
Hmm, that's interesting. The measure inlines stuff works by generating
warnings, but I have yet to see recent GCC quit after too many warnings.
-- 
Matt Mackall : 
http://www.selenic.com
 : Linux development and consulting
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/