Date: Sat, 13 Oct 2007 20:05:19 +0200
From: "Torsten Kaiser" <>
Subject: Re: 2.6.23-mm1
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/10/13/176

On 10/13/07, Jeff Garzik <jeff@garzik.org> wrote:
> Torsten Kaiser wrote:
> > 3 boots, all worked. So I'm very sure that was the bug, but I will now
> > do a little load testing...
> >
> > The only strange thing about 2.6.23-mm1 is, that it takes ~4 second
> > more to boot.
>
> So, you basically applied the attached patch?
>
> Yeah, absence of qc_defer for an NCQ-capable chip would do it.
Yes. The system seems to work correctly now.
The only thing I noted during load testing (updating Gentoo ==
compiling and installing) was, that there seems to be memory leak.
After ~2h 2.5 of my 4Gb where gone. But there where to many things
going on to pinpoint it... (NFSv4 over eth1394?)
> diff --git a/drivers/ata/sata_nv.c b/drivers/ata/sata_nv.c
> index cf5c85e..240a892 100644
> --- a/drivers/ata/sata_nv.c
> +++ b/drivers/ata/sata_nv.c
> @@ -554,6 +554,7 @@ static const struct ata_port_operations nv_swncq_ops = {
>         .bmdma_start            = ata_bmdma_start,
>         .bmdma_stop             = ata_bmdma_stop,
>         .bmdma_status           = ata_bmdma_status,
> +       .qc_defer               = ata_std_qc_defer,
>         .qc_prep                = nv_swncq_qc_prep,
>         .qc_issue               = nv_swncq_qc_issue,
>         .freeze                 = nv_mcp55_freeze,
>
>
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/