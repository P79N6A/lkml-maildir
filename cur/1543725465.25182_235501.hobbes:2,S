Date: Wed, 21 Jul 2004 15:27:42 -0500
From: Dave Kleikamp <>
Subject: Re: What is the BUG() call in ll_rw_blk.c (2.4.26) for?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/7/21/97

On Wed, 2004-07-21 at 13:36, Tom Dickson wrote:
> void submit_bh(int rw, struct buffer_head * bh)
> {
> ~        int count = bh->b_size >> 9;
> 
> 
> ~        if (!test_bit(BH_Lock, &bh->b_state))
> ~                BUG();
> 
> Does anyone know what that BUG(); is testing? We're seeing it and want
> to track down what we're doing that is causing it.
You must lock the buffer_head before calling submit_bh.  If the
buffer_head is not locked, you see the BUG.
Shaggy
-- 
David Kleikamp
IBM Linux Technology Center
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/