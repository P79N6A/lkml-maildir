Date: Mon, 18 Feb 2008 13:51:12 +0100
From: Jens Axboe <>
Subject: Re: [RFC: 2.6 patch] fs/block_dev.c: remove #if 0'ed code
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/2/18/191

On Sun, Feb 17 2008, Adrian Bunk wrote:
> Commit b2e895dbd80c420bfc0937c3729b4afe073b3848 #if 0'ed this code stating:
> 
> <--  snip  -->
> 
>     [PATCH] revert blockdev direct io back to 2.6.19 version
> 
>     Andrew Vasquez is reporting as-iosched oopses and a 65% throughput
>     slowdown due to the recent special-casing of direct-io against
>     blockdevs.  We don't know why either of these things are occurring.
> 
>     The patch minimally reverts us back to the 2.6.19 code for a 2.6.20
>     release.
> 
> <--  snip  -->
> 
> It has since been dead code, and unless someone wants to revive it now 
> it's time to remove it.
> 
> This patch also makes bio_release_pages() static again and removes the 
> ki_bio_count member from struct kiocb, reverting changes that had been 
> done for this dead code.
I agree with this, if it's been sitting like that for a long time, might
as well just kill it. I've merged your patch, if no one complains it'll
go in during 2.6.25.
-- 
Jens Axboe