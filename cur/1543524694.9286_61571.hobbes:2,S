Date: Sat, 5 Feb 2000 17:01:54 -0800 (PST)
From: Andre Hedrick <>
Subject: Re: Empty /proc/ide/piix
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/2/5/62

I have not filled in the details......
from ./drivers/block/piix.c
#define DISPLAY_PIIX_TIMINGS
#if defined(DISPLAY_PIIX_TIMINGS) && defined(CONFIG_PROC_FS)
#include <linux/stat.h>
#include <linux/proc_fs.h>
static int piix_get_info(char *, char **, off_t, int);
extern int (*piix_display_info)(char *, char **, off_t, int); /* ide-proc.c */
extern char *ide_media_verbose(ide_drive_t *);
static struct pci_dev *bmide_dev;
static int piix_get_info (char *buffer, char **addr, off_t offset, int count)
{
        /* int rc; */
        int piix_who = ((bmide_dev->device == PCI_DEVICE_ID_INTEL_82801AA_1) ||
                        (bmide_dev->device == PCI_DEVICE_ID_INTEL_82801AB_1) ||
                        (bmide_dev->device == PCI_DEVICE_ID_INTEL_82371AB)) ? 4 : 3;
        char *p = buffer;
        p += sprintf(p, "\n                                Intel PIIX%d Chipset.\n", piix_who);
        p += sprintf(p, "--------------- Primary Channel ---------------- Secondary Channel -------------\n\n");
        p += sprintf(p, "--------------- drive0 --------- drive1 -------- drive0 ---------- drive1 ------\n");
        p += sprintf(p, "\n");
        p += sprintf(p, "\n");
/*
 *      FIXME.... Add configuration junk data....blah blah......
 */
        return p-buffer;         /* => must be less than 4k! */
}
#endif  /* defined(DISPLAY_PIIX_TIMINGS) && defined(CONFIG_PROC_FS) */
On Sat, 5 Feb 2000, Marco Meloni wrote:
> 
> I have compiled 2.3.42 with 
> 
> CONFIG_BLK_DEV_PIIX=y
> CONFIG_BLK_DEV_PIIX_TUNING=y        
> 
> and on boot the kernel says:
> 
> PIIX4: IDE controller on PCI bus 00 dev 21
> PIIX4: not 100% native mode: will probe irqs later
>     ide0: BM-DMA at 0xd800-0xd807, BIOS settings: hda:DMA, hdb:pio
>     ide1: BM-DMA at 0xd808-0xd80f, BIOS settings: hdc:DMA, hdd:pio
> hda: QUANTUM FIREBALL EL5.1A, ATA DISK drive
> hdc: Pioneer CD-ROM ATAPI Model DR-A04S 0105, ATAPI CDROM drive
> ide2: ports already in use, skipping probe
> 
> but cat /proc/ide/piix shows me:
> 
> [marco@localhost linux]$ cat /proc/ide/piix
>  
>                                 Intel PIIX4 Chipset.
> --------------- Primary Channel ---------------- Secondary Channel
> ------------- 
> --------------- drive0 --------- drive1 -------- drive0 ----------
> drive1 ------
> 
> 
> Is there something wrong?
> 
> marco
> 
> ps: please cc: your email also to my email address
> 
> --
> inside my heart is breaking / my make-up may be flaking 
> but my smile / still stays on
> 
> -
> To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
> the body of a message to majordomo@vger.rutgers.edu
> Please read the FAQ at 
http://www.tux.org/lkml/
> 
Andre Hedrick
The Linux ATA/IDE guy
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/