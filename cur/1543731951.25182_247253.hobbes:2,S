Date: Tue, 31 Aug 2004 14:58:26 +0900
From: "Tomita, Haruo" <>
Subject: RE: Cannot enable DMA on SATA drive (SCSI-libsata, VIA SATA)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/8/31/19

Hi Petr
Petr wrote> I am not using the combine mode on the sata drives 
Petr wrote> (or at least, I don't know about it). I was implying that
Petr wrote> when I connect another pure IDE drive to the motherboard, 
Petr wrote> then the situation gets better.
It seems that I have mistaken. 
The misunderstood problem is as follows. 
Combined mode can be set up by the SATA controller of ESB of Intel tip. 
This mode is the mode which can use SATA and PATA simultaneously. 
In ata_piix driver, when combined mode is specified, it does not work.
On the other hand, at the piix driver, in order not to recognize ESB tip, 
it worked only by PIO mode.
Petr wrote> Whats wrong here (or ... what feels wrong) is that the system 
Petr wrote> slows down noticeably when transferring data
Petr wrote> to/from the sata drives. It 'feels' like using an old ide 
Petr wrote> disk with pio mode only. I am not saying that the transfer rates
Petr wrote> are low though... hdparm -t on the sata drives gives me following:
It is the result of measuring in my environment:
  Linux-2.4.28-pre2 (RedHat Enterprise Linux 3 Update2 Base)
  HDD: HITACHI DeskStar 80G x 2
  SATA: Intel 82801ESB
  ata_piix driver version : 1.02.
The result is as follows. 
I think that there are not your result and great difference.
/dev/sda:
Timing buffered disk reads:  152 MB in  3.00 seconds =  50.67 MB/sec
/dev/sdb:
Timing buffered disk reads:  174 MB in  3.02 seconds =  57.62 MB/sec
Best Regards,
Haruo 
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/