Date: Sat, 5 Apr 2003 19:35:24 -0500
From: "Shawn Starr" <>
Subject: RE: [OOPS][2.5.66bk9+] run_timer_softirq - IRQ Mishandlings - New OOPS w/ timer
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/4/5/66

Andrew, since the new timer changes made, Things are looking solid so far.
We might want to begin adding things into BK-current no?
Sshd hasn't hung, ttys haven't hung either.
Shawn.
-----Original Message-----
From: Andrew Morton [mailto:akpm@digeo.com] 
Sent: Sunday, March 30, 2003 6:18 PM
To: Shawn Starr
Cc: roland@topspin.com; rml@tech9.net; linux-kernel@vger.kernel.org
Subject: Re: [OOPS][2.5.66bk3+] run_timer_softirq - IRQ Mishandlings - New
OOPS w/ timer
"Shawn Starr" <spstarr@sh0n.net> wrote:
>
> drivers/char/tty_io.c - Only
> 
> I bet it's this function, there's only a kfree, not destruction of any
> timers.
> 
This is fairly foul.
--- 25/drivers/char/tty_io.c~a	2003-03-30 15:12:37.000000000 -0800
+++ 25-akpm/drivers/char/tty_io.c	2003-03-30 15:16:59.000000000 -0800
@@ -1288,6 +1288,8 @@ static void release_dev(struct file * fi
 	/*
 	 * Make sure that the tty's task queue isn't activated. 
 	 */
+	clear_bit(TTY_DONT_FLIP, &tty->flags);
+	del_timer_sync(&tty->flip.work.timer);
 	flush_scheduled_work();
 
 	/* 
_
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/