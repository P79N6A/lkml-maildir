Date: Mon, 29 Oct 2001 14:41:51 +0100
From: "Martin Eriksson" <>
Subject: Re: 2.4.0 TCP caches ip route
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/10/29/98

----- Original Message -----
From: "Manel Guerrero Zapata" <manel.guerrero-zapata@nokia.com>
To: "Kernel Mailing List" <linux-kernel@vger.kernel.org>
Sent: Monday, October 29, 2001 2:03 PM
Subject: 2.4.0 TCP caches ip route
> Hi,
>
> I'm using 2.4.0 (but I thing that this is probably a 2.4.X problem).
> If a execute a telnet command to certain address (like 10.0.0.1).
> And the routing table says that packets for 10.0.0.1 should be
> routed to the device dummy0,
> The telnet keeps trying to connect. (till here everything is cool).
> And then I change the routing table so now it should
> send those packets to the ppp0 (where 10.0.0.1 is), but the
> connexion does not get stablished anyway (till I get timeout).
>
> The problem seems to be that the kernel
> caches that the device for the connexion should be dummy0.
> If then, I cancel the telnet and start it again
> now (of course) it stablishes a telnet conexion though the ppp0.
>
> This problem does not occur if I use ping instead of telnet
> (probably because ping uses no socket).
>
> Should not be a mechanism that flushes caches when routing
> table changes?
>
> If the cached info is attached to the socket structure
> probably this flushing thing is not quite feasible, am I wrong?
>
> I know you usually don't expect the device though your tcp
> connection goes to change on the fly, but that actually can
> happend, and maybe (IMHO) should be supported.
>
> Maybe I'm missing something. (probably ;) )
This sounds like a minor problem. I do think that if you already have an
established connection it would work just as you want it to do, but as you
describe it you don't have an established TCP connection. What I mean is
that you won't exactly loose your connection if you don't even have one at
the first place!
_____________________________________________________
|  Martin Eriksson <nitrax@giron.wox.org>
|  MSc CSE student, department of Computing Science
|  Ume√• University, Sweden
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/