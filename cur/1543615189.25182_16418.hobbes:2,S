Date: Tue, 1 Jan 2002 22:08:38 +1100
From: Anton Blanchard <>
Subject: Re: [patch] Prefetching file_read_actor()
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/1/1/164

> Please bury such things in arch/cpu specific routines. Most non intel
> processor hardware isnt that broken.
Exactly, for example ppc32 and ppc64 implement the prefetch macros so we
cant put intel specific prefetch hacks in generic code. 
The correct place to do it is in the copy_*_user routines where you can
make decisions based on length etc. Davem already does this for sparc64
and Paulus is working on it for ppc32/64.
I just grepped around for current prefetch usage and noticed we now
use it in the list macros. Converting non struct list code (eg pagecache
hash) to use for_each_list etc might give some benefits.
Perhaps for_each_task could benefit from the same prefetching.
Anton
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/