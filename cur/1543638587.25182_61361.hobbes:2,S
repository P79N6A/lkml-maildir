Date: Sun, 4 Aug 2002 17:06:34 +0100
From: Matthew Wilcox <>
Subject: [PATCH] aic7xxx_old compile fix
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/8/4/9

aic7xxx_old did a sti() before calling panic().  remove these calls.
diff -urpNX dontdiff linux-2.5.30/drivers/scsi/aic7xxx_old.c linux-2.5.30-willy/drivers/scsi/aic7xxx_old.c
--- linux-2.5.30/drivers/scsi/aic7xxx_old.c	2002-07-27 12:09:15.000000000 -0600
+++ linux-2.5.30-willy/drivers/scsi/aic7xxx_old.c	2002-08-04 08:32:04.000000000 -0600
@@ -5077,7 +5077,6 @@ aic7xxx_handle_seqint(struct aic7xxx_hos
         }
         else 
         {
-          sti();
           panic("aic7xxx: AWAITING_MSG for an SCB that does "
                 "not have a waiting message.\n");
         }
@@ -6933,7 +6932,6 @@ aic7xxx_isr(int irq, void *dev_id, struc
 #endif
     if (errno & (SQPARERR | ILLOPCODE | ILLSADDR))
     {
-      sti();
       panic("aic7xxx: unrecoverable BRKADRINT.\n");
     }
     if (errno & ILLHADDR)
-- 
Revolutions do not require corporate support.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/