Date: Tue, 7 Mar 2006 08:19:26 +0530
From: "Balbir Singh" <>
Subject: Re: [PATCH] Busy inodes after unmount, be more verbose in generic_shutdown_super
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/3/6/252

> No I haven't.  I like it.
>  - Holding the semaphore shouldn't be a problem.
>  - calling down_read_trylock ought to be fast
>  - I *think* the unwanted calls to prune_dcache are always under
>    PF_MEMALLOC - they certainly seem to be.
>
> And it is a nice small change.
> Have you had any other feedback on this?
>
>
Thanks, I do not have any feedback on it, but I am certainly hungry for it :-)
> >
> > Some top of the head feedback below. Will try and do a detailed review later.
> >
>
> > > +               /* avoid further wakeups */
> > > +               sb->s_pending_iputs = 65000;
> >
> > This looks a bit ugly, what is 65000?
>
> Just the first big number that came to by head... probably not needed.
>
ok, I would rather use a const or a #define and hide it under a
meaningful name, with comments. If it is not needed, then nothing like
avoiding magic numbers.
>
> NeilBrown
>
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/