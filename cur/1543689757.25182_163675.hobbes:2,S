Date: Sat, 6 Sep 2003 06:55:33 -0700
From: Dale Harris <>
Subject: Re: compile problems on PPC for 2.6.0-test4
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/9/6/45

On Sat, Sep 06, 2003 at 10:08:34AM +0200, Benjamin Herrenschmidt elucidated:
> 
> It shoud not be failing on this though:
No, it didn't fail, it was just a warning from the compiler.
> 
> #define mdelay(n) (\
> 	(__builtin_constant_p(n) && (n)<=MAX_UDELAY_MS) ? udelay((n)*1000) : \
> 	({unsigned long __ms=(n); while (__ms--) udelay(1000);}))
> 
> The __builtin_constant_p(5000) && (5000)<=5 test should fail thus
> turning into a loop of udelay(1000). Your gcc seems to be screwing
> it up. What version are you using ?
2.95.4, but this is from Debian unstable, package version: 2.95.4-17. 
> 
> The current bk snapshot I have here doesn't have a problem at this line.
BTW, I guess I wasn't compiling a straight vanilla kernel, it was off
your rsync server, source.mvista.com::linuxppc-2.5.  The vanilla kernel
bombs drivers/ide/ppc/pmac.c on my laptop.
-- 
Dale Harris   
rodmur@maybe.org
/.-)
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/