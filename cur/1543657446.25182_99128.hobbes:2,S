Date: Tue, 31 Dec 2002 09:38:25 +0100
From: Tomas Szepe <>
Subject: [PATCH] fix up UP in 2.5-bkcurrent
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/12/31/28

Linus,
The following bit is needed to build (and boot) current 2.5 bk on
UP.  The fix just favors a "we may have to do this" comment. <g>
-- 
Tomas Szepe <szepe@pinerecords.com>
diff -urN a/include/asm-i386/hw_irq.h b/include/asm-i386/hw_irq.h
--- a/include/asm-i386/hw_irq.h	2002-12-31 09:33:21.000000000 +0100
+++ b/include/asm-i386/hw_irq.h	2002-12-31 09:26:18.000000000 +0100
@@ -131,8 +131,9 @@
 
 #endif /* CONFIG_PROFILING */
  
-#ifdef CONFIG_X86_IO_APIC /*more of this file should probably be ifdefed SMP */
-static inline void hw_resend_irq(struct hw_interrupt_type *h, unsigned int i) {
+#if defined(CONFIG_X86_IO_APIC) && defined(CONFIG_SMP)
+static inline void hw_resend_irq(struct hw_interrupt_type *h, unsigned int i)
+{
 	if (IO_APIC_IRQ(i))
 		send_IPI_self(IO_APIC_VECTOR(i));
 }
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/