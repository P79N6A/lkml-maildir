Date: Mon, 31 Mar 2003 09:46:01 -0800
From: Mike Anderson <>
Subject: Re: Problem created by Zoning on Linux
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/3/31/72

chandrasekhar.nagaraj [chandrasekhar.nagaraj@patni.com] wrote:
> But the second Host, which should have access to LUN 4 to 7, has some
> problem.
> The /proc/partitions does not show any scsi device file. Also
> /proc/scsi/scsi does not entries corresponding to LUN 4 to 7; but it have
> only one entry corresponding to LUN 0 (which should not be allowed).
> 
> So, is there any restriction on Linux that the LUN number should start with
> 0 only??
> If so, then what is the solution/workaround?
You did not mention the kernel version you are working with, but I will
assume that it is 2.4 based (2.5 supports report_luns and should avoid
this problem).
The failure looks like you need to set a sparse lun flag for this
storage device. Add an entry with the BLIST_SPARSELUN flag set to the
device_list array in scsi_scan.c for this storage device.
If the scanning is happening post boot you could turn on some scan
logging to verify this issue. 
	echo "scsi log scan 4" > /proc/scsi/scsi
You can set logging during boot, but you can only control all logging or
none and it sometimes generates to much output.
-andmike
--
Michael Anderson
andmike@us.ibm.com
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/