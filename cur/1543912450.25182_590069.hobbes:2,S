Date: Thu, 30 Aug 2007 20:48:55 +0200
From: "Rafael J. Wysocki" <>
Subject: Re: CONFIG_HOTPLUG_CPU: kconfig bug?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/8/30/187

On Thursday, 30 August 2007 14:40, Hugh Dickins wrote:
> On Thu, 30 Aug 2007, Roman Zippel wrote:
> > 
> > > > > > I've noticed an oddity with CONFIG_HOTPLUG_CPU in 2.6.23-rc:
> > > > > > make oldconfig seems to turn it on even when nothing wants it,
> > > > > > increasing kernel size by about 10k; but if you then edit the
> > > > > > line out of .config and make oldconfig again, it correctly
> > > > > > offers the choice and lets it be turned off after all.
> > 
> > It's somewhat a side effect of using select and defaults, the order of the 
> > config symbols becomes significant for oldconfig, if you look at the 
> > output you'll find:
> > 
> > Support for suspend on SMP and hot-pluggable CPUs (EXPERIMENTAL) (HOTPLUG_CPU) [Y/?] y
> > 
> > this sets it to 'y'. In this case one isn't asked about it, because there 
> > is only one choice. The patch below avoids the setting of the value here.
> 
> Thanks for working that out: your patch certainly works for me,
> and would be good to see in 2.6.23, to prevent lots of users getting
> an unnecessary CONFIG_HOTPLUG_CPU forever after.  I wonder what config
> options this might have forced in the past.
Probably CONFIG_SUSPEND, which was a new option, defaulted to 'y' and selected
CONFIG_HOTPLUG_CPU indirectly, because CONFIG_SMP was set.
Greetings,
Rafael
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/