Date: Sun, 26 Sep 1999 20:58:13 -0700 (PDT)
From: Andre Hedrick <>
Subject: Re: PCI controller (HPT-366) not detected
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/9/26/109

For everyone who has a board with the second channel working great.
Here is the enable switch to come.
HPT366 (EXPERIMENTAL)
CONFIG_BLK_DEV_HPT366_SHARED
  This requires CONFIG_BLK_DEV_HPT366.
  It appears that there are different versions or releases of this hardware
  by ABit.  Since some cases the second channel of the onboard chipset works
  and others fail, it is default disabled.  This is required to be set if you
  want to attempt the setup of the second channel.
  JUMBO WARNING, do not boot a kernel with this enabled if it is your only
  one.  You may not be able to get back into your machine without physically
  detaching the attached devices.
  If unsure, say N.
Andre Hedrick
The Linux IDE guy
On Sat, 25 Sep 1999, Donald A. Huettl wrote:
> The PCI controller on Cable Port 1 is not detected on my Abit BP6 (Cable
> Port 0 is
> found).  Kernel 2.3.12 worked.  Kernel 2.3.18ac8 does not.  The small
> diff below
> fixed my particular environment.
> 
> Thanks
> 
> DH
> Setup:
> Abit BP6 dual Celeron board with two 366MHz CPUs
> SMP kernel 2.3.18ac8
> 
> 
> + diff /usr/src/linux/drivers/block/ide-pci.c.ac8
> /usr/src/linux/drivers/block/ide-pci.c.DAH
> 614c614
> <  if (dev2 && !hpt363_shared_irq) {
> ---
> >  if (dev2) {
> 
> 
> # --------- part of /var/log/messages  after my small change
> ----------------Sep 25 22:23:38 fs1 syslogd 1.3-3: restart.
> Sep 25 22:23:38 fs1 syslog: syslogd startup succeeded
> Sep 25 22:23:38 fs1 kernel: klogd 1.3-3, log source = /proc/kmsg
> started.
> Sep 25 22:23:38 fs1 kernel: Inspecting /boot/System.map-2.3.18ac8
>                 .
>                 .
> Sep 25 22:23:38 fs1 kernel: Uniform Multi-Platform E-IDE driver
> Revision: 6.20
> Sep 25 22:23:38 fs1 kernel: PIIX4: IDE controller on PCI bus 00 dev 39
> Sep 25 22:23:38 fs1 kernel: PIIX4: not 100% native mode: will probe irqs
> later
> Sep 25 22:23:38 fs1 kernel:     ide0: BM-DMA at 0xf000-0xf007, BIOS
> settings: hda:DMA, hdb:pio
> Sep 25 22:23:38 fs1 kernel:     ide1: BM-DMA at 0xf008-0xf00f, BIOS
> settings: hdc:DMA, hdd:pio
> Sep 25 22:23:38 fs1 kernel: HPT366: onboard version of chipset, pin1=1
> pin2=2
> Sep 25 22:23:38 fs1 kernel: HPT366: IDE controller on PCI bus 00 dev 98
> Sep 25 22:23:38 fs1 kernel: HPT366: not 100% native mode: will probe
> irqs later
> Sep 25 22:23:38 fs1 kernel: HPT366: reg5ah=0x01 ATA-66 Cable Port0
> Sep 25 22:23:38 fs1 kernel:     ide2: BM-DMA at 0xe000-0xe007, BIOS
> settings: hde:pio, hdf:pio
> Sep 25 22:23:38 fs1 kernel: HPT366: IDE controller on PCI bus 00 dev 99
> Sep 25 22:23:38 fs1 kernel: HPT366: not 100% native mode: will probe
> irqs later
> Sep 25 22:23:38 fs1 kernel: HPT366: reg5ah=0x01 ATA-66 Cable Port1
> Sep 25 22:23:38 fs1 kernel:     ide3: BM-DMA at 0xec00-0xec07, BIOS
> settings: hdg:pio, hdh:pio
> Sep 25 22:23:38 fs1 kernel: hda: Maxtor 91152D8, ATA DISK drive
> Sep 25 22:23:38 fs1 kernel: hdc: CD-524EA, ATAPI CDROM drive
> Sep 25 22:23:38 fs1 kernel: hde: IBM-DJNA-371350, ATA DISK drive
> Sep 25 22:23:38 fs1 kernel: hdg: IBM-DJNA-371350, ATA DISK drive
> Sep 25 22:23:38 fs1 kernel: ide0 at 0x1f0-0x1f7,0x3f6 on irq 14
> Sep 25 22:23:38 fs1 kernel: ide1 at 0x170-0x177,0x376 on irq 15
> Sep 25 22:23:38 fs1 kernel: ide2 at 0xd800-0xd807,0xdc02 on irq 11
> Sep 25 22:23:38 fs1 kernel: ide3 at 0xe400-0xe407,0xe802 on irq 11
> Sep 25 22:23:38 fs1 kernel: hda: Maxtor 91152D8, 10991MB w/256kB Cache,
> CHS=1401/255/63, UDMA(33)
> Sep 25 22:23:38 fs1 kernel: hde: UDMA 4 drive0 (0x90c9a731 0x10c9a731)
> 0x0000
> Sep 25 22:23:38 fs1 kernel: hde: IBM-DJNA-371350, 12949MB w/1966kB
> Cache, CHS=26310/16/63, UDMA(66)
> Sep 25 22:23:38 fs1 kernel: hdg: UDMA 4 drive0 (0x90c9a731 0x10c9a731)
> 0x0000
> Sep 25 22:23:38 fs1 kernel: hdg: IBM-DJNA-371350, 12949MB w/1966kB
> Cache, CHS=26310/16/63, UDMA(66)
> Sep 25 22:23:38 fs1 kernel: hdc: ATAPI 24X CD-ROM drive, 128kB Cache,
> DMA
> Sep 25 22:23:38 fs1 kernel: Uniform CDROM driver Revision: 3.04
> Sep 25 22:23:38 fs1 kernel: Floppy drive(s): fd0 is 1.44M
> Sep 25 22:23:38 fs1 kernel: FDC 0 is a post-1991 82077
> Sep 25 22:23:38 fs1 kernel: md driver 0.36.6 MAX_MD_DEV=4, MAX_REAL=8
> 
> 
> 
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/