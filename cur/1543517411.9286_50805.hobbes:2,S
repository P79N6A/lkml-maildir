Date: 30 Nov 1999 15:20:11 +0000
From: David Wragg <>
Subject: Re: AMD Athlon flags and /proc/cpuinfo
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/11/30/82

BOSZORMENYI Zoltan <zboszor@mol.hu> writes:
> > I noticed several Athlon flags were missing from /proc/cpuinfo,
> > especially mmx_ext and 3dnow_ext. I looked them up in the AMD
> > documentation. This is the resulting patch:
> 
> You forgot one bit though, bit 16 is "pat" on Athlon (just like
> on PPro+), not "fcmov". Add an
(PPro didn't have PAT. It was first introduced in the original PII
Xeon, and (from a quick survey I just performed) then in the PII
Deschutes and subsequent mainstream P6s).
> 
>         if (c->x86 < 6) x86_cap_flags[16] = "fcmov";
>         else x86_cap_flags[16] = "pat";
> 
> to your patch. Or to simplify things, change the common
> flag name table in setup.c.
The K7 has PAT too? Excellent. Now we need PAT support in the kernel,
so we can start to forget all of the petty restrictions of the
MTRRs. With sensible PAT support, XFree86 should just be able to do
   fd = open("/dev/mem", O_RW);
   mmap(..., WRITE_COMBINING, fd, ...);
to map a linear frame buffer write combining, without any of the
annoying details that the MTRRs introduce. ioremap should accept
similar flags.
David Wragg
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/