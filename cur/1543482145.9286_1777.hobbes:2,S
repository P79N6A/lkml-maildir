Date: Mon, 25 Jan 1999 22:50:33 +0000 (GMT)
From: (Alan Cox)
Subject: Re: Update: 2.0 kernels, tulip driver, crashes and reboots (long)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/1/25/153

> So then we get back to, "why are we generating SMIs in the first place if
> APM is disabled?" Turns out the USB on the motherboard uses SMM to poll for
> dumb devices like keyboards. (With the Award BIOS, if you plug in a regular
> keyboard, it seems to shut off the USB polling.)
> We still don't know exactly what causes the problem or why different
> kernels seem to affect the problem. What we do know is that with APM and
> USB disabled we have no problems.
There are some background hints on how the SMI stuff works with USB devices
and USB "legacy mode". Thats the mode where SMM code is used to fake I/O
to the keyboard port and talk USB hidbp to the USB devices from DOS. With
no keyboard present its reasonable to expect the USB polls to be active.
If you are curious get the OHCI and UHCI specs.
And yes the nasty explosion in SMM mode is going to be unfortunate and must
be "their bug" (tm)
Alan
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/