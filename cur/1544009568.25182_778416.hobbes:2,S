Date: Tue, 9 Dec 2008 05:02:27 +0300
From: Alexander Beregalov <>
Subject: [PATCH] mm/memory: use uninitialized_var() macro for suppressing gcc warnings
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/12/8/356

uninitialized_var() macro was introduced in 94909914
(Add unitialized_var() macro for suppressing gcc warnings)
mm/memory.c:1485: warning: 'ptl' may be used uninitialized in this function
mm/memory.c:561: warning: 'dst_ptl' may be used uninitialized in this function
Signed-off-by: Alexander Beregalov <a.beregalov@gmail.com>
---
 mm/memory.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)
diff --git a/mm/memory.c b/mm/memory.c
index fc031d6..5610a45 100644
--- a/mm/memory.c
+++ b/mm/memory.c
@@ -558,7 +558,7 @@ static int copy_pte_range(struct mm_struct *dst_mm, struct mm_struct *src_mm,
 		unsigned long addr, unsigned long end)
 {
 	pte_t *src_pte, *dst_pte;
-	spinlock_t *src_ptl, *dst_ptl;
+	spinlock_t *src_ptl, *uninitialized_var(dst_ptl);
 	int progress = 0;
 	int rss[2];
 
@@ -1482,7 +1482,7 @@ static int remap_pte_range(struct mm_struct *mm, pmd_t *pmd,
 			unsigned long pfn, pgprot_t prot)
 {
 	pte_t *pte;
-	spinlock_t *ptl;
+	spinlock_t *uninitialized_var(ptl);
 
 	pte = pte_alloc_map_lock(mm, pmd, addr, &ptl);
 	if (!pte)