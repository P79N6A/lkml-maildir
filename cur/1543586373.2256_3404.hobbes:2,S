Date: Sun, 1 Apr 2001 12:49:58 -0700
From: Jag <>
Subject: Re: Temporary disk space leak
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/4/1/9

On Sat, 31 Mar 2001, Giuliano Pochini wrote:
> 
> [root@Jay Giu]# du -c /home
> [...]
> 320120	/home
> 320120	total
> [root@Jay Giu]# df
> Filesystem           1k-blocks      Used Available Use% Mounted on
> /dev/sda8               253823     65909    174807  27% /
> /dev/sda7              2158320    750672   1296240  37% /usr
> /dev/sda5              2193082   1898198    183474  91% /home
> /dev/sda9              1013887    899924     61586  94% /opt
> 
> 
> It happened after I wrote and deleted very large files (~750MB) a
> few times in my home dir.
> Then I logged out and I relogged in as root to check what happened
> and "df" shown everything was right again:
> 
> /dev/sda5              2193082    320122   1761550  15% /home
> 
> 
> ...strange...
Was the 750M file opened by a program when it was deleted?  When a file
is deleted, if it is opened, it will still be there and taking up file
space (as shown in df) until it is completely closed.  However, even if
the file is opened by a process and not really deleted, the file's space
will no longer show up in du because the file can no longer be accessed
through the filesystem.
It sounds like this is what happened, and whatever program had the file
open was closed when you logged out.
Jag
[unhandled content-type:application/pgp-signature]