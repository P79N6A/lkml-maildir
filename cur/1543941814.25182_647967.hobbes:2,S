Date: Mon, 4 Feb 2008 12:36:35 +0100
From: Borislav Petkov <>
Subject: Re: [PATCH] ide-tape: dump gcw fields on error in idetape_identify_device()
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/2/4/64

On Sun, Feb 03, 2008 at 08:16:42PM +0300, Sergei Shtylyov wrote:
> Bartlomiej Zolnierkiewicz wrote:
>
>> Signed-off-by: Bartlomiej Zolnierkiewicz <bzolnier@gmail.com>
>
> Acked-by: Sergei Shtylyov <sshtylyov@ru.mvista.com>
>
>> Index: b/drivers/ide/ide-tape.c
>> ===================================================================
>> --- a/drivers/ide/ide-tape.c
>> +++ b/drivers/ide/ide-tape.c
>> @@ -3852,16 +3852,17 @@ static int idetape_identify_device (ide_
>>   	/* Check that we can support this device */
>>  -	if (gcw.protocol !=2 )
>> -		printk(KERN_ERR "ide-tape: Protocol is not ATAPI\n");
>> +	if (gcw.protocol != 2)
>> +		printk(KERN_ERR "ide-tape: Protocol (0x%02x) is not ATAPI\n",
>> +				gcw.protocol);
>>  	else if (gcw.device_type != 1)
>> -		printk(KERN_ERR "ide-tape: Device type is not set to tape\n");
>> +		printk(KERN_ERR "ide-tape: Device type (0x%02x) is not set "
>> +				"to tape\n", gcw.device_type);
>>  	else if (!gcw.removable)
>>  		printk(KERN_ERR "ide-tape: The removable flag is not set\n");
>>  	else if (gcw.packet_size != 0) {
>> -		printk(KERN_ERR "ide-tape: Packet size is not 12 bytes long\n");
>> -		if (gcw.packet_size == 1)
>> -			printk(KERN_ERR "ide-tape: Sorry, padding to 16 bytes is still not supported\n");
>> +		printk(KERN_ERR "ide-tape: Packet size (0x%02x) is not 12 "
>> +				"bytes long\n", gcw.packet_size);
>
>    Shouldn't it be either "packet size is not 12 byted" or "packet is not 
> 12 bytes long"?
I like the last one better. Will send a correction later on to Bart. Thanks.
-- 
Regards/Gru√ü,
    Boris.
--
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/