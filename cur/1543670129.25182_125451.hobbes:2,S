Date: Tue, 15 Apr 2003 23:00:54 -0400
From: Jan Harkes <>
Subject: Re: [Bug 583] New: Enabling Coda with Devfs causes Kernel Panic
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/4/15/283

On Mon, Apr 14, 2003 at 08:34:03PM -0700, Martin J. Bligh wrote:
> 
http://bugme.osdl.org/show_bug.cgi?id=583
> [<c01a4a62>] devfs_mk_dir+0x22/0xd0 
> [<c01360d1>] kmalloc+0x81/0x99 
> [<c0150e47>] register_chrdev_region+0x17/0x120 
Part of the backtrace doesn't make much sense, but the problem is caused
by the devfs_mk_dir simplification that went in a couple of weeks ago.
Jan
--- linux-2.5.67/fs/coda/psdev.c.orig	2002-12-17 21:09:56.000000000 -0500
+++ linux-2.5.67/fs/coda/psdev.c	2003-04-15 23:05:04.000000000 -0400
@@ -371,7 +371,7 @@
 		     CODA_PSDEV_MAJOR);
               return -EIO;
 	}
-	devfs_mk_dir (NULL, "coda", NULL);
+	devfs_mk_dir ("coda");
 	for (i = 0; i < MAX_CODADEVS; i++) {
 		char name[16];
 		sprintf(name, "coda/%d", i);
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/