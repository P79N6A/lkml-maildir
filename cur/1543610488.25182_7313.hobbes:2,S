Date: Fri, 23 Nov 2001 15:28:25 -0500
From: "Kristofer T. Karas" <>
Subject: Re: is 2.4.15 really available at www.kernel.org?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/11/23/156

rpjday wrote:
> [...]www.kernel.org/pub/linux/kernel/v2.4/linux-2.4.15.tar.bz2, and it
> completed after downloading *exactly* 155312 bytes, just as before.
>
> getting it via ftp works fine -- it's http that's giving me this
> weird problem.   is it just me?
You probably have a proxy server in your path that doesn't re-request partially-sent
files.  I have your problem too, using squid-cache as the proxy.  Here's what
happens:
The http server (kernel.org) sends the file to the proxy, which sends it to you.  But
because the net connection from kernel.org to the proxy is faster than it is from
proxy to you, the tcp window between proxy and kernel.org goes to zero.  When it
opens up again, kernel.org closes the connection even though the file is only
partially received.  The proxy, failing to detect that the file is smaller than the
Content-Length header said it would be, simply sends the truncated contents  your
way.
I "fixed" this bug by using 'wget' to retrieve the files for me.  It has the same
problem, obtaining a truncated file; but it is smart enough to re-request missing
byte-ranges of the file, ultimately obtaining the entire thing.
Kris
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/