Date: Thu, 19 Jun 2003 12:18:08 -0500
From: Ray Bryant <>
Subject: Re: PROBLEM: Bug in __pollwait() can cause select() and poll() to hang  in   2.4.21
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/6/19/145

Andi Kleen wrote:
> 
> Nasty bug. How about adding a BUG() for current->state != TASK_RUNNING at
> the beginning of __alloc_pages unless GFP_ATOMIC is set?
> 
> -Andi
A good idea.  There may be other places like this that call into
__alloc_pages() with current->state != TASK_RUNNING.
However, this may break otherwise happily running kernels being used in
production today that are not in low memory situations.  Might it not be
better for me to run this in debug mode and see if we can find other
places where this is happening?  If I don't find any, then we can add
the BUG() as a way to avoid future introductions of this problem.
-- 
Best Regards,
Ray
-----------------------------------------------
                  Ray Bryant
512-453-9679 (work)         512-507-7807 (cell)
raybry@sgi.com             raybry@austin.rr.com
The box said: "Requires Windows 98 or better",
           so I installed Linux.
-----------------------------------------------
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/