Date: Wed, 16 Jun 1999 19:16:03 +0200 (EEST)
From: Andrzej Krzysztofowicz <>
Subject: [PATCH] fix for CONFIG_NCPFS_NLS
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/6/16/108

Hi,
  The CONFIG_NCPFS_NLS is not properly set in some cases. Problem appears
(in both: 2.2.10 and 2.3.6) when:
- CONFIG_NCPFS_NLS is defined in old .config
- there's no filesystem needing CONFIG_NLS defined (fat/iso/ntfs)
- for some reason fs/ncpfs/Config.in is not processed
  (CONFIG_NCP_FS set to "n" or CONFIG_IPX & CONFIG_INET are both set to "n"
  or CONFIG_NET is set to "n")
Then CONFIG_NCPFS_NLS is not redefined during current config procedure
and one have to ask to many NLS related questions which have no effect.
The patch against 2.3.6 follows.
     Andrzej
***********************************************************************
--- fs/Config.in	Fri Jun 11 14:35:32 1999
+++ fs/Config.in	Wed Jun 16 18:57:01 1999
@@ -98,10 +98,17 @@
   tristate 'NCP filesystem support (to mount NetWare volumes)' CONFIG_NCP_FS
   if [ "$CONFIG_NCP_FS" != "n" ]; then
     source fs/ncpfs/Config.in
+  else
+    define_bool CONFIG_NCPFS_NLS n
   fi
+else
+  define_bool CONFIG_NCPFS_NLS n
 fi
 
 endmenu
+
+else
+  define_bool CONFIG_NCPFS_NLS n
 fi
 
 mainmenu_option next_comment
***********************************************************************
-- 
=======================================================================
  Andrzej M. Krzysztofowicz               ankry@mif.pg.gda.pl
  tel.  (0-58) 347 14 61
Wydz.Fizyki Technicznej i Matematyki Stosowanej Politechniki Gdanskiej
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/