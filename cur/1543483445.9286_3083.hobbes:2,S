Date: Sun, 31 Jan 1999 22:58:54 +0100 (MET)
From: Gerard Roudier <>
Subject: Re: kmalloc
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/1/31/127

On Fri, 29 Jan 1999, Gabriel Paubert wrote:
[ ... ]
> > A PCI device driver want to tell the kernel:
> > 
> > - Give me some MMIO handle to access this configured PCI BUS address range
> >   on that PCI BUS, but I donnot care of how you will proceed for it.
> > 
> > Instead of that, you tell the driver:
> > 
> > - Provide ioremap() with some right-cooked address value supplied in the
> >   pcidev structure and you will get some address-typed value to access the
> >   device.
> 
> Perhaps, but do not forget the needs of some lesser known programs like
> Xservers too, or propose a new interface for programs who need the
> equivalent of mmap on /dev/mem.  And anyway the cooked value is the
> physical address on the processor pins as Martin repeated, it's not that
> artificial and it's the lesser evil we have to live with for 2.2. 
Hi Gabriel,
I didn't write that I didn't want MMIO regions to be memory-mapped from
user space, nor I forget this need, and I will probably _never_ write
that. It is its memory-like based design that makes PCI so simple and
pleasant. I already wrote about what I think about hardwares that do not
have a unified memory addressing for all BUSES and host memory that break
the simplicity of PCI and introduced the complexity with addressing we
have to deal with. 
I was only speaking about the base_addresses provided by the pci_dev
structure that has been presented as some input parameters for ioremap()
and told that this is _not_, in my opinion, what a PCI device driver
expects as kernel service, or at least _not_ enough.
I like oranges and apples as well, but dislike any mix of both, btw.
Regards,
   GÃ©rard.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/