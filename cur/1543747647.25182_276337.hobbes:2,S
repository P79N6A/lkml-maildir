Date: Thu, 2 Dec 2004 23:31:46 +0100
From: Stefan Schmidt <>
Subject: Re: Kernel 2.6.9 Multiple Page Allocation Failures
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/12/2/228

On Thu, Dec 02, 2004 at 10:03:48PM +0100, Lukas Hejtmanek wrote:
> > > I found out that 2.6.6-bk4 kernel is OK. 
> > That kernel didn't have the TSO thing.  Pretty much all of these reports
> > have been against e1000_alloc_rx_buffers() since the TSO changes went in.
> > Did you try disabling TSO, btw?
> I did it. Allocation failure is still there :(
I had no luck with/without TSO either but on tg3.
I disabled the on-disk-caching component of the application and it now runs
without page allocation errors. Currently it is running smoothly at ~500mbit/s
and ~80kpps in each direction at ~44k interrupts/s, so the problematic
combination seems to be many open files, high i/o transaction rate or
troughput and heavy networking load. (tso currently on)
Caching on ext2-fs in general seemed to generate less page allocation errors
than on xfs and none of the traces i looked over so far showed involvement
of the filesystem i.e. were all triggered by alloc_skb.
	Stefan
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/