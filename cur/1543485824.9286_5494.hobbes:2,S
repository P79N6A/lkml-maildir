Date: Mon, 15 Feb 1999 15:34:11 +0000 (GMT)
From: Robert de Bath <>
Subject: Micro-patch to console.c
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/2/15/93

This tiny patch allows the character $9D to be either CSI or a literal
character depending on the currently selected character set. It's only
been tested by me, but it's only one line ... <snigger>
ie:
    ^[(B	It's the control character
    ^[(0	It's the control character
    ^[(U	It's the US cent symbol
    ^[(K	It could be either depending on the mapping
    ^[%G	It'd be a control - but UTF has already weirded it anyway!
In theroy all the conditions there should be from 'tc' BUT while it would
increase the versatility (allowing EBCDIC for instance) it'll also allow
seriously broken mappings (ermm like EBCDIC :-) )
--- console.c.orig	Tue Jan 19 18:10:23 1999
+++ console.c	Tue Feb  2 23:05:30 1999
@@ -1865,7 +1865,7 @@
                             (!utf && !(((disp_ctrl ? CTRL_ALWAYS
                                          : CTRL_ACTION) >> c) & 1)))
                         && (c != 127 || disp_ctrl)
-			&& (c != 128+27);
+			&& (c != 128+27 || tc != 128+27);
 
 		if (vc_state == ESnormal && ok) {
 			/* Now try to find out how to display it */
-- 
Rob.                          (Robert de Bath <
http://poboxes.com/rdebath>
)
                    <rdebath @ poboxes.com> <
http://www.cix.co.uk/~mayday>
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/