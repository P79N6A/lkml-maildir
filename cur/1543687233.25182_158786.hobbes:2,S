Date: Tue, 19 Aug 2003 13:06:25 -0700
From: Dave Olien <>
Subject: Re: [PATCH] move DAC960 GAM IOCTLs into a new device
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/8/19/272

The interface to the original ioctl() was strange.  One of the
arguments to the ioctl() was the controller number you wanted to operate
on.  So, opening /dev/rd/c0d0 with O_NONBLOCK flag gave you a fd to
operate on ANY of the controllers.
One of the operations you can perform is to ask how many controllers
there are, and what their types are.
I've kept the original ioctl() argument structure. So you still pass
in the controller number you want to work with. But at least now the
file name the RAID control application opens is divorced from any
controller number.
There are lots of ways this could be made nicer.  I've just
tried to get rid of the single ugliest part without changing it so much that
it would be difficult to get the older applications to work again.
On Tue, Aug 19, 2003 at 03:57:56PM -0400, Ricky Beam wrote:
> On Tue, 19 Aug 2003, Dave Olien wrote:
> >...  It introduces a new "miscellaneous" device
> >named /dev/dac960_gam.  It uses minor device number 252 of the miscellaneous
> >character devices.
> 
> And what happens when there are more than one DAC in the system?  Why not
> put it where the rest of the DAC devices are? (/dev/rd/gam/c0 or something)
> 
> --Ricky
> 
> 
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/