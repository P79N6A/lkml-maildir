Date: Tue, 3 Jun 2003 10:55:21 -0500
From: Hollis Blanchard <>
Subject: [CHECKER][PATCH] bw-qcam.c bad copy_to_user
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/6/3/141

Like radio-cadet.c, bw-qcam.c is calling copy_to_user() where it 
shouldn't. The user buffer is copied to/from kernel space by 
drivers/media/video/videodev.c:video_usercopy() . Please apply.
-- 
Hollis Blanchard
IBM Linux Technology Center
===== drivers/media/video/bw-qcam.c 1.11 vs edited =====
--- 1.11/drivers/media/video/bw-qcam.c	Sun Feb 16 18:16:53 2003
+++ edited/drivers/media/video/bw-qcam.c	Tue Jun  3 10:28:29 2003
@@ -723,8 +723,6 @@
 			/* Good question.. its composite or SVHS so.. */
 			v->type = VIDEO_TYPE_CAMERA;
 			strcpy(v->name, "Camera");
-			if(copy_to_user(arg, &v, sizeof(v)))
-				return -EFAULT;
 			return 0;
 		}
 		case VIDIOCSCHAN: