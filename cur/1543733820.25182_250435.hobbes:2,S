Date: Thu, 09 Sep 2004 13:23:00 +1000
From: Greg Banks <>
Subject: Re: Major XFS problems...
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/9/8/364

On Thu, 2004-09-09 at 05:06, Bill Davidsen wrote:
> Greg Banks wrote:
> > On Thu, 2004-09-09 at 01:44, Jakob Oestergaard wrote:
> > 
> >>SMP systems on 2.6 have a problem with XFS+NFS.
> > 
> > 
> > Knfsd threads in 2.6 are no longer serialised by the BKL, and the
> > change has exposed a number of SMP issues in the dcache.  Try the
> > two patches at
> > 
> > http://marc.theaimsgroup.com/?l=linux-kernel&m=108330112505555&w=2
> > 
> > and
> > 
> > 
http://linus.bkbits.net:8080/linux-2.5/cset@1.1722.48.23
> > 
> > (the latter is in recent Linus kernels).  If you're still having
> > problems after applying those patches, Nathan and I need to know.
> 
> Do I read you right that this is an SMP issue and that the NFS, quota, 
> backup and all that are not relevant?
The first issue is NFS-specific.  The second one is an ancient dcache
bug from before 2.6 which NFS changes in 2.6 uncovered; however it
could affect any filesystem with or without NFS.  Neither have anything
to do with quota or backup per se, except that backup might generate
enough load to help them happen.
Greg.
-- 
Greg Banks, R&D Software Engineer, SGI Australian Software Group.
I don't speak for SGI.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/