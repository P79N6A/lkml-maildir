Date: Tue, 31 Oct 2006 11:56:46 +1100
From: Herbert Xu <>
Subject: Re: [BUG] dmsetup table output changed from 2.6.18 to 2.6.19-rc3 and breaks yaird.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/10/30/381

On Mon, Oct 30, 2006 at 08:39:08PM +0100, Christophe Saout wrote:
>
> > Herbert, the breakage _seems_ to be due to the STATUSTYPE_TABLE case 
> > change:
> > 
> > -		cipher = crypto_tfm_alg_name(cc->tfm);
> > +		cipher = crypto_blkcipher_name(cc->tfm);
> > 
> > which effectively changes "aes" into "cbc(aes)", which is wrong, since we 
> > show the chainmode separately.
Yes that's wrong.
However, the bigger problem is that dmcrypt's algorithm specification
does not allow all algorithms to be specified.  In particular, algorithms
with dashes in their names cannot be represented in an unambiguous way.
The separation of chain modes and algorithm names is in fact unnecessary
and only complicates matters.
For now it's no big deal since the algorithms people actually use
can be represented.  But it would be nice to get this fixed.
> ----
> 
> Fix dm-crypt after the block cipher API changes to correctly return the
> backwards compatible cipher-chainmode[-ivmode] format for "dmsetup
> table".
> 
> Signed-off-by: Christophe Saout <christophe@saout.de>
Looks good to me.
Acked-by: Herbert Xu <herbert@gondor.apana.org.au>
Thanks,
-- 
Visit Openswan at 
http://www.openswan.org/
Email: Herbert Xu 许志壬 <herbert@gondor.apana.org.au>
Home Page: 
http://gondor.apana.org.au/herbert/
PGP Key: 
http://gondor.apana.org.au/herbert/pubkey.txt
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/