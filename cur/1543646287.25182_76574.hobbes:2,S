Date: 04 Oct 2002 10:57:51 -0700
From: Scott Bronson <>
Subject: Re: FAT/VFAT and the sync flag
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/10/4/231

On Fri, 2002-10-04 at 08:33, OGAWA Hirofumi wrote:
> You are right. The fatfs just ignore the sync flag.
"Randy.Dunlap" <rddunlap@osdl.org> writes:
> What advantage would implementing sync have for FAT-fs?
> When you unmount a device (before removing it), the filesystem
> is automatically sync-ed (with some possible delay time here to
> perform I/O).  That could provide a quicker unmount, at the
> expense of spreading the device (filesystem) I/O out across
> all device reads/writes over time.  (did that make sense?) ...
> Is there some usage scenario that you are interested in that I am
> just missing?
That made perfect sense.  However, I'm happy with the unmount times. 
I'm worried about ham-fisted users.
When you unplug a VFAT-mounted device from FireWire or USB without
remembering to unmount it first, you get instant file system
corruption.  I've done it a few times myself even though I know better! 
I'm in a hurry, I grab the device, poof!  It's now broken until I can
run fsck.vfat on it and restore missing files.  It's not fun.
If VFAT supported the sync flag, then neglecting to unmount it would not
be so catastrophic.  Well, unless you unplug it in the middle of disk
activity, in which case you're asking for it.  :)
I'd just like Linux to try to avoid dying catastrophically if someone
makes a simple mistake.  Any idea how much effort it would take to add
sync support to VFAT?  Thanks,
    - Scott
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/