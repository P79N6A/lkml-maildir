Date: Fri, 16 Apr 1999 10:12:33 -0400 (EDT)
From: Andrew Schretter <>
Subject: Re: NFSv3 client for Linux-2.2.5 ready for alpha testing...
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/4/16/72

> This argument half-convinced me that support for rsize>4k is needed
> for the Solaris case. I've therefore implemented it in the latest
> version (0.7.0) of the NFSv3 patches:
>  Please could Andrew and others who've been seeing slow reading wrt
> Solaris machines test this code out. If it makes no difference, I'll
> scrap it...
I installed the new patches and tried out the kernel.
The first reboot resulted in a kernel panic and a reboot.
(Sorry I couldn't catch it).  The second reboot didn't
panic but gave a message about the interrupt handler then
rebooted.
I tracked both of these down to trying to use NFSv2 mounts with 8192 read
sizes from a linux server.  So I booted without mounting anything. Tried
using NFSv3 mounts to a solaris server.  This worked, mostly, but produced
the following errors :
Writing to the solaris server was fine.
Reading produced the errors :
NFS: Odd RPC header size in read reply: 128
This repeated several times.
Then I tried mounting NFSv2 from a solaris server with
32768 rsize.  It mounted and wrote with no errors.
Reading produced the errors :
RPC: garbage, retrying 2553
RPC: garbage, retrying 2553
RPC: garbage, exit EIO
These repeated with different increasing values of 9 (the next value
was 2562 and so on).
Finally, to try to reproduce the crashes above, I tried
mounting a linux server via NFSv2 with an 8192 rsize,
then copy a file from it.  It locked up the system hard with
no error messages.
Hope this helps.
Andrew Schretter
Systems Programmer, Duke University
Dept. of Mathematics (919) 660-2866
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/