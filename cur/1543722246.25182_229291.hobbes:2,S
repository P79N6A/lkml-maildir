Date: Tue, 22 Jun 2004 17:51:33 +0200
From: Michael Hunold <>
Subject: [PATCH][2.6] drivers/media/video/tda9840.c: honour return code of i2c_add_driver()
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/6/22/121

Hello Linus,
i2c_add_driver() may actually fail, but my driver returns 0
regardless. Thanks to Arthur Othieno <a.othieno@bluewin.ch> for this 
obviously correct patch.
Signed-off-by: Michael Hunold <hunold@linuxtv.org>
Signed-off-by: Arthur Othieno <a.othieno@bluewin.ch>
  tda9840.c |    7 +++----
  1 files changed, 3 insertions(+), 4 deletions(-)
--- a/drivers/media/video/tda9840.c	2003-12-18 03:59:06.000000000 +0100
+++ b/drivers/media/video/tda9840.c	2004-06-04 18:15:25.000000000 +0200
@@ -268,13 +268,12 @@ static struct i2c_driver driver = {
          .command	= tda9840_command,
  };
-static int tda9840_init_module(void)
+static int __init tda9840_init_module(void)
  {
-        i2c_add_driver(&driver);
-        return 0;
+        return i2c_add_driver(&driver);
  }
-static void tda9840_cleanup_module(void)
+static void __exit tda9840_cleanup_module(void)
  {
          i2c_del_driver(&driver);
  }
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/