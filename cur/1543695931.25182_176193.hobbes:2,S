Date: Sun, 2 Nov 2003 11:23:40 -0800 (PST)
From: Dustin Lang <>
Subject: No backlight control on PowerBook G4
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/11/2/64

Hi,
I just bought a new PowerBook G4 and installed Linux on it.  Now the
tweaking begins!  One of the first orders of business is getting power
management working, and I'm a bit stuck.
I'm running kernel version 2.4.22 with Ben Herrenschmidt's 2.4.23-pre5
patches.
On startup, arch/ppc/platform/pmac_backlight.c doesn't recognize the
backlight controller.  It checks compatibility with a couple of specific
machines, and then checks compatibility with the backlight controller.
This appears to be the same check that is performed in the Darwin/xnu
kernel (at least the version that I found...).
I've got a bit of experience with kernel hacking so I'd be very happy to
help figure out what's going on and how to fix it, but I'm also new to
this platform and I don't know how one goes about finding hardware
documentation and other useful sorts of resources.
Any (non-null) pointers would be appreciated!
Cheers,
dstn.
Here are some details from /proc/device-tree that might be relevant (I've
used "/" as token separator):
in /:
model = PowerBook6,2
compatible = PowerBook6,2/MacRISC3/Power Macintosh
in /pci@f2000000/:
model = AAPL,UniNorth
compatible = uni-north
in /pci@f2000000/mac-io@17/:
model = AAPL,Keylargo
compatible = Keylargo
in /pci@f2000000/mac-io@17/backlight@f300/:
name = backlight
device_type = backlight
backlight-control = mnca               <---- ack!
in /pci@f2000000/mac-io@17/via-pmu@16000/:
name = via-pmu
compatible = pmu
in /pci@f2000000/mac-io@17/via-pmu@16000/power-mgt/:
compatible = via-pmu-99
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/