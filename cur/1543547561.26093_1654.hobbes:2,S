Date: Mon, 04 Sep 2000 10:39:17 +0300
From: Petko Manolov <>
Subject: Re: [patch] string-486.h modified
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/9/4/5

"Richard B. Johnson" wrote:
> 
> > I think patch like this is not safe for 2.4.X-pre.
> >
> 
> Not safe only in that there is sooooo much stuff changed all at once
> that it'd be a good idea not to change anything that doesn't have to
> be changed. I agree.
Actually there are no so many changes. I removed very deep macro
definitions of memset and memcpy which confused gcc-2.95.2. They
didn't confused gcc-2.7.2.3, but anyway kernel crashed.
The code now is separated in two routines - one for the generic
case and one for the constant case. Which simplifies reading and
reduces code lines.
The other change is making memcmp alias to __builtin_memcmp which
i took from string.h and obviously works.
> > However, in 2.5.0 we should apply it, and force it on *all* cpus just
> > to test it well. Then in 2.5.10 we should turn it off for
> > pentium/MMX+.
> >
> >                                                               Pavel
> 
> Once 2.4 is released, has its usual bug-fixes, becomes reliable, then
> Petko can send his diff. That way, new problems won't be thought to
> be a result of his patch. That us a good idea.
Kernel compiled with 486 string routines works fine for me. No crashes
no oopses. The only problem i noticed so far is immediate silent reboot
when i try to load module(s). The lack of any register dump or sysloged
info make bug detection harder.
best,
Petkan
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/