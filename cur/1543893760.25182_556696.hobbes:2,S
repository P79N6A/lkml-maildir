Date: Wed, 13 Jun 2007 10:48:50 +0200
From: Jens Axboe <>
Subject: Re: [PATCH 1/18] splice: abstract out actor data
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/6/13/50

On Wed, Jun 13 2007, Peter Zijlstra wrote:
> On Tue, 2007-06-12 at 18:22 +0200, Jens Axboe wrote:
> > On Tue, Jun 12 2007, Eric Dumazet wrote:
> > > On Tue, 12 Jun 2007 08:57:57 +0200
> > > Jens Axboe <jens.axboe@oracle.com> wrote:
> > > 
> > > 
> > > > +	struct splice_desc sd = {
> > > > +		.total_len = len,
> > > > +		.flags = flags,
> > > > +		.pos = *ppos,
> > > > +	};
> > > > +
> > > > +	sd.file = out;
> > > 
> > > minor remark, why sd.file is setup differently than other fields ?
> > > 
> > > (this several times on this patch)
> > 
> > yeah, it's inside an anonymous union, and apparently gcc doesn't like it
> > being initialized that way.
> 
> The one time I had such a situation something along the lines of:
> 
> struct splice_desc sd = {
> 	.total_len = len,
> 	.flags = flags,
> 	.pos = *ppos,
> 	{ .file = out },
> };
> 
> worked.
OK, that looks pretty handy. But I just threw the towel into the ring
and named the union instead yesterday. The outside initialization of
file/userptr/data was an eyesore to me.
-- 
Jens Axboe
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/