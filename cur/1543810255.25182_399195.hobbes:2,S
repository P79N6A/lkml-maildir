Date: Mon, 20 Feb 2006 10:08:36 -0800 (PST)
From: Patrick Mochel <>
Subject: Re: [linux-pm] [PATCH 3/5] [pm] Respect the actual device power states in sysfs interface
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/2/20/274

On Mon, 20 Feb 2006, Pavel Machek wrote:
> Hi!
>
> > > > > Compatibility is already restored.
> > > >
> > > > No, the interface is currently broken. The driver core does not
> > > > dictate
> > >
> > > There were two different interfaces, one accepted 0 and 2, everything
> > > else was invalid, and second accepted 0, 1, 2, 3.
> > >
> > > If you enter D2 on echo 2, you are breaking compatibility with 2.6.15
> > > or something like that.
> >
> > I don't see how this is true. If a process writes "2" to a PCI device's
> > state file, what else are sane things to do?
>
> In some kernel version (2.6.15, iirc), device entered D3 if you wrote
> "2" to state file, and there are programs out there that depend on
> it.
Like what?
> > You dropped the fundamental point, and I don't understand why you disagree
> > with it - the driver core should not be dictating policy to the downstream
> > drivers. It is currently doing this by filtering the power state that is
> > passed in via the "state" file.
>
> That's best we can do to stay compatible. Please introduce new file,
> and make states string-based.
You are still overlooking the point - the core should not be filtering the
values. It currently is, but it's trivial to fix. What is your issue with
that?
Thanks,
	Pat
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/