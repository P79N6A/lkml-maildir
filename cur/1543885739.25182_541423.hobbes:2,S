Date: Tue, 8 May 2007 08:33:19 -0500
From: Kumar Gala <>
Subject: Re: [PATCH] [POWERPC] 8xx: PQ SoC IRDA support
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/5/8/205

On May 7, 2007, at 8:30 PM, Vitaly Bordug wrote:
>
> Adds support of IRDA transceiver residing on PowerQUICC processors and
> enabling such on mpc885ads reference board. The driver is implemented
> using of_device concept, hereby implies arch/powerpc support of the  
> target.
>
> Signed-off-by: Vitaly Bordug <vitb@kernel.crashing.org>
>
> Signed-off-by: Vitaly Bordug <vitb@kernel.crashing.org>
> ---
>
>  arch/powerpc/Kconfig                         |    1
>  arch/powerpc/boot/dts/mpc885ads.dts          |   10
>  arch/powerpc/platforms/8xx/mpc885ads_setup.c |   39 +
>  arch/powerpc/sysdev/fsl_soc.c                |   58 ++
>  drivers/net/irda/Kconfig                     |    4
>  drivers/net/irda/Makefile                    |    1
>  drivers/net/irda/m8xx-sir.c                  |  715 +++++++++++++++ 
> +++++++++++
>  include/asm-ppc/commproc.h                   |   67 ++
>  8 files changed, 895 insertions(+), 0 deletions(-)
>
> diff --git a/arch/powerpc/Kconfig b/arch/powerpc/Kconfig
> index a8e08f4..c283907 100644
> --- a/arch/powerpc/Kconfig
> +++ b/arch/powerpc/Kconfig
> @@ -605,6 +605,7 @@ endmenu
>  config ISA_DMA_API
>  	bool
>  	default y
> +	depends on !PPC_8xx
>
>  menu "Bus options"
>
> diff --git a/arch/powerpc/boot/dts/mpc885ads.dts b/arch/powerpc/ 
> boot/dts/mpc885ads.dts
> index 110bf61..95b280c 100644
> --- a/arch/powerpc/boot/dts/mpc885ads.dts
> +++ b/arch/powerpc/boot/dts/mpc885ads.dts
> @@ -178,6 +178,16 @@
>  				interrupt-parent = <930>;
>  				phy-handle = <e8002>;
>  			};
> +
> +			scc@a20 {
> +				device_type = "network";
> +				compatible = "fsl,irda";
is this specific enough?  52xx also has irda and I'm guessing they'd  
require different drivers (haven't looked).
> +				model = "SCC";
> +				device-id = <2>;
> +				reg = <a20 18 3d00 80>;
> +				interrupts = <1d 3>;
> +				interrupt-parent = <930>;
> +			};
>  		};
>  	};
>  };
[snip]
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/