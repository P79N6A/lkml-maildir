Date: Thu, 15 Dec 2005 16:47:36 +0000
From: Al Viro <>
Subject: Re: [PATCH 1/3] m68k: compile fix - hardirq checks were in wrong place
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/12/15/212

On Thu, Dec 15, 2005 at 12:58:12PM +0100, Roman Zippel wrote:
> You separate the definition from the check, now you push the 
> responsibility to get the order right to the header users.
There are two definitions, one in old place, another in new one.  You
need both seen before the check.  On m68k hardirq.h doesn't pull irq.h;
irq.h, OTOH, *does* pull hardirq.h via linux/interrupt.h -> linux/hardirq.h ->
asm/hardirq.h.  IOW, it's less responsibility, not more.
Moreover, new variant works; old one doesn't.  Both are brittle, but the
old one is flat-out _broken_.  As in, new one works with the actual
includes in the tree with no extra changes, old one breaks on a number
of existing files in the tree.
How the hell does that push responsibility to header users?
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/