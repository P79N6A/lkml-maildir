Date: Sat, 9 Aug 2003 16:12:18 +0100
From: Dave Jones <>
Subject: Re: 2.6test /proc/net/pnp oops.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/8/9/73

Ok, that patch stopped the random addresses appearing
in /proc/net/pnp. There are also a bunch of other vars
we output in that file also marked as initdata which
look like they need fixing for the same reason.
The only remaining curious item for me..
With this fixed, the bootserver is 0.0.0.0, and there's
a check which skips printing it if its INADDR_NONE
There are similar checks for the nameserver entries, but
they still get printed out (as 0.0.0.0)
		Dave
-- 
 Dave Jones     
http://www.codemonkey.org.uk
# This is a BitKeeper generated patch for the following project:
# Project Name: Linux kernel tree
# This patch format is intended for GNU patch command version 2.5 or higher.
# This patch includes the following deltas:
#	           ChangeSet	1.1064  -> 1.1065 
#	 net/ipv4/ipconfig.c	1.28    -> 1.29   
#
# The following is the BitKeeper ChangeSet Log
# --------------------------------------------
# 03/08/09	davej@redhat.com	1.1065
# mustnt be __initdata
# --------------------------------------------
#
diff -Nru a/net/ipv4/ipconfig.c b/net/ipv4/ipconfig.c
--- a/net/ipv4/ipconfig.c	Sat Aug  9 16:11:51 2003
+++ b/net/ipv4/ipconfig.c	Sat Aug  9 16:11:51 2003
@@ -125,14 +125,14 @@
 
 int ic_host_name_set __initdata = 0;		/* Host name set by us? */
 
-u32 ic_myaddr __initdata = INADDR_NONE;		/* My IP address */
-u32 ic_netmask __initdata = INADDR_NONE;	/* Netmask for local subnet */
-u32 ic_gateway __initdata = INADDR_NONE;	/* Gateway IP address */
+u32 ic_myaddr = INADDR_NONE;		/* My IP address */
+u32 ic_netmask = INADDR_NONE;	/* Netmask for local subnet */
+u32 ic_gateway = INADDR_NONE;	/* Gateway IP address */
 
-u32 ic_servaddr __initdata = INADDR_NONE;	/* Boot server IP address */
+u32 ic_servaddr = INADDR_NONE;	/* Boot server IP address */
 
-u32 root_server_addr __initdata = INADDR_NONE;	/* Address of NFS server */
-u8 root_server_path[256] __initdata = { 0, };	/* Path to mount as root */
+u32 root_server_addr = INADDR_NONE;	/* Address of NFS server */
+u8 root_server_path[256] = { 0, };	/* Path to mount as root */
 
 /* Persistent data: */
 