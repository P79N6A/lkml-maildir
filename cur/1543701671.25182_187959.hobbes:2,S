Date: 03 Jan 2004 21:32:13 +0100
From: Peter Osterlund <>
Subject: Re: ext2 on a CD-RW
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/1/3/121

Pavel Machek <pavel@suse.cz> writes:
> > --- linux/drivers/block/pktcdvd.c.old	2004-01-02 00:23:57.000000000 +0100
> > +++ linux/drivers/block/pktcdvd.c	2004-01-02 00:24:01.000000000 +0100
> > @@ -2164,6 +2164,7 @@
> >  	request_queue_t *q = disks[pkt_get_minor(pd)]->queue;
> > 
> >  	blk_queue_make_request(q, pkt_make_request);
> > +	blk_queue_hardsect_size(q, CD_FRAMESIZE);
> >  	blk_queue_max_sectors(q, PACKET_MAX_SECTORS);
> >  	blk_queue_merge_bvec(q, pkt_merge_bvec);
> >  	q->queuedata = pd;
> > 
> 
> Where do I get this file? It does not appear to be in 2.6.0.
> 
> [I have few partly-bad cd-rws, and putting ext2 on them would be
> "cool" :-)]
Look here:
        
http://w1.894.telia.com/~u89404340/packet.html
Download here:
        
http://w1.894.telia.com/~u89404340/patches/packet/2.6/
Note that this software is still beta quality at best. I'm not sure if
you'll have any success with partly bad cd-rws, but it doesn't hurt to
try I guess.
I haven't made a new release with the two latest bug fixes, so if you
plan to put ext2 on the disc, you need the quoted hardsect_size patch
and the bio split patch from a few days ago.
        http://marc.theaimsgroup.com/?l=linux-kernel&m=107306015810846&w=2
-- 
Peter Osterlund - petero2@telia.com
http://w1.894.telia.com/~u89404340
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/