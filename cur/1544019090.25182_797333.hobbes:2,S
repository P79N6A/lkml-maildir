Date: Tue, 27 Jan 2009 12:13:01 +0000
From: Ben Hutchings <>
Subject: Re: [PATCH] sfc: modify allocation error message
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2009/1/27/129

On Mon, 2009-01-26 at 07:04 -0800, Mike Travis wrote:
[...]
> Subject: sfc: modify allocation error message
> 
> Impact: change error message when alloc_cpumask_var fails.
> 
> Signed-off-by: Mike Travis <travis@sgi.com>
> Cc: Ben Hutchings <bhutchings@solarflare.com>
Acked-by: Ben Hutchings <bhutchings@solarflare.com>
> ï»¿--
>  drivers/net/sfc/efx.c |    4 ++--
>  1 file changed, 2 insertions(+), 2 deletions(-)
> 
> --- linux-2.6-for-ingo.orig/drivers/net/sfc/efx.c
> +++ linux-2.6-for-ingo/drivers/net/sfc/efx.c
> @@ -858,9 +858,9 @@ static int efx_wanted_rx_queues(void)
>         int count;
>         int cpu;
> 
> -       if (!alloc_cpumask_var(&core_mask, GFP_KERNEL)) {
> +       if (unlikely(!alloc_cpumask_var(&core_mask, GFP_KERNEL))) {
>                 printk(KERN_WARNING
> -                      "efx.c: allocation failure, irq balancing hobbled\n");
> +                      "sfc: RSS disabled due to allocation failure\n");
>                 return 1;
>         }
> 
-- 
Ben Hutchings, Senior Software Engineer, Solarflare Communications
Not speaking for my employer; that's the marketing department's job.
They asked us to note that Solarflare product names are trademarked.
--
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/