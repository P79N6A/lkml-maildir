Date: Wed, 31 Jan 2007 08:42:46 +1100
From: Grant Coady <>
Subject: [PATCH] -mm3: include/linux/blkdev.h double def'd -> compile fail
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/1/30/334

Hi there,
Random .config: 20-rc6-mm3a/002 found the following boo-boo...
From: Grant Coady <gcoady.lk@gmail.com>
Defining protos twice caused:
In file included from kernel/sched.c:39:
include/linux/blkdev.h:928: error: redefinition of 'blk_replug_current_nested'
include/linux/blkdev.h:907: error: previous definition of 'blk_replug_current_nested' was here
include/linux/blkdev.h:932: error: redefinition of 'blk_plug_current'
include/linux/blkdev.h:911: error: previous definition of 'blk_plug_current' was here
include/linux/blkdev.h:936: error: redefinition of 'blk_unplug_current'
include/linux/blkdev.h:915: error: previous definition of 'blk_unplug_current' was here
include/linux/blkdev.h:940: error: redefinition of 'blk_unplug_current_nested'
include/linux/blkdev.h:919: error: previous definition of 'blk_unplug_current_nested' was here
include/linux/blkdev.h:945: error: redefinition of 'blk_plug_current_nested'
include/linux/blkdev.h:924: error: previous definition of 'blk_plug_current_nested' was here
make[1]: *** [kernel/sched.o] Error 1
make: *** [kernel] Error 2
Patch is compile tested on 2.6.20-rc6-mm3.
Signed-off-by: Grant Coady <gcoady.lk@gmail.com>
---
 blkdev.h |   21 ---------------------
 1 files changed, 21 deletions(-)
--- linux-2.6.20-rc6-mm3/include/linux/blkdev.h	2007-01-30 16:25:30.000000000 +1100
+++ linux-2.6.20-rc6-mm3c/include/linux/blkdev.h	2007-01-31 08:01:28.000000000 +1100
@@ -924,27 +924,6 @@
 {
 }
 
-static inline void blk_replug_current_nested(void)
-{
-}
-
-static inline void blk_plug_current(void)
-{
-}
-
-static inline void blk_unplug_current(void)
-{
-}
-
-static inline int blk_unplug_current_nested(void)
-{
-	return 0;
-}
-
-static inline void blk_plug_current_nested(int depth)
-{
-}
-
 #endif /* CONFIG_BLOCK */
 
 #endif
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/