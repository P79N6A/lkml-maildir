Date: Sun, 2 Mar 2008 11:57:09 -0800
From: Arjan van de Ven <>
Subject: Re: Too many timer interrupts in NO_HZ
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/3/2/115

On Mon, 3 Mar 2008 01:18:13 +0530
Vaidyanathan Srinivasan <svaidy@linux.vnet.ibm.com> wrote:
> Hi,
> 
> I am trying to play around with the tickless kernel and
> sched_mc_power_savings tunables to increase the idle duration of the
> CPU in an SMP server.  sched_mc_power_savings provides good
> consolidation of long running jobs when the system is lightly loaded.
> However I am interested to see CPU idle times for couple minutes on
> atleast few CPUs in an completely idle SMP system.
> 
> I have posted related instrumentation results at
> 
http://lkml.org/lkml/2008/1/8/243
> 
> The experimental setup is identical.  Just that I have tried to
> collect more data and also bias the wakeup logic.
> 
> The kernel is 2.6.25-rc3 with NO_HZ, SCHED_MC, HIGH_RES_TIMERS, and
> HPET turned on.
> 
> I have tried to collect interesting data from tick-sched.c, sched.c
> and softirq.c.
> 
> As suggested by Ingo in the previous thread, I have hacked the sched.c
> try_to_wake_up logic so that I can force all wake-ups to happen on
> CPU0.  This is just and experiment, in reality we will have to
> carefully choose a domain and CPU to bias all wakeups on an idle
> system.
please show us powertop -d output; that way we can at least see sort of what
is going on...