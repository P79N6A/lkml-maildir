Date: Thu, 24 Dec 1998 10:11:37 +1100
From: Dancer <>
Subject: Re: nfsroot pathology
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1998/12/23/149

I think you'll find that if you lock the link speed to 10mpbs, instead
of 100, that your problem will go away. We had a similar problem with
the 3com 100mbps cards.
D
Brian Craft wrote:
> 
> I'm stumped on an odd nfsroot behavior I'm seeing:
> 
> NFS moves at about 8 kbaud. A 1k packet every second or so. It takes
> hours to boot (it's never made it all the way up). This is on 100bT
> media.
> 
> This doesn't happen if I boot the client off the hard drive & nfs mount the
> same directories. In that case it runs at a normal speed.
> 
> What difference would there be in the networking between nfsroot mounting
> and mounting after the machine is up? On an isolated hub?
> 
> Even stranger, on two occasions -- without changing anything -- after running
> slow for about a minute, it suddenly started running at normal speed (and
> went through the boot sequence very quickly until it choked on something
> else I haven't sorted out yet). This sudden change of speed by many orders
> of magnitude seemed completely random.
> 
> The client in question is a Versa 486 with a pcmcia Linksys Etherfast 10/100.
> I'm booting from floppy with an initrd that holds the pcmcia & network
> modules.
> 
> The server is a 586 with a 3com905.
> 
> I've tried this with kernels 2.0.35 and 2.0.36 (on both ends).
> 
> Anyone know what could cause this? I've been messing with the NFS parameters,
> but haven't settings which affect this. It appears that the first major
> timeout occurs before anything hits the wire: tcpdump on the server shows
> no activity (not even an ARP) before the 1st "NFS server not responding"
> message (with retrans=3).
> 
> b.c.
> 
> -
> To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
> the body of a message to majordomo@vger.rutgers.edu
> Please read the FAQ at 
http://www.tux.org/lkml/
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/