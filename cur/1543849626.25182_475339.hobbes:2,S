Date: Sat, 21 Oct 2006 13:02:07 +0300
From: Ismail Donmez <>
Subject: [PATCH] scsi/scsi.h protect scsi_to_u32 function by ifdef __KERNEL__
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/10/21/56

Hi,
include/scsi/scsi.h defines scsi_to_u32 function like this:
 static inline u32 scsi_to_u32(u8 *ptr)
But the definition of u8 is protected by ifdef __KERNEL__ in asm/types.h hence 
this whole function should be procted as well. This fixes compilation of 
cdrtools with latest kernel-headers GIT tree.
Signed-off-by: Ismail Donmez <ismail@pardus.org.tr>
diff --git a/include/scsi/scsi.h b/include/scsi/scsi.h
index 84a6d5f..0ce924a 100644
--- a/include/scsi/scsi.h
+++ b/include/scsi/scsi.h
@@ -429,10 +429,12 @@ #define SCSI_IOCTL_GET_BUS_NUMBER	0x5386
 /* Used to obtain the PCI location of a device */
 #define SCSI_IOCTL_GET_PCI		0x5387
 
+#ifdef __KERNEL__
 /* Pull a u32 out of a SCSI message (using BE SCSI conventions) */
 static inline u32 scsi_to_u32(u8 *ptr)
 {
 	return (ptr[0]<<24) + (ptr[1]<<16) + (ptr[2]<<8) + ptr[3];
 }
+#endif
 
 #endif /* _SCSI_SCSI_H */