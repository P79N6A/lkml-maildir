Date: Tue, 16 Oct 2007 21:53:24 -0400
From: Mark Lord <>
Subject: [PATCH 0/4] Fix PCIe hotplug for non-ACPI ExpressCard slots (version 2)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/10/16/465

Original single patch is now broken out into tiny pieces for easier review.
Also, valuable feedback from Ted has been incorporated,
to avoid any possible side effects on regular use of
the PCIe hotplug stuff (when used without pciehp_force=1 mod parm).
* * *
Fix PCIe Hotplug so that it works with ExpressCard slots on Dell notebooks
in conjunction with the modparam of pciehp_force=1.
The PCIe Hotplug driver has two shortcomings when used on Dell notebooks
which lack ACPI BIOS support for PCIe hotplug:
1. The driver does not recognise cards that were inserted prior
to the driver being modprobe'd.
2. The driver stops functioning after a suspend/resume (RAM) cycle,
and needs to be rmmod'd and modprobe'd to get it working again.
This patch series addresses those issues, resulting in a completely
functional PCIe Hotplug driver for Dell notebooks, and probably others
as well, which may lack ACPI BIOS support for this.
There are four patches in this series:
	01_pciehp_cosmetic_fixes.patch
		-- cosmetic fixes, mostly to keep checkpatch.pl happy
	02_pciehp_handle_preinserted_card.patch
		-- fixes problem number 1 (above).
	03_pciehp_split_pcie_init.patch
		-- preparation for the resume patch.
	04_pciehp_resume.patch
		-- fixes problem number 2 (above).
diffstat summary for 01_pciehp_cosmetic_fixes.patch only:
 drivers/pci/hotplug/pciehp_core.c |    6 -
 drivers/pci/hotplug/pciehp_ctrl.c |    2
 drivers/pci/hotplug/pciehp_hpc.c  |  119 ++++++++++++++--------------
 3 files changed, 65 insertions(+), 62 deletions(-)
diffstat summary for the other three patches combined:
 drivers/pci/hotplug/pciehp.h      |    3
 drivers/pci/hotplug/pciehp_core.c |   21 ++-
 drivers/pci/hotplug/pciehp_ctrl.c |    2
 drivers/pci/hotplug/pciehp_hpc.c  |  194 ++++++++++++++++------------
 4 files changed, 134 insertions(+), 86 deletions(-)
Cheers
--
Mark Lord <mlord@pobox.com>
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/