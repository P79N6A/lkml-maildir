Date: Thu, 04 Apr 2002 09:06:28 +1000
From: Keith Owens <>
Subject: Re: [PATCH] cleanup KERNEL_VERSION definition and linux/version.h
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/4/3/168

On Wed, 03 Apr 2002 23:49:00 +0900, 
Hiroyuki Toda <might@might.dyn.to> wrote:
>Hi Marcelo,
>
>I send you a patch to clean up KERNEL_VERSION definition and linux/version.h 
>generated by linux/Makefile.
>
>Main part of the patch is as follows:
>
>diff -ur linux-2.4.18.org/Makefile linux/Makefile
>--- linux-2.4.18.org/Makefile   Wed Feb 27 00:15:58 2002
>+++ linux/Makefile      Wed Mar 20 00:46:23 2002
>@@ -325,9 +325,16 @@
>        @mv -f .ver $@
>
> include/linux/version.h: ./Makefile
>-       @echo \#define UTS_RELEASE \"$(KERNELRELEASE)\" > .ver
>-       @echo \#define LINUX_VERSION_CODE `expr $(VERSION) \\* 65536 + $(PATCHLEVEL) \\* 256 + $(SUBLEVEL)` >> .ver
>-       @echo '#define KERNEL_VERSION(a,b,c) (((a) << 16) + ((b) << 8) + (c))' >>.ver
>+       @echo "/* this file is generate automaticaly. don\'t edit */" > .ver
>+       @echo '' >> .ver
>+       @echo '#if !defined(_LINUX_VERSION_H_INCLUDED)' >> .ver
>+       @echo '#define _LINUX_VERSION_H_INCLUDED' >> .ver
>+       @echo '' >> .ver
>+       @echo \#define UTS_RELEASE \"$(KERNELRELEASE)\" >> .ver
>+       @echo '#define KERNEL_VERSION(a, b, c) (((a) << 16) | ((b) << 8) | (c))' >>.ver
>+       @echo \#define LINUX_VERSION_CODE KERNEL_VERSION\($(VERSION), $(PATCHLEVEL), $(SUBLEVEL)\) >> .ver
>+       @echo '' >> .ver
>+       @echo '#endif' >> .ver
>        @mv -f .ver $@
>
> comma  := ,
>
This file will change completely in 2.5 when kbuild 2.5 goes in.  Why
does it need to be rearranged in 2.4?
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/