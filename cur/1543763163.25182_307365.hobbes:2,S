Date: Wed, 30 Mar 2005 11:05:09 -0800
From: Greg KH <>
Subject: Re: [stable] [patch 3/8] uml: quick fix syscall table [urgent]
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/3/30/178

On Wed, Mar 30, 2005 at 07:33:48PM +0200, blaisorblade@yahoo.it wrote:
> 
> CC: <stable@kernel.org>
> 
> *) Uml 2.6.11 does not compile with gcc 2.95.4 because some entries are
> duplicated, and that GCC does not accept this (unlike gcc 3). Plus various
> other bugs in the syscall table definitions:
> 
>   *) 223 is a syscall hole (i.e. ni_syscall) only on i386, on x86_64 it's a
>   valid syscall (thus a duplicated one).
> 
>   *) __NR_vserver must be only once with sys_ni_syscall, and not multiple
>   times with different values!
> 
>   *) syscalls duplicated in SUBARCHs and in common files (thus assigning twice
>   to the same array entry and causing the GCC 2.95.4 failure mentioned above):
>   sys_utimes, which is common, and sys_fadvise64_64, sys_statfs64,
>   sys_fstatfs64, which exist only on i386.
> 
>   *) syscalls duplicated in each SUBARCH, to put in common files:
>   sys_remap_file_pages, sys_utimes, sys_fadvise64
> 
>   *) 285 is a syscall hole (i.e. ni_syscall) only on i386, on x86_64 the range
>   does not arrive to that point.
> 
>   *) on x86_64, the macro name is __NR_kexec_load and not __NR_sys_kexec_load.
>   Use the correct name in either case.
> 
> Note: as you can see, part of the syscall table definition in UML is
> arch-independent (with everywhere defined syscalls), and part is
> arch-dependant. This has created confusion (some syscalls are listed in both
> places, some in the wrong one, some are wrong on one arch or another).
> 
> Also, as add-ons:
> 
> *) uses __va_copy instead of va_copy since some old versions of gcc (2.95.4
> for instance) don't accept va_copy.
> 
> *) some whitespace cleanups in the syscall table (if you don't like them, feel
> free to remove them).
For this to be considered for the -stable tree, can you remove the
whitespace cleanups, and break this up into different patches for the
different things you are doing (one thing per patch please.)
thanks,
greg k-h
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/