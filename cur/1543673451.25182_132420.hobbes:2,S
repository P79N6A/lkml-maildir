Date: Tue, 13 May 2003 18:03:50 +0100
From: Simon Kelley <>
Subject: [PATCH] xirc2ps_cs.c got missed in the irqreturn_t swoop.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/5/13/220

diff -urN linux-2.5.69.orig/drivers/net/pcmcia/xirc2ps_cs.c 
linux-2.5.69/drivers/net/pcmcia/xirc2ps_cs.c
--- linux-2.5.69.orig/drivers/net/pcmcia/xirc2ps_cs.c   Mon May  5 00:53:13 2003
+++ linux-2.5.69/drivers/net/pcmcia/xirc2ps_cs.c        Tue May 13 15:56:31 2003
@@ -317,7 +317,7 @@
   * less on other parts of the kernel.
   */
-static void xirc2ps_interrupt(int irq, void *dev_id, struct pt_regs *regs);
+static irqreturn_t xirc2ps_interrupt(int irq, void *dev_id, struct pt_regs *regs);
  /*
   * The dev_info variable is the "key" that is used to match up this
@@ -1296,7 +1296,7 @@
  /****************
   * This is the Interrupt service route.
   */
-static void
+static irqreturn_t
  xirc2ps_interrupt(int irq, void *dev_id, struct pt_regs *regs)
  {
      struct net_device *dev = (struct net_device *)dev_id;
@@ -1312,7 +1312,7 @@
                                   */
      if (!netif_device_present(dev))
-       return;
+       return IRQ_HANDLED;
      ioaddr = dev->base_addr;
      if (lp->mohawk) { /* must disable the interrupt */
@@ -1514,6 +1514,8 @@
       * force an interrupt with this command:
       *   PutByte(XIRCREG_CR, EnableIntr|ForceIntr);
       */
+
+    return IRQ_HANDLED;
  } /* xirc2ps_interrupt */
  /*====================================================================*/
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/