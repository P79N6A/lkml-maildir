Date: Wed, 21 Jun 2006 00:04:20 +1000
From: Nick Piggin <>
Subject: Re: GFS2 and DLM
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/6/20/234

Thanks.
Steven Whitehouse wrote:
>  kernel/printk.c                    |    1 
>  mm/filemap.c                       |    1 
>  mm/readahead.c                     |    1 
These EXPORTs are a bit unfortunate.
BTW. you have one function that calls file_ra_state_init but never appears
to use the initialized ra_state.
Why is gfs2_internal_read() called the "external read function" in the
changelog?
The internal_read function doesn't look like a great candidate for passing
a ra_state to, which invokes all the mechanism expecting a regular file
being accessed by a user program.
It seems as though you could explicitly control readahead more optimally,
but I don't know what the best way to do that would be. I assume Andrew
has had a quick look and doesn't know either.
The part where you needed file_read_actor looks like pretty much a stright
cut and paste from __generic_file_aio_read, which indicates that you might
be exporting at the wrong level.
Not sure about the tty_ export. Would it be better to make a generic
printfish interface on top of it and also replace the interesting dquot.c
gymnastics? (I don't know)
-- 
SUSE Labs, Novell Inc.
Send instant messages to your online friends 
http://au.messenger.yahoo.com
 
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/