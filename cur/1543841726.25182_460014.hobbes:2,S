Date: Sun, 3 Sep 2006 11:20:35 +0100
From: Russell King <>
Subject: Re: Support for TI FlashMedia (pci id 104c:8033, 104c:803b) flash card readers
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/9/3/22

On Sun, Sep 03, 2006 at 12:41:01AM -0700, Alex Dubov wrote:
> > What I'd like to see from you is to double check
> > that bytes_xfered is
> > set to the number of bytes successfully sent to the
> > _card_, not the
> > controller. This is critical for correct handling of
> > bus errors.
> The OMAP datasheet is somewhat unclear, but I think
> that block and byte counters truly represent the
> amount of data shifted out to the mmc bus. Whether
> this data really reaches the flash memory I don't know
> to tell.
It's really the bus we care about at this stage, since the errors we
receive are along the lines of "the card reported that the last data
block had a CRC error", "we encountered an underrun condition during
the last data block", or "the card didn't request data before we
timed out", etc.
Basically, the transfer of the next block confirms that the previous
block was successfully received by the card.
-- 
Russell King
 Linux kernel    2.6 ARM Linux   - 
http://www.arm.linux.org.uk/
 maintainer of:  2.6 Serial core
-- 
VGER BF report: H 0.00934292
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/