Date: Thu, 15 Jul 1999 10:59:53 -0700 (PDT)
From: Linus Torvalds <>
Subject: Re: [PATCH 2.2.10] Re: Problem with memmap file with SMP
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/7/15/139

On Thu, 15 Jul 1999, Stephen C. Tweedie wrote:
> 
> Hmm.  We certainly write in the core dump logic, but I guess observing
> strict update_vm_cache semantics isn't really that important when we're
> writing to a brand new file from kernel space: you could confuse the
> cache, but you'd have to try really hard to do so.
Agreed.
> The only other place which springs to mind is sendfile(), and in theory
> we allow users to use sendfile() for fast file copy.  That will break
> the cache badly if we just rely on the KERNEL_DS test.
For 2.2.x, we might just say that "sendfile()" really is a SENDfile(), and
it not necessarily cache-coherent for file-file copies. 
It's a trade-off - do you do the cheezy two-liner that gets the basic
cases right, or do you do the more complex solution that should get
everything right but might have some subtle problem.
I will accept either from Alan.
		Linus
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/