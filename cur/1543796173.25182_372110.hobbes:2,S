Date: Thu, 1 Dec 2005 23:17:09 +0200 (EET)
From: Kai Makisara <>
Subject: Re: Fw: crash on x86_64 - mm related?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/12/1/239

On Thu, 1 Dec 2005, James Bottomley wrote:
> On Thu, 2005-12-01 at 11:38 -0800, Linus Torvalds wrote:
> > Ryan, can you test 2.6.15-rc4 and report what it does?
> > 
> > The "Bad page state" messages may (should) remain, but the crashes should 
> > be gone and the machine should hopefully continue functioning fine. And, 
> > perhaps more importantly, you should hopefully have a _new_ message about 
> > incomplete pfn mappings that should help pinpoint which driver causes 
> > this..
> 
> On a side note, I have Kai's patch in the scsi-rc-fixes tree which I'm
> getting ready to push.  Can we get a consensus on whether it should be
> removed before I merge upwards?
> 
I think it should be removed because it is based partly on a wrong 
assumption: asynchronous writes are _not_ done together with direct i/o. 
(I have also experimentally verified that this does not happen.)
The patch includes the patch I sent sent to linux-scsi on Nov 21. Nobody 
has commented it and I don't know if the user pages have to be explicitly 
marked dirty after the HBA has read data there. If they have to, then this 
earlier patch is valid. If not, I will send a patch for 2.6.16 to remove 
the latent code.
-- 
Kai
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/