Date: Thu, 4 Dec 2008 14:23:27 +0100
From: Christoph Hellwig <>
Subject: Re: XFS breakage on m68k (was: Re: linux-next: Tree for December 3)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/12/4/162

On Thu, Dec 04, 2008 at 07:50:06AM -0500, Christoph Hellwig wrote:
> Yeah, but Niv fixed it up and the correct version is not in the xfs git
> tree.
Hah, he noticed the bug but the wrong version got checked in anyway.
Here's the fix (for todays xfs tree):
-- 
[XFS] Fix compile with CONFIG_COMPAT enabled
Signed-off-by: Christoph Hellwig <hch@lst.de>
Index: xfs/fs/xfs/linux-2.6/xfs_ioctl.h
===================================================================
--- xfs.orig/fs/xfs/linux-2.6/xfs_ioctl.h	2008-12-04 14:19:32.000000000 +0100
+++ xfs/fs/xfs/linux-2.6/xfs_ioctl.h	2008-12-04 14:19:38.000000000 +0100
@@ -74,7 +74,7 @@ xfs_file_compat_ioctl(
 	unsigned long		arg);
 
 extern long
-xfs_file_compat_ioctl_invis(
+xfs_file_compat_invis_ioctl(
 	struct file		*file,
 	unsigned int		cmd,
 	unsigned long		arg);