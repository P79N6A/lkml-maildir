Date: Thu, 09 Aug 2007 12:57:11 +1200
From: Greg Trounson <>
Subject: Re: [PATCH 00/23] per device dirty throttling -v8
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/8/8/565

Ingo Molnar wrote:
> * Alan Cox <alan@lxorguk.ukuu.org.uk> wrote:
> 
>>>> People just need to know about the performance differences - very 
>>>> few realise its more than a fraction of a percent. I'm sure Gentoo 
>>>> will use relatime the moment anyone knows its > 5% 8)
>>> noatime,nodiratime gave 50% of wall-clock kernel rpm build 
>>> performance improvement for Dave Jones, on a beefy box. Unless i 
>>> misunderstood what you meant under 'fraction of a percent' your 
>>> numbers are _WAY_ off.
>> What numbers - I didn't quote any performance numbers ?
> 
> ok, i misunderstood your "very few realise its more than a fraction of a 
> percent" sentence, i thought you were saying it's a fraction of a 
> percent.
> 
> Measurements show that noatime helps 20-30% on regular desktop 
> workloads, easily 50% for kernel builds and much more than that (in 
> excess of 100%) for file-read-intense workloads. We cannot just walk 
> past such a _huge_ performance impact so easily without even reacting to 
> the performance arguments, and i'm happy Ubuntu picked up 
> noatime,nodiratime and is whipping up the floor with Fedora on the 
> desktop.
> 
Sorry I'm just not seeing those gains here.  With my filesystems mounted with atime 
defaults the Quake sources build in 1m28.856s.  A test with ls -ltu verifies that atime is 
working as expected.  When I remount my filesystems with:
mount [fs] -o remount,noatime,nodiratime
I get a compile time of 1m23.368s, a mere 6% improvement.
This is on a dual-core Athlon 4200+ box running 2.6.21, so I would have thought this to be 
close to a best-case file I/O test.
Greg
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/