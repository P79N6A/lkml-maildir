Date: Thu, 6 Dec 2007 12:34:23 -0600
From: Matt Mackall <>
Subject: Re: a problem with NETPOLL/KGDBoE
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/12/6/204

On Thu, Dec 06, 2007 at 08:22:15PM +0200, Ramagudi Naziir wrote:
> Hi all,
> 
> It's probably only me, but I can't connect to a kgdb host because
> of bouncing ICMP unreachables. I'll be glad if you could take a look
> to see if it's a bug or not.
> 
> Details:
> - running a cloned  version of kgdb_2.6.23 branch of Jason's
> git://git.kernel.org/pub/scm/linux/kernel/git/jwessel/linux-2.6-kgdb.git
> 
> - "modprobe kgdboe kgdboe='@10.0.0.28/,@10.0.0.11/'" works fine,
> and var/log/messages get filled with six kgdboe network configuration
> messages (local port 6443, local ip 10.0.0.28, interface eth0,
> remote port 6442, remote ip 10.0.0.11, remote mac ff:ff:ff:ff:ff:ff).
...
> 19:30:53.424248 IP 10.0.0.11.32785 > 10.0.0.28.6433: UDP, length 5
> 19:30:53.424323 IP 10.0.0.11.32785 > 10.0.0.28.6433: UDP, length 14
Hmmm, 6443 != 6433 (typo?) and 32785 != 6442 (config problem). Yes,
netpoll will ignore incoming UDP -from- the wrong port/ip/mac, since
it's otherwise bypassing the firewall layer. And of course, it won't
accept packets -to- the wrong address either. I forget how to deal
with the source address issue in connection with GDB, perhaps Jason
will remind us.
-- 
Mathematics is the supreme nostalgia of our time.