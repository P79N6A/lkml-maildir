Date: Thu, 3 May 2007 08:56:02 -0700
From: "Allan, Bruce W" <>
Subject: RE: e1000 issue on DQ965GF board (was 24 lost ticks with 2.6.20.10 kernel)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/5/3/272

Yes, this was discovered through code inspection last week and I've
already made a fix (as I mentioned to Auke off-thread).  It should be
submitted upstream shortly.
-----Original Message-----
From: Kok, Auke [mailto:auke-jan.h.kok@intel.com] 
Sent: Thursday, May 03, 2007 8:37 AM
To: Michel Lespinasse
Cc: Kok, Auke-jan H; Chuck Ebbert; linux-kernel@vger.kernel.org; Dave
Jones; cramerj; Ronciak, John; Brandeburg, Jesse; Kirsher, Jeffrey T;
Allan, Bruce W
Subject: Re: e1000 issue on DQ965GF board (was 24 lost ticks with
2.6.20.10 kernel)
[Adding Bruce to the Cc, reply below]
Michel Lespinasse wrote:
> On Wed, May 02, 2007 at 11:14:52AM -0700, Kok, Auke wrote:
>> I just checked and the fix I was referring to earlier didn't make it
into 
>> 2.6.21-final. You can get 2.6.21-git1 from kernel.org which has the
fix. See
>>
>>
http://www.kernel.org/pub/linux/kernel/v2.6/snapshots/patch-2.6.21-git1.
log
> 
> Good. So I tried that patch (well, actually only the change visible at
> 
http://lkml.org/lkml/2007/3/6/268
). I patched it into a 2.6.20.11
kernel,
> using the same config file as previously. The good news is that this
fixes
> my issue: there are no lost ticks anymore, and the link does negotiate
a
> gigabit connection. This is a great improvement for me :)
> 
> I still seem to hit an issue if using the ethtool command, though.
> when using 'ethtool -s eth0 autoneg on', the link comes up at gigabit
speed,
> but a couple seconds later is comes down again, and then up at 100
megabits:
> 
> e1000: eth0: e1000_watchdog: NIC Link is Up 1000 Mbps Full Duplex
> e1000: eth0: e1000_watchdog: NIC Link is Down
> e1000: eth0: e1000_watchdog: NIC Link is Up 100 Mbps Full Duplex
> e1000: eth0: e1000_watchdog: 10/100 speed: disabling TSO
> 
> The same thing happens if I use ifdown eth0; ifup eth0 too. Once
again,
> I only observe this on my DQ965GF motherboard, the DG965RY board is
fine
> (stays at gigabit speed when I issue these commands).
> 
> Is this something you could easily reproduce at Intel or would you
want me
> to look into that issue on my system ?
I think we have confirmed this issue and I'll work with Bruce on seeing
where 
the fix went. I might give you another patch to try.
Auke
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/