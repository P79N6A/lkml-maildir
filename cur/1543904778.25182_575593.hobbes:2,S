Date: Fri, 27 Jul 2007 07:12:57 +0200
From: Mike Galbraith <>
Subject: Re: RFT: updatedb "morning after" problem [was: Re: -mm merge plans for 2.6.23]
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/7/27/17

On Thu, 2007-07-26 at 11:05 -0700, Andrew Morton wrote:
> On Thu, 26 Jul 2007 14:46:58 +0200 Mike Galbraith <efault@gmx.de> wrote:
> 
> > On Thu, 2007-07-26 at 03:09 -0700, Andrew Morton wrote:
> > 
> > > Setting it to zero will maximise the preservation of the vfs caches.  You
> > > wanted 10000 there.
> > > 
> > > <bets that nobody will test this>
> > 
> > drops caches prior to both updatedb runs.
> 
> I think that was the wrong thing to do.  That will leave gobs of free
> memory for updatedb to populate with dentries and inodes.
> 
> Instead, fill all of memory up with pagecache, then do the updatedb.  See
> how much pagecache is left behind and see how large the vfs caches end up.
Yeah.  Before these two runs just to see what difference there was in
caches with those two settings, I tried running with a heavier than
normal (for me) desktop application mix, to see if it would start
swapping, but it didn't.   Seems that 1GB ram is enough space for
everything I do, and everything updatedb does as well.  You need a
larger working set to feel the pain I guess.
	-Mike
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/