Date: Sun, 2 Dec 2007 18:43:33 +0200
From: Matti Aarnio <>
Subject: Re: Relax permissions for reading hard drive serial number?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/12/2/95

On Thu, Nov 29, 2007 at 10:07:46PM +0100, Bartlomiej Zolnierkiewicz wrote:
> > There are people who, for privacy reasons, really don't like that "unique"
> > unchangeable serial numbers can be retrieved by untrusted users.
> > 
> > You should probably chmod the file on the users system, if he is fine with
> > that, but not change the kernel default.
> 
> Seconded.
> 
> While on it, how's about exporting model/firmware/serial through
> sysfs so /proc/ide/hd*/identify don't have to be used?
Nice, except that while my home workstation running 2.6.23 kernel
does have 4 SATA disks in it, plus a compact flash memory card on
PATA (boot device, while SATA-disks are JBOD in SW RAID), it has
_no_  /sys/bus/ide/,  nor  /proc/ide/
All devices are under /sys/bus/scsi/
Simplest way for me to pick this data is to use  "hdparm -I /dev/sdX"
command.  Which of course must be run as root.  All it does is to open
named device, and issue one ioctl().
That ioctl() can be embedded into a suid-root helper program, or it
can even (in case of Wine) be run separately to write a text file
storing these identifier data on some Wine config file, which the
"read from physical device X" then does receive.
In my case I don't want to report any of the hard-drive serial numbers,
but rather my boot-device - a flash drive.  Hard-drives do break at
some point in time, a flash drive in read-only mode does last considerably
longer.
> [PATCH] ide: add /sys/bus/ide/devices/*/{model,firmware,serial} sysfs entries
...
/Matti Aarnio