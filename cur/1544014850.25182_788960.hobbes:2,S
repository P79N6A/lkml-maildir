Date: Thu, 8 Jan 2009 11:13:29 -0800 (PST)
From: Linus Torvalds <>
Subject: Re: [PATCH -v7][RFC]: mutex: implement adaptive spinning
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2009/1/8/299

On Thu, 8 Jan 2009, Chris Mason wrote:
> 
> It is less fair though, the 50 proc parallel creates had a much bigger
> span between the first and last proc's exit time.  This isn't a huge
> shock, I think it shows the hot path is closer to a real spin lock.
Actually, the real spin locks are now fair. We use ticket locks on x86.
Well, at least we do unless you enable that broken paravirt support. I'm 
not at all clear on why CONFIG_PARAVIRT wants to use inferior locks, but I 
don't much care.
We _could_ certainly aim for using ticket locks for mutexes too, that 
might be quite nice.
But yes, from a throughput standpoint fairness is almost always a bad 
thing, so your numbers could easily go down if we did.
			Linus