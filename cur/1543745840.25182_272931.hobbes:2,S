Date: Sat, 20 Nov 2004 08:58:28 -0800 (PST)
From: Linus Torvalds <>
Subject: Re: sparse segfaults
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/11/20/111

On Sat, 20 Nov 2004, Russell King wrote:
> 
> Looks like expr->cond_true is NULL.  Line 566 of kernel/timer.c is:
> 
> int tickadj = 500/HZ ? : 1;             /* microsecs */
> 
> which makes it look like sparse doesn't understand such constructions.
Sparse does, but there were some changes in how it handles them, and they
were obviously buggy for the trivial compile-time-evaluation case. I
didn't see them because on all _my_ archiectures, 500/HZ evaluates to
false, so it doesn't look at the true case (which is a special case).
Trivial fix checked in and pushed out. Thanks,
		Linus
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/