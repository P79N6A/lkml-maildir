Date: Wed, 17 Feb 1999 14:13:38 +0100 (MET)
From: "Andreas K. Huettel" <>
Subject: Re: Routing Table (Feature)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/2/17/35

I am using diald to dynamically connect to the internet; when doing a
test run with 2.2.1 I see lots of messages in the syslog like 
Feb 16 21:29:09 ntserver diald[227]: Closing down idle link.
Feb 16 21:29:09 ntserver diald[227]: Nonzero exit status (7) on
command '/sbin/route add 192.168.254.200 metric 1  dev sl0'
Feb 16 21:29:09 ntserver diald[227]: Nonzero exit status (7) on
command '/sbin/route add default metric 1  netmask 0.0.0.0 dev
 sl0'
Feb 16 21:29:09 ntserver pppd[893]: Terminating on signal 2.
Feb 16 21:29:09 ntserver pppd[893]: Connection terminated.
Feb 16 21:29:09 ntserver pppd[893]: Hangup (SIGHUP)
Feb 16 21:29:09 ntserver pppd[893]: Exit.
Feb 16 21:29:09 ntserver diald[227]: Nonzero exit status (7) on
command '/sbin/route add 192.168.254.200 metric 1  dev sl0'
Feb 16 21:29:09 ntserver diald[227]: Nonzero exit status (7) on
command '/sbin/route add default metric 1  netmask 0.0.0.0 dev
 sl0'
Feb 16 21:29:10 ntserver diald[227]: Delaying 30 seconds before clear
to dial.
I donÂ´t know exactly what diald does to the routing table but might
this be the same problem? Details on request...
Andreas Huettel
"Richard B. Johnson" <root@chaos.analogic.com> wrote:
> When the startup scripts initialize the network, they generally
> do `route add -net NNN.NNN.NNN.0 netmask MMM.MMM.MMM.MMM dev DEV`
> This is for compatibility. Alexy's latest code automatically adds
> a route when `ifconfig` is executed. This has not caused any problems
> unless, when a ppp connection is established, you modify the routing
> table to correspond to the new configuration.
(...)
> In changing the network, from 204.178.40.0, netmask 255.255.248.0 to
> 204.178.47.0, netmask 255.255.255.0, it is necessary to delete the
> existing network, i.e., `route del -net 204.178.40.0 netmask
> 255.255.248.0` and add the new one. Unfortunately, the routing table
> contains two entries for the same network:
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref
Use Iface
204.178.40.0    *               255.255.248.0   U     0      0
0 eth0
204.178.40.0    *               255.255.248.0   U     0      0
0 eth0
127.0.0.0       *               255.0.0.0       U     0      0
0 lo
default         cisco.analogic. 0.0.0.0         UG    1      0
0 eth0a
> The `ifconfig` command only deletes one. The command has to be
> executed twice to delete the second one. The problem is that when my
> ppp link is shut down, I do not add two identical routes back (nor
> should I). The result is that the second time the ppp link is
> established, I will get an error if I try to delete two routes. So,
> a work-around of always deleting two identical routes doesn't work
> very well.
(...)
---------------------------------------------------------------------
Andreas K. Huettel          Andreas.Huettel@Extern.LRZ-Muenchen.DE
81627 Muenchen              Andreas.Huettel@Physik.Uni-Muenchen.DE
Germany                     
http://www.lrz.de/~huettel/
Please use PGP for encrypted and signed communication! My public key
can be found on my webpage  
http://www.lrz.de/~huettel/pgp_key.html
---------------------------------------------------------------------  
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/