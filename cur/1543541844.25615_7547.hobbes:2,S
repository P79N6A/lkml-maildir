Date: Tue, 15 Aug 2000 03:19:23 -0300 (BRST)
From: Rik van Riel <>
Subject: Re: linux-2.4-test & innd
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/8/15/18

On Tue, 15 Aug 2000, Henrik StÃ¸rner wrote:
> On Sat, Aug 12, 2000 at 10:31:21PM -0700, Linus Torvalds wrote:
> > Can you please double-check exactly which kernel started doing this? I
> > have some mixed reports about the "test1-ac" series kernels doing this
> > too. 
> 
> A pure 2.4.0-test1 kernel also has the bug. It is actually quite easy
> to test for:
> 
> * fire up the kernel and innd
> * inject a couple of articles using rnews
> * note the numbers listed for the newsgroup in the active file
> * restart innd and check the active file again
> 
> If it has the bug, the active file will forget all updates after inn
> is restarted. This happens with 2.4.0-test1 also.
I don't know if it is related, but I've noticed a serious bug
in filemap.c while playing with my new VM patch.
It seems that something in filemap.c (add_to_page_cache_unique?)
is calling lru_cache_add for pages which are _already_ on a page
list...
In my new VM patch, this is caught by the DEBUG_ADD_PAGE in the
lru_cache_add function, while in the vanilla Linux 2.4 tree,
this could/should lead to a corruption of the page lru list,
with all bad consequences it brings with it (list corruption,
maybe stray pointers, maybe a memory leak and maybe even data
corruption or data loss).
regards,
Rik
--
"What you're running that piece of shit Gnome?!?!"
       -- Miguel de Icaza, UKUUG 2000
http://www.conectiva.com/
		
http://www.surriel.com/
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/