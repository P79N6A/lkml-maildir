Date: Wed, 07 Aug 2002 00:50:08 +0200
From: Roman Zippel <>
Subject: module cleanup (0/5)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/8/6/285

Hi,
I will shortly send a few patches that cleanup the module code a bit.
All patches are independent. Please apply.
1. Replace get_mod_name/put_mod_name with getname/putname.
2. Make the various query functions more compact, by removing the second
   loop to calculate the required space and integrating it into the main
   loop.
3. Remove __MODULE_STRING() in favour of __stringify().
4. Introduce two macros mod_for_each_locked/mod_for_done_locked to safely
   iterate over the module list.
5. Remove obsolete get_kernel_syms system call.
The first 3 changes are trivial.
Patch 4 unifies all the code which loops over the module from an exception
context, so all that code now does correct locking.
get_kernel_syms is not used by modutils anymore. AFAIK get_kernel_syms is
only used by klogd and works fine without it.
bye, Roman
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/