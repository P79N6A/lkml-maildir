Date: Fri, 28 Jul 2006 16:58:45 +0200
From: Martin Schwidefsky <>
Subject: Re: [patch] bootmem: use MAX_DMA_ADDRESS instead of LOW32LIMIT
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/7/28/139

On Fri, 2006-07-28 at 15:13 +0200, Ingo Molnar wrote:
> > -#define LOW32LIMIT 0xffffffff
> 
> >  		if ((ptr = __alloc_bootmem_core(bdata, size,
> > -						 align, goal, LOW32LIMIT)))
> > +						 align, goal, MAX_DMA_ADDRESS)))
> 
> but this limits things to 16MB on i686. Are you sure this wont break 
> anything?
That is something we should not do. MAX_DMA_ADDRESS is not the correct
value, it says something about the DMA limitations. LOW32LIMIT says
something about the cpu addressing limitations which is a completly
different thing. I think it would be best to introduce an architecture
overridable define like LOW_ADDRESS_LIMIT. The default is 4GB-1, for
s390 it is 2GB-1. The current name is misleading LOW32LIMIT indicates
that the address for alloc_bootmem_low objects has 32 bits, which isn't
true for s390.
-- 
blue skies,
  Martin.
Martin Schwidefsky
Linux for zSeries Development & Services
IBM Deutschland Entwicklung GmbH
"Reality continues to ruin my life." - Calvin.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/