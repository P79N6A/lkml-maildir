Date: Wed, 04 Apr 2007 23:47:31 +0200
From: Thomas Gleixner <>
Subject: Re: + clocksource-driver-initialize-list-value.patch added to -mm tree
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/4/4/520

On Wed, 2007-04-04 at 13:48 -0700, Andrew Morton wrote:
> On Wed, 4 Apr 2007 22:36:47 +0200
> Ingo Molnar <mingo@elte.hu> wrote:
> 
> > 
> > * Daniel Walker <dwalker@mvista.com> wrote:
> > 
> > > The struct clocksource .list field is now required to be initialized 
> > > before calling clocksource_register().
> > > 
> > > This is a prerequisite for simplifying the clocksource registration 
> > > process.
> > 
> > why?
> 
> It's all enablement for
> 
ftp://ftp.kernel.org/pub/linux/kernel/people/akpm/patches/2.6/2.6.21-rc5/2.6.21-rc5-mm4/broken-out/clocksource-refactor-duplicate-registration-checking.patch,
> on which I have no opinion.
I have. Just noticed that my original comment got stuck in mail jam:
> Refactors the duplicate registration checking. This makes it based on the
> clocksource structure list state. I was able to drop some if statements
> making the registration code path slightly smaller and faster, and remove
> some looping which was endemic of the first version of this check.
What does the slightly smaller and faster buy us ? 
Which looping has been removed ? If you want to optimize this code then
you need to break out of the loop, once the rating check has found the
place to stick it in.
But I still do not see any advantage in this. Registration is a one time
operation and not near any fast path. 
	tglx
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/