Date: Wed, 2 Jun 1999 15:37:45 -0700
From: David Hinds <>
Subject: Re: 2.3 wish: integrate pcmcia into mainstream kernel
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/6/2/121

On Wed, Jun 02, 1999 at 01:24:20PM -0700, Linus Torvalds wrote:
> 
> The most common case by far is the case of a external IDE CD-ROM.
>
> Note how I didn't mention SCSI _anywhere_. 
Sorry, my mistake.  I saw "CardBus" and assumed you must have meant
something CardBus specific, which would have had to be SCSI.  Based on
my user feedback, more people use PCMCIA SCSI CD-ROM's than IDE's.
> An external IDE CD-ROM should be _trivial_.
How so?  Is it common for the BIOS to be able to configure and boot
from PCMCIA IDE cards?  My (somewhat well informed) impression is that
this is not so common or so fool-proof.  It doesn't work this way on
any of the laptops I've owned.  Also, all PCMCIA IDE CD-ROM cards are
not equal.  Having looked at the configuration tables for a couple
dozen PCMCIA IDE cards, I can almost guarantee that no BIOS could get
it right every time.  And there are some that just don't work with the
Linux IDE driver at all.
> In fact, you can even force
> the standard IDE driver to see it directly by telling it to hardcode the
> port numbers. But then you're screwed when you enable PCMCIA support,
> because now the cardbus deamon is going to be unhappy. And if you unplug
> the card, the ide driver is going to be unhappy.
In the past, PCMCIA tried to leave alone a socket that had an active
card in it associated with some other Linux driver.  I added this for
Compaq laptops with PCMCIA floppies.  It was just a hack to handle
certain cards that the Linux PCMCIA package couldn't configure; I
didn't bother extending it to handle CardBus sockets because I haven't
received any questions about it in ages.
> In short, it's a mess. And it should NOT be.
It should not be, if RedHat (or whatever distribution you used) put
the ide_cs driver on their PCMCIA install disk.  I assume you first
tried to do the install in a more conventional way, and the IDE card
wasn't detected or couldn't be configured for some reason.  So, either
(1) they left out that driver, or (2) there is something about your
card that is incompatible with the Linux ide_cs driver.  I don't think
I'm a fair target for your rant in either case.
> We have the technology, if it
> weren't for the fact that our cardbus support sucks and needs user space
> (which we won't have until after we've mounted the CD - so right now
> you're kind of in a catch-22 situation).
["bite me" response deleted]
I'm sorry that you think my PCMCIA implementation sucks.  I thought
that all major distributions now were module based, in which case,
PCMCIA makes things only trivially more complicated.  And all major
distributions already do implement PCMCIA installs in some fashion, so
they all offer counterexamples to your catch-22.  Do you really want a
database of card configuration information in the kernel?  As far as I
know, there is no such thing as a completely kernel based PCMCIA
system for a major OS: FreeBSD, Solaris, BeOS, WindowsXX all have user
mode daemons and configuration files.
> Umm.. I bet you never get reports from the clueless people for whom Linux
> just did not work at all. 
I think you're on very thin ground if you doubt my range of experience
in dealing with PCMCIA support issues.
-- Dave Hinds
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/