Date: Sat, 14 Oct 2006 11:49:37 -0600
From: Matthew Wilcox <>
Subject: Re: [KJ] [PATCH] drivers/char/riscom8.c: save_flags()/cli()/sti()	removal
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/10/14/110

On Sat, Oct 14, 2006 at 03:20:02PM +0100, Alan Cox wrote:
> 1. The irq locking isn't doing anything as the IRQ handler itself is not
> taking the lock
Looks like you reviewed the first version instead of the version Amol
sent after Arjan critiqued that.
> 2. If the irq handler itself dumbly locks to fix this then we get
> tty_flip_buffer_push() re-entering the other code paths and deadlocking
> if low latency is enabled
Yep, still a problem with the revised patch.
> 3. Some of the use of local_save/spin_lock_irq seems over-clever and
> unneeded
> 
> Fixable but how about we just delete the file since it has been broken
> for ages and nobody can be using it ?
Only broken on SMP ...
I wouldn't mind writing a new driver (using the serial core) if someone
wants to send me one.  I need a multiport serial card anyway ...
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/