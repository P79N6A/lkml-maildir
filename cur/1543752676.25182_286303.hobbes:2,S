Date: Thu, 13 Jan 2005 23:29:12 +0100
From: Christian Borntraeger <>
Subject: Re: [PATCH] reintroduce EXPORT_SYMBOL(task_nice) for binfmt_elf32
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/1/13/329

Christoph Hellwig wrote:
> Although a little comment explaining what it's exported for might be
> nice ;-)  So people can't complain if it's unexported if binfmt_elf
> doesn't need it anymore one day.
OK. I dont mind if you apply this patch or the former one without the 
comment. Whatever you prefer. 
Signed-off-by: Christian Borntraeger <cborntra@de.ibm.com>
--- a/kernel/sched.c	2005-01-12 01:42:35 +01:00
+++ b/kernel/sched.c	2005-01-13 23:21:01 +01:00
@@ -3187,6 +3187,15 @@
 	return TASK_NICE(p);
 }
 
+/*
+ * The only users of task_nice are binfmt_elf and binfmt_elf32.
+ * binfmt_elf is no longer modular, but binfmt_elf32 still is.
+ * Therefore, task_nice is needed if there is a compat_mode. 
+ */
+#ifdef CONFIG_COMPAT
+EXPORT_SYMBOL(task_nice);
+#endif
+
 /**
  * idle_cpu - is a given cpu idle currently?
  * @cpu: the processor in question.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/