Date: Sat, 13 May 2006 00:37:12 +0100
From: Al Viro <>
Subject: Re: [BUG 2.6.17-git] kmem_cache_create: duplicate cache scsi_cmd_cache
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/5/12/335

On Sat, May 13, 2006 at 12:21:31AM +0100, Al Viro wrote:
> The problem is with disk->driverfs_dev, not disk itself.  Block layer
> has no fscking business touching it after del_gendisk() - if nothing else,
> we might have _no_ underlying object at all from the very beginning.
> 
> So anything that wants events related to partitions, let alone mounting,
> can't expect to see PHYSDEV... crap.  Moreover, it can bloody well
> get to PHYSDEV... itself *if* it wants to and if it's there.  There's
> a reason why we have that symlink in sys/block/<device> and userland can
> bloody well access it on its own.
BTW, the best option is to kill bdev_uevent() again.  Short of that,
skip PHYSDEV mess if disk doesn't have GENHD_FL_UP.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/