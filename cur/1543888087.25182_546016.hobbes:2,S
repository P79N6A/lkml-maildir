Date: Fri, 18 May 2007 13:45:59 +0900
From: Paul Mundt <>
Subject: [PATCH -rt] futex_performance_hack sysctl build fix
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/5/18/8

-rt adds a futex_performance_hack sysctl, which is only defined if
kernel/futex.c is built in. This fixes the build in the CONFIG_FUTEX=n
case.
Signed-off-by: Paul Mundt <lethal@linux-sh.org>
--
 kernel/sysctl.c |    2 ++
 1 file changed, 2 insertions(+)
--- linux-2.6.21-rt3/kernel/sysctl.c	2007-05-18 13:27:16.000000000 +0900
+++ linux-2.6.21-rt3-sh/kernel/sysctl.c	2007-05-18 13:41:23.000000000 +0900
@@ -226,6 +226,7 @@
 		.mode		= 0644,
 		.proc_handler	= &proc_dointvec,
 	},
+#ifdef CONFIG_FUTEX
 	{
 		.ctl_name	= CTL_UNNUMBERED,
 		.procname	= "futex_performance_hack",
@@ -234,6 +235,7 @@
 		.mode		= 0644,
 		.proc_handler	= &proc_dointvec,
 	},
+#endif
 	{
 		.ctl_name	= KERN_PANIC,
 		.procname	= "prof_pid",
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/