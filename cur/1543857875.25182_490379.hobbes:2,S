Date: Mon, 11 Dec 2006 14:09:10 +0100 (CET)
From: "Tom Kerremans" <>
Subject: Kernel 2.6.19: panic in modprobe pata_qdi
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/12/11/97

I 'm the maintainer of Trinity Rescue Kit and I try to make kernels as
generic as possible, supporting the most possible hardware. So I compile
about any disk and nic driver. Processor arch is generic 586.
Here 's the command with which I made 2.6.19 crash.
'for i in *; do i=`echo $i | cut -d . -f 1`; echo $i; modprobe $i; rmmod
$i; done'
< all sata is static in the kernel, all pata as module. Old IDE drivers
are static in the kernel, maybe a conflict there.
Upon pata_qdi my machine crashed in a kernel panic. Here 's what I found
relevant in /var/log/messages
Dec 11 13:44:55 localhost kernel:  <6>ata3: PATA max PIO4 cmd 0x170 ctl
0x376 bmdma 0x0 irq 14
Dec 11 13:44:55 localhost kernel: IRQ handler type mismatch for IRQ 14
Dec 11 13:44:55 localhost kernel: current handler: ide0
Dec 11 13:44:55 localhost kernel:  [<c010317a>] show_trace_log_lvl+0x26/0x3c
Dec 11 13:44:55 localhost kernel:  [<c0103276>] show_trace+0x1b/0x1d
Dec 11 13:44:55 localhost kernel:  [<c01039ce>] dump_stack+0x26/0x28
Dec 11 13:44:55 localhost kernel:  [<c01340af>] setup_irq+0x19f/0x1b7
Dec 11 13:44:55 localhost kernel:  [<c0134149>] request_irq+0x82/0xa0
Dec 11 13:44:55 localhost kernel:  [<c03a6613>] ata_device_add+0x2af/0x4e0
Dec 11 13:44:55 localhost kernel:  [<f8acf4ca>] legacy_init+0x4ca/0x5a6
[pata_legacy]
Dec 11 13:44:55 localhost kernel:  [<c012be5a>] sys_init_module+0x1332/0x14b9
Dec 11 13:44:55 localhost kernel:  [<c0102c9d>] sysenter_past_esp+0x56/0x79
Dec 11 13:44:55 localhost kernel:  =======================
Dec 11 13:44:55 localhost kernel: platform pata_legacy.0: irq 14 request
failed: -16
I tried 'modprobe pata_qdi' after reboot and my system just froze, no more
output afterwards to /var/log/messages. Had to hard reset the machine.
The system I tried it on is an out-of-the-box Mandriva 2007.
.config can be supplied on demand.
KR
Tom
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/