Date: Mon, 8 Dec 2008 13:50:58 +0100
From: Ingo Molnar <>
Subject: Re: x86: Change static allocation of trampoline area
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/12/8/150

* Rafael J. Wysocki <rjw@sisk.pl> wrote:
> From: Rafael J. Wysocki <rjw@sisk.pl>
> Subject: x86: Change static allocation of trampoline area
> Impact: Improvement
> 
> While debugging a suspend-to-RAM related issue it occured to me that
> if the trampoline code had grown past 4 KB, we would have been
> allocating too little memory for it, since the 4 KB size of the
> trampoline is hardcoded into arch/x86/kernel/e820.c .  Change that
> by making the kernel compute the trampoline size and allocate as much
> memory as necessary.
> 
> Signed-off-by: Rafael J. Wysocki <rjw@sisk.pl>
> ---
>  arch/x86/include/asm/trampoline.h |    7 +++++++
>  arch/x86/kernel/e820.c            |   16 ----------------
>  arch/x86/kernel/head32.c          |    3 +++
>  arch/x86/kernel/head64.c          |    3 +++
>  arch/x86/kernel/trampoline.c      |   19 +++++++++++++++++--
>  5 files changed, 30 insertions(+), 18 deletions(-)
applied to tip/x86/setup-memory, thanks Rafael!
	Ingo