Date: Thu, 23 Feb 2006 14:05:03 +0100
From: "Ph. Marek" <>
Subject: ramfs and directory modification time
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/2/23/100

Hello everybody,
I believe that I found a problem regarding ramfs and directory modification 
times.
Observe:
	$ /tmp# mkdir newdir
	$ /tmp# mount -t ramfs none newdir
	$ /tmp# cd newdir/
	$ /tmp/newdir# mkdir sub
	$ /tmp/newdir# cd sub
	$ /tmp/newdir/sub# ls -la --full-time
	total 0
	drwxr-xr-x 2 root root 0 2006-02-23 14:01:37.573655160 +0100 .
	drwxr-xr-x 3 root root 0 2006-02-23 14:01:33.221316816 +0100 ..
	$ /tmp/newdir/sub# touch a-new-file
	$ /tmp/newdir/sub# ls -la --full-time
	total 0
	drwxr-xr-x 2 root root 0 2006-02-23 14:01:37.573655160 +0100 .
	drwxr-xr-x 3 root root 0 2006-02-23 14:01:33.221316816 +0100 ..
	-rw-r--r-- 1 root root 0 2006-02-23 14:01:48.019067216 +0100 a-new-file
On a tmpfs or other (disk-based) filesystems (ext3) it works correctly.
Is that a design wish, that ramfs is kept as simple as possible?
Nevertheless I believe that should be fixed, as everything that relies on the 
directory mtime won't work on an ramfs.
This is 2.6.26-rc4, btw, on x86.
Please CC me as I'm not subscribed (although I surely will have a look in the 
archives, too).
Regards,
Phil
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/