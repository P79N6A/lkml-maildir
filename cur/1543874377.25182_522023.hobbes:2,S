Date: Tue, 20 Mar 2007 13:06:34 +0300
From: Alexey Dobriyan <>
Subject: Re: Oops after cd /sys/.../cpufreq/; rmmod; cat stats/time_in_state
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/3/20/66

On Mon, Mar 19, 2007 at 01:41:25PM -0700, Greg KH wrote:
> On Mon, Mar 19, 2007 at 06:30:13PM +0300, Alexey Dobriyan wrote:
> > Steps to reproduce:
> >
> > 	# modprobe p4-clockmod
> > 	$ cd /sys/devices/system/cpu/cpu0/cpufreq/
> > 	# rmmod p4-clockmod
> > 	$ cat stats/time_in_state
> > 	Segmentation fault
>
> Has this always happened?  Or is it new?
I've checked 2.6.17 and up and it happens too.
Some .config peculiarities:
	CONFIG_CPU_FREQ=y
	CONFIG_CPU_FREQ_STAT=y
	CONFIG_X86_P4_CLOCKMOD=m
After modprobe/rmmod cpufreq/stats directory appears but doesn't get
removed. Should it?
/sys/devices/system/cpu/cpu0/cpufreq $ ls -lR
.:
total 0
drwxr-xr-x 2 root root 0 2007-03-20 12:59 stats
./stats:
total 0
-r--r--r-- 1 root root 4096 2007-03-20 12:59 time_in_state
-r--r--r-- 1 root root 4096 2007-03-20 12:59 total_trans
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/