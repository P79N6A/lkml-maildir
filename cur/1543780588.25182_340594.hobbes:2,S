Date: Tue, 09 Aug 2005 12:36:58 -0700
From: George Anzinger <>
Subject: Re: [PATCH] i386 No-Idle-Hz aka Dynamic-Ticks 5
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/8/9/225

Srivatsa Vaddagiri wrote:
> On Sun, Aug 07, 2005 at 03:12:21PM +1000, Con Kolivas wrote:
> 
>>Respin of the dynamic ticks patch for i386 by Tony Lindgen and Tuukka Tikkanen 
>>with further code cleanups. Are were there yet?
> 
> 
> Con,
> 	I am afraid until SMP correctness is resolved, then this is not
> in a position to go in (unless you want to enable it only for UP, which
> I think should not be our target). I am working on making this work 
> correctly on SMP systems. Hopefully I will post a patch soon.
> 
> Another observation I have made regarding dynamic tick patch is that PIT is 
> being reprogrammed whenever the CPUs are coming out of sleep state (because of 
> an interrupt say). This can happen at any arbitary time, not necessarily on 
> jiffy boundaries. As a result, there will be an offset between when jiffy 
> interrupts will now occur vs when they would have originally occured had PIT 
> never been stopped. Not sure if having this offset is good, but atleast one 
> necessary change that I foresee if zeroing delay_at_last_interrupt when 
> disabling dynamic tick.  For that matter, it may be easier to disable the PIT 
> timer by just masking PIT interrupts (instead of changing its mode).
IMNOHO, this is the ONLY way to keep proper time.  As soon as you 
reprogram the PIT you have lost track of the time.
My VST patch just turns masks the interrupt.
-- 
George Anzinger   george@mvista.com
HRT (High-res-timers):  
http://sourceforge.net/projects/high-res-timers/
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/