Date: Sat, 17 Jan 2009 12:26:15 +1100
From: Paul Mackerras <>
Subject: Re: [patch] Performance Counters for Linux, v4
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2009/1/16/493

Corey Ashford writes:
> Over time, it seems clear that we will see multi-core processor designs 
> with increasingly large uncore/nest facilities, so this could become 
> more and more of an issue.
Those nest events still get counted on counters that are in the CPU
core, right?  So that sounds like they can be counted by one or more
per-cpu perf_counter instances.  That means that you're measuring them
across all processes.  Does it make any sense to try to attribute
those events to individual processes?  How would one do that?
Clearly, something has to know enough about the system topology to
know how many counters are needed and which (virtual) cpus they should
be on.  At present that defaults to userspace, but we could extend
perf_counters to handle it in the kernel by adding 'core' and 'node'
specifiers to the hw_event structure (assuming a three-level node /
core / cpu hierarchy for the system structure).
Paul.