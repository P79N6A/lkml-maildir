Date: Wed, 21 Apr 1999 17:48:33 +0100 (GMT)
From: Riley Williams <>
Subject: Re: Moving system timer to RTC (was Re: A/D converter)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/4/21/69

Hi David.
 >> The obvious solution here would be to redefine the irq0 timer
 >> such that it runs at 18,000 Hz to perform the PC speaker stuff,
 >> and only calls the current irq0 routine every 180th interrupt.
 >> However, I would guess that latency problems would prevent that...
 > Not at all - that's exactly how it works at the moment. The
 > first problem is that it changes the frequency of the 'current
 > irq0 routine' slightly, because it's not exactly 'every 180th
 > interrupt'. So it mucks up the clock accuracy.
The obvious question relating to that is this: How important is it
that the PC speaker is fed at a rate of exactly 18kHz ??? If that
isn't particularly important and the routine can be recalibrated to
produce the same result at a slightly different frequency, that could
be used to fix that.
 > The second problem, possibly related to the above, is that Linus
 > doesn't approve of such an arrangement, so while the PC speaker
 > driver is working like this, it's not got a chance of being
 > included in 2.3.x.
The obvious cure for that would be to get the whole kernel retuned to
use an 18kHz jiffy rather than the current 100Hz one, thus boosting
the clock accuracy enormously. If it was done that way, your PC
speaker driver routine wouldn't need to touch the clock setup at all.
 > (This is hearsay - I got that second hand at least. Confirmation
 > would be very much appreciated, Linus)
Whilst I'd also be interested in this, I've taken Linux out of the cc
list as I feel one email to somebody like him is plenty.
Best wishes from Riley.
+----------------------------------------------------------------------+
| There is something frustrating about the quality and speed of Linux  |
| development, ie., the quality is too high and the speed is too high, |
| in other words, I can implement this XXXX feature, but I bet someone |
| else has already done so and is just about to release their patch.   |
+----------------------------------------------------------------------+
 * 
ftp://ftp.MemAlpha.cx/pub/rhw/Linux
 * 
http://www.MemAlpha.cx/kernel.versions.html
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/