Date: Thu, 12 Oct 2000 09:22:26 -0400 (EDT)
From: "Richard B. Johnson" <>
Subject: Re: BIG problem with BusLogic SCSI and/or something else
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/10/12/116

On Thu, 12 Oct 2000, Guest section DW wrote:
> On Wed, Oct 11, 2000 at 05:11:39PM -0400, Richard B. Johnson wrote:
> 
> > Linux version 2.2.17
> > I tried to add a new Hard disk. It's s Seagate ST39102LW 8.1 Gb.
> 
> Hmm. Your C/H/S multiplies out to 9.1 GB.
> On the other hand, Seagate ST39102LW has 9105018880 bytes,
> so probably the 8 was a typo (and you are wasting 7859200 bytes).
> 
The device reports 8.7 Gb.
scsi: ***** BusLogic SCSI Driver Version 2.1.15 of 17 August 1998 *****
scsi: Copyright 1995-1998 by Leonard N. Zubkoff <lnz@dandelion.com>
scsi0: Configuring BusLogic Model BT-958 PCI Wide Ultra SCSI Host Adapter
scsi0:   Firmware Version: 5.06J, I/O Address: 0xB800, IRQ Channel: 11/Level
scsi0:   PCI Bus: 0, Device: 12, Address: 0xDF000000, Host Adapter SCSI ID: 7
scsi0:   Parity Checking: Enabled, Extended Translation: Enabled
scsi0:   Synchronous Negotiation: UUUUUUF#UUUUUUUU, Wide Negotiation: Enabled
scsi0:   Disconnect/Reconnect: Enabled, Tagged Queuing: Enabled
scsi0:   Scatter/Gather Limit: 128 of 8192 segments, Mailboxes: 211
scsi0:   Driver Queue Depth: 211, Host Adapter Queue Depth: 192
scsi0:   Tagged Queue Depth: Automatic, Untagged Queue Depth: 3
scsi0:   Error Recovery Strategy: Default, SCSI Bus Reset: Enabled
scsi0:   SCSI Bus Termination: Both Disabled, SCAM: Disabled
scsi0: *** BusLogic BT-958 Initialized Successfully ***
scsi0 : BusLogic BT-958
scsi : 1 host.
  Vendor: SEAGATE   Model: ST32171W          Rev: 0484
  Type:   Direct-Access                      ANSI SCSI revision: 02
  Vendor: Quantum   Model: XP32150W          Rev: L912
  Type:   Direct-Access                      ANSI SCSI revision: 02
  Vendor: SEAGATE   Model: ST34573W          Rev: 5698
  Type:   Direct-Access                      ANSI SCSI revision: 02
  Vendor: EXABYTE   Model: EXB-82058VQANXR1  Rev: 07T0
  Type:   Sequential-Access                  ANSI SCSI revision: 02
  Vendor: YAMAHA    Model: CRW6416S          Rev: 1.0b
  Type:   CD-ROM                             ANSI SCSI revision: 02
  Vendor: SEAGATE   Model: ST39102LW         Rev: 0005
  Type:   Direct-Access                      ANSI SCSI revision: 02
scsi0: Target 0: Queue Depth 28, Wide Synchronous at 40.0 MB/sec, offset 15
scsi0: Target 1: Queue Depth 28, Wide Synchronous at 20.0 MB/sec, offset 15
scsi0: Target 2: Queue Depth 28, Wide Synchronous at 40.0 MB/sec, offset 15
scsi0: Target 3: Queue Depth 3, Synchronous at 5.00 MB/sec, offset 11
scsi0: Target 4: Queue Depth 3, Synchronous at 10.0 MB/sec, offset 15
scsi0: Target 6: Queue Depth 28, Wide Synchronous at 20.0 MB/sec, offset 15
Detected scsi disk sda at scsi0, channel 0, id 0, lun 0
Detected scsi disk sdb at scsi0, channel 0, id 1, lun 0
Detected scsi disk sdc at scsi0, channel 0, id 2, lun 0
Detected scsi disk sdd at scsi0, channel 0, id 6, lun 0
SCSI device sda: hdwr sector= 512 bytes. Sectors= 4194057 [2047 MB] [2.0 GB]
Partition check:
 sda: sda1 sda2 < sda5 >
SCSI device sdb: hdwr sector= 512 bytes. Sectors= 4406960 [2151 MB] [2.2 GB]
 sdb: sdb1 sdb2
SCSI device sdc: hdwr sector= 512 bytes. Sectors= 8888924 [4340 MB] [4.3 GB]
 sdc: sdc1 sdc2 sdc3
SCSI device sdd: hdwr sector= 512 bytes. Sectors= 17783240 [8683 MB] [8.7 GB]
 sdd: sdd1 sdd2 sdd3
Note that the sync-rate of target 6, the device I added, has been
turned down to try to eliminate any hardware problems. Also note
that the entire drive has been read/written with the BusLogic BIOS
diagnostic setup utility.
> > In the BIOS setup of the BusLogic adapter, I was able to format
> > and verify the disk with no problems whatsoever.
> > 
> > fdisk seemed to work okay. I made partitions.
> > mke2fs would fail (hang the system) while writing inodes.
> > The BusLogic driver would complain about "Aborting SCSI host 0 channel 0,
> > pid 84446".
> > 
> > This can't be a pid --anyway.
> 
> A SCSI one, not a Unix one.
> 
> But you omit the interesting part.
> SCSI drivers tend to give a reason, say timeout, or medium error, whatever.
> What was the precise error message?
>
No. There are no logs after the "Aborting" messages. There is nothing
written to any hard disks as a record even of the first message. The
only messages on the console are the "aborted" messages, not even a
"timeout" or any other such. Further, the messages run so fast that
I had to take a scope camera photo at 1/1000th sec to figure out what
they said.
 
> In such cases what fdisk or fsck or so say is hardly of any interest.
> One wants the kernel messages. Literally.
> 
Says who? Some versions are incompatible with kernel changes.
> > When the BusLogic driver was going through its hour-long fits of
> > resetting the bus,
> 
> Yes, Linux SCSI error recovery behaviour is not a pleasure to behold.
> Some aspects of it are better in 2.4, however.
> -
Cheers,
Dick Johnson
Penguin : Linux version 2.2.17 on an i686 machine (801.18 BogoMips).
"Memory is like gasoline. You use it up when you are running. Of
course you get it all back when you reboot..."; Actual explanation
obtained from the Micro$oft help desk.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/