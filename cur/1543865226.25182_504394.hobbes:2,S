Date: Fri, 2 Feb 2007 13:10:32 +0100
From: Roland Kuhn <>
Subject: Re: O_NONBLOCK setting "leak" outside of a process??
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/2/2/93

Hi Philippe!
On 2 Feb 2007, at 00:15, Philippe Troin wrote:
> Denis Vlasenko <vda.linux@googlemail.com> writes:
>
>> What share the same file descriptor? MC and programs started from it?
>
> All the processes started from your shell share at least fds 0, 1  
> and 2.
>
>> I thought after exec() fds atre either closed (if CLOEXEC) or
>> becoming independent from parent process
>> (i.e. it you seek, close, etc your fd, parent would not notice that).
>>
>> Am I wrong?
>
> I'm afraid so.  Seek position and flags are still shared after an
> exec.
>
That's a bug, right? I couldn't find anything to that effect in IEEE  
Std. 1003.1, 2004 Edition...
Ciao,
                     Roland
--
TU Muenchen, Physik-Department E18, James-Franck-Str., 85748 Garching
Telefon 089/289-12575; Telefax 089/289-12570
--
CERN office: 892-1-D23 phone: +41 22 7676540 mobile: +41 76 487 4482
--
Any society that would give up a little liberty to gain a little
security will deserve neither and lose both.  - Benjamin Franklin
-----BEGIN GEEK CODE BLOCK-----
Version: 3.12
GS/CS/M/MU d-(++) s:+ a-> C+++ UL++++ P+++ L+++ E(+) W+ !N K- w--- M 
+ !V Y+
PGP++ t+(++) 5 R+ tv-- b+ DI++ e+++>++++ h---- y+++
------END GEEK CODE BLOCK------
[unhandled content-type:application/pkcs7-signature][unhandled content-type:application/pgp-signature]