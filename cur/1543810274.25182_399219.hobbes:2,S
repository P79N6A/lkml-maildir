Date: Mon, 20 Feb 2006 19:36:16 +0000
From: Andy Whitcroft <>
Subject: [PATCH] remove ccache from top level Makefile and make configurable
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/2/20/299

remove ccache from top level Makefile and make configurable
[Here is the patch I used to fix this for out nightly testing.
It seems that if it were something we could configure from outside
the source we'd avoid this occuring again.]
Remove errant ccache from top-level makefile and make it configurable on
the kernel build line.
Signed-off-by: Andy Whitcroft <apw@shadowen.org>
---
 Makefile |    4 +++-
 1 files changed, 3 insertions(+), 1 deletion(-)
diff -upN reference/Makefile current/Makefile
--- reference/Makefile
+++ current/Makefile
@@ -171,9 +171,11 @@ SUBARCH := $(shell uname -m | sed -e s/i
 # Alternatively CROSS_COMPILE can be set in the environment.
 # Default value for CROSS_COMPILE is not to prefix executables
 # Note: Some architectures assign CROSS_COMPILE in their arch/*/Makefile
+# CCACHE specifies the name of a ccache binary to use with gcc.
 
 ARCH		?= $(SUBARCH)
 CROSS_COMPILE	?=
+CCACHE		?=
 
 # Architecture as present in compile.h
 UTS_MACHINE := $(ARCH)
@@ -274,7 +276,7 @@ include  $(srctree)/scripts/Kbuild.inclu
 
 AS		= $(CROSS_COMPILE)as
 LD		= $(CROSS_COMPILE)ld
-CC		= ccache $(CROSS_COMPILE)gcc
+CC		= $(CCACHE) $(CROSS_COMPILE)gcc
 CPP		= $(CC) -E
 AR		= $(CROSS_COMPILE)ar
 NM		= $(CROSS_COMPILE)nm
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/