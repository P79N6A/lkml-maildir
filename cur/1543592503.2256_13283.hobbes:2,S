Date: Sun, 27 May 2001 04:49:24 +0200
From: Andrea Arcangeli <>
Subject: Re: 2.4.5 does not link on Ruffian (alpha)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/5/26/128

On Sat, May 26, 2001 at 09:02:21PM -0400, Jeff Garzik wrote:
> Andrea Arcangeli wrote:
> > diff -urN alpha/arch/alpha/kernel/sys_dp264.c alpha-1/arch/alpha/kernel/sys_dp264.c
> > --- alpha/arch/alpha/kernel/sys_dp264.c Sun Apr  1 01:17:07 2001
> > +++ alpha-1/arch/alpha/kernel/sys_dp264.c       Wed May 23 02:43:49 2001
> > @@ -16,15 +16,18 @@
> >  #include <linux/pci.h>
> >  #include <linux/init.h>
> > 
> > +#define __EXTERN_INLINE inline
> > +#include <asm/io.h>
> > +#include <asm/core_tsunami.h>
> > +#undef  __EXTERN_INLINE
> > +
> 
> Why is "__EXTERN_INLINE" defined as "inline" not "extern inline"?
because it must be implemented somewhere for the alpha_mv pointer to
functions and for some reason they are not implemented by
core_tsunami.c in my tree (but they are in mainline and that's right).
> I simply added "extern" and things started working (as noted in my
> previous message in this thread)..
defining it as `extern inline' is completly equivalent to backing out
the patch I posted, see core_tsunami.h:
#ifndef __EXTERN_INLINE
#define __EXTERN_INLINE extern inline
#define __IO_EXTERN_INLINE
#endif
Of course your patch works like a charm too. A cleaner fix is to backout my
patch because core_tsunami.h will define it to `extern inline'
atuomatically.
Tomorrow I'll go through the log generated by the script that did the
binary search for me while I was out to find out what patch in my tree
caused me to write the posted patch to get all compilations right.
Andrea
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/