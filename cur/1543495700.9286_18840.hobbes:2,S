Date: Fri, 14 May 1999 00:32:14 +0200 (CEST)
From: Andrea Arcangeli <>
Subject: [patch] 2.3.x ide.c waitqueue
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/5/14/134

I was crashing after touching the ide cd device.
Index: drivers/block/ide.c
===================================================================
RCS file: /var/cvs/linux/drivers/block/ide.c,v
retrieving revision 1.1.2.6
diff -u -r1.1.2.6 ide.c
--- ide.c	1999/05/13 19:49:22	1.1.2.6
+++ linux/drivers/block/ide.c	1999/05/13 22:29:40
@@ -211,6 +211,7 @@
 		drive->media			= ide_disk;
 		drive->select.all		= (unit<<4)|0xa0;
 		drive->hwif			= hwif;
+		init_waitqueue_head(&drive->wqueue);
 		drive->ctl			= 0x08;
 		drive->ready_stat		= READY_STAT;
 		drive->bad_wstat		= BAD_W_STAT;
Andrea Arcangeli
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/