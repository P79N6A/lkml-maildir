Date: Tue, 07 Jan 2003 01:43:31 -0500
From:  Valdis.Kletnieks@vt ...
Subject: Re: Linux iSCSI Initiator, OpenSource (fwd) (Re: Gauntlet Set NOW!)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/1/7/13

On Tue, 07 Jan 2003 03:16:38 -0300, Werner Almesberger said:
> Valdis.Kletnieks@vt.edu wrote:
> > is currently busticated for gigabit and higher (it takes *hours* without a
> > packet drop to get the window open *all* the way
> 
> Don't use 2.0.21 for gigabit traffic :-)
> 
> (2.0.21 and earlier initialized sstresh to zero, which would indeed
> cause the behaviour you're describing.)
That's not the problem. The problem is that TCP slow-start itself (and some of
the related congestion control stuff) has some issues scaling to the very high
end.  Floyd (of RFC3168 fame) has done some work in the area:
from 
http://www.ietf.org/internet-drafts/draft-floyd-tcp-highspeed-01.txt
Abstract
   This document proposes HighSpeed TCP, a modification to TCP's
   congestion control mechanism for use with TCP connections with large
   congestion windows.  The congestion control mechanisms of the current
   Standard TCP constrains the congestion windows that can be achieved
   by TCP in realistic environments.  For example, for a Standard TCP
   connection with 1500-byte packets and a 100 ms round-trip time,
   achieving a steady-state throughput of 10 Gbps would require an
   average congestion window of 83,333 segments, and a packet drop rate
   of at most one congestion event every 5,000,000,000 packet (or
   equivalently, at most one congestion event every 1 2/3 hours).  This
   is widely acknowledged as an unrealistic constraint.  To address this
   limitation of TCP, this document proposes HighSpeed TCP, and solicits
   experimentation and feedback from the wider community.
Also 
http://www.ietf.org/internet-drafts/draft-floyd-tcp-slowstart-01.txt
Abstract
   This note proposes a modification for TCP's slow-start for use with
   TCP connections with large congestion windows.  For TCP connections
   that are able to use congestion windows of thousands (or tens of
   thousands) of MSS-sized segments (for MSS the sender's MAXIMUM
   SEGMENT SIZE), the current slow-start procedure can result in
   increasing the congestion window by thousands of segments in a single
   round-trip time.  Such an increase can easily result in thousands of
   packets being dropped in one round-trip time.  This is often counter-
   productive for the TCP flow itself, and is also hard on the rest of
   the traffic sharing the congested link.  This note proposes Limited
   Slow-Start as an optional mechanism for limiting the number of
   segments by which the congestion window is increased for one window
   of data during slow-start, in order to improve performance for TCP
   connections with large congestion windows.
[unhandled content-type:application/pgp-signature]