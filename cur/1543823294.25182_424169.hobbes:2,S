Date: Mon, 15 May 2006 17:08:35 -0700 (PDT)
From: "David S. Miller" <>
Subject: Re: [PATCH] tcpdump may trace some outbound packets twice.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/5/15/438

From: Stephen Hemminger <shemminger@osdl.org>
Date: Mon, 15 May 2006 16:41:01 -0700
> kfree_skb(NULL) is legal so the conditional here is unneeded.
> 
> But the increased calls to kfree_skb(NULL) would probably bring the
> "unlikely()" hordes descending on kfree_skb, so maybe:
And unfortunately as Patrick McHardy states, we can't use
this trick here because things like tc actions can do stuff
like pskb_expand_head() which cannot handle shared SKBs.
We need another solution to this problem, because cloning an
extra SKB is just rediculious overhead so isn't something we
can seriously consider to solve this problem.
Another option is to say this anomaly doesn't matter enough
to justify the complexity we're looking at here just to fix
this glitch.
Other implementation possibility suggestions welcome :-)
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/