Date: Sat, 3 May 2008 10:29:44 -0700
From: "Natalie Protasevich" <>
Subject: Re: linux-next: Tree for April 11 (x86-es7000)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/5/3/143

On Fri, Apr 11, 2008 at 2:45 PM, Randy Dunlap <randy.dunlap@oracle.com> wrote:
> On Fri, 11 Apr 2008 17:36:22 +1000 Stephen Rothwell wrote:
>
> > I have created today's linux-next tree at
> > git://git.kernel.org/pub/scm/linux/kernel/git/sfr/linux-next.git
> > (tar balls at
> > 
http://www.kernel.org/pub/linux/kernel/people/sfr/linux-next/
).
>
>
> In mainline, x86-32-subarch es7000 builds cleanly.
> .config attached.  (CONFIG_ACPI=n)
>
>
> In linux-next, the same .config (with minimal -next changes) fails:
>
> arch/x86/mach-es7000/built-in.o: In function `es7000_rename_gsi':
> next-20080411/arch/x86/mach-es7000/es7000plat.c:64: undefined reference to `es7000_plat'
> arch/x86/mach-es7000/built-in.o: In function `setup_unisys':
> next-20080411/arch/x86/mach-es7000/es7000plat.c:89: undefined reference to `es7000_plat'
> next-20080411/arch/x86/mach-es7000/es7000plat.c:91: undefined reference to `es7000_plat'
> arch/x86/mach-es7000/built-in.o: In function `parse_unisys_oem':
> next-20080411/arch/x86/mach-es7000/es7000plat.c:156: undefined reference to `es7000_plat'
> next-20080411/arch/x86/mach-es7000/es7000plat.c:154: undefined reference to `es7000_plat'
> arch/x86/mach-es7000/built-in.o:next-20080411/arch/x86/mach-es7000/es7000plat.c:156: more undefined references to `es7000_plat' follow
> make[1]: *** [.tmp_vmlinux1] Error 1
>
> ---
> ~Randy
>
From: Natalie Protasevich <protasnb@gmail.com>
This is the patch to fix build problem with es7000.
Conflict while building without ACPI being set. Made es7000_plat to be
defined in both ACPI and non-ACPI cases.
Signed-off-by: Natalie Protasevich <protasnb@gmail.com>
Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com>
---
mpparse.c |    4 ++--
1 file changed, 2 insertions(+), 2 deletions(-)
diff -Naur linux-next/arch/x86/kernel/mpparse.c
linux-next-mod/arch/x86/kernel/mpparse.c
--- linux-next/arch/x86/kernel/mpparse.c        2008-05-02
14:26:02.000000000 -0700
+++ linux-next-mod/arch/x86/kernel/mpparse.c    2008-05-02
14:34:00.000000000 -0700
@@ -790,6 +790,8 @@
        __find_smp_config(1);
 }
+int es7000_plat;
+
 /* --------------------------------------------------------------------------
                             ACPI-based MP Configuration
    --------------------------------------------------------------------------
*/
@@ -909,8 +911,6 @@
        MP_intsrc_info(&intsrc);
 }
-int es7000_plat;
-
 void __init mp_config_acpi_legacy_irqs(void)
 {
        struct mpc_config_intsrc intsrc;
Thanks,
--Natalie
From: Natalie Protasevich <protasnb@gmail.com>
This is the patch to fix build problem with es7000.
Conflict while building without ACPI being set. Made es7000_plat to be defined for both ACPI and non-ACPI cases.
Signed-off-by: Natalie Protasevich <protasnb@gmail.com>
Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com>
--- 
mpparse.c |    4 ++--
1 file changed, 2 insertions(+), 2 deletions(-)
diff -Naur linux-next/arch/x86/kernel/mpparse.c linux-next-mod/arch/x86/kernel/mpparse.c
--- linux-next/arch/x86/kernel/mpparse.c	2008-05-02 14:26:02.000000000 -0700
+++ linux-next-mod/arch/x86/kernel/mpparse.c	2008-05-02 14:34:00.000000000 -0700
@@ -790,6 +790,8 @@
 	__find_smp_config(1);
 }
 
+int es7000_plat;
+
 /* --------------------------------------------------------------------------
                             ACPI-based MP Configuration
    -------------------------------------------------------------------------- */
@@ -909,8 +911,6 @@
 	MP_intsrc_info(&intsrc);
 }
 
-int es7000_plat;
-
 void __init mp_config_acpi_legacy_irqs(void)
 {
 	struct mpc_config_intsrc intsrc;