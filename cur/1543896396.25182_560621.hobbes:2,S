Date: Thu, 28 Jun 2007 17:32:48 +0200
From: Clemens Koller <>
Subject: Re: Dual slot PCI riser messes up ivtv
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/6/21/148

Hi, Robert!
Robert Hancock schrieb:
> Islam Amer wrote:
 >> I am trying to build a settop box with two cards, a PVR-150 and a DVB
 >> card. The mini-ITX motherboard has only one PCI slot, so I bought an
 >> active PCI riser.
Please define "active". Is there a PCI bridge chip on the riser card?
Or better: Tell us manufacturer and type of this PCI riser card and the
mini-ITX board.
I am using a 1 to 3 PCI Bus riser card (passive, noname, bought it on ebay
some years ago).
The important thing is that in that case the IRQn lines as well as
the REQ#n and GNT#n lines are routed and coupled to the right IDSEL's of
the slots. It might be possible that the mini-ITX motherboard's PCI
configuration (BIOS) is limited there.
(This could propably be fixed in the kernel. At least in embedded
environments, it's common to have all PCI ID/IRQ routing
information in the kernel (or in the DeviceTree or OpenFirmware nowadays))
>> First I tried with two cheap lifeview cards on the riser and they
>> worked.
Propably they didn't need an interrupt?
$ cat /proc/interrupts ?
>> The PVR-150 is working fine alone, and so does the DVB card. But when I
>> use them with the riser nothing works.
> 
> Please post the output of lspci -vvv with the cards installed in the riser.
IRQ/IDSEL misconfiguration doesn't necessarily show up there.
Drivers might end up doing strange things if the IRQ never comes thru.
(experienced with Promise PDC20775 and PDC20269 HDD Controllers
on embedded PowerPC)
Just my $.05
Regards,
-- 
Clemens Koller
__________________________________
R&D Imaging Devices
Anagramm GmbH
Rupert-Mayer-Straße 45/1
Linhof Werksgelände
D-81379 München
Tel.089-741518-50
Fax 089-741518-19
http://www.anagramm-technology.com
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/