Date: Thu, 23 Feb 2006 13:56:39 +0000
From: Alasdair G Kergon <>
Subject: Re: [dm-devel] Re: [PATCH] User-configurable HDIO_GETGEO for dm volumes
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/2/23/116

On Wed, Feb 22, 2006 at 04:46:57PM -0800, Darrick J. Wong wrote:
> Looks good and tests ok, with one issue: I still have a preference for
> returning -ENOTTY over 0/0/0 when dm doesn't know the geometry.  That
> said, most programs will see the zero cylinder count and make a guess,
> so it probably doesn't matter.
My copy of the sd(4) man page says of that ioctl:
    The information returned in the parameter is the disk
    geometry of the drive as understood by DOS!   This geometry is not
    the physical geometry of the drive.  It is used when constructing the
    drive's partition table, however, and is needed for convenient
    operation of fdisk(1), efdisk(1), and lilo(1).  If the geometry
    information is not available, zero will be returned for all of the
    parameters.
Is there a preferred alternative specification?
Alasdair
-- 
agk@redhat.com
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/