Date: Tue, 27 Jan 2009 17:16:18 -0500
From: Christoph Hellwig <>
Subject: Re: [PATCH 2/5] bfa: Brocade BFA FC SCSI driver submission
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2009/1/27/353

On Tue, Jan 27, 2009 at 10:54:07AM -0800, Jing Huang wrote:
> +/**
> + * Generic HAL callback element.
> + */
> +struct bfa_cb_qe_s {
> +	struct bfa_q_s         qe;
> +	bfa_cb_cbfn_t  cbfn;
> +	bfa_boolean_t   once;
> +	u32		rsvd;
> +	void           *cbarg;
> +};
> +
> +#define bfa_cb_queue(__bfa, __hcb_qe, __cbfn, __cbarg) do {		\
> +	(__hcb_qe)->cbfn  = (__cbfn);					\
> +	(__hcb_qe)->cbarg = (__cbarg);					\
> +	bfa_q_enq(&(__bfa)->comp_q, (__hcb_qe));			\
> +} while (0)
Please stop here, weird HALs and own list management routines are not
things we put into the tree.  (except for gregs junk subdirectory..)
Please rewrite this into a proper Linux driver.