Date: Tue, 01 May 2007 17:30:47 +0200
From: Tejun Heo <>
Subject: Re: [PATCH] libata-sff: Undo bug introduced with pci_iomap changes
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/5/1/314

Hello, Alan.
Alan Cox wrote:
> If you have a controller with one channel disabled and unmapped the new
> iomap code blindly tries to iomap unconfigured BARs. Later on the code
> does the right thing and checks for unmapped bars but it is done in the
> wrong order
> 
> Reorder the checks and make the iomap conditional
> 
> Tejun: I think the code below is now correct but would appreciate you
> giving it a review.
>
> Signed-off-by: Alan Cox <alan@redhat.com>
Acked-by: Tejun Heo <htejun@gmail.com>
Yeap, the patch looks good.  I got tunnel visioned while converting to
iomap and mechanically mapped IO BAR access to iomap.  Thanks for
catching this.  This is already fixed in #upstream while converting to
new-init-model (the code is in ata_pci_init_native_host() and does about
the same thing as your patch does), so I think this patch is only needed
for -stable.  Cc'ing stable team.  The original patch can be reached at...
  
http://article.gmane.org/gmane.linux.kernel/523335/raw
Thanks.
-- 
tejun
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/