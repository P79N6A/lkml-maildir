Date: Mon, 19 Mar 2007 17:47:48 -0400
From: Gene Heskett <>
Subject: Re: 2.6.20.3: kernel BUG at mm/slab.c:597 try#2
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/3/19/362

On Monday 19 March 2007, James Bottomley wrote:
>On Mon, 2007-03-19 at 12:49 -0500, Mike Christie wrote:
>> > I can't even say if the tapes are written correctly as I can't read
>> > them (one does not reboot production machines back to 2.4.x just to
>> > try to read a backup tape - I don't have 2.6.x older than 2.6.20 on
>> > these machines).
>>
>> Could you try this patch
>> 
http://marc.info/?l=linux-scsi&m=116464965414878&w=2
>> I thought st was modified to not send offsets in the last elements but
>> it looks like it wasn't.
>
>Actually, there are two patches in the email referred to.  If the
>analysis that we're passing NULL to mempool_free is correct, it should
>be the second one that fixes the problem (the one that checks
>bio->bi_io_vec before freeing it).  Which would mean we have a
>nr_vecs==0 bio generated by the tar somehow.
>
>James
James, could this also be the cause of a tar based backup going crazy and 
thinking all data is new under any 2.6.21-rc* kernel I've tested so far 
with amanda, which in my case uses tar?  I've tried the fedora patched 
tar-1.15-1, and one I hand built right after 1.15-1 came out over a year 
ago, and they both do it, but only when booted to a 2.6.21-rc* kernel.
This obviously will be a show-stopper, either for amanda (and by 
inference, any app that uses tar), or for the migration of an amanda 
users machinery to a 2.6.21 kernel.
>
>-
>To unsubscribe from this list: send the line "unsubscribe linux-kernel"
> in the body of a message to majordomo@vger.kernel.org
>More majordomo info at  
http://vger.kernel.org/majordomo-info.html
>Please read the FAQ at  
http://www.tux.org/lkml/
-- 
Cheers, Gene
"There are four boxes to be used in defense of liberty:
 soap, ballot, jury, and ammo. Please use in that order."
-Ed Howdershelt (Author)
fractal radiation jamming the backbone
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/