Date: Thu, 8 Jan 2009 07:16:51 +0000
From: Jarek Poplawski <>
Subject: Re: Data corruption issue with splice() on 2.6.27.10
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2009/1/8/27

On 06-01-2009 19:15, Willy Tarreau wrote:
...
> Ah, so you might also have discovered a few annoyances with the API, eg
> the fact that splice() returns after the first read in non-blocking mode,
> as well as the fact that it never returns zero on close, but -EAGAIN,
> which requires an additional recv(MSG_PEEK) to distinguish between a
> close and a lack of data. But I leave that for a later discussion, let's
> address the corruption issue first.
FYI, this should be just fixed:
http://git.kernel.org/?p=linux/kernel/git/torvalds/linux-2.6.git;a=commitdiff;h=4f7d54f59bc470f0aaa932f747a95232d7ebf8b1
Regards,
Jarek P.