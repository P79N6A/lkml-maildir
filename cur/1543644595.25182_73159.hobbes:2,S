Date: Tue, 24 Sep 2002 22:54:36 +1000 (EST)
From: James Morris <>
Subject: [PATCH] export find_task_by_pid() for 2.5.38
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/9/24/104

On Mon, 23 Sep 2002, Michel Eyckmans (MCE) wrote:
> By the way, 2.3.38 gives me this:
> 
> depmod: *** Unresolved symbols in /lib/modules/2.5.38/kernel/net/ipv4/netfilter/ipt_owner.o
> depmod:         find_task_by_pid
> 
Below is a patch which exports the function, which used to be an inline.  
(This is also an issue for ip6t_owner).
- James
-- 
James Morris
<jmorris@intercode.com.au>
diff -urN -X dontdiff linux-2.5.38.orig/kernel/Makefile linux-2.5.38.w1/kernel/Makefile
--- linux-2.5.38.orig/kernel/Makefile	Tue Sep 24 19:23:03 2002
+++ linux-2.5.38.w1/kernel/Makefile	Tue Sep 24 22:14:47 2002
@@ -3,7 +3,7 @@
 #
 
 export-objs = signal.o sys.o kmod.o context.o ksyms.o pm.o exec_domain.o \
-		printk.o platform.o suspend.o dma.o
+		printk.o platform.o suspend.o dma.o pid.o
 
 obj-y     = sched.o fork.o exec_domain.o panic.o printk.o \
 	    module.o exit.o itimer.o time.o softirq.o resource.o \
diff -urN -X dontdiff linux-2.5.38.orig/kernel/pid.c linux-2.5.38.w1/kernel/pid.c
--- linux-2.5.38.orig/kernel/pid.c	Tue Sep 24 19:23:03 2002
+++ linux-2.5.38.w1/kernel/pid.c	Tue Sep 24 22:23:56 2002
@@ -23,6 +23,7 @@
 #include <linux/slab.h>
 #include <linux/init.h>
 #include <linux/bootmem.h>
+#include <linux/module.h>
 
 #define PIDHASH_SIZE 4096
 #define pid_hashfn(nr) ((nr >> 8) ^ nr) & (PIDHASH_SIZE - 1)
@@ -217,3 +218,5 @@
 		attach_pid(current, i, 0);
 	}
 }
+
+EXPORT_SYMBOL(find_task_by_pid);
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/