Date: Wed, 11 Aug 2004 19:00:09 -0700
From: "Aleksey Gorelov" <>
Subject: Re: [linux-usb-devel] USB shared interrupt problem
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/8/11/341

>In SMM mode the USB controller isn't connected to the PCI IRQ 
>line. That
>is one thing that is done in the changeover. It also seems to 
>be causing
>problems with EHCI hand over on NVidia boards still.
>
Well, in my case I have legacy free BIOS, so it is not in SMM mode,
and USB controller seems to be connected to PCI IRQ line and generating
interrupts. For UHCI though patch resets the controller, thus disabling 
interrupts, and fixing the problem. It might not work for OHCI in legacy
free
system, since there is no reset/interrupt disable for it in the patch.
Let me know if I missed something...
BTW, I talked to BIOS developers on this. 
They basically recommended 2 possible solutions:
 - try to not share UHCI irq line or
 - enable native support (or at list disable interrupts) early during
boot.
Aleks.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/