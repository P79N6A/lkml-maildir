Date: Wed, 2 Jul 2003 15:02:58 +0200
From: bert hubert <>
Subject: [PATCH] Kconfig allows LOG_BUF_SHIFT parameters that lead to disfunctional kernel
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/7/2/81

[also sent to akpm in a separate message that was posted to
 'linus-kernel@vger.kernel.org by accident] 
Attached patch adds a range check to LOG_BUF_SHIFT and clarifies the
configuration somewhat. I managed to build a non-booting kernel because I
thought 64 was a nice power of two, which lead to the kernel blocking when
it tried to actually use or allocate a 2^64 buffer.
Please apply, would've saved me a few hours of debugging.
--- init/Kconfig~	2003-07-02 14:49:28.000000000 +0200
+++ init/Kconfig	2003-07-02 14:40:53.000000000 +0200
@@ -93,7 +93,8 @@
 	  limited in memory.
 
 config LOG_BUF_SHIFT
-	int "Kernel log buffer size" if DEBUG_KERNEL
+	int "Kernel log buffer size (16 => 64KB, 17 => 128KB)" if DEBUG_KERNEL
+	range 12 20
 	default 17 if ARCH_S390
 	default 16 if X86_NUMAQ || IA64
 	default 15 if SMP
-- 
http://www.PowerDNS.com
      Open source, database driven DNS Software 
http://lartc.org
           Linux Advanced Routing & Traffic Control HOWTO
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/