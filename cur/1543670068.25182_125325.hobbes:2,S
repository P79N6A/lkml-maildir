Date: Tue, 15 Apr 2003 19:45:24 +0300
From: Sami Nieminen <>
Subject: Re: Kernels since 2.5.60 upto 2.5.67 freeze when X server terminates
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/4/15/157

If you get this freeze when using a graphical login manager (xdm, gdm, kdm), 
attached patch from xfree86 bugzilla [1] fixed this problem for me (Radeon 
Mobility 9000).
[1] 
http://bugs.xfree86.org/cgi-bin/bugzilla/show_bug.cgi?id=94
BR, Sami
-- 
Linux 2.5.67-bk4
Index: programs/Xserver/hw/xfree86/drivers/ati/radeon_dri.c
===================================================================
RCS file: /cvs/xc/programs/Xserver/hw/xfree86/drivers/ati/radeon_dri.c,v
retrieving revision 1.32
diff -p -u -r1.32 radeon_dri.c
--- programs/Xserver/hw/xfree86/drivers/ati/radeon_dri.c	2003/02/19 09:17:30	1.32
+++ programs/Xserver/hw/xfree86/drivers/ati/radeon_dri.c	2003/03/17 01:43:24
@@ -1585,6 +1585,7 @@ void RADEONDRICloseScreen(ScreenPtr pScr
     if (info->irq) {
 	drmCtlUninstHandler(info->drmFD);
 	info->irq = 0;
+	info->ModeReg.gen_int_cntl = 0;
     }
 
 				/* De-allocate vertex buffers */