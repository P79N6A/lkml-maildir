Date: Sun, 6 Jan 2008 19:22:37 -0600
From: Olof Johansson <>
Subject: Re: [PATCH] Add bug/warn marker to generic report_bug()
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/6/288

On Sun, Jan 06, 2008 at 01:38:17PM -0800, Arjan van de Ven wrote:
> On Sun, 6 Jan 2008 14:22:23 -0600
> Olof Johansson <olof@lixom.net> wrote:
> 
> > Powerpc uses the generic report_bug() from lib/bug.c to report
> > warnings, and I'm guessing other arches do as well.
> > 
> > Add the module list as well as the end-of-trace marker to the output.
> > This required making print_oops_end_marker() nonstatic.
> > 
> > 
> 
> this is the wrong approach...
> powerpc and such should just use oops_enter() / oops_exit() to signal the start/end of such 
> a trace, that gives them all the other behavior of oopsing as well (such as the "slow oops scrolling down" etc)
Note that this is for warnings, not oopses.
This comment in oops_enter threw me off of using it:
        debug_locks_off(); /* can't trust the integrity of the kernel
	anymore */
Since we can very well depend on the integrity of the kernel when it's
just doing a __WARN().
do_warn_slowpath() doesn't use oops_enter() either.
-Olof