Date: 02 Mar 2000 21:03:44 -0800
From: Chmouel Boudjnah <>
Subject: Re: Linux 2.2.15pre12
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/3/3/2

Alan Cox <alan@lxorguk.ukuu.org.uk> writes:
> o	SMB was making socket calls in wrong context	(Manfred Spraul)
Humm sound like it doesn't compile :
make[2]: Entering directory `/usr/src/RPM/BUILD/linux/fs/smbfs'
gcc -D__KERNEL__ -I/usr/src/RPM/BUILD/linux/include -Wall -Wstrict-prototypes -O2 -fomit-frame-pointer -fno-strict-aliasing -pipe -O3 -fomit-frame-pointer -fno-exceptions -fno-rtti -pipe -s -mpentium -mcpu=pentium -march=pentium -ffast-math -fexpensive-optimizations -malign-loops=2 -malign-jumps=2 -malign-functions=2 -mpreferred-stack-boundary=2 -m486 -malign-loops=2 -malign-jumps=2 -malign-functions=2 -DCPU=586 -DMODULE -DMODVERSIONS -include /usr/src/RPM/BUILD/linux/include/linux/modversions.h   -c -o sock.o sock.c
sock.c: In function `found_data':
sock.c:99: too few arguments to function `sock_wake_async_R147f492d'
make[2]: *** [sock.o] Error 1
my guess Manfred has do his patch again the new sock change of Julian,
but you have not applied the patch, patch fix :
--- ./fs/smbfs/sock.c.chmou     Thu Mar  2 19:51:06 2000
+++ ./fs/smbfs/sock.c   Thu Mar  2 20:21:46 2000
@@ -96,7 +96,7 @@
         */
        if(!sk->dead) {
                wake_up_interruptible(sk->sleep);
-               sock_wake_async(sk->socket, 1);
+               sock_wake_async(sk->socket, 1, POLL_HUP);
        }
 }
-- 
MandrakeSoft Inc                
http://www.mandrakesoft.com
Pasadena, CA USA                                  --Chmouel
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/