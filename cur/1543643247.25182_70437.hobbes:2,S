Date: Thu, 12 Sep 2002 21:06:20 -0700
From: Andrew Morton <>
Subject: Re: [PATCH] per-zone kswapd process
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/9/12/270

Dave Hansen wrote:
> 
> This patch implements a kswapd process for each memory zone.
I still don't see why it's per zone and not per node.  It seems strange
that a wee little laptop would be running two kswapds?
kswapd can get a ton of work done in the development VM and one per
node would, I expect, suffice?
Also, I'm wondering why the individual kernel threads don't have
their affinity masks set to make them run on the CPUs to which the
zone (or zones) are local?
Isn't it the case that with this code you could end up with a kswapd
on node 0 crunching on node 1's pages while a kswapd on node 1 crunches
on node 0's pages?
If I'm not totally out to lunch on this, I'd have thought that a
better approach would be
	int sys_kswapd(int nid)
	{
		return kernel_thread(kswapd, ...);
	}
Userspace could then set up the CPU affinity based on some topology
or config information and would then parent a kswapd instance.  That
kswapd instance would then be bound to the CPUs which were on the
node identified by `nid'.
Or something like that?
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/