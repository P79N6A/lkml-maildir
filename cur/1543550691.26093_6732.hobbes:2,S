Date: Wed, 4 Oct 2000 11:27:12 +0200 (CEST)
From: Martin Diehl <>
Subject: Re: 2.4.0-test9-pre8
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/10/4/144

On Tue, 3 Oct 2000, Rik van Riel wrote:
> On Tue, 3 Oct 2000, Martin Diehl wrote:
> > 
> > Just tried 2.4.0-t9p8 + t9p8-vmpatch: No change here. Box
> > appears to hang upon "init 2" (or higher) when starting several
> > things (sendmail, xfs e.g.) with (according to SysRq+p)
> > idle_task being the only one R.
> 
> Now that I think of it ... this could be a new (old?) case
> of a UP-only bug. Is anybody seeing this upon booting their
> SMP system with 'mem=8m' ??
first I've realized it is pretty unaltered no matter whether mem=8M or
mem=192M. Next unexpected observation was apache with 5 preforked childs
starting within seconds (at mem=8M) while sendmail needed 3 minutes or
so, even with mem=192M. So I started to execute everything from the
initscripts by hand, step by step.
Result: it's not VM-related! Several processes (newaliases e.g.) are
blocking in do_poll on udp socket for minutes - probably until timeout.
This behavior started from 2.4.0-t9p8 onwards. Had to hack the box' config
a little bit, but now it's ok (read: working, but not yet understood).
So for me with 2.4.0-test9 (final) on UP there is no VM-related deadlock
anymore (except the rather esoteric swap-to-file-on-ext2-on-ramdisk thing)
Sorry for the noise wrt the init-hang!
Btw, does anybody have an idea, which change (sysctl interface f.e.) on
t9p7->t9p8 may have caused this? Probably I should try to write a test
program to gather more information...
Regards,
Martin
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/