Date: Fri, 4 May 2007 16:02:01 +0200
From: Paul Slootman <>
Subject: Re: Routing 600+ vlan's via linux problems (looks like arp problems)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/5/4/235

Øyvind Vågen Jægtnes <lorrides@gmail.com> wrote:
>
>Yes, i was suspecting that the arp cache got full, but i will try
>increasing it :)
>Would there be any huge bugs if i change these lines in arp.c:
>
>        .gc_thresh1 =   128,
>        .gc_thresh2 =   512,
>
>to
>
>        .gc_thresh1 =   700,
>        .gc_thresh2 =   700,
>
>under the definition for struct arp_tbl?
Why not simply update the /proc/sys values?
No need to recompile the kernel.....
We have this in the /etc/sysctl.conf for our firewall:
net/ipv4/neigh/default/gc_thresh1=32768
net/ipv4/neigh/default/gc_thresh2=65536
net/ipv4/neigh/default/gc_thresh3=262144
net/ipv4/route/gc_elasticity=8
net/ipv4/route/gc_interval=30
net/ipv4/route/gc_min_interval=2
Paul Slootman
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/