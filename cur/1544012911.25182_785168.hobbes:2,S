Date: Tue, 30 Dec 2008 13:37:47 -0600
From: Jayson King <>
Subject: Re: problem with "sched: revert back to per-rq vruntime"?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/12/30/188

Here's some times using bash, for example. Let me know if there are some 
other tests I can do.
It shows on vanilla 2.6.28, a huge increase in latency (about 37X to 
39X) starting bash -i when the CPU is loaded with 100% nice tasks, 
relative to idle CPU. But after reverting 
f9c0b0950d5fd8c8c5af39bc061f27ea8fddcac3 the latency increase is not as 
great (about 2X).
# running bash -i on vanilla 2.6.28,
# with idle CPU
[jayson@atlas tmp]$ time bash -i -c 'exit'
exit
real    0m0.020s
user    0m0.008s
sys     0m0.014s
[jayson@atlas tmp]$ time bash -i -c 'exit'
exit
real    0m0.020s
user    0m0.014s
sys     0m0.005s
[jayson@atlas tmp]$ time bash -i -c 'exit'
exit
real    0m0.020s
user    0m0.008s
sys     0m0.009s
# running bash -i on vanilla 2.6.28,
# with 100% nice CPU usage
[jayson@atlas tmp]$ time bash -i -c 'exit'
exit
real    0m0.753s
user    0m0.011s
sys     0m0.011s
[jayson@atlas tmp]$ time bash -i -c 'exit'
exit
real    0m0.752s
user    0m0.012s
sys     0m0.012s
[jayson@atlas tmp]$ time bash -i -c 'exit'
exit
real    0m0.786s
user    0m0.010s
sys     0m0.008s
# running 2.6.28 reverted f9c0b0950d5fd8c8c5af39bc061f27ea8fddcac3,
# with idle CPU
[jayson@atlas tmp]$ time bash -i -c 'exit'
exit
real    0m0.021s
user    0m0.012s
sys     0m0.007s
[jayson@atlas tmp]$ time bash -i -c 'exit'
exit
real    0m0.020s
user    0m0.012s
sys     0m0.011s
[jayson@atlas tmp]$ time bash -i -c 'exit'
exit
real    0m0.020s
user    0m0.011s
sys     0m0.012s
# running 2.6.28 reverted f9c0b0950d5fd8c8c5af39bc061f27ea8fddcac3,
# with 100% nice CPU usage
[jayson@atlas tmp]$ time bash -i -c 'exit'
exit
real    0m0.043s
user    0m0.010s
sys     0m0.009s
[jayson@atlas tmp]$ time bash -i -c 'exit'
exit
real    0m0.046s
user    0m0.011s
sys     0m0.007s
[jayson@atlas tmp]$ time bash -i -c 'exit'
exit
real    0m0.047s
user    0m0.011s
sys     0m0.006s
Jayson