Date: Mon, 30 Apr 2007 15:59:02 +0100
From: Anton Altaparmakov <>
Subject: Re: UID/GID override on CIFS mounts to Samba and proposed new mount parameter to disable Unix Extensions on the client
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/4/30/242

On 30 Apr 2007, at 15:26, Steve French wrote:
> When CIFS Unix Extensions are negotiated we get the Unix uid and gid
> owners of the file from the server (on the Unix Query Path Info
> levels), but if the server's uids don't match the client uid's users
> were having to disable the Unix Extensions (which turned off features
> they still wanted).   The attached patch allows users to override uid
> and/or gid for file/directory owner with a default uid and/or gid
> specified at mount (as is often done when mounting from Linux cifs
> client to Windows server).  The attached patch also displays the uid
> and gid used by default in /proc/mounts (if applicable).
>
> I also would like suggestions on what we should call a proposed mount
> option (not coded yet) which would disable the CIFS Unix Extensions on
> a per-mount basis (or more likely actually would require it on the
> first mount to the server, subsequent mounts would probably inherit
> the capabilities).  Current cifs code can disable mount options before
> a mount by specifying
>
>     "echo 0 > /proc/fs/cifs/LinuxExtensionsEnabled")
>
> but it might be easier to specify it on mount (e.g.
> "nolinuxextensions" or "linuxextensions=no" ?).    Slightly harder
> would be disabling Unix Extensions after the user has already mounted
> (with Unix Extensions) to the same server (perhaps to a different
> share).  How important would it be to have two mounts to the same
> server one with unix extensions and one without?
Why "linuxextensions"?  I thought those are the "UNIX extensions"  
that Samba provides no matter on which platform it is run such as  
Linux, Mac OS X, Solaris, etc...
Best regards,
	Anton
-- 
Anton Altaparmakov <aia21 at cam.ac.uk> (replace at with @)
Unix Support, Computing Service, University of Cambridge, CB2 3QH, UK
Linux NTFS maintainer, 
http://www.linux-ntfs.org/
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/