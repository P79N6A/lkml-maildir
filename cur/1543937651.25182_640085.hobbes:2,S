Date: Fri, 18 Jan 2008 06:53:53 +0100
From: Andi Kleen <>
Subject: Re: [PATCH] x86: make clflush a required feature on x86_64
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/18/19

Kyle McMartin <kyle@mcmartin.ca> writes:
> Hopefully nobody will be stupid enough to implement a cpu without
> it. Frankly, it seems safe enough given we already require SSE2.
>
> This means the compiler can optimise away "if (!cpu_has_clflush)"
> blocks.
The original required CPUID bit set for x86-64 came out of very
detailed discussions and thinking from AMD. I think they had good
reasons to chose the current set. I would only recommend to depart
from it for very good reasons and frankly you haven't given any.
You're talking about removing two instructions.
One problem that we had in the past is that some simulators
only implement the absolutely minimum feature set and you
might have well broken one of these with this.
-Andi