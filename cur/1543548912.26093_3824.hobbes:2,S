Date: Fri, 15 Sep 2000 13:48:43 -0400 (EDT)
From: "Richard B. Johnson" <>
Subject: Re: New topic (PowerPC Linux PCI HELL)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/9/15/66

On Fri, 15 Sep 2000, Linus Torvalds wrote:
> 
> 
> On Wed, 13 Sep 2000, Andre Hedrick wrote:
> > 
> > Okay who can teach me how to force hooks and ram this down the PPC
> > 
> > pci_write_config_word(dev, PCI_COMMAND, 0x05);
> 
> If the PPC PCI code doesn't do this, then that's a PPC architecture bug.
> 
> DO NOT DO THIS IN THE DRIVER! Fix the real problem instead.
> 
> 		Linus
> 
The PCI Specification states, in part, that either the BIOS or the
driver has to enable the device. So, many drivers find that the device
has not been enabled. This is normal and necessary because many/most
PCI hardware had better not be enabled until an ISR is in-place.
So, the only safe place you can enable the device is in the driver.
It is normal and the printk()'s warning about this should be removed.
Also, the PCI_COMMAND should probably be 0x07 for all devices. The
ones that "stay" are the ones actually supported.
Cheers,
Dick Johnson
Penguin : Linux version 2.2.15 on an i686 machine (797.90 BogoMips).
"Memory is like gasoline. You use it up when you are running. Of
course you get it all back when you reboot..."; Actual explanation
obtained from the Micro$oft help desk.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/