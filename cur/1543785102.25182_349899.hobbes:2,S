Date: Tue, 13 Sep 2005 15:46:16 +0200 (CEST)
From: "Pascal Bellard" <>
Subject: [i386 BOOT CODE] kernel bootable again
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/9/13/130

Hello,
Please find attached a patch to build i386/x86_64 kernel directly
bootable. It may be usefull for rescue floppies and installation
floppies.
System sector count is updated by tools/bluid.c at offset 495. The
system could be up to 32 Mb long.
-- support any drive geometry --
Disk geometry detection assumes that no error raises on first track.
First track is read sector by sector and the first error determinates
the sectors per track count. Next, reads are performed track by track.
Tested on floppy H2/S18 and harddisk H16/S63. Should work on
every exotic drive supporting Int13h CHS.
-- cmdline support --
If ram_size (offset 504) bit 13 is set, the kernel cmdline
is load from the sector following the kernel image.
If Ctrl, Alt, Shift or CapsLock is pressed the kernel cmdline is
prompted until Enter key. BackSpace is supported.
Regards,
-pascal
[unhandled content-type:application/defanged-1]