Date: Mon, 11 Jan 1999 09:05:17 +0100 (CET)
From: Jakub Jelinek <>
Subject: Re: script ver_linux
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/1/11/257

> 
> 
> I find the idea interesting and useful.
> 
> The below is the output I got :
> 
> bash-2.02# sh scripts/ver_linux
> -- Versions installed: (if some fields are empty or looks
> -- unusual then possibly you have very old versions)
> Linux saito 2.2.0-pre5 #1 Fri Jan 8 15:06:04 CET 1999 i586 unknown
> Kernel modules         2.1.121
> Gnu C                  pgcc-2.91.60
> Binutils               2.9.1.0.19
> Linux C Library        2.0.7
> Dynamic linker         ldd: version 1.9.9
> Linux C++ Library      2.9.0
> Procps                 1.2.9
> Mount                  2.9
> Net-tools              (1999-01-01)   --> (1)
> Kbd                                   --> (2)
> Sh-utils               1.16
> 
> 
> (1) This may not be the expected one. I have net-tools 1.49-1 installed.
> 
> (2) The field is empty as I have a replacement package (console-tools by
>     Yann Dirson, dirson@debian.org) installed.
For the (2) problem, a fix is in vger CVS already:
--- linux/scripts/ver_linux.jj	Fri Jan  8 11:07:51 1999
+++ linux/scripts/ver_linux	Fri Jan  8 11:15:51 1999
@@ -25,5 +25,8 @@
 'NR==1{if ($5 != "") { n=split($5,buf,"-"); ver=buf[n]; done=1 }}
  NR==2{if (done != 1) ver=$3 }
  END{print "Net-tools             ",ver}'
-loadkeys -h 2>&1 | awk 'NR==1{print "Kbd                   ",$3}'
+loadkeys -h 2>&1 | awk \
+'(NR==1 && $3) {ver=$3}
+ (NR==2 && $1 ~ /console-tools/) {print "Console-tools         ",$3; done=1}
+ END {if (!done) print "Kbd                   ",ver}'
 expr --v | awk '{print "Sh-utils              ", $NF}'
Cheers,
    Jakub
___________________________________________________________________
Jakub Jelinek | jj@sunsite.mff.cuni.cz | 
http://sunsite.mff.cuni.cz
Administrator of SunSITE Czech Republic, MFF, Charles University
___________________________________________________________________
UltraLinux  |  
http://ultra.linux.cz/
  |  
http://ultra.penguin.cz/
Linux version 2.2.0-pre6 on a sparc64 machine (3958.37 BogoMips)
___________________________________________________________________
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/