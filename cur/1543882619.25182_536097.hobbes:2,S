Date: Fri, 27 Apr 2007 17:27:18 +0200
From: Johannes Berg <>
Subject: Re: [linux-pm] driver power operations (was Re: suspend2 merge)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/4/27/296

On Fri, 2007-04-27 at 17:20 +0200, Rafael J. Wysocki wrote:
> I think we can use 'stages' and pass them as arguments to the functions.
> 
> In that case we can have two callbacks for the hibernation (I'd prefer to say
> 'hibernation' instead of 'suspend to disk' from now on), one 'quiesce' callback
> and one 'activate' callback that can be called many times in one
> snapshot/restore cycle with different arguments, for example:
But you're not proposing to add suspend/resume to this interface too, I
hope :)
> quiesce(PREPARE) -- that may be needed for drivers that allocate much memory
> before quiescing devices (if any)
> ...
> quiesce(PRE_SNAPSHOT)
> ...
> quiesce(PRE_SNAPSHOT_IRQ_OFF)
> ...
> activate(POST_SNAPSHOT_IRQ_OFF)
> ...
> activate(POST_SNAPSHOT)
> ...
> activate(FINISH)
I'm still not sure I like having to switch on the argument for every
implementation. Is it really worth it?
johannes
[unhandled content-type:application/pgp-signature]