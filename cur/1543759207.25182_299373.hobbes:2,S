Date: Thu, 3 Mar 2005 23:16:13 -0800
From: Matt Mackall <>
Subject: Re: [CHECKER] Do ext2, jfs and reiserfs respect mount -o sync/dirsync option?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/3/4/40

On Thu, Mar 03, 2005 at 10:33:40PM -0800, Junfeng Yang wrote:
> 
> Hi,
> 
> FiSC (our file system checker) emits several warnings on ext2, jfs and
> reiserfs, complaining that diretories or files are lost while FiSC
> believes they should already be persistent on disk. (ext3 behaves
> correctly.)
> 
> All warnings boil down to a single cause:  when these file systems are
> mounted -o sync or dirsync, dirty blocks are still written out
> asynchronously.  It appears to me that these mount options don't have any
> effect on these file systems.  Is this the intended behavior?
I don't believe so. The sync option should definitionally make calls
to fsync for integrity redundant. This probably got broken ages ago
for ext2 in one of the many buffer/page cache refactorings.
-- 
Mathematics is the supreme nostalgia of our time.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/