Date: Mon, 9 May 2005 11:46:49 +0200 (MET DST)
From: Henrik Grubbström <>
Subject: Re: [PATCH] Support for dx directories in ext3_get_parent (NFSD)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/5/9/35

On Mon, 9 May 2005, Andreas Dilger wrote:
> On May 09, 2005  10:57 +0200, Henrik Grubbström wrote:
> > The 2.6.10 ext3_get_parent attempts to use ext3_find_entry to look up the
> > entry "..", which fails for dx directories since ".." is not present in
> > the directory hash table. The patch below solves this by looking up the
> > dotdot entry in the dx_root block.
> 
> ext3_get_parent() is IMHO the wrong place to fix this bug as it introduces
> a lot of internals from htree into that function.  Instead, I think this
> should be fixed in ext3_find_entry() as in the below patch.  This has the
> added advantage that it works for any callers of ext3_find_entry() and not
> just ext3_lookup_parent().
The reason I didn't put it there is that handling of ".." is usually
performed by fs/namei.c:link_path_walk() and putting it in
ext3_find_entry() or one of the functions it calls would slow down the
common case.
> Cheers, Andreas
--
Henrik Grubbström					grubba@roxen.com
Roxen Internet Software AB
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/