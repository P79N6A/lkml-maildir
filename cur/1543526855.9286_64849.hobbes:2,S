Date: Mon, 21 Feb 2000 12:27:37 -0800
From: "David S. Miller" <>
Subject: Re: 2.3.47 missing symbol
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/2/21/198

Thanks for the report, this should fix it:
--- net/packet/af_packet.c.~1~	Fri Feb 18 08:47:23 2000
+++ net/packet/af_packet.c	Mon Feb 21 08:25:55 2000
@@ -5,7 +5,7 @@
  *
  *		PACKET - implements raw packet sockets.
  *
- * Version:	$Id: af_packet.c,v 1.31 2000/02/18 16:47:23 davem Exp $
+ * Version:	$Id: af_packet.c,v 1.32 2000/02/21 16:25:55 davem Exp $
  *
  * Authors:	Ross Biro, <bir7@leland.Stanford.Edu>
  *		Fred N. van Kempen, <waltje@uWalt.NL.Mugnet.ORG>
@@ -1438,12 +1438,14 @@
 
 		case SIOCGIFBR:
 		case SIOCSIFBR:
+#if defined(CONFIG_BRIDGE) || defined(CONFIG_BRIDGE_MODULE)
 #ifdef CONFIG_KMOD
 			if (br_ioctl_hook == NULL)
 				request_module("bridge");
 #endif
 			if (br_ioctl_hook != NULL)
 				return br_ioctl_hook(arg);
+#endif
 
 			return -ENOPKG;
 			
--- net/ipv4/af_inet.c.~1~	Fri Feb 18 08:47:20 2000
+++ net/ipv4/af_inet.c	Mon Feb 21 08:25:59 2000
@@ -5,7 +5,7 @@
  *
  *		PF_INET protocol family socket handler.
  *
- * Version:	$Id: af_inet.c,v 1.107 2000/02/18 16:47:20 davem Exp $
+ * Version:	$Id: af_inet.c,v 1.108 2000/02/21 16:25:59 davem Exp $
  *
  * Authors:	Ross Biro, <bir7@leland.Stanford.Edu>
  *		Fred N. van Kempen, <waltje@uWalt.NL.Mugnet.ORG>
@@ -135,7 +135,9 @@
 int (*dlci_ioctl_hook)(unsigned int, void *) = NULL;
 #endif
 
+#if defined(CONFIG_BRIDGE) || defined(CONFIG_BRIDGE_MODULE)
 int (*br_ioctl_hook)(unsigned long) = NULL;
+#endif
 
 /* New destruction routine */
 
@@ -837,13 +839,14 @@
 			return(devinet_ioctl(cmd,(void *) arg));
 		case SIOCGIFBR:
 		case SIOCSIFBR:
+#if defined(CONFIG_BRIDGE) || defined(CONFIG_BRIDGE_MODULE)
 #ifdef CONFIG_KMOD
 			if (br_ioctl_hook == NULL)
 				request_module("bridge");
 #endif
 			if (br_ioctl_hook != NULL)
 				return br_ioctl_hook(arg);
-
+#endif
 			return -ENOPKG;
 			
 		case SIOCADDDLCI:
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/