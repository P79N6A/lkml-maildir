Date: Mon, 28 Jul 2003 15:03:44 +0200
From: Adrian Bunk <>
Subject: [patch 2.6.0-test2: com20020_cs.c doesn't compile
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/7/28/116

On Sun, Jul 27, 2003 at 10:08:40AM -0700, Linus Torvalds wrote:
>...
> Summary of changes from v2.6.0-test1 to v2.6.0-test2
> ============================================
>...
> Christoph Hellwig:
>...
>   o [ARCNET]: Fix module refcounting
>...
drivers/net/pcmcia/com20020_cs.c wasn't changed, resulting in the 
following compile error:
<--  snip  -->
...
  CC      drivers/net/pcmcia/com20020_cs.o
drivers/net/pcmcia/com20020_cs.c: In function `com20020_attach':
drivers/net/pcmcia/com20020_cs.c:240: error: structure has no member 
named `open_close_ll'
make[3]: *** [drivers/net/pcmcia/com20020_cs.o] Error 1
<--  snip -->
The following patch fixes it:
--- linux-2.6.0-test2-full-no-smp/drivers/net/pcmcia/com20020_cs.c.tmp	2003-07-28 14:57:35.000000000 +0200
+++ linux-2.6.0-test2-full-no-smp/drivers/net/pcmcia/com20020_cs.c	2003-07-28 14:58:55.000000000 +0200
@@ -171,14 +171,6 @@
 
 ======================================================================*/
 
-static void com20020cs_open_close(struct net_device *dev, bool open)
-{
-    if (open)
-	MOD_INC_USE_COUNT;
-    else
-	MOD_DEC_USE_COUNT;
-}
-
 static dev_link_t *com20020_attach(void)
 {
     client_reg_t client_reg;
@@ -237,7 +229,7 @@
     lp->backplane = backplane;
     lp->clockp = clockp;
     lp->clockm = clockm & 3;
-    lp->hw.open_close_ll = com20020cs_open_close;
+    lp->hw.owner = THIS_MODULE;
 
     link->irq.Instance = info->dev = dev;
     link->priv = info;
cu
Adrian
-- 
       "Is there not promise of rain?" Ling Tan asked suddenly out
        of the darkness. There had been need of rain for many days.
       "Only a promise," Lao Er said.
                                       Pearl S. Buck - Dragon Seed
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/