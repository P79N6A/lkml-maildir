Date: Sun, 14 Jan 2007 19:47:49 -0800
From: David Stevens <>
Subject: Re: 2.6.19.2 regression introduced by "IPV4/IPV6: Fix inet{,6} device initialization order."
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/1/14/147

I expect this is the failure to join the all-nodes multicast group,
in which case the fix has already been posted to netdev. I
believe the router advertisements are sent to that, and if the
join failed, it wouldn't receive any of them.
I think it's better to add the fix than withdraw this patch, since
the original bug is a crash.
Details:
The IPv6 code passes the "dev" entry to the multicast group
incrementer and uses it to dereference to get the in6_dev.
IPv4, by contrast, passes the in_dev directly to its equivalent
functions.
IPv6 joins the required "all-nodes" multicast group in the
multicast device initialization function, which due to the fix
won't have a dev entry at that time. The patch posted by
Yoshifuji Hideaki moves the all-nodes join until after the
ip6_ptr is added to the dev.
                                        +-DLS
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/