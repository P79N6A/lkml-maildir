Date: Sun, 18 Jun 2006 13:21:58 -0400
From: "Tobias Oed" <>
Subject: [patch] pdc202xx_old depends on CONFIG_BLK_DEV_IDEDMA
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/6/18/145

The driver pdc202xx_old requires CONFIG_BLK_DEV_IDEDMA, so it's always 
defined
Signed-off-by: Tobias Oed <tobiasoed@hotmail.com>
--- linux-2.6.17-rc1-mm3-1/drivers/ide/pci/pdc202xx_old.c       2006-04-26 
11:59:42.000000000 +0200
+++ linux-2.6.17-rc1-mm3-2/drivers/ide/pci/pdc202xx_old.c       2006-04-26 
11:59:52.000000000 +0200
@@ -491,12 +491,8 @@
static void pdc202xx_reset_host (ide_hwif_t *hwif)
{
-#ifdef CONFIG_BLK_DEV_IDEDMA
//     unsigned long high_16   = hwif->dma_base - (8*(hwif->channel));
        unsigned long high_16   = hwif->dma_master;
-#else /* !CONFIG_BLK_DEV_IDEDMA */
-       unsigned long high_16   = pci_resource_start(hwif->pci_dev, 4);
-#endif /* CONFIG_BLK_DEV_IDEDMA */
        u8 udma_speed_flag      = hwif->INB(high_16|0x001f);
        hwif->OUTB((udma_speed_flag | 0x10), (high_16|0x001f));
_________________________________________________________________
Express yourself instantly with MSN Messenger! Download today - it's FREE! 
http://messenger.msn.click-url.com/go/onm00200471ave/direct/01/
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/