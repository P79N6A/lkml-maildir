Date: Sun, 01 Dec 2002 11:33:11 +0100
From: Manfred Spraul <>
Subject: Re: [PATCH] POSIX message queues, 2.5.50
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/12/1/21

Some notes:
- coding style: linux functions usually have only one return at the end 
of the function, and goto internally. mqueue_parse_options() does that, 
mqueue_create contains multiple returns.
- why do you allocate the ext_wait_queue structure dynamically? Put it 
on the stack, that avoids error handling for failed allocations.
- reusing kernel functions is not a disadvantage - load_msg() and 
store_msg() automagically split the kmalloc allocations into page sized 
chunks.
- why do you use __add_wait_queue in wq_sleep_on()? It seems you have 
copied that code from kernel/sched.c - it's not needed. It was needed for
    cli()
    if(condition_var==0)
        sleep_on(&my_queue);
--
    Manfred
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/