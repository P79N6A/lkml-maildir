Date: Mon, 28 Oct 2002 13:27:04 -0200
From: Denis Vlasenko <>
Subject: Re: New csum and csum_copy routines - and a test/benchmark program
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/10/28/50

On 28 October 2002 06:48, Roberto Nibali wrote:
> Denis Vlasenko wrote:
> > I took some time to develop a little test/benchmark program
> > for csum and csum_copy routines (used in networking).
> > It has grown to include following features:
>
> I needed the attached patch with changes to make it work on my
> machine. Could you comment on it, please? Also a Makefile would be
> nicer ;).
Applied except for a bug ;) see below
--- timing_csum_copy.3/csum_kpf.S       Mon Oct 28 13:35:30 2002
+++ timing_csum_copy.3-ratz/csum_kpf.S  Mon Oct 28 09:43:21 2002
@@ -73,7 +73,7 @@
 40:
        PREFETCH(256(%esi))
 41:
-       addl/*  -128(%esi), %eax
+       addl    -128(%esi), %eax
        adcl    -124(%esi), %eax
        adcl    -120(%esi), %eax
        adcl    -116(%esi), %eax
@@ -97,7 +97,7 @@
        adcl    -44(%esi), %eax
        adcl    -40(%esi), %eax
        adcl    -36(%esi), %eax
-       adcl*/  -32(%esi), %eax
+       adcl    -32(%esi), %eax
        adcl    -28(%esi), %eax
        adcl    -24(%esi), %eax
        adcl    -20(%esi), %eax
No no no. First instruction nas to be an addl, that's why
there is a weird comment.  Just comment out lines
from addl -128... to adcl -36... and change adcl -23.. to addl
# as --version
GNU assembler 2.13.90.0.6 20021002
Copyright 2002 Free Software Foundation, Inc.
This program is free software; you may redistribute it under the terms of
the GNU General Public License.  This program has absolutely no warranty.
This assembler was configured for a target of `i386-pc-linux-gnu'.
What's yours?
--
vda
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/