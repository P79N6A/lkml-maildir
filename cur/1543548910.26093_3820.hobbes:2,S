Date: Fri, 15 Sep 2000 10:16:39 -0700
From: "David S. Miller" <>
Subject: Re: Q: sock output serialization
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/9/15/62

   From: kuznet@ms2.inr.ac.ru
   Date: Fri, 15 Sep 2000 21:07:38 +0400 (MSK DST)
   [ Dave, all this sounds bad. ]
Well, there are two things:
1) If exact sequencing is so important, then we can make
   special netif_rx tasklet for these guys which serializes
   around a spinlock.
   Actually, even with this, how could we guarentee this still.
   Yes, IRQ affinity would need to force only a single CPU to
   receive interrupts from this LAPB device.
   It smells rotten to the core, can someone tell me exactly
   why reordering is strictly disallowed?  I do not even know
   how other OSes can handle this properly since most, if
   not all, use the IRQ dynamic cpu targeting facilities of
   various machines so LAPB is by definition broken there too.
2) Someone please show Alexey and myself how to process input packet
   when out of memory and not to drop any packets ;-)
   I sense that usually, LAPB handles this issue at a different
   level, in the hardware?  Does LAPB specify how to maintain
   reliably delivery and could we hook into this "how" when we
   need to drop LAPB frames?  Perhaps it is too late by the time
   netif_rx is dealing with it.
LAPB sounds like quite a broken protocol at the moment...  But I'm
sure there are details which will emerge and clear this all up.
Later,
David S. Miller
davem@redhat.com
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/