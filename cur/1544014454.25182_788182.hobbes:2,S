Date: Wed, 7 Jan 2009 14:18:46 +0100
From: Ingo Molnar <>
Subject: Re: [PATCH] [3/5] Mark complex bitops.h inlines as __always_inline
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2009/1/7/183

* Hugh Dickins <hugh@veritas.com> wrote:
> Hugh Dickins noticed that released gcc versions building the kernel with 
> CONFIG_OPTIMIZE_INLINING=y don't inline some of the bitops - sometimes 
> generating very inefficient pageflag tests, and many instances of 
> constant_test_bit().
Could you quantify that please?
We really dont want to reintroduce __always_inline just for performance / 
code size reasons. If GCC messes up and makes a larger / more inefficient 
kernel, GCC will be fixed. CONFIG_OPTIMIZE_INLINING is default-off, so 
enable it only if it improves your kernel.
	Ingo