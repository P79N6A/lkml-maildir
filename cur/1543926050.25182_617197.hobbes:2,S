Date: Wed, 14 Nov 2007 06:33:39 +0100
From: Gabriel C <>
Subject: Re: 2.6.24-rc2-mm1
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/11/14/13

Matthew Dharm wrote:
> On Tue, Nov 13, 2007 at 07:49:24PM -0800, Greg KH wrote:
>> Matt, are these the errors you were worried about with the patch we were
>> just talking about tha tis in my tree?
> 
> I can't tell from these logs.
There is the dmesg with CONFIG_USB_STORAGE_DEBUG :
http://194.231.229.228/dmesg-2.6.24-rc2-mm1
> 
> The key question (in relation to the allow_restart patch) is this:  Was
> everything working fine until a START_STOP was sent to the device?
> 
> The SCSI layers used to send devices START_STOP to almost every device as
> part of initialization.  I think we switched all of that to use
> TEST_UNIT_READY instead.
> 
> The patch you've got should re-enable START_STOP to be sent.  The SCSI
> layers (I'm told, but haven't verified myself) only send START_STOP if the
> device reports that it needs a startup command.
> 
> CONFIG_USB_STORAGE_DEBUG will generate a *lot* of debug output.  But, it
> should be pretty easy to see if START_STOP was sent at all, and if it
> caused the problems.
> 
> Matt
> 
> P.S. Worst case, the issue we're talking about here would only cause the
> device firmware to crash, which would eventually lead to a disconnect.
> That shouldn't have caused the much more severe problems shown in the log
> you sent.
> 
Gabriel
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/