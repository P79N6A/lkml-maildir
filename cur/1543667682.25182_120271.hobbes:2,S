Date: Tue, 25 Mar 2003 13:47:11 +0100
From: Stelian Pop <>
Subject: USB MemoryStick reader and 2.5.66
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/3/25/72

Hi,
Is the usb storage driver supposed to work in the latest kernels, or
is there somewhere a big pile of scsi / usb-storage patches waiting
to be integrated and I shouldn't bother with that until then ?
This is with an internal USB Memory Stick reader on a Sony Vaio C1VE, 
which works just fine in 2.4, but in 2.5 it doesn't even gets 
recognized (hotplug ?). If I modprobe usb-storage manually the 
module loads just fine:
  Initializing USB Mass Storage driver...
  scsi0 : SCSI emulation for USB Mass Storage devices
    Vendor: Sony      Model: MSC-U01N          Rev: 1.00
    Type:   Direct-Access                      ANSI SCSI revision: 02
But then any attempt to mount it or even 'dd if=/dev/sda' hangs 
forever, the only messages I have in kernel logs are below.
Is someone interesting in a more complete bug report or should I
test something else ?
Thanks,
Stelian.
-----------------8<---------------------------8<------------------
Initializing USB Mass Storage driver...
scsi0 : SCSI emulation for USB Mass Storage devices
  Vendor: Sony      Model: MSC-U01N          Rev: 1.00
  Type:   Direct-Access                      ANSI SCSI revision: 02
sda : READ CAPACITY failed.
sda : status=0, message=00, host=7, driver=00 
sda : sense not available. 
sda: test WP failed, assume Write Enabled
sda: asking for cache data failed
sda: assuming drive cache: write through
sda : READ CAPACITY failed.
sda : status=0, message=00, host=7, driver=00 
sda : sense not available. 
sda: test WP failed, assume Write Enabled
sda: asking for cache data failed
sda: assuming drive cache: write through
sda : READ CAPACITY failed.
sda : status=0, message=00, host=7, driver=00 
sda : sense not available. 
sda: test WP failed, assume Write Enabled
sda: asking for cache data failed
sda: assuming drive cache: write through
 sda:<3>Buffer I/O error on device sd(8,0), logical block 0
Buffer I/O error on device sd(8,0), logical block 0
 unable to read partition table
 sda:<3>Buffer I/O error on device sd(8,0), logical block 0
 unable to read partition table
Attached scsi removable disk sda at scsi0, channel 0, id 0, lun 0
WARNING: USB Mass Storage data integrity not assured
USB Mass Storage device found at 2
drivers/usb/core/usb.c: registered new driver usb-storage
USB Mass Storage support registered.
sda : READ CAPACITY failed.
sda : status=0, message=00, host=7, driver=00 
sda : sense not available. 
sda: test WP failed, assume Write Enabled
sda: asking for cache data failed
sda: assuming drive cache: write through
sda : READ CAPACITY failed.
sda : status=0, message=00, host=7, driver=00 
sda : sense not available. 
sda: test WP failed, assume Write Enabled
sda: asking for cache data failed
sda: assuming drive cache: write through
 sda:<3>Buffer I/O error on device sd(8,0), logical block 0
Buffer I/O error on device sd(8,0), logical block 0
 unable to read partition table
sda : READ CAPACITY failed.
sda : status=0, message=00, host=7, driver=00 
sda : sense not available. 
sda: test WP failed, assume Write Enabled
sda: asking for cache data failed
sda: assuming drive cache: write through
sda : READ CAPACITY failed.
sda : status=0, message=00, host=7, driver=00 
sda : sense not available. 
sda: test WP failed, assume Write Enabled
sda: asking for cache data failed
sda: assuming drive cache: write through
 sda:<3>Buffer I/O error on device sd(8,0), logical block 0
Buffer I/O error on device sd(8,0), logical block 0
 unable to read partition table
sda : READ CAPACITY failed.
sda : status=0, message=00, host=7, driver=00 
sda : sense not available. 
sda: test WP failed, assume Write Enabled
sda: asking for cache data failed
sda: assuming drive cache: write through
sda : READ CAPACITY failed.
sda : status=0, message=00, host=7, driver=00 
sda : sense not available. 
sda: test WP failed, assume Write Enabled
sda: asking for cache data failed
sda: assuming drive cache: write through
 sda:<3>Buffer I/O error on device sd(8,0), logical block 0
Buffer I/O error on device sd(8,0), logical block 0
 unable to read partition table
sda : READ CAPACITY failed.
sda : status=0, message=00, host=7, driver=00 
sda : sense not available. 
sda: test WP failed, assume Write Enabled
sda: asking for cache data failed
sda: assuming drive cache: write through
sda : READ CAPACITY failed.
sda : status=0, message=00, host=7, driver=00 
sda : sense not available. 
sda: test WP failed, assume Write Enabled
sda: asking for cache data failed
sda: assuming drive cache: write through
 sda:<3>Buffer I/O error on device sd(8,0), logical block 0
Buffer I/O error on device sd(8,0), logical block 0
 unable to read partition table
sda : READ CAPACITY failed.
sda : status=0, message=00, host=7, driver=00 
sda : sense not available. 
sda: test WP failed, assume Write Enabled
sda: asking for cache data failed
sda: assuming drive cache: write through
-----------------8<---------------------------8<------------------
    
-- 
Stelian Pop <stelian.pop@fr.alcove.com>
Alcove - 
http://www.alcove.com
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/