Date: Mon, 9 Jan 2006 14:09:01 -0500 (EST)
From: Alan Stern <>
Subject: Re: PROBLEM: PS/2 keyboard does not work with 2.6.15
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/1/9/264

On Mon, 9 Jan 2006, Martin Bretschneider wrote:
> Yes, I also use the OHCI controller (I guessed that this is
> necessary for low speed USB devices...), I commented the calls of
> quirk_usb_disable_?hci and renamed the compiled modules so that they
> cannot be loaded. Thus, the PS/2 keyboard *does* work with "USB
> keyboard support" enabled in the BIOS with kernel 2.6.15. But - of
> cource - no USB device does work.
Good work!  This proves that the i8042 driver _is_ compatible with BIOS 
legacy support.
The next step is to find out which part of the USB handoff code isn't
working right.  Martin, first try uncommenting just the
quirk_usb_disable_ohci call but leave the modules renamed.  That will
indicate whether the problem is in the handoff code or in the driver.
Next, try renaming the ohci-hcd.ko file back to its correct name so it
does get loaded.  If the keyboard continues to work then the problem must
lie in either UHCI or EHCI.  Try doing the same two-part test (enable the
quirk code and then un-rename the file) with each of them to see exactly
at what point the keyboard stops working.
Alan Stern
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/