Date: 21 Mar 2000 0:12:0 +0100
From: "Rask Ingemann Lambertsen" <>
Subject: Re: Reiserfs as root? 2.3.99-pre1
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/3/20/243

Den 20-Mar-00 15:25:16 skrev Rask Ingemann Lambertsen følgende om "Re: Reiserfs as root? 2.3.99-pre1":
>    I think I saw a note somewhere about how to turn those angle bracketed
> hex numbers into useful symbolic constants, so I'll have a go at that.
ksymoops 2.3.3 on i486 2.3.52.  Options used
     -V (default)
     -k /proc/ksyms (default)
     -l /proc/modules (default)
     -o /lib/modules/2.3.52/ (default)
     -m /boot/System.map (specified)
dmesg:
vs-13042: reiserfs_read_inode: [107114 107445 0x0 SD] not founduniqueness 107114
kernel BUG at /mnt/raid/usr/build/linux-2.3.52/include/linux/reiserfs_fs.h:420!
Decoded by ksymoops:
invalid operand: 0000
CPU:    0
EIP:    0010:[<c0163b39>]
Using defaults from ksymoops -t elf32-i386 -a i386
EFLAGS: 00010296
eax: 00000050   ebx: c02a7f24   ecx: c0210a58   edx: c085ff84
esi: c0273304   edi: c02736e8   ebp: c02a7f24   esp: c02a7e28
ds: 0018   es: 0018   ss: 0018
Process make (pid: 684, stackpage=c02a7000)
Stack: c01ecd99 c01ece60 000001a4 c02a7f24 c0273304 c02736e8 c02736fa 00000000 
       c0163dd4 c02a7f24 c0273304 c02a7e98 c0164160 c0273304 c02a7f24 c0e89b00 
       c0e89c00 c02a7f24 00000000 c02736e8 c02a7e80 c02a7e84 0000006b 00000000 
Call Trace: [<c01ecd99>] [<c01ece60>] [<c0163dd4>] [<c0164160>] [<c015c5dc>] [<c01ea4c0>] [<c01580c4>] 
       [<c0134d7a>] [<c0134ff4>] [<c01350e8>] [<c0131e3e>] [<c01096ac>] 
Code: 0f 0b 83 c4 0c 89 f6 b8 0f 00 00 00 89 c6 89 f7 c1 ff 1f 89 
>>EIP; c0163b39 <le_type+a9/330>   <=====
Trace; c01ecd99 <devfsd_buf_size+68a5/1244c>
Trace; c01ece60 <devfsd_buf_size+696c/1244c>
Trace; c0163dd4 <sprintf_le_key+14/50>
Trace; c0164160 <reiserfs_warning+a0/150>
Trace; c015c5dc <reiserfs_iget+3c/50>
Trace; c01ea4c0 <devfsd_buf_size+3fcc/1244c>
Trace; c01580c4 <reiserfs_lookup+84/c0>
Trace; c0134d7a <real_lookup+9a/160>
Trace; c0134ff4 <lookup_dentry+124/1f0>
Trace; c01350e8 <__namei+28/80>
Trace; c0131e3e <sys_newstat+e/70>
Trace; c01096ac <system_call+34/38>
Code;  c0163b39 <le_type+a9/330>
00000000 <_EIP>:
Code;  c0163b39 <le_type+a9/330>   <=====
   0:   0f 0b                     ud2a      <=====
Code;  c0163b3b <le_type+ab/330>
   2:   83 c4 0c                  addl   $0xc,%esp
Code;  c0163b3e <le_type+ae/330>
   5:   89 f6                     movl   %esi,%esi
Code;  c0163b40 <le_type+b0/330>
   7:   b8 0f 00 00 00            movl   $0xf,%eax
Code;  c0163b45 <le_type+b5/330>
   c:   89 c6                     movl   %eax,%esi
Code;  c0163b47 <le_type+b7/330>
   e:   89 f7                     movl   %esi,%edi
Code;  c0163b49 <le_type+b9/330>
  10:   c1 ff 1f                  sarl   $0x1f,%edi
Code;  c0163b4c <le_type+bc/330>
  13:   89 00                     movl   %eax,(%eax)
   And here is another one:
vs-13042: reiserfs_read_inode: [92029 99370 0x0 SD] not founduniqueness 97212
kernel BUG at /mnt/raid/usr/build/linux-2.3.52/include/linux/reiserfs_fs.h:420!
invalid operand: 0000
CPU:    0
EIP:    0010:[<c0163b39>]
EFLAGS: 00010296
eax: 00000050   ebx: c0405f24   ecx: c0210a58   edx: c085ff84
esi: c0273304   edi: c02736e8   ebp: c0405f24   esp: c0405e28
ds: 0018   es: 0018   ss: 0018
Process make (pid: 948, stackpage=c0405000)
Stack: c01ecd99 c01ece60 000001a4 c0405f24 c0273304 c02736e8 c02736fa 00000000 
       c0163dd4 c0405f24 c0273304 c0405e98 c0164160 c0273304 c0405f24 c0e15c40 
       c0e15d40 c0405f24 00000000 c02736e8 c0405e80 c0405e84 0000006b 00000000 
Call Trace: [<c01ecd99>] [<c01ece60>] [<c0163dd4>] [<c0164160>] [<c015c5dc>] [<c01ea4c0>] [<c01580c4>] 
       [<c0134d7a>] [<c0134ff4>] [<c01350e8>] [<c0131e3e>] [<c01096ac>] 
Code: 0f 0b 83 c4 0c 89 f6 b8 0f 00 00 00 89 c6 89 f7 c1 ff 1f 89 
>>EIP; c0163b39 <le_type+a9/330>   <=====
Trace; c01ecd99 <devfsd_buf_size+68a5/1244c>
Trace; c01ece60 <devfsd_buf_size+696c/1244c>
Trace; c0163dd4 <sprintf_le_key+14/50>
Trace; c0164160 <reiserfs_warning+a0/150>
Trace; c015c5dc <reiserfs_iget+3c/50>
Trace; c01ea4c0 <devfsd_buf_size+3fcc/1244c>
Trace; c01580c4 <reiserfs_lookup+84/c0>
Trace; c0134d7a <real_lookup+9a/160>
Trace; c0134ff4 <lookup_dentry+124/1f0>
Trace; c01350e8 <__namei+28/80>
Trace; c0131e3e <sys_newstat+e/70>
Trace; c01096ac <system_call+34/38>
Code;  c0163b39 <le_type+a9/330>
00000000 <_EIP>:
Code;  c0163b39 <le_type+a9/330>   <=====
   0:   0f 0b                     ud2a      <=====
Code;  c0163b3b <le_type+ab/330>
   2:   83 c4 0c                  addl   $0xc,%esp
Code;  c0163b3e <le_type+ae/330>
   5:   89 f6                     movl   %esi,%esi
Code;  c0163b40 <le_type+b0/330>
   7:   b8 0f 00 00 00            movl   $0xf,%eax
Code;  c0163b45 <le_type+b5/330>
   c:   89 c6                     movl   %eax,%esi
Code;  c0163b47 <le_type+b7/330>
   e:   89 f7                     movl   %esi,%edi
Code;  c0163b49 <le_type+b9/330>
  10:   c1 ff 1f                  sarl   $0x1f,%edi
Code;  c0163b4c <le_type+bc/330>
  13:   89 00                     movl   %eax,(%eax)
   The kernel I use is linux-2.3.51 patched with pre-patch-2.3.52-2 and
linux-2.3.51-reiserfs-3.6.2.
   I think I just managed to create another corrupted directory while
preparing a build directory for another machine:
[root@vissevasse linux-2.3.52-sinnvoll]# (cd linux-2.3.52; tar -cf - .) | (cd linux-2.3.52-sinnvoll; tar -xf -)
(menuconfig)
[root@vissevasse linux-2.3.52-sinnvoll]# make bzImage && make modules
scripts/split-include include/linux/autoconf.h include/config
gcc -D__KERNEL__ -I/mnt/raid/usr/build/linux-2.3.52-sinnvoll/include -Wall -Wstrict-prototypes -O2 -fomit-frame-pointer -pipe   -DCPU=586 -march=i586 -fno-strict-aliasing  -c -o init/main.o init/main.c
gcc -D__KERNEL__ -I/mnt/raid/usr/build/linux-2.3.52-sinnvoll/include -Wall -Wstrict-prototypes -O2 -fomit-frame-pointer -pipe   -DCPU=586 -march=i586 -fno-strict-aliasing -DUTS_MACHINE='"i386"' -c -o init/version.o init/version.c
make -C  kernel
make[1]: Entering directory `/mnt/raid/usr/build/linux-2.3.52-sinnvoll/kernel'
make all_targets
make[2]: Entering directory `/mnt/raid/usr/build/linux-2.3.52-sinnvoll/kernel'
gcc -D__KERNEL__ -I/mnt/raid/usr/build/linux-2.3.52-sinnvoll/include -Wall -Wstrict-prototypes -O2 -fomit-frame-pointer -pipe   -DCPU=586 -march=i586 -fno-strict-aliasing   -DEXPORT_SYMTAB -c signal.c
gcc: Internal compiler error: program cpp got fatal signal 11
make[2]: *** [signal.o] Error 1
make[2]: Leaving directory `/mnt/raid/usr/build/linux-2.3.52-sinnvoll/kernel'
make[1]: *** [first_rule] Error 2
make[1]: Leaving directory `/mnt/raid/usr/build/linux-2.3.52-sinnvoll/kernel'
make: *** [_dir_kernel] Error 2
   The build directories are soft link trees originally created by lndir
	mkdir /usr/build/linux-2.3.52
	cd /usr/build/linux-2.3.52
	lndir /usr/src/linux-2.3.52
   so they contain just .depend files, object files and directories and
(lots of) soft links to the source files.
From dmesg:
vs-13042: reiserfs_read_inode: [125840 126171 0x0 SD] not founduniqueness 125840
kernel BUG at /mnt/raid/usr/build/linux-2.3.52/include/linux/reiserfs_fs.h:420!
and ksymoops:
ksymoops 2.3.3 on i486 2.3.52.  Options used
     -V (default)
     -k /proc/ksyms (default)
     -l /proc/modules (default)
     -o /lib/modules/2.3.52/ (default)
     -m /boot/System.map (specified)
Warning (expand_objects): object /lib/modules/2.3.52/misc/af_packet.o for module af_packet has changed since load
Warning (expand_objects): object /lib/modules/2.3.52/fs/nls_iso8859-1.o for module nls_iso8859-1 has changed since load
Warning (expand_objects): object /lib/modules/2.3.52/fs/nls_cp437.o for module nls_cp437 has changed since load
Warning (expand_objects): object /lib/modules/2.3.52/fs/vfat.o for module vfat has changed since load
Warning (expand_objects): object /lib/modules/2.3.52/fs/fat.o for module fat has changed since load
Warning (expand_objects): object /lib/modules/2.3.52/block/linear.o for module linear has changed since load
Warning (expand_objects): object /lib/modules/2.3.52/misc/unix.o for module unix has changed since load
Warning (compare_maps): mismatch on symbol packet_poll  , af_packet says c18e9980, /lib/modules/2.3.52/misc/af_packet.o says c18e99a0.  Ignoring /lib/modules/2.3.52/misc/af_packet.o entry
invalid operand: 0000
CPU:    0
EIP:    0010:[<c0163b39>]
Using defaults from ksymoops -t elf32-i386 -a i386
EFLAGS: 00010296
eax: 00000050   ebx: c08f1ef0   ecx: c0210a58   edx: c085ff84
esi: c0273304   edi: c02736e8   ebp: c08f1ef0   esp: c08f1df4
ds: 0018   es: 0018   ss: 0018
Process cpp (pid: 8801, stackpage=c08f1000)
Stack: c01ecd99 c01ece60 000001a4 c08f1ef0 c0273304 c02736e8 c02736fa 00000000 
       c0163dd4 c08f1ef0 c0273304 c08f1e64 c0164160 c0273304 c08f1ef0 c092d260 
       c092d360 c08f1ef0 00000000 c02736e8 c08f1e4c c08f1e50 0000006b 00000000 
Call Trace: [<c01ecd99>] [<c01ece60>] [<c0163dd4>] [<c0164160>] [<c015c5dc>] [<c01ea4c0>] [<c01580c4>] 
       [<c0134d7a>] [<c0134ff4>] [<c01352a1>] [<c0129ec4>] [<c012a14a>] [<c01096ac>] 
Code: 0f 0b 83 c4 0c 89 f6 b8 0f 00 00 00 89 c6 89 f7 c1 ff 1f 89 
>>EIP; c0163b39 <le_type+a9/330>   <=====
Trace; c01ecd99 <devfsd_buf_size+68a5/1244c>
Trace; c01ece60 <devfsd_buf_size+696c/1244c>
Trace; c0163dd4 <sprintf_le_key+14/50>
Trace; c0164160 <reiserfs_warning+a0/150>
Trace; c015c5dc <reiserfs_iget+3c/50>
Trace; c01ea4c0 <devfsd_buf_size+3fcc/1244c>
Trace; c01580c4 <reiserfs_lookup+84/c0>
Trace; c0134d7a <real_lookup+9a/160>
Trace; c0134ff4 <lookup_dentry+124/1f0>
Trace; c01352a1 <open_namei+41/370>
Trace; c0129ec4 <filp_open+44/110>
Trace; c012a14a <sys_open+3a/e0>
Trace; c01096ac <system_call+34/38>
Code;  c0163b39 <le_type+a9/330>
00000000 <_EIP>:
Code;  c0163b39 <le_type+a9/330>   <=====
   0:   0f 0b                     ud2a      <=====
Code;  c0163b3b <le_type+ab/330>
   2:   83 c4 0c                  addl   $0xc,%esp
Code;  c0163b3e <le_type+ae/330>
   5:   89 f6                     movl   %esi,%esi
Code;  c0163b40 <le_type+b0/330>
   7:   b8 0f 00 00 00            movl   $0xf,%eax
Code;  c0163b45 <le_type+b5/330>
   c:   89 c6                     movl   %eax,%esi
Code;  c0163b47 <le_type+b7/330>
   e:   89 f7                     movl   %esi,%edi
Code;  c0163b49 <le_type+b9/330>
  10:   c1 ff 1f                  sarl   $0x1f,%edi
Code;  c0163b4c <le_type+bc/330>
  13:   89 00                     movl   %eax,(%eax)
8 warnings issued.  Results may not be reliable.
Regards,
/¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯T¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯\
| Rask Ingemann Lambertsen       | E-mail: mailto:rask@kampsax.dtu.dk    |
| Please do NOT Cc: to me or the | WWW: 
http://www.gbar.dtu.dk/~c948374/
 |
| mailing list. I am on the list.| "ThrustMe" on XPilot, ARCnet and IRC  |
|            Paperweights -- The only way to keep bills down.            |
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/