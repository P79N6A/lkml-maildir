Date: Tue, 18 Feb 2003 23:33:52 -0800
From: Richard Henderson <>
Subject: [PATCH] alpha modutils update
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/2/19/16

We're now using srel32 in the exception handling macros.
r~
--- obj/obj_alpha.c.orig	2003-02-18 23:09:39.000000000 -0800
+++ obj/obj_alpha.c	2003-02-18 23:30:28.000000000 -0800
@@ -225,6 +225,14 @@
       *iloc = (*iloc & ~0x3fff) | (v & 0x3fff);
       break;
 
+    case R_ALPHA_SREL32:
+      v -= dot;
+      if ((Elf64_Sxword)v >= 0x80000000
+      	  || (Elf64_Sxword)v < -(Elf64_Sxword)0x80000000)
+	ret = obj_reloc_overflow;
+      *iloc = v;
+      break;
+
     default:
       ret = obj_reloc_unhandled;
       break;
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/