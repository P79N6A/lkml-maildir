Date: Mon, 18 Apr 2005 00:36:41 +0200
From: Alexander Nyberg <>
Subject: Re: 2.6.12-rc2-mm3
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/4/17/83

mÃ¥n 2005-04-11 klockan 01:25 -0700 skrev Andrew Morton:
> 
ftp://ftp.kernel.org/pub/linux/kernel/people/akpm/patches/2.6/2.6.12-rc2/2.6.12-rc2-mm3/
> 
I tried to kexec on my x64 and it hangs up in calibrate_delay() because
the PIT never fires any interrupts so jiffies is never updated. Has
kexec been tested on x64 and should be working? I want to know if I
should start looking at weirdness with my hardware or if it is like this
on all x64 boxes.
Also, patch at bottom is needed to compile kexec on x64 without ia32
emulation support (the includes are not used at the moment).
  CC      arch/x86_64/kernel/crash.o
In file included from arch/x86_64/kernel/crash.c:18:
include/linux/elfcore.h: I funktion `elf_core_copy_regs':
include/linux/elfcore.h:92: error: dereferencing pointer to incomplete type
include/linux/elfcore.h:92: error: dereferencing pointer to incomplete type
Index: x64_mm/arch/x86_64/kernel/crash.c
===================================================================
--- x64_mm.orig/arch/x86_64/kernel/crash.c	2005-04-16 19:23:58.000000000 +0200
+++ x64_mm/arch/x86_64/kernel/crash.c	2005-04-16 19:47:56.000000000 +0200
@@ -14,8 +14,6 @@
 #include <linux/irq.h>
 #include <linux/reboot.h>
 #include <linux/kexec.h>
-#include <linux/elf.h>
-#include <linux/elfcore.h>
 
 #include <asm/processor.h>
 #include <asm/hardirq.h>
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/