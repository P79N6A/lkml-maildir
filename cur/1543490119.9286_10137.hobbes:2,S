Date: Tue, 16 Mar 1999 16:32:42 -0600
From: Greg Whalin <>
Subject: Possible NFS synch problem
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/3/16/138

Experiencing a somewhat pesky problem.  Namely it is this.  We tend to
run the following sequence of commands to generate a shared object from
a static library on several platforms (not all are Linux).
> ranlib libxxx.a
> ar -x libxxx.a
> KCC -o libxxx.so -G `ls *.o`
This is using the KCC compiler and is being performed on a NFS mounted
filesystem (NFS server is Linux 2.2.3-ac1 knfsd).  This operation works
100% of the time if run interactively by hand.  However, if these same
commands are put into a script (simple bourne shell), then the script
will sometime fail with an error from the compiler.  After much
searching, we have discovered that the ar -x libxxx.a is not finishing
before the compiler attempts to build the shared object.  Meaning, one
or more object files (and the number changes often) have not yet been
extracted before the compiler starts.
This problem does not appear when the script is run on a locally mounted
filesystem, but under a NFS mounted filesystem it does.  Seems like a
synchronization problem of sorts.
Any thoughts?
Thanks,
Greg Whalin
--
Gregory Whalin
gwhalin@numerix.com
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/