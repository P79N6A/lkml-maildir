Date: Sat, 24 Jan 2004 03:10:20 +1100
From: Benjamin Herrenschmidt <>
Subject: Re: swsusp vs  pgdir
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/1/23/111

On Sat, 2004-01-24 at 03:03, Patrick Mochel wrote:
> > > swapper_pgdir is left intact. This is the case ? (I also suppose you
> > > mean the entire linear mapping, not just the kernel, is mapped with
> > > 4M pages)
> >
> > Yes.
> 
> Not necessarily. Just kernel text and data. I don't have the code in front
> of me ATM, but there are simple checks you can do to determine the
> type/size of page.
> 
> We don't have to care about userspace, though, once all processes are
> frozen, so we don't have to deal with the 4k pages.
> 
> And the thing is, the only reason we require PSE and 4 MB pages is because
> it provides a 2-level page table instead of a 3-level, which by
> definition is easier to manage. :)
Wait... wait... If the whole linear mapping isn't mapped by this flat
pgdir, then we have a problem, since the MMU will have to go down the
kernel pagetables to actually access the pages data when copying them
around... but at this point, we are overriding the boot kernel page
tables with the loader ones, so ...
Ben.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/