Date: Fri, 15 Jul 2005 10:23:49 -0700
From: Venkatesh Pallipadi <>
Subject: Re: [PATCH] i386: Selectable Frequency of the Timer Interrupt
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/7/15/155

On Fri, Jul 15, 2005 at 07:02:24PM +0200, Andi Kleen wrote:
> 
> At least on multi processor systems LAPIC has to work anyways (otherwise
> you cannot schedule other CPUs), so it is fine to use there.
> 
> AFAIK there are no x86 CPUs right now that do both C3
> and SMP. If they ever do then they will need to keep the
> LAPIC ticking in C3.
> 
> This has nothing even to do with advanced power saving,
> but is pretty much a hard requirement for Linux (and I would
> be surprise if it wasn't one for other OS too). Without it
> scheduling and local timers on APs will not work at all.
> 
> In theory it could be replaced with HPET if HPET had enough banks (one
> for each CPU - most implementations today usually only have 2 or 4), but
> that would severly limit scalability for lazy tick schemes because
> they would depend on a common resource in the southbridge. Also the
> max number of banks needed on a big system would be huge
> (128? 256?) because you couldn't have more CPUs than that.
> 
> With PIC only it's absolutely impossible.
> 
I wouldn't say it is totally impossible. There are ways in which Linux can work
without a reliable Local APIC timer. One option being - make one CPU that gets 
the external timer interrupt multicast an IPI to all the other CPUs that
wants to get periodic timer interrupt.
Thanks,
Venki
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/