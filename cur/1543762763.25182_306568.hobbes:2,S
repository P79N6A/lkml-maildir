Date: Mon, 28 Mar 2005 06:20:01 +0200
From: Willy Tarreau <>
Subject: Re: upgrading modutils may have fixed: unresolved symbols still in 2.4.30-rc2 (usbserial needs symbol tty_ldisc_ref and tty_ldisc_deref which are EXPORT_SYMBOL_GPL)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/3/27/177

On Sat, Mar 26, 2005 at 04:31:59PM -0800, David Dyck wrote:
> >dd:linux# insmod usbserial
> >Using /lib/modules/2.4.30-rc2/kernel/drivers/usb/serial/usbserial.o
> >...: unresolved symbol tty_ldisc_ref
> >...: unresolved symbol tty_ldisc_deref
> 
> I tried again with 2.4.30-rc3, but this time I changed my .config
> file to disable 2 other modules that I didn't need, and wasn't loading.
> 
> < CONFIG_USB_UHCI_ALT=m
> < CONFIG_USB_STV680=m
> 
> and build rc3.  It seems to work, so either my earlier
> rc2 test with make clean wasn't clean-enough, or CONFIG_USB_UHCI_ALT
> interferes - testing with CONFIG_USB_UHCI_ALT as a module (not loaded)
> also works, so since interdiff didn't seem to highlite any difference 
> between rc2 and rc3, I'll suspect that my test make clean didn't
> clean things up good enough, and the entire problem was as
> Adrian Bunk suggest (upgrade modutils, thanks Adrian)
I believe it's because of genksyms during the build process, I had the
exact same problem a few weeks ago on a machine with old modutils. So
you should have cleaned everything and rebuilt from scratch after
installing your new modutils. BTW, the required modutils in
Documentation/Changes is still marked as 2.4.10, I hope it is still
enough.
Regards,
Willy
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/