Date: Tue, 21 Sep 1999 13:06:05 +0200
From: Petr Vandrovec <>
Subject: Re: current 2.3.18ac & debian-potato's gcc & something?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/9/21/38

On 21 Sep 99 at 11:13, Alan Cox wrote:
> >   And another strange thing, ac6 is not able to correctly checksum
> > incoming tcp/udp frames (TCPv4 bad checksum .., UDP:
> > bad checksum, 100% fails or I missed someone correctly checksummed)
> Some work is going on experimenting with using the various memory  rather
> than I/O operations for some net cards.
de4x5 suffers from same problem under my ac6 :-( And problem is limited
to IP only, because of I downloaded patch-2.3.18ac7.bz2 on my ac6 box through
IPX (ncpfs) and file came correct. Also icmp ping does not have any troubles.
> That the tulip wasnt detected in ac7 is odd.
Either all pci_id_info tables in network drivers are wrong or pci_drv_register
swaps vendor/device fields. I fixed only minimum in drivers/pci/scan.c. Maybe
that subsystem_vendor/device should be swapped too. But if I could vote,
I'm voting for swapping vendor/device in structures, 0x00191011 does not
mean anything to me, but 0x10110019 does, instead of changing pci_drv_register.
But there are too much structures, but only one pci_drv_register...
diff -urdN linux/drivers/pci/scan.c linux/drivers/pci/scan.c
--- linux/drivers/pci/scan.c	Tue Sep 21 08:35:55 1999
+++ linux/drivers/pci/scan.c	Tue Sep 21 10:41:09 1999
@@ -96,7 +96,7 @@
 		unsigned long ioaddr;
 		int free = 0;
 
-		pci_id = (pdev->vendor << 16) | pdev->device;
+		pci_id = (pdev->device << 16) | pdev->vendor;
 		pci_subsys_id = (pdev->subsystem_vendor << 16) |
 				pdev->subsystem_device;
 		pci_read_config_byte (pdev, PCI_REVISION_ID, &pci_rev);
> That it got frames wrong is not
tulip now works under ac7... I also changed MMIO region size from 1KB to 128 
bytes as my 10110019 has only 128 bytes MMIO (and IO too). 
					Best regards,
						Petr Vandrovec
						vandrove@vc.cvut.cz
P.S.: I do not know, what was wrong with ac6...
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/