Date: Sat, 07 Jul 2001 10:41:28 -0400
From: Jeff Garzik <>
Subject: Re: 2.4.6 PCMCIA NET modular build breakage
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/7/7/50

Oleg Drokin wrote:
> arm-linux-ld -p -X -T arch/arm/vmlinux.lds arch/arm/kernel/head-armv.o arch/arm/kernel/init_task.o init/main.o init/version.o \
>         --start-group \
>         arch/arm/kernel/kernel.o arch/arm/mm/mm.o arch/arm/mach-sa1100/sa1100.o
> kernel/kernel.o mm/mm.o fs/fs.o ipc/ipc.o \
>          drivers/char/char.o drivers/block/block.o drivers/misc/misc.o drivers/net/net.o drivers/media/media.o drivers/cdrom/driver.o drivers/mtd/mtdlink.o drivers/net/pcmcia/pcmcia_net.o drivers/net/wireless/wireless_net.o drivers/video/video.o \
>         net/network.o \
>         arch/arm/fastfpe/fast-math-emu.o arch/arm/nwfpe/math-emu.o arch/arm/lib/lib.a /home/green/arm/cvs/linux/kernel/lib/lib.a /skiff/local/lib/gcc-lib/arm-linux/2.95.2/soft-float/libgcc.a \
>         --end-group \
>         -o vmlinux
> arm-linux-ld: cannot open drivers/net/pcmcia/pcmcia_net.o: No such file or directory
> make: *** [vmlinux] Error 1
> 
> And Rules.make is almost identical to that in vanilla kernel (if someone is
> interested). (almost means that it have rule on how to make .o files from .S)
It is clear that,
(1) your config has CONFIG_NET_PCMCIA, and appears to be ok
(2) your linux/Makefile is correct, as the link statement includes
pcmcia_net.o
So that leaves us with drivers/net/Makefile and
drivers/net/pcmcia/Makefile.
drivers/net/Makefile is a potential problem source, perhaps the
following change is not in your arch tree:
	subdir-$(CONFIG_NET_PCMCIA) += pcmcia
If that statement exists in drivers/net/Makefile, you need to run a
kernel build, and start staring at make output to see exactly why it is
not building.
-- 
Jeff Garzik      | A recent study has shown that too much soup
Building 1024    | can cause malaise in laboratory mice.
MandrakeSoft     |
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/