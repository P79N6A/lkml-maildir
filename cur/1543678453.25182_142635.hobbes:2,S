Date: Mon, 23 Jun 2003 09:07:08 -0400
From: Jes Sorensen <>
Subject: [patch] 2.5.72 gdth.c 64 bit fix
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/6/23/106

Hi,
While looking through gdth.c in 2.5.72 I noticed a case where it
truncates the dma adress it passes to pci_unmap_single() on 64 bit
+ HIGHMEM archs.
Jes
--- drivers/scsi/gdth.c~	Mon Jun 16 21:20:06 2003
+++ drivers/scsi/gdth.c	Mon Jun 23 05:58:11 2003
@@ -3662,7 +3662,7 @@
             pci_unmap_single(ha->pdev,scp->SCp.dma_handle,
                          scp->request_bufflen,scp->SCp.Message);
         if (scp->SCp.buffer) 
-            pci_unmap_single(ha->pdev,(dma_addr_t)(u32)scp->SCp.buffer,
+            pci_unmap_single(ha->pdev,(dma_addr_t)scp->SCp.buffer,
 						16,PCI_DMA_FROMDEVICE);
 #endif
         if (ha->status == S_OK) {
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/