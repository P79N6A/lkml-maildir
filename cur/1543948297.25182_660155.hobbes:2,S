Date: Tue, 26 Feb 2008 21:01:53 +0100
From: Bartlomiej Zolnierkiewicz <>
Subject: Re: 2.6.25-rc1/2 CD/DVD burning broken
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/2/26/436

On Tuesday 26 February 2008, Borislav Petkov wrote:
> On Tue, Feb 26, 2008 at 03:52:13PM +0100, Andreas Schwab wrote:
> > Borislav Petkov <petkovbb@googlemail.com> writes:
> > 
> > > On Mon, Feb 25, 2008 at 11:08:55PM +0100, Andreas Schwab wrote:
> > >> Borislav Petkov <petkovbb@googlemail.com> writes:
> > >> 
> > >> > On Mon, Feb 25, 2008 at 08:38:22PM +0100, Andreas Schwab wrote:
> > >> >> "Kiyoshi Ueda" <k-ueda@ct.jp.nec.com> writes:
> > >> >> 
> > >> >> > I'm looking at this problem, but currently no idea why the conversion
> > >> >> > to blk_end_request causes it.
> > >> >> 
> > >> >> cdrom_newpc_intr apparently never sets rq->sense_len.
> > >> >> 
> > >> >
> > >> > actually it does, see the code chunk around line 1188 in 2.6.25-rc2, for
> > >> > example.
> > >> 
> > >> Yes, it does, but it always adds zero.
> > >
> > > yep, true. Does that fix your dvd burning problem?
> > 
> > Yes, sure.
> > 
> > Andreas.
> 
> Bart,
> 
> please apply the enclosed patch since it fixes dvd burning with growisofs on
> Pioneer drives as reported by Andreas.
> 
> Thanks.
> 
> ---
> From: Andreas Schwab <schwab@suse.de>
> 
> Move counting of sense bytes into the transfer loop.
> 
> Signed-off-by: Andreas Schwab <schwab@suse.de>
> Acked-by: Borislav Petkov <petkovbb@gmail.com>
applied, thanks!