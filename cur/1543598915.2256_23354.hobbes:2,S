Date: Thu, 23 Aug 2001 09:41:35 -0500
From: Carl <>
Subject: [PATCH] sonypi and byteswapped apm minutes.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/8/23/235

Hello,
I have a Sony Viao SR-33, and the sonypi driver would not work until I 
applied this patch.
--- linux-2.4.9.orig/drivers/char/sonypi.c      Wed Jul  4 16:41:33 2001
+++ linux-2.4.9/drivers/char/sonypi.c   Thu Aug 23 09:17:06 2001
@@ -630,7 +630,7 @@
         sonypi_call1(0x82);
         sonypi_call2(0x81, 0xff);
-       sonypi_call1(0x92);
+       sonypi_call1(0x82);
         printk(KERN_INFO "sonypi: Sony Programmable I/O Controller 
driver v%d.%d
.\n",
                SONYPI_DRIVER_MAJORVERSION,
I don't know if this works for the general case or if this machine is a 
special case.  I hope people with other vaio models will check.
Also this machine suffers from the swap_apm issue, here is a patch.
--- linux-2.4.9.orig/arch/i386/kernel/dmi_scan.c        Mon Aug 13 
18:39:28 2001
+++ linux-2.4.9/arch/i386/kernel/dmi_scan.c     Thu Aug 23 09:03:41 2001
@@ -354,6 +354,11 @@
                         MATCH(DMI_BIOS_VERSION, "R0121Z1"),
                         MATCH(DMI_BIOS_DATE, "05/11/00"), NO_MATCH
                         } },
+       { swab_apm_power_in_minutes, "Sony VAIO", {     /* Handle 
problems with APM on Sony Vaio PCG-SR33 */
+                       MATCH(DMI_BIOS_VENDOR, "Phoenix Technologies LTD"),
+                       MATCH(DMI_BIOS_VERSION, "R0211D1"),
+                       MATCH(DMI_BIOS_DATE, "05/30/01"), NO_MATCH
+                       } },
         { NULL, }
  };
Thanks.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/