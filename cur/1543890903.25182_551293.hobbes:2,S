Date: Thu, 31 May 2007 10:21:57 +0930 (CST)
From: Jonathan Woithe <>
Subject: Re: IDE/ATA: Intel i865-based mainboard, CDROM not detected
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/5/30/548

Len Sorensen wrote:
> On Mon, May 28, 2007 at 08:37:21AM +0930, Jonathan Woithe wrote:
> > The CDROM was showing up in the POST in all cases.
> > 
> > It turns out the problem (as I outlined in a followup post) resulted from a
> > combination of issues.
> > 
> >  1) This board uses a Marvell PATA controller, so the relevant driver must
> >     be configured.
> > 
> >  2) Unless the "Configure SATA as" setting in the BIOS is set to "AHCI" the
> >     PATA controller won't be found.  Sounds a bit odd and counter-intuitive,
> >     but that's what's happening.  Originally this item was set to IDE; the
> >     other option is RAID but I haven't tested that.
> 
> Maybe the SATA pretending to be PATA took up the ports that the marvell
> PATA needed to provide PATA, so in effect hidding the marvell.
I don't think so but I could be wrong.  When "Configure SATA as" was set to
"IDE" the HDD was being detected as a SATA drive and showed up as /dev/sda. 
The only visible difference the change to "AHCI" made was that instead of
the drive being handled by the ata_piix it now utilises the ahci driver
(which is a much better driver).  The other interesting thing is that the
probe for the Marvell PATA device occured before the initialisation of the
ata_piix driver (or ahci for that matter), so as far as I can tell ata_piix
had no chance to grab any ports before the marvell driver initialised.
Regards
  jonathan
-- 
"Time is an illusion; lunchtime doubly so"
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/