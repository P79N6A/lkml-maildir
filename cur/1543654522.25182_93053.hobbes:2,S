Date: Fri, 29 Nov 2002 16:47:50 -0800
From: Andrew Morton <>
Subject: Re: [PATCHSET] Linux 2.4.20-jam0
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/11/29/122

"J.A. Magallon" wrote:
> 
> - Orlov inode allocator for 2.4
The Orlov allocator in 2.5 has caused a tremendous performance regression
in dbench-on-ext3/ordered-on-scsi.
I don't know why yet - I doubt if it's due to the allocator itself - more
likely an IO scheduling bug in ext3, or a bug in the 2.5 elevator.
There is no such regression on IDE - presumably write caching is covering
up the problem.
So that's something to watch out for.
(where did your Orlov patch from?  All the tabs are mangled)
You'll need to port this missing bit, which provides the `oldalloc'
and `orlov' mount options.
 fs/ext3/super.c |    4 ++++
 1 files changed, 4 insertions(+)
--- 25/fs/ext3/super.c~ext3-oldalloc	Fri Nov 29 02:21:20 2002
+++ 25-akpm/fs/ext3/super.c	Fri Nov 29 02:22:03 2002
@@ -662,6 +662,10 @@ static int parse_options (char * options
 				return 0;
 			sbi->s_resuid = v;
 		}
+		else if (!strcmp (this_char, "oldalloc"))
+			set_opt (sbi->s_mount_opt, OLDALLOC);
+		else if (!strcmp (this_char, "orlov"))
+			clear_opt (sbi->s_mount_opt, OLDALLOC);
 #ifdef CONFIG_JBD_DEBUG
 		else if (!strcmp (this_char, "ro-after")) {
 			unsigned long v;
_
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/