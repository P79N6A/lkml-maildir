Date: Tue, 20 May 2003 10:15:23 +1000
From: Rusty Russell <>
Subject: Re: [patch] futex API cleanups, futex-api-cleanup-2.5.69-A2
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/5/19/268

In message <Pine.LNX.4.44.0305191752130.13233-100000@localhost.localdomain> you
 write:
> 
> > >  - start the phasing out of FUTEX_FD. This i believe is quite unclean and
> > >    unrobust, [...]
> 
> FUTEX_FD is an instant DoS, it allows the pinning of one page per file
> descriptor, per thread. With a default limit of 1024 open files per
> thread, and 256 threads (on a sane/conservative setup), this means 1 GB of
> RAM can be pinned down by a normal unprivileged user.
Yes.  There was a patch which limited it, never got applied.
The real solution is not to pin the page: I pinned the page originally
to prevent dealing with addresses changing due to swap out, but you
found the COW bug and that blew away that theory anyway 8)
I think the vcache callbacks or similar could be extended to cover the
swap out/swap in case.
Cheers,
Rusty.
--
  Anyone who quotes me in their sig is an idiot. -- Rusty Russell.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/