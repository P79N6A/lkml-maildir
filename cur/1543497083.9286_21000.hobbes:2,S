Date: Sat, 29 May 1999 18:01:19 -0400
From: "Fred Reimer" <>
Subject: Re: ia64: Patch 2.3.4pre1 looks fishy
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/5/30/119

----- Original Message -----
From: Horst von Brand <vonbrand@sleipnir.valparaiso.cl>
To: David Mosberger-Tang <davidm@hpl.hp.com>
Cc: <linux-kernel@vger.rutgers.edu>
Sent: Thursday, May 27, 1999 3:27 PM
Subject: ia64: Patch 2.3.4pre1 looks fishy
> I have no idea what is going on here, but this doesn't look right:
>
> diff -u --recursive --new-file v2.3.3/linux/fs/open.c linux/fs/open.c
> --- v2.3.3/linux/fs/open.c      Fri Apr 16 14:21:39 1999
> +++ linux/fs/open.c     Mon May 24 22:47:43 1999
> @@ -171,7 +171,7 @@
>         return error;
>  }
>
> -#ifndef __alpha__
> +#if !(defined(__alpha__) || defined(__ia64__))
>
>  /*
>   * sys_utime() can be implemented in user-level using sys_utimes().
>
> The last #if is supposed to match if __alpha__ is not defined, but
__ia64__
> is. This is absurd, AFAIU they can't ever be both defined.
I read:
#if !(defined(__alpha__) || defined(__ia64__))
to mean "If neither __alpha__ nor __ia64__ is defined then..."  Note the
parenthesis location.  This kind of makes sense to me, it would indicate
that 32 bit specific (or non 64-bit safe) code can follow.  Perhaps there
should be another || for 64-bit sparc code?  I don't see what is absurd.
True they can't ever both be defined, but they can both be NOT defined...
fwr
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/