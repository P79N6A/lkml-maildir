Date: Tue, 22 Jan 2002 09:05:18 +0200
From: Ville Herva <>
Subject: Re: Athlon PSE/AGP Bug
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/1/22/9

David S. Miller said:
>
> The funny part is, if this published errata is the problem, it cannot be a
> problem under Linux since we never invalidate 4MB pages.  We create them
> at boot time and they never change after that.
and:
>  From: Arjan van de Ven <arjanv@redhat.com>
>  > Well we don't know what nvidia's kernel module is doing.....                 
> 
> I know it isn't using large pages, that is for sure.
and:
> I think this is all "just so happens" personally, and all the that
> turning off the large pages really does is change the timings so that
> whatever bug is really present simply becomes a heisenbug.
Andrea Arcangeli <andrea@suse.de> said:
> My same wondering, however I wasn't sure how much the timing could
> really change to make the kernel bugs trigger.
Alan Cox said:
> That problem shouldnt be hitting Linux x86. I don't know about the Nvidia
> module but the base kernel shouldnt hit an invlpg on 4Mb pages
Here's what Ripperda of nVidia (I imagine this is the same "Terrence
Ripperda of NVIDIA" mentioned at 
http://www.gentoo.org/
) said on nvidia @
#irc.openprojects.net:
*** ripperda (~ripperda@z06.nvidia.com) has joined channel #nvidia
<Primer> ripperda: my man!
<Primer> major props for reporting the athlon bug
<ripperda> hey primer
<ripperda> thanks, hopefully we can get athlons a lot more stable under the
drivers now
<ripperda> I feel bad I screwed the pooch and didn't get it figured out
quicker
<Thunderbird> who discovered the bug after all?
<Primer> Thunderbird: AMD, back in Sept. 2000
<Primer> :P
<ripperda> one of our main windows kernel developers here, over a year ago
<Primer> except they forgot to tell us
<Thunderbird> why did nobody publish it before then?
<ripperda> he mentioned it to me, but I was swamped with other things, tried
to see if it would affect us, but was still a little new to the kernel code
<Russ|werk> hey ripperda
<Russ|werk> ripperda: is the fix going to cause a release?
<ripperda> this athlon bug can't be fixed in our code, that's a kernel issue
So clearly either nvidia driver uses large paging or there appears to be
some great misunderstanding.
Also, drobbins at 
http://www.gentoo.org
 goes on to say:
"I informed kernel hacker Andrew Morton of the issue; he put me in touch
with Alan Cox.  Alan is going to try to add some kind of Athlon/AGP CPU bug
detection code to the kernel so that it will be able to auto-downgrade to 4K
pages when necessary."
Another case of miscommunication?
I sincerely hope you guys can sort this out...
-- v --
v@iki.fi
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/