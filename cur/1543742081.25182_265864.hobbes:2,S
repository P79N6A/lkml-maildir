Date: Thu, 28 Oct 2004 11:15:54 -0700
From: "David S. Miller" <>
Subject: Re: [0/3] PATCH Kprobes for x86_64- 2.6.9-final
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/10/28/251

On 28 Oct 2004 13:37:44 +0200
Andi Kleen <ak@muc.de> wrote:
> Like I still would like to have the page fault notifier
> completely moved out of the fast path into no_context 
> (that i386 has it there is also wrong). Adding kprobe_runn 
> doesn't make a difference.
You can't do that actually Andi.
The kprobe notifier has to run for the case where the kernel
does a userspace access and faults.  This is to handle the
case of setting a kprobe on a userspace access instruction.
In such a event, we must unwind the reset the program counter
so that exception table processing is done with the correct
PC not the temporary one kprobes is using to execute the
instruction where the breakpoint currently lives.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/