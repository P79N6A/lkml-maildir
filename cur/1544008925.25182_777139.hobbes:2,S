Date: Thu, 04 Dec 2008 17:07:55 -0500
From: 	Valdis.Kletnieks@vt ...
Subject: Re: [patch 101/104] ext3: dont try to resize if there are no reserved gdt blocks left
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/12/4/371

On Wed, 03 Dec 2008 11:56:53 PST, Greg KH said:
>  	if (reserved_gdb || gdb_off == 0) {
>  		if (!EXT3_HAS_COMPAT_FEATURE(sb,
> -					     EXT3_FEATURE_COMPAT_RESIZE_INODE))
{
> +					     EXT3_FEATURE_COMPAT_RESIZE_INODE)
> +		    || !le16_to_cpu(es->s_reserved_gdt_blocks)) {
>  			ext3_warning(sb, __func__,
>  				     "No reserved GDT blocks, can't resize");
>  			return -EPERM;
What's the codepath if the compat_feature part trips, but the le16_to_cpu
doesn't?  Looks to me like it will then skip over the 'return -EPERM'?
[unhandled content-type:application/pgp-signature]