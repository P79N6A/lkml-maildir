Date: Wed, 22 Sep 2004 23:45:29 +0200
From: Pavel Machek <>
Subject: Re: year 2038 problem on x86-64
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/9/22/179

Hi!
> For testing (read() and write() is returning wrong value on 2.4
> kernels) I played a bit with really big numbers... And I found out we
> have year 9223372034708485227 problem ;-).
And we have some nearer problems, too.
#ifdef __ARCH_WANT_SYS_TIME
/*
 * sys_time() can be implemented in user-level using
 * sys_gettimeofday().  Is this for backwards compatibility?  If so,
 * why not move it into the appropriate arch directory (for those
 * architectures that need it).
 *
 * XXX This function is NOT 64-bit clean!
 */
asmlinkage long sys_time(int __user * tloc)
{
        int i;
        struct timeval tv;
        do_gettimeofday(&tv);
        i = tv.tv_sec;
        if (tloc) {
                if (put_user(i,tloc))
                        i = -EFAULT;
        }
        return i;
}
... __ARCH_WANT_SYS_TIME actually is set on x86-64.
								Pavel
-- 
People were complaining that M$ turns users into beta-testers...
...jr ghea gurz vagb qrirybcref, naq gurl frrz gb yvxr vg gung jnl!
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/