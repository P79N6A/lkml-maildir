Date: Fri, 25 Jun 2004 20:46:11 +0100
From: 	viro@parcelfa ...
Subject: Re: [PATCH] A generic_file_sendpage()
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/6/25/177

On Fri, Jun 25, 2004 at 09:19:24PM +0200, JÃ¶rn Engel wrote:
> > +       old_fs = get_fs();
> > +       set_fs(KERNEL_DS);
Eeek...  Don't do that, please - set_fs() is not a good thing to add for
no good reason.
> Your patch is *much* smaller than mine.  Looks lean and mean.  But you
> depend on the struct file* passed to generic_file_sendpage().
> 
> One of my goals for 2.7 is to get rid of all users of struct file* in
> the various read-, write- and send-functions.  Currently, there are
> four of them, you would introduce number five.
And how, pray tell, are you going to do that on filesystems that keep
part of context in file->private_data?
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/