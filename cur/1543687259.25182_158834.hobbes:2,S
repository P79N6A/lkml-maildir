Date: Tue, 19 Aug 2003 22:32:03 +0100
From: Russell King <>
Subject: Re: Standard driver call to enable/disable PCI ROM
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/8/19/321

On Tue, Aug 19, 2003 at 02:17:35PM -0700, David S. Miller wrote:
> On Tue, 19 Aug 2003 21:52:46 +0100
> Russell King <rmk@arm.linux.org.uk> wrote:
> >                 new |= res->flags & PCI_ROM_ADDRESS_ENABLE;
> >                 reg = dev->rom_base_reg;
> 
> A word of caution, please do not enable PCI ROMs lightly.
> 
> There are many devices which stop responding to MEM and IO
> space once their ROM is enabled, Qlogic-ISP chips are one
> such device and there are several others.
Indeed - we leave the ROM enable bit in whatever state it was when
we scanned the device.
However, there are device drivers which want to access the ROM for
whatever reason, and we should provide a standard way to allow
drivers to enable / disable ROM access for architecture portability
reasons (so that VGA drivers can find tables in their ROMs for
instance.)
Since this is critical to some devices, maybe their drivers should
consider ensuring that the ROM resources are disabled upon driver
initialisation of the device?
-- 
Russell King (rmk@arm.linux.org.uk)                The developer of ARM Linux
             
http://www.arm.linux.org.uk/personal/aboutme.html
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/