Date: Sun, 01 Aug 2004 00:48:22 +1000
From: (Bruce Janson)
Subject: 2.6.7 kernel boot-time configuration of a non-modular tulip driver
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/7/31/53

I have a linux 2.6.7 kernel which contains a compiled-in tulip driver.
I would like to be able to boot the kernel with parameters that
will allow control of the tulip device.  On some ethernet devices
this used to be possible via (something like):
  ether=0,0,1,0,eth0
which would pass the four numeric parameters (as, I think, dev->irq,
dev->ioaddr, dev->mem_start and dev->mem_end) to the net driver that
controlled eth0.  A convention adopted by some net drivers then allowed
dev->mem_start to be interpretted as a set of flags that would control
device characteristics (e.g. full-duplex vs half-duplex mode).
In .../linux-2.6.7/drivers/net/tulip/tulip_core.c:1587:
  if (dev->mem_start & MEDIA_MASK)
    tp->default_port = dev->mem_start & MEDIA_MASK;
suggests that this might still work.  However, I have been unable
to force dev->mem_start in that driver to become non-zero via any
kernel boot-time parameters.  My limited understanding of the code
that precedes the above lines in that file suggests that the "dev"
structure is not what it used to be...
../linux-2.6.7/Documentation/kernel-parameters.txt:402 still
mentions "ether=..." but marks it as obsolete, replaced by
the equivalent "netdev=...".  Elsewhere in that file, the entry
for "netdev=..." describes what appears to be the functionality
that I seek.
So, is it still possible to perform the same sort of control
operations on a tulip driver via kernel boot-time parameters
as one can do via module load-time parameters?  If so, how?
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/