Date: Fri, 15 Jan 1999 00:17:45 -0800
From:  bwoodard@cisco ...
Subject: Compilation problems with 2.2.0pre7ac4 (intel/sparc)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/1/15/24

For all you kernel hackers trying to get everything all squared away
for the 2.2 here are a couple of buglets:
I have many simiar warning messages messages when I try to compile on my
intel box:
make[2]: Entering directory `/usr/src/linux/kernel'
gcc -D__KERNEL__ -I/usr/src/linux/include -Wall -Wstrict-prototypes -O2 -fomit-frame-pointer -pipe -fno-strength-reduce   -DEXPORT_SYMTAB -c signal.c
In file included from /usr/src/linux/include/linux/modversions.h:52,
                 from /usr/src/linux/include/linux/module.h:19,
                 from signal.c:10:
/usr/src/linux/include/linux/modules/sound_firmware.ver:1: warning: `__ver_mod_firmware_load' redefined
/usr/src/linux/include/linux/modules/sound_core.ver:21: warning: this is the location of the previous definition
Another couple of warning message I get:
make[3]: Entering directory `/usr/src/linux/drivers/char'
gcc -D__KERNEL__ -I/usr/src/linux/include -Wall -Wstrict-prototypes -O2 -fomit-frame-pointer -pipe -fno-strength-reduce   -DEXPORT_SYMTAB -c pty.c
In file included from /usr/src/linux/include/linux/modversions.h:52,
                 from /usr/src/linux/include/linux/module.h:19,
                 from pty.c:11:
/usr/src/linux/include/linux/modules/sound_firmware.ver:1: warning: `__ver_mod_firmware_load' redefined
/usr/src/linux/include/linux/modules/sound_core.ver:21: warning: this is the location of the previous definition
In file included from pty.c:29:
/usr/src/linux/include/linux/devpts_fs.h:30: warning: `unix98_max_ptys' redefine
/usr/src/linux/include/linux/modules/pty.ver:6: warning: this is the location of the previous definition
gcc -D__KERNEL__ -I/usr/src/linux/include -Wall -Wstrict-prototypes -O2 -fomit-frame-pointer -pipe -fno-strength-reduce   -DEXPORT_SYMTAB -c apm.c
In file included from /usr/src/linux/include/linux/modversions.h:52,
                 from /usr/src/linux/include/linux/module.h:19,
                 from apm.c:117:
/usr/src/linux/include/linux/modules/sound_firmware.ver:1: warning: `__ver_mod_firmware_load' redefined
/usr/src/linux/include/linux/modules/sound_core.ver:21: warning: this is the location of the previous definition
apm.c:295: warning: `regparm' attribute directive ignored
apm.c: In function `apm_get_info':
apm.c:1187: warning: unused variable `nbat'
apm.c: At top level:
apm.c:607: warning: `apm_get_battery_status' defined but not used
The .config file is at the end of the email.
Now for a couple of errors for the sparc:
make[3]: Entering directory `/usr/src/linux/drivers/video'
gcc -D__KERNEL__ -I/usr/src/linux/include -Wall -Wstrict-prototypes -O2 -fomit-frame-pointer -m32 -pipe -mno-fpu -fcall-used-g5 -fcall-used-g7   -DEXPORT_SYMTAB -c fbcon.c
fbcon.c: In function `fbcon_scroll':
fbcon.c:972: warning: unused variable `p'
fbcon.c: In function `fbcon_set_font':
fbcon.c:1434: warning: unused variable `j'
gcc -D__KERNEL__ -I/usr/src/linux/include -Wall -Wstrict-prototypes -O2 -fomit-frame-pointer -m32 -pipe -mno-fpu -fcall-used-g5 -fcall-used-g7   -c -o sd_ioctl.o sd_ioctl.c
/usr/src/linux/include/linux/blk.h:375: warning: `do_sd' defined but not used
/usr/src/linux/include/linux/blk.h:399: warning: `do_sd_request' declared `static' but never defined
scsi.h:636: warning: `end_scsi_request' defined but not used
gcc -D__KERNEL__ -I/usr/src/linux/include -Wall -Wstrict-prototypes -O2 -fomit-frame-pointer -m32 -pipe -mno-fpu -fcall-used-g5 -fcall-used-g7   -c -o fsync.o fsync.c
fsync.c: In function `ext2_sync_file':
fsync.c:284: warning: unused variable `wait'
gcc -D__KERNEL__ -I/usr/src/linux/include -Wall -Wstrict-prototypes -O2 -fomit-frame-pointer -m32 -pipe -mno-fpu -fcall-used-g5 -fcall-used-g7   -c -o faddd.o faddd.c
faddd.c: In function `FADDD':
faddd.c:8: warning: left shift count is negative
faddd.c:9: warning: left shift count is negative
faddd.c:11: warning: right shift count is negative
faddd.c:11: warning: left shift count >= width of type
faddd.c:14: warning: right shift count is negative
faddd.c:14: warning: right shift count is negative
faddd.c:17: warning: left shift count is negative
faddd.c:17: warning: right shift count is negative
faddd.c:6: warning: `R_e' might be used uninitialized in this function
faddd.c:6: warning: `R_f0' might be used uninitialized in this function
faddd.c:6: warning: `R_f1' might be used uninitialized in this function
gcc -D__KERNEL__ -I/usr/src/linux/include -Wall -Wstrict-prototypes -O2 -fomit-frame-pointer -m32 -pipe -mno-fpu -fcall-used-g5 -fcall-used-g7   -c -o faddq.o faddq.c
faddq.c: In function `FADDQ':
faddq.c:6: warning: `R_e' might be used uninitialized in this function
gcc -D__KERNEL__ -I/usr/src/linux/include -Wall -Wstrict-prototypes -O2 -fomit-frame-pointer -m32 -pipe -mno-fpu -fcall-used-g5 -fcall-used-g7   -c -o fadds.o fadds.c
fadds.c: In function `FADDS':
fadds.c:6: warning: `R_e' might be used uninitialized in this function
fadds.c:6: warning: `R_f' might be used uninitialized in this function
gcc -D__KERNEL__ -I/usr/src/linux/include -Wall -Wstrict-prototypes -O2 -fomit-frame-pointer -m32 -pipe -mno-fpu -fcall-used-g5 -fcall-used-g7   -c -o fcmpd.o fcmpd.c
fcmpd.c: In function `FCMPD':
fcmpd.c:10: warning: left shift count is negative
fcmpd.c:11: warning: left shift count is negative
fcmpd.c:12: warning: suggest parentheses around && within ||
fcmpd.c:12: warning: suggest parentheses around && within ||
gcc -D__KERNEL__ -I/usr/src/linux/include -Wall -Wstrict-prototypes -O2 -fomit-frame-pointer -m32 -pipe -mno-fpu -fcall-used-g5 -fcall-used-g7   -c -o fcmped.o fcmped.c
fcmped.c: In function `FCMPED':
fcmped.c:10: warning: left shift count is negative
fcmped.c:11: warning: left shift count is negative
fcmped.c:12: warning: suggest parentheses around && within ||
fcmped.c:12: warning: suggest parentheses around && within ||
gcc -D__KERNEL__ -I/usr/src/linux/include -Wall -Wstrict-prototypes -O2 -fomit-frame-pointer -m32 -pipe -mno-fpu -fcall-used-g5 -fcall-used-g7   -c -o fdivd.o fdivd.c
fdivd.c: In function `FDIVD':
fdivd.c:8: warning: left shift count is negative
fdivd.c:9: warning: left shift count is negative
fdivd.c:10: warning: suggest parentheses around && within ||
fdivd.c:10: warning: left shift count is negative
fdivd.c:49: warning: suggest parentheses around && within ||
fdivd.c:50: warning: suggest parentheses around && within ||
fdivd.c:50: warning: suggest parentheses around && within ||
fdivd.c:91: warning: suggest parentheses around && within ||
fdivd.c:92: warning: suggest parentheses around && within ||
fdivd.c:92: warning: suggest parentheses around && within ||
fdivd.c:14: warning: right shift count is negative
fdivd.c:14: warning: right shift count is negative
fdivd.c:17: warning: left shift count is negative
fdivd.c:17: warning: right shift count is negative
fdivd.c:6: warning: `R_e' might be used uninitialized in this function
fdivd.c:6: warning: `R_f0' might be used uninitialized in this function
fdivd.c:6: warning: `R_f1' might be used uninitialized in this function
gcc -D__KERNEL__ -I/usr/src/linux/include -Wall -Wstrict-prototypes -O2 -fomit-frame-pointer -m32 -pipe -mno-fpu -fcall-used-g5 -fcall-used-g7   -c -o fdivq.o fdivq.c
fdivq.c: In function `FDIVQ':
fdivq.c:6: warning: `R_e' might be used uninitialized in this function
gcc -D__KERNEL__ -I/usr/src/linux/include -Wall -Wstrict-prototypes -O2 -fomit-frame-pointer -m32 -pipe -mno-fpu -fcall-used-g5 -fcall-used-g7   -c -o fdivs.o fdivs.c
fdivs.c: In function `FDIVS':
fdivs.c:6: warning: `R_e' might be used uninitialized in this function
fdivs.c:6: warning: `R_f' might be used uninitialized in this function
gcc -D__KERNEL__ -I/usr/src/linux/include -Wall -Wstrict-prototypes -O2 -fomit-frame-pointer -m32 -pipe -mno-fpu -fcall-used-g5 -fcall-used-g7   -c -o fdmulq.o fdmulq.c
fdmulq.c: In function `FDMULQ':
fdmulq.c:9: warning: left shift count is negative
fdmulq.c:11: warning: left shift count is negative
fdmulq.c:7: warning: `R_e' might be used uninitialized in this function
gcc -D__KERNEL__ -I/usr/src/linux/include -Wall -Wstrict-prototypes -O2 -fomit-frame-pointer -m32 -pipe -mno-fpu -fcall-used-g5 -fcall-used-g7   -c -o fdtoi.o fdtoi.c
fdtoi.c: In function `FDTOI':
fdtoi.c:9: warning: left shift count is negative
fdtoi.c:10: warning: left shift count >= width of type
fdtoi.c:10: warning: left shift count >= width of type
fdtoi.c:7: warning: `r' might be used uninitialized in this function
...
ld -T arch/sparc/vmlinux.lds arch/sparc/kernel/head.o arch/sparc/kernel/init_task.o init/main.o init/version.o \
	--start-group \
	arch/sparc/kernel/kernel.o arch/sparc/mm/mm.o kernel/kernel.o mm/mm.o fs/fs.o ipc/ipc.o arch/sparc/math-emu/math-emu.o arch/sparc/boot/btfix.o \
	fs/filesystems.a \
	net/network.a \
	drivers/block/block.a drivers/char/char.a drivers/misc/misc.a drivers/net/net.a drivers/scsi/scsi.a drivers/cdrom/cdrom.a drivers/sbus/sbus.a drivers/video/video.a \
	/usr/src/linux/lib/lib.a /usr/src/linux/lib/lib.a /usr/src/linux/arch/sparc/prom/promlib.a /usr/src/linux/arch/sparc/lib/lib.a \
	--end-group \
	-o vmlinux
fs/filesystems.a(proc.o): In function `mem_read':
proc.o(.text+0x1e58): undefined reference to `pte_read'
Config for intel:
#
# Automatically generated by make menuconfig: don't edit
#
#
# Code maturity level options
#
CONFIG_EXPERIMENTAL=y
#
# Processor type and features
#
# CONFIG_M386 is not set
# CONFIG_M486 is not set
# CONFIG_M586 is not set
# CONFIG_M586TSC is not set
# CONFIG_M686 is not set
CONFIG_X86_WP_WORKS_OK=y
CONFIG_X86_INVLPG=y
CONFIG_X86_BSWAP=y
CONFIG_X86_POPAD_OK=y
# CONFIG_MATH_EMULATION is not set
CONFIG_MTRR=y
# CONFIG_SMP is not set
#
# Loadable module support
#
CONFIG_MODULES=y
CONFIG_MODVERSIONS=y
CONFIG_KMOD=y
#
# General setup
#
CONFIG_NET=y
CONFIG_PCI=y
# CONFIG_PCI_GOBIOS is not set
# CONFIG_PCI_GODIRECT is not set
CONFIG_PCI_GOANY=y
CONFIG_PCI_BIOS=y
CONFIG_PCI_DIRECT=y
# CONFIG_PCI_QUIRKS is not set
CONFIG_PCI_OLD_PROC=y
# CONFIG_MCA is not set
CONFIG_SYSVIPC=y
# CONFIG_BSD_PROCESS_ACCT is not set
CONFIG_SYSCTL=y
# CONFIG_BINFMT_AOUT is not set
CONFIG_BINFMT_ELF=y
CONFIG_BINFMT_MISC=m
# CONFIG_BINFMT_JAVA is not set
# CONFIG_PARPORT is not set
CONFIG_APM=y
CONFIG_APM_IGNORE_USER_SUSPEND=y
CONFIG_APM_DO_ENABLE=y
CONFIG_APM_CPU_IDLE=y
CONFIG_APM_DISPLAY_BLANK=y
CONFIG_APM_POWER_OFF=y
CONFIG_APM_IGNORE_MULTIPLE_SUSPEND=y
# CONFIG_APM_IGNORE_SUSPEND_BOUNCE is not set
# CONFIG_APM_RTC_IS_GMT is not set
# CONFIG_APM_ALLOW_INTS is not set
#
# Plug and Play support
#
CONFIG_PNP=y
#
# Block devices
#
CONFIG_BLK_DEV_FD=m
CONFIG_BLK_DEV_IDE=y
# CONFIG_BLK_DEV_HD_IDE is not set
CONFIG_BLK_DEV_IDEDISK=y
CONFIG_BLK_DEV_IDECD=m
# CONFIG_BLK_DEV_IDETAPE is not set
# CONFIG_BLK_DEV_IDEFLOPPY is not set
# CONFIG_BLK_DEV_IDESCSI is not set
# CONFIG_BLK_DEV_CMD640 is not set
# CONFIG_BLK_DEV_RZ1000 is not set
CONFIG_BLK_DEV_IDEPCI=y
CONFIG_BLK_DEV_IDEDMA=y
# CONFIG_BLK_DEV_OFFBOARD is not set
CONFIG_IDEDMA_AUTO=y
# CONFIG_BLK_DEV_OPTI621 is not set
# CONFIG_BLK_DEV_TRM290 is not set
# CONFIG_BLK_DEV_NS87415 is not set
# CONFIG_BLK_DEV_VIA82C586 is not set
# CONFIG_BLK_DEV_CMD646 is not set
# CONFIG_IDE_CHIPSETS is not set
# CONFIG_BLK_DEV_LOOP is not set
# CONFIG_BLK_DEV_NBD is not set
# CONFIG_BLK_DEV_MD is not set
# CONFIG_BLK_DEV_RAM is not set
# CONFIG_BLK_DEV_XD is not set
CONFIG_PARIDE_PARPORT=y
# CONFIG_PARIDE is not set
# CONFIG_BLK_DEV_HD is not set
#
# Networking options
#
CONFIG_PACKET=m
# CONFIG_NETLINK is not set
# CONFIG_FIREWALL is not set
# CONFIG_NET_ALIAS is not set
# CONFIG_FILTER is not set
CONFIG_UNIX=y
CONFIG_INET=y
CONFIG_IP_MULTICAST=y
# CONFIG_IP_ADVANCED_ROUTER is not set
# CONFIG_IP_PNP is not set
# CONFIG_IP_ROUTER is not set
# CONFIG_NET_IPIP is not set
# CONFIG_NET_IPGRE is not set
# CONFIG_IP_MROUTE is not set
# CONFIG_IP_ALIAS is not set
# CONFIG_SYN_COOKIES is not set
CONFIG_INET_RARP=m
CONFIG_IP_NOSR=y
CONFIG_SKB_LARGE=y
# CONFIG_IPV6 is not set
# CONFIG_IPX is not set
# CONFIG_ATALK is not set
# CONFIG_X25 is not set
# CONFIG_LAPB is not set
# CONFIG_BRIDGE is not set
# CONFIG_LLC is not set
# CONFIG_ECONET is not set
# CONFIG_WAN_ROUTER is not set
# CONFIG_NET_FASTROUTE is not set
# CONFIG_NET_HW_FLOWCONTROL is not set
# CONFIG_CPU_IS_SLOW is not set
#
# QoS and/or fair queueing
#
# CONFIG_NET_SCHED is not set
#
# SCSI support
#
# CONFIG_SCSI is not set
#
# Network device support
#
CONFIG_NETDEVICES=y
# CONFIG_ARCNET is not set
# CONFIG_DUMMY is not set
# CONFIG_EQUALIZER is not set
CONFIG_NET_ETHERNET=y
# CONFIG_NET_VENDOR_3COM is not set
# CONFIG_LANCE is not set
# CONFIG_NET_VENDOR_SMC is not set
# CONFIG_NET_VENDOR_RACAL is not set
# CONFIG_RTL8139 is not set
# CONFIG_YELLOWFIN is not set
# CONFIG_ACENIC is not set
# CONFIG_NET_ISA is not set
# CONFIG_NET_EISA is not set
# CONFIG_NET_POCKET is not set
# CONFIG_FDDI is not set
# CONFIG_HIPPI is not set
# CONFIG_DLCI is not set
CONFIG_PPP=m
# CONFIG_SLIP is not set
# CONFIG_NET_RADIO is not set
# CONFIG_TR is not set
# CONFIG_SHAPER is not set
# CONFIG_HOSTESS_SV11 is not set
# CONFIG_COSA is not set
#
# Amateur Radio support
#
# CONFIG_HAMRADIO is not set
#
# IrDA subsystem support
#
# CONFIG_IRDA is not set
#
# ISDN subsystem
#
# CONFIG_ISDN is not set
#
# CD-ROM drivers (not for SCSI or IDE/ATAPI drives)
#
# CONFIG_CD_NO_IDESCSI is not set
#
# Character devices
#
CONFIG_VT=y
CONFIG_VT_CONSOLE=y
CONFIG_SERIAL=m
# CONFIG_SERIAL_EXTENDED is not set
# CONFIG_SERIAL_NONSTANDARD is not set
CONFIG_UNIX98_PTYS=y
CONFIG_UNIX98_PTY_COUNT=256
CONFIG_MOUSE=y
#
# Mice
#
# CONFIG_ATIXL_BUSMOUSE is not set
# CONFIG_BUSMOUSE is not set
# CONFIG_MS_BUSMOUSE is not set
CONFIG_PSMOUSE=y
# CONFIG_82C710_MOUSE is not set
# CONFIG_PC110_PAD is not set
# CONFIG_QIC02_TAPE is not set
# CONFIG_WATCHDOG is not set
# CONFIG_NVRAM is not set
# CONFIG_RTC is not set
#
# Video For Linux
#
# CONFIG_VIDEO_DEV is not set
#
# Joystick support
#
# CONFIG_JOYSTICK is not set
#
# Ftape, the floppy tape device driver
#
# CONFIG_FTAPE is not set
#
# Filesystems
#
# CONFIG_QUOTA is not set
# CONFIG_AUTOFS_FS is not set
# CONFIG_ADFS_FS is not set
# CONFIG_AFFS_FS is not set
# CONFIG_HFS_FS is not set
# CONFIG_FAT_FS is not set
# CONFIG_MSDOS_FS is not set
# CONFIG_UMSDOS_FS is not set
# CONFIG_VFAT_FS is not set
CONFIG_ISO9660_FS=m
# CONFIG_JOLIET is not set
# CONFIG_MINIX_FS is not set
# CONFIG_NTFS_FS is not set
# CONFIG_HPFS_FS is not set
CONFIG_PROC_FS=y
CONFIG_DEVPTS_FS=y
# CONFIG_QNX4FS_FS is not set
# CONFIG_ROMFS_FS is not set
CONFIG_EXT2_FS=y
# CONFIG_SYSV_FS is not set
# CONFIG_UFS_FS is not set
#
# Network File Systems
#
# CONFIG_CODA_FS is not set
CONFIG_NFS_FS=m
CONFIG_NFSD=m
# CONFIG_NFSD_SUN is not set
CONFIG_SUNRPC=m
CONFIG_LOCKD=m
# CONFIG_SMB_FS is not set
# CONFIG_NCP_FS is not set
#
# Partition Types
#
# CONFIG_BSD_DISKLABEL is not set
# CONFIG_MAC_PARTITION is not set
# CONFIG_SMD_DISKLABEL is not set
# CONFIG_SOLARIS_X86_PARTITION is not set
# CONFIG_UNIXWARE_DISKLABEL is not set
# CONFIG_NLS is not set
#
# Console drivers
#
CONFIG_VGA_CONSOLE=y
CONFIG_VIDEO_SELECT=y
# CONFIG_MDA_CONSOLE is not set
CONFIG_FB=y
CONFIG_DUMMY_CONSOLE=y
CONFIG_FB_VESA=y
CONFIG_VIDEO_SELECT=y
# CONFIG_FB_MATROX is not set
# CONFIG_FB_ATY is not set
# CONFIG_FB_VIRTUAL is not set
# CONFIG_FBCON_ADVANCED is not set
CONFIG_FBCON_CFB8=y
CONFIG_FBCON_CFB16=y
CONFIG_FBCON_CFB24=y
CONFIG_FBCON_CFB32=y
# CONFIG_FBCON_FONTWIDTH8_ONLY is not set
# CONFIG_FBCON_FONTS is not set
CONFIG_FONT_8x8=y
CONFIG_FONT_8x16=y
#
# Sound
#
CONFIG_SOUND=m
# CONFIG_SOUND_ES1370 is not set
# CONFIG_SOUND_ES1371 is not set
# CONFIG_SOUND_SONICVIBES is not set
# CONFIG_SOUND_MSNDCLAS is not set
# CONFIG_SOUND_MSNDPIN is not set
CONFIG_SOUND_OSS=m
# CONFIG_SOUND_PAS is not set
# CONFIG_SOUND_SB is not set
CONFIG_SOUND_ADLIB=m
# CONFIG_SOUND_GUS is not set
CONFIG_SOUND_MPU401=m
# CONFIG_SOUND_PSS is not set
CONFIG_SOUND_MSS=m
# CONFIG_SOUND_SSCAPE is not set
# CONFIG_SOUND_TRIX is not set
# CONFIG_SOUND_MAD16 is not set
# CONFIG_SOUND_WAVEFRONT is not set
# CONFIG_SOUND_CS4232 is not set
# CONFIG_SOUND_OPL3SA2 is not set
# CONFIG_SOUND_MAUI is not set
# CONFIG_SOUND_SGALAXY is not set
# CONFIG_SOUND_AD1816 is not set
# CONFIG_SOUND_OPL3SA1 is not set
# CONFIG_SOUND_SOFTOSS is not set
CONFIG_SOUND_YM3812=m
# CONFIG_SOUND_VMIDI is not set
# CONFIG_SOUND_UART6850 is not set
#
# Additional low level sound drivers
#
# CONFIG_LOWLEVEL_SOUND is not set
#
# Kernel hacking
#
# CONFIG_MAGIC_SYSRQ is not set
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/