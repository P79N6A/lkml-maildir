Date: Tue, 10 Jan 2006 21:00:54 +0100
From: Sam Ravnborg <>
Subject: Re: xfs: Makefile-linux-2.6 => Makefile?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/1/10/287

On Mon, Jan 09, 2006 at 11:45:32PM -0800, Andrew Morton wrote:
> 
> It'd be nice to fix this:
> 
> bix:/usr/src/25> make fs/xfs/linux-2.6/xfs_iops.o
>   SPLIT   include/linux/autoconf.h -> include/config/*
>   SHIPPED scripts/genksyms/lex.c
>   SHIPPED scripts/genksyms/parse.h
>   SHIPPED scripts/genksyms/keywords.c
>   HOSTCC  scripts/genksyms/lex.o
>   SHIPPED scripts/genksyms/parse.c
>   HOSTCC  scripts/genksyms/parse.o
>   HOSTLD  scripts/genksyms/genksyms
>   HOSTCC  scripts/mod/file2alias.o
>   HOSTCC  scripts/mod/modpost.o
>   HOSTLD  scripts/mod/modpost
> scripts/Makefile.build:15: /usr/src/devel/fs/xfs/linux-2.6/Makefile: No such file or directory
> make[1]: *** No rule to make target `/usr/src/devel/fs/xfs/linux-2.6/Makefile'.  Stop.
> make: *** [fs/xfs/linux-2.6/xfs_iops.o] Error 2
xfs as one of the very few users in the kernel has split up .o files in
several directories. And kbuild does not have support for specifying
that is shall link to a .o file that is being build in a sub-directory.
This is in general noe encouraged for the kernel - it is not common
practice. And therefore not something I have planned to implement.
If there is a general consensus that we like to have this then it is
doable, but it will uglify scripts/Makefile.lib even more.
For xfs this is 37 .o files that are build in three directories.
The easy fix would be to move the files to stay just under the xfs/
directory like all others - but xfs people prefer not to do so to stay
compatible with their external source tree.
	Sam
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/