Date: Mon, 10 Apr 2006 07:45:02 -0700
From: "H. Peter Anvin" <>
Subject: Re: + git-klibc-mktemp-fix.patch added to -mm tree
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/4/10/125

Keith Owens wrote:
> "H. Peter Anvin" (on Sat, 08 Apr 2006 13:27:06 -0700) wrote:
>> Either which way; I have a better fix for the bison issue (this all has 
>> to do with the fact that make's handling of tools that output more than 
>> one file at a time is at the very best insane)
> 
> Hit the same problem back in the 2.5 kbuild days, and worked around it
> with some dummy dependency rules.  Like this one for bison/yacc.
> 
> side_effect(aicasm_gram.tab.h aicasm_gram.tab.c)
> 
> which expands to
> 
> $(objtree)/aicasm_gram.tab.h: $objtree/aicasm_gram.tab.c
> 	@/bin/true
> 
> That forces make to wait until aicasm_gram.tab.c is built before using
> aicasm_gram.tab.h, and allows the following code to depend on either
> aicasm_gram.tab.h or aicasm_gram.tab.c without any races.  The command
> should not get executed, but you still need a command to keep make
> happy.
A better way to do it for something like yacc/bison is to use a pattern 
rule.  Having two things on the LHS means different things for explicit 
and for pattern rules!
	-hpa
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/