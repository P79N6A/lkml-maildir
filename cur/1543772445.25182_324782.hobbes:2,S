Date: Sat, 11 Jun 2005 09:28:22 -0700 (PDT)
From: Daniel Walker <>
Subject: Re: [PATCH] local_irq_disable removal
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/6/11/100

On Sat, 11 Jun 2005, Ingo Molnar wrote:
> - for raw spinlocks i've reintroduced raw_local_irq primitives again.
>   This helped get rid of some grossness in sched.c, and the raw
>   spinlocks disable preemption anyway. It's also safer to just assume
>   that if a raw spinlock is used together with the IRQ flag that the
>   real IRQ flag has to be disabled.
I don't know about this one .. That grossness was there so people aren't
able to easily add new disable sections. 
Could we add a new raw_raw_spinlock_t that really disable interrupt , then
investigate each one . There are really only two that need it, runqueue
lock , and the irq descriptor lock . If you add it back for all raw types
you just add back more un-needed disable sections. The only way a raw lock
needs to disable interrupts is if it's possible to enter that region from
interrupt context .
Daniel
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/