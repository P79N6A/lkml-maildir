Date: Wed, 21 Apr 2004 08:21:18 +1000
From: Rusty Russell <>
Subject: Re: kernel/softirq.c issues under 2.6.5
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/4/20/138

On Tue, 2004-04-20 at 17:58, Aivils wrote:
> Hi all!
> 
> 	My 2.6.5 will not start until i applay patch bellow:
> --- linux-2.6.5/kernel/softirq.c        2004-04-04 06:36:47.000000000 +0300
> +++ linux-2.6.5/kernel/softirq.chg.c    2004-04-20 10:48:28.000000000 +0300
> @@ -409,8 +409,8 @@ static int __devinit cpu_callback(struct
> 
>         switch (action) {
>         case CPU_UP_PREPARE:
> -               BUG_ON(per_cpu(tasklet_vec, hotcpu).list);
> -               BUG_ON(per_cpu(tasklet_hi_vec, hotcpu).list);
> +               per_cpu(tasklet_vec, cpu).list = NULL;
> +               per_cpu(tasklet_hi_vec, cpu).list = NULL;
>                 p = kthread_create(ksoftirqd, hcpu, "ksoftirqd/%d", hotcpu);
>                 if (IS_ERR(p)) {
>                         printk("ksoftirqd for %i failed\n", hotcpu);
This patch should be completely unnecessary.
One possibility is that your compiler isn't obeying the section
attribute for some reason.  Please send .config and output of "gcc -v".
Thanks!
Rusty.
-- 
Anyone who quotes me in their signature is an idiot -- Rusty Russell
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/