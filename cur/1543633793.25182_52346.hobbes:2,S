Date: Fri, 14 Jun 2002 11:28:49 -0400
From: Benjamin LaHaise <>
Subject: Re: New version of pageattr caching conflict fix for 2.4
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/6/14/13

On Fri, Jun 14, 2002 at 06:27:54AM +0200, Andi Kleen wrote:
> Both AMD x86-64 and Intel IA32 documentation states that INVLPG flushes global
> TLBs. The first version of change_page_attr did in fact use __flush_tlb_all,
> but I changed it after checking the docs.
As Andrea pointed out, there is an errata whereby 4MB pages aren't flushed 
on the Athlon.  If you mask off the low bits of the address for flushing, 
that should fix the problem, and sounds like a plausible explanation for 
the failure I saw.
		-ben
ps. s/La Haise/LaHaise would be nice, too.
-- 
"You will be reincarnated as a toad; and you will be much happier."
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/