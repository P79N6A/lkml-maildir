Date: 25 Sep 2003 20:46:21 +0200
From: Peter Osterlund <>
Subject: Re: Radeon FB in 2.6.0-test4 fails for me
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/9/25/205

Ani Joshi <ajoshi@unixbox.com> writes:
> try the attatched patch (its against test4).
Thanks, this patch makes the frame buffer usable on my computer. I
suggest you send it to Linus.
> On Tue, 26 Aug 2003, Peter Chubb wrote:
> 
> >
> > Hi,
> > 	On a Clevo laptop with a Radeon Mobility M7 LW (AGP), enabling
> > 	the Radeon frame buffer results in an unusable LCD display (as
> > 	if the horizontal and/or vertical sync were incorrect -- lots
> > 	of skewed diagonal lines)
> 
> diff -uNr linux-2.6.0-test4.orig/drivers/video/radeonfb.c linux-2.6.0-test4/drivers/video/radeonfb.c
> --- linux-2.6.0-test4.orig/drivers/video/radeonfb.c	2003-08-22 17:01:33.000000000 -0700
> +++ linux-2.6.0-test4/drivers/video/radeonfb.c	2003-08-26 10:48:03.000000000 -0700
> @@ -2090,7 +2090,7 @@
> 
>  	}
>  	/* Update fix */
> -        info->fix.line_length = rinfo->pitch*64;
> +        info->fix.line_length = mode->xres_virtual*(mode->bits_per_pixel/8);
>          info->fix.visual = rinfo->depth == 8 ? FB_VISUAL_PSEUDOCOLOR : FB_VISUAL_DIRECTCOLOR;
> 
>  #ifdef CONFIG_BOOTX_TEXT
-- 
Peter Osterlund - petero2@telia.com
http://w1.894.telia.com/~u89404340
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/