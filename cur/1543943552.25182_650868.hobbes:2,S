Date: Sat, 9 Feb 2008 12:53:11 +0100
From: Prakash Punnoor <>
Subject: Re: [PATCH] Replace nvidia timer override quirk with pci id list
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/2/9/75

On the day of Saturday 09 February 2008 Andi Kleen hast written:
> > Grr, I don't know why I am discussing with stubborn and/or arrogant devs
> > like you seem to be. But I actually did what you wanted and as *expected*
> > - as I
>
> Thanks.
>
> > said I understand that trivial piece of code you posted - your patch
> > fails here for my nforce2:
>
> That is 2.6.24 + my patch?  And system didn't boot?
>
> > cat /proc/interrupts
> >            CPU0
> >   0:        832    XT-PIC-XT        timer <---------------- seeing this?
>
> Well it looks like it is ticking. What are the symptoms?
You are seeing it. If you read my other mails you would comprehend it as well.
> Do you have a full boot log of the failure?
As I said inform yourself, what the intention of the quirk is about. I am 
tired of this.
>
> > And no, I won't test it on my MCP51 as I *know* what happens: As soon as
> > I disable hpet, the quirk gets triggered and will lock up my system.
>
> I readded the HPET check in v2 especially for you so if HPET is enabled
> no quirk is triggered.
Still you didn't give *any* proof that mcp51 needs quirk at all. I therefore 
want that line *removed*:
+       QBRIDGE(PCI_VENDOR_ID_NVIDIA, 0x02f0, nvidia_timer), /* mcp 51/nf4 ? 
*/
Furthermore my original bios didn't have option to enable hpet. What then? 
Kernel hangs unless I specify acpi_use_timer_override. Great.
Hint: The correct way of quirking would be *only having this one* line:
+       QBRIDGE(PCI_VENDOR_ID_NVIDIA, PCI_DEVICE_ID_NVIDIA_NFORCE2, 
nvidia_timer),
According to Len Brown's comment this would work for every nforce2. For every 
other nforceX use DMI Scan and only quirk known broken bioses instead of 
messing up working boxes.
bye,
-- 
(°=                 =°)
//\ Prakash Punnoor /\\
V_/                 \_V
[unhandled content-type:application/pgp-signature]