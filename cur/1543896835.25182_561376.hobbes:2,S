Date: Fri, 22 Jun 2007 22:31:32 -0300
From: Henrique de Moraes Holschuh <>
Subject: Re: SATA Harddisk speed drop of 100 MB/s
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/6/22/434

Hi Carlo!
On Fri, 22 Jun 2007, Carlo Wood wrote:
> On Fri, Jun 22, 2007 at 06:17:46PM -0300, Henrique de Moraes Holschuh wrote:
> > On Fri, 22 Jun 2007, Carlo Wood wrote:
> > > So far I found out that it's RAID only.
> > 
> > If you change the IO schedulers, does it help?
> 
> How do I do that?
for i in /sys/block/sd*/queue/scheduler ; do echo -n "scheduler for $i was:" ; cat $i ; echo anticipatory > $i ; done
Should show you the scheduler for all libata/scsi discs, and switch to
anticipatory.  It probably works for hd* as well, but I don't have any
around to test.
I had ridiculous md raid performance (on resync) using cfq at least once.
Unfortunately I never bothered trying to track it down, and I didn't check
the throughput after the resync was done either. Also, I don't recall the
kernel version, but it was either 2.6.18 or 2.6.20.
Since it is a very simple test...
-- 
  "One disk to rule them all, One disk to find them. One disk to bring
  them all and in the darkness grind them. In the Land of Redmond
  where the shadows lie." -- The Silicon Valley Tarot
  Henrique Holschuh
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/