Date: Sat, 28 Jan 2006 00:05:35 +0100
From: Pavel Machek <>
Subject: Re: Suspend to RAM: help with whitelist wanted
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/1/27/285

On PÃ¡ 27-01-06 18:04:06, Luca wrote:
> Pavel Machek <pavel@suse.cz> ha scritto:
> > Hi!
> > 
> > On www.sf.net/projects/suspend , there's s2ram.c program for
> > suspending machines. It contains whitelist of known machines, along
> > with methods to get their video working (similar to
> > Doc*/power/video.txt). Unfortunately, video.txt does not allow me to
> > fill in whitelist automatically, so I need your help.
> > 
> > I do not yet have solution for machines that need vbetool; fortunately
> > my machines do not need that :-), and it is pretty complex (includes
> > x86 emulator).
> 
> What about adding something like:
> 
> void s2ram_restore(void) {
>         if (needed)
>                 fork_and_exec(vbetool);
> }
Yes... that's what I wanted to avoid. ... ...
I originally wanted to avoid calling external problems. That way,
s2ram code could be pagelocked and you would get your video back even
in case of disk problems etc.
[I thought that it would bring problems with suspend-to-both; but I
was wrong, no such problem exists.]
> Ugly? Maybe, but you don't have to fiddle with a x86 emulator.
...and then there's a issue of how to do vbetool vbestate
save. According to docs it should be done just once, but that looks
pretty fragile to me. Perhaps we can just do it unconditionaly?
								Pavel
-- 
Thanks, Sharp!
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/