Date: Sun, 6 May 2007 15:55:55 +0300
From: Ville Syrj채l채 <>
Subject: Re: [patch 06/33] m68k: CROSS_COMPILE = m68k-linux-gnu-
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/5/6/58

On Sun, May 06, 2007 at 01:26:17PM +0200, Geert Uytterhoeven wrote:
> On Wed, 2 May 2007, Ville Syrj?l? wrote:
> > On Tue, May 01, 2007 at 10:32:40PM +0200, Geert Uytterhoeven wrote:
> > > Recent cross-compilers are called m68k-linux-gnu-gcc instead of m68k-linux-gcc
> > > 
> > > Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
> > > ---
> > >  arch/m68k/Makefile |    2 +-
> > >  1 file changed, 1 insertion(+), 1 deletion(-)
> > > 
> > > --- linux-m68k-2.6.21.orig/arch/m68k/Makefile
> > > +++ linux-m68k-2.6.21/arch/m68k/Makefile
> > > @@ -21,7 +21,7 @@ AS += -m68020
> > >  LDFLAGS := -m m68kelf
> > >  ifneq ($(COMPILE_ARCH),$(ARCH))
> > >  	# prefix for cross-compiling binaries
> > > -	CROSS_COMPILE = m68k-linux-
> > > +	CROSS_COMPILE = m68k-linux-gnu-
> > >  endif
> > > 
> > >  ifdef CONFIG_SUN3
> > 
> > What about using ?= so the user can override it. I sent a patch doing
> > just that but never got any response.
> 
> I just gave it a try, and compilation failed because it used plain gcc
> instead of m68k-linux-gnu-gcc.
Argh. You're correct of course. Apparently I never tried it without
setting CROSS_COMPILE. The problem is in the top level Makefile:
CROSS_COMPILE ?=
and
export CROSS_COMPILE
If I remove those it works, but I don't know if removing them is a good
idea in general (especially the export). Maybe the ?= thing can be
removed and the export can be moved after including the arch Makefile?
-- 
Ville Syrj채l채
syrjala@sci.fi
http://www.sci.fi/~syrjala/
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/