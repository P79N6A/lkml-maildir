Date: Sat, 22 Sep 2001 16:58:53 +0100 (BST)
From: Alan Cox <>
Subject: Re: "hde: timeout waiting for DMA": message gone, same behaviour
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/9/22/65

> up... or it locks up.  (I had the lockup problem with kernel 2.4.2 and
> the suspect drive on my Promise IDE interface.  On the VIA interface, it
> booted eventually after ~60 sec of timeout errors.  Under 2.4.9, the
> kernel doesn't take as long to timeout, and it's not as noisy as it was
> under 2.4.2, but the underlying problem is still there: no DMA.)
The timeout is it issuing DMA requests that failed. 
> > 10, sometimes 100), the installer halts, the hard disk light stays on, and
> > if I use CTRL-ALT-F4, I see these DMA timeout errors.  The hard drive is
> > unresponsive unless I do a cold boot, as opossed to warm boot.
For RH and other stuff that picked up the RH diffs (now in Linus 2.4.7+
tree or so) you can boot with the option "ide=nodma"
> drive.  I've had positive reports from two people with the ASUS A7V
> motherboard and ATA/100 drives under Linux 2.4, so it's certainly
> possible.  I just need to find someone with some redundant hardware that
Older trees take one DMA timeout and go PIO. That turns out to be bad
because very very occasionally other things (I guess drive calibration etc)
will cause the DMA to timeout.
With the 2.4.9-ac tree I have two boxes which get DMA timeouts. One of them
very very rarely and the retry recovers nicely, the other DMA does not work
and after poking around I discovered windows also disables DMA on this
mini notebook..
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/