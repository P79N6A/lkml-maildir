Date: Thu, 08 Apr 2004 21:10:03 +0900 (JST)
From: Hirokazu Takahashi <>
Subject: Re: [Lhms-devel] Re: [patch 0/3] memory hotplug prototype
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/4/8/42

Hello,
> > > > This is an updated version of memory hotplug prototype patch, which I
> > > > have posted here several times.
> > > 
> > > I really, really suggest you take a look at Dave McCracken's work, which
> > > he posted as "Basic nonlinear for x86" recently. It's going to be much
> > > much easier to use this abstraction than creating 1000s of zones ...
> > 
> > Well, I think his patch is orthogonal to mine.  My ultimate target
> > is IA64 and it will only support node-sized memory hotplugging.
> > 
> > If you need fine-grained memory resizing, that shouldn't be hard to
> > do.  As others have pointed out, per section hotremovable is not as
> > easy as per zone one, but we've done a similar thing for hugetlbfs
> > support.  Look for PG_again in Takahashi's patch.
> 
> Err, s/PG_again/PG_booked/
> Pages with PG_booked bit set are skipped in alloc_pages.
> Alternatively, when such pages are freed, they can be linked to
> another list than free_list to avoid being used again, but buddy
> bits handling would be a bit tricky in this case.
It might be possible but it's not easy to do.
If page count equals 0, where do you think the page is?
It might be in the buddy system or in the per-cpu-pages pools,
or it might be a part of coumpound page, or it's just being
allocated/freed. If it in the buddy system, which free_area of zones
is it linked?  
It's very hard to determin that where it is, so that
I introduced PG_booked flag to avoid to re-use it.
Is there any better way?
Thank you,
Hirokazu Takahashi.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/