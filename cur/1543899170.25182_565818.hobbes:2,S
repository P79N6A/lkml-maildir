Date: Fri, 6 Jul 2007 18:32:32 +0300
From: Dan Aloni <>
Subject: Re: [RFC][Patch] Allow not mounting a root fs
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/7/6/211

On Fri, Jul 06, 2007 at 05:00:40PM +0200, Bodo Eggert wrote:
> On Thu, 5 Jul 2007, H. Peter Anvin wrote:
> 
> > Bodo Eggert wrote:
> > > This patch adds the option to not mount another root filesystem 
> > > by specifying root=initramfs.
> > 
> > Uhm, the kernel doesn't mount anything if you're using an initramfs.
> 
> Yes, instead it panics trying to mount the non-existing "root=".
> I've put the complete system into initrams, and I just want the kernel to
> run /sbin/init.
If I understood you correctly, you're trying to get the kernel 
to execute the "/sbin/init" file of your initramfs. However, "/init" 
is the sole default initramfs entry point. To fix this, you can pass 
rdinit=/sbin/init _or_ modify your initramfs image so that "/init" 
is the entrypoint.
Normally, if your initramfs has a /init script your kernel would 
skip the entire stage where it panics in the perpare_namespace() 
function for trying to mount "root=" by itself (see 
init/main.c:init()).
-- 
Dan Aloni
XIV LTD, 
http://www.xivstorage.com
da-x (at) monatomic.org, dan (at) xiv.co.il
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/