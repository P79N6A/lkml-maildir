Date: Thu, 8 Sep 2005 15:40:59 +0200
From: "Budde, Marco" <>
Subject: kbuild: libraries and subdirectories
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/9/8/90

I have a large number of sources files, which I have to
compile into one kernel module. Let's assume I have the
following source organisation:
  main/
    main_code.c
  lib1/
    part1/
      file_1_1_1.c
    part2/
      file_1_2_1.c
  lib2/
    part1/
      file_2_1_1.c
    part2/
      file_2_2_1.c
I would like to build all source files in lib1 into one
lib.a library and all files in lib2 into a second lib.a
library.
At the end I would like to compile the code in main and
link every together (result should be one kernel module).
How can I archieve this with kbuild? Its documentation is not
really deep.
I have added to all subdirectories kbuild files looking like
this:
   lib-m = file_1_1_1.c
This works and creates lib.a archives. In fact I have got
two problems:
 *) How can I tell kbuild in lib1 and lib2 to descend into
    the part directories?
 *) How can I link the libraries of the part directories into
    libs in the lib directories?
cu, Marco
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/