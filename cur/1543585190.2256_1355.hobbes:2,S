Date: Sun, 18 Mar 2001 10:42:32 +0100 (CET)
From: willy tarreau <>
Subject: [PATCH] printk msglevel identification broken since 2.4.2ac13
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/3/18/30

Hi Andrew & Alan,
I noticed that in 2.4.2ac20, all netfilter logs come
to
the console, whatever the log levels, and the
beginning
of the line is always prepended with '<4>'.
I found in printk.c that a test is done for the length
of the message to be strictly larger than 3 chars. But
ipt_LOG uses 2 consecutive printk, one with only '<4>'
and one with the message. It may be possible that
other
drivers to the same. Looking back in patches show this
is present since 2.4.2ac13.
This trivial patch allows a 3-char message to set the
message level.
Cheers,
Willy
___________________________________________________________
Do You Yahoo!? -- Pour dialoguer en direct avec vos amis, 
Yahoo! Messenger : 
http://fr.messenger.yahoo.com
[unhandled content-type:application/x-unknown]