Date: Thu, 14 Oct 1999 14:53:06 -0500 (CDT)
From: "Forever shall I be." <>
Subject: Re: FW: pIII Serial (or lack there-of)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/10/14/121

Jones D (ISaCS) wrote:
> > Well, I don't see how this would help; after the serial is 
> > disabled via MSR 0x119 magic, it can't be re-enabled until you reboot..  
> 
> I say remove the code which is disabling it.
> The kernel should not set the policy.
> If a user wants to disable it, they should use a userspace tool
> to interface the MSR. (But an MSR driver is needed first)
> 
That would probably be the best thing..  Everyone with a pIII would have
to be notified of the change though, and some people might not want to run
a program 'just to disable the serial'..  and btw, you can simply write a
short program with iopl(3) (or you should be able to) that can write to
the MSRs..
> > Ploping the data to a file in /proc owned by root with 0400 
> > perms would probably be the best thing if it needs to be
> > accessed  (someone _has_ to have a use for it), but it has
> > to be read and saved before it's disabled..
> 
> Yes, of course writing the MSRs should be a root-only thing.
> 
> > As a side note, most bioses allow it to be disabled at boot 
> > time (mine included), and I would rather linux left the bit
> > twiddling to me.. but I guess I can just go comment out the
> > relevant lines :)
> 
> My point exactly.
> 
> > Also, reading MSRs works fine (as a normal user) with the rdmsr
> > instruction; I haven't tried writing them though (I would 
> > hope that isn't allowed in userland)
> 
> You shouldn't be able to read them either, as AFAIR, it's a ring 0
> instruction. You should segfault immediately.
I might have been mistaken there (looks like I was getting if the serial 
was enabled or not via eax == 1; CPUID then testing for bit 18 in edx,
I keep forgetting to read my late night messages twice ;)
> 
> regards,
> 
> Dave.
--
Zinx Verituse (finger @bliss.penguinpowered.com for pgp/gpg keys)(new jul10/99)
pgp9FE5C9747EB8FF329BB13199C4008E67/gpg574673A12184A27A9EC0EDCCE132BCEF921B1558
0"2-1=0>0:1(2<192:0?0;0A0@2=0<0=1.0A2=0<2A0-">:#v_52*,@
55*-3*\68*-+,                                v  >
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/