Date: Wed, 25 Sep 2002 09:44:41 -0700 (PDT)
From: Patrick Mochel <>
Subject: Re: devicefs & sleep support for IDE
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/9/25/101

> Questions: is it possible that in hwif_register you don't need to
> initialize parent?
Actually, looking at it again, the struct device in hwif_t should probably 
go away. We should initialize the parent device to the struct device in 
the struct pci_dev of the controller; at least for PCI controllers.
For non-PCI controllers, is there anything else that describes the 
controller besides hwif_t ?
> Where is device_put of hwif->gendev? I miss it.
There is none (yet), as there is no driver attached to it. If we remove it 
in favor of the PCI device, then we get it in the pci driver for the 
controller; and we'd need one for non-PCI controllers.
> Ouch. There are actually two devices in struct gendisk. I choosed
> disk_dev. Was it right?
Yes. The other one: 
	struct device *driverfs_dev;
was from the SCSI people. I think they had good intentions, but I'm not 
sure what they were doing in several places (including here).
	-pat
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/