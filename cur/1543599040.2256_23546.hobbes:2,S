Date: Fri, 24 Aug 2001 21:42:21 +0200
From: < ( Marc) (A.) (Lehmann )>
Subject: Re: [resent PATCH] Re: very slow parallel read performance
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/8/24/186

On Fri, Aug 24, 2001 at 09:35:08AM +0200, Roger Larsson <roger.larsson@skelleftea.mail.telia.com> wrote:
> And I found out that read ahead was too short for modern disks.
That could well be, the problem in my case is that, with up to 1000
clients, I fear that there might not be enough memory for effective
read-ahead (and I think read-ahead would be counter-productive even).
> line is the  
> -#define MAX_READAHEAD  31
> +#define MAX_READAHEAD  511
I plan to try this, however, read-ahead should IMHO be zero anyway, since
there simply is ot enough memory, and the kernel should not do much
read-ahead when many other requests are outstanding.
The real problem., however, is that read performance sinks so much when many
readers run in parallel.
What I need is many parallel reads because this helps the elevator scan the
disk once and not jump around widely)
(I have 512MB memory around 64k socket send buffer and use an additional
96k buffer currently for reading from disk, so effectively i do my own
read-ahead anyway. IU just need to optimize the head movements).
-- 
      -----==-                                             |
      ----==-- _                                           |
      ---==---(_)__  __ ____  __       Marc Lehmann      +--
      --==---/ / _ \/ // /\ \/ /       pcg@goof.com      |e|
      -=====/_/_//_/\_,_/ /_/\_\       XX11-RIPE         --+
    The choice of a GNU generation                       |
                                                         |
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/