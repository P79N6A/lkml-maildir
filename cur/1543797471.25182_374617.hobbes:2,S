Date: Fri, 9 Dec 2005 12:03:05 -0600
From: Matt Domsch <>
Subject: [PATCH 2.6] ipmi: panic generator ID
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/12/9/157

The IPMI specifcation says the generator ID is 0x20, but that is for
bits 7-1.  Bit 0 is set to specify it is a software event.  The
correct value is 0x41.  Without this fix, panic events written into
the System Event Log appear to come from an "unknown" generator,
rather than from the kernel.
Signed-off-by: Jordan Hargrave <Jordan_Hargrave@dell.com>
Signed-off-by: Matt Domsch <Matt_Domsch@dell.com>
Ack'd-by: Corey Minyard <minyard@acm.org>
-- 
Matt Domsch
Software Architect
Dell Linux Solutions linux.dell.com & www.dell.com/linux
Linux on Dell mailing lists @ 
http://lists.us.dell.com
--- linux-2.6/drivers/char/ipmi/ipmi_msghandler.c	Tue Dec  6 12:53:19 2005
+++ linux-2.6/drivers/char/ipmi/ipmi_msghandler.c	Fri Dec  9 10:27:42 2005
@@ -2986,7 +2986,7 @@ static void send_panic_events(char *str)
 	msg.cmd = 2; /* Platform event command. */
 	msg.data = data;
 	msg.data_len = 8;
-	data[0] = 0x21; /* Kernel generator ID, IPMI table 5-4 */
+	data[0] = 0x41; /* Kernel generator ID, IPMI table 5-4 */
 	data[1] = 0x03; /* This is for IPMI 1.0. */
 	data[2] = 0x20; /* OS Critical Stop, IPMI table 36-3 */
 	data[4] = 0x6f; /* Sensor specific, IPMI table 36-1 */
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/