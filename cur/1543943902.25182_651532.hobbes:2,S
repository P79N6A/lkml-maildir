Date: Mon, 11 Feb 2008 16:15:46 +0530
From: Ananth N Mavinakayanahalli <>
Subject: [PATCH 1/8] Create tests/ directory
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/2/11/99

From: Ananth N Mavinakayanahalli <ananth@in.ibm.com>
Create a toplevel tests/ directory to house in-kernel subsystem specific
tests.
Thanks to Sam Ravnborg for the Makefile corrections.
Signed-off-by: Ananth N Mavinakayanahalli <ananth@in.ibm.com>
Acked-by: Sam Ravnborg <sam@ravnborg.org>
---
 Makefile          |    1 +
 lib/Kconfig.debug |    2 ++
 tests/Kconfig     |   10 ++++++++++
 tests/Makefile    |    3 +++
 4 files changed, 16 insertions(+)
Index: linux-2.6.25-rc1/Makefile
===================================================================
--- linux-2.6.25-rc1.orig/Makefile
+++ linux-2.6.25-rc1/Makefile
@@ -603,6 +603,7 @@ export mod_strip_cmd
 
 ifeq ($(KBUILD_EXTMOD),)
 core-y		+= kernel/ mm/ fs/ ipc/ security/ crypto/ block/
+core-$(CONFIG_KERNEL_TESTS) += tests/
 
 vmlinux-dirs	:= $(patsubst %/,%,$(filter %/, $(init-y) $(init-m) \
 		     $(core-y) $(core-m) $(drivers-y) $(drivers-m) \
Index: linux-2.6.25-rc1/lib/Kconfig.debug
===================================================================
--- linux-2.6.25-rc1.orig/lib/Kconfig.debug
+++ linux-2.6.25-rc1/lib/Kconfig.debug
@@ -618,3 +618,5 @@ config PROVIDE_OHCI1394_DMA_INIT
 	  See Documentation/debugging-via-ohci1394.txt for more information.
 
 source "samples/Kconfig"
+
+source "tests/Kconfig"
Index: linux-2.6.25-rc1/tests/Kconfig
===================================================================
--- /dev/null
+++ linux-2.6.25-rc1/tests/Kconfig
@@ -0,0 +1,10 @@
+# tests/Kconfig
+
+menuconfig KERNEL_TESTS
+	bool "Kernel subsystem tests"
+	help
+	  You can build kernel subsystem specific tests.
+
+if KERNEL_TESTS
+
+endif # KERNEL_TESTS
Index: linux-2.6.25-rc1/tests/Makefile
===================================================================
--- /dev/null
+++ linux-2.6.25-rc1/tests/Makefile
@@ -0,0 +1,3 @@
+#
+# Makefile for kernel subsystem specific tests
+#