Date: Tue, 27 Jan 2009 14:06:08 +0100
From: Ingo Molnar <>
Subject: Re: [2.6.29-rc2-git2] compilation warnings
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2009/1/27/139

* Jean Delvare <khali@linux-fr.org> wrote:
> Hi Takashi,
> 
> On Tue, 27 Jan 2009 10:34:20 +0100, Takashi Iwai wrote:
> > At Tue, 27 Jan 2009 09:46:28 +0100,
> > > On Tue, 27 Jan 2009 08:32:17 +0100, Takashi Iwai wrote:
> > > > A bogus warning.  Ignore this.
> > > 
> > > No matter how bogus it is, it should be fixed. Otherwise this is
> > > wasting the time of users and developers over and over again.
> > 
> > Well, it's a bug of gcc appearing only in a certain version, so most
> > people won't see it.
> > 
> > Of course, we can put uninitialized_var().  But, I don't basically
> > like adding it unconditionally... 
> 
> I didn't know about uninitialized_var(), thanks for the hint.
> 
> My experience with these warnings is that, in many cases, it is possible 
> to write the code differently so that it is clear to the compiler that 
> the variable is never used uninitialized. In some cases, doing so also 
> makes the code easier to read for humans and less likely to break in the 
> future.
> 
> Of course, in some cases the problem is simply that the compiler is too 
> stupid to understand even simple things, but in other cases these 
> warnings might be a good opportunity to rewrite the code in a way that 
> is easier to understand.
And even in the cases where the compiler is stupid, leaving a warning 
around:
   1) Does not get compiler bugs fixed any faster [only true competition 
      between compilers gets compiler bugs fixed any faster]
   2) Has ongoing and irreversible maintenance costs for _all of us in the 
      kernel_
   3) for every bogus compiler warning there's a dozen warnings where the 
      compiler told us that _we_ were doing something stupid. All things 
      considered the false positive ratio is still a fair deal.
So leaving them around is a bit like making a political point by burning 
yourself in front of the cameras - leaves the political opponent largely 
unimpressed and unscathed while being self-destructive in 99% of the 
cases.
gcc_is_utterly_stupid(var) type of annotations (that initialize to zero 
instead of the current 'turn off the warning' dangerous construct) would 
be far better. Albeit even that would in all likelyhood be a rather 
pointless (but admittedly satisfying) gesture.
	Ingo