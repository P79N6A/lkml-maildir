Date: Tue, 07 Aug 2007 23:17:23 -0500
From: Larry Finger <>
Subject: Error message from device_rename in drivers/base/core.c
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/8/8/4

I am getting the following error message from drivers/base/core.c:
net eth1: device_rename: sysfs_create_symlink failed (-17)
Upon investigation, the call generating the error is renaming 'eth1' to 'eth1'. The following patch 
suppresses the error.
Index: wireless-dev/drivers/base/core.c
===================================================================
--- wireless-dev.orig/drivers/base/core.c
+++ wireless-dev/drivers/base/core.c
@@ -1256,7 +1256,7 @@ int device_rename(struct device *dev, ch
  		sysfs_remove_link(&dev->class->subsys.kobj, old_device_name);
  		error = sysfs_create_link(&dev->class->subsys.kobj, &dev->kobj,
  					  dev->bus_id);
-		if (error) {
+		if (error && memcmp(dev->bus_id, new_name, sizeof(new_name))) {
  			/* Uh... how to unravel this if restoring can fail? */
  			dev_err(dev, "%s: sysfs_create_symlink failed (%d)\n",
  				__FUNCTION__, error);
Larry
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/