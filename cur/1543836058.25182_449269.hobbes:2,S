Date: Tue, 1 Aug 2006 22:29:20 -0400
From: Kyle Moffett <>
Subject: Re: Solaris ZFS on Linux [Was: Re: the " 'official' point of  view"expressed by kernelnewbies.org regarding reiser4 inclusion]
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/8/1/478

On Aug 01, 2006, at 19:50:49, Ian Stirling wrote:
> You probably don't actually want to flush the cache - but to write  
> to a journal. 16M of cache - split into 32000 writes to single  
> sectors spread over the disk could well take several minutes to  
> write. Slapping it onto a journal would take well under .2 seconds.  
> That's a non-trivial amount of storage though - 3J or so, 40mF@12V  
> - a moderately large/expensive capacitor.
IMHO the best alternative for a situation like that is a storage  
controller with a battery-backed cache and a hunk of flash NVRAM for  
when the power shuts off (just in case you run out of battery), as  
well as a separate 1GB battery-backed PCI ramdisk for an external  
journal device (likewise equipped with flash NVRAM).  It doesn't take  
much power at all to write a gig of stuff to a small flash chip  
(Think about your digital camera which runs off a couple AA's), so  
with a fair-sized on-board battery pack you could easily transfer its  
data to NVRAM and still have power left to back up data in RAM for 12  
hours or so.  That way bootup is fast (no reading 1GB of data from  
NVRAM) but there's no risk of data loss.
Cheers,
Kyle Moffett
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/