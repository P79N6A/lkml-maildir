Date: Mon, 21 Oct 2002 20:53:22 +0200
From: DevilKin-LKML <>
Subject: Re: 2.4.20-pre10-ac2: i/o error on cdrom diskdump
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/10/21/252

On Monday 21 October 2002 20:25, Nicholas Berry wrote:
> More clues please (h/w, error, command, etc.)
Kernel: 2.4.20-pre10-ac2. Configuration is attached.
Hardware platform: x86, AMD TBird 2000XP.
Details: the scsi cdrom (writer) fails to read the immage correctly, whereas 
the other two (ide-scsi) devices read the image perfectly.
Loaded modules:
--------------------
agpgart   es1371  ac97_codec  soundcore  usb-storage  usb-uhci  usbcore  
via686a  i2c-isa  i2c-viapro  i2c-proc  i2c-core  ide-scsi  aic7xxx   sg  
sr_mod  cdrom  sd_mod  scsi_mod  smbfs  nfs  lockd  sunrpc  loop  lp  
parport_pc  parport  rtc  3c59x
SCSI Controller
----------------
00:0f.0 SCSI storage controller: Adaptec AHA-7850 (rev 03)
        Subsystem: Adaptec AHA-2904/Integrated AIC-7850
        Control: I/O- Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- 
Stepping- SERR- FastB2B-
        Status: Cap+ 66Mhz- UDF- FastB2B+ ParErr- DEVSEL=medium >TAbort- 
<TAbort- <MAbort- >SERR- <PERR-
        Latency: 32 (1000ns min, 1000ns max), cache line size 08
        Interrupt: pin A routed to IRQ 11
        Region 0: I/O ports at e800 [disabled] [size=256]
        Region 1: Memory at fb002000 (32-bit, non-prefetchable) [size=4K]
        Capabilities: [dc] Power Management version 1
                Flags: PMEClk- DSI+ D1- D2- AuxCurrent=0mA 
PME(D0-,D1-,D2-,D3hot-,D3cold-)
                Status: D0 PME-Enable- DSel=0 DScale=0 PME-
CDROM device:
------------------
scsi0 : Adaptec AIC7XXX EISA/VLB/PCI SCSI HBA DRIVER, Rev 6.2.8
        <Adaptec 2902/04/10/15/20/30C SCSI adapter>
        aic7850: Single Channel A, SCSI Id=7, 3/253 SCBs
  Vendor: PLEXTOR   Model: CD-R   PX-W4220T  Rev: 1.01
  Type:   CD-ROM                             ANSI SCSI revision: 02
Attached scsi CD-ROM sr0 at scsi0, channel 0, id 4, lun 0
(scsi0:A:4): 10.000MB/s transfers (10.000MHz, offset 8)
sr0: scsi3-mmc drive: 20x/20x writer cd/rw xa/form2 cdda tray
Device file:
-------------
devilkin@whocares:/tmp$ ls -l /dev/scd0
brw-rw-rw-    1 root     disk      11,   0 Jul 18  1994 /dev/scd0
Command executed with valid cdrom in drive:
---------------------------------------------------
devilkin@whocares:/tmp$ dd if=/dev/scd0 of=/tmp/image.iso
dd: reading `/dev/writer': Input/output error
1264984+0 records in
1264984+0 records out
Errors in the system log:
---------------------------
scsi0: ERROR on channel 0, id 4, lun 0, CDB: Read (10) 00 00 04 d3 24 00 00 3f 
00
Info fld=0x4d356, Current sd0b:00: sense key Medium Error
Additional sense indicates L-EC uncorrectable error
 I/O error: dev 0b:00, sector 1264984
scsi0: ERROR on channel 0, id 4, lun 0, CDB: Read (10) 00 00 04 d3 57 00 00 0c 
00
Info fld=0x4d357, Current sd0b:00: sense key Medium Error
 I/O error: dev 0b:00, sector 1264988
scsi0: ERROR on channel 0, id 4, lun 0, CDB: Read (10) 00 00 04 d3 58 00 00 0b 
00
Info fld=0x4d358, Current sd0b:00: sense key Medium Error
 I/O error: dev 0b:00, sector 1264992
scsi0: ERROR on channel 0, id 4, lun 0, CDB: Read (10) 00 00 04 d3 56 00 00 01 
00
Info fld=0x4d356, Current sd0b:00: sense key Medium Error
Additional sense indicates L-EC uncorrectable error
 I/O error: dev 0b:00, sector 1264984
scsi0: ERROR on channel 0, id 4, lun 0, CDB: Read (10) 00 00 04 d3 57 00 00 01 
00
Info fld=0x4d357, Current sd0b:00: sense key Medium Error
 I/O error: dev 0b:00, sector 1264988
This happens with close to EVERY cdrom, and I can always read them perfectly 
in the other drives. Just doing a file-copy from the disk in the scsi drive 
also works. Writing also gives no problems at all.
Strange things are afoot...
DK
-- 
Bradley's Bromide:
	If computers get too powerful, we can organize them into a
committee -- that will do them in.
[unhandled content-type:application/x-gzip]