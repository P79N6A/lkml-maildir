Date: Thu, 4 Sep 2003 00:13:44 +0200 (CEST)
From: Pascal Schmidt <>
Subject: [NFS] attempt to use V1 mount protocol on V3 server
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/9/3/371

Hi!
I don't know whether this is really a problem with the kernel
NFS client - I tried looking at the code but I cannot make too
much sense out of it. ;)
The problem is the following. I have written a user-space NFSv3
server and wanted to register the mount program for version 3 only.
But, this leads to a two problems:
a) when unmounting an NFS volume, the server gets sent an umount
   request indicating version 1 of the protocol, sending a version 3
   umount is not even attempted
b) when something goes wrong during the NFSv3 mount, the kernel
   seems to fall back to NFSv2, re-attempting the mount with mount
   protocol version 1
I think both of this should not be done when the remote side does not
advertise mount protocol version 1 support.
Question: is this a problem of the user-space mount utility or is
it an in-kernel problem?
I've worked around it for the moment by registering for the mount v1
protocol too, handling umount and returning an error if a mount is
attempted. I would it like much more to register for v3 only, though...
-- 
Ciao,
Pascal
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/