Date: Mon, 27 Oct 2003 03:51:37 +0100
From: Matthias Andree <>
Subject: Re: Linux 2.4 <-> 2.6 compatibility
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/10/26/171

On Sun, 26 Oct 2003, Måns Rullgård wrote:
> Matthias Andree <matthias.andree@gmx.de> writes:
> 
> > To enlarge the testing base, it would be good if people could just drop
> > a 2.6 kernel, some user-space updates and then dual-boot 2.4 and 2.6
> > hassle free at will without worrying about a dozen 2.4 kernel patches to
> > make it compatible with the new user space.
> 
> I've been doing that for months.
OK, my SuSE 8.2 box is running LVM2 (with some 2.4 kernel still) now,
two minor pitfalls I encountered:
1. make install mandir=/usr/share/man (automake should really be updated
   to know *that*, most systems use that) - I've just scribbled over
   LVM1 to have the boot scripts in place
2. /etc/init.d/boot.lvm remounts root read-only before using vgchange,
   which no longer works. Patch against SuSE 8.2's lvm-1.0.6-34:
--- /etc/init.d/boot.lvm	2003-10-27 03:49:33.000000000 +0100
+++ /etc/init.d/boot.lvm	2003-10-27 03:05:33.000000000 +0100
@@ -89,12 +89,12 @@
 		test $FSCK_RETURN -gt 0 && touch /fsck_corrected_errors
 		echo "Scanning for LVM volume groups..."
 		/sbin/vgscan
-		mount -n -o remount,ro /
 		echo "Activating LVM volume groups..."
 		/sbin/vgchange -a y $LVM_VGS_ACTIVATED_ON_BOOT
 	        if test -s /etc/pvpath.cfg -a -x /sbin/pvpathrestore; then
 		    /sbin/pvpathrestore
 	        fi
+		mount -n -o remount,ro /
 		rc_status -v -r
 	    fi
 	fi
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/