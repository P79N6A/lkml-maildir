Date: Thu, 07 Dec 2006 13:40:34 -0600
From: "K.R. Foley" <>
Subject: Re: v2.6.19-rt6, yum/rpm
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/12/7/232

Ingo Molnar wrote:
> * K.R. Foley <kr@cybsft.com> wrote:
> 
>> Ingo Molnar wrote:
>>
>> The attached patch is necessary to build 2.6.19-rt8 without KEXEC 
>> enabled. Without KEXEC enabled crash.c doesn't get included. I believe 
>> this is correct.
> 
> ah, indeed. I went for a slightly different approach - see the patch 
> below. Sending an NMI to all CPUs is not something that is tied to 
> KEXEC, it belongs into nmi.c.
> 
> 	Ingo
Much better I think. It still requires the patch below, which includes
mach_ipi.h, to build here.
-- 
   kr
--- linux-2.6.19/arch/i386/kernel/nmi.c.orig	2006-12-07 13:03:12.000000000 -0600
+++ linux-2.6.19/arch/i386/kernel/nmi.c	2006-12-07 13:03:21.000000000 -0600
@@ -30,6 +30,7 @@
 #include <asm/intel_arch_perfmon.h>
 
 #include "mach_traps.h"
+#include <mach_ipi.h>
 
 int unknown_nmi_panic;
 int nmi_watchdog_enabled;