Date: Mon, 13 Sep 1999 11:23:55 +0100
From: "Daniel J Blueman" <>
Subject: kflushd rewrite...
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/9/13/34

Having looked at the source for kflushd, I did a complete re-write offering
significantly less overhead. I am preparing a patch against 2.3.18.
Just a few questions to you all for a few refinements, before I send the
patch to Linus:
 - is the pointer to the buffer head from 'bh = lru_list[n]' a valid
buffer_head? ie can it contain dirty data?
 - is the first buffer_head in the chain, ie bh = lru_list[n] static, and
can we assume no one will move it?
 - is it better to check is a buffer is ready to be written, and write it
before checking if it's on the 'wrong' list and refiling it? (I think this
may avoid a refile if the buffer's status has recently changed)
 - the waking up seems to be hardwired to 5s. Should this delay be pulled
from the bdflush settings? (bdf_prm.b_un.<foo>)
 - what other process fields could benefit from being filled in (eg
current->comm etc) ?
Any feedback on these will help, since I'm going to get this patch out in
the next couple of days, and bury the hatchet.
All replies CC'd to this email address.
Thankx,
        Dan
__________________________
Daniel J Blueman - daniel.j.blueman@stud.umist.ac.uk
Undergraduate - BSc Computing Science
UMIST university - Manchester
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/