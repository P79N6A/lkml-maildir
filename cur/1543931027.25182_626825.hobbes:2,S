Date: Tue, 11 Dec 2007 21:50:32 -0500
From: Dave Jones <>
Subject: Re: [PATCH] fbcon: fix sparse warning about shadowing 'p' symbol
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/12/11/387

On Tue, Dec 11, 2007 at 04:57:00PM -0800, Andrew Morton wrote:
 > > --- a/drivers/video/console/fbcon.c
 > > +++ b/drivers/video/console/fbcon.c
 > > @@ -2795,7 +2795,7 @@ static int fbcon_scrolldelta(struct vc_data *vc, int lines)
 > >  {
 > >  	struct fb_info *info = registered_fb[con2fb_map[fg_console]];
 > >  	struct fbcon_ops *ops = info->fbcon_par;
 > > -	struct display *p = &fb_display[fg_console];
 > > +	struct display *disp = &fb_display[fg_console];
 > 
 > We have a global symbol called "p"?  That would be bad.  Where is it?
in the same function.
We have quite a few shadow warnings in that file.
drivers/video/console/fbcon.c:337:25: warning: symbol '_x' shadows an earlier one
drivers/video/console/fbcon.c:337:25: originally declared here
drivers/video/console/fbcon.c:337:25: warning: symbol '_x' shadows an earlier one
drivers/video/console/fbcon.c:337:25: originally declared here
drivers/video/console/fbcon.c:337:25: warning: symbol '_y' shadows an earlier one
drivers/video/console/fbcon.c:337:25: originally declared here
drivers/video/console/fbcon.c:2813:19: warning: symbol 'p' shadows an earlier one
drivers/video/console/fbcon.c:2798:17: originally declared here
drivers/video/console/fbcon.c:3336:6: warning: symbol 'rotate' shadows an earlier one
drivers/video/console/fbcon.c:150:12: originally declared here
drivers/video/console/fbcon.c:3361:6: warning: symbol 'rotate' shadows an earlier one
drivers/video/console/fbcon.c:150:12: originally declared here
drivers/video/console/fbcon.c:3385:6: warning: symbol 'rotate' shadows an earlier one
drivers/video/console/fbcon.c:150:12: originally declared here
	Dave 
-- 
http://www.codemonkey.org.uk