Date: Thu, 26 Aug 2004 18:52:32 +1000
From: Benjamin Herrenschmidt <>
Subject: [PATCH] ppc32: PowerMac trackpad problems
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/8/26/57

Hi !
The trackpad on recent Apple laptops tend to emmit spurrious 'right clicks'
apparently. This patch from Alex Clausen fixes it, please apply. The trackpad
cannot normally emit a right click, so just filter those out.
Ben.
Signed-off-by: Alexander Clausen <alex@skip86.com>
Signed-off-by: Michael Schmitz <schmitz@opal.biophys.uni-duesseldorf.de>
Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
--- drivers/macintosh/adbhid.c.orig	2004-03-10 23:41:43.000000000 +0100
+++ drivers/macintosh/adbhid.c		2004-03-10 23:41:34.000000000 +0100
@@ -327,7 +327,7 @@
 	input_report_key(&adbhid[id]->input, BTN_LEFT,   !((data[1] >> 7) & 1));
 	input_report_key(&adbhid[id]->input, BTN_MIDDLE, !((data[2] >> 7) & 1));
-	if (nb >= 4)
+	if (nb >= 4 && adbhid[id]->mouse_kind != ADBMOUSE_TRACKPAD)
 		input_report_key(&adbhid[id]->input, BTN_RIGHT,  !((data[3] >> 7) & 1));
 	input_report_rel(&adbhid[id]->input, REL_X,
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/