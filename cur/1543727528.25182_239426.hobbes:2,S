Date: Fri, 06 Aug 2004 14:03:07 +0100
From: Alan Cox <>
Subject: Re: [PATCH] pirq_enable_irq cleanup
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/8/6/95

On Mer, 2004-08-04 at 19:14, agrover wrote:
> Hi, this should apply cleanly against mm2 or rc3.
> 
> This is a cleanup of pirq_enable_irq. I couldn't understand this function easily 
> so I cleaned it up.
> 
> - Hoisted Via quirk to top -- shouldn't break anything but who knows - can someone 
> with this chipset test?
> 
> - Hoisted legacy IDE check too.
This looks odd (its hard to read it in diff format in this case). The
IDE check is only meant to be done if we look for an IRQ and find none.
This tells us the device is only connected for legacy mode.
The VIA one is fairly simple. After the IRQ has been identified or
selected the VIA needs the "true" PCI IRQ number in the IRQ_LINE
register because internal V-Bus devices are routed via IRQ line not via
IRQ pin as the PCI spec says.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/