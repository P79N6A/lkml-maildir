Date: Mon, 8 Nov 2004 09:54:20 +0100
From: Gerd Knorr <>
Subject: [patch] v4l: msp3400 fix
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/11/8/46

Fix for the msp3400 module: make the initial carrier scan
(after loading the driver) work.
Signed-off-by: Gerd Knorr <kraxel@bytesex.org>
---
 drivers/media/video/msp3400.c |    4 +++-
 1 files changed, 3 insertions(+), 1 deletion(-)
diff -u linux-2.6.10/drivers/media/video/msp3400.c linux/drivers/media/video/msp3400.c
--- linux-2.6.10/drivers/media/video/msp3400.c	2004-11-07 12:23:12.256678404 +0100
+++ linux/drivers/media/video/msp3400.c	2004-11-07 16:08:43.247733306 +0100
@@ -1426,6 +1426,8 @@
 static int msp_suspend(struct device * dev, u32 state, u32 level);
 static int msp_resume(struct device * dev, u32 level);
 
+static void msp_wake_thread(struct i2c_client *client);
+
 static struct i2c_driver driver = {
 	.owner          = THIS_MODULE,
 	.name           = "i2c msp3400 driver",
@@ -1550,7 +1552,7 @@
 		msp->kthread = kthread_run(thread_func, c, "msp34xx");
 		if (NULL == msp->kthread)
 			printk(KERN_WARNING "msp34xx: kernel_thread() failed\n");
-		wake_up_interruptible(&msp->wq);
+		msp_wake_thread(c);
 	}
 
 	/* done */
-- 
#define printk(args...) fprintf(stderr, ## args)
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/