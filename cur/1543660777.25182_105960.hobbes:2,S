Date: Mon, 27 Jan 2003 20:12:25 +0100
From: Sam Ravnborg <>
Subject: Re: no version magic, tainting kernel.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/1/27/106

On Mon, Jan 27, 2003 at 10:52:28AM -0800, Jerry Cooperstein wrote:
> The solution
> 
> make -C KERNEL_SOURCE SUBDIRS=$PWD modules
> 
> is fine, but you have to have a Makefile in the current directory,
> and that Makefile needs a somewhat different form for 2.4 and
> 2.5 kernels.
Notes solely to the Kernel 2.5 part of your script:
1) You do not need any targets like all: or mmodules:
2) The clean: rule will not be used in 2.5, use clean-files instead.
3) No reason to special case on .ko or not. .ko will not harm on 2.4
4) I cannot see any reason to declare all OBJS as .PHONY
5) It looks like you try to enable the use of make in the directory
   where the module exists.
   This is an unusual extension, which will clutter up the makefile
   a bit.
   I would prefer a mmake script or similar that did the make -c ... trick.
	Sam
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/