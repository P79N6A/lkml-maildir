Date: Mon, 14 Feb 2000 15:19:37 -0700
From: Ray L <>
Subject: Re: VFS not completely factored
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/2/14/192

hi daniel
On Mon, Feb 14, 2000 at 11:51:33AM -0600, Daniel Phillips wrote:
> This factoring problem can be fixed quite easily and elegantly I think.
> My question is: does anybody besides me see this as something that needs 
> fixing?  Is there some reason I don't know about for vfs to see the 
> headers of every filesystem, and is there a philosophical reason for
> things staying the way they are?
this is only tangentially related, but i did notice this same thing
a few weeks back in another context.
i got curious about the transitive inclusion structure of the linux
header tree.  as a simplistic first cut at understanding it, i threw
a -H into the makefiles, collected the output, ordered the headers by
inclusion count, and plotted the results.
it turns out that my 2.3.38 configuration used 532 headers to build
426 object files.  it also turns out that about 25% of those headers
are included in practically every single object file.  the fs.h tree
forms a pretty good chunk of that 25%.
a quick scan of the raw output shows the following pattern:
 ...
  sched.h
   binfmts.h
    capability.h
     fs.h
      ...
sched.h is included in 406 of the 426 object files, meaning that 406+
of 426 object files in the kernel are including goodies like socket.h,
msdos_fs_i.h, and sunrpc/msg_prot.h. 
again, not sure if it needs fixing, just an observation.
cheers
-- 
-----------------------------------------------------------------------------
  Ray Lehtiniemi (rayl@mail.com) (rayl@optitech.com)
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/