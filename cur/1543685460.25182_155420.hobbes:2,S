Date: Thu, 07 Aug 2003 18:48:16 +0200
From: (Måns Rullgård)
Subject: Re: DMA timeouts on SIS IDE
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/8/7/228

mru@users.sourceforge.net (Måns Rullgård) writes:
>> the lspci output you previously sent confirmed that the SiS IDE driver
>> does set the UDMA timings correctly. Given this is out of the suspects
>> list, I'd advise to :
>>
>> - test the hardware (uneasy on a notebook, 2.5" IDE drives aren't as
>> common as 3.5" ones)
>
> As you say, testing could be tricky.  However, the machine is only
> about one month old, so it shouldn't be dying already.
>
>> - try latest ACPI on sourceforge and enable ACPI in the BIOS if not
>> already done (seems to have helped once :
>> http://marc.theaimsgroup.com/?l=linux-kernel&m=104212864518052&w=4)
>
> patch tells me those are already applied to 2.6.0-test2.  I tried
> booting with pci=noacpi, just in case, but the problem remains.  I
> can't find any BIOS settings relating to ACPI.
The issue is still unresolved.
I noticed that sometimes I also get this in the kernel log:
hda: dma_timer_expiry: dma status == 0x21
hda: DMA timeout error
hda: dma timeout error: status=0xd0 { Busy }
hda: DMA disabled
ide0: reset: success
Loosing too many ticks!
TSC cannot be used as a timesource. (Are you running with SpeedStep?)
Falling back to a sane timesource.
I am not using SpeedStep, so that message must be triggered by the IDE
errors.  The errors only happen when writing very large (hundreds of
megabytes) amounts of data at rate above a few megabytes per second.
It's never happened when just doing normal things like compiling
stuff.
-- 
Måns Rullgård
mru@users.sf.net
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/