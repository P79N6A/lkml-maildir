Date: Mon, 5 Nov 2001 16:12:00 +0000
From: vda <>
Subject: Re: Poor IDE performance with VIA MVP3
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/11/5/271

On Monday 05 November 2001 06:50, Ryan Hayle wrote:
> I have a VIA MVP3 (VT82C586B) controller on my motherboard, and am
> experiencing extremely poor performance with a Maxtor 20G
> (52049U4) drive.  It is an UDMA66-capable drive, but I'm only attempting
> to use UDMA33 (with an 80-pin cable, as recommended).
>
> The drive is detected and works just fine, with no errors reported,
> however the acces is painfully slow.  hdparm -t varries from 970 K/sec to
> 2.5 M/sec. (See below)
Are you saying that hdparm -T -t is yielding wildly varying results?
Looks similar to failing hd symptoms or bug in IDE layer causing retries
after error/timeout. What's in the logs?
> The drive is attached by itself to the first IDE channel.  On the second I
> have a Maxtor 6.8G (90680D4) and a CDROM.  hdparm -t on the second drive
> typically gives 8-9 M/sec.  I manually set this drive with hdparm -X34
> (mdma2), otherwise it generates errors.
>
> I have tried Linux 2.2.19, 2.4.12, and now 2.4.13, and all exhibit this
> same behavior.  I was originally running with a 40-pin cable, and switched
> it to the 80 to see if it might help, but it had no effect.  As some
> background information, I was originally running linux off of the second
> 6G drive, and opted to move it onto the 20G because it got better
> performance.  Once I did this, however, the drive started performing
> slowly like this, regardless of whether I'm booting to it or the 6G
> drive.
>
> Does this sound like it's just a hardware problem?  Has anyone experienced
> anything similar to this?  Any advice would be greatly apreciated.
Well, I had problems with drives refusing to do [u]dma.
On my home machine I found out that compiling kernel with support for VIA 
chipset allowed udma to work ok (hdparm -T -t = ~20mb/s). Without that 
support, my hd was stuck in pio, ~6mb/s.
--
vda
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/