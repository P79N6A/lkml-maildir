Date: Wed, 27 Oct 1999 12:24:14 -0500 (CDT)
From: Thomas Molina <>
Subject: Setting UDMA on ide drives
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/10/27/108

I'm not sure what I'm doing wrong in setting UDMA for my ide drives.
See the following:
/dev/hda:
 setting using_dma to 1 (on)
 HDIO_SET_DMA failed: Operation not permitted
 using_dma    =  0 (off)
[root@wr5z Documentation]# hdparm -d1 /dev/hdb
/dev/hdb:
 setting using_dma to 1 (on)
 HDIO_SET_DMA failed: Operation not permitted
 using_dma    =  0 (off)
Information on both drives seem to indicate this should be possible.
[root@wr5z Documentation]# hdparm -i /dev/hda
/dev/hda:
 Model=SAMSUNG VG34323A (4.32GB), FwRev=GQ101, SerialNo=ST18917092e5b4
 Config={ HardSect NotMFM HdSw>15uSec Fixed DTR>10Mbs }
 RawCHS=14896/9/63, TrkSize=32256, SectSize=512, ECCbytes=21
 BuffType=3(DualPortCache), BuffSize=496kB, MaxMultSect=16, MultSect=off
 DblWordIO=no, maxPIO=2(fast), DMA=yes, maxDMA=2(fast)
 CurCHS=525/255/63, CurSects=-531627904, LBA=yes, LBA=yes,
LBAsects=8446032
 tDMA={min:120,rec:120}, DMA modes: sword0 sword1 sword2 *mword0 mword1
mword2
 IORDY=on/off, tPIO={min:120,w/IORDY:120}, PIO modes: mode3 mode4
 UDMA modes: mode0 mode1 *mode2
[root@wr5z Documentation]# hdparm -i /dev/hdb
/dev/hdb:
 Model=WDC AC14300R, FwRev=15.01J55, SerialNo=WD-WM6260183946
 Config={ HardSect NotMFM HdSw>15uSec SpinMotCtl Fixed DTR>5Mbs
FmtGapReq }
 RawCHS=8912/15/63, TrkSize=57600, SectSize=600, ECCbytes=40
 BuffType=3(DualPortCache), BuffSize=512kB, MaxMultSect=16, MultSect=off
 DblWordIO=no, maxPIO=2(fast), DMA=yes, maxDMA=0(slow)
 CurCHS=524/255/63, CurSects=-2117074816, LBA=yes, LBA=yes,
LBAsects=8421840
 tDMA={min:120,rec:120}, DMA modes: mword0 mword1 *mword2
 IORDY=on/off, tPIO={min:160,w/IORDY:120}, PIO modes: mode3 mode4
 UDMA modes: mode0 mode1 mode2
Could someone provide the clue, or mention TFM to R.  The cable is 14
inches, and adding ide0=dma seems to have no effect.  
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/