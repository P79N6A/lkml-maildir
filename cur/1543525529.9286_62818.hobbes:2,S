Date: Sat, 12 Feb 2000 09:46:57 -0800 (PST)
From: Linus Torvalds <>
Subject: Re: Problems with USB from late 2.3.x kernels and BP6 in MPS 1.4 mode
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/2/12/132

On Fri, 11 Feb 2000, Dunlap, Randy wrote:
> 
> The linux-usb project has had 2-3 reports of USB
> not working on SMP systems if they are in MPS 1.4
> mode (BIOS SETUP option).  The latest report was
> 2000-Feb-4.
> 
> After being changed to MPS 1.1 mode, USB works as expected.
> 
> Does anyone here have any ideas about why this is
> happening and what we can do about it?
It may simply be due to buggy MP tables that Windows knows about (or where
the bugs are such that it just happens to work under Windows - not unheard
of, as Windows and WNT tend to be the only things that gets tested).
However, it may also just be the Linux MP table parsing. The code tries to
find an exact match, and everybody thinks that that is what it should do,
but there has certainly been tables where a fuzzy match of the PCI irq pin
is called for. Maybe this is one of those cases.
It would be good to compile a list of machines, with BIOS, manufacturer
and southbridge information, and see what the pattern is.
Alternatively, there's pre-patch-2.3.44-9 on ftp.kernel.org which corrects
a silly oversight in the fuzzy matching in io_apic.c (the code was there
to do the fuzzy matching, but the fuzzy match was never actually used).
That may or may not help.
If the pre-patch doesn't work, then run the "mptable" application that has
been floating around that parses the MP tables and shows the contents and
vendor information.. (If you don't already have mptable, search for
"mptable.c" on google or other search encgines, you'll find it).
		Linus
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/