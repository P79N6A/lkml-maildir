Date: Wed, 30 May 2007 08:39:03 -0700
From: Ulrich Drepper <>
Subject: Re: Syslets, Threadlets, generic AIO support, v6
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/5/30/258

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1
Ingo Molnar wrote:
> we should perhaps enable glibc to have its separate fd namespace (or 
> 'hidden' file descriptors at the upper end of the fd space) so that it 
> can transparently listen to netlink events (or do epoll),
Something like this would only work reliably if you have actual
protection coming with it.  Also, there are still reasons why an
application might want to see, close, handle, whatever these descriptors
in a separate namespace.
I think such namespaces are a broken concept.  How many do you want to
introduce?  Plus, then you get away from the normal file descriptor
interfaces anyway.  If you'd represent these alternative namespace
descriptors with ordinary ints you gain nothing.  You'd have to use
tuples (namespace,descriptor) and then you need a whole set of new
interfaces or some sticky namespace selection which will only cause
problems (think signal delivery).
> without 
> impacting the application fd namespace - instead of ducking to a memory 
> based API as a workaround.
It's not "ducking".  Memory mapping is one of the most natural
interfaces.  Just because Unix/Linux is built around the concept of file
descriptors does not mean this is the ultimate in usability.  File
descriptors are in fact clumsy: if you have a file descriptor to read
and write data, all auxiliary data for that communication must be
transferred out-of-band (e.g, fcntl) or in very magical and hard to use
ways (recvmsg, sendmsg).  With a memory based event mechanism this
auxiliary data can be stored in memory along with the event notification.
> it is a serious flexibility issue that should not be ignored. The 
> unified fd space is a blessing on one hand because it's simple and 
Too simple.
- --
➧ Ulrich Drepper ➧ Red Hat, Inc. ➧ 444 Castro St ➧ Mountain View, CA ❖
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.7 (GNU/Linux)
iD8DBQFGXZqX2ijCOnn/RHQRAsSFAKCNrd8/sRss1wBA9hkpnYIeALDbXQCfRNAb
yZy2Nofz2CgDo9PQYK3C/bo=
=klUJ
-----END PGP SIGNATURE-----
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/