Date: Mon, 07 Jan 2002 02:09:29 -0800
From: Andrew Morton <>
Subject: Re: 2.4.17 RAID-1 EXT3  reliable to hang....
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/1/7/291

Richard Guenther wrote:
> 
> On Mon, 7 Jan 2002, Oliver Paukstadt wrote:
> 
> > Heavy traffic on ext3 seems to cause short system freezes.
> 
> I see dropped frames while watching TV (bttv chip, xawtv in overlay mode,
> XFree 4.1.0)
> since I use ext3 (2.4.16&17). Always during disk activity (IDE, umask irq
> and dma enabled). From what I know the bttv driver does it seems to loose
> interrupts!? This doesnt happen with ext2.
ext3 never blocks interrupts.  It _may_ cause increased interrupt
latency than ext2 by the very large linear writes which it does.  These
may cause other parts of the kernel to block interrupts for longer.
However, more likely that it's a scheduling latency problem.  Sigh.
I spent *ages* on the ext3 buffer writeout code and it's still not
ideal.  Can you test with this patch applied?
http://www.zipworld.com.au/~akpm/linux/2.4/2.4.18-pre1/mini-ll.patch
It should go into 2.4.17 OK.
> ...
> By any chance, is some global lock held during any IO intensive part of
> ext3?
Yes, a couple.  But on uniprocessor it's more a matter of the kernel
failing to context switch promptly.
-
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/