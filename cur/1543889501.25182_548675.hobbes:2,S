Date: Thu, 24 May 2007 16:27:40 +0200
From: Nicklas Bondesson <>
Subject: Mixing tagged and untagged vlans using via-velocity driver
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/5/24/161

I am trying to setup two vlans (one tagged and one untagged) using the 
native via-velocity driver in kernel 2.6.21.1 on a single nic (VIA 
VT6122 Gigabit).
I can set it up tagged or untagged without any problems, but not both at 
the same time. Is this even possible with this driver?
To enable vlan5 tagging on the nic I have tried the following:
alias eth1 via_velocity
options eth1 enable_tagging=1 VID_setting=5
At this point I can communicate with vlan5. When I try to bring up a 
virtual interface using vconfig it seems to inherit the vlan5 tagging, 
thus making it impossible to communicate with an untagged vlan.
I have also tried the other way around. If I skip "enable_tagging=1 
VID_setting=5", I can communicate with a non tagged vlan. If I bring up 
a new virtual interface (tagged vlan5) using vconfig it does not work.
Could it have something to do with the fact that this card supports vlan 
hw accelleration and upsets vconfig?
I'm stuck. If anyone could shed some light on this it would be greatly 
appreciated.
Nicklas
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/