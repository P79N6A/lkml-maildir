Date: Wed, 16 Feb 2000 19:13:05 +0000
From: Elmer Joandi <>
Subject: Re: SMP, ext2, again: rm: cannot remove file: Input/output error
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/2/16/151

What a hacking-rootkitting if  tar xf does errors and tar xvf doesnt
It is either
    1. kernel dependent behaviour hardware failure
    2. dual celeron dependent SMP kernel failure (other reports were
about dual celeron, too)
------------------
[elmer@dual linux]$ ls -l
ls: utsname.h: Input/output error
ls: un.h: Input/output error
ls: msg.h: Input/output error
ls: tty_flip.h: Input/output error
ls: soundmodem.h: Input/output error
total 0
[elmer@dual linux]$ ls [here I press TAB]
msg.h         soundmodem.h  tty_flip.h    un.h          utsname.h
[elmer@dual linux]$ ls
-------------------
[elmer@dual tmp]$ rm -rf linux.2/
rm: cannot remove `linux.2/mm/page_alloc.c': Input/output error
rm: cannot remove `linux.2/mm/mprotect.c': Input/output error
rm: cannot remove `linux.2/mm/filemap.c': Input/output error
-------------------
So, plz, could anyone give me some points in kernel to write some
asserts or debugs or whatever  to see what is going on.
more testing,
1. single  while true; do bunzip2 < ../linux-2.3.43.tar.bz2 | tar xf - ;
sync; rm -rf linux ; done
doesnt produce that reproducably
2. (while true; do  mkdir jama; dd if=/dev/zero of=jama/jama bs=512
count=100  2> /dev/null ; rm -rf jama ; done ) & also does not
3. Those two in parallel also don't, Two (2) in parallel also dont.
4. single while true; do tar xf ../linux-2.3.43.tar ;sync ; rm -rf linux
; done
    does, and quite immediately .  64MB memory, X+netscape eat 25MB RSS
5. read test , 4 parallel md5sum on 240MB file, OK
6. readwrite test, 4 md5sums + one 60MB file large block write, ok by
reading
7. dd bs=30 count=8000000, two parallel writes and md5sum's, OK
the problematic call:
strace ls --color=auto /home/elmer/tmp/linux/fs/udf/
    lstat("/home/elmer/tmp/linux/fs/udf/super.c", 0xbffff9f0) = -1 EIO
more data (note that those are operations on about 140MB at 64MB ram
station):
[elmer@dual tmp]$ rm -rf linux
[elmer@dual tmp]$ tar xf ../linux-2.3.43.tar
[elmer@dual tmp]$ rm -rf linux
[elmer@dual tmp]$ tar xf ../linux-2.3.43.tar
[elmer@dual tmp]$ rm -rf linux
[elmer@dual tmp]$ tar xf ../linux-2.3.43.tar
[elmer@dual tmp]$ rm -rf linux
[elmer@dual tmp]$ tar xf ../linux-2.3.43.tar
[elmer@dual tmp]$ rm -rf linux
[elmer@dual tmp]$ tar xf ../linux-2.3.43.tar
[elmer@dual tmp]$ sync
[elmer@dual tmp]$ rm -rf linux
rm: cannot remove `linux/fs/romfs/inode.c': Input/output error
rm: cannot remove directory `linux/fs/romfs': Directory not empty
rm: cannot remove `linux/fs/nfsd/export.c': Input/output error
I dont buy the hardware error without very clear evidence, if it would
be a hardware error, then it quite probably would not mainfest itself in
such a very specific manner but would cause different unstabilities.
elmer.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/