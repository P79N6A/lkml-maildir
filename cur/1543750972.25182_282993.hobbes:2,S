Date: Tue, 04 Jan 2005 12:41:18 -0700
From: Bjorn Helgaas <>
Subject: Re: dmesg: PCI interrupts are no longer routed automatically.........
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/1/4/211

On Tue, 2005-01-04 at 13:53 -0500, linux-os wrote:
> I note that pci_enable_device() needs to be executed __before__
> the IRQ is obtained on 2.6.10, otherwise you get the wrong IRQ
> (IRQ10 on this system)B.
Right.
> This doesn't seem to be correct since the IRQ connection was set
> by the BIOS and certainly shouldn't be changed. On this system,
> interrupts that were not shared on 2.4.n and early 2.6.n end
> up being shared... See IRQ18 below.
It's not that we are changing the IRQ, it's just that we now
do the ACPI routing at the time the driver claims the device,
rather than doing all the ACPI routing at boot-time.  The
old strategy messed with IRQs that might never be used (which
broke some things), and also didn't work for hot-plug PCI
root bridges.
Back to my original question, do you have a device that
only works when you use "pci=routeirq"?  If so, what is
it and what driver does it use?
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/