Date: Fri, 15 Nov 2002 05:12:07 +0000
From: John Levon <>
Subject: Re: NMI handling rework for x86
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/11/15/1

On Thu, Nov 14, 2002 at 10:30:16PM -0600, Corey Minyard wrote:
> Since a lot of things are hacking into this code (lkcd, kdb, oprofile, 
> nmi watchdog, and now my IPMI watchdog pretimeout), it would be very 
> nice to get their junk out of this code and allow them to bind in 
> nicely, and allow binding from modules.
I've just noticed you haven't fixed the watchdog vs. oprofile case.  You
pass in the handled flag to the NMI watchdog handler, but you ignore the
value and always do the perfctr reset. You /must/ only do the reset if
handled == false, or you'll screw up oprofile when it's running.
also, the diff would be much easier to read as a separate "mv nmi.c
nmi_watchdog.c" then diff against that
regards
john
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/