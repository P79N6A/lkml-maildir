Date: Wed, 1 Dec 2004 14:27:10 +0100
From: Ingo Molnar <>
Subject: [patch] Real-Time Preemption, -RT-2.6.10-rc2-mm3-V0.7.31-17
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/12/1/66

* Wen-chien Jesse Sung <jesse@cola.voip.idv.tw> wrote:
> I redo the test with a vanilla 2.6.10-rc2-mm3-V0.7.31-16 again, and it
> still hangs at hwclock. Here's the complete config file.
ok, could you try the -17 kernel i've just uploaded to the usual place:
    
http://redhat.com/~mingo/realtime-preempt/
does this fix the lockup?
i believe the lockup is an interesting side-effect of threading IRQ#0:
any code within the kernel that loops on jiffies will produce a lockup,
because it starves the timer IRQ thread.
The RTC driver had two such places, but i also found one in the
IRQ-autodetect code. We want to eliminate such code anyway, and a lockup
is certainly an effective way to detect it ;)
to debug such lockups in the future you can do:
	echo 1 > /proc/sys/kernel/debug_direct_keyboard
	/sbin/hwclock ...
and use the sysrq keys to get a stack dump of the lockup. NOTE: dont use
the keyboard in this mode for too long, it can lock up.
	Ingo
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/