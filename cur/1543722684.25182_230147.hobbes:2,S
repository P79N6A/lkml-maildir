Date: Fri, 25 Jun 2004 07:02:14 -0700 (PDT)
From: Dmitry Torokhov <>
Subject: Re: Continue: psmouse.c - synaptics touchpad driver sync problem
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/6/25/2

Marc Waeckerlin wrote:
> Am Donnerstag, 24. Juni 2004 18.11 schrieb Dmitry Torokhov unter "RE:
> Continue: psmouse.c - synaptics touchpad driver sync problem":
> > You still need to use "dmesg -s 100000" even if you specifie logbuf_len.
> > Anyway, the data probably goes into /var/log/messages as well... If it
> is
> > there please send it my way (not on the list). I should be able to
> handle
> > 100K e-mail.
> 
> Of course, but there are still no other lines left...
> 
> I don't know how big I'd have to set the buffer, but I tried to set it to
> 2^25
> (~33E6), but then the buffer seems to be reset to default? What's the
> limit?
> 
> See the attachment for the 1E5 buffer.
> 
Still don't have the initialization part... Is there any way you could
make your /var/log/messages file accessible via ftp or http?
Anyway, I also have a tiy patch to try out (attached, not tested/
not compiled). Please let me know how ifit makes any improvement.
Thank you.
--
Dmitrydiff -urN 2.6.7/drivers/input/serio/i8042.c linux-2.6.7/drivers/input/serio/i8042.c
--- 2.6.7/drivers/input/serio/i8042.c	2004-06-23 15:09:26.091494400 -0500
+++ linux-2.6.7/drivers/input/serio/i8042.c	2004-06-25 08:51:48.125136000 -0500
@@ -406,12 +406,12 @@
 	if (i8042_mux_values[0].exists && (str & I8042_STR_AUXDATA)) {
 
 		if (str & I8042_STR_MUXERR) {
+			printk(KERN_INFO "i8042.c: MUX reports error condition %02x\n", data);
 			switch (data) {
 				case 0xfd:
 				case 0xfe: dfl = SERIO_TIMEOUT; break;
 				case 0xff: dfl = SERIO_PARITY; break;
 			}
-			data = 0xfe;
 		} else dfl = 0;
 
 		dbg("%02x <- i8042 (interrupt, aux%d, %d%s%s)",