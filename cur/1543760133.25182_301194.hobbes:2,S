Date: Wed, 9 Mar 2005 09:43:47 -0500
From: "Bagalkote, Sreenivas" <>
Subject: RE: [ANNOUNCE][PATCH 2.6.11 2/3] megaraid_sas: Announcing new mod  ule  for LSI Logic's SAS based MegaRAID controllers
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/3/9/130

>> 
>> I will make this an instance parameter if the idea to reduce as many
>> global variables as possible. But if the objection is because each
>> adapter
>> may have different value for variable, then it is indeed a global
>> value.
>> "is_dma64" - which is computed using the size of dma_addr_t - is
>> telling
>> something about the kernel rather than the controller feature.
>> 
>
>then having it as variable sounds really really wrong; the size of
>dma_addr_t is a compile time property...
>(and why do you care about it? you see high dma addresses when 
>they come
>in, right?)
>
During the module load time, I allocate 32 bit or 64 bit SGLs based on
whether I can receive 64 bit DMA addresses or not. If size of dma_addr_t
is 4, then I allocate only 32 bit SGLs. During the run time, I prepare 
32/64 bit SGLs based on this variable. And since this is compile time
system-wide property, I kept it as driver global.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/