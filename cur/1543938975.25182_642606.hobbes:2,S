Date: Thu, 24 Jan 2008 15:14:09 +0200
From: "Pekka Enberg" <>
Subject: Re: [PATCH] Missing usb_find_device symbol from usb.c
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/24/111

Hi,
On Jan 24, 2008 2:58 PM, Oliver Neukum <oliver@neukum.org> wrote:
> So we put it into drivers/usb/misc
> Does that change the code?
Yes. It's assumes only one device is plugged in.
On Jan 24, 2008 2:58 PM, Oliver Neukum <oliver@neukum.org> wrote:
> How do you make a block device on top of this device? It has no notion
> of reading/writing arbitrary blocks. It operates on files.
So you don't make it a block device which is even simpler. Now
get_sb_bdev() will fail before attempting to read the superblock. In
iriverfs, we only need to check for USB_DEVICE_MAJOR and then look up
struct usb_device to make sure we're allowed to mount.
                        Pekka