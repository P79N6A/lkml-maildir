Date: Thu, 31 Jan 2008 11:12:05 -0800
From: Yinghai Lu <>
Subject: Re: PATCH] x86_64: fix comments in vmlinux_64.lds
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/31/359

On Thursday 31 January 2008 04:35:03 am Ingo Molnar wrote:
> 
> * Yinghai Lu <Yinghai.Lu@Sun.COM> wrote:
> 
> >  ENTRY(startup_64)
> >  SECTIONS
> >  {
> > -	/* Be careful parts of head_64.S assume startup_64 is at
> > +	/* Be careful parts of head_64.S assume startup_32 is at
> >  	 * address 0.
> >  	 */
> >  	. = 0;
> 
> but this linker script rule is about startup_64, not about startup_32.
> 
> startup_32 does exist on 64-bit too (and is 32-bit code), but it's 
> linked to a different address that is not 0:
> 
>  ffffffff806c23c0 r startup_32
> 
> startup_64 is at offset 0:
> 
>  ffffffff80200000 T startup_64
> 
> So your patch looks wrong to me.
there are several startup_32 in 64 bit
1. one is for bzImage, it is arch/x86/boot/compressed/head_64.S, and it said startup_64 will at 0x200. that what i mean
2. one is vmlinux in linux-2.6/ , it is in arch/x86/kernel/trampoline_64.S  it is for AP trampoline and wake up. that is what you mean
actually there was another one in arch/x86_64/kernel/head_64.S, and it was removed when Eric made linux-2.6/vmlinux to be 64bit elf. 
So that patch is needed.
YH