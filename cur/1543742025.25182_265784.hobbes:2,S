Date: Thu, 28 Oct 2004 22:47:04 +0800
From: Michael Clark <>
Subject: Re: 2.6.9 page allocation failure. order:0, mode:0x20
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/10/28/171

On 10/28/04 22:11, Michael Clark wrote:
> On 10/28/04 17:40, Andrew Morton wrote:
>>
>> I'm confused.  2.6.9 uses __GFP_NOWARN in add_to_swap() so the messages
>> should be suppressed.  Are you sure you're using 2.6.9?
> 
> 
> Ya is 2.6.9, has uml-skas patch also but that doesn't touch swap_state.c
> 
> Ah, I see I think, radix_tree_node_alloc first calls kmem_cache_alloc
> with root->gfp_mask and only if this fails dips into the preloaded
> percpu node stash. Perhaps root->gfp_mask has !__GFP_NOWARN
> 
> Shouldn't it use the preloaded nodes that have been reserved anyway.
 From my other traces - looks like as_get_io_context also needs to use
__GFP_NOWARN in get_io_context as a NULL return appears to be handled.
This is the only other noise i'm getting in my tests.
~mc
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/