Date: Fri, 19 Sep 2003 09:11:54 +0100
From: Dominic Robinson <>
Subject: 2.4.22 multicast address problem, pcap workaround
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/9/19/34

Please cc to d.robinson@videonetworks.com
My source machine sends multicast packets on all the following
addresses: 230.1.1.1, 230.1.1.2 through to 230.1.1.64
My target machine (on local network, or with cross-over cable)
joins all these multicast groups, and receives packets on all
of these addresses EXCEPT 230.1.1.18 and 230.1.1.32.  
However, if I run tcpdump at the same time as my program, I
find my program suddenly starts receiving on 230.1.1.[18,32]
If I kill tcpdump, my program stops receiving.  It's the
"pcap_open_live()" function in tcpdump which causes this, 
and as a workaround I just call it direct in my receiver.
Could this be a bug in the multicast kernel code?
NOTES: 
(1) 230.1.1.1 to 230.1.64.1 and 230.1.1.1 to 230.64.1.1
    has the same problem.
(2) 230.1.1.1 to 230.1.1.63 works
(3) 230.1.1.1 to 230.1.1.128 fails with slightly different
    behaviour
(4) It makes no difference if I run a single program 
    listening on all addresses, or 64 individual programs
    each listening on a single address.
Thanks and regards,
Dominic
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/