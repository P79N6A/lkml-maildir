Date: Wed, 28 Nov 2007 17:41:11 +0000
From: Russell King <>
Subject: Re: [2.6 patch] some overdue I2C driver removal
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/11/28/222

On Wed, Nov 28, 2007 at 11:23:57AM +0100, Jean Delvare wrote:
> There's no driver to write (i2c-gpio is the driver). Instead, the
> scx200 platform needs to implement the standard GPIO API. I don't think
> that it has happened yet, and last time this was discussed, someone
> (can't remember who, sorry), complained that the GPIO API "sucked" and
> that the scx200 platform would not be updated to use it. I didn't buy
> the claim due to a lack of argumentation and the fact that the GPIO
> infrastructure seems to work well enough for many other platforms.
There's actually a number of people who aren't thrilled by the concept
of a GPIO API.  The current API is quite limiting in that it isn't
actually a "generic" GPIO API - you can't address GPIOs on a GPIO
expander with it for instance.
Some of those issues are in the process of being resolved, but I
suspect that this is a classic case where you can not satisfy everyone.
There'll always be people who refuse to use whatever GPIO API.
> As far as I can see, the ixp2000 platform also doesn't implement the
> standard GPIO API yet, so of the 3 drivers that are about to be
> removed, only i2c-ixp4xx can be removed without functionality loss at
> the moment. Lennert, Russell, are there any plans to convert the
> ixp2000 platform to use the generic GPIO layer?
It's really for Lennert to comment on; while you may consider I'm the
overall ARM maintainer, that doesn't mean that I have access to the
entire set of ARM hardware.  Bit like expecting Linus to write working
drivers for SH4 without ever having had a SH4 platform... ;)
> Maybe I shouldn't have added this entry in feature-removal-schedule.txt
> in the first place: these drivers should ideally be dropped in favor of
> i2c-gpio, but it can only happen for platforms that implement the
> standard GPIO API.
... especially as those who need to comment on it don't get to see
Adrian's patches to remove them.
I think it's quite wrong to mark something "obsolete" and scheduling
it for removal unless there's an actual functioning replacement.
-- 
Russell King
 Linux kernel    2.6 ARM Linux   - 
http://www.arm.linux.org.uk/
 maintainer of:
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/