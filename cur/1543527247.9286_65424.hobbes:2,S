Date: Thu, 24 Feb 2000 12:13:43 +0000 (GMT)
From: "Stephen C. Tweedie" <>
Subject: Re: mmap/munmap semantics
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/2/24/58

Hi,
On Thu, 24 Feb 2000 03:35:02 +0100, Jamie Lokier
<lk@tantalophile.demon.co.uk> said:
> I don't think MADV_DONTNEED actually drops privately modified data does
> it?  
Yes, it does.  From the DU man pages:
      MADV_DONTNEED
                      Do not need these pages
                      The system will free any whole pages in the specified
                      region.  All modifications will be lost and any swapped
                      out pages will be discarded.  Subsequent access to the
                      region will result in a zero-fill-on-demand fault as
                      though it is being accessed for the first time.
                      Reserved swap space is not affected by this call.
Regarding the other half of the problem --- zeroing out a portion of a
file without further IO --- the splice code I hope to have using kiobufs
in 2.5 will allow this to be done very easily.  You'll be able to take a
region of /dev/zero and splice it into your open file with zero-copy.
--Stephen
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/