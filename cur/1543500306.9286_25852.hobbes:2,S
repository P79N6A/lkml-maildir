Date: Wed, 23 Jun 1999 21:32:39 -0400 (EDT)
From: Nate Riffe <>
Subject: Re: Why Linux is doomed (was: Re: FENRIS (nwfs) 1.4.2 Source Code Available)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/6/23/262

On 23 Jun 1999 leitner@convergence.de wrote:
> 
> Let me reiterate some things that happened to me recently:
> 
> Management summary: stuff like this sucks.  I am but a programmer with a
> SMP box that likes to run the latest kernel.  And yes, I expect all the
> kernels to compile out of the box.  I don't think that this is too much
> to ask.
So you have simple compilation problems with the kernel and you're a
programmer?  Let it be known that the people who have problems are
generally the ones who fix problems.  You are capable of fixing, so do so
and send patches.  Here's one I did recently to make nfs work as a module
in 2.3.6:
==========================CUT====================
diff -urN linux/arch/i386/kernel/i386_ksyms.c linux-2.3.6/arch/i386/kernel/i386_ksyms.c
--- linux/arch/i386/kernel/i386_ksyms.c	Mon May 10 13:32:45 1999
+++ linux-2.3.6/arch/i386/kernel/i386_ksyms.c	Mon Jun 21 23:30:47 1999
@@ -48,6 +48,7 @@
 EXPORT_SYMBOL_NOVERS(__up_wakeup);
 /* Networking helper routines. */
 EXPORT_SYMBOL(csum_partial_copy);
+EXPORT_SYMBOL(csum_partial_copy_generic);
 /* Delay loops */
 EXPORT_SYMBOL(__udelay);
 EXPORT_SYMBOL(__delay);
diff -urN linux/kernel/ksyms.c linux-2.3.6/kernel/ksyms.c
--- linux/kernel/ksyms.c	Sun Jun 20 22:47:31 1999
+++ linux-2.3.6/kernel/ksyms.c	Tue Jun 22 00:12:05 1999
@@ -102,6 +102,9 @@
 EXPORT_SYMBOL(kfree_s);
 EXPORT_SYMBOL(vmalloc);
 EXPORT_SYMBOL(vfree);
+EXPORT_SYMBOL(page_hash_table);
+EXPORT_SYMBOL(page_cache_size);
+EXPORT_SYMBOL(__wait_on_page);
 EXPORT_SYMBOL(mem_map);
 EXPORT_SYMBOL(remap_page_range);
 EXPORT_SYMBOL(max_mapnr);
===========================CUT=====================
Now was that so hard?  No, of course not.  You can do it too.  And if
_you_ do to, then someone else doesn't have to.
> Nowadays, people do not compile their kernels anymore.
Everyone except you and me I guess.
> I can practically see before my mental eyes a Microsoft sales weasel
> showing people "make config" and then compiling a kernel where FAT
> does not compile!  I mean, just the normal compilation messages look
> like martian cryptography to normal people, but if you tell them "see,
> now it broke", _nobody_ in the audience will actually tell you "but
> you have the source, you can fix it if you are smart enough".
I suppose LKML qualifies as an audience and surely there are Microsoft
"sales weasels" listening, so I take it unto myself as a member of this
audience to speak up and say to you:
You have the source, you can fix it if you are smart enough.
> Thus, I propose these changes:
>
>   1. No More Function Renaming.
No.  Read on, the rationale is about 20 lines ahead.
>      People are actually using your test kernels.
>      Yes, you warned them, but what does that help the user?
Nothing more can be done without compromising the bazaar style of
developement[1].  Withholding test kernels and only releasing production
code would neglect one of open source's biggest advantages.
[1] Raymod, Eric S. "The Cathedral and the Bazaar"
>      I, for example, have to use a 2.3 kernel, because the 2.2 kernel
>      just freezes when I NFS-mount my laptop.
There are many 2.2 kernels and will be many more.  Try a different one.
>   2. No more incompatible changes.
No.  Incompatible changes are a part of developement.  Sometimes it's
about fixing old design mistakes, sometimes it's about creating a new more
useful abstraction (which you've asked for in your next bullet point),
sometimes it's some other issue.  Incompatible changes are a reality that
will not go away.
>      time.  But if you rename(!) a function in the kernel, is it too
>      much to ask to do a global search-and-replace in the rest of the
>      kernel?
Perhaps it is.  Such an operation is certainly suseptible to error.
Suppose someone renames foo to bar and does a search and replace on the
whole source.  Now every occurrence of foo_baz has been renamed to
bar_baz, which was completely unintended.
>   3. Create some decent abstractions.
You claim to be a programmer.  Patch and ye shall receive.
>   4. When you do a change in the kernel, DOCUMENT IT.
I superficially agree, but when it comes to documentation, do you have the
patience?  If you did I suspect you'd have been patching the Documentation
tree all along.  Do not expect of others what you do not expect of
yourself.
>      Let's create a new directory, Documentation/incompatible-changes.
Sounds nice.  Send a patch (with a README in it, of course).
Nate
> 
> Felix
> 
> -
> To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
> the body of a message to majordomo@vger.rutgers.edu
> Please read the FAQ at 
http://www.tux.org/lkml/
> 
------------------------------------------------((\))<----------------------
Nate Riffe			Duct tape by any other name is just as
inkblot@geocities.com		sticky.
-----BEGIN GEEK CODE BLOCK-----
Version: 3.12
GCS/IT/M/S/O d-@ s-:- a--->- C++ UL++++BS++>$ P+>+++ L+++>+++++$ W+ N !o
K- w(---)$>-- M-(--) V(--) PS+ PE Y+ PGP>++ t(+)@ 5 X@ R tv>! b+>+++ DI++
D e>++(+++) h r++ y?
------END GEEK CODE BLOCK------
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/