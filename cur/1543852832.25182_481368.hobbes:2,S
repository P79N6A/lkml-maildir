Date: Fri, 10 Nov 2006 22:52:57 -0800
From: Andrew Morton <>
Subject: Re: XFS filesystem performance drop in kernels 2.6.16+
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/11/11/10

On Fri, 10 Nov 2006 16:16:27 +0300
"Igor A. Valcov" <viaprog@gmail.com> wrote:
> Below is a simplified version of the test program,
Boy, I hope not.  The results of this test program are of very little interest.
>     for (i = 0; i < 262144; i++) {
>         /* Write data to a big file */
>         write (nFiles [0], buf, __BYTES);
> 
>         /* Write data to small files */
>         for (f = 1; f < __FILES; f++)
>             write (nFiles [f], &f, sizeof (f));
>     }
This sits in a loop doing write(fd, buf, 4).  This is wildly inefficient -
you'd get a 10x throughput benefit and maybe 100x reduction in CPU cost
simply by switching to fwrite().
I suspect something went wrong here.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/