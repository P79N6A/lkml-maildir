Date: Thu, 14 Sep 2000 12:49:22 +0200
From: Meelis Roos <>
Subject: Re: ISSUE: Linux bug/restriction prevents multicast participation
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/9/14/155

MD> Full description: Multicast standards prescribe that the port range
MD> 49152-65535 be used for video traffic.  From my observations, Linux does not
MD> allow user processes to use multicast sessions with ports 61000+, and
MD> therefore Linux can not participate in many multicast video sessions.  Since
MD> unicast sockets can't bind to the port range either, I'm assuming that this
MD> port range was reserved with some purpose in mind (IP masquerading?), but
MD> regardless this restriction is being inappropriately applied to the class-D
MD> multicast range.
Yep, Linux resrves 61000+ range to IP masquerading. Since you can't use
masquerading and multicast on the same host (1), you actually want to use
kernel without IP masq support for normal workstations that use multicast and
kernel with IP masq for masquerading gateways. This is a kernel compilation
option as of now (2). Since there are more routers that possibly need
masquerade than there are multicast clients, the default by distros seems to be
to compile in multicast.
(1) I've done merging masquerading and multicast for a linux gateway (yes,
masqueraded multicast on the outgoing direction) but this is not doable in
stock kernel and it's a ugly hack when done. But I was stopped by the same
restriction and asked everybody on the local multicast network to not use ports
above 61000 (not a viable solution in global space).
(2) A wild idea: only allocate high port numbers to masquerade _AFTER_
masquerading is first enabled after boot. This is a win-win: those who want
high ports do not want masquerade and they can get their ports then. Those who
want to compile in masquerade by default can do this safely. It really looks a
good idea to me.
-- 
Meelis Roos (mroos@linux.ee)
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/