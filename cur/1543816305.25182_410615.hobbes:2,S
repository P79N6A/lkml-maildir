Date: Fri, 24 Mar 2006 11:35:02 -0800
From: "Randy.Dunlap" <>
Subject: Re: [BLOCK] delay all uevents until partition table is scanned
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/3/24/276

On Fri, 24 Mar 2006 20:17:48 +0100 Kay Sievers wrote:
> From: Kay Sievers <kay.sievers@suse.de>
> 
> [BLOCK] delay all uevents until partition table is scanned
> 
> +	/* scan partition table, but supress uevents */
> +	disk->part_uevent_supress = 1;
> +	err = blkdev_get(bdev, FMODE_READ, 0);
> +	disk->part_uevent_supress = 0;
s/supress/suppress/ please.
> diff --git a/include/linux/genhd.h b/include/linux/genhd.h
> index eef5ccd..089bb01 100644
> --- a/include/linux/genhd.h
> +++ b/include/linux/genhd.h
> @@ -104,6 +104,7 @@ struct gendisk {
>                                           * disks that can't be partitioned. */
>  	char disk_name[32];		/* name of major driver */
>  	struct hd_struct **part;	/* [indexed by minor] */
> +	int part_uevent_supress;
---
~Randy
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/