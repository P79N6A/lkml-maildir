Date: Thu, 19 Feb 2004 03:25:46 +0100
From: Herbert Poetzl <>
Subject: v850 ptrace.c bug ...
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/2/18/346

Hi!
stumbled over the following bug: 
sys_ptrace() for v850, if pid == 1, doesn't put the
struct task_struct (child), the following patch
should fix that ...
best,
Herbert
--- linux-2.6.3/arch/v850/kernel/ptrace.c.orig	2004-02-18 04:58:01.000000000 +0100
+++ linux-2.6.3/arch/v850/kernel/ptrace.c	2004-02-19 03:02:43.000000000 +0100
@@ -138,7 +138,7 @@ int sys_ptrace(long request, long pid, l
 
 	rval = -EPERM;
 	if (pid == 1)		/* you may not mess with init */
-		goto out;
+		goto out_tsk;
 
 	if (request == PTRACE_ATTACH) {
 		rval = ptrace_attach(child);
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/