Date: Sat, 17 Jan 2009 18:22:11 -0600
From: Robert Hancock <>
Subject: Re: Checking module parameters
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2009/1/17/187

David Wagner wrote:
> Is there a way to tell what options have been applied to a currently
> loaded kernel module?
> 
> I'm trying to force libata to use 1.5Gbps rather than 3Gbps, so I created
> a file /etc/modprobe.d/local containing:
>   options libata force=1.5Gbps
> However my SATA drive gets loaded at 3Gbps.  I'm trying to figure out how
> to debug this so that I can tell whether the option got correctly applied
> to the libata module, and if not, how to force the SATA link to 1.5Gbps.
> Any suggestions or ideas?
> 
> (I can't set libata.force=1.5Gbps as a kernel argument because on my
> Fedora kernel, libata is loaded as a module rather than built into the
> kernel.  I can't run "modprobe libata force=1.5Gbps" by hand because
> I've got SATA drives, so the libata module is automatically loaded before
> I get shell access.)
Rebuilding the initrd with that option set should cause the initrd to 
pass the option into the libata module when the initrd script loads it. 
Unfortunately the current Fedora mkinitrd is broken such that this 
doesn't work. I'm rather disappointed by the lack of response to this 
bug as it seems like it should be easily resolved and causes serious 
problems with debugging certain issues, as you've found. Anyone know who 
needs to be hit with a clue-by-four to get this fixed?
https://bugzilla.redhat.com/show_bug.cgi?id=457870