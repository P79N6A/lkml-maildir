Date: Wed, 2 Mar 2005 11:51:43 -0500 (EST)
From: linux-os <>
Subject: Patch Linux-2.6.11 jiffies.h uses shadowed variable names.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/3/2/130

The attached patch was sent for 2.6.10 but the kernel was
never updated. The kernel used to be compiled with -Wshadow
and would catch these problems. It no longer is (and it
should be).
I attached it so the M$ mail-sender doesn't dork with
white-space.
Signed Off By: rjohnson@analogic.com
Cheers,
Dick Johnson
Penguin : Linux version 2.6.11 on an i686 machine (5537.79 BogoMips).
  Notice : All mail here is now cached for review by Dictator Bush.
                  98.36% of all statistics are fiction.--- linux-2.6.11/include/linux/jiffies.h.orig	2005-03-02 11:29:27.000000000 -0500
+++ linux-2.6.11/include/linux/jiffies.h	2005-03-02 11:36:05.000000000 -0500
@@ -328,13 +328,13 @@
 }
 
 static __inline__ void
-jiffies_to_timespec(const unsigned long jiffies, struct timespec *value)
+jiffies_to_timespec(const unsigned long jif, struct timespec *value)
 {
 	/*
 	 * Convert jiffies to nanoseconds and separate with
 	 * one divide.
 	 */
-	u64 nsec = (u64)jiffies * TICK_NSEC;
+	u64 nsec = (u64)jif * TICK_NSEC;
 	value->tv_sec = div_long_long_rem(nsec, NSEC_PER_SEC, &value->tv_nsec);
 }
 
@@ -366,13 +366,13 @@
 }
 
 static __inline__ void
-jiffies_to_timeval(const unsigned long jiffies, struct timeval *value)
+jiffies_to_timeval(const unsigned long jif, struct timeval *value)
 {
 	/*
 	 * Convert jiffies to nanoseconds and separate with
 	 * one divide.
 	 */
-	u64 nsec = (u64)jiffies * TICK_NSEC;
+	u64 nsec = (u64)jif * TICK_NSEC;
 	value->tv_sec = div_long_long_rem(nsec, NSEC_PER_SEC, &value->tv_usec);
 	value->tv_usec /= NSEC_PER_USEC;
 }