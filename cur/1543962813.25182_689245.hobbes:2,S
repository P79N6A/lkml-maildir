Date: Sun, 4 May 2008 19:20:23 +0200
From: Ingo Molnar <>
Subject: Re: build issue #487 for v2.6.26-rc1-6-gafa26be :undefined reference to `es7000_plat'
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/5/4/199

* Toralf F?rster <toralf.foerster@gmx.de> wrote:
> Hello,
> 
>   LD      init/built-in.o
>   LD      .tmp_vmlinux1
> arch/x86/mach-generic/built-in.o: In function `es7000_rename_gsi':
> es7000plat.c:(.text+0xb52): undefined reference to `es7000_plat'
fix for that got queued in x86.git yesterday - see below.
	Ingo
------------------->
Subject: x86: es7000 build fix
From: Ingo Molnar <mingo@elte.hu>
Date: Sat May 03 22:01:31 CEST 2008
Signed-off-by: Ingo Molnar <mingo@elte.hu>
Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
---
 arch/x86/kernel/mpparse.c |    7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)
Index: linux-x86.q/arch/x86/kernel/mpparse.c
===================================================================
--- linux-x86.q.orig/arch/x86/kernel/mpparse.c
+++ linux-x86.q/arch/x86/kernel/mpparse.c
@@ -794,6 +794,11 @@ void __init find_smp_config(void)
                             ACPI-based MP Configuration
    -------------------------------------------------------------------------- */
 
+/*
+ * Keep this outside and initialized to 0, for !CONFIG_ACPI builds:
+ */
+int es7000_plat;
+
 #ifdef CONFIG_ACPI
 
 #ifdef	CONFIG_X86_IO_APIC
@@ -909,8 +914,6 @@ void __init mp_override_legacy_irq(u8 bu
 	MP_intsrc_info(&intsrc);
 }
 
-int es7000_plat;
-
 void __init mp_config_acpi_legacy_irqs(void)
 {
 	struct mpc_config_intsrc intsrc;