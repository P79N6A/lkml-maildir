Date: Wed, 24 Mar 2004 09:17:25 +1100
From: Nathan Scott <>
Subject: Re: 2.4.26-pre5: XFS module link errors on PPC
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/3/23/159

On Tue, Mar 23, 2004 at 07:20:05PM +0200, Meelis Roos wrote:
> I tried to make enamble a modular XFS on my PPC using current linux-2.4
> bitkeeper snaphot. Unfortunately, there are unresolved symbols in xfs
> module:
> 
> depmod: *** Unresolved symbols in /lib/modules/2.4.26-pre5/kernel/fs/xfs/xfs.o
> depmod:         ioremap_bot
> depmod:         vmalloc_start
> 
> XFS works fine when compiled in statically.
> 
Looks like XFS is picking them up via VMALLOC_START and VMALLOC_END
which are usually constants, but looks like these map to a couple
of global variables on PPC.  This should fix it, but I haven't got
a machine handy to test with...
cheers.
-- 
Nathan
--- arch/ppc/kernel/ppc_ksyms.c.orig	2004-03-24 09:04:15.000000000 +1100
+++ arch/ppc/kernel/ppc_ksyms.c	2004-03-24 09:07:20.000000000 +1100
@@ -161,6 +161,8 @@
 EXPORT_SYMBOL(_outsl_ns);
 EXPORT_SYMBOL(iopa);
 EXPORT_SYMBOL(mm_ptov);
+EXPORT_SYMBOL(vmalloc_start);
+EXPORT_SYMBOL(ioremap_bot);
 EXPORT_SYMBOL(ioremap);
 #ifdef CONFIG_PTE_64BIT
 EXPORT_SYMBOL(ioremap64);
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/