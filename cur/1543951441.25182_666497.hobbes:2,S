Date: Tue, 11 Mar 2008 18:23:18 -0700
From: Max Krasnyansky <>
Subject: boot cgroup questions
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/3/11/445

Folks,
Concept of 'boot' cgroup was discussed as part of the cpuset/cpuisol lkml threads.
In short 'boot' group is very much like the 'root' or toplevel group. ie It
contains all tasks, and 'boot' cpuset contains all cpus, mem nodes, irqs, etc.
The difference is that it can be easily shrunk if needed, where as
toplevel/root group cannot.
I just wanted to make sure that we still want to create 'boot' cgroup during
kernel init instead of doing it in the user-space.
After looking into this a little bit I'm thinking of creating 'boot' cgroup
right after cpuset_init_smp() (init/main.c:841). Just before do_basic_setup()
which creates work queues and stuff.
The thing is though that the very next thing we do there is run early
userspace. Which begs the question, shouldn't we just do it from early
user-space then ?
It'd be very simple to mount cgroup, create 'boot' group and move all the
tasks in there.
So kernel or early-userspace ?
If kernel.
Paul M, do you have a suggestion as to what's the best way of creating a
cgroup without mounting cgroup fs. Seems like there is currently no easy way
for doing that. I probably missed it.
Thanx
Max