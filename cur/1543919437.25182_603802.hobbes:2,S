Date: Thu, 11 Oct 2007 14:47:50 +0100
From: Andy Whitcroft <>
Subject: Re: [PATCH] 0/3 checkpatch updates, new checkfiles script
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/10/11/160

On Sun, Oct 07, 2007 at 03:05:47PM -0400, Erez Zadok wrote:
> 
> and got many perl warnings such as:
> 
> Use of uninitialized value in concatenation (.) or string at ./scripts/checkpatch.pl line 455.
Yes, this support seems to be wholy broken, as a non emacs user I had
failed to test it correctly as I added the --file option.  Bad Andy.
In testing it I note we are emitting wholy the wrong line number, and
the filename was off as you fixed up in your patch.
> followed by the usual verbose error message instead of one-per-line as I
> assume the --emacs option is supposed to produce:
> 
> :2823: WARNING: EXPORT_SYMBOL(foo); should immediately follow its function/variable
> #2823: FILE: namei.c:2820:
> +EXPORT_SYMBOL(vfs_mkdir);
> 
> BTW, calling the option --emacs is a bit too restrictive.  Emacs didn't
> invent the format of "filename:linenumeber:message".  C compilers had it
> before.  Even "grep -n *" had it before.  That's why I think calling it a
> "terse output" option may be more accurate.
> 
> The following small patch to checkpath.pl-next seems to fix the perl
> warnings, but it still outputs the long error messages along with the
> shorter one-liners.
As I understand things this is called emacs mode because the emacs
buffer mode expects the filename:line:message format with the long error
to follow.  It seems pretty emacs specific.  So for now I'll leave it
named that.  If people convince me its --compiler-format or something we
can add that as an alias later.
I have hopefully sorted the main problems with it and will push out an
update for testing.
-apw
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/