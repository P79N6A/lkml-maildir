Date: Fri, 29 Oct 2004 20:23:57 -0700
From: Greg KH <>
Subject: Re: [patch] PCI: Add is_bridge to pci_dev to allow fixups to disable bridge functionality.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/10/30/122

On Tue, Oct 19, 2004 at 12:22:49PM +0100, David Vrabel wrote:
> Hi,
> 
> This patch allows device fixups to force the PCI subsystem to ignore 
> bridges and hence not allocate resources to them.
> 
> I have an IXP425 (ARM) board with a CardBus controller on it (of which 
> only the PC card interfaces are used).  The problem is that the PCI 
> memory window is too small to fit in all the bridge resources and the 
> rest of the PCI devices and up being unconfigured.  With this patch, and 
> a fixup to clear is_bridge, this doesn't happen.
> 
> The plan was to make the CardBus driver (drivers/pcmcia/yenta_socket.c) 
> honour the is_bridge flag and not bother with CardBus stuff if it's cleared.
But why can't any code that wants to check this, just look at the
dev->hdr_type instead?  I don't think we need to add a new bit for this
because of that, right?
> Index: linux-2.6-armbe/drivers/pci/probe.c
> ===================================================================
> --- linux-2.6-armbe.orig/drivers/pci/probe.c	2004-10-14 
> 11:26:38.000000000 +0100
> +++ linux-2.6-armbe/drivers/pci/probe.c	2004-10-19 
> 12:00:00.000000000 +0100
Also, your patch was linewrapped :(
thanks,
greg k-h
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/