Date: Fri, 05 Mar 2004 16:34:16 +0100
From: Peter Zijlstra <>
Subject: Re: NFS problems with 2.6.4-rc1-mm2
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/3/5/98

I'm amazed at the total lack of information I managed to put into it ;-)
Its a dual athlon machine, nfs v3 over tcp. nfsd is run on vanilla
2.4.22 and reports no problems. (yes I know I should upgrade that
machine but its not exposed to the outside world).
anyway,. I played about a bit and it's in one of these patches:
#nfs-remove-XID-spinlock.patch
#nfs-misc-rpc-fixes.patch
#nfs-improved-writeback-strategy.patch
#nfs-simplify-config-options.patch
#nfs-fix-msync.patch
#nfs-mount-return-useful-errors.patch
#nfs-misc-minor-fixes.patch
#nfs-lockd-sync-01.patch
#nfs-lockd-sync-02.patch
#nfs-lockd-sync-03.patch
#nfs-lockd-sync-04.patch
#nfs-rpc-remove-redundant-memset.patch
#nfs-tunable-rpc-slot-table.patch
#nfs-short-read-fix.patch
I'll do a binary search through these patches and report those that seem
to cause the problem.
Peter Zijlstra
On Thu, 2004-03-04 at 21:07, Peter Zijlstra wrote:
> Hi,
> 
> I've just build and booted 2.6.4-rc1-mm2, and mounting my NFS exports
> works. however when I try to unzip a file over those mount the process
> freezes over and any other IO to that mount results in more stuck
> processes. SIGKILL will not remove the processes, only reboot will
> manage.
> 
> dmesg reports like:
> 
> nfs: server 192.168.0.1 not responding, timed out
> 
> which is total nonsense, because all other hosts on the network can
> access the exports just fine.
> 
> I'm about to back out all nfs patches from the broken-out patch set to
> see what that does for me.
> 
> Peter Zijlstra
[unhandled content-type:application/pgp-signature]