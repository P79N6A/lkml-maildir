Date: Wed, 12 Jun 2002 09:34:34 +1000
From: Keith Owens <>
Subject: Re: kernel: request_module[net-pf-10]: fork failed, errno 11
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/6/11/21

On Tue, 11 Jun 2002 14:42:25 +0100, 
Athanasius <Athanasius@miggy.org.uk> wrote:
>  Ok, a little more investigation:
>
>root@bowl:/sbin# cat modprobe-logging 
>#!/bin/sh
>
>echo "`date` `ps axh | wc -l`: $@" >> /var/log/modprobe.log
>exec /sbin/modprobe $@
>root@bowl:/sbin# cat /proc/sys/kernel/modprobe 
>/sbin/modprobe-logging
You do not need a special modprobe.log script.  Just mkdir
/var/log/ksymoops and you will get module logging automatically.  man
insmod, look for ksymoops.
>In /var/log/kern.log:
>Jun 11 14:36:58 bowl kernel: request_module[net-pf-10]: fork failed, errno 11
>
>And in /var/log/modprobe.log:
>
>Tue Jun 11 14:36:41 BST 2002     229: -s -k -- net-pf-10
>Tue Jun 11 14:36:58 BST 2002     228: -s -k -- net-pf-10
>Tue Jun 11 14:36:58 BST 2002     227: -s -k -- net-pf-10
>Tue Jun 11 14:37:02 BST 2002     227: -s -k -- net-pf-10
>/proc/sys/kernel/threads-max is 4095.
>  Note that ulimit -u is 256, but that's per login instance normally and
>I'd not have thought a kernel thread goes through PAM anyway...
This is weird.  'fork failed' is issued when kernel_thread() fails.
This means that the fork() syscall for kernel threads is failing,
before the application has even been started.  The fact that you see
other modprobes working only shows that multiple requests for net-pf-10
were issued and some of them got as far as running modprobe but others
failed.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/