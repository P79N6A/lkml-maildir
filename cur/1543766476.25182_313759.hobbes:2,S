Date: Mon, 25 Apr 2005 15:41:35 +0100
From: Christoph Hellwig <>
Subject: efi_memmap_walk_uc, was Re: [patch] mspec driver for 2.6.12-rc2-mm3
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/4/25/72

On Mon, Apr 25, 2005 at 06:13:01AM -0400, Jes Sorensen wrote:
> Your approach doesn't work. This relies on first-touch to get
> performance, remap_pfn_range_node wouldn't work.
> 
> Christoph> I'm pretty sure this was NACKed on the ia64 list, and SGI
> Christoph> was told to do a more generic efi memmap walk.
> >>  No the issue back then was that the driver just took the memory
> >> and kept it to itself. The new approach exports it for other users.
> 
> Christoph> That comment doesn't make sense at all to me.  exports what
> Christoph> to what other users.  And through what way.  Please bring
> Christoph> this issue up on the ia64 list again.  (also please post
> Christoph> this patch to linux-ia64, too)
> 
> mspec_alloc_page can be called from anywhere by anyone who wants to
> allocate an uncached page. The old fetchop driver just took the
> uncached memory and kept to itself. Thats what I am talking about!
> Earlier versions of the patch has already been by the ia64 list, we're
> down to details here.
See the thread starting at
http://marc.theaimsgroup.com/?l=linux-ia64&m=105883467032028&w=2
My reading is that it requests two things:
 - not duplicating the EFI memmap walk in a new function but rather
   have generic EFI memmap walk replaces the current efi_memmap_walk
 - an uncached memory allocator below the driver (not in the driver!).
   Your allocator design also doesn't seem to take many of the suggestions
   and recommendations in that thread in account.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/