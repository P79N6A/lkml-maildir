Date: Sun, 16 Feb 2003 14:23:46 -0800
From: Andrew Morton <>
Subject: Re: compile problem with 2.5.61-bk
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/2/16/147

Steve French <smfrench@austin.rr.com> wrote:
>
> Those two functions are not exported (see e.g. ksyms.c) so are not 
> available for modules to access but work when built as part of the kernel.
> For the time being this means the CIFS VFS can not be built as a module.
> Looks like I will have to figure out an alternate way to get at those two
> functions either directly by exporting them or preferably by calling them 
> indirectly
I think exporting them makes sense.  In fact, given that ->readpages() is an
address_space op, filesystems do have to be able to add these pages to pagecache.
It might be simpler to just use add_to_page_cache_lru(), and to export that
instead.  But that is a little more lock-intensive, and is equivalent to
exporting add_to_page_cache() and __pagevec_lru_add().
btw, cifs_copy_cache_pages() can use the more efficient kmap_atomic(KM_USER0)
in place of the kmap().
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/