Date: Thu, 27 Sep 2007 13:51:04 -0400
From: Peter Jones <>
Subject: Re: [PATCH] Add iSCSI iBFT support.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/9/27/202

H. Peter Anvin wrote:
> Peter Jones wrote:
>>> It should, presumably, depend on ACPI, rather than on X86...?
>> Actually no.  That /should/ be the correct answer, but none of the
>> hardware vendors actually provide the table via ACPI yet.  Also, if they
>> did, the support for /sys/firmware/acpi/tables/* would be sufficient
>> instead of having this code *at all*.
>>
> 
> Is there anything other than the discovery which is braindead about
> iBFT?  If so, can the tables code be taught to look for this additional
> table instead of having all its own mechanism?
Well, the code for the the generic ACPI table sysfs functionality is 
expecting to find the tables indexed in the RSDT.  This is essentially 
what the iBFT spec's authors seem to have planned, but it's simply never 
been implemented in the firmware.
AFAICS, it's technically feasible to remove the sysfs parts of this code 
entirely, make the probe code build a fake ACPI table header, and then 
add it explicitly if present at the end of acpi_system_sysfs_init() .
I don't know how the ACPI guys would feel about that.  Len, thoughts?
-- 
   Peter
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/