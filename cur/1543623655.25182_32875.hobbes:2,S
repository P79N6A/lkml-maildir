Date: Wed, 06 Mar 2002 14:25:02 -0800
From: george anzinger <>
Subject: Re: a faster way to gettimeofday?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/3/6/177

Chris Ball wrote:
> 
> >>>>> "dean" == dean gaudet <dean-list-linux-kernel@arctic.org> writes:
> 
>     dean> ingo started the proper work for this, for example, see:
>     dean> <
http://people.redhat.com/mingo/vsyscall-patches/vsyscall-2.3.32-F4>
>     dean> (there's a documentation file near the bottom of the patch)
>     dean> but it doesn't appear to support gettimeofday via rdtsc yet.
> 
> Interesting patch; when last I looked, vsyscalls were only being
> implemented on the new 64-bit architectures.
> 
> Does this patch break binary compatibility?  I seem to recall that being
> Andrea's reason for not running vsyscalls on standard x86 back in August
> last year.
>
In keeping with the subject, the gettimeofday call in this patch does
NOT get the current timeofday, but the time it was last updated, which
is usually every 1/HZ.  The REAL gettimeofday adds a converted delta of
the TSC to get the time to NOW with a resolution of 1 micro second. 
(Oh, and by the way, it does not update xtime in the process of doing
this.)
As a wonder, just how long is your system taking to do a gettimeofday. 
Mine does it in under one micro second (800 MHZ PIII).
-g
> - Chris.
> --
> $a="printf.net"; Chris Ball | chris@void.$a | www.$a | finger: chris@$a
>          "In the beginning there was nothing, which exploded."
> 
> -
> To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
> the body of a message to majordomo@vger.kernel.org
> More majordomo info at  
http://vger.kernel.org/majordomo-info.html
> Please read the FAQ at  
http://www.tux.org/lkml/
-- 
George           george@mvista.com
High-res-timers: 
http://sourceforge.net/projects/high-res-timers/
Real time sched: 
http://sourceforge.net/projects/rtsched/
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/