Date: Sun, 16 May 1999 20:29:18 +0200
From: Pavel Machek <>
Subject: Re: All the problems with 2.2.8/2.3.x and bdflush/update
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/5/19/98

Hi!
> >>You get an additional process slot, which is not to be sneezed at.
> >>More significant, though, you have a guarantee that data is flushed
> >>back within some short period of time, no matter what state the system
> >
> >You don't care to run update always with the same delta-time between
> >different runs. update does "sync some old buffer to disk". If you'll
> >delay the call of sync_old_buffers() then as worse the next time you'll
> >sync to disk some more dirty buffer.
> >
> >The stability of the VM system is enforced by bdflush/kswapd and not
> >from uptime.
> 
> Here's a scenario for you:  I do some operation which generates a lot
> of dirty buffers, but not enough to trigger bdflush due to low
> memory.  The machine then sits completely idle for several hours.  If
> update is not running, will those dirty buffers be written back?
No, they will not.
And that is _feature_. It has been there from day 0.
You should run bdflush daemon. If you want something to go onto disk,
just type "sync". Your distribution probably runs bdflush daemon by
default, if you kill it, you hopefully know what you are doing. There
are many other ways how to screw up a system (one of them is to cat
/dev/zero > /dev/hda).
								Pavel
-- 
I'm really pavel@ucw.cz. Look at 
http://195.113.31.123/~pavel.
          Pavel
Hi! I'm a .signature virus! Copy me into your ~/.signature to help me spread!
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/