Date: Mon, 11 Feb 2002 11:41:23 -0600
From: Stephen Cameron <>
Subject: RE: randomness - compaq smart array driver
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/2/11/131

timo (Timo.Proescholdt@brk-muenchen.de) wrote:
> I have a question concerning /dev/random on proliant servers with 
> smart array controllers.
> A month ago i tried to install freeswan on a proliant dl360 box,
> running redhat 6.2 on a smart array controller.
> There are no disks hanging at the scsi controller only the 
> two disks at the smart array controller channel. Kernel is 2.4.14 .
As it happens, we just sent this patch to Jens on Friday,
I tried it and meant it for 2.5.4-pre2 and -pre3.  I 
think it ought to be good for 2.4.x as well though.
-- steve
diff -urN lx254p2-c3/drivers/block/cciss.c lx254p2-c4/drivers/block/cciss.c
--- lx254p2-c3/drivers/block/cciss.c	Thu Feb  7 14:35:31 2002
+++ lx254p2-c4/drivers/block/cciss.c	Thu Feb  7 14:50:43 2002
@@ -2467,7 +2467,8 @@
 	/* make sure the board interrupts are off */
 	hba[i]->access.set_intr_mask(hba[i], CCISS_INTR_OFF);
 	if( request_irq(hba[i]->intr, do_cciss_intr, 
-		SA_INTERRUPT|SA_SHIRQ, hba[i]->devname, hba[i]))
+		SA_INTERRUPT | SA_SHIRQ | SA_SAMPLE_RANDOM, 
+			hba[i]->devname, hba[i]))
 	{
 		printk(KERN_ERR "ciss: Unable to get irq %d for %s\n",
 			hba[i]->intr, hba[i]->devname);
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/