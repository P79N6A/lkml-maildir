Date: Wed, 14 Jan 2004 21:05:26 -0800
From: Richard Henderson <>
Subject: Re: [2.6 patch] if ... BUG() -> BUG_ON()
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/1/15/1

On Thu, Jan 15, 2004 at 10:20:48AM +1100, Rusty Russell wrote:
> The right fix is to hack gcc to allow functions (in this case, BUG()) to have
> an "unlikely" attribute, and therefore know that this branch is unlikely.
The minimal change to make this work is some new annotation that says
that control does not fall through an asm.  Or give up on the keen-o
diagnostics and use __builtin_trap ().
Either way, branches that lead to dead ends (such as trap or abort or
any other noreturn function) are automatically predicted not taken.
r~
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/