Date: Wed, 23 Apr 2003 15:14:44 -0500
From: Andrew Theurer <>
Subject: Re: [patch] HT scheduler, sched-2.5.68-B2
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/4/23/252

On Wednesday 23 April 2003 13:43, Martin J. Bligh wrote:
> >> >  - turn off the more agressive idle-steal variant. This could fix the
> >> >    low-load regression reported by Martin J. Bligh.
> >>
> >> Yup, that fixed it (I tested just your first version with just that
> >> bit altered).
> >
> > Can we make this an arch specific option?  I have a feeling the HT
> > performance on low loads will actually drop with this disabled.
>
> Is it really an arch thing? Or is it a load level thing? I get the feeling
> it might be switchable dynamically, dependant on load ...
Well on high load, you shouldn't have an idle cpu anyway, so you would never 
pass the requirements for the agressive -idle- steal even if it was turned 
on.   On low loads on HT, without this agressive balance on cpu bound tasks, 
you will always load up one core before using any of the others.  When you 
fork/exec, the child will start on the same runqueue as the parent, the idle 
sibling will start running it, and it will never get a chance to balance 
properly while it's in a run state.  This is the same behavior I saw with the 
NUMA-HT solution, because I didn't have this agressive balance (although it 
could be added I suppose), and as a result it consistently performed less 
than Ingo's solution (but still better than no patch at all).
-Andrew Theurer
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/