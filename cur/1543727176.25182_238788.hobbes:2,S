Date: Wed, 04 Aug 2004 13:13:56 -0700
From: "Martin J. Bligh" <>
Subject: Re: HIGHMEM4G config for 1GB RAM on desktop?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/8/4/212

>     Martin> I had a patch for a config option, ported forward by
>     Martin> someone at IBM (I forget who, possibly Dave) from Andrea's
>     Martin> original. I think we finally decided (in consultation with
>     Martin> Andrea) we could drop the complicated stuff he had in the
>     Martin> asm code, so it's pretty simple ... something like this:
> 
> Am I just being dense, or is this patch solving a different problem
> from "do I really have to turn on HIGHMEM4G just to get the last 128MB
> of my 1GB of RAM?"
> 
> It seems to me that none of the PAGE_OFFSET values offered (the patch
> in allows PAGE_OFFSET to be set to 0xe0000000, 0xc0000000, 0x80000000
> or 0x40000000, in addition to the 4G/4G value of 0x02000000) are
> exactly what someone with 1 GB of RAM wants.  They'd be forced to go
> down to a 2G/2G split which cheats userspace of quite a bit of address
> space (admittedly with only 1 GB of RAM, a process bigger than 2 GB is
> a bit of a stretch).  In any case a 2.75G/1.25G split as suggested
> earlier works fine with 1 GB of RAM.
In practice, I suspect 2/2 will do exactly what you want ... and what 
99.9% of people want actually ;-) We could add more options, but be sure
to mark anything that's not 1GB aligned as not suitable for PAE (as the
0.5 split was).
> Also I notice that Con's patch modifies vmlinux.ld.S to update the
> kernel base address, while this patch doesn't.  Is that intentional or
> is does the patch depend on some other patches that use the defines in
> page.h somehow as controlled by the following change?
> 
> +AFLAGS_vmlinux.lds.o += -include $(TOPDIR)/include/asm-i386/page.h
Dunno ... we should test it really ... it's been a while. IIRC, vmlinux.ld.S
was hardcoded, so I don't see how it'd work without those mods.
M.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/