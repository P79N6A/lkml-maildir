Date: Fri, 10 Mar 2006 16:57:38 +0100
From: Kurt Garloff <>
Subject: [PATCH] KERN_SETUID_DUMPABLE in /proc/sys/fs/
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/3/10/151

Hi,
likely a merge error by patch ... which makes setuid_dumpable
appear in /proc/sys/fs/ rather than kernel/. I assume it belongs
to kernel as the naming suggests.
Patch is against 2.6.16-rc5-git9.
From: Kurt Garloff <garloff@suse.de>
Subject: suid-dumpable ended up in wrong sysctl dir
Diffing in sysctl.c is tricky, using more context is recommended.
suid_dumpable ended up in fs/ instead of kernel/ and the reason
is likely a patch with too little context.
Signed-off-by: Kurt Garloff <garloff@suse.de>
Index: linux-2.6.15/kernel/sysctl.c
===================================================================
--- linux-2.6.15.orig/kernel/sysctl.c
+++ linux-2.6.15/kernel/sysctl.c
@@ -647,12 +647,20 @@ static ctl_table kern_table[] = {
 		.data		= &randomize_va_space,
 		.maxlen		= sizeof(int),
 		.mode		= 0644,
 		.proc_handler	= &proc_dointvec,
 	},
 #endif
+	{
+		.ctl_name	= KERN_SETUID_DUMPABLE,
+		.procname	= "suid_dumpable",
+		.data		= &suid_dumpable,
+		.maxlen		= sizeof(int),
+		.mode		= 0644,
+		.proc_handler	= &proc_dointvec,
+	},
 #if defined(CONFIG_S390) && defined(CONFIG_SMP)
 	{
 		.ctl_name	= KERN_SPIN_RETRY,
 		.procname	= "spin_retry",
 		.data		= &spin_retry,
 		.maxlen		= sizeof (int),
@@ -1032,20 +1040,12 @@ static ctl_table fs_table[] = {
 		.procname	= "inotify",
 		.mode		= 0555,
 		.child		= inotify_table,
 	},
 #endif	
 #endif
-	{
-		.ctl_name	= KERN_SETUID_DUMPABLE,
-		.procname	= "suid_dumpable",
-		.data		= &suid_dumpable,
-		.maxlen		= sizeof(int),
-		.mode		= 0644,
-		.proc_handler	= &proc_dointvec,
-	},
 	{ .ctl_name = 0 }
 };
 
 static ctl_table debug_table[] = {
 	{ .ctl_name = 0 }
 };
-- 
Kurt Garloff, Head Architect Linux, Novell Inc.[unhandled content-type:application/pgp-signature]