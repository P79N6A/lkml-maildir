Date: Wed, 7 Jan 2009 23:42:46 +1100
From: Herbert Xu <>
Subject: Re: Data corruption issue with splice() on 2.6.27.10
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2009/1/7/147

On Wed, Jan 07, 2009 at 03:37:41PM +0300, Evgeniy Polyakov wrote:
>
> Doesn't your tcp fallbacks to kernel_sendmsg() without sg in
> tcp_sendpage()? And then just feeds data into the stack the same way it
> happens with send() i.e. by copying it.
Good point.  Did he check GSO though? GSO will always enable SG
on the socket regardless of the netdev's setting.  And if the device
started out with SG enabled then recent kernels will enable GSO
by default.
Cheers,
-- 
Visit Openswan at 
http://www.openswan.org/
Email: Herbert Xu 许志壬 <herbert@gondor.apana.org.au>
Home Page: 
http://gondor.apana.org.au/herbert/
PGP Key: 
http://gondor.apana.org.au/herbert/pubkey.txt