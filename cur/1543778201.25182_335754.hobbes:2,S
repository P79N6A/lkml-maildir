Date: Sun, 24 Jul 2005 09:19:02 +0100
From: Russell King <>
Subject: Re: fix suspend/resume irq request free for yenta..
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/7/24/9

On Sun, Jul 24, 2005 at 08:40:00AM +1000, Dave Airlie wrote:
> > > What if some other driver is sharing the IRQ, and requires IRQs to be
> > > enabled for the resume to complete?
> 
> All drivers re-enable IRQs on their way back up in their resume code,
> they shouldn't be doing anything before that point..
I think you missed the point.  If a driver resume method requires
to send some commands to the chip to restore it to the state it was
before it was suspended, and requires interrupts to complete that
operation.
This is quite possible if a device has child devices which will be
resumed after it has been resumed, and they share this interrupt.
This is why I think request_irq/free_irq is a better solution.
Alternatively, we need to go to a two stage resume model - 1st
stage to re-setup the devices such that they are in a quiescent
state, 2nd stage to complete.
-- 
Russell King
 Linux kernel    2.6 ARM Linux   - 
http://www.arm.linux.org.uk/
 maintainer of:  2.6 Serial core
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/