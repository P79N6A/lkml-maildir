Date: Wed, 30 Dec 1998 21:49:07 +0000 (GMT)
From: Riley Williams <>
Subject: Tunnelling...
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1998/12/31/51

Hi there.
Looking through the 2.2.0pre1 configuration, I note that the options
relating to tunnelling appear to be rather confused, so can I submit
the enclosed patch to clarify them somewhat.
Basically, it inserts a new config-script-only option to enable or
disable the display of the tunnelling options, then separates out the
IP-over-IP tunnelling option as a distinct option - at least as far as
the help text was concerned, it was as much concerned with saying what
tunnelling in general is as with the particular type of tunnelling it
concerns itself with, and now that we have another tunnelling
protocol, the current format was somewhat confusing...
Note that there COULD be a problem with this patch relating to users
who currently have one or other of these tunnelling protocols enabled,
as they will need to go into the configuration and set the new option
to "y" before the two tunnelling protocols are recognised. Other than
this, no problems are anticipated.
Before anybody asks, yes, it HAS been tested, with both "make config"
and "make menuconfig", and works fine on both. I can't check "make
xconfig" at this time as I don't have X available on the system I'm
on, so I can't comment regarding that...
Best wishes from Riley.
---
 * 
ftp://ps.cus.umist.ac.uk/pub/rhw/Linux
 * 
http://ps.cus.umist.ac.uk/~rhw/kernel.versions.html
--- linux/net/ipv4/Config.in.old	Fri Nov 27 18:13:53 1998
+++ linux/net/ipv4/Config.in	Wed Dec 30 21:28:09 1998
@@ -53,8 +53,11 @@
   fi
 fi
 bool 'IP: optimize as router not host' CONFIG_IP_ROUTER
+bool 'IP: tunnelling' CONFIG_NET_TUNNEL
+if [ "$CONFIG_NET_TUNNEL" = "y" ]; then
-tristate 'IP: tunneling' CONFIG_NET_IPIP
+  tristate '  IP: IP tunnels over IP' CONFIG_NET_IPIP
-tristate 'IP: GRE tunnels over IP' CONFIG_NET_IPGRE
+  tristate '  IP: GRE tunnels over IP' CONFIG_NET_IPGRE
+fi
 if [ "$CONFIG_IP_MULTICAST" = "y" ]; then
   if [ "$CONFIG_NET_IPGRE" != "n" ]; then
     bool 'IP: broadcast GRE over IP' CONFIG_NET_IPGRE_BROADCAST
--- linux/Documentation/Configure.help.old	Sun Dec 27 18:25:51 1998
+++ linux/Documentation/Configure.help	Wed Dec 30 21:32:40 1998
@@ -2327,16 +2327,22 @@
   details.
 
 IP: tunneling
-CONFIG_NET_IPIP
+CONFIG_NET_TUNNEL
   Tunneling means encapsulating data of one protocol type within
   another protocol and sending it over a channel that understands the
-  encapsulating protocol. This particular tunneling driver implements
+  encapsulating protocol.
+
+  Saying Y to this option will not directly affect the kernel; rather,
+  it will present options relating to available tunnelling protocols.
+
+IP: IP tunnels over IP
+CONFIG_NET_IPIP
-  encapsulation of IP within IP, which sounds kind of pointless, but
+  This particular tunneling driver implements encapsulation of IP within
-  can be useful if you want to make your (or some other) machine
+  IP, which sounds kind of pointless, but can be useful if you want to
-  appear on a different network than it physically is, or to use
+  make your (or some other) machine appear on a different network than
-  mobile-IP facilities (allowing laptops to seamlessly move between
+  it physically is, or to use mobile-IP facilities (allowing laptops to
-  networks without changing their IP addresses; check out
+  seamlessly move between networks without changing their IP addresses;
-  
http://anchor.cs.binghamton.edu/~mobileip/LJ/index.html
). 
+  check out 
http://anchor.cs.binghamton.edu/~mobileip/LJ/index.html
). 
 
   Saying Y to this option will produce two modules ( = code which can
   be inserted in and removed from the running kernel whenever you
@@ -2344,11 +2350,10 @@
 
 IP: GRE tunnels over IP
 CONFIG_NET_IPGRE
-  Tunneling means encapsulating data of one protocol type within
-  another protocol and sending it over a channel that understands the
-  encapsulating protocol. This particular tunneling driver implements
+  This particular tunneling driver implements GRE (Generic Routing
-  GRE (Generic Routing Encapsulation) and at this time allows
+  Encapsulation) and at this time allows encapsulating of IPv4 or IPv6
-  encapsulating of IPv4 or IPv6 over existing IPv4 infrastructure.
+  over existing IPv4 infrastructure.
+
   This driver is useful if the other endpoint is a Cisco router: Cisco
   likes GRE much better than the other Linux tunneling driver ("IP:
   tunneling" above). In addition, GRE allows multicast redistribution