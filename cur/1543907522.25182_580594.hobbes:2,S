Date: Tue, 7 Aug 2007 23:44:58 +0200 (CEST)
From: Jan Engelhardt <>
Subject: Re: [2.6.22.2 review 26/84] make timerfd return a u64 and fix the __put_user
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/8/7/471

On Aug 7 2007 13:44, Greg KH wrote:
>--- a/fs/timerfd.c
>+++ b/fs/timerfd.c
>@@ -95,7 +95,7 @@ static ssize_t timerfd_read(struct file 
> {
> 	struct timerfd_ctx *ctx = file->private_data;
> 	ssize_t res;
>-	u32 ticks = 0;
>+	u64 ticks = 0;
> 	DECLARE_WAITQUEUE(wait, current);
> 
> 	if (count < sizeof(ticks))
>@@ -130,7 +130,7 @@ static ssize_t timerfd_read(struct file 
> 			 * callback to avoid DoS attacks specifying a very
> 			 * short timer period.
> 			 */
>-			ticks = (u32)
>+			ticks = (u64)
> 				hrtimer_forward(&ctx->tmr,
> 						hrtimer_cb_get_time(&ctx->tmr),
> 						ctx->tintv);
[ Minor: Cast is not strictly required; hrtimer_forward()s result is
autopromoted/demoted to the type of @ticks. ]
	Jan
-- 
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/