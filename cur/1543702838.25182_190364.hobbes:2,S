Date: Mon, 12 Jan 2004 08:55:56 +0100
From: Xavier Bestel <>
Subject: Re: 2.6.0: blkdev_get() oopses on floppy
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/1/12/19

Le lun 12/01/2004 à 02:52, viro@parcelfarce.linux.theplanet.co.uk a
écrit :
> That's wrong - faling blkdev_get() will do bdput() itself.
Ok, thanks (strange). But note that my problem is at blkdev_get() time.
> *NOTE*:  unless you are really forced to, don't use that "open by device
> number" crap at all - normal filp_open() will do nicely if you have the
> pathname of device in question and it's _much_ better interface.
But that's exactely what raw.c does (although the userspace knows the
dev pathname).
> > raw /dev/raw/raw1 /dev/fd0
> > cat /dev/raw/raw1 >/dev/null
> > 
> > and got this oops:
> > 
> > Unable to handle kernel NULL pointer dereference at virtual address 00000040
[...]
> Lovely...  Which kernel is that?
Plain 2.6.0, I'll try 2.6.1 when I can.
Thanks Al,
	Xav
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/