Date: Fri, 22 Oct 1999 10:01:04 +0200
From: Ferdinand Prantl <>
Subject: Problem with 2x IDE CD-ROM and UDMA
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/10/22/16

Hi all,
  I have two problems I was not able to solve even with Hedrick's
  UDMA patch for 2.2.12. There are still appearing error messages
  while:
  >>booting of kernel with enabled DMA (on 2.0.38 or 2.2.12)
hda: dma_intr:status=0x51 { DriveReady SeekComplete Error }
hda: dma_intr:error=0x84 { DriveStatusError BadCRC }
...
hda: DMA disabled
  I rather turned off activating DMA when booting but to my suprise I am
  still getting these messages ! I can see these messages anytime when
  I try to turn on DMA via hdparm.
  My computer:
   PII Mendocino 333
   Tekram iBX P6B40-A4X
   128 MB DIMM 7ns
   IDE:
     hda: HDD IBM 10.5 GB 5400 ot.
     hdc: CD-ROM Lite-On 40x (master)
     hdd: CD-ROM Creative Infra 5400 (slave)
   Creative SB Live!
   Debian 2.1 is in logical drive of the extended partition.
  At last I used hdparm -c 1 -u 1 -p 4 to increase 4 MB/s to 8 MB/s (hdparm -t)
  and stayed sorry I cannot use DMA.
  Do you think it is because of these combination of components ?
----------------------
  The second problem - the bigger one - is mounting CD in slave CD-ROM.
  If I try it I can see error - bad inode (asc = 0x64), bad superblock,
  cannot mount filesystem. Master CD works good.
  Slave does not support DMA and that is why I set PIO 4 for both of them
  to prevent possible errors. But still does not work. When I try hdparm:
  >>hdparm -u 1 -c 1 -p 4 /dev/hdd (on 2.2.12)
lost interrupt
hdd:cdrom_pc_intr: The drive appears confused (ireason = 0x 1)
...
  ... and still these messages on the console until restart
  I tried kernel 2.0.38 too:
  >>hdparm -u 1 -c 1 -X 12 /dev/hdd (on 2.0.38)
hdd: irq timeout: status=0x58
hdd: ATAPI reset complete
hdd: media changed
  I even disconnected Lite-On CD and let Creative be the only one (master)
  on the secondary IDE but those errors remained ! CD-ROM alone works in
  DOS and Windows and both CDs work there too.
  Have you ever met with this hardware or these problems ?
    Thank you,
      Ferda Prantl
-- 
   "We are free only in our dreams. We need money for the rest of life."
----------------------------------
Ferdinand Prantl
LVT FF UK
e-mail: prantl@ff.cuni.cz
www: 
http://www.ff.cuni.cz/~prantl
ICQ: 36302930
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/