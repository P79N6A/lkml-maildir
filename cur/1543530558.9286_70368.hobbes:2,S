Date: Fri, 17 Mar 2000 23:38:05 +0000
From: Steve Dodd <>
Subject: [PATCH] 2.3.99-pre1 spurious put_filesystem in super.c:read_super()
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/3/18/154

Hi,
--- fs/super.c.old	Fri Mar 17 22:41:34 2000
+++ fs/super.c	Fri Mar 17 22:42:30 2000
@@ -606,7 +606,6 @@
 	s->s_dev = 0;
 	s->s_bdev = 0;
 	s->s_type = NULL;
-	put_filesystem(type);
 	unlock_super(s);
 	return NULL;
 }
The call to put_filesystem() in read_super() is wrong - all read_super()'s
callers call put_filesystem() if read_super() fails. As the callers inc the
use count, it seems reasonable that they are responsible for dec'ing it.
-- 
Horses are forbidden to eat fire hydrants in Marshalltown, Iowa.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/