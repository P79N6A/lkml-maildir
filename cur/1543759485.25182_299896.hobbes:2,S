Date: Sat, 05 Mar 2005 13:28:25 +0400
From: Brad Campbell <>
Subject: Re: freezes with reiser4 in a raid1 with 2.6.11-rc5-mm1
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/3/5/45

Florian Engelhardt wrote:
>>Neat trick which I only discovered in desparation last week when
>>battling a RAID lockup on the -rc4-mm1 kernel on a remote box.
>>
>>I was also having hard lockup issues, but reseating all my PCI cards
>>appear to have rectified that one.
> 
> 
> Well, there are not much PCI-Cards in this server and reseating them
> didnt fix it.
Sorry, I was just pointing out what "appeared" to solve my hard-lock problems, I was not suggesting 
it as a cure for yours.
>>As root. echo b > /proc/sysrq-trigger
>>
>>Of course only if you have alt-sysrq built in.
> 
> 
> Thanks for that, i was able to reboot the machine with that trick, but
> i couldnt find anything bad in the messages file.
> 
> I made some further tests with the server:
> Deactivating the raid, and formating the hdÂ´s (hdc and hdd) with
> reiser4, mounting them and sharing them via nfs and ftp worked great, no
> freezes, no reboots, everything perfect, even the performance.
> But as soon, as i activated the raid, the server freezed, or rebooted.
> 
A complete hard lock appears to be very rare these days with kernel bugs. It may be tickling a 
hardware bug somewhere. My machine was only hard-locking when I was writing to the array. A complete 
lock-up or reboot really does sound more hardware like. Have you tried running something like memtest86?
I found after a couple of hours of memtest86 my box would lock solid, which eliminated the linux 
kernel from the equation completely.
I'm running ext3 on all my machines, so I can't help with reiser at all.
I'm running a largish raid5 on 2.6.10-bk10 and a fairly large raid6 on 2.6.11-rc5-bk3. I had 
problems with raid6 on 2.6.11-rc4-mm1 causing raid subsystem lockups, but nothing that precluded me 
from rebooting with the sysrq-trigger.
Regards,
Brad
-- 
"Human beings, who are almost unique in having the ability
to learn from the experience of others, are also remarkable
for their apparent disinclination to do so." -- Douglas Adams
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/