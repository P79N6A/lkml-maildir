Date: Thu, 31 Jan 2008 17:44:33 -0500
From: Trond Myklebust <>
Subject: Re: degrading performance (NFS v.3 client)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/31/437

On Thu, 2008-01-31 at 16:09 +0100, Claude Frantz wrote:
> Hello !
> 
> Please allow me to submit to you a question related to a system which
> is a NFS v3 client for a Netapp server. The home directories are
> NFS attached. The following behaviour occurs sometimes. The system 
> becomes very slow. The load average is increasing but the most
> interesting observation is the increase of the %iowait. After
> reboot the system is running well for many days, then the problem 
> occurs again.
> 
> Any idea ?
Hi,
Have you tried analysing the NFS performances using Chuck's nfs-iostat
utility? You can pick up a copy at
    
http://oss.oracle.com/~cel/linux-2.6/2.6.24/
Try looking both at
	nfs-iostat 10 --page
and
	nfs-iostat 10 --attr
to see what the differences are between the 'fast' and 'slow' cases...
Cheers
  Trond