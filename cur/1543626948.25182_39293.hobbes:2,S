Date: Mon, 08 Apr 2002 15:38:52 -0700
From: Andrew Morton <>
Subject: Re: Event logging vs enhancing printk
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/4/8/163

"Martin J. Bligh" wrote:
> 
>> ...
> 1. There seems to me to be a race within the current SMP code (with or without
> the event logging stuff). It seems that segments of the line could get interspersed
> with segments of another line (or a whole other line) generated by another cpu ...
> is this correct?
> 
I'm not aware of that being the case.  The output string
is formed into a static buffer and then copied into the
printk ring buffer all under spinlock_irqsave(logbuf_lock).
If there is something wrong then it would be occurring
at the other end - where data is taken out of the ring
and is sent to the console device(s).  The locking there
is OK, I think?
-
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/