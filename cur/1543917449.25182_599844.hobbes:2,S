Date: Fri, 28 Sep 2007 10:52:07 +0100
From: Andy Whitcroft <>
Subject: Re: [PATCH] update checkpatch.pl to version 0.10
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/9/28/95

On Fri, Sep 28, 2007 at 10:40:03AM +0200, Ingo Molnar wrote:
> 
> * Andy Whitcroft <apw@shadowen.org> wrote:
> 
> > This version brings a number of new checks, and a number of bug fixes.  
> 
> your checkpatch patch itself produces 22 warnings ...
> 
> i ran it over kernel/sched.c and there are many bogus warnings that i 
> reported to you earlier:
> 
>   WARNING: multiple assignments should be avoided
>   #2319:
>   +       max_load = this_load = total_load = total_pwr = 0;
> 
> and new bogus ones:
> 
>   ERROR: need consistent spacing around '*' (ctx:WxV)
>   #5287:
>   +               mode_t mode, proc_handler *proc_handler)
> 
>   ERROR: need consistent spacing around '*' (ctx:WxV)
>   #5328:
>   +static ctl_table *sd_alloc_ctl_cpu_table(int cpu)
> 
>   ERROR: need space before that '*' (ctx:VxV)
>   #209:
>   +# define INIT_TASK_GRP_LOAD    2*NICE_0_LOAD
> 
> why did you ignore my feedback? Ever since v8 the quality of 
> checkpatch.pl has been getting worse and worse as there are way too many 
> false positives. I'm still stuck on v8 for my own use, v9 and v10 is 
> unusable.
I think if you read your incoming email you will see nothing of the sort.
I have discussed this with you and in public.  The multiple assignment
check you dissagree with and we have softened it in direct response to that
dislike.  However, the main proponent of this existing wanted that check.
Therefore it has stayed.  The other false positives you report are real.
Some are fixed in my development version, others are not.  They come
from the fact that I was asked for better checks on '*' and the like in
its binary mode.  To get that I had to actually start telling unary and
binary uses of the same operator appart.  That is hard in the face of
typedef'd types.  I am working to make it better.
However, the key here is that it will never be 100%, not without
becoming a try C parser.  The output is a _guide_ if you don't like its
output ignore the reports you dislike.  I for one send out patches with
style violations where I deem that the code is better that way.
-apw
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/