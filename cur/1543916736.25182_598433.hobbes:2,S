Date: Tue, 25 Sep 2007 15:07:44 +1000
From: Rusty Russell <>
Subject: lib-y vs EXPORT_SYMBOL: who wins?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/9/25/17

Various files under lib/ are linked into a .a so they only get linked if
needed.  But many of these functions are also EXPORT_SYMBOL()ed.
This doesn't really make sense: if it's exported it really needs to be
present.  Certain configurations can hit this (lguest uses kasprintf,
and can be a module).
We could do something hacky and try to figure out if any modules need
the symbols, which screws modules built later, but is no worse than a
CONFIG_-based solution.
Or to we just move all the exported functions out of the .a?
Cheers,
Rusty.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/