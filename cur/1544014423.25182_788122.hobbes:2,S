Date: Wed, 7 Jan 2009 15:15:30 +0300
From: Evgeniy Polyakov <>
Subject: Re: Data corruption issue with splice() on 2.6.27.10
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2009/1/7/123

On Wed, Jan 07, 2009 at 10:59:21PM +1100, Herbert Xu (herbert@gondor.apana.org.au) wrote:
> On Wed, Jan 07, 2009 at 02:56:05PM +0300, Evgeniy Polyakov wrote:
> >
> > But it will not push pages into the stack, but copy them including copy
> > of the submitted head?
> 
> It will use a single page entry for skb->head with splice, see
> skb_splice_bits.
Looks like we are talking about different directions of the dataflow.
I meant that set of pages submitted into the sending part will be copied
if sending interface does not support acceleration, and thus it will
copy part of the page corresponding to the linear part of the skb prior
the transmission, so even if skb will be freed right after that call
(prior data transmission by the hardware), it should not affect copied
data.
-- 
	Evgeniy Polyakov