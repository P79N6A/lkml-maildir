Date: Fri, 15 Jun 2007 23:45:20 +0200
From: Adrian Bunk <>
Subject: [RFC: 2.6 patch] net/rxrpc/ar-output.c: remove dead code
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/6/15/522

This patch removes dead code spotted by the Coverity checker.
Signed-off-by: Adrian Bunk <bunk@stusta.de>
---
 net/rxrpc/ar-output.c |   14 ++++----------
 1 file changed, 4 insertions(+), 10 deletions(-)
--- linux-2.6.22-rc4-mm2/net/rxrpc/ar-output.c.old	2007-06-15 21:38:02.000000000 +0200
+++ linux-2.6.22-rc4-mm2/net/rxrpc/ar-output.c	2007-06-15 21:38:47.000000000 +0200
@@ -530,7 +530,7 @@ static int rxrpc_send_data(struct kiocb 
 	struct sock *sk = &rx->sk;
 	long timeo;
 	bool more;
-	int ret, ioc, segment, copied;
+	int ret, ioc, segment;
 
 	_enter(",,,{%zu},%zu", msg->msg_iovlen, len);
 
@@ -552,7 +552,6 @@ static int rxrpc_send_data(struct kiocb 
 	skb = call->tx_pending;
 	call->tx_pending = NULL;
 
-	copied = 0;
 	do {
 		int copy;
 
@@ -570,11 +569,11 @@ static int rxrpc_send_data(struct kiocb 
 				       call->acks_winsz) <= 0) {
 				ret = -EAGAIN;
 				if (msg->msg_flags & MSG_DONTWAIT)
-					goto maybe_error;
+					goto out;
 				ret = rxrpc_wait_for_tx_window(rx, call,
 							       &timeo);
 				if (ret < 0)
-					goto maybe_error;
+					goto out;
 			}
 
 			max = call->conn->trans->peer->maxdata;
@@ -596,7 +595,7 @@ static int rxrpc_send_data(struct kiocb 
 			skb = sock_alloc_send_skb(
 				sk, size, msg->msg_flags & MSG_DONTWAIT, &ret);
 			if (!skb)
-				goto maybe_error;
+				goto out;
 
 			rxrpc_new_skb(skb);
 
@@ -723,11 +722,6 @@ call_aborted:
 	_leave(" = %d", ret);
 	return ret;
 
-maybe_error:
-	if (copied)
-		ret = copied;
-	goto out;
-
 efault:
 	ret = -EFAULT;
 	goto out;
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/