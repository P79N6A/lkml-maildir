Date: Tue, 16 Dec 2008 21:23:00 +0100 (CET)
From: Geert Uytterhoeven <>
Subject: Re: [PATCH] amiflop: get rid of sleep_on calls
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/12/16/370

On Tue, 9 Dec 2008, Joerg Dorchain wrote:
> On Mon, Dec 08, 2008 at 04:59:38PM +0000, Andreas Bombe wrote:
> > The replacement for the unconditional sleep_on() in fd_motor_on() is a
> > complete_all() together with a INIT_COMPLETION() before the mod_timer()
> > call.  It appears to me that fd_motor_on() might be called concurrently
> > and fd_select() does not guarantee mutual exclusivity in the case the
> > same drive gets selected again.
> 
> Selecting the same drive repeatly does not matter. The selected
> drive is the one the next command or transfer applies to.
> 
> It is possible to select one drive, start the motor, select the
> next one, start the motor, as long as as trasnfer is tried until
> the drive is up to speed (either by signal or the timeout)
> 
> At first glance, the patch looks ok.
Does that mean I can add your Acked-by?
Anyway, I've applied it to my git repository (to be pushed to kernel.org soon).
Gr{oetje,eeting}s,
						Geert
--
Geert Uytterhoeven -- There's lots of Linux beyond ia32 -- geert@linux-m68k.org
In personal conversations with technical people, I call myself a hacker. But
when I'm talking to journalists I just say "programmer" or something like that.
							    -- Linus Torvalds