Date: Tue, 16 Dec 2008 11:01:45 +0900 (JST)
From: KOSAKI Motohiro <>
Subject: Re: [PATCH 3/3] fsnotify: use the new open-exec hook for inotify and dnotify
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/12/15/295

> > they are two different.
> > 
> > 1) Call dnotify_parent() or not
> > 2) Use IN_OPEN or IN_ACCESS
> > 
> > The patch description doesn't explain any reason.
> > 
> > 
> > IOW, IN_ACCESS is usually used by read(). but linux has demand paging
> > mechanism. then exec() only do open and mmap.
> > actual reading is processed by page fault.
> > 
> > I guess you have the reason of this design choice.
> > but it isn't described.
> 
> The original logic was all predicated on my thoughts on how my new
> fanotify would want these events and how I felt that open for exec was
> worth the separate hook.  None of that is useful at this time and in any
> case IN_OPEN makes a lot more sense than IN_ACCESS.  Since you've got me
> looking at these as freestanding patchs I do tend to think that the
> easiest thing for now would be to just drop patch 2 and make the call
> sites from patch 2 call fsnotify_open directly.
it seems make sense. thanks.
> I'll resend in the morning a single patch to call directly to
> fsnotify_open.  (and another single patch to immediately do the rename
> that I want done which I'll send as the full normal diff since it'll be
> freestanding)
you don't need full normal diff. last comment was my mistake. sorry.
I only hope patch separation.