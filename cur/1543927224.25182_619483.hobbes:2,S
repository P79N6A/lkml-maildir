Date: Mon, 19 Nov 2007 19:30:55 -0800 (PST)
From: Christoph Lameter <>
Subject: Re: [rfc 03/45] Generic CPU operations: Core piece
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/11/19/525

On Mon, 19 Nov 2007, Mathieu Desnoyers wrote:
> 
> Very interesting patch! I did not expect we could mix local atomic ops
> with per CPU offsets in an atomic manner.. brilliant :)
> 
> Some nitpicking follows...
Well this is a draft so I was not that thorough. The beast is getting too 
big. It would be good if I could get the first patches merged that just 
deal with the two allocators and then gradually work the rest.
> I think you could use extra () around old, new etc.. ?
Right.
> Same here.
> 
> > +	(x);					\
> 
> () seems unneeded here, since x is local.
But (x) is returned to the "caller" of the macro so it should be specially 
marged.
> > + * In that case we can simply disable preemption which
> > + * may be free if the kernel is compiled without preemption.
> > + */
> > +
> > +#define _CPU_READ(addr)				\
> > +({						\
> > +	(__CPU_READ(addr));			\
> > +})
> 
> ({ }) seems to be unneeded here.
Hmmm.... I wanted a consistent style.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/