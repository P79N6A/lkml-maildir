Date: Fri, 21 Nov 2003 09:57:17 +1100
From: Peter Chubb <>
Subject: (2.6.0-test9) Disabling IDE DMA removes ability to select chipsets
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/11/20/163

Hi,
	In drivers/ide/Kconfig at present, if you deselect
BLK_DEV_IDEDMA_PCI you can then *not* select any of the non-generic
chipsets.  Thus you lose the ability to auto-tune PIO modes, for
example.
This patch rearranges where the endif moves to disable just the config
options that depend on DMA.
===== Kconfig 1.32 vs edited =====
--- 1.32/drivers/ide/Kconfig	Wed Nov 19 18:40:45 2003
+++ edited/Kconfig	Thu Nov 20 14:32:13 2003
@@ -531,6 +531,8 @@
 	depends on PCI && BLK_DEV_IDEPCI
 	default BLK_DEV_IDEDMA_PCI
 
+endif
+
 config BLK_DEV_AEC62XX
 	tristate "AEC62XX chipset support"
 	help
@@ -800,7 +802,6 @@
 	  This allows the kernel to change PIO, DMA and UDMA speeds and to
 	  configure the chip to optimum performance.
 
-endif
 
 config BLK_DEV_IDE_PMAC
 	bool "Builtin PowerMac IDE support"
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/