Date: Thu, 15 Feb 2007 17:01:27 +0100
From: Tilman Schmidt <>
Subject: sparse chokes on arch/i386/kernel/i8253.c (was: 2.6.20-mm1)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/2/15/176

Trying to build 2.6.20-mm1 on i386 with C=1, sparse 0.2 chokes
on arch/i386/kernel/i8253.c:
  CHECK   arch/i386/kernel/i8253.c
linux/marker.h: No such file or directory
include/linux/jiffies.h:18:5: warning: undefined preprocessor identifier 'CONFIG_HZ'
include/linux/jiffies.h:20:7: warning: undefined preprocessor identifier 'CONFIG_HZ'
include/linux/jiffies.h:22:7: warning: undefined preprocessor identifier 'CONFIG_HZ'
include/linux/jiffies.h:24:7: warning: undefined preprocessor identifier 'CONFIG_HZ'
include/linux/jiffies.h:26:7: warning: undefined preprocessor identifier 'CONFIG_HZ'
include/linux/jiffies.h:28:7: warning: undefined preprocessor identifier 'CONFIG_HZ'
include/linux/jiffies.h:30:7: warning: undefined preprocessor identifier 'CONFIG_HZ'
include/linux/jiffies.h:33:3: error: You lose.
include/linux/jiffies.h:225:5: error: bad constant expression
include/asm/module.h:64:2: error: unknown processor family
include/asm/processor.h:82:30: error: undefined identifier 'CONFIG_X86_L1_CACHE_SHIFT'
include/asm/processor.h:82:30: error: bad constant expression type
arch/i386/kernel/i8253.c:120:16: error: Expected ; at end of declaration
arch/i386/kernel/i8253.c:120:16: error: got pit_read
arch/i386/kernel/i8253.c:128:2: error: Trying to use reserved word 'do' as identifier
arch/i386/kernel/i8253.c:128:2: error: Expected ; at end of declaration
arch/i386/kernel/i8253.c:128:2: error: got {
[loads of similar messages omitted ...]
arch/i386/kernel/i8253.c:195:2: error: undefined identifier 'clocksource_pit'
arch/i386/kernel/i8253.c:196:9: error: undefined identifier 'clocksource_register'
arch/i386/kernel/i8253.c:41:7: error: Expected constant expression in case statement
arch/i386/kernel/i8253.c:50:7: error: Expected constant expression in case statement
arch/i386/kernel/i8253.c:51:7: error: Expected constant expression in case statement
arch/i386/kernel/i8253.c:52:7: error: Expected constant expression in case statement
/bin/sh: line 1: 18990 Speicherzugriffsfehler  /home/ts/kernel/sparse-0.2/sparse -D__linux__ -Dlinux -D__STDC__ -Dunix -D__unix__ -Wbitwise -D__i386__ -nostd
inc -isystem /usr/lib/gcc/i586-suse-linux/4.0.2/include -Wp,-MD,arch/i386/kernel/.i8253.o.d -nostdinc -isystem /usr/lib/gcc/i586-suse-linux/4.0.2/include -D_
_KERNEL__ -Iinclude -include include/linux/autoconf.h -include linux/marker.h -Wall -Wundef -Wstrict-prototypes -Wno-trigraphs -fno-strict-aliasing -fno-comm
on -Os -pipe -msoft-float -mregparm=3 -mpreferred-stack-boundary=2 -march=i686 -mtune=pentium3 -ffreestanding -maccumulate-outgoing-args -DCONFIG_AS_CFI=1 -I
include/asm-i386/mach-default -fno-omit-frame-pointer -fno-optimize-sibling-calls -g -Wdeclaration-after-statement -Wno-pointer-sign -D"KBUILD_STR(s)=#s" -D"
KBUILD_BASENAME=KBUILD_STR(i8253)" -D"KBUILD_MODNAME=KBUILD_STR(i8253)" arch/i386/kernel/i8253.c
make[1]: *** [arch/i386/kernel/i8253.o] Fehler 139
make: *** [arch/i386/kernel] Fehler 2
gcc compiles it without a single complaint, though.
HTH
-- 
Tilman Schmidt                    E-Mail: tilman@imap.cc
Bonn, Germany
Diese Nachricht besteht zu 100% aus wiederverwerteten Bits.
Ungeöffnet mindestens haltbar bis: (siehe Rückseite)
[unhandled content-type:application/pgp-signature]