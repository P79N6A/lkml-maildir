Date: Thu, 28 Feb 2008 00:01:43 +0100
From: Bartlomiej Zolnierkiewicz <>
Subject: Re: [PATCH 4/5] ide-cd: shorten lines longer than 80 columns
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/2/27/391

On Wednesday 27 February 2008, Borislav Petkov wrote:
> On Wed, Feb 27, 2008 at 10:18:50PM +0100, Bartlomiej Zolnierkiewicz wrote:
> > On Wednesday 27 February 2008, Borislav Petkov wrote:
> > > Signed-off-by: Borislav Petkov <petkovbb@gmail.com>
> > 
> > interdiff for the merged version
> > 
[...]
> > diff -u b/drivers/ide/ide-cd.c b/drivers/ide/ide-cd.c
> > --- b/drivers/ide/ide-cd.c
> > +++ b/drivers/ide/ide-cd.c
> > @@ -510,7 +510,7 @@
> >  	default:
> >  		if (!(rq->cmd_flags & REQ_QUIET))
> >  			printk(KERN_INFO "ide-cd: cmd 0x%x timed out\n",
> > -				rq->cmd[0]);
> > +					 rq->cmd[0]);
> 
> why do you push the rq->cmd[0] thingy back here. Shouldn't it be aligned
> with the opening brace as the zillion others so far?
IDE is quite consistent with the above style but maybe it is just me being
used to it.  I could revert this change if you feel strong about it...
> > @@ -819,8 +819,8 @@
> >  static void restore_request(struct request *rq)
> >  {
> >  	if (rq->buffer != bio_data(rq->bio)) {
> > -		sector_t n = (rq->buffer - (char *) bio_data(rq->bio)) /
> > -				SECTOR_SIZE;
> > +		sector_t n =
> > +			(rq->buffer - (char *)bio_data(rq->bio)) / SECTOR_SIZE;
> 
> i must say, lines like this one always look ugly, no matter the formatting
> tricks.
For this case there is a simple solution: fix ide-cd to use hwif->sg_table
instead of having it to walk rq->bio's and the whole function will vanish. ;-)
[ IOW We are putting way too much time into these coding style fixes and as
  the old code is replaced with the new one the coding style improves itself. ]
Thanks,
Bart