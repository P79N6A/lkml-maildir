Date: Tue, 30 Aug 2005 16:46:02 +1000
From: Benjamin Herrenschmidt <>
Subject: Re: Ignore disabled ROM resources at setup
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/8/30/34

On Mon, 2005-08-29 at 22:29 -0700, Linus Torvalds wrote:
> 
> On Tue, 30 Aug 2005, Benjamin Herrenschmidt wrote:
> > 
> > I was just testing a slightly different one that appear to fix the
> > problem :
> ...
> > +	rom_addr = region.start | (res->flags & PCI_REGION_FLAG_MASK);
> 
> I worry about this one. It's not really correct. The low en bits are 
> "reserved", and while I don't know whether writing zero is always correct, 
> I do know that just writing the low 4 bits with the old value is a bit 
> strange. And the flags don't save the other bits.
> 
> So I'd prefer either my previous diff, or one that just re-reads the bits 
> entirely, something like the appended..
Can you keep the part of my patch that adds error checking on the result
of pci_assign_resource() ?
> What does the PCI spec say about the reserved bits? Do we have to save 
> them?
I didn't see anything special about them, but I may have missed it.
Ben.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/