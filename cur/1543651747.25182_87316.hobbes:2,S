Date: Tue, 05 Nov 2002 21:50:02 -0800
From: george anzinger <>
Subject: NMI watchdog question.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/11/6/5

In io_apic.c there is the following bit of code:
	if (nmi_watchdog) {
		printk(KERN_WARNING "timer doesn't work through the
IO-APIC - disabling NMI Watchdog!\n");
		nmi_watchdog = 0;
	}
On at least some systems, disabling the above store leaves a
valid nmi watchdog timer.
In attempting to understand how the NMI watchdog works I
think I have found that:
a. the NMI interrupts are generated by the performance
counter in the cpu and
b. the test to see if the cpu is stalled is on a counter
that is bumped by the apic counter interrupt code.
If this is so (and help me to understand if it is not), then
what do the timer interrupts going thru the IO_APIC have to
do with the NMI watchdog.
Is it possible that the above code is a hold over from when
things were done differently?
-- 
George Anzinger   george@mvista.com
High-res-timers: 
http://sourceforge.net/projects/high-res-timers/
Preemption patch:
http://www.kernel.org/pub/linux/kernel/people/rml
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/