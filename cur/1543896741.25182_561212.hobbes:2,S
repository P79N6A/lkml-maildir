Date: Fri, 22 Jun 2007 10:41:38 -0700
From: Paul Jackson <>
Subject: Re: cpuset attach_task to touch per-cpu kernel threads?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/6/22/270

Srivatsa wrote:
> That again is not fool-proof. What if kernel-tasks change their cpu affinity
> after we have done the is_pinned_kernel_thread() test? Ideally they
> should not, but one never knows!
> 
> IMHO we simply should not allow kernel threads to move out of top-cpuset
Well ... in some theoretical world, perhaps.
In reality, there a big pile of kernel threads that we want to move out
of the root cpuset.  And in reality, kernel threads don't change from
being unrestricted (all cpus allowed) to being pinned (to some specific
subset of cpus).  Kernel threads that need to be pinned know it up
front; it's an essential part of whatever they do.
I've been working with installed customer configurations for about two
and a half years now that move unpinned kernel threads out of the top
cpuset, as part of keeping portions of the system freed up for dedicated
jobs.  I cannot agree to removing this capability.
Nack.
-- 
                  I won't rest till it's the best ...
                  Programmer, Linux Scalability
                  Paul Jackson <pj@sgi.com> 1.925.600.0401
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/