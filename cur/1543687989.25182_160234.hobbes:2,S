Date: Mon, 25 Aug 2003 23:27:08 +0200
From: Дамјан Георгиевски <>
Subject: Trivial patch for drivers/serial/8250_cs
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/8/25/247

This patch is against 2.6.0-test4.
It fixes the pcmcia serial driver to know its now called 8250_cs and not 
serial_cs...
Without this patch 8250_cs compiles but doesn't work.
All the patch does is change several "serial_cs" occurences to "8250_cs".
PS.
another possible sollution is to change everything (including the file 
name) from "8250_cs" to "serial_cs" like it is in 2.4
--- 8250_cs.c~	2003-08-25 23:13:51.000000000 +0200
+++ 8250_cs.c	2003-08-25 22:45:15.000000000 +0200
@@ -2,7 +2,7 @@
 
     A driver for PCMCIA serial devices
 
-    serial_cs.c 1.134 2002/05/04 05:48:53
+    8250_cs.c 1.134 2002/05/04 05:48:53
 
     The contents of this file are subject to the Mozilla Public
     License Version 1.1 (the "License"); you may not use this file
@@ -58,7 +58,7 @@
 static int pc_debug = PCMCIA_DEBUG;
 MODULE_PARM(pc_debug, "i");
 #define DEBUG(n, args...) if (pc_debug>(n)) printk(KERN_DEBUG args)
-static char *version = "serial_cs.c 1.134 2002/05/04 05:48:53 (David Hinds)";
+static char *version = "8250_cs.c 1.134 2002/05/04 05:48:53 (David Hinds)";
 #else
 #define DEBUG(n, args...)
 #endif
@@ -116,7 +116,7 @@
 static int serial_event(event_t event, int priority,
 			event_callback_args_t * args);
 
-static dev_info_t dev_info = "serial_cs";
+static dev_info_t dev_info = "8250_cs";
 
 static dev_link_t *serial_attach(void);
 static void serial_detach(dev_link_t *);
@@ -281,7 +281,7 @@
 		serial.flags |= UPF_BUGGY_UART;
 	line = register_serial(&serial);
 	if (line < 0) {
-		printk(KERN_NOTICE "serial_cs: register_serial() at 0x%04lx,"
+		printk(KERN_NOTICE "8250_cs: register_serial() at 0x%04lx,"
 		       " irq %d failed\n", (u_long) serial.port, serial.irq);
 		return -EINVAL;
 	}
@@ -401,7 +401,7 @@
       found_port:
 	if (i != CS_SUCCESS) {
 		printk(KERN_NOTICE
-		       "serial_cs: no usable port range found, giving up\n");
+		       "8250_cs: no usable port range found, giving up\n");
 		cs_error(link->handle, RequestIO, i);
 		return -1;
 	}
@@ -497,7 +497,7 @@
 	i = CardServices(RequestIRQ, link->handle, &link->irq);
 	if (i != CS_SUCCESS) {
 		printk(KERN_NOTICE
-		       "serial_cs: no usable port range found, giving up\n");
+		       "8250_cs: no usable port range found, giving up\n");
 		cs_error(link->handle, RequestIRQ, i);
 		link->irq.AssignedIRQ = 0;
 	}
@@ -686,18 +686,18 @@
 static struct pcmcia_driver serial_cs_driver = {
 	.owner		= THIS_MODULE,
 	.drv		= {
-		.name	= "serial_cs",
+		.name	= "8250_cs",
 	},
 	.attach		= serial_attach,
 	.detach		= serial_detach,
 };
 
-static int __init init_serial_cs(void)
+static int __init init_8250_cs(void)
 {
 	return pcmcia_register_driver(&serial_cs_driver);
 }
 
-static void __exit exit_serial_cs(void)
+static void __exit exit_8250_cs(void)
 {
 	pcmcia_unregister_driver(&serial_cs_driver);
 
@@ -706,7 +706,7 @@
 		serial_detach(dev_list);
 }
 
-module_init(init_serial_cs);
-module_exit(exit_serial_cs);
+module_init(init_8250_cs);
+module_exit(exit_8250_cs);
 
 MODULE_LICENSE("GPL");