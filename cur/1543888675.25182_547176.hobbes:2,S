Date: Mon, 21 May 2007 19:43:55 +0400
From: Andrey Borzenkov <>
Subject: Re: [Bug 8498], [Bug 8510], and Re: Can't s2ram 22-rc2
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/5/21/262

On Monday 21 May 2007, Alan Stern wrote:
> Andrey, Soeren, and Avuton: Please try this patch with 2.6.22-rc2 or
> later and see if it fixes your problems.
>
It does; thank you!
> Greg, if this works then I'll send it in the proper form for a patch,
> and you can use it to replace
>
> 	usb-make-the-autosuspend-workqueue-thread-freezable.patch
>
> Alan Stern
>
>
> Index: 2.6.22-rc2/drivers/usb/core/usb.c
> ===================================================================
> --- 2.6.22-rc2.orig/drivers/usb/core/usb.c
> +++ 2.6.22-rc2/drivers/usb/core/usb.c
> @@ -205,7 +205,7 @@ struct device_type usb_device_type = {
>
>  static int ksuspend_usb_init(void)
>  {
> -	ksuspend_usb_wq = create_singlethread_workqueue("ksuspend_usbd");
> +	ksuspend_usb_wq = create_freezeable_workqueue("ksuspend_usbd");
>  	if (!ksuspend_usb_wq)
>  		return -ENOMEM;
>  	return 0;
[unhandled content-type:application/pgp-signature]