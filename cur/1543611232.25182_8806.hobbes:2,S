Date: Wed, 28 Nov 2001 16:35:55 +0000 (GMT)
From: Ian Stirling <>
Subject: Re: Journaling pointless with today's hard disks?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/11/28/264

> 
> ----- Original Message -----
> =46rom: "Matthias Andree" <matthias.andree@stud.uni-dortmund.de>
> To: <linux-kernel@vger.kernel.org>
> Sent: Tuesday, November 27, 2001 5:39 PM
> Subject: Re: Journaling pointless with today's hard disks?
> 
<snip>
> I think most people here are convinced that there is not time to write  a
> several-MB (worst case) cache to the platters in case of a power failure.
> Special drives for this case could of course be manufactured, and here's
> a theory of mine: Wouldn't a battery backed-up SRAM cache do the thing?
No.
Sram is expensive, as are batteries (they also tend to have poor
cycle life, and mean that you only keep the data until the battery dies.
Numbers...
Taking again as an example, something that's in my machine:
The Fujitsu MPG3409AT, a bargain basement 40G drive.
2 platters, 5400RPM.
It has (at the high end) 798 sec/track.
Worst case, to write a journal track takes a full seek, and at least one
complete rev.
Assuming that we want to write it over two tracks, 
This is 18ms + 11*2ms = 40ms.
Now, how much power? 
6.3W is needed, so that's .252J
Assuming that the 12V line can be allowed to sag to 10V, that'll take 20%^2 
of the energy of the cap out, so we need a cap that stores about .7J, or 
a 2500uF cap.
12V 2500uf aluminium electrolytic is rather large, 25mm long *10mm diameter.
There is space for this, in the overall package, but it would need a slight
redesign.
The cost of the component is about 10 cents US.
Another 20-80 cents may be needed for the power switch.
This assumes that no power can be used from the spindle motor, which may
well be wrong.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/