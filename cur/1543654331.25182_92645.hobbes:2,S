Date: Wed, 27 Nov 2002 21:25:35 +0100
From: Trond Myklebust <>
Subject: Re: [Ext2-devel] Re: [NFS] htree+NFS (NFS client bug?)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/11/27/151

>>>>> " " == Stephen C Tweedie <sct@redhat.com> writes:
     > So I suspect that this is a root a client problem --- the
     > client has repeated a READDIR despite being told that the
     > previous reply was EOF
I disagree. As far as the client is concerned, it has just been asked
to read the entry that corresponds to that particular cookie.  If
glibc issued a new readdir request (which is what I suspect has
happened here), the NFS client has no idea what the previous reply
was, or even where it was positioned within the page cache (the latter
may have been cleared). All it can do is look up the cookie afresh and
start reading from there.
IOW: A cookie should *always* be unique. There are no exceptions to
this rule.
Cheers,
  Trond
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/