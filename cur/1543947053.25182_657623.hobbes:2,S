Date: Thu, 21 Feb 2008 22:50:22 +0300
From: Cyrill Gorcunov <>
Subject: [PATCH] x86: cleanup - use PAGE_SIZE instead of numeric constant in boot code
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/2/21/284

This patch replaces 4096 numeric constant with PAGE_SIZE macro.
Signed-off-by: Cyrill Gorcunov <gorcunov@gmail.com>
---
Text segments of old and new files *are* the same so
it wouldn't break current kernel.
 main.c |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)
Index: linux-2.6.git/arch/x86/boot/main.c
===================================================================
--- linux-2.6.git.orig/arch/x86/boot/main.c	2008-02-09 22:27:13.000000000 +0300
+++ linux-2.6.git/arch/x86/boot/main.c	2008-02-21 22:28:10.000000000 +0300
@@ -14,6 +14,7 @@
  * Main module for the real-mode kernel code
  */
 
+#include <asm/page.h>
 #include "boot.h"
 
 struct boot_params boot_params __attribute__((aligned(16)));
@@ -36,7 +37,7 @@ static void copy_boot_params(void)
 	const struct old_cmdline * const oldcmd =
 		(const struct old_cmdline *)OLD_CL_ADDRESS;
 
-	BUILD_BUG_ON(sizeof boot_params != 4096);
+	BUILD_BUG_ON(sizeof boot_params != PAGE_SIZE);
 	memcpy(&boot_params.hdr, &hdr, sizeof hdr);
 
 	if (!boot_params.hdr.cmd_line_ptr &&