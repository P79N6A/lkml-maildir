Date: Tue, 23 Mar 2004 17:59:20 +0000
From: Andy Whitcroft <>
Subject: Re: can device drivers return non-ram via vm_ops->nopage?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/3/23/124

--On 21 March 2004 23:58 +0000 Russell King <rmk+lkml@arm.linux.org.uk>
wrote:
> On Sun, Mar 21, 2004 at 03:51:31PM -0800, Linus Torvalds wrote:
>> That might be the minimal fix, since it would basically involve:
>>  - change whatever offensive "virt_to_page()" calls into 
>>    "dma_map_to_page()".
>>  - implement "dma_map_to_page()" for all architectures.
>> 
>> Would that make people happy?
> 
> Unfortunately this doesn't make dwmw2 happy - he claims to have machines
> which implement dma_alloc_coherent using RAM which doesn't have any
> struct page associated with it.
Would it not be possible to allocate struct page's for these special areas
of memory?  Worst, worst, worst case could they not represent pages in a
memory only node in the NUMA sense?  I am sure there is some way they could
be 'tacked' onto the end of the cmap in reality?
-apw
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/