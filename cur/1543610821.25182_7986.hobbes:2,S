Date: Mon, 26 Nov 2001 21:47:38 MET-1
From: "Petr Vandrovec" <>
Subject: Re: New ac patch???
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/11/26/193

On 26 Nov 01 at 20:39, Alan Cox wrote:
> > If it will go into mainstream, please change it to config option or
> > something like that. I'm doing 
> > 
> > for a in /dev/hd[a-z]; do hdparm -Y $a; done
> 
> Thats somewhat undefined in its behaviour. You might also page after the
> hdparm -Y
cat /sbin/halt > /dev/null
cat /bin/sleep > /dev/null
for a in /dev/hd[a-z]; do /sbin/hdparm -Y $a; done
/bin/sleep 1
/sbin/halt -d -f -i -p -h
works without a glitch - libc & co. is already in memory due to running
other code, hdparm is read during first pass through the loop, and cat 
brings /sbin/halt into the memory. And as root filesystem is mounted 
read-only at that time, there are of course no atime updates pending from 
these accesses.
                                        Best regards,
                                            Petr Vandrovec
                                            vandrove@vc.cvut.cz
                                            
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/