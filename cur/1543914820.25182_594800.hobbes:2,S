Date: Sat, 15 Sep 2007 15:36:02 -0700 (PDT)
From: David Miller <>
Subject: Re: SPARC{,64}: kernel_termios_to_user_termios_1 missing
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/9/15/204

From: "Horst H. von Brand" <vonbrand@inf.utfsm.cl>
Date: Sat, 15 Sep 2007 17:37:55 -0400
> git-describe says this is v2.6.23-rc6-168-g53a3f30
> I'm getting:
> 
>   drivers/char/tty_ioctl.c: In function 'n_tty_ioctl':
>   drivers/char/tty_ioctl.c:799: error: implicit declaration of function 'kernel_termios_to_user_termios_1'
> 
> This is a macro at the very end of include/asm-<foo>/termios.h for i686, on
> SPARC and SPARC64 it is missing. Sorry, I've got no clue on how to define
> this correctly here.
> 
> It is also missing on alpha, blackfin, parisc, sh64, sh, xtensa
This has been reported and discussed extensively on the lists
over the past 4 or 5 days.
It is a well known issue, and if you just need to get the sparc64
build working so you can test it out just use the patch below:
diff --git a/include/asm-sparc/termios.h b/include/asm-sparc/termios.h
index d767f20..25e9cbb 100644
--- a/include/asm-sparc/termios.h
+++ b/include/asm-sparc/termios.h
@@ -142,6 +142,11 @@ struct winsize {
 	0; \
 })
 
+#define user_termios_to_kernel_termios_1(k, u) \
+	user_termios_to_kernel_termios(k, u)
+#define kernel_termios_to_user_termios_1(u, k) \
+	kernel_termios_to_user_termios(u, k)
+
 #endif	/* __KERNEL__ */
 
 #endif /* _SPARC_TERMIOS_H */
diff --git a/include/asm-sparc64/termios.h b/include/asm-sparc64/termios.h
index f05d390..6fc71e6 100644
--- a/include/asm-sparc64/termios.h
+++ b/include/asm-sparc64/termios.h
@@ -145,6 +145,11 @@ struct winsize {
 	err; \
 })
 
+#define user_termios_to_kernel_termios_1(k, u) \
+	user_termios_to_kernel_termios(k, u)
+#define kernel_termios_to_user_termios_1(u, k) \
+	kernel_termios_to_user_termios(u, k)
+
 #endif	/* __KERNEL__ */
 
 #endif /* _SPARC64_TERMIOS_H */
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/