Date: Fri, 9 Mar 2007 13:11:20 +0200
From: Matti Aarnio <>
Subject: Re: more than 65535 outbound connections
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/3/9/125

On Fri, Mar 09, 2007 at 04:13:00PM +0530, Niklaus wrote:
> yes now lets take 2 dest machines , source ip is fixed , source port (2^16 
> - 1)
> destip is fixed (a.a.a.a and b.b.b.b) ,dest port(2^16 -1) each ,
> 
> for a connection we have one port used , say connection 1 is
> 
> source ip,port 1 , a.a.a.a port 1
> source ip,port 2 , a.a.a.a port 2
> .
> .
> .
> source ip,port 65535 , a.a.a.a port 65535
You do have some sort of fixation of having same port numbers at both ends.
In some rare applications that is done (e.g. with NTP server-server connections
using UDP), but it is very rare and never done with TCP.
Now if you have 65535 server ports at a.a.a.a, you can have very nearly
4000 million TCP streams in between them.
> so total of 65535 connections (assume traffic is still going on, a
> movie on a slow line dialup or 1kbps )
> 
> now if i try to open another connection (assume lots of file
> descriptors are present) to a.a.a.a what happens
> 
> to b.b.b.b what happens
> 
> i think both will not get established as the OS doesn't have any free
> source ports or am i wrong
  you are wrong.
> >David Lang
/Matti Aarnio
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/