Date: Fri, 17 Jun 2005 17:25:57 -0700
From: Venkatesh Pallipadi <>
Subject: Re: arch/i386/boot/video.S hang
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/6/17/188

On Thu, Jun 16, 2005 at 06:58:51PM +0100, Simon Richard Grint wrote:
> On Thu, Jun 16, 2005 at 10:33:41AM -0700, Venkatesh Pallipadi wrote:
> > What boot loader are you using. grub/lilo?
> 
> The same thing happens with either grub or lilo, but I'm using grub at 
> present
> 
> > Does it work with CONFIG_VIDEO_SELECT disabled in your kernel CONFIG?
> 
> It works fine if CONFIG_VIDEO_SELECT is disabled.  Even with 
> CONFIG_VIDEO_SELECT enabled, the problem only arises if I pass a vga= 
> parameter to the kernel
> 
> Thanks for your help
> 
This one continues to be mysterious.
One reason I could think of: VBE call 4f15:0s is storing more than 128 bytes on this platform. With the base address at 0x440, it can write much longer, without affecting anything else in zero page. But, at 0x140 it overwrites some other fields.
But, that doesn't explain why it only fails when vga=<num> is passed. For the above theory it should fail whenever VIDEO_SELECT is enabled.
Can you try some other address higher than 0x440 and less than 0x600 for and see whether it works? Or you can also try and print complete boot_params[] at some place in arch/i386/kernel/setup.c:setup_arch() in the case where it runs fine (with 0x440) and send me the log.
Thanks,
Venki
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/