Date: Tue, 06 Jan 2009 06:54:08 -0800
From: Mike Travis <>
Subject: Re: [patch] x86: make UV support optional
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2009/1/6/167

Jack Steiner wrote:
> On Tue, Jan 06, 2009 at 07:03:48AM +0100, Nick Piggin wrote:
>> UV is fairly rare.... and much of the support is already there to cope with
>> 32-bit builds. So this makes sense I think.
>>
> 
> 
> Looks ok to me. One suggestion though. There is a MAXSMP config
> option. I would suggest enabling UV if MAXSMP is enabled. This
> will help ensure that UV is tested more frequently & may minimize
> regressions.
> 
> 
> --- jack
Nick - would you add something like this to your patch?  Thanks! Mike
---
Subject: x86: enable UV when MAXSMP is configured.
We want UV code to be tested even for non-UV architectures.  Enabling
MAXSMP specifies "maximizing the system capabitlity" and UV is one of
these methods.  Also helps distros select the correct config options
for their default configurations.
Signed-off-by: Mike Travis <travis@sgi.com>
---
 arch/x86/Kconfig |    1 +
 1 file changed, 1 insertion(+)
--- linux-2.6-for-ingo.orig/arch/x86/Kconfig
+++ linux-2.6-for-ingo/arch/x86/Kconfig
@@ -616,6 +616,7 @@ config MAXSMP
 	bool "Configure Maximum number of SMP Processors and NUMA Nodes"
 	depends on X86_64 && SMP && DEBUG_KERNEL && EXPERIMENTAL
 	select CPUMASK_OFFSTACK
+	select X86_UV
 	default n
 	help
 	  Configure maximum number of CPUS and NUMA Nodes for this architecture.