Date: Wed, 27 Aug 2003 15:33:24 +0200
From: "Thomas Spatzier" <>
Subject: [PATCH] memory leak in sysfs
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/8/27/98

Hello Patrick,
please verify the following patch. We found a memory leak in sysfs. Entries
in the dentry_cache allocated for objects in sysfs are not freed when the
objects in sysfs are deleted. This effect is due to inconsistent reference
counting in sysfs. Furthermore, when calling sysfs_remove_dir the deleted
directory was not removed from its parent's list of children. The attached
patch should fix the problems.
(See attached file: linux-2.6.0-test3-sysfs.patch)
Best regards,
Thomas[unhandled content-type:application/octet-stream]