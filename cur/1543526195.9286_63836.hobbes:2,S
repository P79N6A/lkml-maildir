Date: Thu, 17 Feb 2000 00:46:01 -0500
From: Mike Johnson <>
Subject: 2.3.46 build problems (typo in ll_rw_blk.c ?)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/2/17/55

Hello,
This may be a known issue, but I didn't see it in the archives on
kernelnotes.org, so...
Useless background:
I was looking to get support for the USB cradle for my Handspring 
Visor, and the USB backport to 2.2.14 wasn't working for me, so
I thought I'd try 2.3.x.  I tried 2.3.44 the other day, and had
boot issues, so I grabbed 2.3.46 today and tried again.
During the build of 2.3.46, I ran into this error:
gcc -D__KERNEL__ -I/usr/src/linux-2.3.46/include -D__SMP__ -Wall -Wstrict-protot
ypes -O2 -fomit-frame-pointer -fno-strict-aliasing -pipe   -DCPU=686 -march=i686
   -DEXPORT_SYMTAB -c ll_rw_blk.c
ll_rw_blk.c:237: warning: static declaration for `generic_plug_device' follows n
on-static
ll_rw_blk.c: In function `blk_init_queue':
ll_rw_blk.c:256: structure has no member named `back_merges_fn'
ll_rw_blk.c: In function `generic_make_request':
ll_rw_blk.c:682: warning: `__entry' might be used uninitialized in this function
ll_rw_blk.c:950: warning: `entry' might be used uninitialized in this function
ll_rw_blk.c:566: warning: `entry' might be used uninitialized in this function
make[3]: *** [ll_rw_blk.o] Error 1
make[3]: Leaving directory `/usr/src/linux-2.3.46/drivers/block'
make[2]: *** [first_rule] Error 2
make[2]: Leaving directory `/usr/src/linux-2.3.46/drivers/block'
make[1]: *** [_subdir_block] Error 2
make[1]: Leaving directory `/usr/src/linux-2.3.46/drivers'
make: *** [_dir_drivers] Error 2
So, I looked at drivers/block/ll_rw_blk.c, line 256 and saw:
q->back_merges_fn               = ll_back_merge_fn;
A quick grep through the file and I realized that this is probably a typo
that should read:
q->back_merge_fn        = ll_back_merge_fn;
I made the change, typed 'make', and everything built just fine.
It's such a simple fix that I hesitate to post a patch, but here it is:
--- linux/drivers/block/ll_rw_blk.c.orig        Thu Feb 17 00:00:22 2000
+++ linux/drivers/block/ll_rw_blk.c     Thu Feb 17 00:00:33 2000
@@ -253,7 +253,7 @@
        INIT_LIST_HEAD(&q->queue_head);
        q->elevator = ELEVATOR_DEFAULTS;
        q->request_fn           = rfn;
-       q->back_merges_fn               = ll_back_merge_fn;
+       q->back_merge_fn        = ll_back_merge_fn;
        q->front_merge_fn       = ll_front_merge_fn;
        q->merge_requests_fn    = ll_merge_requests_fn;
        q->make_request_fn      = NULL;
-- 
And Satan's computer is hard to test.  --  Bruce Schneier
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/