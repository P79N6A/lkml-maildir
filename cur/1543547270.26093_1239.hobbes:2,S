Date: Fri, 1 Sep 2000 22:31:11 +0200
From: Rasmus Andersen <>
Subject: [patchlet] Take two: Removing unneeded lines in vmtruncate.c (2.4.0-t8p1)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/9/1/67

Hi.
(Thanks to Tigran Aivazian for catching me not being careful enough).
The following patch removes two, AFAICS, unneeded lines from mm/memory.c:
vmtruncate():
--- linux-240test8-pre1/mm/memory.c	Thu Aug 10 16:29:54 2000
+++ linux/mm/memory.c	Fri Sep  1 22:25:53 2000
@@ -985,8 +985,6 @@
 	} while ((mpnt = mpnt->vm_next_share) != NULL);
 out_unlock:
 	spin_unlock(&mapping->i_shared_lock);
-	/* this should go into ->truncate */
-	inode->i_size = offset;
 	if (inode->i_op && inode->i_op->truncate)
 		inode->i_op->truncate(inode);
 	return;
-- 
        Rasmus(rasmus@jaquet.dk)
With Microsoft products, failure is not an option - it's a standard component. 
  -- Anonymous
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/