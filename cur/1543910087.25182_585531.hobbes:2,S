Date: Fri, 17 Aug 2007 14:47:27 +0800
From: Fengguang Wu <>
Subject: Re: [PATCH 4/4] maps: /proc/<pid>/pmaps interface - memory maps in granularity of pages
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/8/17/35

Matt,
It's not easy to do direct performance comparisons between pmaps and
pagemap/kpagemap. However some close analyzes are still possible :)
1) code size
pmaps                   ~200 LOC
pagemap/kpagemap        ~300 LOC
2) dataset size
take for example my running firefox on Intel Core 2:
VSZ             400 MB
RSS              64 MB, or 16k pages
pmaps            64 KB, wc shows 2k lines, or so much page ranges
pagemap         800 KB, could be heavily optimized by returning partial data
kpagemap        256 KB
3) runtime overheads
pmaps            2k lines of string processing(encode/decode)
kpagemap        16k seek()/read()s, and context switches (could be
                    optimized somehow by doing a PFN sort first, but
                    that's also non-trivial overheads)
So pmaps seems to be a clear winner :)
Thank you,
Fengguang
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/