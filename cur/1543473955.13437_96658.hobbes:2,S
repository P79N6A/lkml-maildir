Date: Sun, 3 Jan 1999 02:14:56 +0200 (EET)
From: Radu Raduta <>
Subject: 2.2.0 ad1848 driver
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/1/3/8

Hello hannu, scott, linus, alan, and all the others.
It's kinda late now, so excuse me if i say something really stupid, but
i'm on duty to help make 2.2 easy to use to those end-users (or normal
users...)
Anyway, here's the story: i own one of those "el-cheapo" Yamaha OPL3-SAX
cards. This card hasn't had a driver until 2.1.131ac12, so it was run with
the standard WSS/MSS driver, all worked OK. Now, that the driver appeared
in 2.1.131ac12 and later, situation became better, as now those Line1,
Line2 and Line3 are correctly mapped on CD, SYNTH and LINE, and we have
Bass and Treble.
The problem appeared with 2.1.132ac[1 or 2] and the folowing 2.2.0-preXs 
that introduced a new version of ad1848.c . With this version, the mixer
doesn't have a Line3 control any more, and so the LineIn of the card is
unajustable. I tracked down this problem as much as to see that it's
generated by the fact that the new ad1848.c identifyes the card as CS4248,
when the old one sees a CS4231. Another problem with this new driver is
that when it unloads, it doesn't seem to dealocate dma2, and thus sound.o
complains:
 Sound: Hmm, DMA1 was left allocated - fixed
The card has an YMF719 chip, and i don't know what the correct identification
is, as i don't have the card's specs, but something should be modified
in either opl3sa2.c or ad1848.c (i'd incline for the last one, becouse if
only the ad1848 driver is loaded, the card has only two Line entryes,
which are remapped to cd and synth...). I'm now using the ad1848.c from
2.1.131ac12, and all is well ( for me :)
I'd fix this myself, but i have no knowledge whatsoever about neither
MSS/WSS nor the OPL3SAX card, and it would probably take me forever to fix
this out, when Hannu or Scott would fix that in time to 2.2 thus avoiding
all those asking why can't they adjust line in level, when it's doable
with Win9x.
Oh, and some other thing: the card is unusable after a warm reboot from
Win95 OSR2. there was a thread about this some time ago, but the end
conclusion was (by Alan) that you have no choice but to cold boot. isn't
there any posibility to fix this from inside the driver ? (except for a
function to delete all FAT/NTSF partitions :). If this isn't gonna be
fixed, we'll have quite a few mails about this...
Hope this helps...
thanx
radu
--[ Radu Raduta ]---[ radu@mail.dnttm.ro ]-----------------------------------[ LINUX ]--
"Here look after this penguin for me, oh by the way it bites"
    - Alan Cox taking over 2.1.131 development for a week or so as Linus went to Finland 
"Gravitation cannot be held responsible for people falling in love." -- Albert Einstein
"Will learn for food !" - me right now.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/