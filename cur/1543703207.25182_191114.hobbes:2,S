Date: Wed, 14 Jan 2004 22:02:58 +0100
From: Jakob Oestergaard <>
Subject: Re: Proposed enhancements to MD
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/1/14/209

On Wed, Jan 14, 2004 at 11:40:52AM -0800, Mike Fedyk wrote:
> On Wed, Jan 14, 2004 at 08:07:02PM +0100, Jakob Oestergaard wrote:
> > 
http://unthought.net/raidreconf/index.shtml
> > 
> > I know of one bug in it which will thoroughly smash user data beyond
> > recognition - it happens when you resize RAID-5 arrays on disks that are
> > not of equal size.  Should be easy to fix, if one tried  :)
> > 
> 
> Hmm, that's if the underlying blockdevs are of differing sizes, right?  I
> usually do my best to make the partitions the same size, so hopefully that
> won't hit for me.  (though, I don't need to resize any arrays right now)
Make backups anyway  :)
> 
> > If you want it in the kernel doing hot-resizing, you probably want to
> > add some sort of 'progress log' so that one can resume the
> > reconfiguration after a reboot - that should be doable, just isn't done
> > yet.
> 
> IIRC, most filesystems don't support hot shrinking if they support
> hot-resizing, so that would only help with adding a disk to an array.
"only" adding disks... How many people actually shrink stuff nowadays?
I'd say having hot-growth would solve 99% of the problems out there.
And I think that's at least a good part of the reason why so few FSes
can actually shrink.  Shrinking can be a much harder problem too, though
- maybe that's part of the reason too.
> 
> > Right now it's entirely a user-space tool and it is not integrated with
> > the MD code to make it do hot-reconfiguration - integrating it with DM
> > and MD would make it truely useful.
> 
> True, but an intermediate step would be to call parted for resizing to the
> exact size needed for a raid0 -> raid5 conversion for example.
Yep.
 / jakob
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/