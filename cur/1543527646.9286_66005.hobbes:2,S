Date: Sun, 27 Feb 2000 20:15:58 +1100
From:  sblainey@au1 ...
Subject: PROBLEM: reading large volumes of data from a Segate Baracuda
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/2/27/26

When attempting to read large volumes of data from a Segate Baracuda, I
encounter some strage problems. Under kernel version 2.2.14 the system
completely crashes, locks up and the console is filled with debugging
information (I do not know of a way to capture this since the machine is no
longer responding). Under kernel 2.3.47 the console briefly displays
similiar debugging information (for about 0.5sec) and resumes normal
operation. The following however is logged to the system log:
Output from /var/log/syslog under kernel 2.3.47
--
Feb 27 14:58:21 darth-vader kernel: kmem_free: Bad obj addr (objp=c3bfd980,
name=buffer_head)
Feb 27 14:58:21 darth-vader kernel: kernel BUG at slab.c:1651!
Feb 27 14:58:21 darth-vader kernel: invalid operand: 0000
Feb 27 14:58:21 darth-vader kernel: CPU:    0
--
keywords: ide disk io, memory (slab.c was found in the mm directory)
darth-vader:/usr/src/linux# cat /proc/version
Linux version 2.3.47 (root@darth-vader) (gcc version 2.7.2.3) #1 Sun Feb 27
 14:3 8:40 EST 2000
darth-vader:/usr/src/linux/scripts# ./ver_linux
-- Versions installed: (if some fields are empty or look
-- unusual then possibly you have very old versions)
Linux darth-vader 2.3.47 #1 Sun Feb 27 14:38:40 EST 2000 i586 unknown
Kernel modules         2.1.121
Gnu C                  2.7.2.3
Binutils               2.9.1.0.19
Linux C Library        2.0.7
Dynamic linker         ldd: version 1.9.10
Procps                 1.2.9
Mount                  2.9g
Net-tools              2.01
Kbd                    0.96
Sh-utils               1.16
Modules Loaded
darth-vader:/proc# cat cpuinfo
processor       : 0
vendor_id       : GenuineIntel
cpu family      : 5
model           : 4
model name      : Pentium MMX
stepping        : 3
cpu MHz         : 200.456217
fdiv_bug        : no
hlt_bug         : no
sep_bug         : no
f00f_bug        : yes
coma_bug        : no
fpu             : yes
fpu_exception   : yes
cpuid level     : 1
wp              : yes
flags           : fpu vme de pse tsc msr mce cx8 mmx
bogomips        : 399.77
darth-vader:/proc# cat /proc/modules
darth-vader:/proc#
(hdc is the disk that the problem occurs on)
darth-vader:/proc/ide/hdc# cat driver
ide-disk version 1.09
darth-vader:/proc/ide/hdc# cat settings
name                    value           min             max
mode
----                    -----           ---             ---
----
bios_cyl                39761           0               65535           rw
bios_head               16              0               255             rw
bios_sect               63              0               63              rw
breada_readahead        4               0               127             rw
bswap                   0               0               1               r
file_readahead          0               0               2097151         rw
ide_scsi                0               0               1               rw
io_32bit                0               0               3               rw
keepsettings            0               0               1               rw
max_kb_per_request      64              1               127             rw
multcount               0               0               8               rw
nice1                   1               0               1               rw
nowerr                  0               0               1               rw
pio_mode                write-only      0               255             w
slow                    0               0               1               rw
unmaskirq               0               0               1               rw
using_dma               0               0               1               rw
darth-vader:/proc/ide/hdc# cat geometry
physical     39761/16/63
logical      39761/16/63
darth-vader:/proc/ide/hdc# cat model
ST320430A
darth-vader:/proc# cat slabinfo
slabinfo - version: 1.0
kmem_cache            37     62    124
nfs_wreq               0      0    284
nfs_dcookie            0      0     60
nfs_fh                 0      0     60
tcp_tw_bucket          1     42     92
tcp_bind_bucket       14    127     28
tcp_open_request       0     63     60
inet_peer_cache        0     63     60
ip_fib_hash           15    127     28
ip_dst_cache          18     25    156
arp_cache              3     31    124
skbuff_head_cache    279    300    156
sock                  35     40    796
filp                 263    294     92
inode_cache         3127   3135    348
bdev_cache             5     63     60
signal_queue           2     29    132
kiobuf                 0      0    220
buffer_head        46721  47616    124
mm_struct             22     50    156
vm_area_struct       377    504     60
dentry_cache        3531   3534    124
files_cache           21     27    444
uid_cache              3    127     28
size-131072            0      0 131072
size-65536             0      0  65536
size-32768             0      0  32768
size-16384             0      0  16384
size-8192              0      0   8192
size-4096              8      8   4096
size-2048            106    112   2048
size-1024             19     24   1024
size-512              38     40    512
size-256              33     42    284
size-128             615    625    156
size-64               98    126     92
size-32              322    378     60
slab_cache            40     63     60
I will be happy to provide any further information required to debug this
problem. Thanks!
Regards, Simon
Simon Blainey
Infrastructure and Open Technologies
IBM Global Services Australia
+61-402-036-347 sblainey@au1.ibm.com
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/