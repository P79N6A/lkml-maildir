Date: Thu, 16 Sep 2004 00:46:43 +0200
From: Andrea Arcangeli <>
Subject: Re: udev is too slow creating devices
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/9/15/334

On Wed, Sep 15, 2004 at 03:23:36PM -0700, Greg KH wrote:
> generic modules.)  Which modprobe will you want to wait for?
all the ones triggered by the modprobe? It's really a matter of sync and
async. if the discovery can be synchronous, then waiting for it is
doable. It's like when you call find_pci_device, you will sure know that
you will get either a definitive answer when the function returns, this
is not the case for USB it seems.
For scsi as well after the timeout triggers you know no device is
supposed to showup (and that's why boot has to be so slow, of course we
really should wait only for the root device and to scan all hosts in
parallel, but that's quite orthogonal, the issue is to get a synchronous
answer after a definite number of operations). if we hit an async path,
then I agree it doesn't even worth to wait and we should wakeup
immediatly.
> In the meantime, the rest of us over here will be using the /etc/dev.d
> interface...
I did aruge just because you said some of us is running a spin-and-sleep
instead of the /etc/dev.d interface, which contraddicts your statement
that everyone is using /etc/dev.d, which make it quite obvious using the
dev.d is more tricky than the old way. I have scripts myself insmodding
a device and then doing some I/O on it in /etc/init.d/boot.local, mixed
with other stuff, which is quite simple and works right now.
But I do certainly agree about your point in the other email that
sync-discovery could become a thing of the past, even if so far usb and
pci hotplug has been the exception ;). So sounds like we may just go
complicated for everything.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/