Date: Sun, 28 Feb 1999 23:03:17 +0100
From:  jens@pinguin ...
Subject: 2048 bytes/sector MOD + 2.2.1ac6
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/2/28/121

Hi,
update ... the problem has not changed since 2.0.33+patches, 2.1.106..131 so
I think this is not ac-related. =;)
as follows: Formatting a MOD with FAT and using this under linux works ok
(albeit slow). But as soon as I do a 'mke2fs -c -m0 -b 2048' on my MOD
medium, and start a 'copy -av ~ /mod', after a couple minutes, the kernel
spits out things like this
Feb 28 19:31:16 debian kernel: VFS: Disk change detected on device sd(8,16)
Feb 28 19:31:16 debian kernel: SCSI device sdb: hdwr sector= 2048 bytes.
Sectors= 310352 [606 MB] [0.6 GB]
Feb 28 19:31:16 debian kernel: sdb: Write Protect is off
Feb 28 19:31:16 debian kernel:  sdb: unknown partition table
Feb 28 19:33:31 debian smbd[564]: connect from loonie.zuhause.de
Feb 28 19:36:28 debian kernel: scsi0: MEDIUM ERROR on channel 0, id 2, lun
0, CDB: Write (6) 00 00 00 04 00
Feb 28 19:36:28 debian kernel: Deferred error sd08:10: sense key Medium
Error   
Feb 28 19:36:28 debian kernel: Additional sense indicates Write error - auto
reallocation failed
Feb 28 19:36:28 debian kernel: scsidisk I/O error: dev 08:10, sector 0
Feb 28 19:37:03 debian kernel: scsi : aborting command due to timeout : pid
146876, scsi0, channel 0, id 2, lun 0 Write (6) 00 00 00 02 00
Feb 28 19:37:03 debian kernel: ncr53c8xx_abort: pid=146876
serial_number=146885 
serial_number_at_timeout=146885
Feb 28 19:37:03 debian kernel: scsi : aborting command due to timeout : pid
146877, scsi0, channel 0, id 2, lun 0 Write (6) 04 80 02 02 00
Feb 28 19:37:03 debian kernel: ncr53c8xx_abort: pid=146877
serial_number=146886 
serial_number_at_timeout=146886
Feb 28 19:37:03 debian kernel: ncr53c875-0: abort ccb=c1f86820 (cancel)
Feb 28 19:37:04 debian kernel: SCSI host 0 abort (pid 146877) timed out -
resetting
Feb 28 19:37:04 debian kernel: SCSI bus is being reset for host 0 channel 0.
Feb 28 19:37:04 debian kernel: ncr53c8xx_reset: pid=146877 reset_flags=2
serial_number=146886 serial_number_at_timeout=146886
these are the first SCSI bus resets I've had in weeks - in fact, since I've
had my last try on formatting my MOD media. This happens on several disks,
which all pass the low level format (via scsiformat or SCSI BIOS utility)
without errors. 
One time when I didn't stop the copy process as soon as this occured, the
machine hung after a couple more resets. I had to reset linux - the first
time since ... well, the last MOD formatting experiments =;()
Why does the write reallocation fail? why are there medium errors on the
drive, when neither badblocks (mke2fs -c) nor SCSI BIOS low level format
detects anything? Why can I use the disks with VFAT (even under Linux)
without problems?
Drive:
Host: scsi0 Channel: 00 Id: 02 Lun: 00
  Vendor: FUJITSU  Model: M2513A           Rev: 1700
  Type:   Direct-Access                    ANSI SCSI revision: 02
Host:
General information:
  Chip NCR53C875, device id 0xf, revision id 0x3
  IO port address 0xe800, IRQ number 12
  Using memory mapped IO at virtual address 0xc4800000
  Synchronous period factor 12, max commands per lun 32
  Debug flags 0x0, verbosity level 2
Kernel: 2.2.1-ac6. 
debian:~# mke2fs  --version
mke2fs 1.12, 9-Jul-98 for EXT2 FS 0.5b, 95/08/09
A free sixpak for anyone who solves this =;)
-- 
_ciao, Jens_______________________________ 
http://www.pinguin.conetix.de
    cat /dev/boiler/water | tea | sieve > /cup
    mount -t hdev /dev/human/mouth01 /mouth ; cat /cup >/mouth/gulp
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/