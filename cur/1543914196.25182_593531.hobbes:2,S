Date: Wed, 12 Sep 2007 12:09:09 +0200
From: Michael Buesch <>
Subject: Re: [PATCH -mm] ssb: Make pcmciahost depend on PCMCIA=y
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/9/12/65

On Wednesday 12 September 2007 04:11:00 Paul Mundt wrote:
> SSB uses a bool (SSB_PCMCIAHOST_POSSIBLE) to determine whether to
> build in PCMCIA support or not, as the PCMCIA host code itself is
> also only a bool, make SSB_PCMCIAHOST_POSSIBLE depend on PCMCIA=y.
> 
> Without this, SSB_PCMCIAHOST_POSSIBLE evaluates to y when PCMCIA
> is built as a module, which results in link errors due to the
> pcmcia_access_configuration_register() accesses, where the symbol
> is only defined in a module.
> 
> Signed-off-by: Paul Mundt <lethal@linux-sh.org>
> 
> --
> 
>  drivers/ssb/Kconfig |    2 +-
>  1 file changed, 1 insertion(+), 1 deletion(-)
> 
> --- linux-2.6.23-rc4-mm1.orig/drivers/ssb/Kconfig	2007-09-11 15:15:52.000000000 +0900
> +++ linux-2.6.23-rc4-mm1/drivers/ssb/Kconfig	2007-09-12 10:51:53.000000000 +0900
> @@ -37,7 +37,7 @@
> 
>  config SSB_PCMCIAHOST_POSSIBLE
>  	bool
> -	depends on SSB && PCMCIA && EXPERIMENTAL
> +	depends on SSB && PCMCIA=y && EXPERIMENTAL
>  	default y
> 
>  config SSB_PCMCIAHOST
> 
> 
There we go. The usual SELECT dependency hell again...
Would changing SSB_PCMCIAHOST_POSSIBLE to tristate also fix it?
What would be the sideeffects?
I think this PCMCIA=y is not good, because it's perfectly
legal to build PCMCIA as module, while SSB and everything
that depends on SSB is also a module.
Would tristate fix that?
-- 
Greetings Michael.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/