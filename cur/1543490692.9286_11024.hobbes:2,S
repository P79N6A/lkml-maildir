Date: Tue, 23 Mar 1999 10:20:36 +0100
From: Hans de Goede <>
Subject: PPA Zip drive oops (part 2), might be devfs related
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/3/23/16

Hi all,
Well I got to reproduce the oops, but managed to again not get the
module symbols. Long story
don't ask. I symified anyway, and it didn't seem to need any module
symbols.
System info:
RedHat-5.2 system with RedHat's kernel-2.2 updates and
kernel-2.2.2+devfs p93
On a vxpro mb with cyrix p233mmx, with an advansys scsi adapter loaded
as module, this is scsi0
the zip is scsi1
How to produce oops:
-Attach a ppa zip
-insmod parport
-insmod parport_pc io=0x378 irq=7 dma=3
-insmod ppa
-insmod sd_mod
-use zip, it's under /mnt/zip which is a autofs dir!
-rmmod ppa
-rmmod sd_mod
-rmmod parport_pc
-rmmod parport
-work on system all's happy
-come to work next morning, oops on screen:
 -System still pings
 -Telnets gives the issue.net., but not the login prompt
 -VC switching works fine
 -typing on the login prompts works fine, pressing just enter get's me a
new login prompt
  typing a name vc is hang as in never ask for passwd, VC switching
still works
-reset
-look in logs, oops was logged, so was later bootpd activity so loggin
still worked?
This has happend a number of times. And it always happens after using
the zip, last time
I used the zip on purpose and yip there the oops was.
I've attached the latest oops, generated by ksymoops -K < oops.txt,
The -K since this was after a reboot.
And one of the earlier oopses, generated by ksymoops -K -O -L -m
System.map.saved < oops.txt
Please CC me I'm not on the list
Regards,
HansOptions used: -V (default)
              -o /lib/modules/2.2.2/ (default)
              -K (specified)
              -l /proc/modules (default)
              -m /usr/src/linux/System.map (default)
              -c 1 (default)
No modules in ksyms, skipping objects
No ksyms, skipping lsmod
Mar 23 04:02:02 hansg kernel: Unable to handle kernel paging request at virtual address c4880cc8
Mar 23 04:02:02 hansg kernel: current->tss.cr3 = 03d1c000, `r3 = 03d1c000
Mar 23 04:02:02 hansg kernel: *pde = 03e06063
Mar 23 04:02:02 hansg kernel: Oops: 0000
Mar 23 04:02:02 hansg kernel: CPU:    0
Mar 23 04:02:02 hansg kernel: EIP:    0010:[<c01448f0>]
Mar 23 04:02:02 hansg kernel: EFLAGS: 00010282
Mar 23 04:02:02 hansg kernel: eax: c21529e0   ebx: c21529e0   ecx: 00000000   edx: 00000800
Mar 23 04:02:02 hansg kernel: esi: c4880c98   edi: 00000800   ebp: 00000000   esp: c3241f4c
Mar 23 04:02:02 hansg kernel: ds: 0018   es: 0018   ss: 0018
Mar 23 04:02:02 hansg kernel: Process find (pid: 9238, process nr: 41, stackpage=c3241000)
Mar 23 04:02:02 hansg kernel: Stack: c2c36d80 c0144993 c21529e0 c0088d9c c0144cea c000b020 c0088de8 c2c36d80 
Mar 23 04:02:02 hansg kernel:        bffff70c 000003d8 c0083040 c0085160 c000b020 c012ac05 c2c36d80 c3241fb0 
Mar 23 04:02:02 hansg kernel:        c012aaa0 c3240000 bffff70c 08057398 bffffb0c c0144c34 c3241fb0 ffffffec 
Mar 23 04:02:02 hansg kernel: Call Trace: [<c0144993>] [<c0144cea>] [<c012ac05>] [<c012aaa0>] [<c0144c34>] [<c0107a40>] 
Mar 23 04:02:02 hansg kernel: Code: 8b 46 30 85 c0 74 f1 0f b7 df 53 ff d0 83 c4 04 85 c0 74 e4 
>>EIP: c01448f0 <check_disc_changed+24/94>
Trace: c0144993 <scan_dir_for_removable+33/40>
Trace: c0144cea <devfs_readdir+b6/2b4>
Trace: c012ac05 <sys_getdents+e1/134>
Trace: c012aaa0 <filldir+0/84>
Trace: c0144c34 <devfs_readdir+0/2b4>
Trace: c0107a40 <system_call+34/38>
Code:  c01448f0 <check_disc_changed+24/94>     00000000 <_EIP>:
Code:  c01448f0 <check_disc_changed+24/94>        0:	8b 46 30       	movl   0x30(%esi),%eax
Code:  c01448f3 <check_disc_changed+27/94>        3:	85 c0          	testl  %eax,%eax
Code:  c01448f5 <check_disc_changed+29/94>        5:	74 f1          	je     fffffff8 <_EIP+0xfffffff8> c01448e8 <check_disc_changed+1c/94>
Code:  c01448f7 <check_disc_changed+2b/94>        7:	0f b7 df       	movzwl %di,%ebx
Code:  c01448fa <check_disc_changed+2e/94>        a:	53             	pushl  %ebx
Code:  c01448fb <check_disc_changed+2f/94>        b:	ff d0          	call   *%eax
Code:  c01448fd <check_disc_changed+31/94>        d:	83 c4 04       	addl   $0x4,%esp
Code:  c0144900 <check_disc_changed+34/94>       10:	85 c0          	testl  %eax,%eax
Code:  c0144902 <check_disc_changed+36/94>       12:	74 e4          	je     fffffff8 <_EIP+0xfffffff8> c01448e8 <check_disc_changed+1c/94>
Options used: -V (default)
              -O (specified)
              -K (specified)
              -L (specified)
              -m System.map-2.2.2 (specified)
              -c 1 (default)
Mar 16 04:02:02 hansg kernel: Unable to handle kernel paging request at virtual address c4882cc8
Mar 16 04:02:02 hansg kernel: current->tss.cr3 = 01694000, `r3 = 01694000
Mar 16 04:02:02 hansg kernel: *pde = 03e0d063
Mar 16 04:02:02 hansg kernel: Oops: 0000
Mar 16 04:02:02 hansg kernel: CPU:    0
Mar 16 04:02:02 hansg kernel: EIP:    0010:[<c01448f0>]
Mar 16 04:02:02 hansg kernel: EFLAGS: 00010282
Mar 16 04:02:02 hansg kernel: eax: c32f2480   ebx: c32f2480   ecx: 00000000   edx: 00000800
Mar 16 04:02:02 hansg kernel: esi: c4882c98   edi: 00000800   ebp: 00000000   esp: c168ff4c
Mar 16 04:02:02 hansg kernel: ds: 0018   es: 0018   ss: 0018
Mar 16 04:02:02 hansg kernel: Process find (pid: 9365, process nr: 39, stackpage=c168f000)
Mar 16 04:02:02 hansg kernel: Stack: c2a6cba0 c0144993 c32f2480 c02d0d9c c0144cea c0093020 c02d0de8 c2a6cba0 
Mar 16 04:02:02 hansg kernel:        bffff70c 000003d8 c008b040 c008d160 c0093020 c012ac05 c2a6cba0 c168ffb0 
Mar 16 04:02:02 hansg kernel:        c012aaa0 c168e000 bffff70c 08057398 bffffb0c c0144c34 c168ffb0 ffffffec 
Mar 16 04:02:02 hansg kernel: Call Trace: [<c0144993>] [<c0144cea>] [<c012ac05>] [<c012aaa0>] [<c0144c34>] [<c0107a40>] 
Mar 16 04:02:02 hansg kernel: Code: 8b 46 30 85 c0 74 f1 0f b7 df 53 ff d0 83 c4 04 85 c0 74 e4 
>>EIP: c01448f0 <check_disc_changed+24/94>
Trace: c0144993 <scan_dir_for_removable+33/40>
Trace: c0144cea <devfs_readdir+b6/2b4>
Trace: c012ac05 <sys_getdents+e1/134>
Trace: c012aaa0 <filldir+0/84>
Trace: c0144c34 <devfs_readdir+0/2b4>
Trace: c0107a40 <system_call+34/38>
Code:  c01448f0 <check_disc_changed+24/94>     00000000 <_EIP>:
Code:  c01448f0 <check_disc_changed+24/94>        0:	8b 46 30       	movl   0x30(%esi),%eax
Code:  c01448f3 <check_disc_changed+27/94>        3:	85 c0          	testl  %eax,%eax
Code:  c01448f5 <check_disc_changed+29/94>        5:	74 f1          	je     fffffff8 <_EIP+0xfffffff8> c01448e8 <check_disc_changed+1c/94>
Code:  c01448f7 <check_disc_changed+2b/94>        7:	0f b7 df       	movzwl %di,%ebx
Code:  c01448fa <check_disc_changed+2e/94>        a:	53             	pushl  %ebx
Code:  c01448fb <check_disc_changed+2f/94>        b:	ff d0          	call   *%eax
Code:  c01448fd <check_disc_changed+31/94>        d:	83 c4 04       	addl   $0x4,%esp
Code:  c0144900 <check_disc_changed+34/94>       10:	85 c0          	testl  %eax,%eax
Code:  c0144902 <check_disc_changed+36/94>       12:	74 e4          	je     fffffff8 <_EIP+0xfffffff8> c01448e8 <check_disc_changed+1c/94>