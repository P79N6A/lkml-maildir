Date: Thu, 25 Nov 1999 11:04:59 +1100
From: Keith Owens <>
Subject: Re: [patch] Re: rmmod -a does not unload unused modules in 2.2.x
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/11/24/133

On Thu, 25 Nov 1999 01:51:54 +0200 (EET), 
Tuukka Toivonen <tuukkat@ees2.oulu.fi> wrote:
>On Thu, 25 Nov 1999, Keith Owens wrote:
>Yes, I see the race condition now. However, I still feel my patch is
>correct (in theory) and what is also needed with it, is a some kind of user
>space lock (a lock file, for example).
Q - When would a user space lock be released?
A - After the module had been used and was no longer required.
MOD_USED_ONCE together with the other MOD_ flags and reference *is* a
lock.  Changing to a user space lock would (a) be much more kernel code
(b) have exactly the same problem.
>>find out why you are loading modules marked as autoclean but not using
>>them.
That is your real problem.  Replacing one lock type with another is
fiddling with the symptoms, not the cause.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/