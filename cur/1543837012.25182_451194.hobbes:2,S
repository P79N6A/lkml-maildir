Date: Tue, 8 Aug 2006 12:23:57 +0300
From: "Shem Multinymous" <>
Subject: Re: [PATCH 01/12] thinkpad_ec: New driver for ThinkPad embedded controller access
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/8/8/73

On 8/8/06, Pavel Machek <pavel@suse.cz> wrote:
> Okay... but do we really need try_lock variant?
We need a nonlocking, nonsleeping variant to do the query in the timer
function (softirq context).
> but what is try_lock semantics when taking multiple locks...?
Currently, the same as the undelying down_trylock().
> > >> +     if (!check_dmi_for_ec()) {
> > >> +             printk(KERN_ERR "thinkpad_ec: no ThinkPad embedded
> > >controller!\n");
> > >> +             return -ENODEV;
> > >
> > >KERN_ERR is little strong here, no?
> >
> > Not sure what's the right one. The user tried to load a module and the
> > module can't do that; I saw some drivers use KERN_ERR some
> > KERN_WARNING in similar cases. Is there some guideline on choosing
> > printk levels?
>
> Well, this will also trigger for thinkpad module compiled into kernel,
> right?
OK, I'm changing the DMI failure to KERN_WARNING. Subsequent hardware
checks remains KERN_ERR, since failing those after passing the DMI
check really is abnormal (and indicative of danger).
  Shem
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/