Date: Tue, 6 Apr 1999 08:33:08 -0500 (CDT)
From: Kenneth Stephen <>
Subject: Detection of ide devices
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/4/6/57

Hi,
	I have an Aptiva S90 which apparently has some pathological ide
hardware. When I had first installed Linux on it, I just had two hard
drives (/dev/hd[ab]), and my cdrom drive was on /dev/hde. However, for
kernels 2.0.12 - 2.0.20 or so, the kernel kept autodetecting the cdrom as
/dev/hdc. The cdrom worked fine, even with this misdetection.
	Around 2.0.28 or so, I added a third hard drive (/dev/hdc). This
promptly broke autodetection. The cdrom drive was not detected at
all. After, a lot of searching around and reading docs, I figured out that
I have to specify the I/O addresses and IRQs for /dev/hde on the command
line. Thus, when I booted with '<kernel name> ide2=0x1e0,0x3e6,11', my
cdrom was correctly detected as /dev/hde.
	Just yesterday, I had the opportunity to try out an install disk
for 2.2.4. When I tried bringing up the kernel without specifying the ide2
parameters, the kernel detected the cdroms presence (oh joy!), but it
detected it on /dev/hdi (!!) - and my machine only has hardware for
ide[012] .
	Obviously, things have progressed a bit in ide device detection.
I'd like to take it the extra bit, and detect it correctly on the right
ide interface. So I am looking for pointers on where to start, and how to
go about this. Specifically, a pointer to where the detection is being
done in the code, and any clues as to why it is not working correctly for
me.
Thanks in advance,
Kenneth
There is no such thing as luck. 'Luck' is nothing but an absence of bad luck.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/