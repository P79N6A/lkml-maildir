Date: Wed, 27 Jan 1999 21:58:27 +0100 (MET)
From: Max <>
Subject: Re: 2.2.0 SECURITY
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/1/27/239

On Wed, 27 Jan 1999, Andras Wappel wrote:
>> to reproduce: extract the Makefile and modunload.S, type 'make' and './modunload'
>
>Reboots my machine, too.
>
>p.s. to the list: although it's a "amdk6" pgcc kernel, haven't encountered any problems yet, except
>this one.
For those who didn't understand it yet, Molnar Ingo posted a fix for this
"2.2.0 SECURITY" bug!
He posted it with the subject "[patch] 'coredump crash' fixed".
Perhaps it's better to re-post it:
--- linux/mm/mmap.c.orig        Wed Jan 27 14:09:31 1999
+++ linux/mm/mmap.c     Wed Jan 27 14:06:09 1999
@@ -558,7 +558,7 @@
	unsigned long start, unsigned long end)
 {
	unsigned long first = start & PGDIR_MASK;
-	unsigned long last = (end & PGDIR_MASK) + PGDIR_SIZE;
+	unsigned long last = ((end-1) & PGDIR_MASK) + PGDIR_SIZE;
 
	if (!prev) {
		prev = mm->mmap;
                        Massimiliano Ghilardi
 ----------------------------------------------------------------
| I have yet to meet a person who had a bad experience of Linux. |
| Most have never had an experience.                             |
 ----------------------------------------------------------------
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/