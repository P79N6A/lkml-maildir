Date: Sun, 15 Jun 2003 00:50:18 -0400
From: Paul Mundt <>
Subject: Re: SH Port - Makefile
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/6/15/2

On Sat, Jun 14, 2003 at 10:07:44PM +0200, Sam Ravnborg wrote:
> On Sat, Jun 14, 2003 at 02:45:12PM -0500, Paul Mundt wrote:
> > Okay, the main reason why I needed to do this was so that a make clean
> > would get the proper directory path. The problem was that machdir-y
> > wasn't getting the board name correctly since at make clean time the
> > CONFIG_SH_xxx names weren't being resolved.
> 
> The following should do the trick.
> I also rearranged a few things.
> 
Unfortunately this still yields the same problem as before when it comes to
resolving machdir-y properly at make clean time:
[lethal@unusual linux-sh-2.5.71]$ make ARCH=sh CROSS_COMPILE=sh-uclibc- clean
scripts/Makefile.clean:10: arch/sh/boards/Makefile: No such file or directory
make[1]: *** No rule to make target `arch/sh/boards/Makefile'.  Stop.
make: *** [_clean_arch/sh/boards] Error 2
At make clean time, .config isn't available properly due to it not being
included since its a noconfig_targets target, which causes the above problem.
This will also happen for the rest of the noconfig_targets, hence the manual
inclusion of .config to fixup the path lookup issue.
Any other suggestions?
> Whith respect to removing the framepointer from CFLAGS.
> There is already a CONFIG option for that CONFIG_FRAME_POINTER.
> It would be much cleaner using that one in combination
> with CONFIG_SH_KGDB
> 
Agreed, I'll add this in. Thanks.
[unhandled content-type:application/pgp-signature]