Date: Tue, 27 Jul 2004 08:15:39 -0700
From: Jesse Barnes <>
Subject: Re: [RFC][PATCH] Change pcibus_to_cpumask() to pcibus_to_node()
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/7/27/98

On Tuesday, July 27, 2004 7:16 am, Andi Kleen wrote:
> On Mon, 26 Jul 2004 17:10:08 -0700
>
> Matthew Dobson <colpatch@us.ibm.com> wrote:
> > So in discussions with Jesse at OLS, we decided that pcibus_to_node() is
> > a more generally useful function than pcibus_to_cpumask().  If anyone
> > disagrees with that, now would be a good time to let us know.
>
> Not sure that is a good idea. Sometimes this information is not available.
> With pcibus_to_cpumask() the fallback is obvious, but it isn't with
> pcibus_to_node(). Returning a random node is wrong.
Hmm... so there's no way for you to get a node or nodemask at all?
> It's impossible currently - I need an ACPI 3.0 BIOS to get this
> information. Even then there will be machines who don't supply it.
>
> I tried some time ago to get it from the hardware, but the hardware
> registers were arcane enough that I didn't find it easy enough. Relying on
> firmware for this thing is probably a better idea anyways.
Yeah, it's easier that way, but for the first cut on ia64, I'm gonna have to 
do it by hand too.  It's not that bad on sn2 at least.
Jesse
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/