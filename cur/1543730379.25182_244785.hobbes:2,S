Date: Mon, 23 Aug 2004 22:04:22 -0700
From: Joshua Kwan <>
Subject: Re: config language shortcomings in 2.4
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/8/24/9

Willy Tarreau wrote:
> Anyway, I believe that you have no other choice due to the way dep_tristate
> works. What would you expect it to do when it depends on 3 variables which
> are respectively 'n', 'm' and 'y' ? Honnestly, without looking closer at its
> implementation, I would not be able to give a valid response.
> 
> BTW, have you tried defining a temporary variable somewhere ? There are
> portions of config where you see things such as :
> 
> if [ CONFIG_XX = "y" -o CONFIG_YY = "m" -a CONFIG_ZZ = "y" ]; then
>    TEMP=y
> fi
> dep_tristate "cool feature" CONFIG_COOL $TEMP
> 
> Perhaps it could help you define complex combinations.
Sorry for the belated response, but certainly it should not be necessary 
to do:
if [ "$CONFIG_FW_LOADER" = "m" -o "$CONFIG_FW_LOADER" = "y" ]; then
	HAVE_SOME_FW_LOADER=y
fi
if [ "$CONFIG_CRC32" = "m" -o "$CONFIG_CRC32" = "m" ]; then
	HAVE_SOME_CRC32=y
fi
if [ "$HAVE_SOME_CRC32" = "y" -a "$HAVE_SOME_FW_LOADER" = "y" ]; then
	dep_tristate 'Broadcom Tigon3 support' CONFIG_TIGON3 $CONFIG_PCI 
$HAVE_SOME_FW_LOADER $HAVE_SOME_CRC32
fi
just to enforce an explicit dependency on some form of CONFIG_CRC32 and 
CONFIG_FW_LOADER. This is necessary because "$CONFIG_CRC32" != "n" 
doesn't work the way you think it would.
Anyway, it's all very disgusting and I'm inclined to just ignore it and 
maybe some benevolent soul will one day port Kconfig back to 2.4.
-- 
Joshua Kwan
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/