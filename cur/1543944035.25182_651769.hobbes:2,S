Date: Mon, 11 Feb 2008 13:48:44 -0500
From: Stephen Smalley <>
Subject: Re: [PATCH 07/37] Security: De-embed task security record from task and use refcounting
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/2/11/337

On Mon, 2008-02-11 at 17:30 +0000, David Howells wrote:
> James Morris <jmorris@namei.org> wrote:
> 
> > > Remove the temporarily embedded task security record from task_struct.
> > > Instead it is made to dangle from the task_struct::sec and
> > > task_struct::act_as pointers with references counted for each.
> > 
> > ...
> > 
> > These patches are kind of huge.
> 
> Yeah, I know.  The problem is that each patch must compile and run.  They
> can't be split up without violating that unfortunately.
> 
> > Why manually copy these fields after a kmemdup?
> 
> Fair point.  Fixed.
> 
> > What about the task backpointer? (i.e. tsec2->task)
> 
> The problem is that there can't be one with this patch as the task_security
> struct and the LSM security data attached to it may outlive the task it points
> back to.
> 
> It seems that the backpointer can be dispensed with.  Nothing particularly
> seems to use it.  Do you know the reason for its existence?
Looks unused now.
Similarly for some of the other security structs.
Only inode, superblock, and sock back pointers still seem to be in use.
-- 
Stephen Smalley
National Security Agency