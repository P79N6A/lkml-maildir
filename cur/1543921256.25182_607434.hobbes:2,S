Date: Fri, 19 Oct 2007 20:17:12 +0200 (CEST)
From: Thomas Gleixner <>
Subject: Re: [RFC] [PATCH -mm] ASIC3 driver
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/10/19/240

On Fri, 19 Oct 2007, Andrew Morton wrote:
> On Fri, 19 Oct 2007 12:53:00 +0200 Samuel Ortiz <sameo@openedhand.com> wrote:
> 
> > On Thu, Oct 18, 2007 at 03:05:44PM -0700, Andrew Morton wrote:
> > > On Thu, 18 Oct 2007 11:12:41 +0200
> > > Samuel Ortiz <sameo@openedhand.com> wrote:
> > 
> > > > +#include <linux/module.h>
> > > > +#include <linux/version.h>
> > > > +#include <linux/irq.h>
> > > 
> > > Please see the large comment at the top of linux/irq.h.  I believe this
> > > driver will fial to compile on at least arm.
> > It doesn't build as a module, since we need the irq.h symbols.
> > I changed MFD_ASIC3 to bool. I somehow feel that this is not the cleanest
> > solution, but OTOH I think that dynamically adding IRQs and GPIOs to an
> > embedded board doesn't make much sense.
> 
> We seem to have miscommunicated here.  <linux/irq.h> contains references to
> things which only some architectures actually implement.  I don't know
> which architectures those are, but it includes common ones like x86, so
> it's a real trap.  I recall it does not include arm, so your code might
> break on arm.
> 
> At least, that's what's _supposed_ to happen: I just compiled and linked
> this driver into an ARM kernel with no problems so now I'm all confused as
> to what the problem was.
> 
> Oh well, we'll see...
We obviously never removed the big fat warning, which was valid before
the ARM to generic irq conversion.
    tglx
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/