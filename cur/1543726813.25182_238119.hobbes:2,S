Date: Mon, 2 Aug 2004 17:11:31 +0300
From: Matti Aarnio <>
Subject: Re: PATCH: Fix HPT366 crash and support HPT372N
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/8/2/109

On Sat, Jul 31, 2004 at 08:15:22PM -0400, Alan Cox wrote:
> On a board containing the HPT372N IDE controller the 2.6.x series kernels
> will misbehave. If the HPT372N is set up with the newer PCI identifier it
> is ignored. If it is set up with the HPT372 identifier then the kernel
> crashes on boot.
I have been wondering about HPT37x in Fedora Core (development) kernel
called  kernel-smp-2.6.7-1.501.i686.  It doesn't find one of the cards
attached to a HPT372A card that I have.
I tried also to boot with a bit older kernels: 2.6.3, 2.6.5 do work just 
fine (except of 2.6.5 barfs the keyboard..). 
I tried also with 2.6.7-1.494smp (FC devel kernels), and that too
does fail.  I think I had also some a bit older 2.6.7, also that
one failed.   I didn't get around to try any 2.6.6 kernels.
Any ideas ?  Will this patch help ?
  /Matti Aarnio
> This patch is a forward port of my 2.4 driver fixes that have been in 2.4
> for a year but somehow escaped 2.6. Ronny Buchmann caught a couple
> of merge details I missed and those are fixed in this diff too.
> 
> As well as adding 372N support this also fixes the unknown revision case
> to avoid crashes should any future 37x variants with weird class_rev's appear
> 
> Alan
> 
> Signed-off-by: Alan Cox <alan@redhat.com>
> --- linux.vanilla-2.6.8-rc2/drivers/ide/pci/hpt366.c	2004-07-27 19:22:42.000000000 +0100
> +++ linux-2.6.8-rc2/drivers/ide/pci/hpt366.c	2004-08-01 00:58:30.948290640 +0100
....
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/