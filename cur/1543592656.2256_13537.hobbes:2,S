Date: Mon, 28 May 2001 17:05:45 -0400
From: George France <>
Subject: PATCH - ksymoops on Alpha - 2.4.5-ac3
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/5/28/68

Here is a trivial patch that will make ksymoops work again on Alpha.
--George
diff -urN linux-2.4.5-ac3-orig/arch/alpha/kernel/traps.c 
linux/arch/alpha/kernel/traps.c
--- linux-2.4.5-ac3-orig/arch/alpha/kernel/traps.c	Thu May 24 17:24:37 2001
+++ linux/arch/alpha/kernel/traps.c	Mon May 28 16:38:25 2001
@@ -286,11 +286,7 @@
 			continue;
 		if (tmp >= (unsigned long) &_etext)
 			continue;
-		/*
-		 * Assume that only the low 24-bits of a kernel text address
-		 * is interesting.
-		 */
-		printk("%6x%c", (int)tmp & 0xffffff, (++i % 11) ? ' ' : '\n');
+		printk("%16lx%c", tmp);
 #if 0
 		if (i > 40) {
 			printk(" ...");
diff -urN linux-2.4.5-ac3-orig/arch/alpha/kernel/traps.c linux/arch/alpha/kernel/traps.c
--- linux-2.4.5-ac3-orig/arch/alpha/kernel/traps.c	Thu May 24 17:24:37 2001
+++ linux/arch/alpha/kernel/traps.c	Mon May 28 16:38:25 2001
@@ -286,11 +286,7 @@
 			continue;
 		if (tmp >= (unsigned long) &_etext)
 			continue;
-		/*
-		 * Assume that only the low 24-bits of a kernel text address
-		 * is interesting.
-		 */
-		printk("%6x%c", (int)tmp & 0xffffff, (++i % 11) ? ' ' : '\n');
+		printk("%16lx%c", tmp);
 #if 0
 		if (i > 40) {
 			printk(" ...");