Date: Wed, 18 Oct 2006 22:37:13 +0000
From: 	andrew@walrond ...
Subject: make headers_install headers problem on sparc64
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/10/18/425

Hi david, lkml.
I found a message where you said
"If you have problems with the exported headers (other
than that some userspace abuses headers which it shouldn't), then
_shout_. Please don't just let them go unreported."
So,
Using headers exported from vanilla linux 2.6.18.1 and compiling the
elftoaout part of the debian sparc-utils package, I get some breakage
here:
In file included from /usr/include/asm/elf.h:5,
                 from /usr/include/linux/elf.h:7,
                 from elftoaout.c:24:
due to tlb_type, cheetah et al being undefined in this part of
asm-sparc64/elf.h:
bash-3.1# tail -n30 /pkg/linux/include/asm-sparc64/elf.h
/* This yields a mask that user programs can use to figure out what
   instruction set this cpu supports.  */
/* On Ultra, we support all of the v8 capabilities. */
static __inline__ unsigned int sparc64_elf_hwcap(void)
{
        unsigned int cap = (HWCAP_SPARC_FLUSH | HWCAP_SPARC_STBAR |
                            HWCAP_SPARC_SWAP | HWCAP_SPARC_MULDIV |
                            HWCAP_SPARC_V9);
        if (tlb_type == cheetah || tlb_type == cheetah_plus)
                cap |= HWCAP_SPARC_ULTRA3;
        else if (tlb_type == hypervisor)
                cap |= HWCAP_SPARC_BLKINIT;
        return cap;
}
#define ELF_HWCAP       sparc64_elf_hwcap();
/* This yields a string that ld.so will use to load implementation
   specific libraries for optimization.  This is more specific in
   intent than poking at uname or /proc/cpuinfo.  */
#define ELF_PLATFORM    (NULL)
#endif /* !(__ASM_SPARC64_ELF_H) */
Hope this is useful
Andrew Walrond
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/