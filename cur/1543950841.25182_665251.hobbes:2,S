Date: 08 Mar 2008 13:08:27 +0100
From: Andi Kleen <>
Subject: Re: [PATCH] [7/7] Allow swiotlb to move block data bouncing to the block layer
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/3/8/37

Andi Kleen <andi@firstfloor.org> writes:
> The block layer is generally in a better position to bounce
> than swiotlb because it is allowed to sleep at
> the right places. swiotlb cannot do that and is thus more prone
> to panic and failing on overflow.
[...]
The patch in this form right now is not a good idea. It really
depends on another patch which I had dropped from the public
posting. In the current form it would lead to all block swiotlb
bounces go through the low 16MB zone because block layer doesn't know
yet how to allocate bounce buffers above it and the block layer
would force it through its 16MB limited isa mempool.
I fixed that now properly for the next spin, with proper mask bouncing.
Anyways, just if anybody wants to test don't apply this patch
or use the latest patchkit from 
ftp://firstfloor.org/pub/ak/mask/patches/
which will bounce properly (and which also has some other improvements) 
-Andi