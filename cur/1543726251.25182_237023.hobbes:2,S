Date: Wed, 28 Jul 2004 15:44:24 -0700
From: Jesse Barnes <>
Subject: Re: [Fastboot] Re: Announce: dumpfs v0.01 - common RAS output API
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/7/28/296

On Wednesday, July 28, 2004 3:42 pm, Andrew Morton wrote:
> But they're welcome to do that: the memory for the DMA transfer has
> already been allocated and our new universe will not be touching it.
Yeah, for the most part that should be ok.  We can be paranoid about 
misdirected DMA later...  (Some platforms will let you protect memory regions 
at the chipset level, so it seems like the new kernel should be so protected 
until it's actually jumped to by kexec, but prior to unprotecting it you'd 
want to make sure that a bad DMA from the broken kernel doesn't hose it.)
> What we need to do is to ensure that the new kexec-ed kernel appropriately
> whacks the devices to stop any in-progress operations.  So it's the probe()
> and open() routines which need to get the device into a sane state, not the
> shutdown routines.
That makes sense, and means that drivers may want to call a shutdown-like 
routine in their probe functions to make sure their device is in a known 
state before starting.  But all of this is very driver specific it seems.
Jesse
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/