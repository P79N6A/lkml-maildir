Date: Thu, 15 Jul 2004 14:54:55 -0600
From: Kevin Fenzi <>
Subject: psmouse as module with suspend/resume
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/7/15/111

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1
Greetings. 
I am having a bit of an issue with psmouse and suspend/resume. 
I am using the swsusp2, which is working great... (Thanks Nigel!)
However: 
If I compile psmouse as a module and leave it in and suspend/resume
when the laptop comes back the mouse doesn't work at all. 
If I compile psmouse as a module and unload before suspend, and reload
after resume, the mouse works for simple movement, but all the
advanced synaptics features no longer work. No tap for mouse button,
no scolling, etc. 
If I compile psmouse in everything works after a suspend/resume cycle.
I would like to be able to compile psmouse as a module. Does anyone
see any reason the synaptics stuff wouldn't work after a
unload/reload? 
Before a suspend/resume: 
kernel: Synaptics Touchpad, model: 1
kernel:  Firmware: 5.9
kernel:  Sensor: 51
kernel:  new absolute packet format
kernel:  Touchpad has extended capability bits
kernel:  -> 4 multi-buttons, i.e. besides standard buttons
kernel:  -> multifinger detection
kernel:  -> palm detection
kernel: input: SynPS/2 Synaptics TouchPad on isa0060/serio4
Afer a unload and reload:
kernel: Synaptics Touchpad, model: 1
kernel:  Firmware: 5.9
kernel:  Sensor: 51
kernel:  new absolute packet format
kernel:  Touchpad has extended capability bits
kernel:  -> 4 multi-buttons, i.e. besides standard buttons
kernel:  -> multifinger detection
kernel:  -> palm detection
kernel: input: SynPS/2 Synaptics TouchPad on isa0060/serio4
So, it all looks the same there. 
I wonder if it's not something with the input layer not reconnecting
right on reload with what the synaptics driver in X is expecting... 
In the X log after a resume/reload: 
(II) DevInputMice: ps2EnableDataReporting: succeeded
Synaptics DeviceOn called
(EE) xf86OpenSerial: Cannot open device /dev/input/event2
        No such device.
(WW) Mouse0: cannot open input device
Any ideas?
Happy to provde more information on versions, etc...
thanks,
kevin
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.4 (GNU/Linux)
Comment: Processed by Mailcrypt 3.5.8 <
http://mailcrypt.sourceforge.net/>
iD8DBQFA9u8i3imCezTjY0ERAmWnAJ9uKMauJAfSMKgz9VBB6Z5o7/66vACffKg5
8Imj27a19cu4OtVuhaszXOM=
=6i7m
-----END PGP SIGNATURE-----
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/