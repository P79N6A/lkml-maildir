Date: Mon, 1 Dec 2008 12:28:58 -0800
From: Jesse Barnes <>
Subject: Re: [PATCH] resource: allow MMIO exclusivity for device drivers
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/12/1/282

On Sunday, November 23, 2008 1:03 pm Arjan van de Ven wrote:
> From 18cafd344e3de33b5e4feddac5657c1f5fed2d56 Mon Sep 17 00:00:00 2001
> From: Arjan van de Ven <arjan@linux.intel.com>
> Date: Wed, 22 Oct 2008 19:55:31 -0700
> Subject: [PATCH] resource: allow MMIO exclusivity for device drivers
>
> Device drivers that use pci_request_regions() (and similar APIs) have a
> reasonable expectation that they are the only ones accessing their device.
> As part of the e1000e hunt, we were afraid that some userland (X or some
> bootsplash stuff) was mapping the MMIO region that the driver thought it
> had exclusively via /dev/mem or via various sysfs resource mappings.
>
> This patch adds the option for device drivers to cause their reserved
> regions to the "banned from /dev/mem use" list, so now both kernel memory
> and device-exclusive MMIO regions are banned.
> NOTE: This is only active when CONFIG_STRICT_DEVMEM is set.
>
> In addition to the config option, a kernel parameter iomem=relaxed is
> provided for the cases where developers want to diagnose, in the field,
> drivers issues from userspace.
>
> Reviewed-by: Matthew Wilcox <willy@linux.intel.com>
> Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
Applied to my linux-next branch, thanks Arjan & Matthew.
Jesse