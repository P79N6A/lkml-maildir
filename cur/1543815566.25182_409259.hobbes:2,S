Date: Tue, 21 Mar 2006 15:40:00 -0800 (PST)
From: Christoph Lameter <>
Subject: Re: 2.6.16-rc6-mm2: Why is CONFIG_MIGRATION available for everyone?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/3/21/466

On Tue, 21 Mar 2006, Adrian Bunk wrote:
> Can we express this explicitely?
How about this fix?
Make page migration dependent on swap and NUMA. The page migration code 
could function without NUMA but we currently have no users for the 
non-NUMA case.
Signed-off-by: Christoph Lameter <clameter@sgi.com>
Index: linux-2.6.16-rc6-mm2/mm/Kconfig
===================================================================
--- linux-2.6.16-rc6-mm2.orig/mm/Kconfig	2006-03-21 14:51:37.000000000 -0800
+++ linux-2.6.16-rc6-mm2/mm/Kconfig	2006-03-21 15:36:25.000000000 -0800
@@ -138,8 +138,8 @@ config SPLIT_PTLOCK_CPUS
 #
 config MIGRATION
 	bool "Page migration"
-	def_bool y if NUMA || SPARSEMEM || DISCONTIGMEM
-	depends on SWAP
+	def_bool y if NUMA
+	depends on SWAP && NUMA
 	help
 	  Allows the migration of the physical location of pages of processes
 	  while the virtual addresses are not changed. This is useful for
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/