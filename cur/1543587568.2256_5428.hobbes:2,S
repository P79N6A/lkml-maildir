Date: Sat, 14 Apr 2001 10:45:20 +0200
From: Bernd Eckenfels <>
Subject: Re: [BUG] tmpfs and loop
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/4/14/30

In article <01041321112600.23961@oscar> you wrote:
> oscar% sudo mount /tmp/disk /snap -oloop -text2
> ioctl: LOOP_SET_FD: Invalid argument
are you sure you have a working loop device? Try to verify it in a non tmpfs
filesystem.
> stat64("/dev/loop0", {st_mode=S_IFBLK|0660, st_rdev=makedev(7, 0), ...}) = 0
> open("/dev/loop0", O_RDONLY|O_LARGEFILE) = 3
> ioctl(3, 0x4c03, 0xbffff7fc)            = -1 ENXIO (No such device or address)
otherwise try this by hand with losetup.
> close(3)                                = 0
> open("/tmp/disk", O_RDWR|O_LARGEFILE)   = 3
> open("/dev/loop0", O_RDWR|O_LARGEFILE)  = 4
> mlockall(MCL_CURRENT|MCL_FUTURE)        = 0
> ioctl(4, 0x4c00, 0x3)                   = -1 EINVAL (Invalid argument)
> write(2, "ioctl: LOOP_SET_FD: Invalid argu"..., 37ioctl: LOOP_SET_FD: Invalid argument
Greetings
Bernd
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/