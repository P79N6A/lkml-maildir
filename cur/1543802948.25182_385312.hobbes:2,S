Date: Thu, 12 Jan 2006 12:53:40 -0600
From: Anthony Liguori <>
Subject: Re: [RFC] [PATCH] sysfs support for Xen attributes
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/1/12/238

Greg KH wrote:
>What exactly do the different ioctls do?  Do they have to be ioctls?
>Can you use configfs or sysfs for most of the stuff there?
> 
>
The canonical example is /proc/xen/privcmd which is our userspace 
hypercall interface.  A hypercall is software interrupt with a number of 
parameters passed via registers.  This has to come from ring 1 for 
security reasons (the kernel is running in ring 1).
We wish to make management hypercalls as the root user in userspace 
which means we have to go through the kernel.  Currently, we do this by 
having /proc/xen/privcmd accept an ioctl() that takes a structure that 
describe the register arguments.  The kernel interface allows us to 
control who in userspace can execute hypercalls.
It would perhaps be possible to use a read/write interface for 
hypercalls but ioctl() seems a little less awkward.  Suggestions are 
certainly appreciated though.
Right now, I think a misc char device with an ioctl() interface seems 
like the most promising way to do this.  This doesn't seem like the sort 
of think one would want to expose in sysfs...
Regards,
Anthony Liguori
>thanks,
>
>greg k-h
>-
>To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
>the body of a message to majordomo@vger.kernel.org
>More majordomo info at  
http://vger.kernel.org/majordomo-info.html
>Please read the FAQ at  
http://www.tux.org/lkml/
>
>
> 
>
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/