Date: Mon, 1 Oct 2007 10:15:43 -0700
From: Greg KH <>
Subject: Re: [PATCH] PCI: nVidia's MCP61 ethernet card needs quirk for wrong class
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/10/1/247

On Mon, Oct 01, 2007 at 11:03:38AM -0600, Matthew Wilcox wrote:
> On Mon, Oct 01, 2007 at 09:25:46AM -0700, Greg KH wrote:
> > For config items, we don't want to modify them in any way, we just want
> > to pass-through the data direct from the device.  Look at the sysfs and
> > proc files for pci config spaces.  They are returning binary data stored
> > in the device directly.  We do not want to have to start modifying that
> > data directly just to handle messed up devices like this.
> 
> Nobody's talking about changing the raw pci data.  What we're talking
> about is changing the value read out of
> 
> $ cat /sys/bus/pci/devices/0000\:00\:00.0/class 
> 0x060000
I know, but the next request will be to also fix up those raw values as
someone will have a tool that only uses them :)
> We do tweak at least some of the other similar values (vendor, for sure)
> to work around bugs; not sure we have an example for changing the class
> value yet.
> 
> pciutils knows that the kernel has potentially fixed up the values in
> the individual files, and to trust those over the raw data.
Ah, cool, I didn't realize that pciutils handled this kind of mismatch.
That's good to know.
thanks,
greg k-h
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/