Date: Sat, 11 Sep 2004 23:36:36 +0200
From: Sam Ravnborg <>
Subject: kbuild/ppc: Fix to enable build of ppc again
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/9/11/165

Hi Linus - please apply.
I tricked Tom Rini into doing some wrong modifications to
arch/ppc/boot/lib/Makefile. The result is that ppc cannot
be build (at least not the boot/lib part).
The attaced patch fixes this.
Compile tested.
Please pull from:
	bk pull bk://linux-sam.bkbits.net/kbuild
	(This is the only patch pushed).
	Sam
# This is a BitKeeper generated diff -Nru style patch.
#
# ChangeSet
#   2004/09/11 23:25:45+02:00 sam@mars.ravnborg.org 
#   kbuild/ppc: Fix build of zlib in arch/ppc/boot/lib
#   
#   $(addprefix ...) needs a directory relative to current directory, because
#   kbuild prefixes the filename with '$(obj)/'
#   
#   Signed-off-by: Sam Ravnborg <sam@ravnborg.org>
# 
# arch/ppc/boot/lib/Makefile
#   2004/09/11 23:25:28+02:00 sam@mars.ravnborg.org +2 -2
#   fix path in addprefix
# 
diff -Nru a/arch/ppc/boot/lib/Makefile b/arch/ppc/boot/lib/Makefile
--- a/arch/ppc/boot/lib/Makefile	2004-09-11 23:26:41 +02:00
+++ b/arch/ppc/boot/lib/Makefile	2004-09-11 23:26:41 +02:00
@@ -4,7 +4,7 @@
 
 CFLAGS_kbd.o	+= -Idrivers/char
 
-lib-y := $(addprefix lib/zlib_inflate/,infblock.o infcodes.o inffast.o \
-				       inflate.o inftrees.o infutil.o)
+lib-y := $(addprefix ../../../../lib/zlib_inflate/, \
+           infblock.o infcodes.o inffast.o inflate.o inftrees.o infutil.o)
 lib-y += div64.o
 lib-$(CONFIG_VGA_CONSOLE) += vreset.o kbd.o
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/