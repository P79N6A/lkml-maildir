Date: Mon, 29 Oct 2007 16:06:56 -0400
From: Dave Jones <>
Subject: Re: 2.6.23 boot failures on x86-64.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/10/29/371

On Mon, Oct 29, 2007 at 08:03:09PM +0100, Andi Kleen wrote:
 > On Monday 29 October 2007 19:47:47 Dave Jones wrote:
 > > On Mon, Oct 29, 2007 at 07:18:43PM +0100, Andi Kleen wrote:
 > >  > On Monday 29 October 2007 18:50:14 Dave Jones wrote:
 > >  > > We've had a number of people reporting that their x86-64s stopped booting
 > >  > > when they moved to 2.6.23.  It rebooted just after discovering the AGP bridge
 > >  > > as a result of the IOMMU init.
 > >  > 
 > >  > It's probably the usual "nobody tests sparsemem at all" issue.
 > > 
 > > We've been using SPARSEMEM in Fedora for a *long* time.
 > > So long in fact, I forget why we moved away from DISCONTIGMEM, so there's
 > > a significant number of users using that configuration for some time.
 > 
 > Supposedly you wanted a slower kernel that needs more memory? 
Actually if what you say is true, the Kconfig entry for sparsemem
could use changing as it suggests the opposite...
	This option provides some potential
          performance benefits, along with decreased code complexity,
          but it is newer, and more experimental.
I'm still unclear why exactly we enabled it.  The other comment
in the Kconfig..
	This will be the only option for some systems, including
          memory hotplug systems.  This is normal.
Sounds unlikely to be the reason, but maybe.
Maybe benchmarking at some point in history showed sparsemem
actually beat out discontigmem.  I'm at a loss to explain it
thanks to a particularly unhelpful changelog entry I wrote
at the time.
	Dave
-- 
http://www.codemonkey.org.uk
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/