Date: Mon, 06 Aug 2007 12:59:14 +0200
From: Miklos Szeredi <>
Subject: Re: [patch 03/11] fuse: add reference counting to fuse_file
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/8/6/106

> On Friday 03 August 2007, Miklos Szeredi wrote:
> > From: Miklos Szeredi <mszeredi@suse.cz>
> > 
> > Make lifetime of 'struct fuse_file' independent from 'struct file' by
> > adding a reference counter and destructor.
> 
> What about using krefs to implement that?
Thanks for the suggestion.  I'm aware of kref, but I don't see the
huge advantage over using the raw atomic interface.
> This will also fix the missing smp_barriers,
Why are the barriers needed?  The documentation doesn't say anything
about that.
> is very simple, saves code, makes your life easier and is a well
> known known kernel infrastructure :-)
I think it saves one line, and adds another, for a total of zero lines
saved ;)
Thanks,
Miklos
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/