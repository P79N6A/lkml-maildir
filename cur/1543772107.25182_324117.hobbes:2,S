Date: Wed, 08 Jun 2005 22:54:17 +0200
From: Juergen Kreileder <>
Subject: Re: [PATCH] ppc64: Fix PER_LINUX32 behaviour
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/6/8/240

Andreas Schwab <schwab@suse.de> writes:
> Linus Torvalds <torvalds@osdl.org> writes:
>
>> On Wed, 8 Jun 2005, Paul Mackerras wrote:
>>>
>>> * uname(2) doesn't respect PER_LINUX32, it returns 'ppc64' instead
>>>   of 'ppc'
>>
>> I think this is a feature, not a bug, and I suspect you just broke
>> compiling a 64-bit kernel by default on ppc64.
>
> The uname syscall that Paul is referring to (__NR_olduname) isn't
> actually used nowadays any more.  The current uname syscall
> (__NR_uname, which is implemented by ppc64_newuname) already
> translates ppc64 to ppc depending on the personality.
The current code doesn't work like intended, on my G5 both 'linux32
uname -m' and 'linux32 sh -c "uname -m"' return 'ppc64' without the
patch.
With the patch both commands return 'ppc'.
        Juergen
-- 
Juergen Kreileder, Blackdown Java-Linux Team
http://blog.blackdown.de/
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/