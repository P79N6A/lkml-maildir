Date: Sat, 14 Feb 2004 15:00:27 +0000
From: Jon Burgess <>
Subject: Re: ext2/3 performance regression in 2.6 vs 2.4 for small interleaved writes
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/2/14/34

Andrew Morton wrote:
>So you'll see that instead of a single full-bandwidth
>write, we do two half-bandwidth writes.  If it weren't for disk writeback
>caching, it would be as much as 4x slower.
>
Write caching does indeed make a big difference. Here is a test run on a 
drive with and without write caching (hdparm -W 0/1). The test was done 
on 2.6.2 with ext3 and shows the write speed in MB/s:
Write Cache   1 Stream   2 Streams
Enabled       21.54      3.66
Disabled      18.11      0.46  
The two stream case is almost 10x slower without write caching.
I don't think this explains the difference between 2.4 and 2.6 unless 
one of them changes the write cache mode of the drive.
    Jon
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/