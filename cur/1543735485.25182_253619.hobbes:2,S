Date: Sat, 18 Sep 2004 21:44:03 +0200
From: Ihar 'Philips' Filipau <>
Subject: Re: udev is too slow creating devices
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/9/18/89

> That will be soon going away with my multi-threaded device discovery
> work.  And I run pci hotplug boxes (and so do all of the PCMCIA/CardBus
> users), so don't discard PCI from being a async bus type :)
> 
> Async is now the norm, and drivers like the microcode module are the
> exception.
   I wanted you to say that.
   That's wrong attitude. I'm working on workstation where 95% of 
hardware plugged 100% of time. That's not exception. Not eerything is 
hot-pluggable USB/FireWire/whatever.
   Event-based hot-plug scripts are great thing. As an implementation. 
But user cares about one thing: 'modprobe usb-storage; mount /whatever' 
working reliably.
   /etc/dev.d probably great thing - but I'm not going to implement FSM 
into every shell script which does modprobe for sake being Ok with 
dynamic /dev/.
   You need to change your attitude for first. For second - come up with 
a way for user space to block until device is here, and if it is not 
here/error detected - fail.
   As it was said before - /all/ we need, is to be able to tell 
discovery phase from idle state of driver. "/All/" is quite much here - 
but it must be a goal.
   I'm absolutely sure, that for PCI devices it is implementable quite 
easy - probing is already done outside of modules. And we know precisely 
are we Ok, or are we not. And we know when we are done. If it is not so 
for USB yet - then it is bug which must be fixed.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/