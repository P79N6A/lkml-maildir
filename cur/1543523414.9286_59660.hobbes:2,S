Date: Tue, 25 Jan 2000 01:45:28 +0000
From: Adam C Powell IV <>
Subject: Re: 2.2.10-14 i686 SMP: IDE RAID-5 array hangs on mount
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/1/25/54

Thank you for the replies.
Khimenko Victor wrote:
> In <388C7A32.1988F5E0@mit.edu> Adam C Powell IV (hazelsct@mit.edu) wrote:
> AI> I don't expect it to be perfect- we are human after all- but where
> AI> there are known problems or unmaintained sections of the kernel, please
> AI> document them far and wide.
>
> It WAS documented. In linux-kernel mailing list archives. Unfortunatelly it's
> THE ONLY more or less complete documentation for kernel :-/ Even here some
> things are not documented but all other sources are even less complete.
Hmm.  I remember my first kernel compilation, it was mid-2.1 series, and the documentation
said something like, "If you're compiling a development kernel, you should probably join
linux-kernel@vger."  Should this be a necessity for stable kernels as well?
Again this is a "philosophy" question for the future: archived discussions will always be the
most complete source of documentation, but should the documentation shipped not include major
issues such as unmaintained features?  It seems to me that incomplete documentation can be as
serious a "bug" as some coding errors.
Alan Cox wrote:
> > Ask Cox, not me :-) Since Cox is RedHat's employee it looks VERY weird to me
> > that RedHat's kernel and "official" Cox's kernel are two such different beasts.
>
> 2.2.15 and the Red Hat kernel are two different things. They I suspect always
> will be. The things vendors want "make it work now" and the main tree needs
> "make it work right" are never going to totally overlap
Okay, but the current RAID in 2.2.14 doesn't work now (for SMP), and doesn't work right (if
it's being replaced).  I guess one could ask, how did this happen?  But at this point, it
should at least be documented, the attached micropatch fixes this "documentation bug"
(although it can probably be done better).
> > They should wait for Ingo to release RAID 0.90 patch for 2.2.15 I think :-)
> > At least knfsd (not know about RAID) was sheduled for inclusion in 2.2.15 but
> > now when 2.2.15 is "quick bug-fix release" (AGAIN!) it looks like KNFSD and
> > RAID will be postponed once again :-/
>
> I think all the important NFS stuff is already in 2.2.14.
That's good to hear!
Thank you again for the feedback, I just hope that some lost soul will be spared the hours of
drudgery I had to go through...
--
                 Adam Powell                    
http://lyre.mit.edu/~powell/
                 Thomas B. King Assistant Professor of Materials Engineering
                 77 Massachusetts Ave. Rm. 4-117        Phone (617) 452-2086
                 Cambridge, MA 02139 USA                  Fax (617) 253-5418
--- drivers/block/Config.in.bak	Wed Jan 19 18:39:19 2000
+++ drivers/block/Config.in	Mon Jan 24 20:22:18 2000
@@ -99,7 +99,7 @@
 if [ "$CONFIG_NET" = "y" ]; then
   tristate 'Network block device support' CONFIG_BLK_DEV_NBD
 fi
-bool 'Multiple devices driver support' CONFIG_BLK_DEV_MD
+bool 'Unmaintained multiple devices driver support' CONFIG_BLK_DEV_MD
 if [ "$CONFIG_BLK_DEV_MD" = "y" ]; then
   tristate '   Linear (append) mode' CONFIG_MD_LINEAR
   tristate '   RAID-0 (striping) mode' CONFIG_MD_STRIPED
--- Documentation/Configure.help.bak	Mon Jan 24 20:24:08 2000
+++ Documentation/Configure.help	Mon Jan 24 20:30:50 2000
@@ -949,6 +949,13 @@
   means that the combining is done by a dedicated controller; if you
   have such a controller, you do not need to say Y here.
 
+  Note that this driver is unmaintained, and may fail unpredictably.
+  In particular, it is known to fail on IDE arrays in SMP kernels.
+  For more actively-maintained RAID drivers, you should use the
+  RAID-0.90 patch at 
http://people.redhat.com/mingo/raid-2.2.14-B1
 .
+  You will also need new RAID tools, for which you should contact your
+  Linux distributor.
+
   More information about Software RAID on Linux is contained in the
   Software-RAID mini-HOWTO, available via FTP (user: anonymous) from
   
ftp://metalab.unc.edu/pub/Linux/docs/HOWTO/mini.
 There you will also
--- Documentation/md.txt.bak	Mon Jan 24 20:31:52 2000
+++ Documentation/md.txt	Mon Jan 24 20:35:17 2000
@@ -1,3 +1,7 @@
+IMPORTANT WARNING: The RAID driver is currently not actively maintained,
+and is known to fail in some SMP systems.  For a more up-to-date driver,
+you should use the patch at 
http://people.redhat.com/mingo/raid-2.2.14-B1
+
 Tools that manage md devices can be found at sweet-smoke.ufr-info-p7.ibp.fr
 in public/Linux/md035.tar.gz.
 