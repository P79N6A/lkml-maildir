Date: Wed, 28 Apr 2004 13:12:21 +0200
From: Daniel Egger <>
Subject: Serious memory leak in kernel version >2.4.23
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/4/28/81

Hija,
I've just been able to again discover my memory problems, this time
under 2.4.26 as provided by the Debian people in compiled form:
kernel-image-2.4.26-1-k7
With kernel 2.4.23 and below the same machine worked just fine for
many months....
The net result is that I'm getting:
__alloc_pages: 0-order allocation failed (gfp=0x1f0/0)
__alloc_pages: 0-order allocation failed (gfp=0x1d2/0)
VM: killing process rsync
__alloc_pages: 0-order allocation failed (gfp=0xf0/0)
in my syslog messages.
Also ps shows that there's less than 100MB of memory in use by
processes but nevertheless a lot of memory is gone:
              total       used       free     shared    buffers     
cached
Mem:        515692     481756      33936          0      37772      
64600
-/+ buffers/cache:     379384     136308
Swap:       262576      36360     226216
And here is the slab information....
slabinfo - version: 1.1
kmem_cache            68     72    108    2    2    1
ip_fib_hash            9    112     32    1    1    1
packet_task            0      0     44    0    0    1
hpsb_packet            0      0     96    0    0    1
ext3_xattr             0      0     44    0    0    1
journal_head         447   1617     48   10   21    1
revoke_table           4    250     12    1    1    1
revoke_record          0    112     32    0    1    1
clip_arp_cache         0      0    128    0    0    1
ip_mrt_cache           0      0    128    0    0    1
tcp_tw_bucket          0     60    128    0    2    1
tcp_bind_bucket       18    112     32    1    1    1
tcp_open_request       0     30    128    0    1    1
inet_peer_cache        0     59     64    0    1    1
secpath_cache          0      0    128    0    0    1
xfrm_dst_cache         0      0    256    0    0    1
ip_dst_cache          23     45    256    2    3    1
arp_cache              6     30    128    1    1    1
flow_cache             0      0    128    0    0    1
blkdev_requests     2048   2070    128   69   69    1
devfsd_event           0      0     20    0    0    1
dnotify_cache          0      0     20    0    0    1
file_lock_cache       19     42     92    1    1    1
fasync_cache           0      0     16    0    0    1
uid_cache             10    112     32    1    1    1
skbuff_head_cache    400    500    192   25   25    1
sock                 123    342   1344   46  114    1
sigqueue               5     29    132    1    1    1
kiobuf                 0      0     64    0    0    1
cdev_cache             9    118     64    2    2    1
bdev_cache             6     59     64    1    1    1
mnt_cache             16     59     64    1    1    1
inode_cache       369522 491666    512 70224 70238    1
dentry_cache      172781 368580    128 12286 12286    1
dquot                  0      0    128    0    0    1
filp                1491   1500    128   50   50    1
names_cache            0      5   4096    0    5    1
buffer_head        28502  28530    128  951  951    1
mm_struct             49    100    192    3    5    1
vm_area_struct      1820   3480    128   71  116    1
fs_cache              53    118     64    2    2    1
files_cache           48     90    448    7   10    1
signal_act            61    102   1344   24   34    1
size-131072(DMA)       0      0 131072    0    0   32
size-131072            0      0 131072    0    0   32
size-65536(DMA)        0      0  65536    0    0   16
size-65536             0      0  65536    0    0   16
size-32768(DMA)        0      0  32768    0    0    8
size-32768             0      0  32768    0    0    8
size-16384(DMA)        0      0  16384    0    0    4
size-16384             7     11  16384    7   11    4
size-8192(DMA)         0      0   8192    0    0    2
size-8192              5     12   8192    5   12    2
size-4096(DMA)         0      0   4096    0    0    1
size-4096            287    309   4096  287  309    1
size-2048(DMA)         0      0   2048    0    0    1
size-2048             97    242   2048   52  121    1
size-1024(DMA)         0      0   1024    0    0    1
size-1024             40     60   1024   12   15    1
size-512(DMA)          0      0    512    0    0    1
size-512              47     64    512    6    8    1
size-256(DMA)          0      0    256    0    0    1
size-256              22     75    256    3    5    1
size-128(DMA)          0      0    128    0    0    1
size-128            5995   6030    128  200  201    1
size-64(DMA)           0      0     64    0    0    1
size-64             7698   7729     64  131  131    1
size-32(DMA)           0      0     64    0    0    1
size-32            55711 126850     64 1172 2150    1
Servus,
       Daniel
[unhandled content-type:application/pgp-signature]