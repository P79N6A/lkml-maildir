Date: Fri, 01 Mar 2002 19:12:24 +0100
From: Manfred Spraul <>
Subject: Re: Linux 2.5.5-dj1 - Bug Reports
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/3/1/144

Nathan Walp wrote:
> 
> On Fri, Feb 22, 2002 at 02:21:49AM +0100, Dave Jones wrote:
> >  > It compiled fine. When I booted up everything looked normal with the
> >  > exception of a
> >  > eth1: going OOM
> >  > message that kept scrolling down the screen. My eth1 is a natsemi card.
> >
> >  That's interesting. Probably moreso for Manfred. I'll double check
> >  I didn't goof merging the oom-handling patch tomorrow.
> 
> Ditto here on my natsemi.  It hasn't really spit out the error since
> boot, about 12 hours ago.  Card has been mainly idle, only used to
> connect via crossover cable to my laptop, which hasn't been used much in
> that time.
Please apply the attached oneliner, it fixes the problem. The error was
spotted by Tim or Jeff.
--
	Manfred--- 2.5/drivers/net/natsemi.c	Fri Mar  1 17:16:38 2002
+++ build-2.5/drivers/net/natsemi.c	Fri Mar  1 19:11:52 2002
@@ -1380,7 +1380,7 @@
 		np->rx_ring[entry].cmd_status =
 			cpu_to_le32(np->rx_buf_sz);
 	}
-	if (np->cur_rx - np->dirty_tx == RX_RING_SIZE) {
+	if (np->cur_rx - np->dirty_rx == RX_RING_SIZE) {
 		if (debug > 2)
 			printk(KERN_INFO "%s: going OOM.\n", dev->name);
 		np->oom = 1;