Date: Sun, 18 Apr 2004 07:51:40 +0200
From: Jean Delvare <>
Subject: Re: 2.6.5 Sensors & USB problems
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/4/18/19

> Seems that the w83781d driver no longer detects whatever the sensor
> chip on the P4PE is, but I see there is now a new driver called asb100
> which does work. An old conflicting lm_sensors install was breaking
> the sensors-detect script, but once resolved it nicely detected the
> asb100.
The hardware monitoring chip on the P4PE is an Asus ASB100 "Bach". It
used to be somewhat supported by the w83781d driver (see as an
"as99127f" kind) but then a new, dedicated driver was developed by Mark
M. Hoffman, which works better. For this reason, support was dropped
from the w83781d, which explains why it suddenly stopped working.
I agree that this should have been advertised a little more, and I am
adding information about this on our 2.6 kernel dedicated page at the
moment.
> Can anyone explain, however, why my i2c bus showed up as number 0
> under linux <= 2.6.4, and now always as number 1 under linux 2.6.5?
> The is no number 0 any more.
The bus number allocation scheme is such that once a number has been
used once (since the machine last booted) it will not be used again.
This is admittedly not ideal and should be fixed. I suspect that the fix
isn't trivial because the current structures would make the new scheme
have a poor algorithmic complexity (O(2) maybe), but I haven't checked
yet. Greg, can you confirm?
This isn't critical (unless you cycle your i2c adapter drivers a great
number of times, but nodoby does this) which is why no attempt has been
made to fix it yet. Anyone with a nice fix is welcome however ;)
Thanks.
-- 
Jean Delvare
http://www.ensicaen.ismra.fr/~delvare/
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/