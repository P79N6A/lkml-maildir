Date: Mon, 30 Apr 2007 13:21:43 +0200 (MEST)
From: Jan Engelhardt <>
Subject: [PATCH 03/36] Use menuconfig objects II - battery
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/4/30/150

Change Kconfig objects from "menu, config" into "menuconfig" so
that the user can disable the whole feature without having to
enter the menu first.
Signed-off-by: Jan Engelhardt <jengelh@gmx.de>
---
 drivers/battery/Kconfig |   12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)
--- linux-2.6.21-mm_20070428.orig/drivers/battery/Kconfig
+++ linux-2.6.21-mm_20070428/drivers/battery/Kconfig
@@ -1,7 +1,5 @@
 
-menu "Battery devices"
-
-config BATTERY
+menuconfig BATTERY
 	tristate "Battery class support"
 	select EXTERNAL_POWER
 	help
@@ -9,16 +7,18 @@ config BATTERY
 	  monitoring by userspace via sysfs (if available) and/or APM
 	  kernel interface (if selected below).
 
+if BATTERY
+
 config APM_POWER
 	tristate "APM emulation for class batteries"
-	depends on BATTERY && APM_EMULATION
+	depends on APM_EMULATION
 	help
 	  Say Y here to enable support APM status emulation using
 	  battery class devices.
 
 config BATTERY_DS2760
 	tristate "DS2760 battery driver (HP iPAQ & others)"
-	depends on BATTERY && W1
+	depends on W1
 	select W1_SLAVE_DS2760
 	help
 	  Say Y here to enable support for batteries with ds2760 chip.
@@ -30,4 +30,4 @@ config BATTERY_PMU
 	  Say Y here to expose battery information on Apple machines
 	  through the generic battery class.
 
-endmenu
+endif # BATTERY
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/