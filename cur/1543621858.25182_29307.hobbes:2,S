Date: Wed, 20 Feb 2002 10:21:15 -0500 (EST)
From: "Richard B. Johnson" <>
Subject: RE: st0: Block limits 1 - 16777215 bytes.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/2/20/87

On Wed, 20 Feb 2002, Glover George wrote:
> Ok, after playing with it a little more I found out that the message I'm
> getting about the block sizes isn't related to the lockups.  I can lock
> the system up by tar'ing up the /proc directory (why are you tar'ing the
> /proc directory!!! I know!!! But that's not the point).  I had no
> problem with RH 7.2's supplied 7.2 kernel (2.4.7-10).  However, this is
> 2.4.17 (with the linux-abi patch). 
> 
> I have been able to make succesful backups as long as I ignore the /proc
> directory but something must be wrong.  Doing an "ls -la *" doesn't lock
> the machine though.  Only when tar'ing it (I suppose because of a read).
> It doesn't lock up consistently in the same place when reading from the
> proc directory however, but always in the proc.  I made about 15 test
> runs and they all died in proc and --exclude proc doesn't cause it to
> lock somewhere else.
You do not tar /proc!  There is kcore there! `tar` thinks it's a real
file. Reading (accessing) some kernel areas will cause a deadlock.
If you don't want to --exclude proc, then `umount` it before your
backups. FYI, it's SOP to backup different mounted file-systems so
you don't end up backing up N disks on a single media. Therefore
your `tar` sequence would be something like:
tar -czlf root.tar.gz /
tar -czlf user.tar.gz /user
       |________ stay on the same file-system.
..etc..
Since /proc is a seperate file-system, you never have problems like
you describe and the mount-point gets backed up as required.
Cheers,
Dick Johnson
Penguin : Linux version 2.4.1 on an i686 machine (797.90 BogoMips).
        111,111,111 * 111,111,111 = 12,345,678,987,654,321
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/