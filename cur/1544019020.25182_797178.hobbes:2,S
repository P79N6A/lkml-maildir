Date: Mon, 26 Jan 2009 17:22:02 -0800 (PST)
From: David Miller <>
Subject: Re: hardware time stamping with optional structs in data area
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2009/1/26/392

From: Patrick Ohly <patrick.ohly@intel.com>
Date: Mon, 26 Jan 2009 21:39:52 +0100
> On Mon, 2009-01-26 at 07:04 +0200, David Miller wrote:
> > Just consolidate the array into a direct conversion table.  You only
> > have 2 bits defined so you only need an array of 4 entries.  Pass the
> > optional flag bits directly in as the index of that table.
> 
> How can I get some code executed during the initialization of the IP
> stack which initializes the table, before any sk_buff gets allocated?
> 
> The content is constant, but writing it down as static initializers
> using just preprocessor macros would be difficult and/or ugly - that's
> why I haven't done it already.
It's 4 entries... really.  You can initialize them simply, perhaps
with some fancy macro used by the initializers.