Date: Sun, 30 Jul 2000 19:13:58 -0700
From: "Adam J. Richter" <>
Subject: Proposal: /lib/modules/<version> matching /usr/src/linux
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/7/30/85

	I would like to be able to have a utility that can do
things like make a boot disk for with "all wireless ethernet drivers",
"all IDE drivers", and which would have to include a list of
modules in the sources that would have to be updated with each
source code release.  The current module layout, which puts most
hardware drivers in "misc", prevents this.  I would like to change
the layout of /lib/modules/<version> to mirror the layout of
/usr/src/linux.  I see the following advantages to this approach:
	1. simplifying development of automated tools that would benefit
	   from being able to classify modules (e.g., for hardware
	   autoconfiguration),
	2. users who have one less directory layout to learn
	3. It should eliminate a line from many Makefile's in kernel
	   subdirectories
	4. It should eliminate the need for a staging area in kernel
	   build process for installing modules.
	Comments?
	If there are no complaints or suggested improvements to this
proposal, I will generate patches to modutils and the kernel for
this.  My plan is first to submit changes to modutils (which will
be backward compatible in the sense that the new modutils
will find all of the modules that the old one would find).  These
changes will clean up modprobe, so that it just recursively
descends into any subdirectories of /lib/modules and
/lib/modules/<versions> which do not begin with a digit (to
prevent descent into /lib/modules/<other-version>).  Matching kernel
change would follow.
Adam J. Richter     __     ______________   4880 Stevens Creek Blvd, Suite 104
adam@yggdrasil.com     \ /                  San Jose, California 95129-1034
+1 408 261-6630         | g g d r a s i l   United States of America
fax +1 408 261-6631      "Free Software For The Rest Of Us."
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/