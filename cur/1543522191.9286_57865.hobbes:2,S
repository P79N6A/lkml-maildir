Date: Sat, 15 Jan 2000 15:22:45 -0800
From: Chip Salzenberg <>
Subject: Inode leak in dcache pruning, apparently
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/1/16/27

According to Mikulas Patocka:
> What happens when you try to unmount filesystem?
> [...]
> If it unmounts and the number of inodes drops after umount, it's because
> 	pruning dcache works badly.
BINGO!  Dcache pruning must be failing.  Here's the status before unmounting
one filesystem:
    /proc/sys/fs/inode-nr:1200      22
And after:
    /proc/sys/fs/inode-nr:1200      171
So apparently 151 inodes were hanging around in the dcache.
Thank you Mikulas!  Now the toughie:  How to track down the pruning weakness?
-- 
Chip Salzenberg          - a.k.a. -           <chip@valinux.com>
        "He's Mr. Big of 'Big And Tall' fame."  // MST3K
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/