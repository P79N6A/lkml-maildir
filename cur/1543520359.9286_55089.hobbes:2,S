Date: Thu, 23 Dec 1999 19:33:14 -0500 (EST)
From: Mark Hahn <>
Subject: Re: Bloat? (khttpd)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/12/23/160

> kHTTPd (and any webserver, and in a way NFS/FTP server) is two things
> 1) A Request-decoder/Startup (header) part
> 2) Bulk data transfer
...
> way, and is in the 2.2 kernels since ages). For #2, it makes no sence to 
> switch to userspace a lot, as userspace effectively would only increment 
> some counter.
this is a policy decision, and thus wrong.  real webservers want to
log hits, even on static pages.  this, and the fact that most real
webservers are dominated by non-static pages, is why khttpd shouldn't
be in the kernel: it's a benchmark special, embarassingly so.  our 
friends in Redmond will certainly not refrain from pointing out that 
the only way Linux can compete is by violating our own abstractions.
> The discussion about "bloat" cannot be over the filesize of the
> kernel-tarbal, as this overhead is minimal. It also cannot be "Everything 
> that can be done in userspace, should be banned from the kernel". Even the 
> TCP/IP stack and the VFS would have to be banned. 
this is disingenuous: the criterion is whether something can only be
appropriately done in kernel space.  so for instance, net protocols 
would presumably be too inefficient if in user-space.  AFAIR, the old
user-space nfsd simply could not implement certain operations correctly.
so far, we have no reason to believe that khttpd performs better than,
say, phhttbd, even on silly static-only benchmarks.  and even if it did,
the sensible conclusion would be that there's something wrong with Linux,
not that webserving should be in the kernel!
regards, mark hahn.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/