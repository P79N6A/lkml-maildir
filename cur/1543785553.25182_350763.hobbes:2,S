Date: Thu, 15 Sep 2005 14:01:53 +0200
From: Emmanuel Fleury <>
Subject: Re: Automatic Configuration of a Kernel
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/9/15/158

Hi,
Roman Zippel wrote:
> 
> The basic problem is that maintaining the bulk of autoconfig information 
> in a separate file is not feasible, it would be a nightmare to maintain.
> This means it would be better to integrate this information into Kconfig 
> and define interface so that external program/scripts (preferably shell 
> instead of perl) can use that to configure the kernel.
> 
> A simple example could look like this:
> 
> config FOO
> 	bool "foo"
> 	def_auto y
Why not directly having a direct reference to the name of the script ?
config FOO
	bool "foo"
	auto "detect-foo-script"
Where you have a specific directory in scripts/autoconfig/ where you
store the scripts. Each script output y, n or m.
But, it means a hell of scripts (except if we can pass arguments in the
auto field: auto "detect-foo-script card-XYZ release-32-or-higher").
This scheme seems much simpler to me (and yet not restrictive at all).
Of course, each script might have to ask few questions to the user as:
Do you want this FOO support ? [y/m/n]:
Or (when no module option):
Do you want this FOO support ? [y/n]:
When the feature is not detected or no field "auto" is found, the
feature is simply skipped silently.
I think this way is minimizing the foot print on the code and yet is
quite powerful. Moreover, you can add the auto-detection scripts without
interfering with the rest of the building system. The target autoconfig
will just be more and more efficient as long as more scripts are added.
Regards
-- 
Emmanuel Fleury
Assistant Professor          | Office: B1-201
Computer Science Department, | Phone:  +45 96 35 72 23
Aalborg University,          | Mobile: +45 26 22 98 03
Fredriks Bajersvej 7E,       | E-mail: fleury@cs.aau.dk
9220 Aalborg East, Denmark   | URL: www.cs.aau.dk/~fleury
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/