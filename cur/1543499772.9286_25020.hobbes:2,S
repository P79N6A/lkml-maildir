Date: Sun, 20 Jun 1999 14:12:08 +0200 (MET DST)
From: (Guest section DW)
Subject: Re: Same HD, same settings, different geometry
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/6/20/22

    From: Luca Montecchiani <m.luca@iname.com>
    > Yes, it is answered in the Large Disk FAQ/HOWTO.
    > (Section 14.2: Nonproblem: Identical disks have different geometry?)
    Thanks for pointing this (great doc!), I've never had problem with disk.
    Before starting to understood about those difference I expect to find 
    such information on linux/Documentation/ide.txt ;)
Yes, that is a good text. Maybe one might add a pointer to the HOWTO to it.
    > > As a rule (AFAIK), LBA does not work/is not supported on the
    > > secondary controller chain.
    > 
    > Nonsense.
    Ok, so linux ( latest version of course ) can fdisk any "fresh disks"
    connect to secondary IDE _without_ problem.
Yes. Whether your disk is on the primary or secondary interface
makes absolutely no difference to fdisk, and has never in the history
of Linux made any difference.
    Ok two questions came up now ( as I say on my first mail ) :
    Why query the bios if Linux uses "ATA IDENTIFY request" ?
1. ATA IDENTIFY tells you about the disk `reality'.
But fdisk does not want to know reality - it could not use it anyway.
It needs some fake geometry - the same fake geometry that DOS and BIOS use -
so that Linux and DOS can live on the same disk, and LILO can use the BIOS
at boot time.
2. ATA IDENTIFY also yields the `current geometry', but usually it is
impossible to derive any useful information from that.
    What do you think about proposed "nocmosgeom" ?
In your case it solves a nonproblem, but I know of cases where
it would be useful. I have no objections against such a boot parameter.
On the other hand, I think our aim must be to remove all this geometry
stuff from the kernel and leave it to LILO and fdisk.
So, although somewhat useful in the very short run, it would be a step
in the wrong direction.
    Another questions that remove the previous two:
    Why hda,hdb Bios setting have priority ( aka showed ) over
    "ATA IDENTIFY request" ?
ATA IDENTIFY tells you some nonsense that the disk invented.
It is not used by Linux, except for the part giving the
total disk capacity. Nobody is interested in hearing about
the 16 heads that ATA IDENTIFY says the disk has (while
the physical specs tell you that there are 6 heads)
or in hearing about the 63 sectors/track that ATA IDENTIFY
says the disk has (while the physical specs tell you that
the number of sectors per track is not a constant, and is
somewhere between 150 and 300).
So, in short, there is nothing interesting about the ATA IDENTIFY
output (except for the disk size), and there is no reason at all
why we should want to print it.
Andries
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/