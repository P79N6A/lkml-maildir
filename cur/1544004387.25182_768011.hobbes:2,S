Date: Wed, 12 Nov 2008 12:29:37 +0100
From: Ingo Molnar <>
Subject: Re: [PATCH 2/2] x86: ia32_signal: remove unnecessary padding
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/11/12/99

* Hiroshi Shimamoto <h-shimamoto@ct.jp.nec.com> wrote:
> From: Hiroshi Shimamoto <h-shimamoto@ct.jp.nec.com>
> 
> Impact: cleanup
> 
> Remove unnecessary paddings, this saves 4 bytes.
> 
> Signed-off-by: Hiroshi Shimamoto <h-shimamoto@ct.jp.nec.com>
> ---
>  arch/x86/ia32/ia32_signal.c |    5 +----
>  1 files changed, 1 insertions(+), 4 deletions(-)
applied your patches to tip/x86/signal:
 9cc3c49: x86: ia32_signal: remove unnecessary padding
 4a61204: x86: signal_32: introduce retcode and rt_retcode
thanks!
A question - this change:
> @@ -427,12 +427,10 @@ int ia32_setup_frame(int sig, struct k_sigaction *ka,
>  		u16 poplmovl;
>  		u32 val;
>  		u16 int80;
> -		u16 pad;
>  	} __attribute__((packed)) code = {
>  		0xb858,		 /* popl %eax ; movl $...,%eax */
>  		__NR_ia32_sigreturn,
>  		0x80cd,		/* int $0x80 */
> -		0,
>  	};
> 
>  	frame = get_sigframe(ka, regs, sizeof(*frame), &fpstate);
> @@ -508,8 +506,7 @@ int ia32_setup_rt_frame(int sig, struct k_sigaction *ka, siginfo_t *info,
>  		u8 movl;
>  		u32 val;
>  		u16 int80;
> -		u16 pad;
> -		u8  pad2;
> +		u8  pad;
>  	} __attribute__((packed)) code = {
>  		0xb8,
>  		__NR_ia32_rt_sigreturn,
does not impact any ABI, because it's only about the signal trampoline 
the kernel pushes to the user-space stack - not about any 
userspace-visible signal frame detail, right?
	Ingo