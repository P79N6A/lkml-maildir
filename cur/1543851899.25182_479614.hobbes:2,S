Date: Mon, 6 Nov 2006 09:48:42 +0100
From: Eric Dumazet <>
Subject: Re: ZONE_NORMAL memory exhausted by 4000 TCP sockets
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/11/6/29

On Monday 06 November 2006 09:10, Zhao Xiaoming wrote:
>
> Thanks for the answer. I know it's more likely relats to netdev.
> However, it's always a strange thing to have 400~500M bytes LOWMEM
> 'gone' while it's not reported to be occupied by slab. Both meminfo
> and buddyinfo tell the same.
>
> with traffics of 2000 concurrent sessions:
Slab:           293952 kB
So 292 MB used by slab for 2000 sessions.
Expect 600 MB used by slab for 4000 sessions.
So your precious LOWMEM is not gone at all. It *IS* used by SLAB.
You forgot to send 
cat /proc/slabinfo
>
> cat /proc/meminfo
> MemTotal:      4136580 kB
> MemFree:       3298460 kB
> Buffers:          4096 kB
> Cached:          21124 kB
> SwapCached:          0 kB
> Active:          47416 kB
> Inactive:        12532 kB
> HighTotal:     3276160 kB
> HighFree:      3214592 kB
> LowTotal:       860420 kB
> LowFree:         83868 kB
> SwapTotal:           0 kB
> SwapFree:            0 kB
> Dirty:              12 kB
> Writeback:           0 kB
> Mapped:          42104 kB
> Slab:           293952 kB
> CommitLimit:   2068288 kB
> Committed_AS:    58892 kB
> PageTables:       1112 kB
> VmallocTotal:   116728 kB
> VmallocUsed:      2940 kB
> VmallocChunk:   110548 kB
> HugePages_Total:     0
> HugePages_Free:      0
> Hugepagesize:     2048 kB
>
>
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/