Date: Wed, 28 Feb 2007 06:09:44 -0700
From: (Eric W. Biederman)
Subject: Re: Linux 2.6.21-rc2
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/2/28/75

Brice Goglin <Brice.Goglin@ens-lyon.org> writes:
> Linus Torvalds wrote:
>> Oh well.. I'm not very proud of this, because quite frankly, -rc2 has way 
>> more changes than I really like.
>> 
>
> Hi Linus,
>
> rc2 fails to build on my thinkpad t43:
>
>   CC      arch/i386/kernel/io_apic.o
> arch/i386/kernel/io_apic.c: In function 'setup_IO_APIC_irqs':
> arch/i386/kernel/io_apic.c:1357: error: 'struct irq_desc' has no member
> named 'affinity'
> arch/i386/kernel/io_apic.c: In function 'io_apic_set_pci_routing':
> arch/i386/kernel/io_apic.c:2878: error: 'struct irq_desc' has no member
> named 'affinity'
> make[1]: *** [arch/i386/kernel/io_apic.o] Error 1
> make: *** [arch/i386/kernel] Error 2
>
> The problem is caused by affinity being within #ifdef SMP in struct
> irq_desc in irq.h:
> #ifdef CONFIG_SMP
>         cpumask_t               affinity;
>         unsigned int            cpu;
> #endif
>
> I don't know whether the whole functions or just a single line should be
> placed under #ifdef CONFIG_SMP. Eric (in CC) will know better than I do.
Yes. I goofed, and missed that stupid case.  The offending lines
should just die.  Patch already sent to Linus.  
Eric
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/