Date: Mon, 26 Mar 2007 20:47:23 -0800
From: Andrew Morton <>
Subject: Re: [PATCH][ 3/5] sched: implement staircase deadline cpu scheduler
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/3/27/4

On Tue, 27 Mar 2007 13:10:39 +1100 Con Kolivas <kernel@kolivas.org> wrote:
> +	DECLARE_BITMAP(bitmap, PRIO_RANGE + 1);
> +	/*
> +	 * This bitmap shows what priorities this task has received quota
> +	 * from for this major priority rotation on its current runqueue.
> +	 */
>  	struct prio_array *array;
> +	unsigned long rotation;
> +	/* Which major runqueue rotation did this task run */
> 
>  	unsigned short ioprio;
>  #ifdef CONFIG_BLK_DEV_IO_TRACE
>  	unsigned int btrace_seq;
>  #endif
> -	unsigned long sleep_avg;
>  	unsigned long long timestamp, last_ran;
>  	unsigned long long sched_time; /* sched_clock time spent running */
> -	enum sleep_type sleep_type;
> 
>  	unsigned long policy;
>  	cpumask_t cpus_allowed;
> -	unsigned int time_slice, first_time_slice;
> +	int time_slice;
> +	/*
> +	 * How much this task is entitled to run at the current priority
> +	 * before being requeued at a lower priority.
> +	 */
> +	unsigned int first_time_slice;
> +	/* Is this the very first time_slice this task has ever run. */
> +	int quota;
> +	/* How much this task receives at each priority level */
This is nuts.  Nobody puts the description of the fields _below_ those fields.
I fixed it in my copy (while fixing the usual reject storm).  Please fix it
in your tree, wherever it occurs.
Weird.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/