Date: Thu, 16 Jun 2005 11:48:01 +1000
From: Nick Piggin <>
Subject: Re: 2.6.12-rc6-mm1 & 2K lun testing
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/6/15/247

Badari Pulavarty wrote:
> On Wed, 2005-06-15 at 12:02, Nick Piggin wrote:
> 
>>Yeah, take off GFP_HIGH and set GFP_NOWARN (always). I would be
>>interested to see how that goes.
>>
>>Obviously it won't eliminate your failures there (it will probably
>>produce more of them), however it might help the scsi command
>>allocation from overwhelming the system.
> 
> 
> Hmm.. seems to help little. IO rate is not great (compared to 90MB/sec
> with "raw") - but machine is making progress. But again, its pretty
> unresponsive.
> 
Anything measurable that we can use to maybe get the chage
picked up and tested in -mm for a while?
> Thanks,
> Badari
> 
> procs -----------memory---------- ---swap-- -----io---- --system--
> ----cpu----
>  r  b   swpd   free   buff  cache   si   so    bi    bo   in    cs us sy
> id wa
> 131 254  34896  31328   2540 4982740    0    0    29 101877 1086 11220 
> 0 100  0  0
> 149 268  34896  32824   2536 4983712   13    0    42 39505  439  4454  0
> 100  0  0
> 135 254  34896  31112   2536 4984768   11    0    20 36233  373  4078  0
> 100  0  0
> 130 242  34896  32600   2536 4987364    6    0   161 33626  377  3957  0
> 100  0  0
> 153 263  34896  32592   2532 4993560    0    0    14 37124  385  4468  0
> 100  0  0
> 144 236  34896  32668   2548 5013148    6    0   154 220366 2360 27530 
> 0 100  0  0
Though it can be difficult to judge performance based on vmstat
when you get these large spikes. vmstat is measuring requests
into the elevator so you see batching and throttling effects. I
would expect requests completing to be more even... your entire
vmstat listing looks like it is averaging about 60-70MB/s - does
this agree with your measurements?
Finally, do you see anything interesting on the profiles?
-- 
SUSE Labs, Novell Inc.
Send instant messages to your online friends 
http://au.messenger.yahoo.com
 
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/