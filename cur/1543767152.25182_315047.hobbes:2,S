Date: Sat, 30 Apr 2005 00:21:54 +0800
From: "Coywolf Qi Hunt" <>
Subject: [patch] lxr-0.3.1 handle `_' fix
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/4/29/143

Hello,
lxr-0.3.1 can not handle '_' in the Architecture variable.
Like <
http://sosdg.org/~coywolf/lxr/source/include/asm-x86_64/?a=x86_64>
is wrongly shown as <
http://sosdg.org/~coywolf/lxr/source/include/asm-/?a=x86_64>
This problem was brought in by the file exposure security fix some time ago iirc. 
		Coywolf
diff -pu lxr/http/lib/LXR/Config.pm.orig lxr/http/lib/LXR/Config.pm
--- lxr/http/lib/LXR/Config.pm.orig	2005-04-29 23:35:26.000000000 +0800
+++ lxr/http/lib/LXR/Config.pm	2005-04-29 23:37:28.000000000 +0800
@@ -156,7 +156,7 @@ sub varrange {
 sub varexpand {
     my ($self, $exp) = @_;
     $exp =~ s{\$\{?(\w+)\}?}{
-       $self->{variable}->{$1} =~ /^([a-zA-Z0-9\.\-]*)$/ ? $1 : ''
+       $self->{variable}->{$1} =~ /^([a-zA-Z0-9\.\-_]*)$/ ? $1 : ''
        }ge;
     return($exp);
 }
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/