Date: Sat, 8 Dec 2007 18:39:20 +0000 (GMT)
From: Chris Rankin <>
Subject: Re: [2.6.23.1] PCI device locking up the computer when its module loads
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/12/8/127

> > On Mon, 22 Oct 2007 13:43:16 +0100 (BST) Chris Rankin <rankincj@yahoo.com> wrote:
> > > I have a Netgear MA301 PLX wireless networking adapter which wants to use the hostap_plx
> > > driver in Linux 2.6.23.1. This very same piece of hardware works fine in an old(!) P120
> > > machine running 2.4.33, but makes the 2.6.23.1 kernel freeze as soon as the
> > > pci_enable_device() function is called in prism2_plx_probe.
Interestingly, I have just discovered that I can do the following on this machine *without*
locking it up (on Linux 2.6.23.9):
# cat /sys/bus/pci/devices/0000:00:0e.0/enable
0
# echo 1 > /sys/bus/pci/devices/0000:00:0e.0/enable
# cat /sys/bus/pci/devices/0000:00:0e.0/enable
1
where according to lspci:
00:0e.0 Network controller: Netgear MA301 802.11b Wireless PCI Adapter (rev 02)
Doesn't writing to this sysfs file also call pci_enable_device()? Loading the hostap_plx module is
still instantly lethal.
Cheers,
Chris
      __________________________________________________________
Sent from Yahoo! Mail - a smarter inbox 
http://uk.mail.yahoo.com