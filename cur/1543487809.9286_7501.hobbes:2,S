Date: Sun, 28 Feb 1999 13:14:03 +0100 (CET)
From: Ingo Molnar <>
Subject: Re: PROBLEM: PCI trouble : can not mount /dev/cdrom
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/2/28/52

On Sun, 28 Feb 1999 nakamine@bd.mbn.or.jp wrote:
> Inserting adaptec APA-1460A SlimSCSI PCI ,
> kernel said "bug: kernel timer added twice at c01adba4." .
> --- sched.c.org Sat Feb 27 19:47:00 1999
> +++ sched.c     Sun Feb 28 14:48:42 1999
> @@ -466,8 +466,11 @@
>         spin_lock_irqsave(&timerlist_lock, flags);
>         if (timer->prev)
>                 goto bug;
> +out:
>         internal_add_timer(timer);
> - out:
>         spin_unlock_irqrestore(&timerlist_lock, flags);
>         return;
> Are these changes suitable ?
yep i think this is the right way to do it. We both print a debugging
message for 'suspect' timers, and assume that the way the timer is used is
correct.
the reason for the message is that adding a timer twice is quite hard to
debug. But sometimes it's legal to add a timer with not all fields
initialized.
-- mingo
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/