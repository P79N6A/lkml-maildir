Date: Tue, 19 Sep 2000 16:11:30 -0700
From: "David S. Miller" <>
Subject: Re: [PATCH] abuse of macros in swab.h
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/9/19/38

   Date: 	Tue, 19 Sep 2000 19:13:31 -0400 (EDT)
   From: Alexander Viro <viro@math.psu.edu>
   Nice spotting, but bad fix, IMO. swab...() stuff is a perfect
   example of the dangerous use of macros. BTW, 2.4 has the same
   problem.
Would you mind taking a look at the difference in code output when
register pressure in a given function is moderate to high?  :-)
Unfortunately, gcc does not make inline functions as cheap as "macros
with type checking".  There are extra costs and often the register
allocator cannot cope and stuff starts getting spilled to the stack.
I agree with you totally from the "dangerous use" standpoint.
Later,
David S. Miller
davem@redhat.com
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/