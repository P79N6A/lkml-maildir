Date: Thu, 17 May 2007 02:09:16 +0200
From: Christian <>
Subject: 2.6.22-rc1 does not boot on VIA C3_2 cause of X86_CMPXCHG64
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/5/16/499

Hi,
my small VIA C3_2 box does not boot with 2.6.22-rc1.
It even does not uncompress the kernel.
The configuration as M386 M486 works. But M586 + MVIAC3_2
does not work.
solution for me, cahnge arch/i386/Kconfig.cpu
--- arch/i386/Kconfig.cpu.before     2007-05-17 01:38:26.000000000 +0200
+++ arch/i386/Kconfig.cpu       2007-05-17 00:54:52.000000000 +0200
@@ -299,5 +299,5 @@
 config X86_CMPXCHG64
        bool
-       depends on !M386 && !M486
+       depends on !M386 && !M486 && !MVIAC3_2
        default y
The related #ifdef is in ./include/asm-i386/cmpxchg.h
May be cmpxchg8b is not supported by VIAC3_2 ?
May be some other non Intel/AMD need to be excluded from X86_CMPXCHG64 ?
May be the generic option CONFIG_X86_GENERIC need to switch this off also ?
Just write an email to me if you want to send a patch to test on a C3_2.
Best regards,
Christian
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/