Date: Sun, 22 Jan 2006 09:51:10 +0100 (MET)
From: Jan Engelhardt <>
Subject: Re: soft update vs journaling?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/1/22/23

>Unfortunately, journaling uses a chunk of space.  Imagine a journal on a
>USB flash stick of 128M; a typical ReiserFS journal is 32 megabytes!
>Sure it could be done in 8 or 4 or so; or (in one of my file system
>designs) a static 16KiB block could reference dynamicly allocated
>journal space, allowing the system to sacrifice performance and shrink
>the journal when more space is needed.  Either way, slow media like
>floppies will suffer, HARD; and flash devices will see a lot of
>write/erase all over the journal area, causing wear on that spot.
 - Smallest reiserfs3 journal size is 513 blocks - some 2 megabytes,
   which would be ok with me for a 128meg drive.
   Most of the time you need vfat anyway for your flashstick to make
   useful use of it on Windows.
 - reiser4's journal is even smaller than reiser3's with a new fresh
   filesystem - same goes for jfs and xfs (below 1 megabyte IIRC)
 - I would not use a journalling filesystem at all on media that degrades
   faster as harddisks (flash drives, CD-RWs/DVD-RWs/RAMs).
   There are specially-crafted filesystems for that, mostly jffs and udf.
 - You really need a hell of a power fluctuation to get a disk crippled.
   Just powering off (and potentially on after a few milliseconds) did
   (in my cases) just stop a disk write whereever it happened to be,
   and that seemed easily correctable.
Jan Engelhardt
-- 
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/