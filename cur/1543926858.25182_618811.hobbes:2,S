Date: Sat, 17 Nov 2007 13:49:54 -0500
From: Jeff Dike <>
Subject: Re: [PATCH 7/8] UML - add virt_to_pte
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/11/17/136

On Sat, Nov 17, 2007 at 11:50:07AM +0100, Roel Kluin wrote:
> > +	if (!pte_present(*pte))
> > +		pte = NULL;
> 
> shouldn't you check again for (pte == NULL)?
No, because if the page isn't mapped, handle_page_fault would have
returned non-zero, and we would have already returned.
This is leaving aside issues of whether the page could have been
unmapped by another CPU (which isn't an issue right now, and for which
I have a patch to fix anyway).
				Jeff
-- 
Work email - jdike at linux dot intel dot com
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/