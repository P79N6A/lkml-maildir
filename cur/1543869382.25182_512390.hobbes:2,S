Date: Fri, 23 Feb 2007 10:50:31 -0500
From: Jeff Dike <>
Subject: Re: [PATCH] UML utrace support, step 1
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/2/23/174

On Thu, Feb 22, 2007 at 07:19:03PM -0800, Roland McGrath wrote:
> Your replacement patch still has utrace_regset stuff in it, so it doesn't
> compile without the later patches in the series.  Try applying only
> utrace-tracehook.patch from the series, then get it to build and make your
> utrace-tracehook-um.patch.  Then apply only utrace-regset.patch on top of
> that, and get that building to make utrace-regset-um.patch.  Then apply
> utrace-core.patch and utrace-ptrace-compat.patch to get ptrace finally
> working again and make utrace-ptrace-compat-um.patch.
Ah, I was building with all of utrace, and observing that it didn't compile
without all the bits in that patch.  I'll back out the bits of utrace
I don't need yet and send another patch.
> You'll still find this insufficient when you get to biarch support (x86_64).
> At least you'll have to add another one elsewhere too, and make
> utrace_native_view refer to both.
OK, I'll deal with that when I get to it.
> Ok.  We do seem to have a problem when the host has CONFIG_PREEMPT=y, which
> makes me suspect it might be a race problem that could also hit with enough
> hardware parallelism.  If you get a chance to try that and can characterize
> the way it misbehaves at the level of specific ptrace/wait calls, that
> would be a great help.  Otherwise I'll try to look into it when I get some
> time, but it's falling down the queue a bit since people don't seem too put
> out about it right now.
I'll turn on preempt and see what happens.
				Jeff
-- 
Work email - jdike at linux dot intel dot com
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/