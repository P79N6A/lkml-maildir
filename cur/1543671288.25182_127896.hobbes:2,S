Date: Fri, 25 Apr 2003 08:48:33 -0500
From: "Miller, Mike (OS Dev)" <>
Subject: RE: cciss patches for 2.4.21-rc1, 4 of 4
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/4/25/92

I haven't seen any issues (yet) on ia64. I'm running with 5GB RAM.
mikem
-----Original Message-----
From: Cameron, Steve 
Sent: Friday, April 25, 2003 8:25 AM
Cc: linux-kernel@vger.kernel.org; Miller, Mike (OS Dev)
Subject: RE: cciss patches for 2.4.21-rc1, 4 of 4
Mike Miller wrote:
> Changes:
>	1. Sets the DMA mask to 64 bits. Removes RH's code for the DMA mask.
In order for this to work, it depends on pci_alloc_consistent always
returning memory with physical addresses that fit in 32 bits, 
regardless of the DMA mask, since the cciss device's command register 
is 32 bits, and the command buffer addresses must fit in there.  If 
that's the case, this is fine.  Otherwise, this may fail if pci_alloc_consistent
returns memory above 4GB.  (on x86, I think this is not a problem, not
sure of other archs, e.g. alpha, ia64)
Note the cciss devices *are* capable of 64 bit addressing for DMA, provided
you can find a way to tell it a 64 bit address.  For data, it's no problem.
Only for command buffers is it a problem.
-- steve
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/