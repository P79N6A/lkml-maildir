Date: Fri, 18 Jun 1999 11:45:01 -0400
From: "Stefan Monnier" <monnier+lists/linux/>
Subject: Re: sockfs (was: UUIDs (and devfs and major/minor numbers))
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/6/19/3

> On 18 Jun 1999, Stefan Monnier wrote:
> > I do admit that there is a vaguely reasonable alternative at user-level: extend
> > inetd to also be able to start services like sendmail, named, innd, mountd, ..
> > The way this would work would be along the same lines as `sendmail_start' and
> > `inn_start': inetd binds to the port, forks and passes the file descriptor as
> > an argument (it would probably have to exec sendmail and such eagerly rather
> > than lazily).
> > I've never gotten around to adding that feature to inetd, though.
> > If anyone's interested... this is not linux-kernel ground any more.
> 
> Most of these do not run out of inetd, for performance reasons.  And
> several systems have wrappers for this sort of thing anyway.
> 
> innd has the inndstart program, which runs as root, binds the port, then
> becomes user news and loses all privs.  There is a similar wrapper for
> sendmail, though not many ppl use it.
That's exactly what I was talking about:  all those wrappers do the exact same
thing: fold this sendmail_start and inndstart (and dnews_start and probably a
couple others) code into inetd. There is *no* performance issue since inetd
would exec them eagerly (before getting any connection).
Of course I would also turn /etc/inetd.conf into a directory so that
you can turn thing on/off simply by doing something like
	mv /etc/inetd.conf/smtp	/etc/inetd.conf/#smtp
	(and maybe) kill -HUP inetd (although it could also poll the dir)
-- Stefan
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/