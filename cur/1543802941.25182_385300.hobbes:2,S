Date: Thu, 12 Jan 2006 10:08:17 -0800
From: john stultz <>
Subject: Re: Back to the Future ? or some thing sinister ?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/1/12/225

On Thu, 2006-01-12 at 08:33 -0600, Ram Gupta wrote:
> On 1/11/06, john stultz <johnstul@us.ibm.com> wrote:
> > On Sun, 2006-01-08 at 22:03 -0600, Nathan Lynch wrote:
> > > Chaitanya Hazarey wrote:
> > > >
> > > > We have got a machine, lets say X , make is IBM and the CPU is Intel
> > > > Pentium 4 2.60 GHz. Its running a 2.6.13.1 Kernel and previously,
> > > > 2.6.27-4 Kernel the distribution is Debian Sagre.
> 
> It may be BIOS related. But I feel it might be an overflow related
> issue. If the variable is signed int then there will be a transition
> from 0x7fffffff ns  to 0x80000000 ns which is basically from +2 sec to
> -2 sec which will result in 4 sec loss.
I'm pretty sure this is the BIOS issue. If your hesitant about updating
the BIOS, try booting w/ noapic, and see if that works around the issue.
The 4 second loss is the tv_nsec portion of the xtime timespec wrapping.
Since time is not accumulated (timer_interrupt isn't being called at the
normal HZ frequency), the TSC offset grows and grows (and finally will
wrap repeating the processes), causing the xtime.tv_nsec to wrap.
Thus you are correct that the symptom is overflow related, but the cause
is most likely the BIOS.
thanks
-john
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/