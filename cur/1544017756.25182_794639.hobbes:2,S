Date: Mon, 19 Jan 2009 14:24:46 -0800
From: "H. Peter Anvin" <>
Subject: Re: Fail to early boot with v2.6.27-rc2 to at least v2.6.29-rc2 due to dc1e35c
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2009/1/19/404

Suresh Siddha wrote:
> On Mon, Jan 19, 2009 at 02:07:36PM -0800, H. Peter Anvin wrote:
>> Suresh Siddha wrote:
>>> Also, I wonder, if we should complain/scream during boot if we find only
>>> fewer cpuid levels on modern generation cpu's.
>>>
>> We should, or if this block is reversible, we should probably just undo 
>> it (the reason people put this block in places is because of, ahem, 
>> inferior operating systems having bugs.)
>>
>> Do you know how this is managed?  Via an MSR?
> 
> IA32_MISC_ENABLE MSR bit 22
LOL, the official name of this bit is "IA32_MISC_ENABLES.BOOT_NT4"; kind 
of says it all.  In fact, I remember the problems we had with NT4 and 
CPUID back from the Transmeta days, and there, too, we ended up with a 
CPUID hack which Linux unconditionally disables.
I'll write up a patch.
	-hpa