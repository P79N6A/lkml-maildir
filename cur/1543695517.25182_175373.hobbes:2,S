Date: Tue, 28 Oct 2003 12:04:45 +0100
From: Pavel Machek <>
Subject: Re: [PATCH] Autoregulate vm swappiness cleanup
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/10/28/34

Hi!
> > > It seems that you don't need si_swapinfo here, do you? i.freeram,
> > > i.bufferram, and i.totalram all come from meminfo, as far as I can
> > > see? Maybe I'm missing a bit ...
> >
> > Well I did do it a while ago and it seems I got carried away adding and
> > subtracting info indeed. :-) Here's a simpler patch that does the same
> > thing.
> 
> The off-list enthusiasm has been rather strong so here is a patch done the 
> right way (tm). There is no need for the check of totalram being zero (the 
> original version of this patch modified the swappiness every tick which was 
> wasteful and had a divide by zero on init). Adjusting vm_swappiness only when 
> there is pressure to swap means totalram shouldn't be ever be zero. The 
> sysctl is made read only since writing to it would be ignored now.
I believe swappiness == 100 was "I want max throughput, I don't care
about latency going through roof", while swappiness == 0 was "I don't
want you to swap too much, behave reasonably".
As you don't know if user cares about latency or not, I don't see how
you can autotune this.
-- 
When do you have a heart between your knees?
[Johanka's followup: and *two* hearts?]
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/