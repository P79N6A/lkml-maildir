Date: Wed, 12 Mar 2003 16:45:07 -0600 (CST)
From: Patrick Mochel <>
Subject: Re: Kernel bug in dcache.h:266; 2.5.64, EIP at sysfs_remove_dir
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/3/12/324

On Thu, 13 Mar 2003, CaT wrote:
> On Sun, Mar 09, 2003 at 04:06:24PM -0600, Patrick Mochel wrote:
> > 
> > On 9 Mar 2003, Jeremy Fitzhardinge wrote:
> > 
> > > On Sun, 2003-03-09 at 12:31, Patrick Mochel wrote:
> > > > I was able to reproduce the Oops with a USB device on multiple insert/
> > > > removals. The patch below fixes the Oops for me. Could people who have 
> > > > seen the Oops try it out and let me know if it helps them? 
> > > > 
> > > > [ Unfortunately, I can't test some of the exact failure scenarios, as I 
> > > > don't use ppp, and my one system with PCMCIA has decided that it doesn't 
> > > > want to let me (physically) insert cards anymore.. ]
> > > 
> > > I'm still getting a crash with this patch+mm4.  I got this on ethernet
> > > card removal:
> > 
> > Bah, we're accidentally dropping the refcount on the directory one too 
> > many times, which is a different, though slightly related, problem to the 
> > one the previous patch fixed. 
> > 
> > Please try this patch (after removing the previous one). Thanks,
> 
> I wanted to give this a go but it does not apply vs my 2.5.64. None of
> the patches I've applied to it touch that file so I'm guessing I'm
> missing something else.
> 
> What am I missing and/or is it possible to get this vs 2.5.64? I tried
> hand adding it in but didn't due to the files being rather different.
Sorry, the patches were relative to the latest BK tree, as well as the 
latest BK snapshot from kernel.org. 
The fix has been integrated into Linus's tree, so by getting the latest 
snapshot, things should be fixed for you.
	-pat
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/