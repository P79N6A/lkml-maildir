Date: Mon, 15 Sep 2003 10:03:14 -0700 (PDT)
From: Patrick Mochel <>
Subject: Re: Swsusp weirdness with ACPI
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/9/15/149

> Here is my /proc/acpi/sleep:
> S0 S3 S4 S4bios S5
> 
> - 0 doesn't seem to do anything.
0 is 'On'. It will not do anything. 
> - 3 will ONLY 'suspend' my laptop if all my USB devices are disconnected
>   and I have removed my PCMCIA cards.
Do you physically have to remove the devices or can you simply remove the 
modules? 
>   Furthermore, it won't resume. The fan will spin up, etc., but the LCD
>   will not turn on.
Noted. This is a common problem that we're trying to get to the bottom of. 
> - 4 nearly works. When it's suspending there will be an oops that flies
>   by too quickly to read. It will turn off though, but when I reboot it,
>   my swap partition will have been hosed:
> 
>   "Unable to find swap-space signature" when trying to swapon
> 
>   "PM: Reading swsusp image.
>   swsusp: Resume From partition: hda7, Device: unknown-block(0,0)
>   Resume Machine: Error -6 resuming
>   PM: Resume from disk failed." when I try to resume.
> 
>   I have to mkswap it again for stuff to work.
Interesting. That backtrace and the cause (whether it's an actual Oops, a 
BUG() or a WARN_ON()) is important. Is there anyway you could hook up a 
serial console to capture the output? 
Also, if you're willing, I would recommend trying 2.6.0-test5-mm2, which
will allow you to try the original swsusp code (via /proc/acpi/sleep)
independently of the more recent suspend-to-disk code (via 
/sys/power/state).
Thanks,
	Pat
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/