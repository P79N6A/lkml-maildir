Date: Wed, 4 May 2005 22:10:11 +0200
From: "Oskar Liljeblad" <>
Subject: Re: clock drift with two Promise Ultra133 TX2 (PDC 20269) cards
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/5/4/152

On Tuesday, May 03, 2005 at 13:45, Drew Winstel wrote:
> > Thanks, now it loads correctly. Unfortunately the clock drift still occurs
> > with pata_pdc2027x. I'm guessing here, but can clock drift have anything
> > to do with IRQs? Also, is it normal to see errors in /proc/interrupt?
> 
> I've never noticed any errors before, but that could just be a result of me 
> never actually bothering to look.
Are interrupts errors serious? Can anyone tell? The error count was higher
when I had a fifth PCI card in the computer (natsemi ethernet NIC).
Could there be some kind of PCI card conflict? Maybe I should try to
remove a few of them...
[..]
> Let's do some poking into your kernel config.  What do you have set under 
> "Processor type and features"?
CONFIG_X86_PC=y
CONFIG_MK7=y
CONFIG_X86_CMPXCHG=y
CONFIG_X86_XADD=y
CONFIG_X86_L1_CACHE_SHIFT=6
CONFIG_RWSEM_XCHGADD_ALGORITHM=y
CONFIG_GENERIC_CALIBRATE_DELAY=y
CONFIG_X86_WP_WORKS_OK=y
CONFIG_X86_INVLPG=y
CONFIG_X86_BSWAP=y
CONFIG_X86_POPAD_OK=y
CONFIG_X86_GOOD_APIC=y
CONFIG_X86_INTEL_USERCOPY=y
CONFIG_X86_USE_PPRO_CHECKSUM=y
CONFIG_X86_USE_3DNOW=y
CONFIG_HPET_TIMER=y
CONFIG_X86_UP_APIC=y
CONFIG_X86_UP_IOAPIC=y
CONFIG_X86_LOCAL_APIC=y
CONFIG_X86_IO_APIC=y
CONFIG_X86_TSC=y
In other words, Athlon/Duron/K7 + HPET + Local APIC + IO-Apic
(though I have tried with both XT-PIC and Local APIC, with same
drift).
And no, the clock drift occurs no matter if ntpd is running or not.
It's having a very hard time to syncronize with the remote servers,
because the clock drift is too high. (It also says somewhere in the
NTP documentation that it doesn't handle too high clock drift.)
Regards,
Oskar Liljeblad (oskar@osk.mine.nu)
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/