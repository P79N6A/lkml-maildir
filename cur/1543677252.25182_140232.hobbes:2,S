Date: Fri, 13 Jun 2003 03:58:45 -0700
From: Frank Cusack <>
Subject: cryptoapi 2.5->2.4 backport
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/6/13/81

Any problem with just changing crypto/cipher.c:
    enum km_type crypto_km_types[] = {
            KM_USER0,
            KM_USER1,
            KM_SOFTIRQ0,
            KM_SOFTIRQ1,
    };
to
    enum km_type crypto_km_types[] = {
            KM_USER0,
            KM_USER1,
            KM_USER0,
            KM_USER1,
    };
?
(or the equivalent change in crypto/internal.h)
static inline enum km_type crypto_kmap_type(int out)
{
        return crypto_km_types[(in_softirq() ? 2 : 0) + out];
}
static inline void *crypto_kmap(struct page *page, int out)
{
        return kmap_atomic(page, crypto_kmap_type(out));
}
thanks
/fc
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/