Date: Fri, 3 Aug 2007 04:39:57 -0500
From: Kumar Gala <>
Subject: Re: 2.6.23-rc1-mm2
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/8/3/52

On Aug 2, 2007, at 5:14 AM, Mariusz Kozlowski wrote:
>>> Second issue as reported earilier allmodconfig fails to build on  
>>> imac g3.
>>
>> Do you really mean g3?  If so it's a 32-bit kernel and it  
>> shouldn't be
>> building lparmap.s.  Or do you mean G5?
>
> Yes it is iMac G3. More or less sth like this:
> 
http://upload.wikimedia.org/wikipedia/commons/c/c0/IMac_Bondi_Blue.jpg
>
> processor       : 0
> cpu             : 740/750
> temperature     : 47-49 C (uncalibrated)
> clock           : 400MHz
> revision        : 2.2 (pvr 0008 0202)
> bogomips        : 796.67
> machine         : PowerMac2,1
> motherboard     : PowerMac2,1 MacRISC2 MacRISC Power Macintosh
> detected as     : 66 (iMac FireWire)
> pmac flags      : 00000005
> L2 cache        : 512K unified
> memory          : 256MB
> pmac-generation : NewWorld
>
>>>   CC      arch/powerpc/kernel/lparmap.s
>>>   AS      arch/powerpc/kernel/head_64.o
>>> lparmap.c: Assembler messages:
>>> lparmap.c:84: Error: file number 1 already allocated
>>> make[1]: *** [arch/powerpc/kernel/head_64.o] Blad 1
>>> make: *** [arch/powerpc/kernel] Blad 2
>>
>> Weird.  Could you do make V=1 and send me the output?
>
> Ok. Here it goes. The last screen. If you need all / more feel free  
> to mail
> me. Config is attached - please note that this is default  
> allmodconfig.
>
>
>
> gcc -m64 -Wp,-MD,arch/powerpc/kernel/.machine_kexec.o.d  -nostdinc - 
> isystem /usr/lib/gcc/powerpc-linux-gnu/4.1.2/include -D__KERNEL__ - 
> Iinclude  -include
> include/linux/autoconf.h  -Wall -Wundef -Wstrict-prototypes -Wno- 
> trigraphs -fno-strict-aliasing -fno-common -Werror-implicit- 
> function-declaration -Os -msoft-float -pipe -mminimal-toc - 
> mtraceback=none  -mcall-aixdesc -mcpu=power4 -mno-altivec -funit-at- 
> a-time -mno-string -Wa,-maltivec -fomit-frame-pointer -g  -fno- 
> stack-protector -Wdeclaration-after-statement -Wno-pointer-sign  - 
> mno-minimal-toc   -D"KBUILD_STR(s)=#s" -D"KBUILD_BASENAME=KBUILD_STR 
> (machine_kexec)"  -D"KBUILD_MODNAME=KBUILD_STR(machine_kexec)" -c -o
> arch/powerpc/kernel/.tmp_machine_kexec.o arch/powerpc/kernel/ 
> machine_kexec.c
>
> gcc -m64 -Wp,-MD,arch/powerpc/kernel/.crash.o.d  -nostdinc - 
> isystem /usr/lib/gcc/powerpc-linux-gnu/4.1.2/include -D__KERNEL__ - 
> Iinclude  -include
> include/linux/autoconf.h  -Wall -Wundef -Wstrict-prototypes -Wno- 
> trigraphs -fno-strict-aliasing -fno-common -Werror-implicit- 
> function-declaration -Os -msoft-float -pipe -mminimal-toc - 
> mtraceback=none  -mcall-aixdesc -mcpu=power4 -mno-altivec -funit-at- 
> a-time -mno-string -Wa,-maltivec -fomit-frame-pointer -g  -fno- 
> stack-protector -Wdeclaration-after-statement -Wno-pointer-sign  - 
> mno-minimal-toc   -D"KBUILD_STR(s)=#s" -D"KBUILD_BASENAME=KBUILD_STR 
> (crash)"  -D"KBUILD_MODNAME=KBUILD_STR(crash)" -c -o
> arch/powerpc/kernel/.tmp_crash.o arch/powerpc/kernel/crash.c
>
> gcc -m64 -Wp,-MD,arch/powerpc/kernel/.machine_kexec_64.o.d  - 
> nostdinc -isystem /usr/lib/gcc/powerpc-linux-gnu/4.1.2/include - 
> D__KERNEL__ -Iinclude  -include
> include/linux/autoconf.h  -Wall -Wundef -Wstrict-prototypes -Wno- 
> trigraphs -fno-strict-aliasing -fno-common -Werror-implicit- 
> function-declaration -Os -msoft-float -pipe -mminimal-toc - 
> mtraceback=none  -mcall-aixdesc -mcpu=power4 -mno-altivec -funit-at- 
> a-time -mno-string -Wa,-maltivec -fomit-frame-pointer -g  -fno- 
> stack-protector -Wdeclaration-after-statement -Wno-pointer-sign  - 
> mno-minimal-toc   -D"KBUILD_STR(s)=#s" -D"KBUILD_BASENAME=KBUILD_STR 
> (machine_kexec_64)"  -D"KBUILD_MODNAME=KBUILD_STR 
> (machine_kexec_64)" -c -o
> arch/powerpc/kernel/.tmp_machine_kexec_64.o
> arch/powerpc/kernel/machine_kexec_64.c
>
> gcc -m64 -Wp,-MD,arch/powerpc/kernel/.audit.o.d  -nostdinc - 
> isystem /usr/lib/gcc/powerpc-linux-gnu/4.1.2/include -D__KERNEL__ - 
> Iinclude  -include
> include/linux/autoconf.h  -Wall -Wundef -Wstrict-prototypes -Wno- 
> trigraphs -fno-strict-aliasing -fno-common -Werror-implicit- 
> function-declaration -Os -msoft-float -pipe -mminimal-toc - 
> mtraceback=none  -mcall-aixdesc -mcpu=power4 -mno-altivec -funit-at- 
> a-time -mno-string -Wa,-maltivec -fomit-frame-pointer -g  -fno- 
> stack-protector -Wdeclaration-after-statement -Wno-pointer-sign  - 
> mno-minimal-toc   -D"KBUILD_STR(s)=#s" -D"KBUILD_BASENAME=KBUILD_STR 
> (audit)"  -D"KBUILD_MODNAME=KBUILD_STR(audit)" -c -o
> arch/powerpc/kernel/.tmp_audit.o arch/powerpc/kernel/audit.c
>
> gcc -m64 -Wp,-MD,arch/powerpc/kernel/.swsusp_64.o.d  -nostdinc - 
> isystem /usr/lib/gcc/powerpc-linux-gnu/4.1.2/include -D__KERNEL__ - 
> Iinclude  -include
> include/linux/autoconf.h  -Wall -Wundef -Wstrict-prototypes -Wno- 
> trigraphs -fno-strict-aliasing -fno-common -Werror-implicit- 
> function-declaration -Os -msoft-float -pipe -mminimal-toc - 
> mtraceback=none  -mcall-aixdesc -mcpu=power4 -mno-altivec -funit-at- 
> a-time -mno-string -Wa,-maltivec -fomit-frame-pointer -g  -fno- 
> stack-protector -Wdeclaration-after-statement -Wno-pointer-sign  - 
> mno-minimal-toc   -D"KBUILD_STR(s)=#s" -D"KBUILD_BASENAME=KBUILD_STR 
> (swsusp_64)"  -D"KBUILD_MODNAME=KBUILD_STR(swsusp_64)" -c -o
> arch/powerpc/kernel/.tmp_swsusp_64.o arch/powerpc/kernel/swsusp_64.c
>
> gcc -m64 -Wp,-MD,arch/powerpc/kernel/.swsusp_asm64.o.d  -nostdinc - 
> isystem /usr/lib/gcc/powerpc-linux-gnu/4.1.2/include -D__KERNEL__ - 
> Iinclude  -include
> include/linux/autoconf.h  -D__ASSEMBLY__  -Wa,-maltivec  - 
> gdwarf2    -c -o
> arch/powerpc/kernel/swsusp_asm64.o arch/powerpc/kernel/swsusp_asm64.S
>
> gcc -m64 -Wp,-MD,arch/powerpc/kernel/.compat_audit.o.d  -nostdinc - 
> isystem /usr/lib/gcc/powerpc-linux-gnu/4.1.2/include -D__KERNEL__ - 
> Iinclude  -include
> include/linux/autoconf.h  -Wall -Wundef -Wstrict-prototypes -Wno- 
> trigraphs -fno-strict-aliasing -fno-common -Werror-implicit- 
> function-declaration -Os -msoft-float -pipe -mminimal-toc - 
> mtraceback=none  -mcall-aixdesc -mcpu=power4 -mno-altivec -funit-at- 
> a-time -mno-string -Wa,-maltivec -fomit-frame-pointer -g  -fno- 
> stack-protector -Wdeclaration-after-statement -Wno-pointer-sign  - 
> mno-minimal-toc   -D"KBUILD_STR(s)=#s" -D"KBUILD_BASENAME=KBUILD_STR 
> (compat_audit)"  -D"KBUILD_MODNAME=KBUILD_STR(compat_audit)" -c -o
> arch/powerpc/kernel/.tmp_compat_audit.o arch/powerpc/kernel/ 
> compat_audit.c
>    ld -m elf64ppc   -r -o arch/powerpc/kernel/built-in.o
> arch/powerpc/kernel/semaphore.o arch/powerpc/kernel/cputable.o
> arch/powerpc/kernel/ptrace.o arch/powerpc/kernel/syscalls.o
> arch/powerpc/kernel/irq.o arch/powerpc/kernel/align.o
> arch/powerpc/kernel/signal_32.o arch/powerpc/kernel/pmc.o
> arch/powerpc/kernel/vdso.o arch/powerpc/kernel/init_task.o
> arch/powerpc/kernel/process.o arch/powerpc/kernel/systbl.o
> arch/powerpc/kernel/idle.o arch/powerpc/kernel/signal.o
> arch/powerpc/kernel/vdso32/built-in.o arch/powerpc/kernel/setup_64.o
> arch/powerpc/kernel/binfmt_elf32.o arch/powerpc/kernel/sys_ppc32.o
> arch/powerpc/kernel/signal_64.o arch/powerpc/kernel/ptrace32.o
> arch/powerpc/kernel/paca.o arch/powerpc/kernel/cpu_setup_ppc970.o
> arch/powerpc/kernel/cpu_setup_pa6t.o arch/powerpc/kernel/firmware.o
> arch/powerpc/kernel/sysfs.o arch/powerpc/kernel/nvram_64.o
> arch/powerpc/kernel/vdso64/built-in.o arch/powerpc/kernel/vecemu.o
> arch/powerpc/kernel/vector.o arch/powerpc/kernel/idle_power4.o
> arch/powerpc/kernel/of_device.o arch/powerpc/kernel/of_platform.o
> arch/powerpc/kernel/prom_parse.o arch/powerpc/kernel/proc_ppc64.o
> arch/powerpc/kernel/rtas.o arch/powerpc/kernel/rtas-rtc.o
> arch/powerpc/kernel/rtas_pci.o arch/powerpc/kernel/rtas-proc.o
> arch/powerpc/kernel/lparcfg.o arch/powerpc/kernel/vio.o
> arch/powerpc/kernel/ibmebus.o arch/powerpc/kernel/smp-tbsync.o
> arch/powerpc/kernel/crash_dump.o arch/powerpc/kernel/swsusp.o
> arch/powerpc/kernel/suspend.o arch/powerpc/kernel/time.o
> arch/powerpc/kernel/prom.o arch/powerpc/kernel/traps.o
> arch/powerpc/kernel/setup-common.o arch/powerpc/kernel/udbg.o
> arch/powerpc/kernel/misc.o arch/powerpc/kernel/io.o
> arch/powerpc/kernel/misc_64.o arch/powerpc/kernel/dma_64.o
> arch/powerpc/kernel/iommu.o arch/powerpc/kernel/prom_init.o
> arch/powerpc/kernel/ppc_ksyms.o arch/powerpc/kernel/btext.o
> arch/powerpc/kernel/smp.o arch/powerpc/kernel/kprobes.o
> arch/powerpc/kernel/legacy_serial.o arch/powerpc/kernel/udbg_16550.o
> arch/powerpc/kernel/kgdb.o arch/powerpc/kernel/kgdb_setjmp64.o
> arch/powerpc/kernel/module_64.o arch/powerpc/kernel/pci_64.o
> arch/powerpc/kernel/pci_dn.o arch/powerpc/kernel/isa-bridge.o
> arch/powerpc/kernel/pci-common.o arch/powerpc/kernel/msi.o
> arch/powerpc/kernel/machine_kexec.o arch/powerpc/kernel/crash.o
> arch/powerpc/kernel/machine_kexec_64.o arch/powerpc/kernel/audit.o
> arch/powerpc/kernel/swsusp_64.o arch/powerpc/kernel/swsusp_asm64.o
> arch/powerpc/kernel/compat_audit.o
>
> gcc -m64 -Wp,-MD,arch/powerpc/kernel/.lparmap.s.d  -nostdinc - 
> isystem /usr/lib/gcc/powerpc-linux-gnu/4.1.2/include -D__KERNEL__ - 
> Iinclude  -include
> include/linux/autoconf.h  -Wall -Wundef -Wstrict-prototypes -Wno- 
> trigraphs -fno-strict-aliasing -fno-common -Werror-implicit- 
> function-declaration -Os -msoft-float -pipe -mminimal-toc - 
> mtraceback=none  -mcall-aixdesc -mcpu=power4 -mno-altivec -funit-at- 
> a-time -mno-string -Wa,-maltivec -fomit-frame-pointer -g  -fno- 
> stack-protector -Wdeclaration-after-statement -Wno-pointer-sign  - 
> mno-minimal-toc   -D"KBUILD_STR(s)=#s" -D"KBUILD_BASENAME=KBUILD_STR 
> (lparmap)"  -D"KBUILD_MODNAME=KBUILD_STR(lparmap)" -fverbose-asm -S -o
> arch/powerpc/kernel/lparmap.s arch/powerpc/kernel/lparmap.c
>
> gcc -m64 -Wp,-MD,arch/powerpc/kernel/.head_64.o.d  -nostdinc - 
> isystem /usr/lib/gcc/powerpc-linux-gnu/4.1.2/include -D__KERNEL__ - 
> Iinclude  -include
> include/linux/autoconf.h  -D__ASSEMBLY__  -Wa,-maltivec  -gdwarf2  - 
> Iarch/powerpc/kernel  -c -o
> arch/powerpc/kernel/head_64.o arch/powerpc/kernel/head_64.S
> lparmap.c: Assembler messages:
> lparmap.c:84: Error: file number 1 already allocated
> make[1]: *** [arch/powerpc/kernel/head_64.o] Blad 1
> make: *** [arch/powerpc/kernel] Blad 2
Some how your defconfig is targeting a PPC64 box:
CONFIG_PPC64=y
shouldn't be set if you want to build a kernel for a G3 imac.
- k
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/