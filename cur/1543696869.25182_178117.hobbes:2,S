Date: Fri, 14 Nov 2003 05:40:38 +0100
From: Thunder Anklin <>
Subject: Re: [2.6] VC (keyboard) doesn't clean up its buffers
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/11/13/180

Salut,
> tty->filp.char_buf  is filled  correctly by  my typings.  The buffer
> state goes  up, and once I've  typed 255 characters,  of course it's
> full.  *But*  the big  deal  with  the  keyboard buffer  is  usually
> somebody who's reading  out the contents and processing  it, so that
> the  characters  I  typed  are  processed.   This  is  *not*  taking
> place. The buffer just fills up and there we are.
I've explored  the kernel stack a  bit using SysRq hacks,  and I found
out that this misbehavior was in  fact caused by ISDN. It added a work
for  "isac_bh()" into  the CPU  workqueue with  list heads  inited, so
every time the work got executed, execution looped, and since ISDN was
loaded before  I typed the first character,  the flush_to_ldisc() work
was never run. I'm going to fix that bug soon.
				Thunder
[unhandled content-type:application/pgp-signature]