Date: Thu, 15 Jan 2009 13:31:43 +0000
From: Jonathan Cameron <>
Subject: Re: [PATCH 2.6.29-rc1-git4] mfd: da9030 usb charge pump support within mfd driver.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2009/1/15/256

Mark Brown wrote:
> ")
> Fcc: +sent-mail
> 
> On Thu, Jan 15, 2009 at 11:22:34AM +0000, Jonathan Cameron wrote:
> 
>>> I would expect the final solution to be clean enough, that requires some
>>> dependent stuffs to be modified, and the final look of this patch may be a
>>> bit different
> 
>> Agreed.  This definitely isn't the way to go in the long run (assuming
>> otg etc get cleaned up)
>> but would it be an acceptable stop gap?  I'm just keen to get the
>> functionality available
>> so as to get a board config (intel stargate 2) sorted.  (some of which
>> you were kind enough to
>> review a while back - thanks).
> 
> Having looked at this problem just this week for some other designs I'm
> thinking the regulator API might be a good fit for this.  It is a supply
> and the API provides a method to match up the supply with the USB
> controller (some designs have multiple options there so that's useful).
> I've not actually tried it yet to see what the pain is like, though.
I did at one point.  The problem here is you aren't simply controlling the
current / voltage. You are switching it between various automatic modes
and a manual override.  Only in the manually overridden states is it
much like a regulator and then it's one with very odd properties.
If these are consistent enough across different pmic's I guess it could
be blugeoned in, but I'm not convinced this is true.
Jonathan