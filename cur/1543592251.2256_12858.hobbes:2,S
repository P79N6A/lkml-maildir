Date: Thu, 24 May 2001 23:26:35 +0100
From: Anton Altaparmakov <>
Subject: Re: [CHECKER] null bugs in 2.4.4 and 2.4.4-ac8
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/5/24/141

At 22:09 24/05/2001, Dawson Engler wrote:
[snip]
>---------------------------------------------------------
>[BUG]
>/u2/engler/mc/oses/linux/2.4.4-ac8/fs/ntfs/support.c:244:ntfs_dupuni2map: 
>ERROR:NULL:243:244: Passing unknown ptr "buf"! as arg 0 to call "memcpy"! 
>set by 'kmalloc':244 [nbytes = 1]
>                         wchar_t uni = in[i];
>                         if ((chl = nls->uni2char(uni, charbuf,
>                                                 NLS_MAX_CHARSET_SIZE)) > 0) {
>                                 /* adjust result buffer */
>                                 if (chl > 1) {
>Start --->
>                                         buf = ntfs_malloc(*out_len + chl 
> - 1);
>Error --->
>                                         memcpy(buf, result, o);
>                                         ntfs_free(result);
>                                         result = buf;
>                                         *out_len += (chl - 1);
>---------------------------------------------------------
Thanks. I was just about to submit a large patch anyway, so I will fix this 
and submit shortly.
Anton
-- 
   "Nothing succeeds like success." - Alexandre Dumas
-- 
Anton Altaparmakov <aia21 at cam.ac.uk> (replace at with @)
Linux NTFS Maintainer / WWW: 
http://sf.net/projects/linux-ntfs/
ICQ: 8561279 / WWW: 
http://www-stu.christs.cam.ac.uk/~aia21/
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/