Date: Wed, 19 Mar 2008 09:41:14 +0100
From: "Wappler Marcel" <>
Subject: RE: MMC: Card detection through pin CD/DAT3 issue
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/3/19/161

Thank you, Pierre,
this special host controller is more an SDHCI _inspired_ than a
_compliant_ one. Not only powering off the card bus led to the not
working card detection but also the RESET_ALL function. Both
tasks are reqired by the SDHCI standard after removing the card.
But Pierre has prepared the sdhci.c very well: there is a quirk
called "SSM_QUIRK_NO_CARD_NO_RESET". In combination with disabling
power off after a card removal now it works.
Bodo Eggert wrote:
>> I have found this requirement in the SD host controller spec:
>> "The card detect is active regardless of the SD Bus Power."
>> 
>> I wonder how the card should be able to pull up the CD/DAT3 Pad to
>> VCC if its only VCC pad is not connected to VCC due to the fact that
>> the host controller has switched off the cards power - any idea how
>> this could be managed?
> If the VCC pin is connected to 0 V, the "pullup" will pull 
> down to 0V. 
> If the controller reverses it's logic while VCC=0, it might work.
I am concerned  that in this case there would be neither a pull 
up nor a pull down at this signal. Due to floating gates that input
could lead to millions of "card detection" events a second, if
no card is inserted?
Regards,
Marcel
Marcel Wappler
Bridgeco AG
CH-8600 DÃ¼bendorf
Switzerland
--
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/