Date: Wed, 27 Jun 2007 22:35:46 +0900
From: Neil Booth <>
Subject: Re: [PATCH 16/16] fix handling of integer constant expressions
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/6/27/129

Al Viro wrote:-
> 
> Son of a...  expand_comma() cannibalizes the node, should restore ->flags
> to 0 (same as other similar suckers).
> 
> > struct c { unsigned int c1: 1 ? 2: a++; };
> 
> Ditto for expand_conditional, but there we should preserve the original
> ->flags instead - might be non-zero and we ought to do that after
> expanding the taken branch...
> 
> From: Al Viro <viro@zeniv.linux.org.uk>
> Date: Wed, 27 Jun 2007 09:10:54 -0400
> Subject: [PATCH] fix the missed cannibalizing simplifications
> 
> Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
Now I think I only see one class of issues; the following is valid
C99 (I believe that's what you intend to follow) but being rejected:
   struct a { int comma: 1 ? 2: (2, 3); };
It's invalid C90.
Neil.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/