Date: Wed, 24 Oct 2001 16:06:36 -0500
From: Reid Hekman <>
Subject: Re: 2.4.13-pre6 breaks Nvidia's kernel module
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/10/24/197

J . A . Magallon wrote:
> The first thing I did was to kach the horrible nVidia's Makefile. For example,
> it had the bad intention of compiling and installing against the running kernel
> (guess kernel with uname -r). So when you update the kernel, you have to reboot
> and make nVidia drivers. I changed it to:
> 
> +KREL:=`grep UTS_RELEASE /usr/src/linux/include/linux/version.h | cut -d\" -f2`
> -KERNDIR:=/lib/modules/$(shell uname -r)
> +KERNDIR:=/lib/modules/$(KREL)
> 
> so it builds against a built but not-running kernel.
> 
> 
I thought use of /usr/src/linux was not recommended anymore. On my 
distro, that file would point to the original kernel, the one that 
glibc, et al. is compiled with, not my current running kernel or ones 
I've not yet booted with. Perhaps a `uname -r` with command-line 
override would be more appropriate?
Regards,
Reid
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/