Date: 29 Nov 2004 12:12:08 +0100
From: Gerd Knorr <>
Subject: Re: MTRR vesafb and wrong X performance
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/11/29/49

Pawel Fengler <pawfen@wp.pl> writes:
> > Please send the full dmesg output and the contents of /proc/mtrr for
> > 2.6.10-rc2.
> reg02: base=0xe3000000 (3632MB), size=   4MB: write-combining, count=1
> vesafb: framebuffer at 0xe3000000, mapped to 0xcc880000, using 1875k,
> total 4096k
The BIOS reports 4MB video memory, and vesafb adds an mtrr entry for
that.  Looks ok, with the exception that the reported 4MB are probably
not correct, otherwise the X-Server wouldn't complain.  vesafb in
2.6.10-rc2 has a option to overwrite the BIOS-reported value
(vtotal=n, with n in megabytes), that should fix it.
The reason that you don't see this with old kernels probably is just
that vesafb doesn't create mtrr entries by default in 2.4.x
  Gerd
-- 
#define printk(args...) fprintf(stderr, ## args)
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/