Date: Sat, 26 Oct 2002 15:26:49 -0400
From: Jeff Garzik <>
Subject: Re: rootfs exposure in /proc/mounts
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/10/26/105

Andreas Steinmetz wrote:
> Alexander Viro wrote:
>
>>
>> On Sat, 26 Oct 2002, Andreas Steinmetz wrote:
>>
>>
>>> Maybe I do oversee the obious but:
>>>
>>> can somebody please explain why rootfs is exposed in /proc/mounts (I 
>>> do mean the "rootfs / rootfs rw 0 0" entry) and if there is a good 
>>> reason for the exposure?
>>
>>
>>
>> Mostly the fact that it _is_ mounted and special-casing its removal from
>> /proc/mounts is more PITA than it's worth.
>>
> Acceptable but somewhat sad as it confuses e.g. "umount -avt noproc" 
> which is somewhat standard in shutdown/reboot scripts (using a 
> softlink from /etc/mtab to /proc/mounts).
Bug 1 - don't softlink directly to /proc/mounts :)  embedded guys 
typically do this, and you see why it bites you in the ass :)
Bug 2 - "noproc" clearly does not avoid ramfs mounts, which is rootfs's 
filesystem type.  And more and more ramfs filesystems will be appearing, 
so that should be taken into consideration.
Sounds like userspace slackness to me, and nothing that the kernel guys 
need to worry about...
    Jeff
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/