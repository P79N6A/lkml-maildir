Date: Fri, 22 Oct 2004 13:45:06 -0700
From: William Lee Irwin III <>
Subject: Re: Hugepages demand paging V1 [2/4]: set_huge_pte() arch updates
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/10/22/322

On Fri, 22 Oct 2004, William Lee Irwin III wrote:
>> What is in fact far more pressing is flush_dcache_page(), without a
>> correct implementation of which for hugetlb, user-visible data
>> corruption follows.
On Fri, Oct 22, 2004 at 01:29:24PM -0700, Christoph Lameter wrote:
> When is flush_dcache_page used on a huge page?
> It seems that the i386 simply does nothing for flush_dcache_page. IA64
> defers to update_mmu_cache by setting PG_arch_1. So these two are ok as
> is.
> The other archs are likely much more involved than this. I tried to find
> an simple way to identify a page as a huge page via struct page but
> that is not that easy and its likely not good to follow
> pointers to pointers in such a critical function. Maybe we need to add a
> new page flag?
It's not done at all for hugepages now, and needs to be. Fault handling
on hugetlb vmas will likely expose the cahing of stale data more readily.
-- wli
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/