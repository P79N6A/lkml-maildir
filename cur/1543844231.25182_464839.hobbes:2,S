Date: Wed, 20 Sep 2006 11:22:42 -0700
From: Martin Bligh <>
Subject: Re: [PATCH] Linux Kernel Markers
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/9/20/187

Frank Ch. Eigler wrote:
> Hi -
> 
> On Wed, Sep 20, 2006 at 01:21:52PM -0400, Karim Yaghmour wrote:
> 
> 
>>[...]  IOW, we should be able to do what Martin suggests fairly
>>easily (if we agree on a 5-byte "null" jump at the entry of
>>functions of interest). Right? [...]
> 
> 
> My interpretation of Martin's Monday proposal is that, if implemented,
> we wouldn't need any of this nop/int3 stuff.  If function being
> instrumented were recompiled on-the-fly, then it could sport plain &
> direct C-level calls to the instrumentation handlers.
It's looking to me like it might still need djprobes to implement, in
order to get the atomic and safe switchover from the original function
into the traced one. All rather sad, but seems to be true from all the
CPU errata, etc. If anyone can see a way round that, I'd love to hear
it.
What it would give you above and beyond djprobes is an easier and more
flexible way to actually do the instrumentation itself.
M.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/