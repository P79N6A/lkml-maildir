Date: Sat, 3 Jun 2006 19:29:58 -0700
From: "Barry K. Nathan" <>
Subject: Re: 2.6.17-rc5-mm2
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/6/3/137

On 6/3/06, Barry K. Nathan <barryn@pobox.com> wrote:
> I was already doing OPTIMIZE_FOR_SIZE. I didn't think of disabling
> FORCED_INLINING, thanks for reminding me of that. I managed to trim
> the kernel in other ways.
Hmm... disabling FORCED_INLINING didn't make much if any difference.
> > also, the latest combo patch:
> >
> > 
http://redhat.com/~mingo/lockdep-patches/lockdep-combo-2.6.17-rc5-mm2.patch
> >
> > should have the floppy bug(s) fixed.
>
> I'll try that later today (and I'll also provide the
> /proc/latency_trace to help figure out the warning). In the meantime,
[snip]
Yes, the latest combo patch works. It still gives the warning, too
(copied here since it looks slightly different with the latency trace
patch added):
[  197.343620] (            idle-0    |#0): new 120978036 us user-latency.
[  197.343807] stopped custom tracer.
[  197.343948] BUG: warning at kernel/lockdep.c:1856/trace_hardirqs_on()
[  197.345928]  [<c010329b>] show_trace_log_lvl+0x5b/0x105
[  197.346359]  [<c0103896>] show_trace+0x1b/0x20
[  197.346759]  [<c01038ed>] dump_stack+0x1f/0x24
[  197.347159]  [<c012efa2>] trace_hardirqs_on+0xfb/0x185
[  197.348873]  [<c029b009>] _spin_unlock_irq+0x24/0x2d
[  197.350620]  [<e09034e8>] do_tx_done+0x171/0x179 [ns83820]
[  197.350895]  [<e090445c>] ns83820_irq+0x149/0x20b [ns83820]
[  197.351166]  [<c013b4b8>] handle_IRQ_event+0x1d/0x52
[  197.353216]  [<c013c6c2>] handle_level_irq+0x97/0xe1
[  197.355157]  [<c01048c3>] do_IRQ+0x8b/0xac
[  197.355612]  [<c0102d9d>] common_interrupt+0x25/0x2c
I've posted the /proc/latency_trace here:
http://members.cox.net/barrykn/linux/trace/latency_trace.bz2
It turns out that I was *way* off on the size in my last mail. It's
actually close to 9MB decompressed, 370K bz2-compressed.
-- 
-Barry K. Nathan <barryn@pobox.com>
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/