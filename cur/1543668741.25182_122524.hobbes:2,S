Date: Fri, 4 Apr 2003 13:24:23 +0200
From: David Jander <>
Subject: [PATCH] ncpfs, kernel 2.4.18
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/4/4/40

This fixes a bug with Novell Netware Servers (in my case 3.12) sending error 
messages (and annoying beeps) to the console each time a linux client 
accesses de root directory of a volume. Please comment !
Please send replies with CC to me, since I am not subscribed to lkml.
-- 
David Jander
Protonic Holland.
e-mail: david.jander@protonic.nl
--- linux-2.4.18/fs/ncpfs/ncplib_kernel.c	Fri Dec 21 18:41:55 2001
+++ linux-2.4.18-ncpfix/fs/ncpfs/ncplib_kernel.c	Fri Apr  4 13:12:03 2003
@@ -272,6 +272,12 @@
 	__u32 dirent = NCP_FINFO(dir)->dirEntNum;
 	int result;
 
+	DPRINTK("NCPFS : ncp_optain_info for: %s\n",path);
+	if(path==NULL)
+	{
+		printk(KERN_ERR "ncp_obtain_info: Invalid path %s!\n",path);
+		return -EINVAL;
+	}
 	if (target == NULL) {
 		printk(KERN_ERR "ncp_obtain_info: invalid call\n");
 		return -EINVAL;