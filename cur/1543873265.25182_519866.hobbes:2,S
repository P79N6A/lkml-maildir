Date: Wed, 14 Mar 2007 11:38:32 +0100
From: Ingo Molnar <>
Subject: Re: [PATCH 58/59] sysctl: Reimplement the sysctl proc support
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/3/14/110

* Eric W. Biederman <ebiederm@xmission.com> wrote:
> From: Eric W. Biederman <ebiederm@xmission.com> - unquoted
> 
> With this change the sysctl inodes can be cached and nothing needs to 
> be done when removing a sysctl table.
your change is now upstream:
  commit 77b14db502cb85a031fe8fde6c85d52f3e0acb63
  Author: Eric W. Biederman <ebiederm@xmission.com>
  Date:   Wed Feb 14 00:34:12 2007 -0800
but it broke the latency tracer in -rt which uses create_proc_entry() to 
attach a custom handler to value changes in preempt_max_latency:
 #define PROCNAME_PML    "sys/kernel/preempt_max_latency"
 static __init int latency_fs_init(void)
 {
         struct proc_dir_entry *entry;
         if (!(entry = create_proc_entry(PROCNAME_PML, 0644, NULL)))
                 printk("latency_fs_init(): can't create %s\n", PROCNAME_PML);
with your change that broke because beyond /proc/sys/ there are no real 
proc entries anymore, there's no de->subdir directory for 
xlate_proc_name() to find. While the latency tracer isnt upstream, this 
change in semantics does not seem to be intended (the changelog is 
certainly silent about it).
	Ingo
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/