Date: Sat, 20 Mar 1999 22:42:49 +0100
From:  jens@pinguin ...
Subject: Re: 2.2.3, VIA, IDE, performace :(
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/3/21/18

On Sat, Mar 20, 1999 at 12:25:19AM +0200, Meelis Roos wrote:
> > Various tests describe this thing as fast (~6.5 MB/sec), and it is the
> > only IDE device I have in my machine, but hdparm only tells me 2.5MB/sec
> > (my DCAS-34330W does 5.8MB/sec according to hdparm, and ~4MB/sec
> > according to magazines).
> Only a little realted (but still): Intel Celeron 366 with some Intel
> chipset. Originally had 4G IBM DTTA disk. hdparm showed 11.85 MB/s. Then
> the disk was upgraded to a 8G IBM DTTA. Now hdparm reports 5.9..6.2 M/s on
> the first run. Slower than it showed for the 4G disk.
weird.
I did a 
hdparm -X66 -qc 1qk 1qm 16qu 1qt  /dev/hda
and - bang - it was at 9.8 MB/sec:
debian:~# sync; hdparm -ItT /dev/hda
/dev/hda:
 Model=BI-MTDAT3-1510 0                        , FwRev=5TO67AA3, SerialNo=        
 Config={ HardSect NotMFM HdSw>15uSec Fixed DTR>10Mbs }
 RawCHS=16383/16/63, TrkSize=0, SectSize=0, ECCbytes=34
 BuffType=3(DualPortCache), BuffSize=466kB, MaxMultSect=16, MultSect=16
 DblWordIO=no, maxPIO=2(fast), DMA=yes, maxDMA=2(fast)
 CurCHS=16383/16/63, CurSects=16514064, LBA=yes, LBAsects=19807200
 tDMA={min:120,rec:120}, DMA modes: sword0 sword1 sword2 mword0 mword1
mword2 
 IORDY=on/off, tPIO={min:240,w/IORDY:120}, PIO modes: mode3 mode4 
 Timing buffer-cache reads:   64 MB in  3.14 seconds =20.38 MB/sec
 Timing buffered disk reads:  32 MB in  3.23 seconds = 9.91 MB/sec
> Now the interesting part: running hdparm -t /dev/hda again (and again and
> again) shows constantly 84.21 MB/s. This is the part I can't understand -
> even if the disk is capable of caching the data, EIDE would not let more
> than 33 MB/s through.
try a sync() before the test. Then, use hdparm -Tt to do a cache test
before. I wonder why I "only" have 20.38 MB/sec with my VIA chipset.
> This is with 2.0.35, 2.0.37pre-smth is compiled but not tested yet because
> it's a remote host. hdparm is ver. 3.1.
2.2.3ac2, VIA chipset, EPOX mainboard, hdparm v3.3.
-- 
_ciao, Jens_______________________________ 
http://www.pinguin.conetix.de
    cat /dev/boiler/water | tea | sieve > /cup
    mount -t hdev /dev/human/mouth01 /mouth ; cat /cup >/mouth/gulp
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/