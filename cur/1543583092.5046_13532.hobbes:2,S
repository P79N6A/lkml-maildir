Date: Mon, 26 Feb 2001 11:15:56 +0100
From:  Holger.Smolinski@de ...
Subject: [PATCH] partitions/ibm.c
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/2/26/14

Andries, others,
Thanks for hacking through the code of fs/partitions/ibm.c.
Your patch does not work at all because you are relying on the
data in the part component of the hd structure, which does not
hold the geometry data of the disk but the data of the partitions
on that disk. Besides that, exactly these data are to be set up
by the code in fs/partitions/ibm.c.
The geometry data is stored in the device driver. As in oposition
to the partition schemes the device drivercan be a loadable
module, fs/partitions.c should not at all directly call or use symbols
from the device driver.
My preferred solution would be having partition schemes as
loadable modules, too. Maybe I'll find some time to post the
approriate patch on this list soon...
Regards,
     Holger Smolinski
IBM Germany
Linux/390 Kernel Development
Schönaicher Str.220, D-71032 Böblingen
>Reading patch-2.4.2 I met a strange amount of crap in
>partitions/ibm.c. It is as if the author does not know
>where the kernel keeps the starting offset of a partition,
>and simulates a HDIO_GETGEO ioctl from user space.
>I think the following patch does the same and removes a lot
>of cruft. (Warning: (i) untested, uncompiled; (ii) pasted
>from another window - tabs will have become spaces.)
>Andries
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/