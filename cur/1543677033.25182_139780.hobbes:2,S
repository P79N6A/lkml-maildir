Date: Thu, 12 Jun 2003 10:48:43 +1000
From: Rusty Russell <>
Subject: [PATCH] ver_linux script version fix
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/6/11/292

Linus, please apply.
ver_linux script should know whether depmod refers to old version or
new version (this way I can tell whether people haven't install
module-init-tools, although it's usually pretty obvious):
depmod -V (new output):
	module-init-tools 0.9.12
depmod -V (old output):
	depmod version 2.4.21
diff -urpN --exclude TAGS -X /home/rusty/devel/kernel/kernel-patches/current-dontdiff --minimal linux-2.5.70-bk16/scripts/ver_linux working-2.5.70-bk16-ver_linux/scripts/ver_linux
--- linux-2.5.70-bk16/scripts/ver_linux	2003-05-27 15:02:29.000000000 +1000
+++ working-2.5.70-bk16-ver_linux/scripts/ver_linux	2003-06-12 10:41:09.000000000 +1000
@@ -28,7 +28,7 @@ fdformat --version | awk -F\- '{print "u
 
 mount --version | awk -F\- '{print "mount                 ", $NF}'
 
-depmod -V  2>&1 | grep version | awk 'NR==1 {print "module-init-tools     ",$NF}'
+depmod -V  2>&1 | awk '/version/ {print "modutils              ",$NF} /module-init-tools/ {print "module-init-tools     ",$NF}'
 
 tune2fs 2>&1 | grep "^tune2fs" | sed 's/,//' |  awk \
 'NR==1 {print "e2fsprogs             ", $2}'
--
  Anyone who quotes me in their sig is an idiot. -- Rusty Russell.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/