Date: Thu, 21 Apr 2005 11:30:06 -0400
From: Ed L Cashin <>
Subject: Re: [PATCH 2.6.12-rc2] aoe [1/6]: improve allowed interfaces configuration
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/4/21/130

Greg KH <greg@kroah.com> writes:
> On Thu, Apr 21, 2005 at 09:36:17AM -0400, Ed L Cashin wrote:
>> "Bodo Eggert <harvested.in.lkml@posting.7eggert.dyndns.org>" <7eggert@gmx.de> writes:
>> 
>> > Ed L Cashin <ecashin@coraid.com> wrote:
>> >
>> >> +++ b/Documentation/aoe/aoe.txt       2005-04-20 11:42:20.000000000 -0400
>> >
>> >> +  When the aoe driver is a module, use
>> >
>> > Is there any reason for this inconsistent behaviour?
>> 
>> Yes, the /sys/module/aoe area is only present when the aoe driver is a
>> module.
>
> Not true, have you looked in /sys/module lately?  :)
>
>> It would be nicer if there were a sysfs area where I could
>> put this file regardless of whether the driver is a module or built
>> into the kernel.  
>
> That's the place for it.  It will be there if the driver is built as a
> module or into the kernel.
Wow!  Well, that's very convenient for driver writers, so I'm pleased,
and I can update the docs.  It surprises me, though, to find out that
/sys/module is for things other than modules.
The correction below follows and depends on patch 1 of the six.
fix docs: built-in driver can use files in /sys/module
Signed-off-by: Ed L. Cashin <ecashin@coraid.com>
diff -urNp a-exp/linux/Documentation/aoe/aoe.txt b-exp/linux/Documentation/aoe/aoe.txt
--- a-exp/linux/Documentation/aoe/aoe.txt	2005-04-21 11:25:48.000000000 -0400
+++ b-exp/linux/Documentation/aoe/aoe.txt	2005-04-21 11:25:49.000000000 -0400
@@ -102,12 +102,11 @@ USING SYSFS
       e4.8            eth1              up
       e4.9            eth1              up
 
-  When the aoe driver is a module, use
-  /sys/module/aoe/parameters/aoe_iflist instead of
-  /dev/etherd/interfaces to limit AoE traffic to the network
-  interfaces in the given whitespace-separated list.  Unlike the old
-  character device, the sysfs entry can be read from as well as
-  written to.
+  Use /sys/module/aoe/parameters/aoe_iflist (or better, the driver
+  option discussed below) instead of /dev/etherd/interfaces to limit
+  AoE traffic to the network interfaces in the given
+  whitespace-separated list.  Unlike the old character device, the
+  sysfs entry can be read from as well as written to.
 
   It's helpful to trigger discovery after setting the list of allowed
   interfaces.  The aoetools package provides an aoe-discover script
-- 
  Ed L Cashin <ecashin@coraid.com>