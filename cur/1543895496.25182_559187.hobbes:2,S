Date: Mon, 18 Jun 2007 21:37:26 +0400
From: Vladislav Bolkhovitin <>
Subject: Re: [ANNOUNCE] Btrfs: a copy on write, snapshotting FS
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/6/18/285

Chris Mason wrote:
> Hello everyone,
> 
> After the last FS summit, I started working on a new filesystem that
> maintains checksums of all file data and metadata.  Many thanks to Zach
> Brown for his ideas, and to Dave Chinner for his help on 
> benchmarking analysis.
> 
> The basic list of features looks like this:
> 
> 	* Extent based file storage (2^64 max file size)
> 	* Space efficient packing of small files
> 	* Space efficient indexed directories
> 	* Dynamic inode allocation
> 	* Writable snapshots
> 	* Subvolumes (separate internal filesystem roots)
> 	- Object level mirroring and striping
> 	* Checksums on data and metadata (multiple algorithms available)
> 	- Strong integration with device mapper for multiple device support
> 	- Online filesystem check
> 	* Very fast offline filesystem check
> 	- Efficient incremental backup and FS mirroring
I would also suggest one more feature: support for block level 
de-duplication. I mean:
1. Ability for Btrfs to have blocks in several files to point to the 
same block on disk
2. Support for new syscall or IOCTL to de-duplicate as a single 
transaction two or more blocks on disk, i.e. link them to one of them 
and free others
3. De-de-duplicate blocks on disk, i.e. copy them on write
I suppose that de-duplication itself would be done by some user space 
process that would scan files, determine blocks with the same data and 
then de-duplicate them by using syscall or IOCTL (2).
That would be very usable feature, which in most cases would allow to 
shrink occupied disk space on 50-90%.
Vlad
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/