Date: Fri, 7 May 2004 17:59:43 +0200
From: Arjan van de Ven <>
Subject: Re: 2.6.6-rc3-mm2 (4KSTACK)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/5/7/91

On Fri, May 07, 2004 at 10:47:56AM -0500, Steve Lord wrote:
> >-	if (mlen > sizeof(buf))
> >+	obj.data = kmalloc(1024, GFP_KERNEL);
> >+	if (!obj.data)
> >+		return -ENOMEM;
> >+
> >+	if (mlen > 1024) {
> 
> That's what I hate about all of this, just think how much stack that
> kmalloc can take in low memory situations.... it might end up in
> writepage on another nfs file....
it clearly needs to be GFP_NOFS
[unhandled content-type:application/pgp-signature]