Date: Mon, 19 Jan 2009 09:01:35 -0600
From: Dave Kleikamp <>
Subject: Re: [Ecryptfs-devel] [PATCH] ecryptfs: some inode attrs, and a question
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2009/1/19/218

On Mon, 2009-01-19 at 11:17 +0900, hooanon05@yahoo.co.jp wrote:
> Dave Kleikamp:
> > For a regular file, the size of the upper inode is not the same as the
> > size of the lower inode.  The lower inode includes the header blocks
> > which are not visible in the upper inode.  So ecryptfs_interpose() will
> > overwrite the correct upper inode size.
> 
> Then it means updating i_size in ecryptfs_link() is unnecessary...
It's restoring i_size to the correct value after ecryptfs_interpose
updates it with the wrong value.
Shaggy
-- 
David Kleikamp
IBM Linux Technology Center