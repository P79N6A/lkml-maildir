Date: Thu, 6 May 1999 23:55:59 +0200
From: Pavel Machek <>
Subject: Re: Oops assist...
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/5/8/39

Hi!
> > Wouldn't it be quite reasonable to make "Reboot on Oops" an config-option
> > or a sysctl?
> 
> Obviously, yes. (I think that reboot on Oops should be the default).
No. I've seen many oopses which were completely harmless (few
processes died, who cares? :-).
I advocated putting 10sec delay after oops. It is good so at least you
can see the oops and you can remeber IP if you are fast enough
;-). Much better than quickly rebooting machine. If you extend this
delay to 10min, user will have plenty of time to copy data onto paper
;-)))).
--- clean/arch/i386/kernel/traps.c	Fri Feb 26 18:39:57 1999
+++ linux/arch/i386/kernel/traps.c	Fri Feb 26 11:49:39 1999
@@ -201,6 +201,18 @@
 	spin_lock_irq(&die_lock);
 	printk("%s: %04lx\n", str, err & 0xffff);
 	show_registers(regs);
+	{
+		long flags;
+		int i;
+		save_flags(flags); cli();
+		printk( "Oops -> waiting" );
+		for(i=0; i<10; i++) {
+			mdelay(1000);
+			printk( "." );
+		}
+		printk( "\n" );
+		restore_flags(flags);
+	}
 	spin_unlock_irq(&die_lock);
 	do_exit(SIGSEGV);
 }
> IMHO, the swapfile is the best & portable solution: NT uses
> the swapfile, I've read the Solaris uses the swapfile, too.
Unfortunately, there were cases when this destroyed valuable data.
-- 
I'm really pavel@ucw.cz. Look at 
http://195.113.31.123/~pavel.
          Pavel
Hi! I'm a .signature virus! Copy me into your ~/.signature to help me spread!
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/