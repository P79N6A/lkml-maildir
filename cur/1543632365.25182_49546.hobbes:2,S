Date: 01 Jun 2002 11:03:02 +0200
From: Peter Osterlund <>
Subject: Re: 2.5.19 OOPS in pcmcia setup code
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/6/1/28

Alessandro Suardi <alessandro.suardi@oracle.com> writes:
> decoded oops follows, 100% reproducable.
> 
> Dell Latitude CPxJ750GT, PIII-750, Xircom RBEM56G100-TX,
>   kernel compiled with GCC 3.1. NB, 2.5.18 compiled with
>   GCC 3.1 works fine.
> 
> I tried recompiling with RH7.3 GCC but I still get an oops
>   on boot - I can't decode it since it scrolls maybe a dozen
>   screenfuls before stopping, so here's the GCC 3.1 one:
My laptop also oopses on boot, but this patch makes things work again:
--- drivers/pci/hotplug.c.old	Sat Jun  1 10:53:53 2002
+++ drivers/pci/hotplug.c	Sat Jun  1 10:52:05 2002
@@ -61,7 +61,7 @@
 	struct list_head *ln;
 
 	for(ln=pci_bus_type.drivers.next; ln != &pci_bus_type.drivers; ln=ln->next) {
-		struct pci_driver *drv = list_entry(ln, struct pci_driver, node);
+		struct pci_driver *drv = list_entry(ln, struct pci_driver, driver.bus_list);
 		if (drv->remove && pci_announce_device(drv, dev))
 			break;
 	}
-- 
Peter Osterlund - petero2@telia.com
http://w1.894.telia.com/~u89404340
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/