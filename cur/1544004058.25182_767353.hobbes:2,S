Date: Tue, 11 Nov 2008 10:22:40 +0530
From: Vaidyanathan Srinivasan <>
Subject: Re: [RFC PATCH v3 0/5] Tunable sched_mc_power_savings=n
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/11/10/413

* Peter Zijlstra <a.p.zijlstra@chello.nl> [2008-11-10 19:50:16]:
> 
> a quick response, I'll read them more carefully tomorrow:
Hi Peter,
Thanks for the quick review.
> 
>  - why are the preferred cpu things pointers? afaict using just the cpu
> number is both smaller and clearer to the reader.
I would need each cpu within a partitioned sched domain to point to
the _same_ preferred wakeup cpu.  The preferred CPU will be updated in
one place in find_busiest_group() and used by wake_idle.
If I have a per cpu value, then updating it for each cpu in the
partitioned sched domain will be slow.
The actual number of preferred_wakeup_cpu will be equal to the number
of partitions.  If there are no partitions in the sched domains, then
then all per-cpu pointers will point to the same variable.
>  - in patch 5/5 you do:
> 
> +               spin_unlock(&this_rq->lock);
> +               double_rq_lock(this_rq, busiest);
> 
> we call that double_lock_balance()
Will fix this. Did not look for such a routine :)
>  - comments go like:
> 
>  /*
>   * this is a multi-
>   * line comment
>   */
Will fix this too.
Thanks,
Vaidy