Date: Thu, 10 Oct 2002 16:39:27 +0200
From: "J.A. Magallon" <>
Subject: Re: More on O_STREAMING (goodby read pauses)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/10/10/107

On 2002.10.10 Mark Mielke wrote:
>On Wed, Oct 09, 2002 at 06:43:52PM -0400, Robert Love wrote:
>> On Wed, 2002-10-09 at 18:23, J.A. Magallon wrote:
>> > But I did the test with an addition: read a 1Gb file and print an '*'
>> > after every 10M. Without O_STREAMING, when memory fills, the 'progress
>> > bar' stalls for a few seconds while pages are sent to disk.
>> > So the patch also favours a constant sustained rate of read from the
>> > disk. Very interesting for things like video edition and so on.
>> > I like it ;).
>> This is 100% the point of the patch and hopefully the point I proved
>> when I first posted it.
>
>I assume the stall is not 'while pages are sent to disk', but rather
>until kswapd gets around to freeing enough pages to allow memory to
>fill again. The stall is due to the pages being fully analyzed to
>determine which ones should go, and which ones shouldn't. O_STREAMING
>removes the pages ahead of time, so no analysis is ever required.
>
I can _hear_ the disk activity when the stall happens, so selecting what
to drop is fast, but then you have to write it...
-- 
J.A. Magallon <jamagallon@able.es>      \                 Software is like sex:
werewolf.able.es                         \           It's better when it's free
Mandrake Linux release 9.1 (Cooker) for i586
Linux 2.4.20-pre10-jam1 (gcc 3.2 (Mandrake Linux 9.0 3.2-2mdk))
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/