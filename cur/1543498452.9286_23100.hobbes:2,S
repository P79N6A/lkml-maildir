Date: 09 Jun 1999 20:14:00 +0200
From: (Kai Henningsen)
Subject: Re: Migrating to larger numbers
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/6/9/172

acahalan@cs.uml.edu (Albert D. Cahalan)  wrote on 09.06.99 in <199906090525.BAA05821@jupiter.cs.uml.edu>:
> Trying to do dynamic device numbers and/or names with the current system
> is a bad joke.
I'm using that right now. Ok, so those numbers don't change all that  
often, but when they do, it still works.
scsidev can create aliases for all those scsi devices; specifically, it  
can create aliases depending on scsi id data (manufacturer, model, serial  
number). I use this and mount all my partitions (even swap) via those  
names.
It works fine as long as the kernel doesn't renumber the disk holding the  
root and/or boot partition, because those happen before I get access. (And  
I could probably handle root from an initrd, but right now it doesn't seem  
worth the bother.)
All the other disks can be freely rearranged, and the machine will  
automatically mount the right partitions. (Now if I also had something to  
recognize renumbered partitions, like a file system uuid ... should be  
easy to add, anyway.)
This setup is slightly complicated by the r/o root mount, but I solve this  
by allocating two small ram disks (on /tmp and /dev/scsi) the first time  
around, which get thrown away once they're no longer needed.
Filesystem         1024-blocks  Used Available Capacity Mounted on
/dev/scsi/IDCAS-p1     50692   37818    10257     79%   /
/dev/scsi/IDCAS-p2    148275   67666    72952     48%   /Temp
/dev/scsi/IDCAS-p5    397921  179540   197830     48%   /var
/dev/scsi/IDCAS-p6   1485578  861405   547404     61%   /usr
/dev/scsi/IDCAS-p7   1781603 1496531   192989     89%   /home
/dev/scsi/IDCRS-p2   1484638  910768   573870     61%   /home/.sdd2
/dev/scsi/IDCRS-p3    786688  207752   538292     28%   /home/.IDCRS-p3
/dev/scsi/IDCRS-p5   2026869  780722  1246147     39%   /home/.sdd5
/dev/scsi/IDGHS-p1   6074095 4714150  1045373     82%   /home/.IDGHS-p1
/dev/scsi/IDGHS-p5   3041647 1840702  1043660     64%   /home/.IDGHS-p5
/dev/scsi/IDGHS-p6   4053487 3252650   591123     85%   /home/.IDGHS-p6
/dev/scsi/QAt-p1      989597      13   938461      0%   /home/.QAt-p1
/dev/scsi/QAt-p2     1982113      13  1879644      0%   /home/.QAt-p2
/dev/scsi/QAt-p3      989628  635668   302835     68%   /home/.QAt-p3
/dev/scsi/QGP-p1     4063007 1850490  2002274     48%   /home/.QGP-p1
MfG Kai
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/