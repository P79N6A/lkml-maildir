Date: Sat, 14 Oct 2000 21:59:43 -0600
From: Jim Freeman <>
Subject: radio-miropcm20.c compile barf [2.2.18pre15 / CONFIG_RADIO_MIROPCM20]
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/10/15/12

Because CONFIG_RADIO_MIROPCM20 requires CONFIG_ACI_MIXER to
successfully compile, I propose the attached patch.
If CONFIG_ACI_MIXER is not set, the compile barfs with:
cc -D__KERNEL__ -I/tmp/linux/include -Wall -Wstrict-prototypes -O2 -fomit-frame-pointer -fno-strict-aliasing -pipe -fno-strength-reduce -m386 -DCPU=386   -c -o radio-miropcm20.o radio-miropcm20.c
In file included from radio-miropcm20.c:13:
../sound/lowlevel/miroaci.h:9: #error Compiling a driver that needs the ACI-mixer but without ACI-mixer support
Plus the comment at the top of drivers/char/radio-miropcm20.c states:
	* This driver relies on the aci mixer (drivers/sound/lowlevel/aci.c)
...jfree
--- linux/drivers/char/Config.in	2000/10/15 02:34:00	1.1
+++ linux/drivers/char/Config.in	2000/10/15 02:53:00
@@ -139,7 +139,7 @@
     hex '  Aztech/Packard Bell I/O port (0x350 or 0x358)' CONFIG_RADIO_AZTECH_PORT 350
   fi
   dep_tristate 'ADS Cadet AM/FM Tuner' CONFIG_RADIO_CADET $CONFIG_VIDEO_DEV
-  dep_tristate 'Miro PCM20 Radio' CONFIG_RADIO_MIROPCM20 $CONFIG_VIDEO_DEV
+  dep_tristate 'Miro PCM20 Radio' CONFIG_RADIO_MIROPCM20 $CONFIG_VIDEO_DEV $CONFIG_ACI_MIXER
   dep_tristate 'GemTek Radio Card support' CONFIG_RADIO_GEMTEK $CONFIG_VIDEO_DEV
   if [ "$CONFIG_RADIO_GEMTEK" = "y" ]; then
     hex '  GemTek i/o port (0x20c, 0x24c, 0x248, 0x30c, or 0x34c)' CONFIG_RADIO_GEMTEK_PORT 34c