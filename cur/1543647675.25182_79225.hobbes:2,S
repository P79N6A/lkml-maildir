Date: Sat, 12 Oct 2002 11:19:20 -0700 (PDT)
From: Linus Torvalds <>
Subject: Re: Strange patch to the Z85230 driver.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/10/12/136

On 12 Oct 2002, Alan Cox wrote:
>
> These are DMA ring buffers for ISA DMA, they do not need to be zeroed. 
Note that the code is the same as it alwasy was - the patch is part of a 
rename: "get_free_page()" is gone and is now called "get_zeroed_page()" 
so that people see what it does.
"get_free_page()" has always zeroed the contents, with "__get_free_page()" 
being the old traditional (and now long non-zeroing variety.
So the patch is purely cosmetic, and if the code was strange before, it's 
strange now.
And it's perhaps more _clearly_ strange, which was really the whole point
of the patch.
See the part of the changeset that touches <linux/gfp.h>:
	--- a/include/linux/gfp.h       Sat Oct 12 11:16:59 2002
	+++ b/include/linux/gfp.h       Sat Oct 12 11:16:59 2002
	@@ -71,11 +71,6 @@
	                __get_free_pages((gfp_mask) | GFP_DMA,(order))
	 
	 /*
	- * The old interface name will be removed in 2.5:
	- */
	-#define get_free_page get_zeroed_page
	-
	-/*
	  * There is only one 'core' page-freeing function.
	  */
	 extern void FASTCALL(__free_pages(struct page *page, unsigned int order));
to see that even the comment said this should be done.
		Linus
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/