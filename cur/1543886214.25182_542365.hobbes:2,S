Date: Wed, 09 May 2007 18:13:14 -0400
From: Kristian Høgsberg <>
Subject: Re: [PATCH 5/6] firewire: SBP-2 highlevel driver
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/5/9/446

Stefan Richter wrote:
> Kristian Høgsberg wrote:
>> I was trying to be clever and only allocate the host once the device had
>> been discovered and initialized.  I have now changed the code to just
>> allocate the host up front and use the hostdata mechanism for the
>> sbp2_device struct, which also addresses the host life cycle comments
>> below.
> 
> I have doubts.  IMO the previous code is 100% correct as long as 1 SBP-2
> target LU maps to 1 Scsi_Host.
> 
> The lifetime of the Scsi_Host would only be longer than that of the LU
> if all LUs (or all LUs at the same initiator port) would be added beneath
> the same instance of Scsi_Host.  Then the lifetime of the Scsi_Host would
> be that of the fw-sbp2 driver, or that of fw-sbp2's representation of a
> FireWire bus.
In the patch, the sbp2_device is now allocated with the scsi_host and is the 
hostdata part of the host struct.  This mean we have to add all the LUs from 
the unit directory corresponding to the sbp2_device struct to that host.  Is 
that a problem?  I think we had this discussion before, but I still don't 
understand why this approach isn't feasible.
Kristian
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/