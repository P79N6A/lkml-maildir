Date: Tue, 17 Jan 2006 14:39:44 -0500
From: Jeff Garzik <>
Subject: Re: Adaptec 1420SA issues with MSI
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/1/17/258

Andrew Morton wrote:
> Andi says "It's more likely a hardware bug that needs to be handled by the
> driver maintainer.  sata_mv has an pci_enable_msi().  Hardware that reports
> MSI capability but breaks when it's actually used is not unheard of."
> 
> -sata_mv 0000:00:0a.0: 32 slots 4 ports unknown mode IRQ via MSI
> -ata1: SATA max UDMA/133 cmd 0x0 ctl 0xE0A22120 bmdma 0x0 irq 177
> -ata2: SATA max UDMA/133 cmd 0x0 ctl 0xE0A24120 bmdma 0x0 irq 177
> -ata3: SATA max UDMA/133 cmd 0x0 ctl 0xE0A26120 bmdma 0x0 irq 177
> -ata4: SATA max UDMA/133 cmd 0x0 ctl 0xE0A28120 bmdma 0x0 irq 177
> +sata_mv 0000:00:0a.0: 32 slots 4 ports unknown mode IRQ via INTx
> +ata1: SATA max UDMA/133 cmd 0x0 ctl 0xE0A22120 bmdma 0x0 irq 18
> +ata2: SATA max UDMA/133 cmd 0x0 ctl 0xE0A24120 bmdma 0x0 irq 18
> +ata3: SATA max UDMA/133 cmd 0x0 ctl 0xE0A26120 bmdma 0x0 irq 18
> +ata4: SATA max UDMA/133 cmd 0x0 ctl 0xE0A28120 bmdma 0x0 irq 18
> 
> It seems strange that pci_enable_msi() succeeded if the device is not
> MSI-capable?
See 
http://lkml.org/lkml/2006/1/17/145
pci_enable_msi() has a problem where it succeeds when it should not, but 
also, sata_mv is still missing some errata workarounds that could be 
affecting MSI platforms.
	Jeff
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/