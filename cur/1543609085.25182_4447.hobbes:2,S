Date: Fri, 09 Nov 2001 01:11:53 +1100
From: Keith Owens <>
Subject: Re: More dependencies on CONFIG_SMP
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/11/8/85

On Thu, 08 Nov 2001 18:49:27 +0530, 
"BALBIR SINGH" <balbir.singh@wipro.com> wrote:
>Looking at arch/i386/config.in
>
>if [ "$CONFIG_SMP" = "y" -a "$CONFIG_X86_CMPXCHG" = "y" ]; then
>   define_bool CONFIG_HAVE_DEC_LOCK y
>fi
>endmenu
>
>and arch/i386/lib/Makefile
>
>.obj-$(CONFIG_HAVE_DEC_LOCK) += dec_and_lock.o
>
>We need to have SMP set inorder to use dec_and_lock. The file fs/dcache.c
>in function dput uses a function atomic_dec_and_lock function, which is
>defined in dec_and_lock.c.
There is a #define for atomic_dec_and_lock when compiling for UP.  I
suspect that you have been bitten by the broken makefiles, otherwise
everybody would be reporting problems with 2.4.14.  Before you send any
more patches (and before your existing patches are used), please follow
the steps in 
http://www.tux.org/lkml/#s8-8.
If you still get problems after that, mail the error messages and your
.config instead of sending patches to "fix" bugs which nobody else is
seeing.  You should include the errors you are getting, otherwise we
cannot tell if the patch makes sense or not.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/