Date: Fri, 10 Feb 2006 23:41:42 +1100
From: Nick Piggin <>
Subject: Re: msync() behaviour broken for MS_ASYNC, revert patch?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/2/10/124

Andrew Morton wrote:
> Nick Piggin <nickpiggin@yahoo.com.au> wrote:
> 
>>Instead of
>> LINUX_FADV_ASYNC_WRITE
>> LINUX_FADV_WRITE_WAIT
>>
>> can we have something more consistent? Perhaps
>> FADV_WRITE_ASYNC
>> FADV_WRITE_SYNC
> 
> 
> Nope, I had a bit of a think about this and decided that the two operations
> which we need are:
> 
> 
Do you need to introduce a completely new concept 'wait upon writeout'
though? Not to say they can't solve the problem but I don't think they
are any more expressive and they definitely depart from the norm which
has always been sync / async AFAIK.
It may be a very useful operation in kernel, but I think userspace either
wants to definitely know the data is on disk (WRITE_SYNC), or give a hint
to start writing (WRITE_ASYNC).
 From a kernel implementation point of view, WRITE_SYNC may be doing
several things (start writeout, wait writeout), but from userspace it is
just a single logical operation.
-- 
SUSE Labs, Novell Inc.
Send instant messages to your online friends 
http://au.messenger.yahoo.com
 
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/