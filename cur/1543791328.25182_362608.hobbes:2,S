Date: Wed, 2 Nov 2005 11:54:05 +0100
From: Vojtech Pavlik <>
Subject: Percpu data in a vsyscall page
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/11/2/100

Hi!
I'm working on a RDTSCP support on x86-64, and for that, I'll need
per-cpu time offset table in a vsyscall page. I saw the percpu.h header,
and thought - "Hey, I could use that!", but I think I really can't.
The data need to be in a vsyscall page, which is mapped to userspace via
linker magic, and the percpu stuff uses a different mapping.
I'm using a simple array instead, because the address will be different
in a vsyscall from the one the kernel sees anyway, and RDTSCP will give
me an index to that array atomically.
Is there any problem with that approach? Is there any reason using
percpu.h would be better? 
-- 
Vojtech Pavlik
SuSE Labs, SuSE CR
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/