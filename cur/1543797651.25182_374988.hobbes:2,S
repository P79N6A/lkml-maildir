Date: Sun, 11 Dec 2005 16:32:41 -0200
From: Marcelo Tosatti <>
Subject: Re: [RFC 3/6] Make nr_pagecache a per zone counter
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/12/11/93

On Fri, Dec 09, 2005 at 04:54:56PM -0800, Christoph Lameter wrote:
> Make nr_pagecache a per node variable
> 
> Currently a single atomic variable is used to establish the size of the page cache
> in the whole machine. The zoned VM counters have the same method of implementation
> as the nr_pagecache code. Remove the special implementation for nr_pagecache and make
> it a zoned counter. We will then be able to figure out how much of the memory in a
> zone is used by the pagecache.
> 
> Updates of the page cache counters are always performed with interrupts off.
> We can therefore use the __ variant here.
By the way, why does nr_pagecache needs to be an atomic variable on UP systems?
#ifdef CONFIG_SMP
...
#else
static inline void pagecache_acct(int count)
{
        atomic_add(count, &nr_pagecache);
}
#endif
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/