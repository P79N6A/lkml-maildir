Date: Wed, 13 Sep 2000 00:01:50 -0400
From:  tytso@mit ...
Subject: Re: Bug in block device read/write!
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/9/13/1

   Date: 	Fri, 08 Sep 2000 03:41:27 +0100
   From: Anton Altaparmakov <aia21@cam.ac.uk>
   I have been trying to get the linear md driver to work with NTFS volumes 
   for several months and it never worked. - I was suspecting the NTFS driver 
   (after having fixed linear md and verified that at least that worked fine) 
   but today I finally found why it doesn't work:
   There is a bug in reading/writing to block devices. - It manifests itself 
   in the form that partitions are too small by exactly one sector!
   Even though a cfdisk shows that a partition has a certain number of 
   sectors, you can never seek + read and/or write to the last sector (doing 
   file i/o using read/write(2) [also tried fread/fwrite(3), same result]. - 
   Last sector doesn't seem to exist. However reading the actual hd (/dev/hdb 
   or /dev/sda, ie. affects both IDE and SCSI) instead of the partition 
   (/dev/hdb7 or whatever) the sector does exist and contains the expected 
   information!
This isn't a bug.  The last sector is used by the md device to store the
md superblock.  
						- Ted
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/