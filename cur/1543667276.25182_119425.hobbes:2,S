Date: Sat, 22 Mar 2003 16:59:51 +0100
From: Dominik Brodowski <>
Subject: [PATCH 2.5] pcmcia (1/6): check return values of driver_register
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/3/22/70

diff -ruN linux-original/drivers/pcmcia/i82365.c linux/drivers/pcmcia/i82365.c
--- linux-original/drivers/pcmcia/i82365.c	2003-03-22 15:22:39.000000000 +0100
+++ linux/drivers/pcmcia/i82365.c	2003-03-22 15:24:36.000000000 +0100
@@ -1608,9 +1608,11 @@
 	return -1;
     }
     DEBUG(0, "%s\n", version);
+    if (driver_register(&i82365_driver))
+	return -1;
+
     printk(KERN_INFO "Intel PCIC probe: ");
     sockets = 0;
-    driver_register(&i82365_driver);
 
 #ifdef CONFIG_ISA
     isa_probe();
diff -ruN linux-original/drivers/pcmcia/tcic.c linux/drivers/pcmcia/tcic.c
--- linux-original/drivers/pcmcia/tcic.c	2003-03-22 15:22:39.000000000 +0100
+++ linux/drivers/pcmcia/tcic.c	2003-03-22 15:26:14.000000000 +0100
@@ -408,7 +408,8 @@
 	return -1;
     }
 
-    driver_register(&tcic_driver);
+    if (driver_register(&tcic_driver))
+	return -1;
     
     printk(KERN_INFO "Databook TCIC-2 PCMCIA probe: ");
     sock = 0;
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/