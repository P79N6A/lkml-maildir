Date: Tue, 19 Feb 2002 23:50:06 -0300 (BRT)
From: Jean Paul Sartre <>
Subject: A simple patch for SIS (documentation and kbuild)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/2/19/241

	Hello, all.
	As I've spoken with Alan Cox and Christoph Pittracher, there's a
problem with the dependency. I do not know who takes care of the
documentation stuff and kbuild procedures, but here they are.
	(okay. Building FB_SIS as module and DRM_SIS as builtin completely
*breaks* dependencies, so I did this to enforce them both as modules or
both as builtin)
	The patch is very simple, adds the Config.in 'if' and the
CONFIG_DRM_SIS description in Documentation/Configure.help.
	Thanks,
	Cesar Suga <sartre@linuxbr.com>
--- linux/drivers/char/drm/Config.in	Tue Feb 19 23:32:56 2002
+++ linux/drivers/char/drm/Config.in	Tue Feb 19 23:32:46 2002
@@ -12,4 +12,6 @@
 dep_tristate '  Intel I810' CONFIG_DRM_I810 $CONFIG_AGP
 dep_tristate '  Intel 830M' CONFIG_DRM_I830 $CONFIG_AGP
 dep_tristate '  Matrox g200/g400' CONFIG_DRM_MGA $CONFIG_AGP
-dep_tristate '  SiS' CONFIG_DRM_SIS $CONFIG_AGP
+if [ "$CONFIG_FB_SIS" = "y" -o "$CONFIG_FB_SIS" = "m" ]; then
+  dep_tristate '  SiS' CONFIG_DRM_SIS $CONFIG_AGP $CONFIG_FB_SIS
+fi
--- linux/Documentation/Configure.help	Tue Feb 19 23:39:44 2002
+++ linux/Documentation/Configure.help	Tue Feb 19 23:38:48 2002
@@ -17166,6 +17166,12 @@
   card.  If M is selected, the module will be called mga.o.  AGP
   support is required for this driver to work.
 
+SiS 300/540/630
+CONFIG_DRM_SIS
+  Choose this option if you have a SIS 300, 540 or 630 graphics card.
+  If M is selected, the module will be called sis.o.  AGP support is
+  required for this driver to work.
+
 3dfx Banshee/Voodoo3+
 CONFIG_DRM40_TDFX
   Choose this option if you have a 3dfx Banshee or Voodoo3 (or later),