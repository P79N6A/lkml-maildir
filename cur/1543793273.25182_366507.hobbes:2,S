Date: Sat, 12 Nov 2005 18:50:01 -0600
From: Rob Landley <>
Subject: Re: [uml-devel] Re: Why did oldconfig's behavior change in 2.6.15-rc1?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/11/12/203

On Saturday 12 November 2005 17:49, Roman Zippel wrote:
> Hi,
>
> On Sat, 12 Nov 2005, Rob Landley wrote:
> > Why did oldconfig switch off CONFIG_MODE_SKAS?  It didn't do that before.
> > Hmmm...  Rummage, rummage...  Darn it, it's position dependent.  _And_
> > version dependent.
>
> It's _not_ position dependent, but the behaviour with multiple equal
> symbols is undefined.
I just want a minimally expressed config.  I've jumped through a number of 
hoops trying to get "allnoconfig plus these symbols" to work.
Setting .config to my symbol list and doing old config prompts a lot, doing 
yes "" | oldconfig sets lots of crap by default (since not all default values 
are n), and doing yes "n" | oldconfig goes into an endless loop every time 
it's prompting for a number or some such.  You have to start with 
allnoconfig.  Appending the new symbols and re-running oldconfig worked for a 
number of versions, until now.  Now you have to insert the new symbols at the 
beginning.
I could presumably also work around the new breakage via following allnoconfig 
with a sed -i invocation to remove the appropriate "# blah is not set" lines 
before appending the symbols.  (Of course it means that the config symbol 
list has to be fed into a for loop instead of being expressed in the same 
format as config, which sucks deeply.  Insert at the beginning works until it 
changes again...)
> > Ok, now I have to put the new entries at the _beginning_.  Appending them
> > doesn't work anymore, it now ignores any symbol it's already seen, so you
> > can't easily start with allnoconfig, switch on just what you want, and
> > expect oldconfig to do anything intelligent.
>
> Now you can put them in allno.config instead and allnoconfig will do the
> right thing.
Testing...
Ok, that worked.  Weird and totally unituitive name for a miniconfig, but oh 
well.
Is this documented anywhere?
Rob
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/