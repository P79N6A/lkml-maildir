Date: Thu, 28 Oct 2004 14:35:22 +0200
From: Michal Semler <>
Subject: Re: wd module doesn't work in 2.4 and 2.6 ???
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/10/28/136

It look like that check for my card never goes into
                } else {
                        int tmp = inb(ioaddr+1); /* fiddle with 16bit bit */
                        outb( tmp ^ 0x01, ioaddr+1 ); /* attempt to clear 
16bit bit */
                        if (((inb( ioaddr+1) & 0x01) == 0x01) /* A 16 bit card 
*/
                                && (tmp & 0x01) == 0x01 ) 
{                             /* In a 16 slot. */
                                int asic_reg5 = inb(ioaddr+WD_CMDREG5);
                                /* Magic to set ASIC to word-wide mode. */
                                outb( NIC16 | (asic_reg5&0x1f), 
ioaddr+WD_CMDREG5);
                                outb(tmp, ioaddr+1);
                                model_name = "WD8013";
                                word16 = 1;             /* We have a 16bit 
board here! */
in wd.c source
Michal
Dne čt 28. října 2004 13:46 Michal Semler napsal(a):
> Hi guys,
>
> I have an old SMC card named SMC EtherCard Plus Elite 16 Combo (WD 8013EW
> or 8013EWC)
>
> it should work with module wd.
>
> Under win95 :) it works great with
>
> io=0x300 irq=15 mem=0xc8000 mem_end=0xcvfff
>
> When I modprobe wd with these params, both 2.4 and 2.6 kernels tells me
>
> No wd80x3 card found (io=0x300)
>
> PLS help me. Where is problem???
>
> Michal
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/