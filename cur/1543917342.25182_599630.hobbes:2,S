Date: Thu, 27 Sep 2007 23:40:21 +0400
From: Alexey Dobriyan <>
Subject: Re: + oom-prevent-including-schedh-in-header-file.patch added to -mm tree
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/9/27/243

> It's not necessary to include all of linux/sched.h in linux/oom.h.  Instead,
> simply include prototypes for the relevant structs and include linux/types.h
> for gfp_t.
> 
> Cc: Andrea Arcangeli <andrea@suse.de>
> Cc: Christoph Lameter <clameter@sgi.com>
> Cc: Alexey Dobriyan <adobriyan@gmail.com>
> Signed-off-by: David Rientjes <rientjes@google.com>
> Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
OK.
> --- a/include/linux/oom.h~oom-prevent-including-schedh-in-header-file
> +++ a/include/linux/oom.h
> @@ -1,8 +1,6 @@
>  #ifndef __INCLUDE_LINUX_OOM_H
>  #define __INCLUDE_LINUX_OOM_H
> 
> -#include <linux/sched.h>
> -
>  /* /proc/<pid>/oom_adj set to -17 protects from the oom-killer */
>  #define OOM_DISABLE (-17)
>  /* inclusive */
> @@ -11,6 +9,11 @@
> 
>  #ifdef __KERNEL__
> 
> +#include <linux/types.h>
> +
> +struct zonelist;
> +struct notifier_block;
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/