Date: Sat, 24 Feb 2007 11:06:19 +0900
From: Komuro <>
Subject: Re: [BUG]  PATA_PCMCIA does not work
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/2/23/329

Alan <alan@lxorguk.ukuu.org.uk> wrote:
The oops is fixed. Thanks!
But when I repeat insertion/rejection of the device,
ataX.00 is incremented.
Is this correct?
>pccard: PCMCIA card inserted into slot 1
>pccard: card ejected from slot 1
>ata1.00: disabled
>
>pccard: PCMCIA card inserted into slot 1
>pccard: card ejected from slot 1
>ata2.00: disabled
>
>pccard: PCMCIA card inserted into slot 1
>pccard: card ejected from slot 1
>ata3.00: disabled
Best Regards
Komuro
> Does this fix the oops ?
> 
> Alan
> 
> 
> diff -u --new-file --recursive --exclude-from /usr/src/exclude linux.vanilla-2.6.20-mm2/drivers/ata/pata_pcmcia.c linux-2.6.20-mm2/drivers/ata/pata_pcmcia.c
> --- linux.vanilla-2.6.20-mm2/drivers/ata/pata_pcmcia.c	2007-02-20 13:37:58.000000000 +0000
> +++ linux-2.6.20-mm2/drivers/ata/pata_pcmcia.c	2007-02-21 14:06:58.792707976 +0000
> @@ -308,7 +342,6 @@
>  		if (info->ndev) {
>  			struct ata_host *host = dev_get_drvdata(dev);
>  			ata_host_detach(host);
> -			dev_set_drvdata(dev, NULL);
>  		}
>  		info->ndev = 0;
>  		pdev->priv = NULL;
> 
> 
> 
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/