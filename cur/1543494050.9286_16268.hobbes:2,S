Date: Wed, 28 Apr 1999 07:25:02 -0400 (EDT)
From: "Mike A. Harris" <>
Subject: Re: How to force "make modules_install" to install elsewhere
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/4/28/27

On Sat, 24 Apr 1999, Steven James wrote:
>Date: Sat, 24 Apr 1999 11:00:00 -0400
>From: Steven James <sjames@gdex.net>
>To: "Mike A. Harris" <mharris@ican.net>
>Subject: Re: How to force "make modules_install" to install elsewhere 
>
>
>> >make PREFIX='/home/customer/spa/kernel' modules_install
>> 
>> I just searched the top level Makefile for "PREFIX" and couldn't
>> find it anywhere.  Are you sure that that works?
>
>
>Hmmm, that's odd. I'm looking at the top level Makefile in 2.0.36.
>The pertinent  segment reads (with line numbering) PREFIX in line 284:
>
>   282  modules_install:
>   283      @( \
>   284      MODLIB=$(PREFIX)/lib/modules/$(VERSION).$(PATCHLEVEL).$(SUBLEVEL); \
>   285      cd modules; \
>   286      MODULES=""; \
>   287      inst_mod() { These="`cat $$1`"; MODULES="$$MODULES $$These"; \
>   288          mkdir -p $$MODLIB/$$2; cp -p $$These $$MODLIB/$$2; \
>   289          echo Installing modules under $$MODLIB/$$2; \
>   290      }; \
>   291      \
>   292      if [ -f BLOCK_MODULES ]; then inst_mod BLOCK_MODULES block; fi; \
>   293      if [ -f NET_MODULES   ]; then inst_mod NET_MODULES   net;   fi; \
>   294      if [ -f IPV4_MODULES  ]; then inst_mod IPV4_MODULES  ipv4;  fi; \
>   295      if [ -f SCSI_MODULES  ]; then inst_mod SCSI_MODULES  scsi;  fi; \
>   296      if [ -f FS_MODULES    ]; then inst_mod FS_MODULES    fs;    fi; \
>   297      if [ -f CDROM_MODULES ]; then inst_mod CDROM_MODULES cdrom; fi; \
>   298      \
>   299      ls *.o > .allmods; \
>   300      echo $$MODULES | tr ' ' '\n' | sort | comm -23 .allmods - > .misc; \
>   301      if [ -s .misc ]; then inst_mod .misc misc; fi; \
>   302      rm -f .misc .allmods; \
>   303      )
>   304  
>
>Hope this helps!
1 root@red:/usr/src/linux-2.0.36# grep "PREFIX" Makefile
1 root@red:/usr/src/linux-2.0.36#
Nope.  It seems that your 2.0.36 and mine are not the same.  Mine
is from ftp.kernel.org/....linux-2.0.36.tar.gz
Are you using a redhat kernel by chance?
--
Mike A. Harris                   Linux advocate      GNU advocate
Computer Consultant                          Open Source advocate  
The DVORAK keyboard layout RULES!  I memorized it in 45 minutes
and I don't think I'm ever going back to QWERTY!
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/