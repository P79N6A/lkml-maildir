Date: Sun, 26 Mar 2000 23:24:59 +0100 (BST)
From: Lawrence Manning <>
Subject: Re: wine and 2.3.99-pre3 followup (reproduced) (FAT problem?)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/3/26/120

> Now insmod foo.o will switch this debugging stuff on/off.
> Turn it on (insmod foo.o), reproduce the hang and turn it off again (one
> more insmod foo.o). And look at the logs. Reasonable things to print are
> fields of tsk - you definitely want tsk->pid, for one. Oh, and place where
> it hangs, indeed ;-)
> 
> I would do all this crap myself, but I don't have Wine or any Windows
> software (or Windows itself, for that matter).
Ok, I followed all your instructions... But I don't think the problem is
in do_exit.  I mucked up ;( I managed to completely miss an oops!  My wine
stuff is running of a Win98 FAT32 partition.  Heres the oops in my log,
generated about the same time wine crashed:
Mar 26 17:33:02 aslak kernel: kernel BUG at file.c:69! 
Mar 26 17:33:02 aslak kernel: invalid operand: 0000 
Mar 26 17:33:02 aslak kernel: CPU:    0 
Mar 26 17:33:02 aslak kernel: EIP:    0010:[fat_get_block+101/232] 
Mar 26 17:33:02 aslak kernel: EFLAGS: 00010292 
Mar 26 17:33:02 aslak kernel: eax: 00000019   ebx: 00000000   ecx:
00000017   edx: 00000000 
Mar 26 17:33:02 aslak kernel: esi: 00000020   edi: c6ae2380   ebp:
c7c8ab80   esp: c8e17db4 
Mar 26 17:33:02 aslak kernel: ds: 0018   es: 0018   ss: 0018 
Mar 26 17:33:02 aslak kernel: Process wine (pid: 13173,
stackpage=c8e17000) 
Mar 26 17:33:02 aslak kernel: Stack: c0221487 c0221607 00000045 c7c8ab80
00000020 c7c8ab80 c1167708 c012e2c7  
Mar 26 17:33:02 aslak kernel:        c012ed23 c6ae2380 00000020 c7c8ab80
00000001 00000008 c6ae2380 00000004  
Mar 26 17:33:02 aslak kernel:        c1167708 00000000 c012f697 c6ae2380
c1167708 c014d7d4 c1167708 c6ae2380  
Mar 26 17:33:02 aslak kernel: Call Trace: [tvecs+43523/125628]
[tvecs+43907/125628] [balance_dirty_state+15/72]
[__block_write_full_page+143/280] [block_write_full_page+71/252]
[fat_get_block+0/232] [fat_writepage+15/20]  
Mar 26 17:33:02 aslak kernel:        [fat_get_block+0/232]
[filemap_write_page+38/68] [filemap_sync+723/892] [filemap_unmap+22/28]
[exit_mmap+105/284] [mmput+21/44] [do_exit+333/832] [do_signal+496/620]  
Mar 26 17:33:02 aslak kernel:        [dput+224/344] [__fput+62/72]
[_fput+17/64] [signal_return+20/24]  
Mar 26 17:33:02 aslak kernel: Code: 0f 0b 83 c4 0c b8 fb ff ff ff eb 6f 8b
87 9c 00 00 00 0f b7
Do you need other info?  I am new to oopses.  Please give me instructions
if I have to do anything else.
Here is the FS part of my .config:
CONFIG_AUTOFS_FS=y
CONFIG_FAT_FS=y
CONFIG_MSDOS_FS=y
CONFIG_VFAT_FS=y
CONFIG_ISO9660_FS=y
CONFIG_PROC_FS=y
CONFIG_DEVPTS_FS=y
CONFIG_EXT2_FS=y
CONFIG_NFS_FS=y
CONFIG_NFSD=y
Sorry for the confusion.  I somehow thought if there was an oops it would
scream at me, not hide in the log file ;)
Lawrence
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/