Date: Tue, 11 Apr 2006 18:15:25 +0200
From: "Serge Noiraud" <>
Subject: Re: PREEMPT_RT : 2.6.16-rt12 and boot : BUG ?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/4/11/158

Hi,
	It now works with all config parameters set to yes on 2.6.16-rt16.
however, PERCPU_ENOUGH_ROOM is set to 384KB.
I'm now trying to lower this value of PERCPU_ENOUGH_ROOM.
With 256K and 2.6.16-rt16 : doesn't work.
With 320K : OK
So I need to use 320K for PERCPU_ENOUGH_ROOM to boot correctly.
I have several questions :
Is there a problem in my config file ?
Will this memory freed at end of kernel loading ?
Why do we need such a size ?
What usage is this for ?
lundi 10 Avril 2006 14:46, Serge Noiraud wrote/a écrit :
> jeudi 6 Avril 2006 17:05, Serge Noiraud wrote/a écrit :
> > jeudi 6 Avril 2006 16:31, Ingo Molnar wrote/a écrit :
> > > 
> > > * Serge Noiraud <serge.noiraud@bull.net> wrote:
> > > 
> > > > input: ImPS/2 Generic Wheel Mouse as /class/input/input1
> > > > VFS: Mounted root (ext2 filesystem).
> > > > Fusion MPT base driver 3.03.07
> > > > Copyright (c) 1999-2005 LSI Logic Corporation
> > > > Could not allocate 8 bytes percpu data
> > > > mptscsih: Unknown symbol scsi_remove_host
> > > 
> > > could you increase (double) PERCPU_ENOUGH_ROOM in 
> > > include/linux/percpu.h, does that solve this problem? (and make sure you 
> > > use -rt13, -rt12 had a couple of bugs)
> > Tested with rt12 and 192K : same problem
> > Tested with rt12 and 256K : same problem.
> > Tested with rt13 and 256K : same problem.
> > I'm currently compiling with CONFIG_KALLSYMS_ALL not set.
> Same thing.
> 
> The boot succeed if I set CONFIG_CRITICAL_IRQSOFF_TIMING to no.
> If I set this parameter to yes, I get the scsi unresolved symbols.
> PERCPU_ENOUGH_ROOM  is actually set to 256K.
> I'll try to set the original value.
it didn't work with CONFIG_CRITICAL_IRQSOFF_TIMING  set to no and PERCPU_ENOUGH_ROOM  = 128K.
> 
> I don't see the relation between this parameter and the missing scsi symbols resolution.
> Timing problem ?
> 
> > > 
> > > 	Ingo
> 
-- 
Serge Noiraud
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/