Date: Thu, 13 Dec 2007 11:35:07 -0800
From: Stephen Hemminger <>
Subject: Re: [RFC] net: napi fix
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/12/13/368

David Miller wrote:
> From: Andrew Gallatin <gallatin@myri.com>
> Date: Thu, 13 Dec 2007 14:02:25 -0500
>
> 
>> Or perhaps we should just leave things as is.
>> 
>
> We should probably add a "disabling" state bit to the
> napi struct flags, this will be set by napi_disable()
> before it loops trying to set the sched bit.
>
> net_rx_action() can then check this.
> 
How about allowing a return value of -1 from napi_poll and letting device
check itself.