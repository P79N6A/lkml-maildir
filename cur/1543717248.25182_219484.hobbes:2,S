Date: Mon, 10 May 2004 16:07:40 -0700
From: Andrew Morton <>
Subject: Re: Random file I/O regressions in 2.6
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/5/10/229

Ram Pai <linuxram@us.ibm.com> wrote:
>
> I am nervous about this change. You are totally getting rid of
> lazy-readahead and that was the optimization which gave the best
> possible boost in performance. 
Because it disabled the large readahead outside the area which the app is
reading.  But it's still reading too much.
> Let me see how this patch does with a DSS benchmark.
That was not a real patch.  More work is surely needed to get that right.
> In the normal large random workload this extra page would have
> compesated for all the wasted readaheads.
I disagree that 64k is "normal"!
>  However in the case of
> sysbench with Andrew's ra-copy patch the readahead calculation is not
> happening quiet right. Is it worth trying to get a marginal gain 
> with sysbench at the cost of getting a big hit on DSS benchmarks,
> aio-tests,iozone and probably others. Or am I making an unsubstantiated
> claim? I will get back with results.
It shouldn't hurt at all - the app does a seek, we perform the
correctly-sized read.
As I say, my main concern is that we correctly transition from seeky access
to linear access and resume readahead.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/