Date: Fri, 06 Apr 2007 12:29:19 +0200
From: Thomas Gleixner <>
Subject: Re: [2.6 patch] the scheduled -EINVAL for invalid timevals in setitimer
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/4/6/40

On Fri, 2007-04-06 at 12:20 +0200, Adrian Bunk wrote:
> As scheduled, do_setitimer() now returns -EINVAL for invalid timeval.
>
> Signed-off-by: Adrian Bunk <bunk@stusta.de>
Ha, you beat me by a minute :)
> -	check_itimerval(value);
> +	if (unlikely(!timeval_valid(&value->it_value) || !timeval_valid(&value->it_interval)))
> +		return -EINVAL;
> 
Please make this:
+       if (!timeval_valid(&value->it_value) ||
+           !timeval_valid(&value->it_interval))
+               return -EINVAL;
	tglx
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/