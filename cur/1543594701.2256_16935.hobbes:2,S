Date: Tue, 19 Jun 2001 18:45:01 -0600
From: Richard Gooch <>
Subject: Bind oddity/trap
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/6/19/160

  Hi, Al. Here's an oddity I just ran across with VFS bindings:
# mkfifo /dev/modem   (BTW: it would be nice not to have to make the node)
# mount --bind /dev/tts/0 /dev/modem
# kermit
kermit> set line /dev/modem
kermit> set speed 4800
?Sorry, you must SET LINE first
The reason this is happening is because Kermit will do a readdir(2),
scanning /dev for a node with the same inum as it gets from fstat(2).
In this case, fstat(2) is giving the inum of /dev/tts/0, which is of
course the correct behaviour. However, the d_ino field from readdir(2)
is giving the inum of the "mount point" (the FIFO I created). So there
is an inconsistency, and kermit gets confused.
Perhaps readdir(2) should return the same inum as fstat(2) does? I
realise that could be quite nasty to implement. However, it is an
inconsistency, and a potential trap. But there probably isn't a good
solution to this one.
				Regards,
					Richard....
Permanent: rgooch@atnf.csiro.au
Current:   rgooch@ras.ucalgary.ca
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/