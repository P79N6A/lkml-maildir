Date: Thu, 1 Feb 2007 13:14:17 +0100
From: Ingo Molnar <>
Subject: Re: [-mm patch] x86_64 GTOD: offer scalable vgettimeofday
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/2/1/113

* Andi Kleen <ak@suse.de> wrote:
> > The 'price' paid for it is lower resolution - but it's still good 
> > for those benchmarking TPC-C runs - and /alot/ simpler. It's also 
> > quite a bit faster than any TSC based vgettimeofday, because it 
> > doesnt have to do an RDTSC (or RDTSCP) instruction nor any 
> > approximation of the time.
> 
> I believe that should be also a separate clock_gettime() CLOCK_
> 
> Global settings for these things are bad. Even if you run TPC-C you 
> don't want your other programs that rely on monotonic time to break.
yeah. But maybe still there should still be an 'easy' option for people 
to consciously degrade the resolution of gettimeofday(), in exchange for 
more performance. There are systems where gettimeofday already has such 
resolution, so apps certainly shouldnt break from this. But i agree with 
you: that's why i made this default-off, and the CLOCK_ option could be 
a way for apps to reliably get this behavior, independently of the 
global setting (hence driving the migration of affected apps to this new 
CLOCK_ thing). Hm?
	Ingo
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/