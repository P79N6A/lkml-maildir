Date: Tue, 19 Apr 2005 18:24:19 +1000
From: Nick Piggin <>
Subject: Re: E1000 - page allocation failure - saga continues :(
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/4/19/37

On Tue, 2005-04-19 at 10:15 +0200, Yann Dupont wrote:
> Nick Piggin a Ã©crit :
> 
> >
> >>Do you have turned NAPI on ??? I tried without it off on e1000 and ...
> >>surprise !
> >>Don't have any messages since 12H now (usually I got those in less than 1H)
> >>
> >> 
> >>
> >
> >Possibly kswapd might be unable to get enough CPU to free memory.
> >
> > 
> >
> Ok, so what you're saying is that turning NAPI off is just slowing down
> things enough to not be hit by
> this problem , right ?
> 
Perhaps, yes. Or that NAPI is using more CPU than non-NAPI
(which I understand can happen in some corner cases).
If you have a multiprocessor (or even hyperthreading), I
think you could test this by binding kswapd on cpu CPU, and
put nic interrupts on the other - then test with and without
NAPI.
That is, presuming you can reproduce the problem on your
multiprocessor system in the first place.
-- 
SUSE Labs, Novell Inc.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/