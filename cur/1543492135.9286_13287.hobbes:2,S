Date: Wed, 07 Apr 1999 09:17:11 +0000
From: Dietmar Kling <>
Subject: Re: Vesafb & less on console Bug ? and another problem
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/4/7/18

Ian Eure wrote:
> Dietmar Kling wrote:
> >
> > Hello,
> >
> > Kernel 2.2.x - 2.2.5  and vesafb on console   (This did work under
> > 2.1.125 as far as I can remember )
> >
> > When I display a Textfile  with less (version 332) larger than
> > screensize
> > and hit the key 'b' in less (Hint: hit space to scroll down some pages)
> > less tries to scroll back the text. This takes so much cpu-power that
> > sound
> > (mpg123) stops until the 50 lines are scrolled  and it needs severals
> > seconds  to scroll the lines on
> > my 350 AMD !!. Every task on the machine seems to stop working as long
> > as
> > the lines are scrolled back.
> >
> > I believe this is a bug.
> >
> No, this is normal behavior. Vesafb uses _none_ of the hardware
> accelleration your video card may or may not support. Since your CPU has
> to move a lot of data (for me, 1024x768x16bpp == ~1.6mb for one screen)
> around in memory, other CPU-intenstive programs (read: mp3 players) will
> suffer.
>
> The only reason to use Vesafb is if your video card is not yet supported
> by your X server. If you have a supported video card, I suggest that you
> use a high-res textmode and XFree.
>
> However.... If your system supports MTRRs, this can give you a huge
> speed boost, as is the case with my PII-450 and a S3 Trio3D card.
First: Thanks to all which replied.
My Card is a Matrox G100. The matroxbuffer didn't work for me last time i
tried it (2.1.128 I believe). It comes sometimes
up but my fbtv program shows the wrong colors and I am to lazy to evaluate
what goes wrong.
Guys,  i will try again matroxfb  but i insist that scrolling worked for me in
vesafb
(I did work under X for a long so i didn't notice the  behaviour on the
console).
The only thing i changed beetween 2.1.124 and today was the processor (AMD 200
-> AMD 350).
(Ok  today i upgraded to 128 MB RAM, kill me).
Scrolling worked well under the old kernels. When I find time, i will
recompile some old 2.1.124 and try to prove this. And yes I did _not_  change
my boot configuration.
Second Problem ( Or how to kill the ALT-Console Switch)
 I also see a slowdon of fbtv (the console version of xawtv)  compared to
older Kernels.
    ( But this could be a problem of the version of fbtv (2.34), though)
But  I can easily kill the ALT-F1/F2/F3... Console switch.
Recipe:
    Start fbtv on Console 1
    Switch to Console 2
    Switch back to console 1
    There is  ca. 1 second before the tv-screen comes back on my console.
    In that time try to switch back to console 2
   Bingo!
   You killed the alt console Switch.
   fbtv-Screen comes up and you cannot switch to another console anymore.
 - dietmar
P.S. For those who want to know this is a AMD-350 Computer with 128 MB RAM a
Matrox G100 Card
a Bt848 Card a Soundblaster an Advansys SCSI-Controller, a Sony DAT-Tape some
SCSI-Disks
and a Big Fireball IDE.  The machine is running fine, Captain :) .
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/