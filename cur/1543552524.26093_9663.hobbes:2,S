Date: Wed, 25 Oct 2000 22:27:09 +1100
From: Andrew Morton <>
Subject: Re: [PATCH] 2.4 Changes update (was Re: [patch] kernel/module.c)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/10/25/36

"Barry K. Nathan" wrote:
> 
> Linus Torvalds wrote:
> 
> > It seems that gcc-2.7.2.3 is terminally ill. I'd rather change
> > Documentation/Changes, and just document the fact.
> 
> FWIW, here's a patch that does that.
Looks good.
But all the documentation has for years been saying that
2.7.2.3 is the one true compiler, so we are now in for 12
months worth of bogus oops reports.
This patch will help:
--- linux-2.4.0-test10-pre5/arch/i386/kernel/setup.c	Tue Oct 24 21:34:11 2000
+++ linux-akpm/arch/i386/kernel/setup.c	Wed Oct 25 22:03:29 2000
@@ -95,6 +95,11 @@
 #include <asm/dma.h>
 #include <asm/mpspec.h>
 #include <asm/mmu_context.h>
+
+#if (__GNUC__ < 2) || (__GNUC__ == 2 && __GNUC_MINOR__ < 91)
+#error Linux requires gcc-2.91.66 (egcs-1.1.2) or later
+#endif
+
 /*
  * Machine setup..
  */
--- linux-2.4.0-test10-pre5/./README	Sun Oct 15 01:27:35 2000
+++ linux-akpm/./README	Wed Oct 25 22:11:26 2000
@@ -161,12 +161,12 @@
 
 COMPILING the kernel:
 
- - Make sure you have gcc-2.7.2 or newer available.  It seems older gcc
-   versions can have problems compiling newer versions of Linux.  This
-   is mainly because the older compilers can only generate "a.out"-format
-   executables.  As of Linux 2.1.0, the kernel must be compiled as an
-   "ELF" binary.  If you upgrade your compiler, remember to get the new
-   binutils package too (for as/ld/nm and company).
+ - Make sure you have gcc-2.91.66 (egcs-1.1.2) or newer available. 
+   Older gcc versions can have problems compiling newer versions of
+   Linux.  This is mainly because the older compilers can only generate
+   "a.out"-format executables.  As of Linux 2.1.0, the kernel must be
+   compiled as an "ELF" binary.  If you upgrade your compiler, remember
+   to get the new binutils package too (for as/ld/nm and company).
 
    Please note that you can still run a.out user programs with this
    kernel.
Richard, the FAQ (which may be the most-linked-to document on the
internet!) needs updating.
	
http://www.tux.org/lkml/#s8-3
-
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/