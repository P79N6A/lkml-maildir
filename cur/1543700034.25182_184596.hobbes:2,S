Date: Wed, 17 Dec 2003 11:42:38 +0000
From: David Woodhouse <>
Subject: Re: 2.4.23aa1 ext3 oops
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/12/17/35

On Thu, 2003-12-11 at 10:33 +0800, Jamie Clark wrote:
> After a quick browse of the assembler output the zeroing would appear to 
> be part of the list_del inline, and edi seems to equate to &sb. 
Seems reasonable. It does look like something's stomped on sb->s_dirty.
> __mark_inode_dirty() does not appear to take sb_lock before adding to 
> the s_dirty list. Could that be the culprit?
I don't think so; it's holding the inode_lock which should be
sufficient. Besides -- in practice all updates to the 4-byte pointer
sb->s_dirty.next are going to be atomic, and there's no reason _ever_
for it to be set to d7ffbc08. It's hard to see how a simple locking
problem is going to cause such a thing.
How repeatable is this? Can you turn on slab poisoning?
-- 
dwmw2
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/