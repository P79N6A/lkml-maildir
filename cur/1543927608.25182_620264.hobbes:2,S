Date: Wed, 21 Nov 2007 16:10:58 +0100
From: Oliver Neukum <>
Subject: Re: USB deadlock after resume
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/11/21/144

Am Mittwoch 21 November 2007 schrieb Felipe Balbi:
> > Do you know any good way for performing a softreset within the driver?
> > The video application should get a continuous datastream after
> > resuming the notebook, so the driver shouldn't be unloaded.
> > The driver also keeps a list of previous camera settings which should
> > be set up again after resuming. Stopping the video application and
> > reattaching the device using ACPI (this board supports reconnecting
> > the device using ACPI) should be avoided.
> 
> When you suspend, you cut off vbus (afaik, correct me if I'm wrong), which
> means your device will get disconnected. One way to avoid this is enabling
> CONFIG_USB_PERSIST and trying with that on.
Suspend may or may not cut off power. If it does cut off power, resume() will
never be called, instead either disconnect() or reset_resume().
	Regards
		Oliver
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/