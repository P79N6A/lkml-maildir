Date: Tue, 30 Nov 2004 09:49:04 +0100
From: Ingo Molnar <>
Subject: Re: Priority Inheritance Test (Real-Time Preemption)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/11/30/29

* Esben Nielsen <simlo@phys.au.dk> wrote:
> > and i'm regularly testing this property with 'hackbench 50', which
> > creates over a 1000 wildly scheduling non-RT tasks. Latency is not
> > affected by such workloads.
> >
> 
> Probably not. Even while doing that you most likely wont build up wait
> lists of more than 10, maybe 100 tasks? Doing full traversals with irq
> disabled probably wont be meassureable!(?) compared to much other
> stuff increasing responsible for the meassured latency.
there is no full list traversal of SCHED_NORMAL tasks, ever.
but the best way is to test this yourself, download Florian's rtc_wakeup
from:
  
http://www.affenbande.org/~tapas/wiki/index.php?rtc_wakeup
and run it with the highest possible resolution, 8192 Hz:
  chrt -f 98 -p `pidof 'IRQ 8'`
  chrt -f 99 -p `pidof 'IRQ 0'`
  ./rtc_wakeup -f 8192 -t 100000
in this mode rtc_wakeup will report the worst irq-delivery latency it
measures. It will thus measure the combined effect of any type of
scheduling or irqs-off latency to RT-tasks.
then download hackbench from:
  
http://developer.osdl.org/craiger/hackbench/
and try e.g.:
  ./hackbench 50
this will start 2x20x50 == 2000 SCHED_NORMAL threads, all performing a
nice pattern of scheduling simulating a busy chat server workload with
tons of messages going back and forth.
	Ingo
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/