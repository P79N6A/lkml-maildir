Date: Tue, 16 Nov 2004 23:55:35 +0100
From: Florian Schmidt <>
Subject: Re: [patch] Real-Time Preemption, -RT-2.6.10-rc2-mm1-V0.7.27-3
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/11/16/258

On Wed, 17 Nov 2004 00:11:45 +0100
Ingo Molnar <mingo@elte.hu> wrote:
> >     5 88010002 0.000ms (+0.000ms): wake_up_process (redirect_hardirq)
>          ^--- this one
> 
> it was zero before - indeed hard to notice optically :-|
nah, i just didn't know what to look for :)
> i've uploaded the -11 patch with a preliminary fix:
> 
> which turns off the FPU-based ops if PREEMPT_RT is specified. The speed
> difference should be small but the latency difference is large ...
> 
> could you try -11, do you still see these large latencies?
yes, this seems to fix it. no more extra jitter or large latencies on
console switches. 
Now, on to trying to lock up the machine ;)
Ah, btw: one thing i observed with my soundcard. I load the module at bootup
and chrt its IRQ handler to prio 98 (a check with chrt shows this prio
allright). Now it seems that the first time the soundcard is actually used
the thread gets back its original prio (from dmesg):
IRQ#3 thread RT prio: 42.
Maybe the sounddriver (snd-cs46xx) i use never initializes its irq before
the first time it gets used to play something. Well anyways, the workaround
is to change its prio after the first time it is used and not directly after
module loading..
flo
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/