Date: Tue, 25 Sep 2001 09:06:02 -0400
From: Chris Mason <>
Subject: Re: [reiserfs-list] Re: [PATCH] 2.4.10 improved reiserfs a lot, but could still be better
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/9/25/25

On Tuesday, September 25, 2001 02:54:58 PM +0200 Jorge Ner√≠n
<jnerin@juridicas.com> wrote:
>> 
> Who says test.zero is a linear file and it's not scattered around the
> whole disk and the fs layer is filling holes...? If it's the case the
> write cache is a BIG win, just think that the fs writes a chunk at the
> beggining of the disk, then another chunk at the end, then another near
> the beginning, then...  you get the picture, in this case the disk
> reorders the seeks to best fit.
> 
> If you want to try a REAL linear write do a dd if=/dev/zero of=/dev/hde7
> or whatever unused partition you have.
> 
Exactly, especially since during the dd you're going to seek back to the
log for a few commit writes.
>From a filesystem point of view, I've spent hours and hours getting
reiserfs to order the writes correctly to keep data consistent after a
crash.  Turning on writeback caching without a battery backup more or less
throws all that work out the window.  Don't do it.
For some people, a UPS counts as a battery backup, but there are lots of
reasons that doesn't fly in any kind of production environment.  If your
job somehow depends on the data being safe, just get a raid controller with
batter backed cache.
-chris
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/