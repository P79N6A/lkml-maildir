Date: Sat, 26 Jul 2003 17:01:47 +0900
From: "kimmo.myllyvirta" <>
Subject: Re: AMD760MP - Troubles with MSI K7D
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/7/26/52

> I have two Athlon MP's 2600+ mounted on a MSI K7D-Master-L with the famous 
> AMD-768 (Opus) chipset (latest BIOS 1.82).
> Actually I'm using debian's 'woody' distribution with the kernel 2.4.22-pre8, 
> glibc 2.2.5 and gcc 2.95.4.
> I have problems with the IDE support:
> On the hardisk (Maxtor 6Y120L0 - 120GB) there is a 1.4 GB file, I want to 
> copy. But when I try this, the system stops with the error message:
> 
> attempt to access beyond end of device
> 03:09: rw=0, want=976094472, limit=109948828
> 
> and I have to push the reset button.
> 
> When I switch DMA off by using 'hdparm -d0' everthing works fine, but the 
> hole copy-process takes about 8 minutes!
> 
> Are there any solutions or workarounds to fix these problems?
Plug in a PS/2 mouse, and it works.
See product errata for the AMD-768 (#10):
"Multiprocessor system may hang while in FULL APIC mode and IOAPIC interrupt
is masked"
I'm currently running similar setup (same MB, Redhat 9 + 2.4.22-pre7) without 
any problems. If the PS/2 mouse is removed i get exactly the same problems as 
you described. 
And it's not only the IDE that is affected. E.g. doing 'ifdown eth0' causes 
the system to hang (at least for me it did), so turning off the DMA is not 
a solution.
> Do I have to upgrade the glibc or any other system components?
no. (it will not solve this problem)
> Does this problem affect any inter-CPU processes like OpenMP?
no, when you have the PS/2 mouse.
> Do I have to change the motherboard? Which mobo's are said to be reliable?
Same problem appears with all motherboards using AMD 768 (rev B1 or B2). 
(Correct me if i'm wrong. Maybe some manufacturer had made workaround for 
this problem...)
Cheers,
KM
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/