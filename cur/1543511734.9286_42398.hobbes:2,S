Date: Wed, 06 Oct 1999 21:35:14 +1000
From: Keith Owens <>
Subject: 2.3.19 pcmcia Makefile bug with patch
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/10/6/38

drivers/Makefile did not scan pcmcia for make dep, nor did it compile
correctly when pcmcia was configured as a module.  It also scanned
ap1000 twice for make dep.
--- drivers/Makefile Tue, 05 Oct 1999 14:20:01 +1000 keith (linux-2.3/J/16_Makefile 1.7 644)
+++ drivers/Makefile Wed, 06 Oct 1999 21:22:48 +1000 keith (linux-2.3/J/16_Makefile 1.7 644)
@@ -11,7 +11,7 @@
 MOD_SUB_DIRS := $(SUB_DIRS)
 ALL_SUB_DIRS := $(SUB_DIRS) pci sgi scsi sbus cdrom isdn pnp i2o \
 				macintosh video dio zorro fc4 usb \
-				nubus tc ap1000 atm
+				nubus tc ap1000 atm pcmcia
 
 ifdef CONFIG_DIO
 SUB_DIRS += dio
@@ -22,9 +22,14 @@
 SUB_DIRS += pci
 endif
 
-ifdef CONFIG_PCMCIA
+ifeq ($(CONFIG_PCMCIA),y)
 SUB_DIRS += pcmcia
-endif
+MOD_SUB_DIRS += pcmcia
+else
+  ifeq ($(CONFIG_PCMCIA),m)
+  MOD_SUB_DIRS += pcmcia
+  endif
+endif 
 
 ifdef CONFIG_SBUS
 SUB_DIRS += sbus
@@ -117,7 +122,6 @@
 
 ifeq ($(CONFIG_AP1000),y)
 SUB_DIRS += ap1000
-ALL_SUB_DIRS += ap1000
 endif
 
 ifeq ($(CONFIG_FC4),y)
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/