Date: 21 Jul 2003 00:48:56 +0200
From: Martin Schlemmer <>
Subject: Re: devfsd/2.6.0-test1
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/7/20/176

On Sun, 2003-07-20 at 19:17, Andrey Borzenkov wrote:
> > Well, it implements probeall in another fashion.  Also, you might
> > try /sbin/generate-modprobe.conf to convert a modules.conf to
> > modprobe.conf syntax.
> 
> modprobe.conf syntax is easy to implement but unfortunately PITA to use. 
> Exactly probe and probeall have been very helful in tracking module 
> dependencies. Now you have arbitrary shell line that is near to impossible to 
> parse in general.
> 
True.
> I added half-hearted support to mkinitrd and initscripts for Mandrake but it 
> will never be complete given the current situation.
> 
> Also I fixed devfsd to correctly use modprobe.devfs or modules.devfs depending 
> on which kernel it runs on; patch has been sent both to lkml and devfs list 
> and is included in current Mandrake devfsd.
> 
As I have it in Gentoo, it is done modprobe side, but only because its
less patches (as Rusty already added the changes to his hack, plus the
modprobe.devfs I sent him).
> actually adding probe and probeall is trivial enough, I did not want to base 
> Mandrake packages on that to avoid incompatibility.
> 
Have you checked with Rusty yet if he will accept probe/probeall patches
for module-init-tools ?  I (IMHO) do not see why it should not be
possible to add if its done cleanly, and do not break anything else.
> > Also, read the threads on the list about udev/hotplug - apparently
> > devfsd is going out ...
> 
> as long as you have memory-based /dev you need devfsd even if it is called 
> differently.
>
I have not looked at it myself, but as far as I have it, you do not
mount /dev, and just need udev/hotplug/libsysfs (not sure on libsysfs).
Currently udev still call mknod, but I think Greg said he will fix that
in the future.
Regards,
-- 
Martin Schlemmer
[unhandled content-type:application/pgp-signature]