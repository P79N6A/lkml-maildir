Date: Wed, 17 Oct 2001 11:36:40 -0700
From: Chip Salzenberg <>
Subject: [PATCH] 2.4.13pre3: &i_mapping used where i_mapping needed
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/10/17/93

In 2.4.13pre3, mm/filemap.c:mincore_page() sets an address_space
pointer to &inode->i_mapping.  This is almost surely an error, because
i_mapping is already a pointer.
A minimal patch is attached.
-- 
Chip Salzenberg               - a.k.a. -              <chip@pobox.com>
 "We have no fuel on board, plus or minus 8 kilograms."  -- NEAR tech
Index: linux/mm/filemap.c
--- linux/mm/filemap.c.old	Tue Oct 16 23:29:08 2001
+++ linux/mm/filemap.c	Wed Oct 17 00:26:37 2001
@@ -2449,5 +2449,5 @@
 {
 	unsigned char present = 0;
-	struct address_space * as = &vma->vm_file->f_dentry->d_inode->i_mapping;
+	struct address_space * as = vma->vm_file->f_dentry->d_inode->i_mapping;
 	struct page * page, ** hash = page_hash(as, pgoff);
 