Date: Mon, 10 Oct 2005 16:36:48 -0700
From: Andrew Morton <>
Subject: Re: [PATCH] Use of getblk differs between locations
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/10/10/218

Anton Altaparmakov <aia21@cam.ac.uk> wrote:
>
>  > Maybe the best solution is neither one nor another. Testing and failing
>  > gracefully seems better.
>  > 
>  > What do you think?
> 
>  I certainly agree with you there.  I neither want a deadlock nor 
>  corruption.  (-:
Yup.  In the present implementation __getblk_slow() "cannot fail".  It's
conceivable that at some future stage we'll change __getblk_slow() so that
it returns NULL on an out-of-memory condition.  Anyone making such a change
would have to audit all callers to make sure that they handle the NULL
correctly.
It is appropriate at this time to fix the callers so that they correctly
handle the NULL return.  However, it is non-trivial to actually _test_ such
changes, and such changes should be tested.  Or at least, they should be
done with considerable care and knowledge of the specific filesystems.  
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/