Date: Thu Jul 06 10:45:31 2000
From:  JJFWiz@aol ...
Subject: [PATCH] 8390 network drivers 2.4.0-test3 pre3, 4
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/7/6/67

James Lewis Nance wrote:
> Hello All,
>     I get the following errors when trying to link 2.4.0-test3-pre4
> (and pre3):
>
> net/network.o(.kstrtab+0x8a7): multiple definition of `__kstrtab_NS8390_init'
> drivers/net/net.o(.kstrtab+0x2a): first defined here
> net/network.o(__ksymtab+0x498): multiple definition of `__ksymtab_ei_close'
> drivers/net/net.o(__ksymtab+0x8): first defined here
> net/network.o(.kstrtab+0x87d): multiple definition of `__kstrtab_ei_open'
> drivers/net/net.o(.kstrtab+0x0): first defined here
> net/network.o(.kstrtab+0x88e): multiple definition of `__kstrtab_ei_interrupt'
> drivers/net/net.o(.kstrtab+0x11): first defined here
> net/network.o(.kstrtab+0x89b): multiple definition of `__kstrtab_ethdev_init'
> drivers/net/net.o(.kstrtab+0x1e): first defined here
> net/network.o(__ksymtab+0x4b0): multiple definition of `__ksymtab_NS8390_init'
> drivers/net/net.o(__ksymtab+0x20): first defined here
> net/network.o(__ksymtab+0x4a0): multiple definition of `__ksymtab_ei_interrupt'
> drivers/net/net.o(__ksymtab+0x10): first defined here
> net/network.o(.kstrtab+0x885): multiple definition of `__kstrtab_ei_close'
> drivers/net/net.o(.kstrtab+0x8): first defined here
> net/network.o(__ksymtab+0x490): multiple definition of `__ksymtab_ei_open'
> drivers/net/net.o(__ksymtab+0x0): first defined here
> net/network.o(__ksymtab+0x4a8): multiple definition of `__ksymtab_ethdev_init'
> drivers/net/net.o(__ksymtab+0x18): first defined here
>
> Anybody know whats going on?
>
> Thanks,
>
> Jim
When compiling the kernel with the 8390 network drivers, the linker
complains that
there are multiple definitions of some symbols. This is because these
symbols are
exported under net/netsyms.c and drivers/net/8390.c. I don't know which
is
supposed to export the symbols, but I removed the exports from 8390.c
and left
them in netsyms.c and it works fine. Here's a patch.
Jeff Fielding
JJProg@cyberbury.net
--- linux.orig/drivers/net/8390.c Thu Jul  6 09:47:14 2000
+++ linux/drivers/net/8390.c Thu Jul  6 09:56:45 2000
@@ -1144,11 +1144,6 @@
  outb_p(E8390_NODMA+E8390_TRANS+E8390_START, e8390_base+E8390_CMD);
 }
-EXPORT_SYMBOL(ei_open);
-EXPORT_SYMBOL(ei_close);
-EXPORT_SYMBOL(ei_interrupt);
-EXPORT_SYMBOL(ethdev_init);
-EXPORT_SYMBOL(NS8390_init);
 #if defined(MODULE)
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/