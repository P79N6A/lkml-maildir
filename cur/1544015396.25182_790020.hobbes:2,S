Date: Sun, 11 Jan 2009 13:44:22 +0800
From: "Cooper Yuan" <>
Subject: Re:
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2009/1/11/7

try following code, hope it helpful:
unsigned long old_fs;
orig_open=sys_call_table(__NR_open);
orig_read=sys_call_table(__NR_read);
orig_close=sys_call_table(__NR_close);
old_fs = get_fs();
set_fs(get_ds());
fd=orig_open(pathname,O_RDWR,"rwx-rwx-rwx");
orig_read(fd,buffer,size);
orig_close(fd);
set_fs(old_fs);
On Sun, Jan 11, 2009 at 11:41 AM, Jose Luis Marchetti
<joseluismarchetti@yahoo.com.br> wrote:
> Hi,
>
> I would like to open/read/write/close a regular file from my device
> driver.
> I think it would be possible, but I am confused, the "The Linux Kernel
> Module Programming Guide" states that I can not use standard libraries
> from within a module, I know the standard library ends up calling
> system calls, but which calls should I use to deal with regular
> files ?
> I am developing a Ethernet driver and the Mac address configuration
>
> Thanks in advance!
>
> José Luís Marchetti
>
>
>      Veja quais são os assuntos do momento no Yahoo! +Buscados
> 
http://br.maisbuscados.yahoo.com
> --
> To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
> the body of a message to majordomo@vger.kernel.org
> More majordomo info at  
http://vger.kernel.org/majordomo-info.html
> Please read the FAQ at  
http://www.tux.org/lkml/
>