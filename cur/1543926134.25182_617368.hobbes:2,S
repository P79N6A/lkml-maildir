Date: Wed, 14 Nov 2007 15:05:22 +0100
From: Ernst Herzberg <>
Subject: Re: [BUG] pcmcia serial_cs no interrupts
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/11/14/184

Am Dienstag, 13. November 2007 18:52:01 schrieb Alan Cox:
> On Tue, 13 Nov 2007 17:55:25 +0100
>
> Ernst Herzberg <list-lkml@net4u.de> wrote:
> > This pcmcia-card (UMTS Modem) only works if it shares his interrupt with
> > another device, eg an usb mice. Moving the mice increases the connection
> > speed, unplugging hangs the connection.
>
> Thats consistent with the card not generating interrupts, or the
> interrupts being misrouted. The serial driver polls the interrupt pending
> bits on the chip so the actual serial chip is clearly expecting
> interrupts to go somewhere. Given this seems to be card not laptop
> specific it looks like there is magic intiialisation gloop required by
> this chipset that we don't have.
>
> > At the moment this card is my only way to reach the internet, but here in
> > the hospital i have a lot time to test patches;)
>
> You may want to boot with irqpoll that may help a bit.
>
> Some info at:
>
> A helpful start would be to know if the setserial command (applied to
> whatever tty your system calls the card) helps as given in:
>
> 
https://bugs.launchpad.net/ubuntu/
+source/pcmciautils/+bug/99479
Thanks. So far i have checked:
2.6.15.X does not work. Same problen there: no shared irq, no umts (only to 
make shure..). Never will try an older kernel than 2.6.24 from now on;-)
The setserial command itself does not change anything. But the combination of 
irqpoll and "setserial /dev/modem baud_base 460800 spd_warp low_latency"
allows the card to function on a lonesome interrupt even with usable speed.
But the card itself does not generate any interrupt at all during that 
time. /proc/interrupts counts up two on a physical insert of the card, one 
with a "pccardctl insert 0" or a physical remove, a "pccardctl eject 0" 
counts zero.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/