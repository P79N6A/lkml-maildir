Date: Fri, 29 Oct 1999 11:19:13 +0530
From: Vivek K S <>
Subject: problems with vmalloc
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/10/29/34

Hi,                                                                             
    I am writing a character pseudo device driver, which has to allocate large  
chunks of memory in reponse to ioctls, copy a large buffer from user space to   
kernel space, perform lots of mathematical computation on the buffer and then   
copy it back into user space. The sizes are too large for kmalloc.              
The program behaves perfectly well if kmalloc is used for smaller sized         
buffers. However, I get Oops, when vmalloc is used. It is not very consistent,  
but the stack trace of Oops shows that either a copy_from_user is responsible   
or a do_IRQ is resposnsible. Is there a problem when using copy_from / copy_to  
with vmalloced buffers. My typical buffer size varies from 100k to 512k.        The kernel I am using is 2.2.10.
Thanx in advance,                                                               
Vivek                                                                           
-- 
Vivek K S (ksvivek@novell.com), Ph: +91-80-5721856 (Ext. 3041)
Novell India Development Centre, Bangalore 560068
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/