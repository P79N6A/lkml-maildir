Date: Sun, 10 Apr 2005 16:18:01 +0200
From: Felix Palmen <>
Subject: Re: unregister_netdevice(): negative refcnt, suggest patch against 2.6.11
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/4/10/60

* Felix M. Palmen <fmp@palmen.homeip.net> [20050410 11:16]:
> So I assume there is a problem in the appletalk code, but I didn't try
> reproducing that on other systems so far.
I've now tested this issue on a vanilla 2.6.11.7 kernel. I only applied
my own patch from the previous post so that I am able to shut down the
computer cleanly. So I did the following:
- boot 2.6.11.7
- create a tap device with 'openvpn --mktun --dev tap0'
- create /etc/netatalk/atalkd.conf with a single line 'tap0'
- launch atalkd, wait.
- stop atalkd.
- destroy tap device with 'openvpn --rmtun --dev tap0'
refcnt was -256, very strange.
Would you consider my patch harmful? I intend using it for now, because
otherwise, my system won't shut down cleanly any more...
Greets, Felix
PS: Please CC replies to me.
-- 
 | /"\   ASCII Ribbon   | Felix M. Palmen (Zirias)    
http://zirias.ath.cx/
 |
 | \ / Campaign Against | fmp@palmen.homeip.net      encrypted mail welcome |
 |  X    HTML In Mail   | PGP key: 
http://zirias.ath.cx/pub.txt
             |
 | / \     And News     | ED9B 62D0 BE39 32F9 2488 5D0C 8177 9D80 5ECF F683 |
[unhandled content-type:application/pgp-signature]