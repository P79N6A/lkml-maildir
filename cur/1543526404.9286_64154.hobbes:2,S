Date: Fri, 18 Feb 2000 14:51:07 +0100 (MET)
From: Geert Uytterhoeven <>
Subject: Re: [PATCH 2.3.x] IDE probe fix
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/2/18/120

On Fri, 18 Feb 2000, Richard Zidlicky wrote:
> > This patch fixes a compile problem on m68k, where ide_ioreg_t is typedef'd as
> > `unsigned char *'.
> 
> the patch makes sense regardless of whether ide_ioreg_t is int or pointer
> type.
> 
> OTOH is there any specific reason we must have it as 'char *' on m68k?
> The inb,outb macros should be slightly redesigned for m68k, the Q40
> has an ISA bus so I need inb() etc to work the same way they work for 
> other archs.
Cfr. my comment in drivers/block/ide-proc.c:
 * BTW, IMHO the main remaining portability problem with the IDE driver 
 * is that it mixes IO (ioport) and MMIO (iomem) access on different platforms.
 * 
 * I think all accesses should be done using
 * 
 *     ide_in[bwl](ide_device_instance, offset)
 *     ide_out[bwl](ide_device_instance, value, offset)
 * 
 * so the architecture specific code can #define ide_{in,out}[bwl] to the
 * appropriate function.
Gr{oetje,eeting}s,
						Geert
--
Geert Uytterhoeven ------------- Sony Software Development Center Europe (SDCE)
Geert.Uytterhoeven@sonycom.com ------------------- Sint-Stevens-Woluwestraat 55
Voice +32-2-7248638 Fax +32-2-7262686 ---------------- B-1130 Brussels, Belgium
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/