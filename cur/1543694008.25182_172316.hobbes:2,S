Date: Mon, 13 Oct 2003 09:02:22 -0700
From: Tom Rini <>
Subject: Re: PPC & 2.6.0-test3: wrong mem size & hang on ifconfig
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/10/13/117

On Fri, Oct 10, 2003 at 12:20:56PM +0300, Meelis Roos wrote:
> > > 1. Network interface is detected correctly but first ifconfig command
> > > (even if it fails because of wrong arguments) hangs the machine. This is
> > > with both tulip driver (new io+mmio or mmio or just plain pio, 3 modes
> > > tried) and de4x5 driver (the card is a onboard 21140).
> > >
> > > 2. 2.4 detects full 64M of RAM, 2.6 detects only 32M of RAM.
> >
> > Interesting.  Can you try the linuxppc_2_4_devel
> > (
http://penguinppc.org/dev/kernel.shtml
) tree and let me know if that
> > finds 32mb or 64mb of RAM?
> 
> Yesterday I got the machine back from production use and tried to
> compile it. It did not compile for my configuration. I also tried
> 2.6.0-test6 that I had cheked out, it made no difference, still only 32M
> RAM and hang on ifconfig eth0 up.
> 
> make[2]: Entering directory `/home/mroos/compile/linuxppc_2_4_devel/arch/ppc/mm'
> gcc -D__KERNEL__ -I/home/mroos/compile/linuxppc_2_4_devel/include -Wall -Wstrict-prototypes -Wno-trigraphs -O2 -fno-strict-aliasing -fno-common -fomit-frame-pointer -I/home/mroos/compile/linuxppc_2_4_devel/arch/ppc -fsigned-char -msoft-float -pipe -ffixed-r2 -Wno-uninitialized -mmultiple -mstring   -nostdinc -iwithprefix include -DKBUILD_BASENAME=init  -c -o init.o init.c
> init.c:47:22: mmu_decl.h: No such file or directory
That's not right.  Did you do a 'bk -r get -q' or equivalent?  Or is
this the rsync version?
> Here is my .config for linuxppc-2.4-devel:
Works for me.
-- 
Tom Rini
http://gate.crashing.org/~trini/
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/