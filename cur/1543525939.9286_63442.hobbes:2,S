Date: Tue, 15 Feb 2000 12:28:24 -0800 (PST)
From: David Dyck <>
Subject: pre-patch-2.3.46-1 and hda: lost interrupt (non SMP)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/2/15/135

I tried pre-patch-2.3.46-1 yesterday, after having
backtracked to 2.3.40 for a while.
After having the system run for about 23 hours I again
(as I did with 2.3.41-4) saw hda: lost interrupt.
As others have said:
  The 'system' locked up (even pressing the Num Lock
  key didn't light up the keyboard NumLock indicator)
I could still ping in, but I couldn't telnet to it.
After resetting the machine I got the
  hda: lost interrupt
during fsck time
I rebooted back to 2.3.40 and the fsck went through fine,
and then booted back into 2.3.46
I must humbly state that I still haven't taken the advice
for Andre Hedrick <andre@suse.com> (The Linux ATA/IDE guy)
and moved my second drive to the other disk controller.  
    (He said: You need to split the Maxtor WDC pair before you corrupt
    your FS!!!!)
It's still
 hda: Maxtor 86480D6, ATA DISK drive
 hdb: WDC AC32100H, ATA DISK drive
 hdc: NEC CD-ROM DRIVE:28B, ATAPI CDROM drive
I've been using this setup for
almost a year, and have only seen these problems with 2.4.41+
I'd really like to understand: 
  why it is so serious to 'mix' IDE drives, and
    Perhaps explain why Andre said: "since the ASIC timing modes on the
    Maxtor are better than that of the WDC, and it is the faster drive,
    the error is minor." and "One should never mix a UDMA Maxtor with
    DMA WDC, the chatter of the timings will kill."
    Is there another work around (like some boot options...)
  why did this problem just start to show up with the new kernels?
hdparm -i /dev/hda /dev/hdb
/dev/hda:
 Model=Maxtor 86480D6, FwRev=NAVX171F, SerialNo=L60HDP9A
 Config={ Fixed }
 RawCHS=13328/15/63, TrkSize=0, SectSize=0, ECCbytes=20
 BuffType=3(DualPortCache), BuffSize=256kB, MaxMultSect=16, MultSect=off
 DblWordIO=no, maxPIO=2(fast), DMA=yes, maxDMA=2(fast)
 CurCHS=13328/15/63, CurSects=12594960, LBA=yes, LBAsects=12594960
 tDMA={min:120,rec:120}, DMA modes: mword0 mword1 mword2 
 IORDY=on/off, tPIO={min:120,w/IORDY:120}, PIO modes: mode3 mode4 
/dev/hdb:
 Model=WDC AC32100H, FwRev=22.06N56, SerialNo=WD-WT335
 Config={ HardSect NotMFM HdSw>15uSec SpinMotCtl Fixed DTR>5Mbs FmtGapReq }
 RawCHS=4092/16/63, TrkSize=57600, SectSize=600, ECCbytes=22
 BuffType=3(DualPortCache), BuffSize=128kB, MaxMultSect=16, MultSect=off
 DblWordIO=no, maxPIO=2(fast), DMA=yes, maxDMA=0(slow)
 CurCHS=4092/16/63, CurSects=4124736, LBA=yes, LBAsects=4124736
 tDMA={min:120,rec:120}, DMA modes: mword0 mword1 *mword2 
 IORDY=on/off, tPIO={min:160,w/IORDY:120}, PIO modes: mode3 mode4 
hdparm /dev/hda /dev/hdb
/dev/hda:
 multcount    =  0 (off)
 I/O support  =  0 (default 16-bit)
 unmaskirq    =  0 (off)
 using_dma    =  0 (off)
 keepsettings =  0 (off)
 nowerr       =  0 (off)
 readonly     =  0 (off)
 readahead    =  8 (on)
 geometry     = 784/255/63, sectors = 12594960, start = 0
/dev/hdb:
 multcount    =  0 (off)
 I/O support  =  0 (default 16-bit)
 unmaskirq    =  0 (off)
 using_dma    =  0 (off)
 keepsettings =  0 (off)
 nowerr       =  0 (off)
 readonly     =  0 (off)
 readahead    =  8 (on)
 geometry     = 1023/64/63, sectors = 4124736, start = 0
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/