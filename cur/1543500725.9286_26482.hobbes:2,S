Date: Sun, 27 Jun 1999 09:49:16 -0400
From: Paul Barton-Davis <>
Subject: Re: VFS event hooks
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/6/27/42

It doesn't feel comfortable disagreeing with Linus when he has said "I
will not ...", but even so it seems to me that using poll() for this
purpose is wrong. 
the semantics that were being discussed were at the VFS level, and
poll is part of the implementation of a specific file system.
when i think about this, the purpose of the event notification is not
to tell you what changed, but that a change occured. figuring out what
happened in detail requires that the FS support some inquiry method,
but the notification that someone called write() with a given
descriptor is something that i think should exist at a level above the
individual FS's: ie. VFS.
one could argue that a three-step process is inefficient
(ie. kernel->user "change occured"; user->kernel "what happened ?";
kernel->user "event type XXXX"). However, given that write(), unlink()
and ioctl() are the only (?) system calls that can alter the contents of a
file, its not hard to avoid this by providing hooks for each one.
this has all kinds of nice potential uses, particularly with ioctl()
support. 
--p (echoes of scheduler activations ringing around here ...)
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/