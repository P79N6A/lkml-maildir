Date: Sat, 01 Oct 2005 08:48:14 -0700
From: Alex Romosan <>
Subject: Re: [PATCH] missing ifdef in mod_devicetable.h for 2.6.14-rc3
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/10/1/56

Arjan van de Ven <arjan@infradead.org> writes:
> On Sat, 2005-10-01 at 08:03 -0700, Alex Romosan wrote:
>> this was introduced in rc1 and is still present in rc3. without the
>> patch below i can't compile alsa cvs.
>
>
> while our patch isn't wrong... makes me wonder if alsa cvs has a bug in
> their makefiles ...
>
well, it could be that their check is wrong:
AC_TRY_COMPILE([
#define __KERNEL__
#include <linux/config.h>
#include <linux/pci.h>
],[
        int (*func)();
        func = pci_set_consistent_dma_mask;
],
    AC_MSG_RESULT("yes");pci_consistent_defined="1",
    AC_MSG_RESULT("no");pci_consistent_defined="0",
    AC_MSG_RESULT("unknown");pci_consistent_defined="0"
)
notice the '#define __KERNEL__'. this gives:
/usr/src/linux/include/linux/mod_devicetable.h:186:15: error: #if with no expression
replacing the above with '#define __KERNEL__ 1' (there and in a
million other places where this happens) solves the problem.
--alex--
-- 
| I believe the moment is at hand when, by a paranoiac and active |
|  advance of the mind, it will be possible (simultaneously with  |
|  automatism and other passive states) to systematize confusion  |
|  and thus to help to discredit completely the world of reality. |
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/