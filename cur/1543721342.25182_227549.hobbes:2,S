Date: Wed, 16 Jun 2004 03:17:43 +0200
From: Bernd Eckenfels <>
Subject: How to turn off IPV6 (link local)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/6/15/256

On Wed, Jun 16, 2004 at 08:16:31AM +0800, Trent Lloyd wrote:
> Ahh, i see, however you would have to set autoconf to off then *remove*
> the link-local addresses, because they are setup before that variable is
> changed? [or is there an option for this in the kernel? afaik its just
> in proc (sysctl)]
you can set net.ipv6.conf.defaul.autoconf=0 and then up the interface. This
will prevent it from getting any  announced prefixes, but it wont prevent it
from getting linklocal prefix.
So my idea is, that autoconf=0 will prevent it from getting linklocal and
advertised adddresses and accept_ra=0 will prevent it from getting announced
prefixes.
> That said, the link-local addresses are *NOT* the issue here, and having
> them will not cause said problems, the problem here is the user has 4
> real world IPv6 addresses configured by a router on his network + user
> configuration (the 6to4 address).
Well, the user does not have them now anymore and Mozilla uses the
link-local. However I agree with you, that it might not help to remove
(prevent autoconfgration) because mozilla still might suceed in AF_INET6
binding and try the connect w/o failback.
> Check out 
http://www.sixlabs.org/talks/,
 in my IPv6 programming talk I
> have code showing how to use getaddrinfo() and try each address until
> one suceeds.
There is btw an additional issue with sending AAAA requests on a host which
is not fully configured for ipv6. In fact I think we should disable to
compile ipv6 into the kernel, its so painfull to turn the AF off.
Greetings
Bernd
-- 
  (OO)      -- Bernd_Eckenfels@MÃ¶rscher_Strasse_8.76185Karlsruhe.de --
 ( .. )      ecki@{inka.de,linux.de,debian.org}  
http://www.eckes.org/
  o--o     1024D/E383CD7E  eckes@IRCNet  v:+497211603874  f:+497211606754
(O____O)  When cryptography is outlawed, bayl bhgynjf jvyy unir cevinpl!
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/