Date: Thu, 21 Apr 2005 19:26:11 +0530
From: Nagesh Sharyathi <>
Subject: Kdump Testing
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/4/21/113

Hi,
I tested the kdump tool on x235 and x206 machines and found this problem 
where on kernel Panic, system instead of booting into the panic kernel 
jumps into BIOS and machine restarts.
(I have given the hardware specifications at the bottom of the mail)
Software:
- 2.6.12-rc2-mm1
- kexec-tools-1.101 
- Five kdump user space patches 
  [http://marc.theaimsgroup.com/?l=linux-kernel&m=111201661400892&w=2]
Test Procedure:
- Built first kernel for 1M location with CONFIG_KEXEC enabled.
- Booted into first kernel with command line options crashkernel=48M@16M.
- Built second kernel for 16M location with CONFIG_CRASH_DUMP, and 
  CONFIG_PROC_VMCORE enabled.
- Loaded second kernel with following kexec command.
  kexec -p vmlinux-16M --args-linux --crash-dump --append="root=<root-dev>
  init 1"
- Inserted a module or echo into sysrq-trigger to invoke panic.
- System jumps  into BIOS directly instead of booting into secondary 
kernel.
Summary Observation:
- Earlier I was able to make kdump work on x330 machine by removing 
maxcpus=1 (as specified in kdump.txt) option during loading panic kernel, 
through kexec tool. But this work around doesn't seems to work with the 
hardware x235 and x206. On kernel panic machine jumps to BIOS rather than 
to panic kernel without displaying any error message.
HARDWARE SPECIFICATIONS
------------
A) Hardware  x330: 
- SMP, 2way, Pentium III (Coppermine) 1 GHz, 1.3G RAM
- Network Interface (e100)
- Disk I/O
  SCSI storage controller: Adaptec Ultra160 
-----------
B)Hardware x235
- SMP, 2way, Xeon TM 2.8GHz, 1.5g RAM
- Network Interface (Tigon3)
- Disk I/O
  SCSI storage controller: IBM Serve RAID
-------------
C)Hardware x206
- SMP, 1way, Pentium IV 2.8GHz, 2g RAM
- Network Interface (e1000)
- Disk I/O
  SCSI storage controller: Adaptec Ultra320
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/