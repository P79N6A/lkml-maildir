Date: Wed, 10 Sep 2003 09:38:23 +1000
From: Eyal Lebedinsky <>
Subject: Re: Linux 2.6.0-test5: CONFIG_PCMCIA_WL3501 build fails
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/9/9/305

Linus Torvalds wrote:
> 
> On Tue, 9 Sep 2003, Russell King wrote:
> 
> > On Tue, Sep 09, 2003 at 10:12:11PM +1000, Eyal Lebedinsky wrote:
> > > allmodconfig, i386:
> > >
> > >   CC [M]  drivers/net/wireless/wl3501_cs.o
> > > drivers/net/wireless/wl3501_cs.c: In function `wl3501_mgmt_join':
> > > drivers/net/wireless/wl3501_cs.c:641: unknown field `id' specified in
> > > initializer
> >
> > I notice that this driver uses .foo.bar = baz type initialisers.  These
> > do not work on gcc 2.95 (and last time I checked, the kernels minimum
> > compiler version was still 2.95.x)
> 
> Yeah, the ".foo.bar = baz" thing should go. Something like the following,
> but it would be good to have somebody verify that this was all of it and
> that it actually works.
You should also then patch __FUNCTION__ to comply with 2.95 gcc.
--
Eyal Lebedinsky (eyal@eyal.emu.id.au) <
http://samba.org/eyal/>
--- linux/drivers/net/wireless/wl3501_cs.c.old	Wed Sep 10 09:32:49 2003
+++ linux/drivers/net/wireless/wl3501_cs.c	Wed Sep 10 09:30:49 2003
@@ -82,7 +82,7 @@
 MODULE_PARM(pc_debug, "i");
 #define dprintk(n, format, args...) \
 	{ if (pc_debug > (n)) \
-		printk(KERN_INFO "%s: " format "\n", __FUNCTION__, ##args); }
+		printk(KERN_INFO "%s: " format "\n", __FUNCTION__ , ##args); }
 #else
 #define dprintk(n, format, args...)
 #endif