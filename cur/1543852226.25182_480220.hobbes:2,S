Date: Wed, 8 Nov 2006 00:39:38 +0100
From: Ingo Molnar <>
Subject: Re: [PATCH 2.6.19 5/5] fs: freeze_bdev with semaphore not mutex
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/11/7/314

* Andrew Morton <akpm@osdl.org> wrote:
> If so, it's a bit sad to switch to semaphore just because of some 
> errant debugging code.  Perhaps it would be better to create a new 
> mutex_unlock_stfu() which suppresses the warning?
the code was not using semaphores as a pure mutex thing. For example 
unlocking by non-owner is not legal. AFAICS the code returns to 
userspace with a held in-kernel mutex. That makes it hard for the kernel 
to determine for example whether the lock has been 'forgotten', or kept 
like that intentionally. Alasdair, what is the motivation for doing it 
like that?
	Ingo
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/