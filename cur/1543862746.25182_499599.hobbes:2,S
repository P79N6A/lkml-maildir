Date: Wed, 17 Jan 2007 01:15:48 +0100
From: Juergen Beisert <>
Subject: Re: fix typo in geode_configre()@cyrix.c
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/1/16/283

On Tuesday 09 January 2007 16:43, Lennart Sorensen wrote:
> On Tue, Jan 09, 2007 at 06:41:56PM +0900, takada wrote:
> > In kernel 2.6, write back wrong register when configure Geode processor.
> > Instead of storing to CCR4, it stores to CCR3.
> >
> > --- linux-2.6.19/arch/i386/kernel/cpu/cyrix.c.orig	2007-01-09
> > 16:45:21.000000000 +0900 +++
> > linux-2.6.19/arch/i386/kernel/cpu/cyrix.c	2007-01-09 17:10:13.000000000
> > +0900 @@ -173,7 +173,7 @@ static void __cpuinit geode_configure(vo
> >  	ccr4 = getCx86(CX86_CCR4);
> >  	ccr4 |= 0x38;		/* FPU fast, DTE cache, Mem bypass */
> >
> > -	setCx86(CX86_CCR3, ccr3);
> > +	setCx86(CX86_CCR4, ccr4);
> >
> >  	set_cx86_memwb();
> >  	set_cx86_reorder();
>
> Any idea what the consequence of this would be?  Any chance that while
> fixing this file anyhow, adding a missing variant could be done?
Writing back of ccr4 should be intented here, but also writing back the ccr3 
to disable the MAPEN again. So both are required. But the ccr4 first:
   setCx86(CX86_CCR4, ccr4);
   setCx86(CX86_CCR3, ccr3);
Juergen
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/