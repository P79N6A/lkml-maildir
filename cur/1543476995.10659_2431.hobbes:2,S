Date: Mon, 11 Jan 1999 23:27:43 +0100
From: Jens Axboe <>
Subject: Re: 2.0.pre37-4: SCSI crash
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/1/12/23

Hans-Joachim Baader wrote:
> 
> Hi,
> 
> I cannot boot this version on my server. When doing the partition check,
> it writes the following:
> 
> Partition check:
>  sda: sda1 sda2 sda4 < sda5 sda6 sda7 >
>  sdb:
> 
> and then oopses with a kernel NULL pointer (if the exact register dump
> is important, I can reproduce it).
This could be the xlate_1024 bug again, I suppose. Lookup the eip value
and see if that is it. Then change (line ~3405)
	if ((drive = get_info_ptr(i_rdev)) == NULL || drive->forced_geom) {
		/*
		 * Update the current 3D drive values.
		 */
		drive->id->cur_cyls	= drive->bios_cyl;
to something like:
	if ((drive = get_info_ptr(i_rdev)) == NULL)
		return 0;
	if (drive->forced_geom) {
		/*
		 * Update the current 3D drive values.
		 */
		drive->id->cur_cyls	= drive->bios_cyl;
-- 
*  Jens Axboe <axboe@image.dk>
*  Linux CD-ROM Maintainer
* "The only thing that interferes with my
*  learning is my education." -- A. Einstein
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/