Date: 27 Nov 2002 18:07:03 -0800
From: Jeremy Fitzhardinge <>
Subject: Re: [Ext2-devel] Re: [NFS] htree+NFS (NFS client bug?)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/11/27/234

On Wed, 2002-11-27 at 07:00, Stephen C. Tweedie wrote:
> The dump looks problematic, but I'm not sure whether it's a client or
> a server problem.
> 
> Frame 6 is a READDIR reply, ending with 
>     Entry: file ID 294052, name vg_include.h~51-kill-inceip
>         Cookie: 1611747420
>     Entry: file ID 298407, name vg_libpthread.vs
>         Cookie: 1611747420
>     Value Follows: No
>     EOF: 1
> 
> Now, this final frame has EOF = 1, so the client should not be looking
> for any more data after it.  If the client _does_ try to progress,
> though, it will use that final cookie for the next request, and will
> naturally find the results already in cache so will repeat the final
> chunk of directory entries.
Hm, I just did a run with 8k NFS packets, and the results are slightly
different.  There's only a single READDIR reply, fragmented over 3 IP
packets.  vg_include.h~51-kill-inceip still has a cookie of 1611747420,
and vg_libpthread.vs is still the last entry returned, but it has a
cookie of 0.  As far as I can see, all the other cookies are unique.
Trace attached.
	J
[unhandled content-type:application/x-gzip]