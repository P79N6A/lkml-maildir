Date: Tue, 29 Apr 2008 16:21:42 -0600
From: Matthew Wilcox <>
Subject: Re: [LTP/VFS] fcntl SETLEASE fails on ramfs/tmpfs
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/4/29/670

On Tue, Apr 29, 2008 at 01:54:54PM -0700, Andrew Morton wrote:
> I guess we should make the generic_setlease() heuristic smarter.
> 
> Of course the _reason_ for that heuristic is uncommented and lost in time. 
> And one wonders what locking prevents it from being totally racy, and if
> "none", what happens when the race hits.  Sigh.
It's hardly "lost in time" when you can ask the original author.
If there are multiple processes with this file open, you can't place a
lease on it.
-- 
Intel are signing my paycheques ... these opinions are still mine
"Bill, look, we understand that you're interested in selling us this
operating system, but compare it to ours.  We can't possibly take such
a retrograde step."