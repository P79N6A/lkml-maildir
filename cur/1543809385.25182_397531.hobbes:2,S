Date: Wed, 15 Feb 2006 00:13:39 -0800
From: Paul Jackson <>
Subject: Re: [PATCH] Cpuset: oops in exit on null cpuset fix
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/2/15/51

Andrew wrote:
> Seems strange to patch the kernel for this.  Can't the add-on patch do it? 
> Or can we just move the cpuset_exit()s to later in the exit() paths?
Sure, the add-on could have handled it, or had its exit routine
called earlier, or had cpuset_exit called later, ...
But it would still have been an accident waiting to happen again,
when someone adds another hook, or gets the order in cpuset_exit
wrong, or some such.
Heck, for all I know, your *-mm kernel might even have such a
bug now (before you took this patch).  Perhaps there was some
code path that would try to allocate memory after the cpuset_exit
call, and no one has hit on that path yet.
This patch was a zero runtime cost way to reduce the risks.  With
this patch, a task doesn't have a blackout period, shortly before
exit, when memory allocations will oops the kernel.
-- 
                  I won't rest till it's the best ...
                  Programmer, Linux Scalability
                  Paul Jackson <pj@sgi.com> 1.925.600.0401
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/