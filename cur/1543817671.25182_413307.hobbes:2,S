Date: Mon, 03 Apr 2006 18:25:21 +1000
From: Keith Owens <>
Subject: [patch 2.6.17-rc1] Reinstate const in next_thread()
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/4/3/92

Before commit 47e65328a7b1cdfc4e3102e50d60faf94ebba7d3, next_thread()
took a const task_t.  Reinstate the const qualifier, getting the next
thread never changes the current thread.
Signed-off-by: Keith Owens <kaos@sgi.com>
Index: linux/include/linux/sched.h
===================================================================
--- linux.orig/include/linux/sched.h	2006-04-03 18:20:22.000000000 +1000
+++ linux/include/linux/sched.h	2006-04-03 18:20:36.309150547 +1000
@@ -1205,7 +1205,7 @@ extern void wait_task_inactive(task_t * 
 
 #define thread_group_leader(p)	(p->pid == p->tgid)
 
-static inline task_t *next_thread(task_t *p)
+static inline task_t *next_thread(const task_t *p)
 {
 	return list_entry(rcu_dereference(p->thread_group.next),
 				task_t, thread_group);
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/