Date: Sat, 27 Mar 2004 10:28:28 +0000
From: Jamie Lokier <>
Subject: Re: [PATCH] cowlinks v2
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/3/27/15

Eric W. Biederman wrote:
> It is easy to add something like a cowstat or a readcowlink and teach
> the few programs that care (i.e. diff, tar,...) how to use it.  So I
> would rather concentrate on making cow links look like a separate copy
> than early optimizations.
I agree, having each cowlink look like a separate copy, with separate
inode numbers, is best.  That _is_ POSIX compatible -- the sharing is
just a storage optimisation, and programs which only use the POSIX API
won't see the difference.
I have no problem with adding cowstat() to diff, and I'm sure other
people will eventually extend rsync and tar to use it, if it becomes
widely used.
It's not the simplest solution, though.  The filesystem changes are
non-trivial.  (The simplest solution is just an ext2 attribute which
says you can't write to the file if it has >1 links).
-- Jamie
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/