Date: Sun, 7 Nov 1999 22:00:35 -0500 (EST)
From: "Mike A. Harris" <>
Subject: PPP devices given eth0 IP address upon connect.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/11/8/117

Some time ago, I was trying to configure a dialup firewall with
PPP, and was having some trouble with the IP address that ppp was
getting.  I strongly believe this to be a kernel bug, and so I
would like some feedback from the appropriate people please.
The problem is that when the PPP interface came up, the dynamic
IP address given from the ISP end was *NOT* the IP address that
the PPP interface used but rather PPP was using the IP address
of the ETHERNET interface!
This problem was and is replicable. It happens with 2.0.x, 2.2.x
kernels.  All testing that has taken place is using the proper
required tools for the given kernel (ie: pppd version), and the
2.0 tests were on RedHat 5.2, while the 2.2 tests are on RedHat
6.0).
Here are the details of the problem:
The local ethernet card, is configured to 10.1.1.1/24.  The
entire network is configured using a CIDR netmask of 24 bits, and
works perfectly.
When PPP is brought up using "ifup ppp0" from RedHat, the
internet connection is established to the ISP, the debugging info
shows the ISP's assigned IP address which is all proper.  At this
point, doing "ifconfig" shows that ppp0 is using the IP address
for the ETHERNET interface, and NOT THE ONE GIVEN FROM THE ISP!
Here is the wild part:  If I reconfigure this machine to use an
IP address of 192.168.1.40/24, and put it on another LAN that
uses that network instead - EVERYTHING works.  No change to ppp
configuration, and it works fine.  It connects to the internet,
gets an IP, and just simply works.
Change the IP address to 10.x.x.x, and reconfigure the box to use
that IP range instead, and PPP takes over the IP address of the
eth0 device upon connection.
I have done some research on this, and I have now found that
other people are having the problem too.  Someone else has found
that using an IP address with a "0" in it appears to cause this
too.  The IP that they are using is 192.168.0.10.
This is a very strange problem indeed.  I believe it is kernel
related, and would like some help to try and track down the
problem if possible.  It could also be a possible bug in pppd I
suppose, so any help with that would also be appreciated.
What could POSSIBLY cause a ppp interface to take over an
ethernet interface's IP address upon connection and IP
negotiation?
Any help greatly appreciated.
TTYL
--
Mike A. Harris                                     Linux advocate     
Computer Consultant                                  GNU advocate  
Capslock Consulting                          Open Source advocate
Join the FreeMWare project - the goal to produce a FREE program in
which you can run Windows 95/98/NT, and other operating systems.
                    
http://www.freemware.org
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/