Date: Thu, 8 Aug 2002 13:26:44 +0200 (CEST)
From: "laurent.hivet" <>
Subject: fbcon.c with 1024 x 768 linux_logo.h
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/8/8/65

Hello all,
i'm a very newbie to kernel mailing list for reporting bug.
I use kernel 2.4.19, on SMP pentium III (2 cpu).
I get a panic kernel after booting and before inint script.
I used fblogo-0.4 to get a nice image at startup. I replaced
include/linux/linux_logo.h, and modified fbcon.c with LOGO_H 768 and
LOGO_W 1024.
With previous kernel (2.4.16 ??) not pb.
i decided to use Dan_Boals@Phoenix.com patch:
--- 2.4.19/drivers/video/fbcon.c	Mon Jun 24 16:00:12 2002
+++ 2.4.19/drivers/video/fbcon.c	Mon Jun 24 15:26:18 2002
@@ -688,21 +688,22 @@
     	    	scr_memcpyw(r + step, r, conp->vc_size_row);
     	    	r -= old_cols;
     	    }
     	    if (!save) {
 	    	conp->vc_y += logo_lines;
     		conp->vc_pos += logo_lines * conp->vc_size_row;
     	    }
     	}
     	scr_memsetw((unsigned short *)conp->vc_origin,
 		    conp->vc_video_erase_char,
-		    conp->vc_size_row * logo_lines);
+		    old_cols * logo_lines);
+
     }
     /*
      *  ++guenther: console.c:vc_allocate() relies on initializing
      *  vc_{cols,rows}, but we must not set those if we are only
      *  resizing the console.
      */
     if (init) {
 	conp->vc_cols = nr_cols;
 	conp->vc_rows = nr_rows;
and now all work fine !!
Can someone (maintener but who ?) can verify if this patch is ok and apply
it to fbcon.c in official stable (2.4.x) kernel tree ?
Best Regards.
Laurent HIVET
laurent.hivet@wanadoo.fr
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/