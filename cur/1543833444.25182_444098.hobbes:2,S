Date: Fri, 14 Jul 2006 03:39:44 +0900
From: OGAWA Hirofumi <>
Subject: Re: confusion and case problems: utf8 <-> iocharset
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/7/13/259

Eduard Bloch <edi@gmx.de> writes:
> The trouble:
>
> First, the terminology in vfat.txt is not consistent with what actually
> happens. It says "iocharset" but in fact it is not a charset used for IO
> operations, it does not stand for charset at all but for the mapping of
> encodings. The better name should be "visible_encoding", IMO.
> And in the kernel setup, why do I need a separate "VFAT_IOCHARSET"
> option? Why should I not use the systemwide settings, AFAICS that change
> is relevant for what the users see and this thing should be consistent
> across all mounted filesystems. So why do I need a separate kernel
> setting here? Questions over questions.
Probably, you want to use "utf8" systemwidely. But, you shouldn't use
utf8 for vfat, because it's breaking. The main reason is this.
> Second: 
> there is the "utf8" option. How does that exactly differ from
> iocharset=utf8? There is not clear explanation in vfat.txt. What happens
> if you use both options, especially if iocharset!=utf8? Which one is
> prefered?
iocharset=utf8 doesn't have a case conversion table.
utf8 option is similar to iocharset=utf8, but utf8 uses case
conversion table of iocharset=xxx. But, there is a known bug.
> Third:
> how can I disable all that funny letter case conversions? They are not
> described anywhere properly, nor the way to disable them. IMO there are
> two problems:
>
>  - what you write to the FS is not the same what "ls" shows you later.
>    Eg. ABW becomes "abw" but "ABWÖ" becomes "ABWÖ". Abcd becomes "Abcd"
>    but "ABC" becomes "abc".  Does it make sense? NO.
>    I would like to stop the kernel playing such games, I had enough of
>    such trouble back in my Windows 98 times.
Probably, you want to use shortname=xxx option.
>  - this case conversion can actually break things. When iocharset=utf-8
>    and utf8 are used, then you cannot access the data with the same
>    name after storing it.
Yes, it's a known bug.
-- 
OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/