Date: Fri, 25 Jul 2003 20:19:14 -0700
From: Andrew Morton <>
Subject: Re: another must-fix: major PS/2 mouse problem
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/7/25/268

Albert Cahalan <albert@users.sourceforge.net> wrote:
>
> I hope you don't consider a 100 Mb/s PCI device to be
> a nasty old NIC. It's not an NE2000 you know! I have this:
Sorry, I got my boomerangs and vortices mixed up. Vortex is the ancient one.
> I added code to the top and bottom of do_IRQ, as well as to
> the top and bottom of boomerang_interrupt. The lockmeter was
> compiled into the kernel but never enabled. I record the
> minimum and maximum time in microseconds.
> 
> -------------------------------
> IRQ    num use      min     max
> --- ------ -------- --- -------   
>   0 746770 timer     40  103595
>   1    936 i8042     13  389773
>   2      0 cascade    -       -
>   3      - -          -       -
>   4      9 serial    28      56
>   5      0 uhci-hcd   -       -
>   6      - -        711     711
>   7      - -         25      25
>   8      - -          -       -
>   9      - -          -       -
>  10      - -          -       -
>  11   2417 eth0      87 1535331
>  12     60 i8042     18  102895
>  13      - -          -       -
>  14  13844 ide0       8   51944
>  15      2 ide1       7      11 
But did your instrumentation account for nested interrupts?  What happens
if a slow i8042 interrupt happens in the middle of a 3c59x interrupt?
Still, that probably doesn't account for the stalls.
I don't know what does account for it, frankly.  You could try dropping the
2.4 driver into the 2.5 tree just to verify that it is not a driver
problem.  The driver has hardly changed at all.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/