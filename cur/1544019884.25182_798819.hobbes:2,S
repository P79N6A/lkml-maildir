Date: Thu, 29 Jan 2009 18:42:03 -0500
From: Mathieu Desnoyers <>
Subject: LTTng 0.88 adds dynamic instrumentation support (kprobes)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2009/1/29/454

Hi,
LTTng 0.88 and LTTV 0.12.9 now support dynamic kernel instrumentation
with kprobes through a simple /mnt/debugfs/ltt/kprobes/ interface.
Usage example :
ltt-armall
echo do_fork > /mnt/debugfs/ltt/kprobes/enable
lttctl -C -w /tmp/trace trace
(so something)
lttctl -D trace
lttv -m textDump -e event.name=kernel.kprobe -t /tmp/trace
Trace set contains 1 traces
kernel.kprobe: 2486.393516120 (/tmp/trace/kernel_2), 0, 0, , , 0, 0x0,
    MODE_UNKNOWN { ip = FFFFFFFF8023CDC0 }
kernel.kprobe: 2489.826739495 (/tmp/trace/kernel_2), 25527, 25527, bash,
    , 25526, 0x0, SYSCALL { ip = FFFFFFFF8023CDC0 [do_fork+0x0/0x3e0] }
kernel.kprobe: 2491.618955019 (/tmp/trace/kernel_6), 25527, 25527, bash,
    , 25526, 0x0, SYSCALL { ip = FFFFFFFF8023CDC0 [do_fork+0x0/0x3e0] }
End trace set
Enable, disable and list operations are availables to manipulate the
active LTTng kprobes.
LTTV 0.12.9 adds support to print the symbol names along with the
kprobes addresses.
Mathieu
-- 
Mathieu Desnoyers
OpenPGP key fingerprint: 8CD5 52C3 8E3C 4140 715F  BA06 3F25 A8FE 3BAE 9A68