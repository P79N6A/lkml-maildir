Date: Mon, 26 Jun 2006 22:51:49 +0200
From: Arjan van de Ven <>
Subject: Re: [PATCH] riport LADAR driver
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/6/26/367

> +#define RIPORT_DEBUG
> +
> +#undef pr_debug
> +#ifdef RIPORT_DEBUG
> +#  define pr_debug(fmt, args...) printk( KERN_DEBUG "riport: " fmt, ## args)
> +#else	/*  */
> +#  define pr_debug(fmt, args...)
> +#endif	/*  */
ehhhhh that's not what I meant... if you would just remove these 6
lines.. then sure..
> +	if (!request_region(io + ECP_OFFSET, 3, "riport")) {
> +		release_region(io,3);
> +
> +		pr_debug("request_region 0x%X of 3 bytes fails\n", io + ECP_OFFSET );
> +		*presult = -EBUSY;
> +		goto fail_io2;
this is a double release..
> +
> +fail_dev:
> +	release_region(io + ECP_OFFSET,3);
> +fail_io2:
> +	release_region(io,3);
with this.
> +	current->state = TASK_RUNNING;
please use set_current_state() API for this
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/