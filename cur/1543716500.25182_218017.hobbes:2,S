Date: Mon, 3 May 2004 11:54:25 -0600
From: Andreas Dilger <>
Subject: Re: [Ext2-devel] [CHECKER] warnings in fs/ext3/namei.c (2.4.19) where disk read errors get ignored, causing non-empty dir to be deleted
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/5/3/86

On May 03, 2004  19:33 +0200, JÃ¶rn Engel wrote:
> On Mon, 3 May 2004 10:16:06 -0600, Andreas Dilger wrote:
> > If that's what you want, then mount the filesystem with "errors=remount-ro"
> > and you will get it.  You can even mount it with "errors=panic" so that the
> > node reboots and does a full fsck immediately.  For users that have a few
> > bad blocks on their disk and can't afford to throw the whole disk away this
> > is a reasonable course of action.
> 
> Ok, "errors=remount-ro" is good enough for me.  For the record, do
> non-historic disks with a few bad blocks still exist?  I though the
> driver firmware already detected those and used spare blocks at one
> side of the disk as a replacement.  Nicely visible when sequential
> read performance over the whole disk has a few non-continuous spots.
AFAIK, even modern disks will only remap blocks at write time and not
at read time.  That is why it is possible to get an IO error, but when
someone runs e.g. "badblocks" on the disk they are confused when it
doesn't report any errors.
Things like allowing the directory to be removed when there is a read
error actually helps such situations because when the block is re-used
it will first be written to and that will cause the remapping to happen.
Otherwise you have this useless directory that you don't want and can't
remove.  It doesn't help anyone to refuse removing it.
Cheers, Andreas
--
Andreas Dilger
http://sourceforge.net/projects/ext2resize/
http://www-mddsp.enel.ucalgary.ca/People/adilger/
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/