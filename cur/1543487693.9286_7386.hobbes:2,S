Date: Fri, 26 Feb 1999 21:41:03 +0000
From: Adrian Bridgett <>
Subject: oopses when violently (dis)connecting broken Zip
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/2/27/20

All three oopses typed by hand so there maybe quite a few typos even though
I've tried to be careful.
I have a "click of death" zip drive so crashing the kernel the only thing
it's good for.
What I did:
Plugged everything together and insert Zip disk. Wait a few seconds for the
clicking to stop.  mounting _will_ fail, so:
  dd if=/dev/sda of=/dev/null bs=512 count=10
whilst this is busy clicking away, remove power from Zip. restore power,
pull power, pull cable (and possibly plug cable and power back in)
1st oops (partially off the screen):
Options used: -V (default)
              -o /lib/modules/2.2.2-ac1/ (default)
              -k /proc/ksyms (default)
              -l /proc/modules (default)
              -m /boot/System.map-2.2.2-ac1 (specified)
              -c 1 (default)
EIP:    0010:[<00000000>] 
EFLAGS: 00010046 
eax: 00000000   ebx: c2cac200   ecx: 00000005   edx: c5db6000 
esi: 00000000   edi: c008e9a0   ebp: 00000003   esp: c01a5f10 
ds: 0018   es: 0018   ss: 0018 
Process swapper (pid: 0, process nr: 0, stackpage=c01a5000) 
Stack: c2cac200 00000282 00000001 c01a5f48 c680eef8 c2cac200 00000003 c2cac200  
       c680eeb0 c010f9c1 c2cac200 00000005 c01bffd4 00000000 c01a5f60 c0115e75  
       00000000 c01a4000 00017d2f c0108be9 00001000 c0107adc 00000000 c01a4000  
Call Trace: [<c680eef8>] [<c680eeb0>] [<c010f9c1>] [<c0115e75>] [<c0108be9>] [<c0107adc>] [<c010626d>]
       [<c0106000>] [<c0106290>] [<c0107a40>] [<c0106000>] [<c010607b>] [<c0106000>] [<c0100176>]
>>EIP: 00000000 Before first symbol
Trace: c680eef8 <scsi_old_times_out+48/11c>
Trace: c680eeb0 <scsi_old_times_out+0/11c>
Trace: c010f9c1 <timer_bh+2e9/330>
Trace: c0115e75 <do_bottom_half+49/64>
Trace: c0108be9 <do_IRQ+39/40>
Trace: c0107adc <ret_from_intr+0/20>
Trace: c010626d <cpu_idle+5d/6c>
Trace: c0106000 <get_options+0/74>
1 warning issued.  Results may not be reliable.
2nd oops had occured:
Options used: -V (default)
              -o /lib/modules/2.2.2-ac1/ (default)
              -k /proc/ksyms (default)
              -l /proc/modules (default)
              -m /boot/System.map-2.2.2-ac1 (specified)
              -c 1 (default)
current->tss.cr3 = 00101000, %cr3 = 00101000 
*pde = 00000000 
Oops: 0000 
CPU:    0 
EIP:    0010:[<c0107ebf>] 
EFLAGS: 00010082 
eax: 00000000   ebx: 00000000   ecx: 00000005   edx: c5db6000 
esi: c0100176   edi: c01a6000   ebp: c6800000   esp: c01a5e54 
ds: 0018   es: 0018   ss: 0018 
Process swapper (pid: 0, process nr: 0, stackpage=c01a5000) 
Stack: c01a4000 c0195224 c01afcda 00000000 c008e9a0 00000003 00000000 c2cac200  
       00000005 c5db6000 00000000 00010046 c6800000 c7000000 c0107f20 c01a5ed4  
       c0182f94 c0183e89 00000000 00000000 c010ceba c0183e89 c01a5ed4 00000000  
Call Trace: [<c6800000>] [<c7000000>] [<c0107f20>] [<c0182f94>] [<c0183e89>] [<c010ceba>] [<c0183e89>]
       [<c0107b45>] [<c680f7eb>] [<c680eef8>] [<c680eeb0>] [<c010f9c1>] [<c0115e75>] [<c0108be9>] [<c0107adc>]
       [<c010626d>] [<c0106000>] [<c0106290>] [<c0107a40>] [<c0106000>] [<c010607b>] [<c0106000>] [<c0100176>]
Code: 0f b6 0c 03 89 4c 24 38 51 68 8c 2f 18 c0 e8 36 97 00 00 83  
>>EIP: c0107ebf <show_registers+26b/29c>
Trace: c6800000 <_end+6635b28/663eb74>
Trace: c7000000 <END_OF_CODE+778084/????>
Trace: c0107f20 <die+30/38>
Trace: c0182f94 <stext_lock+cf0/1c6c>
Trace: c0183e89 <stext_lock+1be5/1c6c>
Trace: c010ceba <do_page_fault+2c6/318>
Trace: c0183e89 <stext_lock+1be5/1c6c>
Trace: c0107b45 <error_code+2d/34>
Trace: c010626d <cpu_idle+5d/6c>
Code:  c0107ebf <show_registers+26b/29c>       00000000 <_EIP>:
Code:  c0107ebf <show_registers+26b/29c>          0:	0f b6 0c 03    	movzbl (%ebx,%eax,1),%ecx
Code:  c0107ec3 <show_registers+26f/29c>          4:	89 4c 24 38    	movl   %ecx,0x38(%esp,1)
Code:  c0107ec7 <show_registers+273/29c>          8:	51             	pushl  %ecx
Code:  c0107ec8 <show_registers+274/29c>          9:	68 8c 2f 18 c0 	pushl  $0xc0182f8c
Code:  c0107ecd <show_registers+279/29c>          e:	e8 36 97 00 00 	call   9749 <_EIP+0x9749> c0111608 <printk+0/174>
Code:  c0107ed2 <show_registers+27e/29c>         13:	83 00 00       	addl   $0x0,(%eax)
Aiee, killing interrupt handler.
Kernel panic: Attempted to kill the idle task!
In swapper task - not syncing.
Rebooted. Trying to recreate that first oops, things went pear shapped, so I
did SysRq-i (by mistake), then SysRq-u (remount readonly):
SysRq: Emergency Remount R/O.
Remounting device 03:06 ... Scheduling in interrupt:
(third oops)
Options used: -V (default)
              -o /lib/modules/2.2.2-ac1/ (default)
              -k /proc/ksyms (default)
              -l /proc/modules (default)
              -m /boot/System.map-2.2.2-ac1 (specified)
              -c 1 (default)
current->tss.cr3 = 00101000, %cr3 = 00101000 
*pde = 00000000 
Oops: 0002
CPU:    0 
EIP:    0010:[<c010ee1a>] 
EFLAGS: 00010282 
eax: 00000018   ebx: c01a4000   ecx: 00000005   edx: c5d5c000 
esi: c01ae000   edi: c5ea6e60   ebp: c01a5d1c   esp: c01a5d10 
ds: 0018   es: 0018   ss: 0018 
Process swapper (pid: 0, process nr: 0, stackpage=c01a5000) 
Stack: c01a5d34 c5ea6e60 00000000 c01a4000 c012327d 00000007 c4dfc200 00000001
       00000000 co1a4000 c5ea6e8c c0123451 c5ea6e60 00000306 00000306 c01a4000  
       c0195224 c01a0306 c0195224 00000000 c5ea6e60 c01234d1 00000306 00000001  
Call Trace: [<c012327d>] [<c0123451>] [<c01234d1>] [<c0172ac6>] [<c0172bae>] [<c011138e>] [<c0114d8c>]
       [<c018461c>] [<c0107f28>] [<c0182f94>] [<c0183e89>] [<c010ceba>] [<c0183e89>] [<c0100176>] [<c6800000>]
       [<c0107b45>] [<c0100176>] [<c6800000>] [<c0107ebf>] [<c6800000>] [<c7000000>] [<c0107f20>] [<c0182f94>]
       [<c0183e89>] [<c010ceba>] [<c0183e89>] [<c0107b45>] [<c680f7eb>] [<c680eef8>] [<c680eeb0>] [<c010f9c1>]
       [<c0115e75>] [<c0108be9>] [<c0107adc>] [<c01061fd>] [<c010624f>] [<c0106000>] [<c0106290>] [<c0107a40>]
       [<c0106000>] [<c010607b>] [<c0106000>] [<c0100176>]
Code: c7 05 00 00 00 00 00 00 00 00 8d 65 f0 5b 5e 5f 89 ec 5d c3  
>>EIP: c010ee1a <schedule+24a/260>
Trace: c012327d <__wait_on_buffer+89/c4>
Trace: c0123451 <sync_buffers+199/1cc>
Trace: c01234d1 <fsync_dev+25/2c>
Trace: c0172ac6 <go_sync+72/114>
Trace: c0172bae <do_emergency_sync+46/9c>
Trace: c011138e <panic+c6/c8>
Trace: c0114d8c <do_exit+40/274>
Trace: c018461c <tvecs+70c/5060>
Trace: c0107b45 <error_code+2d/34>
Trace: c0183e89 <stext_lock+1be5/1c6c>
Trace: c0115e75 <do_bottom_half+49/64>
Trace: c0106000 <get_options+0/74>
Code:  c010ee1a <schedule+24a/260>             00000000 <_EIP>:
Code:  c010ee1a <schedule+24a/260>                0:	c7 05 00 00 00 	movl   $0x0,0x0
Code:  c010ee1f <schedule+24f/260>                5:	00 00 00 00 00 
Code:  c010ee24 <schedule+254/260>                a:	8d 65 f0       	leal   0xfffffff0(%ebp),%esp
Code:  c010ee27 <schedule+257/260>                d:	5b             	popl   %ebx
Code:  c010ee28 <schedule+258/260>                e:	5e             	popl   %esi
Code:  c010ee29 <schedule+259/260>                f:	5f             	popl   %edi
Code:  c010ee2a <schedule+25a/260>               10:	89 ec          	movl   %ebp,%esp
Code:  c010ee2c <schedule+25c/260>               12:	5d             	popl   %ebp
Code:  c010ee2d <schedule+25d/260>               13:	c3             	ret    
Aiee, killing interrupt handler.
Kernel panic: Attempted to kill the idle task!
In swapper task - not syncing.
I'm more than happy to try things - a broken zip is alot cheaper than a
broken SCSI disk :-)
Cheers
Adrian
email: adrian.bridgett@zetnet.co.uk, 
http://www.poboxes.com/adrian.bridgett
Windows NT - Unix in beta-testing.   PGP key available on public key servers
Avoid tiresome goat sacrifices  -=-  use Debian Linux 
http://www.debian.org
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/