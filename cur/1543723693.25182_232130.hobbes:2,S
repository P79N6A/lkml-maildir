Date: Sun, 4 Jul 2004 11:55:26 -0500
From: Eric <>
Subject: Re: Strange DMA timeouts
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/7/4/77

On Sunday 04 July 2004 11:35 am, you wrote:
> Hi
>
> I keep getting these DMA timeouts under heavy harddrive load, ex. when
> unpacking big tarballs, transfering from USB harddrive etc.
More info needed. Please provide kernel version, dmesg, lspci,lsmod to start. 
You most certainly wont get any help without this info. Provide harddrive 
manufacturer USB 2.0? USB 1.1? 
> hda: dma_timer_expiry: dma status == 0x21
> hda: DMA timeout error
> hda: dma timeout error: status=0xd0 { Busy }
>
> hda: DMA disabled
> ide0: reset: success
>
> Is this a sign of harddisk failure or could this be a kernel problem?
If it would help the maintainers I also had this problem, or a related 
problem, with 2.6.5-gentoo-r1. Whenever I was ripping CD's to MP3 via KDE's 
copy paste from the audiocd ioslave, I could get a few CD's in before this 
would happen. However, if I did two CD's at a time it would almost always 
happen before either CD was done.
Furthermore I think there may be a memory leak on that codepath, because 
whenever it would reset the bus, my free memory would drop to about 69M (of 
1GB, usually 700-800 free) and my system would swap alot. A little bit after 
the DMA Disabled and ATAPI reset my machine would hang hard. However, if I 
didnt rip CD's that day and it didnt go into swapping, my machine runs 
perfectly fine.
Since I have switched to 2.6.7-gentoo-r8 and have no more CD's to rip 
unfortunatly so I don't know if an upgrade has solved my problem.
	 If this sounds like a kernel bug  or related to the original poster I can 
try to reproduce it and give more info. Sorry if its unrelated or has been 
fixed, then just ignore my message.
> Thanks.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/