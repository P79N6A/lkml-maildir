Date: Thu, 8 Jul 1999 08:58:39 -0700
From: Ted Deppner <>
Subject: Re: need multiple e2fsck runs
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/7/8/51

On Thu, Jul 08, 1999 at 02:00:18PM +0200, Rogier Wolff wrote:
> Harald Koenig wrote:
> > last night I got another ext2 fs corruption with 2.2.10 which showed up
> > in syslog first with many
> > Free blocks count wrong for group #235 (2175, counted=2176).
> > Free blocks count wrong for group #235 (2176, counted=2175).
> > Free blocks count wrong for group #89 (96, counted=97).
> > Free blocks count wrong for group #89 (97, counted=96).
> 
> It seems that there are bits falling over in memory on your
> machine. So fsck counts the bits in a bitmap block, and comes one
> short. THen it erroneously corrects the master count, and corrects
> the miscorrection on the next run.
> 				Roger.
I've seen this type of stuff happen from IDE drives running too fast (DMA
problems), from bad cables on IDE (longer than 18"), and from poorly terminated
scsi busses (especially Adaptec).
Harald, I'd suggest giving the following a try.  If you don't get the same
sums each time, you've got a hardware problem... whether drive, cable, 
controller, or bad memory is left as an excerise to the reader.  :)
dd if=/dev/sda bs=1024k count=400 | md5sum
# read 400mb off the disk, give us a checksum
Run that 3 or more times.  If the sums change you may have a problem.  This
works best on unmounted drives of course.
PS:  I had an IDE drive on a 24" cable that I could e2fsck all day long and 
it never got fixed.  Just before throwing the whole machine out the window 
I did a md5sum check, and a few minutes later determined the problem.
PPS:  A friend of mine ran a Quake2 server from an Adaptec SCSI controller.
The checksums the Quake2 server does of it's maps (to determine hacked player
maps) kept coming up wrong.  md5sum verified a machine problem, and not a
bad install of Quake.
-- 
Ted Deppner
ted@psyber.com
http://www.psyber.com
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/