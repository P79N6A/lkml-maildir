Date: Fri, 01 Feb 2008 10:06:51 -0800
From: "H. Peter Anvin" <>
Subject: Re: [PATCH] x86: sparse errors from string_32.h
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/2/1/351

Ingo Molnar wrote:
> * Harvey Harrison <harvey.harrison@gmail.com> wrote:
> 
>>  		case 1:
>> -			*(unsigned char *)s = pattern;
>> +			*(unsigned char *)s = pattern & 0xff;
> 
> i've applied your fix - but wouldnt it be cleaner to just cast the 
> pattern variable to unsigned char instead?
> 
Even better, since we're talking about fixed bytes, I suggest writing it as:
	*(u8 *)s = (u8)pattern;
Much more compact and the intent is a little bit more obvious.
	-hpa