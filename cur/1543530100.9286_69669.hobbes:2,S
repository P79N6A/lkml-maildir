Date: Wed, 15 Mar 2000 00:16:39 -0800 (PST)
From: Peter Blomgren <>
Subject: [2.3.99-pre1] compile breaks in drivers/char/drm/init.c
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/3/15/192

Hi,
Compilation of 2.3.99-pre1 breaks down in drivers/char/drm/init.c
for UP builds, something to do with spinlocks...  SMP builds fine.
=== The errors ===  (No patch, sorry)
make[4]: Entering directory `/usr/src/linux/drivers/char/drm'
gcc -D__KERNEL__ -I/usr/src/linux/include -Wall -Wstrict-prototypes -O2 -fomit-frame-pointer -pipe   -m386 -DCPU=386 -fno-strict-aliasing   -c -o init.o init.c
In file included from drmP.h:53,
                 from init.c:32:
/usr/src/linux/include/asm/spinlock.h:36: warning: `SPIN_LOCK_UNLOCKED' redefined
/usr/src/linux/include/linux/spinlock.h:51: warning: this is the location of the previous definition
/usr/src/linux/include/asm/spinlock.h:38: warning: `spin_lock_init' redefined
/usr/src/linux/include/linux/spinlock.h:54: warning: this is the location of the previous definition
/usr/src/linux/include/asm/spinlock.h:46: warning: `spin_unlock_wait' redefined
/usr/src/linux/include/linux/spinlock.h:58: warning: this is the location of the previous definition
/usr/src/linux/include/asm/spinlock.h:47: warning: `spin_is_locked' redefined
/usr/src/linux/include/linux/spinlock.h:56: warning: this is the location of the previous definition
/usr/src/linux/include/asm/spinlock.h:101: warning: `spin_trylock' redefined
/usr/src/linux/include/linux/spinlock.h:57: warning: this is the location of the previous definition
/usr/src/linux/include/asm/spinlock.h:128: warning: `RW_LOCK_UNLOCKED' redefined
/usr/src/linux/include/linux/spinlock.h:114: warning: this is the location of the previous definition
/usr/src/linux/include/asm/spinlock.h:159: warning: `read_unlock' redefined
/usr/src/linux/include/linux/spinlock.h:118: warning: this is the location of the previous definition
/usr/src/linux/include/asm/spinlock.h:160: warning: `write_unlock' redefined
/usr/src/linux/include/linux/spinlock.h:120: warning: this is the location of the previous definition
In file included from drmP.h:53,
                 from init.c:32:
/usr/src/linux/include/asm/spinlock.h:26: conflicting types for `spinlock_t'
/usr/src/linux/include/linux/spinlock.h:50: previous declaration of `spinlock_t'
/usr/src/linux/include/asm/spinlock.h:73: parse error before `void'
/usr/src/linux/include/asm/spinlock.h:88: parse error before `do'
/usr/src/linux/include/asm/spinlock.h:118: conflicting types for `rwlock_t'
/usr/src/linux/include/linux/spinlock.h:113: previous declaration of `rwlock_t'
/usr/src/linux/include/asm/spinlock.h:141: parse error before `void'
/usr/src/linux/include/asm/spinlock.h:150: parse error before `void'
make[4]: *** [init.o] Error 1
make[4]: Leaving directory `/usr/src/linux/drivers/char/drm'
make[3]: *** [first_rule] Error 2
make[3]: Leaving directory `/usr/src/linux/drivers/char/drm'
make[2]: *** [_subdir_drm] Error 2
make[2]: Leaving directory `/usr/src/linux/drivers/char'
make[1]: *** [_subdir_char] Error 2
make[1]: Leaving directory `/usr/src/linux/drivers'
make: *** [_dir_drivers] Error 2
-- 
\Peter.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/