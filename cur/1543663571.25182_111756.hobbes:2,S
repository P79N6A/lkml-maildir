Date: Sat, 22 Feb 2003 14:42:11 +0100
From: (Malware)
Subject: [PATCH] [m68k] mach_default_handler not always tested against NULL
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/2/22/52

# This is a BitKeeper generated patch for the following project:
# Project Name: Linux kernel tree
# This patch format is intended for GNU patch command version 2.5 or higher.
# This patch includes the following deltas:
#	           ChangeSet	1.757.40.1 -> 1.757.40.2
#	arch/m68k/kernel/ints.c	1.2     -> 1.3    
#
# The following is the BitKeeper ChangeSet Log
# --------------------------------------------
# 03/02/22	malware@debian.malware.de	1.757.40.2
# ints.c:
#   Fix: Check mach_default_handler before using it.
# --------------------------------------------
#
diff -Nru a/arch/m68k/kernel/ints.c b/arch/m68k/kernel/ints.c
--- a/arch/m68k/kernel/ints.c	Sat Feb 22 13:29:15 2003
+++ b/arch/m68k/kernel/ints.c	Sat Feb 22 13:29:15 2003
@@ -175,7 +175,8 @@
 		printk("%s: Removing probably wrong IRQ %d from %s\n",
 		       __FUNCTION__, irq, irq_list[irq].devname);
 
-	irq_list[irq].handler = (*mach_default_handler)[irq];
+	if (mach_default_handler)
+		irq_list[irq].handler = (*mach_default_handler)[irq];
 	irq_list[irq].flags   = 0;
 	irq_list[irq].dev_id  = NULL;
 	irq_list[irq].devname = default_names[irq];
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/