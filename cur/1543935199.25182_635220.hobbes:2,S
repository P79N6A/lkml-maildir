Date: Mon, 7 Jan 2008 10:39:13 -0500 (EST)
From: Alan Stern <>
Subject: Re: [linux-usb-devel] [FEATURE REQUEST] Transparent hot plugging of root file system on portable storage devices.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/7/176

On Sun, 6 Jan 2008, Pavel Machek wrote:
> On Sun 2008-01-06 17:26:17, Alan Stern wrote:
> > On Sun, 6 Jan 2008, Oliver Neukum wrote:
> > 
> > > Am Sonntag 06 Januar 2008 schrieb Alan Stern:
> > > > What about people who want to suspend to RAM instead of hibernating and
> > > > _do_ want to unplug the USB device containing their root filesystem
> > > > while the machine is asleep? 
> 
> Ok, I guess I'm lost here. That sounds like a nice way to do
> self-leg-shooting. Are there such people?
Yes.  People with small systems having extremely limited rw storage (no
swap space), using removable read-only media as their root fs.
You can find the thread leading up to this request here:
http://marc.info/?t=119544588400002&r=1&w=2
> > > Would it be hard to force the persist feature on for a replugged device?
> > 
> > Right now the persist feature is enabled by a per-device boolean flag.  
> > In theory the flag could accept 3 values: off, on if power was lost,
> > or on for any resume transition.  This would not be a hard change.
> 
> But do we need it?
That depends on whom you ask!  :-)
> Did you progress on "usb-storage-autosuspend"?
Yes; the first round of patches will be posted later today.
> Here are my hacks to try to get SATA to survive autosuspend;
> unfortunately they do not work :-(.
You should start off with minimal support for manual runtime suspend
(through a sysfs attribute).  When that's working, autosuspend will be
easier to add in.
Alan Stern