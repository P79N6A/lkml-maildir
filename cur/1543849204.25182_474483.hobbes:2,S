Date: Thu, 19 Oct 2006 01:44:46 -0700
From: Andrew Morton <>
Subject: Re: [Bug 185] Sometimes kernel freezes sometime lists OOPS - hostap_cs
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/10/19/54

On Thu, 19 Oct 2006 10:12:49 +0200
CIJOML <cijoml@volny.cz> wrote:
> it is nsc-ircc:
> 
> nsc-ircc, chip->init
> nsc-ircc, Found chip at base=0x02e
> nsc-ircc, driver loaded (Dag Brattli)
> nsc-ircc, Using dongle: HP HSDL-2300, HP HSDL-3600/HSDL-3610
Well you could try this I suppose...
--- a/drivers/net/irda/nsc-ircc.c~a
+++ a/drivers/net/irda/nsc-ircc.c
@@ -2160,7 +2160,8 @@ static int nsc_ircc_net_open(struct net_
 	
 	iobase = self->io.fir_base;
 	
-	if (request_irq(self->io.irq, nsc_ircc_interrupt, 0, dev->name, dev)) {
+	if (request_irq(self->io.irq, nsc_ircc_interrupt, IRQF_SHARED,
+			dev->name, dev)) {
 		IRDA_WARNING("%s, unable to allocate irq=%d\n",
 			     driver_name, self->io.irq);
 		return -EAGAIN;
@@ -2354,7 +2355,7 @@ static int nsc_ircc_resume(struct platfo
 	nsc_ircc_init_dongle_interface(self->io.fir_base, self->io.dongle_id);
 
 	if (netif_running(self->netdev)) {
-		if (request_irq(self->io.irq, nsc_ircc_interrupt, 0,
+		if (request_irq(self->io.irq, nsc_ircc_interrupt, IRQF_SHARED,
 				self->netdev->name, self->netdev)) {
  		    	IRDA_WARNING("%s, unable to allocate irq=%d\n",
 				     driver_name, self->io.irq);
_
Did this all work under any previous kernel?  If so, which version?
It'd be useful to see the full `dmesg -s 1000000' output for both good and
bad kernels, and /proc/interrupts for the good kernel.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/