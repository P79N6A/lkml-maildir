Date: Sat, 18 Oct 2003 02:34:25 -0400 (EDT)
From: Zwane Mwaikambo <>
Subject: [PATCH][2.6] fix compilation w/o CONFIG_XFRM
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/10/18/11

Index: linux-2.6.0-test8/net/ipv6/sit.c
===================================================================
RCS file: /build/cvsroot/linux-2.6.0-test8/net/ipv6/sit.c,v
retrieving revision 1.1.1.1
diff -u -p -B -r1.1.1.1 sit.c
--- linux-2.6.0-test8/net/ipv6/sit.c	18 Oct 2003 01:37:19 -0000	1.1.1.1
+++ linux-2.6.0-test8/net/ipv6/sit.c	18 Oct 2003 04:13:21 -0000
@@ -377,8 +377,10 @@ static int ipip6_rcv(struct sk_buff *skb
 
 	read_lock(&ipip6_lock);
 	if ((tunnel = ipip6_tunnel_lookup(iph->saddr, iph->daddr)) != NULL) {
+#ifdef CONFIG_XFRM
 		secpath_put(skb->sp);
 		skb->sp = NULL;
+#endif
 		skb->mac.raw = skb->nh.raw;
 		skb->nh.raw = skb->data;
 		memset(&(IPCB(skb)->opt), 0, sizeof(struct ip_options));
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/