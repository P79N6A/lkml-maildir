Date: Wed, 28 Apr 1999 21:06:47 +0200 (CEST)
From: Trond Myklebust <>
Subject: Re: NFS hangs under 2.2.6
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/4/28/77

>>>>> " " == Christoph Lameter <christoph@lameter.com> writes:
     > I looked through the nfs client sources and from what I can
     > remember of the console output it is the loop in
     > linux/fs/nfs/inode.c function nfs_read_inode that is endlessly
     > looping.
     > This is happening to our most important box on campus so we are
     > no too eager to try it again. That box is now running its
     > backup via remote tar.
     > It happens on every backup attempt via NFS. Next time I have
     > some downtime on the box I will try again and might be able to
     > give you more details.
     > The goto loop in nfs_read_inode seems not to have a very clean
     > exit condition. Should it not fail completely after a couple of
     > retries?
I'm lost. On stock linux-2.2.6, we have
static void
nfs_read_inode(struct inode * inode)
{
        inode->i_blksize = inode->i_sb->s_blocksize;
        inode->i_mode = 0;
        inode->i_rdev = 0;
        inode->i_op = NULL;
        NFS_CACHEINV(inode);
        NFS_ATTRTIMEO(inode) = NFS_MINATTRTIMEO(inode);
}
This is just a function for initializing the cached inode, before it
is filled in __nfs_fhget. Are you talking about the latter?
Cheers,
  Trond
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/