Date: Tue, 7 Dec 1999 13:44:23 -0500
From: Sean Goodman <>
Subject: RE: over 5Gb missing from a 13.5Gb disk
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/12/7/88

Hi all,
I've searched for the past three days on-line about this issue,
as I just purchased a 36.2GB Maxtor drive, and came across the
33.8GB limitation due to the short int problem.  I've been
attempting to get Andreas' patch to work, but with no success,
on RedHat 2.2.12.  For one thing, should I be applying this
patch to the original 2.2.12 kernel without the RedHat kernel
mods, or does that not matter.
Another thing is, I'm not 100% sure what I should be doing with
this drive after the patch is installed.  Will fdisk suddenly
ask the kernel for the maximum number of cylinders, and instead
of it being 65535 it will now be higher?  Or is there some
juggling I have to do?
With this patch working for so many people, I can only assume
that it is something I am doing wrong.  I did read the FAQ for
this newsgroup, and hope that this posting isn't incorrect.  If
it is, please point me in the right direction.  At least I never,
ever crosspost.
Thanks in advance,
--Sean Goodman
> In <19991207182051.A17522@win.tue.nl> Guest section DW 
> (dwguest@win.tue.nl) wrote:
> > On Sun, 5 Dec 1999, Kristofer T. Karas wrote:
> 
>  >> Wichert Akkerman wrote:
>  >>
>  >>> I'm having a problem with a new IBM IDE disk I just bought
>  >>> Model=IBM-DJNA-371350, FwRev=J76OA30K, SerialNo=GM0GM088910
>  >>> Config={ HardSect NotMFM HdSw>15uSec Fixed DTR>10Mbs }
>  >>> RawCHS=16383/16/63, TrkSize=0, SectSize=0, ECCbytes=34
>  >>         ^^^^^^^^^^^
>  >>
>  >> There's your problem.  The number of cylinders is here is 
> causing problems, as
>  >> it is clamped to 2^14.  Most BIOSes let you lower this 
> number by increasing the
>  >> number of phony heads to 255.
> 
> > Nonsense.
> 
> Unfortunatelly, not :-((
> 
> > All large disks will show RawCHS=16383/16/63, entirely 
> independent of the
> > BIOS (which is not involved at all). It is the ATA standard.
> 
> Huh ?
> 
> -- cut --
> [root@localhost /root]# hdparm -i /dev/ide/hd/c0b0t0u0
> 
> /dev/ide/hd/c0b0t0u0:
> 
>  Model=IBM-DJNA-371350, FwRev=J76OA30K, SerialNo=GM0GMGL2059
>  Config={ HardSect NotMFM HdSw>15uSec Fixed DTR>10Mbs }
>  RawCHS=26310/16/63, TrkSize=0, SectSize=0, ECCbytes=34
>  BuffType=3(DualPortCache), BuffSize=1966kB, MaxMultSect=16, 
> MultSect=off
>  DblWordIO=no, maxPIO=2(fast), DMA=yes, maxDMA=2(fast)
>  CurCHS=1650/255/63, CurSects=26520480, LBA=yes
>  LBA CHS=825/510/63 Remapping, LBA=yes, LBAsects=26520480
>  tDMA={min:120,rec:120}, DMA modes: mword0 mword1 mword2
>  IORDY=on/off, tPIO={min:240,w/IORDY:120}, PIO modes: mode3 mode4
>  UDMA modes: mode0 mode1 *mode2
> -- cut --
> 
> As you can see RawCHS here is 26310/16/63 and all is working 
> like a charm.
> As I have EXACTLY same model as Wichert (including FwRev and 
> such) I'm pretty
> sure it's something in BIOS and/or recent kernel changes (I'm 
> still using
> 2.2.10ac10)...
> 
> 
> 
> 
> -
> To unsubscribe from this list: send the line "unsubscribe 
> linux-kernel" in
> the body of a message to majordomo@vger.rutgers.edu
> Please read the FAQ at 
http://www.tux.org/lkml/
> 
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/