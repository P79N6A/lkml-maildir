Date: Thu, 30 Mar 2006 22:22:08 +0200
From: Sam Ravnborg <>
Subject: Re: Spurious rebuilds of raid6 and drivers/media/video in 2.6.16
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/3/30/324

On Thu, Mar 30, 2006 at 01:55:55PM +0200, Carl-Daniel Hailfinger wrote:
> Hi,
> 
> if I copy a compiled kernel tree to another location and run
> make again in the new directory, a few files always get rebuilt.
> These files only are rebuilt if the tree is a copy of another
> tree and they are rebuilt only once.
> Any ideas why this is the case?
The reason why the predictive rebuild happens is that in some parts
of the kbuild files it has been necessary to use absolute paths.
One example is the oiu2c shell script where we use the full path
to locate the shell script.
The reason why a full path is used is that this shall also work when
compiling the kernel using make O=...
What happens is that kbuild detects that the command used to build the
target has changed and therefore force a rebuild. It is the same
mechanishm that is used to detect when arguments to the compiler
changes.
So the rebuild will happen. It would be possible to minimize the places
where a rebuild is triggered when moving the source tree, but I have not
seen any benefit doing so lately.
	Sam
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/