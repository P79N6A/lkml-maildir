Date: Tue, 7 Dec 2004 21:58:33 -0800
From: Andrew Morton <>
Subject: Re: [path 2.6] reduce ext3 log spamming (blank lines)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/12/8/8

David Brownell <david-b@pacbell.net> wrote:
>
> When drives go offline, e.g. usb-storage disconnect, the
> upper layers don't behave very intelligently yet:  ext3
> over scsi keeps retrying reads, logging three lines for
> each error:
> 
> 10:58:31  scsi0 (0:0): rejecting I/O to dead device
> 10:58:31  EXT3-fs error (device sda1): ext3_find_entry: reading directory #18089296 offset 0
> 10:58:31  
> 10:58:55  scsi0 (0:0): rejecting I/O to dead device
> ...
> This patch shrinks that log spam by the trivial third, getting
> rid of those needless blank lines.
Thanks.
>  It's not clear to me why
> the "no such device" errors don't immediately make ext3
> (or is it the block layer?) give up ... maybe someone else
> can make Linux not retry after those errors.
It's probably ext3 directory readahead.
We deliberately ignore I/O error when reading directories so that if you
have a bad block in a directory it is still possible to recover files which
are addressed by later blocks.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/