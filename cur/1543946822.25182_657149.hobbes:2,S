Date: Wed, 20 Feb 2008 20:39:22 +0000
From: Alan Cox <>
Subject: [PATCH] 68360serial: Note that there isn't any info->mcr locking
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/2/20/511

Noticed while auditing the code for the BKL elimination project
Signed-off-by: Alan Cox <alan@redhat.com>
diff -u --new-file --recursive --exclude-from /usr/src/exclude linux.vanilla-2.6.25-rc2-mm1/drivers/serial/68360serial.c linux-2.6.25-rc2-mm1/drivers/serial/68360serial.c
--- linux.vanilla-2.6.25-rc2-mm1/drivers/serial/68360serial.c	2008-02-19 11:01:44.000000000 +0000
+++ linux-2.6.25-rc2-mm1/drivers/serial/68360serial.c	2008-02-20 11:52:17.000000000 +0000
@@ -1281,7 +1281,7 @@
 
 	if (tty->flags & (1 << TTY_IO_ERROR))
 		return -EIO;
-
+	/* FIXME: locking on info->mcr */
  	if (set & TIOCM_RTS)
  		info->mcr |= UART_MCR_RTS;
  	if (set & TIOCM_DTR)