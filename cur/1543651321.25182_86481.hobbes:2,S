Date: Sun, 3 Nov 2002 21:11:05 +0100
From: Pavel Machek <>
Subject: Re: swsusp: don't eat ide disks
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/11/3/189

Hi!
> > > Some disks are going to be settint their own power methods too.
> > 
> > Fine with me as long as they call idedisk_suspend() first ;-).
> 
> They may or may not do so depending upon other considerations. The new
> driver layer is supposed to handle suspend/power ordering. If it doesn't
> then it needs fixing. You can't go around hacking weird suspend shit
> into every single block driver for a final system, sure for a prototype
> but not the real thing. No way
Suspend *needs* to touch all drivers.
I do stopping at high levels already (all tasks are put into
refrigerator), but that can still me that DMA on particular driver is
in progress. Only driver itself knows if it is doing any DMA and how
to stop it. I do not see how to do it on upper layers.
[Take for example USB. It is not block device, still it does DMA which
means it has to be stopped.]
								Pavel
-- 
Worst form of spam? Adding advertisment signatures ala sourceforge.net.
What goes next? Inserting advertisment *into* email?
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/