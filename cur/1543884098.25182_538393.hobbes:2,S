Date: Tue, 1 May 2007 13:32:30 -0500 (CDT)
From: (Bob Tracy)
Subject: Re: BAD_SG_DMA panic in aha1542
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/5/1/413

Alan Cox wrote:
> The one I sent has a memory leak but it won't matter for basic testing.
> Or you can change the final bit to
> 
> 
>         scsi_normalize_sense((char *)sense, sizeof(*sense), &sshdr);
> 
>         if (zebedee != cgc->buffer) {
>                 if (cgc->data_direction == DMA_FROM_DEVICE)    
>                         memcpy(cgc->buffer, zebedee, cgc->buflen);
>                 kfree(zebedee); /* Time for bed */        
>         }
I changed it, because I'll be living with this for a while I'd bet...
Works fine.  No more BAD_SG_DMA() calls.  Thanks!
-- 
-----------------------------------------------------------------------
Bob Tracy                   WTO + WIPO = DMCA? 
http://www.anti-dmca.org
rct@frus.com
-----------------------------------------------------------------------
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/