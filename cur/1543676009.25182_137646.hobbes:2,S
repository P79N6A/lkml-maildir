Date: Tue, 3 Jun 2003 20:55:51 +0200
From: Pavel Machek <>
Subject: Re: software suspend in 2.5.70-mm3.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/6/3/199

Hi!
> > > Hi Pavel Machek:
> > > 
> > > I try the 2.5.70-mm3 with software suspend function. When suspend it will oops at ide-disk.c 1526 line
> > >    BUG_ON (HWGROUP(drive)->handler);
> > > 
> > > I'm disable this check, The software suspend can work, and also can resumed. But this fix is not best way. I found in ide-io.c 1196
> > >    hwgroup->handler = NULL;
> > > is the problem.
> > 
> > The only way to make the suspend work properly is to queue the suspend
> > sequence wit the other requests. Ben was doing some playing with this
> > but I'm not sure what happened to it.
> > 
> Yes the above patch is not safe, When i'm run updatedb and suspsned, After resume will oops at kjournal. 
> 
> Here is another test on it, it can works with updatedb.
> -
> I found a best way to fix it. here is it. With the patch, I'm run updatedb and suspend for 5 counts, every things is ok.
> 
Locating Ben's patch and forward-porting 
it would be way better...
-- 
				Pavel
Written on sharp zaurus, because my Velo1 broke. If you have Velo you don't need...
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/