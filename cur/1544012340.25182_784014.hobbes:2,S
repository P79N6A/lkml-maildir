Date: Thu, 25 Dec 2008 13:17:28 -0500
From: "C. Scott Ananian" <>
Subject: Re: [RFC PATCH -v4 00/14] fsnotify, dnotify, and inotify
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/12/25/163

On Mon, Dec 22, 2008 at 6:21 PM, Christoph Hellwig <hch@infradead.org> wrote:
> On Mon, Dec 22, 2008 at 06:08:08PM -0500, C. Scott Ananian wrote:
>> That's not correct, as /proc/self/fd/<num> and the getcwd syscall make
>> clear.
>
> No.  These take a file descriptor into account, which _does_ have a
> unique path.
getcwd doesn't actually hold a file descriptor to the working
directory.  If you reread my message, you'll find that I was explicit
about where the information was stored.
>> struct inode has a i_dentry member, and via its d_parent links
>> you can reconstruct the path, as __d_path in fs/dcache.c does.
>
> reconstruct _a_ path inside the same filesystem, ignoring which link is
> wanted, and inside which mount.
Right.  If you go back and reread my message, I made clear that that
was sufficient.
But Al's question is more relevant, and I'll try to restate the
problem for him, since it's clear that none of the existing *notify
interfaces was written with an eye towards making possible races
easily manageable.
  --scott
-- 
                         ( 
http://cscott.net/
 )