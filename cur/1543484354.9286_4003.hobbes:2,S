Date: Thu, 4 Feb 1999 08:29:32 -0800 (PST)
From: "Adam J. Richter" <>
Subject: Re: A module bug in 2.2.1?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/2/4/100

>From: Justin Hahn <jehahn@raven.bu.edu>
>> 	I just tried "modprobe -s an_unknown_module", and indeed it
>> does try to log the failed request for an unknown module via syslog.
>> If you already have that net-pf-1 line in your /etc/conf.module, you
>> might want to try this:
>> 
>> mv /sbin/modprobe /sbin/modprobe.real
>> cat > /sbin/modprobe << EOF
>> #!/bin/sh
>> echo "$*" >> /tmp/modprobe.log
>> EOF
>> reboot
>> 
>> 	This will put a list of the modules that the kernel is
>> tring to load in /tmp/modprobe.log.
>And reboot everytime you try to load a module. Like say, on boot? Not
>exactly what I'd call a good idea.
>-----------------------------------------------
>  Justin Hahn    	<jehahn@raven.bu.edu>
>Systems Administrator Boston University SPI Lab
>-----------------------------------------------
Reread the script.  The "reboot" command is not part of the
replacement /sbin/modprobe (notice the position of "EOF").
Although, I did need to add "chmod a+x /sbin/modprobe" before
the reboot, but I already mentioned that to HJ in email not cc'ed
to linux-kernel.
Adam J. Richter     __     ______________   4880 Stevens Creek Blvd, Suite 104
adam@yggdrasil.com     \ /                  San Jose, California 95129-1034
+1 408 261-6630         | g g d r a s i l   United States of America
fax +1 408 261-6631      "Free Software For The Rest Of Us."
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/