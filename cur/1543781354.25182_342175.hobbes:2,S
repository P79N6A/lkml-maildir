Date: Mon, 15 Aug 2005 16:22:24 -0500
From: mikem <>
Subject: [PATCH 3/4] cciss 2.4: adds 2 ioctls for ia64 based systems
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/8/15/201

Patch 3/4
This patch adds 2 ioctls required for IPF systems. Without this change
parted may fail. This causes some vendor installs to fail.
Please consider this for inclusion.
Signed-off-by: Mike Miller <mike.miller@hp.com>
 cciss.c |    5 +++++
 1 files changed, 5 insertions(+)
--------------------------------------------------------------------------------
diff -burNp lx2431-p002/drivers/block/cciss.c lx2431/drivers/block/cciss.c
--- lx2431-p002/drivers/block/cciss.c	2005-08-15 15:13:15.484004000 -0500
+++ lx2431/drivers/block/cciss.c	2005-08-15 15:18:32.863755640 -0500
@@ -748,7 +748,12 @@ static int cciss_ioctl(struct inode *ino
 	case BLKELVGET:
 	case BLKELVSET:
 	case BLKSSZGET:
+#ifdef CONFIG_IA64
+        case BLKGETLASTSECT:
+        case BLKSETLASTSECT:
+#endif
 		return blk_ioctl(inode->i_rdev, cmd, arg);
+
 	case CCISS_GETPCIINFO:
 	{
 		cciss_pci_info_struct pciinfo;
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/