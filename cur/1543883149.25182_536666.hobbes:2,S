Date: Sat, 28 Apr 2007 10:14:35 -0700
From: Matt Reimer <>
Subject: Re: [2/2] Driver for the Maxim DS1WM, a 1-wire bus master ASIC core.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/4/28/219

On Apr 28, 2007, at 4:50 AM, Andrew Morton wrote:
> i386 `make allmodconfig' has a few issues.
>
> ERROR: "clk_get" [drivers/w1/masters/ds1wm.ko] undefined!
> ERROR: "clk_put" [drivers/w1/masters/ds1wm.ko] undefined!
> ERROR: "clk_disable" [drivers/w1/masters/ds1wm.ko] undefined!
> ERROR: "clk_enable" [drivers/w1/masters/ds1wm.ko] undefined!
> ERROR: "clk_get_rate" [drivers/w1/masters/ds1wm.ko] undefined!
Attached is a patch to fix this. AFAIK only ARM platforms presently  
use DS1WM and implement linux/clk.h.
Matt
From 61511610faf651adc9d09311f4f054737d1a68d8 Mon Sep 17 00:00:00 2001
From: Matt Reimer <mreimer@vpop.net>
Date: Sat, 28 Apr 2007 10:11:35 -0700
Subject: [PATCH] Make CONFIG_MASTER_DS1WM depend on ARM
Make CONFIG_MASTER_DS1WM depend on ARM as that's apparently the only
other platform that implements linux/clk.h, and as far as I know, is
the only other platform presently using DS1WM.
Signed-off-by: Matt Reimer <mreimer@vpop.net>
---
 drivers/w1/masters/Kconfig |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)
diff --git a/drivers/w1/masters/Kconfig b/drivers/w1/masters/Kconfig
index cad5c54..8f77933 100644
--- a/drivers/w1/masters/Kconfig
+++ b/drivers/w1/masters/Kconfig
@@ -37,7 +37,7 @@ config W1_MASTER_DS2482
 
 config W1_MASTER_DS1WM
 	tristate "Maxim DS1WM 1-wire busmaster"
-	depends on W1
+	depends on W1 && ARM
 	help
 	  Say Y here to enable the DS1WM 1-wire driver, such as that
 	  in HP iPAQ devices like h5xxx, h2200, and ASIC3-based like
-- 
1.5.1.1