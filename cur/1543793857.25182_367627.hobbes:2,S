Date: Wed, 16 Nov 2005 10:21:46 -0800
From: Matt Mackall <>
Subject: Re: [PATCH 7/15] misc: Make x86 doublefault handling optional
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/11/16/226

On Wed, Nov 16, 2005 at 07:13:07AM -0600, Rob Landley wrote:
> On Friday 11 November 2005 02:35, Matt Mackall wrote:
> > This adds configurable support for doublefault reporting on x86
> ...
> > +config DOUBLEFAULT
> > + depends X86
> > + default y if X86
> > + bool "Enable doublefault exception handler" if EMBEDDED
> > + help
> > +          This option allows trapping of rare doublefault exceptions that
> > +          would otherwise cause a system to silently reboot. Disabling
> > this +          option saves about 4k.
> > +
> 
> What causes doublefaults?  Is it triggerable from userspace, or is it 
> something funky the kernel does?
Double faults happen when a fault occurs while entering a fault
handler.
They're extremely rare in the field. In my experience, they only occur
when you've got hardware troubles or are hacking on the fault handling
code. They're rare enough that I showed one to akpm a few months back
and he claimed he'd never seen one before.
If a fault occurs while trying to invoke the double fault handler
(perhaps because you don't have one), you get a triple fault which
causes a reboot. 
> Trying to figure out when it would be worth using this...
Typical usage for this and similar options is in boxes that have no
useful logging or diagnostic facilities.
-- 
Mathematics is the supreme nostalgia of our time.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/