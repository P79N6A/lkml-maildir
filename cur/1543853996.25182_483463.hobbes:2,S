Date: Fri, 17 Nov 2006 10:21:50 -0700
From: "Jim Schutt" <>
Subject: Re: splice/vmsplice performance test results
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/11/17/183

On Thu, 2006-11-16 at 21:25 +0100, Jens Axboe wrote:
> On Thu, Nov 16 2006, Jim Schutt wrote:
> > Hi,
> > 
> > My test program can do one of the following:
> > 
> > send data:
> >  A) read() from file into buffer, write() buffer into socket
> >  B) mmap() section of file, write() that into socket, munmap()
> >  C) splice() from file to pipe, splice() from pipe to socket
> > 
> > receive data:
> >  1) read() from socket into buffer, write() buffer into file
> >  2) ftruncate() to extend file, mmap() new extent, read() 
> >       from socket into new extent, munmap()
> >  3) read() from socket into buffer, vmsplice() buffer to 
> >      pipe, splice() pipe to file (using the double-buffer trick)
> > 
> > Here's the results, using:
> >  - 64 KiB buffer, mmap extent, or splice
> >  - 1 MiB TCP window
> >  - 16 GiB data sent across network
> > 
> > A) from /dev/zero -> 1) to /dev/null : 857 MB/s (6.86 Gb/s)
> > 
> > A) from file      -> 1) to /dev/null : 472 MB/s (3.77 Gb/s)
> > B) from file      -> 1) to /dev/null : 366 MB/s (2.93 Gb/s)
> > C) from file      -> 1) to /dev/null : 854 MB/s (6.83 Gb/s)
> > 
> > A) from /dev/zero -> 1) to file      : 375 MB/s (3.00 Gb/s)
> > A) from /dev/zero -> 2) to file      : 150 MB/s (1.20 Gb/s)
> > A) from /dev/zero -> 3) to file      : 286 MB/s (2.29 Gb/s)
> > 
> > I had (naively) hoped the read/vmsplice/splice combination would 
> > run at the same speed I can write a file, i.e. at about 450 MB/s
> > on my setup.  Do any of my numbers seem bogus, so I should look 
> > harder at my test program?
> 
> Could be read-ahead playing in here, I'd have to take a closer look at
> the generated io patterns to say more about that. Any chance you can
> capture iostat or blktrace info for such a run to compare that goes to
> the disk?
I've attached a file with iostat and vmstat results for the case
where I read from a socket and write a file, vs. the case where I
read from a socket and use vmsplice/splice to write the file.
(Sorry it's not inline - my mailer locks up when I try to
include the file.)
Would you still like blktrace info for these two cases?
-- Jim
Here's 'iostat -dx 5' on the receiver, when it reads from a socket
and writes to a file:
Device:    rrqm/s wrqm/s   r/s   w/s  rsec/s  wsec/s    rkB/s    wkB/s avgrq-sz avgqu-sz   await  svctm  %util
sdb          0.00   0.00  0.00  0.00    0.00    0.00     0.00     0.00     0.00     0.00    0.00   0.00   0.00
sdc          0.00   0.00  0.00  0.00    0.00    0.00     0.00     0.00     0.00     0.00    0.00   0.00   0.00
sdd          0.00   0.00  0.00  0.20    0.00    0.40     0.00     0.20     2.00     0.00    0.00   0.00   0.00
sde          0.00   0.00  0.00  0.00    0.00    0.00     0.00     0.00     0.00     0.00    0.00   0.00   0.00
md0          0.00   0.00  0.00  0.20    0.00    0.40     0.00     0.20     2.00     0.00    0.00   0.00   0.00
Device:    rrqm/s wrqm/s   r/s   w/s  rsec/s  wsec/s    rkB/s    wkB/s avgrq-sz avgqu-sz   await  svctm  %util
sdb          0.00   0.20  0.00 571.26    0.00 142574.45     0.00 71287.23   249.58     0.89    1.56   0.43  24.51
sdc          0.00   0.00  0.00 576.85    0.00 142558.08     0.00 71279.04   247.13     1.02    1.77   0.42  23.95
sdd          0.00   1.20  0.60 577.45    4.79 142545.91     2.40 71272.95   246.61     1.16    2.00   0.54  31.46
sde          0.00   0.60  0.00 573.85    0.00 142607.58     0.00 71303.79   248.51     1.34    2.33   0.54  30.74
md0          0.00   0.00  0.60 2301.40    4.79 570286.03     2.40 285143.01   247.74     0.00    0.00   0.00   0.00
Device:    rrqm/s wrqm/s   r/s   w/s  rsec/s  wsec/s    rkB/s    wkB/s avgrq-sz avgqu-sz   await  svctm  %util
sdb          0.00   0.20  0.00 750.40    0.00 187265.80     0.00 93632.90   249.55     1.10    1.46   0.42  31.36
sdc          0.00   1.40  0.00 755.80    0.00 187236.80     0.00 93618.40   247.73     1.30    1.72   0.43  32.64
sdd          0.00   2.80  0.00 751.20    0.00 187253.40     0.00 93626.70   249.27     1.53    2.04   0.55  41.36
sde          0.00   0.20  0.00 767.40    0.00 187235.20     0.00 93617.60   243.99     1.65    2.15   0.54  41.52
md0          0.00   0.00  0.00 3029.40    0.00 748991.20     0.00 374495.60   247.24     0.00    0.00   0.00   0.00
Device:    rrqm/s wrqm/s   r/s   w/s  rsec/s  wsec/s    rkB/s    wkB/s avgrq-sz avgqu-sz   await  svctm  %util
sdb          0.00   1.00  0.00 771.26    0.00 187299.20     0.00 93649.60   242.85     1.21    1.57   0.44  33.61
sdc          0.00   1.60  0.00 765.87    0.00 187262.28     0.00 93631.14   244.51     1.33    1.73   0.45  34.49
sdd          0.00   1.00  0.00 739.72    0.00 187258.48     0.00 93629.24   253.15     1.43    1.93   0.55  40.56
sde          0.00   0.80  0.00 744.31    0.00 187227.15     0.00 93613.57   251.54     1.85    2.48   0.56  41.68
md0          0.00   0.00  0.00 3025.55    0.00 749047.11     0.00 374523.55   247.57     0.00    0.00   0.00   0.00
Device:    rrqm/s wrqm/s   r/s   w/s  rsec/s  wsec/s    rkB/s    wkB/s avgrq-sz avgqu-sz   await  svctm  %util
sdb          0.00   0.40  0.20 751.30    3.19 185520.36     1.60 92760.18   246.87     1.15    1.52   0.45  33.85
sdc          0.00   1.20  0.00 741.12    0.00 185344.51     0.00 92672.26   250.09     1.38    1.87   0.45  33.21
sdd          0.00   2.59  0.00 756.09    0.00 185470.06     0.00 92735.03   245.30     1.53    2.03   0.54  40.64
sde          0.00   0.40  0.00 744.71    0.00 185379.64     0.00 92689.82   248.93     1.72    2.31   0.54  40.16
md0          0.00   0.00  0.20 3002.79    3.19 742992.02     1.60 371496.01   247.42     0.00    0.00   0.00   0.00
Device:    rrqm/s wrqm/s   r/s   w/s  rsec/s  wsec/s    rkB/s    wkB/s avgrq-sz avgqu-sz   await  svctm  %util
sdb          0.00   0.00  0.00 753.80    0.00 186913.80     0.00 93456.90   247.96     1.20    1.59   0.45  34.00
sdc          0.00   1.80  0.00 756.40    0.00 186971.20     0.00 93485.60   247.19     1.35    1.79   0.44  33.60
sdd          0.00   1.00  0.00 751.00    0.00 186895.40     0.00 93447.70   248.86     1.54    2.05   0.55  41.20
sde          0.00   1.00  0.00 755.60    0.00 186832.00     0.00 93416.00   247.26     1.76    2.33   0.56  42.00
md0          0.00   0.00  0.00 3019.20    0.00 747254.00     0.00 373627.00   247.50     0.00    0.00   0.00   0.00
Device:    rrqm/s wrqm/s   r/s   w/s  rsec/s  wsec/s    rkB/s    wkB/s avgrq-sz avgqu-sz   await  svctm  %util
sdb          0.00   0.00  0.00 744.89    0.00 184891.58     0.00 92445.79   248.21     1.17    1.58   0.45  33.59
sdc          0.00   4.21  0.00 742.08    0.00 184734.27     0.00 92367.13   248.94     1.41    1.90   0.45  33.75
sdd          0.00   0.60  0.00 759.72    0.00 184695.19     0.00 92347.60   243.11     1.52    2.00   0.55  41.68
sde          0.00   0.80  0.00 737.88    0.00 184989.18     0.00 92494.59   250.71     1.79    2.43   0.56  41.68
md0          0.00   0.00  0.00 2991.18    0.00 739566.73     0.00 369783.37   247.25     0.00    0.00   0.00   0.00
Device:    rrqm/s wrqm/s   r/s   w/s  rsec/s  wsec/s    rkB/s    wkB/s avgrq-sz avgqu-sz   await  svctm  %util
sdb          0.00   0.80  0.00 736.53    0.00 184289.42     0.00 92144.71   250.21     1.19    1.61   0.46  34.09
sdc          0.00   1.00  0.00 743.51    0.00 184225.15     0.00 92112.57   247.78     1.39    1.86   0.46  34.57
sdd          0.00   0.60  0.00 747.70    0.00 184270.86     0.00 92135.43   246.45     1.60    2.13   0.56  41.68
sde          0.00   0.80  0.00 754.69    0.00 184199.60     0.00 92099.80   244.07     1.69    2.24   0.56  42.16
md0          0.00   0.00  0.00 2985.83    0.00 737036.13     0.00 368518.06   246.84     0.00    0.00   0.00   0.00
Device:    rrqm/s wrqm/s   r/s   w/s  rsec/s  wsec/s    rkB/s    wkB/s avgrq-sz avgqu-sz   await  svctm  %util
sdb          0.00   1.00  0.00 753.09    0.00 183984.23     0.00 91992.12   244.30     1.20    1.59   0.45  33.61
sdc          0.00   0.80  0.00 741.52    0.00 184097.41     0.00 92048.70   248.27     1.35    1.83   0.45  33.05
sdd          0.00   0.60  0.00 735.13    0.00 184121.56     0.00 92060.78   250.46     1.48    2.01   0.55  40.72
sde          0.00   0.40  0.00 742.12    0.00 183975.65     0.00 91987.82   247.91     1.76    2.38   0.56  41.20
md0          0.00   0.00  0.00 2969.86    0.00 734952.50     0.00 367476.25   247.47     0.00    0.00   0.00   0.00
Device:    rrqm/s wrqm/s   r/s   w/s  rsec/s  wsec/s    rkB/s    wkB/s avgrq-sz avgqu-sz   await  svctm  %util
sdb          0.00   1.60  0.00 741.40    0.00 183925.00     0.00 91962.50   248.08     1.11    1.50   0.45  33.44
sdc          0.00   0.80  0.00 738.80    0.00 183760.00     0.00 91880.00   248.73     1.36    1.85   0.45  33.36
sdd          0.00   0.40  0.00 749.40    0.00 183790.60     0.00 91895.30   245.25     1.52    2.02   0.55  41.04
sde          0.00   0.40  0.00 742.20    0.00 183752.80     0.00 91876.40   247.58     1.71    2.30   0.55  40.80
md0          0.00   0.00  0.00 2980.20    0.00 736559.60     0.00 368279.80   247.15     0.00    0.00   0.00   0.00
Device:    rrqm/s wrqm/s   r/s   w/s  rsec/s  wsec/s    rkB/s    wkB/s avgrq-sz avgqu-sz   await  svctm  %util
sdb          0.00   0.00  0.00 201.40    0.00 50070.60     0.00 25035.30   248.61     0.30    1.48   0.46   9.20
sdc          0.00   0.40  0.00 198.40    0.00 50134.40     0.00 25067.20   252.69     0.38    1.90   0.46   9.20
sdd          0.00   0.20  0.00 203.00    0.00 50102.60     0.00 25051.30   246.81     0.49    2.40   0.56  11.36
sde          0.00   0.00  0.00 209.80    0.00 50146.00     0.00 25073.00   239.02     0.48    2.28   0.53  11.04
md0          0.00   0.00  0.00 808.00    0.00 199122.40     0.00 99561.20   246.44     0.00    0.00   0.00   0.00
and here's 'vmstat 5' during the same time, at 5 sec intervals:
procs -----------memory---------- ---swap-- -----io---- --system-- ----cpu----
 r  b   swpd   free   buff  cache   si   so    bi    bo   in    cs us sy id wa
 0  0    596 931948    244  18152    0    0     0     0  359    31  0  0 100  0
 1  0    596 279084    240 648088    0    0     2 318336 25708  3892  0 54 40  7
 1  0    596   7108    108 910932    0    0     0 374689 28552  5537  0 64 29  7
 1  0    596   8216    108 908124    0    0     0 375773 28805  3841  0 67 26  7
 2  1    596   7812     88 908512    0    0     2 372315 28616  3348  0 66 26  7
 1  0    596   7904     88 908368    0    0     0 372839 28687  3455  0 67 26  7
 2  0    596   7632     88 908624    0    0     0 369063 28381  3380  0 68 26  7
 1  0    596   8540    100 907712    0    0     2 369179 28405  3394  0 68 25  7
 1  0    596   7088    120 909272    0    0     6 368593 28351  3430  0 67 25  8
 1  0    596   7876    108 908492    0    0     0 367826 28282  3342  0 68 24  7
And here's 'iostat -dx 5' on the receiver, when it reads from a socket
and uses vmsplice/splice to write the file:
Device:    rrqm/s wrqm/s   r/s   w/s  rsec/s  wsec/s    rkB/s    wkB/s avgrq-sz avgqu-sz   await  svctm  %util
sdb          0.00   0.00  0.00  0.00    0.00    0.00     0.00     0.00     0.00     0.00    0.00   0.00   0.00
sdc          0.00   0.00  0.00  0.00    0.00    0.00     0.00     0.00     0.00     0.00    0.00   0.00   0.00
sdd          0.00   0.20  0.00  0.40    0.00    3.40     0.00     1.70     8.50     0.00    0.00   0.00   0.00
sde          0.00   0.00  0.00  0.00    0.00    0.00     0.00     0.00     0.00     0.00    0.00   0.00   0.00
md0          0.00   0.00  0.00  0.60    0.00    3.40     0.00     1.70     5.67     0.00    0.00   0.00   0.00
Device:    rrqm/s wrqm/s   r/s   w/s  rsec/s  wsec/s    rkB/s    wkB/s avgrq-sz avgqu-sz   await  svctm  %util
sdb          0.00   0.00  0.00 250.30    0.00 62179.24     0.00 31089.62   248.42     0.34    1.34   0.40   9.90
sdc          0.00   0.00  0.60 249.10    4.79 62166.87     2.40 31083.43   248.98     0.42    1.67   0.41  10.14
sdd          0.00   1.00  0.00 253.89    0.00 62200.40     0.00 31100.20   244.99     0.49    1.94   0.53  13.49
sde          0.00   0.00  0.00 249.10    0.00 62166.87     0.00 31083.43   249.56     0.56    2.26   0.53  13.25
md0          0.00   0.00  0.60 1003.39    4.79 248713.37     2.40 124356.69   247.73     0.00    0.00   0.00   0.00
Device:    rrqm/s wrqm/s   r/s   w/s  rsec/s  wsec/s    rkB/s    wkB/s avgrq-sz avgqu-sz   await  svctm  %util
sdb          0.00   0.00  0.00 551.60    0.00 138981.40     0.00 69490.70   251.96     0.75    1.37   0.43  23.52
sdc          0.00   0.40  0.00 545.40    0.00 138878.80     0.00 69439.40   254.64     1.06    1.93   0.44  23.76
sdd          0.00   0.00  0.00 582.80    0.00 138822.40     0.00 69411.20   238.20     1.28    2.20   0.55  31.92
sde          0.00   0.40  0.00 579.80    0.00 138780.80     0.00 69390.40   239.36     1.19    2.05   0.54  31.20
md0          0.00   0.00  0.00 2260.60    0.00 555465.00     0.00 277732.50   245.72     0.00    0.00   0.00   0.00
Device:    rrqm/s wrqm/s   r/s   w/s  rsec/s  wsec/s    rkB/s    wkB/s avgrq-sz avgqu-sz   await  svctm  %util
sdb          0.00   0.00  0.00 539.68    0.00 137531.66     0.00 68765.83   254.84     0.75    1.39   0.43  23.09
sdc          0.00   0.20  0.00 537.47    0.00 137494.39     0.00 68747.19   255.82     1.05    1.96   0.43  23.01
sdd          0.00   0.00  0.00 578.36    0.00 137462.12     0.00 68731.06   237.68     1.32    2.28   0.58  33.43
sde          0.00   0.60  0.00 578.76    0.00 137487.78     0.00 68743.89   237.56     1.22    2.12   0.57  33.27
md0          0.00   0.00  0.00 2234.87    0.00 549974.35     0.00 274987.17   246.09     0.00    0.00   0.00   0.00
Device:    rrqm/s wrqm/s   r/s   w/s  rsec/s  wsec/s    rkB/s    wkB/s avgrq-sz avgqu-sz   await  svctm  %util
sdb          0.00   0.00  0.00 537.45    0.00 137488.65     0.00 68744.32   255.82     0.71    1.33   0.42  22.63
sdc          0.00   0.20  0.00 537.85    0.00 137495.42     0.00 68747.71   255.64     1.03    1.92   0.43  23.11
sdd          0.00   0.00  0.00 579.08    0.00 137461.35     0.00 68730.68   237.38     1.28    2.22   0.56  32.35
sde          0.00   0.20  0.00 573.31    0.00 137447.01     0.00 68723.51   239.74     1.17    2.04   0.55  31.39
md0          0.00   0.00  0.00 2228.09    0.00 549892.43     0.00 274946.22   246.80     0.00    0.00   0.00   0.00
Device:    rrqm/s wrqm/s   r/s   w/s  rsec/s  wsec/s    rkB/s    wkB/s avgrq-sz avgqu-sz   await  svctm  %util
sdb          0.00   0.00  0.00 540.40    0.00 137667.40     0.00 68833.70   254.75     0.74    1.38   0.42  22.96
sdc          0.00   0.20  0.00 538.20    0.00 137634.60     0.00 68817.30   255.73     1.05    1.96   0.44  23.52
sdd          0.00   0.00  0.00 581.60    0.00 137643.20     0.00 68821.60   236.66     1.30    2.23   0.57  33.36
sde          0.00   0.00  0.00 580.60    0.00 137641.60     0.00 68820.80   237.07     1.22    2.10   0.56  32.72
md0          0.00   0.00  0.00 2241.00    0.00 550586.80     0.00 275293.40   245.69     0.00    0.00   0.00   0.00
Device:    rrqm/s wrqm/s   r/s   w/s  rsec/s  wsec/s    rkB/s    wkB/s avgrq-sz avgqu-sz   await  svctm  %util
sdb          0.00   0.00  0.00 536.33    0.00 137057.29     0.00 68528.64   255.55     0.73    1.35   0.43  22.91
sdc          0.00   0.20  0.00 535.53    0.00 136950.70     0.00 68475.35   255.73     1.04    1.93   0.43  22.91
sdd          0.00   0.20  0.00 578.64    0.00 136950.10     0.00 68475.05   236.67     1.28    2.20   0.56  32.65
sde          0.00   0.00  0.00 577.84    0.00 137124.15     0.00 68562.08   237.30     1.20    2.07   0.56  32.26
md0          0.00   0.00  0.00 2233.73    0.00 549359.68     0.00 274679.84   245.94     0.00    0.00   0.00   0.00
Device:    rrqm/s wrqm/s   r/s   w/s  rsec/s  wsec/s    rkB/s    wkB/s avgrq-sz avgqu-sz   await  svctm  %util
sdb          0.00   0.20  0.00 547.60    0.00 136721.80     0.00 68360.90   249.67     0.78    1.43   0.44  24.24
sdc          0.00   0.20  0.00 535.00    0.00 136815.40     0.00 68407.70   255.73     1.06    1.99   0.46  24.40
sdd          0.00   0.60  0.00 565.00    0.00 136840.00     0.00 68420.00   242.19     1.25    2.22   0.59  33.28
sde          0.00   0.00  0.00 571.20    0.00 136664.00     0.00 68332.00   239.26     1.22    2.14   0.56  32.16
md0          0.00   0.00  0.00 2214.80    0.00 545761.20     0.00 272880.60   246.42     0.00    0.00   0.00   0.00
Device:    rrqm/s wrqm/s   r/s   w/s  rsec/s  wsec/s    rkB/s    wkB/s avgrq-sz avgqu-sz   await  svctm  %util
sdb          0.00   0.20  0.00 541.12    0.00 136218.96     0.00 68109.48   251.74     0.77    1.42   0.45  24.35
sdc          0.00   0.20  0.00 532.53    0.00 136133.53     0.00 68066.77   255.63     1.07    2.01   0.45  23.79
sdd          0.00   0.20  0.00 562.87    0.00 136132.53     0.00 68066.27   241.85     1.25    2.22   0.55  30.98
sde          0.00   0.40  0.00 571.66    0.00 136114.97     0.00 68057.49   238.11     1.15    2.01   0.52  29.94
md0          0.00   0.00  0.00 2209.18    0.00 544600.00     0.00 272300.00   246.52     0.00    0.00   0.00   0.00
Device:    rrqm/s wrqm/s   r/s   w/s  rsec/s  wsec/s    rkB/s    wkB/s avgrq-sz avgqu-sz   await  svctm  %util
sdb          0.00   0.20  0.00 547.60    0.00 135878.80     0.00 67939.40   248.14     0.80    1.46   0.45  24.72
sdc          0.00   0.20  0.00 538.20    0.00 135837.20     0.00 67918.60   252.39     1.03    1.91   0.46  24.72
sdd          0.00   0.00  0.00 554.80    0.00 135854.40     0.00 67927.20   244.87     1.15    2.07   0.56  30.80
sde          0.00   0.00  0.00 560.60    0.00 135904.00     0.00 67952.00   242.43     1.26    2.24   0.55  30.80
md0          0.00   0.00  0.00 2201.60    0.00 543474.40     0.00 271737.20   246.85     0.00    0.00   0.00   0.00
Device:    rrqm/s wrqm/s   r/s   w/s  rsec/s  wsec/s    rkB/s    wkB/s avgrq-sz avgqu-sz   await  svctm  %util
sdb          0.00   0.40  0.00 553.00    0.00 136131.40     0.00 68065.70   246.17     0.88    1.60   0.45  25.04
sdc          0.00   0.40  0.00 552.80    0.00 136140.80     0.00 68070.40   246.27     0.99    1.79   0.44  24.08
sdd          0.00   0.00  0.00 547.80    0.00 136147.20     0.00 68073.60   248.53     1.12    2.05   0.56  30.72
sde          0.00   0.80  0.00 549.80    0.00 136028.80     0.00 68014.40   247.42     1.31    2.37   0.56  30.96
md0          0.00   0.00  0.00 2206.40    0.00 544779.40     0.00 272389.70   246.91     0.00    0.00   0.00   0.00
Device:    rrqm/s wrqm/s   r/s   w/s  rsec/s  wsec/s    rkB/s    wkB/s avgrq-sz avgqu-sz   await  svctm  %util
sdb          0.00   0.00  0.00 549.60    0.00 135710.60     0.00 67855.30   246.93     0.85    1.54   0.47  26.08
sdc          0.00   0.20  0.00 544.80    0.00 135724.20     0.00 67862.10   249.13     1.02    1.88   0.47  25.36
sdd          0.00   0.20  0.00 548.20    0.00 135739.20     0.00 67869.60   247.61     1.15    2.09   0.57  31.52
sde          0.00   2.00  0.00 553.80    0.00 135891.20     0.00 67945.60   245.38     1.24    2.25   0.56  31.28
md0          0.00   0.00  0.00 2197.40    0.00 542734.00     0.00 271367.00   246.99     0.00    0.00   0.00   0.00
Device:    rrqm/s wrqm/s   r/s   w/s  rsec/s  wsec/s    rkB/s    wkB/s avgrq-sz avgqu-sz   await  svctm  %util
sdb          0.00   0.00  0.00 553.60    0.00 135733.00     0.00 67866.50   245.18     0.84    1.53   0.47  25.76
sdc          0.00   0.20  0.00 545.00    0.00 135703.40     0.00 67851.70   249.00     1.02    1.87   0.46  24.96
sdd          0.00   0.40  0.00 548.60    0.00 135649.60     0.00 67824.80   247.27     1.13    2.06   0.56  30.72
sde          0.00   0.00  0.00 548.60    0.00 135673.60     0.00 67836.80   247.31     1.27    2.32   0.56  30.64
md0          0.00   0.00  0.00 2196.40    0.00 542759.60     0.00 271379.80   247.11     0.00    0.00   0.00   0.00
Device:    rrqm/s wrqm/s   r/s   w/s  rsec/s  wsec/s    rkB/s    wkB/s avgrq-sz avgqu-sz   await  svctm  %util
sdb          0.00   0.40  0.00 445.00    0.00 109865.80     0.00 54932.90   246.89     0.70    1.58   0.46  20.64
sdc          0.00   1.00  0.00 447.00    0.00 109896.20     0.00 54948.10   245.85     0.79    1.77   0.45  20.24
sdd          0.00   0.60  0.00 448.00    0.00 109880.60     0.00 54940.30   245.27     0.94    2.10   0.55  24.64
sde          0.00   0.40  0.00 441.80    0.00 109851.20     0.00 54925.60   248.64     1.07    2.43   0.56  24.64
md0          0.00   0.00  0.00 1784.20    0.00 439493.80     0.00 219746.90   246.33     0.00    0.00   0.00   0.00
and here's 'vmstat 5' during the same time, at 5 sec intervals:
procs -----------memory---------- ---swap-- -----io---- --system-- ----cpu----
 r  b   swpd   free   buff  cache   si   so    bi    bo   in    cs us sy id wa
 1  0    596 867408    192  77884    0    0     2     1 1163    30  0  2 98  0
 1  0    596 299956    196 628000    0    0     2 275379 21385  3112  0 58 36  5
 1  0    596  92256    196 829024    0    0     0 276103 20903  3997  0 59 35  5
 2  0    596   8320    100 909068    0    0     0 275221 20929  3106  0 61 35  5
 1  0    596   8276     88 908564    0    0     0 275253 21041  2410  0 62 33  5
 1  0    596   7100     88 909980    0    0     0 275288 21001  2243  0 63 33  4
 1  0    596   7524     88 909356    0    0     0 274507 20956  2207  0 62 33  5
 1  1    596   7520     88 909396    0    0     0 272799 20833  2236  0 63 33  4
 1  0    596   7040     88 909936    0    0     0 271638 20771  2060  0 63 32  5
 1  0    596   7996     88 909008    0    0     0 271984 20773  2191  0 63 32  5
 1  0    596   7940     88 909084    0    0     0 271769 20755  2155  0 63 31  5
 2  0    596   7824     88 908980    0    0     0 272193 20743  2158  0 63 32  5
 1  0    596   7144     88 909812    0    0     0 271100 20736  2121  0 64 31  5