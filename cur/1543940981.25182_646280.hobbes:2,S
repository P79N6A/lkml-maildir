Date: Thu, 31 Jan 2008 14:07:30 +0100
From: Ingo Molnar <>
Subject: Re: PATCH] x86_64: make bootmap_start page align v4
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/31/176

* Yinghai Lu <Yinghai.Lu@Sun.COM> wrote:
> [PATCH] x86_64: make bootmap_start page align v3
> 
> boot oops when system get 64g or 128 installed
> +++ linux-2.6/arch/x86/mm/numa_64.c
> @@ -224,6 +224,14 @@ void __init setup_node_bootmem(int nodei
>  	}
>  	bootmap_start = __pa(bootmap);
> 
> +	/*
> +	 * when you have 64g or 128g ram, bootmap will be pushed after bss
> +	 * section, the bootmap we get from early_node_mem via find_e820_area
> +	 * is not page aligned, we need to round it up to  make sure bootmap
> +	 * is not overlapped with bss section
> +	 */
> +	bootmap_start = round_up(bootmap_start, PAGE_SIZE);
> +
thanks, applied.
	Ingo