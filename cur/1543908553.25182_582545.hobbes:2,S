Date: Sun, 12 Aug 2007 01:51:02 +0200
From: Jesper Juhl <>
Subject: mtd: build failure in drivers/mtd/chips/chipreg.c / include/linux/mtd/map.h
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/8/11/157

Trying to build current Linus git tree (head at 
ac07860264bd2b18834d3fa3be47032115524cea) using the attached config 
file (generated by 'make randconfig') the build fails for me with : 
...
  CC      drivers/mtd/chips/chipreg.o
In file included from drivers/mtd/chips/chipreg.c:13:
include/linux/mtd/map.h:128:2: error: #error "No bus width supported. What's the point?"
In file included from drivers/mtd/chips/chipreg.c:13:
include/linux/mtd/map.h:162: error: 'MAX_MAP_BANKWIDTH' undeclared here (not in a function)
include/linux/mtd/map.h: In function 'map_word_equal':
include/linux/mtd/map.h:249: error: implicit declaration of function 'map_words'
include/linux/mtd/map.h: In function 'map_word_load':
include/linux/mtd/map.h:316: error: implicit declaration of function 'map_bankwidth_is_large'
include/linux/mtd/map.h: In function 'map_word_ff':
include/linux/mtd/map.h:355: error: implicit declaration of function 'map_bankwidth'
make[3]: *** [drivers/mtd/chips/chipreg.o] Error 1
make[2]: *** [drivers/mtd/chips] Error 2
make[1]: *** [drivers/mtd] Error 2
make: *** [drivers] Error 2
This is on a Slackware Linux 12.0 system with the following 
environment : 
$ scripts/ver_linux
If some fields are empty or look unusual you may have an old version.
Compare to the current minimal requirements in Documentation/Changes.
Linux dragon 2.6.22-g1db6178c #1 SMP PREEMPT Sat Jul 14 04:10:50 CEST 2007 i686 AMD Athlon(tm) 64 X2 Dual Core Processor 4400+ AuthenticAMD GNU/Linux
Gnu C                  4.1.2
Gnu make               3.81
binutils               Binutils
util-linux             2.12r
mount                  2.12r
module-init-tools      3.2.2
e2fsprogs              1.39
jfsutils               1.1.11
reiserfsprogs          3.6.19
xfsprogs               2.8.16
pcmciautils            014
quota-tools            3.13.
PPP                    2.4.4
Linux C Library        2.5
Dynamic linker (ldd)   2.5
Linux C++ Library      6.0.8
Procps                 3.2.7
Net-tools              1.60
Kbd                    1.12
oprofile               0.9.2
Sh-utils               6.9
udev                   111
Modules Loaded         snd_seq_oss snd_seq_midi_event snd_seq snd_pcm_oss snd_mixer_oss lp snd_emu10k1 snd_rawmidi firmware_class snd_ac97_codec nvidia ac97_bus snd_pcm snd_seq_device snd_timer snd_page_alloc snd_util_mem agpgart sg snd_hwdep evdev ehci_hcd via_rhine k8temp
I've also attached a complete build log. If you need any further details, just ask.
Kind regards,
  Jesper Juhl
[unhandled content-type:application/x-gzip][unhandled content-type:application/x-gzip]