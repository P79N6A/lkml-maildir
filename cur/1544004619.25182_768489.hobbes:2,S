Date: Thu, 13 Nov 2008 09:45:12 +0100
From: Mikael Pettersson <>
Subject: Re: [PATCH 2/2] x86: ia32_signal: remove unnecessary padding
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/11/13/48

H. Peter Anvin writes:
 > Hiroshi Shimamoto wrote:
 > > H. Peter Anvin wrote:
 > >> Mikael Pettersson wrote:
 > >>> It does cause each signal delivery to leak 2 uninitialised
 > >>> kernel bytes to the end of retcode[], which seems unnecessary.
 > >> Not just unnecessary, it is a huge no-no for security.
 > > 
 > > Am I missing important thing?
 > > The frame->retcode is 8 bytes and packed structure with padding
 > > is 10 bytes each, and the code is copied to user stack 8 bytes only.
 > > 
 > > err |= __copy_to_user(frame->retcode, &code, 8);
 > > 
 > > I don't think the behavior is changed.
 > > 
 > 
 > Ah, nevermind, then.  Then it fine, obviously.
Agreed. I wonder how on earth those templates ended
up as 10 bytes large when retcode[] always has been
8 bytes.