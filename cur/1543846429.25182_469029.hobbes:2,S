Date: Tue, 03 Oct 2006 08:53:06 -0700
From: Jeremy Fitzhardinge <>
Subject: Re: [PATCH 1/6] Generic implemenatation of BUG.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/10/3/153

Andi Kleen wrote:
>> Because powerpc also records the function name, I added this to i386 and
>> x86-64 for consistency.  Strictly speaking the function name is redundant with
>> kallsyms, so perhaps it can be dropped from powerpc.
>> 
>
> It would be good to change it to use kallsyms() then.
> 
It does, in effect, when it prints the oops message and backtrace.
>> 
>>  #ifdef CONFIG_BUG
>> +
>> +#ifdef CONFIG_GENERIC_BUG
>> +struct bug_entry {
>> +	unsigned long	bug_addr;
>> +#ifdef CONFIG_DEBUG_BUGVERBOSE
>> +	const char	*file;
>> +	unsigned short	line;
>> +#endif
>> +	unsigned short	flags;
>> 
>
> Can't you put the flags into the high bits of the line? I don't think
> we have any 64kLOC files.
I thought about it, but it would still be padded out to 12 bytes on 
i386, and more on 64-bit platforms.  And it doesn't matter that much.
    J
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/