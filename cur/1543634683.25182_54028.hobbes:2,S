Date: Sun, 23 Jun 2002 22:34:37 -0400 (EDT)
From: Frank Davis <>
Subject: [PATCH] 2.5.24 : drivers/net/tlan.c
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/6/23/76

Hello all,
  This patch adds the check for 32-bit DMA capability for the tlan driver. 
This is the first step for Documentation/DMA-mapping.txt compliance. As 
for the preferred action if the driver fails on pci_set_dma_mask(), I plan 
to add that in a future patch. Please review. 
Regards,
Frank
--- drivers/net/tlan.c.old	Sun May 26 14:37:35 2002
+++ drivers/net/tlan.c	Sun Jun 23 22:15:30 2002
@@ -516,6 +516,10 @@
 
 	if (pdev && pci_enable_device(pdev))
 		return -EIO;
+	if(pci_set_dma_mask(pdev, 0xffffffff))
+	{
+		printk(KERN_WARNING "tlan : No suitable DMA available.\n");
+	}
 
 	dev = init_etherdev(NULL, sizeof(TLanPrivateInfo));
 	if (dev == NULL) {
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/