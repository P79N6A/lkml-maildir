Date: Sat, 12 Jan 2008 15:15:43 -0500
From: Benjamin LaHaise <>
Subject: [PATCH] serial: remove "too much work for irq" printk
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/12/135

When using kvm with a serial console, the serial driver will print out 
"too much work for irq4" on any heavy activity (ie vi on a file repainting 
the terminal).  This message is entirely spurious, as output continues to 
work fine.  Remove the message as it corrupts screen output and is far too 
easy to trigger.
		-ben
Signed-off-by: Benjamin LaHaise <bcrl@kvack.org>
diff --git a/drivers/serial/8250.c b/drivers/serial/8250.c
index f94109c..030b8b5 100644
--- a/drivers/serial/8250.c
+++ b/drivers/serial/8250.c
@@ -1493,12 +1493,8 @@ static irqreturn_t serial8250_interrupt(int irq, void *dev_id)
 
 		l = l->next;
 
-		if (l == i->head && pass_counter++ > PASS_LIMIT) {
-			/* If we hit this, we're dead. */
-			printk(KERN_ERR "serial8250: too much work for "
-				"irq%d\n", irq);
+		if (l == i->head && pass_counter++ > PASS_LIMIT)
 			break;
-		}
 	} while (l != end);
 
 	spin_unlock(&i->lock);