Date: Fri, 22 Jan 1999 02:08:51 +1100 (EST)
From: CaT <>
Subject: Re: More ATAPI/IDE fun. (zip drive this time)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/1/21/178

Andre M. Hedrick wrote the following:
> 
> 
> "ide-probe.c.diff" is an UGLY-NASTY work-around due the changes in
> ./include/asm-i386/strings.h
> 
> I don't like it but it works for now.
> 
> This is not the right way to do this since it has a character dependent
> position test.  If the id->model == `IOMEGA ZIP 100 ATAPI' changes due the
> the vender, instant break.................
Applied the above...
> As for your multi-mode errors, the original changes that I made around
> 2.1.122 were stubbed out, but you can enable them easily.
> 
> Apply this, "ide-2.2.0.8.pat1", to give you the option of multi-mode config.
> 
> The other option is to edit ./drivers/block/ide.h at line #34
> 
> #define INITIAL_MULT_COUNT      0       /* off=0; on=2,4,8,16,32, etc.. */
> #define INITIAL_MULT_COUNT      1       /* off=0; on=2,4,8,16,32, etc.. */
Applied that too... (erm.. both of them)
> This has not been tested, but since many drives complain about multi-mode
> being set to zero, why not give a value of one a whirl.  It is in effect
> the same transfer style/method in principle.  A value of zero means
> multi-mode is diabled (ie one block at a time) and a value of one
> would have the same effect..........
> 
> Please let me know if it goes away with either or both of these options.
Well, in my sheer desire to get it all right I applied all that was
mentioned above and a patch that got rid of the assembly strstr(),
all in all the results so far are:
* multimode errors no longer reported (I did turn the config option on)
* zip drive actually works now too. mounted and happy at this very
  moment.
I'll try pre9 now (just d/led it) and see if it has any problems.
Thanks for your quick responce :)
-- 
CaT (cat@zip.net.au)                       URL: 
http://www.zip.com.au/dev/null
    There was farting in the air that night,
        It lit so bright,
            Fernando...
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/