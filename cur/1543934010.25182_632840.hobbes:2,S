Date: Mon, 31 Dec 2007 09:20:04 +0100
From: Sam Ravnborg <>
Subject: Re: [PATCH 1/3] Remove unused dependency
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/12/31/12

On Sun, Dec 30, 2007 at 04:16:10PM -0800, Joe Perches wrote:
> On Sun, 2007-12-30 at 23:00 +0100, Sam Ravnborg wrote:
> > Can you please remind me what problem you are actually trying to solve here.
> > Your current approach it not good - we do not want .c code in include/*
> > And what is wrong with the current include path?
> 
> It's not a bit deal.
> 
> inflate.c is #include'd with different depth "../" prefixes.
> Currently, depths 1, 3, 4 and 5 are used.
> 
The relative path is the depending on the file that includes
inflate.c. The include uses '../../../...' to get to the
root of the kernel src tree and then fetching the file in
lib/.
> It seemed neater to take this inflate.c file, which can not
> be stand-alone compiled, and move it to somewhere on the
> include path so that it may be included via #include <inflate.c>
> 
> I was originally trying to make each file in a directory via
> 
> for file in $(ls lib/*.c) ; do file=${file%.c}.o ; make $file ; done
Use:
make lib/
Then you will build the right stuff - your approach is just broken.
What we should fix is the wrong dependencies in the various Makefiles.
But that require the relevant toolchains to test it and I lost them
when I recently upgraded my devel box (crosstool is my friend...).
	Sam