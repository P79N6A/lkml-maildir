Date: Tue, 4 Jul 2006 22:29:04 +0200
From: Petr Vandrovec <>
Subject: [PATCH] Add note that lockdep is not allowed with non-GPL modules
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/7/4/247

Hi Ingo,
  can you add this small notice to the lockdep option ?  
Lock dependency infrastructure forces all legacy code which uses lock to now
depend on lockdep_init_map symbol, which is GPL-only.  It means that almost
no modules can work on kernel with CONFIG_LOCKDEP set.  Let's warn user about
that.
vmmon: module license 'unspecified' taints kernel.
vmmon: Unknown symbol lockdep_init_map
				Thanks,
					Petr Vandrovec
Signed-off-by: Petr Vandrovec <petr@vandrovec.name>
--- linux-2.6.17-3130.dist/lib/Kconfig.debug	2006-07-04 19:31:36.000000000 +0200
+++ linux-2.6.17-3130/lib/Kconfig.debug	2006-07-04 21:55:35.000000000 +0200
@@ -214,6 +214,9 @@
 
 	 For more details, see Documentation/lockdep-design.txt.
 
+	 Do not enable this option if you are using non-GPL modules, or
+	 they will fail to load due to missing symbol lockdep_init_map.
+
 config LOCKDEP
 	bool
 	depends on TRACE_IRQFLAGS_SUPPORT && STACKTRACE_SUPPORT && LOCKDEP_SUPPORT
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/