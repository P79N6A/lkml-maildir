Date: Sun, 22 Apr 2001 14:23:37 +0530
From: "Raghav P" <>
Subject: Question about console driver switch
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/4/22/26

I am porting a serial driver on my MIPS board and have to provide support
for serial console. After  going thru the initialisation sequence: Looks
like in the initial stages before the interrupts and memory is set up; a
serial driver is set up by some brute force method in the function
serial_console_init() and the write function address is registered to the
printk module.  After interrupts and memory are available; the old
memory(and hence the old UART driver) is freed using init_freemem() and
full-fledged UART driver is setup.
Now the doubts are:
(i) After the old serial driver is thrown out using init_freemem and new
driver is installed; register_console() is not invoked again. I tried
printing the address of the write function in printk and they remain the
same. Now how does printk start throwing out the messages using the new
driver?
(ii) Does init_freemem free both text and data? If so should care be taken
for including code before free_initmem is called?
Since I do not belong to this mailing list; It would be nice if I am replied
back to my official e-mail: raghav@ishoni.com
Thanks in advance
Raghav
_________________________________________________
P.Raghavan
ishoni Networks (India) Pvt Ltd (
http://www.ishoni.com
)
...Broadband for everyone
email:raghav@ishoni.com
Phone: +91-80-2292125 (Work)
Fax: +91-80-2995545 (Work)
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/