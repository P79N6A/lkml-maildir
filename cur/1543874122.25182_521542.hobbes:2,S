Date: Mon, 19 Mar 2007 10:24:49 +0100
From: Adrian Bunk <>
Subject: drivers/message/fusion/mptsas.c: inconsequent NULL checking
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/3/19/58

The Coverity checker spotted the following inconsequent NULL checking in
drivers/message/fusion/mptsas.c:
<--  snip  -->
...
static void
mptsas_delete_expander_phys(MPT_ADAPTER *ioc)
{
...
                if (port_info->phy_info &&
                    (!(port_info->phy_info[0].identify.device_info &
                    MPI_SAS_DEVICE_INFO_SMP_TARGET)))
                        continue;
                if (mptsas_sas_expander_pg0(ioc, &buffer,
                     (MPI_SAS_EXPAND_PGAD_FORM_HANDLE <<
                     MPI_SAS_EXPAND_PGAD_FORM_SHIFT),
                     port_info->phy_info[0].handle)) {
...
<--  snip  -->
port_info->phy_info is first checked but later dereferenced 
unconditionally.
cu
Adrian
-- 
       "Is there not promise of rain?" Ling Tan asked suddenly out
        of the darkness. There had been need of rain for many days.
       "Only a promise," Lao Er said.
                                       Pearl S. Buck - Dragon Seed
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/