Date: Wed, 14 Sep 2005 19:48:20 -0700
From: Andrew Morton <>
Subject: Re: [PATCH 1/2][FAT] miss-sync issues on sync mount (miss-sync on write)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/9/14/449

"Machida, Hiroyuki" <machida@sm.sony.co.jp> wrote:
>
> This patch fixes miss-sync issue on write() system call.
>  This updates inode attrs flags, mtime and ctime on every
>  comit_write call, due to locking.
This all seems wrong.
Why does fatfs have file_operations.write pointing at do_sync_write()
rather than generic_file_write()?
Why does fatfs have a custom .aio_write() rather than using
generic_file_aio_write()?
If fatfs can use all the standard library functions, all this inode
dirtying and O_SYNC/-o sync handling shoud just work.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/