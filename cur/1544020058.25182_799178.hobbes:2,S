Date: Fri, 30 Jan 2009 13:42:27 -0800 (PST)
From: David Miller <>
Subject: Re: [PATCH v2] tcp: splice as many packets as possible at once
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2009/1/30/284

From: Jarek Poplawski <jarkao2@gmail.com>
Date: Tue, 27 Jan 2009 07:40:48 +0000
> I think the main problem is to respect put_page() more, and maybe you
> mean to add this to your allocator too, but using slab pages for this
> looks a bit complex to me, but I can miss something.
Hmmm, Jarek's comments here made me realize that we might be
able to do some hack with cooperation with SLAB.
Basically the idea is that if the page count of a SLAB page
is greater than one, SLAB will not use that page for new
allocations.
It's cheesy and the SLAB developers will likely barf at the
idea, but it would certainly work.
Back to real life, I think long term the thing to do is to just do the
cached page allocator thing we'll be doing after Jarek's socket page
patch is integrated, and for best performance the driver has to
receive it's data into pages, only explicitly pulling the ethernet
header into the linear area, like NIU does.