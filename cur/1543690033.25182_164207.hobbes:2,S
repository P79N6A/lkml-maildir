Date: Tue, 9 Sep 2003 00:17:39 +0200
From: Pavel Machek <>
Subject: Re: [NBD] patch and documentation
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/9/8/270

Hi!
> >>Well, i guess the cache uses a value of 256 sectors to do read-ahead and
> >>such.
> >
> >Well it sounds like the real problem here is the vm_max_readahead
> >setting then. Try this:
> 
> I will try it, although i think that i'm using the deafult values.
> 
> Anyway: the NBD module should set the max_sectors to a certain value - i 
> chose 256 sectors. Perhaps Pavel or Paul may decide to use a higher ot 
> smaller value. A limit should be part of the protocol or handshaked when 
> connecting to the server (what is not possible without changing the 
> protocol)
I do not see a reason it should be handshaked. IMNSHO we should simply
say that no request should be bigger than 1MB in protocol, make sure
that kernel does <=128KB requests, and make sure nbd-servers can
handle 1MB, and be done with that.
								Pavel
-- 
When do you have a heart between your knees?
[Johanka's followup: and *two* hearts?]
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/