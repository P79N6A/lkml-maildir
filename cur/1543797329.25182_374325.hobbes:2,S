Date: Thu, 8 Dec 2005 21:15:18 +0100
From: Andi Kleen <>
Subject: Re: [discuss] [patch] x86_64:  align and pad x86_64 GDT on page boundary
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/12/8/186

On Thu, Dec 08, 2005 at 11:42:32AM -0800, Ravikiran G Thirumalai wrote:
> 
> -	.align  L1_CACHE_BYTES
> +	/* zero the remaining page */
> +	.fill PAGE_SIZE / 8 - GDT_ENTRIES,8,0
> +	
>  ENTRY(idt_table)	
Why can't the IDT not be shared with the GDT page? It should be mostly
read only right and putting r-o data on that page should be ok, right?
> @@ -743,6 +743,13 @@
>  	};
>  	DECLARE_WORK(work, do_fork_idle, &c_idle);
> 
> +	/* allocate memory for gdts of secondary cpus. Hotplug is considered */
> +	if (!cpu_gdt_descr[cpu].address &&
> +			!(cpu_gdt_descr[cpu].address = get_zeroed_page(GFP_KERNEL))) {
> +		printk("Failed to allocate GDT for CPU %d\n", cpu);
> +		return 1;
Is this return really correctly handled? Doubtful.
-Andi
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/