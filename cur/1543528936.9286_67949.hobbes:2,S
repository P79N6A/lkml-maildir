Date: Tue, 07 Mar 2000 19:27:40 +0100
From: Thomas Sailer <>
Subject: Re: fix for sparc32 dma errors
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/3/7/119

Anton Blanchard wrote:
> Dominik, Thomas I am interested to see if this fixes your problem too.
> I didn't have dmesg outputs so I couldnt see if you had RAM at > 0x9000000.
Doesn't help for me. This is pristine 2.3.49 plus your patch plus David Millers
appletalk rewrite.
www.ife.ee.ethz.ch/~sailer/System.map-2.3.49 and vmlinuz-2.3.49
Uncompressing image...                                                          
PROMLIB: obio_ranges 5                                                          
bootmem_init: Scan sp_banks,  init_bootmem(spfn[210],epfn[9000])                
free_bootmem: base[0] size[1000000]                                             
free_bootmem: base[4000000] size[1000000]                                       
free_bootmem: base[8000000] size[1000000]                                       
reserve_bootmem: base[0] size[2121ff]                                           
init_bootmem: return end_pfn[9000]                                              
Booting Linux...                                                                
mem_init: Calling free_all_bootmem().                                           
PROMLIB: Sun Boot Prom Version 3 Revision 2                                     
Linux version 2.3.49 (sailer@casals.ee.ethz.ch) (gcc version egcs-2.91.66 199900
ARCH: SUN4M                                                                     
TYPE: Sun4m SparcStation10/20                                                   
Ethernet address: 8:0:20:19:c9:7c                                               
Boot time fixup v1.6. 4/Mar/98 Jakub Jelinek (jj@ultra.linux.cz). Patching kernu
kmem_alloc: NULL ptr (name=unknown)                                             
kmem_alloc: NULL ptr (name=unknown)                                             
On node 0 totalpages: 36864                                                     
zone(0): 36864 pages.                                                           
zone(1): 0 pages.                                                               
zone(2): 0 pages.                                                               
Found CPU 0 <node=ffd70140,mid=8>                                               
Found 1 CPU prom device tree node(s).                                           
Power off control detected.                                                     
Calibrating delay loop... 84.99 BogoMIPS                                        
Memory: 42864k available (1208k kernel code, 320k data, 112k init) [f0000000,09]
Buffer-cache hash table entries: 1024 (order: 0, 4096 bytes)                    
Page-cache hash table entries: 16384 (order: 4, 65536 bytes)                    
POSIX conformance testing by UNIFIX                                             
IOMMU: impl 0 vers 3 page table at f06c0000 of size 262144 bytes                
sbus0: Clock 20.0 MHz                                                           
dma0: Revision 2                                                                
dma1: Revision 2                                                                
Linux NET4.0 for Linux 2.3                                                      
Based upon Swansea University Computer Society NET3.039                         
NET4: Unix domain sockets 1.0/SMP for Linux NET4.0.                             
NET4: Linux TCP/IP 1.0 for NET4.0                                               
IP Protocols: ICMP, UDP, TCP, IGMP                                              
IP: routing cache hash table of 512 buckets, 4Kbytes                            
TCP: Hash tables configured (established 4096 bind 4096)                        
Initializing RT netlink socket                                                  
Starting kswapd v1.6                                                            
Sparc Zilog8530 serial driver version 1.55                                      
tty00 at 0xffede004 (irq = 44) is a Zilog8530                                   
tty01 at 0xffede000 (irq = 44) is a Zilog8530                                   
tty02 at 0xffedb004 (irq = 44) is a Zilog8530                                   
tty03 at 0xffedb000 (irq = 44) is a Zilog8530                                   
keyboard: not present                                                           
Console: ttyS0 (Zilog8530)                                                      
pty: 256 Unix98 ptys configured                                                 
Sun Mouse-Systems mouse driver version 1.00                                     
Floppy drive(s): fd0 is 1.44M                                                   
ioremap: done with statics, switching to malloc                                 
FDC 0 is a National Semiconductor PC87306                                       
esp0: IRQ 36 SCSI ID 7 Clk 40MHz CCYC=25000 CCF=8 TOut 167 NCR53C9XF(espfast)   
ESP: Total of 1 ESP hosts found, 1 actually in use.                             
scsi0 : Sparc ESP100A-FAST                                                      
scsi : 1 host.                                                                  
  Vendor: CONNER    Model: CP30540  SUN0535  Rev: B0BB                          
  Type:   Direct-Access                      ANSI SCSI revision: 02             
Detected scsi disk sda at scsi0, channel 0, id 3, lun 0                         
scsi : detected 1 SCSI disk total.                                              
esp0: target 3 [period 100ns offset 15 10.00MHz FAST SCSI-II]                   
SCSI device sda: hdwr sector= 512 bytes. Sectors= 1065912 [520 MB] [0.5 GB]     
Partition check:                                                                
 sda: sda1 sda2 sda3                                                            
sunlance.c:v2.00 11/Sep/99 Miguel de Icaza (miguel@nuclecu.unam.mx)             
eth0: LANCE 08:00:20:19:c9:7c                                                   
eth0: using auto-carrier-detection.                                             
VFS: Mounted root (ext2 filesystem) readonly.                                   
Freeing unused kernel memory: 112k freed                                        
INIT: version 2.77 booting                                                      
                        Welcome to Red Hat Linux                                
                Press 'I' to enter interactive startup.                         
Mounting proc filesystem [  OK  ]                                               
Setting clock  (utc): Tue Mar  7 19:15:20 CET 2000 [  OK  ]                     
Loading default keymap/etc/rc.d/rc.sysinit: /dev/tty0: No such device           
[FAILED]                                                                        
Activating swap partitions [  OK  ]                                             
Setting hostname casals.ee.ethz.ch [  OK  ]                                     
Setting NIS domain name ife.ee.ethz.ch [  OK  ]                                 
Checking root filesystem                                                        
/dev/sda1: clean, 37541/114240 files, 425264/456640 blocks                      
[/sbin/fsck.ext2 -- /] fsck.ext2 -a /dev/sda1                                   
[  OK  ]                                                                        
Remounting root filesystem in read-write mode [  OK  ]                          
Finding module dependencies /lib/modules/2.3.49/fs/fat.o: unresolved symbol(s)  
/lib/modules/2.3.49/block/rd.o: unresolved symbol(s)                            
[  OK  ]                                                                        
Loading sound module                                                            
Watchdog Reset                                                                  
Type  help  for more information                                                
ok .registers                                                                   
          %g0      %g1      %g2      %g3      %g4      %g5      %g6      %g7    
            0        0        4        0 f003095c        1 f8d9a000     f8d9    
           PC      nPC        Y      PSR      WIM      TBR                      
     f0011a68 f0011a6c        0 40000fe0        1 f0004090                      
ok .locals                                                                      
            0        1        2        3        4        5        6        7    
IN:  f8000548        0        0 f21be000 f417eaf8 f01fe400 f8000508 f0010d64    
LOC:        0        0 f001cec8        1        0 f8d9a000 f8d9a000 f21be000    
OUT: f001f0f4 f800047c f01fe400 f01fe400 f417eaf8 f01fe400 f8000418 f001d184    
PC: f0011a68                                                                    
Last leaf: call f001f09c    from f001d184                                       
     0 w  %o0-%o5: ( f001f0f4 f800047c f01fe400 f01fe400 f417eaf8 f01fe400 )    
                                                                                
call f001cec4    from f0010d64                                                  
     1 w  %o0-%o5: ( f8000548        0        0 f21be000 f417eaf8 f01fe400 )    
                                                                                
call f001cec4    from f0010d64                                                  
     2 w  %o0-%o5: (        0        0        0 f21be000 f417eaf8 f01fe400 )    
                                                                                
call f001f09c    from f001d184                                                  
     3 w  %o0-%o5: ( f001f0f4 f8000664 f01fe400 f01fe400 f417eaf8 f01fe400 )    
                                                                                
call f001cec4    from f0010d64                                                  
     4 w  %o0-%o5: ( f8000730        0        0 f21be000 f417eaf8 f01fe400 )    
                                                                                
call f001cec4    from f0010d64                                                  
     5 w  %o0-%o5: (        0        0        0 f21be000 f417eaf8 f01fe400 )    
                                                                                
call f001f09c    from f001d184                                                  
     6 w  %o0-%o5: ( f001f0f4 f800084c f01fe400 f01fe400 f417eaf8 f01fe400 )    
                                                                                
call f001cec4    from f0010d64                                                  
     7 w  %o0-%o5: ( f8000918        0        0 f21be000 f417eaf8 f01fe400 )    
                                                                                
call f001cec4    from f0010d64                                                  
     8 w  %o0-%o5: (        0        0        0 f21be000 f417eaf8 f01fe400 )    
                                                                                
call f001f09c    from f001d184                                                  
     9 w  %o0-%o5: ( f001f0f4 f8000a34 f01fe400 f01fe400 f417eaf8 f01fe400 )    
                                                                                
call f001cec4    from f0010d64                                                  
     a w  %o0-%o5: ( f8000b00        0        0 f21be000 f417eaf8 f01fe400 )    
                                                                                
call f001cec4    from f0010d64                                                  
     b w  %o0-%o5: (        0        0        0 f21be000 f417eaf8 f01fe400 )    
                                                                                
call f001f09c    from f001d184                                                  
     c w  %o0-%o5: ( f001f0f4 f8000c1c f01fe400 f01fe400 f417eaf8 f01fe400 )    
                                                                                
call f001cec4    from f0010d64                                                  
     d w  %o0-%o5: ( f8000ce8        0        0 f21be000 f417eaf8 f01fe400 )
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/