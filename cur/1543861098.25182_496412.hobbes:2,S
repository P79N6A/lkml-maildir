Date: Fri, 05 Jan 2007 00:54:32 +0100
From: Stelian Pop <>
Subject: Re: sonypc with Sony Vaio VGN-SZ1VP
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/1/4/312

Le jeudi 04 janvier 2007 à 15:44 -0800, Andrew Morton a écrit :
> On Fri, 05 Jan 2007 00:36:23 +0100
> Stelian Pop <stelian@popies.net> wrote:
> 
> > Added acpi_bus_generate event for forwarding Fn-keys pressed to acpi subsystem,
> > and made correspondent necessary changes for this to work.
> 
> neato.
> 
> err, how does one use this?
:)
Well, it seems that on some Vaios (including Nilton's pcg-frv26 but not
only this one), the Fn key events aren't seen by sonypi or sony_acpi
GHKE method, but do generate an ACPI notify event.
For those laptops, the patch forwards the ACPI event to the ACPI system
and can be later interpreted in userspace using
acpid's /etc/acpi/default.sh (example directly from Nilton):
> case "$group" in
>     button)
>         case "$action" in
>             power) /usr/sbin/hibernate
>                 ;;
>
>             lid) cat /proc/acpi/button/lid/LID/state
>                 ;;
> 
>             *)  logger "ACPI action $action is not defined ($@)"
>                 ;;
>         esac
>         ;;
> 
>     SNC) echo "$@" > /dev/tcp/localhost/50007
>         ;;
> 
>     *) logger "ACPI group $group / action $action is not defined"
>         ;;
> esac
> 
> In which I just forward the SNC event to another userspace application
> listening on a TCP port.
Stelian.
-- 
Stelian Pop <stelian@popies.net>
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/