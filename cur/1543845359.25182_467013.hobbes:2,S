Date: Wed, 27 Sep 2006 07:55:26 -0500
From: Robert <>
Subject: Re: A little script help please .... USB Keychain Drives
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/9/27/139

Brian D. McGrew wrote:
> Can someone who is a little better at scripting than I give me some help
> here on Fedora Core 3.
> 
> Using the 2.6.9 kernel I would put in a USB Keychain drive of a CD-ROM
> and it would automount it without a problem.
> 
> We upgrade to 2.6.16.16 and this is now broken and thanks to the list,
> we've narrowed it to the haldaemon but because of production cycles I
> can't upgrade anything.  I'm stuck with what I've got.
> 
> Can someone share a script that I can run with a setuid bit to find and
> mount the CD-ROM _and_ the USB Keychain drive after they're inserted?  I
> can't see to get anything to work properly.
> 
> Thanks,
> 
> :b!
> 
> Brian D. McGrew { brian@visionpro.com || brian@doubledimension.com }
> --
>> This is a test.  This is only a test!
>   Had this been an actual emergency, you would have been
>   told to cancel this test and seek professional assistance!
> 
> 
ASSUMING a mount point gets created when you plug in that USB drive, you 
might do something similar to what I did in my backup script:
# Set the output mount (UD is USB DRIVE mount point)
export UD=/media/OTOT
#
#
# Check for drive mounted
if [ -z  $(mount | grep $UD | awk '{ print $3 }') ]; then
    mount $UD
fi
#
#
The key is having the mount point automatically created. Check 
/etc/fstab with the drive plugged in and go from there. 
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/