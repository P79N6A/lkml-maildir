Date: Mon, 07 Jan 2008 17:31:58 -0600
From: Robert Hancock <>
Subject: Re: MCFG ACPI patch in git-x86 causes boot regression
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/7/345

Jesse Barnes wrote:
> On Monday, January 07, 2008 2:47 Andi Kleen wrote:
>> This patch
>>
>> commit c5182babd1d0706f1294af7b8dbf64e378b066bb
>> Author: Robert Hancock <hancockr@shaw.ca>
>> Date:   Sat Jan 5 13:26:32 2008 +0100
>>
>>     x86: validate against ACPI motherboard resources
>>
>> ...
>>
>> recently added to git-x86 causes one of my Intel test systems to not
>> boot unless I specify pci=conf1.
>>
>> ...
>> ACPI: EC: Look up EC in DSDT
>> ACPI: Interpreter enabled
>> ACPI: (supports S0 S3 S4 S5)
>> ACPI: Using IOAPIC for interrupt routing
>> PCI: MCFG configuration 0: base 4026531840 segment 0 buses 0 - 127
>> PCI: MCFG area at f0000000 reserved in ACPI motherboard resources
>> PCI: Using MMCONFIG at f0000000 - f7ffffff
>> ACPI: PCI Root Bridge [PCI0] (0000:00)
>> <hang>
>>
>> The system is a SDV, but I believe production level.
>> DSDT is available at 
http://firstfloor.org/~andi/dsdt.dsl
>>
>> On previous kernels the MCFG was rejected because it wasn't e820
>> reserved:
> 
> Yep, this patch (as was stated many times) requires other fixes to PCI 
> probing--either disabling decode, not using mmconfig unless absolutely 
> required, or one of the other discussed changes.  I'm not sure why it 
> was pushed before one of those changes went in.
I believe that such a change is in Greg KH's tree. So -mm (with both 
trees) would probably work.