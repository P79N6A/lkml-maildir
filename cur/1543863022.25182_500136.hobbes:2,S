Date: Fri, 19 Jan 2007 18:02:36 +0300
From: asgard <>
Subject: question about identiry map(x86)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/1/19/45

Hi, all.
On early boot stage linux maps only 8M(arch/i386/kernel/head.S).
It creates identity map and kernel map like this:
0x00000000 - 0x007FFFFF -> 0x00000000 -> 0x007FFFFF /* identity map */
0xC0000000 - 0xC07FFFFF -> 0x00000000 -> 0x007FFFFF /* kernel map */
On early boot stage identity map is needed for jumping to 0xC0000000.
Intel manual says, that after such jumping identity map can be deleted.
(arch/i386/mm/init.c)
Linux deletes early boot identity map, but when it maps 1G(all kernel
space) in kernel_physical_map_init, it creates another one identity map:
0x00000000 - 0x01FFFFFF -> 0x00000000 - 0x01FFFFFF /* NEW identity map
*/
0xC0000000 - 0xC1FFFFFF -> 0x00000000 - 0x01FFFFFF /* 1G kernel map */
so, question is: are there any significant reasons to create identity
map after jumping was done? As I know, after jumping kernel doesn't need
in identity map. So, if, for example, PAE is enabled for creation middle
directory kernel allocates 4K. And when identity map creates, kernel
loses some mem. So, why identity map is created in this case.
Thanks and good luck. 
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/