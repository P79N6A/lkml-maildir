Date: Thu, 12 Feb 2004 21:46:49 -0500
From: Brian Gerst <>
Subject: [PATCH] Module headers cleanup
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/2/12/248

Cleans up some leftovers from the old module loader:
- Remove unused defines from modules.h
- Remove unused file modsetver.h
--
				Brian Gerst
diff -urN linux-2.6.2-bk/include/asm-arm26/module.h linux/include/asm-arm26/module.h
--- linux-2.6.2-bk/include/asm-arm26/module.h	2003-12-17 21:58:57.000000000 -0500
+++ linux/include/asm-arm26/module.h	2004-02-09 15:20:45.000000000 -0500
@@ -4,9 +4,4 @@
  * This file contains the arm architecture specific module code.
  */
 
-#define module_map(x)		vmalloc(x)
-#define module_unmap(x)		vfree(x)
-#define module_arch_init(x)	(0)
-#define arch_init_modules(x)	do { } while (0)
-
 #endif /* _ASM_ARM_MODULE_H */
diff -urN linux-2.6.2-bk/include/asm-h8300/module.h linux/include/asm-h8300/module.h
--- linux-2.6.2-bk/include/asm-h8300/module.h	2003-12-17 21:58:16.000000000 -0500
+++ linux/include/asm-h8300/module.h	2004-02-09 15:20:50.000000000 -0500
@@ -4,9 +4,4 @@
  * This file contains the H8/300 architecture specific module code.
  */
 
-#define module_map(x)		vmalloc(x)
-#define module_unmap(x)		vfree(x)
-#define module_arch_init(x)	(0)
-#define arch_init_modules(x)	do { } while (0)
-
 #endif /* _ASM_H8/300_MODULE_H */
diff -urN linux-2.6.2-bk/include/asm-parisc/module.h linux/include/asm-parisc/module.h
--- linux-2.6.2-bk/include/asm-parisc/module.h	2003-12-17 21:58:16.000000000 -0500
+++ linux/include/asm-parisc/module.h	2004-02-09 15:20:54.000000000 -0500
@@ -17,11 +17,6 @@
 #define Elf_Rela Elf32_Rela
 #endif
 
-#define module_map(x)		vmalloc(x)
-#define module_unmap(x)		vfree(x)
-#define module_arch_init(x)	(0)
-#define arch_init_modules(x)	do { } while (0)
-
 struct mod_arch_specific
 {
 	unsigned long got_offset, got_count, got_max;
diff -urN linux-2.6.2-bk/include/linux/modsetver.h linux/include/linux/modsetver.h
--- linux-2.6.2-bk/include/linux/modsetver.h	2003-12-17 21:58:49.000000000 -0500
+++ linux/include/linux/modsetver.h	1969-12-31 19:00:00.000000000 -0500
@@ -1,10 +0,0 @@
-/* Symbol versioning nastiness.  */
-
-#define __SYMBOL_VERSION(x)       __ver_ ## x
-#define __VERSIONED_SYMBOL2(x,v)  x ## _R ## v
-#define __VERSIONED_SYMBOL1(x,v)  __VERSIONED_SYMBOL2(x,v)
-#define __VERSIONED_SYMBOL(x)     __VERSIONED_SYMBOL1(x,__SYMBOL_VERSION(x))
-
-#ifndef _set_ver
-#define _set_ver(x)		  __VERSIONED_SYMBOL(x)
-#endif