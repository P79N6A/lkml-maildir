Date: Fri, 19 Nov 2004 15:18:35 -0600
From: Jack Steiner <>
Subject: SLIT and IO-only nodes
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/11/19/241

An SGI Altix SSI system consists of a collection of nodes connected via a
high speed interconnect. Nodes come in several flavors:
        - memory, IO and cpus
        - memory & cpus
        - memory only
        - IO only
        -    (other combinations don't exist yet)
The first 2 types of nodes are typical.
You can think of the last 2 types of nodes as nodes that have been
partially depopulated.
We need to describe all these nodes in the SLIT table.
For example, when allocating memory on a memory-only node,
knowing the distance to the node is important.
When assigning cpus to service interrupts for IO nodes or when creating
driver memory structures for devices on IO nodes, it is important
to use the nearest node that has cpus & memory.
On IA64, memory-only nodes are described in the SRAT, have a proximity
domain number, NIDs, and appear in the SLIT. (ie., we don't have
a problem with memory-only nodes).
However, IO-only nodes (AFAICT) cannot be described in the SLIT.
The SLIT is indexed by proximity_domain_number (PXM).
Currently, there is no SRAT entry for IO-only nodes. These nodes do not
appear in the SLIT. It would seem that a new ACPI table is
needed for IO-only nodes. The SRAT would describe the node & identify
the IO buses that are attached to the node. I think this would give us 
what we need.
Before I start digging into the ACPI spec, has anyone already addressed
this problem? Is this the right approach to take to solve the problem?
-- 
Thanks
Jack Steiner (steiner@sgi.com)          651-683-5302
Principal Engineer                      SGI - Silicon Graphics, Inc.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/