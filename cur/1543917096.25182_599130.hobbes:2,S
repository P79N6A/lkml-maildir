Date: Wed, 26 Sep 2007 08:14:58 -0700
From: Greg KH <>
Subject: Re: subsystem_unregister() breakage in -mm
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/9/26/201

On Wed, Sep 26, 2007 at 09:21:56AM +0200, Cornelia Huck wrote:
> On Tue, 25 Sep 2007 19:41:21 -0700,
> Greg KH <greg@kroah.com> wrote:
> 
> > Ok, here's a patch that fixes this for me.  It should go on top of the
> > -mm tree.  Let me know of this works or not.
> 
> Looks sane to me.
> 
> > In the end, we need to dynamically allocate these subsystems to properly
> > fix this.  In looking through the tree, there really isn't that many of
> > them, so I'll try to knock that out later this week.
> 
> What they need at least is a dynamically allocated k_name.
Yes :(
> Same goes
> for all those objects that use set_kset_name(), and there are quite a
> few of those...
Almost all of those are the stupid sysdev_class and sys_device stuff.  I
_really_ want to get rid of those as they should be a "normal"
device/driver/class.  I think Adam Belay has some patches he is working
on to get rid of these, but I do not know the status of them.
Anyway, they are static structures, so my fix will keep them from
oopsing.
thanks,
greg k-h
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/