Date: Fri, 12 Jan 2007 00:34:34 -0500
From: Rik van Riel <>
Subject: Re: kvm & dyntick
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/1/12/8

Avi Kivity wrote:
> dyntick-enabled guest:
> - reduce the load on the host when the guest is idling
>   (currently an idle guest consumes a few percent cpu)
You do not need dynticks for this actually.  Simple no-tick-on-idle
like Xen has works well enough.
While you're modifying the timer code, you might also want to add
proper accounting for steal time.  Time during which your guest
had a runnable process, but was not actually running itself, should
not be accounted against the currently running process.
I wonder if it would be possible to simply copy some of the timer
code from Xen.  They have the timing quirks worked out very well
and their timer_interrupt() is pretty nice code.
(Now I need to buy myself another VT box so I can help out with KVM :))
http://virt.kernelnewbies.org/ParavirtBenefits
 has some other features
you may want to have :)))
-- 
Politics is the struggle between those who want to make their country
the best in the world, and those who believe it already is.  Each group
calls the other unpatriotic.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/