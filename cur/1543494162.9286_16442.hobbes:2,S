Date: Thu, 29 Apr 1999 18:16:29 +0100 (BST)
From: (Alan Cox)
Subject: Re: Process VM Addr to Kernel VM Addr at Interrupt Time.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/4/29/75

> this is the case.  Of course, I could get around this by setting
> PG_reserved, but that would make the memory unusable until reboot -- which
> would be evil.  This is precisely the wrong kind of hack that makes Linus'
> hair stand up on end, as it should. :-)
The mmap holds a reference so when the process dies and the block wants
to be freed you get your unmap and close events. The unmap is synchronous
and before task death so you can sleep in it or carry out actions - like
stopping DMA
> The kernel.  The real problem is this-- I need to be able to set a timer to
> go off regardless of whether or not the process that locked the pages is
> still around.  I can't do that from the process context, since it is removed
> from the timer queue when the process goes away.  A possible solution would
add_timer/del_timer/mod_timer 
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/