Date: Wed, 26 Jun 2002 12:36:24 +1000
From: Brad Hards <>
Subject: Re: [PATCH/RFC 2.4.19-rc1] Fix dependancies on keybdev.o
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/6/25/102

On Wed, 26 Jun 2002 02:06, Tom Rini wrote:
> Right now drivers/input/keybdev.o depends on drivers/char/keyboard.o for
> handle_scancode, keyboard_tasklet and kbd_ledfunc.  However, compiling
> drivers/char/keyboard.o isn't quite straight forward, as we have:
> ifndef CONFIG_SUN_KEYBOARD
>   obj-$(CONFIG_VT) += keyboard.o $(KEYMAP) $(KEYBD)
> else
>   obj-$(CONFIG_PCI) += keyboard.o $(KEYMAP)
> endif
> in drivers/char/Makefile
>
> To attempt to work around this, I've come up with the following patch
> for drivers/input/Config.in.  Comments?
Here is a bit of arch/i386/config.in:
<extract>
# input before char - char/joystick depends on it. As does USB.
#
source drivers/input/Config.in
source drivers/char/Config.in
</extract>
So it will still crap out, because CONFIG_VT and CONFIG_SUN_KEYBOARD won't be 
set early enough.
Three possible options, none of them especially good:
1. Do various munging of config and make setup and try to cover this.
2. Move keyboard handling code to input subsystem
3. Do wholesale backport of input subsystem from 2.5
Brad
-- 
http://conf.linux.org.au
. 22-25Jan2003. Perth, Australia. Birds in Black.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/