Date: Fri, 20 Aug 2004 11:44:44 -0500
From: "Wes Felter" <>
Subject: Re: SMP cpu deep sleep
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/8/20/265

On Fri, 20 Aug 2004 10:06:47 +0200, Hans Kristian Rosbach wrote:
> While reading through hotplug and speedstep patches
> I came to think of a feature I think might be useful.
> 
> In an SMP system there are several cpus, this generates
> extra heat and power consuption even on idle load.
> Is there a way to put all cpus but cpu1 into a kind of
> deep sleep? Cpu1 would have to do all work (including irqs)
> of course.
> 
> We have a lot of SMP systems that we host, and they
> are heavily used ~10 hours of the day, the rest they are
> mostly idle. They could run on only 1 cpu during lenghty
> idle periods.
> 
> If it is possible to put cpus to a deeper sleep than
> just the simple idle, then the kernel could make use of this.
I worked on this last year (I call it CPU packing, because the idea is to
pack the load onto the fewest number of CPUs).
The CPU hotplug patch is the way to go, but the hardware is the problem. I
talked to an Intel CPU architect at MICRO last year and he confirmed that
SMP Intel systems don't support any low-power modes besides HLT. AMD's
documentation says that Opterons support voltage/frequency scaling (aka
Cool 'n' Quiet), but AFAICT the documentation is wrong. In summary, you
are doomed.
-- 
Wes Felter
Power-Aware Systems Department
IBM Austin Research Lab
11400 Burnet Road, Austin, TX 78758
Tel 512-838-7933
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/