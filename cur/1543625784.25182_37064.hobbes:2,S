Date: Mon, 25 Mar 2002 10:04:26 +0200 (SAST)
From: Zwane Mwaikambo <>
Subject: Re: preempt-related hangs
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/3/25/35

On Sun, 24 Mar 2002, Andrew Morton wrote:
> I sent this email to Ingo last week; seems that he's
> having some downtime.  It was happening on my dual PIII
> and I now discover that the quad pIII does the same
> thing.  Any ideas?
> 
> 
> Kernel is 2.5.7, dual PIII.  When I enable preempt it
> locks during boot.
same 2.5.7 here with quad ppro emulation, i have preempt disabled.
> I applied the kgdb patch and had a poke.
> 
> (gdb) info threads
> * 6 Thread 6  preempt_schedule () at sched.c:848
>   5 Thread 5  preempt_schedule () at sched.c:848
>   4 Thread 4  context_thread (startup=0xc0395f90) at context.c:101
>   3 Thread 3  migration_thread (unused=0x0) at sched.c:1646
>   2 Thread 2  migration_thread (unused=0x0) at sched.c:1646
>   1 Thread 1  spawn_ksoftirqd () at softirq.c:407
> 
> Note that init is stuck in spawn_ksoftirqd.  It's spinning in
> that function, yielding, waiting for the softirqd threads to
> come alive.  They're threads 5 and 6.
I'm locking in the same place i have my last CPU spinning, waiting for its 
softirqd thread. Then i get a smp_migrate_task IPI from an alive CPU, at 
which case i'm stuck.
	Zwane
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/