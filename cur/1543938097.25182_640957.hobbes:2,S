Date: Sun, 20 Jan 2008 14:08:15 +0100
From: xming <>
Subject: Re: Cannot boot xen DomU > 2.6.23.1
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/20/55

On Jan 18, 2008 6:26 PM, Jeremy Fitzhardinge <jeremy@goop.org> wrote:
> >> Would it be possible to map the eip and some top parts of the stack back
> >> to kernel symbols?  Seems to be the same place in both traces, which is
> >> interesting.
> Do "nm -n vmlinux" on the kernel to set an address sorted list of
> symbols, and then look to see what's near the eip (c037c0c7) and near
> the top of the stack (c0100add, c0378980, c0101962, ...).  Some of these
> may be in data, or other strange places, but the ones which correspond
> to code are interesting.
ok I have done some of them, but I still don't know what I should be looking
at. Do you mean code related to xen or code related to have_vcpu_info_placement?
Please be patient with me :)
I just paste some of the result (around those addresses) here:
c037b000 B empty_zero_page
c037c000 B hypercall_page
c037d000 B system_state
c0100a00 t xen_cpuid
c0100a80 t xen_set_debugreg
c0100a90 t xen_get_debugreg
c0100aa0 t xen_save_fl
c0100ac0 t xen_irq_disable
c0100ad0 t xen_safe_halt
c0100af0 t xen_halt
c0100b20 t xen_store_tr
c0100b30 t cvt_gate_to_trap
c0100bb0 t xen_io_delay
c0378980 D per_cpu__irq_stat
c03789c0 d per_cpu__runqueues
c0378df4 D __per_cpu_end
c01018b0 t xen_flush_tlb_single
c0101940 t xen_idle
c0101980 T xen_setup_features
c01019c0 T xen_mc_flush
c0101aa0 T xen_mc_callback
c0104710 T kernel_thread
c01047c0 T cpu_idle
c0104840 T cpu_idle_wait
c0104940 T exit_thread
c0103fe4 T xen_irq_enable_direct
c0103ff1 T xen_irq_enable_direct_reloc
c0103ff5 T xen_irq_enable_direct_end
c0103ff8 T xen_irq_disable_direct
c0104000 T xen_irq_disable_direct_end
c0104004 T xen_save_fl_direct
c0104011 T xen_save_fl_direct_end
c0104014 T xen_restore_fl_direct
c010402b T xen_restore_fl_direct_reloc
c03483f0 t maxcpus
c0348430 t unknown_bootoption
c0348610 T parse_early_param
> >> Hm, I guess some of the output is getting dropped.  Does this happen
> >> with 2.6.18-xen?
> > yes it does
> OK, good.  I Didn't Break It (tm) ;)
So no fix from you? :)
Thanks