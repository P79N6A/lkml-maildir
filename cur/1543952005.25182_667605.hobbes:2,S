Date: Fri, 14 Mar 2008 10:44:45 +0100
From: Haavard Skinnemoen <>
Subject: Re: [PATCH] at73c213: Fix DMA size at the end of DMA buffer
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/3/14/83

On Mon, 10 Mar 2008 23:43:06 +0900 (JST)
Atsushi Nemoto <anemo@mba.ocn.ne.jp> wrote:
> +		size = runtime->period_size * runtime->channels;
> +		if (next_period == runtime->periods - 1)
> +			size += (runtime->buffer_size % runtime->period_size)
> +				* runtime->channels;
Ow. That looks expensive. Isn't there any way we can force the client
to select sane values of buffer_size and period_size?
It seems like a reasonable demand that buffer_size is a multiple of
period_size, doesn't it?
Haavard