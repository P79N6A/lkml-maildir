Date: Fri, 14 May 1999 12:04:40 +0200
From: Pavel Machek <>
Subject: Re: PATCH: rewritten bdflush
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/5/15/73

Hi!
> > > There is one notable side effect: you don't have to run the user space
> > > update anymore, bdflush wakes up every so often all by itself.  I
> > 
> > How about notebook users who have configured update to stop
> > writing out buffers and spin down disks after some idle time?
> 
> I think we might want to change the kernel's behaviour
> to include the following things:
> - don't flush if:
> 	- there are less than X dirty buffers &&
> 	- we haven't recently read from the disk
> - flush if:
> 	- there are more than X dirty buffers ||
> 	- we issued a read from the disk more than
> 	  Y and less than Z seconds ago ||
> 	- the dirty buffer is FAR too old
> 	  (say, an hour or so)
This is policy. Policy does not belong in kernel. (I, for example, do
not like hour limit - it is way too low. My atimes do not need to be
written; system can run 2 hours on backup batery and will suspend to
disk after that. Only chance for crash is kernel bug. And there are no
bugs in stable kernel, are they?
[but I believe this is much better than current status]
								Pavel
PS: So there's at least one system, which just can not crash. Why do
you want to sync 1 hour old buffers to disk on it? Why do you want to
sync 1 year old buffers to disk? You don't want.
-- 
The best software in life is free (not shareware)!		Pavel
GCM d? s-: !g p?:+ au- a--@ w+ v- C++@ UL+++ L++ N++ E++ W--- M- Y- R+
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/