Date: Tue, 24 Jan 2006 22:14:10 -0600
From: Brian Twichell <>
Subject: Re: [PATCH/RFC] Shared page tables
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/1/24/289

Brian Twichell wrote:
>
> We evaluated page table sharing on x86_64 and ppc64 setups, using a 
> database
> OLTP workload.  In both cases, 4-way systems with 64 GB of memory were 
> used.
>
> On the x86_64 setup, page table sharing provided a 25% increase in 
> performance,
> when the database buffers were in small (4 KB) pages.  In this case, 
> over 14 GB
> of memory was freed, that had previously been taken up by page 
> tables.  In the
> case that the database buffers were in huge (2 MB) pages, page table 
> sharing
> provided a 4% increase in performance.
>
> Our ppc64 experiments used an earlier version of Dave's patch, along with
> ppc64-specific code for sharing of ppc64 segments.  On this setup, page
> table sharing provided a 49% increase in performance, when the database
> buffers were in small (4 KB) pages.  Over 10 GB of memory was freed, that
> had previously been taken up by page tables.  In the case that the 
> database
> buffers were in huge (16 MB) pages, page table sharing provided a 3% 
> increase
> in performance.
>
Hi,
Just wanted to dispel any notion that may be out there that
the improvements we've seen are peculiar to an IBM product
stack.
The 49% improvement observed using small pages on ppc64 used
Oracle as the DBMS.  The other results used DB2 as the DBMS.
So, the improvements not peculiar to an IBM product stack,
and moreover the largest improvement was seen with a non-IBM
DBMS.
Note, the relative improvement observed on each platform/pagesize
combination cannot be used to infer relative performance between
DBMS's or platforms.
Cheers,
Brian
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/