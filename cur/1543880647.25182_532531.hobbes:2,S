Date: Thu, 19 Apr 2007 17:39:30 +0100
From: Dale Amon <>
Subject: Re: Problem with ufs nextstep in 2.6.18 (debian)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/4/19/270

On Mon, Apr 16, 2007 at 11:32:04AM +0400, Evgeniy Dushistov wrote:
> >The error also happens in 2.6.19, same as in 2.6.18.
> >I extracted this from syslog: 
> >Apr 17 00:14:15 kdev kernel: UFS-fs error (device loop0):
> >ufs_check_page: bad entry
> 
> Is this happened also with this patch:
> 
http://lkml.org/lkml/diff/2007/2/5/75/1
> ?
> 
> -- 
> /Evgeniy
I tried the patch but it would not apply to 2.6.20.7 and
appeared to already exist in that release as patch was
asking me about reversing the patch. So I just built a
vanilla version:
Linux otv2 2.6.20.7-i686 #1 SMP Tue Apr 17 02:33:19 BST 2007 i686 GNU/Linux
and then tried the mount again:
otv2:/dma/FloppyDisks-3.50# mount -t ufs -o ro,ufstype=nextstep,loop NeXT-Diagram1-fd0a.ufs /floppy
otv2:/dma/FloppyDisks-3.50# df
Filesystem           1K-blocks      Used Available Use% Mounted on
/dev/hda2              8649576   5141412   3068788  63% /
tmpfs                   128128         0    128128   0% /lib/init/rw
udev                     10240        60     10180   1% /dev
tmpfs                   128128         0    128128   0% /dev/shm
/dma/FloppyDisks-3.50/NeXT-Diagram1-fd0a.ufs
                          1255      1184        71  95% /media/floppy0
otv2:/dma/FloppyDisks-3.50# ls /floppy
ls: reading directory /floppy: Input/output error
I find in syslog:
Apr 19 17:34:29 localhost kernel: UFS-fs error (device loop0): ufs_check_page: bad entry in directory #2: directory entry across blocks - offset=140, rec_len=884, name_len=7
Apr 19 17:34:29 localhost kernel: UFS-fs error (device loop0): ufs_readdir: bad page in #2
I would be happy to supply you with an image of the NeXT /dev/fd0a
floppy partition if you would like, or even a full image of
the floppy made via the NeXT raw device /dev/rfd0b.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/