Date: Sun, 4 Jan 2009 13:32:39 +0300
From: Cyrill Gorcunov <>
Subject: Re: early exception error
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2009/1/4/42

[Andi Kleen - Sun, Jan 04, 2009 at 01:59:04AM +0100]
| > Hint: line 442 in 2.6.28 is
| > if (!bdata->node_bootmem_map)
| > ;)
| > 
| > It's:
| > 0xffffffff8096452a <alloc_bootmem_core+69>:     cmpq   $0x0,0x10(%rbp)
| > and hence cr2 is 10.
| > 
| > node_data[nid] is NULL... But both of them are set up. Maybe too high nid (and
| > pnum in sparse_init)?
| 
| I think it's because SRAT parsing failed and the fallback forget
| to clean some state. Or at least I thought that until numa=noacpi
| failed too (if it fails the same way that theory is not correct)
| 
| -Andi
| > 
| 
| -- 
| ak@linux.intel.com
| 
according to image David's machine fails the same
way for numa=noacpi (unfortunately).
Actually I found one bug in memory_present -- in
case of SLAB code being activated (which should
be later stage of booting so it's not our case
now) sparse_index_init could fail with -ENOMEM
and we'll try to deref NULL in further. I'm fixing
it now but again -- it's not the issue we have now.
To Jiri: good catch! :-)
		- Cyrill -