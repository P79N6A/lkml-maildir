Date: Sun, 26 Feb 2006 16:31:28 -0500
From: Lee Revell <>
Subject: Re: old radeon latency problem still unfixed?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/2/26/157

On Mon, 2006-02-27 at 08:11 +1100, Benjamin Herrenschmidt wrote:
> > AFAICT it's more like trading 3D performance for having audio work at
> > all.  Other video drivers that were too aggressive and caused audio
> > dropouts (VIA) were fixed, even though there was a slight performance
> > cost.
> 
> In addition, the radeon DRI shouldn't do active spinning like that in
> "normal" circumstances ... it should instead block on interrupts. if it
> does, I suppose that could safely be considered as a bug in the radeon
> DRM/DRI driver. It will do such loops on engine reset and such, which
> happen on X launch, VT switches or in case of lockups... I have to
> double check what happens in the code path used for 2d/3d transitions
> though, those might be a problem.
What about switching from 2D->3D mode, like when xscreensaver kicks in?
IIRC people reported audio underruns when that happened but I could
never narrow it down any further.
If as Arjan said the only lock this driver takes is the BKL then it's
either a local config issue (ancient kernel or failure to enable preempt
BKL) or something at the hardware level... I'm waiting for more info
from the original reporter.
Lee
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/