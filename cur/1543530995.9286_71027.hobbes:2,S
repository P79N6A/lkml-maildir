Date: Mon, 20 Mar 2000 16:02:03 -0800
From: David Schleef <>
Subject: modbuild-0.0.1: building modules outside the kernel (was: new IRQ scalability changes in 2.3.48)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/3/20/249

On Mon, Mar 20, 2000 at 06:09:10PM +0000, Alan Cox wrote:
> > modules, but as I'm not a big believer in stable binary interfaces anyway
> > (binary modules are quite problematic as it is), I actually much prefer to
> > tell people that they have to recompile their modules if they change the
> > type of their kernel.
> 
> This is actually something for the Makefile and config hackers to ponder
> actually: being able to pack a 2.4 extra module as source so that the
> end user (or their rpm, dpkg, slp,... tools) can type Make and the Make
> script can grab all the needed config from the kernel .config and module
> syms that are already present
> 
Interesting, as I did that a few months ago for the Comedi package.  I
basically copied Makefile, Configure, and Rules.make, and edited where
appropriate.  The result is that you can now do a
'mv comedi /usr/src/linux/drivers', make sure that comedi/Config.in is
included somewhere, and the same source tree compiles inside or outside
the kernel.  The opposite also works, i.e., copying directories out
of the kernel and compiling them separately.
Anyway, I've been meaning to release these changes as a separate
package, mainly because RTLinux/RTAI users find it very useful.  But
anyone who distributes non-kernel modules may also find it useful.
So today I actually did it:  The package "modbuild" is now available at
ftp://stm.lbl.gov/pub/modbuild/modbuild-0.0.1.tgz.
I wouldn't be surprised if about 10 other people have solved exactly
the same problem already.  If you have, let me know.  Also, patches
are welcome.
The main changes that were necessary were to differentiate between
LINUXDIR and TOPDIR.  These changes should probably be merged into
the kernel.
dave...
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/