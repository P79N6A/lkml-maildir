Date: 04 Sep 2001 22:03:43 +0200
From: Trond Myklebust <>
Subject: Re: NFS to Irix server broken again in 2.4.9
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/9/4/118

>>>>> " " == David Rees <dbr@greenhydrant.com> writes:
     > Previous 2.4.X kernels didn't require the 32bitclients option
     > on the IRIX server for some reason.
That was because prior to 2.4.9 the kernel would automatically
truncate the getdents() offsets to 32 bits. We now have true 64 bit
offsets, and they actually get passed back to userland.
glibc-2.x's 32 bit version of readdir() still assumes that
getdents64() syscall returns some an offset (rather than a cookie) and
that the offset fits into 32bits on ordinary directories.
Using '32bitclients' on these older IRIX servers sort of shoehorns
them into the glibc assumptions in the same way the 32 bit truncation
in kernels 2.4.[0-8] did.
Cheers,
   Trond
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/