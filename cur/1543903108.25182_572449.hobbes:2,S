Date: Fri, 20 Jul 2007 12:14:48 -0300
From: Glauber de Oliveira Costa <>
Subject: Re: [PATCH] Use descriptor's functions instead of inline assembly
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/7/20/215

On Fri, 2007-07-20 at 16:23 +0200, Frederik Deweerdt wrote:
> On Fri, Jul 20, 2007 at 10:56:01AM -0300, Glauber de Oliveira Costa wrote:
> > This patch provides a new set of functions for managing the descriptor
> > tables that can be used instead of putting the raw assembly in .c files.
> > 
> > Signed-off-by: Glauber de Oliveira Costa <gcosta@redhat.com>
> > 
> > -	asm volatile ("str %0"  : "=m" (ctxt->tr));
> > +	store_gdt((struct desc_ptr *)&ctxt->gdt_limit);
> > +	store_idt((struct desc_ptr *)&ctxt->idt_limit);
> > +	ctxt->tr = store_tr();
> > 
> Would'nt a store_tr(&ctxt->tr) be more homogeneous here?
Indeed, it would. The main reason I let it this way was to keep it closer to
the i386 paravirt code (which is the main reason I'm sending this
patches - to pave the way for the x86_64 one), but they seem to be
getting an argument for store_tr in current tree. So there's no arguable
advantage on doing it my way at all ;-)
Thanks
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/