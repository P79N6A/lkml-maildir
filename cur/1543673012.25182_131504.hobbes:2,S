Date: 10 May 2003 10:46:57 -0400
From: Shane Shrybman <>
Subject: Re: Can't find CDR device in -mm only
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/5/10/67

Hi Jens,
On Sat, 2003-05-10 at 05:20, Jens Axboe wrote:
> On Fri, May 09 2003, Shane Shrybman wrote:
> > Hi,
> > 
> > The problem first appeared in 2.5.68-mm3 and is not in mainline 2.5.69.
> > It is present in all -mm releases since.
> 
> Curious. Looking at patches between .68-mm2 and -mm3 reveals nothing
> major, in fact the only thing touching anything in that area seems to be
> the dynamic request allocation patch. Could you try 2.5.69 with the
> attached patch to verify that it still works (or doesn't)? There might
> be a small offset in deadline-iosched.c, should be nothing to worry
> about.
Still doesn't work with 2.5.69 + rq_dyn. The output from cdrecord is
below.
BTW, I also tried a 2.5.68-mm3 with 64bit_dev_t, blockdev-aio-support,
and disk_name-size-check backed out but still encountered the problem.
scsidev: '/dev/hdc'
devname: '/dev/hdc'
scsibus: -2 target: -2 lun: -2
scg__open(/dev/hdc) -2,-2,-2
Warning: Open by 'devname' is unintentional and not supported.
l1: 0x0 l2: 0x10
Bus: 0 Target: 0 Lun: 0 Chan: 0 Ino: 0
Linux sg driver version: 3.5.27
l1: 0x0 l2: 0x3
Bus: 0 Target: 0 Lun: 0 Chan: 0 Ino: 0
Target (0,0,0): DMA max 129024 old max: 64512
SCSI buffer size: 64512
Target (0,0,0): DMA max 129024 old max: 64512
scgo_getbuf: 64512 bytes
ioctl ret: 0
host_status: 00 driver_status: 00
ioctl ret: 0
host_status: 00 driver_status: 00
ioctl ret: 0
host_status: 00 driver_status: 00
dev: '/dev/hdc' speed: -1 fs: 4194304 driveropts '(NULL POINTER)'
Cdrecord 2.0 (i686-pc-linux-gnu) Copyright (C) 1995-2002 JÃ¶rg Schilling
TOC Type: 1 = CD-ROM
Using libscg version 'schily-0.7'
atapi: 1
Device type    : Disk
Version        : 2
Response Format: 2
Capabilities   : 
Vendor_info    : 'ADAPTEC '
Identifikation : 'ACB-5500        '
Revision       : 'FAKE'
Device seems to be: Adaptec 5500.
Regards,
Shane
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/