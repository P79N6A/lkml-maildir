Date: Sat, 16 Nov 2002 01:16:41 +0100
From: Matthias Andree <>
Subject: Re: IDE TCQ
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/11/15/301

On Wed, 13 Nov 2002, Jens Axboe wrote:
> > Second set of questions: Does it do any good to one-channel-one-disk
> > setups?  Is it supposed to do good to access time, operations/sec,
> > throughput, random reqs rearrangement or what?  Do you have any
> > figures how much TCQ helps performace (e.g. in file serving case)?
> 
> Yes it will help any setup. Due to way ide tcq works, it's recommended
> only to use tcq on one drive on a channel right now. This may change in
> the future.
Would be "it's recommended to use only one drive on a channel for best
results, whether with or without TCQ" more accurate? Or are there
reasons that make TCQ <-> slave interactions particularly bad that don't
show up without TCQ?
> I don't have any general numbers. I did some benchmarking when I first
> implemented it, and it typically shows (as with scsi drives) that having
> just enough tags to keep the disk busy helps a bit. The linux io
> scheduler does the rest. For random reads, 10-30% speed increase was
> observed.
Did you perchance benchmark the impact TCQ has on sequential writes when
the write cache is turned off?
Turning off the write cache without TCQ has a severe impact (30 to 70%
on my "stupid dd" tests) in my computer (VIA82C686, but I don't recall
which drive I did this on, it was either of IBM DJNA, DTLA or Maxtor
4W060H4)
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/