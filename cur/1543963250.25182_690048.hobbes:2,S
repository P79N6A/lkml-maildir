Date: Thu, 08 May 2008 04:17:43 +0200
From: Rene Herman <>
Subject: Re: [PATCH] x86: introduce a new Linux defined feature flag for PAT support
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/5/7/463

On 08-05-08 04:11, H. Peter Anvin wrote:
> Indeed it wasn't, and at least I have no interest of maintaining what is 
> in effect an in-kernel version of x86info(1).
> 
> *Certainly* I don't want anything like this crap:
> 
>> diff --git a/arch/x86/mm/pat.c b/arch/x86/mm/pat.c
>> index 277446c..6ee3efb 100644
>> --- a/arch/x86/mm/pat.c
>> +++ b/arch/x86/mm/pat.c
>> @@ -43,7 +43,7 @@ static int pat_known_cpu(void)
>>     if (!pat_wc_enabled)
>>         return 0;
>>
>> -    if (cpu_has_pat)
>> +    if (cpu_has_pat && cpu_has_pat_good)
>>         return 1;
if (cpu_has_pat_good) would have been the exact same as now. Feel free
to drop the cpu_has_pat one but it's not crap. That whitelist thing
checks nothing -- and things like CONSTANT_TSC also don't, so I didn't
make the feature itself conditional. It has but one call site anyway.
Rene.