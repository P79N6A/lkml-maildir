Date: Fri, 13 Aug 2004 05:28:37 +0800
From: Coywolf Qi Hunt <>
Subject: [PATCH] Remove wildcard on KBUILD_OUTPUT
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/8/12/221

sam@ravnborg.org wrote:
>>You misunderstood me.
>>This patch removes unnecessary wildcard on KBUILD_OUTPUT and unused VPATH.
>>If it looks ok, I'd like to send it to lkml and akpm.
>> 
>>
>
>Try building a kernel where you use O= to specify another output directory.
>Try with an existing and a non-existing directory.
>
>You will see why both are needed.
>
> 
>
I searched VPATH in the manual. I was wrong on removing VPATH.
But I still think wildcard is unnecessary.
I did build kernel with another output directory, both existing and 
non-existing before mailling you.
And even when KBUILD_OUTPUT contains wildcard. Ok, I just saw Kai's 
reply. I Needn't further explain.
Kai Germaschewski wrote:
>>Try building a kernel where you use O= to specify another output directory.
>>Try with an existing and a non-existing directory.
>> 
>>
>
>I suspect that the patch works, if $(shell ...) returns what's written to 
>stdout, KBUILD_OUTPUT would be empty and thus the wildcard unnecessary. Of 
>course I'm too lazy to test it out, too...
>
>--Kai
>
>
> 
>
Signed-off-by: Coywolf Qi Hunt <coywolf@greatcn.org>
--- linux-2.6.8-rc4-mm1/Makefile	2004-08-12 13:59:10.000000000 -0500
+++ linux-2.6.8-rc4-mm1-cy/Makefile	2004-08-12 16:09:08.171039406 -0500
@@ -102,7 +102,7 @@ ifneq ($(KBUILD_OUTPUT),)
 # check that the output directory actually exists
 saved-output := $(KBUILD_OUTPUT)
 KBUILD_OUTPUT := $(shell cd $(KBUILD_OUTPUT) && /bin/pwd)
-$(if $(wildcard $(KBUILD_OUTPUT)),, \
+$(if $(KBUILD_OUTPUT),, \
      $(error output directory "$(saved-output)" does not exist))
 
 .PHONY: $(MAKECMDGOALS)
-- 
Coywolf Qi Hunt
Homepage 
http://greatcn.org/~coywolf/
Admin of 
http://GreatCN.org
 and 
http://LoveCN.org
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/