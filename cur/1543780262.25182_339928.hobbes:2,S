Date: Sun, 07 Aug 2005 11:55:16 -0700
From: "Martin J. Bligh" <>
Subject: Re: EXPORT_SYMBOL generates "is deprecated" noise
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/8/7/96

--Adrian Bunk <bunk@stusta.de> wrote (on Sunday, August 07, 2005 20:23:12 +0200):
> On Sun, Aug 07, 2005 at 11:07:59AM -0700, Martin J. Bligh wrote:
>> I'm getting lots of errors like this nowadays:
>> 
>> drivers/serial/8250.c:2651: warning: `register_serial' is deprecated 
>> (declared at drivers/serial/8250.c:2607)
>> 
>> Which is just: "EXPORT_SYMBOL(register_serial);"
>> 
>> Sorry, but that's just compile-time noise, not anything useful.
>> Warning on real usages of it might be handy (we can go fix the users)
>> but not EXPORT_SYMBOL - we can't kill the export until the function
>> goes away. The more noise we have, the harder it is to see real errors 
>> and warnings.
>> 
>> I took a quick poke around, but can't see what generates this stuff.
>> What is doing these checks, and can we please make an exception for
>> EXPORT_SYMBOL (and EXPORT_SYMBOL_GPL) somehow?
> 
> This is generated by the __deprecated marker (#define'd to 
> __attribute__((deprecated)) ) at the prototype in 
> include/linux/serial.h.
> 
> You could somehow #ifdef the warning away, but IMHO this would be more 
> ugly than living with the warning until the last user is gone.
If it's going to spout crap when I'm not even using the deprecated
function, it's worse than useless, I'm afraid. 
I tried some "smart" nested definitions to just wrap it inside EXPORT_SYMBOL, 
but the ordering of evaluation is all wrong. Bah ;-(
M.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/