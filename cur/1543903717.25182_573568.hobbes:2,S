Date: Mon, 23 Jul 2007 04:17:05 -0700 (PDT)
From: Trent Piepho <>
Subject: Re: [1/2] 2.6.23-rc1: known regressions
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/7/23/137

On Mon, 23 Jul 2007, Michal Piotrowski wrote:
> ACPI
>
> Subject         : drivers/misc/asus-laptop.c:*: error: 'struct led_classdev' has no member named 'class_dev'
> References      : 
http://lkml.org/lkml/2007/7/22/299
> Last known good : ?
> Submitter       : Gabriel C <nix.or.die@googlemail.com>
> Caused-By       : ?
> Handled-By      : ?
> Status          : unknown
Here's a trivial patch for this one.
------------------------------------------------------------------------
asus-laptop: Sync with changes to led class
Driver was broken by commit f8a7c6fe14f556ca8eeddce258cb21392d0c3a2f
	leds: Convert from struct class_device to struct device
	Convert the LEDs class from struct class_device to struct device
	since class_device is scheduled for removal.
Use (struct led_classdev).dev instead of (struct led_classdev).class_dev
diff -r 3f21143ca44c drivers/misc/asus-laptop.c
--- a/drivers/misc/asus-laptop.c	Sun Jul 22 21:30:24 2007 +0000
+++ b/drivers/misc/asus-laptop.c	Mon Jul 23 03:47:55 2007 -0700
@@ -1067,8 +1067,8 @@ static void asus_backlight_exit(void)
 }
 #define  ASUS_LED_UNREGISTER(object)				\
-	if(object##_led.class_dev				\
-	   && !IS_ERR(object##_led.class_dev))			\
+	if(object##_led.dev					\
+	   && !IS_ERR(object##_led.dev))			\
 		led_classdev_unregister(&object##_led)
 static void asus_led_exit(void)
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/