Date: Wed, 17 Sep 2003 21:09:54 +0200
From: Bartlomiej Zolnierkiewicz <>
Subject: Re: Changes in siimage driver?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/9/17/122

On Wednesday 17 of September 2003 20:49, Arve Knudsen wrote:
> On Wed, 17 Sep 2003 17:40:36 +0100, Alan Cox <alan@lxorguk.ukuu.org.uk>
>
> wrote:
> > On Mer, 2003-09-17 at 17:26, Arve Knudsen wrote:
> >> X66 etc.) with hdparm, I get ~50MB/S. It's not an ideal solution since
> >> now
> >> and then I get a bunch of "disabling irq #18" messages after running
> >> hdparm (I think, its part of the startup scripts), and I have to
> >> restart.
> >
> > That is a bug in the 2.6.0 core still. Just hack out the code which does
> > the IRQ disable on too many apparently unidentified interrupts.
>
> Ok, thanks for identifying the source of this. I'm no kernel hacker at
> all, but I'll see what I can find.
s/IRQ_NONE/IRQ_HANDLE/ in ide-io.c or trace which one is offending one.
> >> directories. Am I the only one who's run into any sort of issues with
> >> the
> >> updated driver? From what I can see it hasn't been modified in the last
> >> revision (test5-bk4), hopefully noone is losing important data because
> >> of
> >> this (fortunately I had some recent backups). Anyway, I'd like some
> >> feedback on this from those in the know (the performance drop should be
> >> fairly easy to verify, unless hdparm is playing tricks on me).
> >
> > Don't keep important data only on 2.6-test boxes. Its 'test' - it
> > shouldnt eat anything but...
>
> Well, I understand that, but the older version of the driver (as of
> test4-mm4) doesn't have these problems (better performance according to
> hdparm, no corruption). The latest changes to the driver seems to have
> introduced problems, or is it just me?
You are the first person reporting problems after syncing siimage driver with
2.4.x ;-).  It's unlikely that corruption is caused by siimage driver update,
we should have seen similar problems with 2.4.x, but...
Performance is crippled because of workaround for buggy controllers.
We turn it on unconditionally now, we should do it only on affected
controllers.  I believe freebsd's workaround is correct and we can adopt it.
For more details please see the other thread regarding siimage.
--bartlomiej
> Thanks for the swift reply
>
> Arve Knudsen
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/