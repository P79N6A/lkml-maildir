Date: Fri, 3 Nov 2006 11:00:58 -0800 (PST)
From: dean gaudet <>
Subject: Re: New filesystem for Linux
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/11/3/150

On Fri, 3 Nov 2006, Mikulas Patocka wrote:
> > On Thu, 2 November 2006 22:52:47 +0100, Mikulas Patocka wrote:
> > > 
> > > new method to keep data consistent in case of crashes (instead of
> > > journaling),
> > 
> > Your 32-bit transaction counter will overflow in the real world.  It
> > will take a setup with millions of transactions per second and even
> > then not trigger for a few years, but when it hits your filesystem,
> > the administrator of such a beast won't be happy at all. :)
> > 
> > JÃ¶rn
> 
> If it overflows, it increases crash count instead. So really you have 2^47
> transactions or 65536 crashes and 2^31 transactions between each crash.
it seems to me that you only need to be able to represent a range of the 
most recent 65536 crashes... and could have an online process which goes 
about "refreshing" old objects to move them forward to the most recent 
crash state.  as long as you know the minimm on-disk crash count you can 
use it as an offset.
-dean
p.s. i could see a network device with spotty connectivity causing a large 
bump in crash count in a short period of time.