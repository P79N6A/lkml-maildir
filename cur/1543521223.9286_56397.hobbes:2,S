Date: Fri, 7 Jan 2000 14:22:04 -0600
From:  nathan.zook@amd ...
Subject: RE: Memory detection is still broken in 2.3.36
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/1/7/219

There is yet another problem with this.  Memory types 1-4 are the only ones
currently defined, but ACPI 1.0b REQUIRES us to accept all type, with the
unknown types being treated as reserved.  In the limit, this means that we
are being unsafe if we start defining our own memory types in the 32-bit
field already defined.
FURTHERMORE:  Linus has indicated his desire not only to preserve the bios
data, but to move in the direction of iomem_resource.  This means, for
instance, that the reserved 0x0f0000 - 0x0fffff region you have should be
reflected in /proc/iomem.  He has also placed the video region (0x0a0000 -
0x0bffff) there.  This makes it impossible to add a region from, say,
0x0a0000-0x0fffff.
Which is NOT to say that we cannot do everything we would like, it just
means that it isn't necessarily easy. It would be MUCH easier if everyone
else would just stop development while David & I worked this out. ;-)))))
Nathan
Who still has his original working patch from 2.3.19--meaning as86.
-----Original Message-----
From: david parsons [mailto:orc@pell.portland.or.us]
Sent: Friday, January 07, 2000 12:42 PM
To: lkd@tantalophile.demon.co.uk
Cc: Zook, Nathan; orc@pell.portland.or.us; pavel@suse.cz;
david+nospam@killerlabs.com; linux-kernel@vger.rutgers.edu;
andre@suse.com
Subject: Re: Memory detection is still broken in 2.3.36
Jamie Lokier wrote:
> fwiw, this comment (Some biosities report...) in mm/init.c is in the
> wrong place.
    It's gone.
 
> I'd be inclined to put all the e820 corrections in one place, perhaps by
> altering the map in setup_memory_region.  How about defining a new type
> E820_UNUSABLE and changing broken usable regions to unusable ones, so
> they show up in the log.
    Linus has expressed a preference for keeping the e820 map intact,
    so that sort of patch might not fly very far.  In any case, the
    recent patches (both my memory detect patch and Nathan's big
    memory region merge/paranoia/acpi reclaim/kmem= patch) both massage
    the bios data into a second array of memory regions, all of which
    have been sanitized for your protection.
                  ____
    david parsons \bi/ beware e820.  It lies to you.
                   \/
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/