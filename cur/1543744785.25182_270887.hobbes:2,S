Date: Sun, 14 Nov 2004 12:26:10 +0100
From: Andries Brouwer <>
Subject: Re: [netfilter-core] [PATCH] no __initdata in netfilter?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/11/14/36

On Sun, Nov 14, 2004 at 08:56:29AM +0100, Patrick McHardy wrote:
> Andries Brouwer wrote:
> 
> >Stuff marked initdata that is referenced in non-init context.
>
> Where ? The initial tables are replaced by ipt_register_table.
ip_nat_rule.c:nat_initial_table was referenced in
static struct ipt_table nat_table = {
        .table          = &nat_initial_table.repl,
	...
iptable_filter.c:initial_table was referenced in
static struct ipt_table packet_filter = {
        .table          = &initial_table.repl,
	...
This is not to say that there is a bug here, that the .init
data would actually be referenced by non-init stuff, but
it is better to convince oneself by static inspection of
the binary than by reasoning about the flow of the program.
Where the memory savings are important, the code should
be rewritten a bit.
Andries
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/