Date: Fri, 11 Feb 2000 11:22:51 -0500 (EST)
From: "Richard B. Johnson" <>
Subject: 'core' (patch)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/2/11/140

I think it would be "nice" to change the kernel directory name,
presently "core", to "Core". There are various reasons for doing
this, previously discussed on this list. The most recent discovery
I made was that when the kernel subdirectory is mounted across the
network, and accessed by a Sun Workstation, the "core" directory
is lit up like a big red bomb! Harmless, but not necessary.
Here is a patch, plus some hints on how to do this painlessly.
To make this easy, first...
cd /usr/src/linux
cp .config ..
make mrproper
Then:
mv net/core net/Core
Then:
Apply this patch.
patch -p0 < whatever
--- linux/Makefile.orig	Wed Jan 26 16:16:04 2000
+++ linux/Makefile	Thu Feb 10 16:29:28 2000
@@ -427,8 +427,8 @@
 clean:	archclean
 	rm -f kernel/ksyms.lst include/linux/compile.h
 	find . -name '*.[oas]' -type f -print | grep -v lxdialog/ | xargs rm -f
-	rm -f core `find . -type f -name 'core' -print`
-	rm -f core `find . -type f -name '.*.flags' -print`
+	rm -f Core `find . -type f -name 'core' -print`
+	rm -f Core `find . -type f -name '.*.flags' -print`
 	rm -f vmlinux System.map
 	rm -f .tmp*
 	rm -f drivers/char/consolemap_deftbl.c drivers/video/promcon_tbl.c
@@ -459,13 +459,13 @@
 	rm -f include/asm
 	rm -rf include/config
 	rm -f .depend `find . -type f -name .depend -print`
-	rm -f core `find . -type f -size 0 -print`
+	rm -f Core `find . -type f -size 0 -print`
 	rm -f .hdepend scripts/mkdep scripts/split-include
 	rm -f $(TOPDIR)/include/linux/modversions.h
 	rm -rf $(TOPDIR)/include/linux/modules
 
 distclean: mrproper
-	rm -f core `find . \( -name '*.orig' -o -name '*.rej' -o -name '*~' \
+	rm -f Core `find . \( -name '*.orig' -o -name '*.rej' -o -name '*~' \
 		-o -name '*.bak' -o -name '#*#' -o -name '.*.orig' \
 		-o -name '.*.rej' -o -name '.SUMS' -o -size 0 \) -print` TAGS tags
 
--- linux/net/Makefile.orig	Thu Feb 10 16:34:03 2000
+++ linux/net/Makefile	Thu Feb 10 16:34:26 2000
@@ -8,10 +8,10 @@
 # Note 2! The CFLAGS definition is now in the main makefile...
 
 MOD_SUB_DIRS := ipv4
-ALL_SUB_DIRS := 802 ax25 bridge core ethernet ipv4 ipv6 ipx unix appletalk \
+ALL_SUB_DIRS := 802 ax25 bridge Core ethernet ipv4 ipv6 ipx unix appletalk \
 		netrom rose lapb x25 wanrouter netlink sched packet sunrpc \
 		econet irda decnet atm khttpd
-SUB_DIRS     := core ethernet sched
+SUB_DIRS     := Core ethernet sched
 MOD_LIST_NAME := NET_MISC_MODULES
 
 ifeq ($(CONFIG_NET),y)
--- linux/net/Core/Makefile.orig	Thu Feb 10 16:46:06 2000
+++ linux/net/Core/Makefile	Thu Feb 10 16:46:28 2000
@@ -7,7 +7,7 @@
 #
 # Note 2! The CFLAGS definition is now in the main makefile...
 
-O_TARGET := core.o
+O_TARGET := Core.o
 
 O_OBJS	:= sock.o skbuff.o iovec.o datagram.o scm.o
Then:
cp ../.config .
make oldconfig
make dep
make bzImage
make modules
make modules_install
Cheers,
Dick Johnson
Penguin : Linux version 2.3.41 on an i686 machine (800.63 BogoMips).
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/