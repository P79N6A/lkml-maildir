Date: Fri, 30 Sep 2005 13:37:47 +0200
From: Lars Magne Ingebrigtsen <>
Subject: Re: [PATCH 2.6.14-rc2] libata: Marvell SATA support (DMA mode) (resend: v0.22)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/9/30/66

Brett Russ <russb@emc.com> writes:
> This is my libata compatible low level driver for the Marvell SATA
> family.  Currently it runs in DMA mode on a 6081 chip.
I've tried the new version of the driver on our Supermicro 6024H-T
server with the Marvell 88SX6081 8-port SATA controller.  There are
six disks in the server, if that makes any difference.
When booting up, the driver issued the following text:
sata_mv version 0.22
ACPI: PCI Interrupt 0000:02:03.0[A] -> GSI 56 (level, low) -> IRQ 20
sata_mv(0000:02:03.0) 32 slots 8 ports unknown mode IRQ via INTx
ata1: SATA max UDMA/133 cmd 0x0 ctl 0xF8922120 bmdma 0x0 irq 20
ata2: SATA max UDMA/133 cmd 0x0 ctl 0xF8924120 bmdma 0x0 irq 20
ata3: SATA max UDMA/133 cmd 0x0 ctl 0xF8926120 bmdma 0x0 irq 20
ata4: SATA max UDMA/133 cmd 0x0 ctl 0xF8928120 bmdma 0x0 irq 20
ata5: SATA max UDMA/133 cmd 0x0 ctl 0xF8932120 bmdma 0x0 irq 20
ata6: SATA max UDMA/133 cmd 0x0 ctl 0xF8934120 bmdma 0x0 irq 20
ata7: SATA max UDMA/133 cmd 0x0 ctl 0xF8936120 bmdma 0x0 irq 20
ata8: SATA max UDMA/133 cmd 0x0 ctl 0xF8938120 bmdma 0x0 irq 20
ATA: abnormal status 0x80 on port 0xF892211C
ATA: abnormal status 0x80 on port 0xF892211C
At that point the machine freezes hard -- the SysRq key doesn't work. 
lspci -vxx output for the controller:
02:03.0 RAID bus controller: Marvell Technology Group Ltd. MV88SX6081 8-port SATA II PCI-X Controller (rev 03)
        Subsystem: Super Micro Computer Inc: Unknown device 6080
        Flags: bus master, fast Back2Back, 66Mhz, medium devsel, latency 64, IRQ 5
        Memory at dd200000 (64-bit, non-prefetchable) [size=1M]
        I/O ports at 2000 [size=256]
        Capabilities: [40] Power Management version 2
        Capabilities: [50] Message Signalled Interrupts: 64bit+ Queue=0/0 Enable-
        Capabilities: [60] #07 [0030]
00: ab 11 81 60 17 03 b0 02 03 00 04 01 08 40 00 00
10: 04 00 20 dd 00 00 00 00 01 20 00 00 00 00 00 00
20: 00 00 00 00 00 00 00 00 00 00 00 00 d9 15 80 60
30: 00 00 00 00 40 00 00 00 00 00 00 00 05 01 00 00
-- 
(domestic pets only, the antidote for overdose, milk.)
  larsi@gnus.org * Lars Magne Ingebrigtsen
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/