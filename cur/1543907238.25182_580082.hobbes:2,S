Date: Mon, 6 Aug 2007 15:59:41 -0700
From: Daniel Phillips <>
Subject: Re: [PATCH 02/10] mm: system wide ALLOC_NO_WATERMARK
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/8/6/465

On Monday 06 August 2007 14:05, Christoph Lameter wrote:
> > > That is possible if one
> > > would make sure that the network layer triggers reclaim once in a
> > > while.
> >
> > This does not make sense, we cannot reclaim from reclaim.
>
> But we should limit the amounts of allocation we do while performing
> reclaim...
Correct.  That is what the throttling part of these patches is about.  
In order to fix the vm writeout deadlock problem properly, two things 
are necessary:
  1) Throttle the vm writeout path to use a bounded amount of memory
  2) Provide access to a sufficiently large amount of reserve memory for 
each memory user in the vm writeout path
You can understand every detail of this patch set and the following ones 
coming from Peter in terms of those two requirements.
> F.e. refilling memory pools during reclaim should be disabled.
Actually, recursing into the vm should be disabled entirely but that is 
a rather deeply ingrained part of mm culture we do not propose to 
fiddle with just now.
Memory pools are refilled when the pool user frees some memory, not ever 
by the mm.
Regards,
Daniel
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/