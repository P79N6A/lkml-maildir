Date: Tue, 14 Aug 2007 14:56:35 -0700 (PDT)
From: Christoph Lameter <>
Subject: Re: Regression in 2.6.23-rc2-mm2, mounting cpusets causes a hang
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/8/14/397

On Tue, 14 Aug 2007, Lee Schermerhorn wrote:
> > Ok then you did not have a NUMA system configured. So its okay for the 
> > dummies to ignore the stuff. CONFIG_NODES_SHIFT is a constant and does not 
> > change. The first bit is always set.
> 
> The first bit [node 0] is only set for the N_ONLINE [and N_POSSIBLE]
> mask.  We could add the static init for the other masks, but since
> non-numa platforms are going through the __build_all_zonelists, they
> might as well set the MEMORY bits explicitly.  Or, maybe you'll
> disagree ;-).
The bitmaps can be completely ignored if !NUMA.
In the non NUMA case we define
static inline int node_state(int node, enum node_states state)
{
        return node == 0;
}
So its always true for node 0. The "bit" is set.
We are trying to get cpusets to work with !NUMA?
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/