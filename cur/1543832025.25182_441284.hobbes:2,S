Date: Thu, 06 Jul 2006 17:31:17 -0400
From: Peter Jones <>
Subject: lockdep: bdev->bd_mutex deadlock
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/7/6/300

I got this traceback from lockdep while running last night's Fedora Core
(rawhide) kernel, which is version 2.6.17-1.2356.fc6 .  (I believe it's
based on a fairly current git pull, davej will know for sure.)
I'm not 100% sure if I'm doing something wrong in userland, or is this a
kernel bug, but I'm pretty sure I shouldn't see lockdep complain either
way.
<4>=============================================
<4>[ INFO: possible recursive locking detected ]
<4>---------------------------------------------
<4>anaconda/451 is trying to acquire lock:
<4> (&bdev->bd_mutex){--..}, at: [<c0463f46>] __blkdev_put+0x22/0x123
<4>
<4>but task is already holding lock:
<4> (&bdev->bd_mutex){--..}, at: [<c0464237>] do_open+0x68/0x385
<4>
<4>other info that might help us debug this:
<4>1 lock held by anaconda/451:
<4> #0:  (&bdev->bd_mutex){--..}, at: [<c0464237>] do_open+0x68/0x385
<4>
<4>stack backtrace:
<4> [<c040373c>] show_trace_log_lvl+0x54/0xfd
<4> [<c0403cba>] show_trace+0xd/0x10
<4> [<c0403d57>] dump_stack+0x19/0x1b
<4> [<c042c3ba>] __lock_acquire+0x760/0x987
<4> [<c042cb52>] lock_acquire+0x4b/0x6d
<4> [<c05ec50c>] mutex_lock_nested+0xcc/0x243
<4> [<c0463f46>] __blkdev_put+0x22/0x123
<4> [<c0464060>] blkdev_put+0xa/0xc
<4> [<c04644e2>] do_open+0x313/0x385
<4> [<c0464759>] blkdev_open+0x1f/0x48
<4> [<c045bda0>] __dentry_open+0xb8/0x186
<4> [<c045bedc>] nameidata_to_filp+0x1c/0x2e
<4> [<c045bf1d>] do_filp_open+0x2f/0x36
<4> [<c045bf64>] do_sys_open+0x40/0xbb
<4> [<c045c00b>] sys_open+0x16/0x18
<4> [<c0402dc7>] syscall_call+0x7/0xb
The full syslog is attached.
-- 
  Peter
<5>Linux version 2.6.17-1.2356.fc6 (brewbuilder@hs20-bc2-2.build.redhat.com) (gcc version 4.1.1 20060629 (Red Hat 4.1.1-6)) #1 Thu Jul 6 01:15:09 EDT 2006
<6>BIOS-provided physical RAM map:
<4> BIOS-e820: 0000000000000000 - 000000000009fc00 (usable)
<4> BIOS-e820: 000000000009fc00 - 00000000000a0000 (reserved)
<4> BIOS-e820: 00000000000e4000 - 0000000000100000 (reserved)
<4> BIOS-e820: 0000000000100000 - 000000007ff30000 (usable)
<4> BIOS-e820: 000000007ff30000 - 000000007ff40000 (ACPI data)
<4> BIOS-e820: 000000007ff40000 - 000000007fff0000 (ACPI NVS)
<4> BIOS-e820: 000000007fff0000 - 0000000080000000 (reserved)
<4> BIOS-e820: 00000000fff80000 - 0000000100000000 (reserved)
<4>Warning only 896MB will be used.
<4>Use a HIGHMEM enabled kernel.
<5>896MB LOWMEM available.
<4>Using x86 segment limits to approximate NX protection
<7>On node 0 totalpages: 229376
<7>  DMA zone: 4096 pages, LIFO batch:0
<7>  Normal zone: 225280 pages, LIFO batch:31
<6>DMI 2.3 present.
<7>ACPI: RSDP (v002 ACPIAM                                ) @ 0x000fa850
<7>ACPI: XSDT (v001 A M I  OEMXSDT  0x06000517 MSFT 0x00000097) @ 0x7ff30100
<7>ACPI: FADT (v003 A M I  OEMFACP  0x06000517 MSFT 0x00000097) @ 0x7ff30290
<7>ACPI: MADT (v001 A M I  OEMAPIC  0x06000517 MSFT 0x00000097) @ 0x7ff30390
<7>ACPI: OEMB (v001 A M I  OEMBIOS  0x06000517 MSFT 0x00000097) @ 0x7ff40040
<7>ACPI: DSDT (v001  A0058 A0058002 0x00000002 MSFT 0x0100000d) @ 0x00000000
<6>ACPI: PM-Timer IO Port: 0x808
<4>Allocating PCI resources starting at 88000000 (gap: 80000000:7ff80000)
<4>Detected 2002.597 MHz processor.
<4>Built 1 zonelists.  Total pages: 229376
<5>Kernel command line: initrd=pjones1/rawhide-i386.initrd.img --loglevel=debug nokill ksdevice=bootif ks=
http://devserv.devel.redhat.com/~pjones/ks/rawhide-i386.ks.cfg
 noipv6 text BOOT_IMAGE=pjones1/rawhide-i386.vmlinuz BOOTIF=01-00-0e-a6-70-34-22 
<6>Enabling fast FPU save and restore... done.
<6>Enabling unmasked SIMD FPU exception support... done.
<6>Initializing CPU#0
<4>CPU 0 irqstacks, hard=c0791000 soft=c0790000
<4>PID hash table entries: 4096 (order: 12, 16384 bytes)
<4>Console: colour VGA+ 80x25
<4>Lock dependency validator: Copyright (c) 2006 Red Hat, Inc., Ingo Molnar
<4>... MAX_LOCKDEP_SUBCLASSES:    8
<4>... MAX_LOCK_DEPTH:          30
<4>... MAX_LOCKDEP_KEYS:        2048
<4>... CLASSHASH_SIZE:           1024
<4>... MAX_LOCKDEP_ENTRIES:     8192
<4>... MAX_LOCKDEP_CHAINS:      8192
<4>... CHAINHASH_SIZE:          4096
<4> memory used by lock dependency info: 696 kB
<4> per task-struct memory footprint: 1200 bytes
<4>Dentry cache hash table entries: 131072 (order: 7, 524288 bytes)
<4>Inode-cache hash table entries: 65536 (order: 6, 262144 bytes)
<6>Memory: 897048k/917504k available (1984k kernel code, 19932k reserved, 977k data, 196k init, 0k highmem)
<4>Checking if this processor honours the WP bit even in supervisor mode... Ok.
<4>Calibrating delay using timer specific routine.. 4010.40 BogoMIPS (lpj=8020801)
<6>Security Framework v1.0.0 initialized
<6>SELinux:  Initializing.
<6>SELinux:  Starting in permissive mode
<6>selinux_register_security:  Registering secondary module capability
<6>Capability LSM initialized as secondary
<4>Mount-cache hash table entries: 512
<7>CPU: After generic identify, caps: 078bfbff e1d3fbff 00000000 00000000 00000000 00000000 00000000
<7>CPU: After vendor identify, caps: 078bfbff e1d3fbff 00000000 00000000 00000000 00000000 00000000
<6>CPU: L1 I Cache: 64K (64 bytes/line), D cache 64K (64 bytes/line)
<6>CPU: L2 Cache: 512K (64 bytes/line)
<7>CPU: After all inits, caps: 078bf3ff e1d3fbff 00000000 00000410 00000000 00000000 00000000
<6>Intel machine check architecture supported.
<6>Intel machine check reporting enabled on CPU#0.
<4>CPU: AMD Athlon(tm) 64 Processor 3000+ stepping 00
<6>Checking 'hlt' instruction... OK.
<6>ACPI: Core revision 20060623
<4>ACPI: setting ELCR to 0200 (from 0c28)
<6>checking if image is initramfs... it is
<6>Freeing initrd memory: 6629k freed
<7>PM: Adding info for No Bus:platform
<6>NET: Registered protocol family 16
<6>ACPI: bus type pci registered
<6>PCI: PCI BIOS revision 2.10 entry at 0xf0031, last bus=1
<4>Setting up standard PCI resources
<6>ACPI: Interpreter enabled
<6>ACPI: Using PIC for interrupt routing
<7>PM: Adding info for acpi:acpi
<6>ACPI: PCI Root Bridge [PCI0] (0000:00)
<7>PCI: Probing PCI hardware (bus 00)
<7>PM: Adding info for No Bus:pci0000:00
<6>PCI: enabled onboard AC97/MC97 devices
<7>Boot video device is 0000:01:00.0
<7>ACPI: PCI Interrupt Routing Table [\_SB_.PCI0._PRT]
<7>PM: Adding info for pci:0000:00:00.0
<7>PM: Adding info for pci:0000:00:01.0
<7>PM: Adding info for pci:0000:00:0a.0
<7>PM: Adding info for pci:0000:00:0d.0
<7>PM: Adding info for pci:0000:00:0e.0
<7>PM: Adding info for pci:0000:00:0f.0
<7>PM: Adding info for pci:0000:00:0f.1
<7>PM: Adding info for pci:0000:00:10.0
<7>PM: Adding info for pci:0000:00:10.1
<7>PM: Adding info for pci:0000:00:10.2
<7>PM: Adding info for pci:0000:00:10.3
<7>PM: Adding info for pci:0000:00:10.4
<7>PM: Adding info for pci:0000:00:11.0
<7>PM: Adding info for pci:0000:00:11.5
<7>PM: Adding info for pci:0000:00:11.6
<7>PM: Adding info for pci:0000:00:18.0
<7>PM: Adding info for pci:0000:00:18.1
<7>PM: Adding info for pci:0000:00:18.2
<7>PM: Adding info for pci:0000:00:18.3
<7>PM: Adding info for pci:0000:01:00.0
<4>ACPI: PCI Interrupt Link [LNKA] (IRQs 3 4 5 7 10 *11 14 15)
<4>ACPI: PCI Interrupt Link [LNKB] (IRQs 3 4 5 7 *10 11 14 15)
<4>ACPI: PCI Interrupt Link [LNKC] (IRQs 3 4 *5 7 10 11 14 15)
<4>ACPI: PCI Interrupt Link [LNKD] (IRQs *3 4 5 7 10 11 14 15)
<4>ACPI: PCI Interrupt Link [LNKE] (IRQs 3 4 5 7 10 11 14 15) *0, disabled.
<4>ACPI: PCI Interrupt Link [LNKF] (IRQs 3 4 5 7 10 11 14 15) *0, disabled.
<4>ACPI: PCI Interrupt Link [LNKG] (IRQs 3 4 5 7 10 11 14 15) *0, disabled.
<4>ACPI: PCI Interrupt Link [LNKH] (IRQs 3 4 5 7 10 11 14 15) *0, disabled.
<6>Linux Plug and Play Support v0.97 (c) Adam Belay
<6>pnp: PnP ACPI init
<7>PM: Adding info for No Bus:pnp0
<7>PM: Adding info for pnp:00:00
<7>PM: Adding info for pnp:00:01
<7>PM: Adding info for pnp:00:02
<7>PM: Adding info for pnp:00:03
<7>PM: Adding info for pnp:00:04
<7>PM: Adding info for pnp:00:05
<7>PM: Adding info for pnp:00:06
<7>PM: Adding info for pnp:00:07
<7>PM: Adding info for pnp:00:08
<7>PM: Adding info for pnp:00:09
<7>PM: Adding info for pnp:00:0a
<6>pnp: PnP ACPI: found 11 devices
<6>usbcore: registered new driver usbfs
<6>usbcore: registered new driver hub
<6>PCI: Using ACPI for IRQ routing
<6>PCI: If a device doesn't work, try "pci=routeirq".  If it helps, post a report
<6>PCI: Bridge: 0000:00:01.0
<6>  IO window: disabled.
<6>  MEM window: faf00000-fd0fffff
<6>  PREFETCH window: e2e00000-f2dfffff
<7>Device `[P0P1]' is not power manageable<7>PCI: Setting latency timer of device 0000:00:01.0 to 64
<6>NET: Registered protocol family 2
<4>IP route cache hash table entries: 32768 (order: 5, 131072 bytes)
<4>TCP established hash table entries: 65536 (order: 9, 2621440 bytes)
<4>TCP bind hash table entries: 32768 (order: 8, 1441792 bytes)
<6>TCP: Hash tables configured (established 65536 bind 32768)
<6>TCP reno registered
<7>PM: Adding info for platform:pcspkr
<6>apm: BIOS version 1.2 Flags 0x03 (Driver version 1.16ac)
<5>apm: overridden by ACPI.
<4>Initializing RT-Tester: OK
<6>audit: initializing netlink socket (disabled)
<5>audit(1152220559.776:1): initialized
<4>Total HugeTLB memory allocated, 0
<5>VFS: Disk quotas dquot_6.5.1
<4>Dquot-cache hash table entries: 1024 (order 0, 4096 bytes)
<6>SELinux:  Registering netfilter hooks
<6>Initializing Cryptographic API
<6>io scheduler noop registered
<6>io scheduler anticipatory registered
<6>io scheduler deadline registered
<6>io scheduler cfq registered (default)
<7>PM: Adding info for platform:vesafb.0
<7>PM: Adding info for No Bus:pnp1
<6>isapnp: Scanning for PnP cards...
<6>isapnp: No Plug & Play device found
<6>Real Time Clock Driver v1.12ac
<6>Non-volatile memory driver v1.2
<6>Linux agpgart interface v0.101 (c) Dave Jones
<6>Serial: 8250/16550 driver $Revision: 1.90 $ 4 ports, IRQ sharing enabled
<7>PM: Adding info for platform:serial8250
<6>serial8250: ttyS0 at I/O 0x3f8 (irq = 4) is a 16550A
<6>00:09: ttyS0 at I/O 0x3f8 (irq = 4) is a 16550A
<7>PM: Adding info for No Bus:isa
<4>RAMDISK driver initialized: 16 RAM disks of 16384K size 1024 blocksize
<6>Uniform Multi-Platform E-IDE driver Revision: 7.00alpha2
<6>ide: Assuming 33MHz system bus speed for PIO modes; override with idebus=xx
<6>VP_IDE: IDE controller at PCI slot 0000:00:0f.1
<7>Device `[IDEC]' is not power manageableACPI: PCI Interrupt Link [LNKA] enabled at IRQ 11
<7>PCI: setting IRQ 11 as level-triggered
<6>ACPI: PCI Interrupt 0000:00:0f.1[A] -> Link [LNKA] -> GSI 11 (level, low) -> IRQ 11
<6>PCI: VIA IRQ fixup for 0000:00:0f.1, from 255 to 11
<6>VP_IDE: chipset revision 6
<6>VP_IDE: not 100% native mode: will probe irqs later
<6>VP_IDE: VIA vt8237 (rev 00) IDE UDMA133 controller on pci0000:00:0f.1
<6>    ide0: BM-DMA at 0xfc00-0xfc07, BIOS settings: hda:pio, hdb:pio
<6>    ide1: BM-DMA at 0xfc08-0xfc0f, BIOS settings: hdc:DMA, hdd:pio
<7>Probing IDE interface ide0...
<7>Probing IDE interface ide1...
<4>hdc: TEAC DW-552G, ATAPI CD/DVD-ROM drive
<7>PM: Adding info for No Bus:ide1
<4>ide1 at 0x170-0x177,0x376 on irq 15
<7>PM: Adding info for ide:1.0
<7>Probing IDE interface ide0...
<4>ide-floppy driver 0.99.newide
<6>usbcore: registered new driver libusual
<6>usbcore: registered new driver hiddev
<6>usbcore: registered new driver usbhid
<6>drivers/usb/input/hid-core.c: v2.6:USB HID core driver
<6>PNP: PS/2 Controller [PNP0303:PS2K,PNP0f03:PS2M] at 0x60,0x64 irq 1,12
<7>PM: Adding info for platform:i8042
<6>serio: i8042 AUX port at 0x60,0x64 irq 12
<6>serio: i8042 KBD port at 0x60,0x64 irq 1
<7>PM: Adding info for serio:serio0
<6>mice: PS/2 mouse device common for all mice
<6>md: md driver 0.90.3 MAX_MD_DEVS=256, MD_SB_DISKS=27
<6>md: bitmap version 4.39
<6>TCP bic registered
<6>Initializing IPsec netlink socket
<6>NET: Registered protocol family 1
<6>NET: Registered protocol family 17
<4>Using IPI Shortcut mode
<7>PM: Adding info for serio:serio1
<6>ACPI: (supports S0 S1 S3 S4<6>Time: tsc clocksource has been installed.
<4> S5)
<6>Freeing unused kernel memory: 196k freed
<4>Write protecting the kernel read-only data: 358k
<6>input: AT Translated Set 2 keyboard as /class/input/input0
<6>loop: loaded (max 8 devices)
<6>input: PS/2 Generic Mouse as /class/input/input1
<4>floppy0: no floppy controllers found
<6>BIOS EDD facility v0.16 2004-Jun-25, 1 devices found
<6>input: PC Speaker as /class/input/input2
<6>squashfs: version 3.0 (2006/03/15) Phillip Lougher
<6>hdc: ATAPI 52X DVD-ROM CD-R/RW drive, 2048kB Cache, UDMA(33)
<6>Uniform CD-ROM driver Revision: 3.20
<5>SCSI subsystem initialized
<7>Device `[EHCI]' is not power manageableACPI: PCI Interrupt Link [LNKC] enabled at IRQ 5
<7>PCI: setting IRQ 5 as level-triggered
<6>ACPI: PCI Interrupt 0000:00:10.4[C] -> Link [LNKC] -> GSI 5 (level, low) -> IRQ 5
<6>ehci_hcd 0000:00:10.4: EHCI Host Controller
<6>ehci_hcd 0000:00:10.4: new USB bus registered, assigned bus number 1
<6>ehci_hcd 0000:00:10.4: irq 5, io mem 0xfd900000
<6>ehci_hcd 0000:00:10.4: USB 2.0 started, EHCI 1.00, driver 10 Dec 2004
<7>PM: Adding info for usb:usb1
<7>PM: Adding info for No Bus:usbdev1.1_ep00
<6>usb usb1: configuration #1 chosen from 1 choice
<7>PM: Adding info for usb:1-0:1.0
<6>hub 1-0:1.0: USB hub found
<6>hub 1-0:1.0: 8 ports detected
<7>PM: Adding info for No Bus:usbdev1.1_ep81
<7>PM: Adding info for No Bus:usbdev1.1
<6>USB Universal Host Controller Interface driver v3.0
<7>Device `[USB1]' is not power manageable<6>ACPI: PCI Interrupt 0000:00:10.0[A] -> Link [LNKA] -> GSI 11 (level, low) -> IRQ 11
<6>uhci_hcd 0000:00:10.0: UHCI Host Controller
<6>uhci_hcd 0000:00:10.0: new USB bus registered, assigned bus number 2
<6>uhci_hcd 0000:00:10.0: irq 11, io base 0x0000ec00
<7>PM: Adding info for usb:usb2
<7>PM: Adding info for No Bus:usbdev2.1_ep00
<6>usb usb2: configuration #1 chosen from 1 choice
<7>PM: Adding info for usb:2-0:1.0
<6>hub 2-0:1.0: USB hub found
<6>hub 2-0:1.0: 2 ports detected
<7>PM: Adding info for No Bus:usbdev2.1_ep81
<7>PM: Adding info for No Bus:usbdev2.1
<7>Device `[USB2]' is not power manageable<6>ACPI: PCI Interrupt 0000:00:10.1[A] -> Link [LNKA] -> GSI 11 (level, low) -> IRQ 11
<6>uhci_hcd 0000:00:10.1: UHCI Host Controller
<6>uhci_hcd 0000:00:10.1: new USB bus registered, assigned bus number 3
<6>uhci_hcd 0000:00:10.1: irq 11, io base 0x0000b000
<7>PM: Adding info for usb:usb3
<7>PM: Adding info for No Bus:usbdev3.1_ep00
<6>usb usb3: configuration #1 chosen from 1 choice
<7>PM: Adding info for usb:3-0:1.0
<6>hub 3-0:1.0: USB hub found
<6>hub 3-0:1.0: 2 ports detected
<7>PM: Adding info for No Bus:usbdev3.1_ep81
<7>PM: Adding info for No Bus:usbdev3.1
<7>Device `[USB3]' is not power manageableACPI: PCI Interrupt Link [LNKB] enabled at IRQ 10
<7>PCI: setting IRQ 10 as level-triggered
<6>ACPI: PCI Interrupt 0000:00:10.2[B] -> Link [LNKB] -> GSI 10 (level, low) -> IRQ 10
<6>uhci_hcd 0000:00:10.2: UHCI Host Controller
<6>uhci_hcd 0000:00:10.2: new USB bus registered, assigned bus number 4
<6>uhci_hcd 0000:00:10.2: irq 10, io base 0x0000b400
<7>PM: Adding info for usb:usb4
<7>PM: Adding info for No Bus:usbdev4.1_ep00
<6>usb usb4: configuration #1 chosen from 1 choice
<7>PM: Adding info for usb:4-0:1.0
<6>hub 4-0:1.0: USB hub found
<6>hub 4-0:1.0: 2 ports detected
<7>PM: Adding info for No Bus:usbdev4.1_ep81
<7>PM: Adding info for No Bus:usbdev4.1
<7>Device `[USB4]' is not power manageable<6>ACPI: PCI Interrupt 0000:00:10.3[B] -> Link [LNKB] -> GSI 10 (level, low) -> IRQ 10
<6>uhci_hcd 0000:00:10.3: UHCI Host Controller
<6>uhci_hcd 0000:00:10.3: new USB bus registered, assigned bus number 5
<6>uhci_hcd 0000:00:10.3: irq 10, io base 0x0000b800
<7>PM: Adding info for usb:usb5
<7>PM: Adding info for No Bus:usbdev5.1_ep00
<6>usb usb5: configuration #1 chosen from 1 choice
<7>PM: Adding info for usb:5-0:1.0
<6>hub 5-0:1.0: USB hub found
<6>hub 5-0:1.0: 2 ports detected
<7>PM: Adding info for No Bus:usbdev5.1_ep81
<7>PM: Adding info for No Bus:usbdev5.1
<6>ACPI: PCI Interrupt 0000:00:0a.0[A] -> Link [LNKB] -> GSI 10 (level, low) -> IRQ 10
<6>skge 1.6 addr 0xfdb00000 irq 10 chip Yukon-Lite rev 7
<6>skge eth0: addr 00:0e:a6:70:34:22
<6>QLogic Fibre Channel HBA Driver
<6>ACPI: PCI Interrupt 0000:00:0d.0[A] -> Link [LNKC] -> GSI 5 (level, low) -> IRQ 5
<6>qla2xxx 0000:00:0d.0: Found an ISP6312, irq 5, iobase 0xf8840000
<6>qla2xxx 0000:00:0d.0: Configuring PCI space...
<6>qla2xxx 0000:00:0d.0: Configure NVRAM parameters...
<6>qla2xxx 0000:00:0d.0: Verifying loaded RISC code...
<4>scsi(0): **** Load RISC code ****
<4>scsi(0): Verifying Checksum of loaded RISC code.
<4>scsi(0): Checksum OK, start firmware.
<6>qla2xxx 0000:00:0d.0: Allocated (412 KB) for firmware dump...
<4>scsi(0): Issue init firmware.
<4>scsi(0): Asynchronous LIP RESET (f8ef).
<6>qla2xxx 0000:00:0d.0: LIP reset occured (f8ef).
<6>qla2xxx 0000:00:0d.0: Waiting for LIP to complete...
<4>scsi(0): LIP occured (f8ef).
<6>qla2xxx 0000:00:0d.0: LIP occured (f8ef).
<4>scsi(0): Asynchronous LOOP UP (2 Gbps).
<6>qla2xxx 0000:00:0d.0: LOOP UP detected (2 Gbps).
<4>scsi(0): Asynchronous PORT UPDATE.
<6>scsi(0): Port database changed ffff 0006 0000.
<4>scsi(0): F/W Ready - OK 
<4>scsi(0): fw_state=3 curr time=fffee767.
<6>qla2xxx 0000:00:0d.0: Topology - (Loop), Host Loop address 0x1
<4>scsi(0): Configure loop -- dpc flags =0x4080040
<4>qla2x00_mailbox_command(0): **** FAILED. mbx0=4006, mbx1=7e, mbx2=0, cmd=6a ****
<4>qla2x00_get_port_name(0): failed=102.
<4>scsi(0): MBC_GET_PORT_NAME Failed, No FL Port
<4>scsi(0): LOOP READY
<4>DEBUG: detect hba 0 at address = dfbca47c
<6>scsi0 : qla2xxx
<7>PM: Adding info for No Bus:host0
<6>qla2xxx 0000:00:0d.0: 
<4> QLogic Fibre Channel HBA Driver: 8.01.05-k3
<4>  QLogic QLA200 - 
<4>  ISP6312: PCI (33 MHz) @ 0000:00:0d.0 hdma-, host#=0, fw=3.03.20 IPX
<7>PM: Adding info for No Bus:rport-0:0-0
<7>PM: Adding info for No Bus:target0:0:0
<4>ACPI: PCI Interrupt Link [LNKD] enabled at IRQ 3
<7>PCI: setting IRQ 3 as level-triggered
<6>ACPI: PCI Interrupt 0000:00:0e.0[A] -> Link [LNKD] -> GSI 3 (level, low) -> IRQ 3
<6>qla2xxx 0000:00:0e.0: Found an ISP6312, irq 3, iobase 0xf8862000
<6>qla2xxx 0000:00:0e.0: Configuring PCI space...
<6>qla2xxx 0000:00:0e.0: Configure NVRAM parameters...
<6>qla2xxx 0000:00:0e.0: Verifying loaded RISC code...
<4>scsi(1): **** Load RISC code ****
<5>  Vendor: DGC       Model: RAID 5            Rev: 0219
<5>  Type:   Direct-Access                      ANSI SCSI revision: 04
<7>PM: Adding info for scsi:0:0:0:0
<5>SCSI device sda: 1367612160 512-byte hdwr sectors (700217 MB)
<5>sda: Write Protect is off
<7>sda: Mode Sense: 87 00 00 08
<5>SCSI device sda: drive cache: write through
<5>SCSI device sda: 1367612160 512-byte hdwr sectors (700217 MB)
<5>sda: Write Protect is off
<7>sda: Mode Sense: 87 00 00 08
<5>SCSI device sda: drive cache: write through
<6> sda: sda1 sda2
<5>sd 0:0:0:0: Attached scsi disk sda
<4>scsi(1): Verifying Checksum of loaded RISC code.
<4>scsi(1): Checksum OK, start firmware.
<6>qla2xxx 0000:00:0e.0: Allocated (412 KB) for firmware dump...
<4>scsi(1): Issue init firmware.
<4>scsi(1): Asynchronous LIP RESET (f8ef).
<6>qla2xxx 0000:00:0e.0: LIP reset occured (f8ef).
<6>qla2xxx 0000:00:0e.0: Waiting for LIP to complete...
<4>scsi(1): LIP occured (f8ef).
<6>qla2xxx 0000:00:0e.0: LIP occured (f8ef).
<4>scsi(1): Asynchronous LOOP UP (2 Gbps).
<6>qla2xxx 0000:00:0e.0: LOOP UP detected (2 Gbps).
<4>scsi(1): Asynchronous PORT UPDATE.
<6>scsi(1): Port database changed ffff 0006 0000.
<4>scsi(1): F/W Ready - OK 
<4>scsi(1): fw_state=3 curr time=fffee846.
<6>qla2xxx 0000:00:0e.0: Topology - (Loop), Host Loop address 0x1
<4>scsi(1): Configure loop -- dpc flags =0x4080040
<4>qla2x00_mailbox_command(1): **** FAILED. mbx0=4006, mbx1=7e, mbx2=0, cmd=6a ****
<4>qla2x00_get_port_name(1): failed=102.
<4>scsi(1): MBC_GET_PORT_NAME Failed, No FL Port
<4>scsi(1): LOOP READY
<4>DEBUG: detect hba 1 at address = f769a47c
<6>scsi1 : qla2xxx
<7>PM: Adding info for No Bus:host1
<6>qla2xxx 0000:00:0e.0: 
<4> QLogic Fibre Channel HBA Driver: 8.01.05-k3
<4>  QLogic QLA200 - 
<4>  ISP6312: PCI (33 MHz) @ 0000:00:0e.0 hdma-, host#=1, fw=3.03.20 IPX
<7>PM: Adding info for No Bus:rport-1:0-0
<7>PM: Adding info for No Bus:target1:0:0
<5>  Vendor: DGC       Model: RAID 5            Rev: 0219
<5>  Type:   Direct-Access                      ANSI SCSI revision: 04
<7>PM: Adding info for scsi:1:0:0:0
<5>SCSI device sdb: 1367612160 512-byte hdwr sectors (700217 MB)
<5>sdb: Write Protect is off
<7>sdb: Mode Sense: 87 00 00 08
<5>SCSI device sdb: drive cache: write through
<5>SCSI device sdb: 1367612160 512-byte hdwr sectors (700217 MB)
<5>sdb: Write Protect is off
<7>sdb: Mode Sense: 87 00 00 08
<5>SCSI device sdb: drive cache: write through
<6> sdb: sdb1 sdb2
<5>sd 1:0:0:0: Attached scsi disk sdb
<7>libata version 2.00 loaded.
<7>sata_via 0000:00:0f.0: version 2.0
<6>ACPI: PCI Interrupt 0000:00:0f.0[B] -> Link [LNKB] -> GSI 10 (level, low) -> IRQ 10
<6>sata_via 0000:00:0f.0: routed to hard irq line 10
<6>ata1: SATA max UDMA/133 cmd 0xE800 ctl 0xE402 bmdma 0xD400 irq 10
<6>ata2: SATA max UDMA/133 cmd 0xE000 ctl 0xD802 bmdma 0xD408 irq 10
<6>scsi2 : sata_via
<7>PM: Adding info for No Bus:host2
<6>ata1: SATA link down (SStatus 0 SControl 310)
<4>ATA: abnormal status 0x7F on port 0xE807
<6>scsi3 : sata_via
<7>PM: Adding info for No Bus:host3
<6>ata2: SATA link down (SStatus 0 SControl 310)
<4>ATA: abnormal status 0x7F on port 0xE007
<6>skge eth0: enabling interface
<6>skge eth0: Link is up at 1000 Mbps, full duplex, flow control tx and rx
<4>Unable to identify CD-ROM format.
<4>VFS: Can't find an ext2 filesystem on dev loop0.
<6>security:  3 users, 6 roles, 1398 types, 148 bools, 1 sens, 256 cats
<6>security:  58 classes, 40314 rules
<6>SELinux:  Completing initialization.
<6>SELinux:  Setting up existing superblocks.
<6>SELinux: initialized (dev loop0, type squashfs), not configured for labeling
<6>SELinux: initialized (dev 0:13, type nfs), uses genfs_contexts
<6>SELinux: initialized (dev rpc_pipefs, type rpc_pipefs), uses genfs_contexts
<6>SELinux: initialized (dev usbfs, type usbfs), uses genfs_contexts
<6>SELinux: initialized (dev ramfs, type ramfs), uses genfs_contexts
<6>SELinux: initialized (dev ramfs, type ramfs), uses genfs_contexts
<6>SELinux: initialized (dev tmpfs, type tmpfs), uses transition SIDs
<6>SELinux: initialized (dev debugfs, type debugfs), uses genfs_contexts
<6>SELinux: initialized (dev selinuxfs, type selinuxfs), uses genfs_contexts
<6>SELinux: initialized (dev mqueue, type mqueue), uses transition SIDs
<6>SELinux: initialized (dev hugetlbfs, type hugetlbfs), uses genfs_contexts
<6>SELinux: initialized (dev devpts, type devpts), uses transition SIDs
<6>SELinux: initialized (dev eventpollfs, type eventpollfs), uses genfs_contexts
<6>SELinux: initialized (dev inotifyfs, type inotifyfs), uses genfs_contexts
<6>SELinux: initialized (dev tmpfs, type tmpfs), uses transition SIDs
<6>SELinux: initialized (dev futexfs, type futexfs), uses genfs_contexts
<6>SELinux: initialized (dev pipefs, type pipefs), uses task SIDs
<6>SELinux: initialized (dev sockfs, type sockfs), uses task SIDs
<6>SELinux: initialized (dev proc, type proc), uses genfs_contexts
<6>SELinux: initialized (dev bdev, type bdev), uses genfs_contexts
<6>SELinux: initialized (dev rootfs, type rootfs), uses genfs_contexts
<6>SELinux: initialized (dev sysfs, type sysfs), uses genfs_contexts
<5>audit(1152220579.829:2): policy loaded auid=4294967295
<5>audit(1152220579.829:3): avc:  granted  { load_policy } for  pid=418 comm="load_policy" scontext=system_u:system_r:kernel_t:s0 tcontext=system_u:object_r:security_t:s0 tclass=security
<5>audit(1152220579.837:4): avc:  denied  { transition } for  pid=419 comm="loader" name="bash" dev=loop0 ino=6228 scontext=system_u:system_r:kernel_t:s0 tcontext=system_u:system_r:anaconda_t:s0 tclass=process
<6>md: raid0 personality registered for level 0
<6>md: raid1 personality registered for level 1
<6>JFS: nTxBlock = 7062, nTxLock = 56500
<6>SGI XFS with ACLs, security attributes, large block numbers, no debug enabled
<6>SGI XFS Quota Management subsystem
<6>device-mapper: ioctl: 4.7.0-ioctl (2006-06-24) initialised: dm-devel@redhat.com
<4>
<4>=============================================
<4>[ INFO: possible recursive locking detected ]
<4>---------------------------------------------
<4>anaconda/451 is trying to acquire lock:
<4> (&bdev->bd_mutex){--..}, at: [<c0463f46>] __blkdev_put+0x22/0x123
<4>
<4>but task is already holding lock:
<4> (&bdev->bd_mutex){--..}, at: [<c0464237>] do_open+0x68/0x385
<4>
<4>other info that might help us debug this:
<4>1 lock held by anaconda/451:
<4> #0:  (&bdev->bd_mutex){--..}, at: [<c0464237>] do_open+0x68/0x385
<4>
<4>stack backtrace:
<4> [<c040373c>] show_trace_log_lvl+0x54/0xfd
<4> [<c0403cba>] show_trace+0xd/0x10
<4> [<c0403d57>] dump_stack+0x19/0x1b
<4> [<c042c3ba>] __lock_acquire+0x760/0x987
<4> [<c042cb52>] lock_acquire+0x4b/0x6d
<4> [<c05ec50c>] mutex_lock_nested+0xcc/0x243
<4> [<c0463f46>] __blkdev_put+0x22/0x123
<4> [<c0464060>] blkdev_put+0xa/0xc
<4> [<c04644e2>] do_open+0x313/0x385
<4> [<c0464759>] blkdev_open+0x1f/0x48
<4> [<c045bda0>] __dentry_open+0xb8/0x186
<4> [<c045bedc>] nameidata_to_filp+0x1c/0x2e
<4> [<c045bf1d>] do_filp_open+0x2f/0x36
<4> [<c045bf64>] do_sys_open+0x40/0xbb
<4> [<c045c00b>] sys_open+0x16/0x18
<4> [<c0402dc7>] syscall_call+0x7/0xb