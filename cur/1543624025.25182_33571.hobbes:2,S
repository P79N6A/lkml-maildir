Date: Fri, 8 Mar 2002 22:58:41 -0500
From: Mathieu Desnoyers <>
Subject: Re: Promise PDC20268 spurious interrupt
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/3/9/49

I did a little bit of testing lately, and with the 2.4.1[78] and
2.4.19-pre2-ac3 kernels the problem occurs on my asus p2b-s. I tried to
install the pdc20268 in another computer, with a VIA chipset, and I get
the same error. The interesting fact is that if I do the same test (same
hard drives) on a pdc20265 board with Ultra100 bios (onboard on the VIA
board), there is no problem at all.
Replacing the pdc20268 by another Ultra100TX2 board leads to the same problem.
I believe it's related to the pdc20268 support in the kernel, but I have
no clue of where the problem can come from.
Any suggestions ?
Here is my configuration :
/proc/pci :
[cut]
  Bus  0, device  10, function  0:
    Unknown mass storage controller: Promise Technology, Inc. 20268
      (rev 1).
      IRQ 11.
      Master Capable.  Latency=32.  Min Gnt=4.Max Lat=18.
      I/O at 0xb800 [0xb807].
      I/O at 0xb400 [0xb403].
      I/O at 0xb000 [0xb007].
      I/O at 0xa800 [0xa803].
      I/O at 0xa400 [0xa40f].
      Non-prefetchable 32 bit memory at 0xe0800000 [0xe0803fff].
[cut]
dmesg :
[cut]
ide: Assuming 33MHz system bus speed for PIO modes; override with
idebus=xx
PIIX4: IDE controller on PCI bus 00 dev 21
PIIX4: chipset revision 1
PIIX4: not 100% native mode: will probe irqs later
ide0: BM-DMA at 0xd800-0xd807, BIOS settings: hda:pio, hdb:pio
ide1: BM-DMA at 0xd808-0xd80f, BIOS settings: hdc:pio, hdd:pio
PDC20268: IDE controller on PCI bus 00 dev 50
PCI: Found IRQ 11 for device 00:0a.0
PDC20268: chipset revision 1
PDC20268: not 100% native mode: will probe irqs later
ide2: BM-DMA at 0xa400-0xa407, BIOS settings: hde:pio,
hdf:pio
ide3: BM-DMA at 0xa408-0xa40f, BIOS settings: hdg:pio,
hdh:pio
hde: WDC WD400BB-53AUA1, ATA DISK drive
hdg: MAXTOR 6L040J2, ATA DISK drive
ide2 at 0xb800-0xb807,0xb402 on irq 11
ide3 at 0xb000-0xb007,0xa802 on irq 11
hde: 78165360 sectors (40021 MB) w/2048KiB Cache,
CHS=77545/16/63, UDMA(100)
hdg: 78177792 sectors (40027 MB) w/1818KiB Cache,
CHS=77557/16/63, UDMA(100)
[cut]
* Mathieu Desnoyers (compudj@krystal.dyndns.org) wrote:
> I have a problem here since I plugged my second hard disk on my Promise
> Ultra 100 TX2 PDC20268 controller. It occurs all the time when I use software
> raid 0. I looked at the LKML archives, and this problem does not seems to be
> solved. There is a simpler way to generate the problem than to use raid.
> 
> It occurs when I use dd for reading on my both hard disks in parallel.
> The disks are both masters of their channel.
> 
> When I do this test, The message I get is 
> 
> spurious 8259A interrupt: IRQ7.
> spurious 8259A interrupt: IRQ15.
> 
> And I can look at /proc/interrupts and see the ERR counter increment at
> a phenomenal speed.
> 
> I wonder if this problem is due to the linux driver support or if it is
> a hardware bug.
> 
> 
> OpenPGP public key:              
http://krystal.dyndns.org:8080/key/compudj.gpg
> Key fingerprint:     8CD5 52C3 8E3C 4140 715F  BA06 3F25 A8FE 3BAE 9A68 
OpenPGP public key:              
http://krystal.dyndns.org:8080/key/compudj.gpg
Key fingerprint:     8CD5 52C3 8E3C 4140 715F  BA06 3F25 A8FE 3BAE 9A68 
[unhandled content-type:application/pgp-signature]