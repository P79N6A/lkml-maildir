Date: Thu, 28 Jan 1999 14:51:37 +0200 (IST)
From: Evgeny Stambulchik <>
Subject: empty_zero_page definition clash in 2.0.36
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/1/28/58

Hello,
linux/arch/i386/kernel/setup.c defines
extern char empty_zero_page[PAGE_SIZE];
whereas in include/asm-i386/pgtable.h we see:
extern unsigned long empty_zero_page[1024]; 
Usually, asm/pgtable.h is not sourced in setup.c, but with the latest raid
patch, AND if compiled for SMP, it is. Here is a fix (non-Intel archs may need
something similar, too):
--- linux/arch/i386/kernel/setup.c.orig Sun Nov 15 20:32:46 1998
+++ linux/arch/i386/kernel/setup.c      Thu Jan 28 14:16:25 1999
@@ -88,12 +88,10 @@
 extern int root_mountflags;
 extern int _etext, _edata, _end;
 
-extern char empty_zero_page[PAGE_SIZE];
-
 /*
  * This is set up by the setup-routine at boot-time
  */
-#define PARAM  empty_zero_page
+#define PARAM  ((unsigned char *)empty_zero_page)
 #define EXT_MEM_K (*(unsigned short *) (PARAM+2))
 #ifndef STANDARD_MEMORY_BIOS_CALL
Regards,
Evgeny
 #define ALT_MEM_K (*(unsigned long *) (PARAM+0x1e0))
--
   ____________________________________________________________
  / Evgeny Stambulchik  <fnevgeny@plasma-gate.weizmann.ac.il>  \
 /  Plasma Laboratory, Weizmann Institute of Science, Israel \  \
 |  Phone : (972)8-934-3610  == | == FAX   : (972)8-934-3491 |  |
 |  URL   :    
http://plasma-gate.weizmann.ac.il/~fnevgeny/
  |  |
 |  Finger for PGP key >=====================================+  | 
 |______________________________________________________________| 
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/