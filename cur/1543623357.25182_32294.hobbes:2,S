Date: Mon, 4 Mar 2002 20:13:56 +0100
From: Pavel Machek <>
Subject: pm storing void * in int
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/3/4/225

Hi!
...which is no-no for 64bit apps. (In case you wonder, data in pm.c
is void *). Please apply,
									Pavel
--- linux/include/linux/pm.h	Thu Feb 28 23:14:54 2002
+++ linux.64/include/linux/pm.h	Mon Mar  4 19:58:01 2002
@@ -103,8 +103,8 @@
 	void		*data;
 
 	unsigned long	 flags;
-	int		 state;
-	int		 prev_state;
+	unsigned long	 state;
+	unsigned long	 prev_state;
 
 	struct list_head entry;
 };
--- linux/kernel/pm.c	Sat May  5 11:10:04 2001
+++ linux.64/kernel/pm.c	Mon Mar  4 19:58:12 2002
@@ -162,7 +162,7 @@
 	case PM_SUSPEND:
 	case PM_RESUME:
 		prev_state = dev->state;
-		next_state = (int) data;
+		next_state = (unsigned long) data;
 		if (prev_state != next_state) {
 			if (dev->callback)
 				status = (*dev->callback)(dev, rqst, data);
-- 
(about SSSCA) "I don't say this lightly.  However, I really think that the U.S.
no longer is classifiable as a democracy, but rather as a plutocracy." --hpa
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/