Date: Sat, 23 Oct 1999 12:46:05 +0300
From: Olaf Titz <>
Subject: Re: corrupt modversions.h built in 2.2.13
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/10/23/15

> My favorite workaround is to remove CONFIG_MODVERSIONS as a supported
> feature.  If I thought Linus would accept such a patch, I would write
> it this weekend.
CONFIG_MODVERSIONS as currently implemented is ugly as hell but it is
an _absolutely necessary_ feature at least if you have externally
compiled modules.
It would have spared me (and surely the developers of ALSA, ftape,
lm-sensors, etc. too) a pile of bug reports if MODVERSIONS were
mandatory. Cheap shot at "forgot to make dep":
--- Makefile~   Wed Oct 20 02:16:07 1999
+++ Makefile    Sat Oct 23 12:41:57 1999
@@ -239,17 +239,21 @@
 oldconfig: symlinks
        $(CONFIG_SHELL) scripts/Configure -d arch/$(ARCH)/config.in
+       $(MAKE) dep
 xconfig: symlinks
        $(MAKE) -C scripts kconfig.tk
        wish -f scripts/kconfig.tk
+       $(MAKE) dep
 menuconfig: include/linux/version.h symlinks
        $(MAKE) -C scripts/lxdialog all
        $(CONFIG_SHELL) scripts/Menuconfig arch/$(ARCH)/config.in
+       $(MAKE) dep
 config: symlinks
        $(CONFIG_SHELL) scripts/Configure arch/$(ARCH)/config.in
+       $(MAKE) dep
 include/config/MARKER: scripts/split-include include/linux/autoconf.h
        scripts/split-include include/linux/autoconf.h include/config
That's ugly too but it is what I end up recommending to do manually anyway.
Olaf
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/