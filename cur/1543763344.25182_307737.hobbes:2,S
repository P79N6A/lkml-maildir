Date: Thu, 31 Mar 2005 10:46:55 -0800
From: David Brownell <>
Subject: Re: klists and struct device semaphores
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/3/31/215

On Thursday 31 March 2005 10:26 am, Patrick Mochel wrote:
> 
> On Thu, 31 Mar 2005, David Brownell wrote:
> 
> > On Thursday 31 March 2005 9:59 am, Patrick Mochel wrote:
> > > On Thu, 31 Mar 2005, Alan Stern wrote:
> > > > On Wed, 30 Mar 2005, Patrick Mochel wrote:
> > >
> > > > > In fact, we probably want to add a counter to every device for all "open
> > > > > connections" so the device doesn't try to automatically sleep while a
> > > > > device node is open. Once it reaches 0, we can have it enter a
> > > > > pre-configured state, which should save us a bit of power for very little
> > > > > pain.
> > > >
> > > > By "open connections", do you mean something more than unsuspended
> > > > children?
> > >
> > > Yes, I mean anything that requires the device be awake and functional.
> >
> > So for example a device that's suspended and enabled for wakeup could be
> > "open" ... which fights against your "doesn't try to sleep" policy.
> 
> I don't understand what you mean. Even if a device is suspended, be it
> automatically after some amount of inactivity or as directed explicitly by
> a user, we want to be able to open the device and have it work.
> 
> Conversely, we only want to automatically suspend the device, or allow the
> device to be explicitly put to sleep, if the device is not being used.
And be able to suspend itself, even if it's open, if it's idle enough and
can wake itself up automatically.
I'm pointing out that device sleep/suspend states are orthogonal to being
"open".  So I don't see what this counter would do...
- Dave
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/