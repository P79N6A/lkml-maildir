Date: Sun, 24 Oct 2004 21:14:58 +0200
From: Jan De Luyck <>
Subject: [2.6.8.1] bad: scheduling while atomic! when loading aha152x driver
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/10/24/170

Hello list,
Loading the aha152x driver resulted in this output, and shortly after a solid lock of the box happened.
Oct 24 21:08:13 faerun kernel: aha152x: BIOS test: passed, 1 controller(s) configured
Oct 24 21:08:13 faerun kernel: aha152x: resetting bus...
Oct 24 21:08:15 faerun kernel: aha152x3: vital data: rev=1, io=0x340 (0x340/0x340), irq=10, scsiid=7, reconnect=enabled, parity=enabled, synchronous=enabled, delay=1000, extended translation=disabled
Oct 24 21:08:16 faerun kernel: aha152x3: trying software interrupt, ok.
Oct 24 21:08:16 faerun kernel: scsi3 : Adaptec 152x SCSI driver; $Revision: 2.7 $
Oct 24 21:08:16 faerun kernel: (scsi-1:-1:-1) unexpected state (1)
Oct 24 21:08:30 faerun last message repeated 24 times
Oct 24 21:08:31 faerun kernel: (scsi3:0:0) cannot reuse command
Oct 24 21:08:31 faerun kernel: bad: scheduling while atomic!
Oct 24 21:08:31 faerun kernel:  [schedule+1114/1120] schedule+0x45a/0x460
Oct 24 21:08:31 faerun kernel:  [__down+137/256] __down+0x89/0x100
Oct 24 21:08:31 faerun kernel:  [default_wake_function+0/32] default_wake_function+0x0/0x20
Oct 24 21:08:31 faerun kernel:  [__mod_timer+208/384] __mod_timer+0xd0/0x180
Oct 24 21:08:31 faerun kernel:  [__down_failed+8/12] __down_failed+0x8/0xc
Oct 24 21:08:31 faerun kernel:  [pg0+143508100/1070325760] .text.lock.aha152x+0x19/0x35 [aha152x]
Oct 24 21:08:31 faerun kernel:  [pg0+143489568/1070325760] timer_expired+0x0/0xc0 [aha152x]
Oct 24 21:08:31 faerun kernel:  [pg0+143425216/1070325760] scsi_try_bus_device_reset+0x40/0x80 [scsi_mod]
Oct 24 21:08:31 faerun kernel:  [pg0+143425818/1070325760] scsi_eh_bus_device_reset+0x5a/0xe0 [scsi_mod]
Oct 24 21:08:31 faerun kernel:  [pg0+143427690/1070325760] scsi_eh_ready_devs+0x2a/0x60 [scsi_mod]
Oct 24 21:08:31 faerun kernel:  [pg0+143428048/1070325760] scsi_unjam_host+0xb0/0xc0 [scsi_mod]
Oct 24 21:08:31 faerun kernel:  [pg0+143428262/1070325760] scsi_error_handler+0xc6/0x100 [scsi_mod]
Oct 24 21:08:31 faerun kernel:  [pg0+143428064/1070325760] scsi_error_handler+0x0/0x100 [scsi_mod]
Oct 24 21:08:31 faerun kernel:  [kernel_thread_helper+5/24] kernel_thread_helper+0x5/0x18
Oct 24 21:08:31 faerun kernel: (scsi-1:-1:-1) unexpected state (1)
Oct 24 21:09:00 faerun last message repeated 73 times
Any pointers?
Thanks.
Jan
-- 
Your nature demands love and your happiness depends on it.
[unhandled content-type:application/pgp-signature]