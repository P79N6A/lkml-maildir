Date: Sat, 14 Jan 2006 07:04:24 +0000 (GMT)
From: Hugh Dickins <>
Subject: Re: [Patch] Add tmpfs options for memory placement policies (Resend with corrected addresses).
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/1/14/25

On Fri, 13 Jan 2006, Brent Casavant wrote:
> On Fri, 13 Jan 2006, Andrew Morton wrote:
> 
> > Confused.  Is this for applications which cannot be taught to use the
> > mempolicy API?
> 
> In general yes.  Anything that writes into a tmpfs filesystem is liable
> to disproportionately decrease the available memory on a particular node.
> Since there's no telling what sort of application (e.g. dd/cp/cat) might be
> dropping large files there, this lets the admin choose the appropriate
> default behavior for their site's situation.
I look at it differently, and would answer Andrew's question with "no"
rather than "yes".  The mempolicy API applies only to userspace mappings:
so it covers shared memory fine, but cannot be applied to tmpfs files.
Whereas mount's mpol= applies to tmpfs files, and (unfortunately?) cannot
be applied to shm (since that's on an internal mount with no options).
The only overlap comes when a tmpfs file is mmap'ed: then it's possible
to apply the mempolicy API to it, and refine what mount's mpol= defined.
There's been talk in the past of mempolicy for pagecache, which would
also allow mount's mpol= to be refined per file; but that's not appeared.
Hugh
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/