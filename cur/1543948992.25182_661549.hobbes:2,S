Date: Fri, 29 Feb 2008 11:52:57 +0000
From: Simon Huggins <>
Subject: Scheduler broken? sdhci issues with scheduling
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/2/29/118

[ Please Cc me on replies ]
I had a bug with sdhci which Pierre Ossman looked at for me.
In the end essentially the fix was to use HZ=1000 and nothing else.
Pierre seemed to think that this was a bug in the scheduler.
I'm interested if someone who groks the scheduler could take a look at
the mmc/* code and see if it's abusing HZ or if there's anything
obviously wrong there.  If it's not then perhaps there really is a bug
in the scheduler?
See
http://list.drzeus.cx/pipermail/sdhci-devel/2008-February/002164.html
http://list.drzeus.cx/pipermail/sdhci-devel/2008-January/002142.html
Here's the log that caused him to suspect the scheduler:
http://list.drzeus.cx/pipermail/sdhci-devel/2007-December/002086.html
and his post saying so:
http://list.drzeus.cx/pipermail/sdhci-devel/2007-December/002087.html
Originally I tried to narrow it down:
http://list.drzeus.cx/pipermail/sdhci-devel/2007-November/002072.html
and shows a commit that seemed to "fix" it for me
http://list.drzeus.cx/pipermail/sdhci-devel/2007-November/002072.html
but apparently the commit I reverted was good
http://list.drzeus.cx/pipermail/sdhci-devel/2007-November/002078.html
I'm happy to provide more information or try different kernels/config
options etc (I really should upgrade the kernel on my laptop anyway).
Thanks,
-- 
----------(   "An excellent suggestion sir, with only two    )----------
Simon ----(            minor flaws...." - Kryten             )---- Nomis
                             Htag.pl 0.0.22