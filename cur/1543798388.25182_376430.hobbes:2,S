Date: Thu, 15 Dec 2005 20:06:30 +1100
From: Nick Piggin <>
Subject: Re: 2.6.15-rc5-mm3 -- BUG: using smp_processor_id() in preemptible [00000001] code: swapper/1
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/12/15/63

Andrew Morton wrote:
>>A little later, I get this:
>>
>>[4294676.542000] BUG: using smp_processor_id() in preemptible
>>[00000001] code: rcS/942
>>[4294676.542000] caller is mod_page_state_offset+0x12/0x28
>>[4294676.542000]  [<c1003723>] dump_stack+0x16/0x1a
>>[4294676.554000]  [<c110c1eb>] debug_smp_processor_id+0x77/0x90
>>[4294676.565000]  [<c10413d3>] mod_page_state_offset+0x12/0x28
>>[4294676.577000]  [<c104911b>] __handle_mm_fault+0x1f/0x18e
>>[4294676.589000]  [<c1013d7f>] do_page_fault+0x170/0x492
>>[4294676.600000]  [<c10033f7>] error_code+0x4f/0x54
>>[4294676.612000]  [<c10027ae>] ret_from_fork+0x6/0x14
> 
> 
> Nick.
> 
> 
Silly me, it is doing the local_irq_save *after* the __get_cpu_var.
Sorry for the typo. However the bug is harmless and will just result
in skewed statistics in the very rare chance of a race.
Thanks for reporting.
-- 
SUSE Labs, Novell Inc.
Send instant messages to your online friends 
http://au.messenger.yahoo.com
 
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/