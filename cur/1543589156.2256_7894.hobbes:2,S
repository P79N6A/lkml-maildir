Date: Fri, 27 Apr 2001 18:08:41 +0200
From: Michael Susæg <>
Subject: O_DIRECT support in 2.4.4?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/4/27/66

We have tested the rawio and o_direct patches from Andrea Arcangeli 
with great success, and wondered if they will be part of the next 
kernel release, 2.4.4?
So far we have tested these patches on four different systems.
With the latest versions of these patches (rawio-6, o_direct-3) 
all systems works perfectly ok. Both with and without O_DIRECT 
enabled in big file operations.
The O_DIRECT support really helps performance a lot
for some types of applications. We happen to have such an 
application, and we would like to see O_DIRECT 
support in the kernel source in the near future.
This would lift Linux to a new level in terms of disk performance
for "self-caching" applications.
A performance test we did on our application shows a huge 
improvement, upto 8 times better data read speed with direct-IO.
With buffered IO, the CPU is doing caching most of the time.
I attached a graph showing this performance win using O_DIRECT
versus buffered IO. Each thread reads at a random offset a random 
amount of data from a big data set. The dataset is placed on 
a software RAID 0 with many disks. With that configuration 
we are able to fully utilize the 160 MB/s SCSI controllers.
-- 
Michael Susæg, M.Eng.             Mail:  Michael.Susag@fast.no
Software Engineer                 Web:   
http://www.fast.no/
Fast Search & Transfer ASA        Phone: +47 21 60 12 27
P.O. Box 1677 Vika                Fax:   +47 21 60 12 01
NO-0120 Oslo, NORWAY
Try FAST Search: 
http://www.alltheweb.com/
[image]