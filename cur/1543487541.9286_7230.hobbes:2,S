Date: Fri, 26 Feb 1999 10:00:58 +0100
From: "Stefano Mason" <>
Subject: BUG kernel 2.2.x for pcmcia ibm token ring
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/2/26/67

I try with:
pcmcia-3.0.9 & kernel 2.2.(0-2)          here I find bug
pcmcia-3.0.9 & kernel 2.0.36       here I didn' t find bug
I attach /var/log/messages that report the bug error in allocation of mmio
base address, and at the end of quote, report the correct allocation.
--- QUOTE:
Feb 26 09:21:33 areo kernel: cs: memory probe 0x0d0000-0x0dffff: clean.
Feb 26 09:21:33 areo cardmgr[214]: initializing socket 0
Feb 26 09:21:33 areo cardmgr[214]: socket 0: IBM Token Ring Adapter
Feb 26 09:21:33 areo cardmgr[214]: executing: 'insmod
/lib/modules/2.2.2/pcmcia/ibmtr_cs.o irq_list=9 mmiobase=0xd2000
srambase=0xd8
000 sramsize=32 ringspeed=16'
Feb 26 09:21:33 areo kernel: tr0: port 0xa20, irq 9, mmio 0xc00d2000, sram
0xd8000,
Feb 26 09:21:33 areo kernel:   hwaddr=0004ACFA201B
Feb 26 09:21:33 areo cardmgr[214]: executing: './network start tr0'
Feb 26 09:21:35 areo kernel: tr0: Initial interrupt : 16 Mbps, shared RAM
base 000d8000.
Feb 26 09:21:35 areo kernel: tr0: open failed: ret_code = 34, retrying
Feb 26 09:27:02 areo syslogd 1.3-3: restart.
Feb 26 09:27:02 areo kernel: klogd 1.3-3, log source = /proc/kmsg started.
Feb 26 09:27:03 areo kernel: Loaded 4254 symbols from /boot/System.map.
Feb 26 09:27:03 areo kernel: Symbols match kernel version 2.0.36.
Feb 26 09:27:03 areo kernel: No module symbols loaded.
Feb 26 09:27:03 areo kernel: Memory: sized by int13 0e801h
Feb 26 09:27:03 areo kernel: Console: 16 point font, 400 scans
Feb 26 09:27:03 areo kernel: Console: colour VGA+ 80x25, 1 virtual console
(max 63)
Feb 26 09:27:03 areo kernel: pcibios_init : BIOS32 Service Directory
structure at 0x000fa000
Feb 26 09:27:03 areo kernel: pcibios_init : BIOS32 Service Directory entry
at 0xf7000
Feb 26 09:27:03 areo kernel: pcibios_init : PCI BIOS revision 2.10 entry at
 0xf73d8
Feb 26 09:27:03 areo kernel: Probing PCI hardware.
Feb 26 09:27:03 areo kernel: Calibrating delay loop.. ok - 48.13 BogoMIPS
Feb 26 09:27:03 areo kernel: Memory: 30824k/32768k available (748k kernel
code, 384k reserved, 812k data)
Feb 26 09:27:03 areo kernel: Swansea University Computer Society NET3.035
for Linux 2.0
Feb 26 09:27:03 areo kernel: NET3: Unix domain sockets 0.13 for Linux
NET3.035.
Feb 26 09:27:03 areo kernel: Swansea University Computer Society TCP/IP for
 NET3.034
Feb 26 09:27:03 areo kernel: IP Protocols: IGMP, ICMP, UDP, TCP
Feb 26 09:27:03 areo kernel: Linux IP multicast router 0.07.
Feb 26 09:27:03 areo kernel: VFS: Diskquotas version dquot_5.6.0
initialized
Feb 26 09:27:03 areo kernel:
Feb 26 09:27:03 areo kernel: Checking 386/387 coupling... Ok, fpu using
exception 16 error reporting.
Feb 26 09:27:03 areo kernel: Checking 'hlt' instruction... Ok.
Feb 26 09:27:03 areo kernel: Intel Pentium with F0 0F bug - workaround
enabled.
Feb 26 09:27:03 areo kernel: alias mapping IDT readonly ...  ... done
Feb 26 09:27:03 areo kernel: Linux version 2.0.36 (root@porky.redhat.com)
(gcc version 2.7.2.3) #1 Tue Nov 17 13:01:19 EST 1998
Feb 26 09:27:03 areo kernel: Starting kswapd v 1.4.2.2
Feb 26 09:27:03 areo kernel: Serial driver version 4.13 with no serial
options enabled
Feb 26 09:27:03 areo kernel: tty00 at 0x03f8 (irq = 4) is a 16550A
Feb 26 09:27:03 areo kernel: PS/2 auxiliary pointing device detected --
driver installed.
Feb 26 09:27:03 areo kernel: Real Time Clock Driver v1.09
Feb 26 09:27:03 areo kernel: Ramdisk driver initialized : 16 ramdisks of
4096K size
Feb 26 09:27:03 areo kernel: hda: FUJITSU M2714T, 1037MB w/128kB Cache,
CHS=526/64/63
Feb 26 09:27:03 areo kernel: ide0 at 0x1f0-0x1f7,0x3f6 on irq 14
Feb 26 09:27:03 areo kernel: Floppy drive(s): fd0 is 1.44M
Feb 26 09:27:03 areo kernel: FDC 0 is a post-1991 82077
Feb 26 09:27:03 areo kernel: md driver 0.36.3 MAX_MD_DEV=4, MAX_REAL=8
Feb 26 09:27:03 areo kernel: scsi : 0 hosts.
Feb 26 09:27:03 areo kernel: scsi : detected total.
Feb 26 09:27:03 areo kernel: Partition check:
Feb 26 09:27:03 areo kernel:  hda: hda1 hda2 hda3
Feb 26 09:27:03 areo kernel: VFS: Mounted root (ext2 filesystem) readonly.
Feb 26 09:27:03 areo kernel: Adding Swap: 64508k swap-space (priority -1)
Feb 26 09:27:06 areo kernel: Linux PCMCIA Card Services 3.0.9
Feb 26 09:27:06 areo kernel:   kernel build: 2.0.36 #1 Tue Nov 17 13:01:19
EST 1998
Feb 26 09:27:06 areo kernel:   options:  [pci] [cardbus]
Feb 26 09:27:06 areo kernel: Intel PCIC probe:
Feb 26 09:27:06 areo kernel:   Cirrus PD672x ISA-to-PCMCIA at port 0x3e0
ofs 0x00, 2 sockets
Feb 26 09:27:06 areo kernel:     host opts [0]: [ring] [65/6/3] [1/15/3]
Feb 26 09:27:06 areo kernel:     host opts [1]: [ring] [65/6/3] [1/15/3]
Feb 26 09:27:06 areo kernel:     ISA irqs (default) = 3,4,5,7,9,10,11,12
polling interval = 1000 ms
Feb 26 09:27:07 areo cardmgr[242]: starting, version is 3.0.9
Feb 26 09:27:07 areo cardmgr[242]: watching 2 sockets
Feb 26 09:27:07 areo kernel: cs: IO port probe 0x1000-0x17ff: excluding
0x1000-0x100f
Feb 26 09:27:07 areo kernel: cs: IO port probe 0x0100-0x04ff: excluding
0x370-0x37f 0x400-0x40f 0x480-0x48f 0x4c0-0x4df
Feb 26 09:27:07 areo kernel: cs: IO port probe 0x0a00-0x0aff: clean.
Feb 26 09:28:43 areo cardmgr[242]: initializing socket 0
Feb 26 09:28:43 areo cardmgr[242]: socket 0: IBM Token Ring Adapter
Feb 26 09:28:43 areo kernel: cs: memory probe 0x0d0000-0x0dffff: clean.
Feb 26 09:28:44 areo cardmgr[242]: executing: 'insmod
/lib/modules/preferred/pcmcia/ibmtr_cs.o irq_list=9 mmiobase=0xd2000
srambase=
0xd8000 sramsize=32 ringspeed=16'
Feb 26 09:28:44 areo kernel: tr0: port 0xa20, irq 9, mmio 0xd2000, sram
0xd8000,
Feb 26 09:28:44 areo kernel:   hwaddr=0004ACFA201B
Feb 26 09:28:44 areo cardmgr[242]: executing: './network start tr0'
Feb 26 09:28:46 areo kernel: tr0: Initial interrupt : shared RAM located at
 000D82D4.
Feb 26 09:29:05 areo kernel: tr0: Adapter initialized and opened.
Best regards
Stefano
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/