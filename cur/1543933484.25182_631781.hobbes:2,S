Date: Wed, 26 Dec 2007 10:38:45 +1100
From: Rusty Russell <>
Subject: Re: [PATCH 04/16] per-cpu run guest
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/12/25/69

On Friday 21 December 2007 00:33:44 Glauber de Oliveira Costa wrote:
> @@ -55,11 +55,15 @@ static int user_send_irq(struct lguest *lg, const
> unsigned long __user *input) static ssize_t read(struct file *file, char
> __user *user, size_t size,loff_t*o) {
>  	struct lguest *lg = file->private_data;
> +	struct lguest_vcpu *vcpu = NULL;
> +	unsigned int vcpu_id = *o;
>
>  	/* You must write LHREQ_INITIALIZE first! */
>  	if (!lg)
>  		return -EINVAL;
>
> +	vcpu = &lg->vcpus[vcpu_id];
> +
Better do a bounds check here!
Cheers,
Rusty.