Date: Wed, 28 Nov 2007 14:25:59 -0800
From: Geoff Levand <>
Subject: Re: [patch 3/7] ps3: Use the HVs storage device notification mechanism properly
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/11/28/333

Geert Uytterhoeven wrote:
> ps3: Use the HV's storage device notification mechanism properly
> 
> The hypervisor has a storage device notification mechanism to wait until a
> storage device is ready. Unfortunately the storage device probing code used
> this mechanism in an incorrect way, needing a polling loop and handling of
> devices that are not yet ready.
> 
> This change corrects this by:
>   - First waiting for the reception of an asynchronous notification that a new
>     storage device became ready,
>   - Then looking up the storage device in the device repository.
> 
> Signed-off-by: Geert Uytterhoeven <Geert.Uytterhoeven@sonycom.com>
> ---
>  arch/powerpc/platforms/ps3/device-init.c |  395 +++++++++++++++----------------
>  arch/powerpc/platforms/ps3/platform.h    |    2 
>  arch/powerpc/platforms/ps3/repository.c  |   29 --
>  3 files changed, 194 insertions(+), 232 deletions(-)
Let's hope this is the end of the storage device notification saga!
Acked-by: Geoff Levand <geoffrey.levand@am.sony.com>
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/