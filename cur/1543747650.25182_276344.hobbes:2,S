Date: Thu, 2 Dec 2004 23:48:35 +0100
From: Lukas Hejtmanek <>
Subject: Re: Kernel 2.6.9 Multiple Page Allocation Failures
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/12/2/235

On Thu, Dec 02, 2004 at 11:31:46PM +0100, Stefan Schmidt wrote:
> I had no luck with/without TSO either but on tg3.
> I disabled the on-disk-caching component of the application and it now runs
> without page allocation errors. Currently it is running smoothly at ~500mbit/s
> and ~80kpps in each direction at ~44k interrupts/s, so the problematic
> combination seems to be many open files, high i/o transaction rate or
> troughput and heavy networking load. (tso currently on)
> Caching on ext2-fs in general seemed to generate less page allocation errors
> than on xfs and none of the traces i looked over so far showed involvement
> of the filesystem i.e. were all triggered by alloc_skb.
I found that just high network i/o (generated by iperf at 900Mbps) is ok.
Problematic seems to be file uploading. I'm using IBP servers that listen
through many threads and stores blocks (5MB each) on local disk. After whole
memory (1GB) is used as cache then the first allocation failure occurs.
-- 
Lukáš Hejtmánek
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/