Date: Mon, 10 Mar 2003 07:25:55 +0100
From: Mikael Starvik <>
Subject: RE: [PATCH] Avoid PC(?) specific cascade dma reservation inkernel /dma.c
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/3/10/10

For CRIS the DMA channel numbers supplied refers to internal DMA
channels between the CPU and other units in the chip. The numbers
never refers to external units such as PCI devices or ISA devices.
If anybody would connect ISA or PCI the devices would all share
the same internal DMA. This may not be the intended usage of 
kernel/dma.c and we could provide our own code to do the same
thing.
If kernel/dma.c should be as generic as it looks then the 
reservation of DMA 4 as "cascade" should probably be done by
some other module (or by arch specific code).
/Mikael
-----Original Message-----
From: Alan Cox [mailto:alan@lxorguk.ukuu.org.uk]
Sent: Sunday, March 09, 2003 9:33 PM
To: Mikael Starvik
Cc: Johan Adolfsson; 'Marcelo Tosatti'; 'Linus Torvalds'; 'Linux Kernel
Mailing List'
Subject: RE: [PATCH] Avoid PC(?) specific cascade dma reservation
inkernel/dma.c
On Sun, 2003-03-09 at 13:49, Mikael Starvik wrote:
> >I don't know of any PC cards that can support ISA DMA channel 4 so I
> >guess simply because of that it hasn't happened. Do you actually
> >know of any DMA 4 capable ISA devices or is it used for onboard
> >ISA devices ?
> 
> In this case it is used in a non ISA capable system where DMA channel
> numbers doesn't relate to ISA numbers in any way. 
So what happens if someone plugs a PCI/ISA bridge into an axis system.
Surely you should be reporting no ISA DMA and having a set of similar
axis specific DMA handlers - or does it really look so close to ISA think ?
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/