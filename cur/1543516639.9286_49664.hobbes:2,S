Date: Sat, 20 Nov 1999 12:14:58 -0700
From: Trever Adams <>
Subject: Re: Full disk and 2.3.x kernels.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/11/20/64

Neil Brown wrote:
> 
> On Friday November 19, trever_Adams@bigfoot.com wrote:
> > This problem appeared in early 2.3.x kernels.  I believe I first saw it
> > in 2.3.11.
> >
> > Scenerio: Let your disk fill very close to full.  Erase a few hundred
> > megabytes of data so you can work on other things.  Disk stays "full."
> > Your apps give you many many errors of such.
> >
> > in 2.3.x<26 (26 may have been included in this), it never recovers.  It
> > takes a reboot to get your disk space back.
> >
> > In 2.3.x>28 (may include 26, I cant remember), two or three fails and
> > then bam, you have your space back.
> >
> > Sync doesn't fix this.  It seems to take failed writes.
> 
> I noticed something similar to this when playing with knfsd,
> though it seemed to affect 2.2.13 and not 2.3.28.
> 
> Does an umount attempt (which probably will fail with an 'in use' error) fix the problem?
> If so, then it is probably a bunch of deleted inodes still being held
> open by the dcache.  If not, then I guess it's a different problem.
> 
> NeilBrown
No, an unmount doesnt fix it.  Mine has simply to do with ext2fs, though
I am sure it could be in the VFS layer and show up in both places.
Trever
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/