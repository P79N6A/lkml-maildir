Date: Tue, 27 Apr 2004 16:26:43 +0200
From: Matthias Andree <>
Subject: Re: Anyone got aic7xxx working with 2.4.26?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/4/27/105

On Tue, 27 Apr 2004, Marcelo Tosatti wrote:
> What is the compile error with 2.4-BK-current? 
Well, it used to be one that went away after I typed:
cp .config /tmp
make distclean
bk -Ur get -S         # <- this checked out dozens of include files
mv /tmp/.config .
make oldconfig dep
make bzImage modules
The problem was:
(1) glibc-devel (SuSE Linux) installs includes into /usr/include/linux.
    These are older includes (UTS_RELEASE 2.4.20, LINUX_VERSION_CODE
    132116).
(2) BK had removed some of the include files in the course of a "bk pull"
(3) "make dep" and the kernel stuff picked up the stale includes from
    /usr/include/linux instead of /space/BK/linux-2.4/include/...
    Apparently, the (relative) include/ directory has precedence, but
    the kernel build system falls back to looking in /usr/include/linux.
I don't know the kernel build system well enough to make a qualified
comment why this happened, might have been missing dependencies, missing
paths relative to the kernel source directory or something, or might be
the use of VPATH where it shouldn't be used or with too broad paths.
sym53c8xx_2 is also fine currently, I'm using it for my system disk as I
am writing this. This problem started earlier than compile errors
(incompatibly redefined symbols and such), so it may have had some stale
include files already but not enough to jam the build.
> Did you post the boot messages with sym53c8xx_2? Can you use sym53c8xx?
No, I didn't because I wasn't confident it was my own fault.
I haven't used ncr53c8xx or sym53c8xx in ages and don't intend to.
So everything is fine for me - except that this may happen to everyone
again at any time unless the build system is fixed to that make can
"get" (as in bk get) the include files.
Someone posted patches to fix this some weeks ago, but the patches
apparently fell on the floor unheeded, I don't recall if this was for
2.4 or 2.6.
-- 
Matthias Andree
Encrypt your mail: my GnuPG key ID is 0x052E7D95
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/