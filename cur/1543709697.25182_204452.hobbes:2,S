Date: Sun, 7 Mar 2004 01:33:07 +0200
From: Denis Vlasenko <>
Subject: Re: server migration
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/3/6/70

On Friday 05 March 2004 20:13, Lawrence Walton wrote:
> Hi all!
>
> I tried about four months ago to migrate a busy server to 2.6.0-test9,
> and failed miserably. Lightly loaded it worked well but as the number
> of users increased, the number of processes in uninterruptible sleep
> increased to the hundreds and then the server fell on it's face. I never
> found out exactly why or what processes where hanging if I guessed it
> would be openldap.
Why do you guess? Determine what processes are stuck.
> I'd like to take another shot at it with 2.6.3, I'd also like to get
> some hints on how better to debug the problem; remember it is a live
> server with live users, I can't spend much time before rebooting back to
> a 2.4 kernel and yes 2.4.25 runs fine.
>
> Things that are non-standard
>
> Lots of open files, it's not unusual to have 50000 open files.
> ext3 is mounted noatime,data=writeback on /home and /var
> Total processes are usually around 300 to 350.
>
> Main applications are:
>
> imap, exim and openldap running on Debian.
>
> Questions, comments, flames are welcome.
Compile with stack pointers, capture SysRq-T, post stack traces
of D processes to lkml.
--
vda
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/