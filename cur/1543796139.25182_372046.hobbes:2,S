Date: Thu, 1 Dec 2005 15:57:11 -0200
From: Marcelo Tosatti <>
Subject: Re: Better pagecache statistics ?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/12/1/175

On Thu, Dec 01, 2005 at 06:21:39PM +0100, Arjan van de Ven wrote:
> On Thu, 2005-12-01 at 09:15 -0800, Badari Pulavarty wrote:
> > > Most of the issues you mention are null if you move the stats
> > > maintenance burden to userspace. 
> > > 
> > > The performance impact is also minimized since the hooks 
> > > (read: overhead) can be loaded on-demand as needed.
> > > 
> > 
> > The overhead is - going through each mapping/inode in the system
> > and dumping out "nrpages" - to get per-file statistics. This is
> > going to be expensive, need locking and there is no single list 
> > we can traverse to get it. I am not sure how to do this.
Can't you add hooks to add_to_page_cache/remove_from_page_cache 
to record pagecache activity ?
> and worse... you're going to need memory to store the results, either in
> kernel or in userspace, and you don't know how much until you're done.
> That memory is going to need to be allocated, which in turn changes the
> vm state..
Indeed - need to pre-allocate some sensible amount of memory to store the
results (relayfs does it for your).
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/