Date: Mon, 17 Mar 2008 10:38:58 +0530
From: Balbir Singh <>
Subject: Re: [RFC][0/3] Virtual address space control for cgroups
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/3/17/8

Paul Menage wrote:
> On Mon, Mar 17, 2008 at 9:47 AM, Li Zefan <lizf@cn.fujitsu.com> wrote:
>>  It will be code duplication to make it a new subsystem,
> 
> Would it? Other than the basic cgroup boilerplate, the only real
> duplication that I could see would be that there'd need to be an
> additional per-mm pointer back to the cgroup. (Which could be avoided
> if we added a single per-mm pointer back to the "owning" task, which
> would generally be the mm's thread group leader, so that you could go
> quickly from an mm to a set of cgroup subsystems).
> 
I understand the per-mm pointer overhead back to the cgroup. I don't understand
the part about adding a per-mm pointer back to the "owning" task. We already
have task->mm. BTW, the reason by we directly add the mm_struct to mem_cgroup
mapping is that there are contexts from where only the mm_struct is known (when
we charge/uncharge). Assuming that current->mm's mem_cgorup is the one we want
to charge/uncharge is incorrect.
> And the advantage would that you'd be able to more easily pick/choose
> which bits of control you use (and pay for).
I am not sure I understand your proposal fully. But, if it can help provide the
flexibility you are referring to, I am all ears.
-- 
	Warm Regards,
	Balbir Singh
	Linux Technology Center
	IBM, ISTL