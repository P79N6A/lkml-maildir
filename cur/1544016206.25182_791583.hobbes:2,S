Date: Tue, 13 Jan 2009 14:42:08 -0800 (PST)
From: David Miller <>
Subject: Re: lib/klist.c: bit 0 in pointer can't be used as flag
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2009/1/13/451

From: Jesper Nilsson <Jesper.Nilsson@axis.com>
Date: Tue, 13 Jan 2009 23:12:35 +0100
> Can you recall another place where this trick is used?
> 
> It seems that rt_mutex uses the same trick (with the lowest 2bits)
> but AFAICT that's something we don't use on CRIS.
Sparsemem uses it.
The TRIE based routing tables uses it.
All of the IPV4/IPV6 socket hash tables use it as of 2.6.29-rc1.
You really can't avoid supporting this.  Why doesn't kmalloc
return properly aligned objects on CRIS?