Date: Wed, 19 Sep 2007 17:47:56 +0200
From: Oleg Verych <>
Subject: Re: PROBLEM: System Freeze on Particular workload with kernel 2.6.22.6
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/9/19/154

* Wed, 19 Sep 2007 04:45:17 -0400
>
> [1.] Summary
> System Freeze on Particular workload with kernel 2.6.22.6
>
> [2.] Description
> System freezes on repeated application of the following command
> for f in *png ; do convert -quality 100 $f `basename $f png`jpg; done
>
> Problem is consistent and repeatable.
> Problem persists when running on a different drive, and also in pure console (no X).
>
> One time, the following error logged in syslog:
> Sep 19 04:22:11 mossnew kernel: [  301.883919] VM: killing process convert
> Sep 19 04:22:11 mossnew kernel: [  301.884382] swap_free: Unused swap offset entry 0000ff00
> Sep 19 04:22:11 mossnew kernel: [  301.884421] swap_free: Unused swap offset entry 00000300
> Sep 19 04:22:11 mossnew kernel: [  301.884456] swap_free: Unused swap offset entry 00000200
> Sep 19 04:22:11 mossnew kernel: [  301.884491] swap_free: Unused swap offset entry 0000ff00
> Sep 19 04:22:11 mossnew kernel: [  301.884527] swap_free: Unused swap offset entry 0000ff00
> Sep 19 04:22:11 mossnew kernel: [  301.884562] swap_free: Unused swap offset entry 00000100
>
> Should not be a RAM problem. RAM has survived 12 hrs of Memtest with no errors.
> Should not be a CPU problem either. I have been running CPU intensive tasks for days.
>
> [3.] Keywords
> freeze, swap_free,VM
Nice bug report, seems like from linux-source/REPORTING-BUGS.
But still:
* no relevant Cc (memory management added)
+ no output of `mount` (because if swap is on some file system, that
  *can* be another problem)
+ no information about amount of memory and its BIOS configuration
FYI, latter two (and much more) is one `dmesg` output. This output,
together with any other kernel information can be gathered by serial or
net consoles:
linux-source/Documentation/serial-console.txt
linux-source/Documentation/networking/netconsole.txt 
If console messages after freeze can be seen in text mode VGA/CRT
also, photos of it somewhere on ftp will be OK.
> [4.] /proc/version
> Linux version 2.6.22.6intelcore2 (root@mossnew) (gcc version 4.1.2 (Ubuntu 4.1.2-0ubuntu4)) #1 SMP Sat Sep 15 00:29:00 EDT 2007
>
> [5.] No Oops
>
> [6.] Trigger
> - Create a large number of png images. (a few hundred)
>
> - repeatedly run
> for f in *png ; do convert -quality 100 $f `basename $f png`jpg; done
>
> - This might be subjective, but the freeze seems to show up sooner if there is a CPU heavy
> process running in the background.
>
> [7] Environment
> [7.1] Software /script/ver_linux
>
> Linux mossnew 2.6.22.6intelcore2 #1 SMP Sat Sep 15 00:29:00 EDT 2007 x86_64 GNU/Linux
>
[]
____
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/