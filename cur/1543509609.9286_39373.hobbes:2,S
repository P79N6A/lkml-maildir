Date: Thu, 16 Sep 1999 19:47:08 +0200
From: Henner Eisen <>
Subject: Re: passing skb ownership (was: ip_queue_xmit(): dangling skb pointer...)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/9/16/127

Alexey <kuznet@ms2.inr.ac.ru> writes:
>Hello!
>> xmit queue which is limited by 4kB payload. Thus, with MTU 1500, the isdn
>> internal queue length will not exceed 3-4 packets.
>
>Yes, it is OK. Actually, the counting depends on link speed.
>If it is enough high to hold rtt for MTU sized frame <= 200msec,
>it is better not to violate this bound. If it is so low, that
>this bound cannot be achieved in any case, it should be selected
>so that queue_size/rate enough to make ssh/telnet more-or-less responsive.
But ISDN B channel only provides 64000 Bit/s. Thus, according to your
200 msec rule, we should never have more than one frame inside the driver
in order to fulfill this critereon with MTU 1500.
not queue (minus overhead for hdlc framing) 
>> I think socket accounting will probably protect a user from filling up an
>> unlimited queue by accident.
>
>Alas, it will not.
>
>for (;;) {
>	 s = socket(AF_INET, SOCK_DGRAM, 0);
>	 sendto(s,  ...);
>	 close(s);
>}
>
>will kill machine reliably and almost instantly, if driver queue
>is unlimited.
Sure! (I was aware of this, but consideed it to be an exploit rather than
an accident).
Henner
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/