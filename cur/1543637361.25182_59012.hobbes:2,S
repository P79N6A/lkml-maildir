Date: 25 Jul 2002 02:31:54 +0100
From: Alan Cox <>
Subject: Re: [PATCH] VM accounting 1/3 trivial
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/7/24/243

On Wed, 2002-07-24 at 15:48, Hugh Dickins wrote:
> Thank you, it is surely incorrect (in the case where the do_munmap does
> not cover the whole vma, leaving one or two pieces behind: I think that
> must be the case you're remembering).  Would a patch which (if necessary)
> reapplies VM_ACCOUNT to the leftover piece(s) be welcome, or would it
> just look like an ugly face-saving exercise?
I went around this about five times before changing do_munmap having
failed dismally on each case. I wouldnt worry about face saving, I made
the same mistake and spent a couple of days debugging it.
> But I'll still have a consistency problem with MAP_NORESERVE versus
> sysctl_overcommit_memory, when the latter is changed (> 1 or <= 1).
Its very simple. If you have said "no overcommit" you cannot allow
anyone to violate the rule because any reservation could cause someone
who didnt NORESERVE to get killed off.
Secondly on my test runs, no process on a standard distro seems to use
NORESERVE anyway 8)
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/