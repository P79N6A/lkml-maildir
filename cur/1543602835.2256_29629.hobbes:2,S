Date: Fri, 28 Sep 2001 19:10:04 +0200
From: Till Immanuel Patzschke <>
Subject: Re: [BUG]: 2.4.10 lockup using ppp on SMP
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/9/28/125

Oops, forgot to tell - Chris Mason's patch has been applied (so NO change).
The problem seems somhow related to the general kernel lock in ioctls - to prove I
commented the unlock_kernel()/lock_kernel() in sock_ioctl out, leaving the kernel
locked during socket ioctls - bad, but proves ioctl related locking problem in
ppp_generic.c... The problem has nothing to do w/ double frees or mem. corruption
(IMO) - it seems to be related to "rest of the spin lock abuses" in ppp_generic.c...
:-)
Thanks for your help
Immanuel
Kurt Garloff wrote:
> On Fri, Sep 28, 2001 at 05:03:06PM +0200, Till Immanuel Patzschke wrote:
> > Hi,
> >
> > 2.4.10 (and all its 2.4.x predecessors) lock up in ppp_destroy_interface. Thanks
> > to the kdb I got the two tracebacks below - the all_ppp_lock interferes with
> > some other (socket?!) lock...
> > Any help is VERY much appreciated!
>
> Please try the patch that Chris Mason sent to LKML a day ago.
>
> Regards,
> --
> Kurt Garloff  <garloff@suse.de>                          Eindhoven, NL
> GPG key: See mail header, key servers         Linux kernel development
> SuSE GmbH, Nuernberg, DE                                SCSI, Security
>
>   --------------------------------------------------------------------------------
>    Part 1.2Type: application/pgp-signature
--
Till Immanuel Patzschke                 mailto: tip@internetwork-ag.de
interNetwork AG                         Phone:  +49-(0)611-1731-121
Bierstadter Str. 7                      Fax:    +49-(0)611-1731-31
D-65189 Wiesbaden                       Web:    
http://www.internetwork-ag.de
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/