Date: Wed, 8 Nov 2000 20:18:40 +0100
From: Marcus Meissner <>
Subject: tcp/ip connections and downed/removed netdevs
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/11/8/98

Hi,
I have a rather strange problem in regard to routing and tcp/ip connections.
My setup:
	- default route to eth0, metric 2
	- ppp dialin to static ip (ppp0), is another default route, metric 0
I open a telnet connection over the ppp0 interface.
I then down and remove the ppp0 interface (ifconfig -a ppp0 shows 'no such
device'), the default route over ppp0 is gone.
Symptom:
	The telnet connection hangs.
	No packets are transmitted over the still alive eth0 defaultroute.
	tcpdump -i eth0 shows 0 packets, "netstata -a" shows an increasing
	SendQ on the connection.
	If I dialin again, the still hanging packets get transmitted to
	the target.
I am not sure, but should this be?
Shouldn't packets get routed over eth0 in the case an interface vanishes?
Ciao, Marcus
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/