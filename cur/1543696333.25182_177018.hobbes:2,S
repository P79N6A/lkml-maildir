Date: Fri, 7 Nov 2003 17:48:24 +0100
From: Stephan von Krawczynski <>
Subject: Bug Report: 2.4.23-pre9 / SIS chipset / sundance
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/11/7/82

Hello,
I just experienced a problem with a configuration that is known to only work
with ACPI. It consists of:
P-III 1,4 GHz
Mainboard with SIS 630E chipset
Adaptec 29160 Controller
DLINK DFE-580 TX (four port card) (sundance driver)
A slightly different setup is known to work with 2.4.19 and ACPI patch. Problem
with this SIS chipset is interrupt sharing. If you do not use ACPI the box
freezes sometime.
The known-to-work setup is identical besides it contains a tulip-based four
port ethernet card (old DLINK cards).
We stress-tested the working box by NFS-copying data to the local hd over an
ethernet port that shares its interrupt with the aic.
The above failing setup with sundance driver results in network hanging, but no
other negative points. The network hang can be cured by "mii-tool -r <device>"
(restart autonegotiation). After that everything works well, until the next
hang.
During the network hang the shared interrupt (aic + ethernet) still counts up. 
Maybe the sundance driver just misses an interrupt and hangs, and restarting
autonegotiation resets some internals.
I can try whatever patch you like, this is no production setup.
Regards,
Stephan
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/