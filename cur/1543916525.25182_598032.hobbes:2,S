Date: Mon, 24 Sep 2007 15:06:06 +0200
From: Miklos Szeredi <>
Subject: Re: [patch 1/2] VFS: new fgetattr() file operation
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/9/24/112

> > > and if that means adding silly rename support so be it.
> > 
> > That's what is done currently.
> > 
> > But it's has various dawbacks, like rmdir doesn't work if there are
> > open files within an otherwise empty directory.
> > 
> > I'd happily accept suggestions on how to deal with this differenty.
> 
> Only sillyrename files with nlink > 1?  I don't see how attributes can
> change anything for a deleted file.
I don't quite understand your suggestion.
A file isn't deleted while there are still links or open files
refering to it.  So getting the attributes for a file with nlink==0 is
perfectly valid while the file is still open.
If a network filesystem protocol can't handle operations (be it data
or metadata) on an unlinked file, we must do sillirenaming, so that
the file is not actually unlinked.
Miklos
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/