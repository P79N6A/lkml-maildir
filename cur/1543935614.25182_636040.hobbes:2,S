Date: Wed, 9 Jan 2008 09:20:08 +0800
From: "Changli Gao" <>
Subject: Re: [PATCH] Improve scalability of epoll_ctl
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/8/581

On Jan 9, 2008 12:56 AM, Andi Kleen <andi@firstfloor.org> wrote:
>
> Are you sure it's faster? vmalloc/vfree can be quite slow because
> they have to change the MMU state of the kernel and take global
> locks.
I don't think so. In fact, the memory of fdtable is allocated by
vmalloc when its size is bigger than PAGE_SIZE:
static inline void * alloc_fdmem(unsigned int size)
{
    if (size <= PAGE_SIZE)
        return kmalloc(size, GFP_KERNEL);
    else
        return vmalloc(size);
}
>
> The other problem is that on 32bit systems vmalloc space is somewhat
> limited -- you might have added an unintended scaling limit.
As I have talked above, I am sure open(), socket() and etc. will first
encounter it.
-- 
Regardsï¼Œ
Changli Gao(xiaosuo@gmail.com)