Date: Mon, 20 Dec 1999 23:42:46 +1100
From: Keith Owens <>
Subject: Re: 2.3.33 compilation problems
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/12/20/33

On 20 Dec 1999 13:17:56 +0100, 
Ketil Malde <ketil@ii.uib.no> wrote:
>Keith Owens <kaos@ocs.com.au> writes:
>> It compiles fine for me, both as a module and as builtin.  
>
>With CONFIG_MODULES disabled, too?
Yes, just tried it.
>I haven't checked this with previous kernels, my box is slow, and
>previously I've only run with module support.
>
>After some further investigation, and careful "make clean"ing, things
>appear to break down in signal.c, when EXPORT_SYMBOL is called.  If I
>configure the kernel without loadable modules, include/linux/modules.h
>appears to #define EXPORT_SYMBOL et al. to "error
>EXPORT_SYMTAB_not_defined".
"make clean" alone may not be enough.  make with modules turned on
leaves lots of special files lying around in various directories, make
clean does not delete these special files.  Starting from 2.3.33 which
was compiled with CONFIG_MODULES, I did :-
  cp .config ..
  make mrproper (gets rid of all the config crud)
  cp ../.config .
  make menuconfig, turned off CONFIG_MODULES
  make dep clean && make -j 4 bzImage (SMP box)
The only problem was pcmcia/tulip_cb which insisted on compiled for
modules even though modules were disabled.  loop.c was fine.  Try
mrproper instead of clean.
I wish we had mec's Dancing Makefiles - no such problems and faster
too.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/