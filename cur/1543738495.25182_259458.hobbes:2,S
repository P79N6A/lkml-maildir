Date: Sun, 10 Oct 2004 15:51:43 -0700
From: Zack Weinberg <>
Subject: Re: udev: what's up with old /dev ?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/10/10/99

> - Is it possible to boot with an empty /dev, until udev builds it ?
> - If this is not the case, which are the minimal nodes that should be
> present ?
Having just done this experiment myself: With kernel 2.6.8, udev 034,
Debian unstable's init scripts, and no initramfs or initrd, it
suffices to have /dev/console and /dev/null in the root filesystem's
/dev.
The very first thing init does is open /dev/console, and if it doesn't
exist the entire boot hangs.  Thus, the only way to avoid having that
node on the root filesystem would be to set up udev from initrd or
initramfs.  I'm sure that's possible but I don't know how to do it;
and the boot scripts that exist right now in Debian unstable are not
set up to handle that case.
It may not be necessary to have /dev/null on the root filesystem; I
didn't try that.  Libc and the shell frequently open /dev/null behind
one's back, so I suspect it is wanted before udev starts up.
I have no idea what distros are planning in this area.
zw
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/