Date: Tue, 3 Oct 2000 16:01:36 -0500 (EST)
From: lkml recipient <>
Subject: Re: compiling kernel and modules issues
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/10/3/33

On Tue, 3 Oct 2000, Tom Cheung wrote:
> Would anyone tell me how can I update the kernel and modules
> simultaneously without losing previous installed modules.Thanks a lot !!
Hi. Let me first say that although I'm subscribed to lkml, I'm really only
an aspiring kernel hacker, not in any way a guru at this point in
time. However, I have found a solution to your last question that Works
For Me(tm).
The kernel modules are stored in /lib/modules/<kernel-version>/. The
version number that the kernel will report (to 'uname -r', for example) is
set in the top-level makefile, in three variables. What I do is I just
append a string, usually -b#, which indicates which build this is from the
source tree. For example, the first time I compiled a kernel from my
2.4.0-test9-pre7 tree, I appended '-b0' to the $EXTRAVERSION variable in
the makefile, and the modules I compiled for that kernel were placed in
/lib/modules/2.4.0-test9-pre7/. When that didn't work for me quite right,
I edited the makefile again, changing '-b0' to '-b1', changed my
configuration a little, and re-compiled. This time, make modules_install
put the new modules in /lib/modules/2.4.0-test9-pre7-b1/. When I booted
with the new kernel, it looked there for its modules.
As I said, I'm really no guru, and as a result there may be some reason
why this solution won't work for other people, and I just don't know about
that reason yet. I do hope it helps you, though. The issue of overwriting
all my modules when I re-compiled a kernel used to be a real annoyance to
me, too, when I had one that pretty much worked but I just wanted to try
another configuration.
-Andrew C. Dingman
dingman@cs.earlham.edu
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/