Date: Mon, 16 Jul 2007 23:57:48 -0700
From: Andrew Morton <>
Subject: Re: [PATCH] change SysRq keycode for systems without SysRq key
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/7/17/39

On Fri, 13 Jul 2007 23:20:33 +0200 federico ferri <xaero@inwind.it> wrote:
>  #ifdef CONFIG_MAGIC_SYSRQ	       /* Handle the SysRq Hack */
> -	if (keycode == KEY_SYSRQ && (sysrq_down || (down == 1 && sysrq_alt))) {
> +	if (keycode == CONFIG_MAGIC_SYSRQ_KEYCODE && (sysrq_down || (down == 1 && sysrq_alt))) {
>  		sysrq_down = down;
>  		return;
>  	}
> diff -uprN linux.orig/lib/Kconfig.debug linux/lib/Kconfig.debug
> --- linux.orig/lib/Kconfig.debug	2005-07-09 21:47:22.000000000 +0200
> +++ linux/lib/Kconfig.debug	2005-07-09 21:50:44.000000000 +0200
> @@ -28,6 +28,16 @@ config MAGIC_SYSRQ
>  	  send a BREAK and then within 5 seconds a command keypress. The
>  	  keys are documented in <file:Documentation/sysrq.txt>. Don't say Y
>  	  unless you really know what this hack does.
> +	  
> +config MAGIC_SYSRQ_KEYCODE
> +	int
> +	prompt "Change SysRq key-code" if MAGIC_SYSRQ
> +	default 99
> +	depends on MAGIC_SYSRQ
> +	help
> +	  If your keyboard doesn't have a SysRq key (also labeled PrintScr),
> +	  you can specify another keycode which should act as SysRq.
> +	  Default is 99 (KEY_SYSRQ).
> +	  You can find this number using programs like evtest, or (maybe)
> +	  showkey.
> 
Seems harmless enough ;)
Could you please send in a suitable update to Documentation/sysrq.txt?
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/