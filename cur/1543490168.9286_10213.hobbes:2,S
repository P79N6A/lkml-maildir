Date: Wed, 17 Mar 1999 01:05:19 -0800 (PST)
From: David Lang <>
Subject: Re: bind 8.2 will not compile with Linux kernel 2.2.3
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/3/17/29

-----BEGIN PGP SIGNED MESSAGE-----
adding an include <linux/socket.h> just before the include <sys/un.h>
appears to have allowed it to compile. I will test it in the morning when
I get back into work.
I did verify that what bind/src/bin/named/pathnames.c includes is sys/un.h
not linux/un.h 
David Lang
On Wed, 17 Mar 1999, David Lang wrote:
> 
> On Wed, 17 Mar 1999, Alexander Viro wrote:
> 
> > 
> > On Tue, 16 Mar 1999, David Lang wrote:
> > 
> > > bind 8.2 complains about /usr/include/linux/un.h
> > >  (which maps to /usr/src/linux/include/linux/un.h which is why I am
> > > sending it to the linux kernel list as well as the bind-bugs list)
> > > the exact error is
> > > 
> > > gcc  -O -g -I../../port/linux/include -I../../include   -c pathnames.c
> > > In file included from /usr/include/sys/un.h:1,
> > >                  from pathnames.c:25:
> > > /usr/include/linux/un.h:7: parse error before `sa_family_t'
> > 
> > 	sa_family_t is used as type name (which it is) but gcc didn't see
> > the corresponding typedef, so it stares at the body of struct definition
> > and sees unknown identifier in the place where the type should be. For
> > what gcc cares, it is not different from
> > struct foo {
> > 	undefined_name bar;
> > }
> > 	sa_family_t is defined in linux/socket.h *if* you insist on using
> > the kernel headers at all.
> > 	What's wrong with sys/un.h, BTW?
> >
> 
> I will try and see what happens if I include socket.h as well. As far as I
> can decipher from the error message linux/un.h was included in sys/un.h I
> have no idea why
> 
> David Lang
>  
> > > /usr/include/linux/un.h:7: warning: no semicolon at end of struct or union
> > > /usr/include/linux/un.h:9: parse error before `}'
> > > make[2]: *** [pathnames.o] Error 1
> > > make[2]: Leaving directory `/home/dlang/bind/src/bin/named'
> > > make[1]: *** [named] Error 2
> > > make[1]: Leaving directory `/home/dlang/bind/src/bin'
> > > make: *** [all] Error 2
> > > 
> > > any suggestions? I am not seeing anything obviously wrong with un.h
> > > 
> > > my system is slackware 3.5
> > > 
> > > David Lang
> > 
> > 
> 
-----BEGIN PGP SIGNATURE-----
Version: PGP for Personal Privacy 5.0
Charset: noconv
iQEVAwUBNu9wVz7msCGEppcbAQHTCQf/Xv7lEtXAkdDBkT6v0HH7+EFi2R46OcgS
s0nnIqjw/8xZuDDSuw0CvoraGi5LdeB/gu4N3SzEGc6HsnMCf2x6pdCpSsl9HuAD
8kqcpAZtAFotXmaLRqNS/KzpsJYf6o71d1cyGW5tnymT44xrH9RV21zPFyNnoF5s
/ig2ea6ntzoGR8huNxVgpeLunVVV56lcMhRE/rSBiStUKwH9o4a5QvNuuUQ7Dr9I
dF4ivDfi6hegK8KkI5NSV7ALz7yBEOogoCEskiWtfP5qCY964B7W9pXfnItCtSd4
3Fc7O/RRCzk5eBA6rOpTlrR5+c9EysyaDcgQpJou9cEIoIoFvuHsyA==
=WuW3
-----END PGP SIGNATURE-----
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/