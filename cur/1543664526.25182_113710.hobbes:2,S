Date: Sat, 01 Mar 2003 16:39:26 -0500
From: Brian Davids <>
Subject: Re: ide-scsi -O3 runtime problem
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/3/1/122

Michael Buesch wrote:
> Hi.
> 
> I have recently played a little bit with some optimiziation-flags on 
> linux-2.4.20, linux-2.4.21-pre4 and linux-2.4.21-pre5 (I'm currently running 
> pre5).
> Finally I could bring it to compile, but when I tried to mount a CD-ROM on the 
> shiny new system with the optimized kernel, mount simply said:
> mount: /dev/scd0 is not a valid block device
> 
> Then I tried to mount it via /dev/hdb (which is physically the same device, 
> but without ide-scsi) and it worked fine.
> 
> Is it a known problem, that ide-scsi fails if the kernel is compiled with -O3 
> ?
> If you have any questions about my hardware and/or configuration, just ask. :)
It's not an -O3 problem, it's one with your .config... ;)
> CONFIG_BLK_DEV_IDECD=y
When you have that set, ide-scsi never gets a chance to see the CD-ROM 
drive as the native IDE driver grabs it first.  Everything else relevant 
in the IDE and SCSI sections seem fine to my untrained eye... ;)  So 
either change that to N, or at boot time you can pass "hdb=scsi" as one 
of the parameters and avoid recompiling.
Brian Davids
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/