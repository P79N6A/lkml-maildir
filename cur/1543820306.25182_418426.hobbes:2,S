Date: Mon, 24 Apr 2006 15:55:27 -0400
From: Pavel Roskin <>
Subject: Re: Removing .tmp_versions considered harmful
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/4/24/231

Hello, Sam!
How about following patch?  Something needs to be done before 2.6.17.
Complaints about .tmp_versions are almost in every list about wireless
drivers I'm subscribed to.
I'm not asking to keep *.mod files, just please keep the .tmp_versions
directory.
-------------------------------
Remove *.mod files but not .tmp_versions for external builds
From: Pavel Roskin <proski@gnu.org>
When "make install" is run as root, .tmp_versions is re-created and
becomes owned by root.  Subsequent "make" run by user fails because
.tmp_versions cannot be removed.
Signed-off-by: Pavel Roskin <proski@gnu.org>
---
 Makefile |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)
diff --git a/Makefile b/Makefile
index a940eae..6d7db09 100644
--- a/Makefile
+++ b/Makefile
@@ -1086,7 +1086,7 @@ # We are always building modules
 KBUILD_MODULES := 1
 PHONY += crmodverdir
 crmodverdir:
-	$(Q)rm -rf $(MODVERDIR)
+	$(Q)rm -f $(MODVERDIR)/*.mod
 	$(Q)mkdir -p $(MODVERDIR)
 
 PHONY += $(objtree)/Module.symvers
-- 
Regards,
Pavel Roskin
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/