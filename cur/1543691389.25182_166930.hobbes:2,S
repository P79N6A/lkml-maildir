Date: Thu, 18 Sep 2003 17:01:53 +0200
From: Andrea Arcangeli <>
Subject: Re: 2.4.23pre4 VM breaks in LTP
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/9/18/79

On Thu, Sep 18, 2003 at 09:42:26AM -0300, Marcelo Tosatti wrote:
> 
> 
> Andrea, do you have any idea of what could cause this? A missing merge may
> be the cause, as Andi pointed out. I wont have time to look further into 
> it during the weekend and next week (Europe conferences). 
> 
> Andi, about the ext3 BUG I'm waiting for Stephen. I remember he knew how
> to fix the issue but didnt had the patch ready yet sometime ago.
it maybe a partial merge, though in theory the different patches had to
be mostly orthogonal. but I think it would be interesting to reproduce
on x86 too first just to be sure it's a generic issue (especially the
numa kernels are unstable for me even with the needed numa fixes and
numa is totally broken in mainline, it misses lots of numa fixes, so
without further details it's not obvious it's a missing merge and not
the lack of additional orthogonal fixes, either numa that we know for
sure or ext3 that crashes with ltp)
> 
> On 18 Sep 2003, Andi Kleen wrote:
> 
> 
> > 
> > FYI
> > 
> > When I run LTP on 2.4.23pre4 the machine deadlocks in mem01.
> > It is still pingable, but login etc. do not manage to fork anything.
> > 
> > mem01 simply allocates all free memory and free swap (as seen
> > in /proc/meminfo) and touches a single page in this mapping, then
> > exits. 
> > 
> > I saw the problem on a 1GB RAM + 1GB swap x86-64 box
> > 
> > (note that on 32bit the limit is 1GB max, so in many cases it will
> > not trigger on 32bit)
> > 
> > When I change mem01 to allocate 10% less memory it does not hang the box.
> > And UL -aa kernel also doesn't hang it, so it's probably some half merge.
> > 
> > Also the ext3 BUG on x86-64 can be also triggered with multiple LTP
> > runs.
> 
> 
Andrea
/*
 * If you refuse to depend on closed software for a critical
 * part of your business, these links may be useful:
 *
 * rsync.kernel.org::pub/scm/linux/kernel/bkcvs/linux-2.5/
 * rsync.kernel.org::pub/scm/linux/kernel/bkcvs/linux-2.4/
 * 
http://www.cobite.com/cvsps/
 *
 * svn://svn.kernel.org/linux-2.6/trunk
 * svn://svn.kernel.org/linux-2.4/trunk
 */
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/