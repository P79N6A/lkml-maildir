Date: Thu, 13 Dec 2007 08:52:34 +0000
From: "Jan Beulich" <>
Subject: [PATCH] i386: iret exception must use SIGILL
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/12/13/131

.. since it uses ILL_BADSTK (which is meaningless in the context of
SIGSEGV).
Signed-off-by: Jan Beulich <jbeulich@novell.com>
 arch/x86/kernel/traps_32.c |    2 +-
 1 files changed, 1 insertion(+), 1 deletion(-)
--- linux-2.6.24-rc5/arch/x86/kernel/traps_32.c	2007-12-12 11:28:18.000000000 +0100
+++ 2.6.24-rc5-i386-sigill/arch/x86/kernel/traps_32.c	2007-12-04 16:09:33.000000000 +0100
@@ -560,7 +560,7 @@ DO_ERROR(10, SIGSEGV, "invalid TSS", inv
 DO_ERROR(11, SIGBUS,  "segment not present", segment_not_present)
 DO_ERROR(12, SIGBUS,  "stack segment", stack_segment)
 DO_ERROR_INFO(17, SIGBUS, "alignment check", alignment_check, BUS_ADRALN, 0, 0)
-DO_ERROR_INFO(32, SIGSEGV, "iret exception", iret_error, ILL_BADSTK, 0, 1)
+DO_ERROR_INFO(32, SIGILL, "iret exception", iret_error, ILL_BADSTK, 0, 1)
 
 fastcall void __kprobes do_general_protection(struct pt_regs * regs,
 					      long error_code)