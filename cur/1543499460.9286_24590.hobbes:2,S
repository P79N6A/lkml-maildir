Date: Thu, 17 Jun 1999 23:56:59 -0700 (PDT)
From: Kayvan Aghaiepour Sylvan <>
Subject: Re: Massive e2fs corruption with 2.2.9/10?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/6/18/13

>>>>> "BJP" == B James Phillippe <bryan@terran.org> writes:
BJP> I'm _not_ seeing errors; see below.
I'm not seeing any errors either. No problems with IDE, or SCSI, or
IDE to SCSI interactions.
Here's the info:
  [kayvan@satyr /usr/src/redhat/BUILD/linux]$ cat /proc/version 
  Linux version 2.2.9-ac6 (root@satyr.sylvan.com) (gcc version egcs-2.91.66 19990314/Linux (egcs-1.1.2 release)) #1 Sun Jun 13 21:10:43 PDT 1999
Excerpts from /var/log/dmesg:
  PIIX3: IDE controller on PCI bus 00 dev 39
  PIIX3: not 100% native mode: will probe irqs later
      ide0: BM-DMA at 0x1000-0x1007, BIOS settings: hda:pio, hdb:pio
      ide1: BM-DMA at 0x1008-0x100f, BIOS settings: hdc:pio, hdd:pio
  hda: WDC AC313000R, ATA DISK drive
  hdc: BCD-40XH CD-ROM, ATAPI CDROM drive
  ide0 at 0x1f0-0x1f7,0x3f6 on irq 14
  ide1 at 0x170-0x177,0x376 on irq 15
  hda: WDC AC313000R, 12416MB w/512kB Cache, CHS=1582/255/63, (U)DMA
  hdc: ATAPI 24X CD-ROM drive, 256kB Cache
  [...]
  (scsi0) <Adaptec AIC-7860 Ultra SCSI host adapter> found at PCI 12/0
  (scsi0) Narrow Channel, SCSI ID=7, 3/255 SCBs
  (scsi0) Downloading sequencer code... 419 instructions downloaded
  scsi0 : Adaptec AHA274x/284x/294x (EISA/VLB/PCI-Fast SCSI) 5.1.13/3.2.4
	 <Adaptec AIC-7860 Ultra SCSI host adapter>
  scsi : 1 host.
    Vendor:           Model: CRW620            Rev: 2.40
    Type:   CD-ROM                             ANSI SCSI revision: 02
  Detected scsi CD-ROM sr0 at scsi0, channel 0, id 0, lun 0
    Vendor: QUANTUM   Model: FIREBALL ST4.3S   Rev: 0F0C
    Type:   Direct-Access                      ANSI SCSI revision: 02
  Detected scsi disk sda at scsi0, channel 0, id 1, lun 0
  (scsi0:0:1:0) Synchronous at 10.0 Mbyte/sec, offset 15.
    Vendor: CONNER    Model: CFP2105S  2.14GB  Rev: 172A
    Type:   Direct-Access                      ANSI SCSI revision: 02
  Detected scsi disk sdb at scsi0, channel 0, id 2, lun 0
  (scsi0:0:2:0) Synchronous at 10.0 Mbyte/sec, offset 15.
    Vendor: MAXTOR    Model: MXT-540SL     !N  Rev: JA6I
    Type:   Direct-Access                      ANSI SCSI revision: 02
  Detected scsi disk sdc at scsi0, channel 0, id 4, lun 0
  (scsi0:0:4:0) Synchronous at 10.0 Mbyte/sec, offset 15.
    Vendor: IBM       Model: DDRS-34560        Rev: S97B
    Type:   Direct-Access                      ANSI SCSI revision: 02
  Detected scsi disk sdd at scsi0, channel 0, id 6, lun 0
  (scsi0:0:6:0) Synchronous at 10.0 Mbyte/sec, offset 15.
  sr0: scsi3-mmc drive: 6x/6x writer cd/rw xa/form2 cdda tray
  SCSI device sda: hdwr sector= 512 bytes. Sectors= 8519216 [4159 MB] [4.2 GB]
   sda: sda1
  SCSI device sdb: hdwr sector= 512 bytes. Sectors= 4194304 [2048 MB] [2.0 GB]
   sdb: sdb1
  SCSI device sdc: hdwr sector= 512 bytes. Sectors= 1065912 [520 MB] [0.5 GB]
   sdc: sdc1
  SCSI device sdd: hdwr sector= 512 bytes. Sectors= 8925000 [4357 MB] [4.4 GB]
   sdd: sdd1
I am running Linux-2.2.9 + patch-2.2.9-ac6 + linux-2.2.6-nbd.patch
(reproduced below):
--- drivers/block/nbd.c.~1~	Thu Apr 15 12:38:38 1999
+++ drivers/block/nbd.c	Fri Apr 23 00:16:40 1999
@@ -401,7 +401,7 @@
 		return 0;
 	case NBD_SET_SIZE_BLOCKS:
 		nbd_sizes[dev] = arg;
-		nbd_bytesizes[dev] = arg << nbd_blksize_bits[dev];
+		nbd_bytesizes[dev] = ((u64) arg) << nbd_blksize_bits[dev];
 		return 0;
 	case NBD_DO_IT:
 		if (!lo->file)
-- 
Kayvan Aghaiepour Sylvan  | Proud husband of      | Father to my kids:
Sylvan Associates, Inc.   | Laura Isabella Sylvan | Katherine Yelena (8/8/89)
http://sylvan.com/~kayvan
 |                       | Robin Gregory (2/28/92)
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/