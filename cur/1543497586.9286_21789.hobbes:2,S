Date: Thu, 3 Jun 1999 17:12:11 +0200 (MET DST)
From: Bjorn Wesen <>
Subject: Re: zero-copy TCP fileserving
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/6/3/76

On Thu, 3 Jun 1999, Artur Skawina wrote:
> > If your CPU needs to read 100 MByte and then write it back to ram, it does
> > take twice the time as just reading it. 
> 
> no, Richard is right - on modern cpus the additional writes don't slow
> you down that much (eg on pii - only ~7% for fullsized eth frames).
[trying not to flame!]
no CPU in the world has memory writes for free! i'll rephrase if its
hard to understand - the _performance_ effect is not "twice the time" but
relative to the cpu/bus speed,  but the _absolute_ time spent is (+/-
depending on bus design).
also, it doesn't matter if it's not noticeable on a modern P2, because
we're not talking about P2's here and just because the 10/100 load on a P2 
is ok now doesn't mean it will be tomorrow. grrrrr whatever happened to
complexity theory in school...
> > Fact: our HW, while sending TCP on a 100 mbit/s ethernet, spends 70% of
> > the time in csum_partial_copy. I'd be surprised if the performance of the
> > transfers wouldn't go up quite alot if that call was eliminated.
> 
> what hw is that?
an embedded network cpu, 100 mips. the cycles spent on copying are much
better spent doing something useful. 
[rant on]
the sort of thinking that goes "it's not noticeable on a $500 CPU right
now so we don't have to care" is what keeps M$ programs slow and intel
rich.
/bjorn
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/