Date: Thu, 11 Nov 2004 16:28:41 -0800
From: Greg KH <>
Subject: Re: [PATCH] Driver Core patches for 2.6.10-rc1
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/11/11/245

On Thu, Nov 11, 2004 at 08:36:07AM +1100, Paul Mackerras wrote:
> Russell King writes:
> 
> > On Wed, Nov 10, 2004 at 01:57:17PM +1100, Paul Mackerras wrote:
> > > So we can get a driver's probe method called concurrently with its
> > > bus's suspend or resume method.
> > 
> > If correct, we probably have rather a lot of buggy drivers, because
> > I certainly was not aware that this could happen.  I suspect the
> > average driver writer also would not be aware of that.
> 
> No doubt.  I'd still like to hear from Greg or Pat about what the
> concurrency rules are supposed to be, or were intended to be.
They are still under flux as to what they should be :)
I'm currently working on reworking all of the locking in the driver
core, to document, and fix the number of issues that suspend, and
manual disconnect, and manual attach are causing.  It should also fix
the issue that I know you want Russell, namely adding a new device from
a probe() callback.
See the other threads about manual disconnect in the driver model on
lkml for some other details.  I'll post more here when I have some
working code.
thanks,
greg k-h
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/