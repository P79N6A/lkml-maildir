Date: Mon, 18 Feb 2008 16:02:36 +0100
From: Tomasz Chmielewski <>
Subject: Re: very poor ext3 write performance on big filesystems?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/2/18/281

Theodore Tso schrieb:
(...)
>> What has helped a bit was to recreate the file system with -O^dir_index
>> dir_index seems to cause more seeks.
> 
> Part of it may have simply been recreating the filesystem, not
> necessarily removing the dir_index feature.
You mean, copy data somewhere else, mkfs a new filesystem, and copy data 
back?
Unfortunately, doing it on a file level is not possible with a 
reasonable amount of time.
I tried to copy that filesystem once (when it was much smaller) with 
"rsync -a -H", but after 3 days, rsync was still building an index and 
didn't copy any file.
Also, as files/hardlinks come and go, it would degrade again.
Are there better choices than ext3 for a filesystem with lots of 
hardlinks? ext4, once it's ready? xfs?
-- 
Tomasz Chmielewski
http://wpkg.org