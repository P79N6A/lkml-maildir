Date: Fri, 10 Dec 1999 08:29:32 -0700
From: Richard Gooch <>
Subject: Re: TCP alwayskeepalive option.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/12/10/106

David Malone writes:
> On Thu, Dec 09, 1999 at 12:32:11PM -0700, Richard Gooch wrote:
> 
> > TCP keepalives are nasty for machines that suspend. Imagine you have a
> > X server running on a machine, and at night you want to suspend the
> > machine. If your X clients (running on another machine, say your group
> > server) aare well-behaved, they will not generate any traffic, since
> > you won't be sending events.
> 
> I think there are plenty of clients that will generate traffic
> regardless of what the X server is up to. (Glances at window
> manager's menues) The following seem like likely candidates:
The X server can (or will) send an obscure event to all clients when
the machine is suspended. Clients should notice this and cease
drawing.
In addition, the XFree86 developer's list is discussing an extension
to the Session Management protocol to distribute suspend notification.
So, correct clients will not generate traffic.
> 	xbiff, xclock, netscape viewing any sort of dynamic page,
> 	xterms which have active programs running in them, xlock,
> 	xearth, xload
So fix the clients. They should be fixed anyway (think about VT
switches). The xclients distributed by XFree86 *will* be fixed, if
they're not already.
> > Now, with keepalives, the OS on the server will send packets to your X
> > server (and expect a response), which of course won't respond. Boom!
> > You've lost your remote X clients.
> 
> The same would happen if any client tries to talk to the X server in
> that time.
But the clients will be told they shouldn't send events.
> > No, I think we want to avoid keepalives. Better to fix Netscape so
> > that it exits when the connection to the X server is lost.
> 
> You don't have to turn it on, it's switchable. I have 60 Xterms
> here, none of which suspend - your situation may be different.
The xterms will suspend. It won't matter if you have programmes in
them spitting output all the time. Xterm will know that there is
nothing to display to, so it won't generate X requests. Hence no
traffic.
				Regards,
					Richard....
Permanent: rgooch@atnf.csiro.au
Current:   rgooch@ras.ucalgary.ca
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/