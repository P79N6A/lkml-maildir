Date: Mon, 13 Mar 2000 01:08:19 +0000 (GMT)
From: Riley Williams <>
Subject: Re: 2.3.51
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/3/12/199

Hi Daniel.
 >> I have to admit to having seen no discussion about this
 >> prior to this email. However, one obvious fix presents
 >> itself to my eyes: Insert "--max-lines=1000" between
 >> "xargs" and "rm" in the relevant command line(s).
 > Hmm... xargs -s <max rm command-line size> is probably more
 > portable, as --max-lines requires GNU xargs, which makes
 > building Linux on another platform a bit harder (i.e. when
 > 1st porting, or for Mastodon :-)
 > Yet another patch (should have looked at the xargs man page
 > before sending the previous patch.  Oh well :-)
Unfortunately, that patch also needs patching - the maximum
command line length is one byte short of 128k if my understanding
is correct, so that version has an off-by-one error. Just replace
the 131072 with 131071 instead.
However, one advantage is that it always guarantees that the
command line won't exceed that length, and thus kills any chance
of this problem recurring...
 > --- Makefile.old	Sun Mar 12 13:12:42 2000
 > +++ Makefile	Sun Mar 12 13:12:33 2000
 > @@ -437,7 +437,7 @@
 > 
 >  clean:	archclean
 >  	rm -f kernel/ksyms.lst include/linux/compile.h
 > -	find . -name '*.[oas]' -type f -print | grep -v lxdialog/ | xargs rm -f
 > +	find . -name '*.[oas]' -type f -print | grep -v lxdialog/ | xargs -s 131072 rm -f
 >  	rm -f core `find . -type f -name 'core' -print`
 >  	rm -f core `find . -type f -name '.*.flags' -print`
 >  	rm -f vmlinux System.map
Best wishes from Riley.
 * Copyright (C) 2000, Memory Alpha Systems.
 * All rights and wrongs reserved.
+----------------------------------------------------------------------+
| There is something frustrating about the quality and speed of Linux  |
| development, ie., the quality is too high and the speed is too high, |
| in other words, I can implement this XXXX feature, but I bet someone |
| else has already done so and is just about to release their patch.   |
+----------------------------------------------------------------------+
 * 
http://www.memalpha.cx/Linux/Kernel/
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/