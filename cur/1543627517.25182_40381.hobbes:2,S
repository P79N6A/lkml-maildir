Date: Mon, 15 Apr 2002 17:40:59 +0200
From: Kurt Garloff <>
Subject: Re: 2.4.19-pre6aa1 (possible all kernel after 2.4.19-pre2) athlon PCI workaround
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/4/15/92

Hi,
On Sat, Apr 13, 2002 at 06:58:40PM +1000, Steve Kieu wrote:
> This is a known problem I know, the screen problem
> with some athlon computer due to some PCI optimization
> code  etc..; but how can I work around this. For
> 2.4.19-pre2 I remember to go somewhere to find pci.c
> and comment out the code related, but in
> 2.4.19-pre6aa1 I got stuck..
> 
> Is there an official way to overcome/fix this problem
> ? (kernel build option?) Or just anyone interested in
> doing such job?
I don't know of an "official way".
There were a number of postings refering to
arch/i386/kernel/pci-pc.c: pci_fixup_via_northbridge_bug()
and claiming that not clearing bit 5 did make the problem go away.
(IOW: Replace v &= 0x1f; /* clear bits 5, 6, 7 */
           by v &= 0x3f; /* clear bits 6, 7 */
 and see whether this helps.)
Regards,
-- 
Kurt Garloff  <garloff@suse.de>                          Eindhoven, NL
GPG key: See mail header, key servers         Linux kernel development
SuSE Linux AG, Nuernberg, DE                            SCSI, Security
[unhandled content-type:application/pgp-signature]