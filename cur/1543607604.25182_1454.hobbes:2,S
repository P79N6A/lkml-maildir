Date: 27 Oct 2001 03:48:56 -0700
From: "Bryan O'Sullivan" <>
Subject: VIA KT133 data corruption update
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/10/27/32

After several months of begrudgingly putting up with my ASUS A7V
motherboard corrupting roughly 1 byte per 100 million read during
moderate to heavy PCI bus activity, I flashed VIA's 1009 BIOS this
evening.
I have not been able to reproduce any corruption since then (it was
ridiculously easy before the new BIOS), and my machine seems otherwise
as stable as I would hope.  This marks the first time since 2.4.6 that
I've been able to run a Linus kernel without cowering.
I also discovered, of necessity, a halfway manageable process for
creating a DOS boot floppy using Windows ME, which Microsoft would
apparently prefer was not possible.  I'll reproduce the steps here,
since otherwise flashing a new BIOS is likely to be nightmarish for
people stuck dual booting into WinME.
Most of these steps occur under Linux, and I'll assume that your Windows
Me "C:" drive is mounted as /dos/c.
- Format a floppy:
  fdformat /dev/fd0H1440
- Create a FAT filesystem:
  mkdosfs /dev/fd0
- Mount the floppy:
  mount /dev/fd0 /mnt
- Copy across a few files:
  cp /dos/c/command.com /mnt
  cp /dos/c/io.sys /mnt
  cp /dos/c/msdos.sys /mnt
- Edit /mnt/msdos.sys, and change values as follows:
  [Paths]
  WinDir=a:\
  WinBootDir=a:\
  HostWinBootDrv=a
  [Options]
  BootMulti=0
  BootGUI=0
  AutoScan=0
- Copy across your BIOS flash utility (probably aflash.exe) and BIOS
  image.  Unmount the floppy (important; don't just reboot):
  umount /mnt/floppy
- When you reboot to the floppy, it will desperately try to boot into
  Windows.  When it prompts you for the path to some Windows VXD, just
  type "a:\command.com", and lo, you've got a DOS prompt.
Cheers,
	<b
[unhandled content-type:application/pgp-signature]