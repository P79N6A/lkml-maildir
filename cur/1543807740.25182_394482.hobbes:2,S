Date: Tue, 7 Feb 2006 14:29:49 +0100
From: Heiko Carstens <>
Subject: Re: [PATCH] compat: add compat functions for *at syscalls
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/2/7/114

> Therefore I think Linus' suggestion with having something like
> 
> 	compat_fn6(sys_waitif, SARG, UARG, UARG, SARG, UARG);
> 
> would be better. Just that we would need something for pointers as well.
> And to make things just a bit more complicated: only the first five
> parameters are in registers. Number six and the following are already on
> the stack. E.g. the compat wrapper for the futex syscall would need extra
> assembly code to do conversion on the stack.
> 
> Maybe having defines like SARG1..SARG6 that would define assembly code
> instead of the register would do the job.
Ah, stupid me... the SARG define defines assembly code of course. Just
that we would need different defines for arguments that are in registers
or on the stack. Is s390 the only architecture that has argument six on
the stack?
Heiko
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/