Date: Tue, 12 Feb 2008 13:55:27 -0500
From: Jeff Dike <>
Subject: [PATCH 1/4] UML - Fix initrd printk
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/2/12/334

From: Johann Felix Soden <johfel@users.sourceforge.net>
If the initrd file has zero-length, the error message should contain
the filepath.
Cc: WANG Cong <xiyou.wangcong@gmail.com>
Signed-off-by: Johann Felix Soden <johfel@users.sourceforge.net>
Signed-off-by: Jeff Dike <jdike@linux.intel.com>
---
 arch/um/kernel/initrd.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)
Index: linux-2.6-git/arch/um/kernel/initrd.c
===================================================================
--- linux-2.6-git.orig/arch/um/kernel/initrd.c	2008-02-12 12:44:44.000000000 -0500
+++ linux-2.6-git/arch/um/kernel/initrd.c	2008-02-12 13:19:11.000000000 -0500
@@ -32,7 +32,7 @@ static int __init read_initrd(void)
 	 * ask for no memory.
 	 */
 	if (size == 0) {
-		printk(KERN_ERR "\"%\" is a zero-size initrd\n");
+		printk(KERN_ERR "\"%s\" is a zero-size initrd\n", initrd);
 		return 0;
 	}
 