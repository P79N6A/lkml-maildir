Date: Fri, 7 Mar 2008 09:48:19 +0100
From: Jens Axboe <>
Subject: Re: Linux 2.6.25-rc4
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/3/7/71

On Thu, Mar 06 2008, Anders Eriksson wrote:
> 
> jens.axboe@oracle.com said:
> >> I was a bit unclear on this, the problem is easily reproducible but _only_
> >> on Anders' system (I couldn't reproduce it with smartd here either).
> 
> > What IO scheduler is Anders using (and does it have an impact, eg does it
> > hang with deadline as well)? 
> 
> CONFIG_IOSCHED_NOOP=y
> CONFIG_IOSCHED_AS=y
> CONFIG_IOSCHED_DEADLINE=y
> CONFIG_IOSCHED_CFQ=y
> CONFIG_DEFAULT_IOSCHED="cfq"
> 
> On request here's a sysrq-t from smartd on -rc3, you also see exactly where 
> smartd gives up (using the gentoo default smasrtd.conf).
Can you try with noop or deadline as the default, to see if it
reproduces with them?
> Might a strace of smartd help?
Nope, looking at the trace it'll be stuck waiting for the ioctl to
finish.
-- 
Jens Axboe