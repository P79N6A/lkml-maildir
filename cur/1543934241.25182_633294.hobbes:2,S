Date: Wed, 2 Jan 2008 04:02:42 +0200
From: Adrian Bunk <>
Subject: Re: [patch] linux/ufs_fs.h: use __u64 for userspace
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/1/280

On Tue, Jan 01, 2008 at 08:51:40PM -0500, Mike Frysinger wrote:
> Fix the ufs_inotofsba macro to use __u64 rather than u64 since this is
> exported to userspace.
> 
> Signed-off-by: Mike Frysinger <vapier@gentoo.org>
> ---
> diff --git a/include/linux/ufs_fs.h b/include/linux/ufs_fs.h
> index 10b854d..35b6e59 100644
> --- a/include/linux/ufs_fs.h
> +++ b/include/linux/ufs_fs.h
> @@ -225,7 +225,7 @@ typedef __u16 __bitwise __fs16;
>   */
>  #define	ufs_inotocg(x)		((x) / uspi->s_ipg)
>  #define	ufs_inotocgoff(x)	((x) % uspi->s_ipg)
> -#define	ufs_inotofsba(x)	(((u64)ufs_cgimin(ufs_inotocg(x))) + ufs_inotocgoff(x) / uspi->s_inopf)
> +#define	ufs_inotofsba(x)	(((__u64)ufs_cgimin(ufs_inotocg(x))) + ufs_inotocgoff(x) / uspi->s_inopf)
>  #define	ufs_inotofsbo(x)	((x) % uspi->s_inopf)
But userspace anyway can't use them since it doesn't know what "uspi" 
is, so you should better reduce the userspace visibility of this header.
cu
Adrian
-- 
       "Is there not promise of rain?" Ling Tan asked suddenly out
        of the darkness. There had been need of rain for many days.
       "Only a promise," Lao Er said.
                                       Pearl S. Buck - Dragon Seed