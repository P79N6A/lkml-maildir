Date: Mon, 3 Jul 2000 11:02:07 -0300 (BRST)
From: Rik van Riel <>
Subject: Re: [PATCH] 2.2.17pre7 VM enhancement Re: I/O performance on 2.4.0-test2
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/7/3/253

On Mon, 26 Jun 2000, Andrea Arcangeli wrote:
> On Sun, 25 Jun 2000, Marcelo Tosatti wrote:
> 
> >With the attached patch, try_to_free_buffers() wakes up kflushd if the
> >percentage of dirty memory is high, independant of sync_page_buffers
> 
> It's wrong to do that there. kflushd is just wakenup by the guy that
> generated the dirty data. So if there are too many dirty buffers kflushd
> was just running or it's a bug in kflushd.
Nope.
kflushd should run if the percentage of dirty buffers gets
too high.
If we are busy freeing all the clean buffers, the dirty
percentage can CHANGE even when the number of dirty buffers
does not.
(and since it signals higher memory load, kflushd should
write out the dirty buffers and get woken up)
regards,
Rik
--
The Internet is not a network of computers. It is a network
of people. That is its real strength.
Wanna talk about the kernel?  irc.openprojects.net / #kernelnewbies
http://www.conectiva.com/
		
http://www.surriel.com/
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/