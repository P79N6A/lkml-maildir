Date: Wed, 9 Aug 2000 15:39:12 +1000
From: (Jaroslaw Miszkinis)
Subject: kernel oops (2.4.0-test6pre9)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/8/9/9

While trying to run bonnie on large files this heppens:
rusty:~$ bonnie -s 2000M
File './Bonnie.473', size: 2097152000, volumes: 1
Writing with putc()...kernel BUG at filemap.c:67!
invalid operand: 0000
CPU:    0
EIP:    0010:[<c01203dc>]
EFLAGS: 00010286
eax: 0000001c   ebx: c105aa40   ecx: c01df62c   edx: 00000001
esi: c55fc2bc   edi: 0000f22f   ebp: c123163c   esp: c55f5f1c
ds: 0018   es: 0018   ss: 0018
Process bonnie (pid: 473, stackpage=c55f5000)
Stack: c01b9645 c01b97c7 00000043 c105aa40 c0120ca0 c105aa40 c123163c c105aa40
       c55f5f98 0f22f000 00000000 c0123283 c105aa40 c55fc2bc 0000f22f c123163c
       c5b71740 ffffffea 00000000 00001000 00001000 00000000 c123163c 00000000
Call Trace: [<c01b9645>] [<c01b97c7>] [<c0120ca0>] [<c0123283>] [<c0129f2b>] [<c010a2df>] [<c010002b>]
Code: 0f 0b 83 c4 0c 5b c3 90 53 8b 5c 24 08 8b 43 18 a8 01 75 16
Segmentation fault
The size of bonnie test file is around 250-600M before it causes
kernel panic.
I've attached ksymoops output.
If any one wants more info mail me directly as I'm not subscribed.
ksymoops 2.3.4 on i686 2.4.0-test6.  Options used
     -V (default)
     -k /proc/ksyms (default)
     -l /proc/modules (default)
     -o /lib/modules/2.4.0-test6/ (default)
     -m /boot/System.map-2.4.0-test6 (default)
Warning: You did not tell me where to find symbol information.  I will
assume that the log matches the kernel and modules that are running
right now and I'll use the default options above for symbol resolution.
If the current kernel and/or modules do not match the log, you can get
more accurate output by telling me the kernel version and where to find
map, modules, ksyms etc.  ksymoops -h explains the options.
invalid operand: 0000
CPU:    0
EIP:    0010:[<c01203dc>]
Using defaults from ksymoops -t elf32-i386 -a i386
EFLAGS: 00010286
eax: 0000001c   ebx: c105aa40   ecx: c01df62c   edx: 00000001
esi: c55fc2bc   edi: 0000f22f   ebp: c123163c   esp: c55f5f1c
ds: 0018   es: 0018   ss: 0018
Process bonnie (pid: 473, stackpage=c55f5000)
Stack: c01b9645 c01b97c7 00000043 c105aa40 c0120ca0 c105aa40 c123163c c105aa40
       c55f5f98 0f22f000 00000000 c0123283 c105aa40 c55fc2bc 0000f22f c123163c
       c5b71740 ffffffea 00000000 00001000 00001000 00000000 c123163c 00000000
Call Trace: [<c01b9645>] [<c01b97c7>] [<c0120ca0>] [<c0123283>] [<c0129f2b>] [<c010a2df>] [<c010002b>]
Code: 0f 0b 83 c4 0c 5b c3 90 53 8b 5c 24 08 8b 43 18 a8 01 75 16
>>EIP; c01203dc <__add_page_to_hash_queue+3c/44>   <=====
Trace; c01b9645 <tvecs+a5d/95b8>
Trace; c01b97c7 <tvecs+bdf/95b8>
Trace; c0120ca0 <add_to_page_cache_unique+c8/138>
Trace; c0123283 <generic_file_write+247/3b4>
Trace; c0129f2b <sys_write+8b/a0>
Trace; c010a2df <system_call+33/38>
Trace; c010002b <startup_32+2b/13a>
Code;  c01203dc <__add_page_to_hash_queue+3c/44>
00000000 <_EIP>:
Code;  c01203dc <__add_page_to_hash_queue+3c/44>   <=====
   0:   0f 0b                     ud2a      <=====
Code;  c01203de <__add_page_to_hash_queue+3e/44>
   2:   83 c4 0c                  add    $0xc,%esp
Code;  c01203e1 <__add_page_to_hash_queue+41/44>
   5:   5b                        pop    %ebx
Code;  c01203e2 <__add_page_to_hash_queue+42/44>
   6:   c3                        ret    
Code;  c01203e3 <__add_page_to_hash_queue+43/44>
   7:   90                        nop    
Code;  c01203e4 <remove_inode_page+0/64>
   8:   53                        push   %ebx
Code;  c01203e5 <remove_inode_page+1/64>
   9:   8b 5c 24 08               mov    0x8(%esp,1),%ebx
Code;  c01203e9 <remove_inode_page+5/64>
   d:   8b 43 18                  mov    0x18(%ebx),%eax
Code;  c01203ec <remove_inode_page+8/64>
  10:   a8 01                     test   $0x1,%al
Code;  c01203ee <remove_inode_page+a/64>
  12:   75 16                     jne    2a <_EIP+0x2a> c0120406 <remove_inode_page+22/64>
1 warning issued.  Results may not be reliable.