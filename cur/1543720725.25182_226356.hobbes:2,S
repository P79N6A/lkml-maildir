Date: Wed, 09 Jun 2004 16:58:36 -0500
From: Fernando Paredes <>
Subject: Re: Toshiba keyboard lockups
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/6/9/212

In case anyone's interested...
Applied these patches. Nothing while tail'ing /var/log/messages. Nothing 
in the root console that I can see either.
Patched the source to 2.6.6. Still get the same lockups, totally random.
Any more ideas?
- Fernando
R. J. Wysocki wrote:
>On Wednesday 12 of May 2004 01:33, Fernando Paredes wrote:
> 
>
>>There was a previous thread on this, last month.
>>
>>I updated to 2.6.6 and I still get these random lockups. Nothing in
>>dmesg or /var/log/messages. Too annoying as I have to reboot the machine
>>constantly. Does anyone know the status on this? Is t a toshiba hardware
>>bug (is that possible?) or a bug in serio.c or keybd.c?
>> 
>>
>
>It's most probably Toshiba-related, because it does not happen on other 
>hardware, it seems.
>
>I've got a simple patch from Grzegorz Kulewski to help trace the problem, but 
>I haven't got a lockup since.  The patch is as follows:
>
>--- /usr/src/linux-2.6.5/drivers/input/serio/serio.c.orig	2004-04-04 
>05:36:15.000000000 +0200
>+++ /usr/src/linux-2.6.5/drivers/input/serio/serio.c	2004-04-09 
>18:28:50.268521936 +0200
>@@ -166,6 +166,11 @@ static int serio_thread(void *nothing)
> static void serio_queue_event(struct serio *serio, int event_type)
> {
> 	struct serio_event *event;
>+	
>+	if (event_type == SERIO_RESCAN || event_type == SERIO_RECONNECT) {
>+		printk(KERN_WARNING "serio: RESCAN || RECONNECT requested: %d!\n", 
>event_type);
>+		dump_stack();
>+	}
> 
> 	if ((event = kmalloc(sizeof(struct serio_event), GFP_ATOMIC))) {
> 		event->type = event_type;
>
>Please try to apply it and you should get something in the logs when a lockup 
>occurs (ie. kernel warning + call trace).
>
>RJW
>
>-
>To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
>the body of a message to majordomo@vger.kernel.org
>More majordomo info at  
http://vger.kernel.org/majordomo-info.html
>Please read the FAQ at  
http://www.tux.org/lkml/
>
> 
>
-- 
<
http://www.sun.com/software>
                      <
http://java.sun.com
>
*Fernando Paredes
Identity & Collaboration
Sun Microsystems de México
Prol. Reforma #600-110, Col. Santa Fe, México D.F. 01210
Tel Dir: 52 + (55) 5258 6152
Fax: 52 + (55) 5258 6199*
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/