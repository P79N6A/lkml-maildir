Date: Fri, 18 Oct 2002 20:41:27 +0200
From: Carl-Daniel Hailfinger <>
Subject: Re: Forced umount
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/10/18/215

On Mon, 17 Sep 2001, Alexander Viro wrote:
 > > > On Sun, Sep 16, 2001, Alex Stewart wrote:
 > > > > Basically, I want a 'kill -KILL' for filesystems.
 >
 > Look at it that way: we have two actions that need to be done upon umount.
 >         1) detach it from the mountpoint(s)
 >         2) shut it down
 >
 > For the latter we need to have no active IO on that fs _and_ nothing
 > that could initiate such IO. We can separate #1 and #2, letting fs
 > shutdown happen when it's no longer busy. That's what MNT_DETACH
 > does.
 >
 > What you are asking for is different - you want fs-wide revoke().
 > That's all nice and dandy, but it's an independent problem and it
 > will take a _lot_ of work. Including work in fs drivers. It _is_
 > worth doing, but it's 2.5 stuff (along with normal revoke(2)).
Has this been done during 2.5 development or is the patch mentioned below
still the only option? And if it is the only option, what prevents it from
being included in 2.5? (I couldn't find anything about it in the archives.)
http://marc.theaimsgroup.com/?l=linux-kernel&m=103443466225915&w=4
To put it another way: Is there any chance to umount / cleanly if / is local
and /smbserver is a mounted remote SMB filesystem where the network link to
the SMB server just went down? (Without waiting half an hour for a timeout.)
Thanks for your answer
Carl-Daniel
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/