Date: Tue, 1 Jan 2008 16:35:58 +0100
From: Ingo Molnar <>
Subject: Re: [PATCH] x86: kprobes change kprobe_handler flow
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/1/127

* Abhishek Sagar <sagar.abhishek@gmail.com> wrote:
> Harvey Harrison wrote:
> > Make the control flow of kprobe_handler more obvious.
> > 
> > Collapse the separate if blocks/gotos with if/else blocks
> > this unifies the duplication of the check for a breakpoint
> > instruction race with another cpu.
> 
> This is a patch derived from kprobe_handler of the ARM kprobes port. 
> This further simplifies the current x86 kprobe_handler. The resulting 
> definition is smaller, more readable, has no goto's and contains only 
> a single call to get_kprobe.
hm, this patch does not apply to x86.git#mm, due to the fixes, 
unifications and cleanups done there. Could you send a patch against -mm 
or against x86.git? (see the tree-fetching instructions below) Thanks,
	Ingo
--------------{ x86.git instructions }---------->
 git-clone git://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux-2.6.git linux-2.6.git
 cd linux-2.6.git
 git-branch x86
 git-checkout x86
 git-pull git://git.kernel.org/pub/scm/linux/kernel/git/x86/linux-2.6-x86.git mm
(do subsequent pulls via "git-pull --force", as we frequently rebase the
git tree. NOTE: this might override your own local changes, so do this
only if you dont mind about losing thse changes in that tree.)