Date: Sun, 21 Mar 1999 21:45:49 -0800
From: Jamie Zawinski <>
Subject: audio/ethernet conflicts cause lockup
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/3/22/15

Hi there,
I've got a strange problem with my Thinkpad that I haven't been able to
figure out, and was directed here.  I hope this is the right place.
Anyway, the situation is this: I can play audio just fine, and I can do
network stuff just fine -- but if audio is playing, and there is
nontrivial network activity, the machine wedges so hard that I have to
power cycle it.  I can reproduce this by playing audio, then going to
another machine and doing "ping -f".  It locks up in under a second.
Details:
kernel 2.0.36, from Red Hat 5.2 (happened with RH 5.1, too)
IBM Thinkpad 770ED, with SelectaDock III docking station
OSS 3.9.2f
The docking station has a Tulip DC21140 ethernet card in it.  The
problem only exists when I'm docked (and the Tulip is being used for
network, rather than PPP.)
The dock also contains a SCSI card, which I haven't had any problems
with.  The setup with this dock is a little odd, though, and I don't
totally understand it, but here's what I know: 
The laptop has a hot-swap slot for CDROM/floppy/whatever, plus two 
PCMCIA slots (that I'm not using.)  
The dock has a second hot-swap slot and another pair of PCMCIA slots
(also unused.)
The hot-swap dock doesn't seem to have anything to do with PCMCIA (and
my sound/ethernet problem exists even when I don't initialize PCMCIA at
all.)
I can use either my floppy or CDROM drives in either the laptop or the
dock (but of course I can't actually swap devices without rebooting 
in between.)
Here are /dev/sndstat, /proc/interrupts, and /proc/ioports.  Is there
anything else that might provide clues here?  I don't know how to tell
whether it's a kernel problem, or a driver problem, or a hardware 
problem, or what...  Any suggestions would be appreciated, since I'm 
at a total loss as to what to try next.
Thanks!
----------------------------------------
/dev/sndstat:
OSS/Linux 3.9.2f (C) 4Front Technologies 1996-1999
Options: 
This copy of OSS is licensed to Jamie Zawinski
Build: 2.0.36
Card config: 
CS4232 at 0x530 irq 5 drq 1,3
OPL-2/OPL-3 FM at 0x388
Audio devices:
0: Crystal audio controller (CS4236) (DUPLEX)
1: Shadow of audio device #0 (DUPLEX)
Synth devices:
0: Yamaha OPL-3
Midi devices:
Timers:
0: System clock
1: Crystal audio controller (CS4236)
Mixers:
0: Crystal audio controller (CS4236)
----------------------------------------
/proc/interrupts:
 0:     145131   timer
 1:         30   keyboard
 2:          0   cascade
 5:          1   Crystal audio controller
 8:          1 + rtc
 9:      49669   eth0, aic7xxx
10:          2   i82365
11:          6 + ide2
12:          4   PS/2 Mouse
13:          1   math error
14:      93646 + ide0
15:          0 + ide1
----------------------------------------
/proc/ioports:
0000-001f : dma1
0020-003f : pic1
0040-005f : timer
0060-006f : keyboard
0070-007f : rtc
0080-009f : dma page reg
00a0-00bf : pic2
00c0-00df : dma2
00f0-00ff : npu
0170-0177 : ide1
01e8-01ef : ide2
01f0-01f7 : ide0
0376-0376 : ide1
0388-038b : OPL3/OPL2
03c0-03df : vga+
03ee-03ee : ide2
03f0-03f5 : floppy
03f6-03f6 : ide0
03f7-03f7 : floppy DIR
03f8-03ff : serial(auto)
0530-0533 : Crystal audio controller
9000-90be : aic7xxx
9100-917f : eth0
fce8-fcef : IDE DMA
fcf0-fcf7 : IDE DMA
fcf8-fcff : IDE DMA
-- 
Jamie Zawinski
jwz@mozilla.org    
http://www.mozilla.org/
   (work)
jwz@jwz.org        
http://www.jwz.org/
       (play)
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/