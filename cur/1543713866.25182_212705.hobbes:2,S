Date: Thu, 8 Apr 2004 11:50:43 +1000
From: David Gibson <>
Subject: Re: RFC: COW for hugepages
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/4/7/276

On Wed, Apr 07, 2004 at 02:34:47PM +0200, Andi Kleen wrote:
> On Wed, 7 Apr 2004 17:42:39 +1000
> David Gibson <david@gibson.dropbear.id.au> wrote:
> 
> > Currently the kernel does not implement copy-on-write for huge pages -
> > in fact any sort of page fault on a hugepage results in a SIGBUS.
> > This means that hugepages *always* have MAP_SHARED semantics, even if
> > MAP_PRIVATE is requested, and in particular that they are always
> > shared across a fork().  Particularly when using hugetlbfs as just a
> > source of quasi-anonymous memory, those are rather strange semantics.
> 
> [...]
> 
> Implementing this for ppc64 only is just wrong. Before you do this 
> I would suggest to factor out the common code in the various hugetlbpage
> implementations and then implement it in common code.
Yes, I know it needs to be implemented for the other archs, but I
wanted to get some feedback on the concept before diving into the
other arch details to figure out how to implement it there.
-- 
David Gibson			| For every complex problem there is a
david AT gibson.dropbear.id.au	| solution which is simple, neat and
				| wrong.
http://www.ozlabs.org/people/dgibson
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/