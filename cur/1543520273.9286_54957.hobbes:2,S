Date: Thu, 23 Dec 1999 05:20:34 +0100
From: Patrick Mau <>
Subject: RLIM_INFINITY in asm-i386/resource.h
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/12/23/28

Hello all,
I have a problem with kernel header files >2.3.30.
There's a '#define RLIM_INFINITY (~0UL)' in asm-i386/resource.h
which prevents autoconf to detect the sys/resource.h header file:
checking for a BSD compatible install... /bin/install -c
checking for ANSI C header files... yes
checking for sys/resource.h... no
-------------------------------
#include <sys/resource.h>
int main()
{ return 0; }
-------------------------------
[patrick@tony ~/src] gcc test.c
In file included from /usr/include/sys/resource.h:25,
                 from test.c:1:
/usr/include/bits/resource.h:109: warning: `RLIM_INFINITY' redefined
/usr/include/asm/resource.h:25: warning: this is the location of the
                                         previous definition
Should I recompile glibc to fix this, or is the following trivial
patch to asm-i386/resource.h correct ?
--- resource.h.orig     Thu Dec 23 05:05:21 1999
+++ resource.h  Thu Dec 23 05:05:54 1999
@@ -18,13 +18,13 @@
 #define RLIM_NLIMITS   10
+#ifdef __KERNEL__
+
 /*
  * SuS says limits have to be unsigned.
  * Which makes a ton more sense anyway.
  */
 #define RLIM_INFINITY  (~0UL)
-
-#ifdef __KERNEL__
 #define INIT_RLIMITS                                   \
 {                                                      \
It just moves '#ifdef __KERNEL__' before the offending line.
cheers,
Patrick
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/