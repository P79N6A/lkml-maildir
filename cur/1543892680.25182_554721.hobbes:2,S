Date: Thu, 07 Jun 2007 19:57:26 -0600
From: Robert Hancock <>
Subject: Re: [PATCH] trim memory not covered by WB MTRRs
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/6/7/524

Justin Piszcz wrote:
>> Note that your boot also mentions this:
>>
>> [  106.449661] mtrr: no more MTRRs available
>>
>> which indicates that things like X may not be able to map the
>> framebuffer with the 'write-combine' attribute, which will hurt
>> performance.  I've heard reports that turning of 'Intel QST fan
>> control' in your BIOS settings will prevent all your MTRRs from being
>> used (improperly, probably another BIOS bug) so that X will perform
>> well.  But if you don't use X on this machine, you don't have to worry
>> about it.  The other option would be to remap your MTRRs by hand to
>> free one up for X, you can do that by combining the last one or two
>> entries into a single MTRR using the API described in
>> Documentation/mtrr.txt before you start X.
>>
>> Jesse
>>
> 
> FYI--
> 
> [  106.449661] mtrr: no more MTRRs available
> 
> This has always occurred, even with mem=8832M setting.
> 
> Justin.
Yes, it's another consequence of the way your BIOS configured the MTRRs 
(wastefully, using more of the precious register entries than it needed 
to, in addition to not covering all of the RAM).
-- 
Robert Hancock      Saskatoon, SK, Canada
To email, remove "nospam" from hancockr@nospamshaw.ca
Home Page: 
http://www.roberthancock.com/
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/