Date: Wed, 4 Apr 2007 06:38:46 -0700
From: William Lee Irwin III <>
Subject: Re: missing madvise functionality
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/4/4/201

On Wed, Apr 04, 2007 at 06:09:18AM -0700, William Lee Irwin III wrote:
> 	for (--i; i >= 0; --i) {
> 		if (pthread_join(th[i], NULL)) {
> 			perror("main: pthread_join failed");
> 			ret = EXIT_FAILURE;
> 		}
> 	}
Obligatory brown paper bag patch:
--- ./jakub.c.orig	2007-04-04 05:57:23.409493248 -0700
+++ ./jakub.c	2007-04-04 06:35:34.296043432 -0700
@@ -232,10 +232,14 @@ int main(int argc, char *argv[])
 		}
 	}
 	for (--i; i >= 0; --i) {
-		if (pthread_join(th[i], NULL)) {
+		void *status;
+
+		if (pthread_join(th[i], &status)) {
 			perror("main: pthread_join failed");
 			ret = EXIT_FAILURE;
 		}
+		if (status != (void *)tr_success)
+			ret = EXIT_FAILURE;
 	}
 	free(th);
 	getrusage(RUSAGE_SELF, &ru);
-- wli
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/