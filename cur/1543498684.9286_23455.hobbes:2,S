Date: Fri, 11 Jun 1999 01:07:56 -0700 (PDT)
From: "B. James Phillippe" <>
Subject: Re: Strange kernel symbols with genksyms
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/6/11/33

On Fri, 11 Jun 1999, Keith Owens wrote:
> Anybody seen this before?  It is a user's 2.2.9 system, compiled with
> CONFIG_MODVERSIONS=y.  Most symbols are suffixed with _Rxxxxxxxx as
> normal but the netlink ones are completely different.
> 
> c0173388 devinet_ioctl_R869c80ea
> c01effb8 ip_statistics_Rd3be94e8
> c017b888 netlink_set_err_R__ver_netlink_set_err
> c017b688 netlink_broadcast_R__ver_netlink_broadcast
> c017b450 netlink_unicast_R__ver_netlink_unicast
> c017bb98 netlink_kernel_create_R__ver_netlink_kernel_create
> c017bd78 netlink_dump_start_R__ver_netlink_dump_start
> c017be84 netlink_ack_R__ver_netlink_ack
> c015894c dev_set_allmulti_Rd84b640e
> c01588f4 dev_set_promiscuity_R6b0a0de7
> 
> I cannot reproduce this with 2.2.9 and genksyms from modutils 2.1.121.
Yes, as a matter of fact I've seen the same thing (not with netlink,
though).  My system was also 2.2.9 and genksyms from modutils 2.1.121.
What caused it for me was the following situation:
My kernel built with CONFIG_MODVERSIONS=y
One of my own modules compiled with EXPORT_SYMTAB and EXPORT_SYMBOL, but
without -DMODVERSIONS and -include .../modversions.h
Another one of my own modules which relied on symbols from the previous
one, compiled same as the previous one.
This resulted in my second module being unloadable due to unresolved
symbols, and the symbols of the first module that were EXPORT_SYMBOL'd
looked just yours.  I had to either enable MODVERSIONS on both modules or
switch to EXPORT_SYMBOL_NOVERS.  I didn't/don't know if it was just a
stupid mistake on my part somewhere.
-bp
--
# bryan at terran dot org
# 
http://www.terran.org/~bryan
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/