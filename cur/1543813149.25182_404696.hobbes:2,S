Date: Wed, 8 Mar 2006 15:54:04 -0800
From: 	thockin@hockin ...
Subject: Re: proper way to assign fixed PCI resources to a "hotplug" device
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/3/8/343

On Thu, Mar 09, 2006 at 01:11:47AM +0300, Ivan Kokshaysky wrote:
> On Wed, Mar 08, 2006 at 01:57:34PM -0800, thockin@hockin.org wrote:
> > > Otherwise we have plenty of MMIO space.
> > 
> > Not true.  Plenty of root bridges have the same base/limit style
> > configuration registers, but they are non-standard.  Even worse - the MMIO
> > hole thatthe chipset carves out, is not guaranteed to be big enough for
> > some new random allocation.
> 
> I'm intrigued. Care to give us an example of such system (where the
> root bridge window is too small), please? lspci -vxxx?
I have systems where the BIOS sets up the IO hole to be the size of the
BARs it finds at PCI enum time.  If I have a device that has a hidden BAR,
the hole won't cover it.  Period.
> > Cleaning up and re-doing are not the same thing.  The plethora of x86
> > chipsets makes this unpleasant at best and more likely unworkable.
> 
> Yes, re-doing is a LOT simpler. ;-)
> If needed, we could introduce 'pci=totallyingnorefsckingbiossettings'
> boot option - it would be 10 or less lines of code.
Except for that whole chipset code thing.  Have you dealt with the
fugliness that is the chipset?  You're really glossing over it.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/