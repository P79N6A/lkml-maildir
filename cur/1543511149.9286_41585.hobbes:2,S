Date: Thu, 30 Sep 1999 08:38:50 +0100 (GMT)
From: David Woodhouse <>
Subject: Re: knfsd 1.5 is released
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/9/30/6

hjl@valinux.com said:
> For the time being, I am going to add a timeout to mountd callback. If
> kernel doesn't get response from mountd within a few seconds, it will
> tell the client that fh is stale.     
That implies a far more fundamental change. I designed the callback system
so that the kernel could just drop the requests when it made the callback.
That way, there's no possibility of making a DoS by filling up the RPC
buffers with requests that you know the kernel will have to callback for.
My approach has the undesirable effect that some requests just get
dropped, and eventually answered on the next attempt. I was intending to
fix this in the end by passing the whole request up to mountd, and letting
mountd either respond -ESTALE or somehow stick it back into the kernel's
incoming request queue, as appropriate.
Sorry if this has been discussed already, but I'm off-site at an
exhibition ATM, and haven't got time to read anything but my inbox.
----                                ----                                 ----
David Woodhouse       David.Woodhouse@mvhi.com      Office: (+44) 1223 810302
 Project Leader,    Process Information Systems     Mobile: (+44) 7976 658355
    Axiom (Cambridge) Ltd., Swaffham Bulbeck, Cambridge, CB5 0NA, UK.
             finger dwmw2@ferret.lmh.ox.ac.uk for PGP key.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/