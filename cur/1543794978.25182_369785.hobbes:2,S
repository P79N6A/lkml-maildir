Date: Tue, 22 Nov 2005 23:36:48 -0500
From: Gene Heskett <>
Subject: Re: Linux 2.6.15-rc2
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/11/22/414

On Tuesday 22 November 2005 20:56, Michael Krufky wrote:
>Gene Heskett wrote:
>>WARNING:/lib/modules/2.6.15-rc2/kernel/drivers/media/video/cx88/cx88-d
>>vb .ko needs unknown symbol nxt200x_attach.
>
>Gene has sent me a copy of his .config ... here are the relevant lines:
>
>[snip]
>
>CONFIG_VIDEO_CX88=m
>CONFIG_VIDEO_CX88_DVB=m
># CONFIG_VIDEO_CX88_DVB_ALL_FRONTENDS is not set
># CONFIG_VIDEO_CX88_DVB_MT352 is not set
>CONFIG_VIDEO_CX88_DVB_OR51132=m
># CONFIG_VIDEO_CX88_DVB_CX22702 is not set
># CONFIG_VIDEO_CX88_DVB_LGDT330X is not set
># CONFIG_VIDEO_CX88_DVB_NXT200X is not set
>
>[snip]
>
>CONFIG_DVB_NXT2002=m
># CONFIG_DVB_NXT200X is not set
># CONFIG_DVB_OR51211 is not set
>CONFIG_DVB_OR51132=m
># CONFIG_DVB_BCM3510 is not set
>CONFIG_DVB_LGDT330X=m
>
>[snip]
>
>A configuration like this should have compiled cx88-dvb without any
>references to nxt200x at all.
>
>Gene, do you have v4l-kernel cvs installed on top of kernel 2.6.15-rc2?
No, not since back at about 2.6.4 or so when I needed the ieee1394
stuff.  This is a 2.6.14, with the 2.6.15-rc2 patch applied straight
out of the box.
>Unless I'm missing something, it seems that this is the only way that
>you could have nxt200x support in cx88-dvb without having built the
>nxt200x module itself.  The v4l-kernel cvs build environment has
> nxt200x enabled by default when building against kernels 2.6.15 and
> later.
>
Well, I just went thru it again, and turned off everything but the
cx8800 and ORv51132 stuffs, and now I get this at the and of the
'makeit' script I use here:
WARNING:
/lib/modules/2.6.15-rc2/kernel/drivers/media/video/cx88/cx88-dvb.ko
needs unknown symbol mt352_attach
WARNING:
/lib/modules/2.6.15-rc2/kernel/drivers/media/video/cx88/cx88-dvb.ko
needs unknown symbol nxt200x_attach
WARNING:
/lib/modules/2.6.15-rc2/kernel/drivers/media/video/cx88/cx88-dvb.ko
needs unknown symbol mt352_write
WARNING:
/lib/modules/2.6.15-rc2/kernel/drivers/media/video/cx88/cx88-dvb.ko
needs unknown symbol lgdt330x_attach
WARNING:
/lib/modules/2.6.15-rc2/kernel/drivers/media/video/cx88/cx88-dvb.ko
needs unknown symbol cx22702_attach
So that definitely was a non-no.  That .config is also attached.
>If this is true, then you can either disable nxt200x in
>v4l-kernel/v4l/Makefile, or re-build the cvs modules using the dvb +
> v4l merged-tree build environment.
>
http://linuxtv.org/v4lwiki/index.php/How_to_build_from_CVS
>
>This would, in effect, give the same result as if you had selected
>CONFIG_VIDEO_CX88_DVB_ALL_FRONTENDS (selected by default in Kconfig)
>
>...or maybe you initially started a kernel build with the nxt200x
> module selected, then stopped the compile, unselected nxt200x, and
> continued the build process without cleaning in between, and after
> cx88-dvb had already been built?  Hmm... I guess that might be a bit
> far-fetched... but to be sure, you can wipe out your kernel tree and
> rebuild it again from scratch using the same .config .
The first thing my makeit script does is a make clean.  So it should be
self-cleaning in that scenario.
My buildit26 script also starts everything from scratch, moving old
base version trees out of the way until the new one can be renamed
properly.  But theres nothing in it precious, so I can nuke 2.6.15-rc2
and retry again.  This time makeing no adjustments to the make xconfig
it finishes up with.  So that build from scratch is underway.
And I note that when its going thru the make oldconfig, that nxt2002 is
set as a module, however it is not now loaded into 2.6.14.2, and tvtime
works ok without it, so somehow its getting turned on.  Humm, grepping
the .config in the 2.6.14.2 tree shows that it is set as a module.  So
thats where that came from.  Not sure why I turned it on in the first
place, scratching aching head. (I've got a cold, good thing you can't
catch this virus by email :)
And, I just noticed this go by during the compile of the modules:
  Building modules, stage 2.
  MODPOST
*** Warning: "nxt200x_attach" [drivers/media/video/cx88/cx88-dvb.ko]
undefined!
It was probably there all the time and I just missed it as its many
pages back up in the history.  The depmod at the end of the compile
also reports this again:
WARNING:
/lib/modules/2.6.15-rc2/kernel/drivers/media/video/cx88/cx88-dvb.ko
needs unknown symbol nxt200x_attach
>If my assumption above is incorrect, then this will need to be looked
>into a bit deeper.  Please, let me know.
Looks like the magnifying glass needs to come out.
>Regards,
>
>Michael Krufky
Thanks Michael.
-- 
Cheers, Gene
"There are four boxes to be used in defense of liberty:
 soap, ballot, jury, and ammo. Please use in that order."
-Ed Howdershelt (Author)
99.36% setiathome rank, not too shabby for a WV hillbilly
Yahoo.com and AOL/TW attorneys please note, additions to the above
message by Gene Heskett are:
Copyright 2005 by Maurice Eugene Heskett, all rights reserved.
[unhandled content-type:application/x-gzip]