Date: Fri, 20 Aug 2004 15:47:39 +0200
From: Jochen Bern <>
Subject: Timer-ing ATKBD Communication?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/8/20/142

Could someone please give me a hint (function name, pointer to example 
code or docs) how to accomplish the following?
I'm trying to implement additional communication between kernel and a 
PS/2 connected AT keyboard. What I have right now (in 2.6.4-52 so far) is:
-- one additional branch in
    drivers/input/keyboard/atkbd.c::atkbd_interrupt() that recognizes
    the keyboard's (different) responses, processes them, and keeps
    them away from the normal atkbd_interrupt() processing
-- another additional branch that, if a special key was pressed, uses
    atkbd_sendbyte() to initiate the communication. (Note that this
    being hooked into atkbd_interrupt() provides me with direct access
    to struct atkbd *atkbd to fill the first param of atkbd_sendbyte().)
The actual communication seems to work (awaiting kernel upgrade and 
stress testing), but I need part of the communication initiated at 
regular intervals (about every second or so) instead of keying off other 
keyboard activity ...
TIA,
								J. Bern
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/