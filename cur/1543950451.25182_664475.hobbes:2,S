Date: Thu, 6 Mar 2008 16:32:51 +0200
From: "Ahmed S. Darwish" <>
Subject: Re: [PATCH -v8 -rc3] Security: Introduce security= boot parameter
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/3/6/204

Hi James,
On Thu, Mar 6, 2008, James Morris <jmorris@namei.org> wrote:
> On Thu, 6 Mar 2008, Ahmed S. Darwish wrote:
>
>  >     Handle Andrew's concerns:
>  >     - Use __init and __initdata in appropriate places.
>  >     - Do not rely upon dummy_ops layout, use C99 initializations.
>  >     - Use DEFINE_SPINLOCK instead of dynamic initialization.
>
>  The spinlock is not needed now, if security_module_enable() can only be
>  called during boot via an initcall.
>
Will do.
Would you mind answering my confusions below so I can do the change
with good understanding ?
I see preempt_disable() before calling security and vfs_caches init,
but what will prevent two processors/cores from executing
security_module_enable() concurrently (thus possibly corrupting
chosen_lsm) ?
security_module_enable() is also now used in __init init_smk_fs().
Or the init path got executed serially ?
Thank you,
-- 
Ahmed S. Darwish
Homepage: 
http://darwish.07.googlepages.com
Blog: 
http://darwish-07.blogspot.com