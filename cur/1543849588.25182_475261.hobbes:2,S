Date: Fri, 20 Oct 2006 18:25:27 -0700
From: Andrew Morton <>
Subject: Re: various laptop nagles - any suggestions?   (note: 2.6.19-rc2-mm1 but applies to multiple kernels)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/10/20/373

On Fri, 20 Oct 2006 22:56:51 +0200
Ingo Molnar <mingo@elte.hu> wrote:
> 
> * Andrew Morton <akpm@osdl.org> wrote:
> 
> > Oh.  I thought the problem was that the timer stops when the CPU is 
> > idle. Maybe I misremembered.  I'll try `idle=poll'.
> 
> hm, wouldnt in that case the box not boot at all? But yeah, idle=poll 
> would be nice.
idle=poll fixes it.  The fan gets a bit noisy though ;)
Perhaps a suitable test would be to set up a PIT interrupt, do a hlt, see
if the APIC timer counter has increased appropriately.
I got this:
[   43.709238] TSC appears to be running slowly. Marking it as unstable
How come?  It also happens with HIGH_RES_TIMERS=n and NO_HZ=n.  It only
seems to happen when idle=poll is given.
> could you also boot with apic=verbose and send us the full bootlog?
> 
http://userweb.kernel.org/~akpm/apic.txt
I gave up on waiting for it to complete initscripts.
processor       : 0
vendor_id       : GenuineIntel
cpu family      : 6
model           : 13
model name      : Intel(R) Pentium(R) M processor 2.00GHz
stepping        : 8
cpu MHz         : 800.000
cache size      : 2048 KB
fdiv_bug        : no
hlt_bug         : no
f00f_bug        : no
coma_bug        : no
fpu             : yes
fpu_exception   : yes
cpuid level     : 2
wp              : yes
flags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat clflush dts acpi mmx fxsr sse sse2 ss tm pbe nx est tm2
bogomips        : 3994.15
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/