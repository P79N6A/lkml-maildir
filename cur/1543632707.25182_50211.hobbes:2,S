Date: Tue, 4 Jun 2002 15:59:07 +0200
From: Arnd Bergmann <>
Subject: Re: [kbuild-devel] Re: Announce: Kernel Build for 2.5, release 3.0 is available
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/6/4/136

On Tuesday 04 June 2002 06:53, Keith Owens wrote:
> kbuild-2.5-common-2.5.20-2.
I still have a link order problem in -common-2.5.20-[12] that I noticed
after I eventually tried to run my kbuild-2.5 kernel. 
The initialization code in arch/i386/pci needs the pci_bus_type object
from drivers/pci/pci-driver.c to be registered. Both is called at 
subsys_initcall level, but in kbuild-2.5 the arch specific parts are
run first. The symtom is a 'BUG in device.h:75' from get_bus() early in
bootup.
The brute force workaround for this problem is to put 
link_subdir(drivers/pci) before link_subdir(arch/$ARCH) in the top level 
Makefile.in.
I could not find out from the kbuild-2.4 files how or why it works there, but 
I don't think relying on the link order here is a good idea anyway, so it 
would best be fixed in the pci code itself.
Arnd <><
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/