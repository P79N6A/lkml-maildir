Date: Mon, 05 May 2008 12:19:09 +1000
From: John Williams <>
Subject: Re: [PATCH 24/56] microblaze_v2: time support
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/5/4/322

> +static inline void udelay(unsigned long usec)
> +{
> +	unsigned long long tmp = usec;
> +	unsigned long loops = (tmp * 4295 * HZ * loops_per_jiffy) >> 32;
> +	__delay(loops);
> +}
Let's hope like hell the CPU has HW multipler and shifter for this
one! :)
> +++ b/include/asm-microblaze/timex.h
> @@ -0,0 +1,20 @@
> +
> +#define CLOCK_TICK_RATE 1000 /* Timer input freq. */
What's this?  Is it used anywhere?