Date: Mon, 8 Sep 2003 08:50:48 -0700
From: Greg KH <>
Subject: Re: [PATCH][2.6][CFT] rmmod floppy kills box fixes + default_device_remove
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/9/8/143

On Sun, Sep 07, 2003 at 10:53:08PM -0400, Zwane Mwaikambo wrote:
> Randy gave me the courage to delve in there... now that i'm lost to the 
> world here is one picked up from bugzilla;
> 
> The crux of it is that the floppy driver isn't deleting timers before 
> unloading itself. I've tested it locally somewhat, but the ioport 
> busy looks very strange (although things do function). There is one part 
> of this patch that i'd like Greg to look at, it's the 
> default_device_release addition...
Ick, no, I do not want to see this function get added, sorry.
What happens if someone grabs the struct device reference by opening a
sysfs file and then you unload the module?  Yeah, not nice.  Please do
_not_ create "empty" release() functions, unless you _really_ know what
you are doing (and providing a "default" one like this is just ripe for
abuse, that warning message in the kernel is there for a reason.)
thanks,
greg k-h
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/