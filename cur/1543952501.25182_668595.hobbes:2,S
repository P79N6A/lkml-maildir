Date: Mon, 17 Mar 2008 17:45:28 -0800
From: David Brownell <>
Subject: Re: ehci-hcd affects hda speed
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/3/17/378

On Monday 17 March 2008, Rene Herman wrote:
> On 18-03-08 01:24, Lev A. Melnikovsky wrote:
> 
> > DB> On Monday 17 March 2008, Rene Herman wrote:
> > DB> > +       case PCI_VENDOR_ID_VIA:
> > DB> > +               if (pdev->device == 0x3104 && pdev->revision >= 0x60) {
> >
> > DB> Unless you have specific docs from VIA saying that this register
> > DB> isn't revision-specific (at least in the sense that all revisions
> > DB> after 0x60 define that bit in that way), this should probably be a
> > DB> switch on pdev->revision and just include the known-safe revisions.
>
> > May I suggest this should be a module parameter? Because a side effect is 
> > a USB slow-down, which may be more important for somebody...
> 
> If the 10us is a EHCI specification, I'd personally think not. But if need 
> be...
It's not exactly a specification, but it's what they use as an
example of a "reasonable" value.  I think pretty much everyone
except VIA uses it as-is.  Since 1 usec is such a broken value,
I see no reason to support anything except 10 usec.
- Dave