Date: Tue, 6 Apr 2004 11:51:49 +0200
From: Angelo Dell'Aera <>
Subject: Re: Oops with cpufreq on 2.6.5-mm1
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/4/6/44

On Tue, 6 Apr 2004 02:05:00 +0200
Jan Killius <jkillius@arcor.de> wrote:
>Hi,
>cpufreq make an Oops on loading. I have attached the oops.
The problem seems to be located in find_psb_table(). In fact, 
while powernow_table is correctly initialized, it's never assigned
to data->powernow_table thus leading to a NULL pointer dereferencing
in cpufreq_frequency_table_cpuinfo(). Try this patch please.
Regards.
--
Angelo Dell'Aera 'buffer' 
Antifork Research, Inc.	  	
http://buffer.antifork.org
--- linux-2.6.5-mm1/arch/i386/kernel/cpu/cpufreq/powernow-k8.c.old	2004-04-06 11:46:41.000000000 +0200
+++ linux-2.6.5-mm1/arch/i386/kernel/cpu/cpufreq/powernow-k8.c	2004-04-06 11:48:29.000000000 +0200
@@ -634,6 +634,8 @@
 			return -EIO;
 		}
 
+		data->powernow_table = powernow_table;
+
 		printk(KERN_INFO PFX "currfid 0x%x (%d MHz), currvid 0x%x\n",
 		       data->currfid, find_freq_from_fid(data->currfid), data->currvid);
 
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/