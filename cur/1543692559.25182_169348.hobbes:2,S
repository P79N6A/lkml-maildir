Date: Tue, 30 Sep 2003 11:04:49 +0200
From: Thomas Schlichter <>
Subject: Re: irq 12: nobody cared! (2.6.0-test6)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/9/30/66

On Tuesday 30 September 2003 09:35, Arkadiusz Miskiewicz wrote:
> On Monday 29 of September 2003 12:16, Felipe Alfaro Solana wrote:
> > Have you tried with 2.6.0-test6-mm1? It includes a fix for ACPI PCI
> > routing which may help in your case.
>
> I've tried 2.6.0test6+cset patch 20030929_1907+ all *acpi* patches from
> test6-mm1 and:
  ~~ snip ~~
> drivers/usb/host/uhci-hcd.c: USB Universal Host Controller Interface driver
> v2.1
> uhci-hcd 0000:00:11.2: UHCI Host Controller
> irq 10: nobody cared!
> Call Trace:
>  [<c010cc1b>] __report_bad_irq+0x2b/0x90
>  [<c010cd14>] note_interrupt+0x64/0xa0
>  [<c010cfae>] do_IRQ+0x12e/0x140
>  [<c010b4dc>] common_interrupt+0x18/0x20
>  [<c0125484>] do_softirq+0x44/0xa0
>  [<c010cf88>] do_IRQ+0x108/0x140
>  [<c010b4dc>] common_interrupt+0x18/0x20
>  [<c01b364c>] pci_bus_write_config_word+0x5c/0x80
>  [<cf9b0480>] uhci_reset+0x40/0x50 [uhci_hcd]
>  [<cf89ba32>] usb_hcd_pci_probe+0x192/0x480 [usbcore]
>  [<c01b72fb>] pci_device_probe_static+0x4b/0x60
>  [<c01b734c>] __pci_device_probe+0x3c/0x50
>  [<c01b738c>] pci_device_probe+0x2c/0x50
>  [<c01fb4ed>] bus_match+0x3d/0x70
>  [<c01fb640>] driver_attach+0x70/0xb0
>  [<c01fb941>] bus_add_driver+0xa1/0xc0
>  [<c01fbd91>] driver_register+0x31/0x40
>  [<c01b756e>] pci_register_driver+0x5e/0x90
>  [<cf9240c7>] uhci_hcd_init+0xc7/0x143 [uhci_hcd]
>  [<c01381c3>] sys_init_module+0x123/0x270
>  [<c010b36f>] syscall_call+0x7/0xb
Seems like the attached patch from Wim Van Sebroeck could help you...
   Thomas Schlichter
--- linux-2.6.0-test6/drivers/usb/host/uhci-hcd.c	2003-09-28 02:50:56.000000000 +0200
+++ linux-2.6.0-test6/drivers/usb/host/uhci-hcd.c	2003-09-28 23:21:30.000000000 +0200
@@ -2185,8 +2185,8 @@
 	/* Maybe kick BIOS off this hardware.  Then reset, so we won't get
 	 * interrupts from any previous setup.
 	 */
-	pci_write_config_word(hcd->pdev, USBLEGSUP, USBLEGSUP_DEFAULT);
 	reset_hc(uhci);
+	pci_write_config_word(hcd->pdev, USBLEGSUP, USBLEGSUP_DEFAULT);
 	return 0;
 }
 [unhandled content-type:application/pgp-signature]