Date: Thu, 01 Jul 2004 08:47:14 -0400
From: Brian Gerst <>
Subject: [PATCH] Sort modules for modpost and modinst
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/7/1/59

Process modules in sorted order during modpost and modules install.
--
				Brian Gerst
diff -urN linux/scripts/Makefile.modinst linux2/scripts/Makefile.modinst
--- linux/scripts/Makefile.modinst	2004-06-29 13:45:26.232647680 -0400
+++ linux2/scripts/Makefile.modinst	2004-06-29 11:36:33.191248664 -0400
@@ -9,7 +9,7 @@
 
 #
 
-__modules := $(shell head -q -n1 /dev/null $(wildcard $(MODVERDIR)/*.mod))
+__modules := $(sort $(shell head -q -n1 /dev/null $(wildcard $(MODVERDIR)/*.mod)))
 modules := $(patsubst %.o,%.ko,$(wildcard $(__modules:.ko=.o)))
 
 .PHONY: $(modules)
diff -urN linux/scripts/Makefile.modpost linux2/scripts/Makefile.modpost
--- linux/scripts/Makefile.modpost	2004-06-29 13:45:32.643673056 -0400
+++ linux2/scripts/Makefile.modpost	2004-06-29 10:49:20.145937016 -0400
@@ -41,7 +41,7 @@
 symverfile := $(objtree)/Module.symvers
 
 # Step 1), find all modules listed in $(MODVERDIR)/
-__modules := $(shell head -q -n1 /dev/null $(wildcard $(MODVERDIR)/*.mod))
+__modules := $(sort $(shell head -q -n1 /dev/null $(wildcard $(MODVERDIR)/*.mod)))
 modules   := $(patsubst %.o,%.ko, $(wildcard $(__modules:.ko=.o)))
 
 _modpost: $(modules)