Date: Thu, 4 Sep 2003 23:04:30 +0200
From: Bartlomiej Zolnierkiewicz <>
Subject: Re: [PATCH] ide_cs w/TCQ
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/9/4/322

On Thursday 04 of September 2003 23:27, MAtias Alejo Garcia wrote:
> Hi Bart,
Hi,
> I reported I problem (Unable to handle kernel NULL pointer...) when
> inserting a CF card in a PCMCIA adapter in 2.6.0test1. The problem
> continues in test4 (log below, when inserting a card).
>
> The problem only is present when  BLK_DEV_TCQ_DEFAULT is enabled. It
> seems that ide_cs (or ide, don't know) does not correctly initialize
> hwif->ide_dma_queued_on() ...I don't know how this should be fixed if
> the driver doesn't use DMA:
Yes, thanks!
> 1) Not calling ide_dma_queued_on
> or
> 2) Initializind ide_dma_queued_on to a dummy function
>
> I tried 1) and it works...
3) initialize ide_dma_queued_on to __ide_dma_queued_on()
because drive->using_dma is checked inside __ide_dma_queud_on,
but that looks stupid to assign it in DMA-unaware driver :-).
> Here is the patch...be gentle is my first contribution :-)
>
> Thanks!
> matias
--bartlomiej
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/