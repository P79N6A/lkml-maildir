Date: Thu, 24 May 2007 08:28:54 -0700 (PDT)
From: Linus Torvalds <>
Subject: Re: Long delay in resume from RAM (Was Re: [patch 00/69] -stablereview)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/5/24/187

On Thu, 24 May 2007, Romano Giannetti wrote:
> 
> More data. I compiled 2.6.21.2 + the patch "Fix ACPI suspend / device
> suspend ordering problem  (52ade9b3b97fd3bea42842a056fe0786c28d0555)
> 
> and I discovered that if I do not put the 3Com 3CXEM556B card into the
> pcmcia slot, the suspend/resume (and the snapshot/restore) works ok,
> without delay at all.
Ok. That was probably true even before you added the suspend ordering 
patch.
> It continues to work even with a cardbus wifi in the slot, so my 
> conclusions are that the probable culprit is restricted to:
> 
>       *  a race when loading the .cis file from userspace
>       * the serial_cs or 3c589_cs driver (only when the device is in;
>         they are loaded still now and all is working ok)
> 
> ...what now?
Can you compile those two modules with PCMCIA_DEBUG=4?
Something like
	make EXTRA_CFLAGS=-DPCMCIA_DEBUG=4
should do it. You might also enable CONFIG_PCMCIA_DEBUG while you're at 
it. And then the extra debugging output hopefully will narrow down where 
things go south.
		Linus
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/