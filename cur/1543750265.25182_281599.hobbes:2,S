Date: Tue, 28 Dec 2004 12:39:47 +0100
From: bert hubert <>
Subject: Re: unkillable processes using samba, xfs and lvm2 snapshots (k 2.6.10)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/12/28/56

On Tue, Dec 28, 2004 at 12:24:01PM +0100, Gildas LE NADAN wrote:
> I experience hangs on samba processes on a filer using xfs over lvm2 as 
> data partitions, when there is active snapshots of the xfs partitions.
A trick is to enable alt-sysrq and press alt-sysrq-t (I think) which spams
your syslog with backtraces of all processes currently running, including
the ones stuck in 'D' state (ps aux | grep " D ").
If you isolate these backtraces and send them to this list, they will enable
developers to help you. Make sure you add 'includes backtrace' in your
Subject.
> Testings showed that the result was the same, whether the snapshots were 
> mounted or not : smbd processes are locked and unkillable while the 
> machine is normaly working otherwise, except software reboot is 
> impossible and hardware reset is needed.
For maximum usefulness, make your setup as simple as possible and reproduce.
Good luck - I personally can't help you in any real way, except to help you
get the debugging information that is needed.
-- 
http://www.PowerDNS.com
      Open source, database driven DNS Software 
http://lartc.org
           Linux Advanced Routing & Traffic Control HOWTO
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/