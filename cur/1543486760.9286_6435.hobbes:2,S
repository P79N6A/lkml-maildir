Date: Sun, 21 Feb 1999 20:51:50 -0500 (EST)
From: "Richard B. Johnson" <>
Subject: Re: NFS fails after 40 minutes of use
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/2/21/79

On Sun, 21 Feb 1999, Simon Kirby wrote:
> Try mounting each remote filesystem separately...Eg:
> 
> [sroot@alfie:/dock]# cat unix_mount
> #!/bin/tcsh -f
> 
> mount -t nfs -o ro ${*}:/ /dock/$*/live || exit -1
> echo "   ${*}:/ mounted on /dock/$*/live/"
> foreach a (`cat /dock/$*/live/etc/mtab | \
>            egrep '^[^ ]+ /[^ ]+ ext2 ' | cut -f2 -d' '`)
>    mount -t nfs -o ro,rsize=8192,wsize=8192,hard,intr,timeo=6,retrans=9 \
>       ${*}:$a /dock/$*/live$a/ || exit -1
>    echo "   ${*}:$a mounted on /dock/$*/live$a/"
> end
> 
> :
> 
> I was told this is necessary in order to avoid inode hash clashes.  I was
> having a problem where as soon as it stat()ed or touch a certain remote
> file, the mount point would instantly turn into that file.  Apparently
> mounting each remote filesystem separately after mounting the root avoids
> this problem (somehow).
> 
[SNIPPED...]
Thanks. I really don't need a work-around since I would not normally
back up file-systems that way. I sure hope that nobody thinks that
this observed behavior is correct. We need to understand that this
is a bug.
FYI I normally do `tar -clf` (stay in the same file-system) locally
to a local tape-drive. The information presented was to show the
bug in a repeatable manner.
Cheers,
Dick Johnson
                 ***** FILE SYSTEM WAS MODIFIED *****
Penguin : Linux version 2.2.1 on an i686 machine (400.59 BogoMips).
Warning : It's hard to remain at the trailing edge of technology.
Wisdom  : It's not a Y2K problem. It's a Y2Day problem.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/