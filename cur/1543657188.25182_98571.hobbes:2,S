Date: Sat, 28 Dec 2002 10:07:04 +0100
From: Jochen Hein <>
Subject: [2.5.53, PATCH] fix uninitialized timer in yenta.c
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/12/28/17

The following patch fixes a "uninitialized timer" message when loading
yenta_socket.ko.
--- linux-2.5.53/drivers/pcmcia/yenta.c.jh	2002-12-10 03:46:11.000000000 +0100
+++ linux-2.5.53/drivers/pcmcia/yenta.c	2002-12-28 09:45:56.000000000 +0100
@@ -593,6 +593,7 @@
 	if (!socket->cb_irq || request_irq(socket->cb_irq, yenta_interrupt, SA_SHIRQ, socket->dev->dev.name, socket)) {
 		/* No IRQ or request_irq failed. Poll */
 		socket->cb_irq = 0; /* But zero is a valid IRQ number. */
+		init_timer(&socket->poll_timer);
 		socket->poll_timer.function = yenta_interrupt_wrapper;
 		socket->poll_timer.data = (unsigned long)socket;
 		socket->poll_timer.expires = jiffies + HZ;
-- 
Wenn Du nicht wei√üt was Du tust, tu's mit Eleganz.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/