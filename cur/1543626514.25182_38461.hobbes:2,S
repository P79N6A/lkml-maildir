Date: Thu, 4 Apr 2002 16:56:22 -0300 (BRT)
From: Marcelo Tosatti <>
Subject: Re: [PATCH] POLL_OUT in ttys, misc bug fix
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/4/4/22

Sapan, 
Have you actually tested the SIGIO POLL_OUT changes with an userspace app?
Thanks
On Wed, 27 Mar 2002, Sapan J . Bhatia wrote:
> Hello,
> 
> While fixing a flow control bug that truncated output to a terminal in
> User Mode Linux, I noticed that the tty drivers only send POLL_IN on new
> data being available but not POLL_OUT when the device is ready for new
> data.
> 
> This patch fixes the bug in the line discipline and the pty driver.
> 
> Also, there's another minor bug in n_tty.c where write_chan returns
> on a (retvalue < 0) unconditionally. This is a problem, since the type of
> IO (BLOCKING / NON_BLOCKING) is stored in the tty, and if the console driver
> returns a -EAGAIN (eg. in UML on getting an EAGAIN from the host kernel), 
> write_chan returns even in the case of a blocking write, which is wrong
> since the process doesn't expect it.
> 
> Regards,
> Sapan
> 
> 
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/