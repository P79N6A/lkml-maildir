Date: Tue, 28 Feb 2006 21:31:47 -0700
From: (Eric W. Biederman)
Subject: Re: + proc-dont-lock-task_structs-indefinitely-cpuset-fix-2.patch added to -mm tree
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/2/28/377

Paul Jackson <pj@sgi.com> writes:
>> -rc5-mm1 appears to be a trainwreck.  It's a bit of a mystery - I've tried
>> several further configs and it all works swimmingly.
>
> Getting closer.
>
> Without the patches:
>
>     proc-dont-lock-task_structs-indefinitely.patch
>     proc-dont-lock-task_structs-indefinitely-git-nfs-fix.patch
>     proc-dont-lock-task_structs-indefinitely-cpuset-fix.patch
That definitely makes sense if there is a reference counting bug
somewhere.
What is also possible but scary is that I don't have a reference
counting bug and something else is wrong with process management,
and by holding a much lighter grasp on the tasks in /proc
I have managed to make the bug much easier to trigger.
Hmm.  I think I can see at least one reference counting bug..
Unfortunately it is in the wrong direction.
> With these patches, it still boots, and looks fine ... until
> I fire up my SGI specific application, and then it dies.
> Once it died with some complaint (lost now) from a swap
> daemon.  This latest time, it died with just:
>
>   Kernel panic - not syncing: Attempted to kill init!
Ouch.
> So I think the above 3 patches make it easy for user space
> to kill the kernel.
The intent was the opposite...  But until the bugs get out...
Eric
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/