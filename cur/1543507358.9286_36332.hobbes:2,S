Date: Sun, 29 Aug 1999 14:07:10 +0200 (MET DST)
From: Gerard Roudier <>
Subject: Re: [PATCH] Driver for Toshiba DVD-RAM (SCSI) (kernel 2.2.11)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/8/29/20

On Sun, 29 Aug 1999, Rogier Wolff wrote:
> Gerard Roudier wrote:
> > 
> > PS: The READ_6/WRITE_6 problem was, in fact, a known problem. :-)
> > By the way, you may want to provide the complete patch that eradicates 
> > explicit READ6/WRITE6 commands from the kernel in one step.
> 
> Wouldn't that create compatibility problems with old SCSI devices that
> only support read6/write6 ? 
Indeed, it will.
The "use preferently READ(6), then READ(10), then READ(12)" approach is
completely bogus on paper. The right READ command to use must be also
based on the INQUIRY data (basically the device type and the standard
version the device claims to be). 
We also have to fill the "logical unit number" in SCSI commands, in order
to be compatible with old devices. This info is only 3 bits (8 LUNs max)
and as you know some modern multi-lun devices have more than 8 LUNs.  We
also should fill this info or not, based on the device INQUIRY data
reported by the device. 
Unlike I wrote in some other posting about this topic, some other O/Ses
still apply the "READ(6) / then READ(10) / then READ(12) approach". :-)
So, the "wait for READ(6) problems" and fix them when they occur is
perhaps the more conservative approach, given all the mistakes that have
been made in existing SCSI products (Btw, the PCI world does not seem far
better in this regard).
GÃ©rard.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/