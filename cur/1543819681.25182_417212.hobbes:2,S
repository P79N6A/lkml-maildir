Date: Thu, 20 Apr 2006 14:07:11 +0200
From: Tilman Schmidt <>
Subject: Re: [2.6 Patch] isdn4linux: Siemens Gigaset base driver: fix disconnect handling
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/4/20/90

On 20.04.2006 09:11, Andrew Morton wrote:
> Tilman Schmidt <tilman@imap.cc> wrote:
> 
>>This patch fixes a possible Oops in the Siemens Gigaset base driver when
>> the device is unplugged while an ISDN connection is still active, and
>> makes sure that the isdn4linux link level (LL) is properly informed if a
>> connection is broken by the USB cable being unplugged.
>> It also improves some kernel messages generated by the driver.
> 
> It seems to do quite a lot more than that.
> [...] I'd ask you to confirm that this was actually the patch which
> was supposed to go with that changelog.
It is. However the changelog was not quite complete. There were a couple
of smaller changes which I neglected to mention. Sorry for that. I'll
try to be more careful when composing future changelogs.
The missing changes are:
Avoid unsafe checks of URB status fields outside the URB completion
handlers, keep track of in-use URBs myself instead.
If an isochronous transfer URB completes with status==0, also check the
status of the frame descriptors.
Verify length of interrupt messages received from the device.
Align the length limit on transmitted AT commands with the device
documentation.
In case of AT response receive overrun, keep newly arrived instead of
old unread data.
Remove redundant check of device ID in the USB probe function.
Correct and improve some comments and formatting.
>> --- linux-2.6.17-rc2-work/drivers/isdn/gigaset.orig/bas-gigaset.c	2006-04-19 15:15:49.000000000 +0200
>> +++ local/drivers/isdn/gigaset/bas-gigaset.c	2006-04-19 01:19:41.000000000 +0200
> 
> eek, please don't do that - it confuses my scripts.
> 
> --- linux-2.6.17-rc2-work/drivers/isdn/gigaset/bas-gigaset.c
> +++ linux-2.6.17-rc2-work/drivers/isdn/gigaset/bas-gigaset.c
> 
> is preferred.  There are nice tools around which help with this.
I'll be happy to comply with whatever your scripts need, but I don't
quite understand yet what it is that's causing you problems:
The presence of file timestamps?
The timestamp of the second file being earlier than the first one?
The ".orig" suffix in the first path?
The second path starting with "local" instead of "linux-..."?
All of this can be easily corrected; just tell me what's required.
Thanks
Tilman
-- 
Tilman Schmidt                          E-Mail: tilman@imap.cc
Bonn, Germany
It is well known that a vital ingredient of success is not knowing that
what you're attempting can't be done. [Terry Pratchett, "Equal Rites"]
[unhandled content-type:application/pgp-signature]