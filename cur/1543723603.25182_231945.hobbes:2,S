Date: Sat, 3 Jul 2004 02:42:38 +0200
From: Bartlomiej Zolnierkiewicz <>
Subject: Re: [RFC] Restoring HDIO_GETGEO semantics (was: Re: workaround for BIOS / CHS stuff)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/7/2/225

On Saturday 03 of July 2004 02:17, Szakacsits Szabolcs wrote:
> On 2 Jul 2004, Patrick J. LoPresti wrote:
> > You will find that the default_* files (i.e., the geometry from the
> > extended INT13 interface) match the values returned by HDIO_GETGEO.
>
> If my memory serves well, you wrote once long ago that your project needs
> the "legacy" value to make things work.
>
> Kernel 2.4 guessed usually legacy, right?
2.4 has drivers/ide/ide-geometry.c which is _exclusively_ for FS use,
IDE driver doesn't need it et all.
> Kernel 2.6 returns extended and it more upsets tools and users with
> trashed partitions.
2.6 returns "raw" IDE CHS not a BIOS translation.
I now think that Andries should have removed HDIO_GETGEO from
IDE driver _completely_ instead of only removing ide-geometry.c.
This can (and should) be still done.
Bartlomiej
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/