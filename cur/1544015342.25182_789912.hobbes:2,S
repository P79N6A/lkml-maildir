Date: Sat, 10 Jan 2009 23:46:16 +0100
From: Oleg Nesterov <>
Subject: Re: [RESEND][RFC PATCH v2] waitfd
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2009/1/10/235

On 01/10, Casey Dahlin wrote:
>
> Oleg Nesterov wrote:
>>> From the perspective of waitfd, the only difference between WNOHANG and
>>> O_NONBLOCK is which argument you put the flags in.
>>
>> No. Please see the note about ioctl/fcntl above.
>>
>> Oleg.
>>
> Yes but the actual waitfd call could simply set O_NONBLOCK on the
> descriptor when it receive WNOHANG in the flags, and read the descriptor
> flags going forward.
Ah, I misunderstood your message as if we shouldn't check f_flags at all.
Yes sure.
Oleg.