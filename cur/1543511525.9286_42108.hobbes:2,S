Date: Mon, 4 Oct 1999 15:28:57 -0600
From: "WANG,YIDING (HP-SanJose,ex1)" <>
Subject: SMP system panic with down/up calls for locking.  Need help on as sembly compiling.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/10/4/115

Under SMP (8 CPUs) system with 2.2.5-15smp kernel, when adding down()/up()
pair for critical section locking purpose in my fibre channel driver (to
system, it is scsi), system panic.  Acutually even under UP system,
involving this pair of function cause trouble.  Without those semaphore
lock, it works fine for quite a while.
Now I am trying to add a small piece of Assembly program with three
functions (lock, unlock and wait_lock) to do the locking.  Reading gcc man
page, it seems gcc will support aseembly source.  However, when I add
folowing line:
hpfclock.o:
	gcc -c -g $(CFLAGS} ${INCLUDES) hpfclock.s
The gcc doesn't treat hpfclock.s as program file and only take first part as
a function. 
Does Linux has a particular assemble compiler, such as masm, for assembly
code?
If not, what line I can put in makefile to make assembley file compiled
successfully?
Thanks!
-eddie  
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/