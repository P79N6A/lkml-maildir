Date: Fri, 4 May 2001 13:54:01 +0400
From: Ivan Kokshaysky <>
Subject: Re: [patch] 2.4.4 alpha semaphores optimization
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/5/4/155

On Fri, May 04, 2001 at 10:22:53AM +0100, David Howells wrote:
> Hello Ivan,
Hello David!
> I don't know whether it will (a) compile, or (b) work... I don't have an alpha
> to play with.
It looks ok at a first glance, I can try it today.
> I also don't know the alpha function calling convention, so I can't put direct
> calls to the fallback routines in lib/rwsem.c from the ".subsection 2"
> bits. Can you do that, or can you tell me how the calling convention works?
Calling C routines from inline asm is quite painful on alpha. Lots of
registers will be clobbered, so you need some wrapper functions preserving
them. It was done in 2.2 this way, but that code was hardly maintainable...
Ivan.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/