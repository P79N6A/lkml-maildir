Date: Fri, 24 Mar 2006 22:54:08 +1100
From: Con Kolivas <>
Subject: Re: [2.6.16-mm1 patch] throttling tree patches
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/3/24/114

On Friday 24 March 2006 22:21, Mike Galbraith wrote:
> patch 4/6
>
> This patch implements the throttling.
>
> Throttling is done via computing a slice_avg, which is the upper limit
> of what a task's sleep_avg may be and be sane.  When a task begins to
> consume more CPU than it's sleep_avg indicates it should, the task will
> be throttled.  A task which conforms to expectations can save credit for
> later use, which allows interactive tasks to do a burst of activity
> without being throttled.  When their reserve is exhausted however,
> that's the end of high ussage at high priority.
Looks ok. The description of credit still sounds cryptic.
> +#define C1 (CREDIT_C1 * MAX_BONUS * HZ)
> +#define C2 (CREDIT_C2 * MAX_BONUS * HZ + C1)
> +#define C3 (MAX_BONUS * C2)
Macro names that short are asking for trouble...
...
else looks good. After we've cleaned out all the sched patches from -mm it 
would be nice to get this work in. The values of C1 and particularly C2 
_sound_ large but may well be appropriate since you've been hard at work on 
this. I'll have to have a play for myself (if I ever find spare cycles on my 
miniscule selection of hardware) with them when they hit -mm.
Cheers,
Con
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/