Date: 27 Jan 2003 00:40:59 +0100
From: Benjamin Herrenschmidt <>
Subject: Re: [patch 2.5] VGA IO on systems with multiple PCI IO domains
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/1/26/89

On Sun, 2003-01-26 at 22:45, Martin Mares wrote:
> Hi!
> 
> > But on modern systems (titan and marvel), the firmware supports vga
> > on *any* bus. Even worse, marvel doesn't have dedicated "legacy"
> > hose at all.
> 
> > So we have to decode and fix IO port addresses inside our in/out
> > functions, which is awful.
> 
> Is the problem really only with VGA? Shouldn't we introduce
> isa_(in|out)(b|w) instead and remap the whole legacy I/O space?
Each time we discussed this, we came to the conclusion that indeed,
separate macros for ISA would be useful, but not enough.
We probably need to introduce an equivalent of ioremap for IO space. So
far, what we have to deal is:
 - Legacy ISA stuff unrelated to a PCI bus
 - Legacy devies on a given PCI segment (VGA, serial, IDE, ...)
What about some kind of ioport_remap() that would take a pci_bus and an
port range as arguments ? If pci_bus is NULL, that would match a
"legacy" ISA bus (non-PCI machine or default ISA bus for machines where
that makes sense).
What do you think ?
Ben.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/