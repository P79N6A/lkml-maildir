Date: Mon, 04 Feb 2002 14:26:37 -0500
From: "Thomas Hood" <>
Subject: Re: modular floppy broken in 2.5.3
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/2/4/160

Gunther Mayer wrote:
> PNPNIOS is right to reserve PNP0C01 as
> "used". Else there will be hangs when
> drivers poke in io space (e.g. laptops
> tend to have special hardware which
> doesn't like to be touched).
> [...]
> The BIOS probably wants to tell you there
> is a superio chip at 0x3f0
The floppy controller commonly uses io ports
0x3f2-0x3f5 and 0x3f7.  0x3f0-0x3f1 were used
by the floppy controller on the PC AT (only).
The latter two ports are now frequently used
for superio chips or other motherboard
devices, as the BIOS will report.  PnPBIOS
is acting properly in reserving the ports.
Since the floppy driver does not use ioports
0x3f0-0x3f1 it should not reserve them.
The issue was previously discussed in this
thread:
http://marc.theaimsgroup.com/?l=linux-kernel&m=100516032204531&w=2
http://marc.theaimsgroup.com/?l=linux-kernel&m=100495936122982&w=2
and the conclusion, I believe, was that the
floppy driver should be patched so as not to
reserve 0x3f0 and 0x3f1.  Someone even 
submitted a patch.
> PNPBIOS should not reserve 3f0/3f1
> as a _workaround_ for this BIOS bug.
The correct solution is to modify the floppy
driver.
Until that happens, use the "pnpbios=no-res"
option, which prevents pnpbios from reserving
any ioports.
--
Thomas Hood
-- 
_______________________________________________
Sign-up for your own FREE Personalized E-mail at Mail.com
http://www.mail.com/?sr=signup
Win a ski trip!
http://www.nowcode.com/register.asp?affiliate=1net2phone3a
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/