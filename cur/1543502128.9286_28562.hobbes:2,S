Date: Thu, 8 Jul 1999 11:56:45 +0200
From: Jos van de Ven <>
Subject: Re: SMP (IO-APIC??) weirdness
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/7/8/25

On Wed, Jul 07, 1999 at 08:56:37PM -0400, Joe wrote:
> There  is an interrupt bug in the IO-APIC's code:
> 
>     1) my BIOS can switch my 430HX  chip to behave like a 430FX chipset. If I
> use the 430FX setting all my interrupts act funny (zip/printer/sound/scanner
> ->   Sound locks up my system.). If I set it to the HX chipset, then most
> interrupt work fine.
> (So I use the 430HX setting).
This keep puzzling me. Why the %#%@$ would one like to emulate an older chipset.
BTW. As far as I know, the FX can't be used for SMP (though I'm not 100% certain).
But this is NOT a bug in the IO-APIC code. It's just some braindead BIOS programmer
who is the bug ;)
>     2) I have had this bezerko mouse thing going on for a while, until I was
> given a patch that allowed me to set a specific IRQ to XTPIC (thanks Jon).
[Sorry, my name is Jos, though Jon would be a nice name too ...]
> Using this patch my bezerko mouse is gone, but all the mouse interrupts are
> on CPU0.
Yup. But you did not like me: trying to put it IO-APIC-level. That will solve
everything.
> Chances are that the 2300 has different hardware than the 1300, other than
> the amount of RAM (onboard chipset?).
> 
>     Linux handling of IO-APICS seem to be picky, and just does not work with
> all hardware.
> 
>     first try  kernel 2.2.9 or later, and at lilo boot with noapic
> LILO:
>     linux noapic
This is possible too. I did sent him my patch too, so he can try out. But:
he isn't receiving ANY interrupts for that card. So it can't be wrong handling.
So I suggested him only to put on xtpic=irq,irq (that's how the patch is used).
As you report success. I have success too, and so a couple others too.  I'll
wait another few days, and than I'll take it up with mingo (at least I believe
he's the maintainer, but I'll look for that).
>     if your problem goes away it is a kernel bug related to the Interrupts,
> if not it is hardware.
That's to say,... it can be BIOS too! (BIOS is not realy hardware, but it
comes close enough to 'modify' hardware to the buggy side if it's buggy
itself...)
Greetings,
Jos van de Ven
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/