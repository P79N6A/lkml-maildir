Date: 12 Aug 2005 13:59:37 +0200
From: Andi Kleen <>
Subject: Re: Partitioning problems on x86_64 (fwd)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/8/12/57

Ken Moffat <ken@kenmoffat.uklinux.net> writes:
> On Thu, 11 Aug 2005, Lennart Sorensen wrote:
> 
> >
> > The kernel won't reread the partition table as long as ANY part of that
> > disk is mounted.  Reboot (which of course unmounts everything) to reread
> > the partition table.
> >
> 
>  OK, I've noted that now, thanks for the clue.
Actually it's a fdisk misfeature. There are two kinds of ioctls for
partition table rereading. One that rereads everything and fails if
any partitions on the disk are mounted.  And another kind that
adds/removes partitions explicitely. That works fine as long as you
don't touch the mounted partitions.
Unfortunately the only tool that seems to use the new kind is parted
but it has a nearly unusable awkward command line interface from hell, 
so fdisk is preferable even with the reboot requirement.
Ideally someone would fix fdisk to use the new kind.
Or just use LVM, it deals with all that much better.
-Andi
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/