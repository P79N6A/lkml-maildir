Date: Tue, 15 Jan 2008 12:20:10 +0900
From: KOSAKI Motohiro <>
Subject: Re: [RFC] mmaped copy too slow?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/14/517

Hi Rik
> While being able to deal with used-once mappings in page reclaim
> could be a good idea, this would require us to be able to determine
> the difference between a page that was accessed once since it was
> faulted in and a page that got accessed several times.
it makes sense that read ahead hit assume used-once mapping, may be.
I will try it.
(may be, i can repost soon)
> Given that page faults have overhead too, it does not surprise me
> that read+write is faster than mmap+memcpy.
> 
> In threaded applications, page fault overhead will be worse still,
> since the TLBs need to be synchronized between CPUs (at least at
> reclaim time).
sure.
but current is unnecessary large performance difference.
I hope improvement it because copy by mmapd is very common operation.
> Maybe we should just advise people to use read+write, since it is
> faster than mmap+memcpy?
Time is solved to it :)
thanks!
- kosaki