Date: Thu, 23 Dec 1999 12:10:54 +1100
From: Keith Owens <>
Subject: Re: [linux-usb] Re: [patch] drivers/usb/usb.c: auto loading of USB bus driver
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/12/22/87

On Wed, 22 Dec 1999 08:46:53 -0300, 
Horst von Brand <vonbrand@pincoya.inf.utfsm.cl> wrote:
>Keith Owens <kaos@ocs.com.au> said:
>> [1] One problem with modules.conf is keeping it up to date with the
>> kernel.  What about /proc/sys/modules.conf where kernel code can
>> register its own special requirements?
>
>No more /proc cruft, please!
>
>What if modules export/import symbols that just serve for dependencies?
Normally I would agree with you, /proc cruft is bad.  Also pre/post
install or above/below in modules.conf is a hack and should be avoided.
However there is one special case which requires manual intervention :-
the bus/SCSI hostadaptor problem.  You can have multiple bus/SCSI in a
machine and all need to be loaded, or at least probed.  Referencing a
dummy symbol just to satisfy dependencies will stop when the first
module is found that exports that symbol but we want multiple modules
to be tried.  
Symbol dependency only works in one direction, downwards.  So post
install or above cannot be replaced by symbol dependencies.  If (and we
should try to avoid it) the kernel *has* to use above/below then it
would be better to automatically export those from the kernel.  It does
not have to be in /proc, it can be in a special dependency file which
modprobe reads.  But as long as the kernel relies on above/below, it
would be better to automate the definitions somehow.  I'm open to
suggestions.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/