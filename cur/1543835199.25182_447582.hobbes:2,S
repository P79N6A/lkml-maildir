Date: Fri, 28 Jul 2006 14:30:13 +0100
From: Christoph Hellwig <>
Subject: Re: Bad ext3/nfs DoS bug
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/7/28/106

On Fri, Jul 28, 2006 at 09:27:01AM -0400, Peter Staubach wrote:
> Since export_iget() doesn't actually involve any code which has anything to
> do with the NFS server exports data structures, what exactly is the 
> objection?
> Is it truly better to duplicate code than to use a common routine which
> can be documented?
export_iget calls iget() which assumes a lot about how a filesystem works.
Generally no one should call iget outside of filesystem code (export_iget
is the only such occurance) and should be replaced by opencoding iget_locked
& co on filesystems where it helps or a simple_iget that takes a callback
similar to the current read_inode method.  By moving export_iget to core
code you encourage people to use it, and that's the last thing we want.
Btw, you folks might want to ping Al Viro, he had patches to fix various
nfsd vs icache issues a while ago.
> 
>    Thanx...
> 
>       ps
---end quoted text---
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/