Date: Thu, 11 Jan 2007 14:49:17 +0100
From: Adrian Bunk <>
Subject: [2.6 patch] let BLK_DEV_AMD74XX depend on X86
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/1/11/99

It's unlikely that this driver will ever be of any use on other 
architectures.
This fixes the following compile error on ia64:
<--  snip  -->
...
  CC      drivers/ide/pci/amd74xx.o
/home/bunk/linux/kernel-2.6/linux-2.6.20-rc3-mm1/drivers/ide/pci/amd74xx.c: In function 'init_hwif_amd74xx':
/home/bunk/linux/kernel-2.6/linux-2.6.20-rc3-mm1/drivers/ide/pci/amd74xx.c:421: warning: implicit declaration of function 'pci_get_legacy_ide_irq'
  CC      drivers/ide/pci/cmd64x.o
...
  LD      .tmp_vmlinux1
drivers/built-in.o: In function `init_hwif_amd74xx':
/home/bunk/linux/kernel-2.6/linux-2.6.20-rc3-mm1/drivers/ide/pci/amd74xx.c:421: undefined reference to `pci_get_legacy_ide_irq'
make[1]: *** [.tmp_vmlinux1] Error 1
<--  snip  -->
This fixes kernel Bugzilla #6644.
Signed-off-by: Adrian Bunk <bunk@stusta.de>
--- linux-2.6.20-rc3-mm1/drivers/ide/Kconfig.old	2007-01-11 11:15:24.000000000 +0100
+++ linux-2.6.20-rc3-mm1/drivers/ide/Kconfig	2007-01-11 11:15:37.000000000 +0100
@@ -478,6 +478,7 @@
 
 config BLK_DEV_AMD74XX
 	tristate "AMD and nVidia IDE support"
+	depends on X86
 	help
 	  This driver adds explicit support for AMD-7xx and AMD-8111 chips
 	  and also for the nVidia nForce chip.  This allows the kernel to
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/