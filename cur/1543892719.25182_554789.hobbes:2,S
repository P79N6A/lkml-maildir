Date: Thu, 7 Jun 2007 23:35:17 -0700
From: "Miles Lane" <>
Subject: Re: 2.6.22-rc4-mm2 -- ipw2200 -- SIOCSIFADDR: No buffer space available
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/6/8/28

On 6/7/07, Björn Steinbrink <B.Steinbrink@gmx.de> wrote:
[...]
> Miles, could you try if this patch helps?
>
> Björn
>
>
> Stop destroying devices when all of their ifas are gone, as we no longer
> recreate them when ifas are added.
>
> Signed-off-by: Björn Steinbrink <B.Steinbrink@gmx.de>
> --
> diff --git a/net/ipv4/devinet.c b/net/ipv4/devinet.c
> index fa97b96..abf6352 100644
> --- a/net/ipv4/devinet.c
> +++ b/net/ipv4/devinet.c
> @@ -327,12 +327,8 @@ static void __inet_del_ifa(struct in_device *in_dev, struct in_ifaddr **ifap,
>                 }
>
>         }
> -       if (destroy) {
> +       if (destroy)
>                 inet_free_ifa(ifa1);
> -
> -               if (!in_dev->ifa_list)
> -                       inetdev_destroy(in_dev);
> -       }
>  }
>
>  static void inet_del_ifa(struct in_device *in_dev, struct in_ifaddr **ifap,
>
Björn,
Thanks.  You patch worked for me.
             Miles
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/