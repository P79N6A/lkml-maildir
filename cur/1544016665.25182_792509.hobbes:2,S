Date: Thu, 15 Jan 2009 10:55:21 +0100
From: Ingo Molnar <>
Subject: Re: [patch] add optimized generic percpu accessors
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2009/1/15/117

* Rusty Russell <rusty@rustcorp.com.au> wrote:
> On Wednesday 14 January 2009 20:08:34 Ingo Molnar wrote:
> > 
> > * H. Peter Anvin <hpa@zytor.com> wrote:
> > 
> > > Tejun Heo wrote:
> > > > 
> > > > I think the two changes aren't exclusive at all.  The order of things
> > > > could be different but in the end, yeah, zero-based percpu symbols w/
> > > > mostly empty pda is the goal.
> > > > 
> > > >> Once the PDA is empty, I'll base %gs at the start of the per-cpu
> > > >> area.  I've been working out the bugs with the last patch
> > > >> (zero-basing the percpu area) before submitting, but I probably
> > > >> won't have the time until this weekend to polish it off.  I could
> > > >> submit all but the last patch if you'd like.
> > > > 
> > > > Any chance you can rebase those patches on top of mine?  If you don't
> > > > have time, just send them to me, I'll try to integrate them this week.
> > > > 
> > > 
> > > A merged tree here would be absolutely wonderful.  I've kept an eye on 
> > > the discussion so far, but it looks like you guys are handling it fine.
> > 
> > agreed, it looks really good.
> > 
> > Tejun, could you please also add the patch below to your lineup too?
> > 
> > It is an optimization and a cleanup, and adds the following new generic 
> > percpu methods:
> > 
> >   percpu_read()
> 
> I already have this in my patch series.
hm, where is that exactly? Do you have a commit ID (or could send a patch) 
that i could have a look at?
> Frankly, it starts to get marginal in generic code after percpu_read(), 
> so I didn't do them (and the per-cpu interfaces are already pretty 
> wide).
> 
> Tejun, is now a good time to rebase my alloc_percpu series on top of 
> yours?  I'm more than happy to hand them over to someone with more 
> cycles...
We can pick it up into a topic in -tip if you dont mind.
	Ingo