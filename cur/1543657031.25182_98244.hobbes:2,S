Date: Wed, 25 Dec 2002 12:58:20 +0100
From: Tomas Szepe <>
Subject: Re: Alot of DMA errors in 2.4.18, 2.4.20 and 2.5.52
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/12/25/14

> For some funny reason, a 2.4.20 kernel refuses to set the DMA-level on
> the new disks (all connected to a UDMA5-capable Ultra100 TX2 controller)
> to UDMA5,4,3 and settles it for UDMA2, which is the highest possibility
> for the OLD onboard-controller (but NOT for the promise card).
You need to boot 2.4.19 and 2.4.20 with 'ideX=ata66' where X is the
number of the channel where you wish to use transfer modes above UDMA2.
For instance, "ide0=ata66 ide1=ata66" will do the trick for the first two
channels.  This is a well-known bug in the PDC driver that has never been
fixed.  And don't worry, 2.4.21 will most likely feature a PDC driver that
won't work at all (read Andre Hedrick's posts from last week), but if you
say 2.5.52 mostly works then you might be lucky as 2.5 IDE is basically
the same codebase as 2.4.21-pre.
> The errors was (2.4.20):
> 
> <DATE> webber kernel: hdg: dma_intr: status=0x51
> <DATE> webber kernel: hdg: end_request: I/O error, dev 22:00 (hdg)
> sector 58033224
> <DATE> webber kernel: hdg: dma_intr: status=0x51
> <DATE> webber kernel: hdg: dma_intr: error=0x40 LBAsect=58033238,
> sector=58033232
> <DATE> webber kernel: end_request: I/O error, dev 22:00 (hdg), sector
> 58033232
Hmmm, I can't help you with these.
-- 
Tomas Szepe <szepe@pinerecords.com>
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/