Date: Tue, 28 Jun 2005 09:42:08 +0200
From: Stefan Richter <>
Subject: Re: Problems with Firewire and -mm kernels
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/6/28/83

Andrew Morton wrote:
> -ieee1394: Node added: ID:BUS[0-00:1023]  GUID[0050c501e00010e8]
> +ieee1394: Node added: ID:BUS[0-01:1023]  GUID[0050c501e00010e8]
> +ieee1394: The root node is not cycle master capable; selecting a new root node and resetting...
> +ieee1394: Node changed: 0-01:1023 -> 0-00:1023
>  ieee1394: Node changed: 0-00:1023 -> 0-01:1023
The IDs are assigned to nodes everytime they are attached to the bus in 
a random order. It is a pure hardware thing; I cannot imagine any 
influnce of the kernel to this procedure.
If the node with the highest ID does not fulfill certain criteria, Linux 
tries to get the highest ID moved to the local node. This function is 
unrelated to SBP-2 (it is necessary to let streaming devices like 
cameras work) but it has been observed that it disturbs a few SBP-2 
devices. But again, I don't see how -mm and the stock kernel should 
differ to that respect.
You could load ieee1394 with a new parameter that supresses the "Root 
node is not cycle master capable..." routine:
# modprobe ieee1394 disable_irm=1
before ohci1394 and the other 1394 related drivers are loaded.
>  SCSI subsystem initialized
>  sbp2: $Rev: 1219 $ Ben Collins <bcollins@debian.org>
> @@ -300,14 +308,6 @@
>  ieee1394: sbp2: Logged into SBP-2 device
>  ieee1394: Node 0-00:1023: Max speed [S400] - Max payload [2048]
>    Vendor: ST316002  Model: 1A                Rev: 3.06
> -  Type:   Direct-Access                      ANSI SCSI revision: 06
> -SCSI device sda: 312581808 512-byte hdwr sectors (160042 MB)
> -sda: asking for cache data failed
> -sda: assuming drive cache: write through
> -SCSI device sda: 312581808 512-byte hdwr sectors (160042 MB)
> -sda: asking for cache data failed
> -sda: assuming drive cache: write through
> - sda: [mac] sda1 sda2 sda3 sda4
> -Attached scsi disk sda at scsi0, channel 0, id 0, lun 0
> +  Type:   Unknown                            ANSI SCSI revision: 04
There was a discussion in May about discovery of devices which implement 
the RBC command set: http://marc.theaimsgroup.com/?t=111620896500001 I 
am not sure if the discussed change went into one or both of the kernels 
in question.
>  ieee1394: Node changed: 0-01:1023 -> 0-00:1023
>  ieee1394: Node suspended: ID:BUS[0-00:1023]  GUID[0050c501e00010e8]
What caused these two messages? Did you disconnect the drive at this point?
-- 
Stefan Richter
-=====-=-=-= -==- ===--
http://arcgraph.de/sr/
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/