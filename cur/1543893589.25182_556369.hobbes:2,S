Date: Tue, 12 Jun 2007 16:58:48 +0530
From: "Satyam Sharma" <>
Subject: Re: [PATCH] fix improper .init-type section references
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/6/12/129

On 6/12/07, Satyam Sharma <satyam.sharma@gmail.com> wrote:
> On 6/12/07, Jan Beulich <jbeulich@novell.com> wrote:
> [...]
> > >I believe the correct fix to silence modpost here would be to mark its
> > >caller kthreadd() also as __init, because it too is used only at init time?
> >
> > I don't think so - it is my understanding that this is the body of a thread
> > that never dies.
>
> Ugh, yes, I'm smoking God-knows-what, and you're absolutely correct!
>
> So we should be marking kthreadd() as __init_refok instead, it seems.
Actually, kthreadd_setup() is a 4-liner with only one callsite. Not much
point marking it as __init. In fact, does it even need to be a separate
function at all? We could just get rid of kthreadd_setup() and open-code
those 4 lines in kthreadd() itself ...
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/