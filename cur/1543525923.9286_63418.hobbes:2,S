Date: Tue, 15 Feb 2000 14:21:13 -0500 (EST)
From: William Montgomery <>
Subject: Re: lowlatency-2.2.14-B1 + 2.2.14aa7 fixes crash, but...
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/2/15/111

On Sat, 12 Feb 2000, Artur Skawina wrote:
> 
> attached is the adhoc hack i did years ago when i needed a stacktrace
> of a hung process.
> 
> you need to lookup the address of init_task_union in System.map,
> update it, recompile, and insmod the module specifying the pid.
> 
> it could be made a lot nicer, but as it has always been enough for my needs...
> 
I had to make one small change to the module to get it compiled;
changed reference to task_struct element thread to tss.  I am a newbie
at making sense of these stack traces and attempted to resolve the
reasonable looking addresses to symbol names from System.map.
The output of the decoded stacktrace follows:
ksmod PID=2895 : PID of stuck process "/bin/sync"
EIP: [<c010f44f>] : c010f2fc T schedule
ESP: c6e67f34 SavedPC: 00000249
[<c6e67f58>]
[<fffffc18>]
[<c022c000>] : c022c000 D init_task_union
[<c6e67f78>]
[<c2556420>]
[<c0242ee8>] : c0242c80 b all_requests
[<c022c000>] : c022c000 D init_task_union
[<c0239c00>] : c0239c00 d aligned_data
[<c6e66000>]
[<c0124486>] : c01243e8 T __wait_on_buffer
[<c25563c0>]
[<c6e66000>]
[<c6e67f78>]
[<c6e67f78>]
[<c6e66000>]
[<c255644c>]
[<c012456d>] : c01244c0 t sync_buffers
[<c2556420>]
[<c2556420>]
[<c01247c3>] : c012479c T fsync_dev
[<c6e66000>]
[<c01247cf>] : c01247c8 T sys_sync
[<c0107b7c>] : c0107b48 T system_call
-------------------
Does this look reasonable?
How do I interpret this?
I am also going to try the ikd patch to see if I get similar results.
Wm
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/