Date: Tue, 22 Jan 2008 09:34:52 -0800
From: "Joachim Deguara" <>
Subject: Re: [x86] please setup git for http access
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/22/209

On Thursday 17 January 2008, Joachim Deguara wrote:
> On Tuesday 15 January 2008, H. Peter Anvin wrote:
> > Joachim Deguara wrote:
> > > Hello,
> > >   I am trying to access the x86 git tree behind a proxy and therefore
> > > over the http address.  This works for Linus' tree but not for the x86
> > > tree.  Please follow these guidelines to enable http access.
> > >
> > > 
http://www.kernel.org/pub/software/scm/git/docs/user-manual.html#export
> > >in g-via-http
> >
> > Set up now.
> >
> > 	-hpa
>
> Thanks but unfortunately it still seams not to be working.  I cannot
> sucessfully:
>  git-clone
> 
http://www.kernel.org/pub/scm/linux/kernel/git/x86/linux-2.6-x86.git
>
> I can see the git repository over http but I am guessing something did not
> go right with 'git --bare update-server-info' as the .git/info directory
> does not have the refs like Linus' does which are needed for http (gleaming
> this from man git-update-server-info).  There have been updates to the git
> tree since you responded so it looks like that hook did not get activated. 
> (these are guesses from me and I don't really know git well so don't trust
> a word I say)
>
> thanks
> -Joachim
Its almost works now!  It starts cloning the archive but then does not find 
a 'pack'.  Interestingly there are not many packs populated:
http://www.kernel.org/pub/scm/linux/kernel/git/x86/linux-2.6-x86.git/objects/pack/
joachim@andante:git> git clone 
http://www.kernel.org/pub/scm/linux/kernel/git/x86/linux-2.6-x86.git
Initialized empty Git repository in /home/joachim/tmp/git/linux-2.6-x86/.git/
Getting alternates list for 
http://www.kernel.org/pub/scm/linux/kernel/git/x86/linux-2.6-x86.git
Also look at 
http://www.kernel.org/home/ftp/pub/scm/linux/kernel/git/torvalds/linux-2.6.git/
Getting pack list for 
http://www.kernel.org/pub/scm/linux/kernel/git/x86/linux-2.6-x86.git
Getting index for pack 467c9a27b7553e8ad01fc42a6fbe74965e32ec4e
Getting index for pack ec3b53b28a0be9cc6121d29c327f5945a1aeeb8e
Getting pack ec3b53b28a0be9cc6121d29c327f5945a1aeeb8e
 which contains 4960c9df1407c2723459c60ff13e6efe0c209c62
walk 4960c9df1407c2723459c60ff13e6efe0c209c62
walk d384e35a25445bb60457b7dab8cffe178c6b7ecb
Getting pack list for 
http://www.kernel.org/home/ftp/pub/scm/linux/kernel/git/torvalds/linux-2.6.git/
error: Unable to find 8d14531846b95bfa3564b58ccfb7913a034323b8 under 
http://www.kernel.org/pub/scm/linux/kernel/git/x86/linux-2.6-x86.git
Cannot obtain needed blob 8d14531846b95bfa3564b58ccfb7913a034323b8
while processing commit d384e35a25445bb60457b7dab8cffe178c6b7ecb.
Waiting for 
http://www.kernel.org/pub/scm/linux/kernel/git/x86/linux-2.6-x86.git/objects/41/12e840094b6d3f5e280c83466c66d267fced99
Waiting for 
http://www.kernel.org/home/ftp/pub/scm/linux/kernel/git/torvalds/linux-2.6.git//objects/e9/4ba7819ccceacdda2c2f0f72017c543b4b6808
Waiting for 
http://www.kernel.org/pub/scm/linux/kernel/git/x86/linux-2.6-x86.git/objects/a9/d4836f7003159bf56607eeb1b78775b548cfa1
joachim@andante:git> echo $?
1
-Joachim