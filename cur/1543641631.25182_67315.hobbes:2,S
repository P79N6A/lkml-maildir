Date: 30 Aug 2002 12:18:45 -0600
From: Steven Cole <>
Subject: [PATCH] 2.4.20-pre5-ac1 update ver_linux to report version of reiserfsprogs.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/8/30/109

This patch updates the ver_linux script to work with recent 
versions of reiserfsprogs.
Reasons for this update are:
1) Recent versions of reiserfsprogs require the -V option
   to report the version number.
2) Very recent reiserfsprogs (3.6.3+) are installed in /usr/local/sbin.
Old reiserfsprogs which will not respond to -V are deprecated,
and are covered by "If some fields are empty or look unusual
you may have an old version."
This updated ver_linux script was tested with reiserfsprogs
3.x.0j, 3.6.3, and 3.6.4-pre1.
The addition of /usr/local/sbin to $PATH could have some
side effects, so further testing is welcomed.
This patch was made against 2.4.20-pre5-ac1.
Steven
--- linux-2.4.20-pre5-ac1/scripts/ver_linux.orig	Fri Aug 30 08:52:50 2002
+++ linux-2.4.20-pre5-ac1/scripts/ver_linux	Fri Aug 30 09:04:08 2002
@@ -4,7 +4,7 @@
 # /bin /sbin /usr/bin /usr/sbin /usr/local/bin, but it may
 # differ on your system.
 #
-PATH=/sbin:/usr/sbin:/bin:/usr/bin:$PATH
+PATH=/sbin:/usr/sbin:/bin:/usr/bin:/usr/local/sbin:$PATH
 echo 'If some fields are empty or look unusual you may have an old version.'
 echo 'Compare to the current minimal requirements in Documentation/Changes.'
 echo ' '
@@ -33,7 +33,7 @@
 tune2fs 2>&1 | grep "^tune2fs" | sed 's/,//' |  awk \
 'NR==1 {print "e2fsprogs             ", $2}'
 
-reiserfsck 2>&1 | grep reiserfsprogs | awk \
+reiserfsck -V 2>&1 | grep reiserfsprogs | awk \
 'NR==1{print "reiserfsprogs         ", $NF}'
 
 cardmgr -V 2>&1| grep version | awk \
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/