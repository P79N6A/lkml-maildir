Date: Mon, 5 Jan 2009 14:24:07 +0100
From: Oleg Nesterov <>
Subject: Re: [PATCH 4/6][v5] Protect cinit from unblocked SIG_DFL signals
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2009/1/5/163

On 12/30, Roland McGrath wrote:
>
> I'd just make the flag a parameter to send_signal() directly.
> Then you can just change kill_pid_info_as_uid (or its replacement)
> to call send_signal() with that new flag (and the 'group' flag)
> directly instead of using the trivial __group_send_sig_info wrapper.
Ah, good. Can't understand why I didn't think about this before!
But, perhaps, it is better to add the new helper, __send_signal()
or whatever which has the new "from_ancestor_ns" argument. Then,
	static int send_signal(...)
	{
		bool from_ancestor_ns = 0;
	#ifdef CONFIG_PID_NS
		if (!is_si_special(info) && SI_FROMUSER(info)) {
			from_ancestor_ns = !task_pid_nr_ns(current, task_active_pid_ns(t));
		}
	#endif
		return __send_signal(..., from_ancestor_ns);
	}
but this is cosmetic issue.
Oleg.