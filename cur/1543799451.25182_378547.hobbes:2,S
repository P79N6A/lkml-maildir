Date: Thu, 22 Dec 2005 16:26:39 +0100
From: "Amir Bukhari" <>
Subject: MPC5200 Cache issue with Bestcomm
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/12/22/136

Sorry this question is not related to linux kernel, but I can't find any
sources which I can find any tipps for the issue I encoured.
I write a standalone application with TCP stack (I use lwip stack). I am
want to enable the cache to increase performance of my application.
------------------------
Here is my configuration of various registers:
#define CORE_HID0_INIT                    0x8010C000
#define CORE_HID2_INIT                    0x00000000
#define CORE_IBAT0U_INIT                  0x000007FF
#define CORE_IBAT0L_INIT                  0x00000001
#define CORE_DBAT0U_INIT                  0x000007FF
#define CORE_DBAT0L_INIT                  0x00000052
#define CORE_DBAT1U_INIT                  0xF000000F  // for MBAR
#define CORE_DBAT1L_INIT                  0xF000002A  // for MBAR
#define CORE_DBAT2U_INIT                  0x40001FFF
#define CORE_DBAT2L_INIT                  0x40000022  // for PCI
#define CORE_DBAT3U_INIT                  0x50001FFF  //
#define CORE_DBAT3L_INIT                  0x50000022  //
XLARB configuration is :
#define XLARB_CONFIG_INIT                 0x8000A006 // snoop window is
enabled
#define XLARB_PRIORITY_ENABLE_INIT        0x0000000F
#define XLARB_PRIORITY_INIT               0x11111010
#define XLARB_SNOOP_WINDOW_INIT           0x00000019 // base address is 0
and 64Mbytes length
----------------
Now as soon as I enable cache the Bestcomm doesn't stop firing me a ethernet
packet receive. It doesn't stop this and this let my system hangs up. When
running the system without cache every thing work well.
I will be happy if someone can give me a tipp if I may missed something!
-Amir
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/