Date: Wed, 16 Jun 2004 20:32:21 +0300
From: Jari Ruusu <>
Subject: Re: [PATCH 5/5] kbuild: external module build doc
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/6/16/166

Sam Ravnborg wrote:
> On Tue, Jun 15, 2004 at 10:21:44PM +0300, Jari Ruusu wrote:
> > Sam, You don't seem to have any idea how much breakage you introduce if you
> > insist on redirecting the 'build' symlink from source tree to object tree.
> 
> No - and I still do not see it.
If you don't understand how many external packages depend on the 'build'
symlink pointing to directory where toplevel kernel Makefile is, then may I
suggest that you do NOT touch that symlink all.
> Please explain how we can be backward
> compatible when vendors start utilising separate directories for src and output.
Most backward compatible way is to leave the 'build' symlink alone, and add
another /lib/modules/`uname -r`/object symlink that points to the object
tree.
> Anyway, after I gave it some extra thoughs I concluded that
> /lib/modules/kernel-<version>/ was the wrong place to keep
> info about where to src for a given build is located.
> This information has to stay in the output directory.
Why can't there be two symlinks?
We have one now (the 'build' symlink) that points to the build machinery,
and adding another (the 'object' symlink) that points to object tree is no
big deal.
> So what I will implement is that during the kernel build process
> (not the install part) a symlink named 'source' is placed
> in the root of the output directory - and links to the root of
> the kernel src used for building the kernel.
> 
> Then /lib/modules/kernel-<version>/build/source will be where
Nobody gave me a veto right, but I yell VETO now!
> the source is located.
> And /lib/modules/kernel-<version>/build will point to the output files.
-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/