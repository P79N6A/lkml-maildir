Date: Wed, 21 Mar 2001 15:06:15 +0100
From: Holger Lubitz <>
Subject: Re: UDMA 100 / PIIX4 question
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/3/21/56

Jeremy Jackson wrote:
> Yes this is why I originally replied to the post... but he's not using a PIIXx at
> all,
> but the IDE chip on an Intel 815 motherboard.  I'm not sure if they use the same
> driver
> , but I don't think so.
I only know i810 systems from experience, but they use a 82801AA which
is still reported as PIIX4 in /proc/ide/piix (so probably is quite
similar, apart from supporting UDMA/66). I assumed that might be the
same for i815.
> > hdparm speed measurements differ by filesystem (i have no idea why,
> 
> this is false.  They may differ by partition, since different parts (zones) of a
i know. i found it hard to believe myself, but the numbers are
consistently lower even on the same partition. i used to have a spare
partition for things like this (hda6 below), unfortunately i cannot
repeat the tests right
now because it is currently in use.
but if it were a matter of different disk zones, only the buffered disk
reads should get slower, not the buffer-cache reads.
> include output of fdisk so we can see partition layout, and results of hdparm on
> different areas.
Disk /dev/hda: 255 heads, 63 sectors, 5606 cylinders
Units = cylinders of 16065 * 512 bytes
   Device Boot    Start       End    Blocks   Id  System
/dev/hda1   *         1       255   2048256    6  FAT16
/dev/hda2           256      5606  42981907+   5  Extended
/dev/hda5           256       511   2056288+  83  Linux
/dev/hda6           512       767   2056288+  83  Linux
/dev/hda7           768      1023   2056288+  83  Linux
/dev/hda8          1024      1089    530113+  82  Linux swap
/dev/hda9          1090      5606  36282771   83  Linux
/dev/hda:
 Timing buffer-cache reads:   128 MB in  1.41 seconds = 90.78 MB/sec
 Timing buffered disk reads:  64 MB in  3.04 seconds = 21.05 MB/sec
/dev/hda1:
 Timing buffer-cache reads:   128 MB in  1.66 seconds = 77.11 MB/sec
 Timing buffered disk reads:  64 MB in  3.51 seconds = 18.23 MB/sec
/dev/hda5:
 Timing buffer-cache reads:   128 MB in  1.20 seconds =106.67 MB/sec
 Timing buffered disk reads:  64 MB in  2.32 seconds = 27.59 MB/sec
/dev/hda6:
 Timing buffer-cache reads:   128 MB in  1.20 seconds =106.67 MB/sec
 Timing buffered disk reads:  64 MB in  2.37 seconds = 27.00 MB/sec
/dev/hda7:
 Timing buffer-cache reads:   128 MB in  1.20 seconds =106.67 MB/sec
 Timing buffered disk reads:  64 MB in  2.33 seconds = 27.47 MB/sec
/dev/hda8:
 Timing buffer-cache reads:   128 MB in  1.21 seconds =105.79 MB/sec
 Timing buffered disk reads:  64 MB in  2.31 seconds = 27.71 MB/sec
/dev/hda9:
 Timing buffer-cache reads:   128 MB in  1.21 seconds =105.79 MB/sec
 Timing buffered disk reads:  64 MB in  2.30 seconds = 27.83 MB/sec
the kernel is 2.4.2ac18 btw. i know its not the most recent, but that
shouldn't matter. this behaviour has been there for a long time. i am
not even sure if this was ever any different.
holger
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/