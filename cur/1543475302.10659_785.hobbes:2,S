Date: Tue, 05 Jan 1999 07:26:18 -0800
From: Dan Kegel <>
Subject: Re: Undocumented feature in 2.2.0p1
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/1/6/121

Mike Perry schrieb:
> I've found an undocumented feature in 2.2.0p1 IPmasqing. In the 2.0 series
> of kernels, when you had a masq network and wanted to use Blizzard's
> BattleNet servers for Starcraft internet play, you had to use ipautofw to
> forward port 6112 tcp/udp to battle.net. Under 2.2.0p1, not only do you
> not have to do this anymore...
Sounds like you have applied the "ip_masq_dloose" patch
(included in 2.2.0pre1-ac2, but not yet in Linus' tree, I think).
The description of this patch on 
http://juanjox.linuxhq.com/
 is:
 patch-2.2.0pre1-ac1.ip_masq_dloose.gz 
 Changes UDP stream semantics by keeping only one tunnel 
 per source <addr,port> regardless of changes in destination 
 addr,port (note that this matches "normal" sockets semantics). 
I gave Juanjo the idea for that patch; the goal was to improve support 
for multiplayer games.  You can read more at
  
http://alumni.caltech.edu/~dank/peer-nat.html
Using ipautofw limits you to one player on the masq'd LAN,
I think, but the new code lets you have unlimited players,
without any manual configuration, if the game is written
properly.
> but if you DO specify autofw (using the new
> ipmasqadm and autofw module) with those ports, communication with
> battle.net is broken.. When you do nothing, game play is fine.
I'm suprised that using autofw causes trouble.  I don't know
enough about battle.net to guess what the problem is; all
my testing was done with Activision games.
If you don't apply 2.2.0pre1-ac1, does starcraft work when
using the new ipmasqadm/autofw stuff?
- Dan
-- 
Speaking only for myself, not for my employer
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/