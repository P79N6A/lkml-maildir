Date: Wed, 8 Jan 2003 17:18:37 +0100
From: Arnd Bergmann <>
Subject: Re: [IPV6]: Convert mibstats to use kmalloc_percpu
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/1/8/140

Changeset 1.879.9.7 from kiran@in.ibm.com contains:
> @@ -765,6 +847,7 @@
>  #ifdef CONFIG_SYSCTL
>         ipv6_sysctl_unregister();       
>  #endif
> +       cleanup_ipv6_mibs();
>  }
>  module_exit(inet6_exit);
>  #endif /* MODULE */
This does not work when cleanup_ipv6_mibs() is marked __exit,
the fix below is needed to build a kernel with ipv6.
===== net/ipv6/af_inet6.c 1.18 vs edited =====
--- 1.18/net/ipv6/af_inet6.c	Tue Jan  7 11:19:42 2003
+++ edited/net/ipv6/af_inet6.c	Wed Jan  8 17:08:52 2003
@@ -684,7 +684,7 @@
 	
 }
 
-static void __exit cleanup_ipv6_mibs(void)
+static void cleanup_ipv6_mibs(void)
 {
 	kfree_percpu(ipv6_statistics[0]);
 	kfree_percpu(ipv6_statistics[1]);
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/