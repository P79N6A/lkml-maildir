Date: Sun, 10 Feb 2002 04:29:26 +0100
From: Pierre Rousselet <>
Subject: Re: 2.5.4-pre5 fails to build (sounddrivers.o/pcmcia_net.o)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/2/9/161

Jeff Garzik wrote:
> Alessandro Suardi wrote:
> 
>>drivers/sound/sounddrivers.o: In function `m3_play_setup':
>>drivers/sound/sounddrivers.o(.text+0xf4e): undefined reference to `virt_to_bus_not_defined_use_pci_map'
>>drivers/sound/sounddrivers.o(.text+0xf6e): undefined reference to `virt_to_bus_not_defined_use_pci_map'
>>drivers/sound/sounddrivers.o(.text+0xf93): undefined reference to `virt_to_bus_not_defined_use_pci_map'
>>drivers/sound/sounddrivers.o(.text+0xfb7): undefined reference to `virt_to_bus_not_defined_use_pci_map'
>>drivers/sound/sounddrivers.o(.text+0xfde): undefined reference to `virt_to_bus_not_defined_use_pci_map'
>>drivers/sound/sounddrivers.o(.text+0x1000): more undefined references to `virt_to_bus_not_defined_use_pci_map' follow
>>drivers/net/pcmcia/pcmcia_net.o: In function `xircom_rx':
>>drivers/net/pcmcia/pcmcia_net.o(.text+0x1801): undefined reference to `bus_to_virt_not_defined_use_pci_map'
>>drivers/net/pcmcia/pcmcia_net.o(.text+0x19a2): undefined reference to `virt_to_bus_not_defined_use_pci_map'
>>drivers/net/pcmcia/pcmcia_net.o: In function `set_rx_mode':
>>drivers/net/pcmcia/pcmcia_net.o(.text+0x22d4): undefined reference to `virt_to_bus_not_defined_use_pci_map'
>>make: *** [vmlinux] Error 1
>>
> 
> 
> These driver(s) need to be cleaned up to use pci_alloc_consistent.
> 
> Patches welcome!
> 
> 
es1370.c is using pci_alloc_consistent. However insmod es1370 gives this 
message :
/lib/modules/2.5.4-pre5/kernel/drivers/sound/es1370.o: unresolved symbol 
virt_to_bus_not_defined_use_pci_map_R2278fef8
It comes from a workaround for the "phantom write" bug. A workaround for 
the workaround might be in this case isa_virt_to_bus
Pierre
-- 
------------------------------------------------
  Pierre Rousselet <pierre.rousselet@wanadoo.fr>
------------------------------------------------
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/