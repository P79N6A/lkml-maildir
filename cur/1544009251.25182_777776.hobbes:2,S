Date: Sat, 06 Dec 2008 21:28:17 -0600
From: Robert Hancock <>
Subject: Re: [patch] ohci1394: don't leave interrupts enabled during suspend/resume
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/12/6/160

Stefan Richter wrote:
> Robert Hancock wrote:
>> If free_irq and 
>> request_irq fix anything, then that indicates that the ohci1394 device 
>> is generating interrupts at some point during resume,
> ...
>> Likely the driver should be setting some register on the device to 
>> disable it from generating interrupts before suspend and it's not doing 
>> this.
> 
> 	reg_write(ohci, OHCI1394_IntMaskClear, 0xffffffff);
> 
> in ohci1394's .suspend() switches interrupts off.
Presumably it should.. but the fact remains that if free_irq helps 
anything, then the device must be generating interrupts for some reason, 
and it's really just papering over the problem. Perhaps a quirk of that 
particular chip? Something to do with the state it's in after resume?