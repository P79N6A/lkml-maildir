Date: Wed, 03 Oct 2001 21:59:39 +1000
From: Keith Owens <>
Subject: Re: Modutils 2.5 change, start running this command now
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/10/3/66

On Wed, 3 Oct 2001 09:17:02 +0100, 
Russell King <rmk@arm.linux.org.uk> wrote:
>On Wed, Oct 03, 2001 at 02:36:24PM +1000, Keith Owens wrote:
>> Either export the required symbols
>> (remember to add the .o file to export-objs in the Makefile) or add
>> EXPORT_NO_SYMBOLS; somewhere in the module (no change to Makefile).
>> 
>>  objdump -h `modprobe -l` | \
>>  awk '/file format/{file = $1}/__ksymtab/{file = ""}/\.comment/ && file != "" {print file}'
>
>Sorry, your awk script is buggy - it doesn't take note of __ksymtab
>after .comment:
Foo, I was assuming that .comment always came last.  Oh well, do it the
hard way.
objdump -h `modprobe -l` | sed -ne '/__ksym/h;$b1;\:^/:!d;:1;x;s/:.*//p;'
Gotta love those sed hieroglyphics :-)
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/