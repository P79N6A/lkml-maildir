Date: Wed, 8 Dec 2004 08:48:56 +0800
From: "Zou, Nanhai" <>
Subject: [Compatibilty patch] sigtimedwait
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/12/7/199

This patch is to fix a bug in sys32_rt_sigtimedwait on IA64, X86_64 and
PPC64.
They do a compare of siginfo.si_code when copying siginfo to userspace
compat_siginfo_t structure.
The compare is wrong because siginfo.si_code is already cast to short at
this moment.
This bug will hang ipctest program in linux-ha heartbeat package.
This patch also merges all 6 32 bit layer sys_rt_sigtimedwait in IA64,
X86_64, PPC64, Sparc64, S390 and MIPS into 1 compat_rt_sigtimedwait.
I have only tested it on X86_64 and IA64.
It looks a bit weird for 
#ifdef  __MIPSEL__ in generic code. 
But I don't have any better idea for this.
Signed-off-by: Zou Nan hai <Nanhai.zou@intel.com>
Zou Nan hai
[unhandled content-type:application/octet-stream]