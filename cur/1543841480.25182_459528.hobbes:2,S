Date: Thu, 31 Aug 2006 17:23:35 -0700
From: Badari Pulavarty <>
Subject: [PATCH] manage-jbd-its-own-slab fix
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/8/31/291

Andrew,
I missed a place where I needed to convert into kmem_cache_free() :(
Thanks,
Badari
Missed a place where I forgot to convert kfree() to kmem_cache_free()
as part of jbd-manage-its-own-slab changes.
Signed-off-by: Badari Pulavarty <pbadari@us.ibm.com>
Index: linux-2.6.18-rc5/fs/jbd/transaction.c
===================================================================
--- linux-2.6.18-rc5.orig/fs/jbd/transaction.c	2006-08-27 20:41:48.000000000 -0700
+++ linux-2.6.18-rc5/fs/jbd/transaction.c	2006-08-31 17:08:30.000000000 -0700
@@ -727,7 +727,7 @@
 
 out:
 	if (unlikely(frozen_buffer))	/* It's usually NULL */
-		kfree(frozen_buffer);
+		jbd_slab_free(frozen_buffer, bh->b_size);
 
 	JBUFFER_TRACE(jh, "exit");
 	return error;
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/