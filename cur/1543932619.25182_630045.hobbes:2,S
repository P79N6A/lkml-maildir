Date: Wed, 19 Dec 2007 15:06:22 -0800 (PST)
From: David Miller <>
Subject: Re: No dma_sync_* during pci_probe? (Sparc, post 2.6.22 regression)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/12/19/249

From: Stefan Richter <stefanr@s5r6.in-berlin.de>
Date: Wed, 19 Dec 2007 17:33:05 +0100
> drivers/firewire/fw_ohci.c needs them for dma_map_single() +
> dma_sync_single_for_device() in the pci_driver.probe(), sometime after
> it called pci_enable_device(), before finishing the probe.
I'll take a look at this and try to figure out exactly
what might be going wrong.
The dev_archdata should be fully setup at this time.