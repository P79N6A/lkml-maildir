Date: Fri, 24 May 2002 04:42:34 -0700
From: William Lee Irwin III <>
Subject: Re: [RFC][PATCH] using page aging to shrink caches (pre8-ac5)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/5/24/90

On Fri, May 24, 2002 at 07:28:45AM -0400, Ed Tomlinson wrote:
> This moves things towards having the vm do the work of freeing the
> pages. I do wonder if it worth the effort in that slab pages are a
> bit different from other pages and get treated a little differently.
> For instance, we sometimes free slab pages in refill_inactive.
> Without this the caches can grow and grow without any possibility of
> shrinking when under low loads.  By allowing freeing we avoid getting
> into a situation where slab pages cause an artificial shortage.
> Finding a good method of handling the dcache/icache and dquota caches
> has been fun...  What I do now is factor the pruning and shrinking
> into different calls.  The puning, in effect, ages entries in the
> above caches. The rate I prune is simply the rate I see entries for
> these slabs in refill_inactive_zone. This is seems fair and, in my
> testing, works better than anything else I have tried (I have have
> experimented quite a bit).  It also avoid using any magic numbers 
> and is self tuning.
This kind of cache reclamation logic is so sorely needed it's
unimaginable. I'm quite grateful for your efforts in this direction,
and hope to be able to provide some assistance in testing soon.
Cheers,
Bill
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/