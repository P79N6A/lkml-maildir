Date: Sun, 08 Jan 2006 09:36:03 +1100
From: Benjamin Herrenschmidt <>
Subject: i2c/ smbus question
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/1/7/238

Hi !
Can you confirm the difference between writing a block of data with
I2C_SMBUS_BLOCK_DATA vs I2C_SMBUS_I2C_BLOCK_DATA on the wire ? It's my
understanding that the former will actually send the lenght byte on the
wire before the data while the later won't, though they both send a
subaddress.
I'm completely rewriting the powermac i2c support (consolidating all
busses behind a low level layer that I need to use in circumstances
where the linux i2c layer isn't useable, and with a single driver in
drivers/i2c/busses/* replacing i2c-keywest.c and i2c-pmac-smu.c) and I
think I'm hitting a problem where i2c-keywest didn't implement
I2C_SMBUS_BLOCK_DATA properly (didn't send the lenght byte) and some
drivers (our sound drivers) rely on that behaviour (that's fine, I can
fix them too, I just want to make sure I understand what the semantic
should be).
I'm a bit surprised that there seem to be no wrapper for writing with
I2C_SMBUS_I2C_BLOCK_DATA, only for reading, in i2c-core.c since it
appears to me that it's the most common one, at least for all devices
I've dealt with so far (mostly sound & clock chips in addition to
sensors)...
Cheers,
Ben.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/