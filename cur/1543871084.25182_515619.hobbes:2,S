Date: Tue, 06 Mar 2007 00:32:14 +1100
From: Rusty Russell <>
Subject: Re: [patch] paravirt: VDSO page is essential
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/3/5/137

On Mon, 2007-03-05 at 15:00 +0200, Avi Kivity wrote:
> Ingo Molnar wrote:
> > * Avi Kivity <avi@qumranet.com> wrote:
> > but yes, i agree that the hypervisor should have the ability to patch 
> > the syscall instruction of both the hypervisor interface and of the VDSO 
> > interface. But this wasnt implemented like that, and the #ifdef quirk 
> > just /prevents/ a sane solution like that from ever getting done the 
> > right way.
> > 
> 
> Rusty, shouldn't this be a one-liner?  No need to involve the hypervisor 
> here; the guest can s/syscall/int 80/ on its vdso page like it patches 
> cli and its ilk.
Probably, but this is a red herring: see previous reply.  Andi was a
little overzealous w/ CONFIG_PARAVIRT & COMPAT_VDSO, that's all.
I've never thought of replacing the syscall insn.  I'll see if I can
come up with a good reason to want to 8)
Rusty.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/