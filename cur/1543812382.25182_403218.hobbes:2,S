Date: Fri, 03 Mar 2006 15:01:17 -0700
From: "Jeff V. Merkey" <>
Subject: AMD64 Opteron 250 Errors and APIC Issues with DSFS
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/3/3/204

I have ported DSFS to the AMD and IA64 processors.  I am currently 
testing with an AMD64 Opteron 250 2.4 Ghz SMP Processor
with DSFS at 250 megabyte per second through from dual 1 GB Intel 
Adapters.  I am seeing excellent application performance
but sluggish I/O performance. 
Using the 2.4.21 kernels with the AMD was disappointing with the system 
locking up and barfing all over the place.  Since I have
update to unit to 2.4.6-22, the performance has increased dramatically.  
This board is employing an 82489DX emulation of the
Intel IOAPIC architecture, but it is reporting an abnormally high level 
of interrupts.  The I/O scaling is vastly improved on 2.6.X
kernels over 2.4.X, however, the performance is still 15% less overall 
than with equivalent Xeon and 7501/7505 based chipsets.
I am also seeing this message on the screen from the do_softirq handler:
Your time source seems to be instable or some driver is hogging 
interrupts.    rip __do_softirq+0x04d/0xd0.
Are there any other tuning parms for the AMD64 to increase I/O scaling?  
I can rewrite the APIC code underneath and redirect the
spurious interrupt handler and EOI sequences to eliminate the excessive 
interrupts, but is there information on better tuning for these
systems using IOAPIC emulation?
Jeff
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/