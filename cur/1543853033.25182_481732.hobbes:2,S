Date: Mon, 13 Nov 2006 11:22:19 +0000
From: David Howells <>
Subject: Re: [Bugme-new] [Bug 7495] New: Kernel periodically hangs.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/11/13/68

Neil Brown <neilb@suse.de> wrote:
> it would appear that in:
> 	if (inode->i_sb && inode->i_sb->s_op->clear_inode)
> 		inode->i_sb->s_op->clear_inode(inode);
> 
> inode->i_sb->s_op is NULL.
Agreed.
> This tends to suggest that generic_shutdown_super isn't releasing all inodes
> before the superblock gets destroyed.
> 
> I cannot see how this could be happening
Perhaps sb->s_root == NULL?  That would permit most of generic_shutdown_super()
to be bypassed, including the check that all the inodes have been consumed.
David
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/