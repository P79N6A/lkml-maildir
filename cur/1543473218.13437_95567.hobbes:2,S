Date: Mon, 28 Dec 1998 10:07:07 -0600
From: Michael Elizabeth Chastain <>
Subject: Re: make xconfig broken 2.1.133-5
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1998/12/28/71

Hi Peter, Riley, Linus, and everybody else:
Here's a patch:
    
ftp://ftp.shout.net/pub/users/mec/experimental/pci-config.diff
I have also attached the diff because it's so short.
This is against 2.1.133-5.  I can see the first xconfig screen with
this, but I can't go further than that, because I have an 800x600
X configuration.  I tried all three choices with both menuconfig and
oldconfig and checked the .config file.  It Works For Me (TM).
Peter, please test this and let me know if it works for you.
I am working on some new configuration technology that will fix these
problems.  Write me if you want a URL.
Michael Elizabeth Chastain
<mailto:mec@shout.net>
"love without fear"
---
diff -u -r -N linux-2.1.132-5/arch/i386/config.in linux/arch/i386/config.in
--- linux-2.1.132-5/arch/i386/config.in	Mon Dec 28 09:27:58 1998
+++ linux/arch/i386/config.in	Mon Dec 28 09:39:51 1998
@@ -36,15 +36,14 @@
 bool 'Networking support' CONFIG_NET
 bool 'PCI support' CONFIG_PCI
 if [ "$CONFIG_PCI" = "y" ]; then
-  unset CONFIG_PCI_BIOS CONFIG_PCI_DIRECT
   choice 'PCI access mode' \
 	"BIOS		CONFIG_PCI_GOBIOS	\
 	 Direct		CONFIG_PCI_GODIRECT	\
 	 Any		CONFIG_PCI_GOANY"	Any
-  if [ -n "$CONFIG_PCI_GOBIOS" -o -n "$CONFIG_PCI_GOANY" ]; then
+  if [ "$CONFIG_PCI_GOBIOS" = "y" -o "$CONFIG_PCI_GOANY" = "y" ]; then
     define_bool CONFIG_PCI_BIOS y
   fi
-  if [ -n "$CONFIG_PCI_GODIRECT" -o -n "$CONFIG_PCI_GOANY" ]; then
+  if [ "$CONFIG_PCI_GODIRECT" = "y" -o "$CONFIG_PCI_GOANY" = "y" ]; then
     define_bool CONFIG_PCI_DIRECT y
   fi
   bool '   PCI quirks' CONFIG_PCI_QUIRKS
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/