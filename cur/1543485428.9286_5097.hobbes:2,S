Date: Fri, 12 Feb 1999 00:15:27 -0500 (EST)
From: David C Niemi <>
Subject: Re: Weird tcp performance differences with 2.0 and 2.2 kernels
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/2/12/2

Users are reporting odd and unpleasant FTP hangs on ftp.tux.org as well,
which is now running 2.2.1 with the latest fixed wu-ftpd.  These problems
did not occur with the 2.0.36 kernel but did with 2.2pre6; I'm not quite
sure whether they occured in the 2.1.126-8 era because the UP flu made
things unusable back then.
The hangs do not ALWAYS happen, they are more likely on more remote
connections and on connections via firewalls (in the latter case the
connections work fine for a similar FTP server running 2.0.36 and used to
work fine for ftp.tux.org prior to 2.2.x.
Anyone else running a large FTP server on 2.2.x yet?  I'd like to hear
about what your users are saying about you.
DCN
On 10 Feb 1999, Harvey J. Stein wrote:
...
> Ok, so lets say for the sake of argument a packet got nuked & so my
> machine retransmitted at about 1 packet/second until it finally got
> the appropriate ACKs.
> 
> The problem is that when it speeded up again it never completely
> filled the pipe.  It doesn't look like the congestion window grew as
> much as it should have.  This was for uploading 3 files of sizes 300k
> - 900k, upload times of 2-5 minutes per file.  Once it got the
> appropriate ACKs & started speeding up again it should have opened the
> congestion window & filled the pipe, but this doesn't seem to have
> happened.
> 
> The other weird thing is that it was very consistent for each file
> upload - starts off fast, stalls down to ~1 packet/second & then
> picked up again, but never really up to full speed.  Why would each
> upload suddenly stall after about the same amount of time?
> 
> BTW, I just did a couple more tests.  It pretty consistently flies for
> ~20 seconds, then stalls @ 2 packets/second for ~20 seconds & then
> picks up again, but never reaching the initial speed.
> 
> I still don't see why a) it would consistently stall after 20 seconds
> & b) it wouldn't ever recover back to full speed.
> 
> -- 
> Harvey J. Stein
> BFM Financial Research
> hjstein@bfr.co.il
> 
> -
> To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
> the body of a message to majordomo@vger.rutgers.edu
> Please read the FAQ at 
http://www.tux.org/lkml/
> 
---  David C Niemi ---niemi at tux.org---  Reston, Virginia, USA  ---
  But only the man who cares about something in itself, who loves
  it and does it *con amore*, will do it in all seriousness.  The
  highest achievement has always been that of such men, and not of
  the hacks who serve for pay.  -- Arthur Schopenhauer
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/