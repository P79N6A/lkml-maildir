Date: Mon, 11 Sep 2000 16:04:06 -0700
From: David Ford <>
Subject: [BUG] threaded processes get stuck in  rt_sigsuspend/fillonedir/exit_notify
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/9/11/153

On the recent test kernels, processes get stuck.  A kill -9 results in
zombies.
# cat /tmp/ps.out
  PID USER     STAT WCHAN  COMMAND
    1 root     S    fillon init [5]
    2 root     SW   acpi_i [kapmd]
    3 root     SW   swap_o [kswapd]
    4 root     SW   brw_pa [kflushd]
    5 root     SW   block_ [kupdate]
    6 root     SW   down   [i2oevtd]
    7 root     SW   tcp_rc [i2oblock]
    8 root     SW   tcp_da [khubd]
   10 root     SW   devfsd [khttpd manager]
   11 root     SW   indire [kreiserfsd]
   17 root     S    try_mo devfsd /dev
   23 root     S    timer_ /sbin/noflushd -n 5 /dev/hda
   29 root     S    fillon syslogd
   31 root     S    regist klogd -c 3 -k /boot/System.map-2.4.0-test8
   52 root     S    timer_ crond -l10
   85 root     S    do_sel nscd
   86 root     S    do_sel nscd
   87 root     S    do_sel nscd
   88 root     S    do_sel nscd
   89 root     S    do_sel nscd
   90 root     S    do_sel nscd
   91 root     S    do_sel nscd
   93 root     S    fillon apmd -W -P /etc/apmd/apmd_proxy
  101 bin      S    fillon portmap
  104 root     S    fillon inetd
  105 root     S    fillon sendmail: [Blue]: accepting connections
  108 root     S    fillon sshd
  112 root     S    fillon /usr/local/apache/bin/httpd
  114 postgres S    fillon /usr/local/pgsql/bin/postmaster -D
/usr/local/pgsql/d
  116 junkbust S    acpi_c ./junkbuster junkbstr.ini
  118 root     S    incr_c /sbin/agetty 38400 vc/6 linux
  119 root     S    exit   /usr/local/bin/gdm -nodaemon
  120 httpd    S    acpi_c /usr/local/apache/bin/httpd
  122 root     S    fillon /usr/X11R6/bin/X -auth
/usr/local/var/gdm/:0.Xauth :0
  172 david    S    exit   /bin/bash
/usr/local/etc/gdm/Sessions//Enlightenment
  173 david    S    exit   /bin/sh /usr/local/bin/run-cafire
/usr/local/etc/inpu
  174 david    S    fillon /usr/local/bin/xscreensaver -no-splash
  175 david    S    fillon /usr/local/enlightenment/bin/enlightenment
  177 david    SN   ipc    /usr/local/bin/cafire -back
  179 david    S    fillon esd -terminate -nobeeps -as 2 -spawnpid 175
  181 david    S    do_sel gtkapm
  183 david    S    fillon rxvt
  184 david    S    exit   -bash
  202 root     S    exit   -bash
  327 david    S    fillon rxvt
  328 david    S    exit   -bash
  342 david    S    fillon ssh shiftq.linux.com
 1029 david    S    fillon rxvt
 1030 david    S    exit   -bash
 1060 david    S    fillon netscape
 1061 david    S    fillon (dns helper)
 1063 root     S    incr_c -bash
 1097 root     Z    exit_n [host <defunct>]
 1098 root     Z    exit_n [host <defunct>]
 1110 root     Z    exit_n [host <defunct>]
 1111 root     Z    exit_n [host <defunct>]
 1115 root     Z    exit_n [nslookup <defunct>]
 1116 root     Z    exit_n [nslookup <defunct>]
 1117 root     Z    exit_n [nslookup <defunct>]
 1118 root     Z    exit_n [nslookup <defunct>]
 1124 root     Z    exit_n [nslookup <defunct>]
 1125 root     Z    exit_n [nslookup <defunct>]
 1126 root     Z    exit_n [nslookup <defunct>]
 1170 root     S    fillon host -h
 1175 root     S    rt_sig host -W 2 blue-labs.org
 1177 root     S    fillon host -W 2 blue-labs.org
 1182 root     S    rt_sig host -T -W 2 blue-labs.org
 1184 root     S    fillon host -T -W 2 blue-labs.org
 1190 root     S    rt_sig host -v -T -W 2 blue-labs.org
 1192 root     S    fillon host -v -T -W 2 blue-labs.org
 1197 root     S    rt_sig host -v -T -W 2 afcu.net
 1199 root     S    fillon host -v -T -W 2 afcu.net
 1168 root     S    rt_sig host -h
 1317 root     R    -      ps -ax -o pid,user,stat,wchan,args
[...]
 1097 root     Z    [host <defunct>] exit_notify
 1098 root     Z    [host <defunct>] exit_notify
 1110 root     Z    [host <defunct>] exit_notify
 1111 root     Z    [host <defunct>] exit_notify
 1115 root     Z    [nslookup <defun exit_notify
 1116 root     Z    [nslookup <defun exit_notify
 1117 root     Z    [nslookup <defun exit_notify
 1118 root     Z    [nslookup <defun exit_notify
 1124 root     Z    [nslookup <defun exit_notify
 1125 root     Z    [nslookup <defun exit_notify
 1126 root     Z    [nslookup <defun exit_notify
 1170 root     S    host -h          fillonedir
 1175 root     S    host -W 2 blue-l rt_sigsuspend
 1177 root     S    host -W 2 blue-l fillonedir
 1182 root     S    host -T -W 2 blu rt_sigsuspend
 1184 root     S    host -T -W 2 blu fillonedir
 1190 root     S    host -v -T -W 2  rt_sigsuspend
 1192 root     S    host -v -T -W 2  fillonedir
 1197 root     S    host -v -T -W 2  rt_sigsuspend
 1199 root     S    host -v -T -W 2  fillonedir
 1168 root     S    host -h          rt_sigsuspend
 1322 root     R    ps -ax -o pid,us -
Comments?
-d
--
"The difference between 'involvement' and 'commitment' is like an
eggs-and-ham breakfast: the chicken was 'involved' - the pig was
'committed'."
begin:vcard 
n:Ford;David
x-mozilla-html:TRUE
org:<img src="
http://www.kalifornia.com/images/paradise.jpg">
adr:;;;;;;
version:2.1
email;internet:david@kalifornia.com
title:Blue Labs Developer
x-mozilla-cpt:;28256
fn:David Ford
end:vcard