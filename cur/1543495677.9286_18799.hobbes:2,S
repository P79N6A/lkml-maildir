Date: Thu, 13 May 1999 23:29:17 -0400
From: Horst von Brand <>
Subject: Some patches still missing in 2.3.1pre4
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/5/14/93

The following weren't fixed:
--- ./fs/dquot.c.dist-2.3.1pre4	Thu May 13 23:08:00 1999
+++ ./fs/dquot.c	Thu May 13 23:08:34 1999
@@ -195,7 +195,7 @@
 
 static void __wait_on_dquot(struct dquot *dquot)
 {
-	struct wait_queue wait = { current, NULL };
+	DECLARE_WAITQUEUE(wait, current);
 
 	add_wait_queue(&dquot->dq_wait, &wait);
 repeat:
--- ./drivers/block/ide.c.dist-2.3.1pre4	Thu May 13 23:07:54 1999
+++ ./drivers/block/ide.c	Thu May 13 23:08:34 1999
@@ -211,6 +211,7 @@
 		drive->media			= ide_disk;
 		drive->select.all		= (unit<<4)|0xa0;
 		drive->hwif			= hwif;
+		init_waitqueue_head(&drive->wqueue);
 		drive->ctl			= 0x08;
 		drive->ready_stat		= READY_STAT;
 		drive->bad_wstat		= BAD_W_STAT;
--- ./drivers/char/serial.c.dist-2.3.1pre4	Thu May 13 23:07:57 1999
+++ ./drivers/char/serial.c	Thu May 13 23:08:34 1999
@@ -2571,6 +2571,9 @@
 		return -ENOMEM;
 	}
 	memset(info, 0, sizeof(struct async_struct));
+	init_waitqueue_head(&info->open_wait);
+	init_waitqueue_head(&info->close_wait);
+	init_waitqueue_head(&info->delta_msr_wait);
 	info->magic = SERIAL_MAGIC;
 	info->port = sstate->port;
 	info->flags = sstate->flags;
-- 
Horst von Brand                             vonbrand@sleipnir.valparaiso.cl
Casilla 9G, Vi√±a del Mar, Chile                               +56 32 672616
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/