Date: Tue, 04 Dec 2001 00:22:55 +0200
From: Jari Ruusu <>
Subject: Re: RFC(ry): breaking loop.c's IV calculation
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/12/3/91

Herbert Valerio Riedel wrote:
> well, I've put one patch together (it still needs (constructive)
> auditing though! jari?) here it is (it's against 2.4.16's loop.[ch])
I have attached my version of loop.c bug fixes. These are extracted from
loop-AES and are well tested.
- IV computed in 512 byte units.
- Make device backed loop work with swap by pre-allocating pages.
- External encryption module locking bug fixed (from Ingo Rohloff).
- Get rid of the loop_get_bs() crap.
- grab_cache_page() return value handled properly, avoids Oops.
- No more illegal messing with BH_Dirty flag.
- No more illegal sleeping in generic_make_request().
- Loops can be set-up properly when root partition is still mounted ro.
- Default soft block size is set properly for file backed loops.
- kmalloc() error case handled properly.
Regards,
Jari Ruusu <jari.ruusu@pp.inet.fi>[unhandled content-type:application/x-gzip]