Date: Tue, 2 Oct 2007 10:05:57 -0700
From: Randy Dunlap <>
Subject: Re: [patch 1/3]  Trace code and documentation
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/10/2/244

On Tue, 02 Oct 2007 09:33:19 -0700 David J. Wilder wrote:
> Trace - Provides tracing primitives
> 
> Signed-off-by: Tom Zanussi <zanussi@us.ibm.com>
> Signed-off-by: Martin Hunt <hunt@redhat.com>
> Signed-off-by: David Wilder <dwilder@us.ibm.com>
> ---
>  Documentation/trace.txt |  160 ++++++++++++++
>  include/linux/trace.h   |   99 +++++++++
>  lib/Kconfig             |    9 +
>  lib/Makefile            |    2 +
>  lib/trace.c             |  563 +++++++++++++++++++++++++++++++++++++++++++++++
>  5 files changed, 833 insertions(+), 0 deletions(-)
> 
> diff --git a/Documentation/trace.txt b/Documentation/trace.txt
> new file mode 100644
> index 0000000..195132d
> --- /dev/null
> +++ b/Documentation/trace.txt
> +Trace User Interface
> +===================
> +When a trace channel is created and started, the following
> +directories and files are created in the root of the mounted debugfs.
> +
> +/debug (root of the debugfs)
> +	/<trace-root-dir>
> +		/<trace-name>
> +			trace[0...N-1]     Per-CPU trace data, one
> +					   file per CPU.
> +
> +			state		   Start or stop tracing by
> +					   by writing the strings
> +					   "start" or "stop" to this
> +					   file. Read the file to get the
> +					   current state.
> +
> +			dropped		   The number of records dropped
> +					   due to a full-buffer condition,
> +					   for non-TRACE_FLIGHT_CHANNELs
> +					   only.
> +
> +			rewind		   Trigger a rewind by writing
> +					   to this file.  i.e. start
> +					   next read at the beginning
> +					   again. Only available for
> +					   TRACE_FLIGHT_CHANNELS.
> +
> +
> +			nr_sub		   Number of sub-buffers
> +					   in the channel.
> +
> +			sub_size	   Size of sub-buffers in
> +					   the channnel.
> +
> +Trace data is gathered from the trace[0...N] files using one of the
                                   trace[0..N-1]
> +available interfaces provided by relay.
> +
> +When using the read(2) interface, as data is read it is marked as
> +consumed by the relay subsystem.  Therefore, subsequent reads will
> +only return unconsumed data.
---
~Randy
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/