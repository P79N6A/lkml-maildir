Date: Thu, 29 Sep 2005 00:37:34 +0100
From: Al Viro <>
Subject: [PATCH] saa6588 __user annotations
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/9/28/305

Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
----
diff -urN RC14-rc2-git6-cyblafb/drivers/media/video/rds.h RC14-rc2-git6-saa6588/drivers/media/video/rds.h
--- RC14-rc2-git6-cyblafb/drivers/media/video/rds.h	2005-09-10 15:41:34.000000000 -0400
+++ RC14-rc2-git6-saa6588/drivers/media/video/rds.h	2005-09-28 13:02:19.000000000 -0400
@@ -31,7 +31,7 @@
 struct rds_command {
 	unsigned int  block_count;
 	int           result;
-	unsigned char *buffer;
+	unsigned char __user *buffer;
 	struct file   *instance;
 	poll_table    *event_list;
 };
diff -urN RC14-rc2-git6-cyblafb/drivers/media/video/saa6588.c RC14-rc2-git6-saa6588/drivers/media/video/saa6588.c
--- RC14-rc2-git6-cyblafb/drivers/media/video/saa6588.c	2005-09-10 15:41:34.000000000 -0400
+++ RC14-rc2-git6-saa6588/drivers/media/video/saa6588.c	2005-09-28 13:02:19.000000000 -0400
@@ -157,7 +157,7 @@
 
 /* ---------------------------------------------------------------------- */
 
-static int block_to_user_buf(struct saa6588 *s, unsigned char *user_buf)
+static int block_to_user_buf(struct saa6588 *s, unsigned char __user *user_buf)
 {
 	int i;
 
@@ -191,7 +191,7 @@
 {
 	unsigned long flags;
 
-	unsigned char *buf_ptr = a->buffer;	/* This is a user space buffer! */
+	unsigned char __user *buf_ptr = a->buffer;
 	unsigned int i;
 	unsigned int rd_blocks;
 
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/