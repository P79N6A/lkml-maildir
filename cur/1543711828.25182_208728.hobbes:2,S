Date: Tue, 23 Mar 2004 22:24:02 +1000
From: Ross Dickson <>
Subject: Re: PROBLEM: APIC on Chaintech ZNF3-150 Motherboard
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/3/23/66

> On Tue, 23 Mar 2004 10:32:45 +0000, Doug Winter wrote: 
> >I've just put a new computer together with an AMD Athlon 64 3200+ and a 
> >Chaintech ZNF3-150 motherboard. This has the Nvidia NForce 3 chipset. 
> > 
> >Booting 2.6.4, from the debian kernel-image-2.6.4-1-k7 package, I get 
> >reproducible errors from the onboard BCM5788 NIC and a Realtek 8139 NIC 
> >when under load. 
> > 
> >When the disk is under load, I get reproducible DMA errors from any IDE 
> >disk that is under load. 
> > 
> >When I boot with "noapic", these problems go away. 
> NVidia chipsets are known to have problems when used with 
> local APIC or I/O-APIC. We don't know exactly what happens, 
> but it looks like a hardware or BIOS problem. The only 
> known cure is to try combinations of: 
> upgrade BIOS 
> pci=noacpi 
> acpi=off 
> noapic 
> nolapic 
>FWIW, VIA's K8T800 chipset seems to work very well. 
Perhaps I should ask firstly how your timer interrupts are routed?
io-apic edge, local apic, or xtpic - does it still have one of these?
And you could check and see whether this patch has made it through to your 
current kernel (I just remember the posting - I don't have an nforce3).
http://linux.derkeiler.com/Mailing-Lists/Kernel/2004-02/1648.html
http://linux.derkeiler.com/Mailing-Lists/Kernel/2004-02/1604.html
I don't know about idle states for K8 and nforce3 but you could also try my C1
idle halt patch (for K7 and Nforce2 - also SiS740). It may have no effect on
nforce3 but you might get lucky (don't forget the kernel arg or it won't work).
http://linux.derkeiler.com/Mailing-Lists/Kernel/2004-02/6520.html
The io-apic patch there may also help route the timer interrupts via IO-apic
assuming nvidia followed nforce2 methods.
Please CC me with your responses.
Regards
Ross.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/