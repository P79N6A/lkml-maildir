Date: Wed, 06 Dec 2006 22:07:30 +0900
From: Kenji Kaneshige <>
Subject: [BUG][PATCH] pcieport-driver: remove invalid warning message
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/12/6/102

Hi,
I got the following warning messages on some PCI Express ports.
    pcie_portdrv_probe->Dev[1263:10cf] has invalid IRQ. Check vendor BIOS
I think this message is improper because those PCI Express ports don't
use an interrupt pin. This message should not be displayed for devices
which don't use an interrupt pin.
Thanks,
Kenji Kaneshige
The following warning message should not be displayed for devices
which don't use an interrupt pin.
    pcie_portdrv_probe->Dev[XXXX:XXXX] has invalid IRQ. Check vendor BIOS
Signed-off-by: Kenji Kaneshige <kaneshige.kenji@jp.fujitsu.com>
---
 drivers/pci/pcie/portdrv_pci.c |    2 +-
 1 files changed, 1 insertion(+), 1 deletion(-)
Index: linux-2.6.19/drivers/pci/pcie/portdrv_pci.c
===================================================================
--- linux-2.6.19.orig/drivers/pci/pcie/portdrv_pci.c	2006-12-06 21:31:32.000000000 +0900
+++ linux-2.6.19/drivers/pci/pcie/portdrv_pci.c	2006-12-06 21:31:38.000000000 +0900
@@ -90,7 +90,7 @@
 		return -ENODEV;
 	
 	pci_set_master(dev);
-        if (!dev->irq) {
+        if (!dev->irq && dev->pin) {
 		printk(KERN_WARNING 
 		"%s->Dev[%04x:%04x] has invalid IRQ. Check vendor BIOS\n", 
 		__FUNCTION__, dev->device, dev->vendor);
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/