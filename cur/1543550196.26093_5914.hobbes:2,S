Date: Sat, 30 Sep 2000 09:29:50 +1100 (EST)
From: Neil Brown <>
Subject: Re: Linux 2.4.0-test8 and swap/journaling fs on raid
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/9/29/98

On Friday September 29, riel@conectiva.com.br wrote:
> On Fri, 29 Sep 2000, Pavel Machek wrote:
> 
> > Are you sure there are no deadlock-when-low-on-memory bugs
> > hiding somewhere? swap over nbd also *seems* to work.
Raid preallocates all the memory that it needs.
When raid1 runs out of pre-allocated memory, it will try to see if
kmalloc(GFP_BUFFER) has any to spare and will use it transiently, but
it copes quite well if kmalloc doesn't provide any.
I think this is adequate to fend of deadlock-when-low-on-memory
problems.
But surely, deadlock-when-low-on-memory problems will hurt normal
filesystem activity just as much as swap activity -- is that right?
> 
> Good that you mention this. I should look into this some
> day, preferably in the very near future.
> 
> (added to my VM TODO list)
Always happy to have others do code reviews!
NeilBrown
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/