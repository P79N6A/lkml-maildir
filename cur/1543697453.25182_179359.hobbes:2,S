Date: Fri, 21 Nov 2003 14:45:33 -0800 (PST)
From: Linus Torvalds <>
Subject: Re: ionice kills vanilla 2.6.0-test9 was [Re: [PATCH] cfq + io priorities (fwd)]
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/11/21/111

On Fri, 21 Nov 2003, Pavel Machek wrote:
> 
> Well, did that, run it on vanilla kernel, and it kills the
> machine. Can someone reproduce it?
Ok, looks like a binutils bug to me.
"nr_syscalls" is mis-assembled at least on x86. The code says
	nr_syscalls=(.-sys_call_table)/4
but if you actually look at the disassembly of entry.S, you'll notice that 
the constant used in the object file is the one without the division.
Just do "gdb vmlinux" and do "disassemble system_call" to see this. It 
says something like
	cmp    $0x448,%eax
	jae    syscall_badsys
and it _should_ use just 274 (0x112 rather than 0x448) on x86.
Now, I wonder if this has ever worked, of which binutils version broke 
it..
		Linus
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/