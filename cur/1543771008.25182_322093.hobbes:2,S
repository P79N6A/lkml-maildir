Date: Wed, 1 Jun 2005 00:12:58 +0200
From: Harald Welte <>
Subject: Re: [linux-usb-devel] Re: [BUG] oops while completing async USB via usbdevio
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/5/31/233

On Tue, May 31, 2005 at 11:53:24AM -0700, David Brownell wrote:
> I'm still hoping that one of the folk who want make an interesting and
> useful contribution to Linux will take the hint.  It goes slowly. :)
I've pondered about three times whether to start or not.  I'd rather
not, since I'm already having problems keeping up with all my other
projects :(
> > meanwhile, the current usbfs aio handling is the only way how to deal
> > with delivery of interrupt pipe URB's to userspace drivers.
> 
> Other than tying up the file descriptor with a blocking read, that is.
you're probably using that same file descriptor for reading/writing
from/to bulk endpoints at the same time.  I don't see how a 'blocking
read' would help.
> > Wouldn't it help to associate the URB with the file (instaed of the
> > task), and then send the signal to any task that still has opened the
> > file?  I'm willing to hack up a patch, if this is considered a sane fix.
> 
> Sounds reasonable, except that not all such tasks will want the signal.
> Though I guess the infrastructure to filter the signal out already exists,
> so the main missing piece is that urb-to-file binding.
Ok, I'll get something coded shortly.
-- 
- Harald Welte <laforge@gnumonks.org>          	        
http://gnumonks.org/
============================================================================
"Privacy in residential applications is a desirable marketing option."
                                                  (ETSI EN 300 175-7 Ch. A6)
[unhandled content-type:application/pgp-signature]