Date: Mon, 22 Feb 1999 20:19:09 -0500
From: "Daniel J. Frasnelli" <>
Subject: [patch] 2.2.2pre5-axp-quickfix (Re: troubles on Alpha)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/2/22/165

Michal,
> It may be obvious for "people in the know" but just for the record.
> 2.2.2pre5, and now also 2.2.1-ac7 which synchronised with it, does
> not compile on Alpha and most likely also on any other architecture
> but Intel.  The reason for that is __down_trylock and related stuff
> which, at least at this moment, is Intel specific.  I am afraid that
> I do not know how to fix that (without backing out these changes,
> of course).
	This is a known problem with pre5.  Several portions of the code
changed to include features provided by include/asm-i386/semaphore*.h.
So yes, you are correct - __down_trylock and company are Intel-specific
at the moment.  
	I created a very simple "retrofix" patch which allows pre5 to
build on the Alpha platform.  Copies were sent to axp-list, a couple
key developers, and this linux-kernel list.  For whatever reason, 
message I send to linux-kernel never show up on the list. 
	The patch has been tested on my EV56 (21164a) with great success
so far (running pre5 for 1 day, 1h10m).  It is not a comprehensive fix
obviously, but it will allow developers to run pre5 while working on 
the code.  Please let me know of other code you find which this patch does
not address. 
Best regards,
Daniel
-- 
[unhandled content-type:application/octet-stream]