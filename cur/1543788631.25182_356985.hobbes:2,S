Date: Sun, 09 Oct 2005 14:06:42 +0900
From: Junichi Uekawa <>
Subject: [PATCH] UML TT-mode-only compile fix.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/10/9/3

Hi,
In today's linus's git tree, uml doesn't compile when it's configured for 
only TT-mode.
This regression caused by:
	8923648c125421b0fcb240cde607e2748d099ab8
	[PATCH] uml: clear SKAS0/3 flags when running in TT mode
Signed-off-by: Junichi Uekawa <dancer@debian.org>
diff --git a/arch/um/kernel/um_arch.c b/arch/um/kernel/um_arch.c
--- a/arch/um/kernel/um_arch.c
+++ b/arch/um/kernel/um_arch.c
@@ -334,8 +334,10 @@ int linux_main(int argc, char **argv)
 		add_arg(DEFAULT_COMMAND_LINE);
 
 	os_early_checks();
+#ifdef CONFIG_MODE_SKAS
 	if (force_tt)
 		clear_can_do_skas();
+#endif
 	mode_tt = force_tt ? 1 : !can_do_skas();
 #ifndef CONFIG_MODE_TT
 	if (mode_tt) {
[unhandled content-type:application/pgp-signature]