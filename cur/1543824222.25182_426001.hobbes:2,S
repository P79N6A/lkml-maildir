Date: Mon, 22 May 2006 10:55:16 -0400
From: Giridhar Pemmasani <>
Subject: Re: __vmalloc with GFP_ATOMIC causes 'sleeping from invalid context'
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/5/22/142

On Mon, 22 May 2006 17:34:32 +1000, Nick Piggin <nickpiggin@yahoo.com.au> said:
  >> > Oh, and __get_vm_area_node{_mask} should
  >> BUG_ON(in_interrupt());
  >> 
  >> With the patch I sent earlier, this may not be required: Since
  >> __get_vm_area_node calls kmalloc, it should be taken care of in
  >> kmalloc and friends. Currently cache_alloc_debugcheck_before
  >> doesn't check for in_interrupt(); perhaps that is the right place
  >> to add
   > vmlist_lock is not irq safe. If you call it from interrupt, you
   > can deadlock.
Aha. I will add BUG_ON(in_interrupt()) to __get_vm_area_node in the
next round (if there is interest in the patch).
Thanks,
Giri
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/