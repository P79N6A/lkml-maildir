Date: Fri, 03 Sep 2004 17:13:57 +0100
From: Andy Whitcroft <>
Subject: [PATCH] tidy AMD 768MPX fix
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/9/3/228

Convert the AMD 768MPX errata #56 fix to use PAGE_SIZE instead of using
4096 in line with other declarations in this file.  Also take the
oppotunity to match indentation.
Revision: $Rev: 612 $
Signed-off-by: Andy Whitcroft <apw@shadowen.org>
diffstat 020-tidy-AMD-768MPX-fix
---
 setup.c |   10 ++++++----
 1 files changed, 6 insertions(+), 4 deletions(-)
diff -X /home/apw/brief/lib/vdiff.excl -rupN reference/arch/i386/kernel/setup.c current/arch/i386/kernel/setup.c
--- reference/arch/i386/kernel/setup.c	2004-09-02 18:05:57.000000000 +0100
+++ current/arch/i386/kernel/setup.c	2004-09-03 16:59:45.000000000 +0100
@@ -1052,12 +1052,14 @@ static unsigned long __init setup_memory
 	/* reserve EBDA region, it's a 4K region */
 	reserve_ebda_region();
 
-    /* could be an AMD 768MPX chipset. Reserve a page  before VGA to prevent
-       PCI prefetch into it (errata #56). Usually the page is reserved anyways,
-       unless you have no PS/2 mouse plugged in. */
+	/*
+	 * could be an AMD 768MPX chipset. Reserve a page before VGA to
+	 * prevent PCI prefetch into it (errata #56). Usually the page is
+	 * reserved anyways, unless you have no PS/2 mouse plugged in.
+	 */
 	if (boot_cpu_data.x86_vendor == X86_VENDOR_AMD &&
 	    boot_cpu_data.x86 == 6)
-	     reserve_bootmem(0xa0000 - 4096, 4096);
+		reserve_bootmem(0xa0000 - PAGE_SIZE, PAGE_SIZE);
 
 #ifdef CONFIG_SMP
 	/*
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/