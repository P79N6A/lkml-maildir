Date: Wed, 22 Jun 2005 10:24:50 +0200
From: Ingo Molnar <>
Subject: Re: [patch] Real-Time Preemption, -RT-2.6.12-rc6-V0.7.48-00
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/6/22/97

* William Weston <weston@sysex.net> wrote:
> Attached are two typical traces and the .config from my Xeon/HT box, 
> currently running -50-06 with a normal desktop workload (X, wmaker, 
> ten dockapps, several xterms, and firefox).
the second trace seems to be a cross-CPU wakeup bug. It's not completely 
clear from the trace what happened - but we measured the latency of a 
task (wmcube-3191), where the wakeup happened on CPU#0 and wmcube-3191 
was queued to CPU#1 which was idle at that time. The bug is that it 
wasnt until timestamp 306us that this actually happened - and CPU#1 was 
just idling around in default_idle() for no good reason. CPU#1 should 
have run wmcube-3191 at around timestamp 13us.
I've uploaded the -50-07 kernel which will put some more info into the 
traces - could you try to repeat the measurement and get similar 
latencies? As i guess you already found out that you can always reset 
the measurement to get a new set of traces, via:
	echo 0 > /proc/sys/kernel/preempt_max_latency
(it's not a problem if you send me multiple latency traces, i'll figure 
out which is the most useful one.)
	Ingo
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/