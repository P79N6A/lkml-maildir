Date: Fri, 3 Oct 2003 12:02:45 +0400
From:  pazke@donpac ...
Subject: [PATCH] visws: fix 16 bit framebuffer mode
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/10/3/22

Hi all,
attached patch (from Florian Boor) allows X to work on visws 
in 16 bit framebuffer mode.
Please apply.
-- 
Andrey Panin		| Linux and UNIX system administrator
pazke@donpac.ru		| PGP key: wwwkeys.pgp.net
diff -urN -X /usr/share/dontdiff linux-2.6.0-test6.vanilla/drivers/video/sgivwfb.c linux-2.6.0-test6/drivers/video/sgivwfb.c
--- linux-2.6.0-test6.vanilla/drivers/video/sgivwfb.c	2003-08-09 08:36:42.000000000 +0400
+++ linux-2.6.0-test6/drivers/video/sgivwfb.c	2003-10-02 01:41:30.000000000 +0400
@@ -319,14 +319,14 @@
 		var->transp.length = 0;
 		break;
 	case 16:		/* RGBA 5551 */
-		var->red.offset = 11;
+		var->red.offset = 10;
 		var->red.length = 5;
-		var->green.offset = 6;
+		var->green.offset = 5;
 		var->green.length = 5;
-		var->blue.offset = 1;
+		var->blue.offset = 0;
 		var->blue.length = 5;
-		var->transp.offset = 0;
-		var->transp.length = 0;
+		var->transp.offset = 15;
+		var->transp.length = 1;
 		break;
 	case 32:		/* RGB 8888 */
 		var->red.offset = 0;
@@ -509,7 +509,7 @@
 		SET_DBE_FIELD(WID, TYP, outputVal, DBE_CMODE_I8);
 		break;
 	case 2:
-		SET_DBE_FIELD(WID, TYP, outputVal, DBE_CMODE_RGBA5);
+		SET_DBE_FIELD(WID, TYP, outputVal, DBE_CMODE_ARGB5);
 		break;
 	case 4:
 		SET_DBE_FIELD(WID, TYP, outputVal, DBE_CMODE_RGB8);[unhandled content-type:application/pgp-signature]