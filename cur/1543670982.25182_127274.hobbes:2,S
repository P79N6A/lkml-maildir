Date: 23 Apr 2003 13:32:06 -0700
From:  pixi@burble ...
Subject: Re: [PATCH]  Undefined symbol sync_dquots_dev() in quota.c
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/4/23/253

Jeff Garzik <jgarzik@pobox.com> writes:
: On Wed, Apr 23, 2003 at 11:59:16AM -0400, Stephane Ouellette wrote:
: >   the file fs/dquot.c is compiled only if CONFIG_QUOTA is set.  That 
: > would imply modifying the Makefile and #ifdeffing most of the code 
: > inside dquot.c.
: 
: So?  ;-)
: 
: Your patch modified fs/quota.c, which is compiled when CONFIG_QUOTACTL is
: set, which in turn is set for CONFIG_QUOTA || CONFIG_XFS_QUOTA.
: 
: If you are adding CONFIG_QUOTA ifdefs to fs/quota.c, it is clear a
: non-ifdef solution can be achieved.
yep.  attached is the patch i made when i compiled the kernel, but
forgot to send on:
--- include/linux/quotaops.h.orig	2003-04-15 20:31:50.000000000 -0700
+++ include/linux/quotaops.h	2003-04-15 20:31:59.000000000 -0700
@@ -185,6 +185,7 @@
  */
 #define sb_dquot_ops				(NULL)
 #define sb_quotactl_ops				(NULL)
+#define sync_dquots_dev(dev,type)		(NULL)
 #define DQUOT_INIT(inode)			do { } while(0)
 #define DQUOT_DROP(inode)			do { } while(0)
 #define DQUOT_ALLOC_INODE(inode)		(0)