Date: Mon, 5 May 2003 21:25:52 -0700
From: Greg KH <>
Subject: Re: APC USB ups, Back-UPS ES series, 2.5.68
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/5/6/4

On Mon, May 05, 2003 at 09:42:37PM -0400, David Ford wrote:
> I haven't had time to look at it and try to debug it.  The 96 v.s. 192 
> minor look like it's exactly 128 too high.  Perhaps it's a simple fix?
Can you try this patch and let me know if it works or not?
thanks,
greg k-h
--- a/drivers/usb/input/hiddev.c	Sun May  4 23:49:54 2003
+++ b/drivers/usb/input/hiddev.c	Mon May  5 21:23:42 2003
@@ -714,9 +714,9 @@
 	hiddev->hid = hid;
 	hiddev->exist = 1;
 
-	sprintf(devfs_name, "usb/hid/hiddev%d", minor);
+	sprintf(devfs_name, "usb/hid/hiddev%d", minor - HIDDEV_MINOR_BASE);
 	devfs_register(NULL, devfs_name, 0,
-		USB_MAJOR, minor + HIDDEV_MINOR_BASE,
+		USB_MAJOR, minor,
 		S_IFCHR | S_IRUGO | S_IWUSR, &hiddev_fops, NULL);
 	hid->minor = minor;
 	hid->hiddev = hiddev;
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/