Date: Tue, 09 Mar 1999 16:54:23 +0100
From: Ralf Corsepius <>
Subject: Re: /dev/psaux troubles with 2.2.2
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/3/9/111

"Steven N. Hirsch" wrote:
> On Tue, 9 Mar 1999, Ralf Corsepius wrote:
>
> > Hi,
> >
> > I am trying to install 2.2.2 on an AcerNote 970 notebook.
> > This notebook has a ps2-mouse compatible touch pad build-in.
> >
> > When trying to access the touch-pad as /dev/psaux I get:
> > /dev/mouse: Operation not supported by device
> >
> > With linux-2.0.X and linux-2.1.131 (latest pre-2.2 snapshot, I tried on
> > this notebook) accessing this touch-pad as /dev/psaux with gpm and X had
> > worked - now it doesn't.
>
> Ralf,
>
> The psaux detection code in 2.2.x fails to find a valid device under some
> circumstances.
Apparently detect_auxiliary_port() doesn't work for my notebook.
Looking into 2.1.131 and 2.2.3 pc_keyb.c shows that the autodetection code
was disabled, rsp. not yet present in 2.1.131.
> I took the sneaky way around and did:
>
> [patch to disable detect_auxiliary_port()]
> Please note that this is a rude hack.  The maintainer should be made aware
> that it is missing devices on some platforms.
:)
Applying your patch, i.e. disabling detect_auxiliary_port(), the touch pad
works again.
Adding a printk statement to print out the value of "loops"and "status"
inside of detect_auxiliary_port(), I can see that the logic to detect psaux
ports doesn't work at all, here (linux-2.2.3):
PS/2 loops 10; status: 0x16
PS/2 loops: 9; status: 0x14
[..]
PS/2 loop: 1: status: 0x14
IMO, this clearly shows that either the psaux device is not properly
initialized by the BIOS or the logic to detect psaux is bogus.
Anyway, unless somebody comes up with a more sophisticated approach or can
point out a real bug in the detect_auxiliary_port, I'd propose that a
configuration option or kernel parameter should be added to work around this
problem (Remember, BIOS upgrades aren't always available nor reliable, esp.
for older machines).
Ralf.
--
Ralf Corsepius
Forschungsinstitut fuer Anwendungsorientierte Wissensverarbeitung (FAW)
Helmholtzstr. 16, 89081 Ulm, Germany     Tel: +49/731/501-8690
mailto:corsepiu@faw.uni-ulm.de           FAX: +49/731/501-999
http://www.faw.uni-ulm.de
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/