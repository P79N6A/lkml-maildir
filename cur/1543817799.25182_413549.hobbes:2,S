Date: Tue, 04 Apr 2006 12:12:31 +0400
From: "Artem B. Bityutskiy" <>
Subject: device model and character devices
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/4/4/32

Hello Greg,
at the moment the device model and the character devices subsystem are 
distinct and different things. I mean, if I have a device xdev, I do the 
following:
struct xdev_device {
	struct cdev cdev;
	struct device dev;
	/* xdev-specific stuff */
	...
} xdev;
I use xdev.cdev to register character device:
cdev_add(&xdev.cdev, ...);
...
I use xdev.dev functions to include my device to the device-model:
device_register(&xdev.dev, ...);
...
But why not to merge the character device stuff and the device model? 
Roughly speaking, why not to embed 'struct cdev' to 'struct device'? Why 
do driver writers have to distinguish between these things?
Thanks.
-- 
Best Regards,
Artem B. Bityutskiy,
St.-Petersburg, Russia.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/