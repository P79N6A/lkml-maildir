Date: Wed, 19 Mar 2008 21:20:40 +0300
From: Oleg Nesterov <>
Subject: [PATCH] signals-document-cld_continued-notification-mechanics-more
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/3/19/415

comments update for signals-document-cld_continued-notification-mechanics.patch
Signed-off-by: Oleg Nesterov <oleg@tv-sign.ru>
--- 25/kernel/signal.c~DOC_1_NOTIFY	2008-03-18 17:25:19.000000000 +0300
+++ 25/kernel/signal.c	2008-03-19 20:53:45.000000000 +0300
@@ -1670,7 +1670,11 @@ relock:
 	try_to_freeze();
 
 	spin_lock_irq(&sighand->siglock);
-	/* see prepare_signal(SIGCONT) */
+	/*
+	 * Every stopped thread goes here after wakeup. Check to see if
+	 * we should notify the parent, prepare_signal(SIGCONT) encodes
+	 * the CLD_ si_code into SIGNAL_CLD_MASK bits.
+	 */
 	if (unlikely(signal->flags & SIGNAL_CLD_MASK)) {
 		int why = (signal->flags & SIGNAL_STOP_CONTINUED)
 				? CLD_CONTINUED : CLD_STOPPED;