Date: Thu, 18 Nov 2004 19:56:12 +0100
From: Miklos Szeredi <>
Subject: Re: [PATCH] [Request for inclusion] Filesystem in Userspace
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/11/18/238

> > Well, killing the fuse process _will_ make the system come back to
> > life, since then all the dirty pages belonging to the filesystem will
> > be discarded. 
> 
> They will? Why? They're still mapped into other processes, still dirty. 
> How do they go away?
Just as if they were written back properly.  It makes no sense to keep
pages under writeback around if we know the filesystem is gone for
good.
> In contrast, a fuse process that needs to do IO is _not_ protected from 
> the clients having eaten up all the memory it needs to do the IO.
Will the clients be allowed to fill up the _whole_ memory with dirty
pages?  Page writeback will start sooner than that, and then the
client will not be able to dirty more pages until some are freed.
BTW, I've never myself seen a deadlock, and I've not had any report of
it.  I've been able to deadlock FUSE on 2.4 with a shared writable
mapping and an artificial program that was designed for this, but I
haven't managed this on 2.6.
Maybe someone can help me.  Anybody who writes a program that
deadlocks Linux with a FUSE filesystem, gets a medal, and I'll humbly
apologize :)
Thanks,
Miklos
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/