Date: Wed, 13 Aug 2003 14:37:51 +1000
From: Stephen Rothwell <>
Subject: [PATCH][DOCO] Re: 2.6.0-test3 and dnotify
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/8/13/7

Linus,
On 12 Aug 2003 10:28:47 -0600 Ronald Kuetemeier <ron_ker@kuetemeier.com> wrote:
>
> I run some of my programs on 2.6.0-test3 this morning, before my coffee
> ..., anyhow seems dnotify isn't working any more. I compiled the example
> from <linux-2.6.0-test3>/Documentation/dnotify.txt this also doesn't
> work anymore.
This has been asked a couple of times, so can you please apply the
following documentation patch?
-- 
Cheers,
Stephen Rothwell                    sfr@canb.auug.org.au
http://www.canb.auug.org.au/~sfr/
diff -ruN 2.6.0-test3/Documentation/dnotify.txt 2.6.0-test3.sfr.1/Documentation/dnotify.txt
--- 2.6.0-test3/Documentation/dnotify.txt	2001-04-07 03:42:48.000000000 +1000
+++ 2.6.0-test3.sfr.1/Documentation/dnotify.txt	2003-08-13 14:32:14.000000000 +1000
@@ -32,7 +32,8 @@
 
 Preferably the application will choose one of the real time signals
 (SIGRTMIN + <n>) so that the notifications may be queued.  This is
-especially important if DN_MULTISHOT is specified.
+especially important if DN_MULTISHOT is specified.  Note that SIGRTMIN
+is often blocked, so it is better to use (at least) SIGRTMIN + 1.
 
 Implementation expectations (features and bugs :-))
 ---------------------------
@@ -78,10 +79,10 @@
 		act.sa_sigaction = handler;
 		sigemptyset(&act.sa_mask);
 		act.sa_flags = SA_SIGINFO;
-		sigaction(SIGRTMIN, &act, NULL);
+		sigaction(SIGRTMIN + 1, &act, NULL);
 		
 		fd = open(".", O_RDONLY);
-		fcntl(fd, F_SETSIG, SIGRTMIN);
+		fcntl(fd, F_SETSIG, SIGRTMIN + 1);
 		fcntl(fd, F_NOTIFY, DN_MODIFY|DN_CREATE|DN_MULTISHOT);
 		/* we will now be notified if any of the files
 		   in "." is modified or new files are created */
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/