Date: Mon, 24 Oct 2005 09:18:54 -0400
From: Steven Rostedt <>
Subject: Re: select() for delay.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/10/24/54

Hi Maduhu,
On Mon, 2005-10-24 at 16:25 +0530, madhu.subbaiah@wipro.com wrote:
> +                        put_user(sec, &tvp->tv_sec);
> +                        put_user(usec, &tvp->tv_usec);
I won't comment on the rest of the patch, but this part is definitely
wrong.  The pointer tvp is a user space address and once you dereference
that pointer to get to tv_sec, you can have a fault, which might
segfault the processes.
What you really want is something like:
{
	timeval tv;
	tv.tv_sec = sec;
	tv.tv_usec = usec;
	copy_to_user(tvp, &tv, sizeof(tv));
}
-- Steve
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/