Date: Thu, 17 Aug 2006 08:57:13 +0200
From: Benjamin Herrenschmidt <>
Subject: Re: PATCH: Multiprobe sanitizer
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/8/17/39

On Thu, 2006-08-17 at 01:36 +0100, Alan Cox wrote:
> Ar Mer, 2006-08-16 am 15:26 -0700, ysgrifennodd Greg KH:
> > What would this help out with?  Would the PCI layer (for example) handle
> > this "notify the core that it can continue" type logic?  Or would the
> > individual drivers need to be able to control it?
> > 
> > I'm guessing that you are thinking of this in relation to the disk
> > drivers, have you found cases where something like this is necessary due
> > to hardware constraints?
> 
> Actually it occurs everywhere because what happens is
> 
> 	PCI enumerates in bus order
> 	Threads *usually* run in bus order
> 
> so every n'th boot your devices re-order themselves out of bus order,
> and eth1 becomes eth0 for the day.
Devices reorder themselves anyways .... look at my XPC shuttle, it has
some usb all-sort-of-card reader built-in and every other day, I get
that to be sda instead of the internal SATA... solution: use mounting by
label. With USB network type of things etc... same problem. I really
don't like the idea of having to add special things in PCI drivers to
"work around" the problem (which will only work in some cases and will
slightly lower how much parallelism we can do).
In fact, I'm all about making the problem worse by agressively
paralellilizing everything to get distros config mecanisms to catch up
and stop using the interface name (or use ifrename).
Ben.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/