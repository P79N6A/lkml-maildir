Date: Sun, 2 Mar 2008 11:46:50 +0100
From: Pavel Machek <>
Subject: Re: Ethernet over Kernel Sockets
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/3/2/53

On Fri 2008-02-29 21:54:21, Lukas Razik wrote:
> Hello all!
> 
> As you know, some network cards doesn't have a 'eth' 
> interface under linux.
> Because of that I'm developing a net_device based driver 
> which doesn't transmit and receive directly through a 
> real network card but through UDP kernel sockets.
What is it good for?
> So the eth1 interfaces are based on sockets which use 
> the eth0 (Gigabit) interfaces for the communication.
> Now, if I measure the transmission between 192.168.0.1 
> and 192.168.0.2 then I get transmission rates that are 
> normal for Gigabit-Ethernet (~25?sec (PingPong) and 
> ~900Mbit/s).
> If I measure the transmission through the eth1 
> interfaces between 192.168.1.1 and 192.168.1.2 then I 
> only get ~1msec (PingPong) and only about ~400Mbit/s.
> 
> The interesting thing is, that I always get PingPongs of 
> 1ms (= one jiffie). Although if I measure with 100MBit- 
> or other non-Ethernet cards.
Try increasing HZ :-)... or maybe it is a gigabit interrupt mitigation
issue?
-- 
(english) 
http://www.livejournal.com/~pavelmachek
(cesky, pictures) 
http://atrey.karlin.mff.cuni.cz/~pavel/picture/horses/blog.html