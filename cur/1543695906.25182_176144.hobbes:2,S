Date: Sun, 2 Nov 2003 10:28:27 +0200
From: Ville Herva <>
Subject: Re: ide write cache issue? [Re: Something corrupts raid5 disks slightly during reboot]
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/11/2/13

On Sat, Nov 01, 2003 at 10:05:31PM -0800, you [Andre Hedrick] wrote:
> 
> I added the flush code to flush a drive in several places but it got
> pulled and munged.
> 
> The original model was to flush each time a device was closed, when any
> partition mount point was released, and called by notifier.
> 
> In a minimal partition count of 1, you had at least two flush before
> shutdown or reboot.
> 
> So it was not the code because I fixed it, but then again I am retiring
> from formal maintainership.
Thanks, Andre :(.
As an^Wthe IDE expert, can you clarify a few points:
  - How long can the unwritten data linger in the drive cache if the drive
    is otherwise idle? (Without an explicit flush and with write caching
    enabled.)
    I had unmounted the fs an raidstopped the md minutes before the boot.
  - Can this corruption happen on warmboot or only on poweroff?
  - What kind of corruption can one see the if boot takes place "too fast"
    and drive hasn't got enough time to flush its cache?
-- v --
v@iki.fi
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/