Date: Wed, 18 Aug 2004 16:11:19 +0200
From: Jakob Oestergaard <>
Subject: Re: oom-killer 2.6.8.1
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/8/18/88

On Wed, Aug 18, 2004 at 09:57:03AM -0400, Gene Heskett wrote:
...
 >Any ideas?
> >
> >Try to disable swap?  Tune magic VM settings?  Any suggestions are
> > highly welcome.
> >
> >Thank you very much,
> 
> You may be another candidate for the same thing thats troubleing me.  
> Back up the log above that and look for an Oops and post that please.
Looking thru the swapfile.c and oom killer code, one thing that is
making me scratch my head:
nr_swap_pages is a *signed* integer.  This does not make sense. There
are even tests in swapfile.c that explicitly test "nr_swap_pages <= 0"
instead of simply "!nr_swap_pages" - this does not make sense at all
either - or does it?
Stephen is that your code?
See, if nr_swap_pages can validly be negative and some meaning is
attached to that (some meaning other than "we're out of swap"), the
oom_killer surely misses that, as it tests "nr_swap_pages > 0".
I don't think that nr_swap_pages can be negative (unless one adds a
*lot* of swap in which case this will unintentionally happen all by
itself),  but I felt I should chirp in with this comment in case
someone's looking at it anyway  :)
-- 
 / jakob
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/