Date: Tue, 13 Mar 2001 09:28:37 -0800
From: Greg KH <>
Subject: Re: APIC  usb MPS 1.4 and the 2.4.2 kernel
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/3/13/4

On Tue, Mar 13, 2001 at 12:25:13AM -0500, Pete Toscano wrote:
> Well, I can't speak for the consequences of noapic (I've wondered as
> much myself), but I know that there's been a problem with SMP 2.4
> kernels (even the 2.4 test kernels) and USB running on VIA chipsets for
> a while now.  I'm told by the linux-usb maintainers that it's a problem
> with the PCI IRQ routing for the VIA chipsets, but I've been unable to
> get anyone who knows about this to do anything (and I've been asking for
> a while).  Alas, since this stuff is beyond me, I just accept the fact
> that it'll probably always be broke.
Pete,
The Tyan Tiger 133 motherboard that you and I have, just will not work
in SMP mode without the noapic command line option.  Randy Dunlap and I
worked on this back and forth for a while by email, and then I drug the
machine to a Linux Advanced Topics meeting that our local LUG puts on,
and he beat on it for a few hours.
It seems that the APIC on this motherboard does not have most of the
pins connected, so that even if we could get the USB interrupt to work
properly (which we couldn't) there would be no benefit to run in APIC
mode.  I was going to run some crude benchmarks on the box with and
without APIC mode just to get an sense if we are missing anything
running in noapic mode, but I haven't gotten around to it yet.
But, Linux does seem to run just fine with USB and SMP in the noapic
mode, which is a lot better than Win2000 can say, as it doesn't even
support the VIA USB chipset on this board at all :)
Hope this helps,
greg k-h
-- 
greg@(kroah|wirex).com
http://immunix.org/~greg
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/