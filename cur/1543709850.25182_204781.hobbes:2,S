Date: Mon, 8 Mar 2004 22:50:52 +0100 (CET)
From: Urban Widmark <>
Subject: Re: smbfs patch
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/3/8/163

On Mon, 8 Mar 2004, Stian Jordet wrote:
> tor, 04.03.2004 kl. 23.20 skrev SÃ¸ren Hansen:
> > I noticed that smbfs no longer respects the "uid" and "gid" mount
> > options passed to it by mount.(I think it stopped when the server was
> > upgraded to Samba 3.0. Not sure though, since my client was upgraded to
> > Linux 2.6.3 at around the same time). I've made this small patch that
> > fixes it (bear with me, this is my first patch to the kernel :-)  ):
> 
> I have the same problem as you have. I have not gotten around to test
> your patch yet (but will later tonight), but I read in another mail from
> you that you had discussed the patch with Urban Widmark. Is the any
> opinions against this patch? If not, will you try to submit it to
> Andrew/Linus?
There is nothing directly wrong with the patch, but maybe there are better 
solutions.
Here is my summary of our off-list discussion.
1. If you configure samba and disable the unix extensions ("UE") in
   smb.conf then smbfs will behave like it does with earlier samba 
   servers.
2. The idea with the UE is to communicate better over smb between unix 
   systems and uid/gid mapping isn't done in things like nfs.
   Perhaps what you really want is to disable the unix extensions on 
   the smbfs side?
3. If this is needed for smbfs+UE perhaps it is also useful for other
   filesystems in some cases. Some non-unixlike filesystems have these
   mappings already and perhaps they would be generally useable.
   (see also the "UID/GID mapping system" post to this list)
Sorry for taking that thread off-list, btw. I didn't read the message too
carefully when Andrew poked me for not responding.
/Urban
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/