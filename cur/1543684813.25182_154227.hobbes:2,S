Date: Mon, 4 Aug 2003 17:48:22 +0400
From: Oleg Drokin <>
Subject: Re: PROBLEM: 2.6.0-test1/2 reiserfsck journal replaying hangs
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/8/4/75

Hello!
On Mon, Aug 04, 2003 at 03:22:11PM +0200, Martin Pitt wrote:
> > Yeah, sure.
> I did that. I will send you the screenshot per private mail for not
> cluttering up the mailing list.
Ok, got it.
reiserfsck hanged for unknown reason.
This is not on your root partition, but rather on /dev/hda6
> > > > can you press sysrq-T at the time of a hang and then send us the traces?
> > > That's even more difficult, it produces several screenfulls of text
> > > scrolling away very fast. I'd need a serial console for this purpose
> > > but it will last a while to set this up since I don't have the
> > > necessary hardware here. I could do it tomorrow.
> > Well, as I understand, you first press sysrq-T, then ^C, then thing boots and you can
> > colled sysrq-t output from dmesg or boot logs.
> It does not work that way. Both with 2.4.x and 2.6.0-test2, after
> pressing sysrq-something you can only choose actions from the menu (i.
> e. eventually reboot). Every key press is interpreted as magic key
> menu selection, I do not even have to hold down alt+sysrq to choose
> 's'ync, 'b'oot and so on. There is no such thing as "e'x'it from this
> menu". This may be regarded as another bug.
Hm, I heard of such cases and usually this is because some key(un)press events got lost.
How about pressing Ctrl key and Alt key separately which should let you out of this mode
hopefully.
Also What if you'd unmount /dev/hda6 after you booted and try to run
/sbin/reiserfsck -a /dev/hda6, will it hang in this case?
If so, you might be able to get stacktrace (with sysrq-t) from that point too.
Also look if reiserfsck eats cpu or behaves strangely in some other manner when hanging,
and if so, we may need a metadata snapshot of your /dev/hda6 device
( you can obtain one with debugreiserfs -p /dev/hda6 | bzip2 -9c >metadata.bz2)
Bye,
    Oleg
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/