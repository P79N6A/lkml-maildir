Date: Thu, 26 Apr 2001 02:53:56 -0700
From: Ion Badulescu <>
Subject: Re: 2.2.19 and file lock on NFS?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/4/26/42

On 25 Apr 2001 00:39:43 +0200, Trond Myklebust <trond.myklebust@fys.uio.no> wrote:
>>>>>> " " == apark  <apark@cdf.toronto.edu> writes:
> 
>     > Hi, Recently upgraded to 2.2.19, along with new
>     > nfs-utils(0.3.1).  But I have a program that requires a
>     > exclusive write lock on a NFSed directory.  When I was using
>     > 2.2.17 all was ok, but now it returns ENOLCK.  Does anybody
>     > else have the same problem?  Thanks
> 
> Hi,
> 
> You are probably failing to run the statd daemon or you may have set
> up over-restrictive /etc/hosts.(allow|deny).
Or /var/lib/nfs/statd does not exist on your system, or it is not
writable by the uid rpc.statd runs under (rpcuser on Red Hat boxes
with all the upgrades).
I've had this problem myself, I don't think it's covered in the FAQ.
I haven't checked if the rpcuser thing is a redhat-ism, probably is,
their script is not doing anything special with rpc.statd so they
must have hacked it into the executable.
Ion
-- 
  It is better to keep your mouth shut and be thought a fool,
            than to open it and remove all doubt.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/