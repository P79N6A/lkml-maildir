Date: Tue, 24 Oct 2006 14:14:23 +0200 (CEST)
From: Guennadi Liakhovetski <>
Subject: Re: [2.6.18-rt6] BUG / typo
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/10/24/81

On Tue, 24 Oct 2006, Guennadi Liakhovetski wrote:
> On Tue, 24 Oct 2006, Guennadi Liakhovetski wrote:
>
>> [22644.590000] BUG: scheduling with irqs disabled: 
>> posix_cpu_timer/0x00000001/2
>> [22644.590000] caller is schedule+0x10/0x118
> [...]
>
> Hm, got the same BUG with the patch from the previous email. Looking further, 
> unless somebody has an idea?
Could the reason have been that I in my (pxa) timer ISR had 
irq_enter()/_exit around the call to handle_event, as suggested in 
i386/kernel/apic.c:
 	/*
 	 * update_process_times() expects us to have done irq_enter().
 	 * Besides, if we don't timer interrupts ignore the global
 	 * interrupt lock, which is the WrongThing (tm) to do.
 	 */
 	irq_enter();
 	/*
 	 * If the task is currently running in user mode, don't
 	 * detect soft lockups.  If CONFIG_DETECT_SOFTLOCKUP is not
 	 * configured, this should be optimized out.
 	 */
 	if (user_mode(regs))
 		touch_softlockup_watchdog();
 	evt->event_handler(regs);
 	irq_exit();
? Anyway, I cannot SEEM to reproduce it anymore now I've removed those 
calls. Will test further.
Thanks
Guennadi
---------------------------------
Guennadi Liakhovetski, Ph.D.
DSA Daten- und Systemtechnik GmbH
Pascalstr. 28
D-52076 Aachen
Germany
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/