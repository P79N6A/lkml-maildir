Date: Wed, 15 Nov 2006 10:31:59 +0100
From: Kay Sievers <>
Subject: Re: [Patch -mm 2/5] driver core: Introduce device_move(): move a device to a new parent.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/11/15/74

On Wed, 2006-11-15 at 10:24 +0100, Cornelia Huck wrote:
> On Wed, 15 Nov 2006 09:44:33 +0100,
> "Kay Sievers" <kay.sievers@vrfy.org> wrote:
> 
> > Udev and HAL, both will need an event for the moving, with the old
> > DEVPATH value in the environment. We want something like a "rename" or
> > "move" event. Without that, weird things will happen in userspace,
> > because the devpath is used as the key to the device during the whole
> > device lifetime. The only weird exception today is the netif rename
> > case, which is already handled by special code in udev.
> 
> Something like below (completely untested as my test box is currently
> inaccessible)?
We need the old DEVPATH in the environment (or something similar),
otherwise we can't connect the event with the new device location to the
current device. :)
> Wouldn't we need something similar for kobject_rename()
> as well?
Maybe kobject_rename() can go, if we have a move function which can be
used. In any case, the events should look identical to userspace, yes.
Thanks,
Kay
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/