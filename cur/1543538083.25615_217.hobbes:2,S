Date: Sun, 2 Jul 2000 15:54:29 -0400 (EDT)
From: Alexander Viro <>
Subject: Re: [RFC] fhandle implementation.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/7/3/217

On Thu, 29 Jun 2000, Neil Brown wrote:
> I am now thinking that what I would want decode_fh or
> fhandle_to_dentry or whatever to return would be a list of dentries,
> one for each place in the filesystem that the particular file was
> found. 
What else would you want, sir? Would 800mg of diethylamide go?
Neil, that's fscking ridiculous - you are asking for complete scan of
directory structure.
> This would probably mean passing an array of (struct dentry *) with
> the understanding the every dentry put in the array would have been
> dget()ed, and would need a dput().
>
> It is tempting to use the d_alias list rather than an array, but I
> think there be dragons there.
No. Just forget about that. It's completely out of question - you will
make NFS not just dog-slow, it will be blowing the memory on every
fhandle revalidation. And keep in mind that just finding _some_ dentries
may screw your feature with subtrees (misdesigned and incompatible with
UNIX filesystems, IMNSHO). All dentries currently in dcache may have
nothing with your subtree.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/