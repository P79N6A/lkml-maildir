Date: Sun, 12 Oct 2003 17:15:13 -0700
From: Andrew Morton <>
Subject: Re: [PATCH] release_region in cciss block driver
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/10/12/100

Felipe W Damasio <felipewd@terra.com.br> wrote:
>
> --- linux-2.6.0-test6/drivers/block/cciss.c.orig	2003-10-06 10:18:01.000000000 -0300
>  +++ linux-2.6.0-test6/drivers/block/cciss.c	2003-10-06 10:25:04.000000000 -0300
>  @@ -2185,6 +2185,7 @@
>   		schedule_timeout(HZ / 10); /* wait 100ms */
>   	}
>   	if (scratchpad != CCISS_FIRMWARE_READY) {
>  +		release_io_mem(c);
>   		printk(KERN_WARNING "cciss: Board not ready.  Timed out.\n");
>   		return -1;
>   	}
It seems to me that the driver is already performing this function
in the caller.
static int __devinit cciss_init_one(struct pci_dev *pdev,
	const struct pci_device_id *ent)
{
	...
	if (cciss_pci_init(hba[i], pdev) != 0)
		goto clean1;
	...
clean1:
	release_io_mem(hba[i]);
	free_hba(i);
	return(-1);
}
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/