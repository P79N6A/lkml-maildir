Date: 17 Aug 2002 21:00:18 +0100
From: Alan Cox <>
Subject: Re: IDE?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/8/17/115

On Sat, 2002-08-17 at 01:02, Linus Torvalds wrote:
> Even something as simple as a PIIX driver (which _should_ just register 
> itself as a driver for the piix chipsets) doesn't do that. Instead, we 
> have ide-pci.c, which has a list of all the chipsets it knows about, and 
> then does initialization and calls the init routines that it knows about. 
> That's just incestuous.
The pci scan can't go away to get the nasty BIOS ordering crap right.
Andre now has that code as it should be however. The scan loop is
basically no more than
	pci_foreach_device_in_weird_ide_order()
	{
		call probe function(dev)
	}
Which also means we are really really close to hot plug ide controllers.
The probe function->generic pci init->driver->generic->driver-> chain is
still too ugly but its getting better and lives in a struct now
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/