Date: Wed, 17 Mar 2004 11:21:09 -0700 (MST)
From: (Terry Loftin)
Subject: [PATCH 2.4.26-pre4] 2 Gb Core Files
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/3/17/72

Please apply. This patch allows core files larger than 2GB.
This is just Andrew Morton's 2.6.x patch backported to 2.4.26-pre
source.  TIA.
diff -Nu linux-2.4/fs/exec.c linux-2.4_core/fs/exec.c
--- linux-2.4/fs/exec.c	Mon Mar 15 10:57:07 2004
+++ linux-2.4_core/fs/exec.c	Mon Mar 15 10:59:48 2004
@@ -1126,7 +1126,7 @@
 		goto fail;
 
  	format_corename(corename, core_pattern, signr);
-	file = filp_open(corename, O_CREAT | 2 | O_NOFOLLOW, 0600);
+	file = filp_open(corename, O_CREAT | 2 | O_NOFOLLOW | O_LARGEFILE, 0600);
 	if (IS_ERR(file))
 		goto fail;
 	inode = file->f_dentry->d_inode;
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/