Date: Sun, 12 Dec 1999 21:51:35 +0100
From: Gerd Knorr <>
Subject: Re: Calling VESA BIOS routines from kernel?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/12/12/104

> with the hardware, put the process into 32-bit protected mode, and
> so on, or are all VESA BIOS extensions generally supposed to support
> being called from a 32-bit protected mode operating system (i.e., is there
> hope for this approach, or do I have to try to hack the boot loader)?
VESA 2.0 has limited support for protected mode callbacks, vesafb can use
this to set color palette entries and pan the display.  You'll have to call
the BIOS once in real mode to get the entry points for these functions.  Once
you have them they can be called from protected mode (modulo bios bugs).
VESA 2.0 seems to be designed with Games+DOS extenders in mind.  The setup
(switching video mode, ...) must be done in real mode.  Protected mode hooks
are only available for very few functions, there is no full protected mode
support.
VESA 3.0 adds protected mode entry points for some more functions.  You can
do mode switches with this (and probably build a vesa3fb which is'nt limited
to the video mode selected at boot time).  Not sure about DCC.  I have a pdf
with the specs but no hardware to play with.
Most modern cards have VESA 2.0 support these days.  My S3/Virge (1996)
has 1.2 only, both matrox boards (Mystique / G200) already have 2.0.
Other options are:  play tricks with vm86.  Use a cpu emulator.  XFree86 4.0
does the later to boot secondary vga's for multiheaded displays and initialize
vga boards on !ia32 hardware. 
  Gerd
-- 
sigfault
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/