Date: Fri, 18 Jan 2008 12:02:52 +0100
From: Ingo Molnar <>
Subject: Re: [PATCH] x86: fix unconditional arch/x86/kernel/pcspeaker.c?compiling
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/18/153

* Michael Opdenacker <michael-lists@free-electrons.com> wrote:
>  obj-$(CONFIG_PARAVIRT)		+= paravirt_32.o
> -obj-y				+= pcspeaker.o
> -
>  obj-$(CONFIG_SCx200)		+= scx200_32.o
> 
> +ifdef CONFIG_INPUT_PCSPKR
> +	obj-y			+= pcspeaker.o
> +endif
why didnt you make this:
  obj-$(CONFIG_INPUT_PCSPKR)		+= pcspeaker.o
?
Your patch looks fine to me otherwise, obviously if someone disables 
PCSPKR intentionally in the .config, the kernel should just do that. 
Could you resend it with the above thing fixed, and against x86.git#mm? 
The x86.git coordinates are at:
 
http://redhat.com/~mingo/x86.git/README
	Ingo