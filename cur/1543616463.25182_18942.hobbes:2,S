Date: Thu, 10 Jan 2002 02:45:20 -0600
From: Bruce Guenter <>
Subject: Re: Where's all my memory going?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/1/10/28

On Wed, Jan 09, 2002 at 08:36:13PM -0200, Rik van Riel wrote:
> Matt's system seems to go from 900 MB free to about
> 300 MB (free + cache).
> 
> I doubt qmail would eat 600 MB of RAM (it might, I
> just doubt it) so I'm curious where the RAM is going.
I am seeing the same symptoms, with similar use -- ext3 filesystems
running qmail.  Adding up the RSS of all the processes in use gives
about 75MB, while free shows:
             total       used       free     shared    buffers     cached
Mem:        901068     894088       6980          0     157568     113856
-/+ buffers/cache:     622664     278404
Swap:      1028152      10468    1017684
This are fairly consistent numbers.  buffers hovers around 150MB and
cached around 110MB all day.  The server is heavy on write traffic.
> Matt, do you see any suspiciously high numbers in
> /proc/slabinfo ?
What would be suspiciously high?  The four biggest numbers I see are:
inode_cache       139772 204760    480 25589 25595    1
dentry_cache      184024 326550    128 10885 10885    1
buffer_head       166620 220480     96 4487 5512    1
size-64           102388 174876     64 2964 2964    1
I can post complete details for any who wish to investigate further.  I
am not seeing a huge slowdown, but I have no real baseline to compare
against.
-- 
Bruce Guenter <bruceg@em.ca> 
http://em.ca/~bruceg/
 
http://untroubled.org/
OpenPGP key: 699980E8 / D0B7 C8DD 365D A395 29DA  2E2A E96F B2DC 6999 80E8
[unhandled content-type:application/pgp-signature]