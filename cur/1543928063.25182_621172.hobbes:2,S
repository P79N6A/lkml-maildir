Date: Mon, 26 Nov 2007 08:31:31 -0500
From: Russell Harmon <>
Subject: [PATCH] Fix for sched-cfs sysctl.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/11/26/74

This trivial patch fixes a compilation error that occurs when 
CONFIG_FAIR_GROUP_SCHED and !CONFIG_SMP.
diff --git a/kernel/sysctl.c b/kernel/sysctl.c
index 678223a..8bebf25 100644
--- a/kernel/sysctl.c
+++ b/kernel/sysctl.c
@@ -330,7 +330,7 @@ static struct ctl_table kern_table[] = {
                .mode           = 644,
                .proc_handler   = &proc_dointvec,
        },
-#ifdef CONFIG_FAIR_GROUP_SCHED
+#if defined(CONFIG_FAIR_GROUP_SCHED) && defined(CONFIG_SMP)
        {
                .ctl_name       = CTL_UNNUMBERED,
                .procname       = "sched_min_bal_int_shares",
diff --git a/kernel/sysctl.c b/kernel/sysctl.c
index 678223a..8bebf25 100644
--- a/kernel/sysctl.c
+++ b/kernel/sysctl.c
@@ -330,7 +330,7 @@ static struct ctl_table kern_table[] = {
 		.mode		= 644,
 		.proc_handler	= &proc_dointvec,
 	},
-#ifdef CONFIG_FAIR_GROUP_SCHED
+#if defined(CONFIG_FAIR_GROUP_SCHED) && defined(CONFIG_SMP)
 	{
 		.ctl_name	= CTL_UNNUMBERED,
 		.procname	= "sched_min_bal_int_shares",