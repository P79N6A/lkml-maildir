Date: Wed, 2 Jun 1999 18:01:34 +0400 (MSK DST)
From:  kuznet@ms2 ...
Subject: Re: [patch] TCP/IP delacks disabled with MPI
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/6/2/56

Hello!
> My first use for the 'new' semantics was going to be to add it to the 
> hostess_sv11 driver, and make diald automatically bring up the ISDN line when 
> the leased line goes down. 
Exactly. This approach is correct.
I even may tell you how to make this correctly, it was not
made only because nobody was interested in this during 2.1.
Namely, dev->link_state is separate flag. When device feels that
link state is down, it:
- downs dev->link_state
- ups dev->tbusy
- broadcasts notification via netdev_chain
  (particularly, netlink catches it and notifies user level
   resetting IFF_RUNNING in the message, but not touching dev->flags.)
up event is:
- ups dev->link_state
- downs dev->tbusy, mark_bh(NET_BH)
- broadcasts notification via netdev_chain
  (particularly, netlink catches it and notifies user level)
> I don't want diald bringing up the backup link because the leased line just 
> happens to be sending a packet when it checks.
Parse error 8)
Alexey
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/