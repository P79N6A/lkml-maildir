Date: Wed, 20 Mar 2002 17:06:54 +0100
From: Manon Goo <>
Subject: RE: Hooks for random device entropy generation missing in cpqarray.c
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/3/20/121

I have a quick and drity patch for 1 contorlller:
I patched as floows:
--- ./drivers/block/cpqarray.c.old      Wed Mar 20 14:53:16 2002
+++ drivers/block/cpqarray.c    Wed Mar 20 15:31:32 2002
@@ -1009,6 +1009,7 @@
 startio:
        start_io(h);
+       add_blkdev_randomness(MAJOR_NR);
 }
 /*
other Driver (handling more the 1 drive) find out the
Major driver number ...
./drivers/scsi/scsi_lib.c:      add_blkdev_randomness(MAJOR(req->rq_dev));
./drivers/ide/ide.c:            add_blkdev_randomness(MAJOR(rq->rq_dev));
./drivers/block/DAC960.c:         add_blkdev_randomness(DAC960_MAJOR + 
Controller->ControllerNumber);
How would I do this for the cpqarray ?
--On Mittwoch, 20. März 2002 8:25 Uhr -0600 "White, Charles" 
<Charles.White@COMPAQ.com> wrote:
> Yes.. I was reported that it some how got dropped from our 2.4 version of
> the driver..  DON'T add add_interrupt_randomness, just add "|
> SA_SAMPLE_RANDOM" to the call to request_irq.
>
> Patch to follow.
>
>
> -----Original Message-----
> From: Manon Goo [mailto:manon@manon.de]
> Sent: Wednesday, March 20, 2002 7:34 AM
> To: Arrays
> Cc: linux-kernel@vger.kernel.org; tytso@MIT.EDU; Markus Schröder
> Subject: Hooks for random device entropy generation missing in
> cpqarray.c
>
>
> Hi,
>
> All hooks for the random ganeration (add_blkdev_randomness() ) are
> ignored  in the cpqarray / ida  driver.
> 	Is a patch available ?
> 	or an other updated driver ?
> 	any hints where to put add_blkdev_randomness() in your driver ?
> 
> 	is add_interrupt_randomness() called on an i386 SMP IO-APCI system ?
>
>
> Thanks
> Manon
>
> PS: Folks on linux-kernel please CC to manon@manon.de I am not on the list
>
>
[unhandled content-type:application/pgp-signature]