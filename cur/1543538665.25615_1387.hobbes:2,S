Date: Tue, 11 Jul 2000 12:32:05 -0700
From: Paul Campbell <>
Subject: Strange 1 second hangs ...
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/7/11/112

I'm running a 2.2.16 kernel on a bunch of dual processor
P3 SMP servers (supermicro p6dbes) - they are headless, 
no X, pretty cut down systems - just a network card (8139) and a disk.
They run almost no TCP - but do do NFS mounts to an external 
server and also some other non-NFS UDP traffic
Periodically one of them gets into a wierd state where it's network 
response goes all slow - you get this wierd thing where every other
ping takes a second to respond:
PING 10.100.0.22 (10.100.0.22): 56 data bytes
64 bytes from 10.100.0.22: icmp_seq=0 ttl=255 time=0.2 ms
64 bytes from 10.100.0.22: icmp_seq=2 ttl=255 time=0.1 ms
64 bytes from 10.100.0.22: icmp_seq=1 ttl=255 time=1000.2 ms
64 bytes from 10.100.0.22: icmp_seq=4 ttl=255 time=0.2 ms
64 bytes from 10.100.0.22: icmp_seq=3 ttl=255 time=1000.3 ms
64 bytes from 10.100.0.22: icmp_seq=6 ttl=255 time=0.2 ms
64 bytes from 10.100.0.22: icmp_seq=5 ttl=255 time=1000.3 ms
64 bytes from 10.100.0.22: icmp_seq=8 ttl=255 time=0.2 ms
64 bytes from 10.100.0.22: icmp_seq=7 ttl=255 time=1000.3 ms
64 bytes from 10.100.0.22: icmp_seq=9 ttl=255 time=0.3 ms      
(note the seq numbers)
if you log in and poke around there's nothing obvious 
going on (apart from them being real slow to talk to)
and the act of logging in seems to eventually prod them
awake and they start acting normally.
My immediate guess is there's something wierd that's SMP related
(note the sequence numbers above - the ICMP messages don't 
get lost, they just sit somewhere for a second and the
others bypass them - or possibly the act of the second one coming in
wakes up whatever's sleeping and causes them both to be returned.
The 1 second waits could be a clue (or it might just be the delay
between the pings)
The same problem happened on 2.2.14
Anyway - any help, clues, ideas, reports of similar problems etc would be
appreciated
	Paul Campbell
	paul@taniwha.com
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/