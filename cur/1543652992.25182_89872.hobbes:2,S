Date: Fri, 15 Nov 2002 16:47:23 -0800
From: Mike Anderson <>
Subject: Re: writing to sysfs appears to hang
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/11/15/309

Paul Larson [plars@linuxtestproject.org] wrote:
> I've been playing with sysfs and notices something odd.  If I do this:
> echo 1 > /sys/devices/sys/name
> the process appears to be hung.  ^c won't return control to me.  If I
> log in on another console though, I can't find it running in the process
> list.  All I can do is kill the login process.  No kernel errors when I
> do this, just the hung terminal.
> 
> -Paul Larson
I repeated your example and in a quick look at the backtrace
the echo is in a loop calling down into sysfs_write_file/dev_attr_store.
I think the problem is that if a device does not have a attribute store
function the return value from dev_attr_store is incorrect.
-andmike
--
Michael Anderson
andmike@us.ibm.com
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/