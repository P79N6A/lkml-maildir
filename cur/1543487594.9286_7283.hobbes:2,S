Date: Fri, 26 Feb 1999 17:12:20 +0100 (CET)
From: Ghost <>
Subject: PROBLEM: smp-system will work very slow with kernel 2.2.2
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/2/26/122

[1.] My smp-system will work very slow with kernel 2.2.2
[2.] After compiling the kernel 2.2.2 my system will work very slow. I
tried it with different settings, but the system will not 
work right. With the old kernel. 2.0.36 everything works perfect (SMP,
too). With windows NT, SMP works, too.
I'm wondering why the bogomips of the second CPU is only 2.5. If I compile
the kernel for only one cpu the system will be slow, too. I don't know
what I do wrong. It's not the first kernel which i compile. I did it for
many systems but I had never so much problems. Ihe features, I used were 
the same as the old one. I convertefd it with make oldconfig. As this worked 
not fine, I configured a new kernel. This worked not fine too, so I use the 
default features of make menuconfig. The only thing, I turned on was the Adaptec SCSI.
My board is a GA-686DLX, Distribution: SuSe 6.0.
[3.] speed, SMP, problem, kernel 2.2.2, compiling
[4.] Linux version 2.2.2 (root@Platos) (gcc version egcs-2.91.60 19981201
(egcs-1.1.1 release)) #8 SMP Fri Feb 26 
16:00:22 CET 1999
[5.] no opps msg
[6.] no shell script is necessary to see how slow the machine works. You
can see how the computer will draw each line of 
"make menuconfig" of the kernel src.
[7.1] 
-- Versions installed: (if some fields are empty or looks
-- unusual then possibly you have very old versions)
Linux Platos 2.2.2 #8 SMP Fri Feb 26 16:00:22 CET 1999 i686 unknown
Kernel modules         2.1.85
Gnu C                  egcs-2.91.60
Binutils               2.9.1.0.15
Linux C Library        x   1 root     root      2478585 Dec 14 21:23
/lib/libc.so.6
Dynamic linker         ldd (GNU libc) 2.0.7
Procps                 1.2.7
Mount                  2.9
Net-tools              (1998-06-29)
Kbd                    0.96
Sh-utils               1.12
[7.2] 
processor : 0
vendor_id : GenuineIntel
cpu family : 6
model  : 3
model name : Pentium II (Klamath)
stepping : 4
cpu MHz  : 267.276744
cache size : 512 KB
fdiv_bug : no
hlt_bug  : no
sep_bug  : no
f00f_bug : no
fpu  : yes
fpu_exception : yes
cpuid level : 2
wp  : yes
flags  : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov mmx
bogomips : 266.24
processor : 1
vendor_id : GenuineIntel
cpu family : 6
model  : 5
model name : Pentium II (Deschutes)
stepping : 2
cpu MHz  : 267.276744
cache size : 512 KB
fdiv_bug : no
hlt_bug  : no
sep_bug  : no
f00f_bug : no
fpu  : yes
fpu_exception : yes
cpuid level : 2
wp  : yes
flags  : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat
pse36 mmx osfxsr
bogomips : 2.55
[7.3] no modules are installed. The kernel works with only the important
parts which are compiled inside the kernel.
[7.4]
Attached devices: 
Host: scsi0 Channel: 00 Id: 00 Lun: 00
  Vendor: IBM      Model: DPES-31080       Rev: S31Q
  Type:   Direct-Access                    ANSI SCSI revision: 02
Host: scsi0 Channel: 00 Id: 02 Lun: 00
  Vendor: TANDBERG Model:  TDC 3500        Rev: =01:
  Type:   Sequential-Access                ANSI SCSI revision: 02
Host: scsi0 Channel: 00 Id: 03 Lun: 00
  Vendor: IBM      Model: DORS-32160       Rev: WA6A
  Type:   Direct-Access                    ANSI SCSI revision: 02
Host: scsi0 Channel: 00 Id: 04 Lun: 00
  Vendor: YAMAHA   Model: CDR102           Rev: 1.00
  Type:   WORM                             ANSI SCSI revision: 02
Host: scsi0 Channel: 00 Id: 05 Lun: 00
  Vendor: PLEXTOR  Model: CD-ROM PX-32TS   Rev: 1.02
  Type:   CD-ROM                           ANSI SCSI revision: 02
Host: scsi0 Channel: 00 Id: 10 Lun: 00
  Vendor: IBM      Model: DCAS-32160W      Rev: S65A
  Type:   Direct-Access                    ANSI SCSI revision: 02
Host: scsi0 Channel: 00 Id: 14 Lun: 00
  Vendor: IBM      Model: DDRS-34560W      Rev: S97B
  Type:   Direct-Access                    ANSI SCSI revision: 02
[7.5] My interupts: /proc/interupts
           CPU0       CPU1       
  0:     107544      63739    IO-APIC-edge  timer
  1:       4699       2830    IO-APIC-edge  keyboard
  2:          0          0          XT-PIC  cascade
 13:          1          0          XT-PIC  fpu
 16:       2059       2050   IO-APIC-level  aic7xxx
NMI:          0
ERR:          0
I hope you will help me because I hate Windows NT and will change my
system to Linux.
Erik
Germany
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/