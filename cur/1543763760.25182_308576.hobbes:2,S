Date: Mon, 04 Apr 2005 16:57:25 +0900
From: Tejun Heo <>
Subject: Re: sata_sil Mod15Write quirk workaround patch for vanilla kernel avaialble.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/4/4/40

Alexander Trotsai wrote:
> On Fri, Apr 01, 2005 at 07:51:28AM +0900, Tejun Heo wrote:
> TH>  Hello, John.
> TH> 
> TH> John Lash wrote:
> TH> >On Fri, 01 Apr 2005 00:01:23 +0900
> TH> >Tejun Heo <htejun@gmail.com> wrote:
> TH> >
> TH> >
> TH> >>Hello, guys.
> TH> >>
> TH> >>I  generated m16w workaround patch for 2.6.11.6 (by just removing two
> TH> >>lines :-) and set up a page regarding m15w quirk and the workaournd.
> TH> >>I'm planning on updating m15w patch against the vanilla tree until it
> TH> >>gets into the mainline so that impatient users can try out and it gets
> TH> >>more testing.
> TH> >>
> TH> >>
http://home-tj.org/m15w
> TH> >>
> TH> >>Thanks.
> TH> >>
> TH> >>-- 
> TH> >>tejun
> TH> >>
> TH> >
> TH> >
> TH> >Tejun,
> TH> >
> TH> >I applied the patch to a clean 2.6.11.6 kernel and got an unresolved
> TH> >symbol error for "ATA_TFLAG_LBA". I tried changing that to 
> TH> >"ATA_TFLAG_LBA48" and
> TH> >it compiles and runs.
> TH> >
> TH> >So far, no problems. Thanks a lot for the patch.
> TH> 
> TH>  I'm sorry.  I uploaded the original patch against libata-dev-2.6 tree. 
> TH>  The two BUG_ON() lines should just be removed.  I've uploaded fixed 
> TH> patch.  Thanks for pointing out.
> 
> Thanks
> Seems to be worked (I'm install with ide-ata-2.6 patch)
> But with heavy read load write performance is very very bad
> (near 50-100 KBps)
> But I think that is not problem of Silicon card (I have also
> to SATA hard drives on Intel onboard SATA controller with
> same performance troubles)
  It has been quite a while since I looked at the elevator code but, 
IIRC, anticipatory elevator (rightfully) favors read requests over 
writes and doesn't care much about fairness between processes (IOW, 
request streams).  It depends on your workload but try using cfq.  For 
many puposes including common desktop usage, I find cfq to be better suited.
  Thanks.
-- 
tejun
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/