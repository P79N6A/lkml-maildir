Date: Tue, 1 Feb 2000 21:35:27 +0000 (GMT)
From: Dave Jones <>
Subject: Accessing /proc/sys/net/core/wmem_max oopses 2.2.15pre5
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/2/1/148

Hi all,
Both reports from kernel 2.2.15pre5
cat /proc/sys/net/core/wmem_max causes an oops.
Unable to handle kernel NULL pointer dereference at virtual address 00000001 
current->tss.cr3 = 02505000, %cr3 = 02505000 
*pde = 00000000 
Oops: 0000 
CPU:    0 
EIP:    0010:[do_proc_dointvec+512/780] 
EFLAGS: 00010202 
eax: c15cff7c   ebx: 00000001   ecx: 00000000   edx: 00000001 
esi: c15cff1c   edi: 30078eaa   ebp: 00000200   esp: c15cfef8 
ds: 0018   es: 0018   ss: 0018 
Process cat (pid: 15588, process nr: 122, stackpage=c15cf000) 
Stack: 00000000 00000200 c3e6c340 c0dd9980 c0dd99cc 00000001 30078ea9 00000001  
       c15cff1c c3e6c340 c012b9ec c3e6c3c0 c3e6c340 c0118a8b c01194b0 c020d1d0  
       00000000 c3c38740 0804c4a0 c15cff7c 00000001 00000000 c020d1d0 c3c38740  
Call Trace: [do_follow_link+120/132] [test_perm+39/76] [proc_dointvec+36/44] [do_rw_proc+122/140] [proc_readsys+28/36] [sys_read+174/196] [system_call+52/56]  
Code: 8b 1a 89 d8 99 f7 7c 24 58 89 c7 57 68 09 54 1d c0 8b 4c 24
Code:  00000000 Before first symbol            00000000 <_IP>: <===
Code:  00000000 Before first symbol               0:	8b 1a                	mov    (%edx),%ebx <===
Code:  00000002 Before first symbol               2:	89 d8                	mov    %ebx,%eax
Code:  00000004 Before first symbol               4:	99                   	cltd   
Code:  00000005 Before first symbol               5:	f7 7c 24 58          	idiv   0x58(%esp,1),%eax
Code:  00000009 Before first symbol               9:	89 c7                	mov    %eax,%edi
Code:  0000000b Before first symbol               b:	57                   	push   %edi
Code:  0000000c Before first symbol               c:	68 09 54 1d c0       	push   $0xc01d5409
Code:  00000011 Before first symbol              11:	8b 4c 24 00          	mov    0x0(%esp,1),%ecx
echo 32767 > /proc/sys/net/core/wmem_max causes a different oops.
Unable to handle kernel NULL pointer dereference at virtual address 00000001 
current->tss.cr3 = 00879000, %cr3 = 00879000 
*pde = 00000000 
Oops: 0002 
CPU:    0 
EIP:    0010:[do_proc_dointvec+408/780] 
EFLAGS: 00010297 
eax: 00000001   ebx: 00000005   ecx: 00000000   edx: 00007fff 
esi: c0499f10   edi: 00000000   ebp: 00000001   esp: c0499eec 
ds: 0018   es: 0018   ss: 0018 
Process bash (pid: 15603, process nr: 100, stackpage=c0499000) 
Stack: 00000001 00000006 c0499f15 00007fff c0499f0c 00000001 30078ea9 00000001  
       c0499f15 36373233 00000a37 00000202 c011b2c3 c083c058 c01194b0 c020d1d0  
       00000001 c3926680 40016005 c0499f70 00000001 00000000 c020d1d0 c3926680  
Call Trace: [do_anonymous_page+115/132] [proc_dointvec+36/44] [do_rw_proc+122/140] [proc_writesys+28/36] [sys_write+219/256] [proc_writesys+0/36] [system_call+52/56]  
Code: 89 10 e9 b4 00 00 00 90 8b 4c 24 24 8b 44 24 14 21 01 e9 a4
Code:  00000000 Before first symbol            00000000 <_IP>: <===
Code:  00000000 Before first symbol               0:	89 10                	mov    %edx,(%eax) <===
Code:  00000002 Before first symbol               2:	e9 b4 00 00 00       	jmp     000000bb Before first symbol
Code:  00000007 Before first symbol               7:	90                   	nop    
Code:  00000008 Before first symbol               8:	8b 4c 24 24          	mov    0x24(%esp,1),%ecx
Code:  0000000c Before first symbol               c:	8b 44 24 14          	mov    0x14(%esp,1),%eax
Code:  00000010 Before first symbol              10:	21 01                	and    %eax,(%ecx)
Code:  00000012 Before first symbol              12:	e9 a4 00 00 00       	jmp     000000bb Before first symbol
regards,
-- 
Dave.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/