Date: Sun, 24 Nov 2002 12:10:31 +0100 (CET)
From: Steffen Persvold <>
Subject: RE: Intel GbE performance on E7500
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/11/24/11

On Sat, 23 Nov 2002, Manish Lachwani wrote:
> I have used the P4DPE version of the E7500 motherboard and I have used both
> 82544GC/82546EB. However, I have used netperf to benchmark the numbers and
> used the 4.3.2 version of the driver. Actually, I have also used the 4.3.15
> version of the driver.
I've tried the 4.3.15 driver, and it is behaving in the same manner :
(82544GC device):
Latency: 0.000033
Now starting main loop
  0:         1 bytes 7569 times -->    0.27 Mbps in 0.000029 sec
  1:         2 bytes 8755 times -->    0.53 Mbps in 0.000029 sec
  2:         3 bytes 8762 times -->    0.79 Mbps in 0.000029 sec
  3:         4 bytes 5784 times -->    1.06 Mbps in 0.000029 sec
  4:         6 bytes 6523 times -->    1.60 Mbps in 0.000029 sec
  5:         8 bytes 4378 times -->    2.14 Mbps in 0.000029 sec
  6:        12 bytes 5468 times -->    3.14 Mbps in 0.000029 sec
  7:        13 bytes 3576 times -->    3.22 Mbps in 0.000031 sec
  8:        16 bytes 3741 times -->    4.10 Mbps in 0.000030 sec
  9:        19 bytes 4718 times -->    5.04 Mbps in 0.000029 sec
 10:        21 bytes 5486 times -->    5.57 Mbps in 0.000029 sec
 11:        24 bytes 5794 times -->    6.40 Mbps in 0.000029 sec
still the same latency.
(82546EB devices):
Latency: 0.000250
Now starting main loop
  0:         1 bytes 1001 times -->    0.03 Mbps in 0.000250 sec
  1:         2 bytes 1000 times -->    0.06 Mbps in 0.000250 sec
  2:         3 bytes 1000 times -->    0.09 Mbps in 0.000250 sec
  3:         4 bytes  667 times -->    0.12 Mbps in 0.000250 sec
  4:         6 bytes  751 times -->    0.18 Mbps in 0.000250 sec
  5:         8 bytes  500 times -->    0.36 Mbps in 0.000170 sec
  6:        12 bytes  917 times -->    0.71 Mbps in 0.000129 sec
  7:        13 bytes  804 times -->    1.59 Mbps in 0.000063 sec
  8:        16 bytes 1845 times -->    0.96 Mbps in 0.000127 sec
  9:        19 bytes 1105 times -->    0.87 Mbps in 0.000166 sec
 10:        21 bytes  951 times -->    1.28 Mbps in 0.000126 sec
 11:        24 bytes 1327 times -->    0.98 Mbps in 0.000188 sec
Now this is worse, the latency is varying between 250us and 63us 
(seems like it is depending on the iterations).
> 
> I have noticed pretty consistent performance. Can you send the kernel log
> messages (dmesg)? Also, look at the statistics for the NICs in
> /proc/net/PRO_Lan_adapters/eth*.info and see if you find anything
> interesting. 
> 
Well I did take a look in the proc files (*.info) and I didn't see 
anything abnormal (like packets dropped etc.).
However, when compare the "features" list on the web, I find that the 
82546EB has some features that the 82544GC apparently doesn't have :
"Interrupt moderation controls"   Reduces the number of interrupts
                                  generated by receive and transmit 
                                  operations. Maximizes system performance 
                                  and throughput.
"Small Packet Interrupt"          Fast detection of TCP ACKs for improved 
                                  small packet throughput.
Maybe these features are taking effect ?
Regards,
-- 
  Steffen Persvold   |       Scali AS      
 mailto:sp@scali.com |  
http://www.scali.com
Tel: (+47) 2262 8950 |   Olaf Helsets vei 6
Fax: (+47) 2262 8951 |   N0621 Oslo, NORWAY
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/