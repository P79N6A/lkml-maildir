Date: Sat, 15 Apr 2006 15:45:38 -0700
From: "Martin J. Bligh" <>
Subject: [PATCH] Default CONFIG_DEBUG_MUTEXES to n
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/4/15/107

CONFIG_DEBUG_MUTEXES has a significant performant impact (reduced perf
of reaim by 50% on ia32 NUMA boxes). It should not be on by default.
Signed-off-by: Martin J. Bligh <mbligh@google.com>
diff -aurpN -X /home/mbligh/.diff.exclude linux-2.6.17-rc1/lib/Kconfig.debug 2.6.17-rc1_no_mutex_dbg/lib/Kconfig.debug
--- linux-2.6.17-rc1/lib/Kconfig.debug	2006-04-15 15:28:54.000000000 -0700
+++ 2.6.17-rc1_no_mutex_dbg/lib/Kconfig.debug	2006-04-15 15:44:14.000000000 -0700
@@ -101,7 +101,7 @@ config DEBUG_PREEMPT
 
 config DEBUG_MUTEXES
 	bool "Mutex debugging, deadlock detection"
-	default y
+	default n
 	depends on DEBUG_KERNEL
 	help
 	 This allows mutex semantics violations and mutex related deadlocks
@@ -109,6 +109,7 @@ config DEBUG_MUTEXES
 
 config DEBUG_SPINLOCK
 	bool "Spinlock debugging"
+	default n
 	depends on DEBUG_KERNEL
 	help
 	  Say Y here and build SMP to catch missing spinlock initialization