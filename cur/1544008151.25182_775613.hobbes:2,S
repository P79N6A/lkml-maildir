Date: Mon, 1 Dec 2008 16:15:47 -0800
From: Paul Menage <>
Subject: Re: [PATCH 1/2] cgroups: cleanup for dummy root
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/12/1/355

On Fri, Nov 28, 2008 at 1:03 AM, Li Zefan <lizf@cn.fujitsu.com> wrote:
>
> Hmmm...Sorry, this patch is wrong, when a subsystem is inactive thus in
> rootnode, it may still iterate tasks in dummy top cgroup, though currently
> no subsystem does so.
Right - iterating across the tasks in a cgroup for an unmounted
subsystem is a completely valid thing to do. I suppose it might make
sense to optimize that to just scan the tasklist and thread lists in
that case, to avoid the overhead of maintaining the cg links for the
unmounted subsystems, but you'd have to change the cgroup iterator
first, before you stop maintaining the links. Given that I suspect the
main overhead of maintaining the links is taking css_set_lock, I'm not
sure how much it hurts to be keeping the links for the inactive
hierarchies too and keeping the code simpler.
Paul