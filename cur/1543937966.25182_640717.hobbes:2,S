Date: Sat, 19 Jan 2008 07:29:12 +0100
From: Andi Kleen <>
Subject: " Change size of node ids from u8 to u16 fixup" causes early panic in __build_all_zonelists
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/19/16

One of my test systems didn't boot with latest git-x86.
I bisected it down to f1321f875910172bcc3e1f302fe145a9e4d3bdf7
With later patches the fault seemed to happen even earlier before
other initialization messages.
Config is available at 
http://halobates.de/config
-Andi
commit f1321f875910172bcc3e1f302fe145a9e4d3bdf7
Author: travis@sgi.com <travis@sgi.com>
Date:   Fri Jan 18 23:05:33 2008 +0100
    x86: Change size of node ids from u8 to u16 fixup
    Change the size of node ids for X86_64 from 8 bits to 16 bits
    to accomodate more than 256 nodes.
    Introduce a "numanode_t" type for x86-generic usage.
...
swsusp: Registered nosave memory region: 00000000ff700000 - 0000000100000000
Allocating PCI resources starting at e2000000 (gap: e0000000:1ec00000)
SMP: Allowing 4 CPUs, 0 hotplug CPUs
PERCPU: Allocating 34912 bytes of per cpu data
PANIC: early exception 0e rip 10:ffffffff802602cd error 0 cr2 6b0
Pid: 0, comm: swapper Not tainted 2.6.24-rc8-g3c2d7552 #27
Call Trace:
 [<ffffffff802602cd>] __build_all_zonelists+0x2a9/0x40a
 [<ffffffff80260110>] __build_all_zonelists+0xec/0x40a
 [<ffffffff802605ce>] build_all_zonelists+0x1a0/0x244
 [<ffffffff80811950>] start_kernel+0x110/0x2bd
 [<ffffffff808111c6>] _sinittext+0x1c6/0x1cd
RIP 0x10