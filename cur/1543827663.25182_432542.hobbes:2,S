Date: Sat, 10 Jun 2006 13:34:12 +0000
From: Pavel Machek <>
Subject: Re: [PATCH 4/9] PCI PM: save and restore configuration state correctly
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/6/13/87

Hi!
> This patch updates pci_save_state() and pci_restore_state() to be more
> in line with the PCI PM specification.  Specifically, read-only
> registers are no longer saved, BIST is never touched, and the command
> register is handled more carefully.  A new data structure "struct
> pci_dev_config" is created to store any context that might need to be
> saved before entering a higher power state.
> 
> The configuration space cache is now obsolete and no longer needed for
> PCI PM.  However, this patch does not remove it as it is still
> referenced by the PCI configuration space access restriction code.  As
> an unexpected bonus, this patch also fixes a possible memory leak;
> drivers/pci/access.c wasn't expecting the MSI code in pci_save_state().
This should solve problems for people that use 'backwards' PCI space
restoring these days. Thanks, nice!
							Pavel
-- 
Thanks for all the (sleeping) penguins.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/