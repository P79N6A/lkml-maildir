Date: Mon, 9 Jul 2001 09:20:41 -0700 (PDT)
From: Linus Torvalds <>
Subject: Re: VM in 2.4.7-pre hurts...
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/7/9/107

On Mon, 9 Jul 2001, Mike Galbraith wrote:
>
> I'm running oom whether I have swap enabled or not.  The inactive
> dirty list starts growing forever, until it's full of (aparantly)
> dirty pages and I'm utterly oom.
Does it help if you just remove the
	if (atomic_read(&page->count) > 2)
		goto out;
from shmem_writepage()?
It _shouldn't_ matter (because writepage() should only be called with
inactive pages anyway), but your problem certainly sounds like your
inactive dirty list is not able to write out shmfs pages.
Note that if you don't have swap, you're screwed anyway. You just don't
have anywhere to put the pages.
		Linus
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/