Date: Mon, 20 Mar 2000 22:19:11 -0800
From: "David S. Miller" <>
Subject: Re: 2.3.00p1/2.3.49: more problems concerning devfs & generic scsi
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/3/21/36

   Date: 	Sat, 18 Mar 2000 22:56:07 +0000 (GMT)
   From: Alan Cox <alan@lxorguk.ukuu.org.uk>
   That would work and long term is probably the right answer, but then how do
   you deal with vendor specific commands ?
SCSI_DATA_UNKNOWN is a suitable "I don't know" response.  The
only loss is one of performance, this is the case for the two
instances drivers use this information for:
1) To set PCI_DMA_* in pci DMA mapping calls, the DMA-mapping.txt
   doc explicitly allows PCI_DMA_BIDIRECTIONAL with the caveat that
   it may have a performance impact.
   For scsi generic, and vendor commands, big deal.
2) By scsi drivers specifically to give a hint to the card as to
   what data transfer direction to expect.
   In all history they have been able to deal with not knowing, so
   they can handle this case by implication. :-)
So if you just make the SG driver use SCSI_DATA_UNKNOWN all should
be ok.  Leaving it at SCSI_DATA_NONE when there is a data buffer
attached to the request is a BUG() and needs to be fixed.
Later,
David S. Miller
davem@redhat.com
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/