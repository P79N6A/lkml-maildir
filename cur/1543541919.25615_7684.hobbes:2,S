Date: Mon, 21 Aug 2000 00:01:44 -0300
From: Arnaldo Carvalho de Melo <>
Subject: [PATCH] smc9194.c: use kfree_skb to free sk_buffs
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/8/20/96

Hi,
     Please take a look and consider applying.
                        - Arnaldo
--- linux-2.4.0-test7-pre5/drivers/net/smc9194.c	Fri Jul 28 06:34:46 2000
+++ linux-2.4.0-test7-pre5.acme/drivers/net/smc9194.c	Sun Aug 20 23:52:28 2000
@@ -18,6 +18,8 @@
  .
  . author:
  . 	Erik Stahlman				( erik@vt.edu )
+ . contributors:
+ .      Arnaldo Carvalho de Melo <acme@conectiva.com.br>
  .
  . Hardware multicast code from Peter Cammaert ( pc@denkart.be )
  .
@@ -47,6 +49,7 @@
  .	03/06/96  Erik Stahlman  Added hardware multicast from Peter Cammaert
  .	04/14/00  Heiko Pruessing (SMA Regelsysteme)  Fixed bug in chip memory
  .				 allocation
+ .      08/20/00  Arnaldo Melo   fix kfree(skb) in smc_hardware_send_packet
  ----------------------------------------------------------------------------*/
 
 static const char *version =
@@ -623,7 +626,7 @@
 	if ( packet_no & 0x80 ) {
 		/* or isn't there?  BAD CHIP! */
 		printk(KERN_DEBUG CARDNAME": Memory allocation failed. \n");
-		kfree(skb);
+		kfree_skb(skb);
 		lp->saved_skb = NULL;
 		netif_wake_queue(dev);
 		return;
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/