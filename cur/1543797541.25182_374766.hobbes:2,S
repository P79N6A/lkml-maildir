Date: Sat, 10 Dec 2005 13:12:31 +0800
From: zja zja <>
Subject: always return NULL in ata_probe function
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/12/10/2

the ata_probe function is:
static struct kobject *ata_probe(dev_t dev, int *part, void *data)
{
        ide_hwif_t *hwif = data;
        int unit = *part >> PARTN_BITS;
        ide_drive_t *drive = &hwif->drives[unit];
        if (!drive->present)
                return NULL;
        if (drive->media == ide_disk)
                request_module("ide-disk");
        if (drive->scsi)
                request_module("ide-scsi");
        if (drive->media == ide_cdrom || drive->media == ide_optical)
                request_module("ide-cd");
        if (drive->media == ide_tape)
                request_module("ide-tape");
        if (drive->media == ide_floppy)
                request_module("ide-floppy");
        return NULL;
}
It will always return NULL, so it can't mount root device on boot time
in vmware, I don't know if it will work fine on other IDE disk. Is it
a problem?
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/