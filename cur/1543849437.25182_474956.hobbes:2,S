Date: Fri, 20 Oct 2006 18:17:52 +1000
From: Neil Brown <>
Subject: sysrq-t broke in -mm :  sysrq-x-show-blocked-tasks.patch   needs fixing
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/10/20/68

There is a test in the above mentioned patch in -mm that is backwards,
so
  echo t > /proc/sysrq-trigger
stopped working.
echo p > /proc/sysrq-trigger isn't working on my x86-64 either just at
the moment, but that must be something else...
NeilBrown
diff .prev/kernel/sched.c ./kernel/sched.c
--- .prev/kernel/sched.c	2006-10-20 18:01:12.000000000 +1000
+++ ./kernel/sched.c	2006-10-20 18:01:22.000000000 +1000
@@ -4825,7 +4825,7 @@ void show_state_filter(unsigned long sta
 		 * console might take alot of time:
 		 */
 		touch_nmi_watchdog();
-		if (state_filter && (p->state & state_filter))
+		if (state_filter == 0  || (p->state & state_filter))
 			show_task(p);
 	} while_each_thread(g, p);
 
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/