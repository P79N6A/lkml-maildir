Date: Tue, 25 Apr 2006 17:15:21 -0700
From: "Siddha, Suresh B" <>
Subject: Re: [PATCH] sched: fix evaluation of skip_for_load in move_tasks()
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/4/25/329

On Wed, Apr 26, 2006 at 09:23:32AM +1000, Peter Williams wrote:
> Siddha, Suresh B wrote:
> > I think we need to change this to
> > 	if (skip_for_load && idx < this_best_prio && idx == busiest_best_prio)
> > 		skip_for_load = !busiest_best_prio_seen;
> > 
> > Otherwise we will reset skip_for_load to '0' even for the tasks whose prio is 
> > less than this_best_prio but not equal to busiest_best_prio.
> 
> And why is that a problem?  The intention of this code is to make sure 
> at least one busiest_best_prio task doesn't get moved as a result of the 
> "skip for reasons of load weight" mechanism being overridden by the "idx 
> < this_best_prio" exception.  I can't see how this intention is being 
> subverted.
There might be scenarios where we will endup moving other priority tasks(
not those with busiest_best_prio) which will still become highest priority
on new queue. This may or may not be bad. But this was not our intention
with the intended code, right?
thanks,
suresh
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/