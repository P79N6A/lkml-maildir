Date: Tue, 6 Feb 2007 23:08:55 +0100
From: Ingo Molnar <>
Subject: Re: 2.6.20-rc6-mm3
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/2/6/341

* Daniel Walker <dwalker@mvista.com> wrote:
> > > If we change the current "timer" entry to be listed as 
> > > "lapic-timer" and not "IO-APIC-edge" (or one of the other names) 
> > > and replace it with the count from LOC
[...]
> > But, as per the previous mails, the new behavior is just fine, 
> > because /proc/interrupts just reflects reality. And the way the 
> > kernel utilizes the hardware has just changed - for the better.
> > 
> > The same happens when say a network driver implements NAPI: the IRQ 
> > count goes way, way down. Or if a driver starts supporing MSI - the 
> > IRQ line even moves to another one. Do we try to fix those counts up 
> > to match the 'previous behavior'? Of course not. What you are 
> > suggesting makes no sense, is against current kernel practices - as 
> > we pointed it out to you 7 mails ago.
> 
> I'm not saying we should "fake" anything .. [...]
sorry but that's precisely what your suggestion above results in:
> > > If we change the current "timer" entry to be listed as 
> > > "lapic-timer" and not "IO-APIC-edge" (or one of the other names) 
> > > and replace it with the count from LOC
"replace the timer entry with lapic-timer and put the LOC count there" 
is faking something that does not reflect reality. The 'timer' count is 
for IRQ#0, not for the local apic timer.
> [...] I'm saying list what's really happening .. In a human readable 
> way .
we list precisely what is happening: the number of IRQ#0 interrupts and 
the number of local APIC timer interrupts. Precisely where their 
traditional place is.
i think you might be confused by the generic name that says 'timer'. You 
should notice the other bits that are there too:
           CPU0       CPU1
  0:        495          0   IO-APIC-edge      timer
the '0' means IRQ#0. That makes it clear that this is the PIT timer. 
Clearer now?
	Ingo
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/