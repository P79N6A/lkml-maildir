Date: Mon, 12 Apr 1999 16:22:57 +0100
From: David Woodhouse <>
Subject: 2.2.5: Problems with Cisco RX on hostess_sv11
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/4/12/74

I'm having repeatable loss of service with Cisco encapsulation over a leased 
line, using a Comtrol Hostess SV11.
Transmission is always working fine, except that it complains 'spurious tx 
done' upon transmission of every packet. I don't care too much about that.
I get about 20 seconds of service, at which point it complains:
Apr 12 15:35:09 target3 kernel: hdlc0: invalid input packet <0x8f 0x0 0x2000>
It then doesn't receive packets for about ten seconds, after which it 
complains again:
Apr 12 15:35:20 target3 kernel: hdlc0: invalid cisco packet length: 20 bytes
Apr 12 15:35:20 target3 kernel: hdlc0: invalid input packet <0x8f 0x0 0x2000>
 ... and the link comes back to life for another 20-odd seconds.
I've tried varying the keepalive interval (at my end) between 5 and 30 
seconds, which makes no difference.
Here's a more complete log. All that's happening on the link is 'ping' at 1 
second intervals...
Apr 12 16:20:46 target3 kernel: Cronyx Ltd, Synchronous PPP and CISCO HDLC (c) 1994
Apr 12 16:20:46 target3 kernel: Linux port (c) 1998 Building Number Three Ltd & Jan "Yenya" Kasprzak.
Apr 12 16:20:49 target3 kernel: Generic Z85C30/Z85230 interface driver v0.02
Apr 12 16:20:49 target3 kernel: SV-11 Z85230 Synchronous Driver v 0.02.
Apr 12 16:20:49 target3 kernel: (c) Copyright 1998, Building Number Three Ltd.
Apr 12 16:20:49 target3 kernel: hdlc0: Z85230 found at I/O 0x200, IRQ 5.
Apr 12 16:20:49 target3 kernel: hdlc0: spurious tx done
Apr 12 16:20:49 target3 kernel: hdlc0: DCD raised
Apr 12 16:20:49 target3 kernel: hdlc0: spurious tx done
Apr 12 16:20:50 target3 kernel: hdlc0: cisco output: <2h 1000000h 0h ffffh 7200h-12a3h>
Apr 12 16:20:50 target3 kernel: hdlc0: spurious tx done
Apr 12 16:20:55 target3 last message repeated 6 times
Apr 12 16:20:55 target3 kernel: hdlc0: invalid cisco packet length: 20 bytes
Apr 12 16:20:55 target3 kernel: hdlc0: invalid input packet <0x8f 0x0 0x2000>
Apr 12 16:20:56 target3 kernel: hdlc0: spurious tx done
Apr 12 16:20:56 target3 kernel: hdlc0: rx IP packet
Apr 12 16:20:57 target3 kernel: hdlc0: spurious tx done
Apr 12 16:20:57 target3 kernel: hdlc0: rx IP packet
Apr 12 16:20:58 target3 kernel: hdlc0: spurious tx done
Apr 12 16:20:58 target3 kernel: hdlc0: rx IP packet
Apr 12 16:20:59 target3 kernel: hdlc0: spurious tx done
Apr 12 16:20:59 target3 kernel: hdlc0: rx IP packet
Apr 12 16:21:00 target3 kernel: hdlc0: cisco output: <2h 2000000h 0h ffffh 7200h-22cah>
Apr 12 16:21:00 target3 kernel: hdlc0: spurious tx done
Apr 12 16:21:00 target3 kernel: hdlc0: spurious tx done
Apr 12 16:21:00 target3 kernel: hdlc0: rx IP packet
Apr 12 16:21:01 target3 kernel: hdlc0: spurious tx done
Apr 12 16:21:01 target3 kernel: hdlc0: rx IP packet
Apr 12 16:21:02 target3 kernel: hdlc0: spurious tx done
Apr 12 16:21:02 target3 kernel: hdlc0: rx IP packet
Apr 12 16:21:03 target3 kernel: hdlc0: spurious tx done
Apr 12 16:21:03 target3 kernel: hdlc0: rx IP packet
Apr 12 16:21:04 target3 kernel: hdlc0: spurious tx done
Apr 12 16:21:04 target3 kernel: hdlc0: rx IP packet
Apr 12 16:21:05 target3 kernel: hdlc0: spurious tx done
Apr 12 16:21:05 target3 kernel: hdlc0: rx IP packet
Apr 12 16:21:06 target3 kernel: hdlc0: spurious tx done
Apr 12 16:21:06 target3 kernel: hdlc0: rx IP packet
Apr 12 16:21:07 target3 kernel: hdlc0: spurious tx done
Apr 12 16:21:07 target3 kernel: hdlc0: rx IP packet
Apr 12 16:21:08 target3 kernel: hdlc0: spurious tx done
Apr 12 16:21:08 target3 kernel: hdlc0: rx IP packet
Apr 12 16:21:09 target3 kernel: hdlc0: spurious tx done
Apr 12 16:21:09 target3 kernel: hdlc0: rx IP packet
Apr 12 16:21:10 target3 kernel: hdlc0: cisco output: <2h 3000000h 0h ffffh 7200h-32f1h>
Apr 12 16:21:10 target3 kernel: hdlc0: spurious tx done
Apr 12 16:21:10 target3 kernel: hdlc0: spurious tx done
Apr 12 16:21:10 target3 kernel: hdlc0: rx IP packet
Apr 12 16:21:11 target3 kernel: hdlc0: spurious tx done
Apr 12 16:21:11 target3 kernel: hdlc0: rx IP packet
Apr 12 16:21:12 target3 kernel: hdlc0: spurious tx done
Apr 12 16:21:12 target3 kernel: hdlc0: rx IP packet
Apr 12 16:21:13 target3 kernel: hdlc0: spurious tx done
Apr 12 16:21:13 target3 kernel: hdlc0: rx IP packet
Apr 12 16:21:14 target3 kernel: hdlc0: spurious tx done
Apr 12 16:21:14 target3 kernel: hdlc0: rx IP packet
Apr 12 16:21:15 target3 kernel: hdlc0: spurious tx done
Apr 12 16:21:15 target3 kernel: hdlc0: rx IP packet
Apr 12 16:21:16 target3 kernel: hdlc0: spurious tx done
Apr 12 16:21:16 target3 kernel: hdlc0: rx IP packet
Apr 12 16:21:16 target3 kernel: hdlc0: invalid input packet <0x8f 0x0 0x2000>
Apr 12 16:21:17 target3 kernel: hdlc0: spurious tx done
Apr 12 16:21:19 target3 last message repeated 2 times
Apr 12 16:21:20 target3 kernel: hdlc0: cisco output: <2h 4000000h 0h ffffh 7300h-4218h>
Apr 12 16:21:20 target3 kernel: hdlc0: spurious tx done
Apr 12 16:21:26 target3 last message repeated 7 times
Apr 12 16:21:26 target3 kernel: hdlc0: invalid cisco packet length: 20 bytes
Apr 12 16:21:26 target3 kernel: hdlc0: invalid input packet <0x8f 0x0 0x2000>
Apr 12 16:21:27 target3 kernel: hdlc0: spurious tx done
Apr 12 16:21:27 target3 kernel: hdlc0: rx IP packet
Apr 12 16:21:28 target3 kernel: hdlc0: spurious tx done
Apr 12 16:21:28 target3 kernel: hdlc0: rx IP packet
 
----                                 ----                                 ----
David Woodhouse        David.Woodhouse@mvhi.com       Office: (+44) 1223 810302
 Project Leader,     Process Information Systems      Mobile: (+44) 976 658355
    Axiom (Cambridge) Ltd., Swaffham Bulbeck, Cambridge, CB5 0NA, UK.
             finger dwmw2@ferret.lmh.ox.ac.uk for PGP key.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/