Date: Thu, 13 Jan 2005 11:59:42 +1100
From: Dave Airlie <>
Subject: Re: [PATCH] kill symbol_get & friends
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/1/12/333

> 
> Sorry, Christoph, I must be particularly obtuse today.
> 
> If you don't hold a reference, then yes, the module can go away.  This
> hasn't been a huge problem for users in the past.
> 
> The lack of users is because, firstly, dynamic dependencies are less
> common than static ones, and secondly because the remaining inter-module
> users (AGP and mtd) have not been converted.  Patches have been sent
> several times, but maintainers are distracted, it seems.  I *will* run
> out of patience and push those patches which take away intermodule.c one
> day (hint, hint!).
well the DRM doesn't use the AGP anymore so it should be safe to nuke
(does i810 framebuffer use it??), Christoph didn't like converting the
DRM to use module_get so I just went straight to the agp backend..
it's not perfect but it'll work in nearly all situations..
> 
> For optional module dependencies, weak symbols can be used, but there
> seems to be a desire for genuine dynamic dependencies.  If you can get
> rid of those, I'll apply your patch in a second!
what weak symbol support? can I actually use gcc weak symbols and have
it all work?
what happens if the module goes away? 
Dave.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/