Date: Sat, 19 Jan 2002 17:41:43 -0500 (EST)
From: "D. Hugh Redelmeier" <>
Subject: Re: [PATCH] Andre's IDE Patch (1/7)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/1/19/91

| From: Rob Radez <rob@osinvestor.com>
| This is the first of seven patches against 2.4.18-pre4, beginning the breakup
| of Andre Hedrick's IDE patch into smaller chunks.
I'm glad you are doing this, although I am ignorant of the politics.
I have an HPT366 that I have never used due to fear of drivers not in
the mainstream.
| diff -ruN linux-2.4.18-pre3/drivers/ide/ide-cd.h linux-2.4.18-pre3-ide-rr/drivers/ide/ide-cd.h
| --- linux-2.4.18-pre3/drivers/ide/ide-cd.h	Thu Nov 22 14:46:58 2001
| +++ linux-2.4.18-pre3-ide-rr/drivers/ide/ide-cd.h	Mon Jan 14 18:29:06 2002
| @@ -38,7 +38,9 @@
|  /************************************************************************/
| 
|  #define SECTOR_BITS 		9
| +#ifndef SECTOR_SIZE
|  #define SECTOR_SIZE		(1 << SECTOR_BITS)
| +#endif
|  #define SECTORS_PER_FRAME	(CD_FRAMESIZE >> SECTOR_BITS)
|  #define SECTOR_BUFFER_SIZE	(CD_FRAMESIZE * 32)
|  #define SECTORS_BUFFER		(SECTOR_BUFFER_SIZE >> SECTOR_BITS)
Being a chicken, I wonder if this would be better as:
   #define SECTOR_BITS 		9
  +#ifdef SECTOR_SIZE
  +#if SECTOR_SIZE != (1 << SECTOR_BITS)
  +#error SECTOR_SIZE != (1 << SECTOR_BITS)
  +#else
   #define SECTOR_SIZE		(1 << SECTOR_BITS)
  +#endif
   #define SECTORS_PER_FRAME	(CD_FRAMESIZE >> SECTOR_BITS)
   #define SECTOR_BUFFER_SIZE	(CD_FRAMESIZE * 32)
   #define SECTORS_BUFFER		(SECTOR_BUFFER_SIZE >> SECTOR_BITS)
Hugh Redelmeier
hugh@mimosa.com  voice: +1 416 482-8253
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/