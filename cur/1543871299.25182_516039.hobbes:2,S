Date: Tue, 6 Mar 2007 08:37:45 +0100
From: "Paul Rolland" <>
Subject: RE: [git patches] libata fixes
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/3/6/35

Hell Tejun,
I've boot-tested this yesterday, with no real luck... 
1 - Tested on top of 2.6.21-rc2 (hope it's fine for you),
2 - Collected a full dmesg before and after
Extract is :
ata7: PATA max UDMA/100 cmd 0x0000000000019c00 ctl 0x0000000000019882 bmdma
0x00
00000000019400 irq 16
ata8: PATA max UDMA/100 cmd 0x0000000000019800 ctl 0x0000000000019482 bmdma
0x00
00000000019408 irq 16
scsi6 : pata_jmicron
ata7.00: ATAPI, max UDMA/66
ata7.00: configured for UDMA/66
scsi7 : pata_jmicron
ATA: abnormal status 0x7F on port 0x0000000000019807
ata7.00: exception Emask 0x0 SAct 0x0 SErr 0x0 action 0x2 frozen
ata7.00: cmd a0/01:00:00:00:00/00:00:00:00:00/a0 tag 0 cdb 0x12 data 36 in
         res 40/00:00:00:00:00/00:00:00:00:00/00 Emask 0x4 (timeout)
ata7: soft resetting port
ata7.00: configured for UDMA/66
ata7: EH complete
ata7.00: exception Emask 0x0 SAct 0x0 SErr 0x0 action 0x2 frozen
ata7.00: cmd a0/01:00:00:00:00/00:00:00:00:00/a0 tag 0 cdb 0x12 data 36 in
         res 40/00:00:00:00:00/00:00:00:00:00/00 Emask 0x4 (timeout)
ata7: soft resetting port
ata7.00: configured for UDMA/66
ata7: EH complete
ata7.00: exception Emask 0x0 SAct 0x0 SErr 0x0 action 0x2 frozen
ata7.00: cmd a0/01:00:00:00:00/00:00:00:00:00/a0 tag 0 cdb 0x12 data 36 in
         res 40/00:00:00:00:00/00:00:00:00:00/00 Emask 0x4 (timeout)
ata7: soft resetting port
ata7.00: configured for UDMA/66
ata7: EH complete
ata7.00: limiting speed to UDMA/44:PIO4
ata7.00: exception Emask 0x0 SAct 0x0 SErr 0x0 action 0x2 frozen
ata7.00: cmd a0/01:00:00:00:00/00:00:00:00:00/a0 tag 0 cdb 0x12 data 36 in
         res 40/00:00:00:00:00/00:00:00:00:00/00 Emask 0x4 (timeout)
ata7: soft resetting port
ata7.00: configured for UDMA/44
ata7: EH complete
Hope this helps...
Regards,
Paul
Paul Rolland, rol(at)as2917.net
ex-AS2917 Network administrator and Peering Coordinator
--
Please no HTML, I'm not a browser - Pas d'HTML, je ne suis pas un navigateur 
"Some people dream of success... while others wake up and work hard at it" 
"I worry about my child and the Internet all the time, even though she's too 
young to have logged on yet. Here's what I worry about. I worry that 10 or 15 
years from now, she will come to me and say 'Daddy, where were you when they 
took freedom of the press away from the Internet?'"
--Mike Godwin, Electronic Frontier Foundation 
  
> -----Original Message-----
> From: linux-ide-owner@vger.kernel.org 
> [mailto:linux-ide-owner@vger.kernel.org] On Behalf Of Tejun Heo
> Sent: Monday, March 05, 2007 4:45 PM
> To: rol@as2917.net
> Cc: 'Jeff Garzik'; 'Andrew Morton'; 'Linus Torvalds'; 
> linux-ide@vger.kernel.org; 'LKML'; 'Eric D. Mudama'
> Subject: Re: [git patches] libata fixes
> 
> Paul Rolland wrote:
> > Hello,
> > 
> >> Your drive has some issues with NCQ and is scheduled to be 
> blacklisted
> >> such that it isn't enabled.  libata used to ignore the 
> >> condition but now
> >> considers it NCQ protocol violation and fails all pending commands.
> > 
> > OK, do you need an hdparm report to fully identify the disk ?
> 
> Nope, we already know.
> 
> >> libata EH should turn NCQ off automatically after a few of 
> the above
> >> errors.  I'd love to see how that actually works in the field (full
> >> dmesg please).  If it doesn't, it needs fixing.
> > 
> > I'll get you one tonite, I don't have access to the machine 
> right now.
> 
> Great. Thanks.
> 
> -- 
> tejun
> -
> To unsubscribe from this list: send the line "unsubscribe 
> linux-ide" in
> the body of a message to majordomo@vger.kernel.org
> More majordomo info at  
http://vger.kernel.org/majordomo-info.html
> 
[unhandled content-type:application/octet-stream][unhandled content-type:application/octet-stream]