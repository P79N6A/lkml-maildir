Date: 3 Sep 2000 11:30:21 GMT
From: (Miquel van Smoorenburg)
Subject: Re: NR_TASKS
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/9/3/19

In article <Pine.LNX.4.21.0009030137460.1022-100000@asdf.capslock.lan>,
Mike A. Harris <mharris@meteng.on.ca> wrote:
>To change NR_TASKS, can one just redefine it somehow in the top
>Makefile, or must one edit the actual header file?  I'm looking
>at a quick and dirty way of automating changing NR_TASKS more
>easily.
I usually apply the following diff. It works on all 2.2 kernels.
Note that in 2.4 the # of tasks is dynamic, and is a function of
how much memory you have in the box. On my 128 MB machine it
results in slighly less than 4000 tasks max.
diff -ruN linux-2.2.17pre5.orig/include/linux/tasks.h linux-2.2.17pre5/include/linux/tasks.h
--- linux-2.2.17pre5.orig/include/linux/tasks.h	Tue May 11 19:35:42 1999
+++ linux-2.2.17pre5/include/linux/tasks.h	Wed Jun 21 08:30:47 2000
@@ -11,7 +11,7 @@
 #define NR_CPUS 1
 #endif
 
-#define NR_TASKS	512	/* On x86 Max 4092, or 4090 w/APM configured. */
+#define NR_TASKS	2048	/* On x86 Max 4092, or 4090 w/APM configured. */
 
 #define MAX_TASKS_PER_USER (NR_TASKS/2)
 #define MIN_TASKS_LEFT_FOR_ROOT 4
Mike.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/