Date: Thu, 24 Dec 1998 00:31:00 +0200 (EET)
From: Matti Aarnio <>
Subject: Re: m68k softirq.h fix
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1998/12/23/158

> Hi all,
> 
> 	Yet another fix.  bh_mask_count is an array of atomic_t, which
> is a struct with a single int variable called counter.  I assume this
> patch is correct and is the original intent of the code.
> 
> -- DN (No, I still have no idea what I'm doing.  But it compiles! <g>)
	Sure it does compile, but it is wrong.
	See model from AC's patches:
ftp://ftp.uk.linux.org/pub/linux/alan/2.1/patch-2.1.132-ac2.bz2
	see 'softirq.h' files in it.
	For the idea WHY your code is wrong, see Alpha's definitions
	for  atomic_inc(), and friends.  You must not go setting,
	or (heaven forbid), blindly ++:ing fields in there!
/Matti Aarnio <matti.aarnio@sonera.fi>
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/