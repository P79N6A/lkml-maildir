Date: Wed, 16 Apr 2003 12:04:49 -0400
From: Jeff Garzik <>
Subject: Re: cciss patches for 2.4.21pre7
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/4/16/133

On Wed, Apr 16, 2003 at 10:53:48AM -0500, Miller, Mike (OS Dev) wrote:
> -	for (i=0; i<6; i++) {
> +	for (i=0; i<DEVICE_COUNT_RESOURCE; i++) {
>  		/* is this an IO range */
>  		if (pdev->resource[i].flags & 0x01) {
>  			c->io_mem_addr = pdev->resource[i].start;
> @@ -2492,6 +2521,7 @@
>  			printk("IO value found base_addr[%d] %lx %lx\n", i,
>  				c->io_mem_addr, c->io_mem_length);
>  #endif /* CCISS_DEBUG */
> +			printk(KERN_DEBUG "IO range: %lx\n", c->io_mem_addr);
>  			/* register the IO range */
>  			if (!request_region( c->io_mem_addr,
>                                          c->io_mem_length, "cciss")) {
> @@ -2511,7 +2541,7 @@
>  	printk("device_id = %x\n", device_id);
>  	printk("command = %x\n", command);
>  	for(i=0; i<6; i++)
> -		printk("addr[%d] = %x\n", i, addr[i]);
> +		printk("addr[%d] = %x\n", i, pdev->resource[i].start);
FWIW, if you care about source compatibility, or just like the
convenient wrappers, you can use
	pci_resource_start(pdev, BAR#)
in place of
	pdev->resource[i].start.
Ditto for .len and pci_resource_len() wrapper.
If you don't care, just ignore this message, the code otherwise looks ok.
	Jeff
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/