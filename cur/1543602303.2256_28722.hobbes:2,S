Date: Mon, 24 Sep 2001 23:17:58 -0700
From: Nicholas Knight <>
Subject: Re: [PATCH] 2.4.10 improved reiserfs a lot, but could still be better
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/9/25/4

On Monday 24 September 2001 11:00 pm, Beau Kuiper wrote:
> On Mon, 24 Sep 2001, Nicholas Knight wrote:
> > It's a very remote possability of failure, like most instances
> > where write-cache would cause problems. Catastrophic failure of the
> > IDE cable in mid-write will cause problems. If write cache is
> > enabled, the write stands a higher chance of having made it to the
> > drive before the cable died, with it off, it stands a higher chance
> > of NOT having made it entirely to the drive.
>
> Catastrophic failure of the IDE cable???.
> What are you doing to the poor thing, jumping on it?
actually, jumping on it while it's flat probably wouldn't cause too 
many problems... :P
It's not neccisarily that the cable failed, poor choice of words on my 
part probably, the instance I was thinking of was the cable pulled out 
of the drive while it's in operation, I've seen cables pulled and 
nearly pulled out of drives in operation, it can happen with a slip of 
your hand while checking a fan, I poke around in my system while it's 
on all the time, luckily I've yet to pull out the cable on my own 
system, but I've seen it done.
>
> Anyway, with a UPS, the issue of IDE device write caching is fairly
> moot. As long as power is applied, any write issued to the drive will
> be completed regardless of whether write caching is on or off. I am
This was my point in all this really, aside from failure of the drive 
itself, add a cheap UPS and the only risk is that your HDD controller 
decides to write garbage :)
> fairly certain the write caching is pretty conservative, which is
> write as soon as possible after elavating with other write requests
> and giving read requests priority.
>
> I can imagine how it improves sequenial write performace too. With
> the write cache off, the computer cannot send another write request
> to the IDE device until the last one had finished. By the time the
> computer is told the request was finished and it has sent a new
> request to the drive, the disk would have spun out of the place it
> was supposed to be placed. The drive will then have to wait for the
> disk to spin around fully again before doing the write. With the
> write cache enabled, several requests can be placed into the drive
> buffer and written in the single revolution of the drive.
OK, now THIS makes sense! Thanks.
>
> Beau Kuiper
> kuib-kl@ljbc.wa.edu.au
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/