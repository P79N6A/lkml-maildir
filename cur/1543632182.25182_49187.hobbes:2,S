Date: Thu, 30 May 2002 20:11:16 -0500
From: "Jon Hedlund" <>
Subject: 2.4 bootdisk kernel panic
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/5/30/10

I have been trying to update a 1.44 floppy based linux system to a 
2.4.18 kernel from 2.4.4. However whenever I try to boot the 
updated floppy I get the following kernel panic:
RAMDISK: Compressed image found at block 501
VFS: Mounted root (ext2 filesystem)
Freeing unused kernel memory: 64K freed
Kernel panic: no init found. Try passing init= option to the kernel.
I have tried it with a bunch of kernels, 2.4.4, 2.4.7 and 2.4.9 boot 
fine, 2.4.12, 2.4.13, 2.4.17, and 2.4.18 all give the panic.
I create the bootdisk with the following script:
rdev bzImage /dev/fd0
rdev -R bzImage 0
rdev -r bzImage 16885
# 16885= Don't prompt, Load ramdisk, offset = 501
dd if=bzImage of=tempfi bs=1k conv=sync
cat rootfs.gz >> tempfi
dd if=tempfi of=/dev/fd0 bs=1k
I manually edit the 16885 for whatever the size of the kernel is, just 
over 500KB in this case.
The kernel doesn't use loadable modules.
Modules are compiled into the kernel for the tulip network card, 
iptables, ext2, floppy drive, etc. I can post my config file if more info 
is needed.
JonH
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/