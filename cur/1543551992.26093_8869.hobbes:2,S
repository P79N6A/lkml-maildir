Date: Thu, 19 Oct 2000 11:52:25 +1100
From: Keith Owens <>
Subject: Re: [PATCH] Make agpsupport work with modversions
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/10/18/117

On Wed, 18 Oct 2000 20:44:19 -0400 (EDT), 
Alan Cox <alan@redhat.com> wrote:
>Keith Owens wrote
>> Nice and clean.  WEAK_EXTERN does some magic to create a NULL pointer
>> at link time or load time if the symbol is not resolved.
>
>It also has to do the rest of the magic to handle module load/unload in 
>parallel but that can be done as per the current code
modprobe would attempt to satisfy weak external references as if they
were normal references, including all the module dependency chains and
reference counts.  If the reference cannot be satisfied, it is set to
zero instead of causing an error.  No changes to load/unload.
>> Linus, do you want a patch for this?
>
>2.5 surely
Normally I would agree but the existing code is going to cause problems
all the way through 2.4.  This only affects drivers/net/8390.h (all
8390 cards?) drivers/char/drm/agpsupport.c, drivers/mtd/cfi_probe.c,
drivers/mtd/docprobe.c.  As currently coded, some of those simply will
not work with symbol versions.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/