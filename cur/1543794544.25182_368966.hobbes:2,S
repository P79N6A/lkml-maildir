Date: Mon, 21 Nov 2005 11:53:53 +0100
From: Uwe Zeisberger <>
Subject: Re: make kernelrelease ignoring LOCALVERSION_AUTO
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/11/21/47

James Cloos wrote:
> I did a $(git-repack -a -d && git-prune-packed) before trying the bisect.  
> 
> I also found that $(make oldconfig; make kernelrelease) was enough to
> bisect down to the commit in question.
> 
> The final git bisect bad reported:
> 
> ,---- :; git bisect bad
> | ac4d5f74a9b243d9f3f123fe5ce609478df208d8 is first bad commit
> | diff-tree ac4d5f74a9b243d9f3f123fe5ce609478df208d8 (from ab919c06144cfb11c05b5b5cd291daa96ac2e423)
> | Author: Uwe Zeisberger <zeisberg@informatik.uni-freiburg.de>
> | Date:   Wed Nov 9 15:54:08 2005 +0100
> | 
> |     [PATCH] kbuild: make kernelrelease in unconfigured kernel prints an error
> | 
> |     Do not include .config for target kernelrelease
> | 
> |     Signed-off-by: Uwe Zeisberger <zeisberg@informatik.uni-freiburg.de>
> |     Signed-off-by: Sam Ravnborg <sam@ravnborg.org>
> | 
> | :100644 100644 2dac8010c14296bf71b20da92d7256d6a5b41f22 3152d6377eb20bb79a95850fabf7b6fee3a64ad2 M      Makefile
> `----
>
> Whatever the solution, it is commit ac4d5f74a9b243d9f3f123fe5ce609478df208d8
> that breaks $(make kernelrelease).
That's true, I recently realized that, too, but didn't find the time to
react.
In my eyes the solution has to be that .config is included iff it
exists.
I'll work out a patch and send it to you.
Best regards
Uwe
-- 
Uwe Zeisberger
exit vi, lesson V:
o : q ! CTRL-V <CR> <Esc> " d d d @ d
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/