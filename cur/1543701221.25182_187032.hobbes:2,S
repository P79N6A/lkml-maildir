Date: Tue, 30 Dec 2003 12:02:37 +0000
From: Roger Gammans <>
Subject: Re: [2.4.18] oops in lvm or raid
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/12/30/76

On Mon, Dec 29, 2003 at 06:16:10PM +0100, Christophe Saout wrote:
> Am Mo, den 29.12.2003 schrieb Roger Gammans um 15:59:
> 
> > Dec 29 13:15:23 turin kernel: lvm -- giving up to snapshot /dev/rootvg/data_root on /dev/rootvg/data_20031218: out of spa
> > Dec 29 13:15:23 turin kernel: Unable to handle kernel paging request at virtual address 00015618
> > Dec 29 13:15:23 turin kernel:  printing eip:
> > Dec 29 13:15:23 turin kernel: c4847a7c
> >                               c4847a7c -> lvm_snapshot_remap_block (c4847a0c)
> >
> > This is a stock kernel (bf2.4) from debian stable (Version: 2.4.18-5)
> 
> LVM1 snapshotting in the plain 2.4.18 kernel is known to have bugs.
Ah. Ok.
But to be honest I could have (and indeed should have) deleted the sanpshot 
before doing the write to the volume which caused the snapshot ot 
run out of space. As long as the snapshot intergrity is good I'm happy.
My real worry is taht this was triggered by a raid problem and we've got
serious data corruption in both the ext3 and lvm metadata.
> You should upgrade to the latest LVM 1.0.8 kernel code. Well, I can't
> access the Sistina website at the moment. I'm sure you can find a
> lvm_1.0.8.tar.gz (or lvm_1.0.7.tar.gz which also has most bugs fixed)
> somewhere.
The site seems to be back now.
> [snip] 
> Or you can upgrade to the 2.4.23 kernel, I think it contains the LVM
> 1.0.7 code.
Ok. We need to make some sort of decision here about what kernel to use
then there has been an degree of discusson about exactly how
conservative we should be anyway . Does 2.4.23 have the vfs-locking
patch ?
TTFN
-- 
Roger. 	                        Home| 
http://www.sandman.uklinux.net/
Master of Peng Shui.      (Ancient oriental art of Penguin Arranging)
Work|Independent Sys Consultant | 
http://www.computer-surgery.co.uk/
So what are the eigenvalues and eigenvectors of 'The Matrix'? --anon
[unhandled content-type:application/pgp-signature]