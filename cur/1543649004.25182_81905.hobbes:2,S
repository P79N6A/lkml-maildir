Date: Sun, 20 Oct 2002 20:01:54 +0200 (MET DST)
From: Mikael Pettersson <>
Subject: [PATCH] 2.5.44 mrproper removes editor backup files
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/10/20/131

Contrary to years of history and several explicit comments in
Makefile that mrproper != distclean, 2.5.44 merged the two
which causes mrproper to incorrectly remove editor backup files.
Suggested fix below -- works for me.
/Mikael
--- linux-2.5.44/Makefile.~1~	2002-10-20 18:51:07.000000000 +0200
+++ linux-2.5.44/Makefile	2002-10-20 19:36:20.000000000 +0200
@@ -712,7 +712,11 @@
 #
 quiet_cmd_mrproper = RM  $$(MRPROPER_DIRS) + $$(MRPROPER_FILES)
 cmd_mrproper = rm -rf $(MRPROPER_DIRS) && rm -f $(MRPROPER_FILES)
-mrproper distclean: clean archmrproper
+mrproper: clean archmrproper
+	@echo '  Making $@ in the srctree'
+	$(call cmd,mrproper)
+
+distclean: mrproper
 	@echo '  Making $@ in the srctree'
 	@find . $(RCS_FIND_IGNORE) \
 	 	\( -name '*.orig' -o -name '*.rej' -o -name '*~' \
@@ -720,7 +724,6 @@
 	 	-o -name '.*.rej' -o -size 0 \
 		-o -name '*%' -o -name '.*.cmd' -o -name 'core' \) \
 		-type f -print | xargs rm -f
-	$(call cmd,mrproper)
 
 # Generate tags for editors
 # ---------------------------------------------------------------------------
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/