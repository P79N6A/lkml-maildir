Date: Mon, 12 Nov 2001 18:10:52 +0100
From: Thorsten Kukuk <>
Subject: Re: [PATCH] fix loop with disabled tasklets
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/11/12/134

On Mon, Nov 12, Andrea Arcangeli wrote:
> On Mon, Nov 12, 2001 at 03:04:52PM +0100, Andrea Arcangeli wrote:
> > On Mon, Nov 12, 2001 at 12:03:05AM -0800, David S. Miller wrote:
> > >    From: Andrea Arcangeli <andrea@suse.de>
> > >    Date: Mon, 12 Nov 2001 02:11:42 +0100
> > > 
> > >    I'm just guessing: the scheduler isn't yet functional when
> > >    spawn_ksoftirqd is called.
> > > 
> > > The scheduler is fully functional, this isn't what is going wrong.
> > 
> > check ret_from_fork path, sparc32 scheduler is broken and this is why it
> > deadlocks at boot, it has nothing to do with the softirq code, softirq
> > code is innocent and it only get bitten by the sparc32 bug.
> 
> real fix looks like this (no idea what PSR_PIL means so not sure if this
> really works on UP but certainly the sched_yield breakage is fixed now
> and it won't deadlock in the softirq code any longer):
A kernel with Andrea patch boots (after renaming all remaining
ret_from_smpfork to ret_from_fork) on one critical machine from me.
I will test the other this evening.
  Thorsten
-- 
Thorsten Kukuk       
http://www.suse.de/~kukuk/
        kukuk@suse.de
SuSE GmbH            Deutschherrenstr. 15-19       D-90429 Nuernberg
--------------------------------------------------------------------    
Key fingerprint = A368 676B 5E1B 3E46 CFCE  2D97 F8FD 4E23 56C6 FB4B
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/