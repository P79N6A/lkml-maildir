Date: Tue, 15 Nov 2005 12:30:33 -0800
From: Chris Wright <>
Subject: Re: Documentation for CPU hotplug support
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/11/15/259

* Andrew Morton (akpm@osdl.org) wrote:
> Nathan Lynch <nathanl@austin.ibm.com> wrote:
> >
> >  Argh, no.  That current_in_cpuhotplug hack has to go.
> 
> Yes, Ashok is busily working on removing that ;)
That's nice.  As it is, it deadlocks on boot:
cpufreq_stats_init
  lock_cpu_hotplug
  cpufreq_stat_cpu_callback
  ... (trace below)
  cpufreq_governor_performance
  __cpufreq_driver_target
  lock_cpu_hotplug  <-- uh-oh
SysRq : Show State
                                               sibling
  task             PC      pid father child younger older
swapper       D 003D08BC   764     1      0     2 			(L-TLB)
       eff8ed78 ef832030 c184a5f0 003d08bc effc5180 000000d0 df810b00 003d08bc
       00000002 ef832030 c184a5a0 00000000 df810b00 003d08bc ef832030 eff8dab0
       eff8dbd8 c0637140 c0637148 00000282 eff8edb0 c058bad3 eff8dab0 00000001
Call Trace:
 [<c058bad3>] __down+0x76/0xde
 [<c058a4aa>] __down_failed+0xa/0x10
 [<c04609ef>] .text.lock.cpufreq+0xee/0x1ff
 [<c0461049>] cpufreq_governor_performance+0x5d/0x74
 [<c045ff1c>] __cpufreq_governor+0x70/0x106
 [<c04603d8>] __cpufreq_set_policy+0x214/0x2b9
 [<c04605db>] cpufreq_update_policy+0xca/0xf1
 [<c0460fd5>] cpufreq_stat_cpu_callback+0x27/0x3e
 [<c06f657d>] cpufreq_stats_init+0xf0/0x152
 [<c06d59c2>] do_initcalls+0x56/0xba
 [<c06d5a4a>] do_basic_setup+0x24/0x2a
 [<c01003cf>] init+0xb5/0x1fe
 [<c010148d>] kernel_thread_helper+0x5/0xb
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/