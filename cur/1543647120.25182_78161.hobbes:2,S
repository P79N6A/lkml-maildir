Date: Tue, 08 Oct 2002 16:34:09 -0700
From: "Martin J. Bligh" <>
Subject: RE: [Lse-tech] [RFC] numa slab for 2.5.41-mm1
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/10/8/393

>> - is it possible implement ptr_to_nodeid()
>>   on all archs efficiently? It will happen for every kfree().
> 
> The best platform independent way that I came up with was to stash
> the node id in the page structure ... the initial patch that Nitin
> posted included code for this (and it's all my fault that this
> added an extra element to the page structure).  I think that you
> suggested that slab could overload the use of some existing field
> if we wanted to pursue this direction.
> 
> If ptr_to_nodeid() is made a platform dependent function, then
I think that's really the key .... the platforms should just make this
efficient, it's not something for the slab to worry about specifically.
Those of us that have virtual address space to burn can stick it in
struct page, whereas other people (eg me) might have to find some
other way to do it .... but that's the arch people's problem ;-)
> there are some platforms that can do this very efficiently (since
> the nodeid is embedded in some of the high-order address bits), and
> some for which this is complex (e.g. platforms that concatenate
> memory from each node).
M.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/