Date: Thu, 29 Jan 2009 22:57:24 -0700 (MST)
From: Paul Walmsley <>
Subject: Re: [PATCH A 01/10] OMAP2/3: Add non-CORE DPLL rate set code and M, N programming
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2009/1/30/7

On Thu, 29 Jan 2009, Russell King - ARM Linux wrote:
> On Tue, Jan 27, 2009 at 07:12:47PM -0700, Paul Walmsley wrote:
> > +/* Non-CORE DPLL rate set code */
> > +
> > +/*
> > + * omap3_noncore_dpll_program - set non-core DPLL M,N values directly
> > + * @clk: struct clk * of DPLL to set
> > + * @m: DPLL multiplier to set
> > + * @n: DPLL divider to set
> > + * @freqsel: FREQSEL value to set
> > + *
> > + * Program the DPLL with the supplied M, N values, and wait for the DPLL to
> > + * lock..  Returns -EINVAL upon error, or 0 upon success.
> > + */
> > +static int omap3_noncore_dpll_program(struct clk *clk, u16 m, u8 n, u16 freqsel)
> > +{
> > +	struct dpll_data *dd;
> > +	u32 v;
> > +
> > +	if (!clk)
> > +		return -EINVAL;
> > +
> > +	dd = clk->dpll_data;
> > +	if (!dd)
> > +		return -EINVAL;
> 
> Final point... this is only called from the function below, which also
> checks that clk and clk->dpll_data are both non-NULL.  So these checks
> are unnecessary.
Okay.  Do you want to take care of that in your merged version of this 
patch, or would you like me to send an updated version, along with that 
custom dpll4 set_rate function?
- Paul