Date: Mon, 02 Jul 2007 21:08:44 +0200
From: Anders Rune Jensen <>
Subject: Forcedeth: Nvidia NIC goes up and down
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/7/2/52

Hi
I recently invested in a asus m2n-mx. The motherboard features a nvidia
1gbit NIC (lspci says 00:07.0 Bridge: nVidia Corporation MCP61 Ethernet
(rev a2)). I have it connected to my 1gbit switch together with another
machine. The problem is that very frequently (sometimes several times
each minute), the NIC goes down for a few seconds and then goes up
again. In the dmesg log I can see:
Jul  2 21:01:26 [kernel] eth0: link down.
Jul  2 21:01:28 [kernel] eth0: link up.
Jul  2 21:01:57 [kernel] eth0: link down.
Jul  2 21:01:59 [kernel] eth0: link up.
Jul  2 21:02:34 [kernel] eth0: link down.
Jul  2 21:02:36 [kernel] eth0: link up.
Jul  2 21:03:15 [kernel] eth0: link down.
Jul  2 21:03:18 [kernel] eth0: link up.
I've tried changing the cable and changing the port in the switch
without luck.
Sadly the motherboard only has 2 pci slots, which is already taken, so
adding another NIC is not an option. The wireless interface is working
perfectly fine on the machine so the problem seems related to the NIC.
I've tried fiddling with ethtool but I can't seem to make the NIC run at
100mbit. If I disable autoneg nothing seems to be working. Output from
ethtool:
Settings for eth0:
	Supported ports: [ MII ]
	Supported link modes:   10baseT/Half 10baseT/Full 
	                        100baseT/Half 100baseT/Full 
	                        1000baseT/Full 
	Supports auto-negotiation: Yes
	Advertised link modes:  10baseT/Half 10baseT/Full 
	                        100baseT/Half 100baseT/Full 
	                        1000baseT/Full 
	Advertised auto-negotiation: Yes
	Speed: 1000Mb/s
	Duplex: Full
	Port: MII
	PHYAD: 1
	Transceiver: external
	Auto-negotiation: on
	Supports Wake-on: g
	Wake-on: d
	Link detected: yes
Any idea how what I can do to debug this issue further?
Please cc me as I'm not subscribed. Thanks in advance
--
Anders Rune Jensen
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/