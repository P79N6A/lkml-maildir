Date: Tue, 13 May 2003 15:16:38 -0700
From: David Mosberger <>
Subject: radeonfb.c fixes
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/5/13/379

I thought we had fixed this already, but now that I tried radeonfb
again, it didn't work (on ia64 linux).  Patch below fixes the problem
(OK, I don't really know if the fbdev output looks correct, as I'm
working remotely today, but at least it gets the machines booting
again and in the past, this was the only problem).
	--david
===== drivers/video/radeonfb.c 1.23 vs edited =====
--- 1.23/drivers/video/radeonfb.c	Sat May 10 02:48:52 2003
+++ edited/drivers/video/radeonfb.c	Tue May 13 14:56:34 2003
@@ -2840,8 +2840,7 @@
 	}
 
 	/* map the regions */
-	rinfo->mmio_base = (u32) ioremap (rinfo->mmio_base_phys,
-				    		    RADEON_REGSIZE);
+	rinfo->mmio_base = (unsigned long) ioremap (rinfo->mmio_base_phys, RADEON_REGSIZE);
 	if (!rinfo->mmio_base) {
 		printk ("radeonfb: cannot map MMIO\n");
 		release_mem_region (rinfo->mmio_base_phys,
@@ -2978,8 +2977,7 @@
 		}
 	}
 
-	rinfo->fb_base = (u32) ioremap (rinfo->fb_base_phys,
-				  		  rinfo->video_ram);
+	rinfo->fb_base = (unsigned long) ioremap (rinfo->fb_base_phys, rinfo->video_ram);
 	if (!rinfo->fb_base) {
 		printk ("radeonfb: cannot map FB\n");
 		iounmap ((void*)rinfo->mmio_base);
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/