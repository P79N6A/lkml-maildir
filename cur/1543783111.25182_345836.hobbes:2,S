Date: Wed, 31 Aug 2005 11:08:55 +0100
From: Russell King <>
Subject: Re: 8250 serial driver and PM
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/8/31/56

On Mon, Aug 29, 2005 at 09:55:04PM +0400, Grigory Tolstolytkin wrote:
> I'm working on power management support for a particular ARM based board 
> and I've got a question:
> I want to add a board specific power management for standard uart driver 
> (serial8250). For this purpose there is a special hook defined in 
> uart_8250_port structure (drivers/serial/8250.c):
> ...
>  >        /*
>  >        * We provide a per-port pm hook.
>  >         */
>  >        void                    (*pm)(struct uart_port *port,
>  >                                      unsigned int state, unsigned int 
> old);
> ...
> 
> When driver goes into suspend/resume, serial8250_pm() function is called 
> and it checks for the hook and executes it if it exists. But I didn't 
> find a proper way to assign my own function to this hook.
We probably want to pass it via the platform device - which probably
means changing that interface.
> How this hook is supposed to be changed?
It's something which wasn't thought about since there were very few
people wanting to use it, and further work needed to be done (as my
first comment) to allow it to be used - which basically meant changing
the initialisation paths to allow platform devices (now done).
-- 
Russell King
 Linux kernel    2.6 ARM Linux   - 
http://www.arm.linux.org.uk/
 maintainer of:  2.6 Serial core
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/