Date: Fri, 25 Aug 2000 17:07:40 +0200
From: Peter Steiner <>
Subject: 2.4.0-test7: Oops in soundcard.c
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/8/25/159

Hi,
When exiting kmix (of my 2nd soundcard) I get an Oops. With the first
soundcard, everything seems to be ok.
Oops: 0000
CPU:    0
EIP:    0010:[<ca85ba8b>]
EFLAGS: 00010212
eax: 00000000   ebx: c0e785c0   ecx: ca868578   edx: 00000040
esi: c1248c60   edi: c5a8d080   ebp: c5a91b60   esp: c038dea0
ds: 0018   es: 0018   ss: 0018
Process kmix (pid: 2462, stackpage=c038d000)
Stack: c012e9a3 c5a8d080 c0e785c0 c0e785c0 00000000 c4388a80 00000001 c012ea21
       c0e785c0 c0e785c0 c0e785c0 c012ea62 c0e785c0 c012db5e c0e785c0 c4388a80
       00000001 00000006 c011a0e6 c0e785c0 c4388a80 c48cdc80 c038c000 0000000d
Call Trace: [<c012e9a3>] [<c012ea21>] [<c012ea62>] [<c012db5e>] [<c011a0e6>] [<c011a74a>] [<c01091d9>]
       [<c01b88a7>] [<c012df66>] [<c012df72>] [<c01093c4>]
Code: 8b 00 85 c0 74 4d ff 48 10 8b 04 0a 8b 00 80 48 14 08 eb 3f
>>EIP: ca85ba8b <sound_release+2b/90>
Trace: c012e9a3 <__fput+23/90>
Trace: c012ea21 <_fput+11/40>
Trace: c012ea62 <fput+12/20>
Trace: c012db5e <filp_close+4e/60>
Trace: c011a0e6 <put_files_struct+46/c0>
Trace: c011a74a <do_exit+ca/230>
Trace: c01091d9 <do_signal+229/2d0>
Trace: c01b88a7 <sock_alloc+67/b0>
Code:  ca85ba8b <sound_release+2b/90>          00000000 <_EIP>: <===
Code:  ca85ba8b <sound_release+2b/90>             0:    8b 00                   movl   (%eax),%eax <===
Code:  ca85ba8d <sound_release+2d/90>             2:    85 c0                   testl  %eax,%eax
Code:  ca85ba8f <sound_release+2f/90>             4:    74 4d                   je      ca85bade <sound_release+7e/90>
Code:  ca85ba91 <sound_release+31/90>             6:    ff 48 10                decl   0x10(%eax)
Code:  ca85ba94 <sound_release+34/90>             9:    8b 04 0a                movl   (%edx,%ecx,1),%eax
Code:  ca85ba97 <sound_release+37/90>             c:    8b 00                   movl   (%eax),%eax
Code:  ca85ba99 <sound_release+39/90>             e:    80 48 14 08             orb    $0x8,0x14(%eax)
Code:  ca85ba9d <sound_release+3d/90>            12:    eb 3f                   jmp     ca85bade <sound_release+7e/90>
static int sound_release(struct inode *inode, struct file *file)
{
        int dev = MINOR(inode->i_rdev);
        lock_kernel();
        DEB(printk("sound_release(dev=%d)\n", dev));
        switch (dev & 0x0f) {
        case SND_DEV_CTL:
                if (mixer_devs[dev]->owner)                            <---
Code:  ca85ba8b <sound_release+2b/90>             0:    8b 00                   movl   (%eax),%eax <===
Code:  ca85ba8d <sound_release+2d/90>             2:    85 c0                   testl  %eax,%eax
Code:  ca85ba8f <sound_release+2f/90>             4:    74 4d                   je      ca85bade <sound_release+7e/90>
                        __MOD_DEC_USE_COUNT (mixer_devs[dev]->owner);
Code:  ca85ba91 <sound_release+31/90>             6:    ff 48 10                decl   0x10(%eax)
Code:  ca85ba94 <sound_release+34/90>             9:    8b 04 0a                movl   (%edx,%ecx,1),%eax
Code:  ca85ba97 <sound_release+37/90>             c:    8b 00                   movl   (%eax),%eax
Code:  ca85ba99 <sound_release+39/90>             e:    80 48 14 08             orb    $0x8,0x14(%eax)
                break;
Code:  ca85ba9d <sound_release+3d/90>            12:    eb 3f                   jmp     ca85bade <sound_release+7e/90>
Peter
-- 
  _   x    ___   p.steiner@t-online.de (Peter Steiner)
 / \_/_\_ /,--' Linux User #55148 (
http://counter.li.org/
)
 \/>'~~~~//
   \_____/ perl -e'while(<>){s/=\n//g;s/=([\dA-F]{2})/chr(hex($1))/eg;print;}'
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/