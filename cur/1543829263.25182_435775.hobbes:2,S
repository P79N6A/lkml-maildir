Date: Thu, 22 Jun 2006 14:31:40 -0400
From: Dave Jones <>
Subject: Re: intelfb: enable on x86_64
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/6/22/281

On Thu, Jun 22, 2006 at 02:18:49PM -0400, Dave Jones wrote:
 > If you select for eg, IOMMU=y and CONFIG_AGP=y, and CONFIG_FB_INTEL=m,
 > then CONFIG_AGP gets silently turned into a =m, and the build fails with this..
 > 
 > arch/x86_64/kernel/pci-gart.c:619: undefined reference to `agp_amd64_init'
 > arch/x86_64/kernel/pci-gart.c:619: undefined reference to `agp_bridge'
 > arch/x86_64/kernel/pci-gart.c:619: undefined reference to `agp_copy_info'
This seems to work around it..
Signed-off-by: Dave Jones <davej@redhat.com>
--- linux-2.6.17.noarch/drivers/video/Kconfig~	2006-06-22 14:27:13.000000000 -0400
+++ linux-2.6.17.noarch/drivers/video/Kconfig	2006-06-22 14:27:27.000000000 -0400
@@ -807,8 +807,8 @@ config FB_I810_I2C
 config FB_INTEL
 	tristate "Intel 830M/845G/852GM/855GM/865G support (EXPERIMENTAL)"
 	depends on FB && EXPERIMENTAL && PCI && X86 && !VGA_NOPROBE
-	select AGP
-	select AGP_INTEL
+	depends on AGP
+	depends on AGP_INTEL
 	select FB_MODE_HELPERS
 	select FB_CFB_FILLRECT
 	select FB_CFB_COPYAREA
-- 
http://www.codemonkey.org.uk
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/