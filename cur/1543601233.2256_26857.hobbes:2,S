Date: Sun, 16 Sep 2001 09:37:40 -0700
From: Alex Stewart <>
Subject: Re: [PATCH] lazy umount (1/4)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/9/16/32

Alexander Viro wrote:
> It's _very_ useful in a lot of situations - basically, that's what
> umount -f should have been.
Actually, I personally would still like a 'umount -f' (or 'umount 
--yes-I-know-what-Im-doing-and-I-really-mean-it-f' or whatever) that 
actually works for something other than NFS.  In this age of 
hot-pluggable (and warm-pluggable) storage it's increasingly annoying to 
me that I should have to reboot the whole system to fix an otherwise 
hot-fixable hardware problem just because some processes got stuck in a 
disk-wait state before the problem was detected.
I want an operation that will:
1. Interrupt/Abort any processes disk-waiting on the filesystem
2. Unmount the filesystem, immediately and always.
3. Release any filesystem-related holds on the underlying device.
4. Allow me to mount it again later (when problems are fixed).
Basically, I want a 'kill -KILL' for filesystems.
Now, admittedly, this is only something one would want to do in a last 
resort, but currently when one gets to that point of last resort, linux 
has no tools available for them.  This is one of the areas that I've 
always considered linux (and most unixes) to have a gaping hole in the 
"sysadmin should be able to control their system, not vice-versa" 
philosophy, and really is needed in addition to any nifty tricks with 
"lazy umounting", etc. IMO (though the lazy umount thing is kinda nifty, 
and I can see other uses for it).
Just my $.02..
-alex
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/