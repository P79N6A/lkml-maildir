Date: Fri, 31 Dec 1999 01:52:39 +0100
From: Juanjo Santamarta <>
Subject: [PATCH] bttv, kernel 2.2.10 Winfast TV2000 support
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/12/30/138

Winfast TV2000 card (PAL BG/DK
version)                                                      
This card is a TV/Radio combo, with connection to the sound card via
a                       
external (stereo) cable to
line-in.                                                          
The patch adds support for TV and radio. No infrared. Sound control
limited to mute (volume control via sound card). Occasionally the sound
dissapear when changing the TV channel. Muting/unmuting restores the
sound.
I need programming info for these chips:
   24LC02B           --
EEPROM?                                                              
   MS6308            -- Sound processor
????                                                 
   CF745(-04/50) (Near a 4Mhz quartz) -- Infrared module
????diff -u -r linux-2.2.10.SuSE/drivers/char/bttv.c
linux/drivers/char/bttv.c
--- linux-2.2.10.SuSE/drivers/char/bttv.c       Thu Jul 22 16:05:48 1999
+++ linux/drivers/char/bttv.c   Mon Dec 27 05:17:18 1999
@@ -1,4 +1,3 @@
-
 /* 
     bttv - Bt848 frame grabber driver
 
@@ -548,6 +547,8 @@
         { 3, 1, 0, 2, 0x8300f8, { 2, 3, 1, 1,0},
{0x4fa007,0xcfa007,0xcfa007,0x
         /* AVEC Intercapture */
         { 3, 1, 9, 2, 0, { 2, 3, 1, 1}, { 0, 0, 0, 0, 0}},
+       /* Leadtex winfast TV-2000 TV+FM) */
+       { 3, 4, 0, 2, 0x803000, { 2, 3, 1, 1}, { 0x2000, 0x1000, 0x3000,
0, 0x80
 };
 #define TVCARDS (sizeof(tvcards)/sizeof(tvcard))
 
@@ -2993,6 +2994,11 @@
         }
 
         if (btv->type == BTTV_PIXVIEWPLAYTV) {
+               btv->pll.pll_ifreq=28636363;
+               btv->pll.pll_crystal=BT848_IFORM_XT0;
+        }
+
+        if (btv->type == BTTV_WINFASTTV2000) {
                btv->pll.pll_ifreq=28636363;
                btv->pll.pll_crystal=BT848_IFORM_XT0;
         }
diff -u -r linux-2.2.10.SuSE/drivers/char/bttv.h
linux/drivers/char/bttv.h
--- linux-2.2.10.SuSE/drivers/char/bttv.h       Sat Dec 25 04:01:55 1999
+++ linux/drivers/char/bttv.h   Sat Dec 25 04:02:42 1999
@@ -212,6 +212,7 @@
 #define BTTV_PIXVIEWPLAYTV 0x10
 #define BTTV_WINVIEW_601   0x11
 #define BTTV_AVEC_INTERCAP 0x12
+#define BTTV_WINFASTTV2000 0x13
 
 #define AUDIO_TUNER        0x00
 #define AUDIO_RADIO        0x01
Juanjo Santamarta<santamarta@ctv.es>. Adds support for Winfast TV2000 TV/Radio card (PAL BG/DK Version)