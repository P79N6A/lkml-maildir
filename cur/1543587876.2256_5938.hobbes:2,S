Date: Tue, 17 Apr 2001 21:24:43 +0300
From: Pekka Pietikainen <>
Subject: Re: Possible problem with zero-copy TCP and sendfile()
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/4/17/177

On Tue, Apr 17, 2001 at 06:15:24PM +0200, Jan Kasprzak wrote:
> 	Some more progress: I now downgraded to proftpd without sendfile().
> The CPU usage is now nearly 100% (with ~170 FTP users; with sendfile()
> it was under 50% with >320 FTP users). But nevertheless, the downloaded
> images now seem to be OK.
> 
> 	Should I try the stock 2.4.3 without zero-copy patches?
It might also be useful to try 2.4.3+zc with the dev->features |=
NETIF_F_SG; in the 3c59x driver taken out (so it won't use zero-copy)
Since it starts from the beginning instead of corrupting random packets I
doubt it's a hardware problem, though.
-- 
Pekka Pietikainen
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/