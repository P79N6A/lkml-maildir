Date: Wed, 06 Feb 2008 08:10:21 +0100
From: Takashi Iwai <>
Subject: Re: T61P sound issue
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/2/6/21

At Tue, 5 Feb 2008 22:16:08 +0100 (CET),
Jiri Kosina wrote:
> 
> [ added Takashi ]
> 
> On Tue, 5 Feb 2008, Felipe Balbi wrote:
> 
> > > > > > Could anyone make T61P's ICH8 sound controller to work properly?
> > Good that there's a lot of people using T61p, it's a good machine.
> > I'll upgrade my BIOS and try again the crappy sound.
> 
> I have just bought X61s, and it seems to have the very same soundcard as 
> your T61p does:
> 
> 00:1b.0 Audio device: Intel Corporation 82801H (ICH8 Family) HD Audio Controller (rev 03)
>         Subsystem: Lenovo Lenovo Thinkpad T61
>         Flags: bus master, fast devsel, latency 0, IRQ 17
>         Memory at fe220000 (64-bit, non-prefetchable) [size=16K]
>         Capabilities: [50] Power Management version 2
>         Capabilities: [60] Message Signalled Interrupts: Mask- 64bit+ Queue=0/0 Enable-
>         Capabilities: [70] Express Unknown type IRQ 0
>         Capabilities: [100] Virtual Channel
>         Capabilities: [130] Unknown (5)
> 
> The sound also doesn't work with 2.6.24 (tried modprobing the 
> snd-hda-intel with 'model=thinkpad', didn't make any difference). The 
> mixer settings seem to be correct, but there is no sound.
> 
> Two strange things in alsamixer:
> 
> - it is possible to change volume of the "PCM" toggle, but it is missing 
>   the possibility to mute/unmute (the box with "MM"/"OO" simply isn't 
>   there)
> 
> - the "Headphone" toggle has "OO" as it is unmuted, but there is no 
>   possibility to change its volume, the volume box is completely missing
These are intentional.  There is no proper widgets (in HD-audio term,
corresponding to registers) to behave for these purposes.
On 2.6.25, you have additional "Master" volume and switch so that
these won't matter much, I hope.
> Takashi, if you need any other information which would help resolving 
> this, please let me know.
First, make sure that you unmuted the hardware volume / mute via
laptop keyboards.
If everything looks OK ("PCM" adjusted, "Headphone" and "Speaker"
unmuted) but still it doesn't work, it can be a driver problem.
If you set CONFIG_SND_HDA_POWER_SAVE, try to undefine it.
Or, try Ingo's patch Ted suggested.  (To be noted, this couldn't get
in to the mainline because this causes problems on other devices.
2.6.24-git already inclues this patch but with some workarounds.)
Takashi