Date: Sat, 24 Feb 2007 20:45:18 -0500
From: Jeff Garzik <>
Subject: Re: [BUG]  PATA_PCMCIA does not work
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/2/24/171

Komuro wrote:
> Hi,
> 
> The pata_pcmcia problem is fixed. Thanks!
> (I tested it on kernel 2.6.20-git14)
> 
> But kernel 2.6.20-mm2 introduced new oops
> when I insert the pata_pcmcia device.
> 
> 
> pcmcia: registering new device pcmcia1.0
> SCSI subsystem initialized
> libata version 2.10 loaded.
> ata1: PATA max PIO0 cmd 0x0001d100 ctl 0x0001d10e bmdma 0x00000000 irq 3
> scsi0 : pata_pcmcia
> BUG: unable to handle kernel NULL pointer dereference at virtual address 0000004d
>  printing eip:
> d8a1b10e
> *pde = 00000000
> Oops: 0000 [#1]
> last sysfs file: /block/hda/size
> Modules linked in: pata_pcmcia libata scsi_mod dm_mirror dm_multipath dm_mod pcmcia yenta_socket rsrc_nonstatic pcmcia_core
> CPU:    0
> EIP:    0060:[<d8a1b10e>]    Not tainted VLI
> EFLAGS: 00010296   (2.6.20-mm2 #1)
> EIP is at ata_acpi_exec_tfs+0x157/0x8ad [libata]
> eax: 00000001   ebx: 00000000   ecx: d6d43c84   edx: d6d43c84
> esi: d51f4514   edi: 00000000   ebp: d51f438c   esp: d6f2bcdc
> ds: 007b   es: 007b   fs: 00d8  gs: 0000  ss: 0068
> Process scsi_eh_0 (pid: 1647, ti=d6f2a000 task=c13c9a70 task.ti=d6f2a000)
> Stack: d51f6190 00000246 00000246 00000000 d8a130b7 00000000 00000000 00000000 
>        00000000 d6f2bd48 d6f2bdf0 d51f4514 ec000000 d51f6190 00000000 00000000 
>        00000000 00000246 d6d43c84 00000000 00000000 00000000 00000000 ffffffff 
> Call Trace:
>  [<d8a130b7>] ata_exec_internal_sg+0x3ae/0x3b8 [libata]
>  [<d8a125f8>] ata_dev_configure+0xc1/0x7d2 [libata]
>  [<d8a10e87>] ata_dev_select+0xce/0x11a [libata]
Any chance you could insert some printk() calls into ata_apci_exec_tfs? 
  ata_exec_internal_sg() never calls that function, so I'm curious if 
something corrupted memory a bit, or what happened.
In any case, I'm surprised that ACPI would be executing taskfiles on 
PCMCIA anyway.
	Jeff
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/