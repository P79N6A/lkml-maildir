Date: Tue, 24 Oct 2006 00:08:02 +0200
From: "Antonio Vargas" <>
Subject: Re: [PATCH 8/13] KVM: vcpu execution loop
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/10/23/352

On 10/23/06, Avi Kivity <avi@qumranet.com> wrote:
> Antonio Vargas wrote:
> >>
> >> I could do that, but I feel that's more brittle.  I might need more (or
> >> other) fields later on.  It will also cost me more  pushes on the stack
> >> (no real performance or space impact, just C64-era frugality).
> >
> > maybe thats the mindsent needed to make these virtual cpu patches
> > without eating away all the cpu power with more than needed
> > abstractions ;)
> >
>
> Unfortunately not.  Saving a cycle or two doesn't help when a vm exit
> costs thousands of cycles, and worse, kills your tlb.
>
> The key is eliminating unnecessary exits.  I have plans for massively
> optimizing the mmu virtualization, and the next AMD core will do that in
> hardware (look for a "nested page tables" sticker before you buy).
yes, when I read the nested pages description in amd docs, i wondered
that the intel had nothing like that and would go much slower... amd
has worked a lot on the mmu things (like cr3-keyed tlb on k8 systems
to avoid emptying always at switch)
> --
> Do not meddle in the internals of kernels, for they are subtle and quick to panic.
>
>
-- 
Greetz, Antonio Vargas aka winden of network
http://network.amigascne.org/
windNOenSPAMntw@gmail.com
thesameasabove@amigascne.org
Every day, every year
you have to work
you have to study
you have to scene.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/