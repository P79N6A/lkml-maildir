Date: Thu, 13 Jul 2006 20:45:37 -0700 (PDT)
From: Christoph Lameter <>
Subject: Re: [patch] lockdep: annotate mm/slab.c
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/7/13/411

On Thu, 13 Jul 2006, Christoph Lameter wrote:
> The fix by removing the dropping of the lock in free_block could cause 
> retaking the list_lock that we already hold in the OFF_SLAB case (even in 
> the non NUMA case). 
That retaking only occurs if the general slab cache used for the cache 
management is the same general slab where we are freeing from.
Otherwise we are acquiring the list_locks of two distinct slab caches 
which may introduce an issue of lock ordering.
So reversing the patch seems to be the right measure after all. But we 
have the two weird locking scenarios above.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/