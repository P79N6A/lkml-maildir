Date: Mon, 14 Jan 2008 10:44:49 +0000
From: Christer Weinigel <>
Subject: Re: The ext3 way of journalling
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/14/88

On Mon, 14 Jan 2008 10:57:09 +0100
Bernd Petrovitsch <bernd@firmix.at> wrote:
> On Mon, 2008-01-14 at 09:48 +0000, Tuomo Valkonen wrote:
> > On 2008-01-14, Bernd Petrovitsch <bernd@firmix.at> wrote:
> > > Yes, that is a usual bug/problem in common distributions[0] as
> > > there is no real guarantee that your clock is not far off.
> > 
> > It isn't, right after boot. But while the system is on, it sometimes
> > starts advancing very fast, 15min a day or so. To my knowledge, the
> > time the CMOS clock is not used then, but rather the kernel tracks
> > the
> 
> > time based on scheduler interrupts, with ntpd occasionally
> > correcting. However, ntpd refuses to correct when the time has
> > drifted too much, causing even further drift.
> 
> That shouldn't happen.
> > Nope, as explained above. ntpdate at boot wouldn't help much,
> > because the time is (approximately) correct after boot. It only
> > drifts after it.
> 
> Aha. That's also strange. `ntpd` is able to (and always does AFAIK)
> modify the speed of the clock (to keep it synchronized) so that the
> error is usually much smaller than 1 second - also if you are behind
> high-jitter links and/or an a high stratum.
> That leads to the question why the clock starts to run like crazy at
> some time so that `ntpd` can't cope with it.
> Playing with `ntpd` parameters (e.g. increasing ) doesn't help I
> assume.
NTP can't correct too large errors.  I had some similar problems
(one of many problems) with my HP Proliant desktop.  Something totally
messed up the timekeeping, so the system would drift up to an hour or
so per day.  I don't know what was wrong, I tried a lot of combinations
of timer options, but couldn't find any that fixed it.  A kernel
upgrade a couple of weeks later fixed those problems and the system
time has been stable since then. 
So upgrading to a recent kernel is probably a good idea.  
  /Christer