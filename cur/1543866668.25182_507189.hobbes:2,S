Date: Sat, 10 Feb 2007 14:00:14 +0300
From: "Cyrill V. Gorcunov" <>
Subject: [PATCH] qconf: hide empty list items
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/2/10/33

This patch fixes showing empty config list items
if "Option/Show All Options" is turned on. For example
empty items appears on list of 'Block Layer' menu.
Signed-off-by: Cyrill V. Gorcunov <gorcunov@gmail.com>
---
Roman, this patch is temporary solution only. The problem
is growing from the code that creates menu items I guess.
 scripts/kconfig/qconf.cc |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)
diff --git a/scripts/kconfig/qconf.cc b/scripts/kconfig/qconf.cc
index c0ae0a7..d254e37 100644
--- a/scripts/kconfig/qconf.cc
+++ b/scripts/kconfig/qconf.cc
@@ -605,6 +605,8 @@ void ConfigList::updateMenuList(P* parent, struct menu* menu)
 
 		visible = menu_is_visible(child);
 		if (showAll || visible) {
+			if (!child->sym && !child->list && !child->prompt)
+				continue;
 			if (!item || item->menu != child)
 				item = new ConfigItem(parent, last, child, visible);
 			else
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/