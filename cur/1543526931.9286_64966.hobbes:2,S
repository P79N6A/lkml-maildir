Date: Tue, 22 Feb 2000 12:41:00 +0000 (GMT)
From: "Stephen C. Tweedie" <>
Subject: Re: accept() improvements for rt signals
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/2/22/79

Hi,
On Mon, 21 Feb 2000 09:02:10 -0800, Dan Kegel <dank@alumni.caltech.edu>
said:
>> > Also, what if there's more than one queue (e.g. a listening
>> > socket with one owner/signum, and connected sockets with a
>> > different owner/signum)?  Which queue do you empty?  Better
>> > to use an atomic accept()+F_SETFAST combo that generates an
>> > 'fd created' signal, then there's no need to empty any queue.
>> 
>> Yep. I agree.
> OK, cool.  Don't know if we will get this race closed soon, but
> it's nice that somebody else besides me now agrees it exists :-)
I've always agreed that it exists, but nobody has demonstrated so far
that it _matters_.
Do you get these stale, unexpected siginfo events often enough that the
unnecessary read()s it results in becomes a serious performance problem?
If not, then the race simply doesn't matter --- you treat the siginfos
as advisory, and you perform a read() if you get a POLLIN siginfo, but
you don't worry overly if you get a siginfo for a fd which is no longer
in use or if you get no data on the read().
>> Is there any expectations that si_band will be used in 2.2?
> I think there's a patch you can apply.  
There is.
--Stephen
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/