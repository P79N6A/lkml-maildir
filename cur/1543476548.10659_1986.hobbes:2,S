Date: Sun, 10 Jan 1999 21:09:25 +0300 (MSK)
From:  kuznet@ms2 ...
Subject: Re: gated-3.5.10-dif981228.gz , rip_recv_response: zero prefix length
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/1/10/364

Hello!
> 	Is tunlx: OSPFable ? , I think it may be .  Haven't tried lately
> 	any of the more esoteric functionalities of linux .
> 	But I think I will be soon .;-)
Yes, ipip and gre tunnels are ospfable provided they are created
as pointopoint ones and protocol addresses are selected properly.
ip tunnel add CISCO local <MYSIDE> remote <CISCOSIDE> ttl 64
with symmetrical setup on another end.
> >But really creating bulk sets of aliases
> > if you do not want to export them is very bad idea.
> 	I can understand this thought .  And what is needed is a method 
> 	to 'aggregate' /32's used into a /xx exportable single route
> 	statement . Ie: several 255.255.255.255's aggregated into a single
> 	255.255.255.0 or some such . I know it's a gated.conf problem .
Hmm... Please, explain. Such kind of aggregation is possible only
if you requested it with:
aggregate 255.255.255.0/24 {
.....
}
Right? 
> > Explicit aliases are created only to be used by gated, if it should
> > ignore them just make:
> 	Hunh, What Explicit aliases  ?
I.e. created by "ifconfig eth0:xxx a.b.c.d"
All the alisases are "explicit" 8) I just tried to emphasize.
> 	Also got this. But does it requires whacking the kernel ?
It is in the kernel.
> 	Another one of very little documentation .  Where may I
> 	find copious docs on 'ip' tool you have made ?  
Alas, alas... This task waits for hero to make it 8)8)
I received (and even stored) some pointers to docs,
but I cannot find them now. Seems, I put them to some "the most appropriate
place" and forgot where it is 8)8) I'll mail you, when I find them.
> > Alias labels eth0:xxx are not used anymore: they are preserved only
> > not to frighten too much our folks by BSdisms. You may use them
> > for convenience, when setting/deleting static routes,
> > but this information is not remembered by kernel and not used by gated.
> 	If an aliased interface existed in the kernel then gated 
> 	(normally) would see & use it as a valid interface .
> 	just grab 3.5.9 & make an eth0:0 and 'gdc interface' then do
> 	a 'gdc dump' and look .  It will be there .
Exactly. It was the most complicated task to hide the difference 8)8)8)
I am happy to know that it works 8) Actually, I know when the design fails:
namely, it cannot get such routes back, because identifier eth0:1 is lost,
so that not-patched gated reads remnants for aliases incorrectly.
In order to gated worked really correctly, it should truncate
:* suffixes from iface identifiers. gateds<=3.5.9 did it only for SunOS,
but Linux was considered as NOT SUPPORTING ALIASES 8)8)
It was possible to cheat it by double-qouting "eth0:1",
and gated considered them as normal interfaces.
Seems, stock 3.5.10 is supposed to work correctly (if to work at all 8))
> 	do a 'gdc dump' and look at the 'Router ID:' in it ??? 
It selects the first address as router-id, if it was not
set in gated.conf. The first address in my config sits on dummy 8)
To make it robust you have two methods:
- set routerid in gated.conf
- set routerid as alias on loopback.
This applies to any version of gated and to linux-2.0 in the same extent,
but the second way (BTW canonical one on Cisco) is usable only
in patched gated and 2.1.
It is still not clear, why alias address appeared the first in gated
iftable. I'll try to figure out this.
> 	Also with your latest patches I have noticed a contious stream
> 	in the gated.dmp/messages files the response below every
> 	rip update.
> 	Now mind you this is in both gated.dmp & /var/log/messages .:-}
> 
>  Jan  9 21:39:20 rip_recv_response: bad router (192.168.0.1) for net
>  199.33.245 from 199.33.245.238+520
Hmmm, I do not see nothing looking like this.
Is 199.33.245.238 primary address on eth0, right?
Alexey
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/