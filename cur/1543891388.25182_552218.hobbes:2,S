Date: Sat, 2 Jun 2007 00:18:40 +0100
From: Russell King <>
Subject: Re: [PATCH RT] Fix NR_syscalls in ARM
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/6/1/423

On Fri, Jun 01, 2007 at 04:10:53PM -0700, Deepak Saxena wrote:
> The -rt patch adds a NR_syscalls symbol to the arm/unistd.h but
> it is not the correct value as there are 348 syscalls on ARM
> and the existing change sets the symbol to 322.
> 
> Russell: Why isn't this in mainline? Other arches all seem to have 
> this symbol already defined.
The hint is that it isn't in mainline; it's just plainly not required.
It's also the wrong place to define it; it's not a property that
unistd.h should concern itself with - it's a property of the kernel's
branch table for calling the syscalls, and on ARM we calculate that
number directly from the size of the kernel's branch table.
It's also not just last_syscall_number+1 since the table is sized to
make the assembly easy - iow, a number divisible by 4.
So all in all, NR_syscalls in unistd.h is just utterly wrong.
-- 
Russell King
 Linux kernel    2.6 ARM Linux   - 
http://www.arm.linux.org.uk/
 maintainer of:
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/