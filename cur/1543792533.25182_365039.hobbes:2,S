Date: Wed, 09 Nov 2005 00:28:46 +0100
From: Pierre Ossman <>
Subject: Re: [PATCH] [MMC] Use __devexit_p in wbsd
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/11/8/314

Russell King wrote:
> On Mon, Nov 07, 2005 at 08:04:59AM +0100, Pierre Ossman wrote:
>> wbsd_*_remove() is declared as __devexit but __devexit_p isn't used
>> when taking their addresses.
> 
> This patch has been generated assuming that your PNP suspend/resume
> patches are in... what do you want me to do with this?  Wait for
> the PNP patches to hit mainline, or...?
> 
Sorry about that. Improper patch ordering on my part. Here's one where 
it's applied before the suspend stuff.
Rgds
Pierre
[MMC] Use __devexit_p in wbsd
wbsd_*_remove() is declared as __devexit but __devexit_p isn't used
when taking their addresses.
Signed-off-by: Pierre Ossman <drzeus@drzeus.cx>
---
 drivers/mmc/wbsd.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)
diff --git a/drivers/mmc/wbsd.c b/drivers/mmc/wbsd.c
--- a/drivers/mmc/wbsd.c
+++ b/drivers/mmc/wbsd.c
@@ -2042,7 +2042,7 @@ static struct device_driver wbsd_driver 
 	.name		= DRIVER_NAME,
 	.bus		= &platform_bus_type,
 	.probe		= wbsd_probe,
-	.remove		= wbsd_remove,
+	.remove		= __devexit_p(wbsd_remove),
 
 	.suspend	= wbsd_suspend,
 	.resume		= wbsd_resume,
@@ -2054,7 +2054,7 @@ static struct pnp_driver wbsd_pnp_driver
 	.name		= DRIVER_NAME,
 	.id_table	= pnp_dev_table,
 	.probe		= wbsd_pnp_probe,
-	.remove		= wbsd_pnp_remove,
+	.remove		= __devexit_p(wbsd_pnp_remove),
 };
 
 #endif /* CONFIG_PNP */