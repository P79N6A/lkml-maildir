Date: Thu, 20 Sep 2007 23:33:17 -0700
From: Randy Dunlap <>
Subject: Re: Test harness in the kernel for new syscalls? [Was: Trace code and documentation (updated)]
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/9/21/26

On Thu, 20 Sep 2007 21:50:42 -0700 Randy Dunlap wrote:
> On Wed, 19 Sep 2007 20:01:15 +0200 Sam Ravnborg wrote:
> 
> > On Wed, Sep 19, 2007 at 06:51:09PM +0100, Christoph Hellwig wrote:
> > > On Wed, Sep 19, 2007 at 07:48:45PM +0200, Sam Ravnborg wrote:
> > > > > Well, this is kernel code - so util-linux is not the solution here
> > > > > obviously :)
> 
> so kernel sample code goes in the new samples/ directory,
> and userspace sample code gets pushed to util-linux ?
> 
> > > > Can you sketch what you have in mind.
> > > > We right now have said we wnated to:
> > > > 1) include a framework for executing simple new-syscall-test-stubs
> > > > 2) have a nice place for kernel example code
> > > > 
> > > > I could come up with something but I expect you already have something
> > > > in your mind where to put stuff.
> > > > If I have a rough idea I can start looking into the kbuild bits of it.
> > > > Not that I will have it ready within the next two weeks but nice buffer
> > > > when I anyway drop sleeping..
> > > 
> > > I think for samples we just want a samples/ toplevel directory with
> > > normal Kbuild and Kconfig files.  Not any different from drivers or
> > > filesystems, just a new hiearchary.
> > 
> > OK - anyone can do this. So I will not worry.
I began looking into this.
Yes, we should add Makefile(s) so that sample code can be built.
Does that mean that it has to be moved to a different directory?
For some (not all) sample code, we either move its related txt or
README file to the samples/ dir also, or we create the need to
look in 2 places to see the sample code + related doc.
The latter is not good, so I suppose that we move those related
txt files with the sample code.  Then we have docs split into
2 places (not counting drivers/ and fs/ .txt files & other README*
files throughout the kernel tree).  Having docs split into more
places isn't good either.
I'm for just add Makefile(s) in the Documentation/ tree so that
sample code can be built there (as well as moving the sample
code out of .txt files and into standalone source files).
I'll back up and re-read where this (new) requirement is coming
from.
[reads]
It seems to mostly be about having the ability to build the sample
code so that it doesn't bitrot.  That's good.  But docs and sample
code are often very related.  I don't see why we would arbitrarily
split them up.
---
~Randy
*** Remember to use Documentation/SubmitChecklist when testing your code ***
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/