Date: Mon, 24 Sep 2001 14:40:55 -0700 (PDT)
From: Ryan Mack <>
Subject: [BUG?] ext3 0.9.10-2410 - assertion failed
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/9/24/186

At the time, I was running lilo and the system was reconstructing one of
two RAID-1 mirrors on a pair of SCSI drives connected via a Adaptec
AHA-2940U2/W controller.  Other than that the system was not under any
load.
Thanks, Ryan
Assertion failure in journal_flush() at journal.c:1221: "!journal->j_running_transaction"
invalid operand: 0000
CPU:    0
EIP:    0010:[<c0163d79>]
EFLAGS: 00010292
eax: 0000005d   ebx: 000012b5   ecx: 00000012   edx: cf62df64
esi: cff3f800   edi: 00000000   ebp: c01577c0   esp: cbb6ff58
ds: 0018   es: 0018   ss: 0018
Process lilo (pid: 1095, stackpage=cbb6f000)
Stack: c020caa0 c020cec0 c020ca71 000004c5 c020cea0 cbf1b7fc cbf1b7fc ccd42340
       c01577ed cff3f800 bfffe2e8 c0143cf9 cbf1b7fc 00000000 bfffe2e8 ccd42340
       00000001 ffffffe7 c0143f62 ccd42340 00000001 bfffe2e8 cbb6e000 08057140
Call Trace: [<c01577ed>] [<c0143cf9>] [<c0143f62>] [<c0106f1b>]
Code: 0f 0b 83 c4 14 8b 56 30 85 d2 74 23 68 e0 ce 20 c0 68 c6 04
 zsh: segmentation fault  lilo
ksymoops 2.4.0 on i686 2.4.10.  Options used
     -V (default)
     -k /proc/ksyms (default)
     -l /proc/modules (default)
     -o /lib/modules/2.4.10/ (default)
     -m /boot/System.map-2.4.10 (default)
Warning: You did not tell me where to find symbol information.  I will
assume that the log matches the kernel and modules that are running
right now and I'll use the default options above for symbol resolution.
If the current kernel and/or modules do not match the log, you can get
more accurate output by telling me the kernel version and where to find
map, modules, ksyms etc.  ksymoops -h explains the options.
Warning (compare_maps): mismatch on symbol partition_name  , ksyms_base says c01b6da0, System.map says c0152c30.  Ignoring ksyms_base entry
Warning (compare_maps): mismatch on symbol audio_devs  , sound says d093d880, /lib/modules/2.4.10/kernel/drivers/sound/sound.o says d093d200.  Ignoring /lib/modules/2.4.10/kernel/drivers/sound/sound.o entry
Warning (compare_maps): mismatch on symbol midi_devs  , sound says d093d8f0, /lib/modules/2.4.10/kernel/drivers/sound/sound.o says d093d270.  Ignoring /lib/modules/2.4.10/kernel/drivers/sound/sound.o entry
Warning (compare_maps): mismatch on symbol mixer_devs  , sound says d093d898, /lib/modules/2.4.10/kernel/drivers/sound/sound.o says d093d218.  Ignoring /lib/modules/2.4.10/kernel/drivers/sound/sound.o entry
Warning (compare_maps): mismatch on symbol num_audiodevs  , sound says d093d894, /lib/modules/2.4.10/kernel/drivers/sound/sound.o says d093d214.  Ignoring /lib/modules/2.4.10/kernel/drivers/sound/sound.o entry
Warning (compare_maps): mismatch on symbol num_midis  , sound says d093d908, /lib/modules/2.4.10/kernel/drivers/sound/sound.o says d093d288.  Ignoring /lib/modules/2.4.10/kernel/drivers/sound/sound.o entry
Warning (compare_maps): mismatch on symbol num_mixers  , sound says d093d8ac, /lib/modules/2.4.10/kernel/drivers/sound/sound.o says d093d22c.  Ignoring /lib/modules/2.4.10/kernel/drivers/sound/sound.o entry
Warning (compare_maps): mismatch on symbol num_synths  , sound says d093d8ec, /lib/modules/2.4.10/kernel/drivers/sound/sound.o says d093d26c.  Ignoring /lib/modules/2.4.10/kernel/drivers/sound/sound.o entry
Warning (compare_maps): mismatch on symbol synth_devs  , sound says d093d8c0, /lib/modules/2.4.10/kernel/drivers/sound/sound.o says d093d240.  Ignoring /lib/modules/2.4.10/kernel/drivers/sound/sound.o entry
Warning (compare_maps): mismatch on symbol usb_devfs_handle  , usbcore says d0914880, /lib/modules/2.4.10/kernel/drivers/usb/usbcore.o says d09143a0.  Ignoring /lib/modules/2.4.10/kernel/drivers/usb/usbcore.o entry
invalid operand: 0000
CPU:    0
EIP:    0010:[<c0163d79>]
Using defaults from ksymoops -t elf32-i386 -a i386
EFLAGS: 00010292
eax: 0000005d   ebx: 000012b5   ecx: 00000012   edx: cf62df64
esi: cff3f800   edi: 00000000   ebp: c01577c0   esp: cbb6ff58
ds: 0018   es: 0018   ss: 0018
Process lilo (pid: 1095, stackpage=cbb6f000)
Stack: c020caa0 c020cec0 c020ca71 000004c5 c020cea0 cbf1b7fc cbf1b7fc ccd42340
       c01577ed cff3f800 bfffe2e8 c0143cf9 cbf1b7fc 00000000 bfffe2e8 ccd42340
       00000001 ffffffe7 c0143f62 ccd42340 00000001 bfffe2e8 cbb6e000 08057140
Call Trace: [<c01577ed>] [<c0143cf9>] [<c0143f62>] [<c0106f1b>]
Code: 0f 0b 83 c4 14 8b 56 30 85 d2 74 23 68 e0 ce 20 c0 68 c6 04
>>EIP; c0163d79 <journal_flush+f9/1e0>   <=====
Trace; c01577ed <ext3_bmap+2d/50>
Trace; c0143cf9 <file_ioctl+a9/170>
Trace; c0143f62 <sys_ioctl+1a2/200>
Trace; c0106f1b <system_call+33/38>
Code;  c0163d79 <journal_flush+f9/1e0>
00000000 <_EIP>:
Code;  c0163d79 <journal_flush+f9/1e0>   <=====
   0:   0f 0b                     ud2a      <=====
Code;  c0163d7b <journal_flush+fb/1e0>
   2:   83 c4 14                  add    $0x14,%esp
Code;  c0163d7e <journal_flush+fe/1e0>
   5:   8b 56 30                  mov    0x30(%esi),%edx
Code;  c0163d81 <journal_flush+101/1e0>
   8:   85 d2                     test   %edx,%edx
Code;  c0163d83 <journal_flush+103/1e0>
   a:   74 23                     je     2f <_EIP+0x2f> c0163da8 <journal_flush+128/1e0>
Code;  c0163d85 <journal_flush+105/1e0>
   c:   68 e0 ce 20 c0            push   $0xc020cee0
Code;  c0163d8a <journal_flush+10a/1e0>
  11:   68 c6 04 00 00            push   $0x4c6
11 warnings issued.  Results may not be reliable.
00:00.0 Host bridge: Intel Corporation 440BX/ZX - 82443BX/ZX Host bridge (rev 03)
00:01.0 PCI bridge: Intel Corporation 440BX/ZX - 82443BX/ZX AGP bridge (rev 03)
00:07.0 ISA bridge: Intel Corporation 82371AB PIIX4 ISA (rev 02)
00:07.1 IDE interface: Intel Corporation 82371AB PIIX4 IDE (rev 01)
00:07.2 USB Controller: Intel Corporation 82371AB PIIX4 USB (rev 01)
00:07.3 Bridge: Intel Corporation 82371AB PIIX4 ACPI (rev 02)
00:11.0 Ethernet controller: 3Com Corporation 3c905B 100BaseTX [Cyclone]
00:13.0 PCI bridge: Digital Equipment Corporation DECchip 21152 (rev 03)
01:00.0 VGA compatible controller: nVidia Corporation Riva TnT2 [NV5] (rev 11)
02:0a.0 SCSI storage controller: Adaptec AHA-2940U2/W / 7890
02:0e.0 SCSI storage controller: Adaptec AIC-7880U (rev 01)
If some fields are empty or look unusual you may have an old version.
Compare to the current minimal requirements in Documentation/Changes.
Linux mackman.net 2.4.10 #1 SMP Mon Sep 24 02:37:41 PDT 2001 i686 unknown
Gnu C                  2.96
Gnu make               3.79.1
binutils               2.10.91.0.2
util-linux             2.11f
mount                  2.11b
modutils               2.4.2
e2fsprogs              1.23
Linux C Library        2.2.2
Dynamic linker (ldd)   2.2.2
Procps                 2.0.7
Net-tools              1.57
Console-tools          0.3.3
Sh-utils               2.0
Modules Loaded         3c59x cs4232 uart401 ad1848 sound soundcore isa-pnp mousedev hid input uhci usbcore