Date: Wed, 3 May 2006 22:44:04 -0400
From: Dave Jones <>
Subject: Remove silly messages from input layer.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/5/3/245

There are two messages in the input layer that seem to be
triggerable very easily, and they confuse end-users to no end.
"too many keys pressed? Should I press less keys?"
I actually got a complaint from one user that he had only
hit one key before being told to type less.
The latter message seems to trigger with certain keyboard switchers
and again, does nothing but confuse people.
Best of all, asides from the silly messages, none of the people suffering
them report any other misbehaviour, their keyboards work just fine.
Signed-off-by: Dave Jones <davej@redhat.com>
--- linux-2.6.16.noarch/drivers/input/keyboard/atkbd.c~	2006-05-03 22:37:20.000000000 -0400
+++ linux-2.6.16.noarch/drivers/input/keyboard/atkbd.c	2006-05-03 22:39:58.000000000 -0400
@@ -340,7 +340,6 @@ static irqreturn_t atkbd_interrupt(struc
 			atkbd_report_key(atkbd->dev, regs, KEY_HANJA, 3);
 			goto out;
 		case ATKBD_RET_ERR:
-			printk(KERN_DEBUG "atkbd.c: Keyboard on %s reports too many keys pressed.\n", serio->phys);
 			goto out;
 	}
 
@@ -359,11 +358,7 @@ static irqreturn_t atkbd_interrupt(struc
 		case ATKBD_KEY_NULL:
 			break;
 		case ATKBD_KEY_UNKNOWN:
-			if (data == ATKBD_RET_ACK || data == ATKBD_RET_NAK) {
-				printk(KERN_WARNING "atkbd.c: Spurious %s on %s. Some program, "
-				       "like XFree86, might be trying access hardware directly.\n",
-				       data == ATKBD_RET_ACK ? "ACK" : "NAK", serio->phys);
-			} else {
+			if (data != ATKBD_RET_ACK && data != ATKBD_RET_NAK) {
 				printk(KERN_WARNING "atkbd.c: Unknown key %s "
 				       "(%s set %d, code %#x on %s).\n",
 				       atkbd->release ? "released" : "pressed",
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/