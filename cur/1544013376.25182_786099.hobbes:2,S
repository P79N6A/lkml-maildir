Date: Sat, 03 Jan 2009 12:51:46 +1100
From: Nigel Cunningham <>
Subject: Re: [PATCH] headers_check.pl: disallow extern's
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2009/1/2/385

Hi.
On Sat, 2008-12-27 at 02:43 -0500, Mike Frysinger wrote:
> Since prototypes with "extern" refer to kernel functions, they make no
> sense in userspace, so reject them automatically.
> 
> Signed-off-by: Mike Frysinger <vapier@gentoo.org>
> ---
>  scripts/headers_check.pl |    9 +++++++++
>  1 files changed, 9 insertions(+), 0 deletions(-)
> 
> diff --git a/scripts/headers_check.pl b/scripts/headers_check.pl
> index 488a3b1..15b9bc6 100644
> --- a/scripts/headers_check.pl
> +++ b/scripts/headers_check.pl
> @@ -33,6 +33,7 @@ foreach my $file (@files) {
>  	while ($line = <FH>) {
>  		$lineno++;
>  		check_include();
> +		check_prototypes();
>  	}
>  	close FH;
>  }
> @@ -54,3 +55,11 @@ sub check_include
>  		}
>  	}
>  }
> +
> +sub check_prototypes
> +{
> +	if ($line =~ m/^\s*extern\b/) {
> +		printf STDERR "$filename:$lineno: extern's make no sense in userspace\n";
s/extern's/externs/
> +		$ret = 1;
> +	}
> +}
Regards,
Nigel