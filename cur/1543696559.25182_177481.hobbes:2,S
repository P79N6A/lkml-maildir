Date: Mon, 10 Nov 2003 15:30:06 -0800
From: Jeff Bowden <>
Subject: percpu_counter_mod not getting into SMP kernel image when ext2/3 compiled as modules
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/11/10/175

In 2.6.9-test9 (also tried with bk15) I have ext2 and ext3 both 
configured as modules.  When I do "modprobe ext3" it says:
  FATAL: Error inserting ext3 
(/lib/modules/2.6.0-test9-bug-t1/kernel/fs/ext3/ext3.ko): Unknown symbol 
in module, or unknown parameter (see dmesg)
and dmesg says:
  ext3: Unknown symbol percpu_counter_mod
I found one message in the archive 
(
http://www.ussg.iu.edu/hypermail/linux/kernel/0310.2/0311.html
) which 
mentions this problem and includes a proposed fix. The lines from the 
this proposal made it into lib/percpu_counter.c but somehow it seems 
that they are not causing the symbol to end up in the main kernel 
image.  In fact the string "percpu_counter_mod" does not occur in 
vmlinux or in any of the modules other than ext2.ko and ext3.ko.
The kernel in question was compiled with gcc 3.3.1 on an up-to-date 
debian/unstable.  A copy of the exact .config I used can be had from 
http://jlb.changelog.com/config-2.6.0-test9-bug-t1
I am not subscribed to this mailing list.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/