Date: 11 Sep 2003 22:18:10 +0200
From: David Kuehling <>
Subject: Re: [linux-dvb] Possible kernel thread related crashes on 2.4.x
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/9/11/229

>>>>> "Andrew" == Andrew de Quincey <adq_dvb@lidskialf.net> writes:
> Hi, I've been having fatal oopses with some of my DVB receiver systems
> when restarting streaming recently (i.e. opening/closing DVB devices).
> I've only just got into the office with a debug cable to find out what
> has happening.
> Anyway, here are the important parts of the oops (full oops at end of
> mail): Unable to handle kernel paging request at virtual address
> d905a984 ...  Trace; c011c79c <free_uid+2c/34> Trace; c011767b
> <release_task+2b/16c> Trace; c0118337 <sys_wait4+307/390> Trace;
> c0106c03 <system_call+33/38>
Looks *very* familiar.  My box keeps constantly crashing, since I
installed linux-dvb 1.0.0.  Here's one of my backtraces:
Call Trace: 
        [free_uid+44/64] 
        [release_task+41/336]
        [sys_wait4+775/912] 
        [system_call+51/56] 
Someone else on this list mentioned that he had the same problem but it
went away, when he changed some config switches in the kernel.  He also
mentioned, that he wasn't able to figure out how those crashes were
caused.
> Searching about found me this patch on LKML:
> 
http://hypermail.idiosynkrasia.net/linux-kernel/archived/2003/week04/0468.html
> Which I applied to 2.4.21, and which appears to fix the problem. At
> least, I was able to continually restart streaming for 4 hours this
> afternoon without a problem.  Previously, I could crash it within 15
> minutes.
I think I'll just try that.  Hopefully it will apply to my debianized
linux-2.4.17.
> It seems to be a bug related to kernel threads when starting/stopping
> them. The DVB drivers now do this when a DVB device is opened/closed,
> although I'm sure they previously left them running which would
> explain why I never saw this behaviour before.
This would explain why my system hangs/crashes especially when zapping a
lot (it never crashed during continuous playback, only when zapping).
I'm using MPlayer, which always re-opens the device for a new channel.
David
-- 
GnuPG public key: 
http://user.cs.tu-berlin.de/~dvdkhlng/dk.gpg
Fingerprint: B17A DC95 D293 657B 4205  D016 7DEF 5323 C174 7D40
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/