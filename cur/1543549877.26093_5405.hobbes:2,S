Date: Tue, 26 Sep 2000 07:12:16 -0500 (CDT)
From: Peter Samuelson <>
Subject: Re: lvm in 2.4.0-test9pre5
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/9/26/72

[Jeff Garzik <jgarzik@mandrakesoft.mandrakesoft.com>]
> We don't need a config option just to jump into another directory.
> Probably just a makefile or config bug..
Yeah, this is not well-tested but at least *looks* obviously correct.
(BTW the ugliness in drivers/makefile is sort of why I was originally
opposed to grouping MD and LVM in the same directory.)
Peter
diff -urN 2.4.0test9pre7/drivers/Makefile md-test/drivers/Makefile
--- 2.4.0test9pre7/drivers/Makefile	Fri Sep 22 03:13:33 2000
+++ md-test/drivers/Makefile	Tue Sep 26 07:08:12 2000
@@ -137,6 +137,14 @@
 else
   ifeq ($(CONFIG_BLK_DEV_MD),m)
   MOD_SUB_DIRS += md
+  else
+    ifeq ($(CONFIG_BLK_DEV_LVM),y)
+    SUB_DIRS += md
+    else
+      ifeq ($(CONFIG_BLK_DEV_LVM),m)
+      MOD_SUB_DIRS += md
+      endif
+    endif
   endif
 endif
 
diff -urN 2.4.0test9pre7/drivers/md/Config.in md-test/drivers/md/Config.in
--- 2.4.0test9pre7/drivers/md/Config.in	Sat Sep 23 16:24:28 2000
+++ md-test/drivers/md/Config.in	Tue Sep 26 06:49:42 2000
@@ -4,7 +4,7 @@
 mainmenu_option next_comment
 comment 'Multi-device support (RAID and LVM)'
 
-tristate 'Multiple devices driver support (RAID and LVM)' CONFIG_BLK_DEV_MD
+tristate 'Multiple devices (RAID) support' CONFIG_BLK_DEV_MD
 dep_tristate '  Linear (append) mode' CONFIG_MD_LINEAR $CONFIG_BLK_DEV_MD
 dep_tristate '  RAID-0 (striping) mode' CONFIG_MD_RAID0 $CONFIG_BLK_DEV_MD
 dep_tristate '  RAID-1 (mirroring) mode' CONFIG_MD_RAID1 $CONFIG_BLK_DEV_MD
@@ -14,7 +14,7 @@
         bool '  Auto Detect support' CONFIG_AUTODETECT_RAID
 fi
 
-dep_tristate 'Logical volume manager (LVM) support' CONFIG_BLK_DEV_LVM $CONFIG_BLK_DEV_MD
+tristate 'Logical volume manager (LVM) support' CONFIG_BLK_DEV_LVM
 dep_mbool '   LVM information in proc filesystem' CONFIG_LVM_PROC_FS $CONFIG_BLK_DEV_LVM
 
 endmenu
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/