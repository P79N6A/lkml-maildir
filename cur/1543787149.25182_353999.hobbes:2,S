Date: Wed, 28 Sep 2005 16:53:31 +0900
From: KUROSAWA Takahiro <>
Subject: Re: [ckrm-tech] Re: [PATCH 1/3] CPUMETER: add cpumeter framework to the CPUSETS
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/9/28/28

On Wed, 28 Sep 2005 00:08:39 -0700
Jackson-san wrote:
> > If we split the cpus {2, 3} into {2} and {3} by creating CPUSET 2a 
> > and CPUSET 2b, the guarantee assigned to CPUSET 1a might not be
> > satisfied.  For example, the maximum cpu resource usage of tasks 
> > in CPUSET 2a should essentially be 50% because tasks in CPUSET 2a
> > can only use the half number of cpus. 
> 
> Ah, yes, this could be difficult and not worth doing.
> 
> It might help if I stated more of what I mean, which I didn't before.
> 
> I intended that all tasks in the combination of cpusets 1a, 2a, and 2b
> would collectively be allowed what ever percentage of cpu cycles the
> meter_cpu_* files in cpuset 1a prescribed.  I did not intend to suggest
> any particular balance between these tasks in 1a, 2a and 2b would be
> enforced.  In particular, I did not expect for anything like a 50%
> split between the tasks in 2a and 2b to be enforced.   For the purposes
> of your cpu controller, just treat the entire set of tasks in all
> three of these cpusets as one pool, governed by one meter_cpu_*
> setting, just as if all these tasks were in cpuset 1a, and as if
> cpusets 2a and 2b didn't exist.
This seems good for me.
I'd like to make sure that tasks in CPUSET 2a and CPUSET 2b actually
have the cpumask of CPUSET 1a.  Is this correct?
If it's correct, a small hack to cpuset_cpus_allowed() would only be 
needed to do this.
> This might be easier to do - I don't know.
This is quite easier.  Thanks for your clarifying the idea.
-- 
KUROSAWA, Takahiro
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/