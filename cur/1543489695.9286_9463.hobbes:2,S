Date: Fri, 12 Mar 1999 16:14:18 +0100
From: (Dietmar Stein)
Subject: Kernelupgrade / Re: Too many open files error
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/3/12/71

Hi Alan,
I am not so familiar in programming but I mentioned to put the entry
"console_init();" before the entry "time_init();" in function
"start_kernel"
at line 1120.
The file main.c looks like (in line 1119 / 1120 / 1121):
...
1119: sched_init();
1120: console_init();
1121: time_init();
...
All I got while compiling (I did a make dep ; make clean ; make modules
; make
modules_install ; make zdisk) is a message from make zdisk
"init/main.c: In function `start_kernel´:
 init/main.c:1120: too few arguments to function `console_init´ " Then
the
compilation fails.
I don't know if I placed the statement right in main.c so I like to
please you to
be more specific (that's not a critic, but I need more information).
I also upgraded to 2.2.3 by patching, and the message after rebooting is
still
the same. I would send you the oops... but I can't see any.
All I noticed was "heavy traffice" on my drives (like a normal bootup)
and after
resetting (that's the only way to restart the machine) I got a
filesystemcheck
because of umounting uncleanly.
Seems that kernel mounts the filesystems... but after that?
Thank you for your hint anyway, Dietmar
Alan Cox wrote:
> > The option/parameter is called NR_OPEN and is used with OPEN_MAX in limits.h
> > in ./linux/include/linux. I think in kernel 2.2.x it has the same place, so
> > you can edit it manually. A standard NR_OPEN_STD would be overriden during
> > compilation of the kernel (that's the way I did).
> > I increased the number to 2048 and its working.
>
> Its actually not a good idea to change the per process max without the big
> fd patch in 2.0 -you risk corruption from kernel stack overflows
>
> > A question of mine: I am using SuSE6.0 still trying to upgrade to 2.2.x but
> > after rebooting machine (compilation of the kernel is ok) it hangs up with
> > the message:
> > "Loading.....
> > Uncompressing kernel... Now booting the kernel...."
>
> Does 2.2.3 still do this. If so move console_init() to just before time_init
> in init/main.c ,rebuild and report the oops
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/