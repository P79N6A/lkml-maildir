Date: Fri, 16 Feb 2007 13:03:58 -0600
From: "Chris Friesen" <>
Subject: misleading comment in __oom_kill_task()?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/2/16/311

Towards the end of __oom_kill_task() we see the following comment/code:
	/*
	 * We give our sacrificial lamb high priority and access to
	 * all the memory it needs. That way it should be able to
	 * exit() and clear out its resources quickly...
	 */
	p->time_slice = HZ;
	set_tsk_thread_flag(p, TIF_MEMDIE);
	force_sig(SIGKILL, p);
I see it getting a large timeslice and access to memory, but I don't 
actually see the priority getting bumped at all.  It appears the comment 
is inaccurate.
Should the process actually get its priority bumped up as well so that 
it can process its own death faster?  The reason I ask is that we're 
seeing some oom-killed processes taking a very long time (multiple 
seconds) to actually die.
Chris
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/