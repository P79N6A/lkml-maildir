Date: Tue, 25 Apr 2006 14:38:58 -0700
From: "Hua Zhong" <>
Subject: RE: [PATCH] likely cleanup: revert unlikely in ll_back_merge_fn
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/4/25/306

It seems that new BIOs do not have BIO_SEG_VALID set. So when you do sequential IO, the IO being back-merged should always have not
had valid segments.
I ran bonnie++ and it shows the same thing.
> Well you'd want to optimize for the busy case, right, no 
> point in optimizing for a more idle system.
> 
> I'm not at all uninterested in this, I'd just like to see a 
> more intelligent/controlled work load that actually stresses 
> the io subsystem being profiled. If you have a not-so-busy 
> system, you like don't do enough IO to trigger a lot of 
> merges. Or maybe you do, and we just have a bug somewhere so 
> that we unfortunately repeatedly recount segments.
> 
> Care to run a simple io benchmark and profile that?
> 
> --
> Jens Axboe
> 
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/