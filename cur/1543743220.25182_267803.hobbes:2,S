Date: Wed, 3 Nov 2004 14:12:07 +0100 (CET)
From: "Jean Delvare" <>
Subject: Re: dmi_scan on x86_64
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/11/3/84

Hi Andi,
> > Any reason why dmi_scan is availble on the i386 arch and not on the
> > x86_64 arch? I would have a need for the latter (for run-time
> > identification purposes, not boot-time blacklisting).
>
> So far nothing needed it, so I didn't add it.  For what do you need it?
I am in the process of adding SMBus multiplexing support for the Tyan
S4882 motherboard, as seen on this thread:
http://marc.theaimsgroup.com/?l=linux-kernel&m=109863982018999&w=2
In the proposed patch, I use the PCI ID of the SMBus master to identify
the board and enable the additional code. However, I just asked for
confirmation to the Tyan engineers I am working with and they told me
that the PCI ID has not been customized (I should have figured that out
by myself since the subvendor ID was AMD's, not Tyan's, but well
sometimes you just don't get it). Thus my approach is not correct.
One possible approach would be to use the DMI data, since it is properly
set on the S4882 motherboard:
Handle 0x0001
  DMI type 1, 25 bytes.
  System Information
      Manufacturer: TYAN
      Product Name: S4882
Thus my question. As you can see, what I would need is merely an
include/linux/dmi.h-like interface that would work for x86_64 instead of
only i386. I do not need the dmi_scan blacklisting mechanism, just the
part which fetches and stores DMI data for later use. As a side note, I
wonder if this can be done without duplicating a large part of
arch/i386/kernel/dmi_scan.c.
Before you ask, detecting the need of SMBus multiplexing by somehow
scanning the SMBus is believed to be unreliable and possibly dangerous,
which is why I favor the approach of a list of known boards to enable
the multiplexing on.
Thanks,
Jean
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/