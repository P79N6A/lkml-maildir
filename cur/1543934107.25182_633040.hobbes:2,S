Date: Tue, 1 Jan 2008 23:04:07 +1100
From: Herbert Xu <>
Subject: Re: 2.6.24-rc6-mm1
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/1/26

On Mon, Dec 31, 2007 at 09:15:19PM +0100, Torsten Kaiser wrote:
> 
> I then tried to "fix" it with this suspect.
> I changed "skb_release_all(dst);" back to "skb_release_data(dst);" in
> skb_morph() (net/core/skbuff.c).
Check /proc/net/snmp to see if you're getting any fragments, if not
then skb_morph shouldn't even be getting called.
> I'm now at 205 of 210 packages completed without a further hang. I
> also do not see an obvious memory leak.
In any case, I suspect the cause of your problem is that somebody
somewhere is doing a double-free on an skb.
Since you're the only person who can reproduce this, we really need
your help to track this down.  Since bisecting the mm tree is not
practical, you could start by checking whether the bug is in mm only
or whether it affects rc6 too.
Thanks,
-- 
Visit Openswan at 
http://www.openswan.org/
Email: Herbert Xu 许志壬 <herbert@gondor.apana.org.au>
Home Page: 
http://gondor.apana.org.au/herbert/
PGP Key: 
http://gondor.apana.org.au/herbert/pubkey.txt