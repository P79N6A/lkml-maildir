Date: Thu, 13 May 1999 14:53:35 +0000 (   )
From: "Dave Jones." <>
Subject: [PATCH] fbcon glitch.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/5/13/136

Below is a patch I've been using for the last few revisions
of the kernel.
It seems safe on my systems, but I've only tried it on
Matrox G100 & G200.
When I boot, I get some cruft to the right of the penguin logo.
Artifacts that were printed by the BIOS during startup
'Updating ESCD.. success' etc..
This code just clears the screen to the right of the logo.
Comments?
d.
 _______________________________________________
| Dave 'Barc0de' Jones.     djones2@glam.ac.uk  |
| 
http://www.comp.glam.ac.uk/students/djones2
   |
|_______________________________________________|
diff -urN linux/drivers/video/fbcon.c linux.dj/drivers/video/fbcon.c
--- linux/drivers/video/fbcon.c	Mon Mar  8 07:50:49 1999
+++ linux/drivers/video/fbcon.c	Thu Mar 25 02:04:00 1999
@@ -212,7 +212,7 @@
 
 #ifdef CONFIG_MAC
 /*
- * On the Macintoy, there may or may not be a working VBL int. We need to prob
+ * On the Macintoy, there may or may not be a working VBL int. We need to probe
  */
 static int vbl_detected = 0;
 
@@ -1361,6 +1361,7 @@
 	p->dispsw->clear_margins(conp, p, 0);
     if (logo_shown == -2) {
 	logo_shown = fg_console;
+	fbcon_clear(conp, 0, 0, LOGO_H, p->var.xres-LOGO_W);
 	fbcon_show_logo(); /* This is protected above by initmem_freed */
 	update_region(fg_console,
 		      conp->vc_origin + conp->vc_size_row * conp->vc_top,