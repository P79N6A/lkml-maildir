Date: Thu, 11 Sep 2003 17:32:24 -0500
From: Greg Norris <>
Subject: Re: Re: 2.6.0-test5 usbserial oops
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/9/11/279

On Thu, Sep 11, 2003 at 10:57:56AM -0700, Greg KH wrote:
> Hm, can you try the following patch and let me know if it fixes the
> problem for you?
> 
> thanks,
> 
> greg k-h
I'm still getting an (apparently) identical oops.  I've attached the
ksymoops output (your patch was applied for this one), along with the
debugging messages you requested previously.  Let me know if I can
provide any additional info.
Thanx!
ksymoops 2.4.8 on i686 2.6.0-test5.  Options used
     -V (default)
     -k /proc/ksyms (default)
     -l /proc/modules (default)
     -o /lib/modules/2.6.0-test5/ (default)
     -m /boot/System.map-2.6.0-test5 (default)
Warning: You did not tell me where to find symbol information.  I will
assume that the log matches the kernel and modules that are running
right now and I'll use the default options above for symbol resolution.
If the current kernel and/or modules do not match the log, you can get
more accurate output by telling me the kernel version and where to find
map, modules, ksyms etc.  ksymoops -h explains the options.
Error (regular_file): read_ksyms stat /proc/ksyms failed
No modules in ksyms, skipping objects
No ksyms, skipping lsmod
Unable to handle kernel NULL pointer dereference 4t vrrnuil  edp:
*pde = 00000000
Oops: 0000 [#1]
CPU:    0
EIP:    0060:[<c01ff883>]    Not tainted
Using defaults from ksymoops -t elf32-i386 -a i386
EFLAGS: 00010206
eax: 00000005   ebx: f67e7800   ecx: 00000000   edx: f751f600
esi: c02dc4a8   edi: c02dc4c0   ebp: c1bdde04   esp: c1bdde00
ds: 007b   es: 007b   ss: 0068
Stack: c02dc4c0 c1bdde20 f8aa430b f751f600 f8aa67c0 f8aa6373 f67e78d8 f67e78a4 
       c1bdde38 c01d95f9 f67e7880 c1bdde40 c01d9900 f67e78a4 c1bdde50 c01b2d4c 
       f67e78a4 f67e7800 00000001 f6ba0880 c1bdde74 f8aa426c f67e78a4 f8aa67c0 
Call Trace:
 [<f8aa430b>] port_release+0x66/0xc5 [usbserial]
 [<c01d95f9>] device_release+0x5a/0x5e
 [<c01d9900>] device_del+0x6a/0x90
 [<c01b2d4c>] kobject_cleanup+0x73/0x75
 [<f8aa426c>] destroy_serial+0x189/0x1c2 [usbserial]
 [<c01b2d4c>] kobject_cleanup+0x73/0x75
 [<f8aa51b2>] usb_serial_disconnect+0x37/0x7e [usbserial]
 [<c01fa06f>] usb_unbind_interface+0x78/0x7a
 [<c01da8e3>] device_release_driver+0x62/0x64
 [<c01daa07>] bus_remove_device+0x54/0x93
 [<c01d98f5>] device_del+0x5f/0x90
 [<c01d993a>] device_unregister+0x14/0x22
 [<c01fab97>] usb_disconnect+0xee/0x113
 [<c01fd2c0>] hub_port_connect_change+0x323/0x328
 [<c01fcba8>] hub_port_status+0x3a/0xa0
 [<c01fd5b8>] hub_events+0x2f3/0x371
 [<c01fd663>] hub_thread+0x2d/0xc2
 [<c01092da>] ret_from_fork+0x6/0x14
 [<c011b71a>] default_wake_function+0x0/0x2e
 [<c01fd636>] hub_thread+0x0/0xc2
 [<c01072d9>] kernel_thread_helper+0x5/0xb
Code: 8b 80 cc 00 00 00 85 c0 74 07 8b 40 20 85 c0 75 09 b8 ed ff 
>>EIP; c01ff883 <usb_unlink_urb+14/39>   <=====
>>ebx; f67e7800 <__crc_lookup_create+76bd1/29c1f5>
>>edx; f751f600 <__crc_redraw_screen+1a721f/5580ca>
>>esi; c02dc4a8 <ktype_device+0/c>
>>edi; c02dc4c0 <devices_subsys+0/60>
>>ebp; c1bdde04 <__crc_seq_path+2926b4/79605d>
>>esp; c1bdde00 <__crc_seq_path+2926b0/79605d>
Trace; f8aa430b <__crc_pm_idle+19448c/8e97d5>
Trace; c01d95f9 <device_release+5a/5e>
Trace; c01d9900 <device_del+6a/90>
Trace; c01b2d4c <kobject_cleanup+73/75>
Trace; f8aa426c <__crc_pm_idle+1943ed/8e97d5>
Trace; c01b2d4c <kobject_cleanup+73/75>
Trace; f8aa51b2 <__crc_pm_idle+195333/8e97d5>
Trace; c01fa06f <usb_unbind_interface+78/7a>
Trace; c01da8e3 <device_release_driver+62/64>
Trace; c01daa07 <bus_remove_device+54/93>
Trace; c01d98f5 <device_del+5f/90>
Trace; c01d993a <device_unregister+14/22>
Trace; c01fab97 <usb_disconnect+ee/113>
Trace; c01fd2c0 <hub_port_connect_change+323/328>
Trace; c01fcba8 <hub_port_status+3a/a0>
Trace; c01fd5b8 <hub_events+2f3/371>
Trace; c01fd663 <hub_thread+2d/c2>
Trace; c01092da <ret_from_fork+6/14>
Trace; c011b71a <default_wake_function+0/2e>
Trace; c01fd636 <hub_thread+0/c2>
Trace; c01072d9 <kernel_thread_helper+5/b>
Code;  c01ff883 <usb_unlink_urb+14/39>
00000000 <_EIP>:
Code;  c01ff883 <usb_unlink_urb+14/39>   <=====
   0:   8b 80 cc 00 00 00         mov    0xcc(%eax),%eax   <=====
Code;  c01ff889 <usb_unlink_urb+1a/39>
   6:   85 c0                     test   %eax,%eax
Code;  c01ff88b <usb_unlink_urb+1c/39>
   8:   74 07                     je     11 <_EIP+0x11>
Code;  c01ff88d <usb_unlink_urb+1e/39>
   a:   8b 40 20                  mov    0x20(%eax),%eax
Code;  c01ff890 <usb_unlink_urb+21/39>
   d:   85 c0                     test   %eax,%eax
Code;  c01ff892 <usb_unlink_urb+23/39>
   f:   75 09                     jne    1a <_EIP+0x1a>
Code;  c01ff894 <usb_unlink_urb+25/39>
  11:   b8 ed ff 00 00            mov    $0xffed,%eax
CPU 1 IS NOW UP!
Machine check exception polling timer started.
e100: eth0 NIC Link is Up 100 Mbps Full duplex
Unable to handle kernel NULL pointer dereference at virtual address 000000d1
c01ff883
*pde = 00000000
Oops: 0000 [#1]
CPU:    1
EIP:    0060:[<c01ff883>]    Not tainted
EFLAGS: 00010206
eax: 00000005   ebx: f6bdc600   ecx: 00000000   edx: f737d800
esi: c02dc4a8   edi: c02dc4c0   ebp: c1bdde04   esp: c1bdde00
ds: 007b   es: 007b   ss: 0068
Stack: c02dc4c0 c1bdde20 f8a8d30b f737d800 f8a8f7c0 f8a8f373 f6bdc6d8 f6bdc6a4 
       c1bdde38 c01d95f9 f6bdc680 c1bdde40 c01d9900 f6bdc6a4 c1bdde50 c01b2d4c 
       f6bdc6a4 f6bdc600 00000001 c1b27300 c1bdde74 f8a8d26c f6bdc6a4 f8a8f7c0 
Call Trace:
 [<f8a8d30b>] port_release+0x66/0xc5 [usbserial]
 [<c01d95f9>] device_release+0x5a/0x5e
 [<c01d9900>] device_del+0x6a/0x90
 [<c01b2d4c>] kobject_cleanup+0x73/0x75
 [<f8a8d26c>] destroy_serial+0x189/0x1c2 [usbserial]
 [<c01b2d4c>] kobject_cleanup+0x73/0x75
 [<f8a8e1b2>] usb_serial_disconnect+0x37/0x7e [usbserial]
 [<c01fa06f>] usb_unbind_interface+0x78/0x7a
 [<c01da8e3>] device_release_driver+0x62/0x64
 [<c01daa07>] bus_remove_device+0x54/0x93
 [<c01d98f5>] device_del+0x5f/0x90
 [<c01d993a>] device_unregister+0x14/0x22
 [<c01fab97>] usb_disconnect+0xee/0x113
 [<c01fd2c0>] hub_port_connect_change+0x323/0x328
 [<c01fcba8>] hub_port_status+0x3a/0xa0
 [<c01fd5b8>] hub_events+0x2f3/0x371
 [<c01fd663>] hub_thread+0x2d/0xc2
 [<c01092da>] ret_from_fork+0x6/0x14
 [<c011b71a>] default_wake_function+0x0/0x2e
 [<c01fd636>] hub_thread+0x0/0xc2
 [<c01072d9>] kernel_thread_helper+0x5/0xb
Code: 8b 80 cc 00 00 00 85 c0 74 07 8b 40 20 85 c0 75 09 b8 ed ff 
>>EIP; c01ff883 <usb_unlink_urb+14/39>   <=====
>>ebx; f6bdc600 <__crc_color_table+27ed7/83a35>
>>edx; f737d800 <__crc_redraw_screen+541f/5580ca>
>>esi; c02dc4a8 <ktype_device+0/c>
>>edi; c02dc4c0 <devices_subsys+0/60>
>>ebp; c1bdde04 <__crc_seq_path+2926b4/79605d>
>>esp; c1bdde00 <__crc_seq_path+2926b0/79605d>
Trace; f8a8d30b <__crc_pm_idle+17d48c/8e97d5>
Trace; c01d95f9 <device_release+5a/5e>
Trace; c01d9900 <device_del+6a/90>
Trace; c01b2d4c <kobject_cleanup+73/75>
Trace; f8a8d26c <__crc_pm_idle+17d3ed/8e97d5>
Trace; c01b2d4c <kobject_cleanup+73/75>
Trace; f8a8e1b2 <__crc_pm_idle+17e333/8e97d5>
Trace; c01fa06f <usb_unbind_interface+78/7a>
Trace; c01da8e3 <device_release_driver+62/64>
Trace; c01daa07 <bus_remove_device+54/93>
Trace; c01d98f5 <device_del+5f/90>
Trace; c01d993a <device_unregister+14/22>
Trace; c01fab97 <usb_disconnect+ee/113>
Trace; c01fd2c0 <hub_port_connect_change+323/328>
Trace; c01fcba8 <hub_port_status+3a/a0>
Trace; c01fd5b8 <hub_events+2f3/371>
Trace; c01fd663 <hub_thread+2d/c2>
Trace; c01092da <ret_from_fork+6/14>
Trace; c011b71a <default_wake_function+0/2e>
Trace; c01fd636 <hub_thread+0/c2>
Trace; c01072d9 <kernel_thread_helper+5/b>
Code;  c01ff883 <usb_unlink_urb+14/39>
00000000 <_EIP>:
Code;  c01ff883 <usb_unlink_urb+14/39>   <=====
   0:   8b 80 cc 00 00 00         mov    0xcc(%eax),%eax   <=====
Code;  c01ff889 <usb_unlink_urb+1a/39>
   6:   85 c0                     test   %eax,%eax
Code;  c01ff88b <usb_unlink_urb+1c/39>
   8:   74 07                     je     11 <_EIP+0x11>
Code;  c01ff88d <usb_unlink_urb+1e/39>
   a:   8b 40 20                  mov    0x20(%eax),%eax
Code;  c01ff890 <usb_unlink_urb+21/39>
   d:   85 c0                     test   %eax,%eax
Code;  c01ff892 <usb_unlink_urb+23/39>
   f:   75 09                     jne    1a <_EIP+0x1a>
Code;  c01ff894 <usb_unlink_urb+25/39>
  11:   b8 ed ff 00 00            mov    $0xffed,%eax
1 warning and 1 error issued.  Results may not be reliable.
[unhandled content-type:application/octet-stream]