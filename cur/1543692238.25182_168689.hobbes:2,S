Date: Sun, 28 Sep 2003 01:26:34 +1000 (EST)
From: Jason Lewis <>
Subject: [BUG 2.6.90-test5] kernel shits itself with 48mb ram under moderate load
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/9/27/47

Hi,
I have just tried out my first 2.6test5 kernel. upgrading from 2.4.17.
I seem to be experiencing some problems with it. boot and load X ok, but
as soon as I try and do anything interesting in X, like run xchat, or
apt-get update, the system grings to a halt. the load goes through the
roof, and the hdd starts grinding away madly.
But I can run my system quite succesfully under 2.4
A friend told me I should send you the output of a vmstat 1, while its
churning away. So I have made a log which I have included in this email.
Pleaes CC resposes to me as I am not part of this mailing list.
Hope this is of some use.
Let me know if you need any more information about this.
Jason
Script started on Sun 28 Sep 2003 00:56:41 EST
car:~# vmstat 1
procs -----------memory---------- ---swap-- -----io---- --system-- ----cpu----
 r  b   swpd   free   buff  cache   si   so    bi    bo   in    cs us sy id wa
 0  0      0   6396   3540  20296    0    0   355    68 1036   300 21 12 49 18
 0  0      0   6388   3540  20296    0    0     0     0 1004   391  0  0 100  0
 0  0      0   6388   3540  20296    0    0     0     0 1003   390  0  1 99  0
 0  0      0   6376   3548  20296    0    0     0    80 1005   394  0  0 99  1
 0  0      0   6376   3548  20296    0    0     0     0 1003   389  0  0 100  0
 0  0      0   6376   3548  20296    0    0     0     0 1008   393  0  0 100  0
 0  0      0   6376   3548  20296    0    0     0     0 1013   406  0  0 100  0
 0  0      0   6376   3548  20296    0    0     0     0 1010   399  0  0 100  0
 0  0      0   6292   3552  20296    0    0     0     4 1016   421  2  2 96  0
 0  0      0   6288   3552  20296    0    0     0     0 1004   384  0  0 100  0
 0  0      0   6256   3568  20296    0    0     0   104 1010   403  0  1 98  1
 0  0      0   6256   3568  20296    0    0     0     0 1003   383  0  0 100  0
 0  0      0   6244   3576  20296    0    0     0    24 1005   391  0  0 100  0
 0  0      0   6240   3576  20296    0    0     0   264 1065   399  0  0 100  0
 0  0      0   6240   3576  20296    0    0     0     0 1008   392  0  0 100  0
 0  0      0   6236   3576  20296    0    0     0     0 1015   409  0  0 100  0
 0  0      0   5848   3600  20324    0    0    44    36 1022   423 11  3 73 13
 0  0      0   5848   3600  20324    0    0     0     0 1003   381  0  0 100  0
 0  0      0   5844   3600  20324    0    0     0     0 1009   397  0  0 100  0
 1  0      0   4676   3652  20684    0    0   412     0 1038   493 20 11 46 23
 0  1      0   3540   2744  20580    0    0  3252     0 1106   563 35 16  0 50
 1  0      0   3924   2496  19216    0    0  1044   340 1102   484 77  9  0 14
procs -----------memory---------- ---swap-- -----io---- --system-- ----cpu----
 r  b   swpd   free   buff  cache   si   so    bi    bo   in    cs us sy id wa
 3  0      0   2980   2508  19868    0    0   456     0 1160   448 86  6  0  8
 1  0      0   3300   2348  19040    0    0   572     0 1018   415 84  6  2  8
 0  1      0   3464   2364  18468    0    0   940     0 1058   481 52  4  7 37
 0  0      0   3464   2404  18616    0    0   188     0 1031   437 19  2 68 12
 0  1      0   3336   2296  17672    0    0   264   220 1030   441 41  3 41 14
 0  5      0   3328   2104  17228    0    0  1908    20 1081   592 24 13  0 63
 0  3      0   3360   2112  16428    0    0  1484    64 1093   849 21  8  0 71
 1  0      0   3160   1904  16360    0    0  1536     4 1111  1155 34  5  0 61
 1  0      0   2776   1924  16448    0    0  1520     4 1123   629 46  6  0 49
 0  2      0   3008   1632  16144    0    0   816   568 1103   733 67  9  0 24
 2  1      0   3196   1288  14144    0    0   612   272 1138   652 27 11  0 62
 1  0      0   3148   1284  13444    0    0   832    68 1101  2450 28 15  0 57
 0  1      0   3640   1332  12760    0    0  1164     0 1087  1136 27 10  0 63
 0  0      0   4064   1332  12760    0    0     0     0 1004   392  1  0 99  0
 0  0      0   4064   1344  12760    0    0     4   188 1007   400  0  0 97  3
 0  0      0   4104   1344  12760    0    0     0     0 1002   390  0  0 100  0
 0  0      0   4104   1344  12760    0    0     0     0 1002   394  0  0 100  0
 0  1      0   4044   1372  12816    0    0    84     0 1026   409  0  0 96  4
 0  0      0   4044   1372  12816    0    0     0     0 1157   666  2  2 94  2
 0  0      0   4084   1372  12816    0    0     0     0 1187   887  8  3 89  0
 0  0      0   4084   1372  12816    0    0     0     0 1195   854  1  2 97  0
 0  0      0   4088   1372  12816    0    0     0     0 1032   474  1  0 99  0
procs -----------memory---------- ---swap-- -----io---- --system-- ----cpu----
 r  b   swpd   free   buff  cache   si   so    bi    bo   in    cs us sy id wa
 2  0      0   3960   1384  12868    0    0    56    12 1062   552  1  1 95  3
 0  2      0   3948   1272  12400    0    0   840    44 1182  1306 39 11  0 50
 1  0      0   3612   1268  12220    0    0   288    32 1166   893 54  9  0 37
 0  2      0   3548   1212  11756    0    0   156     8 1161   834 74 12  0 14
 0  0      0   3532   1232  12052    0    0   320   112 1242   917 33  6 19 42
 1  1      0   3520   1096  11256    0    0   396    12 1168  1446 64 16  6 15
 1  0      0   3444   1128  10984    0    0    56   240 1021   437 86  5  0  9
 0  0      0   3864   1020  10556    0    0   192    48 1035   471 35  6 37 23
 0  0      0   3864   1020  10556    0    0     0     0 1014   501  0  0 100  0
 0  1      0   3672   1060  10556    0    0    40     0 1017   519  1  1 93  5
 1  0      0   4032   1136  10020    0    0  2788    16 1184   604  2  5  0 93
 0  1      0   3640   1000  10400    0    0  2624   232 1139   596  4  4  0 92
 0  1      0   3608   1028  10212    0    0  1888    84 1153   664 12  5  0 83
 0  1      0   3752   1040   9868    0    0  3140     0 1198   605 13  5  0 82
 1  0      0   4080   1036   9056    0    0  1884     0 1142   632 63  7  0 30
 0  1      0   3856   1140   9148    0    0  1324   136 1124   544 29  3  0 68
 0  2      0   3736   1000   8100    0    0  2272   368 1134   549 27  7  0 66
 1  0      0   3824   1024   7452    0    0  3084    12 1190   596  6  5  0 89
 0  1      0   3952    984   7340    0    0  3220     0 1181   586 17  3  0 80
 1  0      0   3496   1004   7776    0    0  3948     0 1268   618  3  4  0 93
 1  0      0   3920    992   7372    0    0  3004     0 1220   593 16  5  0 79
 0  2      0   3864   1012   7136    0    0  3472     0 1135   562 34  4  0 62
procs -----------memory---------- ---swap-- -----io---- --system-- ----cpu----
 r  b   swpd   free   buff  cache   si   so    bi    bo   in    cs us sy id wa
 2  0      0   3544   1008   7392    0    0  3104    28 1583   822  5  3  0 92
 1  0      0   3696    844   7420    0    0  3548    20 1214   593 14  5  0 81
 0  1      0   3848    840   7276    0    0  4184     0 1412   748  4  4  0 92
 0  2      0   3688    848   7344    0    0  3684     0 1289   678  3  5  0 92
 0  3      0   3976    876   7024    0    0  3348     0 1396   770  1  5  0 94
 0  2      0   3560    848   7468    0    0  3632     0 1347   682  2  4  0 95
 0  2      0   3464    864   7532    0    0  4472     0 1396   723  1  5  0 95
 0  1      0   3840    860   7152    0    0  3512     0 1486   754  2  5  0 93
 0  5      0   3976    848   7040    0    0  5400    12 1354   776  2  5  0 94
 0  4      0   3552    852   7364    0    0  4148     4 1888  1149  3  4  0 94
 0  1      0   3560    836   7372    0    0  4512     0 1501   885  2  6  0 93
 0  1      0   3680    840   7260    0    0  3364     0 1414   714  1  4  0 96
 0  3      0   3732    820   6400    0    0  4712     0 1346   744  4  6  0 89
 1  3      0   3620    824   6496    0    0  5344     0 1813   969  2  5  0 93
 0  3      0   3404    828   6716    0    0  4060   100 1650   893  0  5  0 95
 0  1      0   3348    852   6740    0    0  3452     0 1524   766  1  4  0 95
 0  2      0   3644    828   6472    0    0  5196     0 1508   819  1  6  0 93
 0  1      0   3484    848   6560    0    0  4184     0 1379   747  1  5  0 94
 0  2      0   3904    832   6860    0    0  4464     0 1380   450  2  5  0 93
 0  1      0   3872    824   6888    0    0  3896     0 1594   923  1  4  0 95
 0  4      0   3528    828   7252    0    0  3768     0 1445   752  5  5  0 90
 0  1      0   3832    816   6956    0    0  4296     0 1545   809  2  4  0 93
procs -----------memory---------- ---swap-- -----io---- --system-- ----cpu----
 r  b   swpd   free   buff  cache   si   so    bi    bo   in    cs us sy id wa
 1  1      0   3416    936   7252    0    0  2748     0 1302   635  0  4  0 96
 0  1      0   3768    856   6852    0    0  3244     0 1218   621  7  5  0 88
 0  1      0   3720    880   6572    0    0  3820     0 1298   685  7  6  0 88
 0  2      0   3504    916   6656    0    0  2864     0 1477   956  6  7  0 86
 0  1      0   3616    888   6528    0    0  3324     4 1291   820  7  8  0 86
 0  1      0   3624    892   6528    0    0  3292    96 1247   607  0  4  0 96
 0  1      0   3896    904   6224    0    0  3188    24 1346   689  0  4  0 96
 0  1      0   3784    892   6328    0    0  3616     0 1418   669  1  4  0 95
 0  1      0   3616    872   6516    0    0  3356     0 1255   613 12  5  0 83
 0  2      0   3712    908   6396    0    0  3952     0 1485   775  0  4  0 96
 0  2      0   3520    908   6540    0    0  4652    32 1265   667  0  6  0 94
 0  1      0   3656    872   6456    0    0  3548    32 1609   854  0  5  0 95
 0  4      0   3648    844   6432    0    0  4916     0 1487   748  9  6  0 85
 2  5      0   3584    860   6296    0    0  7124     0 2847  1968  3  7  0 90
 0  2      0   3688    868   6096    0    0  5424     0 2175  1581  1  7  0 91
 1  3      0   3360    868   6460    0    0  5272     0 1619   910  1  6  0 93
 0  3      0   3480    844   6368    0    0  3732    40 1398   875  0  5  0 95
 0  2      0   3648    836   6152    0    0  4920     0 1658  1072  1  6  0 93
 0  2      0   3448    872   6256    0    0  5232     0 1476   840  1  7  0 92
 1  5      0   3456    868   6224    0    0  5280     0 1503   876  1 10  0 90
 3  5      0   3496    888   6008    0    0  7472     0 2014  1216  0  7  0 93
 1  2      0   3656    868   5892    0    0  7020    72 2758  1684  0  7  0 92
procs -----------memory---------- ---swap-- -----io---- --system-- ----cpu----
 r  b   swpd   free   buff  cache   si   so    bi    bo   in    cs us sy id wa
 0  5      0   3632    848   6028    0    0  6356     0 1817  1090  0  7  0 93
 0  5      0   3472    852   6160    0    0  7468     0 2471  1557  0  7  0 92
 0  5      0   3408    872   6000    0    0  8528     0 2249  1414  0  9  0 91
 0  4      0   3656    848   5920    0    0  5960     0 1862  1133  1  9  0 90
 5  8      0   3672    852   5900    0    0 12736     0 2134  1077  0 11  0 89
 0  8      0   3672    820   5840    0    0  9696    24 3882  1893  0 10  0 90
 1  8      0   3416    836   6180    0    0  7860     0 3523  1660  0  9  0 90
 1  6      0   3448    828   6152    0    0 16804     0 4709  2294  0  9  0 91
 0  4      0   3376    836   6192    0    0  6044     0 2812  1327  0  8  0 92
 0  5      0   3600    848   5932    0    0  5584    24 1987  1140  1  6  0 93
 0  5      0   3384    852   6168    0    0  3840     0 2010  1184  0  6  0 94
 0  6      0   3352    868   6036    0    0  8184     0 2586  1576  0  8  0 92
 1  6      0   3392    832   6064    0    0  8456    40 2739  1163  0 11  0 89
 0  5      0   3592    828   5924    0    0  8064     0 2725  1187  0  9  0 91
 1  7      0   3600    836   5896    0    0 11460     0 2793  1137  0  8  0 92
 1  4      0   3376    828   6168    0    0  6712     0 3468  1429  0  9  0 91
 0  3      0   3608    840   5904    0    0  5784     0 1909   814  0  9  0 91
 0  7      0   3720    836   5804    0    0  9116     0 2440  1014  0  8  0 92
 2  5      0   3616    828   5912    0    0 15924     0 3262  1488  0 10  0 90
 0  7      0   3408    840   6076    0    0  8248     0 5031  2331  1 10  0 90
 2  7      0   3656    832   5848    0    0  7744     0 2094   942  0 10  0 90
 1  4      0   3432    848   6068    0    0  6564    16 2496  1193  0  8  0 92
procs -----------memory---------- ---swap-- -----io---- --system-- ----cpu----
 r  b   swpd   free   buff  cache   si   so    bi    bo   in    cs us sy id wa
 1  3      0   3648    824   5856    0    0  4368     0 1607   686  1  8  0 91
 0  6      0   3448    824   6008    0    0  4220     0 1364   720  0 10  0 90
 2  6      0   3376    840   6116    0    0  9152     0 2353   998  1  9  0 91
 1  6      0   3664    816   5804    0    0  8676     0 3296  1266  0  9  0 91
 0  4      0   3672    824   5784    0    0  6228     0 2003   770  0  8  0 92
 0  5      0   3592    816   5940    0    0  8916     0 2811  1225  0 10  0 90
 0  4      0   3400    820   6064    0    0  5608     0 1924   829  1  9  0 91
 1  5      0   3424    828   6068    0    0  5028     4 1548   637  0  8  0 92
 0  5      0   3416    824   5976    0    0  8916     0 2223   958  0 10  0 90
 1  8      0   3248    836   6248    0    0  9812    28 2468  1205  0 10  0 90
 0  7      0   3552    832   5916    0    0 10816     0 4448  2146  0 11  0 89
 4  8      0   3432    828   6000    0    0 17564     0 3285  1587  0 11  0 88
 2  7      0   3456    832   6016    0    0  7940    16 3645  1734  0  9  0 91
 2  4      0   3408    816   6092    0    0  7028     0 3104  1290  0  9  0 90
 0  5      0   3488    820   5932    0    0  9084     0 2439  1011  0  8  0 91
 0  7      0   3504    824   5992    0    0 19296     0 5021  2510  0 11  0 89
 1  7      0   3408    840   6052    0    0 23144     8 4670  2431  0 11  0 89
 2  6      0   3424    836   6032    0    0  9552    56 6616  3750  0 13  0 87
 1  7      0   3384    844   6056    0    0 17944    36 4318  2318  0 10  0 90
 1  7      0   3392    824   6088    0    0 14888    20 4349  2224  0 11  0 88
 1  6      0   3632    820   5832    0    0  5532     0 3490  1837  0 11  0 88
 0  5      0   3456    844   5860    0    0  8424     0 2466  1083  0  9  0 91
procs -----------memory---------- ---swap-- -----io---- --system-- ----cpu----
 r  b   swpd   free   buff  cache   si   so    bi    bo   in    cs us sy id wa
 0  5      0   3512    828   5944    0    0  8008     0 2852  1318  0 10  0 90
 0  5      0   3360    840   6072    0    0  6016     0 2309  1165  1 10  0 89
 2  9      0   3360    840   6092    0    0  9180    16 3274  1713  0 11  0 89
 0  8      0   3568    824   5880    0    0  8604     0 3314  1664  0 10  0 90
 4  7      0   3400    832   5976    0    0  5308     0 2125   987  1  9  0 90
 1  7      0   3440    828   6004    0    0 20004    16 4847  2691  0 11  0 89
 1  7      0   3472    832   5972    0    0 18032     0 4969  2300  0 10  0 90
 0 10      0   3592    812   5868    0    0 14956     0 5265  2709  0 11  0 89
 0  9      0   3384    824   6004    0    0 16828     0 4976  2693  0 12  0 88
 0  8      0   3400    828   6020    0    0 11116     0 6583  3450  0 11  0 89
 1 11      0   3552    848   5864    0    0 17928    72 4087  2284  0 11  0 89
 1  9      0   3504    840   5932    0    0 19980    28 7002  3713  0 11  0 89
 0  7      0   3392    832   6044    0    0  8064    12 5838  3890  0 11  0 88
 0  6      0   3600    824   5772    0    0  6132     0 1944   917  1  9  0 90
 1  5      0   3440    824   5992    0    0  5720     0 2437  1182  0 11  0 89
 0  6      0   3360    836   6056    0    0  7092     0 2875  1286  0 10  0 90
 0  7      0   3496    832   5876    0    0  4304     0 2423  1188  1 10  0 90
 3  5      0   3408    832   6008    0    0  5964     0 2326  1134  1 10  0 90
 1  7      0   3384    844   6016    0    0  4132    12 2250  1061  0  9  0 91
 0  8      0   3408    820   6016    0    0  5936     4 1815   942  0 11  0 89
 0  6      0   3472    824   5932    0    0  4248     0 2664  1372  0 10  0 89
 0  8      0   3384    832   5996    0    0  4684     0 1975  1092  0 10  0 90
procs -----------memory---------- ---swap-- -----io---- --system-- ----cpu----
 r  b   swpd   free   buff  cache   si   so    bi    bo   in    cs us sy id wa
 1  8      0   3360    836   6024    0    0 16404    16 3666  2158  1 13  0 86
 1 11      0   3504    828   5888    0    0 14956     4 6185  3344  0 11  0 89
 3  9      0   3392    816   6016    0    0  6864     0 3903  2088  0 11  0 89
 2 13      0   3464    820   5880    0    0 11148     0 3105  1960  0 12  0 87
 0 12      0   3424    816   6008    0    0 19712     0 5519  3184  0 12  0 87
 2  9      0   3472    820   5956    0    0 12460     0 5097  2478  0 10  0 90
 2  7      0   3576    820   5820    0    0  5504    24 4083  2210  0 11  0 89
 3  7      0   3488    816   5928    0    0  9256     0 1795   878  1 13  0 87
 2 10      0   3360    840   6044    0    0 35552     0 4525  2548  0 11  0 89
 3 10      0   3632    820   5772    0    0 20200     0 11229  6789  0 14  0 86
 0 11      0   3536    828   5788    0    0 22916    20 6637  3941  0 13  0 86
 0  8      0   3552    812   5816    0    0 37060    24 7856  4559  0 13  0 87
 0 10      0   3512    824   5812    0    0 12300     8 12191  7165  0 13  0 87
 2 10      0   3360    864   5912    0    0  6212     0 3673  2046  0 12  0 88
 2  8      0   3464    824   5844    0    0 12304    16 3455  1789  1 11  0 89
 2 10      0   3400    820   5876    0    0 19784     0 5922  3306  0 14  0 86
 0 11      0   3512    848   5804    0    0  9772    52 6949  4052  0 12  0 88
 2  8      0   3496    844   5804    0    0  7720     0 3762  2334  0 12  0 88
 2 10      0   3448    832   5864    0    0 12712     0 3100  1620  0 13  0 87
 0  9      0   3384    832   5928    0    0  8328    12 3754  2342  0 13  0 87
 1  9      0   3440    816   5856    0    0  5368     0 3656  2166  1 13  0 86
 0  3      0   6220    860   8080    0    0  1768     0 1646   869  1  4  0 95
procs -----------memory---------- ---swap-- -----io---- --system-- ----cpu----
 r  b   swpd   free   buff  cache   si   so    bi    bo   in    cs us sy id wa
 1  0      0   4812    948   9364    0    0  1360     0 1147   807  9  5  7 79
 0  0      0   4836    964   9364    0    0     8    56 1007   405  0  0 98  2
 0  0      0   4836    964   9368    0    0     4     0 1004   395  0  0 99  1
 0  0      0   4828    964   9372    0    0     4     0 1004   396  1  0 98  1
 0  0      0   4828    964   9372    0    0     0     0 1003   393  0  0 100  0
 0  0      0   4876    964   9372    0    0     0     0 1003   393  0  0 100  0
 0  0      0   4876    964   9372    0    0     0     0 1003   400  0  0 100  0
 0  0      0   4880    964   9372    0    0     0     0 1003   401  0  1 99  0
 0  0      0   4640    964   9500    0    0   128     0 1009   465  3  0 95  2
 0  0      0   4640    964   9500    0    0     0     0 1010   437  8  0 92  0
 0  0      0   4640    964   9500    0    0     0     0 1003   403  1  1 98  0
 0  0      0   4640    964   9500    0    0     0     0 1003   403  0  0 100  0
 1  0      0   4520    964   9620    0    0   120     0 1008   406  0  0 96  4
 0  0      0   4488    964   9628    0    0     8     0 1005   331  0  0 99  1
 0  0      0   4488    964   9628    0    0     0     0 1003   162  0  0 100  0
 0  0      0   4464    964   9656    0    0    28     0 1004   168  0  1 98  1
 0  0      0   4464    964   9656    0    0     0     0 1003   164  0  0 100  0
 0  0      0   4464    964   9656    0    0     0     0 1003   164  1  0 99  0
 0  0      0   4464    964   9656    0    0     0     0 1005   174  0  0 100  0
 0  0      0   4468    964   9656    0    0     0     0 1048   225  0  0 100  0
 0  0      0   4468    964   9656    0    0     0     0 1043   204  0  0 100  0
 0  0      0   4468    964   9656    0    0     0     0 1003   165  0  0 100  0
procs -----------memory---------- ---swap-- -----io---- --system-- ----cpu----
 r  b   swpd   free   buff  cache   si   so    bi    bo   in    cs us sy id wa
 1  0      0   4468    964   9656    0    0     0     0 1003   162  0  1 99  0
 0  0      0   4476    964   9656    0    0     0     0 1005   172  0  0 100  0
 0  0      0   4476    964   9656    0    0     0     0 1003   163  0  0 100  0
car:~# exit
Script done on Sun 28 Sep 2003 01:03:49 EST