Date: Wed, 16 Aug 2006 20:36:53 +0800
From: Ian Kent <>
Subject: Re: 2.6.18-rc4-mm1
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/8/16/110

On Wed, 2006-08-16 at 10:34 +0100, David Howells wrote:
> Andrew Morton <akpm@osdl.org> wrote:
> 
....
> What is going on here?????????????????????????????????????????????????????
> 
> stracing the automount daemon, I see:
> 
> [pid  3803] mkdir("/net", 0555)         = -1 EEXIST (File exists)
> [pid  3803] stat64("/net", {st_mode=S_IFDIR|0755, st_size=0, ...}) = 0
> [pid  3803] mkdir("/net/trash", 0555)   = -1 EEXIST (File exists)
> [pid  3803] stat64("/net/trash", {st_mode=S_IFDIR|0755, st_size=1024, ...}) = 0
> [pid  3803] mkdir("/net/trash/usr", 0555) = -1 EACCES (Permission denied)
> 
> I think that would be the problem.  Ian?
I guess, but it's also possible that multi-entry mounts similar to those
generated by the auto.net script need mount point directories created.
The same code is used for all.
I guess that I could check if the fs is autofs4 and only mount the
mounts for directories that exist, as I do in v5. However, people may
have come to rely on this so it would be a regression, for v4 at least.
Thoughts?
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/