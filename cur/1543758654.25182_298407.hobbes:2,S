Date: Wed, 02 Mar 2005 08:57:14 +0100
From: Panagiotis Issaris <>
Subject: Re: [PATCH] Possible AMD8111e free irq issue
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/3/2/21

Hi,
Jeff Garzik wrote:
>> diff -uprN linux-2.6.11-rc5-bk2/drivers/net/amd8111e.c 
>> linux-2.6.11-rc5-bk2-pi/drivers/net/amd8111e.c
>> --- linux-2.6.11-rc5-bk2/drivers/net/amd8111e.c    2005-02-28 
>> 13:44:46.000000000 +0100
>> +++ linux-2.6.11-rc5-bk2-pi/drivers/net/amd8111e.c    2005-02-28 
>> 13:45:09.000000000 +0100
>> @@ -1381,6 +1381,8 @@ static int amd8111e_open(struct net_devi
>> 
>>      if(amd8111e_restart(dev)){
>>          spin_unlock_irq(&lp->lock);
>> +        if (dev->irq)
>> +            free_irq(dev->irq, dev);
>>          return -ENOMEM;
>
>
> Yes, this is a needed fix.  Thanks.
Should the release of the irq happen before or after unlocking the 
spinlock? I wasn't really
sure about it.
With friendly regards,
Takis
-- 
  K.U.Leuven, Mechanical Eng.,  Mechatronics & Robotics Research Group
  
http://people.mech.kuleuven.ac.be/~pissaris/
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/