Date: Thu, 9 Sep 2004 18:37:05 +0200
From: Sam Ravnborg <>
Subject: Re: [PATCH 2.6.9-rc1-bk16] ppc32: Use $(addprefix ...) on arch/ppc/boot/lib/
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/9/9/153

On Thu, Sep 09, 2004 at 08:30:31AM -0700, Tom Rini wrote:
> The following makes arch/ppc/boot/lib/Makefile use $(addprefix ...) to
> get lib/zlib_inflate/ source code.  Previously we were manually setting
> the dependancy and invoking cc_o_c.  Worse, we were invoking the cmd
> version, not the rule version and thus when MODVERSIONS=y, we wouldn't
> do the .tmp_foo.o -> foo.o rename, and thus the compile would break.
> Using $(addprefix ...) gets us using the standard rules again (and is
> shorter to boot).
Your patch was pending my comments - sorry.
Why not:
lib-y := $(addprefix lib/zlib_inflate/,infblock.o infcodes.o inffast.o \
                                       inflate.o inftrees.o infutil.o)
lib-y += div64.o
lib-$(CONFIG_VGA_CONSOLE) += vreset.o kbd.o
No need to use that ugly relative path.
I do not like this way of selectng .o files. It will so
obviously break the build with make -j if there is no synchronisation
point. vmlinux provide this synchronisation point in this case.
But in this particular case I see no better alternative.
	Sam
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/