Date: Sun, 20 Jul 2003 04:11:33 +0200 (CEST)
From: Roberto Sanchez <>
Subject: [PATCH] drivers/video/vesafb.c, kernel 2.6.0-test1
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/7/19/169

This is a trivial patch I made against the 2.6.0-test1 kernel to fix the
"vesafb: abort, cannot ioremap video memory 0x8000000 @ 0xe8000000" error
on systems with 1 GB RAM or more trying to use the framebuffer.
The trivial fix was mentioned on this list in this message:
http://www.ussg.iu.edu/hypermail/linux/kernel/0303.3/1236.html
The thread for the above message started here:
http://www.ussg.iu.edu/hypermail/linux/kernel/0303.3/1098.html
-Roberto Sanchez
Here is the patch (it is only a change to one line):
--- linux-2.6.0-test1.orig/drivers/video/vesafb.c       2003-07-13
23:30:36.000000000 -0400
+++ linux/drivers/video/vesafb.c        2003-07-19 20:30:18.000000000 -0400
@@ -227,7 +227,7 @@
        vesafb_defined.xres = screen_info.lfb_width;
        vesafb_defined.yres = screen_info.lfb_height;
        vesafb_fix.line_length = screen_info.lfb_linelength;
-       vesafb_fix.smem_len = screen_info.lfb_size * 65536;
+       vesafb_fix.smem_len = screen_info.lfb_width * screen_info.lfb_height *
screen_info.lfb_depth;
        vesafb_fix.visual   = (vesafb_defined.bits_per_pixel == 8) ?
                FB_VISUAL_PSEUDOCOLOR : FB_VISUAL_TRUECOLOR;
                                                                               
___________________________________________________
Yahoo! Messenger - Nueva versión GRATIS
Super Webcam, voz, caritas animadas, y más...
http://messenger.yahoo.es
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/