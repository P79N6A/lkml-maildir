Date: Mon, 25 Feb 2008 14:25:26 +0200
From: Adrian Bunk <>
Subject: Re: [PATCH] Add rdc321x defconfig file
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/2/25/131

On Mon, Feb 25, 2008 at 12:50:22PM +0100, Ingo Molnar wrote:
> 
> * Adrian Bunk <bunk@kernel.org> wrote:
> 
> > > What i do against build breakage is randconfig testing. That catches 
> > > far more build breakage than a few limited number of defconfigs 
> > > would ever.
> > 
> > How do you test whether a x86 merge might break the compilation of 
> > e.g. some ARM platform without using any defconfig?
> 
> yes, we do test that too. (we added this recently)
Really "without using any defconfig"?
> > And building all defconfigs is the trivial way of having most 
> > reasonable configurations covered with only one day of compile time.
> 
> the existing 32-bit and 64-bit defconfigs should be enough for that. For 
> better/full coverage, randconfig should be used.
The two big problems with randconfigs are:
- either you build each .config both with and without your patch or you
  have to manually check which of the failures are caused by your patch
- you require at least an order of magnitude more builds for having the
  same amount of common configurations covered
And any solution that only works on x86 (e.g. based on the expectation 
that all randconfig configurations normally build) is of zero value
for me since x86 is only one out of 23 architectures.
> > > More defconfigs would just be a constant maintenance drag, they are 
> > > rather pointless on PC hardware anyway (we'd have to have at least a 
> > > few hundred of them for it to be meaningful as a "default config") 
> > > and it does not really solve the problem either.
> > 
> > My goal was "one per subarchitecture" which is not such a big number.
> 
> at least on x86 subarchitectures are not at all that important (they are 
> a rather inflexible build-time concept), and as you have seen it in this 
> thread, we are working on reducing their count. 99% of the real hardware 
> is covered under the generic subarchitecture.
> 
> they are more important on other (mostly embedded) platforms, with ARM 
> having 75 defconfigs.
In my workflow defconfigs are an important part of testing my patches. 
But that noone cares whether I break other x86 subarchitectures is not 
really a problem for me.
> 	Ingo
cu
Adrian
-- 
       "Is there not promise of rain?" Ling Tan asked suddenly out
        of the darkness. There had been need of rain for many days.
       "Only a promise," Lao Er said.
                                       Pearl S. Buck - Dragon Seed