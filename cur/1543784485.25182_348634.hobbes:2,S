Date: Fri, 09 Sep 2005 15:58:03 +0100
From: Anton Altaparmakov <>
Subject: Re: [PATCH 2/25] NTFS: Allow highmem kmalloc() in ntfs_malloc_nofs() and add _nofail() version.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/9/9/162

On Fri, 2005-09-09 at 15:53 +0100, Christoph Hellwig wrote:
> On Fri, Sep 09, 2005 at 07:51:23AM -0700, Roland Dreier wrote:
> >     Anton> fs/ntfs/malloc.h::ntfs_malloc_nofs() to do the kmalloc()
> >     Anton> based allocations with __GFP_HIGHMEM, analogous to how the
> >     Anton> vmalloc() based allocations are done.
> > 
> > Does it make sense to pass __GFP_HIGHMEM to kmalloc()?
> 
> Not at all (as you indicated below..)
> 
> > kmalloc() has
> > to return memory from lowmem, since it gives you an address from the
> > direct-mapped kernel area, so at best kmalloc() ignores this flag.
Correct, but it doesn't do any harm either AFAICS (it gets masked out by
kmalloc) and it makes the ntfs code simpler since I can then use the
same gfp_flags parameter both for the kmalloc and the vmalloc rather
than needing two different ones.
Best regards,
        Anton
-- 
Anton Altaparmakov <aia21 at cam.ac.uk> (replace at with @)
Unix Support, Computing Service, University of Cambridge, CB2 3QH, UK
Linux NTFS maintainer / IRC: #ntfs on irc.freenode.net
WWW: 
http://linux-ntfs.sf.net/
 & 
http://www-stu.christs.cam.ac.uk/~aia21/
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/