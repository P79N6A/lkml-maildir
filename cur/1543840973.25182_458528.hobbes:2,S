Date: Tue, 29 Aug 2006 06:53:49 +0000 (UTC)
From: Jon Escombe <>
Subject: Lenovo T60 - unable to resume from disk with CONFIG HIGHMEM64G
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/8/29/29

Using a Lenovo T60 laptop - suspend to disk has always failed for me on resume.
The resume image is read from disk, and then the laptop immediately reboots.
This behavior has been verified up to 2.6.18-rc4, and can be replicated with a
minimal init=/bin/bash boot. printk's scattered through the resume code are
getting into the "for (zone_pfn = 0; zone_pfn < zone->spanned_pages;
++zone_pfn)" loop in snapshot.c / copy_data_pages() before the reboot.
Through trial and error, I've found that this problem only occurs with
CONFIG_HIGHMEM64G (the default in a Fedora installation). On a couple of
occasions I've seen a hang or an oops instead of a reboot. Apologies for the
poor quality, but an image of the oops screen can be found at
http://www.dresco.co.uk/debug/resume_from_disk.jpg
Any pointers to progressing this further would be welcome...
Regards,
Jon.
(Please CC me on replies as I'm not currently subscribed to the list).
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/