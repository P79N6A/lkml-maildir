Date: Tue, 25 Jan 2005 17:12:12 +0300
From: Kirill Korotaev <>
Subject: Re: possible CPU bug and request for Intel contacts
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/1/25/124

Hello Rohit,
>>BTW, can you explain why making pages non-global is the cure? Is it
>> safe workaround for this bug?
> There is a boundary condition that can have non-global pages containing
> the CR3 load to also hit this issue on affected PIII.  Though for this
> to happen, mov to cr3 has to be the very last instruction on a page.
> And the page following that page (containing CR3 load) has to have
> different mapping between user and kernel spaces.
but in our case "mov %edx, %cr3" is not the last instruction on a page. 
It is in the middle of it.
Well, another remark is that after cr3 load there are only few 
instructions before the "call system_call_table(%edx)" which references 
the page with different user and kernel mappings.
also, this bug can be cured via inserting about 20 simple operations 
between cr3 load and call to the page with overlapping mappings.
I'm just trying to understand is it the bug referenced in E80 or not and 
is it safe to use non-global mappings as a cure.
Kirill
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/