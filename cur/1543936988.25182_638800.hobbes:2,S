Date: Tue, 15 Jan 2008 16:48:18 -0500
From: Dmitry Torokhov <>
Subject: Re: [PATCH] input: psmouse: fix potential input register race in psmouse_connect()
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/15/361

On Sat, Jan 12, 2008 at 03:13:45PM -0500, Andres Salomon wrote:
> 
> If we successfully call input_register_device() in
> psmouse_connect but sysfs_create_group() fails, we'll enter the error
> path without ever having called input_unregister_device() (potentially
> leaking memory, or creating a race condition if something else attempts
> to access the new input device).  This calls input_unregister_device
> from the error path, and sets input_dev to NULL so that we don't
> attempt to also call input_free_device on it.
> 
> Signed-off-by: Andres Salomon <dilinger@debian.org>
Applied, thank you Andres.
-- 
Dmitry