Date: Fri, 19 Sep 2003 13:44:19 -0700
From: Greg KH <>
Subject: Re: 2.4.22 USB problem (uhci)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/9/19/153

On Fri, Sep 19, 2003 at 01:29:55PM -0700, Jan Rychter wrote:
>  Greg> If you want to suspend using 2.4, unload the usb drivers
>  Greg> entirely.  That's the only safe way.
> 
> I wasn't talking about suspending, but about processor C-states. These
> are power states that the mobile processors enter dynamically, many
> times a second. In my case:
Ah, sorry.  I'm getting D and C states mixed up here.
> [10:52] tnuctip:/usr/src/linux#cat /proc/acpi/processor/CPU0/power 
> active state:            C3
> default state:           C1
> bus master activity:     00000000
> states:
>     C1:                  promotion[C2] demotion[--] latency[000] usage[00000520]
>     C2:                  promotion[C3] demotion[C1] latency[001] usage[00159073]
>    *C3:                  promotion[--] demotion[C2] latency[100] usage[02297764]
> [13:28] tnuctip:/usr/src/linux#
> 
> As you can see, C3 (lowest power) is being used a lot. This makes my
> laptop run cool. If I use usb-uhci, the processor is never able to go
> into C3 because of DMA activity. uhci is better, because it at least
> permits me to use C3 when there are no devices plugged in.
> 
> And going back to the uhci problem... ?
UHCI by design sucks massive PCI bandwidth.  There is logic in the uhci
drivers that try to help this out by reducing transactions when not much
is going on, but there's only so much we can do in software, sorry.  I'm
guessing that you aren't going to be able to change this.
Unless you go buy a ohci usb cardbus controller card :)
thanks,
greg k-h
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/