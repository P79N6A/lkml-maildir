Date: Mon, 8 Mar 2004 13:02:31 -0800
From: Andrew Morton <>
Subject: Re: objrmap-core-1 (rmap removal for file mappings to avoid 4:4 in <=16G machines)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/3/8/147

Andrea Arcangeli <andrea@suse.de> wrote:
>
> without this patch not even the 4:4 tlb overhead would allow intensive
> shm (shmfs+IPC) workloads to surivive on 32bit archs. Basically without
> this fix it's like 2.6 is running w/o pte-highmem.
yes.
> But the real reason of this work is for huge 64bit archs, so we speedup
> and avoid to waste tons of ram.
pte_chain space consumption is approximately equal to pagetable page space
consumption.  Sometimes a bit more, sometimes a lot less, approximately
equal.
So why do you say it saves "tons of ram"?
> on 32-ways the scalability is hurted
> very badly by rmap, so it has to be removed (Martin can provide the
> numbers I think).
I don't recall that the objrmap patches ever significantly affected CPU
utilisation.
I'm not saying that I'm averse to the patches, but I do suspect that this is
a case of large highmem boxes dragging the rest of the kernel along behind
them, and nothing else.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/