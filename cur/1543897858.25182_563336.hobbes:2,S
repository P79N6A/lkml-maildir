Date: Thu, 28 Jun 2007 21:49:42 +0530
From: "Satyam Sharma" <>
Subject: Re: [PATCH] RFC: have tcp_recvmsg() check kthread_should_stop() and treat it as if it were signalled
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/6/28/167

> On 6/28/07, Oleg Nesterov <oleg@tv-sign.ru> wrote:
> > [...]
> > Hmm... actually, such a change breaks the
> >
> >         while (signal_pending(current))
> >                 dequeue_signal_and_so_something();
> >
> > loop, see jffs2_garbage_collect_thread() for example.
BTW jffs2_garbage_collect_thread() is a horrible abomination :-)
Its use of SIGSTOP and SIGHUP is *totally* gratuitous & unwarranted.
It does use SIGKILL, but simply as a stop-notification from umount
of the corresponding jffs2 partition.
I think all the signal handling there can be removed; then it needs
to undergo conversion to kthread (it uses horrible locks and
completions to handle its exit) -- I'll put it in my endless
kernel-cleanups-todo-list ...
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/