Date: Thu, 14 Feb 2002 15:03:31 -0700
From: Val Henson <>
Subject: Re: smp_send_reschedule vs. smp_migrate_task
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/2/14/216

On Wed, Feb 13, 2002 at 06:37:14PM +1100, Paul Mackerras wrote:
> I am looking at the updates for PPC that are needed because of the
> changes to the scheduler in 2.5.x.  I need to implement
> smp_migrate_task(), but I do not have another IPI easily available;
> the Open PIC interrupt controller used in a lot of SMP PPC machines
> supports 4 IPIs in hardware and we are already using all of them.
I had only one IPI for the RPIC (an interrupt controller only used on
Synergy PPC boards) and I implemented a little message queue to
simulate all 4 IPI's.  The mailbox implementation suggested by James
Bottomley ended up having race conditions on our board.  It's probably
not the most elegant solution, but it works and required no change to
the PowerPC SMP code.  See my "Make Gemini boot" patch to linuxppc-dev
and take a look at the files rpic.c and rpic.h.
-VAL
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/