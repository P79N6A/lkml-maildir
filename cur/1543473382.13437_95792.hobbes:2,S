Date: Tue, 29 Dec 1998 11:50:18 -0500 (EST)
From: George <>
Subject: Re: 2.2.0-pre1 worse than 2.1.132
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1998/12/29/130

On Tue, 29 Dec 1998, MOLNAR Ingo wrote:
>On Tue, 29 Dec 1998, George wrote:
>
>> (gcc version egcs-2.91.60 19981201 (egcs-1.1.1 release)) #826 SMP Tue Dec 29 00:50:34 EST 1998
>                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
>
>(it should work with egcs, but i'd suggest you try 2.7.2.3 too. The fact
>that earlier kernels worked with your compiler means nothing, the SMP and
>scheduling changes in pre5-2.1.133 (and pre-2.2) introduced some quite
>optimized piece of APIC code)
>
>i'll double check those changes now.
Doing that now.
>> Intel Pentium with F0 0F bug - workaround enabled.
>> stuck on TLB IPI wait (CPU#0)
>> per-CPU timeslice cutoff: 3702.36 usecs.
>
>[what cachesize does /proc/cpuinfo report?]
Don't see cache, but here it is.
processor       : 0
vendor_id       : GenuineIntel
cpu family      : 5
model           : 4
model name      : Pentium MMX
stepping        : 3
cpu MHz         : 232.107862
fdiv_bug        : no
hlt_bug         : no
sep_bug         : no
f00f_bug        : yes
fpu             : yes
fpu_exception   : yes
cpuid level     : 1
wp              : yes
flags           : fpu vme de pse tsc msr mce cx8 apic mmx
bogomips        : 462.03
>> APIC delivery error (4).
>> CPU #1 not responding. Removing from cpu_present_map.
>> Error: only one processor found.
>
>hm, have you enabled 'CONFIG_M686' by any chance (thats the default too)? 
>With those changes it's not safe to run a CONFIG_M686 kernel on
>dual-Pentium boxes. (i'll post a patch today that makes this distinction
>more visible and harder to get wrong)
Nope, still 586:
# CONFIG_M386 is not set
# CONFIG_M486 is not set
CONFIG_M586=y
# CONFIG_M686 is not set
# CONFIG_MATH_EMULATION is not set
# CONFIG_MTRR is not set
CONFIG_SMP=y
Remember that I used 'noapic' in order to get it to boot.  Without 'noapic'
it would spontaneously reboot and never make it past:
hdc: IBM-DTTA-371010, ATA DISK drive
ide0 at 0x1f0-0x1f7,0x3f6 on irq 14
In fact, I only saw the ide0 one once out of three boots.  The other two
times the hdc was the last message.
-George
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/