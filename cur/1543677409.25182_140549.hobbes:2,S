Date: Sat, 14 Jun 2003 22:43:58 +0200
From: Vojtech Pavlik <>
Subject: [patch] input: Fix i8042 interrupts on I2000 ia64 machines  [9/13]
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/6/14/107

You can pull this changeset from:
	bk://kernel.bkbits.net/vojtech/input
===================================================================
ChangeSet@1.1215.104.26, 2003-06-09 14:54:00+02:00, peter@chubb.wattle.id.au
  input: The appended fix is needed on I2000 machines, to map the
  legacy ISA interrupt onto the actual interrupt provided.  Otherwise
  the mouse and keyboard won't work.  Patch against 2.5.70.
 i8042-io.h |   11 +++++++----
 1 files changed, 7 insertions(+), 4 deletions(-)
===================================================================
diff -Nru a/drivers/input/serio/i8042-io.h b/drivers/input/serio/i8042-io.h
--- a/drivers/input/serio/i8042-io.h	Sat Jun 14 22:23:45 2003
+++ b/drivers/input/serio/i8042-io.h	Sat Jun 14 22:23:45 2003
@@ -20,11 +20,14 @@
  */
 
 #ifdef __alpha__
-#define I8042_KBD_IRQ	1
-#define I8042_AUX_IRQ	(RTC_PORT(0) == 0x170 ? 9 : 12)	/* Jensen is special */
+# define I8042_KBD_IRQ	1
+# define I8042_AUX_IRQ	(RTC_PORT(0) == 0x170 ? 9 : 12)	/* Jensen is special */
+#elif defined(__ia64__)
+# define I8042_KBD_IRQ isa_irq_to_vector(1)
+# define I8042_AUX_IRQ isa_irq_to_vector(12)
 #else
-#define I8042_KBD_IRQ	1
-#define I8042_AUX_IRQ	12
+# define I8042_KBD_IRQ	1
+# define I8042_AUX_IRQ	12
 #endif
 
 /*
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/