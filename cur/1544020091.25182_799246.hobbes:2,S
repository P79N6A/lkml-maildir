Date: Fri, 30 Jan 2009 19:28:25 -0500 (EST)
From: Parag Warudkar <>
Subject: Re: 2.6.29-rc3: tg3 dead after resume
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2009/1/30/352

On Sat, 31 Jan 2009, Rafael J. Wysocki wrote:
> >  00:1c.0 PCI bridge: Intel Corporation 631xESB/632xESB/3100 Chipset PCI Express Root Port 1 (rev 09)
> > -	Control: I/O+ Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR+ FastB2B- DisINTx+
> > +	Control: I/O- Mem- BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR+ FastB2B- DisINTx+
> >  	Status: Cap+ 66MHz- UDF- FastB2B- ParErr- DEVSEL=fast >TAbort- <TAbort- <MAbort- >SERR- <PERR- INTx-
> >  	Latency: 0, Cache Line Size: 64 bytes
> >  	Bus: primary=00, secondary=0e, subordinate=0e, sec-latency=0
> 
> and the PCIe port driver may be at fault.
> 
> Can you try to remove the pci_save_state(dev) from pcie_port_suspend_late()
> and see if that helps?
> 
I assume you meant pcie_portdrv_suspend_late in 
drivers/pci/pcie/portdrv_pci.c - that one did not go well.
With that change machine refuses to suspend (comes back after attempting) 
and my keyboard goes dead.
Parag