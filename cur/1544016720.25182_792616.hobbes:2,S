Date: Thu, 15 Jan 2009 12:40:07 +0000
From: Mark Brown <>
Subject: Re: [patch 2.6.29-rc] regulator: add get_status()
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2009/1/15/227

")
Fcc: +sent-mail
On Wed, Jan 14, 2009 at 11:03:17PM -0800, David Brownell wrote:
>  * Define a new regulator driver get_status() method, which is the
>    first method reporting regulator outputs instead of inputs.
>    It can report on/off and error status; or instead of simply
>    "on", report the actual operating mode.
> For the moment, this is a sysfs-only interface, not accessible to 
> regulator clients.  Such clients can use the current notification
> interfaces to detect errors, if the regulator reports them.
It's useful for bootstrapping purposes - the notifiers will only report
changes.  Not that this is something that should happen on a regular
basis so I'd be surprised if there were much demand.
> Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
Acked-by: Mark Brown <broonie@opensource.wolfsonmicro.com>
but...
> +enum regulator_status {
> +	REGULATOR_STATUS_OFF,
> +	REGULATOR_STATUS_ON,
> +	REGULATOR_STATUS_ERROR,
> +	/* fast/normal/idle/standby are flavors of "on" */
> +	REGULATOR_STATUS_FAST,
> +	REGULATOR_STATUS_NORMAL,
> +	REGULATOR_STATUS_IDLE,
> +	REGULATOR_STATUS_STANDBY,
> +};
> +
> +	/* report regulator status ... most other accessors report
> +	 * control inputs, this reports results of combining inputs
> +	 * from Linux (and other sources) with the actual load.
> +	 */
> +	int (*get_status)(struct regulator_dev *);
> +
...this needs kerneldoc adding.