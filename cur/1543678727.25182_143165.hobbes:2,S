Date: Wed, 25 Jun 2003 16:11:13 +0530
From: "Vamsi Krishna S ." <>
Subject: Re: [patch] kprobes for 2.5.73 with single-stepping out-of-line
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/6/25/38

On Tue, Jun 24, 2003 at 06:01:09PM +0200, Andi Kleen wrote:
> "Vamsi Krishna S ." <vamsi@in.ibm.com> writes:
> 
> 
> > +static struct kprobe *current_kprobe;
> 
> This global variable is quite unclean. It looks like it is for passing
> function arguments around. Why is it needed? 
> 
This is used for keeping track of the probe that is currently being
handled. This information is needed to be kept across a 
trap 3 - singlestep - trap 1. So, we set store the current probe in
this variable while handling trap 3, for use while handling the
subsequent trap 1.
> > +#define KPROBE_HASH_BITS 6
> > +#define KPROBE_TABLE_SIZE (1 << KPROBE_HASH_BITS)
> > +
> > +static struct list_head kprobe_table[KPROBE_TABLE_SIZE];
> 
> Use hlists?
> 
Yes, that will save some space in this hash table.. will convert to
hlists and repost.
> 
> -Andi
Thanks,
Vamsi.
-- 
Vamsi Krishna S.
IBM Software Lab, Bangalore.
Ph: +91 80 5044959
Internet: vamsi@in.ibm.com
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/