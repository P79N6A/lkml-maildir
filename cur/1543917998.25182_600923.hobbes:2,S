Date: Mon, 01 Oct 2007 18:37:44 -0400
From: Jeff Garzik <>
Subject: Re: [regression] 2.6.23 sata_mv EH updates broke my 7042 controller
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/10/1/345

Olof Johansson wrote:
> Hi,
> 
> I just pulled out my Marvell 7042 SATA controller here to give it a spin
> and noticed that it no longer worked (i.e. init segvs when loading from
> it), etc. 2.6.22 is fine.
> 
> Bisecting (just the file drivers/ata/sata_mv.c) resulted in
> bdd4dddee325a7dce3e84cf48201a06aa8508aa4 popping out as the culprit
> (file version 4537deb5e90b717a725b3d74b58b4bb1d28443d0 is fine).
> 
> Just for sanity checking: Has anyone else used 7042/6042 with the current
> mainline driver?
The update was tested extensively on 6042.  I have a 7042, but haven't 
found a compatible PCI slot here.
> Hardware config in my case:
> Highpoint 2310 controller
> PPC (big endian)
> WD Raptor disk
> 
> Works fine with the other controller I've been using (SIL24), and works
> fine if I revert the driver.
> 
> It also works fine if I disable the IOMMU. This would point towards
> either a stale dma mapping, or a missing setup of one.
> 
> Not being much at home in the SATA drivers I could keep digging but I
> figured I'd bring it up first in case it rings a bell for someone.
The IOMMU data point is certainly interesting.  Nothing jumps out on a 
re-review of the patch, so keep digging and let us know ;-)
	Jeff
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/