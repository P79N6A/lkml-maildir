Date: Mon, 18 Feb 2008 05:30:52 -0700
From: Matthew Wilcox <>
Subject: Re: [PATCH 4/5] signal(ia64): add a signal stack overflow check
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/2/18/182

On Mon, Feb 18, 2008 at 06:26:23PM +0800, Shi Weihua wrote:
> +			if (!rbs_on_sig_stack(scr->pt.ar_bspstore))
> +				new_rbs = (current->sas_ss_sp +
> +					  sizeof(long) - 1) & ~(sizeof(long) - 1);
I know you're only moving this code, but how about fixing it to use
ALIGN at the same time?
+			if (!rbs_on_sig_stack(scr->pt.ar_bspstore))
+				new_rbs = ALIGN(current->sas_ss_sp,
+						sizeof(long));
-- 
Intel are signing my paycheques ... these opinions are still mine
"Bill, look, we understand that you're interested in selling us this
operating system, but compare it to ours.  We can't possibly take such
a retrograde step."