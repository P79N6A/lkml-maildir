Date: Wed, 7 May 2003 09:55:17 -0700
From: Amol P Dharmadhikari <>
Subject: Re: Write file in EXT2
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/5/7/207

Hello,
> Hi,
> 
> Thanks for the details.
> 
> I wish to know which application access which file, when.. etc etc. I would like to create a log of that. I am unable to write this log to the file from within the kernel. I would not like to go to the user level programs. I am doing this from within the kernel, as I would like to know exactly when things are being done.
As Richard said in reply to your earlier email, when you are doing file
I/O, you need to store the file descriptor of the open file in some
process's fd table. If you "simply open" a file in the kernel, it is
meaningless. The kernel just executes on behalf of the currently running
process and does not have an execution context itself.
So the idea is to create a kernel thread, and open the log file in its
context. Also, you want to be sure that the filesystem on which the file
you are accessing is mounted when you call the sys_open function. Else
the first write to it might cause a panic. 
-- 
Amol P Dharmadhikari <apdharmadhikari@usfca.edu>
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/