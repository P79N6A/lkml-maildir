Date: Mon, 02 Apr 2007 00:31:12 -0400
From: Dave Dillow <>
Subject: Re: plain 2.6.21-rc5 (1) vs amanda (0)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/4/2/8

On Mon, 2007-04-02 at 00:20 -0400, Gene Heskett wrote:
> >From another email I sent Dave an hour or so ago:
> 
> For a good kernel, 2.6.20.3-rdsl-0.31:
> [root@coyote bad-kernel]# cd /usr/music
> [root@coyote music]# stat .
>   File: `.'
>   Size: 4096            Blocks: 16         IO Block: 4096   directory
> Device: fd00h/64768d    Inode: 10354963    Links: 39
> Access: (0755/drwxr-xr-x)  Uid: (    0/    root)   Gid: (    0/    root)
> Access: 2007-04-01 21:07:14.000000000 -0400
> Modify: 2006-11-12 06:41:00.000000000 -0500
> Change: 2007-01-19 13:15:22.000000000 -0500
> [root@coyote music]#                                                               
> 
> Now rebooted to 2.6.21-rc5:
> [root@coyote ~]# cd /usr/music
> [root@coyote music]# stat .
>   File: `.'
>   Size: 4096            Blocks: 16         IO Block: 4096   directory
> Device: ee00h/60928d    Inode: 10354963    Links: 39
> Access: (0755/drwxr-xr-x)  Uid: (    0/    root)   Gid: (    0/    root)
> Access: 2007-04-01 21:07:14.000000000 -0400
> Modify: 2006-11-12 06:41:00.000000000 -0500
> Change: 2007-01-19 13:15:22.000000000 -0500
> 
> What is this difference in the Device: line supposed to mean?
> 
> And are we 'getting warmer' here?
For those playing along at home, I believe the issue is that GNU tar
sees a different device number for the directories than what is listed
in the listed-incremental snapshot file, and thinks all of the
directories are new. I've asked Gene to make a few back-to-back runs of
the tar command under the same kernel to see if the subsequent runs
figure out that there's nothing to do, as expected.
Then it is a matter of figuring out why the device number changed -- I'm
thinking it is device-mapper, but will look closer tomorrow.
Dave
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/