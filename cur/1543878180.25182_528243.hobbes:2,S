Date: Sat, 07 Apr 2007 00:44:20 +0200
From: Soeren Sonnenburg <>
Subject: Re: Linux 2.6.21-rc6 - regressions update
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/4/6/263

On Thu, 2007-04-05 at 19:50 -0700, Linus Torvalds wrote:
> Ok,
>  I don't think there really is anything very interesting here, but we're 
> hopefully whittling down the list of regressions, and fixing various 
> random other small issues while at it.
> 
> Some smallish MIPS updates, networking (and network driver) fixes, removal 
> of a long obsolete framebuffer driver, etc etc. The shortlog really tells 
> the story.
> 
> We should be getting close to a 2.6.21 release, so please update any 
> regression reports you've done,
regression update for 21-rc6:
1) all s2ram and NO_HZ related things seem to be resolved on my macbook
pro, also 
CONFIG_HPET_TIMER=y
CONFIG_HPET_EMULATE_RTC=y
don't break resume anymore.
2) However I am still having problems with
+CONFIG_HIGH_RES_TIMERS=y
+CONFIG_HPET=y
+CONFIG_HPET_MMAP=y
although the machine resumes, I've managed to get the attached oops.
3) Subject    : SATA breakage on resume
References : 
http://lkml.org/lkml/2007/3/7/233
Submitter  : Thomas Gleixner <tglx@linutronix.de>
             Soeren Sonnenburg <kernel@nn7.de>
Status     : unknown
I am still seeing these messages after a suspend/resume cycle (though
all devices work even after multiple suspend/resume cycles)
ATA: abnormal status 0x80 on port 0x000140df
ata3.01: revalidation failed (errno=-2)
ata3: failed to recover some devices, retrying in 5 secs
ata1.00: configured for UDMA/33
ATA: abnormal status 0x7F on port 0x000140df
ATA: abnormal status 0x7F on port 0x000140df
ata3.01: configured for UDMA/133
So that's been a big step forward...
Soeren
-- 
For the one fact about the future of which we can be certain is that it
will be utterly fantastic. -- Arthur C. Clarke, 1962
CPU1 is down
Intel machine check architecture supported.
Intel machine check reporting enabled on CPU#0.
Back to C!
irq 9: nobody cared (try booting with the "irqpoll" option)
 [<c0154444>] __report_bad_irq+0x24/0x90
 [<c01546df>] note_interrupt+0x22f/0x260
 [<c026952d>] acpi_irq+0xb/0x14
 [<c0153905>] handle_IRQ_event+0x25/0x60
 [<c0155300>] handle_level_irq+0xe0/0x110
 [<c0106e8b>] do_IRQ+0x3b/0x80
 [<c0119637>] smp_apic_timer_interrupt+0x57/0x90
 [<c0104c73>] common_interrupt+0x23/0x28
 [<c01400d8>] __kfifo_put+0x78/0x90
 [<c0130d6d>] __do_softirq+0x6d/0xf0
 [<c0130e27>] do_softirq+0x37/0x40
 [<c013108a>] irq_exit+0x7a/0x90
 [<c0119637>] smp_apic_timer_interrupt+0x57/0x90
 [<c0142d30>] retrigger_next_event+0x0/0xb0
 [<c0104d30>] apic_timer_interrupt+0x28/0x30
 [<c0142d30>] retrigger_next_event+0x0/0xb0
 [<c0140068>] __kfifo_put+0x8/0x90
 [<c0130fe5>] on_each_cpu+0x35/0x60
 [<c0143538>] clock_was_set+0x18/0x20
 [<c0135cdc>] timekeeping_resume+0x7c/0xa0
 [<c02aabe1>] __sysdev_resume+0x11/0x80
 [<c02ab0c7>] sysdev_resume+0x47/0x80
 [<c02b0b05>] device_power_up+0x5/0x10
 [<c014f136>] suspend_enter+0x56/0x60
 [<c014f25a>] enter_state+0x11a/0x1c0
 [<c014f3bd>] state_store+0xbd/0xd0
 [<c014f300>] state_store+0x0/0xd0
 [<c01b52c9>] subsys_attr_store+0x29/0x40
 [<c01b5432>] sysfs_write_file+0xb2/0x110
 [<c0175a66>] vfs_write+0xa6/0x140
 [<c01b5380>] sysfs_write_file+0x0/0x110
 [<c0176131>] sys_write+0x41/0x70
 [<c0104262>] sysenter_past_esp+0x5f/0x85
 =======================
handlers:
[<c0269522>] (acpi_irq+0x0/0x14)
Disabling IRQ #9
Enabling non-boot CPUs ...
SMP alternatives: switching to SMP code