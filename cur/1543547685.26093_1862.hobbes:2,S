Date: Tue, 05 Sep 2000 05:41:35 -0600
From: "Jeff V. Merkey" <>
Subject: Re: zero-copy TCP
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/9/5/39

Ingo Molnar wrote:
> 
> On Tue, 5 Sep 2000, Jeff V. Merkey wrote:
> 
> > The origin of this comment was related to a comparison of the
> > MSM/TSM/CSM layer in NetWare and Linux. I've already said that Alan's
> > code handles fast paths well and from what I've seen is comparable to
> > NetWare. [...]
> 
> can we thus take this as a retraction of your below quoted three
> derogatory comments?
> 
> " The entire Linux Network subsystem needs an overhaul. "
To support the performance metrics of NetWare, there are some changes I
will make that will allow Alan's code to beat Native NetWare.  One is
allowing pre-scan protocol stacks to exist.  Another is a WTD
optimization to allow Alan's code to tag pages in the page cache and
post them with a preemptive IO WTD.  Another is moving ALL of the
routing code into the kernel space.  Another is consolidation of bottom
ad top halves to allow a single interrupt thread to run all the way into
the router and out without the need to schedule.  Another is moving the
NCP server into the kernel.   Another is enabling "gang" tagging and
release of a singe cache page by hundereds or thousands of users at one
tme for incoming reads.   The list is very long.  
> 
> " In networking, the enemy is LATENCY for fast performance.  That's why
>   NetWare can handle 5000 users and Linux barfs on 100 in similiar tests.
>   Copying increases latency, and the long code paths in the Linux Network
>   layer. "
> 
> " Alan, Please.  I'm in your code and there are copies all over the
>   place.  I agree you have a "fast path" for most stuff, but there's all
>   kinds of handles lookups, linear list searching like
> 
>   while (x)
>   {
>     x = x->next
>   }
> 
>   all over the place that increases latency. "
> 
>         Ingo
I already said this code is more than suitable, and better yet, it's
something folks are familiar with in Linux.  Alan and I went over some
of this off line.  Sorry you missed it.
Jeff
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/