Date: Sat, 31 Mar 2007 10:02:07 -0700
From: Greg KH <>
Subject: Re: submitting kernel janitorials
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/3/31/118

On Sat, Mar 31, 2007 at 09:52:30PM +0800, Cong WANG wrote:
> 2007/3/31, Pedram M <pmessri@gmail.com>:
> >Ok thanks,
> >
> >I've sent one already, could you please double check:
> >
> >@@ -4590,7 +4590,7 @@
> >        printk("stli_findpcibrds()\n");
> > #endif
> >
> >-       while ((dev = pci_find_device(PCI_VENDOR_ID_STALLION,
> >+       while ((dev = pci_get_device(PCI_VENDOR_ID_STALLION,
> >            PCI_DEVICE_ID_ECRA, dev))) {
> >                if ((rc = stli_initpcibrd(BRD_ECPPCI, dev)))
> >                        return(rc);
> >
> >
> >That as an example for file:
> >
> >drivers/char/istallion.c
> >
> >
> >Thanks,
> >Pedram
> 
> Why did you delete the list? Please don't do that.
> 
> In fact, I am a newbie too. I know pci_find* functions are deprecated
> and gcc will warn that. And I think we should replace them. You can
> try to make patches for them and submit them to  Greg. (Greg, is that
> OK?)
You can cc: me, so I will review them, but the patch needs to go through
the specific driver maintainer.
And PLEASE NOTE, this kind of conversion is not a simple
search-and-replace type task, you need to be aware of the device
reference count issues with the pci_get_device() call.  Please read the
documentation for the function for details.
thanks,
greg k-h
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/