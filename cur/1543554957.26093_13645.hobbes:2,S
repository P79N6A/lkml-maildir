Date: Fri, 17 Nov 2000 16:18:33 +0100
From: Andrea Arcangeli <>
Subject: Re: Error in x86 CPU capabilities starting with test5/6
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/11/17/177

On Fri, Nov 17, 2000 at 01:51:11PM +0100, Christoph Rohland wrote:
> gettimeofday is _way_ to slow for a lot of every day uses. So
> applications will use rdtsc until we have some really fast
> (non-syscall) way to have high resolution time diffs.
During the x86-64 design I made sure that in x86-64 glibc will only know about
vgettimeofday (vsyscall).
If the machine is Asymetric MP with CPU running at different frequency (so that
you need to know on which CPU you're running on to use rdtsc) the kernel will
setup the vsyscall trampoline to fallback in the real slow syscall (but all SMP
and UP machines will not need to enter/exit kernel this way and the vsyscall
will be completly lock less... for obvious reasons :).
So as worse you'll have to wait x86-64 to get that lightweight vgettimeofday.
Andrea
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/