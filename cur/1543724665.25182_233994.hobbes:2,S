Date: Tue, 13 Jul 2004 12:16:22 +0800
From: Michael Clark <>
Subject: Re: How to find out which pages were copied-on-write?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/7/13/5

On 07/13/04 01:21, Lutz Vieweg wrote:
> Michael Clark wrote:
> 
>> HPAs library LPSM sounds like what you're looking for.
>>
>> 
http://freshmeat.net/projects/lpsm/
>>
>> Or you can do what you want the hard way using mprotect and a SEGV 
>> handler.
> 
> 
> Certainly a valid idea to consider - doing all those things in 
> userspace... so
> thanks for the hint!
> 
> But wouldn't that introduce a significant overhead and undermine all of the
> nice advantages the kernel might have in scheduling I/O operations?
Not really. Plain read/write IO is generally faster than mmap IO anyway.
You don't use mmap for speed but rather for convenience.
> However, I shall really consider and profile the mprotect/sighandler 
> approach...
> 
> Regards,
> 
> Lutz Vieweg
> 
> PS: I'm using my own allocator already, so using the C-library 
> implementation
>     wouldn't gain me much...
This wasn't why I suggested it. It's has the commit semantics
on memory mapped files that you were asking about (the allocator
is optional I believe).
~mc
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/