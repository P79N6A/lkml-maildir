Date: Sun, 16 May 1999 20:22:18 +1000
From: Richard Gooch <>
Subject: Re: Can't get MTRR to work with AMD K6-2
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/5/16/130

A. Leidenfrost writes:
> I have anMy system has an AMD K6-2 and is running kernel 2.2.9 with our without
> the latest mtrr patch.
> 
> There is an mtrr entry in /proc and the mtrr flag in /proc/cpuinfo is set:
[...]
> However, the command 'cat /proc/mtrr' produces no output. Also the command
> 'echo "base=0xf8000000 size=0x400000 type=write-combining" >! /proc/mtrr'
> has no effect.
Sigh. I guess you're using bash? I've lots of these queries lately.
Below is a patch which should clarify things.
Linus: could you apply this to 2.2.9 and 2.3.2 please?
Moral: know your shell.
				Regards,
					Richard....
--- linux-old/Documentation/mtrr.txt	Tue May 11 03:32:45 1999
+++ linux/Documentation/mtrr.txt	Sun May 16 20:09:39 1999
@@ -1,5 +1,5 @@
 MTRR (Memory Type Range Register) control
-2 May 1998
+16 May 1999
 Richard Gooch
 <rgooch@atnf.csiro.au>
 
@@ -31,8 +31,10 @@
 reg00: base=0x00000000 (   0MB), size= 128MB: write-back, count=1
 reg01: base=0x08000000 ( 128MB), size=  64MB: write-back, count=1
 ===============================================================================
-Creating MTRRs from the shell:
+Creating MTRRs from the C-shell:
 # echo "base=0xf8000000 size=0x400000 type=write-combining" >! /proc/mtrr
+or if you use bash:
+# echo "base=0xf8000000 size=0x400000 type=write-combining" >| /proc/mtrr
 
 And the result thereof:
 % cat /proc/mtrr
@@ -79,8 +81,10 @@
 NOTE: You can only create type=uncachable region, if the first
 region that you created is type=write-combining.
 ===============================================================================
-Removing MTRRs from the shell:
+Removing MTRRs from the C-shell:
 % echo "disable=2" >! /proc/mtrr
+or using bash:
+% echo "disable=2" >| /proc/mtrr
 ===============================================================================
 Reading MTRRs from a C programme using ioctl()'s:
 
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/