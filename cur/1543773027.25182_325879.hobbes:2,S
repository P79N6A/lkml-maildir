Date: Wed, 15 Jun 2005 20:07:15 -0400
From: Jeff Moyer <>
Subject: Re: [PATCH] autofs4 - post expire race fix
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/6/15/237

==> Regarding [PATCH] autofs4 - post expire race fix; raven@themaw.net adds:
raven> At the tail end of an expire it's possible for a process to enter
raven> autofs4_wait, with a waitq type of NFY_NONE but find that the expire
raven> is finished. In this cause autofs4_wait will try to create a new
raven> wait but not notify the daemon leading to a hang. As the wait type
raven> is meant to delay mount requests from revalidate or lookup during an
raven> expire and the expire is done all we need to do is check if the
raven> dentry is a mountpoint. If it's not then we're done.
FWIW, this looks good to me.  (sorry for the late reply)
Thanks,
Jeff
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/