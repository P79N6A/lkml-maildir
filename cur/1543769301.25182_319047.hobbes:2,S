Date: Tue, 17 May 2005 23:53:41 -0500 (CDT)
From: Kumar Gala <>
Subject: [PATCH] ppc32: Fix platform device initialization of 8250 serial ports
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/5/18/14

Andrew,
(This fixes a bug and should go into 2.6.12 if possible.)
Initialization of 8250 serial ports that are platform devices require that
at empty entry exists in the array of plat_serial8250_port.  With out an
empty entry we can get some pretty random behavior.
Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
---
commit 775d12402657efa10a3c76da6c764237afeca462
tree ab87cb0c7a06314683657598ac6f011a7cc38884
parent 995cccaa4c17395172a88369a7eda90ab98f9971
author Kumar K. Gala <kumar.gala@freescale.com> Tue, 17 May 2005 23:51:13 -0500
committer Kumar K. Gala <kumar.gala@freescale.com> Tue, 17 May 2005 23:51:13 -0500
 ppc/syslib/mpc83xx_devices.c |    1 +
 ppc/syslib/mpc85xx_devices.c |    1 +
 2 files changed, 2 insertions(+)
Index: arch/ppc/syslib/mpc83xx_devices.c
===================================================================
--- afaee9b3b47f4d48902232740857f7b7d66e356f/arch/ppc/syslib/mpc83xx_devices.c  (mode:100644)
+++ ab87cb0c7a06314683657598ac6f011a7cc38884/arch/ppc/syslib/mpc83xx_devices.c  (mode:100644)
@@ -61,6 +61,7 @@
 		.iotype		= UPIO_MEM,
 		.flags		= UPF_BOOT_AUTOCONF | UPF_SKIP_TEST,
 	},
+	{ },
 };
 
 struct platform_device ppc_sys_platform_devices[] = {
Index: arch/ppc/syslib/mpc85xx_devices.c
===================================================================
--- afaee9b3b47f4d48902232740857f7b7d66e356f/arch/ppc/syslib/mpc85xx_devices.c  (mode:100644)
+++ ab87cb0c7a06314683657598ac6f011a7cc38884/arch/ppc/syslib/mpc85xx_devices.c  (mode:100644)
@@ -61,6 +61,7 @@
 		.iotype		= UPIO_MEM,
 		.flags		= UPF_BOOT_AUTOCONF | UPF_SKIP_TEST | UPF_SHARE_IRQ,
 	},
+	{ },
 };
 
 struct platform_device ppc_sys_platform_devices[] = {
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/