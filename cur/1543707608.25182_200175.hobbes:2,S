Date: Thu, 19 Feb 2004 16:27:39 -0300 (BRT)
From: Frédéric L. W. Meunier <>
Subject: Re: IO-APIC works on Windows and FreeBSD but not Linux ?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/2/19/202

I wrote on 2004-01-24 0:57:44:
> I never got IO-APIC to work with my ECS K7VTA3 5.0 (KT333) on
> Linux 2.4 and 2.6. The first problem was at boot time with my
> network. It wouldn't give an IRQ or something to the lan, be
> it the onboard Realtek or a 3Com 3C905CX-TXNM.
Just tested with 2.6.3, and it still happens.
> ACPI with or without it was even worse, but I never needed
> it.
Everything seems to work fine with it now.
> It worked fine on Windows XP Professional SP1. Some days ago
> I installed FreeBSD 5.2 and now noticed it gave me IRQ18 for
> the onboard lan, IRQ22 for the onboard sound, and so on, and
> there's the following in /var/log/messages:
> Jan 23 15:27:07 pervalidus kernel: ioapic0: Assuming intbase
> of 0
> Jan 23 15:27:07 pervalidus kernel: ioapic0 <Version 0.3> irqs
> 0-23 on motherboard
> I'm just surprised IO-APIC works with it but not Linux.
Still surprised, because on it everything works if I use
IO-APIC with or without ACPI.
Here are the differences in /proc/pci (- is ACPI with IO-APIC,
+ IO-APIC):
       I/O at 0xb800 [0xb81f].
   Bus  0, device  16, function  3:
     USB Controller: VIA Technologies, Inc. USB 2.0 (rev 130).
-      IRQ 21.
+      IRQ 19.
       Master Capable.  Latency=32.
       Non-prefetchable 32 bit memory at 0xdd035000 [0xdd0350ff].
   Bus  0, device  17, function  0:
     ISA bridge: VIA Technologies, Inc. VT8235 ISA Bridge (rev 0).
   Bus  0, device  17, function  1:
     IDE interface: VIA Technologies, Inc. VT82C586A/B/VT82C686/A/B/VT8233/A/C/VT8235 PIPC Bus Master IDE (rev 6).
-      IRQ 20.
+      IRQ 27.
       Master Capable.  Latency=32.
       I/O at 0xbc00 [0xbc0f].
   Bus  0, device  17, function  5:
And /proc/interrupts:
-  9:          0   IO-APIC-level  acpi
- 14:       1138    IO-APIC-edge  ide0
+ 14:        777    IO-APIC-edge  ide0
- 18:         24   IO-APIC-level  eth0
- 21:        290   IO-APIC-level  ehci_hcd, uhci_hcd, uhci_hcd, uhci_hcd
+ 21:         99   IO-APIC-level  uhci_hcd, uhci_hcd, uhci_hcd
> I reported it months ago -
> 
http://www.uwsg.iu.edu/hypermail/linux/kernel/0306.2/1646.html
> BTW, the freezes I mentioned are gone. The motherboard may be
> a bit buggy, as they appear if I disable the onboard RAID,
> but...
-- 
http://www.pervalidus.net/contact.html
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/