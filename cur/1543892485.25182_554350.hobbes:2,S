Date: Thu, 7 Jun 2007 23:05:05 +1000
From: David Chinner <>
Subject: Re: XFS internal error xfs_da_do_buf(2) at line 2087 of file fs/xfs/xfs_da_btree.c.  Caller 0xc01b00bd
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/6/7/153

On Thu, Jun 07, 2007 at 09:44:51AM +0200, Marco Berizzi wrote:
> Hi David.
> Three months ago I wrote the message below.
> I had built various 2.6.20.x and 2.6.21.x
> vanilla kernel with all the debug options
> enabled and linux had never crashed.
> On june 4, I have builded linux 2.6.21.3 without
> any debugging options and after 2 days linux
> has starting print these errors:
> 
> Jun  6 09:47:09 Pleiadi kernel:  =======================
> Jun  6 09:47:09 Pleiadi kernel: 0x0: 28 f1 45 d4 22 53 35 11 09 80 37 5a
> 47 8a 22 ee
> Jun  6 09:47:09 Pleiadi kernel: Filesystem "sda8": XFS internal error
> xfs_da_do_buf(2) at line 2086 of file fs/xfs/xfs_da_btree.c.  Caller
> 0xc01b2301
> Jun  6 09:47:09 Pleiadi kernel:  [<c01b21f7>] xfs_da_do_buf+0x70c/0x7b1
> Jun  6 09:47:09 Pleiadi kernel:  [<c01b2301>] xfs_da_read_buf+0x30/0x35
> Jun  6 09:47:09 Pleiadi kernel:  [<c01b2301>] xfs_da_read_buf+0x30/0x35
These above stack trace is the sign of a corrupted directory.
Chopping out the rest of the top posting (please don't do that)
we get down to 3 months ago:
> > On Mon, Mar 19, 2007 at 11:32:27AM +0100, Marco Berizzi wrote:
> > > Marco Berizzi wrote:
> > > Here is the relevant results:
> > >
> > > Phase 2 - found root inode chunk
> > > Phase 3 - ...
> > >             agno = 0
> > >             ...
> > >             agno = 12
> > > LEAFN node level is 1 inode 1610612918 bno = 8388608
> >
> > Hmmm - single bit error in the bno - that reminds of this:
> >
> > 
http://oss.sgi.com/projects/xfs/faq.html#dir2
> >
> > So I'd definitely make sure that is repaired....
Where we saw signs of on disk directory corruption. Have you run
xfs_repair successfully on the filesystem since you reported
this?
If you did clean up the error, does xfs_repair report the same sort
of error again?
Have you run a 2.6.16-rcX or 2.6.17.[0-6] kernel since you last
reported this problem?
Cheers,
Dave.
-- 
Dave Chinner
Principal Engineer
SGI Australian Software Group
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/