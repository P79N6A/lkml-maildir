Date: Tue, 5 Apr 2005 22:41:07 +0200
From: Pavel Machek <>
Subject: Re: It's getting worse: 2.6.12-rc2-mm1 and suspend2ram
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/4/5/320

Hi!
> Dear Andrew, dear Pavel, dear developers!
> 
> WIth 2.6.12-rc2-mm1 I cannot resume, and the laptop not even freezes, it
> immediately goes into reboot when resuming (suspend did work, well it
> looks like).
> 
> I booted into single user mode, stopped all programs (I could), unloaded
> all modules (I could), and then suspended, with the same result. In this
> single user mode my lsmod looked like this:
> 
> Module                  Size  Used by
> yenta_socket           18952  1 
> rsrc_nonstatic         11264  1 yenta_socket
> pcmcia_core            34704  2 yenta_socket,rsrc_nonstatic
> intel_agp              18844  1 
> agpgart                28488  1 intel_agp
> 
> and my ps -ax:
>   PID TTY      STAT   TIME COMMAND
>     1 ?        S      0:00 init [S]          
>     2 ?        SN     0:00 [ksoftirqd/0]
>     3 ?        S      0:00 [watchdog/0]
>     4 ?        S<     0:00 [events/0]
>     5 ?        S<     0:00 [khelper]
>     6 ?        S<     0:00 [kthread]
>     8 ?        S<     0:00 [kacpid]
>    98 ?        S<     0:00 [kblockd/0]
>   153 ?        S      0:00 [pdflush]
>   154 ?        S      0:00 [pdflush]
>   156 ?        S<     0:00 [aio/0]
>   155 ?        S      0:00 [kswapd0]
>   231 ?        S      0:00 [kseriod]
>   301 ?        S      0:00 [kjournald]
>   379 ?        S<s    0:00 udevd
>  2623 ?        S      0:00 [pccardd]
>  2634 ?        S      0:00 [pccardd]
>  3511 tty1     Ss     0:00 init [S]          
>  3516 tty1     S      0:00 bash
>  4417 tty1     R+     0:00 ps ax
> 
> It is interesting that I cannot unload the agp stuff, although to my
> eyes there is nothing which really is using the agp stuff (or is it
> udevd?). For the yenta/pcmcia I couldn't stop pccardd.
> 
> I though about trying to weed out my config, but I don't know where to
> start. I attach my config file, please comment on what I should leave
> out of the kernel for further testing.
I do not know why you can't unload them, but what about simply not
loading them at all? :-).
Or just rm -f them, it is hard to load module that is not there
;^))). Or init=/bin/bash....
								Pavel
-- 
People were complaining that M$ turns users into beta-testers...
...jr ghea gurz vagb qrirybcref, naq gurl frrz gb yvxr vg gung jnl!
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/