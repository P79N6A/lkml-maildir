Date: Wed, 4 Jul 2001 13:36:34 +0100
From: Tim Waugh <>
Subject: Re: parport_pc tries to load parport_serial automatically
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/7/4/47

On Wed, Jun 27, 2001 at 07:32:42AM -0300, Marcelo Tosatti wrote:
> Could you remove the request_module() from parport_pc ? 
Yes.
Here is a patch against 2.4.5-ac24.
Tim.
*/
2001-07-04  Tim Waugh  <twaugh@redhat.com>
	* drivers/parport/parport_pc.c: Don't load parport_serial.
	* drivers/parport/ChangeLog: Updated.
--- linux/drivers/parport/parport_pc.c.orig	Wed Jul  4 13:30:01 2001
+++ linux/drivers/parport/parport_pc.c	Wed Jul  4 13:30:26 2001
@@ -2931,11 +2931,6 @@
 	if (ret && registered_parport)
 		pci_unregister_driver (&parport_pc_pci_driver);
 
-#ifdef CONFIG_PARPORT_SERIAL_MODULE
-	if (!ret)
-		request_module ("parport_serial");
-#endif
-
 	return ret;
 }
 
--- linux/drivers/parport/ChangeLog.orig	Wed Jul  4 13:30:32 2001
+++ linux/drivers/parport/ChangeLog	Wed Jul  4 13:32:01 2001
@@ -0,0 +1,6 @@
+2001-07-04  Tim Waugh  <twaugh@redhat.com>
+
+	* parport_pc.c (init_module): Don't try to load parport_serial.
+	This means that the user needs to load it (or a hardware detection
+	program on their behalf) if necessary.
+
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/