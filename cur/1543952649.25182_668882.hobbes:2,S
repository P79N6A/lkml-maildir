Date: Wed, 19 Mar 2008 14:26:06 -0300
From: Glauber de Oliveira Costa <>
Subject: [PATCH 71/79] [PATCH] assign nr_ioapics = 0 in smpboot_hooks.h
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/3/19/112

From: Glauber Costa <gcosta@redhat.com>
change smpboot_setup_io_apic() by to match x86_64 behaviour
Signed-off-by: Glauber Costa <gcosta@redhat.com>
---
 include/asm-x86/mach-default/smpboot_hooks.h |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)
diff --git a/include/asm-x86/mach-default/smpboot_hooks.h b/include/asm-x86/mach-default/smpboot_hooks.h
index 7f45f63..8e1c6c0 100644
--- a/include/asm-x86/mach-default/smpboot_hooks.h
+++ b/include/asm-x86/mach-default/smpboot_hooks.h
@@ -41,4 +41,6 @@ static inline void smpboot_setup_io_apic(void)
 	 */
 	if (!skip_ioapic_setup && nr_ioapics)
 		setup_IO_APIC();
+	else
+		nr_ioapics = 0;
 }
-- 
1.5.0.6