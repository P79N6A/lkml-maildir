Date: Tue, 15 Jan 2008 13:01:47 +0200
From: "Ioan Ionita" <>
Subject: sky2 patch in 2.6.24-rc7-git6 breaks POST - commit 84cd2dfb04d23a961c5f537baa243fa54d0987ac
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/15/98

Hi,
I have an Asus Commando motherboard, p965 chipset with Marvell
88E8056 and 88E8001 gigabit lan onboard. skge and sky2 are compiled
in.
When booting linux-2.6.24-rc7-git6, everything seemed fine, but when
attempting to reboot, the machine would freeze on POST, right before
detecting AHCI drives.
In order to get it to POST, a reset or shutdown from the power button
is not enough, I actually have to cut power to the motherboard using
the PSU's power switch!
I first thought that the BIOS or CMOS may have gotten corrupted, but
eventually I fund that linux was the culprit. After a git bisect, I
found the bad commit below
root@ops-desktop:/home/ops/linux-2.6# git bisect bad
84cd2dfb04d23a961c5f537baa243fa54d0987ac is first bad commit
commit 84cd2dfb04d23a961c5f537baa243fa54d0987ac
Author: Stephen Hemminger <shemminger@linux-foundation.org>
Date:   Thu Jan 10 16:14:13 2008 -0800
    sky2: remove check for PCI wakeup setting from BIOS
    The driver checks status of PCI power management to mark
    default setting of Wake On Lan. On some systems this works, but often
    it reports a that WOL is disabled when it isn't.
    This patch gets rid of that check and just reports the wake on
    lan status based on the hardware capablity.
    Signed-off-by: Stephen Hemminger <shemminger@linux-foundation.org>
    Signed-off-by: Jeff Garzik <jeff@garzik.org>
:040000 040000 291580ccfb2bae4a20f73198852b3824ba7ba9e0
5a0ae3b3c740899315347f2529b582c97ff7d488 M	drivers
lspci and dmesg of bad kernel are attached
Please CC me when replying as I'm not signed up to the list
Regards
[unhandled content-type:application/octet-stream][unhandled content-type:application/octet-stream]