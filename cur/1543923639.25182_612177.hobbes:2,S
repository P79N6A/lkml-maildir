Date: Tue, 30 Oct 2007 13:14:29 -0500
From: Eric Sandeen <>
Subject: Re: XFS Fails Quality Assurance Tests on ARM
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/10/30/326

Christoph Hellwig wrote:
> On Tue, Oct 30, 2007 at 12:47:35AM -0500, Eric Sandeen wrote:
>> There was a patch floating around to "fix" it but it's not on-disk
>> compatible w/ x86 & friends, it just makes things consistent for arm.  I
>> think packing some of these structures would take care of it, but this
>> problem could use some attention & testing I think, it's been floating
>> around a long time.
> 
> Do you have a pointer to that patch?  Once the unaliged fields are
> identified simply using get_unaligned on them should fix this issue.
> 
http://www.spinics.net/lists/arm-kernel/msg18479.html
is the one I was thinking of, IIRC, but it just does the math a
different way so that it comes out right on ARM, and doesn't fix the
underlying problem.  I think the end result is no crashes, but a
filesystem which is broken when used on another arch.
But the problem AFAIK is that the *on-disk* structures don't match when
compiled with one ARM abi or another, I think, so get_unaligned isn't
going to help here.
-Eric
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/