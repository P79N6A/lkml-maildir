Date: Mon, 31 Jan 2005 18:36:54 +0100
From: Adrian Bunk <>
Subject: [2.6 patch] drivers/char/specialix.c: misc cleanups
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/1/31/170

This patch contains the following cleanups:
- make some needlessly global code static
- remove the unused global function specialix_setup
Signed-off-by: Adrian Bunk <bunk@stusta.de>
---
 drivers/char/specialix.c |   43 +++++----------------------------------
 1 files changed, 6 insertions(+), 37 deletions(-)
--- linux-2.6.11-rc2-mm2-full/drivers/char/specialix.c.old	2005-01-31 15:06:25.000000000 +0100
+++ linux-2.6.11-rc2-mm2-full/drivers/char/specialix.c	2005-01-31 15:07:39.000000000 +0100
@@ -372,7 +372,7 @@
 
 
 /* Set the IRQ using the RTS lines that run to the PAL on the board.... */
-int sx_set_irq ( struct specialix_board *bp)
+static int sx_set_irq ( struct specialix_board *bp)
 {
 	int virq;
 	int i;
@@ -439,7 +439,7 @@
 }
 
 
-int read_cross_byte (struct specialix_board *bp, int reg, int bit)
+static int read_cross_byte (struct specialix_board *bp, int reg, int bit)
 {
 	int i;
 	int t;
@@ -985,7 +985,7 @@
  *  Routines for open & close processing.
  */
 
-void turn_ints_off (struct specialix_board *bp)
+static void turn_ints_off (struct specialix_board *bp)
 {
 	unsigned long flags;
 	func_enter ();
@@ -1004,7 +1004,7 @@
 	func_exit ();
 }
 
-void turn_ints_on (struct specialix_board *bp)
+static void turn_ints_on (struct specialix_board *bp)
 {
 	unsigned long flags;
 
@@ -2478,37 +2478,6 @@
 }
 
 
-#ifndef MODULE
-/*
- * Called at boot time.
- * 
- * You can specify IO base for up to SX_NBOARD cards,
- * using line "specialix=0xiobase1,0xiobase2,.." at LILO prompt.
- * Note that there will be no probing at default
- * addresses in this case.
- *
- */ 
-void specialix_setup(char *str, int * ints)
-{
-	int i;
-        
-	func_enter ();
-
-	for (i=0;i<SX_NBOARD;i++) {
-		sx_board[i].base = 0;
-	}
-
-	for (i = 1; i <= ints[0]; i++) {
-		if (i&1)
-			sx_board[i/2].base = ints[i];
-		else
-			sx_board[i/2 -1].irq = ints[i];
-	}
-
-	func_exit ();
-}
-#endif
-
 /* 
  * This routine must be called by kernel at boot time 
  */
@@ -2579,9 +2548,9 @@
 	return 0;
 }
 
-int iobase[SX_NBOARD]  = {0,};
+static int iobase[SX_NBOARD]  = {0,};
 
-int irq [SX_NBOARD] = {0,};
+static int irq [SX_NBOARD] = {0,};
 
 module_param_array(iobase, int, NULL, 0);
 module_param_array(irq, int, NULL, 0);
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/