Date: Sat, 07 Aug 2004 13:43:14 -0700
From: Andy Grover <>
Subject: Re: [PATCH] pirq_enable_irq cleanup
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/8/7/114

Alan Cox wrote:
> On Mer, 2004-08-04 at 19:14, agrover wrote:
>>This is a cleanup of pirq_enable_irq. I couldn't understand this function easily 
>>so I cleaned it up.
>>
>>- Hoisted Via quirk to top -- shouldn't break anything but who knows - can someone 
>>with this chipset test?
>>- Hoisted legacy IDE check too.
> This looks odd (its hard to read it in diff format in this case). The
> IDE check is only meant to be done if we look for an IRQ and find none.
> This tells us the device is only connected for legacy mode.
> The VIA one is fairly simple. After the IRQ has been identified or
> selected the VIA needs the "true" PCI IRQ number in the IRQ_LINE
> register because internal V-Bus devices are routed via IRQ line not via
> IRQ pin as the PCI spec says.
Thanks for the explanation.
So perhaps do you think there's any alternative ways we can make this 
function understandable? I gotta believe there's a way for it to do what 
it needs to without 5 layers of nested if()s.
Regards -- Andy
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/