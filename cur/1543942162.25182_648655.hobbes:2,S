Date: Tue, 05 Feb 2008 12:50:00 -0500
From: Jeff Garzik <>
Subject: Re: Integration of SCST in the mainstream Linux kernel
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/2/5/265

Bart Van Assche wrote:
> On Feb 4, 2008 11:57 PM, Jeff Garzik <jeff@garzik.org> wrote:
> 
>> Networked block devices are attractive because the concepts and
>> implementation are more simple than networked filesystems... but usually
>> you want to run some sort of filesystem on top.  At that point you might
>> as well run NFS or [gfs|ocfs|flavor-of-the-week], and ditch your
>> networked block device (and associated complexity).
> 
> Running a filesystem on top of iSCSI results in better performance
> than NFS, especially if the NFS client conforms to the NFS standard
> (=synchronous writes).
> By searching the web search for the keywords NFS, iSCSI and
> performance I found the following (6 years old) document:
> 
http://www.technomagesinc.com/papers/ip_paper.html.
 A quote from the
> conclusion:
>     Our results, generated by running some of industry standard benchmarks,
>     show that iSCSI significantly outperforms NFS for situations when
>     performing streaming, database like accesses and small file transactions.
async performs better than sync...  this is news?  Furthermore, NFSv4 
has not only async capability but delegation too (and RDMA if you like 
such things), so the comparison is not relevant to modern times.
But a networked filesystem (note I'm using that term, not "NFS", from 
here on) is simply far more useful to the average user.  A networked 
block device is a building block -- and a useful one.  A networked 
filesystem is an immediately usable solution.
For remotely accessing data, iSCSI+fs is quite simply more overhead than 
a networked fs.  With iSCSI you are doing
	local VFS -> local blkdev -> network
whereas a networked filesystem is
	local VFS -> network
iSCSI+fs also adds new manageability issues, because unless the 
filesystem is single-computer (such as diskless iSCSI root fs), you 
still need to go across the network _once again_ to handle filesystem 
locking and coordination issues.
There is no _fundamental_ reason why remote shared storage via iSCSI OSD 
  is any faster than a networked filesystem.
SCSI-over-IP has its uses.  Absolutely.  It needed to be standardized. 
But let's not pretend iSCSI is anything more than what it is.  Its a 
bloated cat5 cabling standard :)
	Jeff