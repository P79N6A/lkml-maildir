Date: Wed, 27 Sep 2006 08:02:45 +1000
From: Greg Schafer <>
Subject: Re: 2.6.18 Nasty Lockup
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/9/26/288

On Tue, Sep 26, 2006 at 01:15:51PM -0700, john stultz wrote:
> On Tue, 2006-09-26 at 22:36 +1000, Greg Schafer wrote:
> > This is a _hard_ lockup. No oops, no magic sysrq, no nuthin, just a
> > completely dead machine with only option the reset button. Usually happens
> > within a couple of minutes of desktop use but is 100% reproducible. Problem
> > is still there in a fresh checkout of current Linus git tree (post 2.6.18).
> > 
> > Dual Athlon-MP 2200's on a Tyan S2466 Tiger MPX. Config attached.
> > 
> > I used git-bisect and arrived at the apparent culprit below. Anything else I
> > should do to gather more info?
> 
> Quick test: Does enabling CONFIG_ACPI change the behavior?
Yes. It doesn't lockup now, at least it hasn't yet. Should I always
configure with CONFIG_ACPI? I've usually avoided it.
On Tue, Sep 26, 2006 at 11:18:02AM -0700, john stultz wrote:
> Thanks for narrowing this down. Could you send me full dmesg output?
Sure, attached (non CONFIG_ACPI case).
On Tue, Sep 26, 2006 at 01:20:54PM -0400, James Puthukattukaran wrote:
> Did you try asserting an NMI via "nmi_watchdog" kernel boot argument?
I gave it a try on your advice (added nmi_watchdog=1 to boot args). No dice
I'm afraid (no oops data). But I did notice in the dmesg output something
possibly strange:
Testing NMI watchdog ... CPU#0: NMI appears to be stuck (0->0)!
On Tue, Sep 26, 2006 at 03:56:46PM +0200, Michael Obster wrote:
> what do you mean with desktop use? X11-System? Then please add also your
> used grafic card and the X11 driver. I see this behaviour with lots of
> binary only driver like from NVIDIA or ATI (perhaps they have problems
> with the new 2.6.18 kernel).
No binary-only drivers here. Matrox card. In fact, the lockup sometimes
happens before X is even loaded (I suspect ntpdate in my bootscripts).
Regards
Greg
[unhandled content-type:application/x-gunzip]