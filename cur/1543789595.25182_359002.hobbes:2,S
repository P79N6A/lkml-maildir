Date: Tue, 18 Oct 2005 23:35:16 -0400
From: Phillip Susi <>
Subject: Re: Keep initrd tasks running?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/10/18/262

I am confused.  I thought that once the initramfs init execs the real 
init, the initramfs is freed.  It can't be freed if there are processes 
that still have open files there, so that would seem to prevent any 
processes being started in the initramfs and continuing after the real 
system is booted. 
Jeff Bailey wrote:
>This is much more easily supported in Breezy.  usplash is started at the
>top of the initramfs (from the init-top hook) and lives until we start
>gdm.
>
>The biggest constraint is that you don't have write access to the target
>root filesystem (since it's mounted readonly).  However, /dev is a tmpfs
>that is move mounted to the new root system.  If you need to have
>sockets open or store data, you can use that.  usplash does this for its
>socket.
>
>Note that the initramfs startup sequence isn't at all similar to the old
>initrd startups.  It should be easy for you to cleanly add what you want
>under /etc/mkinitramfs/scripts and not have to modify the
>initramfs-tools package.  /usr/share/doc/initramfs-tools/HACKING
>contains some starter information.
>
>Hope this helps!
>
>Tks,
>Jeff Bailey
>
>
>
>
>
> 
>
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/