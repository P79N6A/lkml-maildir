Date: Tue, 19 Oct 2004 13:13:34 -0400
From: Ross Biro <>
Subject: Re: Dma problems with Promise IDE controller
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/10/19/186

On Tue, 19 Oct 2004 17:17:33 +0100, Johan Groth <jgroth@dsl.pipex.com> wrote:
> Ross Biro wrote:
> 
> 
> > On Mon, 18 Oct 2004 22:22:38 +0200, Bartlomiej Zolnierkiewicz
> > <bzolnier@gmail.com> wrote:
> >
> >>On Mon, 18 Oct 2004 20:43:23 +0100, Johan Groth <jgroth@dsl.pipex.com> wrote:
> >>
> >>>Oct 18 18:03:16 lion kernel: hdg: dma timeout retry: error=0x40 {
> >>>UncorrectableError }, LBAsect=53500655, sector=53500520
> >
> >
> > The Uncorrectable Error is a dead give away.  You have a bad sector on
> > your drive.
> > 
> How am I supposed to fix those blocks? I've tried with e2fsck -c -c -y
> /dev/md0  but that yields the following printout in the log.
> 
The drive still has a bad sector.  You are having trouble because the
error recover in the Linux ide code is not the same as Windows and
most drive vendors care about Windows, not the ATA-Spec.  On top of
that Linux switches out of DMA mode once it hits a bad sector, so the
drive will be very slow from the on.
The only way you are going to fix the problem is if your drive has
some spare sectors still available, and you do a write with out a read
to the bad sector.
Ross
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/