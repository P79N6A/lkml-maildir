Date: Fri, 2 Feb 2007 16:04:13 +0100
From: Roland Kuhn <>
Subject: Re: O_NONBLOCK setting "leak" outside of a process??
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/2/2/130

Hi Guillaume!
On 2 Feb 2007, at 14:48, Guillaume Chazarain wrote:
> 2007/2/2, Roland Kuhn <rkuhn@e18.physik.tu-muenchen.de>:
>
>> That's a bug, right?
>
> No, if you want something like: (echo toto; date; echo titi) > file
> to work in your shell, you'll be happy to have the seek position
> shared in the processes.
>
As a naive user I'd probably expect that each of the above adds to  
the output, which perfectly fits the O_APPEND flag (to be set by the  
shell, of course).
The immediate point was about the flags, though, and having  
O_NONBLOCK on or off certainly is a _design_ choice when writing a  
program. If I remove O_NONBLOCK, I have a right to expect that I/O  
functions do not return EAGAIN!
Ciao,
                     Roland
--
TU Muenchen, Physik-Department E18, James-Franck-Str., 85748 Garching
Telefon 089/289-12575; Telefax 089/289-12570
--
CERN office: 892-1-D23 phone: +41 22 7676540 mobile: +41 76 487 4482
--
Any society that would give up a little liberty to gain a little
security will deserve neither and lose both.  - Benjamin Franklin
-----BEGIN GEEK CODE BLOCK-----
Version: 3.12
GS/CS/M/MU d-(++) s:+ a-> C+++ UL++++ P+++ L+++ E(+) W+ !N K- w--- M 
+ !V Y+
PGP++ t+(++) 5 R+ tv-- b+ DI++ e+++>++++ h---- y+++
------END GEEK CODE BLOCK------
[unhandled content-type:application/pkcs7-signature][unhandled content-type:application/pgp-signature]