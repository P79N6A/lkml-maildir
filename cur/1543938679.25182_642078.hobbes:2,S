Date: Wed, 23 Jan 2008 11:45:14 +0100
From: Andi Kleen <>
Subject: Re: [PATCH 0/2] Relax restrictions on setting CONFIG_NUMA on x86
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/23/65

> > i386 already has srat parsing code (just written in a horrible hackish
> > way); but it exists arch/x86/kernel/srat_32.c
>
> Yes, I spotted that. Enabling it required a Kconfig change 
does it? I was pretty sure that a !NUMAQ i386 CONFIG_NUMA build
already used that. At least that was the case when I last looked. If that
has changed it must have bitrotted recently.
> or two and 
> enabling BOOT_IOREMAP. It then crashes early in boot on a call to strlen()
> so I went with the stubs and SRAT disabled for the moment.
Crashed on a Opteron box? That was always the case
If it crashed on a (older) Summit then it likely bitrotted, because that 
worked at some point. The code was originally written by Pat G. for Summit1
and I believe was at least used by some people (no distributions) for S2,
possible 3 too.
> Ok, understood. When I next revisit this, I'll look at making ACPI_SRAT
> and BOOT_IOREMAP work on normal machines and see what happens. Thanks.
Again the problem shouldn't be normal machines, but non Summit NUMA systems.
-Andi