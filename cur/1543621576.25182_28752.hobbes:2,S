Date: Sun, 17 Feb 2002 21:16:09 +0100
From: Daniel Phillips <>
Subject: Re: [RFC] Page table sharing
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/2/17/46

Here's the patch as currently posted.  I've been hacking on it to implement 
the locking described in the previous mail, but really I think it's better to 
go with the simple, incorrect and lockless version for group pondering.
    
http://people.nl.linux.org/~phillips/patches/ptab-2.4.17
    (almost the same as posted to lkml/linus yesterday)
In the posted patch, tracing is configed off, see:
#if 0
#  define ptab(cmd) cmd
#else
#  define ptab(cmd) nil
#endif
in mm.h.  Anybody who actually wants to hack on this will probably want to 
turn it on.  Sharing is also still restricted to id 9999, even though I find
I'm able to boot and run pretty well with system-wide sharing.  It's not fully
correct though, because there are lockups happening in some benchmarks 
(unixbench and some crazy things invented by Andrew Morton) and UML fails to
start properly.  UML does work properly when sharing is restricted to just
one ID, i.e., something deep in the system doesn't like sharing page tables 
at this point.
-- 
Daniel
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/