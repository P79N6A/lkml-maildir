Date: Fri, 13 Sep 2002 15:38:55 +0200
From: "Juan M. de la Torre" <>
Subject: [TRIVIAL] Trivial patch in the bootmem allocator
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/9/13/91

 If the requested align is PAGE_SIZE, it is impossible to merge with the
previous allocation request, because the allocated area must begin in a
page boundary.
Regards,
Juanma
--- linux/mm/bootmem.c.orig     Fri Sep 13 15:23:22 2002
+++ linux/mm/bootmem.c  Fri Sep 13 15:24:31 2002
@@ -205,7 +205,7 @@
         * of this allocation's buffer? If yes then we can 'merge'
         * the previous partial page with this allocation.
         */
-       if (align <= PAGE_SIZE
+       if (align < PAGE_SIZE
            && bdata->last_offset && bdata->last_pos+1 == start) {
                offset = (bdata->last_offset+align-1) & ~(align-1);
                if (offset > PAGE_SIZE)
-- 
/jm
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/