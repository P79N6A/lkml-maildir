Date: Mon, 19 Jul 1999 11:02:21 +0100 (BST)
From: Alan Cox <>
Subject: Re: network problems with 2.2.10-ac11
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/7/19/22

> A look in ifconfig shows that there are tx and rx packets around (
> maybe due to the ping ) but it just couldn't ping out. Everything
> seems setup ok as compare to the other machine ( the routing table ).
> 
> I actually had a oops when I compile second time without the
> firewalls options but it does not response to the alt+sysrq
> combination. it seems to stop during init setting up the routing. 
> 
> anyway, I'll try to reproduce it tomorrow and hopefully with more
> details to furnish.
Dohh.. I think this is the fix
--- net/ipv4/arp.c~	Mon Jul 19 04:09:28 1999
+++ net/ipv4/arp.c	Mon Jul 19 17:07:38 1999
@@ -308,7 +308,7 @@
 	u32 target = *(u32*)neigh->primary_key;
 	int probes = neigh->probes;
 
-#if defined(CONFIG_IP_MASQUERADE_VS)	/* Virtual server */ 
+#if !defined(CONFIG_IP_MASQUERADE_VS)	/* Virtual server */ 
 	/* use default interface address as source address in virtual
 	 * server environment. Otherways the saddr might be the virtual
 	 * address and gateway's arp cache might start routing packets
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/