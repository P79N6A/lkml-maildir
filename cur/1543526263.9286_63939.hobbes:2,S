Date: Thu, 17 Feb 2000 10:29:26 -0800 (PST)
From: Jeremy Fitzhardinge <>
Subject: Re: TCP bug? hanging outgoing connections in 2.2.14
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/2/17/158

On 17-Feb-00 Andi Kleen wrote:
> jeremy@goop.org (Jeremy Fitzhardinge) writes:
>> 12:49:20.562071 gw.goop.org.1031 > csla.csl.sri.com.smtp: S
>> 1693701511:1693701511(0) win 32120 <mss 1460,sackOK,timestamp 22854
>> 3[|tcp]> (DF) (ttl 64, id 4107)
>> 12:49:20.585798 csla.csl.sri.com.smtp > gw.goop.org.1031: S
>> 570048000:570048000(0) ack 1693701512 win 4096 (ttl 50, id 21364)
> 
> Very small window. That is not exactly normal. 
> 
> Does it help if you turn the tcp options off ? 
> (echo 0 > /proc/sys/net/ipv4/tcp_{window_scaling,sack,timestamps) 
That didn't help.
>> 12:49:46.116687 gw.goop.org.1031 > csla.csl.sri.com.smtp: . ack 2 win 32696
>> (DF) (ttl 64, id 4192)
> 
> Linux does window probing now.
> This means Linux decided that the window is far too small and it is better *
> to wait for a bigger one. The bigger one never comes.
> 
> Linux's small window handling in TCP could be certainly improved, although
> using a 4096 window on the internet looks rather bogus too.
OK, but how does that explain the fact that the telnet session connects through
without problems?  And why would that kick the blocked select?
> Could you try if this patch helps? 
I'll try it.
        J
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/