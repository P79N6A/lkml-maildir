Date: Mon, 12 Nov 2001 07:32:15 +0100
From: DevilKin <>
Subject: USB problems on 2.4.15-pre2?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/11/12/4

Hi All,
I recently (yesterday) upgraded my kernel from 2.4.10 to 2.4.15-pre2 (i 
needed to recompile anyway to get USB, and it seemed that the VM troubles 
were over). I must say that I'm pleased with this kernel, operates very 
smooth on my machine. I even got better responce times (that I thought I 
wouldn't notice on a 1.4ghz...).
Anyway, I'm straying...
USB is compiled entirely as modules, no kmod support, hotswap activated.
USB Bridge is a VIA bridge. (as I'm not behind the PC i don't know the 
typenumber)
I have had mount locking up when attempting to mount my /dev/sda1 which 
refers to an USB mass-storage device (actually, it's my digicam, but it 
acts as if it is an USB storage device).
When I plug the cam on the USB cable, it is recognized as a massstorage 
device and the appropriate module is loaded (storage-usb if i'm correct) It 
is registered in the /proc/bus/usb filesystem. When attempting to mount it, 
the mount hangs indefinitely, and the cam compactflash access led keeps on 
blinking, as if it can't read the FS on the cam (which is vfat).
Every subsequent mount of this device hangs too. The mounts are unkillable 
(not even with -SIGKILL as root).
This causes 2 problems when shutting down the system:
- system hangs, waiting for mounts to get killed
- an oops (which, unfortunately, isn't registered in syslog & stuff because 
they are dead already - I'll copy it by hand someday)
The strange thing is that the usb mounting/unmounting works perfectly if I 
compile everything in the kernel (no modules for USB, that is).
Is this a known problem/bug?
I'll reply on this tonight (when behind pc) with more details.
Thanks,
DK
(no need to CC me, I'm on the list)
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/