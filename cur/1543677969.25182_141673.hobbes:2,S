Date: Thu, 19 Jun 2003 08:20:06 +0100
From: David Howells <>
Subject: Re: [PATCH] VFS autmounter support
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/6/19/28

> > That _is_ actually true. Doing "ls -l" in that directory would otherwise
> > cause a mount storm.
> > 
> 
> It's not.  ls -l and all the GUI tools do lstat(), not stat().
Sorry... you're correct. That should have been "ls -F" or "ls --color", both
of which are, I believe, commonly used - _they_ definitely use stat() as well
as lstat().
> > follow_link resolving to itself? Surely that'll cause ELOOP very quickly?
> > And where does this "dummy directory inode" live?
> 
> Nope.  You can follow_link() nonrecursively.  You need a dummy directory 
> inode to mount upon anyway.
You're right about follow_link() not recursing... it would have to recurse
itself, and so can avoid that. However, if it only ever follows to itself, how
does that help? That never actually gets you anywhere... It needs to trigger a
mount at some point.
Or do you mean it should follow to an arbitrary (disconnected, otherwise it
changes the topology from what the AFS admin required) dentry with a dummy
directory inode attached to it?
David
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/