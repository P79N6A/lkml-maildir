Date: Thu, 18 Oct 2001 11:41:24 -0700 (PDT)
From: Ravi Chamarti <>
Subject: Re: Ref: zerocopy +netfilter performance problem.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/10/18/141

Hi,
Thanks for your response Alexey. I appreciate it. 
--- kuznet@ms2.inr.ac.ru wrote:
> Hello!
> 
> > My question is that is this copy is required for
> > netfilter to work? Do we somehow get around
> > with netfilter to work such that the zerocopy path
> > passes the packet without any copy?
> 
> Yes & yes.
> 
> Existing netfilter modules do not understand
> fragmented skbs,
> and as soon as netfilter folks are lazy even to move
> the check
> to relevant modules, even smart hooks has to be
> harmed by this.
How many netfilter modules exist which do not
understand fragmented skbs and need to look at the
skb data? 
Will the following approach work? 
if the somehow hook register shows interest only in
header (by setting a flag, may be in nf_hooks_ops 
struct), then we can avoid the copy of the fragmented
skb's data and all other cases, we copy fragmented
skb's data to a kernel buffer. The side effect is that
a flag field is introduced into nf_hook_ops struct
which makes netfilter modules to recompile. Are there
any other side affects or better approaches?
regards
Ravi Chamarti
__________________________________________________
Do You Yahoo!?
Make a great connection at Yahoo! Personals.
http://personals.yahoo.com
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/