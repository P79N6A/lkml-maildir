Date: Thu, 31 Aug 2000 18:25:48 +0100
From: "Jon Burgess" <>
Subject: Re: 2.2.[16,17pre20] VM do_try_to_free_pages
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/8/31/19

> When trying to compile SimGear-0.0.12 under 2.2.16, with gcc-2.95.2,
> I could (quite reproducibly) cause an unbounded number of:
>
>  VM: do_try_to_free_pages failed for x
>
>where x was cc1plus, kswapd, syslogd, etc.
>
>Under 2.2.17pre20, this still start to happen, but shortly thereafter
>the kernel kills cc1plus, and it stops.  I don't think I'm reaching
>memory exhaustion; I've got 256M ram, and I ran the compile from the
>console with nothing else running.
>
>Is the cause of this behavior known, and if not, what can I do to help
>diagnose it?
I've read that seeing a few of these messages is ok, but I too have experienced
the case where these messages loop forever. Sys-Rq is still active, so some
stats can be dumped. This occurs for me when I run a dbench test with 35 or more
clients on a machine with 32Mb of RAM.
I believe this first occured in the changes made between 2.2.17pre3 and pre4.
With pre3 I can run dbench for days without problems, with pre4 it dies within a
few hours. I've tried this with 2.2.17pre19 and the problem still exists.
I think that reverting the changes to the do_try_to_swap_out & kswapd functions
in mm/vmscan.c fixes the problem, but i've been busy fixing other things
recently to prove that this really is a good fix.
     Jon
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/