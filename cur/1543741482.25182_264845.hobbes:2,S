Date: Tue, 26 Oct 2004 08:26:33 -0400
From: Ryan Anderson <>
Subject: Re: Versioning of tree
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/10/26/107

On Tue, Oct 26, 2004 at 12:49:02PM +0100, David Vrabel wrote:
> Ryan Anderson wrote:
> >
> >Well, here's a patch that adds -BKxxxxxxxx to LOCALVERSION when a
> >top-level BitKeeper tree is detected.
> >[...]
> > LOCALVERSION = $(subst $(space),, \
> > 	       $(shell cat /dev/null $(localversion-files)) \
> >+	       $(subst ",,$(localversion-bk)) \
> 
> Surely there's no need for this?  Can't the script spit out an 
> appropriate localversion* file instead?
It can, and yes, my first version used that method.
Except it never worked.  I was able to generate the file before
include/linux/version.h was rebuilt, but failed to get it picked up in
that.  I'm not really sure why.
For what it's worth, "make deb-pkg" picks up the version correctly using
this method:
	dpkg-deb: building package `linux-2.6.10-rc1-bkd581e3d1' in
	`../linux-2.6.10-rc1-bkd581e3d1_2.6.10-rc1-BKd581e3d1_i386.deb'.
> Tools like Debian's make-kpkg have to work out the kernel version (for 
> use in the package name etc.) and it would be preferable if the method 
> for generating the version didn't change too often.
Well, I didn't think make-kpkg was doing anything horribly unexpected,
so I didn't to test that.   I'll do a test run now to see what happens,
though.
-- 
Ryan Anderson
  sometimes Pug Majere
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/