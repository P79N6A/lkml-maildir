Date: Fri, 21 Feb 2003 16:41:35 +0100
From: Mikael Pettersson <>
Subject: Re: UP local APIC is deadly on SMP Athlon
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/2/21/129

Ion Badulescu writes:
 > AMD 760MP and 760MPX, both have this problem.
Ok, AMD's chipsets are reasonable.
 > > Is the second CPU installed or not?
 > 
 > Installed.
 > 
 > > If the second CPU is installed, has it been disabled in BIOS?
 > 
 > It hasn't been disabled (the BIOS doesn't have that option).
That kills the noisy-bus theory.
 > Well, the second CPU is there, and there are no problems with the APIC and 
 > the IO-APIC if the kernel is compiled with CONFIG_SMP=y. Only the UP case 
 > causes the problem. So I don't think the bus itself is noisy, unless the 
 > noises are produced by the second CPU somehow, and we can't do anything 
 > about it because we're not touching that second CPU.
An UP_APIC kernel without IOAPIC shouldn't generate any APIC bus messages.
Have you checked if the BIOS has an option for choosing "PIC" or "APIC"
interrupt delivery? Try setting it to PIC mode.
 > I know that AMD's K7 APIC is supposed to be compatible with the Intel P6 
 > APIC, but do you think there might be some incompatibility between that 
 > that causes this? Or perhaps some undefined behavior we rely on, and which 
 > is different between Intel and AMD?...
None that I know of, to both questions.
All problems I've seen have been caused by non-Intel chipsets.
/Mikael
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/