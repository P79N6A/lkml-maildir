Date: Mon, 05 Feb 2001 15:15:44 -0800
From: Dan Kegel <>
Subject: TCP_NOPUSH on FreeBSD, TCP_CORK on Linux (was: Is sendfile all that  sexy?)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/2/5/214

Tony Finch wrote:
> 
> Tony Finch <dot@dotat.at> wrote:
> >Linus Torvalds <torvalds@transmeta.com> wrote:
> >>
> >>Without proper uncorking (and it really shouldn't be that hard to
> >>add), TCP_NOPUSH simply can't be used in the generic sense.
> >
> >It was easy :-) I've put up a patch for FreeBSD that adds proper
> >uncorking on my homepage <
http://apache.org/~fanf/>
 in the "Stuff"
> >section.
> 
> ... and it has been committed to -CURRENT, too.
How very cool.
How close is TCP_NOPUSH to behaving identically to TCP_CORK now?
If it does behave identically, it might be time to standardize
the symbolic name for this option, to make apps more portable
between the two OS's.  (It'd be nice to also standardize the
numeric value, in the interest of making the ABI's more compatible, too.)
Here are the definitions in the two OS's at the moment:
FreeBSD: netinet/tcp.h (from 
http://minnie.cs.adfa.oz.au/FreeBSD-srctree/newsrc/netinet/tcp.h.html#TCP_NOPUSH
 )
/*
 * User-settable options (used with setsockopt).
 */
#define TCP_NODELAY     0x01    /* don't delay send to coalesce packets */
#define TCP_MAXSEG      0x02    /* set maximum segment size */
#define TCP_NOPUSH      0x04    /* don't push last block of write */
Linux: netinet/tcp.h:
/*
 * User-settable options (used with setsockopt).
 */
#define TCP_NODELAY 0x01    /* don't delay send to coalesce packets */
#define TCP_MAXSEG  0x02    /* set maximum segment size */
#define TCP_CORK    0x03    /* control sending of partial frames */      
- Dan
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/