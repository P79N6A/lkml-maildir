Date: Fri, 10 Nov 2006 17:01:27 -0800 (PST)
From: Christoph Lameter <>
Subject: Re: + sched-use-tasklet-to-call-balancing.patch added to -mm tree
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/11/10/282

On Fri, 10 Nov 2006, Ingo Molnar wrote:
> ok, that's what i suspected - what made the difference wasnt the fact 
> that it was moved out of irqs-off section, but that it was running 
> globally, instead of in parallel on every cpu. I have no conceptual 
> problem with single-threading the more invasive load-balancing bits. 
> (since it has to touch every runqueue anyway there's probably little 
> parallelism possible) But it's a scary change nevertheless, it 
> materially affects every SMP system's balancing characteristics.
We saw multiple issues. The first we saw was interrupt holdoff related 
since IPIs took a long time to complete. The other was that multiple 
load balance actions in multiple CPUs seem to serialize on the locks 
trying each to move tasks off the same busy processor. So both better be 
addressed.
Load balancing for small domains is running faster so there is less chance 
of parallelism. It seems that the staggering of the timer interrupt is 
sufficient on smaller systems to avoid concurrent load balancing 
operations.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/