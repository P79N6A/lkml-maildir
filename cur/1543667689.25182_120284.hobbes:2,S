Date: Tue, 25 Mar 2003 05:58:25 -0800
From: William Lee Irwin III <>
Subject: init_inode_once() wants sizeof(struct hlist_head)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/3/25/85

inode_init() wants to deal with things in in units of the size of
struct hlist_head, not struct list_head.
diff -urpN merge-2.5.66-7/fs/inode.c merge-2.5.66-8/fs/inode.c
--- merge-2.5.66-7/fs/inode.c	2003-03-24 14:01:48.000000000 -0800
+++ merge-2.5.66-8/fs/inode.c	2003-03-25 05:41:18.000000000 -0800
@@ -1260,7 +1260,7 @@ void __init inode_init(unsigned long mem
 		init_waitqueue_head(&i_wait_queue_heads[i].wqh);
 
 	mempages >>= (14 - PAGE_SHIFT);
-	mempages *= sizeof(struct list_head);
+	mempages *= sizeof(struct hlist_head);
 	for (order = 0; ((1UL << order) << PAGE_SHIFT) < mempages; order++)
 		;
 
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/