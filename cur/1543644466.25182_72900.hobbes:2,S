Date: Mon, 23 Sep 2002 17:17:55 +0200
From: Remco Post <>
Subject: Re: 2.5.38 on ppc/prep
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/9/23/154

On maandag, september 23, 2002, at 04:55 , Tom Rini wrote:
> On Mon, Sep 23, 2002 at 04:39:49PM +0200, Remco Post wrote:
>>
>> On maandag, september 23, 2002, at 04:29 , Tom Rini wrote:
>>
>>> On Mon, Sep 23, 2002 at 02:03:02PM +0200, Remco Post wrote:
>>>
>>>> after some tiny fixes to reiserfs and the makefile for prep bootfile
>>>> (using ../lib/lib.a vs. ../lib/libz.a) I managed to succesfully 
>>>> compile
>>>> a kernel. It even boots to the point where it frees unused kernel
>>>> memory
>>>> and then stops... this includes succesfully mounting the root
>>>> filesystem...
>>>
>>> What typo exactly?  The only 'lib' in the Makefile
>>> (arch/ppc/boot/prep/Makefile) is:
>>> LIBS = ../lib/zlib.a
>>
>> That one exactly... I don't recall calling it a typo, though ;-) I 
>> guess
>> that is more a relic from when the only lib routines were libz ones and
>> we called the lib to be linked libz.a....
>
> It's not a relic, it's design.  We don't want the kernel's zlib routines
> right now, we want our own.  Did it not link the way it was?  It's been
> a few releases since I last compiled for my PReP box, but it was well
> after the zlib changes had gone in.
>
>> There is a simular entry in arch/ppc/boot/openfirmware/Makefile...
>> removing the z helped over there as well (don't recall exactly, I'm at
>> work now... ) (not that I dare booting Linus's 2.5 tree on my build
>> machine, it's falling apart even with stable software....  ;-(
>
> Again, we don't want the 'normal' zlib there either.  Was it not
> linking?  If so, what was the error?
>
no rule to make target ../lib/libz.a needed for target 
../images/zImage.prep (and simulair for openfirmware...), or something 
like that (I have to this from what I remember) I found a file 
../lib/lib.a, so I assumed it was renamed, not updating the makefile for 
the prep and openfirmware image
This is a linking error in the final stage of the build.... I think 
2.5.33 als build ok, after a few patches. Booted as far a to tell me 
there was an attempt to kill pid 0 and the do its 180 sec. countdown...
> --
> Tom Rini (TR1265)
> 
http://gate.crashing.org/~trini/
>
--
Met vriendelijke groeten,
Remco Post
SARA - Stichting Academisch Rekencentrum Amsterdam    
http://www.sara.nl
High Performance Computing  Tel. +31 20 592 8008    Fax. +31 20 668 3167
PGP keys at 
http://home.sara.nl/~remco/keys.asc
"I really didn't foresee the Internet. But then, neither did the computer
industry. Not that that tells us very much of course - the computer 
industry
didn't even foresee that the century was going to end." -- Douglas Adams
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/