Date: Fri, 21 Apr 2006 11:39:14 +0200
From: Adrian Bunk <>
Subject: Re: [RFC PATCH 1/3] export symbol report: overview
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/4/21/94

On Fri, Apr 21, 2006 at 01:20:15AM -0700, Ram Pai wrote:
> On Fri, 2006-04-21 at 09:43 +0200, Sam Ravnborg wrote:
> > On Thu, Apr 20, 2006 at 03:36:53PM -0700, Ram Pai wrote:
> > > This patch series enables on-demand report generation of export symbol usage by
> > > inkernel modules. The report is available at
> > > 
> > > A report generated by executing 
> > >  	make allmodconfig
> > >  	make export_report
> > > is available at 
http://www.sudhaa.com/~ram/misc/export_report.txt
> > > 
> > > This report lists:
> > > 1. the usage count of all exported symbols by in-kernel modules.
> > > 2. For each in-kernel module lists
> > > 	a) the in-kernel modules it depend on.
> > > 	b) list of exported symbols from that in-kernel modules it depend on.
> > > 
> > > Highlights: 
> > > 	On x86 architecture
> > >  	(1) 880 exported symbols not used by any in-kernel modules.
> > >         (2) 1792 exported symbols used only once.
> > > 
> > > This patch series has comments by Adrian Bunk incorporated.
> > 
> > Hi Ram Pai.
> > 
> > In principle what your patch does is a simple port-processign of
> > Module.symvers.
> > Insead of introducing another step in the buildprocess then for this
> > functionality we should just call your script direct.
> > This is not something the average users will do often, so having to
> > type:
> > ./scripts/export-report.pl
> > 
> > And then let the perl script pick up default values for where to find
> > *.mod.c files and Module.symvers.
> > 
> > Thoughts?
> 
> Well, if the Module.symvers file does not exist than the script will
> fail; unless the script invokes the 'make modules'. 
> 
> Incorporating it into the Makefile can ease its use,
> because we can transparently trigger rules that can make the
> Module.symvers file.
> 
> I guess its a question of which way makes it easy to use? and my 
> thoughts are leaning towards incorporating it into the Makefile.
> 
> I can make it either way. You suggest.
Sam is the one who can judge best on how to implement your proposal 
best, but there's one thing you should have in mind:
This is a script that isn't for users compiling their own kernel - it's 
a tool only a small subset of the kernel developers will use.
It does therefore not need a sophisticated error handling for cases like 
a not yet compiled kernel or CONFIG_MODULES=n.
> RP
cu
Adrian
-- 
       "Is there not promise of rain?" Ling Tan asked suddenly out
        of the darkness. There had been need of rain for many days.
       "Only a promise," Lao Er said.
                                       Pearl S. Buck - Dragon Seed
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/