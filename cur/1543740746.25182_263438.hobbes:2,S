Date: Fri, 22 Oct 2004 11:04:36 -0700
From: "Pallipadi, Venkatesh" <>
Subject: RE: [Linux-fbdev-devel] Re: Generic VESA framebuffer driver and Video card BOOT?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/10/22/252

>-----Original Message-----
>From: Jon Smirl [mailto:jonsmirl@gmail.com] 
>Sent: Friday, October 22, 2004 10:19 AM
>To: Pallipadi, Venkatesh
>Cc: Matthew Garrett; stefandoesinger@gmx.at; 
>linux-kernel@vger.kernel.org
>Subject: Re: [Linux-fbdev-devel] Re: Generic VESA framebuffer 
>driver and Video card BOOT?
>
>On Fri, 22 Oct 2004 09:36:40 -0700, Pallipadi, Venkatesh
><venkatesh.pallipadi@intel.com> wrote:
>> Actually I sent the kernel patch to call some userlevel 
>vgapost utility
>> on this same thread around a week back. I am sending it here again.
>
>It is more complex to restart the VGA system when there are multiple
>cards. You have to disable all of the other VGA devices before
>reseting one otherwise you will end up with two enabled VGA devices
>and address ownership conflicts. You also have to move the PCI bus
>routing around so that it points to the correct card.
>
>There is a pending patch in mm, bk-pci, that exposes video ROMs via
>sysfs. That makes writing the reset program cleaner. You should not
>play with the ROM or the PIC bus routine from user space, that needs
>to be done in the kernel.
>
Yes. I looked at that patch which exposes video ROM through sysfs. 
But, we will also need either a kernel or user level x86 emulator, 
to use this ROM for things like vgapost. Right? 
I was using the video ROM exposed through sysfs for my userlevel 
emulation, until I found out the vgapost calls also uses some other 
things outside video ROM as it makes other INT calls internally.
That's when I moved out to use the X approach of mapping /dev/mem.
I agree with you on all the things about multiple VGA card and 
their initializations. But, I am more concerned about the more 
common single video card systems, which doesn't get video back after 
S3 suspend and resume, just because the kernel doesn't do vgapost 
at proper time. With thousands of such systems being used already, 
I feel we need to have some working solution for that sooner.
Thanks,
Venki
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/