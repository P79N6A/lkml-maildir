Date: Tue, 8 Apr 2003 15:22:15 -0700
From: Andrew Morton <>
Subject: Re: 2.5 io statistics?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/4/8/225

Larry McVoy <lm@bitmover.com> wrote:
>
> Is there a writeup of the changes anywhere?  I'd like to port cstat to 2.5.
> Cstat is sort of a netstat/vmstat combo:
> 
> load free cach swap pgin  pgou dk0 dk1 dk2 dk3 ipkt opkt  int  ctx  usr sys idl
> 0.00  19M 562M  48M 4.0K   12K   0   0   0   0  137   25  267   83    0   0 100
> 0.00  18M 563M  48M   0    12K   0   0   0   0  133   22  258   77    0   1  99
It's currently undergoing a bit of change.
In 2.5.67 all IO activity is monitored by opening and reading
/sys/block/hda/stat.  This certainly doesn't scale when you have thousands of
disks, so there's a patch in -mm which performs runtime aggregation of global
stats and exposes that via /proc/diskstats.
So if you want to monitor the "global" IO activity, you don't need to open all
those sysfs files.
I don't know if the aggregate disk stats patch is ready to go yet.  I'm
awaiting testing results, conversion of userspace tools, etc.  I just plonked
it in there and haven't heard anything since.
As far as I know, neither the format of the sysfs file nor the format of
/proc/diskstats is documented anywhere.
Perhaps Rick can prepare a description for inclusion under Dcumentation/
somewhere?
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/