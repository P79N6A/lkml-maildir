Date: Wed, 11 Oct 2006 12:43:03 -0700
From: "H. Peter Anvin" <>
Subject: Re: [PATCH] Remove lilo-loads-only-five-sectors-of-zImage-fixup from setup.S
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/10/11/267

Alexander van Heukelum wrote:
> 
> The patch should not alter behaviour for any bootloader that takes
> setupsects into account. It just removes 'support' for bootloaders that
> have the size of the setup code hardcoded to 4 sectors.
> 
> The current version of setup.S already checks if the bootloader
> understands boot protocol 2.00+ in the case of a big kernel, but that
> code is also after the 2k-mark. The zero-page still has some unused
> space between offsets 0x230 and 0x28f. Shall I put/move some code there
> to check unconditionally if the type_of_loader has been set?
> 
> I'll do that if no objections are put forward.
> 
The test can be done long before the zeropage is needed.  It should 
pretty much be done right away.
What I'm saying is that instead of pushing the initialization code 
downwards, the E820 & EDD space could overlay the code.  It would have 
been better, of course, if it was in a completely different chunk of the 
address space, but that's probably a much bigger change.
	-hpa
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/