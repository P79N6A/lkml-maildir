Date: Sun, 6 Feb 2000 18:49:28 +0100 (CET)
From: Premek Marek <>
Subject: Re: ip alias (2.3.42)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/2/6/29

> This works properly but:
> 
> #ifconfig eth0:0 down (as in the alias.txt)
> 
> Now all my eth0* devices are down (no eth0* devices with ifconfig).
> Any 'ifconfig eth0* up' will bing back eth0 and aliasses at once, but
> it seems not possible to remove the aliasses ?
> 
> 
Hi,
I tried it:
[root@notes /root]# ifconfig eth0 192.168.1.1 up
[root@notes /root]# ifconfig eth0:0 192.168.1.100 up
[root@notes /root]# ifconfig eth0:1 192.168.1.101 up
[root@notes /root]# ifconfig
eth0      Link encap:Ethernet  HWaddr 00:E0:98:20:09:31
          inet addr:192.168.1.1  Bcast:192.168.1.255  Mask:255.255.255.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:1127 errors:0 dropped:0 overruns:0 frame:0
          TX packets:1218 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:100
          Interrupt:3 Base address:0x300
eth0:0    Link encap:Ethernet  HWaddr 00:E0:98:20:09:31
          inet addr:192.168.1.100  Bcast:192.168.1.255  Mask:255.255.255.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          Interrupt:3 Base address:0x300
eth0:1    Link encap:Ethernet  HWaddr 00:E0:98:20:09:31
          inet addr:192.168.1.101  Bcast:192.168.1.255  Mask:255.255.255.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          Interrupt:3 Base address:0x300
And then: 
[root@notes /root]# ifconfig eth0:0 down
[root@notes /root]# ifconfig
eth0      Link encap:Ethernet  HWaddr 00:E0:98:20:09:31
          inet addr:192.168.1.1  Bcast:192.168.1.255  Mask:255.255.255.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:1127 errors:0 dropped:0 overruns:0 frame:0
          TX packets:1218 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:100
          Interrupt:3 Base address:0x300
eth0:1    Link encap:Ethernet  HWaddr 00:E0:98:20:09:31
          inet addr:192.168.1.101  Bcast:192.168.1.255  Mask:255.255.255.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          Interrupt:3 Base address:0x300
My system:
[root@notes /root]# uname -a
Linux notes.premek.cz 2.2.5-15 #1 Mon Apr 19 23:00:46 EDT 1999 i686
unknown
It is the kernel installed by Redhat 6.0 I'm currently not near any
computer with 2.3.x kernel, but it seems that something was changed
... and it was not a good change :)
> 
> 
> I'd made no manual routes for host/netwerk, because the kernel sets them
> now automagic, and i would suspect eth0:* in my routing table, but's not:
> # route -n| grep eth0
> 194.151.176.0   0.0.0.0         255.255.255.0   U     0      0        0 eth0
> 192.168.0.0     0.0.0.0         255.255.255.0   U     0      0        0 eth0
> 192.31.140.0    0.0.0.0         255.255.255.0   U     0      0        0 eth0
> 
> /proc/net/routes doesn't show any eth0:* either.
> 
I think this is normal behaviour, I'd be surprised to see eth0:* in
routing table, because physically, all packets are transmitted via ONE
card ... so why any aliases there ?
> 
> 
> Trying a manual 'route add -host 192.168.2.2 dev eth0:0' works, but also
> no eth0:0 entry in 'route -n' or /proc/net/route
> 
> PS: routing _seems_ to work properly, only i can't see/set it.
> 
That's what I mentioned above ... why to add aliases, when it is routed
only on one interface ?
Greeting
            Premek Marek
premek@hosting.cz
Hosting CZ s.r.o.     Tel: 0602/386703
http://www.hosting.cz
    ICQ: 13557140
Operator: pager@hermes.hosting.cz
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/