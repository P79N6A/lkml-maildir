Date: Tue, 14 Sep 1999 17:16:02 -0500
From: Matthew Bader <>
Subject: kernel Oopsen in 2.2.12 SMP
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/9/14/184

I am running an Abit BP6 w/dual Celeron 400's and have experienced numerous
hard lockups - no response from anything including magic-sysrq. Don't know if it
matters but I also have one of those PCI NE2000 clones that I have read only
bad things about. I applied the the kernel debugging patch and enabled
semaphore deadlock detection, software lock detection, memory leak
detection, and SMP-IOAPIC SMI watchdog. I got the following oops today:
Sep 14 12:56:52 arrakis kernel: Deadlock threshold exceeded, forcing Oops.
Sep 14 12:56:52 arrakis kernel: Unable to handle kernel NULL pointer dereference at virtual address 00000000
Sep 14 12:56:52 arrakis kernel: current->tss.cr3 = 03610000, %cr3 = 03610000
Sep 14 12:56:52 arrakis kernel: *pde = 00000000
Sep 14 12:56:52 arrakis kernel: Oops: 0002
Sep 14 12:56:52 arrakis kernel: CPU:    0
Sep 14 12:56:52 arrakis kernel: EIP:    0010:[mcount+164/180]
Sep 14 12:56:52 arrakis kernel: EFLAGS: 00010206
Sep 14 12:56:52 arrakis kernel: eax: 00000001   ebx: c360e000   ecx: 00000001   edx: 00002000
Sep 14 12:56:52 arrakis kernel: esi: 00000001   edi: 00000001   ebp: c360fe94   esp: c360fe94
Sep 14 12:56:52 arrakis kernel: ds: 0018   es: 0018   ss: 0018
Sep 14 12:56:52 arrakis kernel: Process wmmon (pid: 233, process nr: 34, stackpage=c360f000)
Sep 14 12:56:52 arrakis kernel: Stack: c360fec8 c01aee03 00000004 00000001 00000001 000000e0 000000e0 0000037c 
Sep 14 12:56:52 arrakis kernel:        000000df c01bbfa7 6c1bbf93 00000000 0000000a c360fedc c01af10a c4751034 
Sep 14 12:56:52 arrakis kernel:        c01bbf95 c360feec c360ff28 c014fe36 c4751034 c01bbf95 00000001 00001a74 
Sep 14 12:56:52 arrakis kernel: Call Trace: [vsprintf+19/764] [cprt+9575/19109] [sprintf+30/3964] [cprt+9557/19109] [get_kstat+314/696] [cprt+9557/19109] [get_root_array+146/256] 
Sep 14 12:56:52 arrakis kernel:        [array_read+263/524] [sys_read+208/248] [system_call+61/68] [startup_32+43/164] 
Sep 14 12:56:52 arrakis kernel: Code: c6 05 00 00 00 00 00 8b 5d fc 89 ec 5d c3 89 f6 55 89 e5 53 
Sep 14 13:04:14 arrakis kernel: Deadlock threshold exceeded, forcing Oops.
Sep 14 13:04:14 arrakis kernel: Unable to handle kernel NULL pointer dereference at virtual address 00000000
Sep 14 13:04:14 arrakis kernel: current->tss.cr3 = 035eb000, %cr3 = 035eb000
Sep 14 13:04:14 arrakis kernel: *pde = 00000000
Sep 14 13:04:14 arrakis kernel: Oops: 0002
Sep 14 13:04:14 arrakis kernel: CPU:    0
Sep 14 13:04:14 arrakis kernel: EIP:    0010:[mcount+164/180]
Sep 14 13:04:14 arrakis kernel: EFLAGS: 00010206
Sep 14 13:04:14 arrakis kernel: eax: 00000001   ebx: c35ec000   ecx: 00000001   edx: 00002000
Sep 14 13:04:14 arrakis kernel: esi: c0202098   edi: c2ed5988   ebp: c35ede3c   esp: c35ede3c
Sep 14 13:04:14 arrakis kernel: ds: 0018   es: 0018   ss: 0018
Sep 14 13:04:14 arrakis kernel: Process wmifs (pid: 235, process nr: 36, stackpage=c35ed000)
Sep 14 13:04:14 arrakis kernel: Stack: c35ede50 c01192dc c2ed5980 c0202098 c2ed5988 c35ede74 c013e8da c2ed59ec 
Sep 14 13:04:14 arrakis kernel:        00000003 c2ed5980 c2ed5980 00000000 c0202098 00001000 c35ede94 c013eab3 
Sep 14 13:04:14 arrakis kernel:        c719c600 00001000 c0202098 c71c5040 c71c5040 c719c600 c35edeb0 c014d920 
Sep 14 13:04:14 arrakis kernel: Call Trace: [__wake_up+16/116] [get_new_inode+186/304] [iget+123/136] [proc_get_inode+72/272] [proc_lookup+149/204] [proc_root_lookup+101/332] [real_lookup+97/144] 
Sep 14 13:04:14 arrakis kernel:        [lookup_dentry+303/480] [open_namei+110/784] [filp_open+80/260] [sys_open+92/188] [system_call+61/68] 
Sep 14 13:04:14 arrakis kernel: Code: c6 05 00 00 00 00 00 8b 5d fc 89 ec 5d c3 89 f6 55 89 e5 53 
Sep 14 13:04:35 arrakis kernel: Unable to handle kernel NULL pointer dereference at virtual address 00000000
Sep 14 13:04:35 arrakis kernel: current->tss.cr3 = 03553000, %cr3 = 03553000
Sep 14 13:04:35 arrakis kernel: *pde = 00000000
Sep 14 13:04:35 arrakis kernel: Oops: 0002
Sep 14 13:04:35 arrakis kernel: CPU:    1
Sep 14 13:04:35 arrakis kernel: EIP:    0010:[__down+190/364]
Sep 14 13:04:35 arrakis kernel: EFLAGS: 00013246
Sep 14 13:04:35 arrakis kernel: eax: 00002694   ebx: c6ecb58c   ecx: c71c0000   edx: 00000004
Sep 14 13:04:35 arrakis kernel: esi: c3554000   edi: c3555ed8   ebp: c3555ef4   esp: c3555ec8
Sep 14 13:04:35 arrakis kernel: ds: 0018   es: 0018   ss: 0018
Sep 14 13:04:35 arrakis kernel: Process wmavgload (pid: 238, process nr: 39, stackpage=c3555000)
Sep 14 13:04:35 arrakis kernel: Stack: c6ecb540 c3554000 c3555ed8 c3555ee0 c3554000 c35c5ed8 00000000 c01e8da4 
Sep 14 13:04:35 arrakis kernel:        000cce15 c6ecb58c c0119380 c3555f1c c01ae514 c6ecb58c 00100000 00000001 
Sep 14 13:04:35 arrakis kernel:        c01b1538 c3555f40 00000000 c419300d c6ecb58c c3555f4c c0138447 c7035a40 
Sep 14 13:04:35 arrakis kernel: Call Trace: [generate_oops+0/40] [__down_failed+8/12] [stext_lock+5328/19576] [lookup_dentry+303/480] [open_namei+110/784] [filp_open+80/260] [sys_open+92/188] 
Sep 14 13:04:35 arrakis kernel:        [system_call+61/68] 
Sep 14 13:04:35 arrakis kernel: Code: c7 05 00 00 00 00 00 00 00 00 8b 75 d8 c7 06 02 00 00 00 31 
Sep 14 13:04:35 arrakis kernel: Unable to handle kernel NULL pointer dereference at virtual address 00000000
Sep 14 13:04:35 arrakis kernel: current->tss.cr3 = 035c3000, %cr3 = 035c3000
Sep 14 13:04:35 arrakis kernel: *pde = 00000000
Sep 14 13:04:35 arrakis kernel: Oops: 0002
Sep 14 13:04:35 arrakis kernel: CPU:    1
Sep 14 13:04:35 arrakis kernel: EIP:    0010:[__down+190/364]
Sep 14 13:04:35 arrakis kernel: EFLAGS: 00013246
Sep 14 13:04:35 arrakis kernel: eax: 00002694   ebx: c6ecb58c   ecx: c3554000   edx: c35d70c0
Sep 14 13:04:35 arrakis kernel: esi: c35c4000   edi: c35c5ed8   ebp: c35c5ef4   esp: c35c5ec8
Sep 14 13:04:35 arrakis kernel: ds: 0018   es: 0018   ss: 0018
Sep 14 13:04:35 arrakis kernel: Process wmSMPmon (pid: 237, process nr: 38, stackpage=c35c5000)
Sep 14 13:04:35 arrakis kernel: Stack: c6ecb540 c35c4000 c35c5ed8 c35c5ee0 c35c4000 c6ecb590 00000000 00000000 
Sep 14 13:04:35 arrakis kernel:        000ccdbb c6ecb58c c0119380 c35c5f1c c01ae514 c6ecb58c 00000000 00000001 
Sep 14 13:04:35 arrakis kernel:        c01b1538 c35c5f40 00000000 c2f1a00d c6ecb58c c35c5f4c c0138447 c7035a40 
Sep 14 13:04:35 arrakis kernel: Call Trace: [generate_oops+0/40] [__down_failed+8/12] [stext_lock+5328/19576] [lookup_dentry+303/480] [open_namei+110/784] [filp_open+80/260] [sys_open+92/188] 
Sep 14 13:04:35 arrakis kernel:        [system_call+61/68] [startup_32+43/164] 
Sep 14 13:04:35 arrakis kernel: Code: c7 05 00 00 00 00 00 00 00 00 8b 75 d8 c7 06 02 00 00 00 31 
And while typing this message I got another one:
Sep 14 16:56:23 arrakis kernel: Deadlock threshold exceeded, forcing Oops.
Sep 14 16:56:23 arrakis kernel: Unable to handle kernel NULL pointer dereference at virtual address 00000000
Sep 14 16:56:23 arrakis kernel: current->tss.cr3 = 045b8000, %cr3 = 045b8000
Sep 14 16:56:23 arrakis kernel: *pde = 00000000
Sep 14 16:56:23 arrakis kernel: Oops: 0002
Sep 14 16:56:23 arrakis kernel: CPU:    0
Sep 14 16:56:23 arrakis kernel: EIP:    0010:[mcount+164/180]
Sep 14 16:56:23 arrakis kernel: EFLAGS: 00013206
Sep 14 16:56:23 arrakis kernel: eax: 00000001   ebx: c43c4000   ecx: 0000003b   edx: 00002100
Sep 14 16:56:23 arrakis kernel: esi: 00000100   edi: 00000008   ebp: c43c5ed8   esp: c43c5ed8
Sep 14 16:56:23 arrakis kernel: ds: 0018   es: 0018   ss: 0018
Sep 14 16:56:23 arrakis kernel: Process X (pid: 222, process nr: 27, stackpage=c43c5000)
Sep 14 16:56:23 arrakis kernel: Stack: c43c5eec c013aae0 c3a6e340 00000100 00000008 c43c5f04 c0180021 c3c1c2c0 
Sep 14 16:56:23 arrakis kernel:        c39b8a48 c5190000 c3c1c2c0 c43c5f1c c0156932 c3c1c2c0 c39b8a2c c5190000 
Sep 14 16:56:23 arrakis kernel:        00000000 c43c5f54 c013adbb c3c1c2c0 c5190000 c49f6f90 0000009f c49f6fa0 
Sep 14 16:56:23 arrakis kernel: Call Trace: [__pollwait+16/216] [unix_poll+45/144] [sock_poll+42/52] [do_select+335/564] [sys_select+911/1216] [system_call+61/68] 
Sep 14 16:56:23 arrakis kernel: Code: c6 05 00 00 00 00 00 8b 5d fc 89 ec 5d c3 89 f6 55 89 e5 53 
Happens most frequently under heavy load, the second one I was running two
setiathome clients and playing a mp3. However, this one actually responded to
the magic-sysrq.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/