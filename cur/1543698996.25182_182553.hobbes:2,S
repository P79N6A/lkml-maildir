Date: Mon, 8 Dec 2003 05:58:59 -0600
From: Ryan Underwood <>
Subject: Re: APIC support on Slot-A Athlon, K6
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/12/8/38

> >Unfortunately, this disables the APIC support (if it existed) on a
> >Slot-A Athlon 600 MS-6167 (family 6, model 1, AMD-751/756), and a K6/3 400
> >Tyan S1598 (family 5, model 9, MVP3/686A).
> >
> >What is the purpose of this check? Why is the APIC availability dependent
> >on the CPU, rather than just the southbridge?
> 
> This code checks for the ability to enable the local APIC,
> which is integrated into the processor. The local APIC is
> not implemented in K6 or K7 model 1, so the check is correct.
Thanks, that just cleared up a huge misconception (I had the APIC and I/O-APIC
confused, apparently).
This page cleared a lot up (must remember to STFW occasionally):
http://www.microsoft.com/whdc/hwdev/platform/proc/IO-APIC.mspx
> Furthermore, I/O-APIC usage requires (in hardware) that the
> processor has a local APIC.
What can the APIC support alone accomplish, without an I/O-APIC?
Just NMI watchdog and related things? (looking at CONFIG_APIC help)
Looks like I/O-APIC is the real desired feature, but a functioning local
APIC, though not very useful by itself, is a prerequisite for it.
> > Also, there are only
> >checks for Intel and AMD CPUs. Is it not possible to use an APIC in
> >conjunction with a Cyrix, et.al. ?
> 
> The other manufacturers haven't yet implemented local APIC
> functionality in their processors.
Ok, much more clear.
> >The APIC is also not enabled on this machine, but it is a 586B southbridge,=
> > which
> >I am not sure contains an APIC.
> 
> What processor? As I wrote above, I/O-APIC can't be used unless
> the processor has a local APIC.
Cyrix. :D  Obviously, it won't work simply because of that.  I
am curious if the VIA 586B has a IO-APIC though (the 686A/B do) so
that it would work if I put a different processor in it.
VIA no longer put their datasheets on the web anymore...
> Some BIOSen have an option for enabling/disabling I/O-APIC mode.
> Some BIOSen skip the "legacy" MP tables and only announce the
> I/O-APIC config data via ACPI, so working ACPI may be required.
Also useful info.  Thanks!
-- 
Ryan Underwood, <nemesis@icequake.net>
[unhandled content-type:application/pgp-signature]