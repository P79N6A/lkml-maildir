Date: Mon, 7 May 2007 17:18:00 +0200
From: Jesper Juhl <>
Subject: [PATCH] improve scripts/gcc-version.sh output a bit when called without args
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/5/7/130

Currently, if you call scripts/gcc-version.sh without arguments it will 
generate this output : 
$ sh scripts/gcc-version.sh
scripts/gcc-version.sh: line 17: -E: command not found
scripts/gcc-version.sh: line 18: -E: command not found
0000
Not too pretty. I believe this is an improvement : 
$ sh scripts/gcc-version.sh
Error: No compiler specified.
Usage:
        scripts/gcc-version.sh <gcc-command>
as implemented by the patch below.
Not really important, just something I noticed, cleaned up and generated a 
patch for.
If you like it you can have it. If you hate it just ignore it :)
Signed-off-by: Jesper Juhl <jesper.juhl@gmail.com>
--- 
 scripts/gcc-version.sh |    6 ++++++
 1 files changed, 6 insertions(+), 0 deletions(-)
diff --git a/scripts/gcc-version.sh b/scripts/gcc-version.sh
index bb4fbea..59a03a4 100644
--- a/scripts/gcc-version.sh
+++ b/scripts/gcc-version.sh
@@ -8,6 +8,12 @@
 
 compiler="$*"
 
+if [ ${#compiler} -eq 0 ]; then
+	echo "Error: No compiler specified."
+	echo -e "Usage:\n\t$0 <gcc-command>"
+	exit 1
+fi
+
 MAJOR=$(echo __GNUC__ | $compiler -E -xc - | tail -n 1)
 MINOR=$(echo __GNUC_MINOR__ | $compiler -E -xc - | tail -n 1)
 printf "%02d%02d\\n" $MAJOR $MINOR
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/