Date: Fri, 1 Jan 1999 22:40:38 +0100 (MET)
From: Gerd Knorr <>
Subject: Re: short display with 2.1.132-ac3, matroxfb and XF86_SVGA 3.3.3
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/1/1/184

On Fri, 1 Jan 1999, Linus Torvalds wrote:
> On Fri, 1 Jan 1999, Gerd Knorr wrote:
> > 
> > In theory it should work fine.  In practice some X-Servers have problems
> > to restore the video mode correctly.  Maybe due to some hardware problem
> > (some video boards you can't ask about the current state), maybe becauce
> > they don't expect the console being in graphics mode.  You'll end up with
> > a broken console then.  This problem is'nt new...
> 
> I know - we used to have problems even with restoring to normal text-mode
> if it was set to anything except for 80x25.
> 
> But I really think that it should be easy to tell X not to switch modes,
> and just tell it hat mode it is in.
Already done.  The Server is XF86_FBDev, and it is part of XFree86 3.3.3
(althrouth it is'nt compiled by default and therefore not included in
binary releases, probably becauce you need 2.1.x kernel headers to
compile it).
The main problem is that the FBDev Server has no acceleration, i.e. it is
slow.  I have no clue how the acceleration code is organized in the
Xfree86 source tree (neither 3.3 nor 4.0).  It might be easy to add
acceleration to FBDev if the card detection/initialisation/modeswitching
is separated from the acceleration engine (for those cards which are
supported by the SVGA server).  The X-Server would ask the framebuffer
driver for video mode+framebuffer address+mmio region (for acceleration)
instead of checking /proc/pci and doing the mode switching itself.
> Dirk, who in the XFree86 team should people talk to about something like
> this? The current situation where the kernel frame buffer and a regular X
> server don't always work together is just silly. 
Maybe I should start lurking on the xfree mailing list...
> > I never had problems to mix the accelerated XFree86 Server with fbcon
> > (matrox mystique, both vesafb and matroxfb work fine).  The FBDev Server
> > works too, of cource.
> 
> Good. However, some interaction does seem to exist, as I've gotten reports
> of the Matrox X server being extremely slow to paint the screen with the
> new framebuffer code as of 2.1.132. That must be something else than just
> modeswitching. 
FBDev or SVGA Server?
  Gerd
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/