Date: Wed, 23 Mar 2005 00:56:11 +0000 (GMT)
From: Hugh Dickins <>
Subject: RE: [PATCH 1/5] freepgt: free_pgtables use vma list
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/3/22/348

On Tue, 22 Mar 2005, Luck, Tony wrote:
> 
> But I'm still confused by all the math on addr/end at each
> level.
You think the rest of us are not ;-?
> Rounding up/down at each level should presumably be
> based on the size of objects at the next level.  So the pgd
> code should round using PUD_MASK, pud should use PMD_MASK etc.
> Perhaps I missed some updates, but the version of the patch
> that I have (and the simulator) is using PMD_MASK in the
> pgd_free_range() function ... which is surely wrong.
It's confusing but not wrong (in principle).  It's trying to decide
immediately on entry whether it will be worth going down to the lower
levels: if even the lowest level will have no work to do, no point in
proceeding.
Hugh
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/