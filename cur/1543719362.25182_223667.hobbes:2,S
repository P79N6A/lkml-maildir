Date: Fri, 28 May 2004 23:43:05 +0100
From: Eamonn Hamilton <>
Subject: XP to linux over SK98 gigabit, 150KB/sec ?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/5/28/242

Hi Folks,
I'm looking at a very weird problem here, and I was hoping somebody had
seen this before.
A friend has a network, two XP systems and two linux boxes on a gigabit
switch all with Marvell Yukon-based cards in. XP->XP, he gets ~20MB/sec
,linux to linux is the same kind of rate using the sk98lin driver under
2.6.6. Jumbo frames are out as the switch doesn't support them.
Bizarrely, however, he gets 20MB/sec reads from linux to XP, but
150KB/sec writes using either ftp or samba, unless he streams from the
linux box using anything else on the network, in which case the
bandwidth goes up, but not  to the consistent 20MB/sec. This almost
working state of affairs was arrived at after disabling PMTU discovery
on the XP systems, but all the systems use the same MTU which is 1500
bytes.
I've upped the rmem_max and wmem_max to 256kb each, but this doesn't
seem to have helped. 
Has anybody seen this kind of behaviour, or got any ideas?
Cheers,
Eamonn
--
"He's an immortal small-town boxer with a passion for fast cars. She's
an artistic snooty vampire with an MBA from Harvard. They fight crime!"
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/