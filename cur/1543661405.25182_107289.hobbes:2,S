Date: Tue, 4 Feb 2003 09:46:34 +0000
From: Russell King <>
Subject: Re: PnP model
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/2/4/42

On Mon, Feb 03, 2003 at 08:43:25PM +0000, Adam Belay wrote:
> In many cases, Auto configuration can be better then manual configuration.
> 1.) The auto configuration engine in my patch is able to resolve almost any
> resource conflict and provides the greatest chance for all devices to have
> resources allocated.
There is a nice problem with ISA PNP serial ports generated by this
type of thing in 2.5.59.
On boot, we probe for the usual serial ports, and discover two at
0x3f8 and 0x2f8, and we request these resources.  Please note that
one port could be in use as a serial console from earlier in the
bootup.
Then, we move on to the PNP probes.  The PNP layer gives us two
serial ports, and we initialise them.  The PNP layer notices that
the resources for 0x3f8 and 0x2f8, and re-assigns the ports to
0x3e8 and 0x2e8.  The serial layer finds two extra ports at
0x3e8 and 0x2e8.
However, the ports at 0x3f8 and 0x2f8 are now gone, along with the
serial console, and the boot messages claim that we have four serial
ports at ttyS0, ttyS1, ttyS2, and ttyS3, when the machine in fact
only has two serial ports.  The serial layer likewise believes we
have four serial ports.
I look forward to your thoughts on getting around this problem.
-- 
Russell King (rmk@arm.linux.org.uk)                The developer of ARM Linux
             
http://www.arm.linux.org.uk/personal/aboutme.html
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/