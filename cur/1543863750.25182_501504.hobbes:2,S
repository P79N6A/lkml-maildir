Date: Wed, 24 Jan 2007 19:25:11 -0800
From: "Ed Lin" <>
Subject: RE: [patch] scsi: use lock per host instead of per device forshared queue tag host
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/1/24/309

> -----Original Message-----
> From: James Bottomley [mailto:James.Bottomley@SteelEye.com] 
> Sent: Wednesday, January 24, 2007 9:00 AM
> To: Ed Lin
> Cc: linux-scsi; linux-kernel; jeff; Promise_Linux
> Subject: Re: [patch] scsi: use lock per host instead of per 
> device forshared queue tag host
> 
...
> 
> This patch looks OK in principle.
> 
> However, are you sure you're not using a sledgehammer to crack a nut?
> If the only reason you're doing this is because of the shared tag map,
> then probably that should be the area you protect with a per-tag-map
> lock.   The net effect of what you've done will be to serialise all
> accesses to your storage devices.  For a small number of devices, this
> probably won't matter than much, but for large numbers of devices,
> you're probably going to introduce artificial performance 
> degredation in
> the I/O scheduler.
> 
> James
> 
Thanks.
Maybe this issue needs more discussion. I'll follow up.
Ed Lin
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/