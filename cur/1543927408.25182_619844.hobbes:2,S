Date: Tue, 20 Nov 2007 11:54:58 +0100
From: Pavel Machek <>
Subject: Re: nohz and strange sleep latencies
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/11/20/340

Hi!
> 
> > > > 0.00user 0.00system 0.08 (0m0.081s) elapsed 3.71%CPU
> > > > 0.00user 0.00system 0.01 (0m0.013s) elapsed 23.33%CPU
> > > > 0.00user 0.00system 0.01 (0m0.019s) elapsed 15.92%CPU
> > > > 
> > > > nohz=off helps a lot. while true; do time sleep 0.0; done does not 
> > > > have unexpected latencies.
> > > 
> > > does hpet=disable on the boot line also help? (without nohz=off)
> > 
> > hpet-disable helps.. a bit. 200msec latencies are gone. (What is used 
> > for wakeups in this case?)
> > 
> > pavel@amd:~$ while true; do time sleep 0.01; done
> > 0.00user 0.00system 0.01 (0m0.013s) elapsed 22.96%CPU
> > 0.00user 0.00system 0.01 (0m0.018s) elapsed 11.05%CPU
> > 0.00user 0.00system 0.01 (0m0.013s) elapsed 15.54%CPU
> 
> could you run this while doing the sleep test:
> 
> 
http://people.redhat.com/mingo/cfs-scheduler/tools/cfs-debug-info.sh
> 
> and send us the output? (Enabling CONFIG_TIMER_STATS, CONFIG_SCHED_DEBUG 
> and CONFIG_SCHEDSTATS would maximize the amount of information.)
This was w/o hpet=disable . Do you want me to test with hpet=disable?
									Pavel
-- 
(english) 
http://www.livejournal.com/~pavelmachek
(cesky, pictures) 
http://atrey.karlin.mff.cuni.cz/~pavel/picture/horses/blog.html
[unhandled content-type:application/octet-stream]