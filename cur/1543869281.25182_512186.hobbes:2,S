Date: Thu, 22 Feb 2007 20:01:13 -0500
From: Veronique & Vincent <>
Subject: Fwd: Tr: Boot time Bluetooth BUG: warning: (value > m) at hid-core.c:793
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/2/22/395

Hi Jiri,
Here is the code I've changed into the hid-core.c into my 2.6.19.3 kernel:
#include <linux/input.h>
#include <linux/wait.h>
/*
#undef DEBUG
#undef DEBUG_DATA
*/
#define DEBUG
#define DEBUG_DATA
#include <linux/usb.h>
I've attached a few dmesg... They where all taken during the same boot.. I 
just tought I'd overpass the maximum buffer output...
I have booted the PC with the USB dongle already plugged in... The PC booted 
and showed a BUG when bluetooth service fired up... Once the login prompt 
appeared (with a lot of debug msgs) both the bluetooth mouse and keyboard 
refused to work.. (has usual... so this time I had also plugged in a PS2 
keyboard and mouse)  So I disconnected the dongle and the debug msgs stopped 
right away... Then I replugged in the dongle and played a bit (really just a 
bit) with the keyboard and mouse (they did worked)... Then I disconected 
again the dongle to see something else then only debug msgs...
There are a few input/hid-core.c: report descriptor  messages:
dmesg1:drivers/usb/input/hid-core.c: HID probe called for ifnum 0
dmesg1:drivers/usb/input/hid-core.c: report descriptor (size 59, read 59) =  
05 01 09 06 a1 01 05 07 19 e0 29 e7 15 00 25 01 75 01 95 08 81 02 81 03 95 05 
05 08
19 01 29 05 91 02 95 01 75 03 91 01 95 06 75 08 15 00 26 a4 00 05 07 19 00 2a 
a4 00 81 00 c0
dmesg1:drivers/usb/input/hid-core.c: HID probe called for ifnum 0
dmesg1:drivers/usb/input/hid-core.c: report descriptor (size 226, read 226) =  
05 01 09 02 a1 01 85 02 09 01 a1 00 05 09 19 01 29 08 15 00 25 01 95 08 75 01 
81 0
2 05 01 16 01 f8 26 ff 07 75 0c 95 02 09 30 09 31 81 06 15 81 25 7f 75 08 95 
01 09 38 81 06 05 0c 0a 38 02 15 f9 25 07 75 04 95 01 81 06 05 09 19 09 29 0c 
15 00
25 01 75 01 95 04 81 02 c0 c0 05 0c 09 01 a1 01 85 03 75 10 95 02 15 01 26 8c 
02 19 01 2a 8c 02 81 60 c0 05 01 09 80 a1 01 85 04 75 02 95 01 15 01 25 03 09 
82 09
 81 09 83 81 60 75 06 81 03 c0 06 00 ff 09 01 a1 01 85 10 75 08 95 06 15 00 26 
ff 00 09 01 81 00 09 01 91 00 c0 06 00 ff 09 02 a1 01 85 11 75 08 95 13 15 00 
26 f
f 00 09 02 81 00 09 02 91 00 c0 06 00 ff 09 03 a1 01 85 12 75 08 95 2d 15 00 
26 ff 00 09 03 81 00 09 03 91 00 c0
dmesg1:drivers/usb/input/hid-core.c: report (size 8) (unnumbered)
dmesg1:drivers/usb/input/hid-core.c: report 0 (size 8) =  00 00 00 00 00 00 00 
00
dmesg1:drivers/usb/input/hid-core.c: report (size 8) (unnumbered)
dmesg1:drivers/usb/input/hid-core.c: report 0 (size 8) =  00 00 00 00 00 00 00 
00
dmesg1:drivers/usb/input/hid-core.c: report (size 8) (unnumbered)
dmesg1:drivers/usb/input/hid-core.c: report 0 (size 8) =  00 00 00 00 00 00 00 
00
dmesg1:drivers/usb/input/hid-core.c: report (size 8) (unnumbered)
dmesg1:drivers/usb/input/hid-core.c: report 0 (size 8) =  00 00 00 00 00 00 00 
00
dmesg1:drivers/usb/input/hid-core.c: report (size 8) (unnumbered)
I extracted them using a simple grep from all the dmesg output I have.
Hope this helps...
- vin
----------  Message transmis  ----------
Sujet : Tr: Boot time Bluetooth BUG: warning: (value > m) at hid-core.c:793
Date : jeudi 22 février 2007
De : "Fortier,Vincent [Montreal]" <Vincent.Fortier1@ec.gc.ca>
À : vinctre@videotron.ca
Vincent Fortier
Informatique
514-919-2014
(via BlackBerry)
----- Original Message -----
From: Jiri Kosina <jikos@jikos.cz>
To: Veronique & Vincent <vinctre@videotron.ca>
Cc: Pete Zaitcev <zaitcev@redhat.com>; marcel@holtmann.org 
<marcel@holtmann.org>; Fortier,Vincent [Montreal]; 
linux-kernel@vger.kernel.org <linux-kernel@vger.kernel.org>
Sent: Thu Feb 22 05:46:34 2007
Subject: Re: Boot time Bluetooth BUG: warning: (value > m) at hid-core.c:793
On Thu, 22 Feb 2007, Veronique & Vincent wrote:
> > > - report descriptor dump - seems to be missing in the output (it 
> > >   should read something like "hid-core.c: report descriptor (size 
> > >   XY, read YZ) = ... some hexadecimal numbers". This should be 
> > >   output by the time the HID device is connected.
> The full dmesg with define DEBUG was included in the original message.  
Unless 
> something else was needed?
Unfortunately it was missing the report descriptor dump. The output should 
look like
drivers/usb/input/hid-core.c: report descriptor (size 59, read 59) = 05 01 
09 06 a1 01 05 07 19 e0 29 e7 15 00 25 01 75 01 95 08 81 02 81 03 95 05 05 
08 19 01 29 05 91 02 95 01 75 03 91 01 95 06 75 08 15 00 26 a4 00 05 07 19 
00 2a a4 00 81 00 c0
and it should appear as soon as you connect the device. If it didn't, I 
suspect that the 
	#define DEBUG_DATA
was not set properly in drivers/usb/input/hid-core.c (only defining DEBUG 
is not enough for report descriptor dump to appear).
> I was actually getting that on a stock FC6 kernel.  The dmesg output 
> comes from a recompiled vanilla 2.6.19.x with the exact same 
> configuration BUT the modified define's in hid-core.c and a local 
> version appended to the .config file.  So this BUG does not only affect 
> FC6 users but also the vanilla kernel.
But so far all reports that have gathered for this bug at me seem to come 
from FC6 ... does hid2hci by any chance in FC6 have any additional patches 
that could be causing it, instead of being a kernel issue?
Thanks,
-- 
Jiri Kosina
-------------------------------------------------------
[unhandled content-type:application/x-tgz][unhandled content-type:application/x-zip]