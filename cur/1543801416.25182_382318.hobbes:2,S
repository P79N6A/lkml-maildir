Date: Fri, 6 Jan 2006 00:07:10 +0100 (CET)
From: Etienne Lorrain <>
Subject: [PATCH 2/3] boot with Gujin: core ia32 realmode files
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/1/5/488

 That is the core addition to generate /boot/linux-*.kgz file format
for the Gujin bootloader. It contains the realmode.c file and its
include realmode.h - that is a complete rewrite of all the ia16/ia32
assembler code executed at startup, so that directory arch/i386/boot
could be removed completely (then LILO, GRUB and SYSLINUX would no
more work).
 The mapping of the 4 Kbytes parameter page generated by the main
function linux_set_params() is identical to the one generated by
the assembler code in i386/boot/ directory, it is checked by the
inline function test_linux_param_struct() in realmode.h.
 The function linux_set_params() will be called by the Gujin
bootloader _before_ switching to protected mode for any kind
of real work, so that the information extracted is a lot
more reliable than some other bootloaders.
 The linker file arch/i386/kernel/vmlinux.lds.S is also modified
so that only one link is produced (no special real-mode link as
in the vmlinuz file format), the real mode part is linked starting
at address zero and protection is added so that no cross references
can appear in between the real mode link and the protected mode
kernel. The binary code of linux_set_params() is located at the end
of the kernel linux*.kgz file.
 This kernel does not have a lot of knowledge of the Gujin exposed
interface, so that it cannot guess where the kernel file loaded
in memory was located (which disk, which partition, in the root
filesystem or in a /boot directory) and so you have to provide
yourself the "root=" parameter by one of the interface of Gujin
or by the GZIP comment field. See "make help" for details.
Signed-off-by: etienne_lorrain@yahoo.fr
___________________________________________________________________________ 
Nouveau : téléphonez moins cher avec Yahoo! Messenger ! Découvez les tarifs exceptionnels pour appeler la France et l'international.
Téléchargez sur 
http://fr.messenger.yahoo.com
[unhandled content-type:application/octet-stream]