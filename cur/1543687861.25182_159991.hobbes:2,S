Date: Mon, 25 Aug 2003 05:05:14 +0100
From: Jamie Lokier <>
Subject: Re: [PATCH] Pentium Pro - sysenter - doublefault
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/8/25/1

Jim Houston wrote:
> On my cpu model=1 and mask=9, it doesn't clear 86_FEATURE_SEP.
> This results in a double-fault when init starts.  The double-fault
> happens on the sysexit.  The new double-fault handler caught this
> nicely, and I was able to debug this with kgdb.
Does anyone know what the syenter & sysexit instructions do on these
early PPro CPUs?
The Intel documentation is vague, saying only to avoid using them.
I'd like to know what happens if userspace does "sysenter" on one of
these systems.  Does it issue Invalid Opcode, General Protection
fault, or something else?
Jim you can answer this as you have such a Ppro.  Could you please run
this very simple userspace program for me, and report the result?
	int main() { __asm__ ("sysenter"); return 0; }
I expect it to die with SIGILL on Pentium and earlier chips, and
SIGSEGV on "good" PPro and later chips running kernels which don't
enable the sysenter instruction.
But what does it do on your early Intel PPro, the one which is the
subject of this thread?
Thanks,
-- Jamie
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/