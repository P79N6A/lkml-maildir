Date: Thu, 13 Dec 2007 07:59:13 -0200
From: Mauro Carvalho Chehab <>
Subject: Re: [2.6 patch] videobuf-core.c locking fixes
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/12/13/150

> > e1f8b4a49d86746f699919531c17fd154787e308
> > diff --git a/drivers/media/video/videobuf-core.c b/drivers/media/video/videobuf-core.c
> > index 81f77d2..c8a5cb5 100644
> > --- a/drivers/media/video/videobuf-core.c
> > +++ b/drivers/media/video/videobuf-core.c
> > @@ -909,7 +909,7 @@ ssize_t videobuf_read_stream(struct videobuf_queue *q,
> >         if (q->streaming)
> >                 goto done;
> >         if (!q->reading) {
> > -               retval = videobuf_read_start(q);
> > +               retval = __videobuf_read_start(q);
> >                 if (retval < 0)
> >                         goto done;
> >         }
> > @@ -982,7 +982,7 @@ unsigned int videobuf_poll_stream(struct file *file,
> >                                          struct videobuf_buffer, stream);
> >         } else {
> >                 if (!q->reading)
> > -                       videobuf_read_start(q);
> > +                       __videobuf_read_start(q);
> >                 if (!q->reading) {
> >                         rc = POLLERR;
> >                 } else if (NULL == q->read_buf) {
> >
> 
> Yes it does! I was just going to send the same patch myself :)
The patch seems ok to my eyes. I dunno why I forgot to replace those two occurrences on my patch :(
Cheers,
Mauro