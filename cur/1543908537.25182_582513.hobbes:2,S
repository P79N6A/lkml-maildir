Date: Sat, 11 Aug 2007 12:12:53 -0700
From: Arjan van de Ven <>
Subject: Re: [PATCH] Smack: Simplified Mandatory Access Control Kernel
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/8/11/125

> +extern struct smk_list_entry *smack_list;
any reason to invent your own list rather than just using list.h?
> +
> +#include <linux/kernel.h>
> +#include <linux/vmalloc.h>
> +#include <linux/security.h>
> +#include <linux/mutex.h>
> +#include <net/netlabel.h>
> +#include "../../net/netlabel/netlabel_domainhash.h"
can't you move this header to include/ instead?
> +
> +static struct file_operations smk_load_ops = {
> +	.read		= smk_read_load,
> +	.write		= smk_write_load,
> +};
make that a const please
> +
> +	doip = kmalloc(sizeof(struct cipso_v4_doi), GFP_KERNEL);
> +	if (doip == NULL)
> +		panic("smack:  Failed to initialize cipso DOI.\n");
> +	doip->map.std = NULL;
> +
> +	ndmp = kmalloc(sizeof(struct netlbl_dom_map), GFP_KERNEL);
> +	if (ndmp == NULL)
> +		panic("smack:  Failed to initialize cipso ndmp.\n");
is panic() really the right thing here? It's usually considered quite
rude ;)
> +static struct file_operations smk_cipso_ops = {
> +	.read		= smk_read_cipso,
> +	.write		= smk_write_cipso,
> +};
another candidate for const
> +static void *smackfs_follow_link(struct dentry *dentry, struct nameidata *nd)
> +{
this one deserves a comment; are you implementing magic symlinks here?
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/