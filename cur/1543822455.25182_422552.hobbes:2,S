Date: Wed, 10 May 2006 06:46:25 -0600
From: (Eric W. Biederman)
Subject: Re: [PATCH 2/9] nsproxy: incorporate fs namespace
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/5/10/117

"Serge E. Hallyn" <serue@us.ibm.com> writes:
> @@ -1727,11 +1727,16 @@ static void __init init_mount_tree(void)
>  	namespace->root = mnt;
>  	mnt->mnt_namespace = namespace;
> 
> -	init_task.namespace = namespace;
> +	init_task.nsproxy->namespace = namespace;
>  	read_lock(&tasklist_lock);
>  	do_each_thread(g, p) {
> +		/* do we want namespace count to be #nsproxies,
> +		 * or # processes pointing to the namespace? */
I am fairly certain we want the count to be #nsproxies.
>  		get_namespace(namespace);
> -		p->namespace = namespace;
> +#if 0
> +		/* should only be 1 nsproxy so far */
> +		p->nsproxy->namespace = namespace;
> +#endif
>  	} while_each_thread(g, p);
>  	read_unlock(&tasklist_lock);
So I think this bit is wrong.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/