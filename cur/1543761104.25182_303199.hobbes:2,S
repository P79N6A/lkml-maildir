Date: Tue, 15 Mar 2005 21:15:03 +0100
From: Dominik Brodowski <>
Subject: Re: [RFC] Changes to the driver model class code.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/3/15/254

On Tue, Mar 15, 2005 at 11:34:15AM -0800, Greg KH wrote:
> > And what about device_driver and device structure? Are they going to
> > be changed over to be separately allocated linked objects?
> 
> The driver stuff probably will be, and the device stuff possibly.
> However, they are used by a very small ammount of core code (the bus
> drivers), so changing that interface is not that important at this time.
So this means every device will have yet another reference count, and you
need to be aware of _each_ lifetime to write correct code. And the 
_reference counting_ is the hard thing to get right, so we should make 
_that_ easier. The existing class API was a step towards this direction, and
with the changes you're suggesting here we'd do two jumps backwards.
> > If not then its enouther reason to keep original class interface -
> > uniformity of driver model interface.
> 
> Ease-of-use trumps uniformity
Ease-of-use, maybe. However, it also means
ease-of-getting-reference-counting-wrong. And reference counting trumps it
all :)
Thanks,
	Dominik
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/