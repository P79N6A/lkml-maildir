Date: Tue, 27 Jan 2009 19:15:52 +0900 (JST)
From: KOSAKI Motohiro <>
Subject: Re: [PATCH] export get_task_comm()
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2009/1/27/96

> > > It's worth a checkpatch rule, I guess: "direct access to
> > > task_struct.comm is racy - use get_task_comm()".
> > 
> > And majority of usages is some debugging printk where nobody cares if ->comm
> > corrupted.
> > 
> > Changelog says is useful for debugging. That's right, tsk->comm is useful
> > for debugging, not allocating temporary buffer + get_task_comm().
> > 
> > Some ->comm usages are for kernel threads which never change it, for starters.
> > 
> > current->comm is always safe, because, current is not executing prctl(2)! 
> 
> That's a good point.
> 
> > I'd say nothing should be done and, heavens forbid, adding this to checkpatch.pl.
> 
> hm, yeah, OK, I'll drop it.
Oh, I have to agree Alexey because he is always right ;)