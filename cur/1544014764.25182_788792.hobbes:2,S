Date: Thu, 8 Jan 2009 12:20:22 +0000
From: Ben Dooks <>
Subject: Re: GPIO: Fix probe() error return in gpio driver probes
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2009/1/8/131

On Wed, Jan 07, 2009 at 12:56:19PM +0000, ben@fluff.org.uk wrote:
> A number of drivers in drivers/gpio return -ENODEV when confronted
> with missing setup parameters such as the platform data. However,
> returning -ENODEV causes the driver layer to silently ignore the
> driver as it assumes the probe did not find anything and was only
> speculative.
> 
> To make life easier to discern why a driver is not being attached,
> change to returning -EINVAL, which is a better description of the
> fact that the driver data was not valid.
> 
> Also add a set of dev_dbg() statements to the error paths to provide
> an better explanation of the error as there may be more that one point
> in the driver.
sorry, sent from the wrong email address please ignore.
-- 
Ben (ben@fluff.org, 
http://www.fluff.org/
)
  'a smiley only costs 4 bytes'