Date: Tue, 3 Aug 2004 01:08:15 +0200
From: Adrian Bunk <>
Subject: Re: Some cleanup patches for: '...lvalues is deprecated'
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/8/2/250

On Mon, Aug 02, 2004 at 01:34:26PM +0200, Mikael Pettersson wrote:
> On Sun, 1 Aug 2004 12:40:26 +0200, Adrian Bunk wrote:
> >
> >BTW:
> >
> >Please don't include the compiler.h part of your patch.
> >It's already reverted in -mm, and we're currently fixing the inlines
> >in 2.6 .
> >
> >This was started after with this patch in 2.6 somewhere a required 
> >inlining did no longer occur (and a compile error is definitely better 
> >than a potential runtime problem).
> 
> Which one was that? DaveM wrote recently that they had eliminated
> SPARC's save_flags/restore_flags-in-same-stack-frame requirement.
The breakage that started the discussion regarding 2.6 was a breakage in 
suspend2 (AFAIR on i386).
It's unknown whether there are other breakages in in-kernel code, and I 
strongly prefer three dozen easy compile fixes over possible runtime 
errors.
> >Although fixing it correctly touches at about three dozen files, these 
> >are pretty straightforward patches (removing inlines or moving code 
> >inside files). After all these issues are sorted out in 2.6, the inline 
> >fixes could be backported to 2.4 .
> 
> I'll consider attacking the inlining issues, after I've reviewed my
> cast-as-lvalue and fastcall fixes -- I noticed that at least one fix
> had changed in 2.6 since I first adapted it to 2.4.
I can also attack the inlining issues (I sent most of the 2.6 fixes), 
but I'd prefer to wait until we've fixed all of them in 2.6 before 
backporting the fixes.
> /Mikael
cu
Adrian
-- 
       "Is there not promise of rain?" Ling Tan asked suddenly out
        of the darkness. There had been need of rain for many days.
       "Only a promise," Lao Er said.
                                       Pearl S. Buck - Dragon Seed
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/