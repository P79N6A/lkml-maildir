Date: Wed, 17 Dec 2003 20:49:51 +0100
From: Roger Luethi <>
Subject: Re: 2.6.0-test9 - poor swap performance on low end machines
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/12/17/116

On Wed, 17 Dec 2003 13:53:28 -0500, Rik van Riel wrote:
> On Tue, 16 Dec 2003, Roger Luethi wrote:
> 
> > One potential problem with the benchmarks is that my test box has
> > just one bar with 256 MB RAM. The kbuild and efax tests were run with
> > mem=64M and mem=32M, respectively. If the difference between mem=32M
> 
> OK, I found another difference with 2.4.
> 
> Try "echo 256 > /proc/sys/vm/min_free_kbytes", I think
> that should give the same free watermarks that 2.4 has.
I played around with that knob after wli posted his findings in the
"mem=16MB laptop testing" thread. IIRC tweaking min_free_kbytes didn't
help nearly as much as I had hoped. I'm running the efax benchmark
right now just to make sure. It's going to take a couple of hours,
I'll follow up with results.
FWIW akpm posted a patch to initialize min_free_kbytes depending on
available RAM which seemed to make sense but it hasn't made it into
mainline yet.
> Using 1MB as the min free watermark for lowmem is bound
> to result in more free (and less used) memory on systems
> with less than 128 MB RAM ... significantly so on smaller
> systems.
Possibly. If memory pressure is high enough, though, the allocator
ignores the watermarks. And on the other end kswapd seems to be pretty
busy anyway during the benchmarks.
Roger
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/