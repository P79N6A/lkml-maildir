Date: Wed, 02 May 2007 15:10:26 -0300
From: Mauro Carvalho Chehab <>
Subject: Re: [v4l-dvb-maintainer] [PATCH 35/36] Use menuconfig objects II - DVB
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/5/2/373

Hi Jan,
Em Seg, 2007-04-30 Ã s 14:30 +0200, Jan Engelhardt escreveu:
> Change Kconfig objects from "menu, config" into "menuconfig" so
> that the user can disable the whole feature without having to
> enter the menu first.
> 
> Also remove one indirection (CONFIG_DVB) that does not seem to
> be really used inside the kernel.
Hmm.. in fact, it becames harder to unselect DVB, at least on my tests.
The patch bellow solved the issue. It also allows keeping core DVB,
disabling the adapters menu.
If nobody is against, I intend to apply both Jan and the patch bellow on
my tree by tomorrow.
---
Allow disabling DVB Adapters
From: Mauro Carvalho Chehab <mchehab@infradead.org>
Signed-off-by: Mauro Carvalho Chehab <mchehab@infradead.org>
diff -r 497b1a27357c linux/drivers/media/dvb/Kconfig
--- a/linux/drivers/media/dvb/Kconfig   Wed May 02 10:11:47 2007 -0300
+++ b/linux/drivers/media/dvb/Kconfig   Wed May 02 11:27:23 2007 -0300
@@ -3,6 +3,15 @@
 #
 source "drivers/media/dvb/dvb-core/Kconfig"
+
+menuconfig DVB_CAPTURE_DRIVERS
+	bool "DVB/ATSC adapters"
+	depends on DVB_CORE
+	default y
+	---help---
+	  Say Y to select Digital TV adapters
+
+if DVB_CAPTURE_DRIVERS
 comment "Supported SAA7146 based PCI Adapters"
	depends on DVB_CORE && PCI && I2C
@@ -30,3 +39,5 @@ comment "Supported DVB Frontends"
 comment "Supported DVB Frontends"
	depends on DVB_CORE
 source "drivers/media/dvb/frontends/Kconfig"
+
+endif # DVB_CAPTURE_DRIVERS
diff -r 497b1a27357c linux/drivers/media/dvb/dvb-core/Kconfig
--- a/linux/drivers/media/dvb/dvb-core/Kconfig  Wed May 02 10:11:47 2007
-0300
+++ b/linux/drivers/media/dvb/dvb-core/Kconfig  Wed May 02 11:06:31 2007
-0300
@@ -1,4 +1,4 @@ menuconfig DVB_CORE
-menuconfig DVB_CORE
+config DVB_CORE
	tristate "DVB for Linux"
	depends on NET && INET
	select CRC32
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/