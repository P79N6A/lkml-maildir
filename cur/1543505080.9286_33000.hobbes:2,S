Date: Sat, 7 Aug 1999 03:38:15 +0200
From: Martin Mares <>
Subject: Re: New resources - pls, explain :-(
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/8/7/101

Hello,
> I know your patches try to enable some regions automatically (like the
> ROMs etc), but I suspect that we really want to leave that to the device
> driver. For example, multiple PCI devices can be accessed with either the
> memory interface or the IO interface, and it may not be even worthwhile to
> enable both (it just eats up resource space, which is not necessarily
> always infinite ;)
   On all sane machines, all regions are automatically enabled by the BIOS.
My code enables I/O regions only in the rare cases a buggy BIOS forgets
to enable them and I really think drivers shouldn't care of broken BIOSes.
Actually, unless such a problem is detected, my code doesn't ever touch
the addresses set up by the BIOS, because it would mean to know much
more about various host bridges.
   I think that requiring drivers to take care of the dirty work is
wrong.  Also, the address space is large enough to hold all regions
(if it weren't, the BIOS setup would fail).
> Not doing the enable automatically at boot-time also means that any broken
> devices can be fixed up later, possibly by a driver that _knows_ about
> their brokenness. The boot sequence should try to avoid fixing up anything
> but the most egregious problems that cause major havoc...
   Which is exactly what we fix up now :)  The PCI subsystem should
work correctly even if there are some broken devices you didn't load drivers
for.
				Have a nice fortnight
-- 
Martin `MJ' Mares   <mj@ucw.cz>   
http://atrey.karlin.mff.cuni.cz/~mj/
Faculty of Math and Physics, Charles University, Prague, Czech Rep., Earth
"Linux hackers are funny people -- they count the time in patchlevels."
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/