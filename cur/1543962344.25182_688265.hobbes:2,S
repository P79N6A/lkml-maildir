Date: Fri, 02 May 2008 11:05:16 +0200
From: Andi Kleen <>
Subject: Re: x86: 8K stacks by default
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/5/2/75

Ingo Molnar <mingo@elte.hu> writes:
>
> The plan is to remove "this overflows my stack here and now" technical 
> argument: we'll add the stack-footprint measurement tracing plugin from 
> -rt to ftrace and get that upstream. In -rt's tracer we can measure, 
> track and trace the exact worst-case stack footprint of a system, since 
> bootup. It relies on the function tracer which looks at the current 
> stack footprint at every given moment. It's not a statistical sample, it 
> tracks the true worst-case stack footprint.
I had such a measurement patch a long time ago for 2.4 x86-64
(
ftp://ftp.x86-64.org/pub/linux-x86_64/debug/stackcheck-1
)
But the problem today is the same as it was back then: you can't
really get the production users with the nasty workloads who actually
trigger the difficult overflows to run something like this which has
quite high runtime overhead.
> _Then_ there can be no real technical argument about making the more 
> robust 4K stacks the default.
You typoed: s/more/less/
-Andi
P.S. I agree with Alan that the interrupt stacks should be always enabled even 
with 8k stacks.