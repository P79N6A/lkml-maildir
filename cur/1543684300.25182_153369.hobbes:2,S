Date: Thu, 31 Jul 2003 18:24:23 +0200
From: Jan-Benedict Glaw <>
Subject: Re: TSCs are a no-no on i386
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/7/31/186

On Thu, 2003-07-31 11:50:27 -0400, Richard B. Johnson <root@chaos.analogic.com>
wrote in message <Pine.LNX.4.53.0307311126530.770@chaos>:
> On Thu, 31 Jul 2003, Jamie Lokier wrote:
> > Willy Tarreau wrote:
> The bad op-code for the i386 is cmpxchg. This is what triggers
> the trap. This can be emulated, although the emulation is
> not SMP compatible. You worry about this when somebody makes
> a dual '386 machine ;^).  Also, the best performing emulation
> for any op-codes should be done within the kernel. That way,
> the invalid-opcode trap works just like the math emulator. You
> don't need the overhead of calling a user-mode handler. If
> this is emulation is implimented, then one should also emulate
> BSWAP and XADD. This makes '486 code compatible with '386
> machines.
Thanks for this fine explanation! Maybe I'd take the 2.4.x emulator
kernel patch and bring it in line with 2.6.x?
However, that doesn't release gcc's developers from providing a solution
to the initial problem (i386 and i486 compiled libs/programs
incompatible) from the task to work on libstdc++ :->
MfG, JBG
-- 
   Jan-Benedict Glaw       jbglaw@lug-owl.de    . +49-172-7608481
   "Eine Freie Meinung in  einem Freien Kopf    | Gegen Zensur | Gegen Krieg
    fuer einen Freien Staat voll Freier BÃ¼rger" | im Internet! |   im Irak!
      ret = do_actions((curr | FREE_SPEECH) & ~(IRAQ_WAR_2 | DRM | TCPA));
[unhandled content-type:application/pgp-signature]