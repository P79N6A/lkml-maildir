Date: Tue, 06 Nov 2007 11:19:36 +0100
From: BERTRAND JoÃ«l <>
Subject: Re: 2.6.23.1: mdadm/raid5 hung/d-state
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/11/6/68

	Done. Here is obtained ouput :
[ 1260.967796] for sector 7629696, rmw=0 rcw=0
[ 1260.969314] handling stripe 7629696, state=0x14 cnt=1, pd_idx=2 ops=0:0:0
[ 1260.980606] check 5: state 0x6 toread 0000000000000000 read 
0000000000000000 write fffff800ffcffcc0 written 0000000000000000
[ 1260.994808] check 4: state 0x6 toread 0000000000000000 read 
0000000000000000 write fffff800fdd4e360 written 0000000000000000
[ 1261.009325] check 3: state 0x1 toread 0000000000000000 read 
0000000000000000 write 0000000000000000 written 0000000000000000
[ 1261.244478] check 2: state 0x1 toread 0000000000000000 read 
0000000000000000 write 0000000000000000 written 0000000000000000
[ 1261.270821] check 1: state 0x6 toread 0000000000000000 read 
0000000000000000 write fffff800ff517e40 written 0000000000000000
[ 1261.312320] check 0: state 0x6 toread 0000000000000000 read 
0000000000000000 write fffff800fd4cae60 written 0000000000000000
[ 1261.361030] locked=4 uptodate=2 to_read=0 to_write=4 failed=0 
failed_num=0
[ 1261.443120] for sector 7629696, rmw=0 rcw=0
[ 1261.453348] handling stripe 7629696, state=0x14 cnt=1, pd_idx=2 ops=0:0:0
[ 1261.491538] check 5: state 0x6 toread 0000000000000000 read 
0000000000000000 write fffff800ffcffcc0 written 0000000000000000
[ 1261.529120] check 4: state 0x6 toread 0000000000000000 read 
0000000000000000 write fffff800fdd4e360 written 0000000000000000
[ 1261.560151] check 3: state 0x1 toread 0000000000000000 read 
0000000000000000 write 0000000000000000 written 0000000000000000
[ 1261.599180] check 2: state 0x1 toread 0000000000000000 read 
0000000000000000 write 0000000000000000 written 0000000000000000
[ 1261.637138] check 1: state 0x6 toread 0000000000000000 read 
0000000000000000 write fffff800ff517e40 written 0000000000000000
[ 1261.674502] check 0: state 0x6 toread 0000000000000000 read 
0000000000000000 write fffff800fd4cae60 written 0000000000000000
[ 1261.712589] locked=4 uptodate=2 to_read=0 to_write=4 failed=0 
failed_num=0
[ 1261.864338] for sector 7629696, rmw=0 rcw=0
[ 1261.873475] handling stripe 7629696, state=0x14 cnt=1, pd_idx=2 ops=0:0:0
[ 1261.907840] check 5: state 0x6 toread 0000000000000000 read 
0000000000000000 write fffff800ffcffcc0 written 0000000000000000
[ 1261.950770] check 4: state 0x6 toread 0000000000000000 read 
0000000000000000 write fffff800fdd4e360 written 0000000000000000
[ 1261.989003] check 3: state 0x1 toread 0000000000000000 read 
0000000000000000 write 0000000000000000 written 0000000000000000
[ 1262.019621] check 2: state 0x1 toread 0000000000000000 read 
0000000000000000 write 0000000000000000 written 0000000000000000
[ 1262.068705] check 1: state 0x6 toread 0000000000000000 read 
0000000000000000 write fffff800ff517e40 written 0000000000000000
[ 1262.113265] check 0: state 0x6 toread 0000000000000000 read 
0000000000000000 write fffff800fd4cae60 written 0000000000000000
[ 1262.150511] locked=4 uptodate=2 to_read=0 to_write=4 failed=0 
failed_num=0
[ 1262.171143] for sector 7629696, rmw=0 rcw=0
[ 1262.179142] handling stripe 7629696, state=0x14 cnt=1, pd_idx=2 ops=0:0:0
[ 1262.201905] check 5: state 0x6 toread 0000000000000000 read 
0000000000000000 write fffff800ffcffcc0 written 0000000000000000
[ 1262.252750] check 4: state 0x6 toread 0000000000000000 read 
0000000000000000 write fffff800fdd4e360 written 0000000000000000
[ 1262.289631] check 3: state 0x1 toread 0000000000000000 read 
0000000000000000 write 0000000000000000 written 0000000000000000
[ 1262.344709] check 2: state 0x1 toread 0000000000000000 read 
0000000000000000 write 0000000000000000 written 0000000000000000
[ 1262.400411] check 1: state 0x6 toread 0000000000000000 read 
0000000000000000 write fffff800ff517e40 written 0000000000000000
[ 1262.437353] check 0: state 0x6 toread 0000000000000000 read 
0000000000000000 write fffff800fd4cae60 written 0000000000000000
[ 1262.492561] locked=4 uptodate=2 to_read=0 to_write=4 failed=0 
failed_num=0
[ 1262.524993] for sector 7629696, rmw=0 rcw=0
[ 1262.533314] handling stripe 7629696, state=0x14 cnt=1, pd_idx=2 ops=0:0:0
[ 1262.561900] check 5: state 0x6 toread 0000000000000000 read 
0000000000000000 write fffff800ffcffcc0 written 0000000000000000
[ 1262.588986] check 4: state 0x6 toread 0000000000000000 read 
0000000000000000 write fffff800fdd4e360 written 0000000000000000
[ 1262.619455] check 3: state 0x1 toread 0000000000000000 read 
0000000000000000 write 0000000000000000 written 0000000000000000
[ 1262.671006] check 2: state 0x1 toread 0000000000000000 read 
0000000000000000 write 0000000000000000 written 0000000000000000
[ 1262.709065] check 1: state 0x6 toread 0000000000000000 read 
0000000000000000 write fffff800ff517e40 written 0000000000000000
[ 1262.746904] check 0: state 0x6 toread 0000000000000000 read 
0000000000000000
write fffff800fd4cae60 written 0000000000000000
[ 1262.780203] locked=4 uptodate=2 to_read=0 to_write=4 failed=0 
failed_num=0
[ 1262.805941] for sector 7629696, rmw=0 rcw=0
[ 1262.815759] handling stripe 7629696, state=0x14 cnt=1, pd_idx=2 ops=0:0:0
[ 1262.850115] check 5: state 0x6 toread 0000000000000000 read 
0000000000000000 write fffff800ffcffcc0 written 0000000000000000
[ 1262.893254] check 4: state 0x6 toread 0000000000000000 read 
0000000000000000 write fffff800fdd4e360 written 0000000000000000
[ 1262.931227] check 3: state 0x1 toread 0000000000000000 read 
0000000000000000 write 0000000000000000 written 0000000000000000
[ 1262.979417] check 2: state 0x1 toread 0000000000000000 read 
0000000000000000 write 0000000000000000 written 0000000000000000
[ 1263.017059] check 1: state 0x6 toread 0000000000000000 read 
0000000000000000 write fffff800ff517e40 written 0000000000000000
[ 1263.067023] check 0: state 0x6 toread 0000000000000000 read 
0000000000000000 write fffff800fd4cae60 written 0000000000000000
[ 1263.104531] locked=4 uptodate=2 to_read=0 to_write=4 failed=0 
failed_num=0
[ 1263.452465] for sector 7629696, rmw=0 rcw=0
[ 1263.460875] handling stripe 7629696, state=0x14 cnt=1, pd_idx=2 ops=0:0:0
[ 1263.490828] check 5: state 0x6 toread 0000000000000000 read 
0000000000000000 write fffff800ffcffcc0 written 0000000000000000
[ 1263.518608] check 4: state 0x6 toread 0000000000000000 read 
0000000000000000 write fffff800fdd4e360 written 0000000000000000
[ 1263.555348] check 3: state 0x1 toread 0000000000000000 read 
0000000000000000 write 0000000000000000 written 0000000000000000
[ 1263.593250] check 2: state 0x1 toread 0000000000000000 read 
0000000000000000 write 0000000000000000 written 0000000000000000
[ 1263.655904] check 1: state 0x6 toread 0000000000000000 read 
0000000000000000 write fffff800ff517e40 written 0000000000000000
[ 1263.707175] check 0: state 0x6 toread 0000000000000000 read 
0000000000000000 write fffff800fd4cae60 written 0000000000000000
[ 1263.744877] locked=4 uptodate=2 to_read=0 to_write=4 failed=0 
failed_num=0
[ 1263.764939] for sector 7629696, rmw=0 rcw=0
[ 1263.773640] handling stripe 7629696, state=0x14 cnt=1, pd_idx=2 ops=0:0:0
[ 1263.802799] check 5: state 0x6 toread 0000000000000000 read 
0000000000000000 write fffff800ffcffcc0 written 0000000000000000
[ 1263.840684] check 4: state 0x6 toread 0000000000000000 read 
0000000000000000 write fffff800fdd4e360 written 0000000000000000
[ 1263.879844] check 3: state 0x1 toread 0000000000000000 read 
0000000000000000 write 0000000000000000 written 0000000000000000
[ 1263.917788] check 2: state 0x1 toread 0000000000000000 read 
0000000000000000 write 0000000000000000 written 0000000000000000
[ 1263.963288] check 1: state 0x6 toread 0000000000000000 read 
0000000000000000 write fffff800ff517e40 written 0000000000000000
[ 1264.007020] check 0: state 0x6 toread 0000000000000000 read 
0000000000000000 write fffff800fd4cae60 written 0000000000000000
[ 1264.044718] locked=4 uptodate=2 to_read=0 to_write=4 failed=0 
failed_num=0
[ 1264.063690] for sector 7629696, rmw=0 rcw=0
[ 1264.071938] handling stripe 7629696, state=0x14 cnt=1, pd_idx=2 ops=0:0:0
[ 1264.100608] check 5: state 0x6 toread 0000000000000000 read 
0000000000000000 write fffff800ffcffcc0 written 0000000000000000
[ 1264.138977] check 4: state 0x6 toread 0000000000000000 read 
0000000000000000 write fffff800fdd4e360 written 0000000000000000
[ 1264.170593] check 3: state 0x1 toread 0000000000000000 read 
0000000000000000 write 0000000000000000 written 0000000000000000
[ 1264.214718] check 2: state 0x1 toread 0000000000000000 read 
0000000000000000 write 0000000000000000 written 0000000000000000
[ 1264.259371] check 1: state 0x6 toread 0000000000000000 read 
0000000000000000 write fffff800ff517e40 written 0000000000000000
[ 1264.296140] check 0: state 0x6 toread 0000000000000000 read 
0000000000000000 write fffff800fd4cae60 written 0000000000000000
[ 1264.335221] locked=4 uptodate=2 to_read=0 to_write=4 failed=0 
failed_num=0
[ 1264.354767] for sector 7629696, rmw=0 rcw=0
[ 1264.363279] handling stripe 7629696, state=0x14 cnt=1, pd_idx=2 ops=0:0:0
[ 1264.399971] check 5: state 0x6 toread 0000000000000000 read 
0000000000000000 write fffff800ffcffcc0 written 0000000000000000
[ 1264.454607] check 4: state 0x6 toread 0000000000000000 read 
0000000000000000 write fffff800fdd4e360 written 0000000000000000
[ 1264.510498] check 3: state 0x1 toread 0000000000000000 read 
0000000000000000 write 0000000000000000 written 0000000000000000
[ 1264.548240] check 2: state 0x1 toread 0000000000000000 read 
0000000000000000 write 0000000000000000 written 0000000000000000
[ 1264.585633] check 1: state 0x6 toread 0000000000000000 read 
0000000000000000 write fffff800ff517e40 written 0000000000000000
[ 1264.622707] check 0: state 0x6 toread 0000000000000000 read 
0000000000000000 write fffff800fd4cae60 written 0000000000000000
[ 1264.660464] locked=4 uptodate=2 to_read=0 to_write=4 failed=0 
failed_num=0
[ 1264.680185] for sector 7629696, rmw=0 rcw=0
[ 1264.688775] handling stripe 7629696, state=0x14 cnt=1, pd_idx=2 ops=0:0:0
[ 1264.717231] check 5: state 0x6 toread 0000000000000000 read 
0000000000000000 write fffff800ffcffcc0 written 0000000000000000
[ 1264.760881] check 4: state 0x6 toread 0000000000000000 read 
0000000000000000 write fffff800fdd4e360 written 0000000000000000
[ 1264.797532] check 3: state 0x1 toread 0000000000000000 read 
0000000000000000 write 0000000000000000 written 0000000000000000
[ 1264.833996] check 2: state 0x1 toread 0000000000000000 read 
0000000000000000 write 0000000000000000 written 0000000000000000
[ 1264.870709] check 1: state 0x6 toread 0000000000000000 read 
0000000000000000 write fffff800ff517e40 written 0000000000000000
[ 1264.901594] check 0: state 0x6 toread 0000000000000000 read 
0000000000000000 write fffff800fd4cae60 written 0000000000000000
[ 1264.940015] locked=4 uptodate=2 to_read=0 to_write=4 failed=0 
failed_num=0
[ 1264.959415] for sector 7629696, rmw=0 rcw=0
[ 1264.967595] handling stripe 7629696, state=0x14 cnt=1, pd_idx=2 ops=0:0:0
[ 1264.996217] check 5: state 0x6 toread 0000000000000000 read 
0000000000000000 write fffff800ffcffcc0 written 0000000000000000
[ 1265.046572] check 4: state 0x6 toread 0000000000000000 read 
0000000000000000 write fffff800fdd4e360 written 0000000000000000
[ 1265.083599] check 3: state 0x1 toread 0000000000000000 read 
0000000000000000 write 0000000000000000 written 0000000000000000
[ 1265.109803] check 2: state 0x1 toread 0000000000000000 read 
0000000000000000 write 0000000000000000 written 0000000000000000
[ 1265.139780] check 1: state 0x6 toread 0000000000000000 read 
0000000000000000 write fffff800ff517e40 written 0000000000000000
[ 1265.170751] check 0: state 0x6 toread 0000000000000000 read 
0000000000000000 write fffff800fd4cae60 written 0000000000000000
[ 1265.517286] locked=4 uptodate=2 to_read=0 to_write=4 failed=0 
failed_num=0
[ 1265.533341] for sector 7629696, rmw=0 rcw=0
[ 1265.541329] handling stripe 7629696, state=0x14 cnt=1, pd_idx=2 ops=0:0:0
[ 1265.568846] check 5: state 0x6 toread 0000000000000000 read 
0000000000000000 write fffff800ffcffcc0 written 0000000000000000
[ 1265.606657] check 4: state 0x6 toread 0000000000000000 read 
0000000000000000 write fffff800fdd4e360 written 0000000000000000
[ 1265.649175] check 3: state 0x1 toread 0000000000000000 read 
0000000000000000 write 0000000000000000 written 0000000000000000
[ 1265.685075] check 2: state 0x1 toread 0000000000000000 read 
0000000000000000 write 0000000000000000 written 0000000000000000
[ 1265.727835] check 1: state 0x6 toread 0000000000000000 read 
0000000000000000 write fffff800ff517e40 written 0000000000000000
[ 1265.764432] check 0: state 0x6 toread 0000000000000000 read 
0000000000000000 write fffff800fd4cae60 written 0000000000000000
[ 1265.806241] locked=4 uptodate=2 to_read=0 to_write=4 failed=0 
failed_num=0
[ 1265.825835] for sector 7629696, rmw=0 rcw=0
[ 1265.833817] handling stripe 7629696, state=0x14 cnt=1, pd_idx=2 ops=0:0:0
[ 1265.862460] check 5: state 0x6 toread 0000000000000000 read 
0000000000000000 write fffff800ffcffcc0 written 0000000000000000
[ 1265.899068] check 4: state 0x6 toread 0000000000000000 read 
0000000000000000 write fffff800fdd4e360 written 0000000000000000
[ 1265.941328] check 3: state 0x1 toread 0000000000000000 read 
0000000000000000 write 0000000000000000 written 0000000000000000
[ 1265.972129] check 2: state 0x1 toread 0000000000000000 read 
0000000000000000 write 0000000000000000 written 0000000000000000
	For information, after crash, I have :
Root poulenc:[/sys/block] > cat /proc/mdstat
Personalities : [raid1] [raid6] [raid5] [raid4]
md_d0 : active raid5 sdc1[0] sdh1[5] sdg1[4] sdf1[3] sde1[2] sdd1[1]
       1464725760 blocks level 5, 64k chunk, algorithm 2 [6/6] [UUUUUU]
	Regards,
	JKB
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/