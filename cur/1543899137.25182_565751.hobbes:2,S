Date: 06 Jul 2007 14:05:49 +0200
From: Andi Kleen <>
Subject: Re: [RFC][PATCH] introduce panic_gently
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/7/6/144

Bodo Eggert <7eggert@gmx.de> writes:
> If the boot process failes to find init or the root fs, the cause has 
> usually scrolled off the screen, and because of the panic, it can't be 
> reached anymore.
> 
> This patch introduces panic_gently, which will allow to use the scrollback 
> buffer and to reboot, but it can't be called from unsafe context.
The implementation certainly has too much duplicated code. If anything
it needs some common functions.
The problem with keeping interrupts on is that the system might continue
to route packets. This is sometimes quite unexpected for users.
Arguably that's unlikely to be already enabled for missing root,
but in theory initrd could have done it.
I think i would prefer if the normal panic() tried to detect the situations
where this is 
It couldn't detect spinlocks, but interrupts off/interrupt context etc.
-Andi
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/