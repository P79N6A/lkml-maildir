Date: Tue, 11 Mar 2008 15:17:16 +0100
From: Patrick McHardy <>
Subject: Re: [RFC PATCH] ipv4: compilation error fix with CONFIG_PROC_FS	disabled
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/3/11/204

Ram Pai wrote:
> Fixes compilation errors while compiling the kernel with CONFIG_PROC_FS
> disabled.
Please always include the compiler message when fixing compilation
warnings or errors.
This one is already fixed differently in current -git:
commit cc8274f50f2ad9a97a837451f63a0a3e65f7f490
Author: Li Zefan <lizf@cn.fujitsu.com>
Date:   Tue Feb 5 02:54:16 2008 -0800
    [IPV4]: Fix compile error building without CONFIG_FS_PROC
    compile error building without CONFIG_FS_PROC:
    net/ipv4/fib_frontend.c: In function 'fib_net_init':
    net/ipv4/fib_frontend.c:1032: error: implicit declaration of function 'fib_proc_
    init'
    net/ipv4/fib_frontend.c: In function 'fib_net_exit':
    net/ipv4/fib_frontend.c:1047: error: implicit declaration of function 'fib_proc_
    exit'
    Signed-off-by: Li Zefan <lizf@cn.fujitsu.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>
diff --git a/include/net/ip_fib.h b/include/net/ip_fib.h
index 90d1175..8b12667 100644
--- a/include/net/ip_fib.h
+++ b/include/net/ip_fib.h
@@ -266,6 +266,14 @@ static inline void fib_res_put(struct fib_result *res)
 #ifdef CONFIG_PROC_FS
 extern int __net_init  fib_proc_init(struct net *net);
 extern void __net_exit fib_proc_exit(struct net *net);
+#else
+static inline int fib_proc_init(struct net *net)
+{
+	return 0;
+}
+static inline void fib_proc_exit(struct net *net)
+{
+}
 #endif
 
 #endif  /* _NET_FIB_H */