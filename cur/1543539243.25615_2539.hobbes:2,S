Date: Tue, 18 Jul 2000 18:22:44 -0700
From: Jean Tourrilhes <>
Subject: 2.4.0-test3 oops (BIOS bug)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/7/18/124

Marc Zyngier wrote :
> >>>>> "JL" == Julio Lopez <julio.lopez@mailcity.com> writes:
> 
> JL> I have been experiencing the following crashes quite often.  In fact, 
> JL> the machine doesn't last up more than 5 minutes.
> 
> JL> The machines are an old Pentiums 90 MHz. (HP Vectra-XU) with onboard 
> JL> SCSI controller (AM53/79C974) and network card (driver=PCnet/PCI 
> JL> 79C970).  They have 32MB and 48MB respectively.
> 
> There's a known problem with these system :
> 
> JL> BIOS-provided physical RAM map: 
> JL>  e820: 000000000009f800 @ 0000000000000000 (usable) 
> JL>  e820: 0000000000000800 @ 000000000009f800 (reserved) 
> JL>  e820: 0000000000010000 @ 00000000000e0000 (usable) <---- BUG
> JL>  e820: 0000000000010000 @ 00000000000f0000 (reserved) 
> JL>  e820: 0000000001f00000 @ 0000000000100000 (usable) 
> JL>  e820: 0000000000001000 @ 00000000fec00000 (reserved) 
> JL>  e820: 0000000000001000 @ 00000000fee00000 (reserved) 
> JL>  e820: 0000000000010000 @ 00000000ffff0000 (reserved) 
> 
> The little 64KB area marked as usable should be reserved (this is a
> e820 bios bug). Passing mem=... argument to the kernel will fix this.
> 
>         M.
	Wow ! This is a life saver ! Thanks a bundle !
	I've been severly bitten by this exact precise bug, which has
pretty much stalled my Linux developments on 2.4.X (disk corruption an
co.). I've sent a couple of e-mail in the past on the list without
answer.
	Here, I've got a couple of HP Vectra XU6 (P6-200, Adaptec
SCSI AIC-7880, 64M to 96M ram). Due to the higher amount of memory,
the lockup was slower to come, but it was basically the same.
	On my xu6 with 64M, it look like :
-----------------------------------
BIOS-provided physical RAM map:
 e820: 000000000009f800 @ 0000000000000000 (usable)
 e820: 0000000000000800 @ 000000000009f800 (reserved)
 e820: 0000000000010000 @ 00000000000e0000 (usable)
 e820: 0000000000010000 @ 00000000000f0000 (reserved)
 e820: 0000000003f00000 @ 0000000000100000 (usable)
 e820: 0000000000001000 @ 00000000fec00000 (reserved)
 e820: 0000000000001000 @ 00000000fee00000 (reserved)
 e820: 0000000000400000 @ 00000000ffc00000 (reserved)
On node 0 totalpages: 16384
zone(0): 4096 pages.
zone(1): 12288 pages.
zone(2): 0 pages.
-----------------------------------
	Other xu6 look the same.
	I applied your fix, and all my trouble are gone, so far...
	The xu90 is a pretty old machine (I know, I have one). On the
other hand, the xu6 is a pretty good and flexible machine, only 3
years old, is very widespread around here, and many people are using
Linux on it.
	I spent enough hours trying to fight this bug, which is quite
difficult to pin point, and I don't want other people to waste as much
time as I did, especially if it is a known problem but not documented.
	So, I guess what I'm saying is that a fix for this problem
would be more than welcomed in the standard kernel. Maybe there should
be a BIOS blacklist ;-)
	Merci encore pour le tuyeau...
	Jean
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/