Date: Wed, 20 Feb 2002 02:47:48 +0100
From: Christoph Pittracher <>
Subject: Re: sis_malloc / sis_free
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/2/19/226

Hello!
On Wednesday 20 February 2002 02:26, Jean Paul Sartre wrote:
> 	I was grepping through the SIS malloc/free code and I saw DRM
> 'shares' code with the fb code. What if I have SIS framebuffer
> disabled and SIS DRM code enabled? In 2.4.18-rc2, the SIS DRM code
> does not compile from the lack of sis_malloc and sis_free function.
Yes, the sisfb/drm code has some design lacks.
Another lack is the necessary memory offset between framebuffer/drm and 
the X driver (see 
http://www.webit.at/~twinny/linuxsis630.shtml
 for 
details).
> 	I would suggest 'duplicating' this code (yes, I *do* hate
> duplicating codes) or making that memory allocation code *really*
> shared between both modules (or we won't be able to successfully
> compile it, since the DRM code is on drivers/char/drm and the FB code
> is on drivers/video/sis/sis_main.c).
I don't think that it would be a problem to duplicate the code. the 
sis_malloc / sis_free functions seems quite stable. I don't think that 
there will be big updates for this code.
> 	If the suggestion of 'duplicating' code (argh) is reasonable
> enough (for they are really different codes) I can work and submit a
> patch.
Thomas Winischhofer <tw@webit.com> is working on that SiS stuff for 
about 2 months. I think it would be best if you contact him and ask 
what he thinks about that. I know that he said it would be a good idea 
to seperate the sisfb and sis_drm code but he doesn't have enough time 
to do it...
regards,
Christoph
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/