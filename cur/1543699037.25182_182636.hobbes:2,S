Date: Mon, 8 Dec 2003 17:40:08 +0100
From: Stephan von Krawczynski <>
Subject: Re: Problem Report: ns83820 / 802.1Q vlan / 2.4.23
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/12/8/122

On Mon, 8 Dec 2003 14:56:22 +0100
Stephan von Krawczynski <skraw@ithnet.com> wrote:
> Hello,
> 
> I just experienced a problem with ns83820 and 802.1Q vlan support. It seems
> that incoming packets get dropped if the device is connected to a tagged
> switch port. Reducing the mtu solves the problem but is of course not nice.
> I remember some old docs where it says there can be problems because of the
> oversized tagged packets. Intel e100 seems to work flawlessly in same setup.
Regarding this problem I just did this incredibly complex patch, which seems to
work. Maintainer please beat me...
;-)
Regards,
Stephan
--- drivers/net/ns83820.c-orig  2003-12-08 17:33:14.000000000 +0100
+++ drivers/net/ns83820.c       2003-12-08 17:33:31.000000000 +0100
@@ -141,7 +141,7 @@
 #define NR_TX_DESC     128
 
 /* not tunable */
-#define REAL_RX_BUF_SIZE (RX_BUF_SIZE + 14)    /* rx/tx mac addr + type */
+#define REAL_RX_BUF_SIZE (RX_BUF_SIZE + 14 + 4)        /* rx/tx mac addr + type + vlan*/
 
 #define MIN_TX_DESC_FREE       8
 
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/