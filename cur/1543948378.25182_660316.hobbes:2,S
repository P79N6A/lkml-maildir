Date: Tue, 26 Feb 2008 22:21:31 -0800
From: "Yinghai Lu" <>
Subject: Re: [discuss] Weird cpu mapping on 8-way dual-core machine
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/2/27/20

On Tue, Feb 26, 2008 at 9:48 PM, Yinghai Lu <yhlu.kernel@gmail.com> wrote:
> On Tue, Feb 26, 2008 at 9:58 AM, Francisco Jesús Martínez Serrano
>  <franjesus@gmail.com> wrote:
>  > 2008/2/26, Andre Przywara:
>  >
>  > >  So your BIOS option disables the shifting workaround and everything
>  >  >  works as intended by the specification, although I am not sure whether
>  >  >  you have any side effects (see above).
>  >
>  >  Maybe I'm getting some side effects, but I'm not sure, when running an
>  >  OpenMP code, I get a lot of numa_misses, at node1 and the same number
>  >  of numa_foreign at node0.
>  >
>  >  Out of pure ignorance, I was wondering if it could be related to the
>  >  node0 getting 505896 pages  (I believe that's 1976.2 MB) of
>  >  ZONE_DMA32. I've seen options to disable DMA and DMA32. Is it safe?
>  >
>  can you try x86.git#testing ?
>
>  
http://people.redhat.com/mingo/x86.git/README
>
>  and connect with serial console.
>
>  command line:
>  apic=debug acpi.debug_level=0x0000000F debug console=uart8250,io,0x3f8,115200n8
>
core fix is in x86.git#testing
http://git.kernel.org/?p=linux/kernel/git/x86/linux-2.6-x86.git;a=commitdiff;h=ae2627a87c6f186ced0539d8e6f7a2c78dabc4c5
it will make sure that apicid to node mapping is right.
esp don't have SRAT or wrong SRAT, and your system have apicid lifting
YH
--
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/