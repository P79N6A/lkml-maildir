Date: Wed, 14 Apr 1999 17:02:56 -0400 (EDT)
From: "Michael H. Warfield" <>
Subject: Re: smbfs problem with 2.2.5
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/4/15/11

Mike Frisch enscribed thusly:
> Alan Chapman wrote:
> > I see this behaviour also. I was having this happen with samba 1.9.18p?,
> > and I initially thought that it may be related to the version of samba
> Are you seeing correct filedates on the smbfs mounted filesystem?  I am
> running Samba 2.0.3 with 2.2.5-ac6 and the filedates are totally bogus
> on the mounted filesystem.
	Did you compile the kernel with the WIN95 Bug Workaround?  If you
did and those are Windows NT shares that you are mounting then that's
the cause.  Turn that feature off.  The WIN95 Bug Workaround should NEVER
be enabled if you are going to mount ANY Windows NT shares.  This is
one of the symptoms you will experience if you do.
	If you have a mix of Windows NT and Windows 95 shares that you
have to mount (why?) you can switch the WIN95 Bug Workaround at runtime
through a fairly archane option to smbmount, but only if you have NOT
compiled it into the kernel (which merely hard codes it on).  Eventually
we hope to auto-detect the bug and switch it dynamically.
	As to the other problem (the disconnects) that people are having
problems with...  It appears that an idle timeout is now disconnecting
shares after long idle periods.  I don't know if it is something that
is negotiated by smbmount or something inherent in the newer smbfs kernel
module.  I'm maintaining the smbmount program while, currently, Bill
Hawes is the official maintainer of smbfs in the kernel.  I have not
been able to contact Bill for almost 6 months, however.
	I'm currently trying to determine which and to determine what
can be done about it.  The smbmount program should auto-recover and
re-establish the connection after the disconnect, on demand, but there
appears to be some problem with that which I have been unable to reproduce.
Disconnected sessions for me all reconnect properly and I have been unable
to get it to fail in this maner.
	That tells me that I that I have at least one problem in smbmount
which I am trying to address and one other problem (the idle timeout)
which may be in smbmount or may be in smbfs, TBD.
> Mike.
> -- 
> 
> ======================================================================
> Mike Frisch
> Software Engineer
> Hummingbird Communications Ltd.            North York, Ontario, Canada
> 
>            Disclaimer: I speak for myself, not my employer
	Mike
-- 
 Michael H. Warfield    |  (770) 985-6132   |  mhw@WittsEnd.com
  (The Mad Wizard)      |  (770) 925-8248   |  
http://www.wittsend.com/mhw/
  NIC whois:  MHW9      |  An optimist believes we live in the best of all
 PGP Key: 0xDF1DD471    |  possible worlds.  A pessimist is sure of it!
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/