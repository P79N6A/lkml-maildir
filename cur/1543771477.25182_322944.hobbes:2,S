Date: Fri, 3 Jun 2005 16:00:26 +0100
From: Andy Whitcroft <>
Subject: Re: [PATCH] i386 sparsemem: undefined early_pfn_to_nid when !NUMA
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/6/3/92

Seem benign for normal use and allows testing for hotplug.  Tested
on my test boxes.
Andrew please apply to -mm.
-apw
=== 8< ===
On i386, early_pfn_to_nid() is only defined when discontig.c
is compiled in.  The current dependency doesn't reflect this,
probably because the default i386 config doesn't allow for
SPARSEMEM without NUMA.
But, we'll need SPARSEMEM && !NUMA for memory hotplug, and I
do this for testing anyway.
Andy, please forward on if you concur.
Signed-off-by: Dave Hansen <haveblue@us.ibm.com>
Signed-off-by: Andy Whitcroft <apw@shadowen.org>
diffstat sparsemem-i386-undefined-early_pfn_to_nid-when-not-NUMA
---
 Kconfig |    1 +
 1 files changed, 1 insertion(+)
diff -upN reference/arch/i386/Kconfig current/arch/i386/Kconfig
--- reference/arch/i386/Kconfig
+++ current/arch/i386/Kconfig
@@ -803,6 +803,7 @@ source "mm/Kconfig"
 config HAVE_ARCH_EARLY_PFN_TO_NID
 	bool
 	default y
+	depends on NUMA
 
 config HIGHPTE
 	bool "Allocate 3rd-level pagetables from highmem"
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/