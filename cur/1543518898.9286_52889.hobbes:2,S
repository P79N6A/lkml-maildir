Date: Sun, 12 Dec 1999 11:11:04 +0300
From: Michael Barabanov <>
Subject: Building modules (Was: Re: Portable binary modules)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/12/12/16

Keith Owens (kaos@ocs.com.au) wrote:
> On 11 Dec 1999 17:42:21 +0100, 
> Kjetil Torgrim Homme <kjetilho@ifi.uio.no> wrote:
> >How about mechanisms which tag the variant in the module directory?
> >E.g., make it possible to keep both the SMP version and the UP version
> >around without doing manual labour when switching kernels.
> 
> In top level Makefile, set EXTRAVERSION = -smp.  Two kernels, two sets
> of modules, automatic mapping of kernel to modules.  Trivial.
> 
Then, why not make something like that standard.
The real problem with handling modules is that there is no easy way to get
kernel options and flags needed to compile modules for a specific
kernel. Witness complicated build scripts in pcmcia, alsa and other packages.
They do all kinds of stuff to figure out the needed CFLAGS, include paths,
SMP-ness etc.
Perhaps (during make config) the kernel could create a file with things like
CFLAGS=-I/usr/src/linux -O2 -m486...
that Makefiles for externally compiled modules could include?
Michael.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/