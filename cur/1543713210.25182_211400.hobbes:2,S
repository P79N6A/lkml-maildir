Date: Fri,  2 Apr 2004 11:10:13 -0500
From: Ron Gage <>
Subject: 2.4 - can't open a custom char device file
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/4/2/88

Hi folks.
I am working on a PCMCIA module for an industrial communications interface under
Linux (Specifically, the Allen Bradley PCMK).  Let's just say that the driver I
wrote is having issues, what I believe to be kernel related issues.
As near as I can tell, the card is being initialized correctly with the PCMCIA
layer without incident.  My driver is registering the device as major 240, and
according to /proc/devices, the device is showing up as major 240.
My device file is created as a char device at major 240, minor 0.  As near as I
can tell, I do have a file-operations struct filled in and have no indications
that this struct is incorrect.  I do have a defined open routine that
essentially increments the module use count and exits.
Problem is that any attempt to open the device file causes the kernel to return
error #6 - Device or Address not found - when the device is showing up in
/proc/devices and according to kernel messages I have in the driver, is
installed and initialized.
Anyone have any ideas on what I could be doing wrong here?
Driver source is available from
ftp://ftp.rongage.org/pub/pcmk/pcmk_v0.0.0.tar.gz
I have already consulted with David Hinds (PCMCIA leader) and he is stumped.
-- 
Ronald R. Gage
MCP, LPIC1, A+, Net+
Pontiac, Michigan
----------------------------------------------------------------
This message was sent using webmail provided by www.rongage.org
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/