Date: Thu, 6 May 2004 13:22:33 -0700
From: Brad Boyer <>
Subject: Re: [OPERA] Potential bugs detected by static analysis tool in 2.6.4
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/5/6/204

On Thu, May 06, 2004 at 11:44:37AM -0500, Zhenmin Li wrote:
> Sorry for the typo. The line number should be 264, and the context is:
> 
> if (macintosh_config->adb_type == MAC_ADB_IOP) {
> 	if (macintosh_config->ident == MAC_MODEL_IIFX) {
> 		iop_base[IOP_NUM_ISM] = (struct mac_iop *)
> ISM_IOP_BASE_IIFX;
> 	} else {
> 		iop_base[IOP_NUM_ISM] = (struct mac_iop *)
> ISM_IOP_BASE_QUADRA;
> 	}
> 	iop_base[IOP_NUM_SCC]->status_ctrl = 0;
> 	iop_ism_present = 1;
> }
That's what I suspected. Yes, this code is broken, and line 264
should have IOP_NUM_ISM, just like the other two lines. The
current IOP driver is a bit of a hack, and I guess it just slipped
through the cracks. We rely on the chips to be mostly initialized
before we touch them as it is.
This line should be fixed as suggested, and if it breaks anything,
it's because the code was broken before, and we just didn't notice.
This driver only gets used on 3 Macintosh models, all of which are
relatively obscure.
	Brad Boyer
	flar@allandria.com
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/