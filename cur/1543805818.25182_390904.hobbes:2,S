Date: Sat, 28 Jan 2006 00:22:07 +0100
From: Pavel Machek <>
Subject: Re: Suspend to RAM: help with whitelist wanted
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/1/27/293

Hi!
> > On www.sf.net/projects/suspend , there's s2ram.c program for
> > suspending machines. It contains whitelist of known machines, along
> > with methods to get their video working (similar to
> > Doc*/power/video.txt). Unfortunately, video.txt does not allow me to
> > fill in whitelist automatically, so I need your help.
> > 
> > I do not yet have solution for machines that need vbetool; fortunately
> > my machines do not need that :-), and it is pretty complex (includes
> > x86 emulator).
> 
> What about adding something like:
> 
> void s2ram_restore(void) {
>         if (needed)
>                 fork_and_exec(vbetool);
> }
> 
> machine_table could set a global flag or something. It would be
> possibile to us an array to carry the informations about what need to be
> done on restore, i.e. something like:
I can imagine fork_and_exec... Disadvantages are:
* if disk driver is toast, user does not see anything
* vbetool can be missing from the system, or wrong version, or
something like that.
Other solution is to just integrate vbetool into s2ram. Advantages
are:
* s2ram is nicely integrated.
Disadvantages are:
* code duplication.
If vbetool's primary purpose is to fix video after suspend/resume,
then perhaps right thing to do is to integrate it into s2ram and
maintain it there.
Matthew, what do you think?
Luca, would you cook quick&hacky fork-and-exec patch? I do not have
machine that needs vbetool...
							Pavel
-- 
Thanks, Sharp!
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/