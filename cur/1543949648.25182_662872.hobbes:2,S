Date: Mon, 3 Mar 2008 21:29:55 +0000
From: Alan Cox <>
Subject: Re: Weirdness in pci_read_bases()
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/3/3/510

> The main question regarding 0 in a BAR is do we know of devices that
> consider it as "disabled" and don't operate/decode 0 ? (That would be
> gross and out of spec but who knows...)
In the PC world it never gets tested so it might be wise to be cautious.
> But that can be solved, using something akin to IORESOURCE_UNSET, like
> we do on powerpc, generalizing it, and having an x86-specific quirk set
> it on anything that comes up with resource->start == 0.
And add pci_resource_unassigned() to wrap it nicely. That would
definitely be a good thing as we have confusion right now and it has
turned up in the real world.
Alan