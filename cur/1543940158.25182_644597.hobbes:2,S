Date: Mon, 28 Jan 2008 20:10:42 +0000
From: Zan Lynx <>
Subject: Re: Fwd: show label for swap partition.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/28/363

On Mon, 2008-01-28 at 14:58 -0500, Jason Price wrote:
> I apologize if this is the wrong forum.  Please CC me on replies.
> 
> A admin accidentally deleted the swap line from the fstab file.  We
> mount the swap filesystem via labels.  However, there seems to be no
> way to list the label on an existing swap partition, via the command
> line swap tools (mkswap, swapon/off, etc)
> 
> Is this blindness on my part, or should there be an analog to e2label
> for swap partitions?
There's this cheesy way to get it:
# dd if=swapfile bs=4k count=1 | xxd -a
1+0 records in
1+0 records out
4096 bytes (4.1 kB) copied, 6.2589e-05 s, 65.4 MB/s
0000000: 0000 0000 0000 0000 0000 0000 0000 0000  ................
*
0000400: 0100 0000 ffff 0000 0000 0000 f209 fce3  ................
0000410: 7bc9 486d ac86 5d63 af25 3c99 466c 6173  {.Hm..]c.%<.Flas
0000420: 6853 7761 7000 0000 0000 0000 0000 0000  hSwap...........
0000430: 0000 0000 0000 0000 0000 0000 0000 0000  ................
*
0000ff0: 0000 0000 0000 5357 4150 5350 4143 4532  ......SWAPSPACE2
You can see it is marked as SWAPSPACE2.  The label is FlashSwap.  Looks
like it appears at offset 0x41c.
-- 
Zan Lynx <zlynx@acm.org>
[unhandled content-type:application/pgp-signature]