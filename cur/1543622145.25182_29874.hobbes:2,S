Date: Fri, 22 Feb 2002 18:09:57 +0000
From: Jamie Lokier <>
Subject: Re: is CONFIG_PACKET_MMAP always a win?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/2/22/140

Dan Kegel wrote:
> c) enable CONFIG_PACKET_MMAP, use PACKET_RX_RING, and read packets from an mmap'd ring buffer
>    Overhead: kernel does a full memcpy of the packet body to get it
>    into the ring buffer, and my program does another to get it out.
I had a look at this about a year ago, and it seems there is no method
provided to read the packets without copying them, if you need them in
user space.
Probably the fastest way to process packets in user space is to use a
special protocol handler of your own that mmaps the area where packets
are already DMAd from the driver.  I have been known to suggest simply
mapping all 1GB of low kernel memory into user space for this :-)  I
haven't tried this, or writing the protocol handler, though.
cheers,
-- Jamie
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/