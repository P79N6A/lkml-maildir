Date: Thu, 20 Mar 2008 06:55:11 +0800
From: "Jaya Kumar" <>
Subject: Re: [PATCH 2/3] fbdev: Make deferred I/O work as advertized
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/3/19/525

On Thu, Mar 20, 2008 at 6:39 AM, Andrew Morton
<akpm@linux-foundation.org> wrote:
>
>  Well all we have in the changelog is
>
>   Implement support for the E-Ink Metronome controller.  It provides an
>   mmapable interface to the controller using defio support.  It was tested
>   with a gumstix pxa255 with Vizplex media using Xfbdev and various X
>   clients such as xeyes, xpdf, xloadimage.
>
>  grump.  This say nothing at all about the change to drivers/video/fb_defio.c.
I apologize. I should have done better.
>
>  a) the changelog _should_ document this change.  Please send a paragraph and
>    I'll add it.
This patch fixes the following bug. Defio would cause a hang on write
access to the framebuffer as the page fault would be called
ad-infinitum. It fixes fb_defio by setting the mapping to be used by
page_mkclean.
>
>  b) If this discussion hadn't happened, that bug (whatever it is) would
>    have remained unfixed in 2.6.25.  As a direct consequence of poor
>    changelogging.
Understood. The root cause of my flaw was my assumption that other
than me, there weren't any users of defio so I was in no hurry to get
it fixed.
>
>  c) This bugfix (whatever it is) should have been in a separate patch.
Understood. It won't happen again.
Thanks,
jaya