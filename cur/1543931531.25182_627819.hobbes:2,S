Date: Thu, 13 Dec 2007 16:59:11 -0500
From: Dave Jones <>
Subject: Fix implicit declaration in via-pmu.c
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/12/13/462

drivers/macintosh/via-pmu.c: In function 'register_pmu_pm_ops':
drivers/macintosh/via-pmu.c:2481: error: implicit declaration of function 'pm_set_ops'
Signed-off-by Dave Jones <davej@redhat.com>
--- linux-2.6.23.noarch/drivers/macintosh/via-pmu.c~	2007-11-07 16:54:46.000000000 -0500
+++ linux-2.6.23.noarch/drivers/macintosh/via-pmu.c	2007-11-07 16:55:02.000000000 -0500
@@ -2469,7 +2469,7 @@ static int pmu_sleep_valid(suspend_state
 		&& (pmac_call_feature(PMAC_FTR_SLEEP_STATE, NULL, 0, -1) >= 0);
 }
 
-static struct pm_ops pmu_pm_ops = {
+static struct platform_suspend_ops pmu_pm_ops = {
 	.prepare = powerbook_prepare_sleep,
 	.enter = powerbook_sleep,
 	.finish = powerbook_finish_sleep,
@@ -2478,7 +2478,7 @@ static struct pm_ops pmu_pm_ops = {
 
 static int register_pmu_pm_ops(void)
 {
-	pm_set_ops(&pmu_pm_ops);
+	suspend_set_ops(&pmu_pm_ops);
 
 	return 0;
 }
-- 
http://www.codemonkey.org.uk