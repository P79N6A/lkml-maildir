Date: Tue, 31 May 2005 10:05:33 +0200
From: Helge Hafting <>
Subject: Re: RAID-5 design bug (or misfeature)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/5/31/23

Mikulas Patocka wrote:
>
>I think that's another problem --- when RAID-5 is operating in degraded
>mode, the machine must not crash or volume will be damaged (sectors
>that were not written may be damaged this way). Did anybody develop some
>method to care about this (i.e. something like journaling on raid)? What
>do hardware RAID controllers do in this situation?
> 
>
Hot spares can keep the degraded time to a minimum.  If you want to
keep the risk to a minimum, unmount the raid fs until it is
resynchronized.  If you need more safety, there is options like raid-6
or mirrors of the entire raid-5 set.
Some hw controllers have a battery-backed cache.  Even a power loss
won't ruin the raid - the io will simply sit in that cache until the
disks become available again.  The io operation that was in effect when
power was lost can then be retried. Not that this saves you from everything,
the fs could be inconsistent anyway due to the os being killed in the
middle of its updates. A journalled fs can help with that though.
Helge Hafting
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/