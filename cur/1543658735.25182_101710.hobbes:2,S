Date: Thu, 9 Jan 2003 23:33:32 +0100
From: "Petr Vandrovec" <>
Subject: How build dependencies work/are supposed to work in 2.5.5x
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/1/9/241

Hi,
  I spent last few hours by patching 2.5.54-bk-something back and 
forward to shrink Juriaans patch which reinstates 2.5.50 fbdev. Sometime
during this course something happened, and I ended up with incorrect
build: some code was thinking that "struct vc_data" contains
"vc_font" element, and some parts believed that there is no such element,
and structure is 24 bytes smaller (shifting vc_origin somewhere, causing
crash during bootup) :-( (there was such element, then there was not,
and then element arrived back during evening)
  After I removed drivers/char/*.o and all .o from drivers/video subtree
and rerun "make", problem disappeared. During patching I never used -T/-Z 
option to patch to set dates/times on files and I also did not use -j option
to make.
  So I'd like to ask whether current kernel build system is supposed
to track changes in include files automagically, or whether I'm supposed
to run 'make dep' from time to time?
  When I tried to recreate problem (by doing "touch 
include/linux/console_struct.h"), all objects which use this file were
correctly rebuilt.
                                    Thanks,
                                        Petr Vandrovec
                                        vandrove@vc.cvut.cz
                                        
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/