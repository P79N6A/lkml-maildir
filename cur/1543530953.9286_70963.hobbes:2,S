Date: 20 Mar 2000 08:14:09 -0000
From: (Nick Holloway)
Subject: 2.3.99-pre1: request_module[ide-probe-mod]: Root fs not mounted
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/3/20/185

I've just built a test kernel for a Thinkpad 775C.  When it boots,
I get the above kernel message in the syslog repeated 12 times.
    Uniform Multi-Platform E-IDE driver Revision: 6.30
    ide: Assuming 50MHz system bus speed for PIO modes; override with idebus=xx
    request_module[ide-probe-mod]: Root fs not mounted
    request_module[ide-probe-mod]: Root fs not mounted
    request_module[ide-probe-mod]: Root fs not mounted
    request_module[ide-probe-mod]: Root fs not mounted
    request_module[ide-probe-mod]: Root fs not mounted
    request_module[ide-probe-mod]: Root fs not mounted
    request_module[ide-probe-mod]: Root fs not mounted
    request_module[ide-probe-mod]: Root fs not mounted
    request_module[ide-probe-mod]: Root fs not mounted
    request_module[ide-probe-mod]: Root fs not mounted
    request_module[ide-probe-mod]: Root fs not mounted
    request_module[ide-probe-mod]: Root fs not mounted
    hda: DHAA-2540, ATA DISK drive
    ide0 at 0x1f0-0x1f7,0x3f6 on irq 14
    hda: DHAA-2540, 515MB w/32kB Cache, CHS=1047/16/63
    Partition check:
     hda: hda1 hda2 hda3 < hda5 hda6 hda7 hda8 >
In my case, none of the IDE configuration is built modular, so requesting
the "ide-probe-mod" is the wrong thing to do, because it is already
compiled in.
    CONFIG_MODULES=y
    CONFIG_MODVERSIONS=y
    CONFIG_KMOD=y
    CONFIG_IDE=y
    CONFIG_BLK_DEV_IDE=y
    CONFIG_BLK_DEV_IDEDISK=y
I'm not sure of the best way to fix this, so no patch.  However, here
are some thoughts.
    * Change ide.c:ide_probe_module to only request the module if
      CONFIG_KMOD and CONFIG_BLK_DEV_IDE_MODULE are true.
    * Change ide.c so that ideprobe_init() is called early, so ide_probe
      gets set before ide_probe_module is called.
    * Change ide-probe.c so that ide_probe_init is called early (similar to
      above).
-- 
 `O O'  | Nick.Holloway@alfie.demon.co.uk
// ^ \\ | 
http://www.alfie.demon.co.uk/
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/