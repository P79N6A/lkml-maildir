Date: Sun, 04 Sep 2005 15:57:38 -0700
From: Howard Chu <>
Subject: 2.6, devfs, SMP, SATA
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/9/4/148

Yesterday I replaced the Winchester 3000+ in my Asus A8v-Deluxe with an 
AMD X2 3800+. I had been running a 2.6.12.3 kernel without SMP support. 
After installing the new CPU I booted up with no trouble and 
reconfigured/recompiled with SMP support. However, upon installing this 
kernel, I was unable to boot.
The system's root partition is striped using software raid0, composed of 
two partitions on two separate SATA drives. For some reason the block 
device files for the second drive were not being automatically created 
in /dev, so the array could not be created properly, it only found one 
of the two partitions. After a bunch of screwing around to find out what 
was going on, I finally wound up adding a bunch of explicit mknod 
commands in my initrd's linuxrc, and that fixed the problem.
Of course, the system only stayed up for a minute or less, and then 
crashed with an OOPS. I went back to my uniprocessor kernel, downloaded 
2.6.13, built that with SMP, again found that I needed to insert 
explicit mknod's for the second SATA drive, and finally have a stably 
running system.
So, any guesses why with otherwise identical config options, a kernel 
with SMP enabled doesn't boot up with all of the device nodes that it 
should? (Both drives are on the same controller. I haven't checked to 
see if any other device files are missing.)
-- 
  -- Howard Chu
  Chief Architect, Symas Corp.  
http://www.symas.com
  Director, Highland Sun        
http://highlandsun.com/hyc
  OpenLDAP Core Team            
http://www.openldap.org/project/
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/