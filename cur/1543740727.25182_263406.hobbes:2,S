Date: Fri, 22 Oct 2004 09:36:40 -0700
From: "Pallipadi, Venkatesh" <>
Subject: RE: [Linux-fbdev-devel] Re: Generic VESA framebuffer driver and Video card BOOT?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/10/22/220

>-----Original Message-----
>From: Matthew Garrett [mailto:mgarrett@chiark.greenend.org.uk] 
>Sent: Thursday, October 21, 2004 6:39 PM
>To: Pallipadi, Venkatesh
>Cc: linux-kernel@vger.kernel.org
>Subject: Re: [Linux-fbdev-devel] Re: Generic VESA framebuffer 
>driver and Video card BOOT?
>
>Pallipadi, Venkatesh <venkatesh.pallipadi@intel.com> wrote:
>
>Hi,
>
>> Even I thought so. But, with the emulator it doesn't hang. It brings 
>> back my video. I double checked this using another vm86 
>emulator too. 
>> No hang even there. I couldn't figure out why Ole's patch won't work 
>> though. Right now I am using call_usermodehelper() to call the 
>> emulator during resume and the video comes back just fine on this 
>> system where Ole's patch didn't work.
>
>Is it possible to get this patch and code off you? I'd be interested in
>testing this solution on various bits of hardware I've been working on.
>
Actually I sent the kernel patch to call some userlevel vgapost utility 
on this same thread around a week back. I am sending it here again. 
I don't think sending a big userlevel code tar file is appropriate on
lkml. 
I will send that in a separate mail to Matthew and Stefan. If anyone
else 
wants to play with it, just let me know.
It works for me on various systems with Radeon card. It didn't help on 
systems with Intel Graphics card.
Stefan: Yes. Usermodehelper won't work during the driver resume. But, it
works later after the kernel threads are woken up. With attached patch
and
with user level vgapost I can get video back, both on X and VGA console.
It doesn't help with framebuffer, as the framebuffer reinitialization 
happens during the driver resume, which is earlier than this vgapost
call.
Thanks,
Venki
[unhandled content-type:application/octet-stream]