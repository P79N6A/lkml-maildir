Date: Mon, 11 Jun 2007 17:08:27 -0400
From: Robin Getz <>
Subject: Re: [PATCH, RFD]: Unbreak no-mmu mmap
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/6/11/288

On Sat 9 Jun 2007 15:10, Matt Mackall pondered:
> On Fri, Jun 08, 2007 at 03:53:49PM +0200, Bernd Schmidt wrote:
> > 2. It is no longer possible to get blocks smaller than a page through
> >    mmap.  This behaviour was used by simplemalloc, which is an insane
> >    way of implementing malloc on nommu systems and hopefully not used
> >    by anyone anymore.
> 
> That's worrisome. Breaking existing apps/libraries seems like a bad
> idea.
It is a bad idea - but on noMMU - breaking existing apps/libraries is 
(unfortunately) a pretty common thing...
  - the standard distribution - uClinux - rebuilds all things : kernel, apps,
     libc, shell, etc which run on the target - everytime you type 'make'
 - the standard library - uClibc - has little concept of binary 
     compatibility, and has none in their years of releasing things.
     (which is OK, since everything is re-built with a simple 'make' anyway)
Plus - what Bernd talked about - uClibc's simple malloc, isn't used that often 
(at all that I am aware of), on any modern uClibc systems. The overhead of 
calling the kernel to manage memory kills performance.
As a user of the kernel in a noMMU environment - I would rather have Bernd's 
patch - which makes things closer to a MMU environment - and allows standard 
applications to work better (at all) - rather than backwards binary 
compatibility.
-Robin
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/