Date: Tue, 24 Aug 2004 04:37:39 -0700
From: "jdow" <>
Subject: Amiga partition reading patch
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/8/24/88

This is a patch known good against Mandrake 2.6.3-7mdk. I suspect it will
apply to later versions equally well since the file affected appears to
be unchanged as late as 2.6.9-rc1.
I have a large archive of files stored on Amiga volumes. Many of these
volumes are on Fujitsu magneto-optical disks with 2k sector size. The
existing partitioning code cannot properly read them since it appears
the OS automatically deblocks the large sectors into logical 512 byte
sectors, something AmigaDOS never did. I arranged the partitioning code
to handle this situation.
Second I have some rather strange test case disks, including my largest
storage partition, that have somewhat unusual partition values. As such
I needed additional information in addition to the first and last block
number information. AmigaDOS reserves N blocks, with N greater than or
equal to 1 and less than the size of the partition, for some boot time
information and signatures. I have some partitions that use other than
the usual value of 2.
There is one more "fix" that could be put in if someone needs it. Another
value in the "Rigid Disk Blocks" description of a partition is a "PreAlloc"
value. It defines a number of blocks at the end of the disk that are not
considered to be a real part of the partition. This was "important" in
the days of 20 meg and 40 meg hard disks. It is hardly important and not
used on modern drives without special user intervention.
This partitioning information is known correct. I wrote the low level
portion of the hard disk partitioning code for AmigaDOS 3.5 and 3.9. I
am also responsible for one of the more frequently used partitioning
tools, RDPrepX, before that.
Please consider adding this to the build tree as a completeness item.
Thank you.
{^_^}   Joanne Dow, jdow@earthlink.net
        (I tried submitting this to Roland a couple times now and
        nothing happened so I am submitting it to the list.)
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/