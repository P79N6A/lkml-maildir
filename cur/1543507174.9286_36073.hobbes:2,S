Date: Fri, 27 Aug 1999 11:09:16 +0000
From: Colin May <>
Subject: Re: 2.0.38pre1 query/problem
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/8/27/17

Quoting Alan Cox (Wed, Aug 25, 1999 at 01:07:26PM +0100)
> Someone passed garbage to the network stack. That is a driver misbehaving
> almost certainly. Could by the tulip 0.91 driver, more likely to be isdn.
Ok, I dropped back to the 0.90 tulip driver that comes with the kernel 
rather than upgrading to the 0.91. After a day's grace, the kernel is 
continuing to kernel crash with the following errors:
Aug 27 10:07:27 gate-isdn kernel: Warning: kfree_skb passed an skb still on a list (from 01eea174).
Aug 27 10:07:27 gate-isdn kernel: general protection: 0000
Aug 27 10:07:27 gate-isdn kernel: CPU:    0
Aug 27 10:07:27 gate-isdn kernel: EIP:    0010:[<00000004>]
Aug 27 10:07:27 gate-isdn kernel: EFLAGS: 00010202
Aug 27 10:07:27 gate-isdn kernel: eax: 00000000   ebx: 001b85c8   ecx: 01eea174   edx: 0378c810
Aug 27 10:07:27 gate-isdn kernel: esi: 01eea134   edi: 00000000   ebp: 033f6f80   esp: 033f6f18
Aug 27 10:07:27 gate-isdn kernel: ds: 0018   es: 0018   fs: 002b   gs: 002b   ss: 0018
Aug 27 10:07:27 gate-isdn kernel: Process nacctd (pid: 359, process nr: 16, stackpage=033f6000)
Aug 27 10:07:27 gate-isdn kernel: Stack: 00139223 001b85c8 001b85c8 01eea174 00139523 001b85c8 01eea174 01eea174
Aug 27 10:07:27 gate-isdn kernel:        01eea134 00000040 00140b52 01eea174 00000000 00000000 01eea174 001b109c
Aug 27 10:07:27 gate-isdn kernel:        00000000 00139557 00000000 00000000 00000000 002b9700 0014008a f0b45cc3
Aug 27 10:07:27 gate-isdn kernel: Call Trace: [sock_wfree+35/44] [kfree_skb+183/244] [ip_rcv+1370/1388] [kfree_skb+235/244] [packet_rcv+102/188]
+[net_bh+252/284] [do_bottom_half+59/96]
Aug 27 10:07:27 gate-isdn kernel:        [handle_bottom_half+11/24]
Aug 27 10:07:27 gate-isdn kernel: Code: d0 9b 00 f0 c3 e2 00 f0 d0 9b 00 f0 d0 9b 00 f0 54 ff 00 f0
Aug 27 10:07:27 gate-isdn kernel: Aiee, killing interrupt handler
Aug 27 10:28:36 gate-isdn kernel: Warning: kfree_skb passed an skb still on a list (from 00fdb36c).
Aug 27 10:28:36 gate-isdn kernel: general protection: 0000
Aug 27 10:28:36 gate-isdn kernel: CPU:    0
Aug 27 10:28:36 gate-isdn kernel: EIP:    0010:[<00000004>]
Aug 27 10:28:36 gate-isdn kernel: EFLAGS: 00010202
Aug 27 10:28:36 gate-isdn kernel: eax: 00000000   ebx: 001b85c8   ecx: 00fdb36c   edx: 0378c810
Aug 27 10:28:36 gate-isdn kernel: esi: 00fdb32c   edi: 00000000   ebp: 001acf14   esp: 001aceac
Aug 27 10:28:36 gate-isdn kernel: ds: 0018   es: 0018   fs: 002b   gs: 0018   ss: 0018
Aug 27 10:28:36 gate-isdn kernel: Process swapper (pid: 0, process nr: 0, stackpage=001aaffc)
Aug 27 10:28:36 gate-isdn kernel: Stack: 00139223 001b85c8 001b85c8 00fdb36c 00139523 001b85c8 00fdb36c 00fdb36c
Aug 27 10:28:36 gate-isdn kernel:        00fdb32c 00000040 00140b52 00fdb36c 00000000 00000000 00fdb36c 001b109c
Aug 27 10:28:36 gate-isdn kernel:        01dda628 00fdb35c 00000000 00000000 00000000 00000200 001b85c8 f0b45cc3
Aug 27 10:28:36 gate-isdn kernel: Call Trace: [sock_wfree+35/44] [kfree_skb+183/244] [ip_rcv+1370/1388] [net_bh+252/284] [do_bottom_half+59/96]
[handle_bottom_half+11/24] [sys_idle+92/112]
Aug 27 10:28:36 gate-isdn kernel:        [system_call+85/124] [init+0/624] [pm_address+424/464] [start_kernel+429/440]
Aug 27 10:28:36 gate-isdn kernel: Code: d0 9b 00 f0 c3 e2 00 f0 d0 9b 00 f0 d0 9b 00 f0 54 ff 00 f0
Aug 27 10:28:36 gate-isdn kernel: Aiee, killing interrupt handler
Aug 27 10:28:36 gate-isdn kernel: kfree of non-kmalloced memory: 001ad044, next= 00000000, order=39
Aug 27 10:28:36 gate-isdn kernel: kfree of non-kmalloced memory: 001ad034, next= 00000000, order=39
Aug 27 10:28:36 gate-isdn kernel: kfree of non-kmalloced memory: 001ad548, next= 00000000, order=39
Aug 27 10:28:36 gate-isdn kernel: idle task may not sleep
Aug 27 10:28:36 gate-isdn last message repeated 4 times
Any more ideas?  I've noticed it's only generally happened on the process
swapper, nacctd, and squid.  Any help would be appricated, I'm lost to the
cause and the solution.
Thanks for any help,
Colin.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/