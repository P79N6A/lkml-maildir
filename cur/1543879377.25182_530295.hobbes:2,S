Date: Thu, 12 Apr 2007 16:27:41 -0500
From: "Mike Miller (OS Dev)" <>
Subject: [PATCH 1/1] cciss: kconfig patch to make cciss dependent on scsi for SG_IO ioctl
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/4/12/313

PATCH 1/1
This kconfig patch makes cciss dependent on scsi for the new SG_IO ioctl we just
added. If cciss is built into the kernel it makes sures that scsi is also statically
linked. If scsi is a module then cciss will also be built as a module. Please consider
this for inclusion.
Signed-off-by: Stephen M. Cameron <steve.cameron@hp.com>
Signed-off-by: Mike Miller <mike.miller@hp.com>
------------------------------------------------------------------------------------------
 block/cciss.c         |    0 
 drivers/block/Kconfig |    2 +-
 2 files changed, 1 insertion(+), 1 deletion(-)
diff -puN drivers/block/cciss.c~cciss_sg_io_kconfig drivers/block/cciss.c
diff -puN drivers/block/Kconfig~cciss_sg_io_kconfig drivers/block/Kconfig
--- linux-2.6.21-rc6/drivers/block/Kconfig~cciss_sg_io_kconfig	2007-04-12 08:16:45.000000000 -0500
+++ linux-2.6.21-rc6-scameron/drivers/block/Kconfig	2007-04-12 08:20:41.000000000 -0500
@@ -152,6 +152,7 @@ config BLK_CPQ_DA
 config BLK_CPQ_CISS_DA
 	tristate "Compaq Smart Array 5xxx support"
 	depends on PCI
+	depends on SCSI
 	help
 	  This is the driver for Compaq Smart Array 5xxx controllers.
 	  Everyone using these boards should say Y here.
@@ -162,7 +163,6 @@ config BLK_CPQ_CISS_DA
 config CISS_SCSI_TAPE
 	bool "SCSI tape drive support for Smart Array 5xxx"
 	depends on BLK_CPQ_CISS_DA && PROC_FS
-	depends on SCSI=y || SCSI=BLK_CPQ_CISS_DA
 	help
 	  When enabled (Y), this option allows SCSI tape drives and SCSI medium
 	  changers (tape robots) to be accessed via a Compaq 5xxx array 
_
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/