Date: Sat, 8 May 1999 00:48:24 +0100 (GMT)
From: Riley Williams <>
Subject: 2.2.7 Configuration cleanup
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/5/7/197

Hi there.
Personally, I find the 2.2.7 menu structure rather awkward to navigate
due to the length of some of its menus, so I would like to propose a
slight rearrangement thereof, as per the enclosed patch.
Basically, it makes the following changes:
 1. The 'Code maturity level' and 'Loadable module support' submenus
    have been merged into a 'Code layout' submenu, placed before the
    submenu that they straddle. I have to admit that I'm not overly
    fond of the name of this new submenu, but I can't see any point
    in having two such short and fixed submenus, and I haven't been
    able to come up with a better name for it...
 2. The 'General options' submenu is in my opinion far too large, so
    has been split into three parts, labelled 'System bus support',
    'Advanced Power Management support' and 'General options'.
 3. The existing 'Processor type and features' submenu, together with
    the 'System bus support' and 'Advanced Power Management support'
    submenus created in item 2 above, have been moved to a new submenu
    entitled 'Main board settings'. I know some systems have the cpu
    on an expansion card, so this name isn't perfect, but it's the
    best I have been able to come up with.
 4. In the 'Block devices' submenu, the options relating to support
    for various chipsets with buggy IDE interfaces has been moved to
    a new submenu entitled 'Buggy IDE chipset support'.
    In addition, a redundant if...fi clause has been removed - the if
    on line 26 is inside the else part of the if on line 17, and as
    they make opposing tests, the if on line 26 must always evaluate
    true as a result.
 5. In the 'Networking options' submenu, the various options relating
    to tunnelling have been grouped together into a separate group,
    with a new option CONFIG_NET_TUNNELLING whose only purpose is to
    determine whether the options relating to tunnelling are skipped.
    The relevant help text in Configure.help is also included.
Note that no options have been deleted - this is simply a partial
rationalisation of the existing options - but I would appreciate
comments on the ones I've done...
Best wishes from Riley.
+----------------------------------------------------------------------+
| There is something frustrating about the quality and speed of Linux  |
| development, ie., the quality is too high and the speed is too high, |
| in other words, I can implement this XXXX feature, but I bet someone |
| else has already done so and is just about to release their patch.   |
+----------------------------------------------------------------------+
 * 
ftp://ftp.MemAlpha.cx/pub/rhw/Linux
 * 
http://www.MemAlpha.cx/kernel.versions.html
--- linux-2.2.7/arch/i386/config.in~	Mon Apr 26 21:49:17 1999
+++ linux-2.2.7/arch/i386/config.in	Fri May  7 23:35:21 1999
@@ -5,11 +5,23 @@
 mainmenu_name "Linux Kernel Configuration"
 
 mainmenu_option next_comment
+comment 'Code layout options'
+
 comment 'Code maturity level options'
 bool 'Prompt for development and/or incomplete code/drivers' CONFIG_EXPERIMENTAL
+
+comment 'Processor type and features'
+bool 'Enable loadable module support' CONFIG_MODULES
+if [ "$CONFIG_MODULES" = "y" ]; then
+  bool 'Set version information on all symbols for modules' CONFIG_MODVERSIONS
+  bool 'Kernel module loader' CONFIG_KMOD
+fi
 endmenu
 
 mainmenu_option next_comment
+comment 'Main board settings'
+
+mainmenu_option next_comment
 comment 'Processor type and features'
 choice 'Processor family' \
 	"386			CONFIG_M386	\
@@ -32,25 +44,13 @@
 if [ "$CONFIG_M686" = "y" ]; then
   define_bool CONFIG_X86_GOOD_APIC y
 fi
-
 bool 'Math emulation' CONFIG_MATH_EMULATION
 bool 'MTRR (Memory Type Range Register) support' CONFIG_MTRR
 bool 'Symmetric multi-processing support' CONFIG_SMP
 endmenu
 
 mainmenu_option next_comment
-comment 'Loadable module support'
-bool 'Enable loadable module support' CONFIG_MODULES
-if [ "$CONFIG_MODULES" = "y" ]; then
-  bool 'Set version information on all symbols for modules' CONFIG_MODVERSIONS
-  bool 'Kernel module loader' CONFIG_KMOD
-fi
-endmenu
-
-mainmenu_option next_comment
-comment 'General setup'
-
-bool 'Networking support' CONFIG_NET
+comment 'System bus support'
 bool 'PCI support' CONFIG_PCI
 if [ "$CONFIG_PCI" = "y" ]; then
   choice 'PCI access mode' \
@@ -70,6 +70,7 @@
   bool '   Backward-compatible /proc/pci' CONFIG_PCI_OLD_PROC
 fi
 bool 'MCA support' CONFIG_MCA
+
 bool 'SGI Visual Workstation support' CONFIG_VISWS
 if [ "$CONFIG_VISWS" = "y" ]; then
   define_bool CONFIG_X86_VISWS_APIC y
@@ -81,6 +82,30 @@
   fi
 fi
 
+endmenu
+
+mainmenu_option next_comment
+comment 'Advanced Power Management support'
+bool 'Advanced Power Management BIOS support' CONFIG_APM
+if [ "$CONFIG_APM" = "y" ]; then
+  bool '   Ignore USER SUSPEND' CONFIG_APM_IGNORE_USER_SUSPEND
+  bool '   Enable PM at boot time' CONFIG_APM_DO_ENABLE
+  bool '   Make CPU Idle calls when idle' CONFIG_APM_CPU_IDLE
+  bool '   Enable console blanking using APM' CONFIG_APM_DISPLAY_BLANK
+  bool '   Power off on shutdown' CONFIG_APM_POWER_OFF
+  bool '   Ignore multiple suspend' CONFIG_APM_IGNORE_MULTIPLE_SUSPEND
+  bool '   Ignore multiple suspend/resume cycles' CONFIG_APM_IGNORE_SUSPEND_BOUNCE
+  bool '   RTC stores time in GMT' CONFIG_APM_RTC_IS_GMT
+  bool '   Allow interrupts during APM BIOS calls' CONFIG_APM_ALLOW_INTS
+fi
+endmenu
+
+endmenu
+
+mainmenu_option next_comment
+comment 'General setup'
+
+bool 'Networking support' CONFIG_NET
 bool 'System V IPC' CONFIG_SYSVIPC
 bool 'BSD Process Accounting' CONFIG_BSD_PROCESS_ACCT
 bool 'Sysctl support' CONFIG_SYSCTL
@@ -98,20 +123,6 @@
     bool '   Support foreign hardware' CONFIG_PARPORT_OTHER
   fi
 fi
-
-bool 'Advanced Power Management BIOS support' CONFIG_APM
-if [ "$CONFIG_APM" = "y" ]; then
-  bool '   Ignore USER SUSPEND' CONFIG_APM_IGNORE_USER_SUSPEND
-  bool '   Enable PM at boot time' CONFIG_APM_DO_ENABLE
-  bool '   Make CPU Idle calls when idle' CONFIG_APM_CPU_IDLE
-  bool '   Enable console blanking using APM' CONFIG_APM_DISPLAY_BLANK
-  bool '   Power off on shutdown' CONFIG_APM_POWER_OFF
-  bool '   Ignore multiple suspend' CONFIG_APM_IGNORE_MULTIPLE_SUSPEND
-  bool '   Ignore multiple suspend/resume cycles' CONFIG_APM_IGNORE_SUSPEND_BOUNCE
-  bool '   RTC stores time in GMT' CONFIG_APM_RTC_IS_GMT
-  bool '   Allow interrupts during APM BIOS calls' CONFIG_APM_ALLOW_INTS
-fi
-
 endmenu
 
 source drivers/pnp/Config.in
--- linux-2.2.7/drivers/block/Config.in~	Tue Dec 29 19:21:49 1998
+++ linux-2.2.7/drivers/block/Config.in	Fri May  7 23:50:42 1999
@@ -18,12 +18,10 @@
   bool 'Old hard disk (MFM/RLL/IDE) driver' CONFIG_BLK_DEV_HD_ONLY
 else
   bool '   Use old disk-only driver on primary interface' CONFIG_BLK_DEV_HD_IDE
-  dep_tristate '   Include IDE/ATA-2 DISK support' CONFIG_BLK_DEV_IDEDISK $CONFIG_BLK_DEV_IDE
-  dep_tristate '   Include IDE/ATAPI CDROM support' CONFIG_BLK_DEV_IDECD $CONFIG_BLK_DEV_IDE
-  dep_tristate '   Include IDE/ATAPI TAPE support' CONFIG_BLK_DEV_IDETAPE $CONFIG_BLK_DEV_IDE
-  dep_tristate '   Include IDE/ATAPI FLOPPY support' CONFIG_BLK_DEV_IDEFLOPPY $CONFIG_BLK_DEV_IDE
-  dep_tristate '   SCSI emulation support' CONFIG_BLK_DEV_IDESCSI $CONFIG_BLK_DEV_IDE
-  if [ "$CONFIG_BLK_DEV_IDE" != "n" ]; then
+
+  mainmenu_option next_comment
+  comment 'Buggy IDE chipset support'
+
     bool '   CMD640 chipset bugfix/support' CONFIG_BLK_DEV_CMD640
     if [ "$CONFIG_BLK_DEV_CMD640" = "y" ]; then
       bool '     CMD640 enhanced support' CONFIG_BLK_DEV_CMD640_ENHANCED
@@ -74,7 +72,14 @@
 	 fi
       fi
     fi
-  fi
+
+  endmenu
+
+  dep_tristate '   Include IDE/ATA-2 DISK support' CONFIG_BLK_DEV_IDEDISK $CONFIG_BLK_DEV_IDE
+  dep_tristate '   Include IDE/ATAPI CDROM support' CONFIG_BLK_DEV_IDECD $CONFIG_BLK_DEV_IDE
+  dep_tristate '   Include IDE/ATAPI TAPE support' CONFIG_BLK_DEV_IDETAPE $CONFIG_BLK_DEV_IDE
+  dep_tristate '   Include IDE/ATAPI FLOPPY support' CONFIG_BLK_DEV_IDEFLOPPY $CONFIG_BLK_DEV_IDE
+  dep_tristate '   SCSI emulation support' CONFIG_BLK_DEV_IDESCSI $CONFIG_BLK_DEV_IDE
 fi
 if [ "$CONFIG_MCA" = "y" ]; then
   tristate 'PS/2 ESDI hard disk support' CONFIG_BLK_DEV_PS2
--- linux-2.2.7/net/ipv4/Config.in~	Sun Mar 21 15:22:00 1999
+++ linux-2.2.7/net/ipv4/Config.in	Sat May  8 00:20:46 1999
@@ -57,16 +57,21 @@
   fi
 fi
 bool 'IP: optimize as router not host' CONFIG_IP_ROUTER
-tristate 'IP: tunneling' CONFIG_NET_IPIP
-tristate 'IP: GRE tunnels over IP' CONFIG_NET_IPGRE
-if [ "$CONFIG_IP_MULTICAST" = "y" ]; then
+bool 'Tunnelling support' CONFIG_NET_TUNNELLING
+if [ "$CONFIG_NET_TUNNELLING" = "y" ]; then
+  tristate '  GRE tunnels over IP' CONFIG_NET_IPGRE
   if [ "$CONFIG_NET_IPGRE" != "n" ]; then
-    bool 'IP: broadcast GRE over IP' CONFIG_NET_IPGRE_BROADCAST
+    if [ "$CONFIG_IP_MULTICAST" = "y" ]; then
+      bool '    Broadcast GRE over IP' CONFIG_NET_IPGRE_BROADCAST
+    fi
   fi
-  bool 'IP: multicast routing' CONFIG_IP_MROUTE
+  tristate '  IP tunnels over IP' CONFIG_NET_IPIP
+fi
+if [ "$CONFIG_IP_MULTICAST" = "y" ]; then
+  bool 'IP: Multicast routing' CONFIG_IP_MROUTE
   if [ "$CONFIG_IP_MROUTE" = "y" ]; then
-    bool 'IP: PIM-SM version 1 support' CONFIG_IP_PIMSM_V1
-    bool 'IP: PIM-SM version 2 support' CONFIG_IP_PIMSM_V2
+    bool '  IP: PIM-SM version 1 support' CONFIG_IP_PIMSM_V1
+    bool '  IP: PIM-SM version 2 support' CONFIG_IP_PIMSM_V2
   fi
 fi
 bool 'IP: aliasing support' CONFIG_IP_ALIAS
--- linux-2.2.7/Documentation/Configure.help~	Tue Apr 20 23:17:20 1999
+++ linux-2.2.7/Documentation/Configure.help	Sat May  8 00:35:19 1999
@@ -2392,7 +2392,17 @@
   operating on your network. Read Documentation/nfsroot.txt for
   details.
 
-IP: tunneling
+IP: Tunnelling
+CONFIG_NET_TUNNELLING
+  Tunneling means encapsulating data of one protocol type within
+  another protocol and sending it over a channel that understands the
+  encapsulating protocol. If you wish to enable tunnelling, say Y.
+
+  Note that the answer to this question doesn't directly affect the
+  kernel: saying N will just cause this configure script to skip all
+  the questions relating to tunnelling.
+
+IP: IP tunnels over IP
 CONFIG_NET_IPIP
   Tunneling means encapsulating data of one protocol type within
   another protocol and sending it over a channel that understands the