Date: Thu, 29 May 2003 15:24:31 +0200
From: Andrea Arcangeli <>
Subject: Re: 2.4.20: Proccess stuck in __lock_page ...
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/5/29/90

On Thu, May 29, 2003 at 12:00:11AM +1000, Con Kolivas wrote:
> On Wed, 28 May 2003 20:23, Andrew Morton wrote:
> > Could you please work out which change caused it?  Go back to stock 2.4 and
> > then apply this:
> >
> [snip] 1
> 
> > then this:
> [snip] 2
> 
> > Then this (totally unlikely, don't bother):
> [snip] 3
> 
> Ok patch combination final score for me is as follows in the presence of a 
> large continuous write:
> 1 No change
> 2 No change
> 3 improvement++; minor hangs with reads
> 1+2 improvement+++; minor pauses with switching applications
> 1+2+3 improvement++++; no pauses
then please try 1+2 alone too (i.e. w/o 3), because it's not obvious to me
that you're really the race in 3 in a single write (I spotted and just
fixed such a race in my tree some months ago, but thought it was a
theoretical one only, I mean on x86).
The improvement++ might be just an emotional feeling if you didn't
generate numbers to measure it (I know on myself it can happen when you
try a new patch, that everything seems faster until you really measure
it ;).
> Applications may start up slowly that's fine. The mouse cursor keeps spinning 
> and responding at all times though with 1+2+3 which it hasn't done in 2.4 for 
the mouse cursor always worked and still works fine for me (and I was
just running with 3 applied, just to get the theretical bit correct).
> a year or so.
> 
> Con
Andrea
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/