Date: Tue, 19 Sep 2000 13:53:24 -0500
From: Ryan Tokarek <>
Subject: Linux kernel 2.2.17 appears not support >512M RAM Disk
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/9/19/124

On Linux kernel 2.2.17 running on an intel PIII system with 1GB RAM I 
cannot successfully create a ramdisk of greater than 512MB. The relevant 
kernel parameter (CONFIG_BLK_DEV_RAM_SIZE) was set to 737280 before 
rebuilding the kernel. 
So I do the following from the command line:
dd bs=1024 if=/dev/zero of=/dev/ram0 count=737280
mke2fs /dev/ram0 524288
mount /dev/ram0 /ramdisk
This works, but if I increase the size passed to mke2fs beyond 524288 
(like to 700 megs or so... or anything in between), mke2fs succeeds, but 
mount does not! This happens even after a clean reboot. 
mount returns an error on the console of:
EXT2-fs: Magic mismatch, very weird!
mount: wrong fs type, bad option, bad superblock on /dev/ram0, 
       or too many mounted file systems.
/proc/meminfo indicates that a huge chunk of RAM has been set aside for 
buffers, but mount can't apparently make anything of what's there. 
I can try and provide more info if anybody would like. I'm rather stuck. 
Can anybody offer some insight as to a solution?
Also, if I'm sending this to the wrong place, please redirect me. 
Thanks
Ryan Tokarek
Unix SysAdmin
Wolfram Research
(not speaking for my employer)
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/