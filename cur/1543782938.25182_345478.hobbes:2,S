Date: Tue, 30 Aug 2005 16:43:46 +1000
From: Benjamin Herrenschmidt <>
Subject: Re: Ignore disabled ROM resources at setup
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/8/30/33

On Mon, 2005-08-29 at 22:32 -0700, David S. Miller wrote:
> From: Jon Smirl <jonsmirl@gmail.com>
> Date: Tue, 30 Aug 2005 00:35:11 -0400
> 
> > As far as I can tell no one has built recent hardware this way. But I
> > believe there are some old SCSI controllers that do this. I provided a
> > ROM API for disabling sysfs access, if we identify one of these cards
> > we should just add a call to it's driver to disable ROM access instead
> > of bothering with the copy. Currently the copy is not being used
> > anywhere in the kernel.
> 
> Qlogic ISP is one such card, but there are several others.
> 
> I think enabling the ROM is a very bad idea, since we in fact
> know it disables the I/O and MEM space decoders on a non-empty
> set of PCI cards.
This is why pci_map_rom is under driver control. There is still a
potential issue with userland using the "rom" file in sysfs, which is
why we probably should cleanup the pci_map_rom_copy to have the kernel
read the ROM once & backstore it upon request from the driver so that
further userland accesses will not toggle the real ROM enable.
Ben.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/