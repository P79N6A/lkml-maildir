Date: Sun, 24 Jun 2007 22:31:48 +0200
From: Ingo Molnar <>
Subject: Re: [patch] CFS scheduler, -v18
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/6/24/114

* Willy Tarreau <w@1wt.eu> wrote:
> > > I have no idea about what version brought that unexpected 
> > > behaviour, but it's clearly something which needs to be tracked 
> > > down.
> > 
> > hm, the two problems might be related. Could you try v17 perhaps? In 
> > v18 i have 'unified' all the sched.c's between the various kernel 
> > releases, maybe that brought in something unexpected on 2.6.20.14. 
> > (perhaps try v2.6.21.5 based cfs too?)
> 
> Well, forget this, I'm nuts. I'm sorry, but I did not set any of the 
> -R and -S parameter on ocbench, which means that all the processes ran 
> at full speed and did not sleep. The load distribution was not fair, 
> but since they put a lot of stress on the X server, I think it might 
> be one of the reasons for the unfairness. I got the same behaviour 
> with -v17, -v9 and even 2.4 ! It told me something was wrong on my 
> side ;-)
> 
> I've retried with 50%/50% run/sleep, and it now works like a charm. 
> It's perfectly smooth with both small and long run/sleep times 
> (between 1 and 100 ms). I think that with X saturated, it might 
> explain why I only had one CPU running at 100% !
ah, great! :-) My testbox needs a 90% / 10% ratio between sleep/run for 
an 8x8 matrix of ocbench tasks to not overload the X server. Once the 
overload happens X starts penalizing certain clients it finds abusive (i 
think), and that mechanism seems to be wall-clock based and it thus 
brings in alot of non-determinism and skews the clients.
	Ingo
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/