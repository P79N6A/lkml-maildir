Date: Wed, 02 Feb 2005 09:49:20 -0800
From: Dave Hansen <>
Subject: Re: Memory leak in 2.6.11-rc1?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/2/2/117

I think there's still something funky going on in the pipe code, at
least in 2.6.11-rc2-mm2, which does contain the misordered __free_page()
fix in pipe.c.  I'm noticing any leak pretty easily because I'm
attempting memory removal of highmem areas, and these apparently leaked
pipe pages the only things keeping those from succeeding.
In any case, I'm running a horribly hacked up kernel, but this is
certainly a new problem, and not one that I've run into before.  Here's
output from the new CONFIG_PAGE_OWNER code:
Page (e0c4f8b8) pfn: 00566606 allocated via order 0
[0xc0162ef6] pipe_writev+542
[0xc0157f48] do_readv_writev+288
[0xc0163114] pipe_write+0
[0xc0134484] ltt_log_event+64
[0xc0158077] vfs_writev+75
[0xc01581ac] sys_writev+104
[0xc0102430] no_syscall_entry_trace+11
And some more information about the page (yes, it's in the vmalloc
space)
page: e0c4f8b8
pfn: 0008a54e 566606
count: 1
mapcount: 0
index: 786431
mapping: 00000000
private: 00000000
lru->prev: 00200200
lru->next: 00100100
        PG_locked:      0
        PG_error:       0
        PG_referenced:  0
        PG_uptodate:    0
        PG_dirty:       0
        PG_lru: 0
        PG_active:      0
        PG_slab:        0
        PG_highmem:     1
        PG_checked:     0
        PG_arch_1:      0
        PG_reserved:    0
        PG_private:     0
        PG_writeback:   0
        PG_nosave:      0
        PG_compound:    0
        PG_swapcache:   0
        PG_mappedtodisk:        0
        PG_reclaim:     0
        PG_nosave_free: 0
        PG_capture:     1
-- Dave
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/