Date: Wed, 15 Nov 2006 06:23:19 -0500
From: Steve Dickson <>
Subject: Re: [PATCH 06/19] FS-Cache: NFS: Only obtain cache cookies on file open, not on inode read
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/11/15/102

David Howells wrote:
> diff --git a/include/linux/nfs_fs.h b/include/linux/nfs_fs.h
> index 5ead2bf..b2e5e86 100644
> --- a/include/linux/nfs_fs.h
> +++ b/include/linux/nfs_fs.h
> @@ -205,6 +205,7 @@ #define NFS_INO_REVALIDATING	(0)		/* rev
>  #define NFS_INO_ADVISE_RDPLUS	(1)		/* advise readdirplus */
>  #define NFS_INO_STALE		(2)		/* possible stale inode */
>  #define NFS_INO_ACL_LRU_SET	(3)		/* Inode is on the LRU list */
> +#define NFS_INO_CACHEABLE	(4)		/* inode can be cached by FS-Cache */
> 
>  static inline struct nfs_inode *NFS_I(struct inode *inode)
>  {
> @@ -230,6 +231,7 @@ #define NFS_ATTRTIMEO_UPDATE(inode)	(NFS
> 
>  #define NFS_FLAGS(inode)		(NFS_I(inode)->flags)
>  #define NFS_STALE(inode)		(test_bit(NFS_INO_STALE, &NFS_FLAGS(inode)))
> +#define NFS_CACHEABLE(inode)		(test_bit(NFS_INO_CACHEABLE, &NFS_FLAGS(inode)))
A small nit..
To stay with the coding style NFS uses, could you please changes
these variables to:
+#define NFS_INO_FSCACHE	(4)		/* inode can be cached by FS-Cache */
and
+#define NFS_FSCACHE(inode)		(test_bit(NFS_INO_FSCACHE, &NFS_FLAGS(inode))
steved.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/