Date: Tue, 11 Sep 2007 11:01:54 +0200
From: Thomas Gleixner <>
Subject: Re: clockevents: fix resume logic
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/9/11/113

On Tue, 2007-09-11 at 01:20 -0700, Andrew Morton wrote:
> On Tue, 11 Sep 2007 09:47:20 +0200 Thomas Gleixner <tglx@linutronix.de> wrote:
> 
> > On Tue, 2007-09-11 at 09:23 +0200, Thomas Gleixner wrote:
> > > > I went back to the original patch which I sent to Linus and it matches
> > > > 18de5bc4c1f1f1fa5e14f354a7603bd6e9d4e3b6.  So all I can think is that there
> > > > must have been something else in the tree which I tested which fixed the
> > > > bug which 18de5bc4c1f1f1fa5e14f354a7603bd6e9d4e3b6 introduced.  argh.
> > > > 
> > > > Can you think what would cause the symptoms which I described?  
> > > 
> > > It seems that time is not updated. Timer interrupt not active or some
> > > other odd thing. I figure out what's going on when I find a box which
> > > exposes the problem.
> 
> 2.6.22-rc6-mm1's git-acpi.patch contains something which fixes this bug. 
> It's a quarter megabyte :( Presumably clockevents-fix-resume-logic.patch
> depended on something which was in that git-acpi.patch but which for some
> reason didn't get merged.  Ho hum, I'll take a look, see if I can spot it.
> 
> > Can you please try the following command line options:
> > 
> > nolapic_timer
> 
> Works
> 
> > nohz=off
> 
> Fails
> 
> 
> > highres=off
> 
> Fails
> 
> > nohz=off highres=off
> 
> Works
Ah. Adding your observation of the missing bit from the acpi stuff, I
think this must be related to the broadcast functionality.
Btw, 23-rc6 does not resume the Intel Video card on one of my laptops.
Sigh !
	tglx
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/