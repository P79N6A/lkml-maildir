Date: Wed, 23 Feb 2000 00:12:50 +0100
From: Alessandro Suardi <>
Subject: PCMCIA Xircom RBEM100TX: eth0 works (kind of) under 2.3.47
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/2/22/196

Using PCMCIA 3.1.11. Card isn't set up at boot and cardctl oopses
 on ident command; what makes ethernet work is the following sequence:
 1) physically remove card
 2) physically insert it back (now cardctl doesn't oops anymore)
 3) modprobe tulip_cb
 4) ifconfig eth0 <params>
cardctl eject/insert doesn't yield same effect as physical action.
Serial_cb compiled in kernel but doesn't appear to work (I get no
 response from /dev/ttyS1 -- which works fine under 2.3.35 -- with
 either chat or minicom).
Any interest in oops etc. just ask, I'll send it. 100% reproducable.
Detailed output from /var/log/messages:
[snipped pre-pcmcia stuff]
Feb 22 23:57:21 princess kernel: Linux PCMCIA Card Services 3.1.11 
Feb 22 23:57:21 princess atd: atd startup succeeded
Feb 22 23:57:21 princess kernel:   options:  [pci] [cardbus] [apm] 
Feb 22 23:57:21 princess kernel: Adding cardbus controller 0: Texas Instruments PCI1131 
Feb 22 23:57:21 princess kernel: Yenta IRQ list 0618, PCI irq11 
Feb 22 23:57:21 princess kernel: Socket status: 30000006 
Feb 22 23:57:21 princess kernel: Adding cardbus controller 1: Texas Instruments PCI1131 (#2) 
Feb 22 23:57:21 princess kernel: Yenta IRQ list 0618, PCI irq11 
Feb 22 23:57:21 princess kernel: Socket status: 30000020 
Feb 22 23:57:21 princess kernel: Intel PCIC probe: not found. 
Feb 22 23:57:21 princess kernel: VFS: Mounted root (ext2 filesystem) readonly. 
Feb 22 23:57:21 princess kernel: Freeing unused kernel memory: 152k freed 
Feb 22 23:57:21 princess kernel: cs: socket 1 timed out during reset 
[snipped sb.o and swap stuff]
Feb 22 23:57:22 princess pcmcia: Starting PCMCIA services:
Feb 22 23:57:22 princess pcmcia:  cardmgr.
Feb 22 23:57:22 princess rc: Starting pcmcia succeeded
Feb 22 23:57:22 princess cardmgr[343]: starting, version is 3.1.11
Feb 22 23:57:23 princess inet: inetd startup succeeded
Feb 22 23:57:23 princess cardmgr[343]: watching 2 sockets
Feb 22 23:57:23 princess kernel: cs: IO port probe 0x1000-0x17ff: clean. 
Feb 22 23:57:23 princess kernel: cs: IO port probe 0x0100-0x04ff: excluding 0x210-0x217 0x290-0x297 0x378-0x37f 0x388-0x38f 0x3c0-0x3df 0x4d0-0x4d7 
Feb 22 23:57:23 princess kernel: cs: IO port probe 0x0a00-0x0aff: clean. 
[Here I eject/reinsert the card]
Feb 23 00:01:16 princess cardmgr[343]: initializing socket 1
Feb 23 00:01:16 princess cardmgr[343]: unsupported card in socket 1
Feb 23 00:01:16 princess kernel: cs: cb_alloc(bus 3): vendor 0x115d, device 0x0003 
Feb 23 00:01:16 princess kernel: PCI: Enabling device 03:00.0 (0000 -> 0003) 
Feb 23 00:01:16 princess kernel: PCI: Failed to allocate resource 0 for PCI device 115d:0103 
Feb 23 00:01:16 princess kernel: PCI: Enabling device 03:00.1 (0000 -> 0003) 
Feb 23 00:01:16 princess cardmgr[343]:   no product info available
[Here I modprobe tulip_cb]
Feb 23 00:02:27 princess kernel: tulip_attach(03:00.0) 
Feb 23 00:02:27 princess kernel: PCI: Enabling bus mastering for device 03:00.0 Feb 23 00:02:27 princess kernel: PCI: Increasing latency timer of device 03:00.0 to 64 
Feb 23 00:02:27 princess kernel: tulip.c:v0.91 4/14/99 becker@cesdis.gsfc.nasa.gov (modified by danilo@cs.uni-magdeburg.de for XIRCOM CBE, fixed by Doug Ledford) 
Feb 23 00:02:27 princess kernel: eth0: Xircom Cardbus Adapter (DEC 21143 compatible mode) rev 3 at 0x1400, 00:10:A4:F9:19:A0, IRQ 11. 
Feb 23 00:02:27 princess kernel: eth0:  MII transceiver #0 config 3100 status 7809 advertising 01e1. 
Then ifconfig eth0 addr,netmask up and it works.
Thanks for the good work so far !
Cheers,
--alessandro   <asuardi@uninetcom.it> <asuardi@it.oracle.com>
Linux 2.2.14/2.3.47  glibc-2.1.2-11  gcc-2.95.2  binutils-2.9.5.0.27
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/