Date: Thu, 24 Feb 2000 18:06:02 -0500
From: Wakko Warner <>
Subject: Re: 2.3.47 build barfing on mtrr.c
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/2/24/197

> I saw this come across yesterday, but no resolution. I've been having
> problems building the latest dev kernel. I'm running the frozen debian
> potato release, and the build seems to have a problem with mtrr.c. Looks
> like it may be a problem with improperly nested #if tags:
> 
> make -C  arch/i386/kernel
> make[1]: Entering directory `/usr/src/linux/arch/i386/kernel'
> gcc -D__KERNEL__ -I/usr/src/linux/include -Wall -Wstrict-prototypes -O2
> -fomit-frame-pointer -fno-strict-aliasing -pipe
> -mpreferred-stack-boundary=2 -DCPU=686 -march=pentiumpro -mpentiumpro
> -malign-functions=4 -fschedule-insns2 -mwide-multiply
> -fexpensive-optimizations -march=i686   -DEXPORT_SYMTAB -c i386_ksyms.c
> gcc -D__KERNEL__ -I/usr/src/linux/include -Wall -Wstrict-prototypes -O2
> -fomit-frame-pointer -fno-strict-aliasing -pipe
> -mpreferred-stack-boundary=2 -DCPU=686 -march=pentiumpro -mpentiumpro
> -malign-functions=4 -fschedule-insns2 -mwide-multiply
> -fexpensive-optimizations -march=i686   -DEXPORT_SYMTAB -c mtrr.c
> mtrr.c:1845: unbalanced `#endif'
> mtrr.c: In function `mtrr_init':
> mtrr.c:1841: undefined or invalid # directive
> make[1]: *** [mtrr.o] Error 1
> make[1]: Leaving directory `/usr/src/linux/arch/i386/kernel'
> make: *** [_dir_arch/i386/kernel] Error 2
Same happened to me, look at that file about 3 or 4 lines up, it starts
with:
#ifdev
     ^
Change it to 
#ifdef
There are also 2 other files that have compile bugs.  In tulip.c (has to do
with unlocking at the end), and another in fs/super.c.  I forget what I did,
but it was quite simple.
-- 
 Lab tests show that use of micro$oft causes cancer in lab animals
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/