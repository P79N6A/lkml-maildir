Date: Fri, 19 Mar 2004 03:58:45 +0100
From: Herbert Poetzl <>
Subject: Re: [PATCH] Bind Mount Extensions 0.04 (linux-2.4.25)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/3/18/371

On Thu, Mar 18, 2004 at 12:29:32PM +0000, viro@parcelfarce.linux.theplanet.co.uk wrote:
> On Mon, Mar 15, 2004 at 04:55:59AM +0100, Herbert Poetzl wrote:
> >  	if (count != 0) {
> > -		UPDATE_ATIME(file->f_dentry->d_inode);
> > +		UPDATE_ATIME(file->f_dentry->d_inode, file->f_vfsmnt);
> 
> For crying out loud...  Make that touch_file(file) and be done with that.
> There's a lot of places where we do just that (touch atime of opened file)
> and passing pair of vfsmount and inode (not even vfsmount and dentry) is
> just plain wrong.
I guess 2.4 will not allow to many changes in this regard, 
but maybe I'm wrong and deeper changes have a chance to
be accepted into mainline to 'mend' the 'broken' behaviour
best,
Herbert
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/