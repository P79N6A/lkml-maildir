Date: Sun, 28 Oct 2007 16:44:29 -0600
From: (Eric W. Biederman)
Subject: Re: [PATCH] sysctl: fix token-ring procname
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/10/28/181

Randy Dunlap <randy.dunlap@oracle.com> writes:
> From: Randy Dunlap <randy.dunlap@oracle.com>
> cc: Eric W. Biederman <ebiederm@xmission.com>
>
> Correct the token-ring sysctl procname.
>
> Reported by: Daniel Exner <dex@dragonslave.de>:
>
> Ah, and token ring tells me something like
> "/net/token-ring ,3.14 sysctl failed check procname does not match binary path 
> procname"
> But kernel boots otherwise and I got no chance to test tr itself is working.
Acked-by: "Eric W. Biederman" <ebiederm@xmission.com>
"token-ring" is the historical name we have used in /proc/sys despite it
being abbreviated tr in the kernel.  So this fix is definitely
correct.
Sorry about that.  Given this bug and the atalk bug it looks like
I failed to QA the number to name mapping properly under net/.
I just looked at those entries again and I don't see any other
entries under net/ that have problems.
Hopefully this is the last of my silly bugs in this table.
Eric
> Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com>
> ---
>  kernel/sysctl_check.c |    2 +-
>  1 file changed, 1 insertion(+), 1 deletion(-)
>
> --- linux-2.6.24-rc1.orig/kernel/sysctl_check.c
> +++ linux-2.6.24-rc1/kernel/sysctl_check.c
> @@ -738,7 +738,7 @@ static struct trans_ctl_table trans_net_
>  	{ NET_ROSE,		"rose",		trans_net_rose_table },
>  	{ NET_IPV6,		"ipv6",		trans_net_ipv6_table },
>  	{ NET_X25,		"x25",		trans_net_x25_table },
> -	{ NET_TR,		"tr",		trans_net_tr_table },
> +	{ NET_TR,		"token-ring",	trans_net_tr_table },
>  	{ NET_DECNET,		"decnet",	trans_net_decnet_table },
>  	/*  NET_ECONET not used */
>  	{ NET_SCTP,		"sctp",		trans_net_sctp_table },
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/