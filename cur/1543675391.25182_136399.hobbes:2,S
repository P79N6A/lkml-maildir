Date: Thu, 29 May 2003 12:38:31 -0400
From: Matthew Harrell <>
Subject: Re: ppp problems in 2.5.69-bk14 - devfs related?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/5/29/133

Well, this does stop the oops but it also prevents ppp from working.  I now get
this when I execute pppd
  pppd: This system lacks kernel support for PPP.  This could be because
  the PPP kernel module could not be loaded, or because PPP was not
  included in the kernel configuration.  If PPP was included as a
  module, try `/sbin/modprobe -v ppp'.  If that fails, check that
  ppp.o exists in /lib/modules/`uname -r`/net.
  See README.linux file in the ppp distribution for more details.
and the kernel logs show this
  CSLIP: code copyright 1989 Regents of the University of California
  PPP generic driver version 2.4.2
  devfs_mk_cdev: could not append to parent for ppp
: Fsck knows why devfs_mk_cdev() fails, but what follows that is obvious -
: int __init ppp_init(void)
: {
:         int err;
: 
:         printk(KERN_INFO "PPP generic driver version " PPP_VERSION "\n");
:         err = register_chrdev(PPP_MAJOR, "ppp", &ppp_device_fops);
:         if (!err) {
:                 err = devfs_mk_cdev(MKDEV(PPP_MAJOR, 0),
:                                 S_IFCHR|S_IRUSR|S_IWUSR, "ppp");
:         }
: 
:         if (err)
:                 printk(KERN_ERR "failed to register PPP device (%d)\n", err);
:         return err;
: }
: clearly leaves device registered after failed insmod.  open() afterwards
: happily finds the device and dies on attempt to do anything with it
: (the module is not there, pointers go to hell knows where).
-- 
  Matthew Harrell                          Life is like a diaper -
  Bit Twiddlers, Inc.                       short and loaded.
  mharrell@bittwiddlers.com     
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/