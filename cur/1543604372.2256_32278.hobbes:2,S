Date: Thu, 11 Oct 2001 04:59:09 +0200
From: Matthias Andree <>
Subject: Linux 2.4.10-ac11: swapoff frees memory + swap?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/10/10/265

Hi,
I just ran efence 2.2.0 on an application, which eventually failed
because it could not mmap more memory.
My machine has 320 MB RAM and >~ 600 MB swap.
It swaps blazingly fast, but one strange observation. After the efenced
application had died at approx 300 MB in RAM and 180 MB of swap, I had
somewhat around 130 MB in swap and like 250 MB "USED+SHAR" as per
xosview. That looked too high a number, so I did swapoff -av, and after
that, I had 90 MB used. The swapoff was rather fast, compared with older
2.4.x vanilla kernels.
It may well be a cosmetic issue, but it's irritating that switching the
swap off looks like freeing main memory as well, one might expect pages
are swapped back into RAM, so USED increases.
Note, the xosview figures are backed by those of the "free" utility.
Any insights?
Matthias
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/