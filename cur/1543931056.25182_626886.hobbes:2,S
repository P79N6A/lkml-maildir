Date: Wed, 12 Dec 2007 14:01:41 +0530
From: Subrata Modak <>
Subject: Re: [PATCH] pcie AER: don't check _OSC when acpi is disabled
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/12/12/39

Would you like to submit the Driver Test Cases to LTP ? Or, if you have
your Driver test cases written in C, we can port to LTP and have it
inside the LTP package.
You can also check out the following links for more info, and can always
ping me for anything:
http://ltp.cvs.sourceforge.net/ltp/ltp/testcases/kernel/device-drivers/,
http://ltp.sourceforge.net/documentation/how-to/ltp.php?
Regards--
Subrata
(LTP Maintainer)
On Tue, 2007-12-11 at 20:13 -0800, Yinghai Lu wrote:
> [PATCH] pcie AER: don't check _OSC when acpi is disabled
> 
> when acpi=off and pci=nomsi, don't check _OSC in aer_osc_setup
> 
> Signed-off-by: Yinghai Lu <yinghai.lu@sun.com>
> 
> diff --git a/drivers/pci/pcie/aer/aerdrv_acpi.c b/drivers/pci/pcie/aer/aerdrv_acpi.c
> index 1a1eb45..dd38777 100644
> --- a/drivers/pci/pcie/aer/aerdrv_acpi.c
> +++ b/drivers/pci/pcie/aer/aerdrv_acpi.c
> @@ -34,6 +34,9 @@ int aer_osc_setup(struct pcie_device *pciedev)
>  	acpi_handle handle = DEVICE_ACPI_HANDLE(&pdev->dev);
>  	struct pci_bus *parent;
> 
> +	if (acpi_pci_disabled)
> +		return -1;
> +
>  	while (!handle) {
>  		if (!pdev || !pdev->bus->parent)
>  			break;
> --
> To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
> the body of a message to majordomo@vger.kernel.org
> More majordomo info at  
http://vger.kernel.org/majordomo-info.html
> Please read the FAQ at  
http://www.tux.org/lkml/