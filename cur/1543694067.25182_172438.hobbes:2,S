Date: Tue, 14 Oct 2003 10:31:00 +0200
From: Arjan van de Ven <>
Subject: Re: gcc -msoft-float [Was: Linux 2.6.0-test7 - stability freeze]
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/10/14/34

On Tue, 2003-10-14 at 10:12, Olaf Hering wrote:
>  On Mon, Oct 13, Sam Ravnborg wrote:
> 
> > On Mon, Oct 13, 2003 at 07:34:46PM +0200, Olaf Hering wrote:
> > > a longstanding bug, should probably go to the main Makefile. But I dont
> > > know if all supported archs know about -msoft-float.
> > 
> > Could you please elaborate about what this fixes.
> > I'm very resistant to add new flags unconditionally to gcc at this stage.
> 
> Is floating point in the kernel really allowed on i386? If so, please
> please add a commet to this Makefile about this fact. 
> 
> test7bk3 results, allyesconfig:
> 
> 
> drivers/built-in.o(.text+0x2ba129): In function `amd8111e_resume':
> drivers/net/amd8111e.c:1700: undefined reference to `__floatsidf'
real bug:
        if(lp->options & OPTION_DYN_IPG_ENABLE)
                mod_timer(&lp->ipg_data.ipg_timer,
                                jiffies + (IPG_CONVERGE_TIME * HZ));
 
where 
#define      IPG_CONVERGE_TIME 0.5
> drivers/media/dvb/ttpci/av7110.c:2709: undefined reference to `__floatsidf'
worse:
       if (freq < 16*168.25 )
                config = 0xa0;
        else if (freq < 16*447.25)
                config = 0x90;
        else
                config = 0x30;
> drivers/built-in.o(.text+0x5c24d0): In function `sisfb_do_set_var':
> drivers/video/sis/sis_main.c:654: undefined reference to `__floatsidf'
static int sisfb_do_set_var(struct fb_var_screeninfo *var, int isactive,
                      struct fb_info *info)
{
        unsigned int htotal =
                var->left_margin + var->xres + var->right_margin +
                var->hsync_len;
        unsigned int vtotal = 0;
        double drate = 0, hrate = 0;
 
ugh
[unhandled content-type:application/pgp-signature]