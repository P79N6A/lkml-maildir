Date: Sun, 11 Aug 2002 16:12:30 -0500
From:  Matt_Domsch@Dell ...
Subject: RE: Linux 2.4.20-pre1
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/8/11/129

> > > > <alan@irongate.swansea.linux.org.uk> (02/08/05 1.629)
> > > > 	[PATCH] PATCH: Add EFI partition support
> > > 
> > > Needs this to compile....
> > > 
> > > --- linux/include/asm-ia64/efi.h.orig	Sun Aug 11 01:41:10 2002
> > > +++ linux/include/asm-ia64/efi.h	Sun Aug 11 01:43:38 2002
> > > @@ -166,6 +166,9 @@
> > >   *  EFI Configuration Table and GUID definitions
> > >   */e
56> > >  
> > > +#define NULL_GUID    \
> > > +    ((efi_guid_t) { 0x00000000, 0x0000, 0x0000, { 0x00, 
> 0x00, 0x0, 0x00, 0x00, 0x00, 0x00, 0x00 }})
> > > +
> > 
> > Not a good plan. EFI can be used on non ia64 so NULL_GUID belongs
> > somewhere else
Two things:
1) there is an accompanying patch to the EFI patch which adds NULL_GUID and
changes the definition of GUIDs to use the helper macro EFI_GUID to solve
endianness issues.  David Mosberger has blessed my submission of this, and
it's been in the ia64 port patch for many months.  Patch or cset:
http://domsch.com/linux/patches/gpt/linux-2.4.19-rc1-efiguidt.patch
http://domsch.com/linux/patches/gpt/linux-2.4-gpt-efiguidt.cset
2) Yes, it's ugly that fs/partitions/efi.c includes asm-ia64/efi.h to pick
up the definitions.  David told me 12-18 months ago that Linus didn't want
an include/linux/efi.h because only IA64 today uses it, even though nothing
in it is IA-64 specific - it *could* be made generic.  So, I had three
choices:
a) include asm-ia64/efi.h and comment (taken)
b) Move asm-ia64/efi.h to linux/efi.h (believed rejected)
c) Duplicate typedefs.
I'd be happy to submit a patch moving asm-ia64/efi.h into include/linux/ if
it would be accepted.
Thanks,
Matt
--
Matt Domsch
Sr. Software Engineer, Lead Engineer, Architect
Dell Linux Solutions www.dell.com/linux
Linux on Dell mailing lists @ 
http://lists.us.dell.com
#1 US Linux Server provider for 2001 and Q1/2002! (IDC May 2002)
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/