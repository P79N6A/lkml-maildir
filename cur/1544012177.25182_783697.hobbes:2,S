Date: Tue, 23 Dec 2008 17:07:47 -0800
From: David Brownell <>
Subject: Re: [PATCH] musb: fix DaVinci build again
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/12/23/190

On Tuesday 23 December 2008, Sergei Shtylyov wrote:
> > Yeah, I sent a DaVinci build fix patch in plenty of time to
> > be merged for *2.6.27* (!!!!) but still the key parts are
> > missing, and have not managed to make it into mainline.
> 
>   Try breakinjg the patches into smaller pieces next time, so they may 
> get thru the maintainer's sieve more easily. :-)
That wasn't the issue back then.  If you look at
  c767c1c6f1febbd1351cc152bba6e37889322d17
which got merged after 2.6.27 shipped, you'll notice that
someone stripped out the following parts from the original
patch, which were even referenced in the patch comment.
This worked as submitted, but then got broken during merge;
and fixes have been re-sent several times already.
Plus, some other stuff has merged which prevents linking.
Fixes for those parts have been re-sent several times too.
- Dave
============= CUT HERE
From: David Brownell <dbrownell@users.sourceforge.net>
Build fixes that somehow got stripped out of the earlier build
fix patch ...
Signed-off-by: David Brownell <dbrownell@users.sourceforge.net>
---
 drivers/usb/musb/davinci.c |    7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)
--- a/drivers/usb/musb/davinci.c
+++ b/drivers/usb/musb/davinci.c
@@ -31,10 +31,11 @@
 #include <linux/clk.h>
 #include <linux/io.h>
 #include <linux/gpio.h>
+#include <linux/gpio.h>
+
+#include <mach/hardware.h>
+#include <mach/memory.h>
 
-#include <asm/arch/hardware.h>
-#include <asm/arch/memory.h>
-#include <asm/arch/gpio.h>
 #include <asm/mach-types.h>
 
 #include "musb_core.h"