Date: Sat, 19 Feb 2000 07:28:24 -0600
From: (G.W. Wettstein)
Subject: Re: Drive name slips...
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/2/19/70

On Feb 18,  3:03pm, "Stephen C. Tweedie" wrote:
} Subject: Re: Drive name slips...
> Hi,
Good morning to everyone.
> On Thu, 17 Feb 2000 09:26:52 -0500, Chris Meadors <chris@hereintown.net>
> said:
> 
> > Where devfs saved me, is I run up to 3 SCA drives in my machine.  They
> > have SCSI IDs 0, 1, and 2.  Sometimes I'll pull out one of them and
> > boot my machine without it.  Pulling ID 2 is no big deal, /dev/sda and
> > /dev/sdb are still ID 0 and 1.  But if I pull ID 1 (I never pull ID 0,
> > cause it is my boot drive, but still I have the option to) ID 0 is
> > /dev/sda, but ID 2 becomes /dev/sdb.  That just causes too much
> > confusion.  With devfs I can put the physical location of the drives
> > (including their ID) in my fstab and not have to worry about which
> > drives are in the machine.
> You don't necessarily need devfs for that.  You can mount ext2
> filesystems based on their volume label or UUID, rather than by their
> location.
The only problem with this is that at least in the late 2.2.x kernels
UUID or volume label mounting breaks when the filesystems in question
are on a RAID1 mirror.
The underlying physical volume gets mounted rather than the mirror.  I
haven't had a chance to dig in the mount code but I suspect that the
problem is due to the fact that /proc/partitions seems to order the
paritions by major number.  If the mount code is simply reading
/proc/partitions in linear order it probably discovers the underlying
physical volume first.  Since in RAID1 each underlying volume 'looks'
like the composite volume mount probably decides that it has found the
filesystem and mounts the underlying physical volume.
I happened to catch this on one of our pre-production machines before
it burned us.  I suspect that someone could end up with a rude
surprise if the kernel was allowed to run on the underlying physical
volume for an extended period of time and than either have that drive
fail or a mount of the actual RAID1 volume.
> --Stephen
Greg
}-- End of excerpt from "Stephen C. Tweedie"
As always,
Dr. G.W. Wettstein, Ph.D.   Enjellic Systems Development, Inc.
4206 N. 19th Ave.           Specializing in information infra-structure
Fargo, ND  58102            development.
PH: 701-281-4950            WWW: 
http://www.enjellic.com
FAX: 701-281-3949           EMAIL: greg@enjellic.com
------------------------------------------------------------------------------
"A computer without Windows is like a fish without a bicycle."
                                -- Chris Woods
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/