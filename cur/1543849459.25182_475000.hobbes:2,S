Date: Fri, 20 Oct 2006 14:21:43 +0200
From: Andi Kleen <>
Subject: Re: [PATCH] diskquota: 32bit quota tools on 64bit architectures
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/10/20/112

On Friday 20 October 2006 08:30, Vasily Tarasov wrote:
> Andi Kleen wrote:
> 
> <snip>
> > Thanks. But the code should be probably common somewhere in fs/*, not
> > duplicated.
> <snip>
> 
> Thank you for the comment!
> I'm not sure we should do it. If we move the code in fs/quota.c for example,
> than this code will be compiled for _all_ arhitectures, not only for x86_64 and ia64.
> Of course, we can surround this code by #ifdefs <ARCH>, but I thought this is 
> a bad style... Moreover looking through current kernel code, I found out that
> usually code is duplicated in such cases.
Well it doesn't hurt them even if not strictly needed and it's better to have common code for 
this. BTW you have to convert over to compat_alloc_* for this as Christoph stated
because set_fs doesn't work on all architectures. Best you use the compat_* types too.
-Andi
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/