Date: Thu, 26 Apr 2001 16:40:41 -0500
From:  Wayne.Brown@altec ...
Subject: Re: binfmt_misc on 2.4.3-ac14
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/4/26/150

Marek P
Ä™tlicki <marpet@buy.pl> wrote:
>The directory /proc/sys/fs/binfmt_misc/ exists, but nothing in it.
Try this:
mount -t binfmt_misc none /proc/sys/fs/binfmt_misc
In the recent -ac versions, binfmt_misc must be mounted separately.  I have the
following in my /etc/rc.d/rc.local so that it will work with both Linus' and
Alan's kernels (the third variation was for an older -ac kernel that didn't
create the binfmt_misc directory either; it's really not needed anymore but I
left it in just in case):
#
# Register entries in binfmt_misc
#
if [ -f /proc/sys/fs/binfmt_misc/register ] ; then
        echo ':DOSWin:M::MZ::/usr/local/bin/wine:' >
/proc/sys/fs/binfmt_misc/register
elif [ -d /proc/sys/fs/binfmt_misc ] ; then
        mount -t binfmt_misc none /proc/sys/fs/binfmt_misc
        echo ':DOSWin:M::MZ::/usr/local/bin/wine:' >
/proc/sys/fs/binfmt_misc/register
else
        mount -t binfmt_misc none /etc/binfmt_misc
        echo ':DOSWin:M::MZ::/usr/local/bin/wine:' > /etc/binfmt_misc/register
fi
Wayne