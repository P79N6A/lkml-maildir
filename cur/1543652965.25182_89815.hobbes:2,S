Date: Fri, 15 Nov 2002 14:16:30 -0800
From: Andrew Morton <>
Subject: Re: 2.5.47-ac4 panic on boot.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/11/15/252

Justin A wrote:
> 
> .config crashes, it oopses as soon as pnp starts, then 2 seconds later the
> previous oops comes up and it panics.
Irritating when it does that.  Here's a little patch which should
stop the machine dead after the first ooops, prevent stuff from
scrolling off the screen.
This, with the missing touch_nmi_watchdog() would be a handy
kernel boot option, perhaps.
--- 25/arch/i386/kernel/traps.c~noscroll	Tue Nov 12 13:13:24 2002
+++ 25-akpm/arch/i386/kernel/traps.c	Tue Nov 12 13:14:16 2002
@@ -84,7 +84,7 @@ asmlinkage void alignment_check(void);
 asmlinkage void spurious_interrupt_bug(void);
 asmlinkage void machine_check(void);
 
-static int kstack_depth_to_print = 24;
+static int kstack_depth_to_print = 10;
 
 
 /*
@@ -246,6 +246,9 @@ bad:
 			printk("%02x ", c);
 		}
 	}
+	local_irq_disable();
+	for ( ; ; )
+		;
 	printk("\n");
 }	
 
_
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/