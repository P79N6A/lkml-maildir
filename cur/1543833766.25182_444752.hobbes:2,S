Date: Sun, 16 Jul 2006 11:56:18 -0400
From: Jeffrey Mahoney <>
Subject: Re: [PATCH] reiserfs: fix handling of device names with /'s in them
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/7/16/61

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1
Hans Reiser wrote:
> So the Plan 9 and Unix way would be to let the driver parse the number
> part of the name after the last slash.  What I don't understand is why
> reiserfs is getting involved here, rather than recognizing the driver as
> an extension of the namespace, seeing the driver as a mountpoint, and
> just passing number to the driver.  There must be something I don't
> grasp here, can you help me?
The name used in procfs isn't parsed anywhere, it could just as easily
be fs0, fs1, fs2, etc, but that wouldn't be a very user friendly way of
indicating which file system's statistics are described in that
directory. It's just presented to the user as a pathname to identify a
particular file system. The problem is that reiserfs is attempting to
use a name from a separate name space that doesn't follow the same rules
as the standard file system name space. Block device names, initially,
weren't intended for use as self-contained path components and aren't
part of the file system name space. If we wish to use those names, we
need to sanitize them to conform to the rules of the file system name
space by removing/replacing the path separator character.
It's unfortunate that some drivers use a slash rather than sticking with
the <type><letter> convention. I don't expect new drivers to be added
with slashes in them. If at some point the existing drivers are changed
to remove the slash, then this patch can be removed again.
- -Jeff
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.3 (Darwin)
Comment: Using GnuPG with Mozilla - 
http://enigmail.mozdev.org
iD8DBQFEumGhLPWxlyuTD7IRAvuOAJ4yYUYp9TsUervYGBERSinPyOeAJQCgn7Wm
lgYoPKKUElaKkWcoECN9e+4=
=Rp8I
-----END PGP SIGNATURE-----
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/