Date: Sat, 29 Dec 2007 09:52:42 +0200
From: Eduard-Gabriel Munteanu <>
Subject: Re: [PATCH] Option to disable AMD C1E (allows dynticks to work)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/12/29/16

On Fri, 28 Dec 2007 13:57:57 -0500
Richard Harman <richard@richardharman.com> wrote:
> I just saw this thread online from someone else who was having
> problems with an HP laptop -- I believe my laptop falls into this
> category.
> 
> The laptop is currently running Fedora Core 8, but I couldn't figure
> out what kernel that diff was against.  I'm not experienced with
> git.  Can you give me a few pointers on how to get that patch applied
> to a kernel tarball?  I'll be more than willing to be your test
> subject to see how well this patch and whatever future revision of it
> may work.
> 
> Richard
Hi,
I'll assume you didn't read the thread careful enough, so I have to
emphasize the fact that this patch won't improve power savings (even
more, it may actually consume an additional 1-2 Watts). Try it only if
you need dynticks for another purpose than just saving power (in which
case, you should wait until a better solution comes up, namely
LAPIC-less dynticks).
IIRC, the diff was made against 2.6.24-rc4, but it applies okay on the
latest -rc (2.6.24-rc6 as of now) as far as I can see. Copy starting
with the line below "---" all the way to the end and save it to a file
(make sure tabs don't get messed up), then apply with "patch -p1" as
you would apply any other patch. Run "make xconfig" (or whatever
interface to Kconfig you use), make sure "Processor type and
features -> Disable C1E on AMD systems to make dynticks work" is set,
along with all other relevant options, then build and the kernel as
usual.