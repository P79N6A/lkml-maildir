Date: Fri, 30 Apr 2004 15:08:28 -0700
From: Andrew Morton <>
Subject: Re: [MICROPATCH] Make x86_64 build work without GART_IOMMU
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/4/30/211

corbet@lwn.net (Jonathan Corbet) wrote:
>
> > > My Radeon 9200SE goes nuts if I build a GART-enabled
> > > kernel.  Haven't figured out why...
> > 
> > Define 'nuts' and supply full boot log (with GART enabled)
> 
> Oops, sorry for the technical term...:)
"No User Time Scheduled".  Silly Andi.
> Andrew asked for a profile to help track down where the kernel loop is.  I
> just did one, but the results are less than illuminating:
> 
> 	105219 total                                      0.0448
> 	 85232 __delay                                  2663.5000
> 	 14076 default_idle                             293.2500
> 	  4679 __do_softirq                              26.5852
> 	   474 check_poison_obj                           1.0216
> 	   197 handle_IRQ_event                           2.0521
> 	    91 kmem_cache_free                            0.1034
Yup, that's the one.  There are various loops where the driver spins on a
hardware register, with an mdelay() in the loop.
Can you get a sysrq-p trace?
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/