Date: Sun, 1 Feb 2004 09:59:06 +0000
From: Russell King <>
Subject: Re: net-pf-10, 2.6.1
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/2/1/18

On Sun, Feb 01, 2004 at 01:28:55AM -0800, Jim McCloskey wrote:
> I've tried the variations I can think of---putting the line:
> 
>    install net-pf-10 /bin/true
> 
> in /lib/modules/modprobe.conf via update-modules, or directly by hand-editing.
The first thing to note is that the kernel tries to insert modules
for non-existent network protocols by calling modprobe with net-pf-N
where N is the protocol number.  N=10 for IPv6.
>    ohlone#  modprobe net-pf-10
>    FATAL: Module ipv6 not found.
> 
> indicating that modprobe knows about the alias, but is not running
> /bin/true when requested to load the module.
... because the module is now known as ipv6 not net-pf-10.
> However: if I manually edit /etc/modprobe.d/aliases (which you're not
> supposed to do), so as to comment out:
> 
>   # alias net-pf-10 ipv6
> 
> and then add:
> 
>   install ipv6 /bin/true
You've made two changes at the same time - no wonder you're getting
confused.  In the first change, you've told it to no longer alias
net-pf-10 to ipv6, so it won't go anywhere near "ipv6" anymore.  In
the second change, you've told it to use /bin/true to insert the ipv6
module - which it doesn't find because its still looking for "net-pf-10"
Golden rule: only make one change at a time.
Here's the practical examples showing what's going on:
[root@cps /root]# cat /etc/modprobe.conf
[root@cps /root]# modprobe net-pf-10
FATAL: Module net_pf_10 not found.
[root@cps /root]#
---
[root@cps /root]# cat /etc/modprobe.conf
alias net-pf-10 ipv6
[root@cps /root]# modprobe net-pf-10
FATAL: Module ipv6 not found.
[root@cps /root]#
---
[root@cps /root]# cat /etc/modprobe.conf
alias net-pf-10 ipv6
install net-pf-10 /bin/true
[root@cps /root]# modprobe net-pf-10
FATAL: Module ipv6 not found.
[root@cps /root]#
---
[root@cps /root]# cat /etc/modprobe.conf
alias net-pf-10 ipv6
install ipv6 /bin/true
[root@cps /root]# modprobe net-pf-10
[root@cps /root]#
-- 
Russell King
 Linux kernel    2.6 ARM Linux   - 
http://www.arm.linux.org.uk/
 maintainer of:  2.6 PCMCIA      - 
http://pcmcia.arm.linux.org.uk/
                 2.6 Serial core
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/