Date: Thu, 1 Sep 2005 16:45:31 -0700
From: Jeff Kirsher <>
Subject: Re: [PATCH 2.6.13] Warning in the e1000 driver
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/9/1/390

On 9/1/05, Daniel Walker <dwalker@mvista.com> wrote:
> 
> This should fix a small warning in the e1000 driver. It casts to the
> largest possible type dma field. This was found while compiling for
> X86_64 .
> 
> Signed-Off-By: Daniel Walker <dwalker@mvista.com>
> 
> Index: linux-2.6.13/drivers/net/e1000/e1000_main.c
> ===================================================================
> --- linux-2.6.13.orig/drivers/net/e1000/e1000_main.c    2005-08-30 18:28:41.000000000 +0000
> +++ linux-2.6.13/drivers/net/e1000/e1000_main.c 2005-08-30 19:42:45.000000000 +0000
> @@ -2767,7 +2767,7 @@ e1000_clean_tx_irq(struct e1000_adapter
>                                         "  next_to_use          <%x>\n"
>                                         "  next_to_clean        <%x>\n"
>                                         "buffer_info[next_to_clean]\n"
> -                                       "  dma                  <%zx>\n"
> +                                       "  dma                  <%llx>\n"
>                                         "  time_stamp           <%lx>\n"
>                                         "  next_to_watch        <%x>\n"
>                                         "  jiffies              <%lx>\n"
> @@ -2776,7 +2776,7 @@ e1000_clean_tx_irq(struct e1000_adapter
>                                 E1000_READ_REG(&adapter->hw, TDT),
>                                 tx_ring->next_to_use,
>                                 i,
> -                               tx_ring->buffer_info[i].dma,
> +                               (unsigned long long)tx_ring->buffer_info[i].dma,
>                                 tx_ring->buffer_info[i].time_stamp,
>                                 eop,
>                                 jiffies,
> 
> 
> -
> To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
> the body of a message to majordomo@vger.kernel.org
> More majordomo info at  
http://vger.kernel.org/majordomo-info.html
> Please read the FAQ at  
http://www.tux.org/lkml/
> 
Just remove the following lines
> -                                       "  dma                  <%zx>\n"
and
> -                               tx_ring->buffer_info[i].dma,
from the DPRINTK statement.  The information being provided for debug
purposes is not that helpful when debugging anyway.
--
Cheers,
Jeff
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/