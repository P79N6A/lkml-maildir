Date: Sat, 26 Nov 2005 21:47:36 +0100 (CET)
From: Martin Drab <>
Subject: mm or AGP related problems on x86_64 2.6.15-rc2-git4
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/11/26/79

Hi,
there is a problem with crashing latest fglrx64 (8.19.10) on 
2.6.15-rc2-git4 and later kernels. I think 2.6.15-rc2 was also crashing. 
However 2.6.15-rc1 does not crash. Now, I know this probably isn't a 
problem on the kernel side, but on the fglrx (ATI's proprietary driver) 
side and so this isnt the right place to report.
But, I'm reporting here in a hope that perhaps someone can tell me from 
a brief look at the attached crash logs where the problem may be, or what 
was has recently changed that could be the cause of the crash. So that 
perhaps I may try to fix it in the fglrx.
My guess is it is something related to either mm or AGP (or both). And it 
may also be x86_64 architecture related, since I have no similar problems 
on x86 with nVidia drivers (OK, I cannot test the x86 fglrx, due to the 
lack of hardware).
There are two crash logs attached. One is fglrxagp.log which is what 
happens when the fglrx's internal AGP is used (kernel's agpgart is used, 
but should be interfaced with the fglrx's internal AGP support). The 
second log is kernelagp.log which is what happens when the kernel's 
amd64-agp is used with the agpgart.
Both variants crash, however when using the fglrx's internal AGP support, 
the graphics doesn't even initialize and it ends up with just a blank 
screen (comp doesn't freeze however), but the comp is externally 
accessible over the net, even though any attempt to soft reboot it fails 
(hard reboot is necessary).
When the kernel's an64-agp is in use, the crash and unability to reboot 
still remains, but at least the graphics seems to work OK (even though 
the first crash is allready there), until you want to turn it off (kill 
the X server). Then another big crash happens which again causes the black 
screen and the same state as described in the paragraph above.
I would wellcome any hint or suggestion.
Thank you,
Martin[unhandled content-type:application/octet-stream][unhandled content-type:application/octet-stream]