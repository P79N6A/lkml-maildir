Date: Wed, 28 Aug 2002 23:22:07 +0100
From: Christoph Hellwig <>
Subject: Re: [PATCH] anycast support for IPv6, linux-2.5.31
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/8/28/8

On Wed, Aug 28, 2002 at 03:44:57PM -0600, David Stevens wrote:
> 
>       Below is a patch relative to the mainline 2.5.31 code for an
I think it would make sense to Cc the netdev list at oss.sgi.com..
(and please inline the patch, makes it much easier to respond..)
diff -urN linux-2.5.31/net/ipv6/anycast.c linux-2.5.31AC/net/ipv6/anycast.c
--- linux-2.5.31/net/ipv6/anycast.c	Wed Dec 31 16:00:00 1969
+++ linux-2.5.31AC/net/ipv6/anycast.c	Wed Aug 21 14:24:41 2002
@@ -0,0 +1,508 @@
+/* $Header$ */
+
+/*
+ *	Anycast support for IPv6
+ *	Linux INET6 implementation 
+ *
+ *	Authors:
+ *	David L Stevens (dlsteven@us.ibm.com)
+ *
+ *	$Id$
+ *
+ *	based heavily on net/ipv6/mcast.c
+ *
+ *	This program is free software; you can redistribute it and/or
+ *      modify it under the terms of the GNU General Public License
+ *      as published by the Free Software Foundation; either version
+ *      2 of the License, or (at your option) any later version.
+ */
+
+/* Changes:
+ *
+ */
Umm, in the kernel tree $Header$ and $Id$ will never be filled out.
Also empty changes comments are pretty useless.
+
+#define __NO_VERSION__
Not needed in 2.4/2.5
+#ifdef CONFIG_IPV6_MLD6_DEBUG
+#include <linux/inet.h>
+#endif
This patch doesn't reference CONFIG_IPV6_MLD6_DEBUG anywhere else..
+
+void ipv6_ac_init_dev(struct inet6_dev *idev)
+{
+}
I can't see this actually beeing used anywhere..
+#ifdef CONFIG_PROC_FS
+int anycast6_get_info(char *buffer, char **start, off_t offset, int length)
+{
+	off_t pos=0, begin=0;
+	struct ifacaddr6 *im;
+	int len=0;
+	struct net_device *dev;
+	
+	read_lock(&dev_base_lock);
+	for (dev = dev_base; dev; dev = dev->next) {
+		struct inet6_dev *idev;
+
+		if ((idev = in6_dev_get(dev)) == NULL)
+			continue;
+
+		read_lock_bh(&idev->lock);
+		for (im = idev->ac_list; im; im = im->aca_next) {
+			int i;
This function would really benefit from use of the seq_file API..
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/