Date: Fri, 3 May 2002 05:09:53 -0400 (EDT)
From: Alexander Viro <>
Subject: Re: [PATCH] Replace exec_permission_lite() with inlined vfs_permission()
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/5/3/59

On Fri, 3 May 2002, Paul Menage wrote:
> 
> How about something like the patch below?
> 
> - i_op->permission() now takes an extra argument, "dcache_locked", and 
> should return -EAGAIN if it's called with the dcache_lock held and it 
> can't handle it.
Argument-dependent locking rules are Wrong.  In any case, what does it
buy you compared to extra method?  You need to change every instance
since you are adding an argument.  Moreover, the thing you had proposed
for procfs means that we'll need to check the argument and grab dcache_lock
if it's 0.  Plus similar fun with unlocking.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/