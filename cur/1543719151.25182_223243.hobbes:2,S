Date: Thu, 27 May 2004 08:48:38 -0400
From: Brian Gerst <>
Subject: [PATCH] Mark cache_names __initdata
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/5/27/51

We don't need to keep the pointer array around after the caches are 
initialized.  This doesn't affect the actual strings.
--
				Brian Gerst
diff -urN linux-2.6.7-rc1-bk/mm/slab.c linux/mm/slab.c
--- linux-2.6.7-rc1-bk/mm/slab.c	2004-05-23 18:41:51.000000000 -0400
+++ linux/mm/slab.c	2004-05-27 08:44:43.751423008 -0400
@@ -477,10 +477,12 @@
 EXPORT_SYMBOL(malloc_sizes);
 
 /* Must match cache_sizes above. Out of line to keep cache footprint low. */
-static struct cache_names {
+struct cache_names {
 	char *name;
 	char *name_dma;
-} cache_names[] = {
+};
+
+static struct cache_names __initdata cache_names[] = {
 #define CACHE(x) { .name = "size-" #x, .name_dma = "size-" #x "(DMA)" },
 #include <linux/kmalloc_sizes.h>
 	{ 0, }