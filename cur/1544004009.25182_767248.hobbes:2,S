Date: Mon, 10 Nov 2008 21:56:08 +0000
From: "Altobelli, David" <>
Subject: Disabling hpilo (see: sharing interrupt between PCI device)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/11/10/308

I stumbled across this message, unfortunately I don't have the original to respond to.
http://lkml.org/lkml/2008/11/10/41
The problem mentioned, that unloading hpilo causes the iLO IRC kbd/mouse (uchi_hcd) to become non-functional, is not an IRQ issue.
iLO function 2 (hpilo) shares some global resources with function 4 (uhci_hcd), and when hpilo calls pci_disable_device(), the removal of busmastering (PCI_COMMAND_MASTER) means that the IRC kdb/mouse can't do what it needs to do.  Reloading hpilo will allow the IRC kdb/mouse to function correctly.
I've been struggling with what to do about this, removing the pci_disable_device() from hpilo will "fix" the problem, but that is clearly a hack.