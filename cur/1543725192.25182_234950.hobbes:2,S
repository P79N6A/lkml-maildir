Date: Sun, 18 Jul 2004 02:05:45 +1000
From: Paul Mackerras <>
Subject: Re: [PATCH] 2.6 PPC64: EEH notifier call chain
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/7/17/47

Linas,
> Please review and forward upstream as appropriate.  
Sorry for the delay; have been on vacation.
> This patch implements a notifier call chain for EEH, as per pervious emails.
> When an EEH slot freeze is detected, it is placed on a workqueue, from
> whence it is dispatched to any regiistered notify callbacks.   The goal 
> of the qorkqueue is to pull the slot-freeze detection out of an interrupt 
> context.    As before, this patch only handles events for ethernet controllers;
> I'll try to broaden the scope in future revisions.
I don't like the way we are making a policy decision here that
ethernet devices can be recovered but other devices can't.  I would
much rather call the notifier for all EEH events and have the notify
callback(s) make the decision.  That could be either the hotplug
driver or the device driver itself.  We get a return value from
notifier_call_chain that could be used to communicate that back to
eeh.c, if that is useful.
Regards,
Paul.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/