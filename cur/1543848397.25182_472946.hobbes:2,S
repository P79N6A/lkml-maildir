Date: Fri, 13 Oct 2006 13:15:16 -0700
From: Andrew Morton <>
Subject: Re: [PATCH] serial: handle pci_enable_device() failure upon resume
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/10/13/228

On Fri, 13 Oct 2006 08:59:53 +0100
Russell King <rmk+lkml@arm.linux.org.uk> wrote:
> On Wed, Oct 11, 2006 at 09:47:20PM -0400, Jeff Garzik wrote:
> > Signed-off-by: Jeff Garzik <jeff@garzik.org>
> 
> NAK.  What happens to the ports if pci_enable_device() fails and someone
> has them open?
They're screwed either way.
> It's far better to leave the must_check warning behind until it can be
> _correctly_ solved, rather than papering over the problem with bogus
> patches to return errors without taking an appropriate additional action.
> 
> IOW, the warnings serve as a reminder that *proper* error handling needs
> to be implemented.
What would that error handling do?
Until that has been implemented, it would be good if we could at least spit
a printk telling people what failed, so when the machine later goes kaput
we know why it happened.
An appropriate place in which to perform that reporting is up in the
high-level resume code, so Jeff's patch is appropriate.
Right now, we get silent failure *and* a compile-time warning.  It's hard
to see how that situation could be made worse.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/