Date: Thu, 27 Jul 2006 10:21:46 -0700
From: Josh Triplett <>
Subject: [PATCH] timer: Add lock annotation to lock_timer_base
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/7/27/224

lock_timer_base acquires a lock and returns with that lock held.  Add a lock
annotation to this function so that sparse can check callers for lock pairing,
and so that sparse will not complain about this function since it
intentionally uses the lock in this manner.
Signed-off-by: Josh Triplett <josh@freedesktop.org>
---
 kernel/timer.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)
diff --git a/kernel/timer.c b/kernel/timer.c
index 05809c2..c1dc57d 100644
--- a/kernel/timer.c
+++ b/kernel/timer.c
@@ -175,6 +175,7 @@ static inline void detach_timer(struct t
  */
 static tvec_base_t *lock_timer_base(struct timer_list *timer,
 					unsigned long *flags)
+	__acquires(timer->base->lock)
 {
 	tvec_base_t *base;
 
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/