Date: Wed, 26 Jul 2006 00:27:12 -0700
From: Greg KH <>
Subject: Re: [RFC PATCH] Multi-threaded device probing
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/7/26/32

On Wed, Jul 26, 2006 at 02:08:09AM +0200, Stefan Richter wrote:
> James Courtier-Dutton wrote:
> >What happens about the logging?
> >Surely one would want the output from one probe to be output into the
> >log as a block, and not mix the output from multiple simultaneous probes.
> 
> Use single-line printks were possible, or mutex-protected multiline 
> blocks where you really can't do without multiple lines of printks that 
> really cannot be separated. (Don't perform time consuming functions 
> within those mutexes; that would defeat the multithreaded probing...)
> 
> To adjust printks is only the beginning of what is to be done to adapt 
> single-threaded bus probes to multithreaded ones. There may be hidden 
> assumptions that rely on single-threaded execution.
Yeah, some drivers really don't like it, the ata_piix driver for example
had to be changed to keep it from thinking it was really being hotpluged
instead of the initial probe sequence.  Odds are there are lots of other
driver specific issues like this everywhere.  That's why it's a driver
specific flag, when the authors of the driver say it's ready, then it
will be enabled for that driver.
thanks,
greg k-h
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/