Date: Thu, 29 Jun 2006 08:10:43 +1000
From: Nigel Cunningham <>
Subject: Re: [Suspend2][ 15/20] [Suspend2] Attempt to freeze processes.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/6/28/402

Hi Hugh.
On Thursday 29 June 2006 04:59, Hugh Dickins wrote:
> On Wed, 28 Jun 2006, Nigel Cunningham wrote:
> > On Tuesday 27 June 2006 23:45, Pavel Machek wrote:
> > > Current code seems to free memory without need to thaw/re-freeze
> > > kernel threads. Have you found bugs in that, or is this unneccessary?
> >
> > Did you read my other email? Try it with a swap file on a journalled
> > filesystem, in a situation where freeing memory will force the swap file
> > to be used.
>
> Hi Nigel,
>
> I may have missed your "other email" in the avalanche ;)
:)
> That particular example sounds dubious to me: it may well have been
> a problem on 2.4, but are you sure that it's still a problem on 2.6?
Yes, I am sure but I'll double check again. What I recall at the moment is a 
deadlock in actually writing the page.
> Andrew very nicely rewrote the swapfile handling, to bmap the whole
> file at swapon time (see setup_swap_extents), and thereafter the only
> difference between using a swapfile and using a disk partition is that
> the swapfile blocks may be fragmented into many extents where the disk
> partition is contiguous.  Much more reliable.
>
> I don't see how your "journalled filesystem" would affect it at all.
Ok. I'll reproduce it and post the trace. Of course it may be that my 
examination was too superficial and the cause is more subtle.
I'm not sure if I'll have time to do this during this week, but I'll leave 
your message marked Todo so I don't forget.
Thanks for the reply!
Nigel
-- 
See 
http://www.suspend2.net
 for Howtos, FAQs, mailing
lists, wiki and bugzilla info.
[unhandled content-type:application/pgp-signature]