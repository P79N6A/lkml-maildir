Date: Tue, 20 Feb 2001 19:53:01 -0500
From: Chris Mason <>
Subject: Re: reiserfs probs on 2.2.17
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/2/20/182

On Wednesday, February 21, 2001 01:44:10 AM +0100 Arnaud Installe
<arnaud@bach.kotnet.org> wrote:
> Hello,
> 
> I've had a problem with a reiserfs partition on a 2.2.17 kernel the other
> day.  Everything I did on it just waited forever.  (Since shutdown tries
> to umount all partitions the only way to reboot the machine was to kill
> the watchdog process.)
> 
> The problem persisted after the reboot, so the partition must've contained
> errors.  Running `reiserfsck --replay-by-journal' fixed the problem.  (I
> think: before that I also ran `reiserfsck --check 'on it.)
> 
Which reiserfs version are you running?  From the ps output, it looks like
you've got a bunch of processes waiting on the log, and one process waiting
on a semaphore, so everyone is probably waiting for that process to close
the transaction.  These kinds of deadlocks should have been long since
fixed, so there is probably a larger problem.
Running reiserfsck --replay-journal will replay the journal.  This happens
on every mount, so I'm really not sure how it could have fixed things ;-)
The --check option is readonly, and if there was a metadata problem it
probably would have reported it.
-chris
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/