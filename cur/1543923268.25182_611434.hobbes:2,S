Date: Mon, 29 Oct 2007 16:52:28 +0530
From: Kamalesh Babulal <>
Subject: [PATCH-RESEND] Re: S390 change in sg_set_page() cause build failure
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/10/29/113

On Fri, Oct 26, 2007 at 01:54:30PM +0200, Jens Axboe wrote:
> On Fri, Oct 26 2007, Kamalesh Babulal wrote:
> > Hi Jens,
> > 
> >  	sg_set_buf(list, address, 0);
<snip>
> >  }
> 
> That's not quite right, it should be:
> 
> diff --git a/drivers/s390/scsi/zfcp_def.h b/drivers/s390/scsi/zfcp_def.h
> index 0754542..e268f79 100644
> --- a/drivers/s390/scsi/zfcp_def.h
> +++ b/drivers/s390/scsi/zfcp_def.h
> @@ -70,11 +70,12 @@ zfcp_sg_to_address(struct scatterlist *list)
>   * zfcp_address_to_sg - set up struct scatterlist from kernel address
>   * @address: kernel address
>   * @list: struct scatterlist
> + * @size: buffer size
>   */
>  static inline void
> -zfcp_address_to_sg(void *address, struct scatterlist *list)
> +zfcp_address_to_sg(void *address, struct scatterlist *list, unsigned int size)
>  {
> -	sg_set_buf(list, address, 0);
> +	sg_set_buf(list, address, size);
>  }
> 
>  #define REQUEST_LIST_SIZE 128
> 
> -- 
> Jens Axboe
Hi Jens,
Resending the patch with the changes pointed by you in the patch.
[jens.axboe@oracle.com: size parameter fix]
Signed-off-by: Kamalesh Babulal <kamalesh@linux.vnet.ibm.com>
--
diff --git a/drivers/s390/scsi/zfcp_def.h b/drivers/s390/scsi/zfcp_def.h
index 0754542..f747e86 100644
--- a/drivers/s390/scsi/zfcp_def.h
+++ b/drivers/s390/scsi/zfcp_def.h
@@ -70,11 +70,12 @@ zfcp_sg_to_address(struct scatterlist *list)
  * zfcp_address_to_sg - set up struct scatterlist from kernel address
  * @address: kernel address
  * @list: struct scatterlist
+ * @size: buffer size 
  */
 static inline void
-zfcp_address_to_sg(void *address, struct scatterlist *list)
+zfcp_address_to_sg(void *address, struct scatterlist *list, unsigned int size)
 {
-	sg_set_buf(list, address, 0);
+	sg_set_buf(list, address, size);
 }
 
 #define REQUEST_LIST_SIZE 128
--
Thanks & Regards,
Kamalesh Babulal,
Linux Technology Center,
IBM,ISTL.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/