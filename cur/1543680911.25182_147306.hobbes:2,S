Date: Fri, 11 Jul 2003 20:24:26 -0700
From: "David S. Miller" <>
Subject: Re: REQ: BCM4400 network driver for 2.4.22
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/7/11/370

On Fri, 11 Jul 2003 19:33:45 +0300
Pekka Pietikainen <pp@netppl.fi> wrote:
> @@ -660,9 +671,12 @@
>  	ctrl = src_desc->ctrl;
>  	if (dest_idx == (B44_RX_RING_SIZE - 1))
>  		ctrl |= cpu_to_le32(DESC_CTRL_EOT);
> +	else
> +		ctrl &= ~DESC_CTRL_EOT;
Please be kind to us underprivileged big-endian users
out here :-)
-		ctrl &= ~DESC_CTRL_EOT;
+		ctrl &= cpu_to_le32(~DESC_CTRL_EOT);
> @@ -733,6 +749,7 @@
>  			/* DMA sync done above */
>  			memcpy(copy_skb->data, skb->data, len);
> 
> +			skb->data-=bp->rx_offset;
>  			skb = copy_skb;
>  		}
>  		skb->ip_summed = CHECKSUM_NONE;
You can't modify skb->data without doing something sane
with skb->len and friends too, this is why we have skb_*()
interfaces to do these kinds of operations which do all
the necessary book-keeping :-)
Otherwise looks good.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/