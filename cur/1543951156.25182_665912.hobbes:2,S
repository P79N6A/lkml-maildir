Date: Mon, 10 Mar 2008 22:51:45 +0100
From: Andi Kleen <>
Subject: Re: [PATCH 1/1] Speedfreq-SMI call clobbers ECX
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/3/10/311

> Please also note that these are not clobbers in the strict inline asm
> syntax, but rather dummy output values that correspond to actual
Outputs/Inputs are as bad as clobbers in triggering gcc reload ICEs.
> input parameters. I'd consider this a serious compiler flaw, if not
> bug, if these would not work. But let's not get into GCC vs.
It is, and it's (mostly) fixed in newer versions, but we're stuck with 
supporting the older compiler versions unfortunately.
> > For asms with so many clobbers explicit push/pop is usually safer.
> 
> Yes, but it is unneccessary overhead as the compiler can (should!)
> find more elegant ways to get those registers back if needed.
This code is not performance critical at all. Safer beats faster
any time in such cases.
-Andi