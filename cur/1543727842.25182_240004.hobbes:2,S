Date: Mon, 9 Aug 2004 01:29:26 -0700
From: William Lee Irwin III <>
Subject: Re: 2.6.8-rc3-mm2
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/8/9/33

On Mon, Aug 09, 2004 at 01:20:37AM -0700, Rick Lindsley wrote:
> Got complaints from arch/i386/mm/discontig.c:
[...]
> arch/i386/mm/discontig.c:430: warning: passing arg 3 of `free_area_init_node' from incompatible pointer type
> arch/i386/mm/discontig.c:430: warning: passing arg 4 of `free_area_init_node' makes integer from pointer without a cast
> arch/i386/mm/discontig.c:430: warning: passing arg 5 of `free_area_init_node' makes pointer from integer without a cast
> arch/i386/mm/discontig.c:430: too many arguments to function `free_area_init_node'
> Looks like I can't get by with just deleting the third argument in the
> second case.
Initializing NODE_DATA(nid)->node_mem_map prior to calling it should do.
Index: mm2-2.6.8-rc3/arch/i386/mm/discontig.c
===================================================================
--- mm2-2.6.8-rc3.orig/arch/i386/mm/discontig.c	2004-08-08 15:39:24.000000000 -0700
+++ mm2-2.6.8-rc3/arch/i386/mm/discontig.c	2004-08-09 01:17:17.815702160 -0700
@@ -425,8 +425,8 @@
 			lmem_map = (unsigned long)node_remap_start_vaddr[nid];
 			lmem_map += sizeof(pg_data_t) + PAGE_SIZE - 1;
 			lmem_map &= PAGE_MASK;
-			free_area_init_node(nid, NODE_DATA(nid), 
-				(struct page *)lmem_map, zones_size, 
+			NODE_DATA(nid)->node_mem_map = (struct page *)lmem_map;
+			free_area_init_node(nid, NODE_DATA(nid), zones_size, 
 				start, zholes_size);
 		}
 	}
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/