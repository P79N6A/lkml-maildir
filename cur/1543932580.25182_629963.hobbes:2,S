Date: Wed, 19 Dec 2007 12:42:50 -0500
From: Jeff Moyer <>
Subject: Re: [PATCH] ecryptfs: redo dget,mntget on dentry_open failure
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/12/19/167

Eric Sandeen <sandeen@redhat.com> writes:
> Thanks to Jeff Moyer for pointing this out.
>
> If the RDWR dentry_open() in ecryptfs_init_persistent_file fails,
> it will do a dput/mntput.  Need to re-take references if we
> retry as RDONLY.
>
> Signed-off-by: Eric Sandeen <sandeen@redhat.com>
Signed-off-by: Jeff Moyer <jmoyer@redhat.com>
Thanks,
Jeff