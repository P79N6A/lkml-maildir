Date: 06 Sep 2002 08:52:47 -0500
From: Paul Larson <>
Subject: pid_max hang again...
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/9/6/61

In the nightly bk pull testing I do, I saw that this got commited
yesterday:
-ChangeSet@1.619, 2002-09-05 08:45:49-07:00, mingo@elte.hu
-  [PATCH] pid-max-2.5.33-A0
-  
-  This is the pid-max patch, the one i sent for 2.5.31 was botched.  I
-  have removed the 'once' debugging stupidity - now PIDs start at 0
-  again.
-  Also, for an unknown reason the previous patch missed the hunk that 
-  had the declaration of 'DEFAULT_PID_MAX' which made it not compile
It looks like this change dropped us back to the same error all this was
originally supposed to fix.  When you hit PID_MAX, get_pid() starts
looping forever looking for a free pid and hangs.  I could probably make
my original fix work on this very easily if you'd like.
I wonder though, would it be possible to do this in a more simple way by
just throttling max_threads back to something more sane if it gets
defaulted too high?  Since it gets checked before we even get to the
get_pid call in copy_process().  That would keep the number of processes
down to a sane level without the risk.
Thanks,
Paul Larson
http://www.linuxtestproject.org
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/