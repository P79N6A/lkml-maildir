Date: Sat, 18 Mar 2000 11:38:45 +0100 (CET)
From: Arjan van de Ven <>
Subject: [2.3.99pre2-3] ParIDE dependency fix
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/3/18/183

Hi,
[Short description]
The PARIDE has a dependency wrong, this is fixed by the following patch:
--- linux/drivers/block/Config.in.orig	Sat Mar 18 11:32:00 2000
+++ linux/drivers/block/Config.in	Sat Mar 18 11:32:14 2000
@@ -31,7 +31,7 @@
    fi
 fi
 tristate 'XT hard disk support' CONFIG_BLK_DEV_XD
-dep_tristate 'Parallel port IDE device support' CONFIG_PARIDE $CONFIG_PARIDE_PARPORT
+dep_tristate 'Parallel port IDE device support' CONFIG_PARIDE $CONFIG_PARPORT
 if [ "$CONFIG_PARIDE" = "y" -o "$CONFIG_PARIDE" = "m" ]; then
    source drivers/block/paride/Config.in
 fi
[Long description]
In 2.3.99pre2-3, the dependency for the Parallel port IDE is wrong. It
currently depends on $CONFIG_PARIDE_PARPORT, but $CONFIG_PARIDE_PARPORT
is determined in drivers/block/paride/Config.in like this:
[snapshot from drivers/block/paride/Config.in]
if [ "$CONFIG_PARPORT" = "y" -o "$CONFIG_PARPORT" = "n" ]; then
   define_tristate CONFIG_PARIDE_PARPORT y
else
   define_tristate CONFIG_PARIDE_PARPORT m
fi
This Config.in is executed _AFTER_ the config-option in question is asked,
so $CONFIG_PARIDE_PARPORT is undefined at the moment of the question
(making the dependency moot). Obviously, the dependency should be on
CONFIG_PARPORT instead.
Greetings,
   Arjan van de Ven
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/