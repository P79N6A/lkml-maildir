Date: Tue, 4 Mar 2003 19:49:59 +0100 (CET)
From: Johan Adolfsson <>
Subject: [PATCH] Avoid PC(?) specific cascade dma reservation in kernel/dma.c
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/3/4/126

I guess the reservation of dma channel 4 for "cascade" is
PC or chipset specific and we don't have such a thing in the 
CRIS (ETRAX100LX) chip and channel 4 clashes with external dma0.
Perhaps a better fix is to #ifdef on something else or remove 
the cascade stuff entirely from this file, but I leave that
to those who know better.
Have no other arch been bitten by this?
Please apply to both 2.4 and 2.5.
/Johan
diff -u -p -r1.3 dma.c
--- linux/kernel/dma.c	23 Feb 2001 13:50:32 -0000	1.3
+++ linux/kernel/dma.c	4 Mar 2003 18:46:51 -0000
@@ -59,7 +59,11 @@ static struct dma_chan dma_chan_busy[MAX
 	{ 0, 0 },
 	{ 0, 0 },
 	{ 0, 0 },
+#ifndef __CRIS__
 	{ 1, "cascade" },
+#else
+	{ 0, 0 },
+#endif        
 	{ 0, 0 },
 	{ 0, 0 },
 	{ 0, 0 }
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/