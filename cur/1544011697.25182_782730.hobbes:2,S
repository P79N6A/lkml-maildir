Date: Fri, 19 Dec 2008 14:38:32 -0800
From: Andrew Morton <>
Subject: Re: [PATCH v7 4/8] sched: nominate preferred wakeup cpu
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/12/19/357

On Fri, 19 Dec 2008 23:31:30 +0100
Ingo Molnar <mingo@elte.hu> wrote:
> * Ingo Molnar <mingo@elte.hu> wrote:
> 
> > > [   74.013893]  <EOI> <0>Code: 8b 47 08 4a 8b 0c 00 48 85 c9 0f 84 c3 00 00 00 49 8b 47 10 4a 8b 04 00 48 8b 80 a8 00 00 00 48 85 c0 74 13 48 0f af 45 c8 31 d2 <48> f7 75 c0 49 89 c6 48 89 c6 eb 16 48 63 55 d0 48 8b 45 c8 45 
> > > [   74.013893] RIP  [<ffffffff802375d8>] tg_shares_up+0x113/0x1f1
> > > [   74.013893]  RSP <ffff88025e057d88>
> > > [   74.020022] ---[ end trace 2fc4046e394f2312 ]---
> > > [   74.020188] Kernel panic - not syncing: Fatal exception in interrupt
> > > 
> > > config: 
http://userweb.kernel.org/~akpm/config-akpm2.txt
> > > 
> > > I'll try hacking some div-by-zero avoidance into update_group_shares_cpu().
> > 
> > hm, weird - Yinghai noticed this crash in -tip and we have that patch 
> > zapped from all -*-next branches already.
> 
> I guess you applied Ken's patch from email and had it in -mm?
Nope.
> We have a 
> new version of that patch from Ken now based on Yinghai's bugreport - only 
> lightly tested for now.
> 
> 	Ingo
> 
> ----------->
> >From d71f5a7c8bf9cd7c74159a53e522e363f2eddaf5 Mon Sep 17 00:00:00 2001
> From: Ken Chen <kenchen@google.com>
> Date: Fri, 19 Dec 2008 10:11:50 -0800
> Subject: [PATCH] sched: fix uneven per-cpu task_group share distribution
linux-next has:
commit 6eed5aaacae0ced9a43a923633befd2c695d6620
Author: Ken Chen <kenchen@google.com>
Date:   Mon Dec 15 23:37:50 2008 -0800
    sched: fix uneven per-cpu task_group share distribution
so I guess we have a latency problem.