Date: Mon, 9 Aug 1999 20:57:57 +0100
From: Russell Coker <>
Subject: Re: What are dquots?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/8/12/97

On Mon, 09 Aug 1999, you wrote:
>I got the following message today while doing a big file conversion
>(~4,000 users mbox -> Maildir) on a Linux (RH 5.2) server running
>2.2.6-ac2 SMP:
>
>Aug  8 17:11:42 mail kernel: VFS: No free dquots, contact mvw@planets.elm.net
>
>This is on DPT hardware raid ext2 file system.
>
>Any ideas what this would come from? I'm obviously going to contact mvw,
>but I couldn't seem to find anything about this on the Web... Kinda
>getting worried now, since this is a production mail server :)
I've just been reading the file /usr/src/linux/fs/dquot.c in kernel 2.2.10
which has the message you saw.  In the get_empty_dquot() function if the
number of dquot's in use (a dquot is a structure for an in-use quota entry) is
equal to the maximum number of dquot's in the system (default of 1024, settable
in /proc/sys/fs/dquot-max) then the message arises.
What I would like to know is firstly why the message to email the author is
necessary, it seems that bit of code is handling a fairly regular situation and
that no data loss is likely to result.
Also I would like to know why NR_DQUOTS (the default value for dquot-max) is set
at only 1024 (seems a fairly small number really as they aren't allocated
unless/until they are needed).  In fact why not just have no fixed limit and
free the dquot's when they aren't needed?
--
This is the noise that keeps me awake
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/