Date: Fri,  7 Mar 2008 10:13:20 +0100 (CET)
From: Andi Kleen <>
Subject: [PATCH] [0/7] Block layer rework for mask allocator
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/3/7/103

This reworks the block layer bouncing to use the mask allocator
Instead of using GFP_DMA use device masks derived from the bounce gfp
and pass it to the mask allocator. On architectures not converted
to the mask allocator the code will transparently fall back to GFP_DMA.
Requires the earlier mask allocator patchkit I posted.
It is still not 100% finished -- in particular the bouncer still
does not know how to use masks > ISA mask, but that is not very difficult
to add now. I first wanted to laid the groundwork.
One patch ("Convert the blk allocator functions over to the mask allocator")
depends on the "blk allocator" in the earlier SCSI DMA rework 
patchkit I've been posting. That patch can be dropped without trouble 
if that one is not applied, but if it is applied it is needed.
-Andi