Date: Tue, 29 Feb 2000 18:33:20 -0500 (EST)
From: Phil DeBecker <>
Subject: Re: Can't compile 2.3.48 with Athlon Processor Family
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/3/1/20

Here's a pair of trivial patches to fix the problem.  Basically what is
needed is to remove the declarations of the profile buffer stuff from
include/linux/sched.h and put them in include/asm/string.h.  (You can't
simply move the declarations up in sched.h as a lot of the ide*.c files
include string.h but not sched.h).  This solved the problem for me, I'm
now able to build 2.3.48 with Athlon as the CPU type (and it works well
so far).
This is the patch to include/asm/string.h:
--- string.h.BAK        Mon Feb 28 04:10:28 2000
+++ string.h    Tue Feb 29 18:27:05 2000
@@ -2,6 +2,11 @@
 #define _I386_STRING_H_
 #ifdef __KERNEL__
+
+extern unsigned int * prof_buffer;
+extern unsigned long prof_len;
+extern unsigned long prof_shift;
+
 /*
  * On a 486 or Pentium, we are better off not using the
  * byte string operations. But on a 386 or a PPro the
...and this is the patch for include/linux/sched.h:
--- sched.h.BAK Mon Feb 28 04:10:38 2000
+++ sched.h     Mon Feb 28 04:12:42 2000
@@ -488,10 +488,6 @@
 extern struct timeval xtime;
 extern void do_timer(struct pt_regs *);
-extern unsigned int * prof_buffer;
-extern unsigned long prof_len;
-extern unsigned long prof_shift;
-
 #define CURRENT_TIME (xtime.tv_sec)
 extern void FASTCALL(__wake_up(wait_queue_head_t *q, unsigned int mode));
-- 
Phil DeBecker
"Give me a lever long enough, and a place to stand, and I'll break the lever."
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/