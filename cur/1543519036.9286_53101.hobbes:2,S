Date: Mon, 13 Dec 1999 16:38:09 +0000 (Local time zone must be set--see zic manual page)
From: Jonas Jochum <>
Subject: X11 quitting with sig 11 on 2.3.31 / problems with 2.3.32-pre3
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/12/13/75

Hello!
Since upgrading to 2.3.31 I noticed repeated sig 11's and sig 1's in X:
--- CUT ---
Fatal server error:
Caught signal 11.  Server aborting
When reporting a problem related to a server crash, please send
the full server output, not just the last messages
xinit:  connection to X server lost.
/usr/bin/wmaker warning: got signal 1 (Hangup) - exiting...
X IO Error
--- END ---
Sometimes there also is a report about a broken pipe.
This doesn't happen under previous kernels. One thing I noticed is, that
only _very_ big programs, memory hogs like Netscape, StarOffice 5.1 and X, 
exit with sig 11.
 
I didn't get to testing 2.3.32-3 yet, since it doesn't compile on my pc
with gcc 2.95.2. It stops compiling with a parse error in
arch/i386/mm/init.c. I hope this is the correct fix:
diff -du init.c.old init.c
--- init.c.old	Mon Dec 13 16:04:05 1999
+++ init.c	Mon Dec 13 16:03:57 1999
@@ -162,17 +162,20 @@
 	int freed = 0;
 	if(pgtable_cache_size > high) {
 		do {
-			if(pgd_quicklist) 
-				mmlist_modify_lock(), \
-				free_pgd_slow(get_pgd_fast()), \
-				mmlist_modify_unlock(), \
+			if(pgd_quicklist) {
+				mmlist_modify_lock();
+				free_pgd_slow(get_pgd_fast());
+				mmlist_modify_unlock();
 				freed++; 
-			if(pmd_quicklist) 
-				free_pmd_slow(get_pmd_fast()), \
+				}
+			if(pmd_quicklist) {
+				free_pmd_slow(get_pmd_fast());
 				freed++; 
-			if(pte_quicklist) 
-				free_pte_slow(get_pte_fast()), \
+				}
+			if(pte_quicklist) {
+				free_pte_slow(get_pte_fast());
 				freed++;
+				}
 		} while(pgtable_cache_size > low);
 	}
 	return freed;
-- end of patch --
In addition to the parse error it can't find agp.o in drivers/char/agp/:
ld: cannot open drivers/char/agp/agp.o: No such file or directory
That is, when compiling agpgart as a module. When compiling it in,
everything works perfectly. There were some fixes to the Makefile. Might
they be the cause?
Compiling ppp_deflate as a module when running 2.3.31 causes a sig 11.
I hope, I helped a bit.
That's it for now - gotta get some work done :)
-- 
Regards,
   Jonas
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
Homepage:		
http://www.jonas-jochum.de
eMail:			email@jonas-jochum.de
Abi2000 am Windeck:	
http://www.abi-2k.de
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
I'm signature virus '99. Copy me into your ~/.signature to help me spread.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/