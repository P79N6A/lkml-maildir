Date: Mon, 12 Mar 2007 04:12:32 -0700 (PDT)
From: Christoph Lameter <>
Subject: Re: [QUICKLIST 0/6] Arch independent quicklists V1
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/3/12/106

On Sun, 11 Mar 2007, David Miller wrote:
> I'm going to make the radical declaration that it be perhaps often
> better to always initialize page table chunks to all zeros on
> allocation.
That is the case if most of the page is going to be used soon. If we have 
sparse access patterns then not zeroing can avoid uselessly bringing 
cachelines in.
> The reason is that every time I've monitored the allocation patterns
> of these things on SMP, the page table chunks always get released on a
> different cpu than where they were initialized.
But its even advantageous in that case for sparse allocs.
> The allocator side just does nothing but emit L2 cache line ownership
> transactions as the pte page is touched.  Especially on chips like
> PowerPC where zero initialization is absurdly cheap, we can avoid all
> of the cache line transfers if we just initialize it at allocation
> time.
We have no need to touch all the cache lines w/o initialization if we 
alloc from the quicklist. And that is a performance benefit.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/