Date: Thu, 27 Dec 2007 14:21:21 -0700
From: Matthew Wilcox <>
Subject: Re: [Patch v2] Make PCI extended config space (MMCONFIG) a driver opt-in
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/12/27/117

On Thu, Dec 27, 2007 at 04:10:33PM -0500, Loic Prylli wrote:
> The root pcie port implementation is obviously buggy. But did we confirm
> whether that hardware bug might be partly related to
> "configuration-retry-status" pcie-root handling as introduced/described in:
> 
> 
http://marc.info/?l=linux-kernel&m=110541914926842&w=2
> 
> Does the 0001 vendor-id still shows up if pci_enable_crs() has never
> been called?
> 
> Does anybody knows what was the original rational to call
> pci_enable_crs() by default?
If you don't call pci_enable_crs(), no device can return the retry
status, so it would be pointless having this code in the kernel at all.
If it turns out some devices are buggy, then obviously we shouldn't
enable it for them.
-- 
Intel are signing my paycheques ... these opinions are still mine
"Bill, look, we understand that you're interested in selling us this
operating system, but compare it to ours.  We can't possibly take such
a retrograde step."