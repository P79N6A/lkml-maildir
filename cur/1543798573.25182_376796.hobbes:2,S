Date: Thu, 15 Dec 2005 18:09:03 -0800
From: Andy Isaacson <>
Subject: Re: [RFC/RFT] swsusp: image size tunable (was: Re: [PATCH][mm] swsusp: limit image size)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/12/15/430

On Sat, Dec 10, 2005 at 11:56:26PM +0100, Rafael J. Wysocki wrote:
> Update:
> 
> A cleaner version with comments etc. follows.
> 
>  Documentation/power/interface.txt |   11 +++++++++++
>  Documentation/power/swsusp.txt    |    7 ++++++-
>  kernel/power/disk.c               |   20 ++++++++++++++++++++
>  kernel/power/power.h              |    7 ++-----
>  kernel/power/swsusp.c             |   10 +++++++++-
>  5 files changed, 48 insertions(+), 7 deletions(-)
I've been testing this as present in 2.6.15-rc5-mm2 and it works like a
champ.  I am currently running with image_size=150, which seems to be a
nice balance between quick suspend and still having a reasonable working
set after resume.
I did have one concerning failure during an earlier test, though - I
have only 512MB of swap with 1.25GB RAM.  Now obviously if there are
>500MB user pages, swsusp must fail; but I think I had a failure even
though there was only about 400MB user pages - some of it was swapped
out, and I had image_size=500, which resulted in an image that would not
fit into the available swap space.
It sucks to fail the suspend just because the chosen image size didn't
fit into the current state of the machine.  Now obviously I need to
resize my swap partition to prevent this from happening, but it would
be nice if swsusp would automatically "try harder!" if appropriate.
I can reproduce this and collect more data if needed.
-andy
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/