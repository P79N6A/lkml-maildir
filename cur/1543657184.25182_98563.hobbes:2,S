Date: Sat, 28 Dec 2002 17:12:56 +1100
From: Rusty Russell <>
Subject: Re: [PATCH] fix os release detection in module-init-tools-0.9.6
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/12/28/9

In message <957BD1C2BF3CD411B6C500A0C944CA2601AA1377@pdsmsx32.pd.intel.com> you
 write:
> Dear Rusty,
> 	IMHO, try_old_version can tell kernel release better with this
> patch, don't you? ;->
>   - Louis
I prefer, in principle, to test for features, not kernel versions.
What about 2.1, for example?
I've changed the check to sys_create_module(NULL, 0) != -ENOSYS,
instead, which should cover everything.
Now, why do you want /proc/ksyms exactly?  I'm not hugely opposed to
it, but it's rarely what people actually want, since it contains only
exported symbols.
My plan was to change the format of /proc/modules slightly to make it
extensible (patch on my page), then add the "start of module"
parameter, which should allow ksymoops and oprofile to handle modules
cleanly again (although ksymoops is less urgent since CONFIG_KALLSYMS
does such a nice job for most things).
Hope that clarifies,
Rusty.
--
  Anyone who quotes me in their sig is an idiot. -- Rusty Russell.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/