Date: Wed, 04 Oct 2006 10:25:44 +0100
From: "Jan Beulich" <>
Subject: Re: BUG-lockdep and freeze (was: Arrr! Linux 2.6.18)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/10/4/79

>> The lockdep warning in itself is probably valid, but the reason for the 
>> _hang_ is the
>> 
>> 	[  138.831385] Unable to handle kernel paging request at ffffffff82800000 RIP:
>> 	[  138.831439]  [<ffffffff8020b491>] show_trace+0x311/0x380  
>> 
>> and that code is just a total mess. 
>
>The code decides to do a fallback at the top of stack space for some reason.
>
>Hmm, i've seen this working on other kernel threads, but maybe 
>that was luck. Kernel threads don't end up in user space 
>so the normal check for that doesn't work.
>I guess we just need another termination for the kernel threads
>by pushing a 0 there explicitely. Jan, do you agree?
I thought we had done this already.
>> > [  138.751306]  [<ffffffff8021ecc0>] search_extable+0x40/0x70
>
>After here the unwinder seems to become a bit and it shouldn't print
>multiple entries. Jan any ideas why?
Not without raw stack contents.
>Proposed patch appended. Jan, what do you think?
As said above - I thought we added zero-termination already.
Jan
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/