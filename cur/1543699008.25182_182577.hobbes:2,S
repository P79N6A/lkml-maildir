Date: Mon, 8 Dec 2003 06:03:46 -0800
From: William Lee Irwin III <>
Subject: Re: 2.6.0-test11-wli-1
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/12/8/62

On Thu, Dec 04, 2003 at 12:01:20PM -0800, William Lee Irwin III wrote:
>> Successfully tested on a Thinkpad T21. Any feedback regarding
>> performance would be very helpful. Desktop users should notice top(1)
>> is faster, kernel hackers that kernel compiles are faster, and highmem
>> users should see much less per-process lowmem overhead.
On Mon, Dec 08, 2003 at 05:57:37AM -0800, William Lee Irwin III wrote:
> Woops, I missed the target by a few bytes. Probably a bit overwrought:
These THREAD_SIZE bits are cropping up all over.
-- wli
--- wli-2.6.0-test11-37/arch/i386/kernel/traps.c	2003-11-26 12:43:09.000000000 -0800
+++ wli-2.6.0-test11-38/arch/i386/kernel/traps.c	2003-12-08 04:58:08.000000000 -0800
@@ -119,7 +119,7 @@ void show_trace_task(struct task_struct 
 	unsigned long esp = tsk->thread.esp;
 
 	/* User space on another CPU? */
-	if ((esp ^ (unsigned long)tsk->thread_info) & (PAGE_MASK<<1))
+	if ((esp ^ (unsigned long)tsk->thread_info) & ~(THREAD_SIZE - 1))
 		return;
 	show_trace(tsk, (unsigned long *)esp);
 }
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/