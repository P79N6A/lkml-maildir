Date: 13 Mar 2006 09:49:34 -0500
From: Jes Sorensen <>
Subject: Re: kmalloc_node returns unaligned memory
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/3/13/101

>>>>> "Olaf" == Olaf Hering <olh@suse.de> writes:
Olaf> kmalloc_node returns unaligned pointers on powerpc, when
Olaf> CONFIG_DEBUG_SLAB is enabled. This makes iptables very
Olaf> unhappy. It checks the alignment in
Olaf> net/ipv6/netfilter/ip6_tables.c:check_entry_size_and_hooks().
Olaf> __alignof__(struct ip6t_entry) returns 8. But returned pointers
Olaf> from xt_alloc_table_info() are unaligned:
Hi Olaf,
I believe this is expected behavior ;-(
We have the same problem with the XPC driver for the SN2 which resulted
in a wrapper macro being created for it.
Some sort of SLAB_HWCACHE_ALIGN flag to Slab that was always respected
for this would be nice.
Cheers,
Jes
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/