Date: Sun, 25 Jul 2004 17:36:52 -0700
From: Andrew Morton <>
Subject: Re: [PATCH][2.6.8-rc1-mm1] Autotune swappiness01
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/7/25/97

Con Kolivas <kernel@kolivas.org> wrote:
>
> Attached is a patch designed to improve the behaviour of the swappiness knob 
> in 2.6.8-rc1-mm1. 
> 
> The current mechanism decides to reclaim mapped pages based on the 
> combination of mapped_ratio/2 and the manual setting of swappiness currently 
> tuned to 60. Biasing this mechanism to be proportional to the square root of 
> mapped_ratio gives good overall performance improvement for desktop 
> workloads without any noticable detriment to other loads.
OK...
> It has the effect 
> of being fairly aggressive at avoiding loss of applications to swap under 
> conditions of heavy or sustained file stress while allowing applications to 
> swap out under what would be considered "application" memory stresses on a 
> desktop.
But decreasing /proc/sys/vm/swappiness does that too?
> It has no measurable effect on any known benchmarks.
So how are we to evaluate the desirability of the patch???
> The swappiness knob is kept intact and ironically is set to the same value 
> of 60, and overall behaves the same as previous patches posted for 
> autoregulating swappiness. The idea of this patch is to ultimately deprecate 
> the need for a swappiness knob if this achieves good performance in most 
> workloads.
Don't think so.  If you have a machine with a lot of memory which is doing
mainly pagecache-intensive work and you also want it to aggressively swap
out anonymous pages (ie: your initials are akpm) then you'll be setting
swappiness to 100.
Shouldn't mapped_bias be local to refill_inactive_zone()?
Why is `swappiness' getting squared?  AFAICT this will simply make the
swappiness control behave nonlinearly, which seems undesirable?
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/