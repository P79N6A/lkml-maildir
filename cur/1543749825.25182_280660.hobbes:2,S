Date: Wed, 22 Dec 2004 10:15:23 +0530
From: <>
Subject: Query on module dependency handling in IrDA network drivers
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/12/21/233

Greetings All,
This is with reference to handling of module dependencies in IrDA
network drivers on 2.6.10-rc3.
My understanding is that the lower most drivers (in the IrDA stack which
will be platform dependent) should not be doing a try_module_get or a
module_put in itself. My device however is not a hot-pluggable device,
but I would like to dynamically load and unload the lower layer IrDA
driver. If I am not using try_module_get in my lower layer driver, the
issue that I am facing is: When the irda0 (in my case) is up and data is
under transmission and I do an rmmod of the lower layer driver, the
driver is being removed (the transfer stops meanwhile). This does not
seem to be a proper behavior (If this is an expected behavior, could
some one explain why this is so?). I would rather expect the rmmod to
tell me that the module is busy and refuse to remove the module.
Regards,
Manjunath
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/