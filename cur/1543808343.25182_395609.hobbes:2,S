Date: Fri, 10 Feb 2006 16:32:34 +1100
From: Nick Piggin <>
Subject: Re: [PATCH] mm: Implement Swap Prefetching v23
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/2/10/12

Con Kolivas wrote:
> Just so it's clear I understand, is this what you (both) had in mind?
> Inline so it's not built for !CONFIG_SWAP_PREFETCH
> 
Close...
> Index: linux-2.6.16-rc2-ck1/mm/swap.c
> ===================================================================
> --- linux-2.6.16-rc2-ck1.orig/mm/swap.c	2006-02-09 21:53:37.000000000 +1100
> +++ linux-2.6.16-rc2-ck1/mm/swap.c	2006-02-10 16:22:45.000000000 +1100
> @@ -156,6 +156,13 @@ void fastcall lru_cache_add_active(struc
>  	put_cpu_var(lru_add_active_pvecs);
>  }
> 
> +inline void lru_cache_add_tail(struct page *page)
Is this inline going to do what you intend?
> +{
> +	struct zone *zone = page_zone(page);
> +
     spin_lock_irq(&zone->lru_lock);
> +	add_page_to_inactive_list_tail(zone, page);
     spin_unlock_irq(&zone->lru_lock);
> +}
> +
>  static void __lru_add_drain(int cpu)
>  {
>  	struct pagevec *pvec = &per_cpu(lru_add_pvecs, cpu);
-- 
SUSE Labs, Novell Inc.
Send instant messages to your online friends 
http://au.messenger.yahoo.com
 
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/