Date: Tue, 28 Sep 1999 14:26:17 +0200
From: Harald Koenig <>
Subject: Re: Clock Watching the Scheduler 2.2.10unip
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/9/28/69

On Sep 27, Richard B. Johnson wrote:
> > 1)  500 interrupts take 5 seconds.  No surprise there.  Except
when pressing the shift key jsut after starting `clockwatcher'
it takes only 3.9 seconds:  that's the 30 Hz interrupts from the keyboard.
> > 2)  Most interrupts take ~5600 cycles to process on a 530 MHz Cel,
same here on a AMD K6/2-400 (DFI main board).
> > 	and ~2600 on 200 MHz PPro.  This is better than FreeBSD
> > 	2.2.8 where they take ~5200 on a PPro 200.  But `way longer
> Erm.. How is this supposed to measure interrupts?
it detects/measures just every delay/timeout longer than 90 cycles in this program.  
at least some of them have to be from interrupts and their service routines, isn't it ?
playing with differnet interrupt sources shows that these `timeouts' indeed corelate
with interrupt rates...
here is some data from my PC for three tests:
	A: free run (X11 etc. running, 83 processes)
	B: like A, but shift key pressed after starting, no significant difference.
	C: mouse moved pretty fast all the time.
my mouse is a old Logitech serial mouse, running at 9600 baud connected
to a 16450 UART (one interrupt for each character) giving ~430 interrupts/sec
while moving.  
in case C the run only takes ~1.1 secs for 500 `interrupts' (makes sense;)
but note the longer time this interrupt service takes (6272 vs. 5632 ticks).
ticks          #counts
           A     B     C
5568       1     1     0
5632      22    22     0
5696       7     7     0
5760       4     4     0
5824       5     5     0
5888       2     2     0
5952       4     4     0
6016       5     5     1
6080       6     6    25
6144       6     6     7
6208       2     2    78
6272       2     2    76
6336       0     0    60
6400       6     6    13
6464       0     0    27
6528       1     1     7
6592       1     1     0
6656       3     3     0
6720       0     0     0
6784       4     4     0
6848       1     1     2
6912       3     3     1
6976       0     0     0
7040       3     3     1
7104       0     0     0
7168       1     1     1
7232       0     0     0
7296       1     1     1
7360       0     0     1
7424       0     0     0
7488       7     7     0
7552       5     5     1
7616      12    12     0
7680      10    10     1
7744       8     8     0
7808       4     4     0
7872       5     5     0
7936       2     2     0
8000       0     0     1
8064       0     0     2
8128       1     1     8
8192       1     1    14
8256       0     0     9
8320       2     2     8
8384       3     3     7
8448       1     1     5
8512       1     1     3
8576       7     7     7
8640       1     1     2
8704       2     2     7
8768       0     0     3
8832       0     0     4
8896       0     0     1
8960       0     0     4
9024       0     0     2
9088       0     0     1
9152       0     0     1
9216       0     0     2
9280       1     1     0
9344       0     0     1
9408       1     1     0
9472       0     0     1
9536       0     0     2
9792       0     0     0
9984       0     0     0
Harald
-- 
All SCSI disks will from now on                     ___       _____
be required to send an email notice                0--,|    /OOOOOOO\
24 hours prior to complete hardware failure!      <_/  /  /OOOOOOOOOOO\
                                                    \  \/OOOOOOOOOOOOOOO\
                                                      \ OOOOOOOOOOOOOOOOO|//
Harald Koenig,                                         \/\/\/\/\/\/\/\/\/
Inst.f.Theoret.Astrophysik                              //  /     \\  \
koenig@tat.physik.uni-tuebingen.de                     ^^^^^       ^^^^^
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/