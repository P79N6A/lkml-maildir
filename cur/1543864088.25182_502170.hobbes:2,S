Date: Fri, 26 Jan 2007 21:22:03 +0000
From: Frederik Deweerdt <>
Subject: Re: Oops on serial access on kernel 2.6.16.38
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/1/26/308

On Fri, Jan 26, 2007 at 06:17:03PM +0000, Jose Goncalves wrote:
> Frederik Deweerdt wrote:
> > On Fri, Jan 26, 2007 at 03:50:25PM +0000, Jose Goncalves wrote:
> >   
> >> I'm having a problem with the latest 2.6.16 kernel (I've found the
> >> problem on 2.6.16.37 and 2.6.16.38). I have a application that retreives
> >> data from a GPS connected on a serial port. From time to time a get a
> >> kernel Oops, like this:
> >>
> >>     
> > Could you send your .config?
> >   
> Here it goes...
> 
Thanks. It looks like something is wrong with port->ops->startup() in
uart_startup(), could you apply the following patch and report the
results? And btw, you're using a plain 8250 serial port, isn't it?
Regards,
Frederik
diff --git a/drivers/serial/serial_core.c b/drivers/serial/serial_core.c
index cc1faa3..08772dc 100644
--- a/drivers/serial/serial_core.c
+++ b/drivers/serial/serial_core.c
@@ -171,6 +171,10 @@ static int uart_startup(struct uart_state *state, int init_hw)
 		uart_circ_clear(&info->xmit);
 	}
 
+	printk("type is %d\n", port->type);
+	printk("ops is %p\n", port->ops);
+	printk("ops->startup is %p\n", port->ops->startup);
+
 	retval = port->ops->startup(port);
 	if (retval == 0) {
 		if (init_hw) {
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/