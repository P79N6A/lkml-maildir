Date: Wed, 12 Jan 2000 17:19:50 -0500 (EST)
From: Chris Wing <>
Subject: [PATCH] fix libc5 problem with siginfo.h
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/1/13/77

Linus:
libc5 ends up including asm/signal.h, which presently uses old_uid_t. The
following patch changes it to use __kernel_uid_t and __kernel_uid32_t
instead.
I've tried to make sure that old_uid_t doesn't get defined in the
namespace when using libc5; if you think that's a stupid idea, please let
me know.
Thanks,
Chris Wing
wingc@engin.umich.edu
--- linux-2.3.40pre1/include/asm-i386/siginfo.h	Mon Jan 10 21:29:05 2000
+++ linux-i386/include/asm-i386/siginfo.h	Wed Jan 12 16:42:50 2000
@@ -23,9 +23,9 @@
 
 		/* kill() */
 		struct {
-			pid_t _pid;		/* sender's pid */
-			old_uid_t _uid;		/* backwards compatibility */
-			uid_t _uid32;		/* sender's uid */
+			__kernel_pid_t _pid;	/* sender's pid */
+			__kernel_uid_t _uid;	/* backwards compatibility */
+			__kernel_uid32_t _uid32; /* sender's uid */
 		} _kill;
 
 		/* POSIX.1b timers */
@@ -36,20 +36,20 @@
 
 		/* POSIX.1b signals */
 		struct {
-			pid_t _pid;		/* sender's pid */
-			old_uid_t _uid;		/* backwards compatibility */
+			__kernel_pid_t _pid;	/* sender's pid */
+			__kernel_uid_t _uid;	/* backwards compatibility */
 			sigval_t _sigval;
-			uid_t _uid32;		/* sender's uid */
+			__kernel_uid32_t _uid32; /* sender's uid */
 		} _rt;
 
 		/* SIGCHLD */
 		struct {
-			pid_t _pid;		/* which child */
-			old_uid_t _uid;		/* backwards compatibility */
+			__kernel_pid_t _pid;	/* which child */
+			__kernel_uid_t _uid;	/* backwards compatibility */
 			int _status;		/* exit code */
 			clock_t _utime;
 			clock_t _stime;
-			uid_t _uid32;		/* sender's uid */
+			__kernel_uid32_t _uid32; /* sender's uid */
 		} _sigchld;
 
 		/* SIGILL, SIGFPE, SIGSEGV, SIGBUS */
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/