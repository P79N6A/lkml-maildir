Date: Wed, 22 Mar 2000 00:07:58 -0800 (PST)
From: Blu3Viper <>
Subject: [BUG] loopback FS and wait_on_buffer/schedule deadlocks
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/3/22/80

Ok, I found another major clue.  I was mounting /tmp as a loopback
filesystem.
  /tmpfile /tmp ext2 loop,nosuid,noexec,nodev,rw,noauto,async 0 0
Well, lo and behold, it worked in 2.3.32 but from some point between there
and 2.3.36 it's has been broken.  2.3.36 was the earliest kernel I stepped
back to.
If the tmpfile is not mounted, my server crams through pages like lightning
with multiple wgets running simultaneously with tons of other things.
So.  Where do we go from here...sigh.  I've spent 6 straight days narrowing
it down, tracing the kernel, etc.  Honestly I'd like to shove the loopback
FS somewhere impolite but I'm willing to test patches that are provided.
I couldn't use the ikd patches very well because after oopsing the semaphore
lock (yes that worked great) the kernel exploded and oopsed in the swapper
and thusly killed the console so I couldn't scroll back and grab the useful
oops data.
-d
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/