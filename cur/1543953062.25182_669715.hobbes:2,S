Date: Fri, 21 Mar 2008 04:15:54 +0300
From: Oleg Nesterov <>
Subject: Re: [PATCH 5/5] ptrace: it is fun to strace /sbin/init
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/3/20/313

On 03/21, Pavel Machek wrote:
>
> On Thu 2008-03-20 19:57:56, Oleg Nesterov wrote:
> > On 03/20, Pavel Machek wrote:
> > > 
> > > > Ptracing of /sbin/init is not allowed. Of course, this is very dangerous, but
> > > > may be useful. Introduce the kernel boot parameter to allow this.
> > > ...
> > > > @@ -803,6 +803,8 @@ and is between 256 and 4096 characters. 
> > > >  			Run specified binary instead of /sbin/init as init
> > > >  			process.
> > > > 
> > > > +	init_ptrace	[KNL] Allows to ptrace init. Very dangerous. Don't use.
> > > > +
> > > 
> > > I don't know what ptracing init is good for, and I believe people
> > > wanting to do this kind of special stuff can patch their own kernel...
> > 
> > Yes sure. But could you explain why this can be bad given that ptracing
> > init needs the explicit boot parameter? IOW, could you explain why you
> > don't like this small and trivial change which adds a minimal impact?
> 
> "It can't be bad, its optional".
> 
> It is bad exactly _because_ it is optional. Anything that adds boot
> parameter is *not* trivial... 
You are right. I'd prefer to make /sbin/init ptraceable unconditionally,
the root should know what it does. But this will change the historical
behaviour.
> Why not add
> 
> please_randomly_corrupt_memory boot parameter? It may be useful for
> something...
> 								Pavel
Nice argument.
Oleg.