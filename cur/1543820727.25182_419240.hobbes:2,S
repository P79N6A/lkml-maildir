Date: Wed, 26 Apr 2006 18:12:55 -0700
From: Jay Lan <>
Subject: Re: [Patch 5/8] taskstats interface
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/4/26/290

Hi Shailabh,
Thanks for your effort in taskstats interface! Really appreciated!
I think this interface can offer a good foundation for other packages
to build on.
Here are a few more comments:
1) You mentioned the "version number within the (taskstats)
    structure" in taskstats.txt and a few other places, but i do not see
    that field defined in struct taskstats in taskstats.h?
2) In taskstats.txt "Extending taskstats" section, you mentioned two
    ways to extend the interface. The second method looks like a method
    to encoureage other package developers to create their own interface
   (ie, not taskstats) based on generic netlink to avoid reading large
number
    of fields not interested to other particular applications? I will be
fine
    with this as long as it is understood and agreed.
    Alternatively, you may have considered the pros and cons of #ifdef
    fields specific to only one accounting package in the struct taskstats.
    If you do, care to share your thoughts? Specific payload information
    can be carried in the version field. I am sure the version number of
struct
    taskstats does not need 64 bits. With the version number and payload
    info, application can surely interpret the taskstats data correctly.  
3) In taskstats.txt "Usage" section, you mentioned "... in the Advanced
    Usage section below...", but that section does not exist.
4) In do_exit() routine, you do:
+ taskstats_exit_alloc(&tidstats, &tgidstats);
    The tidstats and tgidstats are checked in taskstats_exit_send() in
    taskstats.c for allocation failure, but a lot has been processed before
    the check. The allocation failure happens when system is stressed in
    memory. I  think we want to do the check earlier?
Regards,
 - jay
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/