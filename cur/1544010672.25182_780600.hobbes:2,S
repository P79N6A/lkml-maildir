Date: Mon, 15 Dec 2008 12:31:50 +0100
From: Sam Ravnborg <>
Subject: Re: make headers_install: .install and ..install.cmd
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/12/15/73

On Sun, Dec 14, 2008 at 05:31:08PM +0100, Geert Uytterhoeven wrote:
> 	Hi Sam,
> 
> When I use `make ARCH=m68k INSTALL_HDR_PATH=/tmp/headers headers_install',
> I get lots of `.install' and `..install.cmd' files in /tmp/headers and its
> subdirectories.
> 
> I'm building the kernel in a separate output directory and run my make command
> from there.
> 
> Is this intentional?
Hi Geert.
We use the files .install and ..install.cmd to check if we need to install
the headers again or need to check them again.
And there is no other place to put them than next to the relevant files.
Otherwse we would not do the right thing when exporting to
two different directories from the same repository.
The real fix would be to speed up the install step.
Today we rely on the unifdef tool and a perl scrip for the installation.
Combining the functionality in one C file would most likely
speed up the install process to such a degree that we can do it
unconditionally and then we can get rid of the .install 
and ..install.cmd files.
But noone has written a C program to do that (yet).
	Sam