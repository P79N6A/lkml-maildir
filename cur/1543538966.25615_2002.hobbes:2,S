Date: Fri, 14 Jul 2000 23:19:57 +0400 (MSD)
From: "Khimenko Victor" <>
Subject: Re: Bug in kernel - how to make big kernel bootable with GRUB    (wasRe: Linux 2.4.0-Test{1,2} with Grub (I think I found the answer))
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/7/14/134

In <396F5D3C.9BAD6095@transmeta.com> H. Peter Anvin (hpa@transmeta.com) wrote:
HA> Khimenko Victor wrote:
>>>
>> > We have noticed.  You may note that kernels > 1 MB warn that they can
>> > no longer be booted by the kernel boot sector.
>>
>> And why it was done this way, BTW ? Fix is not that hard. Perhaps they should
>> say that you can not boot them with loadlin and GRUB as well ?
>>
HA> LOADLIN doesn't use it.
Yeah. Of course. This part of loadlin's source is only my imagination:
-- src/loadlin.asm --
;             --------------------------------
;                        within this as loaded from "zImage"
              org     01F4h
kernel_size   dw      ?  ; size of kernel-part in the image-file
                         ; (in 16 byte units, rounded up)
[skipped]
                            ; now loading the kernel
        mov      bx,fhandle
        movzx    ecx,kernel_size
        shl      ecx,4
        mov      di,kernel_load_frame
        movzx    edi,di
        shl      edi,4
        mov      print_dots,2
        call     read_handle   ; read the kernel
        call     print_crlf
        mov      print_dots,0
        call     print_crlf
        jc       err_io
        add      eax,15
        and      al,0f0h
        cmp      eax,ecx
        jnz      fileopened_wrong
                           ; ok, all is read into memory
        DosCall  DOS_CLOSE_FILE
[skipped]
-- cut --
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/