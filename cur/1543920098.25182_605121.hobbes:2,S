Date: Mon, 15 Oct 2007 09:45:01 +0200
From: Jens Axboe <>
Subject: Re: 2.6.23-mm1
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/10/15/54

On Mon, Oct 15 2007, Neil Brown wrote:
> On Monday October 15, jens.axboe@oracle.com wrote:
> > On Mon, Oct 15 2007, Milan Broz wrote:
> > > 
> > > clone->bi_size is zero here now, so crypt_free_buffer_pages will not
> > > work correctly (previously there was count of processed bytes).
> > > 
> > > But because it seems that bio cannot be processed partially now, we can
> > > simplify crypt_free_buffer_pages to always remove all allocated pages.
> > 
> > Neil, this doesn't look very good. dm-crypt needs to know the clone io
> > size, so ->bi_size was definitely used properly in this context before.
> > Now it's gone. Suggestions on how to fix that up?
> 
> How about the following - even more code simplification gained by this
> approach :-)
Looks good to me.
> I originally had the patch for removing the 'size' argument after a
> patch (series) that made bi_size unchanged.   It seemed that patch
> would face a harder path upstream so I re-ordered them and missed this
> dependency.  Mea Culpa.
> 
> > 
> > I've been less than impressed with the bi_end_io() patchset so far, it's
> > been full of typos and bad conversions. I'm tempted to revert the whole
> > thing, clearly it wasn't ready for merge.
> 
> I must have missed something ....
> 
> I've seen:  A fix for a bi_end_io in jfs that I missed.
>             A correction for that fix ("return 0" was remove instead
>                of just the '0' removed)
>             Some fixed for code that is only in -mm (which I didn't do
>               because I thought you wanted it against a non-mm tree).
XFS update, s390 block driver, gfs2 update, ocfs2 update, powerpc
axonram block driver.
> I think it was definitely ready for merging in -mm.  Possibly not for
> mainline just yet.
What's done is done, I just hope we've seen the last of it now.
-- 
Jens Axboe
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/