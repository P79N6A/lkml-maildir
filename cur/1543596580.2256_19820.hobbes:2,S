Date: Fri, 6 Jul 2001 17:04:54 +0200
From: Francois Romieu <>
Subject: Re: [PATCH] Re: Problem with SMC Etherpower II + kernel newer 2.4.2
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/7/6/79

Jeff Garzik <jgarzik@mandrakesoft.com> ecrit :
[...]
> --- /spare/tmp/linux-2.4.7-pre3/drivers/net/epic100.c	Mon Jul  2 21:03:04 2001
> +++ linux/drivers/net/epic100.c	Fri Jul  6 12:56:40 2001
[...]
>  /* The user-configurable values.
> @@ -448,7 +451,7 @@
>  	outl(0x0008, ioaddr + TEST1);
> 
>  	/* Turn on the MII transceiver. */
> -	outl(dev->if_port == 1 ? 0x13 : 0x12, ioaddr + MIICfg);
> +	outl(0x12, ioaddr + MIICfg);
>  	if (chip_idx == 1)
>  		outl((inl(ioaddr + NVCTL) & ~0x003C) | 0x4800, ioaddr + NVCTL);
>  	outl(0x0200, ioaddr + GENCTL);
The link that Juergen sent does that in epic_init_one but it removes it 
from epic_open (the patch I forwarded). 
Btw it plays rude games with udelay() (consequence of posted writes + optimized 
loops ?).
-- 
Ueimor
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/