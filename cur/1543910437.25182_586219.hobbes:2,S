Date: Mon, 20 Aug 2007 09:54:22 +0200
From: Michael Gerdau <>
Subject: Re: 2.6.22.2-cfs-v19.1 stops honouring nice 3 after some hours
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/8/20/28

> > I played a bit with renicing my (mostly) CPU bound jobs and found
> > somewhat strange behaviour.
> > 
> > I'm on 2.6.22.2-cfs-v19.1 -- I can't boot into 2.6.23-rc3 as part of
> > my daily work because my NVIDIA driver doesn't yet work with it though
> > I could try to do some X-less testing if need be.
> 
> Please do try, a lot has changed since v19.1.
Meanwhile I've done some testing on 2.6.23-rc3.
The good news is that the strange behaviour w/r to nice I had seen on
2.6.22.3-cfs-v19.1 is no longer there.
Long running CPU bound jobs at different nice levels do indeed progress
(roughly) according to the %CPU figures as reported by top now.
However what I find somewhat unexpected is the IMO huge variation
in %CPU as observed even with 'top -d 60'. I've attached a log showing
5 CPU bound tasks observed for an our with 'top -b -d 60 -n 60'.
Jobs 5897, 5928 and 5977 do perform essentially the same tasks.
Jobs 17085 and 21492 do perform essentially the same task but differ
from the other 3 task.
I would have expected Jobs 5897 and 5928 to differ by at most one
percent point when measured for 60 seconds.
Best,
Michael
-- 
 Technosis GmbH, Geschäftsführer: Heiko Gerdau, Tobias Dittmar
 Sitz Hamburg; HRB 89145 Amtsgericht Hamburg
 Vote against SPAM - see 
http://www.politik-digital.de/spam/
 Michael Gerdau       email: mgd@technosis.de
 GPG-keys available on request or at public keyserver
[unhandled content-type:application/x-bzip2][unhandled content-type:application/pgp-signature]