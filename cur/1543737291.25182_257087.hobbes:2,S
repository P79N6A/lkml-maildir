Date: Sat, 2 Oct 2004 11:56:09 +0200
From: Adrian Bunk <>
Subject: [patch] 2.6.9-rc3-mm1: X86_LOCAL_APIC compile error
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/10/2/30

On Sat, Oct 02, 2004 at 01:43:52AM -0700, Andrew Morton wrote:
>...
> Changes since 2.6.9-rc2-mm4:
>...
> +generic-irq-subsystem-x86-port.patch
>...
>  IRQ handling code consolidation
>...
This causes the following compile error with X86_LOCAL_APIC=y:
<--  snip  -->
...
  CC      init/main.o
In file included from include/linux/hardirq.h:6,
                 from include/linux/interrupt.h:11,
                 from include/asm/highmem.h:24,
                 from include/linux/highmem.h:14,
                 from include/linux/skbuff.h:27,
                 from include/linux/security.h:33,
                 from init/main.c:36:
include/asm/hardirq.h: In function `ack_bad_irq':
include/asm/hardirq.h:34: warning: implicit declaration of function 
`ack_APIC_irq'
In file included from include/asm/smp.h:22,
                 from init/main.c:65:
include/asm/apic.h: At top level:
include/asm/apic.h:72: error: conflicting types for 'ack_APIC_irq'
include/asm/hardirq.h:34: error: previous implicit declaration of 
'ack_APIC_irq' was here
make[1]: *** [init/main.o] Error 1
<--  snip  -->
The following patch fixes this issue:
Signed-off-by: Adrian Bunk <bunk@fs.tum.de>
--- linux-2.6.9-rc3-mm1-full/include/asm-i386/hardirq.h.old	2004-10-02 11:46:13.000000000 +0200
+++ linux-2.6.9-rc3-mm1-full/include/asm-i386/hardirq.h	2004-10-02 11:46:38.000000000 +0200
@@ -4,6 +4,7 @@
 #include <linux/config.h>
 #include <linux/threads.h>
 #include <linux/irq.h>
+#include <asm/apic.h>
 
 typedef struct {
 	unsigned int __softirq_pending;
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/