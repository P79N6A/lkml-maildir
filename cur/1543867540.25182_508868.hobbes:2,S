Date: Wed, 14 Feb 2007 19:41:37 -0700
From: (Eric W. Biederman)
Subject: Re: [patch 16/21] Xen-paravirt: Add code into head.S to handle being booted by Xen
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/2/14/329

Jeremy Fitzhardinge <jeremy@goop.org> writes:
> Eric W. Biederman wrote:
>> I'm pretty certain we explicitly drop the weird GNU note that
>> is automatically generated by gcc and specifies something informational.
>> 
> But that's something else again, since it appears as a PT_GNU_STACK phdr.
Not that.  It's more like abi version or gcc version or something
like.  At least there used to be one of those notes in every .o file
and compiled program.
>> I don't think anything we are doing is wrong but ld gets confused easily
>> in the corner cases.  I'm modestly surprised we didn't have to mark our
>> .note.xxx scions as ".section .note.xxx @note"  or whatever the proper
>> gas syntax is.
>
> I did try that, and it didn't make a difference.  The manual says that
> the output section type follows the input section type, so I agree its a
> bit surprising we ever get a SHT_NOTE out of it without the @note stuff.
Right.  So the surprise is that SHT_NOTE got set.  There are some
defaults based on the section name somewhere that appear to have done
the right thing.
My best hunch really is that ld treated the .note sections normally
and just mist the handling of the magic SHT_NOTE type.  Which is why
I'm not to worried.
Eric
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/