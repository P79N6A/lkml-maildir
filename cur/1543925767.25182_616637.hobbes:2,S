Date: Tue, 13 Nov 2007 20:43:46 +1100
From: Benjamin Herrenschmidt <>
Subject: Re: [PATCH, RFC] improved hacks to allow -rt to run kernbench on POWER
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/11/13/56

On Tue, 2007-11-13 at 10:10 +0100, Peter Zijlstra wrote:
> 
> Correct, -rt can't allocate -anything- when preemption if off. That is
> the cost for having the allocators itself preemptable.
> 
> Even radix_tree_preload() will not work as its functionality was based
> on preempt disable to limit access to a global (per cpu) object
> reserve.
> But maybe something similar could be done with a local reserve by
> using
> struct radix_tree_context to pass it along.
> 
> I'll see if I can come up with anything like that, that is, if that
> would suffice?
For that specific problem, as long as the radix tree can be made to work
while non-preemptible, I'm fine :-)
I'm still worried by other cases where things expect GFP_ATOMIC to work
at any time.
Ben.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/