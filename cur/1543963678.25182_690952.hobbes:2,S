Date: Fri, 09 May 2008 20:59:56 +0100
From: Paulo Marques <>
Subject: Re: /proc/kallsyms broken in 2.6.26-rc1-git6
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/5/9/352

Andi Kleen wrote:
>>> ffffffff80337043 u idr_pre_get  [i2c_core]
>>> ffffc2000007573e ? DW.sched.h.920090ff.56       [i2c_core]
>> Are you compiling with CONFIG_KALLSYMS_ALL?
> 
> Yep.
> 
> CONFIG_KALLSYMS=y
> CONFIG_KALLSYMS_ALL=y
> # CONFIG_KALLSYMS_EXTRA_PASS is not set
> 
>> If you are, kallsyms will store all the output of "nm -n vmlinux" no
>> matter what section the symbol belongs to...
> 
> Yes and? Surely that's not correct?
That's not for me to judge, but I believe it has always been like that.
I just wanted to understand if you noticed a change in behavior (which 
is probably a bug) or if it has always been like that but you just 
noticed how ugly it is.
Maybe you also have some debug or markers configuration or something 
that is generating extra symbols to a special section that is just 
making the problem look worse now.
Anyway, I can change the way kallsyms works, but that has to be done 
with some care because there are some userspace tools that read 
/proc/kallsyms and we don't want to break those. A proper testing period 
through -mm should take care of that, though.
-- 
Paulo Marques - www.grupopie.com
"All generalizations are false."