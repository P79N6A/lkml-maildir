Date: Fri, 31 Aug 2007 23:02:45 -0400
From: Mike Frysinger <>
Subject: Re: [PATCH] Patch pvr2 driver to allow development of maple bus driver
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/8/31/361

On Friday 31 August 2007, Adrian McMenamin wrote:
> On 31/08/2007, Mike Frysinger <vapier.adi@gmail.com> wrote:
> > On 8/31/07, Adrian McMenamin <lkmladrian@gmail.com> wrote:
> > > This patch makes the PVR2 VBLANK interrupt on the SEGA Dreamcast
> > > shareable - a small but necessary change to enable ongoing efforts to
> > > develop a driver for the maple bus on the Dreamcast. (Maple is Sega's
> > > proprietary serial interface for the Dreamcast and can be set to
> > > synchronise dma transfers to the VBLANK).
> > >
> > > This has no impact on the performance of the PVR2.
> >
> > sharable implies the interrupt handler checks to see if it actually
> > caused the interrupt ... which it doesnt at the moment ... presumably,
> > you're making it shared because another device will be using that
> > interrupt as well ... so when that other device gets an interrupt, how
> > do you know it's for that device and not PVR2 ?
>
> If the interrupt occurs then it will be for both of them. The hardware
> cannot be removed and the maple bus driver is set for hardware sync.
>
> The question seems redundant to me.
i really dont know how the maple bus works or what piece of hardware is wired 
up to the same interrupt line.  my point is that if the other device fires an 
interrupt, the pvr interrupt handler may be executed and attempt to do work 
when in reality the pvr was not the source of the interrupt.
-mike
[unhandled content-type:application/pgp-signature]