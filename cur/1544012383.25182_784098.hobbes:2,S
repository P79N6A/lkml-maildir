Date: Fri, 26 Dec 2008 01:45:20 -0600
From: Robert Hancock <>
Subject: Re: Kernel panic with upgrade to 2.6.28
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/12/26/24

David Ronis wrote:
> Thanks for the reply.  Here are the files you wanted to see:
> 
> dmsg from working kernel:
> 
(snip)
> Uniform Multi-Platform E-IDE driver
> ide_generic: please use "probe_mask=0x3f" module parameter for probing
> all legacy ISA IDE ports
> Probing IDE interface ide0...
> hda: ST340014A, ATA DISK drive
> Switched to high resolution mode on CPU 1
> Switched to high resolution mode on CPU 0
> hdb: ST340014A, ATA DISK drive
> Probing IDE interface ide1...
> hdc: SONY CD-RW/DVD-ROM CRX330E, ATAPI CD/DVD-ROM drive
> ide0 at 0x1f0-0x1f7,0x3f6 on irq 14
> ide1 at 0x170-0x177,0x376 on irq 15
> hda: max request size: 512KiB
> hda: 78165360 sectors (40020 MB) w/2048KiB Cache, CHS=16383/255/63
> hda: cache flushes supported
>  hda: hda1 hda2
> hdb: max request size: 512KiB
> hdb: 78125000 sectors (40000 MB) w/2048KiB Cache, CHS=16383/255/63
> hdb: cache flushes supported
>  hdb: hdb1 hdb2 hdb3
> hdc: ATAPI 48X DVD-ROM CD-R/RW drive, 2048kB Cache
Your kernel configuration for IDE seems to be wrong. You're using 
ide_generic which no remotely modern system should be using. You should 
enable one of the chipset-specific drivers under "PCI IDE chipsets 
support". I suspect there was a change so that ide_generic no longer 
attaches to your IDE controller whereas it did before.
(Really if you're up for making changes one should just disable the old 
IDE stuff and switch to libata but that's another matter.)