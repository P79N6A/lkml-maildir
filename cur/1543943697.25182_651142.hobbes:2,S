Date: Sun, 10 Feb 2008 08:41:02 +0100
From: Ingo Molnar <>
Subject: Re: [5/6] x86: kgdb support
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/2/10/54

* Sam Ravnborg <sam@ravnborg.org> wrote:
> >  config X86_64
> >  	def_bool 64BIT
> > +	select KGDB_ARCH_HAS_SHADOW_INFO
> > 
> >  ### Arch settings
> >  config X86
> > @@ -139,6 +140,9 @@ config AUDIT_ARCH
> >  config ARCH_SUPPORTS_AOUT
> >  	def_bool y
> > 
> > +config ARCH_SUPPORTS_KGDB
> > +	def_bool y
> > +
> 
> Please use the documented HAVE_ approach and not this ugly "one 
> variable per arch" idiom. This was also commented last time the 
> patchset were posted.
hm, i wasnt Cc:-ed to that so i didnt read it yet. I have just followed 
the logical ARHC_SUPPORTS_* idiom which reads more naturally than 
HAVE_ARCH_*. But ... no string feelings, changing it is easy enough, i 
renamed them and pushed out the new iteration to:
   git://git.kernel.org/pub/scm/linux/kernel/git/mingo/linux-2.6-kgdb.git
diffstat and shortlog did not change (just a rename of these config 
variables) - but i'm including them below for completeness of the 
submission.
any other observations?
	Ingo
------------------>
Ingo Molnar (3):
      pids: add pid_max prototype
      uaccess: add probe_kernel_write()
      x86: kgdb support
Jan Kiszka (1):
      consoles: polling support, kgdboc
Jason Wessel (2):
      kgdb: core
      kgdb: document parameters
 Documentation/kernel-parameters.txt |    5 +
 arch/x86/Kconfig                    |    4 +
 arch/x86/kernel/Makefile            |    1 +
 arch/x86/kernel/kgdb.c              |  550 ++++++++++
 drivers/char/tty_io.c               |   47 +
 drivers/serial/8250.c               |   62 ++
 drivers/serial/Kconfig              |    3 +
 drivers/serial/Makefile             |    1 +
 drivers/serial/kgdboc.c             |  164 +++
 drivers/serial/serial_core.c        |   67 ++-
 include/asm-generic/kgdb.h          |   93 ++
 include/asm-x86/kgdb.h              |   87 ++
 include/linux/kgdb.h                |  264 +++++
 include/linux/pid.h                 |    2 +
 include/linux/serial_core.h         |    4 +
 include/linux/tty_driver.h          |   12 +
 include/linux/uaccess.h             |   22 +
 kernel/Makefile                     |    1 +
 kernel/kgdb.c                       | 2020 +++++++++++++++++++++++++++++++++++
 kernel/sysctl.c                     |    2 +-
 lib/Kconfig.debug                   |    2 +
 lib/Kconfig.kgdb                    |   37 +
 22 files changed, 3448 insertions(+), 2 deletions(-)
 create mode 100644 arch/x86/kernel/kgdb.c
 create mode 100644 drivers/serial/kgdboc.c
 create mode 100644 include/asm-generic/kgdb.h
 create mode 100644 include/asm-x86/kgdb.h
 create mode 100644 include/linux/kgdb.h
 create mode 100644 kernel/kgdb.c
 create mode 100644 lib/Kconfig.kgdb