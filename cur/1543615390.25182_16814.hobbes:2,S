Date: Wed, 02 Jan 2002 21:15:22 -0800
From: Andrew Morton <>
Subject: Re: kswapd etc hogging machine
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/1/3/17

"M. Edward Borasky" wrote:
> 
> ...
> There were a whole bunch of tuning parameters in the VM in 2.2 that got
> dropped in 2.4; maybe re-instating some of them and returning them to their
> rightful owner, the system administrator, would solve this problem once and
> for all.
> ...
> 
> Anyone else want to share my soapbox??? :))
Nope.  Not yet.
The VM system in Art's machine is not working correctly.  It is swapping
and evicting useful data when it should be dropping written-back write()
pages.  That's a bug, and there's no point in adding knobs to twiddle
the behaviour when the system clearly isn't working *as designed* yet.
If we reach the stage where everything is exactly operating as we designed
it to, and it _still_ fails under some usage patterns then yes, that's the
time to throw up our hands and add knobs.
But Art's kernel (what kernel is in RH7.2 anyway?  2.4.9 with vendor
hacks^Wfixes, I think) is nowhere near that stage.
And we, the kernel developers, should hang our heads over this.  A
vendor-released, stable kernel is performing terribly with such a
simple workload.  One year after the release of 2.4.0!
The good news is that 2.4.17 has pretty much slain this dragon.  The
-aa patches are better still, and 2.4.18 will be even better than
that.
So where does this leave Art Hays?  Yup, he's going to have to apply
the latest Service Pack.  The rawhide kernel appears to be at 2.4.16,
which isn't recent enough.  He'll need to build his own.  I'd recommend
2.4.17-rc2 with 
http://www.kernel.org/pub/linux/kernel/people/andrea/kernels/v2.4/2.4.17rc2aa2.bz2
applied on top.
-
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/