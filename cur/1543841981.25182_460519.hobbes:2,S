Date: Tue, 5 Sep 2006 10:53:19 +0200
From: Pavel Machek <>
Subject: Re: [RFC][PATCH 2/2] ACPI: handle timer ticks proactively
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/9/5/55

Hi!
> > This patch takes advantage of the infrastructure introduced in the last
> > patch, and allows the processor idle algorithm to proactively choose a
> > c-state based on the time the next timer interrupt is expected to occur.
> > It preserves the residency metric, so the algorithm should, in theory,
> > remain effective against bursts of activity from other interrupt
> > sources.
> > 
> > This patch is mostly intended to be illustrative.  There may be some
> > "#ifdef CONFIG_ACPI" issues, and I would appreciate any advice on
> > implementing this more cleanly.
Okay, just to get you some feedback:
It seems to change things a _lot_. Power consumption with usb modules
loaded went from 14315mW to 13800mW -- that is huge
deal. Unfortunately something strange is going on: with stock kernel,
power consumption is mostly constant. With your patch, it varies a
lot, at 2 second timescale.
Power consumption with usb unloaded (only way to get reasonable power
on x60) went from stable 10450mW to  something rapidly changing, and
probably even worse than original:
current       average
-11200 mW avg -11274 mW
-10505 mW avg -11251 mW
-11701 mW avg -11238 mW
-11975 mW avg -11348 mW
-10432 mW avg -11313 mW
-11944 mW avg -11422 mW
-10683 mW avg -11504 mW
-10682 mW avg -11457 mW
-10402 mW avg -11432 mW
-11913 mW avg -11317 mW
-12004 mW avg -11541 mW
-12004 mW avg -11661 mW
-11945 mW avg -11781 mW
-11943 mW avg -11824 mW
-12577 mW avg -11891 mW
-12004 mW avg -11930 mW
-12019 mW avg -11944 mW
-11972 mW avg -12002 mW
-12004 mW avg -11990 mW
-11913 mW avg -12032 mW
-11083 mW avg -11903 mW
									Pavel
-- 
(english) 
http://www.livejournal.com/~pavelmachek
(cesky, pictures) 
http://atrey.karlin.mff.cuni.cz/~pavel/picture/horses/blog.html
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/