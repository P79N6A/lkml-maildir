Date: Mon, 04 Dec 2006 18:22:56 -0500
From: Jeff Garzik <>
Subject: Re: [PATCH] make sata_promise PATA ports work
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/12/4/357

Alan wrote:
> On Mon, 4 Dec 2006 12:47:37 -0700
> Erik Andersen <andersen@codepoet.org> wrote:
> 
>> This patch vs 2.6.19, based on the not-actually-working-for-me
>> code lurking in libata-dev.git#promise-sata-pata, makes the PATA
>> ports on my promise sata card actually work.  Since the plan as
> 
> Nice, this is pretty much what is needed to polish up the other split
> PATA/SATA cases.
Disagree.  Internal libata is set up so that you can have different 
ata_port::flags and ata_port::ops for each port, which is what enables 
proper hardware sharing between SATA and PATA.
Two things need to happen:
1) probe_ent needs to permit a driver to supply multiple flags/ops 
pairs, not just one for the whole driver, and pass that through to the 
proper data structures during ata_port init.
2) a VERY FEW details like ->irq_clear() are really ata_host level 
hooks, but they live in ata_port_operations because there is no 
ata_host_operations.  Fix these.
Once those issues are fixed, PATA+SATA can be easily support on the 
combinations of hardware that have been desperately wanting it: 
sata_promise, sata_sis, sata_via (sata_uli too?)
	Jeff
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/