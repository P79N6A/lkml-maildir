Date: Tue, 28 Sep 2004 14:23:32 +0200
From: Andreas Happe <>
Subject: Re: [PATCH 2.6.9-rc2 2/2] cryptoapi: make /proc/crypto optional
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/9/28/61

creates a new Kconfig entry for the /proc/crypto - file and mark it as
OBSOLETE. This patch is just compile tested and applies after
patch-2.6.9-rc1-cryptoapi-class-2.
Signed-of-by: Andreas Happe <andreashappe@snikt.net>
diff -u -r -N linux-2.6.8/crypto/Kconfig linux-sysfs/crypto/Kconfig
--- linux-2.6.8/crypto/Kconfig	2004-09-28 12:50:31.000000000 +0200
+++ linux-sysfs/crypto/Kconfig	2004-09-28 12:18:25.000000000 +0200
@@ -16,6 +16,15 @@
 	  HMAC: Keyed-Hashing for Message Authentication (RFC2104).
 	  This is required for IPSec.
 
+config CRYPTO_PROC
+	bool "Legacy /proc/crypto interface (OBSOLETE)"
+	depends on PROC_FS && CRYPTO
+	help
+	  Displays cipher specific information via /proc/crypto.
+	  Please use /sysfs/class/crypto instead.
+
+	  When in double say Y.
+
 config CRYPTO_NULL
 	tristate "Null algorithms"
 	depends on CRYPTO
diff -u -r -N linux-2.6.8/crypto/Makefile linux-sysfs/crypto/Makefile
--- linux-2.6.8/crypto/Makefile	2004-09-28 12:52:40.000000000 +0200
+++ linux-sysfs/crypto/Makefile	2004-09-28 12:14:14.000000000 +0200
@@ -2,7 +2,7 @@
 # Cryptographic API
 #
 
-proc-crypto-$(CONFIG_PROC_FS) = proc.o
+proc-crypto-$(CONFIG_CRYPTO_PROC) = proc.o
 sysfs-crypto-$(CONFIG_SYSFS) = sysfs.o
 
 obj-$(CONFIG_CRYPTO) += api.o scatterwalk.o cipher.o digest.o compress.o \