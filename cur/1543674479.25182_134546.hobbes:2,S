Date: Thu, 22 May 2003 11:24:04 +1000
From: Paul Mackerras <>
Subject: [PATCH] SET_MODULE_OWNER change in apm_emu.c
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/5/21/173

Linus,
The patch below fixes drivers/macintosh/apm_emu.c by replacing the
SET_MODULE_OWNER with a statement that explicitly sets the owner field
of the proc_dir_entry that it creates.
Please apply.
Thanks,
Paul.
diff -urN linux-2.5/drivers/macintosh/apm_emu.c pmac-2.5/drivers/macintosh/apm_emu.c
--- linux-2.5/drivers/macintosh/apm_emu.c	2003-04-03 08:55:29.000000000 +1000
+++ pmac-2.5/drivers/macintosh/apm_emu.c	2003-05-21 13:40:54.000000000 +1000
@@ -524,7 +524,7 @@
 		
 	apm_proc = create_proc_info_entry("apm", 0, NULL, apm_emu_get_info);
 	if (apm_proc)
-		SET_MODULE_OWNER(apm_proc);
+		apm_proc->owner = THIS_MODULE;
 
 	misc_register(&apm_device);
 
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/