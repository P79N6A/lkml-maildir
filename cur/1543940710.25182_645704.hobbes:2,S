Date: Wed, 30 Jan 2008 15:56:56 +0100 (CET)
From: Jan Engelhardt <>
Subject: Re: [PATCH] lib: Add support for DIF CRC
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/30/268

On Jan 30 2008 02:00, Martin K. Petersen wrote:
>diff -r f5ec697e8b10 include/linux/crc-t10dif.h
>--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
>+++ b/include/linux/crc-t10dif.h	Tue Jan 29 13:26:19 2008 -0500
>@@ -0,0 +1,9 @@
>+#ifndef _LINUX_CRC_T10DIF_H
>+#define _LINUX_CRC_T10DIF_H
>+
>+#include <linux/types.h>
>+
>+const __u16 t10_dif_crc_table[256];
>+__u16 crc_t10dif(unsigned char const *, size_t);
>+
>+const __u16 t10_dif_crc_table[256] = {
...
>+};
>+
>+__u16 crc_t10dif(const unsigned char *buffer, size_t len)
>+{
...
>+}
>+
>+EXPORT_SYMBOL(crc_t10dif);
One minor nitpick still: if t10_dif_crc_table is not EXPORT_SYMBOLed,
it should be static, since I do not see a reason to only make it
available to built-in code.
So either make the table static too, or EXPORT it. I am not sure if
any code needs to access the table directly, though, so I'd be going
for the static.