Date: Tue, 5 Oct 1999 00:54:54 -0400 (EDT)
From: "Albert D. Cahalan" <>
Subject: Re: A question on System.map (for the FAQ please)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/10/5/35

Clyne, Paul writes:
>         I recently recompiled my Kernel (RH 6.0, 2.2.11) and had some
> questions I would like to ask.
Since people often hit this problem when they first compile a kernel,
the solution ought to go in the FAQ.
>         When I rebooted I got message(s) similar to the following :
>         Starting lpd : Warning: /boot/System.map has an incorrect Kernel
> version.
> 
>         Q1) exactly what does this mean ?
/boot/System.map has an incorrect kernel version. :-)
That file is a kind of database that must be kept consistant
with the kernel you are currently running.
This is of course difficult to do when you run multiple versions
of the same kernel. I'd be very happy to spend 80 kB of kernel
memory on a reliable answer, especially when considering just how
big an uncompressed kernel is already. Oh well.
>         Q2) I thought that when I did a make bzImage (or possibly during the
> make modules_install ?) that a copy of the new system/map would
> automatically be put in /boot.  I vi'ed the Makefile and noticed that the
> system.map section had a comment like "uncomment this bit if you want to put
> the Sysem.map anywhere other than root".  Shouldn't the default directory be
> boot ?.  Should I modify the Makefile to always point at /boot ?
Yep, the System.map file ought to go in /boot with everything else.
It would be even better to move the modules too.
>         Q3) I cp'ed the System.map file from /usr/src/linux to the boot
> directory and that fixed the problem (but has raised a few other questions)
> was this a wise think to do ?.  If not, what should I have done ?.
See the ps(1) man page. Your solution works, but only for one kernel
at a time. If you add the version number on the end as instructed,
you are still limited to one kernel of each release. Ugh.
>         Q4) System.map _was_ a link to System.map-2.2.5-22 (the previous
> kernel) but I also notice that there still is a System.map-2.2.55-22Boot and
> System.map-2.2.55-22smp.   I didn't update these files (do I need to ?,
> where do I find the 'correct' files ?).  
I will guess that this is some sort of Red Hat 6.0 feature.
The normal file would be /boot/System.map-2.2.5 and you could
delete /boot/System.map, but you may prefer to generate a
/boot/System.map symlink at every boot.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/