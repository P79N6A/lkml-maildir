Date: Wed, 16 Mar 2005 13:24:38 -0800
From: "Randy.Dunlap" <>
Subject: [PATCH] i386: add kstack=N option (from x86_64)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/3/16/230

Add "kstack=N" boot option for IA-32 (from x86_64).
Signed-off-by: Randy Dunlap <rddunlap@osdl.org>
diffstat:=
 Documentation/kernel-parameters.txt |    3 +++
 arch/i386/kernel/traps.c            |    7 +++++++
 2 files changed, 10 insertions(+)
diff -Naurp ./arch/i386/kernel/traps.c~kstack_i386 ./arch/i386/kernel/traps.c
--- ./arch/i386/kernel/traps.c~kstack_i386	2005-03-01 23:37:49.000000000 -0800
+++ ./arch/i386/kernel/traps.c	2005-03-15 21:22:28.000000000 -0800
@@ -1038,3 +1038,10 @@ void __init trap_init(void)
 
 	trap_init_hook();
 }
+
+static int __init kstack_setup(char *s)
+{
+	kstack_depth_to_print = simple_strtoul(s, NULL, 0);
+	return 0;
+}
+__setup("kstack=", kstack_setup);
diff -Naurp ./Documentation/kernel-parameters.txt~kstack_i386 ./Documentation/kernel-parameters.txt
--- ./Documentation/kernel-parameters.txt~kstack_i386	2005-03-01 23:38:34.000000000 -0800
+++ ./Documentation/kernel-parameters.txt	2005-03-15 21:23:44.000000000 -0800
@@ -614,6 +617,9 @@ running once the system is up.
 
 	keepinitrd	[HW,ARM]
 
+	kstack=N	[IA-32, X86-64] Print N words from the kernel stack
+			in oops dumps.
+
 	l2cr=		[PPC]
 
 	lapic		[IA-32,APIC] Enable the local APIC even if BIOS disabled it.
---
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/