Date: Wed, 14 Nov 2007 15:35:33 +0100
From: Andi Kleen <>
Subject: Re: [PATCH 0/5][RFC] Physical PCI slot objects
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/11/14/187

On Wed, Nov 14, 2007 at 07:17:51AM -0700, Matthew Wilcox wrote:
> On Wed, Nov 14, 2007 at 02:07:56AM +0100, Andi Kleen wrote:
> > It's not only complexity. Each new sysfs entry costs memory.
> > Memory is not free. There should be always a good reason for those.
> 
> It's not a lot of memory; it's one directory and a couple of files for
> each PCI slot in the system.  Even huge systems have maybe 200 slots.
> In order for this to take up as much as one page of ram on a typical PC
> with six slots, this would have to consume 680 bytes per directory.  I
> don't think sysfs is that inefficient (and if it is, maybe this feature
> is not where the problem is, given the 'power' directory per device, the
> 19 files per scsi device, the huge numbers of symlinks, etc).
It becomes much more when someone does a find /sys. dentries are 
expensive. They eventually can get pruned again, but it's still
costly to do that.
-Andi
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/