Date: Tue, 30 Sep 2003 02:04:05 -0400
From: Trond Myklebust <>
Subject: Re: effect of nfs blocksize on I/O ?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/9/30/18

>>>>> " " == Frank Cusack <fcusack@fcusack.com> writes:
     > Then it sounds like the current wtmult/512 value for f_bsize is
     > a bug.  Until such time as you get f_frsize going, just
     > directly plugging wsize into s_blocksize seems like a win.
     > Doesn't it?
No "until such time" solutions please... Let's do it right the first
time, or not at all!
s_blocksize should remain set to wtmult. It is only f_bsize and
f_frsize that are currently set to the wrong values.
     > ISTM that f_frsize is pretty useless for NFS.  Even if the
     > server gives you this value (as wtmult), what use besides
     > conversion of tbytes/abytes values does it have?
As I told you, the main use is for 'df' and friends. Get it wrong, and
the result will be rounding errors when reporting disk sizes etc. This
is currently the case in 2.4.x where we confuse f_bsize and f_frsize.
Cheers,
  Trond
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/