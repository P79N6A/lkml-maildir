Date: Wed, 31 Dec 2008 10:05:10 +0100
From: Sam Ravnborg <>
Subject: Re: [PATCH 06/13] kconfig: print all locations when we see a recursive dependency
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/12/31/38

On Wed, Dec 31, 2008 at 03:55:00AM +0100, Roman Zippel wrote:
> Hi,
> 
> On Mon, 29 Dec 2008, Sam Ravnborg wrote:
> 
> > It is nessesary to know all locations when trying to track
> > a recursive dependency. So print out all locations for each symbol.
> 
> The problem is that this is little more than a better grep, although 
> kconfig knows exactly what went wrong, but this info is scattered all over 
> the stack.
> We could either return more info to print more than just the symbol or 
> maintain more info while traversing the tree. The patch below does the 
> latter. The patch could use some small cleanups, so it's not final yet.
Hi Roman.
I will drop 
"[PATCH 05/13] kconfig: improve readout when we hit recursive dependencies"
"[PATCH 06/13] kconfig: print all locations when we see a recursive dependency"
and will await an updated version of the patch below.
Notice that with your patch below we still hit the segmentation fault
with the small test sample included in the description of 05/13:
    config TEST1
            bool
            depends on TEST2 && PCI
            select TEST2
    config TEST2
            bool
I guess this was one of the cleanups you had in mind.
I added a promt and then I got the following error message:
Kconfig:2:error: recursive dependency detected!
Kconfig:2:      symbol TEST1 prompt depends on TEST2
Kconfig:4:      symbol TEST2 is selected by TEST1
This is indeed better than before.
    Kconfig:2:      symbol TEST1 prompt depends on TEST2
should read:
    Kconfig:2:      symbol TEST1 depends on TEST2
As it just confuses with the "prompt" in the text.
It would be good to have the final patch ready soon so we can include
it in 2.6.29.
Thanks,
	Sam