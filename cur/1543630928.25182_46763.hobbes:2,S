Date: Sun, 19 May 2002 17:17:35 +0200
From: Francois Romieu <>
Subject: Re: [Fwd: HDLC driver: Frame-relay Inverse ARP]
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/5/19/33

Greetings,
Livio Ceci <livio@cyclades.com.br> :
[rfc2390 for linux fr]
> I attached a diff file with the changes I did, and also the sethdlc.
> Please analyse them and send me back your comments, and if possible,
> something that help me to "fill the blanks" I left as ??? in the code.
May be something like this:
net/ipv4/arp.c
/*
 *     Special case: We must set Frame Relay source Q.922 address
 */
        if (dev_type == ARPHRD_DLCI) {
                sha = dev->broadcast;
                if (arp->ar_op == __constant_htons(ARPOP_InREQUEST)) {
                        /*
                         * Use fib_lookup in order to comply with
                         * address selection in rfc2390 - 7.1 and
                         * set tip consequently
                         */
                        ...
                } else if (arp->ar_op == __constant_htons(ARPOP_InREPLY))
                        arp->ar_op = ARPOP_REPLY;
        }
Then one forces ARPOP_InREQUEST to follow the same path as ARPOP_REQUEST,
arp_send(ARPOP_InREPLY,...) being the sole difference.
               ^^
Remarks ?
-- 
Ueimor
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/