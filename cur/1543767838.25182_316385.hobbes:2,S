Date: Thu, 5 May 2005 23:20:03 +0200
From: Sam Ravnborg <>
Subject: Re: [PATCH] Saving ARCH and CROSS_COMPILE in generated Makefile
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/5/5/166

> > In any case, there's no reason to mess with that at all.  This stuff is
> > trivally dealt with by a wrapper script that takes target name as its
> > first argument (the rest is passed to make unchanged) and figures out
> > ARCH, CROSS_COMPILE, SUBARCH and build directory by it.  End of story.
> 
> I'm using such script now.  It's called kmake.
Use a Makefile called either makefile or GNUMakefile to call make with
correct arguments. No kmake script required.
And no difference in behaviour using O= or not.
You could teach kmake to create such a file if not present.
> I keep forgetting to run
> kmake instead of make, so it's an annoyance for me (usually it end up
> with a full screen of error messages, but I'm afraid I could get a mix
> of object files for different architectures in some cases).
Nope. .o files are rebuild if commandline changes. This works well.
This works so well that when you change name of gcc you have to rebuild
the kernel - no matter the arguments used.
It amy be a shift from gcc 2.96 to gcc 4.0.
	Sam
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/