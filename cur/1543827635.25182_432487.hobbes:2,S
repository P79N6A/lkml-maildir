Date: Tue, 13 Jun 2006 07:59:52 +0100
From: "Catalin Marinas" <>
Subject: Re: [PATCH 2.6.17-rc6 7/9] Remove some of the kmemleak false positives
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/6/13/32

On 13/06/06, Pekka J Enberg <penberg@cs.helsinki.fi> wrote:
> Hi Ingo,
>
> On Mon, 12 Jun 2006, Ingo Molnar wrote:
> > i dont know - i feel uneasy about the 'any pointer' method - it has a
> > high potential for false negatives, especially for structures that
> > contain strings (or other random data), etc.
>
> Is that a problem in practice?  Structures that contain data are usually
> allocated from the slab.  There needs to be a link to that struct from the
> gc roots to get a false negative.  Or am I missing something here?
The gc roots are the data and bss sections (and maybe task kernel
stacks) and all the slab-allocated blocks are scanned if a link to
them is found from the roots (and all of them are usually scanned). If
no link is found, they would be reported as memory leaks (and not
scanned). You can't really avoid the scanning of allocated blocks
since they may contain pointers to other blocks.
-- 
Catalin
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/