Date: Wed, 14 Nov 2001 11:35:53 -0500
From: Jeff Garzik <>
Subject: Re: Fw: [Patch] Some updates to serial-5.05
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/11/14/95

Stuart MacDonald wrote:
> 
> From: "Jeff Garzik" <jgarzik@mandrakesoft.com>
> > Your code formatting is totally different from the formatting of the
> > surrounding serial.c code you modify.
> 
> Please point out the bad parts. From my end the formatting is
> exactly the same.
Easily.  Your patch:
> +  case TIOCSER485GET:
> +  case TIOCSER485SET:
> +   if (state->lmode_fn)
> +    return (state->lmode_fn)(state, cmd,
> +       (unsigned int *) arg);
> +   else
> +    return -EINVAL;
>    case TIOCMGET:
>     return get_modem_info(info, (unsigned int *) arg);
>    case TIOCMBIS:
2.4.x serial.c:
>                 case TIOCMGET:
>                         return get_modem_info(info, (unsigned int *) arg);
>                 case TIOCMBIS:
The formatting is blatantly, obviously different.
> > Also, a diff against the kernel 2.4.x serial.c might be nice, as there
> > haven't been updates from tytso in ages (serial-5.05), and rmk has a new
> > serial driver for 2.5.x.
> 
> 2.4.0 contains 5.02 and 2.4.14 contains 5.05c. These patches should
> apply cleanly to all 5.xx serial drivers, although there may be
> fuzz/offsets.
Doubtful.  When applied to 2.4.x-current:
[jgarzik@rum linux_2_4]$ patch drivers/char/serial.c < ~/tmp/patch 
patching file drivers/char/serial.c
Hunk #1 FAILED at 1405.
Hunk #2 FAILED at 2514.
Hunk #3 FAILED at 2572.
Hunk #4 FAILED at 3968.
patch: **** malformed patch at line 55: {
-- 
Jeff Garzik      | Only so many songs can be sung
Building 1024    | with two lips, two lungs, and one tongue.
MandrakeSoft     |         - nomeansno
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/