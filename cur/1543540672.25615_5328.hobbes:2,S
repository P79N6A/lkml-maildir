Date: 03 Aug 2000 16:52:43 +0200
From: "Juan J. Quintela" <>
Subject: Re: test6pre1 change for sysrq config-option
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/8/3/56

>>>>> "arjan" == Arjan van de Ven <adve@oce.nl> writes:
arjan> Maybe you are right in theory. There are 3 things that make theory different
arjan> from practice right now:
arjan> 1) Serial sysrq is reported no to work for 2.4 kernels. 
arjan> 2) You cannot compile a 2.4-test kernel without CONFIG_VT but with 
arjan>    CONFIG_MAGIC_SYSRQ right now; the dep_bool change is just making 
arjan>    this explicit.
arjan> 3) Even 2.2.16 doesn't seem to contain code for Serial sysrq
arjan> Please, fix the first two issues before removing the "dep_"....
Hi
        prumpf has wrote code in the serial console to make that work
        (I think that he had send the code to Tytso to be included in
        the next release of the serial code).  I have a _functional_
        serial console with sysrq working now in the last 2.4.0
        series.
        To solve the problem 2, use the following patch, with it and
        the dep_bool change, CONFIG_MAGIC_SYSRQ + CONFIG_VT compiles
        (althought it didn't work), but with this two changes, the
        only other places that need changes are serial.c.
Later, Juan.
--- linux/kernel/sysctl.c	Sun Jul 23 16:49:45 2000
+++ linux-prumpf/kernel/sysctl.c	Sun Jul 23 19:38:40 2000
@@ -216,7 +216,7 @@
 	{KERN_SEM, "sem", &sem_ctls, 4*sizeof (int),
 	 0644, NULL, &proc_dointvec},
 #endif
-#ifdef CONFIG_MAGIC_SYSRQ
+#if defined(CONFIG_VT) && defined(CONFIG_MAGIC_SYSRQ)
 	{KERN_SYSRQ, "sysrq", &sysrq_enabled, sizeof (int),
 	 0644, NULL, &proc_dointvec},
 #endif	 
-- 
In theory, practice and theory are the same, but in practice they 
are different -- Larry McVoy
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/