Date: Sun, 11 Sep 2005 09:11:20 +0200
From: Andi Kleen <>
Subject: Re: NUMA mempolicy /proc code in mainline shouldn't have been merged
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/9/11/14

On Sunday 11 September 2005 08:51, Andrew Morton wrote:
> Certainly I can see value in that.  How can a developer test his
> code without any form of runtime feedback?
There are already several ways to do that: first the counters output
by numastat (local_node, other_node, interleave_hit etc.), which tells you 
exactly how the allocation strategy ended up. And a process can find out
on which node a specific page is using get_mempolicy()
If you really want to know what's going on you can use performance counters
of the machine to tell you the amount of cross node traffic
(e.g. see numamon in the numactl source tree as an example) 
I don't think the /proc information gives additional information
to the programmers. Externally you shouldn't know about the 
individual addresses anyways.
All it does is to open the flood gates of external mempolicy management, which 
is wrong.
> It's easy to parse and it is extensible.  It needs documenting though.
Extensible yes, but I have my doubts on easy to parse. User processes
very likely will get it wrong like they traditionally did with anything
more complicated in /proc. /proc/*/maps has been a similar disaster too.
-Andi
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/