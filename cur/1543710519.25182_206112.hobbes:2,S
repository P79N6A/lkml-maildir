Date: Sat, 13 Mar 2004 09:14:49 +0100 (CET)
From: Urban Widmark <>
Subject: Re: smbfs Oops with Linux 2.6.3
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/3/13/6

On Fri, 12 Mar 2004, Zwane Mwaikambo wrote:
> > The difference must be that in a the inode data for the root inode is not
> > considered current when the second ls runs, but I don't understand why the
> > readdir is printed before the getattr.
> 
> I don't understand why to expect the getattr before the readdir, perhaps
> you can elaborate for me?
smb_readdir
  smb_revalidate_inode
    smb_refresh_inode
      smb_proc_getattr
        server->ops->getattr
  server->ops->readdir
The first ls should find the inode out-of-date (smb_readdir probably isn't 
the first call, but that doesn't matter) because it is the first user.
The second ls is run shortly after and should find the inode to be 
up-to-date.
I'm not sure it is important at all, it just wasn't what I expected.
/Urban
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/