Date: Thu, 03 Aug 2000 19:43:15 -0500
From: "Jeffrey E. Hundstad" <>
Subject: Can't get a block out edgewise
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/8/3/147

Hello,
Here's the setup:
I have a Pentium-II 233MHz-128MB RAM, with a DPT RAID card with 64 MB
cache. The 17G of space is a RAID 5 set of 3-9G 10,000 SCSI drives.
I've got this mounted as an EXT2 filesystem, running on 2.2.17pre15 (but
it's the same for 2.2.15pre19.)  Disk report below. Bonnie reports the
speed as:
              -------Sequential Output-------- ---Sequential Input--
--Random--
              -Per Char- --Block--- -Rewrite-- -Per Char- --Block---
--Seeks---
          MB K/sec %CPU K/sec %CPU K/sec %CPU K/sec %CPU K/sec %CPU
/sec %CPU
          100   851 23.8   615  1.1   330  1.1  1436 37.6  4871  4.2
559.4  4.6
Slow... Yea, I know...
Here's the problem:
I open two sessions. In one I say "find /", in the other I say "dd
if=/dev/zero of=big.file bs=10240K count=3".
When I get enter on the second sessions the first session STOPS
COMPLETELY until all the buffers from the second session completely
write.
Here's the question:
Is there any way to smooth out the performance a bit?  I'd like some
writes to occur then some reads so file I/O doesn't grind to a halt.
I've played around with /proc/sys/vm/bdflush and I can't seem to make
anything better than the standard behavior.
dmesg (disk report):
EATA/DMA 2.0x: Copyright (C) 1994-1999 Dario Ballabio.
EATA config options -> tc:y, lc:y, mq:62, eh:y, rs:y, et:n.
EATA0: 2.0C, PCI 0xff90, IRQ 11, BMST, SG 122, MB 64.
EATA0: wide SCSI support enabled, max_id 16, max_lun 8.
EATA0: SCSI channel 0 enabled, host target ID 7.
scsi0 : EATA/DMA 2.0x rev. 5.11.01
scsi : 1 host.
  Vendor: DPT       Model: RAID-5            Rev: 07M1
  Type:   Direct-Access                      ANSI SCSI revision: 02
Detected scsi disk sda at scsi0, channel 0, id 0, lun 0
EATA0: scsi0, channel 0, id 0, lun 0, cmds/lun 62, sorted, tagged.
scsi : detected 1 SCSI disk total.
SCSI device sda: hdwr sector= 512 bytes. Sectors= 35565312 [17365 MB]
[17.4 GB]
Thanks in advance for any clues.
--
Sincerely,
Jeffrey Hundstad
Minnesota State University, Mankato
Mankato, Minnesota USA
http://mnsu.edu/jeffrey
 for pgp/gpg keys
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/