Date: Mon, 21 Jan 2008 13:53:44 -0600
From: "Chris Friesen" <>
Subject: Re: questions on NAPI processing latency and dropped network packets
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/21/228

I've done some further digging, and it appears that one of the problems 
we may be facing is very high instantaneous traffic rates.
Instrumentation showed up to 222K packets/sec for short periods (at 
least 1.1 ms, possibly longer), although the long-term average is down 
around 14-16K packets/sec.
If I bump the rx ring size up to 4096, we can handle all the packets and 
we still have 44% idle on cpu0 and 27% idle on cpu1.
Is there anything else we can do to minimize the latency of network 
packet processing and avoid having to crank the rx ring size up so high?
Thanks,
Chris