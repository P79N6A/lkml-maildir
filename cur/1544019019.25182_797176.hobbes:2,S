Date: Mon, 26 Jan 2009 17:12:22 -0800
From: Jeremy Fitzhardinge <>
Subject: unified percpu stuff
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2009/1/26/390

I'm really pleased to see the unified percpu stuff in the kernel, but 
unfortunately its breaking Xen at the moment. 
It looks like this is just a matter of initializing %gs properly in 
xen_start_kernel.  Is there any problem with me doing a load_gs_base(0) 
somewhere early in xen_start_kernel (arch/x86/xen/enlighten.c)?  Is the 
initial percpu are and offset for cpu0 all set up?  Do I need to make it 
#ifdef CONFIG_SMP?
Do I need to do anything for 32-bit? (I haven't tested that yet.)
Thanks,
    J