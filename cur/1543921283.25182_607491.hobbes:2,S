Date: Fri, 19 Oct 2007 15:55:29 -0400
From: Jeff Garzik <>
Subject: Re: [PATCH 0/9] Remove 'irq' argument from all irq handlers
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/10/19/297

Thomas Gleixner wrote:
> On Fri, 19 Oct 2007, Eric W. Biederman wrote:
>> Ingo Molnar <mingo@elte.hu> writes:
>>
>>> * Eric W. Biederman <ebiederm@xmission.com> wrote:
>>>
>>>>> thanks for doing this.
>>>> Yes.  keeping this alive is good.
>>>>
>>>> The practical question is how do we make this change without breaking 
>>>> the drivers that use their irq argument.
>>> the get_irq_regs() approach worked out really well. We should do a 
>>> get_irq_nr() and be done with it?
>> The problem are some drivers today pass in 0 for their irq number
>> to flag that they are calling the interrupt handler in a polling
>> mode (not from interrupt context?) so the same logic doesn't quite apply.
>>
>> Do what you suggest would likely break those drivers.
> 
> How many of them do we have ? This is a wilful abuse of the API, so
> its not a big damage if they break.
I would prefer to simply clean up the drivers such that 
get_irqfunc_irq() and set_irqfunc_irq() are not needed.
One of the many reasons why I'm explicitly not pushing it upstream yet :)
	Jeff
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/