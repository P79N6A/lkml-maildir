Date: Fri, 2 Mar 2001 16:38:48 +0000 (GMT)
From: Alan Cox <>
Subject: Re: Linux 2.4.2ac7
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/3/2/106

> If I extend 'bus' to be 4 bits instead of 2 then I can make it work on all
> of my machines (or all those I tried), of course, extending the buscode[]
> table appropriately.
That would be interesting to see. Certainly the mul code got extended by a bit
later on
> However, the radically broken, imho, thing is that the (bus, mul) pair is
> _not_ constant when I vary the bus/cpu speed settings in the "soft cpu
> BIOS". If the bits of the 0x2A msr are supposed to be used for finding out
> the "true" i.e. intended bus/cpu speeds (hence the label "overclocked" in
> the code) then they should remain constant when one is overclocking,
> right?
The values are read from the poweron register. The values in that can be wrong
in certain cases. The real goal is to get the bus/multiplier values  for the
processors on an SMP box reliably. In fact the 'overclocked' hack is probably
not something I'd feed to Linus
Ultimately we need this to detect SMP boxes where the cpus have different
multipliers, as we must disable the TSC in these cases.
Alan
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/