Date: Tue, 27 May 2003 03:11:10 -0400
From: Ivan Gyurdiev <>
Subject: ALSA problems: sound lockup, modules, 2.5.70
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/5/27/45

I wrote about this in a previous mail, but this is a repost as a separate 
subject.
1) All sound applications on my system break on 2.5.70 and work fine on 
2.4.21-rc4 with alsa 0.9.2. The problem is a lockup where the sound keeps 
looping. The kernel log does not report anything, but: 
	- aplay locks up when beginning to play a wav. file
	- xmms locks up on attempted stop or skipping back or forward (mp3)
	- mplayer locks up on pause (mp3)
	- xine locks up on start (mp3)
Soundcard uses snd-via82xx driver (ALC650)
2) Module issues.
Perhaps this is not a bug, but I cannot get the sound modules to autload.
I use module-init-tools 0.9.12, devfs, and I have set up moprobe.devfs and 
modprobe.conf. I have kmod compiled in the kernel. The redhat initscripts are 
not turning off autoloading - other things autoload fine. 
Modprobe.devfs says:
alias /dev/snd snd-card-0
alias /dev/snd/*  /dev/snd
alias /dev/sound/* /dev/sound
alias /dev/sound sound-slot-0
alias /dev/audio sound-slot-0
alias /dev/mixer sound-slot-0
alias /dev/dsp sound-slot-0
alias /dev/dspW sound-slot-0
alias /dev/midi sound-slot-0
Modprobe.conf says:
alias sound-slot-0 snd-via82xx
alias snd-card-0 snd-via82xx
install snd-via82xx /sbin/modprobe --ignore-install snd-via82xx && { alsactl 
-f /etc/asound.state restore; }
remove snd-via82xx /sbin/modprobe -r --ignore-remove snd-via82xx && { alsactl 
-f /etc/asound.state store; }
Devfsd.conf says:
REGISTER sound/.* PERMISSIONS root.audio 660
REGISTER snd/.* PERMISSIONS root.audio 660
And the modules won't load until I manually modprobe snd-via82xx.
Also...on modprobe --remove snd-via82xx:
[root@cobra etc]# modprobe --remove snd-via82xx
alsactl: save_state:1050: No soundcards found...
FATAL: Error running remove command for snd_via82xx
[root@cobra etc]#
Thank you for your help.
                                                                                                         
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/