Date: Sun, 11 Dec 2005 22:30:12 +0100
From: Jesper Juhl <>
Subject: Re: [PATCH] Fix vesafb display panning regression
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/12/11/130

On 12/11/05, Antonino A. Daplas <adaplas@gmail.com> wrote:
> Fix vesafb hang when scroll mode is REDRAW.
>
> Signed-off-by: Antonino Daplas <adaplas@pol.net>
> ---
>
> Jesper Juhl wrote:
> > On 12/11/05, Andrew Morton <akpm@osdl.org> wrote:
> >> 
ftp://ftp.kernel.org/pub/linux/kernel/people/akpm/patches/2.6/2.6.15-rc5/2.6.15-rc5-mm2/
> >>
> > When booting this kernel with  vga=791 like I normally do, the kernel
> > hangs on boot. Booting with vga=normal works just fine.
> > I don't have very much info since as soon as the videomode is switched
> > I get a small rectangle of messed up colours in the top left corner of
> > the screen (the rest is just black) and then it hangs - even the
> > keyboard is dead, I have to powercycle the machine.
> > Nothing makes it to the logs and I don't have a second machine atm to
> > get logs via serial console or netconsole.
> > I've got the vesafb driver build in, none of the other fb drivers.
> >
>
> Sorry about that.
No problem, it happens :)
>  This particular hunk was missing in the
> vesafb_trim_pan_display.patch
>
I just rebuild 2.6.15-rc5-mm2 with that patch applied and I can
confirm that it fixes the problem.
So, I guess I should add
Acked-by: Jesper Juhl <jesper.juhl@gmail.com>
Andrew, could you please merge that patch from Antonio?
One small detail; With 2.6.15-rc5-mm2 I see a small (rather
insignificant) difference in behaviour compared to 2.6.15-rc5-git1
just at the time when the video mode is switched at boot.
With 2.6.15-rc5-git1 it goes straight from the text mode display to
the graphical one with the boot logo in the top left corner. With
2.6.15-rc5-mm2 + your patch I get a brief, split second, image with
random green/grey/white pixels in the location where the penguin
appears a few ms later - then everything is normal.
No big deal and it doesn't bother me, just thought it might be
something you'd want to know about...
--
Jesper Juhl <jesper.juhl@gmail.com>
Don't top-post  
http://www.catb.org/~esr/jargon/html/T/top-post.html
Plain text mails only, please      
http://www.expita.com/nomime.html
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/