Date: Tue, 4 Sep 2007 20:56:37 +0400
From: Alexey Dobriyan <>
Subject: Re: Race condition: calling remove_proc_entry in cleanup_module (module_exit) while someone's using procfile
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/9/4/109

On Tue, Sep 04, 2007 at 06:39:33PM +0200, anon... anon.al wrote:
> There is a race condition if an instance is executing "__exit
> device_exit" and calls remove_proc_entry, while someone is still using
> the procfile, right?.
> 
> static void __exit device_exit(void)
> {
>   // what if the procfile is still in use?
>   remove_proc_entry(PROC_FILE_NAME, &proc_root);
> }
For regular proc files, this is fixed in 2.6.23-rc1 and later.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/