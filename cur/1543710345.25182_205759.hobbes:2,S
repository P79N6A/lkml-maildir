Date: Fri, 12 Mar 2004 10:29:27 +1100
From: Nick Piggin <>
Subject: Re: 2.6.4-mm1
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/3/11/292

Anton Blanchard wrote:
> 
>
>>- The CPU scheduler changes in -mm (sched-domains) have been hanging about
>>  for too long.  I had been hoping that the people who care about SMT and
>>  NUMA performance would have some results by now but all seems to be silent.
>>
>>  I do not wish to merge these up until the big-iron guys can say that they
>>  suit their requirements, with a reasonable expectation that we will not
>>  need to churn this code later in the 2.6 series.
>>
>>  So.  If you have been testing, please speak up.  If you have not been
>>  testing, please do so.
>>
>
>I sucked sched-* out of mm, added sched-ppc64bits (attached) and am
>having problems with the following threaded test case. NUMA is enabled.
>
>#include <pthread.h>
>#define NR_THREADS 100
>
>void dostuff(void *junk)
>{
>        while(1)
>                ;
>}
>
>int main()
>{
>        int i;
>        pthread_t tid;
>
>        for (i = 0; i < NR_THREADS-1; i++)
>                pthread_create(&tid, NULL, dostuff, NULL);
>
>        dostuff(NULL);
>}
>
>100 runnable threads but we never use more than one cpu:
>
OK thanks. This is probably a simple bug somewhere. I'll have a look
at it soon.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/