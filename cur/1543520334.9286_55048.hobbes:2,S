Date: Thu, 23 Dec 1999 19:09:32 +0100
From: Martin Dalecki <>
Subject: Re: PATCH against 2.2.13: disk io stats in /proc/stat
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/12/23/119

arijort@valinux.com wrote:
> 
> I was looking around for a utility to give me some
> stats on my disk io.  Something like iostat in Solaris.
> 
> Well, I found that /proc/stat only reports stats
> for 4 disks.  I'm not sure why that limitation exists,
> but then I learned from Ted T'so that /proc/stat
> is problematic in other ways.
> 
> A kernel instance only maintains a single
> struct kernel_stat and thus io's into the indexed
> dk_drive_rio, for instance are differentiated by
> device.  Io's to /dev/hda1 and /dev/sda1 are
> comingled, and thus corrupted.  At least that's
> how I'm reading this code.
> 
> I made up this one patch which I believe ups the
> number of devices reported in /proc/stat to 16.
> But the problem of the undifferentiated devices
> is a larger fish.  Could we break up the indices
> for io stats in kernel_stat into categories pertaining
> to device types?
> 
/proc/stat should be killed asap. There should a counter in
the device strcut for this purpose an an reserver ioctrl on
the device special file to get this data.
--
	Marcin Dalecki
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/