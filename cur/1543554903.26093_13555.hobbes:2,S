Date: Fri, 17 Nov 2000 12:34:01 +0100
From: Matthias Andree <>
Subject: Re: Linux 2.2.18pre21
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/11/17/81

On Thu, 16 Nov 2000, H. Peter Anvin wrote:
> BUG: you *MUST* chdir() into the chroot jail before it does you any
> good at all!
> 
> I usually recommend:
  #include <sysexits.h>
  /* for EX_NOUSER */
> mkdir("foo");
> chdir("foo");
> chroot(".");
add this:
  /* DO REPLACE 500 BY AN EXISTING USER ID */
  /* DO NOT REPLACE IT BY 0! */
  /* DO NOT USE OTHER FUNCTIONS THAN setuid() */
  if(setuid(500)) { _exit(EX_NOUSER); }
(For the records and search engines, most people should know that, but
to have it all in one mail.)
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/