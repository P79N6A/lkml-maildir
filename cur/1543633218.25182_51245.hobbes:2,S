Date: Sun, 09 Jun 2002 15:37:02 +0200
From: Martin Dalecki <>
Subject: [PATCH] 2.5.20 IDE 86
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/6/9/109

Most importantly this makes ide-scsi work again, which I broke
IDE 85. And we are starting to be serious about locking issues.
However the locking issues will take some patches until they stabilize.
Wed Jun  5 22:08:15 CEST 2002 ide-clean-86
- Add spin locks in ata_special_intr.
- Add Server Works CSB6 handling by Matt Domsch.
- Atari updates by Geert Uytterhoeven:
   * irq_lock is used in more than one file, so make it global and rename it
     to ide_irq_lock
   * `hwgroup' is dead, use `channel' instead
   * ide_irq_lock depends on ATA_ARCH_LOCK, not on m68k or APUS
- Small janitorial tidbits by Angus Sawyer.
- PIIX driver updates by Vojtech Pavlik:
   * Removes the CONFIG_BLK_DEV_PIIX_TRY133 option. I've got an official
     statement from Intel saying that the controller definitely isn't intended
     to operate at this speed and doing so may cause severe trouble.
   * Fixes a bug in ata-timing.c, where EIDE timing data was discarded by
     accident.
   * Fixed a couple bugs in the Artop driver (UDMA clocks, active/recovery
     timing), 8-bit timing merging.
   * Removes an unused variable from piix.c
- Move locking out from ide_set_handler(). There are places where it incurred
   too frequent lock grab and release or where we did miss to lock against
   concurrent hardware access.
   Generally the locking appears to be too fine grained and inconsistent at many
   places. This is the first cut. We will deal with it step by step.
- Make sure message string is initialized even if FANCY_STATUS_DUMPS is
   disabled.
- Don't lock directly inside udma_init and implementations of this method.
- Guard against REQ_SPECIAL issued by the SCSI layer on us. Use REQ_PC in
   ide-scsi.c instead.
[unhandled content-type:application/x-gzip]