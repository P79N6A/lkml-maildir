Date: Sat, 31 May 2003 12:29:59 -0300
From: Alexandre Pereira Nunes <>
Subject: 2.4.21-rc6 ide-scsi bug?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/5/31/62

Hi,
My system (athlon on an asus mb with via kt133 chipset) is currently 
running 2.4.21-rc6 (but I had similar behaviour with 2.4.21-rc2-ac2), 
and I map my ide cdrom to ide-scsi by passing option ide-cd ignore in 
modules.conf (devfs is enabled, so that the modules load at /dev/cdrom 
request).
Sometimes my cd drive (actually a mdma2 enabled combo dvd reader/cdrw 
writer lg 4120B) seems to 'sleep' after a long time of inactivity and 
waking it up (i.e. by trying to mount the unit) takes a time, so 
eventually the system has to do a "soft" bus reset so that it comes to 
life again (maybe it actually does that because the drive takes too long 
to wake up by itself, but I don't know). If I use ide-cd instead of 
ide-scsi, it happens as described and the system works ok (the kernel 
prints dma disabled but if I enable it back it works fine), but with 
ide-scsi, after the kernel prints that atapi reset and dma disabled 
stuff, the system hangs. nothing else is printed, and my caps lock and 
scroll lock keys starts blinking, so it seems to be a serious kernel 
panic, but nothing about that is printed on the screen even when I'm at 
console.
Older kernels i've tried (2.4.20 and 2.4.21-pre7) seems to behave ok.
I work around by using ide-cd until I need ide-scsi for something (like 
tunning the rpc2 features on the drive to change region settings for dvd 
playing), and replacing the driver by hand after making sure the drive 
is ok, but that actually sucks :-)
Thanks in advance,
Alex
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/