Date: Sun, 30 Nov 2003 16:00:42 +0000
From: Russell King <>
Subject: Re: 2.6.0-test11 -- Failed to open /dev/ttyS0: No such device
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/11/30/62

On Mon, Dec 01, 2003 at 01:54:51AM +1000, Steve Youngs wrote:
> |--==> "JK" == Jacek Kawa <jfk@zeus.polsl.gliwice.pl> writes:
> 
>   JK> bert hubert wrote:
>   >>> Does anyone have modem working in 2.6.0-test11?
>   >>> I have external modem connected to /dev/ttyS0 (COM1).  Kernel
>   >>> 2.6.0-test11 give me
> 
>   JK> It reminds me, that I had to add serial to the list of modules
>   JK> loading at start to get back access to /dev/ttyS* 
>   JK> (while upgrading from -test9 to -test10). 
> 
> Jacek,
> 
> I _think_ this patch will bring back auto-loading of the serial module
> for you.  Please let me know how it goes.  (Bert, this won't fix your
> problem if you have the serial driver compiled directly into the
> kernel, but it might if you have it as a module.)
> 
> --- linux-2.6.0-test11/drivers/serial/serial_core.c	2003-11-27 12:12:22.000000000 +1000
> +++ linux-2.6.0-test11-sy/drivers/serial/serial_core.c	2003-12-01 01:38:40.000000000 +1000
> @@ -2420,3 +2420,4 @@
> 
>  MODULE_DESCRIPTION("Serial driver core");
>  MODULE_LICENSE("GPL");
> +MODULE_ALIAS_CHARDEV(drv->major, drv->minor);
> 
This is wrong.  serial_core should /never/ depend on a major/minor number
because it doesn't know what (group of) major/minor(s) it is going to be.
The only modules which know are the hardware drivers themselves, like
8250.c.
-- 
Russell King
 Linux kernel    2.6 ARM Linux   - 
http://www.arm.linux.org.uk/
 maintainer of:  2.6 PCMCIA      - 
http://pcmcia.arm.linux.org.uk/
                 2.6 Serial core
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/