Date: Thu,  8 May 2008 02:51:01 -0400
From: Anoop <>
Subject: Re: ptrace PTRACE_PEEKUSER behavior
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/5/8/48

Quoting Roland McGrath <roland@redhat.com>:
> 'struct user' is really a virtual structure layout, and never exists
> anywhere as an actual struct.  It's really just defining the argument
> values that can be used in PEEKUSR/POKEUSR calls.
But the powerpc ptrace code returns the FPRs & FPSCR though they are  
not part of user struct.
CHECK_FULL_REGS(child->thread.regs);
if (index < PT_FPR0) {
		tmp = ptrace_get_reg(child, (int) index);
} else { <=============
		flush_fp_to_thread(child);
		tmp = ((unsigned long *)child->thread.fpr)[index - PT_FPR0];
}
ret = put_user(tmp,(unsigned long __user *) data);
Does this mandate inclusion of floating point set in powerpc user struct?
Regards,
- Anoop