Date: Mon, 05 May 2003 01:37:52 -0400
From: Jeff Garzik <>
Subject: Re: [RFC][PATCH] Dynamic PCI Device IDs
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/5/5/12

Greg KH wrote:
> On Wed, Apr 30, 2003 at 07:39:57PM -0500, Matt_Domsch@Dell.com wrote:
> 
>>>First off, nice idea, but I think the implementation needs a bit of
>>>work.
>>
>>Thanks.  I didn't expect it to be perfect first-pass.
>>Let me answer some questions out-of-order, maybe that will help.
>>
>>
>>>>echo 1 > probe_it
>>>>Why wouldn't the writing to the new_id file cause the probe to
>>>
>>>happen immediatly?  Why wait?  So I think we can get rid of that file.
>>
>>That was my first idea, but Jeff said:
>>http://marc.theaimsgroup.com/?l=linux-kernel&m=104681922317051&w=2
>>        I think there is value in decoupling the two operations:
>> 
>>        	echo "0x0000 0x0000 0x0000 0x0000 0x0000 0x0000" >
>>.../3c59x/table
>>        	echo 1 > .../3c59x/probe_it
>> 
>>        Because you want the id table additions to be persistant in the face of
>>        cardbus unplug/replug, and for the case where cardbus card may not be
>>        present yet, but {will,may} be soon.
> 
> 
> But by adding the device ids, they will be persistant, for that driver,
> right?  Then when the device is plugged in, the core will iterate over
> the static and dynamic ids, right?  If so, I don't see how a "probe_it"
> file is needed.
Consider the case:
Device already exists, and is plugged in.  Like a standard PCI card.
Driver doesn't support PCI id, and the sysadmin uses /bin/echo to add one.
For unplugged case, you know you don't need to re-run the probe.
If you really don't want probe_it, I suppose you could re-run the 
driver's PCI probe for the cases where it is redundant.  However, my own 
preference is to let the sysadmin decide whether or not the driver's PCI 
probe should be re-run.
	Jeff
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/