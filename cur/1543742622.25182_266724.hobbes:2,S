Date: Sat, 30 Oct 2004 16:05:14 -0400
From: Lee Revell <>
Subject: Re: [Fwd: Re: [patch] Real-Time Preemption, -RT-2.6.9-mm1-V0.4]
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/10/30/176

On Sat, 2004-10-30 at 21:47 +0200, Florian Schmidt wrote:
> Hi, in the meantime i also booted into P9 again and the results differ
> dramatically. Much better in P9. Anyways, i reuploaded the tarball. The
> program tries to detect missed irq's now and counts the total number of
> irq's delivered by /dev/rtc. Since the program does not recover from missed
> irq's the "statistical" data for these runs is useless [except for the
> knowledge of the fact that one or more irq was missed :)]
Here are my results with T3.  As expected, much better.
--
rlrevell@mindpipe:~/cvs/wakeup$ ./rt_wakeup 1024 100000 freq: 1024 #:
100000
setting up /dev/rtc.
locking memory...
turning irq on, beginning measurement (might take a while).
done.
total # of irqs: 100000. missed irq's: 0
mean cycle difference betweem two wakeups: 585875 cycles
min. cycle difference betweem two wakeups: 517708 cycles (#: 27478)
 diff from mean diff: 68166.8
max. cycle difference betweem two wakeups: 656018 cycles (#: 27477)
 diff from mean diff: 70143.2
mean difference from mean difference: 3052.86 cycles
--
So maybe the bug is not related to scheduling of SCHED_FIFO threads, but
that we are missing IRQs.  I think this would explain the choppy
playback with mplayer (it uses the RTC and does not run SCHED_FIFO).
Lee
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/