Date: Sun, 20 Jan 2008 22:00:52 +0900
From: Tejun Heo <>
Subject: Re: [PATCH 0/6] RFC: Typesafe callbacks
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/20/54

Tejun Heo wrote:
> * Passing NULL as data to callback which takes non-void pointer
>   triggers warning.  I think this should be allowed.  Something like
>   the following?
Please ignore the last sentence.
> * Allowing non-pointer integral types which fit into pointer would be
>   nice.  It's often convenient to pass integers to simple callbacks.
> 
> The following macro kinda-sorta achieves the above two but it doesn't
> consider promotion of integer types and thus is too strict.  There
> gotta be some way.
What should be do are
* Check that the threadfn's argument fits into void *.
* Trigger overflow in implicit constant conversion warning if the
specified data is too large for the argument type.
Tricky...
-- 
tejun