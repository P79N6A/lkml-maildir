Date: Tue, 21 Mar 2000 12:44:17 -0800 (PST)
From: Linus Torvalds <>
Subject: Re: [Patch] Token Ring Deadlock on SMP
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/3/21/273

On Mon, 20 Mar 2000, Phillips, Mike wrote:
> 
> This should be sufficient for 2.4, we'll put the proper solution (the new
> source routing code) into effect for 2.5
Mike, this part looks pretty wrong:
	+       if (!spin_is_locked(&rif_lock) ) { 
	+               spin_lock_irqsave(&rif_lock,flags);
definitely is buggy. Either use "trylock", or just do them all irq-safe (I
would prefer to get a stupid straightforward "all irqsafe" patch first,
and then try to avoid irq latencies by being clever later. Ok?)
		Linus
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/