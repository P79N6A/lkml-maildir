Date: Wed, 08 Feb 2006 09:14:37 +0100
From: "Seewer Philippe" <>
Subject: Last Patch to pdc_adma breaks debug compile
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/2/8/111

The Last Patch (5. Nov. 05) to the sata pdc_adma driver removed nelem
from adma_fill_sg and introduced ata_for_each_sg.
The Problem is that nelem was forgot to be removed from the contained
VPRINTK too. The attached patch fixes this.
Patch applies against 2.6.15.1
Regards
Philippe Seewer
--- linux-2.6.15.1/drivers/scsi/pdc_adma.c.orig	2006-02-08 09:03:15.000000000 +0100
+++ linux-2.6.15.1/drivers/scsi/pdc_adma.c	2006-02-08 09:04:32.000000000 +0100
@@ -322,8 +322,8 @@ static int adma_fill_sg(struct ata_queue
 			= (pFLAGS & pEND) ? 0 : cpu_to_le32(pp->pkt_dma + i + 4);
 		i += 4;
 
-		VPRINTK("PRD[%u] = (0x%lX, 0x%X)\n", nelem
-					(unsigned long)addr, len);
+		VPRINTK("Current PRD = (0x%lX, 0x%X)\n",
+			(unsigned long)addr, len);
 	}
 	return i;
 }