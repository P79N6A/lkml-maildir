Date: Thu, 3 Jun 2004 14:08:03 +0200
From: Pavel Machek <>
Subject: Re: swappiness=0 makes software suspend fail.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/6/3/79

Hi!
> >>>btw, software suspend wrecks your swap partition if you suspend to swap 
> >>>but
> >>>do not resume from swap - you need to run mkswap again.  Seems odd.
> >>
> >>I think it's intentional, so that if you you boot to a different kernel 
> >>swapon -a won't automount the swap partition and hork your saved image.
> >
> >
> >Actually, we *want* to hork that saved image, because it is extremely
> >dangerous to resume from it.
> >
> >We also want to kill suspend signature ASAP, so that if driver kills
> >resume and user presses reset, we will not try to resume again and
> >fail in exactly same way.
> Suspend2 fixes the header and records when you've attempted to resume from 
> it. If you try a second time it gives you the option of invalidating the 
> image or trying to resume. Pavel, feel free to grab the code out of 
> suspend2 if you want.
It should be simpler to just move already-existing signature changing
code to right place, but thanks anyway.
								Pavel
-- 
934a471f20d6580d5aad759bf0d97ddc
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/