Date: Tue, 08 Feb 2005 10:40:54 +0000
From: Anton Altaparmakov <>
Subject: Re: [BUG report] UML linux-2.6 latest BK doesn't compile
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/2/8/36

On Tue, 2005-02-08 at 11:22 +0100, Blaisorblade wrote:
> On Tuesday 08 February 2005 11:09, Anton Altaparmakov wrote:
> > Hi,
> >
> > With the current linux-2.6 BK tree I get this when trying to compile
> > UML:
> >
> >   CC      init/version.o
> >   LD      init/built-in.o
> >   LD      .tmp_vmlinux1
> > arch/um/kernel/built-in.o(__ksymtab+0x2b0): In function `um_execve':
> > arch/um/kernel/exec_kern.c:59: undefined reference to `__bb_init_func'
> > collect2: ld returned 1 exit status
> >   KSYM    .tmp_kallsyms1.S
> > nm: '.tmp_vmlinux1': No such file
> > /bin/bash: line 1: 26161 Exit 1                  nm -n .tmp_vmlinux1
> >      26162 Segmentation fault      | scripts/kallsyms >.tmp_kallsyms1.S
> > make: *** [.tmp_kallsyms1.S] Error 139
> >
> > This is with SKAS mode enabled and TT disabled.  My .config is attached.
> 
> Hmm - I do not understand at all where `__bb_init_func' comes from (not from 
> UML by sure, only from kernel headers possibly). And from preprocessing the 
> source (of the -bk4 snapshot), nothing similar comes out.
It is from UML.  'bk -r grep __bb_init_func' gives:
arch/um/kernel/gmon_syms.c      1.1     extern void __bb_init_func(void
*);
arch/um/kernel/gmon_syms.c      1.1     EXPORT_SYMBOL(__bb_init_func);
The kernel compiles fine with the same .config but TT mode also enabled.
So I suspect that in the non-TT case the gmon_syms binary doesn't get
linked into the kernel so the symbol is missing or something like
that...
Also note I am using the latest BK as pulled about an hour ago.  I don't
know how old the snapshot you are using is in comparison.  Lots of UML
changes were pulled in by my pull...
Best regards,
        Anton
-- 
Anton Altaparmakov <aia21 at cam.ac.uk> (replace at with @)
Unix Support, Computing Service, University of Cambridge, CB2 3QH, UK
Linux NTFS maintainer / IRC: #ntfs on irc.freenode.net
WWW: 
http://linux-ntfs.sf.net/
 & 
http://www-stu.christs.cam.ac.uk/~aia21/
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/