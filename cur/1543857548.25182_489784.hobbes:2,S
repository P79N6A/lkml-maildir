Date: Fri, 8 Dec 2006 13:01:55 -0800
From: Andrew Morton <>
Subject: Re: [PATCH] freezer.h uses task_struct fields
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/12/8/271

On Fri, 08 Dec 2006 08:31:11 -0600
Dave Kleikamp <shaggy@ltc.vnet.ibm.com> wrote:
> > include/linux/freezer.h: In function 'frozen_process':
> > include/linux/freezer.h:55: error: dereferencing pointer to incomplete type
> > include/linux/freezer.h:55: error: dereferencing pointer to incomplete type
> > include/linux/freezer.h:55: error: 'PF_FREEZE' undeclared (first use in this function)
> > include/linux/freezer.h:55: error: 'PF_FROZEN' undeclared (first use in this function)
> > fs/jfs/jfs_txnmgr.c: In function 'freezing':
> > include/linux/freezer.h:18: warning: control reaches end of non-void function
> > make[2]: *** [fs/jfs/jfs_txnmgr.o] Error 1
> 
> Defining CONFIG_SMP or CONFIG_PREEMPT masks this problem (at least in
> jfs), since smp_lock.h will include sched.h when CONFIG_LOCK_KERNEL is
> defined, and smp_lock.h happens to be included by jfs_txngmr.c before
> freezer.h.
> 
> > 
> > Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com>
> 
> Acked-by: Dave Kleikamp <shaggy@linux.vnet.ibm.com>
OK, thanks guys.  This is the sort of patch which I like to put
through a decent round of cross-compilation testing, so it's unlikely
to appear in mainline for 2-3 days.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/