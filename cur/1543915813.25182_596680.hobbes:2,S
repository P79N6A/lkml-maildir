Date: Thu, 20 Sep 2007 11:12:13 +0200
From: Cedric Le Goater <>
Subject: Re: 2.6.23-rc6-mm1 - make access to tasks nsproxy ligther (fix)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/9/20/154

Pavel Emelyanov wrote:
> Looks sane :)
> 
> [snip]
> 
>> Index: 2.6.23-rc6-mm1/kernel/exit.c
>> ===================================================================
>> --- 2.6.23-rc6-mm1.orig/kernel/exit.c
>> +++ 2.6.23-rc6-mm1/kernel/exit.c
>> @@ -408,6 +408,8 @@ void daemonize(const char *name, ...)
>>  	current->fs = fs;
>>  	atomic_inc(&fs->count);
>> 
>> +	if (current->nsproxy != init_task.nsproxy)
>> +		get_nsproxy(init_task.nsproxy);
>>  	switch_task_namespaces(current, init_task.nsproxy);
> 
> shouldn't we make the switch under this if() as well?
right. we can probably simplify switch_task_namespaces() and remove :
	if (ns == new)
		return;
I'll cook a better one today.
Thanks !
C. 
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/