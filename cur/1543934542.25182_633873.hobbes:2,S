Date: Thu, 3 Jan 2008 15:48:35 +0200
From: Ville Syrj채l채 <>
Subject: Re: [PATCH] w1-gpio: Add GPIO w1 bus master driver
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/3/128

On Wed, Dec 26, 2007 at 11:24:54PM +0100, Haavard Skinnemoen wrote:
> On Fri, 21 Dec 2007 09:34:01 +0200
> Ville Syrjala <syrjala@sci.fi> wrote:
> 
> > +static struct platform_device foo_w1_device = {
> > +	.name			= "w1-gpio",
> > +	.id			= -1,
> 
> Assigning -1 to a u32 member isn't a very nice example. What does it
> mean anyway?
id is 'int'. The bus_name won't include the id when -1 is used.
> > +static int __init w1_gpio_probe(struct platform_device *pdev)
> 
> This must be __devinit, or if you want to save a bit of memory...
> 
> > +	.probe	= w1_gpio_probe,
> 
> ...remove this line, and...
> 
> > +static int __init w1_gpio_init(void)
> > +{
> > +	return platform_driver_register(&w1_gpio_driver);
> 
> ...call platform_driver_probe(&w1_gpio_driver, w1_gpio_probe) here.
I was wondering what platform_driver_probe() was for but never bothered
to read the code. I'll change the code to use it.
I already sent an updated patch but forgot to send this reply.
-- 
Ville Syrj채l채
syrjala@sci.fi
http://www.sci.fi/~syrjala/
--
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/