Date: Wed, 17 Mar 2004 17:08:23 -0800
From: Peter Zaitsev <>
Subject: True  fsync() in Linux (on IDE)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/3/17/188

Hello,
I'm wondering is there any way in Linux to do proper fsync(), which
makes sure data is written to the disk.
Currently on IDE devices one can see, fsync() only flushes data to the
drive cache which is not enough for ACID guaranties database server must
give. 
There is solution just to disable drive write cache, but it seems to
slowdown performance way to much.
I would be also happy enough with some global kernel option which would
enable drive cache flush on fsync :) 
Mac OS X also has this "optimization", but at least it provides an
alternative flush method for Database Servers:
fcntl(fd, F_FULLFSYNC, NULL)
can be used instead of fsync() to get true fsync() behavior. 
-- 
Peter Zaitsev, Senior Support Engineer
MySQL AB, www.mysql.com
Meet the MySQL Team at User Conference 2004! (April 14-16, Orlando,FL)
  
http://www.mysql.com/uc2004/
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/