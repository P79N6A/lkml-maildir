Date: Sat, 20 Oct 2007 11:29:50 +0200
From: Jörn Engel <>
Subject: Re: [BLOCK2MTD] WARNING: at kernel/lockdep.c:2331 lockdep_init_map()
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/10/20/38

On Fri, 19 October 2007 16:04:10 -0400, Erez Zadok wrote:
> In message <20071019191433.GK26913@lazybastard.org>, =?utf-8?B?SsO2cm4=?= Engel writes:
> > 
> > Since when roughly?  2.6.20ish?  Before?
> 
> Yeah, I guess around that time.  If you want, I could go back and test each
> of my backports and see if it has the lockdep message or not.
That's ok.  Just wanted to get a rough idea.
> > Side note: you don't need mtdblock:
> > # cp jffs2-empty.img /tmp/foo
> > # losetup /dev/loop0 /tmp/foo
> > # modprobe block2mtd block2mtd=/dev/loop0,128ki
> > # mount -t jffs2 mtd0 /n/lower/b0
> > 
> > It doesn't really hurt, 'tis just superfluous.
> 
> Neat.  Curious, but where does "mtd0" come from then?  It's not in my /dev
> (which uses devfs on an FC6 system).
JFFS2 interprets that itself.  The only reason why JFFS2 needed a block
device was to determine the minor number of the mtd underneith.  So code
was added to find the correct mtd from "mtd0" or "mtd:some_name"
instead.  I believe you can even disable CONFIG_BLOCK now.
And the code itself was moved to drivers/mtd/mtdsuper.c fairly recently.
Jörn
-- 
Joern's library part 2:
http://www.art.net/~hopkins/Don/unix-haters/tirix/embarrassing-memo.html
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/