Date: Tue, 8 May 2007 15:06:23 -0700
From: Randy Dunlap <>
Subject: Re: [patch 4/4] Add common orderly_poweroff()
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/5/8/518

On Tue, 08 May 2007 13:51:33 -0700 Jeremy Fitzhardinge wrote:
> diff -r 9eea40ea89b7 kernel/sys.c
> --- a/kernel/sys.c	Tue May 08 12:59:41 2007 -0700
> +++ b/kernel/sys.c	Tue May 08 13:42:22 2007 -0700
> @@ -2208,3 +2208,58 @@ asmlinkage long sys_getcpu(unsigned __us
>  	}
>  	return err ? -EFAULT : 0;
>  }
> +
> +char poweroff_cmd[POWEROFF_CMD_PATH_LEN] = "/sbin/poweroff";
> +
> +static void argv_cleanup(char **argv, char **envp)
> +{
> +	argv_free(argv);
> +}
> +
> +/**
   /*
would be OK since this isn't kernel-doc.... (or make it kernel-doc)
> + * Trigger an orderly system poweroff
> + *
> + * This may be called from any context to trigger a system shutdown.
> + * If the orderly shutdown fails, it will force an immediate shutdown.
> + */
> +int orderly_poweroff(bool force)
> +{
---
~Randy
*** Remember to use Documentation/SubmitChecklist when testing your code ***
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/