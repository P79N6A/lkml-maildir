Date: Wed, 12 Dec 2007 10:59:35 -0800
From: Greg KH <>
Subject: Re: [PATCH -mm -v2] x86 boot : export boot_params via sysfs
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/12/12/294

On Wed, Dec 12, 2007 at 09:54:12AM -0800, H. Peter Anvin wrote:
> Greg KH wrote:
>> On Wed, Dec 12, 2007 at 04:59:51PM +0800, Huang, Ying wrote:
>>> This patch export the boot parameters via sysfs. This can be used for
>>> debugging and kexec.
>>>
>>> The files added are as follow:
>>>
>>> /sys/kernel/boot_params/data	: binary file for struct boot_params
>>> /sys/kernel/boot_params/version	: boot protocol version
>>>
>>> This patch is based on 2.6.24-rc4-mm1 and has been tested on i386 and
>>> x86_64 platoform.
>>>
>>> This patch is based on the Peter Anvin's proposal.
>> As outlined in a previous email, I object to the whole structure being
>> exported to userspace as a binary blob.  Please change that.
>
> I would prefer to have the binary blob available; exported fields is 
> possible too, of course.
>
> This is a binary structure defined by protocol;
What protocol?  Is this a "standard" documented somewhere?
> in that way it's not significantly different from something passed
> from the firmware (in fact, it might very well *be* passed from the
> firmware.)  We have in the past found platform bugs by looking at the
> contents of the whole structure, e.g.  to find that part of it has
> been inappropriately clobbered.
For debugging things, then just export it through debugfs.
> It is also in the form needed by e.g. kexec to operate.
Does kexec need this today to work properly?  Or is this something new?
What userspace program is going to know the exact data format of this
blob, and where is it going to know that format from?  The kernel header
files in sanitized form?  Or something else?
thanks,
greg k-h