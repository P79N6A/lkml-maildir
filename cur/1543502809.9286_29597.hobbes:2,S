Date: Thu, 15 Jul 1999 18:10:04 +0100 (BST)
From: "Stephen C. Tweedie" <>
Subject: Re: [PATCH 2.2.10] Re: Problem with memmap file with SMP
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/7/15/125

Hi,
On Thu, 15 Jul 1999 09:39:37 -0700 (PDT), Linus Torvalds
<torvalds@transmeta.com> said:
> On Thu, 15 Jul 1999, Stephen C. Tweedie wrote:
>> > stable tree.
>> 
>> Absolutely.  The trouble is that a correct fix --- the clean way of
>> doing things --- is to back-port the 2.3 changes, which is obviously a
>> non-starter.  
> I wonder if the buffer cache is not the only thing that tries to write
> from kernel space. You might be able to just do
> 	if (get_fs() == KERNEL_DS)
> 		return;
Hmm.  We certainly write in the core dump logic, but I guess observing
strict update_vm_cache semantics isn't really that important when we're
writing to a brand new file from kernel space: you could confuse the
cache, but you'd have to try really hard to do so.
The only other place which springs to mind is sendfile(), and in theory
we allow users to use sendfile() for fast file copy.  That will break
the cache badly if we just rely on the KERNEL_DS test.
--Stephen
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/