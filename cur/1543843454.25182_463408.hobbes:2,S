Date: Thu, 14 Sep 2006 18:19:58 -0400 (EDT)
From: Alan Stern <>
Subject: Re: [linux-usb-devel] 2.6.18-rc6-mm1 (-mm2): ohci resume problem
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/9/14/322

On Thu, 14 Sep 2006, Rafael J. Wysocki wrote:
> > As I see it, there are two ways to resolve the problem.  The easiest is to
> > rip out the autosuspend stuff from ohci-hcd entirely.  When my generic
> > autosuspend patches are accepted, the HCD-specific stuff won't be needed
> > so much.  This has the disadvantage that the root hub will never get
> > suspended if CONFIG_USB_SUSPEND isn't set.  On the other hand, this is how 
> > ehci_hcd works already.
> 
> This isn't a big deal as far as I'm concerned, but I think that dependancy
> will have to be reflected by some Kconfig rules (eg. if CONFIG_USB_SUSPEND
> gets selected automatically if CONFIG_PM is set).
Ultimately the best thing will be for CONFIG_USB_SUSPEND simply to 
disappear.  That's the long-term goal.  It was never intended to be much 
more than a stop-gap setting, for use while the USB suspend/resume 
routines were under development and not entirely reliable.
> > I don't know if this is feasible with OHCI.  For now, I'll include a patch 
> > that takes the first approach and disables the ohci-hcd autosuspend 
> > entirely.  I think it will solve your problem above.
> 
> Yes it does.
> 
> Now I'm able to suspend/resume several times in a row with both
> ohci and ehci hcds loaded all the time.  Thanks a lot!
You're welcome.
I'll wait to hear Dave's comments before submitting this.
Alan Stern
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/