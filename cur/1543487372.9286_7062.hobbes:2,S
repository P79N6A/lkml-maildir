Date: Thu, 25 Feb 1999 10:09:18 -0500 (EST)
From: "Richard B. Johnson" <>
Subject: Re: Changing clock speed
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/2/25/88

On Wed, 24 Feb 1999 ralf@uni-koblenz.de wrote:
> On Mon, Feb 22, 1999 at 07:42:08PM -0500, Richard B. Johnson wrote:
> 
> > The times where there was little skew were times in which the machine
> > was recently rebooted. In this case, the time is always set to NIST
> > as soon as the network is up.
> > 
> > So it's typically off by -14 seconds in a 24 hour period. This is
> > a dual pentium 400 MHz machine with an Intel chip-set.
> 
> Are you syncing your clock just once a day?  Then these result isn't too
> bad as many crystals in real live are as bad as yours or even worse.
> 
>   Ralf
> 
I am syncing once every 24-hour period. However, you can't blame
it on the crystals. An OS that I wrote, which has been in-use for CAT
Scanners for about 4 years, varies +/- 4 seconds per day when the
ambient temperature remains within +/- 10 degC (which is normal for
computers, etc.).
As I see it, the presumed division ratio is not correct so the time
is too slow. A delta time accumulates. This is an old problem that
goes back to DOS clocks and the bus-clock which had to also produce
a 3.579745 MHz color carrier. Under DOS, the timer channel 0 clock is
divided by 65536 so we had 18.206050737 * 65536 = 1,193,181.667 Hz.
                           ^^^^^^^ DOS ticks/second
1,193,181.667 Hz * 3 = 3,579,545 Hz
^^^^^^ Chan 0 clock      ^^^^^^ Color subcarrier
Once CGA went away, nobody needed a color cubcarrier. Therefore the
DOS clock ticks went to 18.210 (which makes things come out more
even for DOS...
	18.210 * 65536 = 1,193,410.560 (timer-channel 0 clock).
If the division ratio was calculated based upon 1,193.410.560 Hz
timer-channel 0 clock, the time would be correct +/- some variation
around the mean.
Cheers,
Dick Johnson
                 ***** FILE SYSTEM WAS MODIFIED *****
Penguin : Linux version 2.2.1 on an i686 machine (400.59 BogoMips).
Warning : It's hard to remain at the trailing edge of technology.
Wisdom  : It's not a Y2K problem. It's a Y2Day problem.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/