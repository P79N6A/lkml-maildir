Date: Thu, 11 Feb 1999 22:36:35 +0000 (GMT)
From: Riley Williams <>
Subject: Re: 2.2.1 Makefile patch
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/2/11/78

Hi there...
 > A while back, somebody complained about having problems with their
 > kernel that required them to do "make mrproper" to clean it up, and
 > that they lost their configuration doing that, which made them less
 > than happy...
 > 
 > The enclosed patch adds an extra option to the root makefile which
 > basically does the "make mrproper" without deleting the current
 > configuration. This option is "make proper".
 > 
 > I can report that it works on my system, and on that of a friend of
 > mine, and I can't see anything to prevent it working on every system,
 > but comments will be much appreciated.
 > 
 > Best wishes from Riley.
 > 
 > ***********************************************************************
 > 
 > --- linux-2.2.1/Makefile.old	Tue Jan 26 01:46:35 1999
 > +++ linux-2.2.1/Makefile	Thu Feb 11 18:11:08 1999
 > @@ -364,7 +364,7 @@
 >  	fi
 >  	rm -f submenu*
 > 
 > -mrproper: clean archmrproper
 > +proper: clean archmrproper
 >  	rm -f include/linux/autoconf.h include/linux/version.h
 >  	rm -f drivers/net/hamradio/soundmodem/sm_tbl_{afsk1200,afsk2666,fsk9600}.h
 >  	rm -f drivers/net/hamradio/soundmodem/sm_tbl_{hapn4800,psk4800}.h
 > @@ -372,7 +372,6 @@
 >  	rm -f drivers/net/hamradio/soundmodem/gentbl
 >  	rm -f drivers/char/hfmodem/gentbl drivers/char/hfmodem/tables.h
 >  	rm -f drivers/sound/*_boot.h drivers/sound/.*.boot
 > -	rm -f .version .config* config.in config.old
 >  	rm -f scripts/tkparse scripts/kconfig.tk scripts/kconfig.tmp
 >  	rm -f scripts/lxdialog/*.o scripts/lxdialog/lxdialog
 >  	rm -f .menuconfig.log
 > @@ -384,6 +383,10 @@
 >  	rm -f $(TOPDIR)/include/linux/modversions.h
 >  	rm -rf $(TOPDIR)/include/linux/modules
 >  	rm -rf modules
 > +
 > +mrproper: proper
 > +	rm -f .version .config* config.in config.old
 > +	make oldconfig
Ooooooooppppssss........
Where did that line sneak in? Trash that "make oldconfig", it
shouldnae be there - sorry...
 >  
 >  distclean: mrproper
 >  	rm -f core `find . \( -name '*.orig' -o -name '*.rej' -o -name '*~' \
 > 
 > 
 > -
 > To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
 > the body of a message to majordomo@vger.rutgers.edu
 > Please read the FAQ at 
http://www.tux.org/lkml/
 > 
Best wishes from Riley.
---
 * 
ftp://ftp.MemAlpha.cx/pub/rhw/Linux
 * 
http://www.MemAlpha.cx/~rhw/kernel.versions.html
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/