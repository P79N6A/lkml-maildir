Date: Tue, 26 Oct 2004 17:54:36 +0200
From: Ludovic Drolez <>
Subject: Re: 2.6.9 bug: linux logo not displayed in vga16fb (bug found)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/10/26/149

Ludovic Drolez wrote:
> Hi !
> 
> I used to have a nice vga boot logo with my 2.6.7 kernel, but with the 
> 2.6.9, my
> boot logo has disappeared (same .config)...
> It seems to switch to VGA, and some space is reserved for the logo, but 
> it is not displayed.
> The logo appears with vesafb.
I made a few diffs between my old working 2.6.7 kernel and the 2.6.9 and found 
something interesting in fbmem.c:
---------------
@@ -723,7 +419,7 @@
         if (fb_logo.logo == NULL || info->state != FBINFO_STATE_RUNNING)
                 return 0;
-       image.depth = fb_logo.depth;
+       image.depth = 8;
         image.data = fb_logo.logo->data;
         if (fb_logo.needs_cmapreset)
---------------
So, on my 2.6.9, I replaced the '8' by 'fb_logo.depth' and now the logo is 
shown! (but the screen is still not cleared as before when the kernel boots).
Where's the QA guy ? I want to see him now ! ;-)
Cheers,
-- 
Ludovic DROLEZ                              Linbox / Free&ALter Soft
152 rue de Grigy - Technopole Metz 2000                   57070 METZ
tel : 03 87 50 87 90                            fax : 03 87 75 19 26
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/