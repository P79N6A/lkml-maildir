Date: Wed, 26 Mar 2003 12:27:29 +0100 (MET)
From:  Andries.Brouwer@cwi ...
Subject: struct dm_ioctl
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/3/26/54

The main users of dev_t in the userspace-kernel interface
are mknod and stat. But there is a small collection of
more obscure interfaces that use a dev_t parameter
(like the ustat system call) or a dev_t field in a
parameter struct (for example, struct loopinfo,
struct nfsctl_export, struct dm_ioctl).
It is almost always a mistake to have an interface
with a dev_t field, since nobody knows the size of
a dev_t field. The kernel size differs from the user
space size, the libc5 size differs from the glibc size.
A struct with such a field therefore has unknown size,
the fields following the dev_t field have unknown offset,
and lots of troubles arise.
Such interfaces are broken from the start.
But there are a few and we must deal with them one by one.
One is struct dm_ioctl. Google tells me that it was
noticed already that it defined a broken interface,
and Kevin Corry submitted a patch against 2.5.51.
Today this has not been applied yet.
What is the status? Should I resubmit that patch?
[http://marc.theaimsgroup.com/?l=linux-kernel&m=103956089203199&w=3]
Andries
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/