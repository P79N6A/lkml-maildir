Date: Tue, 16 Dec 2008 13:31:31 +0100
From: Hannes Eder <>
Subject: [PATCH] HID: avoid sparse warning in HID_COMPAT_LOAD_DRIVER
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/12/16/135

Impact: include a prototype for the exported function in the macro
Fix about 20 of this warnings:
  drivers/hid/hid-a4tech.c:162:1: warning: symbol 'hid_compat_a4tech' was not declared. Should it be static?
Signed-off-by: Hannes Eder <hannes@hanneseder.net>
---
 include/linux/hid.h |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)
diff --git a/include/linux/hid.h b/include/linux/hid.h
index 215035b..81aa84d 100644
--- a/include/linux/hid.h
+++ b/include/linux/hid.h
@@ -793,6 +793,8 @@ dbg_hid(const char *fmt, ...)
 
 #ifdef CONFIG_HID_COMPAT
 #define HID_COMPAT_LOAD_DRIVER(name)	\
+/* prototype to avoid sparse warning */	\
+extern void hid_compat_##name(void);	\
 void hid_compat_##name(void) { }	\
 EXPORT_SYMBOL(hid_compat_##name)
 #else
-- 
1.5.6.3