Date: Fri, 8 Feb 2008 13:37:11 +0200
From: "Pekka Enberg" <>
Subject: Re: [PATCH 1/2] kmemcheck v3
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/2/8/113

Hi Andi,
On Feb 8, 2008 1:55 PM, Andi Kleen <andi@firstfloor.org> wrote:
> Also i'm not sure how you handle initializedness of DMAed data
> (like network buffers). Wouldn't you need hooks into pci_dma_*
> for this?
If the DMA'd memory is allocated from the page allocator, we don't
need to worry about it just yet. In case it's from kmalloc() you can
pass __GFP_NOTRACK to annotate those call sites where the memory is
filled by DMA (memory that is read needs to be initialized by the
caller obviously). There was some discussion with Ingo of a
__GFP_DMAFILL annotation to tag those call sites instead of
__GFP_NOTRACK which would work the same way.