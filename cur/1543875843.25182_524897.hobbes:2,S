Date: Wed, 28 Mar 2007 17:30:18 -0400
From: Kyle McMartin <>
Subject: Re: HPA patches
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/3/28/262

On Wed, Mar 28, 2007 at 10:54:31PM +0100, Alan Cox wrote:
> > Hm. I tried adding it in the eh code after ata_set_mode() in 
> > ata_eh_recover(), which alters the problem slightly - hpa_sectors is 
> > still 0, so the taskfile call is still failing, but now the system just 
> > stops at around the time that anything attempts to access sda with no 
> > errors other than
> 
> I wonder if the firmware is dying when we ask the disk to go zero sized
> rather than erroring politely. I'm not sure hth HPA sectors can come back
> as zero but we can be fairly sure 0 means "no HPA" in this case I guess ?
> 
The command is "Read Native Max Sectors" which should be the full disk
size as long as the command is supported, and the size returned by IDENTIFY
would be smaller if HPA was in use.
AIUI at least.
Cheers,
	Kyle
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/