Date: Thu, 27 Jul 2000 17:38:47 +0200
From: Guido Bartsch <>
Subject: Re: Re: [BUG] PCMCIA CardBus problems
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/7/27/59

Hello,
we have difficulties getting this CardBus card to work with the
2.4.0test5-pre3 driver "Linux Tulip driver version 0.9.8 
(July 13, 2000)" (from tulip_core.c)
According to /proc/pci, it has a DECchip 21142/43 (rev. 41) on board,
and a "Abcom Systems Inc: Unknown device ab01" as a subsystem.
The tulip driver successfully recognizes the card when inserted. 
The output from dmesg shows:
cs: cb_alloc(bus 2): vendor 0x1011, device 0x0019
PCI: Enabling device 02:00.0 (0000 -> 0003)
Linux Tulip driver version 0.9.8 (July 13, 2000)
PCI: Setting latency timer of device 02:00.0 to 64
eth0: Digital DS21143 Tulip rev 65 at 0x1000, 00:E0:98:23:00:5C, IRQ 13.
eth0:  EEPROM default media type Autosense.
eth0:  Index #0 - Media MII (#11) described by a 21142 MII PHY (3)
block.
eth0:  MII transceiver #0 config 3000 status 7809 advertising 01e1.
eth0: Setting full-duplex based on MII#0 link partner capability of
41e1.
mii-diag shows:
Using the default interface 'eth0'.
Basic registers of MII PHY #0:  3000 782d 0040 6212 01e1 41e1 0003 0000.
 Basic mode control register 0x3000: Auto-negotiation enabled.
 You have link beat, and everything is working OK.
 Your link partner advertised 41e1: 100baseTx-FD 100baseTx 10baseT-FD
10baseT.
tulip-diag shows:
tulip-diag.c:v2.00 4/19/2000 Donald Becker (becker@scyld.com)
 
http://www.scyld.com/diag/index.html
Index #1: Found a Digital DS21143 Tulip adapter at 0x1000.
 Port selection is MII, full-duplex.
 Transmit started, Receive started, full-duplex.
  The Rx process state is 'Waiting for packets'.
  The Tx process state is 'Idle'.
  The transmit threshold is 128.
 Interrupt sources are pending!  CSR5 is f0678046.
   Tx complete indication.
   Tx out of buffers indication.
   Rx Done indication.
  The NWay status register is 000000c6.
  Internal autonegotiation state is 'Autonegotiation disabled'.
After trying a ping (which doesn't work - no response, and ethereal on
the destination host doesnt show any decodable packets) tulip-diag
shows:
tulip-diag.c:v2.00 4/19/2000 Donald Becker (becker@scyld.com)
 
http://www.scyld.com/diag/index.html
Index #1: Found a Digital DS21143 Tulip adapter at 0x1000.
 Port selection is MII, full-duplex.
 Transmit started, Receive started, full-duplex.
  The Rx process state is 'Suspended -- no Rx buffers'.
  The Tx process state is 'Idle'.
  The transmit threshold is 128.
 Interrupt sources are pending!  CSR5 is f06980c7.
   Tx done indication.
   Tx complete indication.
   Tx out of buffers indication.
   Rx Done indication.
   Receiver out of buffers indication.
  The NWay status register is 000000c6.
  Internal autonegotiation state is 'Autonegotiation disabled'.
The card doesn't seem to generate any interrupts: /proc/interrupts
shows:
           CPU0
  0:     229621          XT-PIC  timer
  1:       5594          XT-PIC  keyboard
  2:          0          XT-PIC  cascade
  3:      11350          XT-PIC  serial
  5:          0          XT-PIC  es1371
 12:       2280          XT-PIC  PS/2 Mouse
 13:          1          XT-PIC  fpu, Texas Instruments PCI1225, Texas
Instruments PCI1225 (#2), eth0
 14:       2834          XT-PIC  ide0
NMI:          0
ERR:          0
Perhaps interrupt sharing doesn't work? 
I would appreciate any suggestions.
Thanks!
G. Bartsch
PS: This mail was already send to Donald Becker.
    He told us that the kernel itself makes the problems ...
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/