Date: Wed, 25 Jan 2006 13:19:26 +0100
From: Jan Kara <>
Subject: Re: [Patch] quota: fix error code for ext2_new_inode()
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/1/25/88

  Hi,
> the quota check in ext2_new_inode() returns ENOSPC where
> IMHO it should return EDQUOT instead. here is a trivial
> patch to fix that ...
> 
> rationale: ext3, reiser, udf and ufs do similar checks
> and already return EDQUOT
  Of course, you're right! Andrew please commit this one too.
						Honza
> Signed-off-by: Herbert PÃ¶tzl <herbert@13thfloor.at>
  Acked-by: Jan Kara <jack@suse.cz>
> --- ./fs/ext2/ialloc.c.orig	2006-01-03 17:29:56 +0100
> +++ ./fs/ext2/ialloc.c	2006-01-25 07:26:42 +0100
> @@ -605,7 +605,7 @@ got:
>  	insert_inode_hash(inode);
> 
>  	if (DQUOT_ALLOC_INODE(inode)) {
> -		err = -ENOSPC;
> +		err = -EDQUOT;
>  		goto fail_drop;
>  	}
> 
> 
-- 
Jan Kara <jack@suse.cz>
SuSE CR Labs
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/