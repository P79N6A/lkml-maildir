Date: Fri, 17 Mar 2000 10:56:28 +0000 (GMT)
From: James Sutherland <>
Subject: Re: module ppa zip driver vfat vs fat
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/3/17/136

On Thu, 16 Mar 2000, Joe wrote:
> Tim Waugh wrote:
> 
> > On Thu, 16 Mar 2000, Joe wrote:
> >
> > > Does file work on scsi devices like /dev/sda4?
> >
> > Yes, but it'll just say 'block special device'.  dd a couple of kilobytes
> > from sda4 to a tempfile and run dd on that -- dd can recognise some
> > filesystems.
> 
> did that..
> it turn out that the filesystem is:
> 
> x86 boot sector, system MSDOS5.0, FAT (16 bit)
> 
> what I still dont get is why I had to dd if=/dev/sda of=./tempf   rather
> than dd if=/dev/sda4 of=./tempf
> 
> and now I am able to mount it and run fdisk on it as /dev/sda  but my other
> zip disks are /dev/sda4
> 
> normal zips disks
> 
> mount /dev/sda4 /zip
> 
> this zip
> 
> mount /dev/sda /zip
> 
> any clues on this?
This all sounds horribly familiar :-)
Normally, Zip disks appear to be formatted as partitioned hard drives,
with all the data being in /dev/sda4. Some drives, however, "hide" the
first 32 sectors (including the partition table), making the real
/dev/sda4 appear to be the entire disk - /dev/sda.
You appear to have a disk which has been formatted without a partition
table - so it will work on your machine, but not on others which "hide"
the partitioning.
Was it formatted on another Linux machine, BTW? If the user had just
formatted /dev/sda, that would explain this, I think.
Fortunately, in the long term, we'll be able to work around this by making
Zip drives reveal all the contents to us, so disks should always show up
as /dev/sda4 on any machine. (Raw formatted ones like yours would show up
as /dev/sda instead, but still be readable on all machines.)
If it works, you should run fdisk on /dev/sda, then repartition it
correctly; this will "correct" it and make the contents appear as
/dev/sda4 like your other disks, and make it readable on other machines
too. Do remember this will wipe the disk's current contents, though :)
James.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/