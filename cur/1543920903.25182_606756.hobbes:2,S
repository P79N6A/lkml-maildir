Date: Thu, 18 Oct 2007 14:57:22 +0800
From: "Huang, Ying" <>
Subject: Re: [PATCH -mm -v5 0/3] i386/x86_64 boot: 32-bit boot protocol
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/10/18/56

On Wed, 2007-10-17 at 03:38 -0600, Eric W. Biederman wrote:
> Well there actually is no reason to copy the current data into the
> zero page.  We really should just leave it where it is until the
> kernel has managed to bootstrap it's basic services.
I think it is safer to copy boot parameters to kernel BSS segment.
Because the kernel bootstrap process may overwrite the original memory
area of boot parameters.
> As for the setup data can we please remove the pointers. And just
> require the that the data items be appended one after each other
> in memory.  Then we would just need a field where we could
> report an offset to the binary data from where we loaded the
> 16bit code/data.  We could even specify the end by requiring
> that we fill in setup_move_size or something of that nature.
In this solution, we should also avoid conflict between the boot data
and kernel early bootstrap process. I think copy these boot data to some
place safe may be better. Such as memory area after _end.
> Beyond that we should provide the bootloaders enough information to
> know which information the kernel will overwrite before it consults
> the e820 map and other indicators of what memory is free.
There are several memory areas used by kernel bootstrap before e820 map
is consulted. You can refer to bad_addr for details. So I think it may
be not a stable/simple prototype to provide this information to
bootloader.
Best Regards,
Huang Ying
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/