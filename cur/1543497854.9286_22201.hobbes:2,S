Date: Sat, 5 Jun 1999 22:08:15 +0200
From: "Manfred Spraul" <>
Subject: more info to bug report, Kernel (2.2.9) crash after trying tomount a swap-device.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/6/5/64

I think you ran into the same problem I had a few weeks ago:
I typed
    #swapon /dev/hda1
instead of
    #swapon /dev/hda3
and the computer hung.
The problem:
the kernel prevents you from mounting a filesystem twice, and
it prevents you from mouting a swap partition twice,
but if you call sys_swapon() on a filesystem, the this crashes:
(try "swapon /dev/<root>", [fsck...])
- sys_swapon() must set the block size, otherwise it
can't check the superblock
- settings the blocksize prevents the filesystem from
accessing the device
--> crash.
I've written and posted a patch, but I received no replies.
I've attached the patch, but I tested it only with 2.2.6.
--
    Manfred
[unhandled content-type:application/octet-stream]