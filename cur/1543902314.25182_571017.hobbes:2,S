Date: Wed, 18 Jul 2007 16:35:17 +0800
From: WANG Cong <>
Subject: [Patch] fs/romfs/inode.c: trivial improvements
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/7/18/78

1. There's no lists in fs/romfs/inode.c, so using list_entry is
a bit confusing. Replace it with container_of.
2. It is unnecessary to cast the return value of kmem_cache_alloc,
since it returns a void* pointer.
This patch is against 2.6.22.1.
Signed-off-by: WANG Cong <xiyou.wangcong@gmail.com>
---
 fs/romfs/inode.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)
Index: linux-2.6.22.1/fs/romfs/inode.c
===================================================================
--- linux-2.6.22.1.orig/fs/romfs/inode.c	2007-07-12 00:47:28.000000000 +0800
+++ linux-2.6.22.1/fs/romfs/inode.c	2007-07-18 16:08:56.000000000 +0800
@@ -92,7 +92,7 @@
 
 static inline struct romfs_inode_info *ROMFS_I(struct inode *inode)
 {
-	return list_entry(inode, struct romfs_inode_info, vfs_inode);
+	return container_of(inode, struct romfs_inode_info, vfs_inode);
 }
 
 static __u32
@@ -555,7 +555,7 @@
 static struct inode *romfs_alloc_inode(struct super_block *sb)
 {
 	struct romfs_inode_info *ei;
-	ei = (struct romfs_inode_info *)kmem_cache_alloc(romfs_inode_cachep, GFP_KERNEL);
+	ei = kmem_cache_alloc(romfs_inode_cachep, GFP_KERNEL);
 	if (!ei)
 		return NULL;
 	return &ei->vfs_inode;
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/