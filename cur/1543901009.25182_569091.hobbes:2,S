Date: Fri, 13 Jul 2007 16:09:24 -0700 (PDT)
From: Linus Torvalds <>
Subject: Re: RE : Re: x86 setup code rewrite in C - revised
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/7/13/453

On Fri, 13 Jul 2007, Etienne Lorrain wrote:
>
> > >>  Also, I do not know if "m" is right in here:
> > >> static inline u8 rdfs8(addr_t addr)
> > >> {
> > >> 	u8 v;
> > >> 	asm("movb %%fs:%1,%0" : "=r" (v) : "m" (*(u8 *)addr));
> > >> 	return v;
> > >> }
> > 
> > The "m" is correct right there.
> 
>  strange, "g" would mean anything can go there - and this assembly instruction
> should accept every access modes.
No it damn well should NOT.
the %fs: override works only with memory ops. End of story.
		Linus
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/