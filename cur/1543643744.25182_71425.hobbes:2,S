Date: 17 Sep 2002 00:12:51 +0200
From: Alexander Hoogerhuis <>
Subject: Re: Linux 2.4.20-pre5-ac4
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/9/17/155

Alan Cox <alan@redhat.com> writes:
> > Which non-free modues (NVidia?) were loaded on your computer? Is the
> > problem reproducible without any non-free module loaded _ever_ since the
> > last reboot?
> 
> I've seen this trace without nvidia etc loaded too. Right now the problem
> I have is that I can't duplicate it. If my box would jut blow up the same
> way all would be well 8)
> 
> What compilers are being used by the folks who see the problem ?
Back on the same track again, I've managed to get a oops dump from the
DVD related oops I was having:
Sep 17 00:03:33 lapper kernel: kernel BUG at /home/alexh/src/linux/linux-2.4-ac-new/include/linux/blkdev.h:153!
Sep 17 00:03:33 lapper kernel: invalid operand: 0000
Sep 17 00:03:33 lapper kernel: CPU:    0
Sep 17 00:03:33 lapper kernel: EIP:    0010:[<c01f83e8>]    Tainted: PF
Using defaults from ksymoops -t elf32-i386 -a i386
Sep 17 00:03:33 lapper kernel: EFLAGS: 00010206
Sep 17 00:03:33 lapper kernel: eax: 00000059   ebx: 00000000   ecx: eda6ea80   edx: 00000001
Sep 17 00:03:33 lapper kernel: esi: c0331824   edi: 00000000   ebp: eda6ea80   esp: e769bb58
Sep 17 00:03:33 lapper kernel: ds: 0018   es: 0018   ss: 0018
Sep 17 00:03:33 lapper kernel: Process mount (pid: 2217, stackpage=e769b000)
Sep 17 00:03:33 lapper kernel: Stack: e769bb58 e769bb58 c01ecf73 e7fba780 00000000 efdb8000 efdbb000 c0331824
Sep 17 00:03:33 lapper kernel:        00000000 eda6ea80 c01f873c c0331774 eda6ea80 c0331824 00000000 c0331774
Sep 17 00:03:33 lapper kernel:        c0331774 c0331824 eda6ea80 eda6ea80 c01f8cc7 c0331824 eda6ea80 e9b9b33a
Sep 17 00:03:33 lapper kernel: Call Trace:    [<c01ecf73>] [<c01f873c>] [<c01f8cc7>] [<f0932c81>] [<c01ec6e1>]
Sep 17 00:03:33 lapper kernel:   [<c01ec879>] [<c01ed050>] [<c01ecf73>] [<f0933727>] [<f091686a>] [<f091dde0>]
Sep 17 00:03:33 lapper kernel:   [<f091db10>] [<f091fa56>] [<f4d57620>] [<c01cba06>] [<c012387a>] [<c0145ccc>]
Sep 17 00:03:33 lapper kernel:   [<c01471dc>] [<f4d6bc01>] [<f4d66dfb>] [<f4d6dfdd>] [<c011e3b8>] [<f4d689b0>]
Sep 17 00:03:33 lapper kernel:   [<f4d693b2>] [<f4d6e19b>] [<f091a3e1>] [<f4d53100>] [<c01fffff>] [<c014bf78>]
Sep 17 00:03:33 lapper kernel:   [<c014ab0d>] [<f4d70c60>] [<c014aed1>] [<f4d70c60>] [<c015fe23>] [<c0160150>]
Sep 17 00:03:33 lapper kernel:   [<c015ff99>] [<c016053f>] [<c01091a7>]
Sep 17 00:03:33 lapper kernel: Code: 0f 0b 99 00 a0 5a 2b c0 ba ff ff ff ff 31 c0 85 d2 8b 74 24
>>EIP; c01f83e8 <ide_build_sglist+48/1d0>   <=====
>>ecx; eda6ea80 <_end+2d736dc4/305233a4>
>>esi; c0331824 <ide_hwifs+524/2c88>
>>ebp; eda6ea80 <_end+2d736dc4/305233a4>
>>esp; e769bb58 <_end+27363e9c/305233a4>
Trace; c01ecf73 <ide_init_drive_cmd+23/40>
Trace; c01f873c <ide_build_dmatable+4c/1a0>
Trace; c01f8cc7 <__ide_dma_read+37/140>
Trace; f0932c81 <[ide-scsi]idescsi_issue_pc+201/210>
Trace; c01ec6e1 <start_request+1b1/230>
Trace; c01ec879 <ide_do_request+c9/1c0>
Trace; c01ed050 <ide_do_drive_cmd+c0/120>
Trace; c01ecf73 <ide_init_drive_cmd+23/40>
Trace; f0933727 <[ide-scsi]idescsi_queue+1b7/2e0>
Trace; f091686a <[scsi_mod]scsi_dispatch_cmd+25a/420>
Trace; f091dde0 <[scsi_mod]scsi_old_done+0/670>
Trace; f091db10 <[scsi_mod]scsi_old_times_out+0/160>
Trace; f091fa56 <[scsi_mod]scsi_request_fn+1c6/3b0>
Trace; f4d57620 <[sr_mod]sr_template+0/0>
Trace; c01cba06 <generic_unplug_device+56/60>
Trace; c012387a <__run_task_queue+6a/80>
Trace; c0145ccc <__wait_on_buffer+9c/a0>
Trace; c01471dc <bread+8c/a0>
Trace; f4d6bc01 <[udf]udf_tread+41/60>
Trace; f4d66dfb <[udf]udf_vrs+db/3c0>
Trace; f4d6dfdd <[udf].rodata.end+456/4fe>
Trace; c011e3b8 <printk+118/180>
Trace; f4d689b0 <[udf]udf_check_valid+60/c0>
Trace; f4d693b2 <[udf]udf_read_super+1c2/760>
Trace; f4d6e19b <[udf].LC6+116/2a1b>
Trace; f091a3e1 <[scsi_mod]scsi_ioctl+101/3e0>
Trace; f4d53100 <[sr_mod]sr_release+a0/c0>
Trace; c01fffff <cdrom_switch_blocksize+4f/b0>
Trace; c014bf78 <check_disk_change+48/90>
Trace; c014ab0d <get_sb_bdev+18d/280>
Trace; f4d70c60 <[udf]udf_fstype+0/20>
Trace; c014aed1 <do_kern_mount+121/140>
Trace; f4d70c60 <[udf]udf_fstype+0/20>
Trace; c015fe23 <do_add_mount+93/190>
Trace; c0160150 <do_mount+160/1b0>
Trace; c015ff99 <copy_mount_options+79/d0>
Trace; c016053f <sys_mount+cf/140>
Trace; c01091a7 <system_call+33/38>
Code;  c01f83e8 <ide_build_sglist+48/1d0>
00000000 <_EIP>:
Code;  c01f83e8 <ide_build_sglist+48/1d0>   <=====
   0:   0f 0b                     ud2a      <=====
Code;  c01f83ea <ide_build_sglist+4a/1d0>
   2:   99                        cltd
   Code;  c01f83eb <ide_build_sglist+4b/1d0>
   3:   00 a0 5a 2b c0 ba         add    %ah,0xbac02b5a(%eax)
Code;  c01f83f1 <ide_build_sglist+51/1d0>
   9:   ff                        (bad)
  Code;  c01f83f2 <ide_build_sglist+52/1d0>
   a:   ff                        (bad)
  Code;  c01f83f3 <ide_build_sglist+53/1d0>
   b:   ff                        (bad)
  Code;  c01f83f4 <ide_build_sglist+54/1d0>
   c:   ff 31                     pushl  (%ecx)
Code;  c01f83f6 <ide_build_sglist+56/1d0>
   e:   c0 85 d2 8b 74 24 00      rolb   $0x0,0x24748bd2(%ebp)
I'll try and see if I can get the same dump out of an untainted kernel
(non-vmware) and also while not using preempt. The same crash DOES
happen on same version less vmware and preempt as well.
Usually it would crash if I had a DVD in while logging into gnome2
(rawhide, everything up to date), but if I mount it manually after
logging in I can now catch the oops from dmesg/syslog.
More info:
[unhandled content-type:application/octet-stream][unhandled content-type:application/octet-stream][unhandled content-type:application/octet-stream]
mvh,
A
-- 
Alexander Hoogerhuis                               | alexh@ihatent.com
CCNP - CCDP - MCNE - CCSE                          | +47 908 21 485
"You have zero privacy anyway. Get over it."  --Scott McNealy