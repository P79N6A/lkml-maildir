Date: Sat, 24 Jan 2004 13:32:34 -0500
From:  Valdis.Kletnieks@vt ...
Subject: Re: [PATCH] arch/i386/Makefile,scripts/gcc-version.sh,Makefile small fixes
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/1/24/94

On Sat, 24 Jan 2004 10:17:04 PST, Andrew Morton said:
> > Makefile: 
> > *  There is no point in adding -funit-at-a-time option because it is
> >    enabled by default at levels -Os, -O2 and -O3.
> 
> hm.  Didn't Andi say that adding -fno-unit-at-a-time caused code shrinkage?
Also, at least for the Fedora gcc-ssa compiler, -funit-at-a-time is *not* a
default option (provably so - building with gcc-ssa makes a kernel that hangs
*very* early on (right after 'decompressing the kernel' - I haven't dug into
this yet) - but commenting out this:
# Enable unit-at-a-time mode when possible. It shrinks the
# kernel considerably.
CFLAGS += $(call check_gcc,-funit-at-a-time,)
results in a working kernel.  This is with:
%  gcc-ssa --version
gcc-ssa (GCC) 3.5-tree-ssa 20040115 (Fedora Core Rawhide 3.5ssa-108)
[unhandled content-type:application/pgp-signature]