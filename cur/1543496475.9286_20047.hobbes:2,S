Date: Fri, 21 May 1999 08:55:45 -0400
From: Peter Rival <>
Subject: Re: Adding more than 8 swap partitions
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/5/23/6

Yes, we could just do that.  However, we're trying to get some
comparative benchmarks between Linux and Tru64 on an _identical_
system.  In this world, that means changing as absolutely as little as
possible.  The only big difference we _should_ be seeing is the use of
ext2 versus UFS/AdvFS as that is exactly what we are testing.  If time
permits, we'll also stick in things like reiserfs and other filesystems
anyone thinks a) are stable and b) will benchmark well.
If I changed the swap areas to be an md device (really just forcing what
already happens), that would be just another area of change, and some
other variable.  I need to be able to keep everything but the
filesystems on the disks the same.  We even re-format the drives before
each run under each OS, just so they're absolutely clean.
So...the requirement is that I can cleanly mount 40 scratch filesystems
(plus /, /usr, and /var) and add 40 swap areas plus the default area.
I'm sure this is a bit more "big iron" than what we normally do with
Linux, but the goal is to see just how far we can strech the kernel and
filesystems.  Just because this seems like a strange way to do things
doesn't mean we shouldn't be able to support this.  Can this be done?
(Okay, I know it can be done - I just want to know what to do, or a
patch if one is necessary.)  I'll work on sharing the results if and
when we get them.
 - Pete
Chris Wedgwood wrote:
> > I just wanted to make sure that I can add more than 8 swap
> > partitions under 2.2.8 by only changing the MAX_SWAPFILES #define
> > in include/linux/swap.h.  I have a configuration here that would
> > benefit greatly from being able to use all 18 swap partitions it
> > has available. Let's just say that I'm doing some high-end
> > benchmarking before you say that I should just grow my swap
> > partitions.  What is the maximum limit? I only see this used for
> > allocating an array, so I think it's doable, but I don't really
> > want to find out the hard way and having to fsck 30 or so disks...
> > Thanks!
>
> With sct's changed to allow >128MB of swap, why would you need this?
> You could just put a single swap on an md device surely?
>
> -cw
begin:vcard 
n:Rival;Peter
x-mozilla-html:FALSE
org:Compaq Computer Corp.;Release Engineering Systems
adr:;;;;;;
version:2.1
email;internet:frival@zk3.dec.com
title:Engineer II
x-mozilla-cpt:;0
fn:Peter Rival
end:vcard