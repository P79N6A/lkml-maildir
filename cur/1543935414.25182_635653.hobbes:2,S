Date: Tue, 8 Jan 2008 16:06:45 +0000
From: Pavel Machek <>
Subject: Re: sleep before boot panic
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/8/194

Hi!
> >>>I just switched to libata (pata) on my laptop and the 
> >>>immediate panic made it impossible to figure out why 
> >>>my boot partition wasn't available.
> >>>After applying this little patch I could check boot 
> >>>printk output and then saw everything was properly 
> >>>recognized and only scsi-disk support was missing.
> >>The correct fix would be to make scroll back (and 
> >>sysrq) still work
> >>after panic.  It's a little more complicated, but 
> >>possible (essentially
> >>it needs a polled keyboard handler)
> >
> >Customer: "This system could not find the root fs."
> >Support: "Oh, yeah, just connect a (USB-) keyboard and 
> >scroll back."
> >
> >Hmm, device detection works after panic?
> >
> >I really like the "soft" panic better, where you still 
> >can operate the kernel debugging features, but just 
> >have no user space supporting it.
ACK. 'scheduling in interrupt' is very different from 'cant mount
root'.
> Of course, if we'd been using kinit, "soft panic" would 
> have been done exclusively in userspace...
What's the status of kinit, btw?
							Pavel
-- 
(english) 
http://www.livejournal.com/~pavelmachek
(cesky, pictures) 
http://atrey.karlin.mff.cuni.cz/~pavel/picture/horses/blog.html