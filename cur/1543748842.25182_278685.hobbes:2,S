Date: Mon, 13 Dec 2004 22:47:32 +0100
From: Bartlomiej Zolnierkiewicz <>
Subject: Re: [2.6.10-rc2+] ide1=ata66 -- OBSOLETE OPTION, WILL BE REMOVED SOON!
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/12/13/209

On Sun, 05 Dec 2004 20:23:13 +0100, Rene Herman
<rene.herman@keyaccess.nl> wrote:
> Hi Bart.
Hi,
> I see your 2004-11-01 IDE update:
> 
> 
http://lkml.org/lkml/2004/11/1/158
> 
> obsoleted the idex=ata66 option, saying that it "should be handled by
> host drivers needing it". As far as I can see, amd74xx does not handle this?
> 
> I do need a way to force an 80c cable on this AMD756 (ATA66 max) board,
> since the BIOS doesn't seem to be setting the cable bits correctly.
Ugh, I checked AMD datasheets and AMD756 doesn't support host
side cable detection.  Well, we can try doing disk side only for it.
[ ATi and ITE (in -ac kernels) drivers are also doing this. ]
--- amd74xx.c.orig	2004-11-02 14:17:14.000000000 +0100
+++ amd74xx.c	2004-12-13 22:41:50.406229168 +0100
@@ -344,10 +344,8 @@
 			break;
 
 		case AMD_UDMA_66:
-			pci_read_config_dword(dev, AMD_UDMA_TIMING, &u);
-			for (i = 24; i >= 0; i -= 8)
-				if ((u >> i) & 4)
-					amd_80w |= (1 << (1 - (i >> 4)));
+			/* no host side cable detection */
+			amd_80w = 0x03;
 			break;
 	}
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/