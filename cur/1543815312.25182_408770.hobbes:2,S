Date: Tue, 21 Mar 2006 11:44:22 +1100
From: 	kernel@kolivas ...
Subject: Re: [PATCH][3/3] mm: swsusp post resume aggressive swap prefetch
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/3/20/554

Quoting "Rafael J. Wysocki" <rjw@sisk.pl>:
> Sorry, I was wrong.  After resume the image pages in the swap are visible as
> free, because we allocate them after we have created the image (ie. the
> image
> contains the system state in which these pages are free).
> 
> Well, this means I really don't know what happens and what causes the
> slowdown.  It certainly is related to the aggressive prefetch hook in
> swsusp_suspend().  [It seems to search the whole swap, but it doesn't
> actually prefetch anything.  Strange.]
Are you looking at swap still in use? Swap prefetch keeps a copy of prefetched
pages on backing store as well as in ram so the swap space will not be freed on
prefetching. 
> > If so, is there a way to differentiate the two so we only aggressively
> > prefetch on kernel resume - is that what you meant by doing it in the
> > other file? 
> 
> Basically, yes.  swsusp.c and snapshot.c contain common functions,
> disk.c and swap.c contain the code used by the built-in swsusp only,
> and user.c contains the userland interface.  If you want something to
> be run by the built-in swsusp only, place it in disk.c.
> 
> Still in this particular case it won't matter, I'm afraid.
I don't understand what you mean by it won't matter?
Cheers,
Con
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/