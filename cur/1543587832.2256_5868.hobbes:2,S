Date: Tue, 17 Apr 2001 15:00:05 +0100 (BST)
From: Hugh Dickins <>
Subject: [PATCH] emu10k1/audio un reserve
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/4/17/98

The code for mem_map_reserving has been copied a little too
faithfully to the places where it wants to mem_map_unreserve.
Hugh
--- 2.4.3-ac7/drivers/sound/emu10k1/audio.c	Tue Apr 17 14:43:09 2001
+++ linux/drivers/sound/emu10k1/audio.c	Tue Apr 17 14:46:20 2001
@@ -272,7 +272,7 @@
 
 					/* Undo marking the pages as reserved */
 					for (i = 0; i < woinst->buffer.pages; i++)
-						mem_map_reserve(virt_to_page(woinst->buffer.addr[i]));
+						mem_map_unreserve(virt_to_page(woinst->buffer.addr[i]));
 				}
 
 				emu10k1_waveout_close(wave_dev);
@@ -322,7 +322,7 @@
 
 					/* Undo marking the pages as reserved */
 					for (i = 0; i < woinst->buffer.pages; i++)
-						mem_map_reserve(virt_to_page(woinst->buffer.addr[i]));
+						mem_map_unreserve(virt_to_page(woinst->buffer.addr[i]));
 				}
 
 				emu10k1_waveout_close(wave_dev);
@@ -1204,7 +1204,7 @@
 
 				/* Undo marking the pages as reserved */
 				for (i = 0; i < woinst->buffer.pages; i++)
-					mem_map_reserve(virt_to_page(woinst->buffer.addr[i]));
+					mem_map_unreserve(virt_to_page(woinst->buffer.addr[i]));
 			}
 
 			emu10k1_waveout_close(wave_dev);
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/