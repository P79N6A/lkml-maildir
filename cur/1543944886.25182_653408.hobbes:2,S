Date: Wed, 13 Feb 2008 18:21:14 -0700
From: 	Ehud.Gavron@Login ...
Subject: eth0 changes to eth1 after initial boot; udev rules correct; modprobe.conf correct.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/2/13/726

Since going to 2.6.24 my wired lan changed from eth0 to eth1.  It starts 
as eth0... but then changes to eth1.
udev rules hard sets it to eth0.  For the heck of it I deleted 
70...network... and it recreated it with eth1, I changed manually to 
eth0. still have the problem.
modprobe.conf had an alias for eth1, changed it to eth0, no difference. 
removed modprobe alias. no difference.
sysconfig as written by kudzu made it eth1, changed to eth0 and stopped 
kudzu from running.  still persists to becoming eth1.
THERE IS NO REFERENCE TO ETH1 in any file and yet upon boot... it 
CHANGES from eth0 to eth1!!!
Where else in the system does something cause this effect?
I have googled "eth0 becomes eth1", "nic changes name" both with and 
without 2.6.24.  Every response referse to the udev rules in 
70-presistent-net.rules. 
Any ideas to resolve or debug this would be appreciated. 
E
[root@egdell ~]# dmesg | grep eth
Driver 'sd' needs updating - please use bus_type methods
Driver 'sr' needs updating - please use bus_type methods
eth0: Tigon3 [partno(BCM5752KFBG) rev 6002 PHY(5752)] (PCI Express) 
10/100/1000Base-T Ethernet 00:18:8b:a5:2c:f5
eth0: RXcsums[1] LinkChgREG[0] MIirq[0] ASF[0] WireSpeed[1] TSOcap[1]
eth0: dma_rwctrl[76180000] dma_mask[64-bit]
ADDRCONF(NETDEV_UP): eth1: link is not ready
bridge-eth0: peer interface eth0 not found, will wait for it to come up
bridge-eth0: attached
ADDRCONF(NETDEV_UP): eth1: link is not ready
[root@egdell ~]# ifconfig -a
eth1      Link encap:Ethernet  HWaddr 00:18:8B:A5:2C:F5          UP 
BROADCAST MULTICAST  MTU:1500  Metric:1
         RX packets:0 errors:0 dropped:0 overruns:0 frame:0
         TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
         collisions:0 txqueuelen:1000
         RX bytes:0 (0.0 b)  TX bytes:0 (0.0 b)
         Interrupt:18
lo        Link encap:Local Loopback          inet addr:127.0.0.1  
Mask:255.0.0.0
         inet6 addr: ::1/128 Scope:Host
         UP LOOPBACK RUNNING  MTU:16436  Metric:1
         RX packets:1309 errors:0 dropped:0 overruns:0 frame:0
         TX packets:1309 errors:0 dropped:0 overruns:0 carrier:0
         collisions:0 txqueuelen:0
         RX bytes:2366648 (2.2 MiB)  TX bytes:2366648 (2.2 MiB)
vmnet8    Link encap:Ethernet  HWaddr 00:50:56:C0:00:08          inet 
addr:192.168.232.1  Bcast:192.168.232.255  Mask:255.255.255.0
         inet6 addr: fe80::250:56ff:fec0:8/64 Scope:Link
         UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
         RX packets:0 errors:0 dropped:0 overruns:0 frame:0
         TX packets:6 errors:0 dropped:0 overruns:0 carrier:0
         collisions:0 txqueuelen:1000
         RX bytes:0 (0.0 b)  TX bytes:0 (0.0 b)
wlan0     Link encap:Ethernet  HWaddr 00:1A:92:0E:40:1F          inet 
addr:10.1.1.5  Bcast:10.1.1.255  Mask:255.255.255.0
         inet6 addr: fe80::21a:92ff:fe0e:401f/64 Scope:Link
         UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
         RX packets:17 errors:0 dropped:0 overruns:0 frame:0
         TX packets:15 errors:0 dropped:0 overruns:0 carrier:0
         collisions:0 txqueuelen:1000
         RX bytes:1838 (1.7 KiB)  TX bytes:1900 (1.8 KiB)
wmaster0  Link encap:UNSPEC  HWaddr 
00-1A-92-0E-40-1F-00-00-00-00-00-00-00-00-00-00          UP BROADCAST 
RUNNING MULTICAST  MTU:1500  Metric:1
         RX packets:0 errors:0 dropped:0 overruns:0 frame:0
         TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
         collisions:0 txqueuelen:1000
         RX bytes:0 (0.0 b)  TX bytes:0 (0.0 b)
[root@egdell ~]# more /etc/udev/rules.d/70-persistent-net.rules
# This file was automatically generated by the /lib/udev/write_net_rules
# program run by the persistent-net-generator.rules rules file.
#
# You can modify it, as long as you keep each rule on a single line.
# PCI device 0x14e4:0x1600 (tg3) (custom name provided by external tool)
SUBSYSTEM=="net", ACTION=="add", DRIVERS=="?*", 
ATTR{address}=="00:18:8b:a5:2c:f
5", ATTR{type}=="1", NAME="eth0"
# PCI device 0x14e4:0x4311 (b43-pci-bridge)
SUBSYSTEM=="net", ACTION=="add", DRIVERS=="?*", 
ATTR{address}=="00:1a:92:0e:40:1
f", ATTR{type}=="1", NAME="wlan0"