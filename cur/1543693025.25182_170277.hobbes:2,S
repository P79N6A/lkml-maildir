Date: 03 Oct 2003 23:08:12 +0200
From: Andi Kleen <>
Subject: Re: backport AMD K7 MCE changes.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/10/3/128

Dave Jones <davej@redhat.com> writes:
>  			 */
> -			if(c->x86 == 6 || c->x86 == 15)
> +			
> +			if(c->x86 == 6 || c->x86 == 15) {
> +				startbank = 1;
Can you please add comments to such magic changes ?
I still think we should not do anything without an official errata.
The K7 actually has two MCE enable registers: a mask that is only
supposed to be programmed by the BIOS and works around bugs and the
standardized IA32 register controlled by the OS. I suspect your case
only happens with some buggy BIOS that doesn't program the shadow mask
correctly. This would imply that it would make more sense to test it
and program it correctly based on a known good value.
-Andi
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/