Date: Thu, 09 Jun 2005 12:45:08 -0700
From: "Martin J. Bligh" <>
Subject: Re: 2.6.12?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/6/9/166

> Now what's REALLY, REALLY wierd is that this fixes my hang problem
> whilst trying to run kernbench:
> 
> 
http://mbligh.org/abat/no_hang
> 
> which is just reverting:
> 
> x86_64-use-a-common-function-to-find-code-segment-bases-fix.patch
> 
> But the patch is tiny, and it makes NO sense at all for this to fix
> anything. All it does is:
Strangely, -git3 works, which has the boot fix applied, but not the
hang fix bit. Something odd is afoot.
> diff -purN -X /home/mbligh/.diff.exclude 2.6.12-rc2-mm2/include/asm-x86_64/ptrace.h 2.6.12-rc2-mm2-no_hang/include/asm-x86_64/ptrace.h
> --- 2.6.12-rc2-mm2/include/asm-x86_64/ptrace.h	2005-04-08 23:41:41.000000000 -0700
> +++ 2.6.12-rc2-mm2-no_hang/include/asm-x86_64/ptrace.h	2005-06-08 16:25:01.000000000 -0700
> @@ -86,8 +86,6 @@ struct pt_regs {
>  extern unsigned long profile_pc(struct pt_regs *regs);
>  void signal_fault(struct pt_regs *regs, void __user *frame, char *where);
> 
> -struct task_struct;
> -
>  extern unsigned long
>  convert_rip_to_linear(struct task_struct *child, struct pt_regs *regs);
> 
> 
> How the hell can that possibly fix it? Boggle. But it does. I checked.
> I ran a whole damned sequence of patches from your tree against the box,
> then extracted the one where the failover started and retested it with
> just that and the no_hole one. There's even a little green box to 
> prove it about 4 down on the left here:
> 
> 
http://ftp.kernel.org/pub/linux/kernel/people/mbligh/abat/regression_matrix.html
> 
> My brain is now a small piece of silly-putty smushed against the far
> wall of my study. Anything you can do to help me scrape up the remains
> would be splendid. I can only speculate it's some wierd side-effect,
> because I have no other explaination at all.
> 
> Humpf.
> 
> M.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/