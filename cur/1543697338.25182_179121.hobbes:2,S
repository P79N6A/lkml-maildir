Date: Thu, 20 Nov 2003 11:38:15 -0500
From: Larry Sendlosky <>
Subject: patch for current cvs of microkernel for interrupt delivery
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/11/20/84

Changes are in mainline linux for "public" ethernet support (device
config support).  Currently, the attached patch is needed in
the microkernel for interrupt delivery to work.
larry
ps: nfs root mounting cheat will come shortly.
Index: kma.c
===================================================================
RCS file: /src/microkernel/sys/ds/kma/kma.c,v
retrieving revision 1.54
diff -C8 -u -r1.54 kma.c
--- kma.c	18 Nov 2003 19:31:37 -0000	1.54
+++ kma.c	20 Nov 2003 16:35:35 -0000
@@ -1773,17 +1773,17 @@
  * Returns:
  *	none
  */
 static inline void
 kma_deliver_queued_int(struct trapframe *frame)
 {
         u_int index = vs_deliver_int(curvs, PCPU_GET(cpuid));
         if (index < KMA_VI_MAX_INTERRUPT)
-                kma_propagate_int(index + KMA_VI_IRQ_BASE, frame);
+                kma_propagate_int(index, frame);
         return;
 }
 
 
 /* 
  * KMA internal interface
  *
  */