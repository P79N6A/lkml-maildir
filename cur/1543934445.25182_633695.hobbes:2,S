Date: Thu, 03 Jan 2008 01:54:42 +0100
From: Arjan van de Ven <>
Subject: Make checkpatch.pl's quiet option not print the summary on no errors
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/1/2/371

Subject: Make checkpatch.pl's quiet option not print the summary on no errors
From: Arjan van de Ven <arjan@linux.intel.com>
CC: apw@uk.ibm.com
Right now, in quiet mode, checkpatch.pl still prints a summary line even
if the patch is 100% clean. IMO, "quiet mode" should mean "no output if clean",
the patch below makes that so. (This also makes the quilt integration
on my system work nicer :)
Signed-off-by: Arjan van de Ven <arjan@linux.intel.com>
---
  scripts/checkpatch.pl |    2 +-
  1 file changed, 1 insertion(+), 1 deletion(-)
Index: linux-2.6.24-rc6/scripts/checkpatch.pl
===================================================================
--- linux-2.6.24-rc6.orig/scripts/checkpatch.pl
+++ linux-2.6.24-rc6/scripts/checkpatch.pl
@@ -1579,7 +1579,7 @@ sub process {
  	}
  	print report_dump();
-	if ($summary) {
+	if ($summary && ($clean == 0 || $quiet == 0)) {
  		print "total: $cnt_error errors, $cnt_warn warnings, " .
  			(($check)? "$cnt_chk checks, " : "") .
  			"$cnt_lines lines checked\n";