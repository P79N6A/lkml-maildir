Date: Mon, 31 May 1999 17:58:32 -0400
From: Jeff Garzik <>
Subject: Re: S3 Frame Buffer
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/5/31/195

Ian Eure wrote:
> 
> Matthew Kirkwood wrote:
> >
> > On Sun, 30 May 1999, Alan Cox wrote:
> >
> > > >     Me too in a 2.2.5 / Virge3DX Perhaps a good idea get it into kernel
> > > > tree....
> > >
> > > Start by turning from an S3 hack on vesafb into a nice generic fb driver
> > > that matches known PCI idents and setup code so you can have a clean
> > > multichip driver.
If the driver does this, make sure vesafb is last in the probe order
then...  You definitely want any accelerated, custom fb driver to be
loaded before this.
The kernel also needs {check,request,release}_mmio for MMIO regions,
just like {check,request,release} region, so that the vesafb driver
won't start writing to a framebuffer already mapped by a driver before
it.
> > That's actually what it does.
> >
> > It should probably be marked "Selective Vesa 1.2 driver" rather than "S3
> > LFB hack".
> >
> So I take it that this provides no hardware accelleration? How about
> video mode changes without rebooting and specifying a different
> resolution to LILO?
It may be possible to have hardware acceleration in X, if vesafb
correctly specifies the MMIO region.  Then, you would just have to
compile XF86_SVGA with support for the S3 (or Virge) acceleration, using
the fbdev chipset driver.  Gerd Knorr has some patches on his fbdev page
that do something like this. 
http://www.in-berlin.de/User/kraxel/fb.html
  I don't think those patches
allow vesafb to do mode switching though.
Ken Tyler is working on completing the S3 Virge support in the kernel,
and I'm working on a S3 Trio-or-older driver.  These can be hooked into
X in a similar manner, and both should have full acceleration support.
XFree86 4.0's modular server design should make this whole process much
easier on the end user too.
	Jeff
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/