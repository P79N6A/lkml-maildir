Date: Sun, 04 Apr 1999 03:29:42 +0200
From: OLK <>
Subject: rdev failure?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/4/3/78

Huh?
using 2.2.5 IA32-linux here
rdev output gave:
root@OLK:/root>rdev
/dev/sdc1 /
but look at mtab: df output gives this
root@OLK:/root>df
Filesystem         1024-blocks  Used Available Capacity Mounted on
/dev/sdd1            1406680 1315162    18826     99%   /
/dev/md0             4022328 3727085    87128     98%   /mnt/md0
/dev/md1             3918178 2602892  1112571     70%   /mnt/md1
/dev/md2              685388  446426   203558     69%   /usr
/dev/md3             1015112  308742   653918     32%   /usr/local
The root system is apearently on /dev/sdd1
but in reality it's /dev/sdc1 because /dev/sdd1 is look here:
root@OLK:/root>fdisk /dev/sdd  (this is a ~120 Mb partition)
Command (m for help): p
Disk /dev/sdd: 141 heads, 62 sectors, 1020 cylinders
Units = cylinders of 8742 * 512 bytes
   Device Boot   Begin    Start      End   Blocks   Id  System
/dev/sdd1            1        1       29   126728   83  Linux native
/dev/sdd2           30       30      110   354051   83  Linux native
/dev/sdd3          111      111      230   524520   83  Linux native
/dev/sdd4          231      231     1020  3453090    5  Extended
/dev/sdd5          231      231      905  2950394   83  Linux native
/dev/sdd6          906      906     1020   502634   83  Linux native
Command (m for help): 
Here the output for /dev/sdc (which corresponds to /dev/sdd) strange?
root@OLK:/root>fdisk /dev/sdc
Command (m for help): p
Disk /dev/sdc: 255 heads, 63 sectors, 261 cylinders
Units = cylinders of 16065 * 512 bytes
   Device Boot   Begin    Start      End   Blocks   Id  System
/dev/sdc1            1        1      181  1453851   83  Linux native
/dev/sdc2          182      182      194   104422+  82  Linux swap
/dev/sdc3          195      195      261   538177+  83  Linux native
Command (m for help):  
the output of /dev/sdc1 corresponds to the df - output (see /dev/sdd1)
if i mount /dev/sdc1 then it's identical to the mounted root-fs;
but in fstab/and loadlin i tell to mount /dev/sdd1 for booting.
The only workaround is to recompile the kernel now though rdev does
change the kernel's-bzImage info, but it's ignored while booting.
Any hints?
To be honest i solved this problem by recompiling the kernel,
but i thought rdev should be strong enough enough. Even the boot
params don't override the incompiled-params of a kernel.
Little disapointed here,
later
Oliver
-- 
Linux - dat beste Textadventure wo gibt
....I thought my wife was playing games on the computer, that was 
a BIG mistake...She is playing in front of the computer, with a BIG...
eMail : delise@rp-plus.de
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/