Date: Wed, 03 Dec 2008 23:39:54 -0700
From: Andreas Dilger <>
Subject: Re: [PATCH 0/6][REPOST] ext{2,3,4}: tighten inheritance and	setting of inode flags
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/12/4/27

On Dec 03, 2008  19:54 +0000, Duane Griffin wrote:
> This patch series prevents the inheritance and setting of flags that are
> inappropriate for specific inode types.
> 
> Flags which should be inherited are listed explicitly so as to prevent
> future flags being overlooked and inherited by accident.
> 
> It introduces a function to mask flags based on the inode type and uses
> it in inode creation and the SETFLAGS ioctl to help prevent future
> inconsistency.
> 
> Patches 1-3 fix the TOPDIR flag inheritance bug reported at
> 
http://bugzilla.kernel.org/show_bug.cgi?id=9866.
> 
> Patches 4-6 fix a related problem with non-regular file/dir inodes
> inheriting inappropriate flags, discovered while testing. For example,
> on an unpatched system, the following sequence will create an
> un(re)movable device node:
I worked with Duane during the development of these patches and agree
that they implement the proper solution to a problem that has repeated
a number of times as new flags are added.
Acked-by: Andreas Dilger <adilger@sun.com>
Cheers, Andreas
--
Andreas Dilger
Sr. Staff Engineer, Lustre Group
Sun Microsystems of Canada, Inc.