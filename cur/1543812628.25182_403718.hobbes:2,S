Date: Mon, 6 Mar 2006 13:09:54 +0530
From: "Balbir Singh" <>
Subject: Re: 9pfs double kfree
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/3/6/23

> The vast majority of people never run with slab poisoning enabled
> judging by the number of bugs it constantly turns up.
>
Agreed, maybe we could insist that developers enable these options and
test their patch with debugging enabled before posting them, but I
have a feeling that it would meet a lot of resistance :-). Doesn't
hurt to document it in Documentation/HOWTO or somewhere more
appropriate.
>  > kfree() will ignore NULL
>  > pointer, from the comments in kfree
>
> *nod*, poisoning the ptr would be a better idea.
>
Yes, I think this is a better idea.
>  > May we could have such a variant under CONFIG_DEBUG_SLAB if we needed
>  > and also change the variant kfree to BUG_ON() a NULL pointer.
>
> given the cost is just a ptr assignment in a slow path, I'd prefer
> it was non-optional, otherwise it'll be as underused as the other
> debugging options.
>
Yes, agreed.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/