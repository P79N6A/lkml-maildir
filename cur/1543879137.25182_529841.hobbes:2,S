Date: Wed, 11 Apr 2007 16:09:32 -0400
From: Bill Davidsen <>
Subject: Re: Add a norecovery option to ext3/4?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/4/11/311

Eric Sandeen wrote:
> Phillip Susi wrote:
>> Eric Sandeen wrote:
>>> In that case you are mounting the same filesystem uner 2 different
>>> operating systems simultaneously, which is, and always has been, a
>>> recipe for disaster.  Flagging the fs as "mounted already" would
>>> probably be a better solution, though it's harder than it sounds at
>>> first glance.
>> No, it has not been.  Prior to poorly behaved journal playback, it was 
>> perfectly safe to mount a filesystem read only even if it was mounted 
>> read-write by another system ( possibly fsck or defrag ).  You might not 
>> read the correct data from it, but you would not damage the underlying 
>> data simply by mounting it read-only.
> 
> You might not damage the underlying filesystem, but you could sure go
> off in the weeds trying to read it, if you stumbled upon some
> half-updated metadata... so while it may be safe for the filesystem, I'm
> not convinced that it's safe for the host reading the filesystem.
> 
Exactly. If the data are protected you can use other software to access 
it. For ext3 an explicit ext2 mount might do it... but if you corrupt 
the underlying information, there's no going back.
In practice Linux has had lots of practice mounting garbage, and isn't 
likely to suffer terminal damage.
I wonder what happens if the device is really read-only and the o/s 
tries to replay the journal as part of a r/o mount? I suspect the system 
will refuse totally with an i/o error, not what you want.
-- 
Bill Davidsen <davidsen@tmr.com>
   "We have more to fear from the bungling of the incompetent than from
the machinations of the wicked."  - from Slashdot
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/