Date: Tue, 13 Sep 2005 22:54:19 +0200
From: Jean Delvare <>
Subject: [PATCH 2.6] I2C: Kill an unused i2c_adapter struct member
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/9/13/336

Hi Greg, all,
Kill an unused member of the i2c_adapter structure. This additionally
fixes a potential bug, because <linux/i2c.h> doesn't include
<linux/config.h>, so different files including <linux/i2c.h> could see
a different definition of the i2c_adapter structure, depending on them
including <linux/config.h> (or other header files themselves including
<linux/config.h>) before <linux/i2c.h>, or not.
Credits go to JÃ¶rn Engel for pointing me to the problem.
Signed-off-by: Jean Delvare <khali@linux-fr.org>
 include/linux/i2c.h |    5 -----
 1 file changed, 5 deletions(-)
--- linux-2.6.14-rc1.orig/include/linux/i2c.h	2005-09-13 21:21:25.000000000 +0200
+++ linux-2.6.14-rc1/include/linux/i2c.h	2005-09-13 22:05:32.000000000 +0200
@@ -230,11 +230,6 @@
 	struct device dev;		/* the adapter device */
 	struct class_device class_dev;	/* the class device */
 
-#ifdef CONFIG_PROC_FS 
-	/* No need to set this when you initialize the adapter          */
-	int inode;
-#endif /* def CONFIG_PROC_FS */
-
 	int nr;
 	struct list_head clients;
 	struct list_head list;
-- 
Jean Delvare
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/