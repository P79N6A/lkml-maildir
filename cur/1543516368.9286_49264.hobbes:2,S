Date: Wed, 17 Nov 1999 13:14:45 -0500
From: "Theodore Y. Ts'o" <>
Subject: Re: Ext2 defragmentation
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/11/17/83

   Date: Wed, 17 Nov 1999 12:26:52 -0500
   From: TenThumbs <tenthumbs@cybernex.net>
   Isn't this still the problem of storing fs metadata within a potentially
   corrupt fs? I think storing the backup superblock locations outside the fs
   would be a good idea. Is it possible to add an option to tune2fs to report
   this info so one could store it on a floppy or print it or something?
No, it's not a problem because the backup superblock doesn't need to be
written to during the course of normal operations.  (The critical
parameters which e2fsck needs to do its thing don't change after the
filesystem is created; they do change after a resize2fs, though, so some
care is needed in that case.)  So it's just a matter of 
   I've noticed another anomaly. When mke2fs 1.18 creates a 1.3GB partition, it
   says the first backup superblock is at 32768 not 32769. Is this an
   off-by-one error?
No; for 2k and 4k filesystems, the primary superblock is located at
offset 1024 of block #0.  (Where the first 1k of block #0 is reserved
for the boot loader).  On 1k filesystems, primary superblock is located
at block #1, and so the block group boundaries are shifted down by 1
block.  
						- Ted
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/