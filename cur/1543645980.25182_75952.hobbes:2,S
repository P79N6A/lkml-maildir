Date: Thu, 3 Oct 2002 15:49:33 +1000
From: <>
Subject: [PATCH] Large Block Device patch part 5/4
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/10/3/11

Yes I forgot something...
Without this patch, trying to use RAID without CONFIG_LBD would fail.
# This is a BitKeeper generated patch for the following project:
# Project Name: Linux kernel tree
# This patch format is intended for GNU patch command version 2.5 or higher.
# This patch includes the following deltas:
#	           ChangeSet	1.677   -> 1.678  
#	     drivers/md/md.c	1.113   -> 1.114  
#
# The following is the BitKeeper ChangeSet Log
# --------------------------------------------
# 02/10/03	peterc@numbat.chubb.wattle.id.au	1.678
# Fix md operation without CONFIG_LBD --- don't try to include __udivdi3 etc.
# --------------------------------------------
#
diff -Nru a/drivers/md/md.c b/drivers/md/md.c
--- a/drivers/md/md.c	Thu Oct  3 15:47:43 2002
+++ b/drivers/md/md.c	Thu Oct  3 15:47:43 2002
@@ -3480,8 +3480,12 @@
 }
 #endif
 
+#ifdef CONFIG_LBD
 extern u64 __udivdi3(u64, u64);
 extern u64 __umoddi3(u64, u64);
+EXPORT_SYMBOL(__udivdi3);
+EXPORT_SYMBOL(__umoddi3);
+#endif
 EXPORT_SYMBOL(md_size);
 EXPORT_SYMBOL(register_md_personality);
 EXPORT_SYMBOL(unregister_md_personality);
@@ -3493,6 +3497,4 @@
 EXPORT_SYMBOL(md_wakeup_thread);
 EXPORT_SYMBOL(md_print_devices);
 EXPORT_SYMBOL(md_interrupt_thread);
-EXPORT_SYMBOL(__udivdi3);
-EXPORT_SYMBOL(__umoddi3);
 MODULE_LICENSE("GPL");
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/