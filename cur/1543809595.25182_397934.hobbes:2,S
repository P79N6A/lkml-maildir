Date: Thu, 16 Feb 2006 07:54:43 -0800 (PST)
From: Linus Torvalds <>
Subject: Re: SMP BUG
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/2/16/110

On Thu, 16 Feb 2006, Russell King wrote:
> 
> It fixes that exact oops but only by preventing us getting that far
> due to another oops.
Thanks for walking through it.
> We call cpu_up, which sends a CPU_UP_PREPARE event.  This causes the
> migration thread to be spawned, and rq->migration_thread to be set.
> 
> Eventually, we call the architecture __cpu_up(), which ends up
> calling init_idle().  Due to this patch, init_idle() then NULLs out
> rq->migration_thread.
Fair enough.
That actually does point to a real bug, I think. The fact that we 
apparently now survive the fact that we spawn the migration thread before 
the idle thread works looks like it just hides the bug that we shouldn't 
do that. Ingo?
Oh, well. For now the fix is clearly to just leave things well alone, and 
just have cpu_possible_map initialized early enough.
		Linus
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/