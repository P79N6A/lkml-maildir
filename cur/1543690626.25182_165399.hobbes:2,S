Date: Thu, 11 Sep 2003 22:12:12 -0700
From: Mitchell Blank Jr <>
Subject: Re: [PATCH] oops_in_progress is unlikely()
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/9/12/13

I feel sorry that my trivial little patch has spawned such a large thread.
Pavel Machek wrote:
> > There comes a point where readability is lost, for no measurable gain.
> 
> Perhaps we should have macros ifu() and ifl(), that would be used as a
> plain if, just with likelyness-indication?
No, I think that would be a move in the wrong direction.
I've already described my personal opinion about unlikely() in a couple
private emails, but for the record:
When I see code like...
	if (unlikely(condition)) {
	}
...it reads to me like...
	if (condition) {	/* Unlikely error case */
	}
In other words it documents the code making it MORE readable than before
(obviously this can be done to excess).  If the compiler can also do
something useful with the information, so much the better.
Perhaps I'm the only one that feels that way, though.
Your ifu/ifl suggestion I think is pretty ugly.  First off, it would break
syntax-highlighting editors which would hurt readability a lot.  Also its
not obvious at all what "ifu (x == 0)" means - you can pretty much guess what
"if (unlikely(x == 0))" does the first time you see it.
-Mitch
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/