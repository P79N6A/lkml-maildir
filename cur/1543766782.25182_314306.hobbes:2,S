Date: Tue, 26 Apr 2005 17:40:42 -0700
From: Venkatesh Pallipadi <>
Subject: Re: [PATCH] Increase number of e820 entries hard limit from 32 to 128
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/4/26/323

On Sat, Apr 23, 2005 at 05:10:48PM +0200, Andi Kleen wrote:
> On Fri, Apr 22, 2005 at 07:32:50PM -0700, Venkatesh Pallipadi wrote:
> > On Fri, Apr 22, 2005 at 06:51:59PM -0700, Linus Torvalds wrote:
> > > On Fri, 22 Apr 2005, Venkatesh Pallipadi wrote:
> > > > The specifications that talk about E820 map doesn't have an upper limit
> > > > on the number of E820 entries. But, today's kernel has a hard limit of 32.
> > > > With increase in memory size, we are seeing the number of E820 entries
> > > > reaching close to 32. Patch below bumps the number upto 128. 
> > > 
> > > Hmm. Anything that changes setup.S tends to have bootloader dependencies. 
> > > I worry whether this one does too..
> > > 
> > 
> > The setup.S change in this patch should be OK. As it is adding to the 
> > existing zero-page and keeping it within one page. I tested it on systems 
> > with grub, adding some dummy E820 entries and it worked fine.
> 
> The last time I tried to extend the zero page (with a longer command line)
> it broke lilo on systems with EDID support and CONFIG_EDID enabled.
> Make sure you test that case.
> 
Tested this patch with some more configuration and I did not see any breakage.
- LILO with EDID enabled
- pxeboot
And in the current zero-page, EDID info is at a lower address (before E820MAP).
So, there should not be any issues with EDID info. Only field (other than E820) 
that is changing in zero page is EDDBUF (that comes after E820MAP). 
The patch changes the reference to EDDBUF inside kernel to new position in 
zero page. And I don't see EDDBUF being used by boot loader anywhere. So, we 
should be OK with that change.
Thanks,
Venki
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/