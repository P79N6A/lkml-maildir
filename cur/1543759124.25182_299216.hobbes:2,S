Date: Thu, 3 Mar 2005 16:25:39 -0800
From: Nishanth Aravamudan <>
Subject: [UPDATE PATCH] cdrom/mcdx: fix wait-queue compile-time breakage
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/3/3/416

On Wed, Mar 02, 2005 at 10:57:10AM +0100, Domen Puncer wrote:
> A new release from kernel janitors (
http://janitor.kernelnewbies.org/
).
> 
> Apologies to janitors that this took so long.
> This time we have a new record: 354 patches!
> I'll start sending/resending what's not already in -mm soon.
> 
> Patchset is at 
http://coderock.org/kj/2.6.11-kj/
<snip>
> int_sleep_on-drivers_cdrom_mcdx.patch
>   From: Nishanth Aravamudan <nacc@us.ibm.com>
>   Subject: [KJ] [PATCH 16/20] cdrom/mcdx: remove 	interruptible_sleep_on_timeout() usage
Description: The original patch leads to compile-warnings from older
version of GCC and violates CodingStyle. Moving the declaration to the
head of the function fixes it.
--- 2.6.11-kj-v/drivers/cdrom/mcdx.c	2005-03-02 11:21:41.000000000 -0800
+++ 2.6.11-kj/drivers/cdrom/mcdx.c	2005-03-03 10:30:32.000000000 -0800
@@ -838,10 +838,10 @@ static void mcdx_delay(struct s_drive_st
  *	May be we could use a simple count loop w/ jumps to itself, but
  *	I wanna make this independent of cpu speed. [1 jiffy is 1/HZ] sec */
 {
+	DEFINE_WAIT(wait);
 	if (jifs < 0)
 		return;
 
-	DEFINE_WAIT(wait);
 	xtrace(SLEEP, "*** delay: sleepq\n");
 	prepare_to_wait(&stuff->sleepq, &wait, TASK_INTERRUPTIBLE);
 	schedule_timeout(jifs);
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/