Date: Fri, 4 Aug 2006 13:41:25 +0200
From: Tomasz Torcz <>
Subject: Re: Checksumming blocks? [was Re: the " 'official' point of view" expressed by kernelnewbies.org regarding reiser4 inclusion]
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/8/4/145

On Thu, Aug 03, 2006 at 07:25:19PM -0400, Russell Leighton wrote:
> 
> If the software (filesystem like ZFS or database like Berkeley DB)  
> finds a mismatch for a checksum on a block read, then what?
> 
> Is there a recovery mechanism, or do you just be happy you know there is 
> a problem (and go to backup)?
  ZFS readsthis block again from different mirror, and if checksum is
right -- returns good data to userspace and rewrites failed block with
good data.
  Note, that there could be multiple mirrors, either physically (like
RAID1) or logically (blocks could be mirrored on different areas of the
same disk; some files can be protected with multiple mirrors, some left
unprotected without mirrors).
-- 
Tomasz Torcz                        To co nierealne -- tutaj jest normalne.
zdzichu@irc.-nie.spam-.pl          Ziomale na życie mają tu patenty specjalne.
[unhandled content-type:application/pgp-signature]