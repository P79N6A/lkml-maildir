Date: Tue, 21 Mar 2006 17:01:39 -0600
From: James Bottomley <>
Subject: Re: Question: where should the SCSI driver place MODE_SENSE data ?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/3/21/451

On Tue, 2006-03-21 at 09:44 -0700, Ju, Seokmann wrote:
> In the 2.6 (2.6.9 and scsi-misc in git) kernel, MODE_SENSE SCSI command
> packet (scsi_cmnd) carries following entries with unexpectedly small in
> size.
> - request_bufflen
> - bufflen
> 
> Especially for MODE SENSE with page code 8 (caching page), driver has
> minumum 12 Bytes MODE_SENSE data to deliver besides 'mode parameter
> header' and 'block descriptors'.
> When I dump those entries, they both are 4 Bytes in size.
> To me, it seems like that SCSI mid layer allocated 512 Bytes for
> MODE_SENSE data buffer, but the buffer length passed down to LLD
> incorrectly.
I don't understand the question.  Are you asking why
sd_read_write_protect_flag and sd_read_cache_type operate in the way
they do?  i.e. header first then actual data.
James
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/