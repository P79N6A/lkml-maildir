Date: Thu, 13 Mar 2008 13:02:01 +0100
From: Mike Galbraith <>
Subject: Re: Keys get stuck
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/3/13/135

On Thu, 2008-03-13 at 12:31 +0100, Jiri Kosina wrote:
> On Thu, 13 Mar 2008, Mike Galbraith wrote:
> 
> > > I'm not sure if it's the same issue or not, they don't repeat 
> > > "forever" for me, it just makes my speeellllliingggg llllooookkk 
> > > teerrriibbblle. Like that. Before this happens, letters usually stop 
> > > appearing on screen as I'm typing. I usually stop typing at that 
> > > point, since I know it will just become a mess.
> > Yes, that's the symptom I was refering to.  If you see that under
> > reasonable CPU load, and _without_ major swapping going on, then I'd be
> > suspicious of scheduler trouble.  Swap can definitely keep X off the cpu
> > for extended periods, and that seems to be what triggers the repeated
> > keys behavior.  (I've never troubleshot it, so must say _seems_)
> 
> I have a hard time calling this a kernel scheduler trouble. My 
> understanding is that X are sometimes unhappy how kernel schedules them 
> when under load, and that triggers bug in X autorepeat code.
Only if X is not getting CPU for long periods without swapping would I
become suspicious of the scheduler.  We recently had exactly this
trouble with the fair groups load balancing code (now reverted) and CPU
bound loads.  The bug is a symptom of latency woes, and the scheduler is
just one potential source worth watching.  In the heavy swapping case,
it's unlikely to be scheduler trouble, and yes, the bug lies elsewhere.
	-Mike