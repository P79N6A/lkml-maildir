Date: Sat, 29 Dec 2001 18:45:08 +0000 (GMT)
From: Alan Cox <>
Subject: Re: i686 SMP systems with more then 12 GB ram with 2.4.x kernel ?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/12/29/42

> Are there some i686 SMP systems with more then 12 GB ram out there ?
Very very few.
> Is there a known problem with 2.4.x kernel and such systems ?
Several 8)
Hardware limits:
	-	36bit addressing mode on x86 processors is slower
	-	Many device drivers cant handle > 32bit DMA
	-	The CPU can't efficiently map all that memory at once
Software:
	-	The block I/O layer doesn't cleanly handle large systems
	-	The page struct is too big which puts undo loads on the
		memory that the CPU can map
	-	We don't discard page tables when we can and should
	-	We should probably switch to a larger virtual page size
		on big machines.
The ones that actually bite hard are the block I/O layer and the page
struct size. Making the block layer handle its part well is a 2.5 thing.
> It looks like as the buffer_heads would fill the low memory up,
> whether there is sufficient memory available or not, as long as
> there is sufficient high memory for caching.
That may well be happening. The Red Hat supplied 7.2 and 7.2 errata kernels
were tested on 8Gb, I don't know what else larger.
Because much of the memory cannot be used for kernel objects there is an
imbalance in available resources and its very hard to balance them sanely.
I'm not sure how many 8Gb+ machines Andrea has handy to tune the VM on
either.
Alan
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/