Date: Sun, 1 Oct 2006 12:21:07 -0700
From: Pete Zaitcev <>
Subject: pcmcia: patch to fix pccard_store_cis
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/10/1/179

The ``ret'' obviously cannot be zero here, because it's initialized to the
write count and not zero.
For the complete description, see:
 
https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=207910
Author: Fabrice Bellet <fabrice@bellet.info>
Signed-off-by: Pete Zaitcev <zaitcev@redhat.com>
--- linux-2.6.17.i686/drivers/pcmcia/socket_sysfs.c	2006-06-18 03:49:35.000000000 +0200
+++ /tmp/socket_sysfs.c	2006-10-01 19:30:09.000000000 +0200
@@ -321,7 +321,7 @@
 
 	kfree(cis);
 
-	if (!ret) {
+	if (ret == count) {
 		mutex_lock(&s->skt_mutex);
 		if ((s->callback) && (s->state & SOCKET_PRESENT) &&
 		    !(s->state & SOCKET_CARDBUS)) {
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/