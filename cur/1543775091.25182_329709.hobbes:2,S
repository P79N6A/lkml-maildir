Date: Tue, 28 Jun 2005 20:30:30 -0400
From: Jeff Mahoney <>
Subject: [PATCH 0/3] openfirmware/macio: hotplug support
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/6/28/438

Hello all -
I dug these up so I wouldn't have to look at them on my disk anymore. :)
I last posted these patches in March, and some discussion came about, mostly
regarding how to handle whitespace in the compat field and how a comma was
an unacceptable field delimeter.
The following 3 patches, combined with the userspace patches referenced below,
implement hotplug events for open firmware/macio devices such as apple airport
wireless ethernet cards.
* 01-openfirmware-device-table.diff
  - Converts struct of_match to a MODULE_DEVICE_TABLE-compatible
    struct of_device_id
  - Uses the information to generate a device table parsable by
    depmod(8)
* 02-openfirmware-sysfs.diff
  - Exports openfirmware variables via sysfs so that coldplug can read and
    take appropriate action
* 03-openfirmware-hotplug.diff
  - Adds the hotplug routine for generating hotplug events. Uses the
    information published to provide the hotplug environment variables to
    userspace.
In addition to the kernel patches, userspace patches for hotplug and
module-init-tools are also required. These patches, including the kernel
patches, are available here:
ftp://ftp.suse.com/pub/people/jeffm/linux/macio-hotplug/
macio.rc: implements coldplug support for macio devices
of.agent: implements module loading for of-table devices
module-init-tools-3.0-pre10-openfirmware.diff: adds modules.ofmap to depmod
I'd appreciate any comments.
-Jeff
-- 
Jeff Mahoney
SuSE Labs
[unhandled content-type:application/pgp-signature]