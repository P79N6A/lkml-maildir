Date: Wed, 17 Feb 1999 09:07:48 +0100 (CET)
From: "F.P. Groeneveld" <>
Subject: Re: ISDN & Kernel 2.2 fun
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/2/17/21

On Wed, 17 Feb 1999, Erik Corry wrote:
> 
> "F.P. Groeneveld" <7acp80$dro$1@enterprise.cistron.nl> wrote:
> 
> > I'm growing ever more furstrated with the configuration problems I am
> > getting.
> 
> You should probably try this on the ISDN4Linux list
> isdn4linux@hub-wue.franken.de aka the newsgroup
> de.alt.comm.isdn4linux.  It's english-german bilingual.
Thanks for the reference. However, somewhere in the deep of the night I
managed to get the thing going. THEN I crashed and slept. After
recompiling the kernel for a second time after the isdn4k-utils
installation, now with all the isdn optionsenabled, it did work.
Previously, I had only enabled those that I understood what they were
doing and those that were already mentioned in the docs as required. Now,
i don't have a clue WHAT it does, but it works :)
Just a quick response to your mail:
> > > derk# isdn-up
> > Dialing of ippp0 triggered > > derk# route > > Kernel IP routing table
> > Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
> > localnet        *               255.255.255.0   U     0      0        0 eth0
> > 195.64.64.0     *               255.255.255.0   U     0      0        0 ippp0
> > derk# route add default gw 195.64.64.1 dev ippp0
> 
> To avoid having to do this manually check my mini-faq in the
> newsgroup above.
Already got it working automatically. i switched off the autotomatic just
so I could see myself what was going wrong.
> 
> > derk# route
> > Kernel IP routing table
> > Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
> > localnet        *               255.255.255.0   U     0      0        0 eth0
> > 195.64.64.0     *               255.255.255.0   U     0      0        0 ippp0
> > default         195.64.64.1     0.0.0.0         UG    0      0        0 ippp0
> 
> Looks OK now.
Well... NOW is shows up as default	dial.cistron.nl 0.0.0.0 etc...
(Since it can now do dns-lookup, I suppose)
> 
> > derk# ping 195.64.64.1
> > PING 195.64.64.1 (195.64.64.1): 56 data bytes
> > ping: sendto: Operation not permitted
> > ping: wrote 195.64.64.1 64 chars, ret=-1
> > ping: sendto: Operation not permitted
> > ping: wrote 195.64.64.1 64 chars, ret=-1
> 
> Looks like the ippp0 interface is down again.
actually, it was up at that moment.
> 
> > ippp0     Link encap:Point-to-Point Protocol  
> >           inet addr:195.64.66.199  P-t-P:195.64.64.1  Mask:255.255.255.0
> >           UP POINTOPOINT RUNNING NOARP  MTU:1500  Metric:1
> >           RX packets:8 errors:0 dropped:0 overruns:0 frame:0
> >           TX packets:8 errors:0 dropped:0 overruns:0 carrier:0
> >           Collisions:0 
As this one suggests as well.
> 
> > Feb 16 22:15:28 derk ipppd[771]: rcvd [0][PAP AuthAck id=0x2msg="\012Your
> > IP address: 195.64.66.199\015\012 Our IP address: 
> > 195.64.67.129\015\012\012Entering PPP mode\015\012"]
> 
> The IP addresses don't match what you set up the ippp0 interface
> to.  You should probably use the noipdefault, ipcp-accept-local and
> ipcp-accept-remote options to ipppd to make it get the IP
> address from the other end instead of assuming it knows.
I've been quite befuddled by it, too. However, the settings as you
suggest were already applied. Somehow, ippp gets told in the authorisation
proces to use 195.64.64.1 as a gateway, I suppose. Can anyone comment on
this? Again, didn't change a thing and now it works (other than yet
another kernel re-compile)
> > > Feb 16 22:15:28 derk ipppd[771]: sent [0][IPCP ConfReq id=0x1 <addr
> > 195.64.66.199> <compress VJ0f 01>]
> > Feb 16 22:15:28 derk ipppd[771]: rcvd [0][IPCP ConfReq id=0x1 <compress VJ
> > 0f 00> <addr 195.64.64.1>]
> > Feb 16 22:15:28 derk ipppd[771]: sent [0][IPCP ConfAck id=0x1 <compress VJ
> > 0f 00> <addr 195.64.64.1>]
> > Feb 16 22:15:28 derk ipppd[771]: rcvd [0][IPCP ConfAck id=0x1 <addr
> > 195.64.66.199> <compress VJ 0f 01>]
> > Feb 16 22:15:34 derk ipppd[771]: sent [0][LCP TermReq id=0x2 6c 69 6e 6b
> > 20 63 6c 6f 73 65 64]
> 
> Your end is closing the link for some reason.  Perhaps because
> no data was recieved, but that seems a little premature.
Err. Yes. That's because I gave an isdn-down after trying the ping. I
should have mentioned it explicitly or excluded it from the log, you're
not the only one responding in this way. My fault.
 > 
> > Feb 16 22:15:27 derk kernel: isdn_net: ippp0 connected 
> > Feb 16 22:15:27 derk kernel: isdn_net:chargetime of ippp0 now 348739 
> > Feb 16 22:15:34 derk kernel: isdn_net:local hangup ippp0 
> 
> Again, your end is hanging up :-(.
See above.
> 
> > -- from /var/log/messages --
> > 195.64.66.199^M  Our IP address: 195.64.67.129^M  Entering PPP mode^M 
> > Feb 16 22:15:28 derk ipppd[771]: MPPP negotiation, He: No We: No
> > Feb 16 22:15:28 derk ipppd[771]: ioctl(SIOCGIFADDR): Cannot assign
> > requested address
> 
> Not sure why that is happening.  Are you running ipppd as root?
I think so. Will check.
Thanks for the reply!
Cheers,
   Derk
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/