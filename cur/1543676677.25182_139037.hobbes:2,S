Date: Mon, 9 Jun 2003 14:08:34 -0700
From: Andrew Morton <>
Subject: Re: 2.5.70 (virgin) hangs running SDET
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/6/9/177

"Martin J. Bligh" <mbligh@aracnet.com> wrote:
>
> I thought this was specific to the -mjb tree for a while, but I can
> reproduce it pretty easily on virgin 2.5.70 (but 2.5.69 didn't do
> this). Andrew looked and pointed out it seems to be an i_sem (ISTR
> some mention of /proc somewhere too?). Got a good sysrq+t trace out
> of the virgin kernel (on 16x NUMA-Q) ... below:
The ps instance which is spinning on kernel_flag in proc_root_lookup is
what's holding things up.
Or is it spinning in proc_lookup() or proc_pid_lookup()?  I have a vague
feeling that I've seen these traces miss out the innermost stack slot...
Suggest:
a) Use CONFIG_SPINLINE, get a new sysrq-T trace
b) Enable spinlock debugging
c) Try disabling the sched_balance_exec() code.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/