Date: Thu, 27 Jul 2000 02:41:45 +0200 (METDST)
From: German Jose Gomez Garcia <>
Subject: Re: multimounting cdroms ???
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/7/26/139

On Wed, 26 Jul 2000, Alexander Viro wrote:
> On Wed, 26 Jul 2000, Rik van Riel wrote:
> 
> > Only one problem though.
> > 
> > A user can mount the same filesystem multiple times on the
> > same mountpoint, but will be unable to umount the filesystem
> > again ...
> > 
> > umount -f does the trick, but is restricted to root
> 
> ... but doing umount the same number of times you've done mount isn't ;-)
> 
> Actually, the more I'm looking at it, the more it seems that correct
> solution is to consider mount as
> 	if (nothing mounted)
> 		mount
> 	else if (mounted is not busy)
> 		replace
> 	else
> 		fail
> Makes sense for union-mounts too - normal mount is =, union is += ...
	I agree with you, and in any case, root should always totally
umount the fs (if it isn't busy of course), I mean, when the superuser
wants to umount a fs usually he/she really means "umount it now!" :-)
	I think of another problem, what if somebody has the idea of
something like
while true; do
 mount /cdrom
done 
how many times can a filesystem be mounted? (sorry if it is clear in the
sources, but I have no experience with fs/ )
	Regards,
	- german
---------------------------------------------------------------------------
German Gomez Garcia           | "This isn't right.  This isn't even wrong."
<german@pinon.ccu.uniovi.es>  |                        -- Wolfgang Pauli
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/