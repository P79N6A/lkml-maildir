Date: Fri, 29 Jul 2005 16:48:06 -0700
From: Andrew Morton <>
Subject: Re: OOM problems still left in 2.6.13-rc3
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/7/29/339

"Takashi Sato" <sho@bsd.tnes.nec.co.jp> wrote:
>
> Below is the comparison of the memory leak rate before and after this
> fix.  We counted them from (Active+Inactive)-(Cached+Buffers+SwapCached
> +Mapped), which are in /proc/meminfo.
> ---------------------------------------------------------------------
> Linux 2.6.13-rc3 (including Andrew's patch):
>   leaked-rate   = 4869 KB/h
>   (leaked memory = 53564 KB, 11 hours)
> 
> My patch applied:
>   leaked-rate   = 213 KB/h
>   (leaked memory = 1492 KB, 7 hours) 
> ---------------------------------------------------------------------
What workload are you using here?
Be aware that due to truncate-vs-commit activity, ext3 can leave anonymous,
zero-refcount, unused pages on the page LRU.  They will appear to have
leaked, but the VM can trivially reclaim them so they're not really leaked
at all.
At least that's the way it's _supposed_ to work.  It might of course be
broken.  But it's not possible to say that the system has really leaked
pages unless you first put a lot of memory reclaim pressure on the machine
to try to reclaim those oddball pages.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/