Date: Tue, 7 Nov 2006 13:31:38 -0800
From: "Robin H. Johnson" <>
Subject: Re: e1000/ICH8LAN weirdness - no ethtool link until initially forced up
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/11/7/269

On Tue, Nov 07, 2006 at 07:51:22AM -0800, Auke Kok wrote:
> >I think you should cc e1000 maintainers, and perhaps provide a patch....
> I've read it and not come up with an answer due to some other issues at 
> hand. E1000 hardware works differently and this has been asked before, but 
> the cards itself are in low power state when down. Changing this to bring 
> up the link would make the card start to consume lots more power, which 
> would automatically suck enormously for anyone using a laptop.
> 
> Unfortunately, we have no way to distinguish directly between mobile and 
> non-mobile adapters, since they are usually the same.
> 
> Your application should really `ifconfig up` the device before checking for 
> link.
Actually pushing the link up in userspace doesn't specifically help my
applications, as I care about actual link status (as reported by
ethtool).
Is there no way to keep the link status correct (within 0.5 seconds),
without bringing the card to full power? Maybe a timer that fires a
proper check (with the power implications).
Would a patch that adds a modparam (not enabled by default) running the
behavior I'm after, be acceptable, so the e1000 driver can act identical
to all of the other drivers?
-- 
Robin Hugh Johnson
E-Mail     : robbat2@gentoo.org
GnuPG FP   : 11AC BA4F 4778 E3F6 E4ED  F38E B27B 944E 3488 4E85
[unhandled content-type:application/pgp-signature]