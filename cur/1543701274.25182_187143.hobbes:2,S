Date: Tue, 30 Dec 2003 17:23:35 -0500
From: Rob Love <>
Subject: Re: no DRQ after issuing WRITE was Re: 2.4.23-uv3 patch set released
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/12/30/188

On Tue, 2003-12-30 at 16:57, Linus Torvalds wrote:
> Is CONFIG_PREEMPT on in the cases, and is there really no locking 
> anywhere? Preempting in the middle of the data transfer phase sounds like 
> a fundamentally bad idea, and maybe the code needs a few preempt 
> disable/enable pairs somewhere?
Is the kernel patched with kernel preemption?  It is not in stock 2.4.
Anyhow, if interrupts are disabled, preemption should be disabled (we
check for that condition in both preempt_schedule() and
return_from_intr).
If interrupts are not disabled, then preempting would definitely be a
bad thing.  But I would think, for the same reasons you do not want to
preempt, you would want interrupts disabled ..
	Rob Love
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/