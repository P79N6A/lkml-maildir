Date: Tue, 21 Feb 2006 21:14:01 -0500
From: Jeff Bailey <>
Subject: Re: [klibc] [PATCH] initramfs: multiple CPIO unpacking fix
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/2/21/364

Le mercredi 22 février 2006 à 10:45 +1100, Michael Neuling a écrit :
> The following patch unlinks (deletes) files, symlinks, FIFOs, devices
> etc before writing them when extracting CPIOs.  It doesn't delete
> directories.  This stops weird behaviour like:
>  1) writing through symlinks created in earlier CPIOs. eg foo->bar in
>     the first CPIO.  Having foo as a non link in a subsequent CPIO,
>     results in bar being written and foo remaining as a symlink.  
I've tended to think of this as a feature, actually.  In Ubuntu, for
instance, we might have 2.6.15-8 and 2.6.15-9 which represent different
ABIs from security updates or other changes.  If I have a module that is
intended to be compatible with both, I might setup /lib/modules/generic
to be a symlink to /lib/modules/2.6.15-9/ and unpack the modules after
the symlink is expected to be there.
(I don't think we use this feature right now, but I had tested it and
noted it before.  It's very convenient, since it's the exact same
behaviour that dpkg itself has)
Tks,
Jeff Bailey
* Canonical Ltd * Ubuntu Service and Support * +1 514 691 7221 *
Linux for Human Beings.
[unhandled content-type:application/pgp-signature]