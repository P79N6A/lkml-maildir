Date: Sun, 29 Apr 2007 23:05:27 +0200 (CEST)
From: Jiri Slaby <>
Subject: [PATCH 18/21] Char: cyclades, fix tty device unregister
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/4/29/317

cyclades, fix tty device unregister
put_tty_driver after unregistering devices
Signed-off-by: Jiri Slaby <jirislaby@gmail.com>
---
commit 0d1d9602e00c115e03e04ee01f3ecc92adbbf504
tree dbb15b2d6088652a00d30b717bd476ecc697da08
parent fb2b658e64e69e56c52b1242b9957e9d96f28ade
author Jiri Slaby <jirislaby@gmail.com> Sun, 29 Apr 2007 11:27:08 +0200
committer Jiri Slaby <jirislaby@gmail.com> Sun, 29 Apr 2007 11:27:08 +0200
 drivers/char/cyclades.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)
diff --git a/drivers/char/cyclades.c b/drivers/char/cyclades.c
index 620e17c..f23d481 100644
--- a/drivers/char/cyclades.c
+++ b/drivers/char/cyclades.c
@@ -5285,8 +5285,6 @@ static void __exit cy_cleanup_module(void)
 		printk(KERN_ERR "failed to unregister Cyclades serial "
 				"driver(%d)\n", e1);
 
-	put_tty_driver(cy_serial_driver);
-
 #ifdef CONFIG_PCI
 	pci_unregister_driver(&cy_pci_driver);
 #endif
@@ -5310,6 +5308,8 @@ static void __exit cy_cleanup_module(void)
 				tty_unregister_device(cy_serial_driver, e1);
 		}
 	}
+
+	put_tty_driver(cy_serial_driver);
 } /* cy_cleanup_module */
 
 module_init(cy_init);
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/