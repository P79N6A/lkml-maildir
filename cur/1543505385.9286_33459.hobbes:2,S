Date: Tue, 10 Aug 1999 09:04:45 +0100
From: "Jones D (ISaCS)" <>
Subject: fbcon cruft removal (continued).
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/8/12/2

A week or so ago, I sent the following patch..
diff -urN linux/drivers/video/fbcon.c linux.dj/drivers/video/fbcon.c
--- linux/drivers/video/fbcon.c	Mon Aug  9 07:11:23 1999
+++ linux.dj/drivers/video/fbcon.c	Fri Aug  6 21:45:35 1999
@@ -1364,7 +1364,7 @@
 	p->dispsw->clear_margins(conp, p, 0);
     if (logo_shown == -2) {
 	logo_shown = fg_console;
+	fbcon_clear(conp, LOGO_W, 0, LOGO_H, p->var.xres-LOGO_W);
 	fbcon_show_logo(); /* This is protected above by initmem_freed */
 	update_region(fg_console,
 		      conp->vc_origin + conp->vc_size_row * conp->vc_top,
I found it necessary, as without it, I get text to the right of the
penguin logo during booting, which looks annoying.
The text is printed by the BIOS during startup, strings such as
"Updating ESCD... Success" etc..
After posting the patch, one of the framebuffer maintainers mailed me,
and mentioned that the patch is the incorrect way to do things,
and the correct way is too complex. Can someone suggest an alternative
to the above which would be acceptable ?
Right now, all I can think of otherwise is to change fbcon_show_logo()
so that it pads the right side of the logo with space.
This wasn't a problem until the logo was moved from the right hand side
of the screen to the left, as it used to clear the screen first.
regards,
Dave.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/