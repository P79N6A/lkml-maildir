Date: Sat, 20 Nov 2004 11:33:25 -0800
From: William Lee Irwin III <>
Subject: Re: page fault scalability patch V11 [0/7]: overview
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/11/20/143

On Sat, 20 Nov 2004, William Lee Irwin III wrote:
>> "The perfect is the enemy of the good."
On Sat, Nov 20, 2004 at 11:16:12AM -0800, Linus Torvalds wrote:
> Yes. But in this case, my suggestion _is_ the good. You seem to be pushing 
> for a really horrid thing which allocates a per-cpu array for each 
> mm_struct. 
> What is it that you have against the per-thread rss? We already have 
> several places that do the thread-looping, so it's not like "you can't do 
> that" is a valid argument.
Okay, first thread groups can share mm's, so it's worse than iterating
over a thread group. Second, the long loops under tasklist_lock didn't
stop causing rwlock starvation because what patches there were to do
something about them didn't get merged.
I'm not particularly "stuck on" the per-cpu business, it was merely the
most obvious method of splitting the RSS counter without catastrophes
elsewhere. Robin Holt's 2.4 performance studies actually show that
splitting the counter is not even essential.
-- wli
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/