Date: Fri, 04 Apr 2003 22:05:04 +0200
From: Stefano Pettini <>
Subject: ip_conntrack_ftp and ip_nat_ftp module problem
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/4/4/154

Hi Kernel guys!
I'm running a 2.4.20 (i686, configured with "make menuconfig") and I 
have the following problem:
If I compile into the kernel ip_conntrack module, and its ftp and irc 
extensions, I can't insert ip_nat_ftp because it "can't find 
ip_conntrack_ftp module". If I want ftp nat and connection tracking, I 
have to compile ip_conntrack_* as modules because it seems that ip_nat_* 
are always compiled as modules instead of being compiled directly into 
the kernel when requested to do so, like ip_conntrack_*.
I think it's only a makefile problem. Can you fix it for 2.4.21 ?? I see 
"CONFIG_IP_NF_NAT_IRC=m" in config file, but that line doesn't exist in 
menuconfig.
Thank you very much.
PS.
Another question:
To have a working FTP or IRC NAT and connection tracking, I have to 
insert their modules (*_ftp and *_irc) manually with insmod or modprobe. 
lsmod tells they're usage count is always 0, even if they "work". Why 
can't those modules be automagically probed when required, like every 
other module, for example when I add a nat or a state rule with 
iptables? This inserts ip_conntrack, but not ip_conntrack_* and 
ip_nat_*. And with their usage count = 0, there's a risk that rmmod -a 
removes them.
Stefano from Rome
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/