Date: Mon, 22 Jan 2007 19:03:12 -0200
From: Henrique de Moraes Holschuh <>
Subject: Re: SATA hotplug from the user side ?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/1/22/205

On Mon, 22 Jan 2007, Soeren Sonnenburg wrote:
> - For SIL3114 and SIL3124 you don't have to run any commands at all. It
> should notice when you yank the cable, or plug in a new device. All you
> have to do is to stop using the devices before unplugging, e.g. unmount
> partitions on the disk or remove the disk from a dm setup). One can
> validate which disks are attached using ``scsiadd -p''. Note that the
> device name may change from e.g. /dev/sdd to /dev/sde on a
> remove/reinsert cycle (this can be fixed by using udev-provided
> persistent names). Also note that it is perfectly normal to see messages
> like this in dmesg:
Does SATA electrical conector keying let the disk firmware unload heads
before the user manages to pull it out enough to sever power?  If it does
not, the drive will do an emergency head unload, which is not good and will
likely reduce the drive's lifetime.
Using hdparm -Y before the unplug, or scsiadd -r (on a kernel that has
Tejun's new patch to optionally issue an START_STOP_UNIT to the SCSI device
enabled) is probably a good idea.  Unless it is a shared SATA port (I don't
know if such a thing exists yet) and another box is talking to the disk,
etc.
-- 
  "One disk to rule them all, One disk to find them. One disk to bring
  them all and in the darkness grind them. In the Land of Redmond
  where the shadows lie." -- The Silicon Valley Tarot
  Henrique Holschuh
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/