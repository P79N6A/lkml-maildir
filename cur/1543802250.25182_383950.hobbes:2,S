Date: Mon, 9 Jan 2006 21:04:21 +0000 (GMT)
From: Hugh Dickins <>
Subject: Re: 2.6.15-mm
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/1/9/329

On Mon, 9 Jan 2006, Mike Christie wrote:
> 
> Oops yeah, that is right. We switched from __get_free_pages to alloc_pages.
> 
> Will alloc_pages() always return lowmem pages or can it return highmem pages?
> Just wondering becuase I guess if it can return highmem pages I need to
> replace the page_adress calls to kmap/kunmap ones right?
Good thinking, but the page_address patch is safe for now.  You can only
get highmem from alloc_pages if you say __GFP_HIGHMEM to it (perhaps
inside GFP_HIGHUSER), and at present you're not.  You probably should,
depending on what the underlying device can handle: at present there's
lowDma choosing GFP_DMA, and that probably should be extended to cover
other possibilities.  I'm not familiar with the driver end of these
things, James would give much better advice on how to proceed there:
or perhaps he'll advise that it's best left simply as is (with the
page_address fix) after all.
Hugh
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/