Date: Sun, 26 Mar 2000 20:26:37 -0500
From: Brian Gerst <>
Subject: Re: wine and 2.3.99-pre3 followup (reproduced) (FAT problem?)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/3/26/162

Lawrence Manning wrote:
> 
> > > Ok, I followed all your instructions... But I don't think the problem is
> > > in do_exit.  I mucked up ;( I managed to completely miss an oops!  My wine
> > > stuff is running of a Win98 FAT32 partition.  Heres the oops in my log,
> > > generated about the same time wine crashed:
> >
> > ;-/ I suspect that I know what happened. Try to create an strace for wine
> > and grep for open/close/read/write/lessek/mmap/truncate.
> 
> The trace is 15megs ;) cos there are lots of 1 bytes reads.  Without read
> and write it is 53K. I sent the 53K one to you by private email, along
> with the oops that was generated. (it looks slightly different to before,
> or else I've gone blind...) I hope you know what do with it :)
The problem is in fat_get_block().  It seems that the inode->mmu_private
is getting screwed up.  The changes which appeared in 2.3.43 and 2.3.45
seem to be responsible.  The problem occurs in the msync() system call:
>>EIP; c881839c <[fat]fat_get_block+60/e4>   <=====
Trace; c013002b <__block_write_full_page+97/120>
Trace; c013095e <block_write_full_page+46/104>
Trace; c0124aa6 <filemap_write_page+26/44>
Trace; c0124da7 <filemap_sync+2bf/368>
Trace; c0124f1a <msync_interval+2e/5c>
Trace; c012502f <sys_msync+e7/16c>
Trace; c010ae8c <system_call+34/38>
-- 
						Brian Gerst
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/