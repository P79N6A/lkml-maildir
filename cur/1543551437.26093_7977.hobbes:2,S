Date: Fri, 13 Oct 2000 21:01:56 +0200
From: Benjamin Herrenschmidt <>
Subject: Re: dual head r128
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/10/13/46

>Or, more general, treat [PCI] I/O space similar to [PCI] memory space. Just
>like we must use ioremap() for memory space:
>
>    cookie = ioremap(memory_space_address, size);
>    x = readb(cookie+offset);
>
>we could have ioportremap() for I/O space:
>
>    cookie = ioportremap(io_space_address, size);
>    x = inb(cookie+offset);
>
>On PC, ioportremap(x) would evaluate to (x). On other platforms, we can do
>whatever we want.
That would make us fall in the same trap as we are now with multiple IO
busses having overlapping IO mappings. (Basically, every IO bus on some
multi-bus systems have 0->64k IO range). ioportremap() cannot "know" on
which bus the device is, except if we also pass the pci_dev* parameter
(and NULL for ISA).
Ben.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/