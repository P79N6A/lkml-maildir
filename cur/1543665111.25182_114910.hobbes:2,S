Date: 06 Mar 2003 17:14:15 +0300
From: Alex Tomas <>
Subject: [PATCH] minor memleak in ext3 (catched by smatch)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/3/6/100

This minor memory leak has been catched by smatch.
Thanks to Dan Carpenter!
--- linux/fs/ext3/super.c	Mon Feb 24 17:47:45 2003
+++ super.c	Thu Mar  6 17:09:31 2003
@@ -1154,7 +1154,7 @@
 		if (!bh) {
 			printk(KERN_ERR 
 			       "EXT3-fs: Can't read superblock on 2nd try.\n");
-			return -EINVAL;
+			goto out_fail;
 		}
 		es = (struct ext3_super_block *)(((char *)bh->b_data) + offset);
 		sbi->s_es = es;
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/