Date: Mon, 11 Jun 2001 23:03:01 +1000
From: Andrew Morton <>
Subject: Re: 3C905b partial  lockup in 2.4.5-pre5 and up to 2.4.6-pre1
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/6/11/41

"David S. Miller" wrote:
> 
> Jeff Garzik writes:
>  > > [note I've not found anything in 2.4.5 where netif_carrier_ok prevents
>  > > the net layers queueing packets for an interface, and forwarding them
>  > > on for transmission].
>  >
>  > we want netif_carrier_{on,off} to emit netlink messages.  I don't know
>  > how DaveM would feel about such getting implemented in 2.4.x though,
>  > even if well tested.
> 
> If someone sent me patches which did this (and minded the
> restrictions, if any, this adds to the execution contexts in
> which the carrier on/off stuff can be invoked) I would consider
> the patch seriously for 2.4.x
It'd need to be callable from interrupt context - otherwise
each device/driver which has link status change interrupts
will need to implement some form of interrupt->process context
trick.
On the DHCP/DNS issue which Ben raised - MII-based NICs can take up
to 3.5 seconds before they start sending packets, *after* their
open() has returned success.  This is within the letter of the law
(ethernet can drop packets) but it'd be nicer to userspace if we
were to not return from the open until the interface was actually
usable.
Jamal has a patch somewhere which does the netlink status
notification.  If he cares to share it I'll take a look.
-
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/