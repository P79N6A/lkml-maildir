Date: Sun, 11 Jan 2009 13:07:35 -0500
From: Mark Lord <>
Subject: Re: Kernelmessage to usbstick?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2009/1/11/239

Oliver Neukum wrote:
> Am Saturday 10 January 2009 23:53:15 schrieb Andi Kleen:
>> Hans de Bruin <bruinjm@xs4all.nl> writes:
>>
>>> Would it be possible to send kernel messages to an usbstick? On
>>> poweroff my laptop displays a kernel trace and a final message:
>>> poweroff[3114] exited with preempt_count 2
>>> /etc/rc.d/rc.0: line 265: 3114 Segementation fault /sbin/poweroff.
>>> I don't have a serial cable within reach, but plenty of usbsticks.
>> There's a mtdoops.c indeed, but it currently only works on
>> MTD controlled flash devices, not usb sticks.
>>
>> However usb sticks would need the USB subsystem to be running and it's
>> unlikely that will be the case really late in poweroff.  So it might
>> not help.
> 
> USB in turn needs PCI, interrupts and DMA.
..
Dunno about an oops, but I currently use a USB device to
display debug messages from the shutdown procedure,
all the way to kernel_halt().
So long as the Oops doesn't kill too much low level stuff,
it's probably feasible.  Except for the very slow write times
for many USB storage devices.