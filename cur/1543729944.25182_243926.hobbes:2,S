Date: Fri, 20 Aug 2004 20:51:07 -0400
From: Linh Dang <>
Subject: Re: [patch] voluntary-preempt-2.6.8.1-P5
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/8/20/350

K. R. Foley <kr@cybsft.com> wrote:
> Ingo Molnar wrote:
>> i've uploaded the -P5 patch:
>>
>> 
http://redhat.com/~mingo/voluntary-preempt/voluntary-preempt-2.6.8.1-P5
>>
>
> Here is a latency trace generated by the NFS compile in the
> stress-kernel. It is ~1.7 ms which doesn't really surprise me for
> the NFS compile. I am going to take the NFS compile out of the test
> now and see what else falls out.
>
> If it would be useful for me to provide additional information with
> this, please let me know.
>
> 
http://www.cybsft.com/testresults/2.6.8.1-P5/latency_trace1.txt
You don't need to do a NFS compilation to trigger it. just to a "find"
on a huge NFS-mounted tree and you will see it.
Another candidate for cond_resched() is the loop in nfs_readdir(). It
seems safe to do so be cause it calls readdir_search_pagecache() which
would call schedule().
Regards
-- 
Linh Dang
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/