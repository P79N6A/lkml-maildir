Date: 5 Jun 2007 07:57:11 -0000
From: "Samuel Ortiz" <>
Subject: RE: 2.6.22-rc: regression: no irda0 interface (2.6.21 was OK), smsc does not find chip
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/6/5/40

Hi Linus,
On 6/5/2007, "Linus Walleij (LD/EAB)" <linus.walleij@ericsson.com>
wrote:
>> > Ok, FIR and SIR are definitey mixed up. So, now could you  please
>try 
>> > Bjorn's patch ?
>> 
>> does not work.
>
>It looks like the purpose of the patch is to provide more printouts
>not to fix the problem, please mail your dmesg post-patch.
Here it is (from an answer from Andrey to Bjorn, you were not included
yet):
Detected unconfigured Toshiba laptop with ALi ISA bridge SMSC IrDA chip,
pre-configuring device.
Activated ALi 1533 ISA bridge port 0x02e8.
Activated ALi 1533 ISA bridge port 0x02f8.
pnp: Device 00:0a activated.
smsc_ircc_pnp_probe(): fir 0x100 sir 0x2e8 dma 1 irq 5
High: 0x11, Chip 0x0
smsc_ircc_present(), addr 0x0100 - no device found!
pnp: Device 00:0a disabled.
Andrey, in addition to Bjorn's patch, could you also apply this one and
try again:
diff --git a/drivers/net/irda/smsc-ircc2.c b/drivers/net/irda/smsc-ircc2.c
index 31c6233..800562a 100644
--- a/drivers/net/irda/smsc-ircc2.c
+++ b/drivers/net/irda/smsc-ircc2.c
@@ -2463,7 +2463,7 @@ static struct smsc_ircc_subsystem_configuration
subsystem_
                .subvendor = 0x1179,
                .subdevice = 0xffff, /* 0xffff is "any" */
                .sir_io = 0x02e8,
-               .fir_io = 0x02f8,
+               .fir_io = 0x100,
                .fir_irq = 0x07,
                .fir_dma = 0x03,
                .cfg_base = 0x002e,
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/