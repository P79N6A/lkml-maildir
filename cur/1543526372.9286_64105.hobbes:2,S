Date: Fri, 18 Feb 2000 10:07:16 +0100 (MET)
From: Giacomo Catenazzi <>
Subject: 2.3.46, scsi_mod BUG [Was: Re: [2.3.4[45], imm module] kernel BUG at...
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/2/18/71

On 2.3.46 I found a similar bug, but I cannot run 'insmod imm' twice
or more time. Now scsi_mod is initilizing, with 2.3.4[45] was ok, but
regarding last bug-report, i see that the error was from scsi_mod (see
EIP). 
The bug is in scsi_mod. It is not need the module imm or a ZIP attached,
nor parallel port modules. [modutils-2.3.9]
More info:
Script started on Thu Feb 17 23:45:54 2000
root@~# lsmod
Module                  Size  Used by
root@~# insmod fat vfat
Using /lib/modules/2.3.46/fs/fat.o
root@~# insmod scsi_mod
Using /lib/modules/2.3.46/scsi/scsi_mod.o
Segmentation fault
root@~# lsmod
Module                  Size  Used by
scsi_mod               69764   1  (initializing)
fat                    31168   0  (unused)
root@~# exit
exit
Script done on Thu Feb 17 23:48:02 2000
On system.log:
Feb 17 23:46:40 cate3 kernel: kernel BUG at /usr/src/linux/include/linux/mm.h:302!
Feb 17 23:46:40 cate3 kernel: invalid operand: 0000
Feb 17 23:46:40 cate3 kernel: CPU:    0
Feb 17 23:46:40 cate3 kernel: EIP:    0010:[<c2a21a1e>]
Feb 17 23:46:40 cate3 kernel: EFLAGS: 00010082
Feb 17 23:46:40 cate3 kernel: eax: 00000035   ebx: 00000000   ecx: 0000001a   edx: 00000021
Feb 17 23:46:40 cate3 kernel: esi: 00000246   edi: c0595c01   ebp: 00000001   esp: c09ddf30
Feb 17 23:46:40 cate3 kernel: ds: 0018   es: 0018   ss: 0018
Feb 17 23:46:40 cate3 kernel: Process insmod (pid: 335, stackpage=c09dd000)
Feb 17 23:46:40 cate3 kernel: Stack: c2a280c7 c2a28120 0000012e c2a19000 00000000 c2a19051 c2a19048 c2a1b10d 
Feb 17 23:46:40 cate3 kernel:        c0118df5 c09dc000 0807be48 0805d960 bfffea4c 0808bf5e c0775000 c07ac000 
Feb 17 23:46:40 cate3 kernel:        ffffffea 00000008 00000048 c2a10000 c2a19048 00011084 00000000 00000000 
Feb 17 23:46:40 cate3 kernel: Call Trace: [<c2a280c7>] [<c2a28120>] [<c2a19000>] [<c2a19051>] [<c2a19048>] [<c2a1b10d>] [sys_init_module+1321/1532] 
Feb 17 23:46:40 cate3 kernel:        [<c2a10000>] [<c2a19048>] [system_call+52/56] 
Feb 17 23:46:40 cate3 kernel: Code: 0f 0b 83 c4 0c 31 d2 b8 f0 00 1f c0 e8 e9 74 70 fd 89 c7 85 
With ksymoops:
ksymoops 2.3.3 on i686 2.3.46.  Options used
     -V (default)
     -k /proc/ksyms (default)
     -l /proc/modules (default)
     -o /lib/modules/2.3.46/ (default)
     -m /boot/System.map (specified)
invalid operand: 0000
CPU:    0
EIP:    0010:[<c2a21a1e>]
Using defaults from ksymoops -t elf32-i386 -a i386
EFLAGS: 00010082
eax: 00000035   ebx: 00000000   ecx: 0000001a   edx: 00000021
esi: 00000246   edi: c0595c01   ebp: 00000001   esp: c09ddf30
ds: 0018   es: 0018   ss: 0018
Process insmod (pid: 335, stackpage=c09dd000)
Stack: c2a280c7 c2a28120 0000012e c2a19000 00000000 c2a19051 c2a19048 c2a1b10d 
       c0118df5 c09dc000 0807be48 0805d960 bfffea4c 0808bf5e c0775000 c07ac000 
       ffffffea 00000008 00000048 c2a10000 c2a19048 00011084 00000000 00000000 
Call Trace: [<c2a280c7>] [<c2a28120>] [<c2a19000>] [<c2a19051>] [<c2a19048>] [<c2a1b10d>] [sys_init_module+1321/1532] 
       [<c2a10000>] [<c2a19048>] [system_call+52/56] 
Code: 0f 0b 83 c4 0c 31 d2 b8 f0 00 1f c0 e8 e9 74 70 fd 89 c7 85 
>>EIP; c2a21a1e <[scsi_mod]scsi_init_minimal_dma_pool+96/148>   <=====
Trace; c2a280c7 <[scsi_mod]RCSid+4e7/113f>
Trace; c2a28120 <[scsi_mod]RCSid+540/113f>
Trace; c2a19000 <[fat]__module_kernel_version+1640/1690>
Trace; c2a19051 <[scsi_mod].text.start+1/c8>
Trace; c2a19048 <[fat]__module_kernel_version+1688/1690>
Trace; c2a1b10d <[scsi_mod]init_module+5/b4>
Trace; c2a10000 <_end+277e8f0/277e940>
Trace; c2a19048 <[fat]__module_kernel_version+1688/1690>
Code;  c2a21a1e <[scsi_mod]scsi_init_minimal_dma_pool+96/148>
00000000 <_EIP>:
Code;  c2a21a1e <[scsi_mod]scsi_init_minimal_dma_pool+96/148>   <=====
   0:   0f 0b                     ud2a      <=====
Code;  c2a21a20 <[scsi_mod]scsi_init_minimal_dma_pool+98/148>
   2:   83 c4 0c                  add    $0xc,%esp
Code;  c2a21a23 <[scsi_mod]scsi_init_minimal_dma_pool+9b/148>
   5:   31 d2                     xor    %edx,%edx
Code;  c2a21a25 <[scsi_mod]scsi_init_minimal_dma_pool+9d/148>
   7:   b8 f0 00 1f c0            mov    $0xc01f00f0,%eax
Code;  c2a21a2a <[scsi_mod]scsi_init_minimal_dma_pool+a2/148>
   c:   e8 e9 74 70 fd            call   fd7074fa <_EIP+0xfd7074fa> c0128f18 <__alloc_pages+0/354>
Code;  c2a21a2f <[scsi_mod]scsi_init_minimal_dma_pool+a7/148>
  11:   89 c7                     mov    %eax,%edi
Code;  c2a21a31 <[scsi_mod]scsi_init_minimal_dma_pool+a9/148>
  13:   85 00                     test   %eax,(%eax)
	giacomo
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/