Date: Wed, 16 Feb 2000 17:34:32 +0100 (MET)
From: Alberto Garcia Gonzalez <>
Subject: Problem with CD+
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/2/16/106

        Hi, I noticed a strange thing while burning a CD with my Linux
2.2.14 in my AMD K6-2.
        I was using cdrecord and mkisofs 1.8a30 from Debian Potato, and
was trying to make a CD-Plus with 3 audio tracks and a data track (though
I _think_ that the same problem appears with any multisession CD).
        I took the following steps:
        1) cdrecord -v -multi speed=4 dev=1,0 -audio *.wav
        2) cdrecord -msinfo dev=1,0    (I obtained 0,140693)
        3) mkisofs -a -J -r -f -V "Label" -C 0,140693 -o cdrom.iso dir/
        4) cdrecord -v -multi speed=4 dev=1,0 cdrom.iso
        The CD-ROM was burned succesfully and now it's working fine, I can
mount it and I can play the audio tracks.
        Now, here's the weird thing:
# mount -t iso9660 cdrom.iso /cdrom -o loop
ISOFS: unable to read i-node block
ISOFS: unable to read i-node block
isofs_read_super: root inode not initialized
mount: wrong fs type, bad option, bad superblock on /dev/loop0,
       or too many mounted file systems
 ---
        cdrom.iso is the same file I created before. It is normal that I
can't mount this file directly, because it's an ISO image created for a
CD-Plus, using -C parameter in mkisofs.
        Now I insert the CD I've just burned (it has to be the *same* CD,
this doesn't seem to happen with any other CD) in my IDE CD-ROM drive and
mount it. My fstab entry for /cdrom is:
/dev/cdrom  /cdrom iso9660  user,exec,nosuid,noauto,check=r,ro  0  0
# mount /cdrom
isofs_read_super: root inode not initialized
mount: wrong fs type, bad option, bad superblock on /dev/cdrom,
       or too many mounted file systems
        Uh, oh, this wasn't supposed to be this way. I have to notice that
if I mount any other CD after trying to mount the file cdrom.iso and
*before* mounting the CD-Plus, the problem seems to disappear, even if I
try to mount the CD-Plus.
        Now I insert a normal MS-DOS floppy on the disk drive and try:
# mount /floppy
mount: block device /dev/fd0 is write-protected, mounting read-only
        In /etc/fstab, /floppy entry is:
        /dev/fd0   /floppy  vfat   user,noexec,noauto   0   0
# umount /floppy
Unable to handle kernel NULL pointer dereference at virtual address
00000004
current->tss.cr3 = 03ab2000, %cr3 = 03ab2000
*pde = 00000000
Oops: 0002
CPU:    0
EIP:    0010:[<c0142dc4>]
EFLAGS: 00010286
eax: 00000000   ebx: c049da90   ecx: c049da90   edx: 00000000
esi: c3bfbeec   edi: 00000000   ebp: 00000000   esp: c3bfbe4c
ds: 0018   es: 0018   ss: 0018
Process umount (pid: 688, process nr: 31, stackpage=c3bfb000)
Stack: c0109ce9 c0125968 c23a6ae0 c020121c c01098e8 c0130cec c049da90
c387d768
       c009b108 c3bfbeec c0096998 c2db9000 00000018 00000018 c3bfbeec
c3bfbeec
       c2db903c c0130d1c c049da90 c3bfbeec c2db9000 00000000 c3bfbeec
c3bfbeec
Call Trace: [<c0109ce9>] [<c0125968>] [<c01098e8>] [<c0130cec>]
[<c0130d1c>] [<c0130e0c>] [<c0130e1a>]
       [<c0142ead>] [<c01280fd>] [<c0131288>] [<c01281a6>] [<c0128156>]
[<c01282c5>] [<c01282e6>] [<c0108aa5>]
       [<c01089a0>]
Code: 89 50 04 89 02 5b 83 c4 18 c3 89 f6 83 ec 18 53 8b 5c 24 20
Fallo de segmento
 -------
        Now if I try to mount/umount any filesystem, the process gets
locked:
# ps ax|grep mount
  173 ?        S      0:00 /usr/sbin/rpc.mountd
  217 tty1     D      0:00 mount /cdrom
        If I try to reboot the system, it stops at the message 'unmounting
filesystems', and I have to use the magic SysRq key to restart the
machine.
        I think that's all. Thanks for reading my message.
	PS: I'm not subscribed to linux-kernel, sorry if I did
something wrong.
--
    email: bertogg@yahoo.com
    email: infagg00@ucv.udc.es              -= Alberto Garcia =-
    
http://www.cryogen.com/berto
    Clave publica PGP disponible           Fidonet: 2:348/105.108
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/