Date: Sat, 28 Aug 1999 10:34:06 +0200
From: Matthias Riese <>
Subject: [PATCH] misbehaviour of ext2_notify_change
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/8/28/10

Stumbled about this while updating ACL patch to 2.2.12:
IMHO the flags in inode->u.ext2_i.i_flags arenÅ½t 
exlusive, are they?
Matthias Riese
--- /usr/src/linux/fs/ext2/inode.c.orig	Mon Aug  9 21:04:57 1999
+++ /Net/tiger/usr/home/punk/inode.c	Sat Aug 28 10:29:04 1999
@@ -761,28 +761,28 @@
 		flags = iattr->ia_attr_flags;
 		if (flags & ATTR_FLAG_SYNCRONOUS) {
 			inode->i_flags |= MS_SYNCHRONOUS;
-			inode->u.ext2_i.i_flags = EXT2_SYNC_FL;
+			inode->u.ext2_i.i_flags |= EXT2_SYNC_FL;
 		} else {
 			inode->i_flags &= ~MS_SYNCHRONOUS;
 			inode->u.ext2_i.i_flags &= ~EXT2_SYNC_FL;
 		}
 		if (flags & ATTR_FLAG_NOATIME) {
 			inode->i_flags |= MS_NOATIME;
-			inode->u.ext2_i.i_flags = EXT2_NOATIME_FL;
+			inode->u.ext2_i.i_flags |= EXT2_NOATIME_FL;
 		} else {
 			inode->i_flags &= ~MS_NOATIME;
 			inode->u.ext2_i.i_flags &= ~EXT2_NOATIME_FL;
 		}
 		if (flags & ATTR_FLAG_APPEND) {
 			inode->i_flags |= S_APPEND;
-			inode->u.ext2_i.i_flags = EXT2_APPEND_FL;
+			inode->u.ext2_i.i_flags |= EXT2_APPEND_FL;
 		} else {
 			inode->i_flags &= ~S_APPEND;
 			inode->u.ext2_i.i_flags &= ~EXT2_APPEND_FL;
 		}
 		if (flags & ATTR_FLAG_IMMUTABLE) {
 			inode->i_flags |= S_IMMUTABLE;
-			inode->u.ext2_i.i_flags = EXT2_IMMUTABLE_FL;
+			inode->u.ext2_i.i_flags |= EXT2_IMMUTABLE_FL;
 		} else {
 			inode->i_flags &= ~S_IMMUTABLE;
 			inode->u.ext2_i.i_flags &= ~EXT2_IMMUTABLE_FL;
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/