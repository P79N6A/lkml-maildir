Date: Fri, 11 Feb 2005 21:04:45 -0600
From: Corey Minyard <>
Subject: [PATCH] Fix IPMI LAN bridging
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/2/11/232

The size of LAN bridged messages was not being returned properly from
the function that calculated address sizes.  This fixes the problem.
Signed-off-by: Corey Minyard <minyard@acm.org>
Index: linux-2.6.11-rc3/drivers/char/ipmi/ipmi_msghandler.c
===================================================================
--- linux-2.6.11-rc3.orig/drivers/char/ipmi/ipmi_msghandler.c
+++ linux-2.6.11-rc3/drivers/char/ipmi/ipmi_msghandler.c
@@ -480,6 +480,9 @@
 		return sizeof(struct ipmi_ipmb_addr);
 	}
 
+	if (addr_type == IPMI_LAN_ADDR_TYPE)
+		return sizeof(struct ipmi_lan_addr);
+
 	return 0;
 }
 