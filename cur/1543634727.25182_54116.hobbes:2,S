Date: Mon, 24 Jun 2002 14:03:06 -0500 (CDT)
From: Oliver Xymoron <>
Subject: RE: driverfs is not for everything! (was:  [PATCH] /proc/scsi/map  )
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/6/24/72

On Mon, 24 Jun 2002, Grover, Andrew wrote:
> > From: Roman Zippel [mailto:zippel@linux-m68k.org]
> > On Mon, 24 Jun 2002, Grover, Andrew wrote:
> > > If a device can be accessed by multiple machines
> > concurrently, it should not
> > > be in driverfs.
> >
> > I don't think it's that easy. If the computer wakes up again,
> > devices have
> > to be reinitialised in the right order, e.g. iSCSI needs a
> > working network
> > stack and devices.
>
> Would the iSCSI device be a child of the network device? That would ensure
> that the NIC was fully restarted before the iSCSI device.
If by network device you mean NIC, the answer is no. Think redundant
routing. This problem already exists in the SCSI realm (multipathed
arrays) and there's I remember reading there's some multipath stuff in
place, but I doubt driverfs has really thought about it.
The multipath problem means our tree is really a DAG. Which may or may not
be a problem.
> > Another problem is how to properly shutdown the
> > machine. Scripts now "know" that nfs requires the network,
> > but how does
> > the script find out, that /dev/sdb2 is an iSCSI device, so that it can
> > properly unmount the device, before the network is shutdown?
>
> Would a bottom-up traversal of the device tree do things properly?
If we think in terms of DAGs instead of trees, yes.
-- 
 "Love the dolphins," she advised him. "Write by W.A.S.T.E.."
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/