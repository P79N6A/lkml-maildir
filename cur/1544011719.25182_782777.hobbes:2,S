Date: Sat, 20 Dec 2008 01:45:07 +0100
From: Hans Verkuil <>
Subject: Re: [v4l-dvb-maintainer] [PATCH -next/mmotm] media/video/tuner: fix tuner_ioctl build error
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/12/19/404

On Saturday 20 December 2008 01:36:48 Randy Dunlap wrote:
> From: Randy Dunlap <randy.dunlap@oracle.com>
>
> Fix drivers/media/video/tuner-core.c so that it will build when
> CONFIG_VIDEO_ALLOW_V4L1=n:
>
> drivers/media/video/tuner-core.c:1111: error: 'tuner_ioctl' undeclared
> here (not in a function)
>
> Signed-off-by: Randy Dunlap <randy.dunlap@oracle.com>
> cc: Mauro Carvalho Chehab <mchehab@infradead.org>
> cc: v4l-dvb-maintainer@linuxtv.org
> cc: video4linux-list@redhat.com
> ---
>  drivers/media/video/tuner-core.c |    5 +++++
>  1 file changed, 5 insertions(+)
>
> --- mmotm-2008-1219-1438.orig/drivers/media/video/tuner-core.c
> +++ mmotm-2008-1219-1438/drivers/media/video/tuner-core.c
> @@ -919,6 +919,11 @@ static int tuner_ioctl(struct v4l2_subde
>  	}
>  	return -ENOIOCTLCMD;
>  }
> +#else
> +static int tuner_ioctl(struct v4l2_subdev *sd, int cmd, void *arg)
> +{
> +	return -ENOIOCTLCMD;
> +}
>  #endif
>
>  static int tuner_s_config(struct v4l2_subdev *sd, const struct
> v4l2_priv_tun_config *cfg)
NAK. I've already made a better fix for this and asked Mauro to pull this 
from my tree. The tuner_ioctl function pointer should have been under the 
CONFIG_VIDEO_ALLOW_V4L1 #ifdef as well avoiding the need to make an empty 
function.
Nevertheless, thanks for the effort!
Regards,
	Hans
-- 
Hans Verkuil - video4linux developer - sponsored by TANDBERG