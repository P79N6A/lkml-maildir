Date: Thu, 4 Aug 2005 07:13:57 +1000
From: Con Kolivas <>
Subject: Re: [PATCH] i386 No-Idle-Hz aka Dynamic-Ticks 3
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/8/3/213

On Thu, 4 Aug 2005 05:54, Jeffrey Hundstad wrote:
> Con Kolivas wrote:
> >This is the dynamic ticks patch for i386 as written by Tony Lindgen
> ><tony@atomide.com> and Tuukka Tikkanen <tuukka.tikkanen@elektrobit.com>.
> >Patch for 2.6.13-rc5
> >
> >There were a couple of things that I wanted to change so here is an
> > updated version. This code should have stabilised enough for general
> > testing now.
> >
> >The sysfs interface was moved to its own directory
> >in /sys/devices/system/dyn_tick and split into separate files to
> >enable/disable dynamic ticks and usage of apic on the fly. It makes sense
> > to enable dynamic ticks and usage of apic by default if they're actually
> > built into the kernel so that is now done.
>
> I am successfully running the dynamic tick patch on an old IBM ThinkPad
> A22m.  When I enable the APIC support console beeps, you know bash -c
> 'echo -e "\a"', takes a REALLY long time to finish.  I'm assuming this
> is a badly written program and not a kernel problem.  Correct?
I think the config option which recommends leaving apic support off and 
describes this behaviour should make it clearer. Indeed I found running with 
apic on produced weird results unlike running with PIT.
> BTW: how do you know what HZ your machine is running at?
vmstat 5 will show you the average interrupts per second over 5 seconds in the 
"in" column. The interrupts are obviously more than your Hz but often only a 
little more. 
The pmstats script by Tony will tell you more accurately:
http://www.muru.com/linux/dyntick/tools/pmstats-0.2.gz
Cheers,
Con
[unhandled content-type:application/pgp-signature]