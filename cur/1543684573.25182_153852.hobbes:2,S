Date: Sat, 2 Aug 2003 19:42:29 +0200
From: Andries Brouwer <>
Subject: Re: ide-disk.c rev 1.13 killed CONFIG_IDEDISK_STROKE
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/8/2/103

On Sat, Aug 02, 2003 at 03:10:43PM +0200, Bartlomiej Zolnierkiewicz wrote:
> On Sat, 2 Aug 2003, Andries Brouwer wrote:
> 
> > Maybe it is intended to protect against old disks that do not
> > understand these new commands. Andre? Bart? Alan?
> 
> Some Samsung disks lock up.  Probably we should check if HPA
> command set is supported instead of using IDE_STROKE_LIMIT.
OK, so we have to investigate. This strange test was inserted
in 2.4 and 2.5 via Alan, and google gives me Alan's changelog:
Linux 2.5.66-ac1
o Don't issue WIN_SET_MAX on older drivers (Jens Axboe)
  (Breaks some Samsung)
So, now the question is to Jens: what was the situation?
What disk, kernel, identify output?
If possible we would like to remove the test and test the
right bits instead. But if that Samsung disk claims it
supports HPA and doesnt..
Andries
[By the way, google also shows examples where this test
breaks a setup, so removing it might be a good idea
under all circumstances. The usual jumper goes from
above 32GB to 32GB, and from below 32GB to 2GB.
There are also examples of the latter kind solved
by STROKE, but no longer by STROKE + faulty test.]
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/