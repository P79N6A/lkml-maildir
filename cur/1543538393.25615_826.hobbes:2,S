Date: Fri, 7 Jul 2000 08:53:33 +0200 (MEST)
From: (Rogier Wolff)
Subject: Re: Kernel for P-II on P-I.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/7/7/6

Keith Owens wrote:
> On Thu, 6 Jul 2000 10:34:47 +0200 (MEST), 
> R.E.Wolff@BitWizard.nl (Rogier Wolff) wrote:
> >A kernel compiled for P-II (or something like that) crashes without
> >saying a thing on P-I. would it be an idea to print a message?
> >("This kernel is incompatible with this processor")
> 
> AFAIK that is caused by gcc using instructions that exist on P-II but
> not P-I, including instructions like conditional move (CMOVE).
> Unfortunately those instructions are used everywhere, including in
> printk.  No way to get a message out without detecting the problem in
> the real mode boot loader and using BIOS I/O.
Knowing this I'd suggest that the few files that are needed to get the
message out are compiled using the standard Pentium-instructions.
The CPU generates an unimplemented instruction trap, right? Would it
be doable to write a quick and dirty handler for that trap? (That's
the method I used to get Xinu up and running on the LSI03). 
				Roger.
-- 
** R.E.Wolff@BitWizard.nl ** 
http://www.BitWizard.nl/
 ** +31-15-2137555 **
*-- BitWizard writes Linux device drivers for any device you may have! --*
*       Common sense is the collection of                                *
******  prejudices acquired by age eighteen.   -- Albert Einstein ********
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/