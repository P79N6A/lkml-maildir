Date: Thu, 17 Oct 2002 02:01:11 +0200
From: Andi Kleen <>
Subject: Re: statfs64 missing
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/10/16/355

On Thu, Oct 17, 2002 at 01:49:27AM +0200, Peter Chubb wrote:
>    2.  Change the in-kernel definition of struct statfs to use 64-bit
>        types, (if CONFIG_LBD) and convert at syscall time depending on
>        whether statfs or statfs64 is called (or even, allow glibc to
>        do it, but that's an externally-visible interface change)
> 
> Which is cleaner?  Personally I dislike multiplying interfaces for no
> good reason, so I lean to (2) --- keep the in-kernel paths 64-bit
> clean.
I prefer (2) too.
Regarding the new fields Trond proposed: there is the issue of 64bit
architectures. They already use 64bit block counts, so in theory they 
don't need a statfs64(). But if we wanted to add new fields patterned
after Solaris 64bit would need the new system call too.
So it boils down to if the new fields are important enough to justify
the pain they cause on 64bit.
(I ran into a similar issue with my nanosecond stat patchkit - 
alpha stat is 64bit clean, but doesn't have the padding for ns fields
added used in later ports)
-Andi
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/