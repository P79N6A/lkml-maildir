Date: Wed, 10 Dec 2008 02:36:42 +0100
From: "Kay Sievers" <>
Subject: Re: linux-next: Tree for December 9
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/12/9/363

On Wed, Dec 10, 2008 at 02:30, Andrew Morton <akpm@linux-foundation.org> wrote:
> On Wed, 10 Dec 2008 01:31:13 +0100 "Kay Sievers" <kay.sievers@vrfy.org> wrote:
>
>> > akpm2:/home/akpm# udevmonitor
>> > udevmonitor prints the received event from the kernel [UEVENT]
>> > and the event which udev sends out after rule processing [UDEV]
>> >
>> > UDEV  [1228867146.103334] add@/class/bdi/9:0
>> > UDEV  [1228867146.107566] remove@/block/md0
>> > UDEV  [1228867146.111969] remove@/class/bdi/9:0
>> > UEVENT[1228867146.119889] add@/block/md0
>> > UEVENT[1228867146.119964] add@/class/bdi/9:0
>> > UEVENT[1228867146.120162] remove@/class/bdi/9:0
>> > UEVENT[1228867146.120205] remove@/block/md0
>> > UDEV  [1228867146.122839] add@/block/md0
>> > UDEV  [1228867146.129125] add@/class/bdi/9:0
>> > UDEV  [1228867146.133459] remove@/block/md0
>> > UDEV  [1228867146.137813] remove@/class/bdi/9:0
>> > UEVENT[1228867146.145652] add@/block/md0
>>
>> Weird loop, something is accessing /dev/md0, i guess, which creates
>> the kernel device, and the event, which accesses /dev/md0 again and it
>> goes crazy. Maybe caused by changes Neil did.
>
> I knew an Australian was to blame - it's just a matter of determining
> which one.
I added him alredy to Cc: with the last mail. :)
I guess it's something like this:
  
http://neil.brown.name/git?p=md;a=commitdiff;h=6ac9b8824fd2f82fff508eecc5c74cf797e93cb2
I really hope we can fix that change, as we want to have proper
lifetime rules like this, where the devices, which are not used, do
not show up.
>> Do you use md devices on that box?
>
> Nope.
Fine.
Kay