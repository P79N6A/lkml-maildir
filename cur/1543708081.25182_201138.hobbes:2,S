Date: Mon, 23 Feb 2004 19:09:12 +0100
From: Adrian Bunk <>
Subject: [patch] 2.6.3-mm3: ALSA miXart driver doesn't compile
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/2/23/150

On Sun, Feb 22, 2004 at 05:22:00PM -0800, Andrew Morton wrote:
>...
> Changes since 2.6.3-mm2:
>...
>  bk-alsa.patch
>...
>  Latest versions of external trees
>...
I got four compile errors like the following in the miXart driver:
<--  snip  -->
...
  CC      sound/pci/mixart/mixart.o
In file included from sound/pci/mixart/mixart.c:33:
sound/pci/mixart/mixart.h:95: field `msg_taskq' has incomplete type
In file included from sound/pci/mixart/mixart.c:35:
sound/pci/mixart/mixart_core.h:602: parse error before 
`snd_mixart_interrupt'
sound/pci/mixart/mixart_core.h:602: warning: type defaults to `int' in 
declaration of `snd_mixart_interrupt'
sound/pci/mixart/mixart_core.h:602: warning: data definition has no type 
or storage class
sound/pci/mixart/mixart.c: In function `snd_mixart_hw_params':
sound/pci/mixart/mixart.c:604: warning: unsigned int format, different 
type arg (arg 5)
sound/pci/mixart/mixart.c: In function `snd_mixart_free':
sound/pci/mixart/mixart.c:1043: warning: implicit declaration of 
function `free_irq'
sound/pci/mixart/mixart.c: In function `snd_mixart_probe':
sound/pci/mixart/mixart.c:1301: warning: implicit declaration of 
function `request_irq'
sound/pci/mixart/mixart.c:1325: warning: implicit declaration of 
function `tasklet_init'
make[3]: *** [sound/pci/mixart/mixart.o] Error 1
<--  snip  -->
The patch below fixes these issues for me.
cu
Adrian
--- linux-2.6.3-mm3/sound/pci/mixart/mixart.c.old	2004-02-23 18:28:08.000000000 +0100
+++ linux-2.6.3-mm3/sound/pci/mixart/mixart.c	2004-02-23 18:28:27.000000000 +0100
@@ -23,6 +23,7 @@
 
 #include <sound/driver.h>
 #include <linux/init.h>
+#include <linux/interrupt.h>
 #include <sound/core.h>
 #define SNDRV_GET_ID
 #include <sound/initval.h>
--- linux-2.6.3-mm3/sound/pci/mixart/mixart_core.c.old	2004-02-23 18:30:18.000000000 +0100
+++ linux-2.6.3-mm3/sound/pci/mixart/mixart_core.c	2004-02-23 18:30:38.000000000 +0100
@@ -20,6 +20,7 @@
  *   Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307 USA
  */
 
+#include <linux/interrupt.h>
 #include <sound/driver.h>
 #include <sound/core.h>
 #include "mixart.h"
--- linux-2.6.3-mm3/sound/pci/mixart/mixart_hwdep.c.old	2004-02-23 18:32:49.000000000 +0100
+++ linux-2.6.3-mm3/sound/pci/mixart/mixart_hwdep.c	2004-02-23 18:33:01.000000000 +0100
@@ -20,6 +20,7 @@
  *   Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307 USA
  */
 
+#include <linux/interrupt.h>
 #include <sound/driver.h>
 #include <sound/core.h>
 #include "mixart.h"
--- linux-2.6.3-mm3/sound/pci/mixart/mixart_mixer.c.old	2004-02-23 18:34:42.000000000 +0100
+++ linux-2.6.3-mm3/sound/pci/mixart/mixart_mixer.c	2004-02-23 18:34:57.000000000 +0100
@@ -23,6 +23,7 @@
 #include <sound/driver.h>
 #include <linux/time.h>
 #include <linux/init.h>
+#include <linux/interrupt.h>
 #include <sound/core.h>
 #include "mixart.h"
 #include "mixart_core.h"
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/