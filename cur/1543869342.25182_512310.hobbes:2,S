Date: Fri, 23 Feb 2007 12:50:27 +0000
From: Alan <>
Subject: Re: [PATCH] ACPI driver support for pata
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/2/23/94

> Couldn't be do this generically inside libata core somehow, i.e. try to 
> use ACPI to set the proper mode and fall back to the driver-specific 
> mode setting code if that didn't work? I think if we could do that it 
We want to use the native hebaviour first
> would solve a number of problems (i.e. we could prevent it from doing 
> this on SATA controllers which appear to be IDE based on the PCI ID, 
> like the NVIDIA SATA controllers, since the _GTM and _STM methods seem 
> to have undefined behavior on SATA). This would also eliminate the need 
We check this already. A PATA interface without GTM/STM and friends will
not be picked up by pata_acpi but passed on to ata_generic.
> for mkinitrd, people, etc. to know that they're supposed to be loading 
> this other pata_acpi driver instead, since any PATA driver could take 
> advantage of this feature.
The link order is set up so that we try things in a very specific
deliberate order
- Hardware specific driver (unless it deliberately punts to ACPI)
- ACPI driver using _GTM/_STM etc
- Generic PCI driver ("stay in the mode the BIOS set and pray")
- ISA register compatibility mode (PIO)
This is essentially the strategy used by the old IDE layer since way back
when (minus ACPI support) and has served us pretty well.
Alan
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/