Date: Mon, 13 Aug 2007 10:36:39 +0200
From: Peter Zijlstra <>
Subject: Re: [PATCH 17/23] mm: count writeback pages per BDI
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/8/13/634

On Thu, 2007-08-09 at 12:27 -0700, Christoph Lameter wrote:
> On Thu, 9 Aug 2007, Peter Zijlstra wrote:
> 
> > Less conditionals. We already have a branch for mapping, why create
> > another?
> 
> Ah. Okay. This also avoids an interrupt enable disable since you can use 
> __ functions. Hmmm... Would be good if we could move the vmstat 
> NR_WRITEBACK update there too. Can a page without a mapping be under 
> writeback? (Direct I/O?)
DIO still uses the mapping afaik (it needs to invalidate the page before
and after the OP).
But you could put the increment in both paths, and use the irq disable
from the mapping branch - which should be the most frequent case anyway.
[unhandled content-type:application/pgp-signature]