Date: Tue, 8 May 2007 11:19:16 +0200
From: "Remy Bohmer" <>
Subject: [PATCH]: Make LEDS work on evaluation board AT91SAM9261-EK
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/5/8/96

Hello Andrew,
Attached you can find a patch needed to make the LEDS for 'CPU-Idle'
and 'Timer' work on the AT91SAM9261-EK board. The kernel configuration
options are already there, but the implementation is not available.
This patch fixes this.
Can you please apply this patch to the kernel mainline?
Kind Regards,
Remy Bohmer
diff -ruN linux-2.6.21.orig/arch/arm/mach-at91/board-sam9261ek.c linux-2.6.21/arch/arm/mach-at91/board-sam9261ek.c
--- linux-2.6.21.orig/arch/arm/mach-at91/board-sam9261ek.c	2007-05-04 15:51:34.000000000 +0200
+++ linux-2.6.21/arch/arm/mach-at91/board-sam9261ek.c	2007-05-07 16:45:04.000000000 +0200
@@ -59,6 +59,9 @@
 	/* Initialize processor: 18.432 MHz crystal */
 	at91sam9261_initialize(18432000);
 
+	/* Setup the LEDs */
+	at91_init_leds(AT91_PIN_PA13, AT91_PIN_PA14);
+
 	/* Setup the serial ports and console */
 	at91_init_serial(&ek_uart_config);
 }
diff -ruN linux-2.6.21.orig/arch/arm/mach-at91/Makefile linux-2.6.21/arch/arm/mach-at91/Makefile
--- linux-2.6.21.orig/arch/arm/mach-at91/Makefile	2007-05-04 15:51:34.000000000 +0200
+++ linux-2.6.21/arch/arm/mach-at91/Makefile	2007-05-07 17:34:21.000000000 +0200
@@ -38,6 +39,7 @@
 # LEDs support
 led-$(CONFIG_ARCH_AT91RM9200DK)	+= leds.o
 led-$(CONFIG_MACH_AT91RM9200EK)	+= leds.o
+led-$(CONFIG_MACH_AT91SAM9261EK)+= leds.o
 led-$(CONFIG_MACH_CSB337)	+= leds.o
 led-$(CONFIG_MACH_CSB637)	+= leds.o
 led-$(CONFIG_MACH_KB9200)	+= leds.o