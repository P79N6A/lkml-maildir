Date: 11 Dec 2002 09:57:55 -0800
From: Andy Pfiffer <>
Subject: [TRIVIAL PATCH] remove warnings/errors from arch/i386/kernel/suspend_asm.S
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/12/11/192

Some earlier versions of gas (2.10.91 specifically) will error out on
the "movw %eax,%ds" in arch/i386/kernel/suspend_asm.S.  gas 2.11.92
complains but continues.
Here is a trivial patch that eliminates two warnings.
# This is a BitKeeper generated patch for the following project:
# Project Name: Linux kernel tree
# This patch format is intended for GNU patch command version 2.5 or higher.
# This patch includes the following deltas:
#	           ChangeSet	1.865   -> 1.866  
#	arch/i386/kernel/suspend_asm.S	1.2     -> 1.3    
#
# The following is the BitKeeper ChangeSet Log
# --------------------------------------------
# 02/12/11	andyp@joe.pdx.osdl.net	1.866
# Correct syntax to remove assembler warnings and errors.
# --------------------------------------------
#
diff -Nru a/arch/i386/kernel/suspend_asm.S b/arch/i386/kernel/suspend_asm.S
--- a/arch/i386/kernel/suspend_asm.S	Wed Dec 11 09:51:22 2002
+++ b/arch/i386/kernel/suspend_asm.S	Wed Dec 11 09:51:22 2002
@@ -6,7 +6,7 @@
 #include <asm/segment.h>
 #include <asm/page.h>
 
-ENTRY(do_magic):
+ENTRY(do_magic)
 	pushl %ebx
 	cmpl $0,8(%esp)
 	jne .L1450
@@ -66,7 +66,7 @@
 .L1453:
 	movl $104,%eax
 
-	movw %eax, %ds
+	movw %ax, %ds
 	movl saved_context_esp, %esp
 	movl saved_context_ebp, %ebp
 	movl saved_context_eax, %eax
@@ -88,4 +88,4 @@
 loop2:
        .quad 0
        .previous
-	
\ No newline at end of file
+
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/