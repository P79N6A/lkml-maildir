Date: Tue, 16 Mar 1999 11:55:17 +0100 (CET)
From: Ingo Molnar <>
Subject: Re: [patch] recover lost ticks
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/3/16/42

On Tue, 16 Mar 1999, Vojtech Pavlik wrote:
> Anyway, for another example, I've checked the Logitech joystick driver.  It
> needs to send an init sequence to the joystick, which consists of a series
> of various delays and writes to the joystick port. It needs to be timed
> precisely, and, so it can't allow an interrupts to happen in the middle of
> the udelay() and make it take more time. The whole sequence takes 6+11+7+9 =
> 33 ms of cli() time. I could base this on gettimeofday() or PIT reading, and
> forget the cli(), but still an interrupt at the wrong time would kill the
> timing ...
> 
> Just two examples of bad behaving hardware.
thanks for explaining those two cases. For the second one, i dont think an
init sequence is too critical. (it would be critical i think if we lost a
tick for every joystick event)
hm, would it help if you had very precise and high-frequency timers, but
with the restriction that they are NMI so they have to be used very
carefully (and with a different timer interface)? On pentiums and up we
can have periodic NMI interrupts generated by the CPU. Sustaining 100 khz
is no problem with those. The problem is, this trick is pretty much
Intel-specific.
-- mingo
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/