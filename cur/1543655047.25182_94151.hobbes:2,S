Date: 05 Dec 2002 18:27:57 +0300
From: Alex Tomas <>
Subject: [PATCH] for 2.5.50, sysfs works wrong in some cases
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/12/5/98

Hello!
I've just found that 2.5.50 can't open root device specified in
'root=/dev/sda3' form. As for me, following patch solves problem:
--- vanilla/linux-2.5.50/drivers/block/genhd.c  Mon Nov 11 06:28:13 2002
+++ linux-2.5.50/drivers/block/genhd.c  Thu Dec  5 18:17:27 2002
@@ -408,7 +408,6 @@
                disk->minors = minors;
                while (minors >>= 1)
                        disk->minor_shift++;
-               kobject_init(&disk->kobj);
                disk->kobj.subsys = &block_subsys;
                INIT_LIST_HEAD(&disk->full_list);
kobject_init() will be called from kobject_register().
with best, regards
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/