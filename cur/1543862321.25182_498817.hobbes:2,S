Date: Sat, 13 Jan 2007 15:51:42 +1100
From: Nick Piggin <>
Subject: Re: O_DIRECT question
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/1/12/261

Bill Davidsen wrote:
> The point is that if you want to be able to allocate at all, sometimes 
> you will have to write dirty pages, garbage collect, and move or swap 
> programs. The hardware is just too limited to do something less painful, 
> and the user can't see memory to do things better. Linus is right, 
> 'Claiming that there is a "proper solution" is usually a total red 
> herring. Quite often there isn't, and the "paper over" is actually not 
> papering over, it's quite possibly the best solution there is.' I think 
> any solution is going to be ugly, unfortunately.
It seems quite robust and clean to me, actually. Any userspace memory
that absolutely must be large contiguous regions have to be allocated at
boot or from a pool reserved at boot. All other allocations can be broken
into smaller ones.
Write dirty pages, garbage collect, move or swap programs isn't going
to be robust because there is lots of vital kernel memory that cannot be
moved and will cause fragmentation.
The reclaimable zone work that went on a while ago for hugepages is
exactly how you would also fix this problem and still have a reasonable
degree of flexibility at runtime. It isn't really ugly or hard,  compared
with some of the non-working "solutions" that have been proposed.
The other good thing is that the core mm already has practically
everything required, so the functionality is unintrusive.
-- 
SUSE Labs, Novell Inc.
Send instant messages to your online friends 
http://au.messenger.yahoo.com
 
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/