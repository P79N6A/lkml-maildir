Date: Thu, 5 Jul 2007 10:43:23 +0200
From: Ingo Molnar <>
Subject: Re: [RFC/PATCH] debug workqueue deadlocks with lockdep
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/7/5/31

* Oleg Nesterov <oleg@tv-sign.ru> wrote:
> > > Isn't it better to call lock_release() with nested == 1 ?
> > 
> > Not sure, Ingo?
> 
> Ingo, could you also explain the meaning of "nested" parameter? Looks 
> like it is just unneeded, lock_release_nested() does a quick check and 
> use lock_release_non_nested() when hlock is not on top of stack.
hm, i forgot about that. We basically turned off all bad-nesting 
warnings in lockdep due to false positives.
the workqueue dependencies should all nest perfectly so please just use 
nested==1, even though it's a dummy right now. We might want to turn 
unlock-nest checking back on in the future. Or we'll remove that 
parameter altogether.
	Ingo
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/