Date: Thu, 15 Jan 2009 22:49:25 -0800
From: Andrew Morton <>
Subject: Re: [PATCH 1/6] ftrace: move function tracer functions out of trace.c
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2009/1/16/24

On Thu, 15 Jan 2009 23:53:43 -0500 Steven Rostedt <rostedt@goodmis.org> wrote:
>  static void
> +function_trace_call_preempt_only(unsigned long ip, unsigned long parent_ip)
> +{
> +	struct trace_array *tr = func_trace;
> +	struct trace_array_cpu *data;
> +	unsigned long flags;
> +	long disabled;
> +	int cpu, resched;
> +	int pc;
> +
> +	if (unlikely(!ftrace_function_enabled))
> +		return;
We're optimizing for the tracing-is-enabled case.  What's the thinking
here?