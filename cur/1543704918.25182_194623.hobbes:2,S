Date: Thu, 29 Jan 2004 00:06:33 +0100
From: Trond Myklebust <>
Subject: Re: NFS: giant filename in readdir
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/1/28/216

PÃ¥ ty , 27/01/2004 klokka 21:53, skreiv Jussi Hamalainen:
> Both boxes have an almost identical setup of Slackware 9.1 and were
> running 2.4.23-pac1+security bugfixes. The boxes are connected to the
> same switch and VLAN. They mount filesystems from each other (yeah, I
> know cross-mounting with NFS is a bad idea...) and the problem
> occurred on both servers simultaineously.
> 
> The mounts look like this:
> 
> mir:/home on /home type nfs
> (rw,rsize=8192,wsize=8192,hard,intr,lock,addr=XXX)
> mir:/archive on /archive type nfs
> (rw,rsize=8192,wsize=8192,soft,intr,addr=XXX)
> 
> sputnik:/var/spool/mail on /var/spool/mail type nfs
> (rw,rsize=8192,wsize=8192,hard,intr,lock,nfsvers=2,addr=XXX)
> sputnik:/files on /files type nfs
> (rw,rsize=8192,wsize=8192,soft,intr,nfsvers=2,addr=XXX)
Any info forthcoming on the filesystem you used and/or a binary tcpdump
demonstrating the problem? (remember to use a large snaplen in the
tcpdump - something like "-s 9000").
Does the problem still occur when you change "soft" to "hard"? Note that
the default setting for "retrans" as set by the nfs-utils "mount"
program is way too low for "soft" on UDP.
Cheers,
  Trond
BTW: 2.4.23 has no readdir changes at all compared to 2.4.21. I've no
idea WTF 2.4.23-pac1 contains...
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/