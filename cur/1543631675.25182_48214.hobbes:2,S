Date: Sat, 25 May 2002 09:56:06 +0200
From: Pierre Rousselet <>
Subject: 2.5.18 and HPT366
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/5/25/56

2.5.18 hangs at partition check. A workaround is to comment hpt366.c:868 
config_chipset_for_pio(drive) in the function config_chipset_for_dma().
In this case the partition check looks to be done twice :
ATA: Triones Technologies, Inc. HPT366 / HPT370: controller, PCI slot 
00:13.0
PCI: Found IRQ 11 for device 00:13.0
PCI: Sharing IRQ 11 with 00:13.1
ATA: chipset rev.: 1
ATA: non-legacy mode: IRQ probe delayed
     ide2: BM-DMA at 0xd400-0xd407, BIOS settings: hde:DMA, hdf:pio
ATA: Triones Technologies, Inc. HPT366 / HPT370 (#2): controller, PCI 
slot 00:13.1
PCI: Found IRQ 11 for device 00:13.1
PCI: Sharing IRQ 11 with 00:13.0
ATA: chipset rev.: 1
ATA: non-legacy mode: IRQ probe delayed
     ide3: BM-DMA at 0xe000-0xe007, BIOS settings: hdg:DMA, hdh:pio
hda: SAMSUNG DVD-ROM SD-616F, ATAPI CD/DVD-ROM drive
hde: ST310212A, ATA DISK drive
hdg: SAMSUNG SV0322A, ATA DISK drive
ide0 at 0x1f0-0x1f7,0x3f6 on irq 14
ide2 at 0xcc00-0xcc07,0xd002 on irq 11
ide3 at 0xd800-0xd807,0xdc02 on irq 11
  hde: 20005650 sectors w/512KiB Cache, CHS=19846/16/63, UDMA(66)
Partition check:
  /dev/ide/host2/bus0/target0/lun0: [PTBL] [1245/255/63] p1 p2 p3 p4
  hdg: 6250608 sectors w/478KiB Cache, CHS=11024/9/63, UDMA(33)
  /dev/ide/host3/bus0/target0/lun0: p1
  /dev/ide/host2/bus0/target0/lun0: p1 p2 p3 p4
  /dev/ide/host3/bus0/target0/lun0: p1
Pierre
-- 
------------------------------------------------
  Pierre Rousselet <pierre.rousselet@wanadoo.fr>
------------------------------------------------
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/