Date: Wed, 13 Apr 2005 14:38:00 -0400 (EDT)
From: Daniel Barkalow <>
Subject: Re: Re: Re: Re: [ANNOUNCE] git-pasky-0.3
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/4/13/155

On Wed, 13 Apr 2005, Petr Baudis wrote:
> Dear diary, on Wed, Apr 13, 2005 at 07:01:34PM CEST, I got a letter
> where Daniel Barkalow <barkalow@iabervon.org> told me that...
> > For future reference, git is unhappy if you actually do this, because your
> > HEAD won't match the (empty) contents of the new directory. The easiest
> > thing is to cp -r your original, replace the shared stuff with links, and
> > go from there.
> 
> How is it unhappy? That would likely be a bug, unless you do something
> which really *needs* the tree populated and doesn't make sense otherwise
> (show-diff aka git diff w/o arguments, for example).
If you copy HEAD without copying the files, it will then try to apply the
patches which would apply to your previous directory to the empty
directory, which will just give a lot of errors about missing files. If
you don't copy HEAD, it tries to compare against nothing.
Upon further consideration, a "checkout-cache -a" at the end of your list
makes things generally happy.
The next problem is that rsync is replacing the .git/objects symlink with
the remote system's directory, which makes this not actually helpful.
	-Daniel
*This .sig left intentionally blank*
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/