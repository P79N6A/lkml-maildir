Date: Mon, 31 Mar 2003 16:06:33 -0500
From: Pete Zaitcev <>
Subject: [sparc] Default target
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/3/31/118

Apparently, Sam changed his mind about the "makeboot", too.
In 2.5.66, only s390, sparc64, and ppc64 still have it.
diff -urN -X dontdiff linux-2.5.66/arch/sparc/boot/Makefile linux-2.5.66-sparc/arch/sparc/boot/Makefile
--- linux-2.5.66/arch/sparc/boot/Makefile	2003-03-24 14:01:25.000000000 -0800
+++ linux-2.5.66-sparc/arch/sparc/boot/Makefile	2003-03-29 23:23:30.000000000 -0800
@@ -32,7 +32,3 @@
 
 $(obj)/btfix.s: $(obj)/btfixupprep vmlinux FORCE
 	$(call if_changed,btfix)
-
-archhelp:
-	@echo '* image		- kernel image ($(obj)/image)'
-	@echo '  tftpboot.img	- image prepared for tftp'
diff -urN -X dontdiff linux-2.5.66/arch/sparc/Makefile linux-2.5.66-sparc/arch/sparc/Makefile
--- linux-2.5.66/arch/sparc/Makefile	2003-03-24 14:00:03.000000000 -0800
+++ linux-2.5.66-sparc/arch/sparc/Makefile	2003-03-29 23:23:31.000000000 -0800
@@ -54,13 +54,16 @@
 LIBS_Y		:= $(patsubst %/, %/lib.a, $(libs-y))
 export INIT_Y CORE_Y DRIVERS_Y NET_Y LIBS_Y HEAD_Y
 
-makeboot =$(Q)$(MAKE) -f scripts/Makefile.build obj=arch/$(ARCH)/boot $(1)
+# Default target
+all: image
+
+boot := arch/sparc/boot
 
 image tftpboot.img: vmlinux
-	$(call makeboot,arch/sparc/boot/$@)
+	$(Q)$(MAKE) $(build)=$(boot) $(boot)/$@
 
 archclean:
-	$(Q)$(MAKE) -f scripts/Makefile.clean obj=arch/$(ARCH)/boot
+	$(Q)$(MAKE) $(clean)=$(boot)
 
 prepare: include/asm-$(ARCH)/asm_offsets.h
 
@@ -72,3 +75,9 @@
 
 CLEAN_FILES +=	include/asm-$(ARCH)/asm_offsets.h	\
 		arch/$(ARCH)/kernel/asm-offsets.s
+
+# Don't use tabs in echo arguments.
+define archhelp
+  echo  '* image        - kernel image ($(boot)/image)'
+  echo  '  tftpboot.img - image prepared for tftp'
+endef
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/