Date: Mon, 9 Oct 2000 13:25:36 +0200
From: Ralf Baechle <>
Subject: Re: Calling current() from interrupt context
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/10/9/213

On Sun, Oct 08, 2000 at 05:05:45PM -0600, yodaiken@fsmlabs.com wrote:
> > > BTW: there is an implicit reference to "current"  in smp_processor_id. 
> > 
> > Yes, on architectures that use current->processor that is an exception
> > to the rule.  After all, you know for sure that you're still on the
> > same CPU as the task currently running.
> 
> This makes sense. And I wish cpu architects would put a cpu-id
> register somewhere
> so that we could have fast computation of cpu-id on smp machines.
For MIPS we use $28 aka $gp which MIPS in it's generosity just doesn't use
for non-GP optimized code to point to current.  That actually shaves of a
few kb of the kernel size.  From there on it's just one single machine
instruction to get the cpuid which we could probably also hide in some of
the rarely accessed MMU registers.
  Ralf
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/