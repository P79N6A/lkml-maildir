Date: Sat, 28 Aug 1999 14:41:25 +0000
From: "Andrew Morton" <>
Subject: Re: rsh problem (update)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/8/28/29

Kamran Karimi wrote:
> 
>  The problem exists in remote executions too.
> 
>  A simple script containing:
> 
> rsh 10.0.0.1 ls
> rsh 10.0.0.1 ls
> rsh 10.0.0.1 ls
> 
>  ceases to work after 10 or 12 invocations. The error message is still
> "poll: protocol failure in circuit setup"
> 
>  This seems to be happening faster when the rshs are run concurrently by
> using & to start them.
This is caused by inetd.  The service is being invoked so frequently
that it's tripping inetd's broken-server-detector.  inetd drops a
message in /var/log/messages:
Aug 28 23:54:46 bix inetd[319]: shell/tcp server failing (looping),
service terminated
and shuts down the service.
You can restart the service by sending inetd a SIGHUP.  You can increase
inetd's threshold for this service in /etc/inetd.conf:
shell stream tcp nowait.1000 root /usr/sbin/tcpd in.rshd
                        ^^^^
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/