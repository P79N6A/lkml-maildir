Date: Fri, 19 Dec 2008 11:53:38 -0800
From: Bryan Henderson <>
Subject: Re: Pull request for FS-Cache, including NFS patches
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/12/19/226

> Muntz, Daniel <Dan.Muntz@netapp.com> wrote:
> 
> > AFS was designed to support local disk cache, so with callbacks 
> you can get a
> > consistent system.
> 
> It's less the callbacks and more the data version number that's 
important.
Maybe for consistency, but for the performance benefits of local disk 
caching, I believe the callbacks are pretty important.  I say that because 
I regularly use an NFS 3 filesystem on the IBM internal network that is 
painfully slow on Linux and fine on AIX with CacheFS.  It was also fine 
when this data was in AFS instead, and if I copy all the files to a local 
disk filesystem.
In this case, the files are _all in local page cache_, so I assume the 
waiting is for the constant stream of transactions the client uses to make 
sure the data in the cache is still current every time I open a file.  AIX 
CacheFS doesn't sweat the consistency, so makes these queries only 
periodically.  AFS had the callbacks, so rather than the client asking 
every time if the data had changed, the server just told it when it did.
--
Bryan Henderson                     IBM Almaden Research Center
San Jose CA                         Storage Systems