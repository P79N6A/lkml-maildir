Date: Fri, 12 Apr 2002 15:29:18 +0100
From: Jamie Lokier <>
Subject: Re: faster boots?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/4/12/70

Pavel Machek wrote:
> > If I do this:
> > 
> >     while :; do cat /proc/stat; sleep 1; done
> > 
> > Then I see a few writes have occurred at nearly every iteration.  I
> > think that is due to the atime updates, because using "noatime" there
> > are no writes at most iterations.
> 
> Well, that's no problem. noflushd stops kflushd, so it should work
> even with atime. [It works for me with atimes!]
> 
> > But more interesting: I only see those few-per-second atime writes while
> > noflushd is running.  If I kill noflushd then they go away.
> 
> ?
Another curious thing: even if the regular writes were caused by atime
updates, there is no reason for them to be flushed every second, is
there?
Yet the hard disk light flashes about once per second when (a) running
the above shell line and (b) running noflushd, and (c) _not_ using
"noatime" (just "nodiratime").  (Remove any of those and it stops).  And
/proc/stat shows writes happening.
This is on ext3.  I wonder if journalling is causing a problem.  Pavel,
are you running ext3?
The kernel, by the way, is vanilla 2.4.18.
-- Jamie
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/