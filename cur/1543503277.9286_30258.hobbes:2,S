Date: Mon, 19 Jul 1999 21:47:43 +0100 (BST)
From: Alan Cox <>
Subject: Linux 2.2.11pre2 proposed patch
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/7/19/113

I've put my proposed Linux 2.2.11pre2 diff on
	
ftp://ftp
.*.kernel.org/pub/linux/alan/proposed-2.2.11pre2.gz
Some comments first:
	Because of the size of the diff and all the driver updates
(especially mips/isdn/qlogic) I've been trying to keep the core changes
small. That means:
	No big file handle patch yet
	No Ingo new super raid patch
	No knfsd updates
obviously once the big stuff is done and settled I can start cleaning the
other stuff up to merge.
If you want to add the knfsd updates to this tree use the vanilla HJ patches
as this also doesn't have the NFS client/sunrpc changes in it either. I
don't plan to submit the improved NFS client to Linus. Its fast, cool 
but not terribly pretty and not bug free.
The change log versus 2.2.10 follows. Also after that the notes on the
bits of the SuSE patch collection I applied/rejected/deferred. Pretty much
everything else is drawn from 2.2.10ac and has been tested there. A lot
of the driver patches are already in 2.3.x.
Core Changes
o	Crashes and other problems caused by atomicity errors in signal
	delivery are cured.
o	Fixed bug in mremap
o	Try to preserve DMA pages
o	Swapfile miscalculation deadlock fix
o	Fix the free_irq race on x86 SMP
o	Zero page colouring is supported. Only Mips uses it. The changes for
	other architectures are macro no-ops
o	ll_rw_blk supports segment limiting on mergeing for scatter gather
o	Move to 128 requests outstanding (needed for big end raid kit)
o	Fixed out of memory checks in pci scan
o	Try to handle out of memory right for scsi 
o	Fix initrd busy/disk busy problem with scsi_eh thread
o	Fix scsi cmd_len bug
o	Switch to a kernel side updated 
o	Add a panic time notifier chain
o	A global capability limit is now available akin to securelevel but
	fine grained
Network Changes
o	Socket hash crashes are fixed
o	Appletalk large net ranges allowed as per 2.0.x
o	Fix oops in appletalk
o	Fix exploitable buffer overrun in AX.25
o	Disallow inet devices with < 68 mtu
o	Fix masquerade hash keys
o	IRC masquerade allows extended commands
o	Kernel nfs root bootp fix
o	PIMv2 fixes for multicasting
o	Fix TCP/UDP address returns on 0 length read
o	IPv6 address config fixes
o	IPv6 out of memory firewall crash
o	IPX oops on out of memory fix
o	Netrom/ROSE out of memory fixes
o	Remove escaped printk in traffic scheduler
o	Various small af_unix changes
FS Changes
o	Changes to partition code for names for new raid drivers
o	Changes to partition code - added EFS/Ultrix
o	Changes to partition code - buffer leak fixes
o	Changes to partition code - endian bug fixes
o	EFS file system
o	Small coda update
o	Fix races in quota handling
o	Fix ext2fs errors when writing past 2Gig boundary
o	FAT now uses cluster numbering for inode info
o	Fix the fact FAT32 is really FAT28
o	Optimise fat directory scanning
o	Stop FIBMAP being used without rawio capability
o	Stop crash on out of memory  in isofs
o	Support 2.0.x compatible local locking over NFS
o	Fix NULL pointer crash in NCPfs
o	Fix SUS compliance bug in pipes
o	Fix out of memory crash in procfs
o	Fix disk read error crashes in Qnx and UFS
o	Support Nextstep UFS cdroms
Driver Changes
o	Sysrq key is runtime enable/disable
o	PC keyboard changed to use macros (needed for MIPS and will be
	needed for PA-RISC shortly)
o	Updated ISDN layer (The patch from SuSE)
o	BT848 supports ultrasparc
o	Added DAC960 raid driver
o	Added Compaq SMART2 raid driver
o	IDE CDROM toc/readraw fix
o	IDE ZIP fix
o	IDE tape updates
o	Loopback driver fix some minor flaws
o	nbd - fixed a problem where very large nbds reported wrong disk size
o	ramdisk - fixed compile warning
o	Fixed /proc overrun in cdrom
o	bttv - fixed zoltrix tv max, sparc support, added lifeview fly
o	bw-qcam/cqcam - fixed kmalloc check missing
o	Cyclades. Updated driver from vendor.
o	ISI driver update. Now supports PCI cards too. 
o	Cadet radio driver update
o	Tweak gemtek radio to support radio/sound combo card
o	Fix IRQ sharing on serial ports
o	Radiotrack2 only worked as a module. Fixed
o	Added ARLAN radio-lan driver
o	Added Olympic chipset driver (IBM PCI token ring)
o	Added YAM FPGA amateur radio modem driver
o	Fixed memory allocation bugs in arcnet
o	Fixed SMP irq detect bug in arcnet
o	Clean up copy_*_user stuff in various net drivers
o	Correct packet length bug in depca
o	Cache align rings for eepro100
o	Fix erroneous DMA free in Comtrol driver if run in single DMA mode
o	Fix egcs warnings in irda
o	Add out of memory check to lance
o	Update Ne2K-pci driver. Adds Holtek support
o	Fix memory allocation checks in net_init
o	Support network stats on shapers
o	Updated RTL8139 driver
o	Add Sealevel systems sync driver
o	Support module built version of Seeq8005 driver
o	Fix link drop under load bug in syncppp
o	Fix DescOwned race in tulip driver
o	Updated VIA Rhine driver
o	Alignment fixes for yellowfin driver
o	Fix bugs in Z85230
o	SMP safety fix for NCR539x
o	Clean up and fix several aha152x bugs. 
o	Fix module options and geometry on aha154x
o	AIC7xxx update
o	ATP870u SMP safety fixes
o	Add SCSI-2 names to scsi debug/verbose info
o	SMP safety fixes for eata-dma
o	IDE-scsi sg-transform fix
o	in2000 asm fixed to work with recent tools
o	Megaraid update
o	Qlogic FC driver update
o	Qlogic ISP geometry fixes
o	Clean up OPL3SA sound
o	Fix overrun in dmasound
o	ES1370/ES1371/Sonicvibes allocation bug fixes
o	Opti 924 PnP mode fix
o	ESS ISA fixes
o	Support AWE32 AWSE device
o	Allow joystick selection in trix module
o	16 colour EGA/VGA frame buffer console support
o	Enhanced TGA frame buffer
Architecture Changes
o	Synchronized with Alpha updates from Richard Henderson
o	2Gig support for i386
o	i386 boot up crash on keyboard timeout fix
o	Cache align i386 irq structures for performance on SMP
o	Fix the ix86 unbalanced call stack performance problem
o	Fix the ix86 ioremap to top of memory bug
o	Big mips merge with the main mips tree
o	Fix missing sparc core dump locks
o	Fix semaphore race on x86
o	Remove cyrix COMA thing. Use set6x86
Minor Stuff
o	Updates CREDITS, MAINTAINERS
o	A lot of documentation updates
o	Makefile changes for MIPS cross compiling
o	Makefile checks genksyms version
o	Makefile clean ups
o	Fix offset on /proc/kcore
o	Added generic memchr
-------
Applied:
cache-monitoring-2.2.10-A - show file and page cache on SysRq+M
isdn-2.2.10               - ISDN update
megaraid-1.0.1-2.2.10     - AMI Megaraid driver update
scsi-remove-2.2.10        - scsi fix for oops on remove-single-device
Obsolete:
smart2-1.0.4b-2.2.10      - Compaq SMART2 driver
alpha-fix-2.2.10          - call_pal fix in alpha/kernel/entry.S
Already Have:
DAC960-2.22-2.2.10        - Mylex DAC driver
eata-2.2.10               - SMP fix for scsi/eata_dma.c
kupdate-2.2.10            - kupdate
ncr-2.2.7                 - time_before_eq fix for ncr53c8xx.c
no-keyboard-2.2.10        - fix keyboard controller access for headless boot
scsi-mm-2.2.10            - scsi fix for oops on device removal
swapfile2-2.2.10          - swapfile version 2 fix
Missing From FTP:
sd-cmd-len-2.2.10a        - scsi fix for sd: initialize cmd_len to zero
			    (Im pretty sure this is the one I have)
Rejected:
bttv-2.2.10               - The users change to drop kernel vga probing was
			    intentionally made for 2.2. 
fdomain-2.2.10            - If this occurs something is badly broken, this
			    isnt a fix but instead a risk of data corruption
ibmtr-2.2.10              - Already have the PCMCIA fixes from the maintainer
installpath-2.2.3         - Changing the default kernel install location to 
			    /boot is a 2.3 thing not a 2.2 thing, even if
			    most vendors use /boot with 2.2.
msync-2.2.10              - Doesn't work for all architectures. Alternative
			    2 line patch breaks other stuff. This is a very
			    obscure bug so best fixed properly later.
oom-2.2.10-G              - This touches a lot of stuff so it wants to be
			    done later, but it also appears it may kill the
			    machine if the sigsegv delivery requires a page
			    in that fails that requires a sigsegv that...
rtclight-2.2.10.diff      - Adds a ton of ifdefs, functionality advantage
			    very unclear.
trashmem-2.2.10           - keep track of memory-trashing processes
Deferred:
console-reent-2.2.10      - disable_bh fix for char/console.c
endbase-2.2.10            - x86: read end_base from BIOS
hashed-buffers-2.2.10     - nr_hashed_buffers fix for buffer.c 
knfsd-1.4.6-2.2.10        - knfsd update [Waiting for memory fix]
multisession-2.2.10       - allows selection of sessions on multisession CDs
			    [someone please sort out CD partitioning in 2.3!]
newnet-2.2.10             - updates for 3c59x, eepro100, epic100, rtl8139,
                            tulip and via-rhine
			    [Epic100 is problematic]
rl100-2.2.10              - Complex RL100-ATX driver [Need to check with Don]
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/