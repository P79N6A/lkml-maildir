Date: Sat, 14 Apr 2007 12:09:47 +0200
From: Martin Peschke <>
Subject: [RFC] [Patch 0/4] timer_stats slimmed down
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/4/14/40

2.6.21-rc* kernels come with a feature that adds timer statistics
to /proc/timer_stats (CONFIG_TIMER_STATS). This patch set makes it use
the proposed statistics infrastructure (-mm tree), and adds prequisite
functions to the statistics code.
The result are noticeable lines of code savings.
kernel/time/timer_stats.c which comes with several functions which can
be made redundant by using corresponding functions of lib/statistic.c,
that is:
- accounting
- printing output in sequential files
- user interface for switching accounting on/off, reset etc.
- measuring the accounting time
- per-cpu optimisations
Function that were missing in lib/statistics, and which are added by
this patch set, are:
- allow arbitrary keys for statistics entries (e.g. structures)
- allow client to label output of statistics entries (e.g. using keys)
A secondary effect of the patch set is that we won't add another entry
to good old /proc. The statistics infrastructure uses debugfs.
This patch set is a prototype that works for me, but which might allow
for optimisations. Suggestions are welcome.
[Patch 1/4] timer_stats slimmed down: statistics prereq, cleanup
[Patch 2/4] timer_stats slimmed down: statistics prereq, labels
[Patch 3/4] timer_stats slimmed down: statistics prereq, keys
[Patch 4/4] timer_stats slimmed down: using statistics infrastucture
Patch set is against 2.6.21-rc6-mm1 and additionaly requires
"[Patch] statistics: fix sorted list" posted this morning.
Signed-off-by: Martin Peschke <mp3@de.ibm.com>
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/