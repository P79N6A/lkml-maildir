Date: Wed, 28 Jul 2004 00:03:40 -0700
From: Andrew Morton <>
Subject: Re: [PATCH] Move cache_reap out of timer context
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/7/28/21

Dimitri Sivanich <sivanich@sgi.com> wrote:
>
> I'm submitting two patches associated with moving cache_reap functionality
>  out of timer context.  Note that these patches do not make any further
>  optimizations to cache_reap at this time.
> 
>  The first patch adds a function similiar to schedule_delayed_work to
>  allow work to be scheduled on another cpu.
> 
>  The second patch makes use of schedule_delayed_work_on to schedule
>  cache_reap to run from keventd.
It goes splat in cache_reap() if slab debugging is enabled, for rather
obvious reasons:
#if DEBUG
	BUG_ON(!in_interrupt());
	BUG_ON(in_irq());
#endif
I've so far spent nearly two days just getting all the gunk people have
sent in the last two weeks to compile properly.  Heaven knows how long
it'll take to test it.  So I need somebody to grump at.  So.  Grump.
May I have the temerity to suggest that it would be more efficient if
people were to test their own patches a bit more before sending them?
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/