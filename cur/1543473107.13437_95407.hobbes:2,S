Date: Sun, 27 Dec 1998 01:42:39 -0700 (MST)
From: Ely Wilson <>
Subject: Re:  [masq] MTU/MRU, always-defrag, diald, masq not working for some URLs
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1998/12/27/9

On Sat, 26 Dec 1998, Tom Oehser wrote:
> > Many people see this without diald in the equation, so I believe it is a
> > problem in the IP refragmentation code, but I don't think anyone is
> > actively trying to solve this problem.
> > 
> > > Changing my MTU/MRU from 296 to 1500 causes many other problems, I
> > > have to find another approach to this...
> > 
> > Performance might be degraded, but is it that much?  Is there some way
> > to work around it using TOS settings of ipchains?
> 
> Can I do "TOS settings of ipchains" on 2.0.36?  I will investigate.
> 
> While 'suck' or 'ftp' is filling the pipe, the MTU/MRU of 296 makes a
> *HUGE* difference with interactive response, even with a 50666 V.90...
> 
I missed most of this thread so forgive me if I'm off the mark a bit, but I
have two systems masqueraded here through a computer wihch uses a 56k modem
as a link to the net.  This causes probnlems since teh internal connections
xfer at 60k a seconds and it causes a bottleneck at the gatyeway/uplink
(modem),
I tried mtu/mru settings for weeks to no avail.  This caused programs such
as irc dcc, ftp and others (upload only) to go into a sort of deadlock or
timeout.
My solution?  The kernel DOES have one for this problem, it's called traffic
shaper, although limited and the usefulness is better suited at an ip
routing level rather than per interface it does fix my problem.
Traffic Shaper code is found in Network Devices, there are both shapecfg
(Alan Cox) and shapetool (Modififed shapecfg) available and usage is about
as easy and ifconfig or route.
Anyway, by shaping output from 60k down to 4k per second from the hosts to
gateway the problem is solved.  If I need the 60k xfer rate internally I can
always disabled teh shaper with a shaper-off script, without a problem
(except that again uploading is defunct).
This isn't a problem with the kernel but rather with protocols, imho.
----------------------------------------------------------
 ---- ely ---                   <plexus@ionet.net> ------
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/