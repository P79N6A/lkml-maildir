Date: Wed, 24 Mar 2004 12:35:51 +0100
From: Marc-Christian Petersen <>
Subject: Re: 2.6.5-rc2-mm2
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/3/24/46

On Wednesday 24 March 2004 11:00, Martin Zwickel wrote:
Hi Martin,
> I'm unable to start my X server with this patch.
> I have the nvidia 5336 module loaded and if I start the X server, the
> machine completely freezes. With 2.6.5-rc2 everything works ok...
> If anyone wants my config, ask me.
apply this patch ontop of 2.6.5-rc2-mm2 tree to get nvidia working again.
nvidia inc: *hint hint* ;)
ciao, Marc
diff -Naurp linux-2.6.5-rc1-mm1/arch/i386/Kconfig linux-2.6.5-rc1-mm1-removed/arch/i386/Kconfig
--- linux-2.6.5-rc1-mm1/arch/i386/Kconfig	2004-03-16 21:28:03.000000000 +0100
+++ linux-2.6.5-rc1-mm1-removed/arch/i386/Kconfig	2004-03-16 21:32:08.000000000 +0100
@@ -1555,7 +1555,14 @@ config MAGIC_SYSRQ
 	default y
 
 config 4KSTACKS
-	def_bool y
+	bool "Use 4Kb for kernel stacks instead of 8Kb"
+	default n
+	help
+	  If you say Y here the kernel will use a 4Kb stacksize for the
+	  kernel stack attached to each process/thread. This facilitates
+	  running more threads on a system and also reduces the pressure
+	  on the VM subsystem for higher order allocations. This option
+	  will also use IRQ stacks to compensate for the reduced stackspace.
 
 config X86_FIND_SMP_CONFIG
 	bool