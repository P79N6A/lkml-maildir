Date: Mon, 29 Nov 1999 20:54:16 +0000 (GMT)
From: Alan Cox <>
Subject: Re: spin_unlock optimization(i386)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/11/29/90

> No, the MTRR's turn off store forwarding too.
If you do two PCI writes back to back on some boards then the PCI write
buffer is used. It doesn't matter what the MTRR is set to. This is why the
bttv drivers does reads in places to force a write to the card - eg when doing
	write
	delay
	write
We have to do
	write
	read
	delay
	write
MTRR allows you to increase the amount of bursting by doing burst writes from
the CPU but the PCI bridge will join in if not.
> Nope. I'm convinced we want to use MTRR's for high-speed networking, for
> example. You'll get to test thison gigabit soon enough, but the fastest
We already use MTRR for I2O. It makes a noticeable difference on block I/O
bulk bandwidth, even though the MTRR is only affecting command posting.
> On pre-P6 boxes we had the same kind of mysterious problems with some
> XFree86 setups on _some_ motherboards..
Yep. There are also PCI cards that mishandle burst writes to annoy you the
other way. Right now we handle those with judicious use of spurious reads.
Alan
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/