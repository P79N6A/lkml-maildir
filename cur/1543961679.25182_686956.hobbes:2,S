Date: Tue, 29 Apr 2008 22:05:13 -0300
From: Sergio Luis <>
Subject: Re: 2.6.25 slow boot/reboot
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/4/29/729

Ingo Molnar wrote:
> * Glauber Costa <gcosta@redhat.com> wrote:
> 
>> [    1.375711] Serial: 8250/16550 driver $Revision: 1.90 $ 4 ports, IRQ 
>> sharing enabled
>> [    4.399907] floppy0: no floppy controllers found
>>
>> a 90-second delay is not what's happening, or at least, not what the 
>> kernel is seeing. So my bet would be something clock-related. Probably 
>> the system's clocksource is not running the time correctly, which is 
>> causing system events to be delayed. I fail to see, however, how does 
>> the patch you bisected to influences this. Ingo, do you have any idea?
> 
> the first thing to check, does latest x86.git work fine:
> 
nope, it doesn't work fine, but gives me the same issue (I had to apply 
the scsi patch in 
http://lkml.org/lkml/2008/4/27/309
 in order to make 
it boot, though).
> 
http://people.redhat.com/mingo/x86.git/README
> 
> ? We've got fixes queued up - in particular one could result in 'slow' 
> systems by virtue of denying an ioremap():
> 
>   Subject: revert: "x86: ioremap(), extend check to all RAM pages"
> 
> maybe the bisection went haywire.
> 
I tried re-bisecting using now 2.6.25 as my initial good kernel, but in 
the 2nd or 3r iteration I start having compilation problems like such as 
--
ld:fs:afs/cell.o: file format not recognized; treating as linker script
ld:fs/afs/cell.o:1: syntax error
The same problem happens with fs/autofs/inode.o and crypto/hmac.o
--
and it stopped the bisection process from going forward.
I am using binutils 2.17.50.0.17 (slackware 12 here) and also tried the
latest binutils cvs, but it gives me the same error there.
Any suggestions?
thanks,
-sergio
> Or the secondary core booted up in such a sucky way that it causes such 
> massive slowdowns? Perhaps we are flooding the system with local APIC 
> timer interrupts or other interrupts?
> 
> 	Ingo