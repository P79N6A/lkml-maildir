Date: Wed, 07 May 2008 19:11:23 -0700
From: "H. Peter Anvin" <>
Subject: Re: [PATCH] x86: introduce a new Linux defined feature flag for PAT support
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/5/7/462

Linus Torvalds wrote:
> 
> On Thu, 8 May 2008, Rene Herman wrote:
>> Okay, so how's this? Seem to work well for me and makes me happy. Only
>> tested on UP.
> 
> Looks sane to me.
> 
> Not that I ever really saw the point about this whole argument in the 
> first place. Clearing the flags wasn't really wrong to begin with.
> 
Indeed it wasn't, and at least I have no interest of maintaining what is 
in effect an in-kernel version of x86info(1).
*Certainly* I don't want anything like this crap:
> diff --git a/arch/x86/mm/pat.c b/arch/x86/mm/pat.c
> index 277446c..6ee3efb 100644
> --- a/arch/x86/mm/pat.c
> +++ b/arch/x86/mm/pat.c
> @@ -43,7 +43,7 @@ static int pat_known_cpu(void)
>     if (!pat_wc_enabled)
>         return 0;
> 
> -    if (cpu_has_pat)
> +    if (cpu_has_pat && cpu_has_pat_good)
>         return 1;
> 
>     pat_wc_enabled = 0; 
	-hpa