Date: Mon, 1 Apr 2002 18:41:26 GMT
From:  Andries.Brouwer@cwi ...
Subject: [PATCH] omission in video driver
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/4/1/6

Documenting the video ioctls, I noticed to my dismay
that the ioctl to set the border color of the console
screen is lacking.
Here part of the fix for 2.4.19:
--- /linux/2.4/linux-2.4.19pre4/linux/drivers/video/vgacon.c	Fri Mar 29 01:02:00 2002
+++ ./vgacon.c	Tue Apr  1 20:14:14 2002
@@ -244,6 +244,14 @@
 				outb_p (6, 0x3ce) ;
 				outb_p (6, 0x3cf) ;
 #endif
+				/*
+				 * Load overscan register red.
+				 */
+				inb_p(0x3da);        /* clear flipflop */
+				outb_p(0x11, 0x3c0); /* index overscan color */
+				outb_p(0x0c, 0x3c0); /* load value */
+				outb_p(0x20, 0x3c0); /* allow display memory
+							to access palette */
 
 				/*
 				 * Normalise the palette registers, to point
Andries
[this is the nontrivial part; the rest is left as an exercise]
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/