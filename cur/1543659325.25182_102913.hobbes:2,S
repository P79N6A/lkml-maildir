Date: Mon, 13 Jan 2003 14:57:53 +0100
From: Thomas Schlichter <>
Subject: patch for errno-issue (with soundcore)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/1/13/108

Hi,
here is a simple patch to export the errno-symbol from the /lib/errno.c file. 
This solves the problem with the soundcore module and works perfectly for 
me...
   Thomas Schlichter
P.S.: This patch is made against the 2.5.56 tree
diff -urP linux-2.5.56/lib/Makefile linux-2.5.56_patched/lib/Makefile
--- linux-2.5.56/lib/Makefile	Fri Jan 10 21:11:20 2003
+++ linux-2.5.56_patched/lib/Makefile	Mon Jan 13 13:15:41 2003
@@ -9,7 +9,7 @@
 L_TARGET := lib.a
 export-objs := cmdline.o dec_and_lock.o rwsem-spinlock.o rwsem.o \
-	       crc32.o rbtree.o radix-tree.o kobject.o
+	       crc32.o rbtree.o radix-tree.o kobject.o errno.o
 obj-y := errno.o ctype.o string.o vsprintf.o brlock.o cmdline.o \
 	 bust_spinlocks.o rbtree.o radix-tree.o dump_stack.o \
diff -urP linux-2.5.56/lib/errno.c linux-2.5.56_patched/lib/errno.c
--- linux-2.5.56/lib/errno.c	Fri Jan 10 21:11:40 2003
+++ linux-2.5.56_patched/lib/errno.c	Mon Jan 13 13:17:21 2003
@@ -4,4 +4,8 @@
  *  Copyright (C) 1991, 1992  Linus Torvalds
  */
+#include <linux/module.h>
+
 int errno;
+
+EXPORT_SYMBOL(errno);