Date: Wed, 25 Feb 2004 16:18:28 -0700
From: Tom Rini <>
Subject: Re: [Kgdb-bugreport] [PATCH][1/3] Update CVS KGDB's serial driver
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/2/25/299

On Wed, Feb 25, 2004 at 03:10:03PM -0800, George Anzinger wrote:
> Convention has been that control C does the break.  If I read this 
> correctly you are saying that any character does it.
There are two cases.  One is that kgdb is not connected (so it's not
active) and since we're the int handler, someone wants to connect.  This
lets us do very nice things like break in any old time (gdb doesn't need
to be modified to send a ^C before it's first packet, etc).  The second
case is that we have connected, we've issued a few commands, continued,
and we want to break in now, so we ^C in gdb (which sends a ^C to the
target) and we do what we've got to do.
So perhaps, and I haven't read all of the code again to verify this,
kgdb_connected could be eliminated in favor of debugger_active.
> If that is the intent 
> and it works, then the whole buffer interrupt characters thing can be 
> removed.  In fact, an interrupt implies we are not in kgdb (it holds all 
> interrutps off) so that test, too, can go.  The interrupt thing then 
> reduces to a breakpoint.
I'll give that a shot tomorrow and see what happens.
-- 
Tom Rini
http://gate.crashing.org/~trini/
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/