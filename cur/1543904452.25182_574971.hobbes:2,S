Date: Wed, 25 Jul 2007 14:42:03 -0700
From: 	sukadev@us ...
Subject: Re: 2.6.23-rc1-mm1: m32r is_init() compile error
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/7/25/435

Adrian Bunk [bunk@stusta.de] wrote:
| On Wed, Jul 25, 2007 at 04:03:04AM -0700, Andrew Morton wrote:
| >...
| > Changes since 2.6.22-rc6-mm1:
| >...
| > +pid-namespaces-define-is_global_init-and-is_container_init.patch
| >...
| >  pid namespaces
| >...
| 
| m32r was forgotten:
| 
| <--  snip  -->
| 
| ...
|   CC      arch/m32r/mm/fault.o
| arch/m32r/mm/fault.c: In function 'do_page_fault':
| arch/m32r/mm/fault.c:274: error: implicit declaration of function 'is_init'
| make[2]: *** [arch/m32r/mm/fault.o] Error 1
| 
| <--  snip  -->
Sorry. Here is a fix for it.
---
From: Sukadev Bhattiprolu <sukadev@us.ibm.com>
Subject: [PATCH] Use is_global_init() in arch/m32r/mm/fault.c
Use is_global_init() in arch/m32r/mm/fault.c.
Signed-off-by: Sukadev Bhattiprolu <sukadev@us.ibm.com>
Cc: Cedric Le Goater <clg@fr.ibm.com>
Cc: Dave Hansen <haveblue@us.ibm.com>
Cc: Serge Hallyn <serue@us.ibm.com>
Cc: containers@lists.osdl.org
---
 arch/m32r/mm/fault.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)
Index: lx26-23-rc1-mm1/arch/m32r/mm/fault.c
===================================================================
--- lx26-23-rc1-mm1.orig/arch/m32r/mm/fault.c	2007-07-25 14:24:18.000000000 -0700
+++ lx26-23-rc1-mm1/arch/m32r/mm/fault.c	2007-07-25 14:32:23.000000000 -0700
@@ -271,7 +271,7 @@ no_context:
  */
 out_of_memory:
 	up_read(&mm->mmap_sem);
-	if (is_init(tsk)) {
+	if (is_global_init(tsk)) {
 		yield();
 		down_read(&mm->mmap_sem);
 		goto survive;
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/