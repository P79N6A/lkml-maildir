Date: Fri, 20 Aug 2004 12:42:46 +0100
From: Paulo Marques <>
Subject: Re: kallsyms 2.6.8 address ordering
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/8/20/107

Robin Holt wrote:
>....
> 
> It must be useful for people using small memory footprint machines.
> Check with the folks doing embedded stuff.
> 
> I remember a discussion about kallsyms and scaling problems with
> top reading some /proc/<pid> file.
> 
> Look at this:
> http://marc.theaimsgroup.com/?l=linux-kernel&m=108758995727517&w=2
> 
I posted recently (exactly one week ago) a different approach to this 
problem that increased kallsyms_lookup performance about 100 times, 
without a cache and without locking.
The patch is currently in Ingo Molnar's tree (I think). It works by 
doing binary search on tha address table and then using pre-calculated 
markers on the stem stream to search closer to the target. After that it 
copies only the stems before the searched symbol that actually 
contribute to the final result.
You can check the thread here:
http://marc.theaimsgroup.com/?l=linux-kernel&m=109245918613781&w=2
(Please note that the original patch broke handling of aliased symbols 
which was corrected later in the thread)
I'm working on an even better approach right now and I should have a 
patch ready this weekend.
This however has nothing to do with _module_ symbol names, which is a 
different problem altogether.
-- 
Paulo Marques - www.grupopie.com
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/