Date: Tue, 02 Oct 2007 08:45:22 +0200
From: Daniel Wagner <>
Subject: Re: [PATCH] firewire: adopt read cycle timer ABI from raw1394
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/10/2/33

>>> Pieter, do applications like yours need the cycle counter only for a few
>>> predetermined packets or for each and every packet?
>> We need it for every packet for two reasons:
>> 1) it's the only way to determine how many packets were dropped when
>> packet drops are flagged in the callback
> 
> Your application should know what the timestamp should be for each iso
> receive callback and if you see a larger value than expected you can
> use that to calculate how many cycles were lost.
That might not work if the device is synchronized to SPDIF for example. 
In this case it is possible (and very likely) that the two clock domains 
(SPDIF and the firewire bus) drift. The time difference between two 
timestamps do not have to be the same all the time. So it can be hard 
(possible?) to predict the next timestamp correctly.
daniel
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/