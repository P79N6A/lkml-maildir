Date: Fri, 26 Mar 1999 20:41:16 +0000
From: Adrian Bridgett <>
Subject: Re: 2.2.4 and token ring
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/3/27/38

On Fri, Mar 26, 1999 at 12:29:26AM +0100, Paul Norton wrote:
> Derick H Siddoway writes:
>  > Mar 23 16:17:26 slc-sunny kernel: tr0: using irq 10, PIOaddr a20, 8K shared 
>  > RAM.
> 
> Try setting your shared RAM to 16K for now if possible, and see if
> that improves things.  I've had reports of receiver congestion at 8K.
> This may or may not have bearing on the problem.
> 
>  > Mar 23 16:37:01 slc-sunny kernel: tr0: tx request but no packet!
> 
> That's a first.  In my 2.5 years of maintining the driver I've never
> seen _that_ message.  In fact that error message isn't in the driver
> code at all (ibmtr.[ch]).  I wonder what generates it.  Is this a
> laptop? 
It was in around 2.1.132 ->2.2.3 sort of timescale (possibly in an -ac
patch). There was a bug fix which changed a de-reference into a test and
printk: 
static void tr_tx(struct device *dev)
{
        struct tok_info *ti=(struct tok_info *) dev->priv;
        struct trh_hdr *trhdr;
        unsigned int hdr_len;
        __u32 dhb;
        unsigned char xmit_command;
        int i;
        struct trllc    *llc;
        if(ti->current_skb==NULL)
        {
                printk(KERN_ERR "%s: tx request but no packet!\n",
                        dev->name);
                dev->tbusy=0;
                mark_bh(NET_BH);
                return;
        }
HTH
Adrian
email: adrian.bridgett@zetnet.co.uk, 
http://www.poboxes.com/adrian.bridgett
Windows NT - Unix in beta-testing.   PGP key available on public key servers
Avoid tiresome goat sacrifices  -=-  use Debian Linux 
http://www.debian.org
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/