Date: Tue, 15 Aug 2006 22:52:37 -0400
From: Bill Fink <>
Subject: Re: [PATCH 1/1] network memory allocator.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/8/15/376

On Tue, 15 Aug 2006, Evgeniy Polyakov wrote:
> On Tue, Aug 15, 2006 at 03:49:28PM +0200, Peter Zijlstra (a.p.zijlstra@chello.nl) wrote:
> 
> > It could if you can provide adequate detection of memory pressure and
> > fallback to a degraded mode within the same allocator/stack and can
> > guarantee limited service to critical parts.
> 
> It is not needed, since network allocations are separated from main
> system ones.
> I think I need to show an example here.
> 
> Let's main system works only with TCP for simplicity.
> Let's maximum allowed memory is limited by 1mb (it is 768k on machine
> with 1gb of ram).
The maximum amount of memory available for TCP on a system with 1 GB
of memory is 768 MB (not 768 KB).
[bill@chance4 ~]$ cat /proc/meminfo
MemTotal:      1034924 kB
...
[bill@chance4 ~]$ cat /proc/sys/net/ipv4/tcp_mem
98304   131072  196608
Since tcp_mem is in pages (4K in this case), maximum TCP memory
is 196608*4K or 768 MB.
Or am I missing something obvious.
						-Bill
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/