Date: Fri, 27 Aug 1999 09:12:02 +0100
From: David Woodhouse <>
Subject: Re: 2.3.15 ifconfig oops
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/8/27/11

kuznet@ms2.inr.ac.ru said:
>  Please, update source of kernel symbols to the kernel, which you run
> and resend the results. For now your report is useless, unfortunately.
> 
That would explain why I couldn't work out what in hell it was doing :)
However, I still can't. This is what happened when I booted it again with 
init=/bin/bash, then just typed 'ifconfig lo 127.0.0.1'
It also oopses with 'ip link set lo up'.
The code is definitely right this time - that asm code really does exist at 
0xc106e0a9 in eth_header. I just don't know what it's doing in eth_header() at 
all when it was asked to bring the loopback interface up without sending any 
packets.
Options used: -V (default)
              -o /lib/modules/2.3.15 (specified)
              -K (specified)
              -L (specified)
              -m /mnt/scratch/linux-2.3/linux/System.map (specified)
              -c 1 (default)
No modules in ksyms, skipping objects
Unable to handle kernel paging request at virtual address fffffffe
c016e0a9
*pde = 00000000
Oops: 0002
CPU:    0
EIP:    0010:[<c016e0a9>]
EFLAGS: 00010216
eax: c021a043   ebx: c016a428   ecx: c03d7f38   edx: fffffff2
esi: c02143a0   edi: c02143a0   ebp: 00000000   esp: c03d7ea4
ds: 0018   es: 0018   ss: 0018
Process ifconfig (pid: 6, stackpage=c03d7000)
Stack: 00000000 00000041 c020db2c c01698ad c02143a0 00000000 c02143a0 00000000 
       c016a428 c02143a0 c00917a0 00000041 c00917c2 bffffd50 c0186177 c02143a0 
       00000041 00008914 00008914 bffffd50 c0094aa0 00000000 bffffd50 c016a99f 
Call Trace: [<c01698ad>] [<c016a428>] [<c0186177>] [<c016a99f>] [<c0187ee7>] [<c010f408>] [<c01657f9>] 
       [<c0132d11>] [<c010a4f0>] 
Code: 66 89 42 0c 85 db 74 10 0f b6 45 6b 8d 7a 06 89 c1 c1 e9 02 
>>EIP: c016e0a9 <eth_header+59/fc>
Trace: c01698ad <dev_open+25/7c>
Trace: c016a428 <dev_change_flags+54/108>
Trace: c0186177 <devinet_ioctl+213/4e4>
Trace: c016a99f <dev_ioctl+19b/2f0>
Trace: c0187ee7 <inet_ioctl+113/16c>
Trace: c010f408 <do_page_fault+160/498>
Trace: c01657f9 <sock_ioctl+1d/24>
Trace: c0132d11 <sys_ioctl+1b1/1e0>
Code:  c016e0a9 <eth_header+59/fc>             00000000 <_EIP>:
Code:  c016e0a9 <eth_header+59/fc>                0:	66 89 42 0c    	movw   %ax,0xc(%edx)
Code:  c016e0ad <eth_header+5d/fc>                4:	85 db          	testl  %ebx,%ebx
Code:  c016e0af <eth_header+5f/fc>                6:	74 10          	je     18 <_EIP+0x18> c016e0c1 <eth_header+71/fc>
Code:  c016e0b1 <eth_header+61/fc>                8:	0f b6 45 6b    	movzbl 0x6b(%ebp),%eax
Code:  c016e0b5 <eth_header+65/fc>                c:	8d 7a 06       	leal   0x6(%edx),%edi
Code:  c016e0b8 <eth_header+68/fc>                f:	89 c1          	movl   %eax,%ecx
Code:  c016e0ba <eth_header+6a/fc>               11:	c1 e9 02       	shrl   $0x2,%ecx
----                                 ----                                 ----
David Woodhouse        David.Woodhouse@mvhi.com       Office: (+44) 1223 810302
 Project Leader,     Process Information Systems      Mobile: (+44) 976 658355
    Axiom (Cambridge) Ltd., Swaffham Bulbeck, Cambridge, CB5 0NA, UK.
             finger dwmw2@ferret.lmh.ox.ac.uk for PGP key.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/