Date: 16 Mar 2003 18:31:00 -0500
From: Norka Lucena <>
Subject: ip_check_sum problem
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/3/16/105

Hi,
I am having problems computing the IP checksum with the th ip_fast_csum.
I would REALLY appreciate if any of you can help me.
This is the function I am using to compute the IP checksum.
void computeIPChecksum(struct iphdr* ip) {
  printk("*** IP checksum (before) : %d\n", ip->check);
  
  ip->check = 0;  /* it must be pre-zero'd */
  ip->check = ip_fast_csum((unsigned char *)ip, ip->ihl);
  printk("*** IP checksum (after)  : %d\n", ip->check);
}
 
Please notice that because I am not modifying the packet at all yet, I
should 
get the same result. Well, I don't. I have no clue why. 
Any thoughts?
Please, reply directly to norka@ecs.syr.edu.
Thank you so much, in advance,
Norka 
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/