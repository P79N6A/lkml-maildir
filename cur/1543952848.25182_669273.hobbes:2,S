Date: Wed, 19 Mar 2008 15:17:58 -0700
From: Andrew Morton <>
Subject: Re: [PATCH 1/2] x86_64 ia32 ptrace vs -ENOSYS
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/3/19/503

On Sun, 16 Mar 2008 21:57:41 -0700 (PDT)
Roland McGrath <roland@redhat.com> wrote:
> When we're stopped at syscall entry tracing, ptrace can change the %eax
> value from -ENOSYS to something else.  If no system call is actually made
> because the syscall number (now in orig_eax) is bad, then the %eax value
> set by ptrace should be returned to the user.  But, instead it gets reset
> to -ENOSYS again.  This is a regression from the native 32-bit kernel.
> 
> This change fixes it by leaving the return value alone after entry tracing.
It is unclear (to me) what are the consequences of this problem?  What
are the user-visible effects of the fix?
IOW: is it a 2.6.25 thing and if so, why?
Thanks.