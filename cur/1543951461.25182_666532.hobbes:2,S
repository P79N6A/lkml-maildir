Date: Tue, 11 Mar 2008 20:39:07 -0700
From: Max Krasnyansky <>
Subject: Re: boot cgroup questions
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/3/11/480

Paul Menage wrote:
> On Tue, Mar 11, 2008 at 7:53 PM, Max Krasnyansky <maxk@qualcomm.com> wrote:
>> It probably won't even affect your existing scripts since
>> they will be able to move tasks into another set just like they do now.
> 
> My boot scripts look in /dev/cpuset/tasks to find processes to move
> into the system cpuset. So that would break them.
I see. I assumed you just iterate through /proc/[0-9]*
>>  they will now have to unset it in the 'boot' set as well.
> 
> That can break existing userspace, so I presume PaulJ isn't in favour
> of this change.
My impression was that he was ok with changing his stuff. But I maybe
completely wrong of course. I'm actually perfectly fine with making it
conditional.
Maybe something like
	bootcpuset=1
?
>> Otherwise since the
>>  'boot' set will be non-exclusive (cpus and mems) it should not really affect
>>  anything.
> 
> Apart from other cpusets that *are* mem_exclusive or cpu_exclusive.
Hold on, if you move all the tasks ... Oh, never mind :). You mean that you
won't be able to create any cpusets that must be exclusive unless you nuke
'boot' set. Makes sense.
>>  So what's your concern with unconditional 'boot' cgroup/cpuset ?
> 
> The exclusivity problem, as above.
Yes I agree. If this 'boot' set is unconditional user-space tools will have to
change. As I mentioned above I totally do not mind if is is conditional. Any
other opinions out there ?
> 
> Which subsystems are you going to include in this boot hierarchy?
> Userspace is going to have to be aware of the fact that there's a
> cpusets hierarchy which might have to be dismantled if it wants to set
> up something different.
I was going to only include 'cpusets'. Does it make sense for anything else ?
Max