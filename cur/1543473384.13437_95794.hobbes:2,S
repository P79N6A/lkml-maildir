Date: Tue, 29 Dec 1998 12:21:35 -0500 (EST)
From: George <>
Subject: Re: 2.2.0-pre1 worse than 2.1.132
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1998/12/29/132

On Tue, 29 Dec 1998, MOLNAR Ingo wrote:
>On Tue, 29 Dec 1998, George wrote:
>
>> (gcc version egcs-2.91.60 19981201 (egcs-1.1.1 release)) #826 SMP Tue Dec 29 00:50:34 EST 1998
>                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
>
>(it should work with egcs, but i'd suggest you try 2.7.2.3 too. The fact
>that earlier kernels worked with your compiler means nothing, the SMP and
>scheduling changes in pre5-2.1.133 (and pre-2.2) introduced some quite
>optimized piece of APIC code)
>
>i'll double check those changes now.
2.7.2.3 does the same thing in the same spot.
Here's a "2.2.0 nosmp" bootup message log:
Linux version 2.2.0-pre1 (root@moving.van.ml.org) (gcc version 2.7.2.3)
#829 SMP Tue Dec 29 11:36:17 EST 1998
Intel MultiProcessor Specification v1.1
    Virtual Wire compatibility mode.
OEM ID: OEM00000 Product ID: PROD00000000 APIC at: 0xFEE00000
Processor #0 Pentium(tm) APIC version 17
Processor #1 Pentium(tm) APIC version 17
I/O APIC #2 Version 17 at 0xFEC00000.
Processors: 2
mapped APIC to ffffe000 (fee00000)
mapped IOAPIC to ffffd000 (fec00000)
Detected 232098066 Hz processor.
[ Oops, guess that's not MHz anymore. :) My fault. ]
Console: colour VGA+ 132x43
Calibrating delay loop... 462.03 BogoMIPS
Memory: 128164k/131072k available (700k kernel code, 416k reserved, 1752k
data, 40k init)
VFS: Diskquotas version dquot_6.4.0 initialized
Checking 386/387 coupling... OK, FPU using exception 16 error reporting.
Checking 'hlt' instruction... OK.
Intel Pentium with F0 0F bug - workaround enabled.
stuck on TLB IPI wait (CPU#0)
POSIX conformance testing by UNIFIX
per-CPU timeslice cutoff: 3702.36 usecs.
CPU0: Intel Pentium MMX stepping 03
SMP mode deactivated, forcing use of dummy APIC emulation.
calibrating APIC timer ...
..... CPU clock speed is 232.1085 MHz.
..... APIC bus clock speed is 66.3166 MHz.
CPU #1 not responding. Removing from cpu_present_map.
Error: only one processor found.
enabling symmetric IO mode... ...done.
ENABLING IO-APIC IRQs
init IO_APIC IRQs
 IO-APIC pin 0, 20, 21, 22, 23 not connected.
number of MP IRQ sources: 21.
number of IO-APIC registers: 24.
testing the IO APIC.......................
.... register #00: 02000000
.......    : physical APIC id: 02
.... register #01: 00170011
.......     : max redirection entries: 0017
.......     : IO APIC version: 0011
.... register #02: 00000000
.......     : arbitration: 00
.... IRQ redirection table:
 NR Log Phy Mask Trig IRR Pol Stat Dest Deli Vect:
 00 000 00  1    0    0   0   0    0    0    00
 01 000 00  0    0    0   0   0    1    1    59
 02 0FF 0F  0    0    0   0   0    1    1    51
 03 000 00  0    0    0   0   0    1    1    61
 04 000 00  0    0    0   0   0    1    1    69
 05 000 00  0    0    0   0   0    1    1    71
 06 000 00  0    0    0   0   0    1    1    79
 07 000 00  0    0    0   0   0    1    1    81
 08 000 00  0    0    0   0   0    1    1    89
 09 000 00  0    0    0   0   0    1    1    91
 0a 000 00  0    0    0   0   0    1    1    99
 0b 000 00  0    0    0   0   0    1    1    A1
 0c 000 00  0    0    0   0   0    1    1    A9
 0d 000 00  1    0    0   0   0    0    0    00
 0e 000 00  0    0    0   0   0    1    1    B1
 0f 000 00  0    0    0   0   0    1    1    B9
 10 0FF 0F  1    1    0   1   0    1    1    C1
 11 0FF 0F  1    1    0   1   0    1    1    C9
 12 0FF 0F  1    1    0   1   0    1    1    D1
 13 0FF 0F  1    1    0   1   0    1    1    D9
 14 000 00  1    0    0   0   0    0    0    00
 15 000 00  1    0    0   0   0    0    0    00
 16 000 00  1    0    0   0   0    0    0    00
 17 000 00  1    0    0   0   0    0    0    00
IRQ to pin mappings:
0->2 1->1 2->-1 3->3 4->4 5->5 6->6 7->7 8->8 9->9 10->10 11->11 12->12
13->13 14->14 15->15 16->16 17->17 18->18 19->19 20->-1 21->-1 22->-1
23->-1 24->-1 25->-1 26->-1 27->-1 28->-1 29->-1 30->-1 31->-1 32->-1
33->-1 34->-1 35->-1 36->-1 37->-1 38->-1 39->-1 40->-1 41->-1 42->-1
43->-1 44->-1 45->-1 46->-1 47->-1 48->-1 49->-1 50->-1 51->-1 52->-1
53->-1 54->-1 55->-1 56->-1 57->-1 58->-1 59->-1 60->-1 61->-1 62->-1
63->-1
.................................... done.
PCI: PCI BIOS revision 2.10 entry at 0xfb5a0
PCI: Using configuration type 1
PCI: Probing PCI hardware
PCI->APIC IRQ transform: (B0,I17,P0) -> 19
PCI->APIC IRQ transform: (B0,I18,P0) -> 18
PCI->APIC IRQ transform: (B0,I19,P0) -> 17
PCI->APIC IRQ transform: (B0,I19,P0) -> 17
PCI->APIC IRQ transform: (B0,I20,P0) -> 16
Swansea University Computer Society NET3.039 for Linux 2.1
NET3: Unix domain sockets 0.16 for Linux NET3.038.
Swansea University Computer Society TCP/IP for NET3.037
IP Protocols: ICMP, UDP, TCP
Initializing RT netlink socket
Starting kswapd v 1.5
Serial driver version 4.27 with no serial options enabled
ttyS00 at 0x03f8 (irq = 4) is a 16550A
ttyS01 at 0x02f8 (irq = 3) is a 16550A
Real Time Clock Driver v1.09
PIIX3: IDE controller on PCI bus 00 dev 39
PIIX3: not 100%% native mode: will probe irqs later
    ide0: BM-DMA at 0xf000-0xf007, BIOS settings: hda:pio, hdb:pio
    ide1: BM-DMA at 0xf008-0xf00f, BIOS settings: hdc:pio, hdd:pio
hda: Maxtor 71000 A, ATA DISK drive
hdb: CD820E.1v0789108, ATAPI CDROM drive
hdc: IBM-DTTA-371010, ATA DISK drive
ide0 at 0x1f0-0x1f7,0x3f6 on irq 14
[ Typically reboots around here without 'nosmp' or 'noapic' I can't
  give a more precise position because I don't have a serial console. ]
ide1 at 0x170-0x177,0x376 on irq 15
hda: Maxtor 71000 A, 958MB w/64kB Cache, CHS=1946/16/63, DMA
hdc: IBM-DTTA-371010, 9641MB w/465kB Cache, CHS=19590/16/63, (U)DMA
Partition check:
 hda: hda1 hda2 hda3 hda4
 hdc: hdc1 hdc2 hdc3 hdc4
VFS: Mounted root (ext2 filesystem) readonly.
-George
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/