Date: Wed, 06 Jun 2007 14:48:52 +0100
From: Andy Whitcroft <>
Subject: Re: 2.6.22-rc4-mm1
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/6/6/184

Cedric Le Goater wrote:
> Andrew,
> 
> here's a minor fix for x86_64,
> 
> C.
> 
> 
> when CONFIG_PM=y and CONFIG_SOFTWARE_SUSPEND=n, 
> 
>   CC      arch/x86_64/kernel/e820.o
> /home/legoater/linux/2.6.22-rc4-mm1/arch/x86_64/kernel/e820.c: In function `e820_mark_nosave_regions':
> /home/legoater/linux/2.6.22-rc4-mm1/arch/x86_64/kernel/e820.c:248: warning: implicit declaration of function `register_nosave_region'
> 
> Signed-off-by: Cedric Le Goater <clg@fr.ibm.com>
> ---
>  include/linux/suspend.h |    8 ++++++++
>  1 file changed, 8 insertions(+)
> 
> Index: 2.6.22-rc4-mm1/include/linux/suspend.h
> ===================================================================
> --- 2.6.22-rc4-mm1.orig/include/linux/suspend.h
> +++ 2.6.22-rc4-mm1/include/linux/suspend.h
> @@ -74,6 +74,14 @@
>  extern void hibernation_set_ops(struct hibernation_ops *ops);
>  extern int hibernate(void);
>  #else /* CONFIG_SOFTWARE_SUSPEND */
> +static inline void register_nosave_region(unsigned long b, unsigned long e)
> +{
> +}
> +
> +static inline void register_nosave_region_late(unsigned long b, unsigned long e)
> +{
> +}
> +
>  static inline int swsusp_page_is_forbidden(struct page *p) { return 0; }
>  static inline void swsusp_set_page_free(struct page *p) {}
>  static inline void swsusp_unset_page_free(struct page *p) {}
> -
Looks like this is the cause of a bunch of compile failures across our
testing.  Will shove this through tko.
-apw
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/