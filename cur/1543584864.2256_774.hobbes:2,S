Date: Tue, 13 Mar 2001 08:05:05 +0100
From: (Michael Mueller)
Subject: [PATCH] Using I2O modules with I2O core in kernel (follow up)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/3/13/17

Hi Alan and folks,
I wrote: 
> the EXPORT_SYMBOL within the original source module. This was only done
> for the case it would have been compiled as kernel module. The patch is
> appended.
And again the mysterous lklm problem appeared and I forgot to append the
actual patch. Btw. the problem does exists through all the current
version of the 2.2 and 2.4 kernel line. The patch should apply cleanly
to all but the ac series where the sources were moved within the tree.
Michael--- linux-2.4.2/drivers/i2o/i2o_core.c.orig	Thu Feb 22 18:09:49 2001
+++ linux/drivers/i2o/i2o_core.c	Tue Mar 13 07:41:04 2001
@@ -3113,8 +3113,6 @@
 }
 
 
-#ifdef MODULE
-
 EXPORT_SYMBOL(i2o_controller_chain);
 EXPORT_SYMBOL(i2o_num_controllers);
 EXPORT_SYMBOL(i2o_find_controller);
@@ -3146,6 +3144,8 @@
 EXPORT_SYMBOL(i2o_dump_message);
 
 EXPORT_SYMBOL(i2o_get_class_name);
+
+#ifdef MODULE
 
 MODULE_AUTHOR("Red Hat Software");
 MODULE_DESCRIPTION("I2O Core");