Date: Sun, 30 Jan 2000 23:55:22 +0000 (GMT)
From: Russell King <>
Subject: Re: TCP SYNs broken in 2.3.41
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/1/31/12

David S. Miller writes:
> The networking never has, and probably never will, guarentee the
> alignment of packets.  This means that all of your checksum support
> needs to handle completely arbitrary alignment cases.
It's not the checksum code which is broken.
> The networking also requires that unaligned load/store will work
> in the kernel.  If you don't handle this, then IPX, Appletalk, and
> some of the other more esoteric protocols will simply not work
> on your platform.
I am aware that the other protocols will not work, however, since I'm
using only IP, it "should" work.
> So does the ARM code handle this?
The processor does not handle unaligned accesses by itself - you have
to take an unaligned trap handler just like the ALPHA has to.  This
means that performance is hit badly.
Since I don't have a requirement for the trap handler, I have it
disabled, especially as outgoing IP packets over ethernet definitely
should always be aligned.
And thanks to Alexy for confirming the problem.
   _____
  |_____| ------------------------------------------------- ---+---+-
  |   |         Russell King        rmk@arm.linux.org.uk      --- ---
  | | | |   
http://www.arm.linux.org.uk/~rmk/aboutme.html
    /  /  |
  | +-+-+                                                     --- -+-
  /   |               THE developer of ARM Linux              |+| /|\
 /  | | |                                                     ---  |
    +-+-+ -------------------------------------------------  /\\\  |
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/