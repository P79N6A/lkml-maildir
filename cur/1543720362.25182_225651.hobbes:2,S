Date: Mon, 07 Jun 2004 02:19:38 +0200
From: Ferenc Engard <>
Subject: ext3 errors
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/6/6/191

Hi all,
I have installed a new server, and created ext3 (data=ordered)
filesystems on RAID1 partitions. I finished the installation a few weeks
ago, and today I tried to install in in the place of the old one.
I have worked a few hours on the server, mainly in the /etc directory,
and copied a few gig's to the /home dir, which was on a separate
partition than root. After that I have rebooted, to check that
everything going up OK. Well, nothing was OK.
The fsck failed with many "Freeing blocks not in datazone" and "Journal
aborting" errors, and I came up with a read-only root partition. I
manually e2fsck'd it, saying yes to all questions, and rebooted again.
Next time it was the same story: fsck always failed, found many errors,
the lost+found growed... 
AND, the real interesting story: all of my modifications in the /etc
directory, which I made at least an hour or more, was lost! Just as if
nothing has been written to the disk from the journal for at least an
hour. Also, there were some corrupted files, and also, some obvious fs
errors after an fsck, for example, accessing /etc/apache-ssl/apache.conf
resulted some errors like this:
Jun  6 21:56:25 zeratul kernel: attempt to access beyond end of device
Jun  6 21:56:25 zeratul kernel: 09:01: rw=0, want=1085624632,
limit=20972736
The end of the story: I booted from CD, copied the whole root
partition's contents off-disk, reformatted the RAID1 partition with
mke2fs -j, copied back the contents, and it seems that now everything is
good (so far). I don't think that the problem is in hardware, because of
the RAID1, and also, these are brand-new 80G Maxtor SCSI drives.
What can cause an error like this? This is a linux 2.4.26 on a PIV-2666,
debian testing dist.
Thanks,
Ferenc Engard
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/