Date: Sat, 22 Nov 2003 18:14:23 +1100
From: Nick Piggin <>
Subject: [PATCH][CFT] NUMA / SMP scheduler "improvements"
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/11/22/5

Hi everyone,
I would like people to test my scheduler improvements if possible,
if you are interested in that sort of thing. Patch at:
http://www.kerneltrap.org/~npiggin/w22/
For those following my patches, the big thing in this release is
balancing backoff needed for the bigger boxes. I'm not sure how
this compares to your stuff John, and it probably isn't tuned too
well for all sizes of boxes.
I use a log(num_online_cpus()) function to scale the global balancing
interval, so this might not be appropriate. It also probably doesn't
do global balances quite enough for 1CPU/node boxes.
Benchmarks are generally as good or better, although idle time may
be up due to more conservative balancing and the backoff stuff.
The good metric is the number of tasks being pulled to another node
dbench pulls    72%
tbench pulls     0.28%
make -j         11.7%
hackbench       17%
reaim           56%
Number of local tasks pulled off CPU is generally down too
dbench    44%
tbench    71%
make -j   76%
hackbench 114%
reaim     100%
This is on osdl's 16 way NUMA (4x4). Testing on other platforms welcome.
Best regards,
Nick
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/