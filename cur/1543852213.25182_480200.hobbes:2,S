Date: Tue, 7 Nov 2006 23:27:11 +0100
From: Andreas Mohr <>
Subject: Re: CONFIG_NO_HZ: missed ticks, stall (keyb IRQ required) [2.6.18-rc4-mm1]
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/11/7/294

Hi,
On Tue, Nov 07, 2006 at 10:45:58AM +0100, Thomas Gleixner wrote:
> On Tue, 2006-11-07 at 10:28 +0100, Thomas Gleixner wrote:
> > Yes, it leaves the C states untouched, it uses (should use) PIT instead
> > of the local APIC timer. I'm a bit confused, why this does not work on
> > your box.
> 
> Can you try the patch below please ? I just noticed, that the local APIC
> gets reprogrammed before we switch back from PIT, which is perfectly
> fine, but maybe your box does not like that treatment. If this does not
> help, I'm going to do the never switch back from PIT hackery which I
> wanted to avoid for performance reasons.
I applied the patch, the changes *are* in the tree and I did create and
install a new image (with CONFIG_NO_HZ re-enabled and C1 hard-wiring removed),
but it failed again, completely. The usual hang during boot with
keyboard activity required, and then it didn't even manage to finish booting
(I probably was too slow in generating the necessary amount of events).
Let me think a bit about that stuff, maybe I'll be able to figure out what's
happening on my system. Or any other ideas?
(since I would like to somehow get this resolved without less than perfect
workarounds if possible)
Andreas Mohr
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/