Date: 10 Jun 2003 21:29:10 +0100
From: Justin Cormack <>
Subject: Re: siI3112 crash on enabling dma
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/6/10/245

On Tue, 2003-06-10 at 17:05, Adriaan Peeters wrote:
> On Fri, 2003-06-06 at 21:52, Adriaan Peeters wrote:
> > Hello,
> > 
> > I'm using 2.4.20-ac2, when I boot the system, SATA disks on a sil3112
> > controller (IWill IS150-R) are detected, but dma is not enabled.
> > The disks work perfectly in raid 1 mode, and I can enable dma using 
> > hdparm -X66 -d1 /dev/hda
> > hdparm -X66 -d1 /dev/hdc
> > 
> > But sometimes this fails and the entire system hangs. I suspect it
> > happens when I enable dma mode while there is some harddisk activity.
> 
> The system seemed to be stable for a few days, but then the following
> happened:
> - First I got read-only filesystem messages
> - a few seconds later I/O errors
> - After rebooting, the root filesystem (ext3) could not be mounted
> - After fscking and a lot of deleted inodes, large portions of the
> filesystem were gone to lost+found (/etc, /bin, ...)
> 
> I can only relate this to the driver, it seems very unstable :(
> 
> Some info: 2.4.20-ac2, asus a7v8x motherboard (onboard promise raid not
> used), iwill IS150-R raid controler, 2 Maxtor 6Y080M0 SATA disks in
> raid1.
I got severe filesystem corruption on an Sii3112 system (Supermicro
E7505 with 2 onboard SiI3112) but I later memtested the machine and
found bad ram, so I dont think it is a valid example of corruption.
However I am still slightly suspicious. Did you have 
echo "max_kb_per_request:15" > /proc/ide/hdXX/settings
set for the relevant drives? This is a known bug (I didnt have this
either, another reason why this is not a valid datapoint...)
Justin
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/