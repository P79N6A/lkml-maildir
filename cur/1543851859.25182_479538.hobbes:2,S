Date: Sun, 5 Nov 2006 21:42:20 +0100
From: Hoang-Nam Nguyen <>
Subject: [PATCH 2.6.19 3/4] ehca: Kconfig: activate scaling code as default to prevent drop packets (UD)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/11/5/140

Hello Roland!
Here is a small patch of ehca's Kconfig that activates scaling code as default.
After several measurements we saw that this feature prevents drop packets (UD)
in stress situation. Thus, enabling it helps to improve ehca's bandwidth through
ipoib.
Thanks!
Nam
Signed-off-by: Hoang-Nam Nguyen <hnguyen@de.ibm.com>
---
 Kconfig |    1 +
 1 files changed, 1 insertion(+)
diff --git a/drivers/infiniband/hw/ehca/Kconfig b/drivers/infiniband/hw/ehca/Kconfig
index 922389b..727b10d 100644
--- a/drivers/infiniband/hw/ehca/Kconfig
+++ b/drivers/infiniband/hw/ehca/Kconfig
@@ -10,6 +10,7 @@ config INFINIBAND_EHCA
 config INFINIBAND_EHCA_SCALING
  bool "Scaling support (EXPERIMENTAL)"
  depends on IBMEBUS && INFINIBAND_EHCA && HOTPLUG_CPU && EXPERIMENTAL
+ default y
  ---help---
  eHCA scaling support schedules the CQ callbacks to different CPUs.
 diff --git a/drivers/infiniband/hw/ehca/Kconfig b/drivers/infiniband/hw/ehca/Kconfig
index 922389b..727b10d 100644
--- a/drivers/infiniband/hw/ehca/Kconfig
+++ b/drivers/infiniband/hw/ehca/Kconfig
@@ -10,6 +10,7 @@ config INFINIBAND_EHCA
 config INFINIBAND_EHCA_SCALING
 	bool "Scaling support (EXPERIMENTAL)"
 	depends on IBMEBUS && INFINIBAND_EHCA && HOTPLUG_CPU && EXPERIMENTAL
+	default y
 	---help---
 	eHCA scaling support schedules the CQ callbacks to different CPUs.
 