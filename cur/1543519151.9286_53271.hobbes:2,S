Date: Tue, 14 Dec 1999 11:15:49 +0200
From: Constantine Gavrilov <>
Subject: Re: Again: EQL - someone's use this thing yet?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/12/14/24

> On Mon, 6 Dec 1999, Vladislav Malyshkin wrote:
> 
> > I use mulipath routing for that. Install ip program from Alexey
> > Kuznetsov iproute-2.2.4-2 package (on RedHat 6.1) then entablish
> > all your ppp links WITHOUT default route set in ppp configuration.
> > then
(snip)
> > It works, but it is not perfect.
> > Some times it does not do good balancing.
> 
>         As a followup to my prev message, the patch *is* part of the
> diffserv package, and the command would be
> 
> /sbin/ip route add default equalize nexthop via gateway.number.1.ip \
> dev ppp0 nexthop via gateway.number.2.ip dev ppp1
> 
> /sbin/ip route list gets you
> 
>  default equalize
>          nexthop via 10.65.60.12  dev ppp1 weight 1
>          nexthop via 10.65.60.12  dev ppp0 weight 1
> 
I have the following multipath + equalize question: Can I use it to
automatically load balance IP packet traffic on a local network through multiple
ethernet cards?
Consider the following situation:
eth0:	10.3.2.62, netmask 255.0.0.0 , net 10.0.0.0
eth1:	10.3.2.63, netmask 255.0.0.0 , net 10.0.0.0 .
The problem is, that with route multipath option disabled, all traffic will be
routed through one interface. With multipath option enabled, the traffic will be
routed through both interfaces, however the load  balancing is destination
address based (it balances destination addresses, not packets). This in not
NEARLY fine grained enough. Granted, equalize option (patch from diffserv
package) solves this problem. However, the problem is that routes to networks
associated with the IP interface addresses are configured automatically by
kernel once interfaces are brought up. Thus, I can't pass "equalize" or
(whatever else fancy option) to such routes (or can I?).
Does this mean that only channel bonding (discussed previously in this thread)
can provide a required solution in this case?
-- 
----------------------------------------
Constantine Gavrilov
Unix System Administrator and Programmer
Orbotech
Yavne 81102, Israel
Phone: (972-8)-942-3064
Fax:   (972-8)-942-3800
----------------------------------------
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/