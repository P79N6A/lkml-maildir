Date: Wed, 14 Sep 2005 19:31:12 -0500
From: Sripathi Kodi <>
Subject: Re: [PATCH 2.6.13.1] Patch for invisible threads
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/9/14/405

Al Viro wrote:
> On Tue, Sep 13, 2005 at 04:10:21PM -0700, Linus Torvalds wrote:
> 
>>I don't think this is wrong per se, but you shouldn't take the tasklist 
>>lock normally. You're better off just doing
> 
> 
> Could you exlain why we might want to bother with that in the first place?
> In any case, why would we want to put that stuff on the common codepath
> instead of specialized ->permission()?
> 
Al,
I can move this code from proc_root_link() to proc_check_root(), but it will 
still not be completely limited to ->permission() path. I can create a 
separate ->permission() for proc_task_inode_operations, and have this 
additional code there. If I do that, I think I will have to duplicate much 
of proc_check_root(). Or else, I will have to split proc_check_root() into 
two functions to prevent code duplication. Please let me know if any of 
these makes sense, and I will send another patch.
If you don't like this idea at all, please let me know if there any other 
way of solving the invisible threads problem, short of taking out 
->permission() altogether from proc_task_inode_operations.
Thanks,
Sripathi.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/