Date: Fri, 04 Apr 2008 10:29:53 +0200
From: Richard MUSIL <>
Subject: Re: Problem with accessing stable git over http
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2008/4/4/58

On 4.4.2008 7:07, Willy Tarreau wrote:
> On Wed, Mar 26, 2008 at 11:35:16AM +0100, Richard MUSIL wrote:
>> For some reason I cannot access stable kernel git branches over http
>> since version 2.6.23.y.
>>
>> HTTP access is working for 2.6.22.y
>> (
http://www.kernel.org/pub/scm/linux/kernel/git/stable/linux-2.6.22.y.git
)
>> - I can fetch from it. It is also working for Linus' dev branch
>> (
http://www.kernel.org/pub/scm/linux/kernel/git/torvalds/linux-2.6.git
)
>> which I clone.
>> But for stable 2.6.23.y and 2.6.24.y, when I try fetch, I get in particular:
>>
>> HTTP GET
>> 
http://www.kernel.org/pub/scm/linux/kernel/git/stable/linux-2.6.24.y.git/info/refs
>> HTTP/1.1
>> HTTP HTTP/1.1 404 Not Found (text/html)
>>
>> I am behind proxy and firewall and I cannot use git protocol.
>>
>> Does anyone know, what might be a problem? It kind of makes the sources
>> unreachable for me :(.
> 
> what version of git are you using ? Those files indeed do not exist in
> either repository, so it would be good to find why git tries to fetch
> them.
I am usually using latest version compiled on gentoo from ~x86
(currently it is 1.5.4.5).
Interestingly those files exist for linux-2.6.22.y, i.e. accessing
http://www.kernel.org/pub/scm/linux/kernel/git/stable/linux-2.6.22.y.git/info/refs
gives something and that is probably why I can fetch from 2.6.22.y branch.
Why git tries to access it is something beyond my understanding, I guess
it is the way http access works.
But I wonder, why the similar file is not present on 2.6.23.y and
2.6.24.y branch. My git config for project looks like this:
> [core]
>         repositoryformatversion = 0
>         filemode = true
>         bare = false
>         logallrefupdates = true
> [remote "origin"]
>         url = 
http://www.kernel.org/pub/scm/linux/kernel/git/torvalds/linux-2.6.git
>         fetch = +refs/heads/*:refs/remotes/origin/*
> [branch "master"]
>         remote = origin
>         merge = refs/heads/master
> [remote "linux-2.6.22.y"]
>         url = 
http://www.kernel.org/pub/scm/linux/kernel/git/stable/linux-2.6.22.y.git
>         fetch = +refs/heads/*:refs/remotes/linux-2.6.22.y/*
> [remote "linux-2.6.24.y"]
>         url = 
http://www.kernel.org/pub/scm/linux/kernel/git/stable/linux-2.6.24.y.git
>         fetch = +refs/heads/*:refs/remotes/linux-2.6.24.y/*
So there is clearly discrepancy between those two on the server, but
whether this is a bug or intentional I do not know.
Richard