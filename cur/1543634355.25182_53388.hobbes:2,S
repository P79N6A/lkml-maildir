Date: Wed, 19 Jun 2002 12:45:31 -0500 (CDT)
From: Brent Cook <>
Subject: Re: File permission problem with NFSv3 and 2.5.20-dj4
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/6/19/161

On Sat, 15 Jun 2002, Dave Jones wrote:
> On Fri, Jun 14, 2002 at 05:30:01PM -0500, Brent Cook wrote:
>
>  >   Looks like there is a problem with NFSv3 and file permissions in the DJ
>  > kernels.
>  >
>  > A file that is marked as executable will lose its executable flag whenever
>  > it is written to. I suspect the proble lies in the changes to the NFS file
>  > info cacheing in the DJ kernels at least since 2.5.20-dj1 (I was unable
>  > to find where this change occured in the changelog).
>
> The NFS changes need going over. I'll see whats left after backing out
> Trond's READDIRPLUS patch. I'm expecting it to be just some small bits
> like BKL shifting around, but that shouldn't be causing the problems
> you saw..
>
>         Dave
>
You were right. Backing out READDIRPLUS fixes the problem with NFS and
files losing the executable bit. I just tried things with 2.5.23-dj1 and
all is well.
Here are a couple of compile fixes for that kernel though:
drivers/input/keyboard/ps2serkbd.c is missing
 #include <linux/tqueue.h>
drivers/input/serio/ct82c710.c is missing
 #include <linux/sched.h>
 #include <asm/errno.h>
Thanks,
 - Brent
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/