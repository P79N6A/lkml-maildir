Date: Sun, 19 Sep 2004 21:06:05 -0400
From: Jon Smirl <>
Subject: Re: Design for setting video modes, ownership of sysfs attributes
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/9/19/141

I've been talking to the I2C people about the right way to solve this
for the code in radeon_probe_i2c_connector(). This should be solvable
in the I2C framework by writing an EDID driver that implements the
code in it's attach_adapter/detach_adapter functions.  What I2C is
missing is a way to tell it to not run the DDC module on non video
buses. Buses need to be marked with a class like video or ram.
I agree that what you have in the radeon driver works. But this is a
generic problem with DDC monitors, not something that is radeon
specific. If possible I'd like to figure out a solution to this that
will work generically so we don't have to add this same code to all of
the video drivers.  I currently don't have a working solution for the
problem using the I2C framework.
I kept the code for the non-DDC monitor detection as is and just made
an IOCTL around it so that I can trigger it from the user space app.
On Mon, 20 Sep 2004 10:07:40 +1000, Benjamin Herrenschmidt
<benh@kernel.crashing.org> wrote:
> On Mon, 2004-09-20 at 02:12, Jon Smirl wrote:
> 
> > The radeon driver has that extra code for intializing older DDC. That
> > can be handled generically in the I2C layer by writing a ddc driver
> > that is a superset of the eeprom driver.  I'd rather get that code
> > into a generic driver than repeat it in every video card driver.
> 
> I'm not a fan of this solution as you know... oh well... and there's
> all that code to detect non-DDC capable monitors as well, which won't
> go through /sys/*/i2c...
> 
> But do as you like, I don't have time to work on it so I'll shut up.
> 
> Ben.
> 
> 
-- 
Jon Smirl
jonsmirl@gmail.com
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/