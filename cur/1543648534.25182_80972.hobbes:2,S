Date: Thu, 17 Oct 2002 15:15:06 -0200 (BRST)
From: Rik van Riel <>
Subject: Re: Pathological case identified from contest
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/10/17/192

On Thu, 17 Oct 2002, Andrew Morton wrote:
> No, it's a bug in either the pipe code or the CPU scheduler I'd say.
The scheduler definately seems to have a big error here.
Say we're doing a pipe test with 3 processes.  On an idle
system this would result in each process getting 33% of
the CPU and using the other 66% of the time sleeping.
Of course, this makes all 3 processes "interactive", since
they sleep twice as much as they run.
Now introduce 1 CPU hog in competition to this load, this
CPU hog never sleeps so it is quickly marked as cpu hog and
will end up on the expired array after one timeslice (150 ms?).
The pipe processes will have the CPU all to themselves until
STARVATION_LIMIT (2 seconds) time has passed.
This means that the CPU hog will get 7.5% of the CPU, while
the pipe processes get the other 92.5% of the CPU, or 30.8%
each, almost 4 times as much as the CPU hog.
This could either mean the sleep average isn't a useful way
to measure CPU priority or the way we measure the sleep
average needs to be changed somewhat...
kind regards,
Rik
-- 
Bravely reimplemented by the knights who say "NIH".
http://www.surriel.com/
		
http://distro.conectiva.com/
Current spamtrap:  <a href=mailto:"october@surriel.com">october@surriel.com</a>
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/