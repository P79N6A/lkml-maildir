Date: Wed, 29 Dec 1999 05:14:14 -0600
From: "George R. Kasica" <>
Subject: Kernel OOPS running BRU under 2.2.13 Caldera Open Linux
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/12/29/17

Hello:
Per advice from Doug Ledford I'm posting this here, as he doesn't feel
its a SCSI issue.
Recently on the LInux box I'm running I'm seeing oops usually during
tape backup using the BRU package that comes with Caldera Open Linux
2.3 running kernel 2.2.13. 
System Specifics:
Linux 2.2.13
256MB RAM
Celeron 333 Processor
Adaptec 2910B Controller
Disk Drives:
hda: SAMSUNG SV0844A, ATA DISK drive
hdb: FX240S, ATAPI CDROM drive
hdc: WDC AC32500H, ATA DISK drive
SCSI DISK ID #1 sda: SEAGATE   Model: ST32550N   Rev: 0021
Tape Auto Changer ID#3 HP        Model: C1553A  Rev:NS01
Included below are syslog, dmesg output and the results from running
through ksymoops.
Any suggestions or thoughts appreciated, this used to be a rock solid
system.
SYSLOG MESSAGES:
Dec 29 01:02:33 eagle kernel: EXT2-fs error (device
ide0(3,1)): ext2_readdir: di
rectory #20485 contains a hole at offset 1024
Dec 29 01:02:33 eagle kernel: EXT2-fs error (device
ide0(3,1)): ext2_readdir: di
rectory #20485 contains a hole at offset 2048
Dec 29 01:02:33 eagle kernel: EXT2-fs error (device
ide0(3,1)): ext2_readdir: di
rectory #20485 contains a hole at offset 3072
Dec 29 01:02:33 eagle kernel: EXT2-fs error (device
ide0(3,1)): ext2_readdir: di
rectory #20485 contains a hole at offset 4096
Dec 29 01:02:47 eagle kernel: Unable to handle kernel paging request
at
virtual
address 00001000
Dec 29 01:02:47 eagle kernel: current->tss.cr3 = 077ed000, %cr3 =
077ed000
Dec 29 01:02:47 eagle kernel: *pde = 00000000
Dec 29 01:02:47 eagle kernel: Oops: 0000
Dec 29 01:02:47 eagle kernel: CPU:    0
Dec 29 01:02:47 eagle kernel: EIP:    0010:[find_buffer+42/68]
Dec 29 01:02:47 eagle kernel: EFLAGS: 00010206
Dec 29 01:02:47 eagle kernel: eax: 00001000   ebx: 00040470
ecx: 00000303   ed
x: 00001000
Dec 29 01:02:47 eagle kernel: esi: 00000400   edi: 00000000
ebp: 00000100   es
p: c29fde00
Dec 29 01:02:47 eagle kernel: ds: 0018   es: 0018   ss: 0018
Dec 29 01:02:47 eagle kernel: Process bru (pid: 9520, process nr: 72,
stackpage=
c29fd000)
Dec 29 01:02:47 eagle kernel: Stack: c012451d 00000303 00040470
00000400
c01251c
b c0aa3ea0 00000303 00040470
Dec 29 01:02:47 eagle kernel:        c0125217 00000303 00040470
00000400
c0249e9
8 00000004 c237cdd0 00000000
Dec 29 01:02:47 eagle kernel:        c29fded4 00000303 00000000
c0aa3ea0
c012fd0
e c237cdd0 c0249e98 c237cdd8
Dec 29 01:02:47 eagle kernel: Call Trace: [get_hash_table+29/44]
[brw_page+231/8
44] [brw_page+307/844] [get_new_inode+162/304] [get_new_inode+147/304]
[generic_
readpage+140/156] [do_generic_file_read+1224/1408]
Dec 29 01:02:47 eagle kernel:        [do_generic_file_read+1043/1408]
[__wake_up
+59/68] [generic_file_read+91/116] [file_read_actor+0/80]
[sys_read+178/208] [sy
stem_call+52/56] [startup_32+43/286]
Dec 29 01:02:47 eagle kernel: Code: 8b 12 39 58 04 75 f3 39 70 08 75
ee 66
39 48
 0c 75 e8 89 c2
-----------------------------
DMESG OUTPUT:
Linux version 2.2.13 (root@eagle.netwrx1.com) (gcc version 2.95.2
19991024 (release)) #1 Thu Dec 23 22:45:59 CST 1999
Detected 334094636 Hz processor.
Console: colour VGA+ 80x25
Calibrating delay loop... 333.41 BogoMIPS
Memory: 257668k/262080k available (1136k kernel code, 412k reserved,
2824k data, 40k init)
VFS: Diskquotas version dquot_6.4.0 initialized
CPU: Intel Celeron (Mendocino) stepping 00
Checking 386/387 coupling... OK, FPU using exception 16 error
reporting.
Checking 'hlt' instruction... OK.
POSIX conformance testing by UNIFIX
PCI: PCI BIOS revision 2.10 entry at 0xf08b0
PCI: Using configuration type 1
PCI: Probing PCI hardware
Linux NET4.0 for Linux 2.2
Based upon Swansea University Computer Society NET3.039
NET4: Unix domain sockets 1.0 for Linux NET4.0.
NET4: Linux TCP/IP 1.0 for NET4.0
IP Protocols: ICMP, UDP, TCP
Starting kswapd v 1.5 
Detected PS/2 Mouse Port.
Serial driver version 4.27 with no serial options enabled
ttyS00 at 0x03f8 (irq = 4) is a 16550A
ttyS01 at 0x02f8 (irq = 3) is a 16550A
ttyS02 at 0x03e8 (irq = 4) is a 16550A
pty: 256 Unix98 ptys configured
Linux video capture interface: v1.00
Connectix Colour Quickcam driver v0.02
request_module[parport_lowlevel]: Root fs not mounted
request_module[parport_lowlevel]: Root fs not mounted
PIIX4: IDE controller on PCI bus 00 dev 21
PIIX4: not 100% native mode: will probe irqs later
    ide0: BM-DMA at 0xd800-0xd807, BIOS settings: hda:DMA, hdb:DMA
    ide1: BM-DMA at 0xd808-0xd80f, BIOS settings: hdc:DMA, hdd:pio
hda: SAMSUNG SV0844A, ATA DISK drive
hdb: FX240S, ATAPI CDROM drive
hdc: WDC AC32500H, ATA DISK drive
ide2: ports already in use, skipping probe
ide0 at 0x1f0-0x1f7,0x3f6 on irq 14
ide1 at 0x170-0x177,0x376 on irq 15
hda: SAMSUNG SV0844A, 8063MB w/220kB Cache, CHS=1027/255/63, UDMA
hdc: Disabling (U)DMA for WDC AC32500H
hdc: DMA disabled
hdc: WDC AC32500H, 2441MB w/128kB Cache, CHS=4960/16/63
hdb: ATAPI 24X CD-ROM drive, 256kB Cache
Uniform CDROM driver Revision: 2.56
Floppy drive(s): fd0 is 1.44M
FDC 0 is a post-1991 82077
(scsi0) <Adaptec AIC-7850 SCSI host adapter> found at PCI 9/0
(scsi0) Narrow Channel, SCSI ID=7, 3/255 SCBs
(scsi0) Warning - detected auto-termination
(scsi0) Please verify driver detected settings are correct.
(scsi0) If not, then please properly set the device termination
(scsi0) in the Adaptec SCSI BIOS by hitting CTRL-A when prompted
(scsi0) during machine bootup.
(scsi0) Cables present (Int-50 YES, Ext-50 YES)
(scsi0) Downloading sequencer code... 406 instructions downloaded
scsi0 : Adaptec AHA274x/284x/294x (EISA/VLB/PCI-Fast SCSI)
5.1.20/3.2.4
       <Adaptec AIC-7850 SCSI host adapter>
scsi : 1 host.
  Vendor: SEAGATE   Model: ST32550N          Rev: 0021
  Type:   Direct-Access                      ANSI SCSI revision: 02
Detected scsi disk sda at scsi0, channel 0, id 1, lun 0
(scsi0:0:1:0) Using asynchronous transfers.
  Vendor: HP        Model: C1553A            Rev: NS01
  Type:   Sequential-Access                  ANSI SCSI revision: 02
Detected scsi tape st0 at scsi0, channel 0, id 3, lun 0
(scsi0:0:3:0) Using asynchronous transfers.
  Vendor: HP        Model: C1553A            Rev: NS01
  Type:   Medium Changer                     ANSI SCSI revision: 02
scsi : detected 1 SCSI tape 1 SCSI disk total.
SCSI device sda: hdwr sector= 512 bytes. Sectors= 4194058 [2047 MB]
[2.0 GB]
PPP: version 2.3.7 (demand dialling)
TCP compression code copyright 1989 Regents of the University of
California
PPP line discipline registered.
3c59x.c:v0.99H 11/17/98 Donald Becker
http://cesdis.gsfc.nasa.gov/linux/drivers/vortex.html
eth0: 3Com 3c905B Cyclone 100baseTx at 0xb800,  00:50:04:9b:1e:81, IRQ
11
  8K byte-wide RAM 5:3 Rx:Tx split, autoselect/Autonegotiate
interface.
  MII transceiver found at address 24, status 786d.
  MII transceiver found at address 0, status 786d.
  Enabling bus-master transmits and whole-frame receives.
Partition check:
 sda: sda1 sda2
 hda: hda1 hda2 hda3
 hdc: [PTBL] [620/128/63] hdc1
VFS: Mounted root (ext2 filesystem) readonly.
Freeing unused kernel memory: 40k freed
3c59x.c:v0.99H 11/17/98 Donald Becker
http://cesdis.gsfc.nasa.gov/linux/drivers/vortex.html
parport0: PC-style at 0x378 [SPP,ECP,ECPEPP,ECPPS2]
parport0: detected irq 7; use procfs to enable interrupt-driven
operation.
lp0: using parport0 (polling).
3c59x.c:v0.99H 11/17/98 Donald Becker
http://cesdis.gsfc.nasa.gov/linux/drivers/vortex.html
EXT2-fs error (device ide0(3,1)): ext2_readdir: directory #20485
contains a hole at offset 1024
EXT2-fs error (device ide0(3,1)): ext2_readdir: directory #20485
contains a hole at offset 2048
EXT2-fs error (device ide0(3,1)): ext2_readdir: directory #20485
contains a hole at offset 3072
EXT2-fs error (device ide0(3,1)): ext2_readdir: directory #20485
contains a hole at offset 4096
Unable to handle kernel paging request at virtual address 00001000
current->tss.cr3 = 077ed000, %cr3 = 077ed000
*pde = 00000000
Oops: 0000
CPU:    0
EIP:    0010:[<c01244e6>]
EFLAGS: 00010206
eax: 00001000   ebx: 00040470   ecx: 00000303   edx: 00001000
esi: 00000400   edi: 00000000   ebp: 00000100   esp: c29fde00
ds: 0018   es: 0018   ss: 0018
Process bru (pid: 9520, process nr: 72, stackpage=c29fd000)
Stack: c012451d 00000303 00040470 00000400 c01251cb c0aa3ea0 00000303
00040470 
       c0125217 00000303 00040470 00000400 c0249e98 00000004 c237cdd0
00000000 
       c29fded4 00000303 00000000 c0aa3ea0 c012fd0e c237cdd0 c0249e98
c237cdd8 
Call Trace: [<c012451d>] [<c01251cb>] [<c0125217>] [<c012fd0e>]
[<c012fcff>] [<c012550c>] [<c011b1cc>] 
       [<c011b117>] [<c010f1cb>] [<c011b32f>] [<c011b284>]
[<c0122f16>] [<c0107a1c>] [<c010002b>] 
Code: 8b 12 39 58 04 75 f3 39 70 08 75 ee 66 39 48 0c 75 e8 89 c2 
-------------------------------
KSYMOOPS OUTPUT:
ksymoops 0.7c on i686 2.2.13.  Options used
     -V (default)
     -k /proc/ksyms (default)
     -l /proc/modules (default)
     -o /lib/modules/2.2.13/ (default)
     -m /boot/System.map (specified)
Unable to handle kernel paging request at virtual address 00001000
current->tss.cr3 = 077ed000, %cr3 = 077ed000
*pde = 00000000
Oops: 0000
CPU:    0
EIP:    0010:[<c01244e6>]
Using defaults from ksymoops -t elf32-i386 -a i386
EFLAGS: 00010206
eax: 00001000   ebx: 00040470   ecx: 00000303   edx: 00001000
esi: 00000400   edi: 00000000   ebp: 00000100   esp: c29fde00
ds: 0018   es: 0018   ss: 0018
Process bru (pid: 9520, process nr: 72, stackpage=c29fd000)
Stack: c012451d 00000303 00040470 00000400 c01251cb c0aa3ea0 00000303
00040470 
       c0125217 00000303 00040470 00000400 c0249e98 00000004 c237cdd0
00000000 
       c29fded4 00000303 00000000 c0aa3ea0 c012fd0e c237cdd0 c0249e98
c237cdd8 
Call Trace: [<c012451d>] [<c01251cb>] [<c0125217>] [<c012fd0e>]
[<c012fcff>] [<c012550c>] [<c011b1cc>] 
       [<c011b117>] [<c010f1cb>] [<c011b32f>] [<c011b284>]
[<c0122f16>] [<c0107a1c>] [<c010002b>] 
Code: 8b 12 39 58 04 75 f3 39 70 08 75 ee 66 39 48 0c 75 e8 89 c2 
>>EIP; c01244e6 <find_buffer+2a/44>   <=====
Trace; c012451d <get_hash_table+1d/2c>
Trace; c01251cb <brw_page+e7/34c>
Trace; c0125217 <brw_page+133/34c>
Trace; c012fd0e <get_new_inode+a2/130>
Trace; c012fcff <get_new_inode+93/130>
Trace; c012550c <generic_readpage+8c/9c>
Trace; c011b1cc <do_generic_file_read+4c8/580>
Trace; c011b117 <do_generic_file_read+413/580>
Trace; c010f1cb <__wake_up+3b/44>
Trace; c011b32f <generic_file_read+5b/74>
Trace; c011b284 <file_read_actor+0/50>
Trace; c0122f16 <sys_read+b2/d0>
Trace; c0107a1c <system_call+34/38>
Trace; c010002b <startup_32+2b/11e>
Code;  c01244e6 <find_buffer+2a/44>
00000000 <_EIP>:
Code;  c01244e6 <find_buffer+2a/44>   <=====
   0:   8b 12             movl   (%edx),%edx   <=====
Code;  c01244e8 <find_buffer+2c/44>
   2:   39 58 04          cmpl   %ebx,0x4(%eax)
Code;  c01244eb <find_buffer+2f/44>
   5:   75 f3             jne    fffffffa <_EIP+0xfffffffa> c01244e0
<find_buffer+24/44>
Code;  c01244ed <find_buffer+31/44>
   7:   39 70 08          cmpl   %esi,0x8(%eax)
Code;  c01244f0 <find_buffer+34/44>
   a:   75 ee             jne    fffffffa <_EIP+0xfffffffa> c01244e0
<find_buffer+24/44>
Code;  c01244f2 <find_buffer+36/44>
   c:   66 39 48 0c       cmpw   %cx,0xc(%eax)
Code;  c01244f6 <find_buffer+3a/44>
  10:   75 e8             jne    fffffffa <_EIP+0xfffffffa> c01244e0
<find_buffer+24/44>
Code;  c01244f8 <find_buffer+3c/44>
  12:   89 c2             movl   %eax,%edx
George
===[George R. Kasica]===        +1 262 513 8503
President                       +1 206 374 6482 FAX 
Netwrx Consulting Inc.          Waukesha, WI USA 
http://www.netwrx1.com
georgek@netwrx1.com
ICQ #12862186
George, MR. Tibbs & The Beast Kasica
Waukesha, WI USA
georgek@netwrx1.com
http://www.netwrx1.com
ICQ #12862186
      Zz
       zZ
    |\ z    _,,,---,,_
    /,`.-'`'    _   ;-;;,_
   |,4-  ) )-,_..;\ (  `'_'
  '---''(_/--'  `-'\_)
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/