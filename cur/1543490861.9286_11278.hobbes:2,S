Date: Wed, 24 Mar 1999 22:53:07 +0100
From: Radovan Garabik <>
Subject: Re: 2.2.x - IPX overbroadcasting (badly)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/3/24/140

  Gregory T. Norris (haphazard@socket.net) wrote:
   On Mon, Mar 15, 1999 at 08:21:01AM -0600, Gilbert Ramirez wrote:
   > When 2.2.x started, and in the 2.2.0-pre kernels, I also had problems with
   > IPX, but not with broadcasts. The storm of packets I saw were directed from
   > my Linux box to a NW file server. I too was using the Olicom token-ring
   > driver (as I infer from the vendor portion of your MAC address).
   >
   > I tried to get my box to repeat the symptoms the next day, and it didn't.
   > Unfortunately, I no longer have access to my box to test it.
   Yeah, I remember that. In fact, we conversed via email on that a while
   back (my address from work is <Greg_Norris@mail.dor.state.mo.us>).
   
   > There was an IPX broadcast problem reported by an ethernet user, but a
   > change to how IPX handled netbios broadcasts seems to have fixed that
   > problem. Perhaps this is an IPX/oltr problem? Is there anyone using oltr,
   > IPX, and kernel 2.2.x successfully?
   
   I spoke with him as well, around the time 2.2.[01] came out. After
   bouncing a few messages back and forth, I believe that we were
   experiencing the same problem... both of us were seeing massive floods
   of IPX broadcast packets, which would begin almost immediately. I
   suspect it's a problem with IPX itself, rather than with the oltr driver
   (though you're quite correct about it being an Olicom card), because he
   was using a 3c509 (I think that's right). Last time I heard from him,
   it still didn't work without pruning the kernel. Of course, I've been
   wrong before. ;)
I finally managed to do some tests with 2.2.3 (and 2.2.4) kernels and the
bug is still there, though the flood of broadcast packets seems to be
smaller (but that can be due lower traffic on the network).
It seems to be independent of network card, because both 3c509 and SMC-ultra
cards do this.
   
   The fix that was suggested to him was to remove/disable the section of
   code referencing IPX_TYPE_PPROP in linux/net/ipx/af_ipx.c. This seems
   to work for me as well, though I haven't had a chance to try it yet with
   2.2.3 (I keep hoping that "it's ok now" whenever a new version appears
   <g>). Unfortunately, this seems more like a temporary workaround than a
   proper fix, as I'm sure a block of code that size must be there for a
   reason... so I was hoping that providing a tcpdump might point one of
   "them smart fellers" to the cause.
ncpfs feel a bit unstable lately... it can be related. From time to time
the files in mounted directory just disappear, slist shows no servers until
I umount and remount the directory.
-- 
 -----------------------------------------------------------
| Radovan Garabik 
http://melkor.dnp.fmph.uniba.sk/~garabik/
 |
| __..--^^^--..__         garabik @ fmph.uniba.sk           |
 -----------------------------------------------------------
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/