Date: Sat, 29 Jan 2000 11:23:27 +1100
From: Keith Owens <>
Subject: Re: SMP kernel build question
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/1/29/44

On Fri, 28 Jan 2000 15:10:40 -0500 (EST), 
"Tony E. Bennett" <tbennett@nvidia.com> wrote:
>Whenever I build a kernel (2.2.12) with SMP and MODVERSIONS, the built
>kernel has versioned symbols, but they don't include 'smp'.  So booting
>it fails horribly since all the /lib/modules are looking for 'smp'
>
>This seems to be because linux/module.h includes modversion.h instead of
>modversions-smp.h
Where do you get modversions-smp.h from?  Standard kernels do not build
that file, it might be a hangover from your distribution.  Any chance
that you are booting an old kernel with your new modules?  2.2.14 SMP
and MODVERSIONS works fine for me.
If all else fails, save your .config, make mrproper, restore .config,
make oldconfig, make dep clean bzImage modules.  Current Makefiles do
not cope correctly with turning MODVERSIONS on and off under some
circumstances, make mrproper cleans the crud out and starts again.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/