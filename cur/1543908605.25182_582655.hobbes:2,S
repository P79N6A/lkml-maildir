Date: Sun, 12 Aug 2007 13:52:56 +0200
From: Willy Tarreau <>
Subject: Re: [2.6.20.16 review 08/28] x86_64: allocate sparsemem memmap above 4G
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/8/12/85

Hi Andi,
On Sun, Aug 12, 2007 at 12:18:11PM +0200, Andi Kleen wrote:
> On Saturday 11 August 2007 21:48, Willy Tarreau wrote:
> > On systems with huge amount of physical memory, VFS cache and memory memmap
> > may eat all available system memory under 4G, then the system may fail to
> > allocate swiotlb bounce buffer.
> >
> > There was a fix for this issue in arch/x86_64/mm/numa.c, but that fix dose
> > not cover sparsemem model.
> 
> Have you checked if sparsemem even worked in 2.6.20?
No, unfortunately I'm not equipped for that.
> Irc it was quite
> unstable a couple of releases ago. There were times where it rarely
> booted on x86-64 because so few people test it. 
> If not the patch is not needed, although relatively harmless too.
OK. So I'd propose the following :
 - if someone can confirm that it did not work anyway, I remove the patch
   which becomes useless.
 - but if we get no confirmation, assuming that in doubt, some people _may_
   be relying on it and that it does not affect other ones, we'd keep it.
are you OK with this ?
Thanks,
Willy
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/