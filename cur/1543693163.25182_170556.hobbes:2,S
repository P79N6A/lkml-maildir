Date: Sun, 5 Oct 2003 18:11:55 +0200
From: Pavel Machek <>
Subject: Re: JFFS2 swsusp / signal cleanup.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/10/5/60

Hi!
> How's this look?
Is flush_signals() really so stupid to do? Goal was to make
modifications to code as simple as possible, and as most pieces do not
expect to be interrupted, pretending signal never happened seems like
good idea...
								Pavel
> @@ -104,6 +105,13 @@
>  			schedule();
>  		}
> 
> +		if (current->flags & PF_FREEZE) {
> +			refrigerator(0);	/* When this loses its stupid flush_signals() 
> +						   and starts just calling recalc_sigpending(),
> +						   you can remove the following: */
> +			recalc_sigpending();
> +		}
> +
>  		cond_resched();
> 
>  		/* Put_super will send a SIGKILL and then wait on the sem. 
-- 
When do you have a heart between your knees?
[Johanka's followup: and *two* hearts?]
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/