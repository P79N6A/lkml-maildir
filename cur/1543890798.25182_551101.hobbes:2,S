Date: Wed, 30 May 2007 12:38:40 -0700
From: Pete Zaitcev <>
Subject: Re: [PATCH] drivers/block/ub.c: use list_for_each_entry()
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/5/30/356

On Wed, 30 May 2007 10:47:52 +0200, Matthias Kaehlcke <matthias.kaehlcke@gmail.com> wrote:
> @@ -1608,8 +1605,7 @@ static void ub_reset_task(struct work_struct *work)
>  	spin_lock_irqsave(sc->lock, flags);
>  	sc->reset = 0;
>  	tasklet_schedule(&sc->tasklet);
> -	list_for_each(p, &sc->luns) {
> -		lun = list_entry(p, struct ub_lun, link);
> +	list_for_each_entry(lun, &sc->luns, link) {
>  		blk_start_queue(lun->disk->queue);
>  	}
>  	wake_up(&sc->reset_wait);
This patch straddles the border of acceptable. The pointless obfuscation
is balanced against the removal of explicit type in list_entry() and thus
a possible mismatched struct. I'm not acking nor naking this.
-- Pete
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/