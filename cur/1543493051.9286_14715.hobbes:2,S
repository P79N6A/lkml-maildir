Date: 16 Apr 1999 12:09:20 +0200
From: Trond Myklebust <>
Subject: Re: NFSv3 client for Linux-2.2.5 ready for alpha testing...
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/4/16/49

Eric Werme USG <werme@zk3.dec.com> writes:
> One thing that confused Tru64 Unix a while back was Sun clients writing
> to Tru64 servers.  We only support 8KB (or less) I/O sizes, and the Sun
> clients really wanted to do 32 KB.  So, we'd see the first 8 KB of many
> 32 KB chunks, then the 2nd 8 KB, then 3rd, then 4th.  Then the pattern
> would repeat with the next set of I/Os.
> 
> One (or both?) of our physical file systems saw this pattern and wrongly
> concluded that the client was doing random access I/O, and that lead to
> inefficient block allocation.  If Linux clients do read ahead, that
> might be confusing Solaris.  Perhaps the 4 KB I/O size doesn't trigger
> readahead.  Hmm. If you read a file that you just created on Solaris,
> I'd expect that to be in Solaris's cache and it shouldn't need to read
> from the disk anyway.
The latter is indeed quite puzzling, but the difference between the
read/write speed to ramdisk and the read/write speed to harddrive
indicate that the server-side caching is somehow failing. A tcpdump
would indeed help in debugging this.
Anyhow, implementing support for 32k rsizes didn't turn out to require
much extra code, so I wrote it last night.
Cheers,
  Trond
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/