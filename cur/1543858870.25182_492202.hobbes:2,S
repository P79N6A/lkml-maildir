Date: Sat, 16 Dec 2006 20:12:55 +0100 (MET)
From: Jan Engelhardt <>
Subject: Re: cxgb3 and 2.6.20-rc1
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/12/16/120

Hi,
On Dec 13 2006 21:40, Divy Le Ray wrote:
>
> A corresponding monolithic patch is posted at the following URL:
> 
http://service.chelsio.com/kernel.org/cxgb3.patch.bz2
I was unable to compile this on 2.6.20-rc1, because:
  CC [M]  drivers/net/cxgb3/cxgb3_offload.o
drivers/net/cxgb3/cxgb3_offload.c: In function ‘cxgb_free_mem’:
drivers/net/cxgb3/cxgb3_offload.c:1004: error: ‘PKMAP_BASE’ undeclared 
(first use in this function)
However, line 1004 is:
	if (p >= VMALLOC_START && p < VMALLOC_END)
and include/asm/pgtable.h:
	#ifdef CONFIG_HIGHMEM
	# define VMALLOC_END    (PKMAP_BASE-2*PAGE_SIZE)
	#else
	# define VMALLOC_END    (FIXADDR_START-2*PAGE_SIZE)
	#endif
So include/asm/pgtable.h lacks inclusion of include/asm/highmem.h,
where PKMAP_BASE is defined. Adding it gives me more compile errors.
Not good. Does anyone have a patch to fix that?
	-`J'
-- 