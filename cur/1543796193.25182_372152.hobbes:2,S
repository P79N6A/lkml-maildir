Date: Thu, 1 Dec 2005 15:27:40 -0800
From: Keith Mannthey <>
Subject: Re: Only one processor detected in 8-Way opteron in 32-bit mode
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/12/1/281

Looks like something odd is going on with your processor apic id's.
Lines like
Processor #20 INVALID. (Max ID: 256)
are bad...
Could you try the following patch with i386?  It seems suspect to me
and could help identify the problem.
Your box has high processor apic ids and looks to be in flat apic mode
(versus clustered).  I think the code is assuming the box is in
clustered apic mode?
Thanks,
Keith
[unhandled content-type:application/octet-stream]