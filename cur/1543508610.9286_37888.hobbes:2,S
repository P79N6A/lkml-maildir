Date: Wed, 8 Sep 1999 16:20:48 +0000 (   )
From: Thomas Speck <>
Subject: patch question
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/9/8/68

Hi, 
I am using 2.2.10 with the kernel-message-dump patch applied and I would
like to upgrate to 2.2.11 and 2.2.12. However, applying 2.2.11 patch gives
me .rej for panic.c. My question is what is the notifier_call_chain call
doing and has it to be inserted after the first '#endif' or before the 
'if (panic_timeout > 0)' ?
Could you help me, please ?  
kernel/panic.c.rej:
***************
*** 56,61 ****
  #ifdef __SMP__
        smp_send_stop();
  #endif
        if (panic_timeout > 0)
        {
                /*
--- 59,67 ----
  #ifdef __SMP__
        smp_send_stop();
  #endif
+ 
+       notifier_call_chain(&panic_notifier_list, 0, NULL);
+ 
        if (panic_timeout > 0)
        {
                /*
my panic.c:
#ifdef __SMP__
        smp_send_stop();
#endif
#if defined(__i386__) && defined(CONFIG_KMSG_DUMP)
        /* We allow SysRq to be used for <panic_timeout> seconds, and
           then the dump is forced. This way, if IRQs are frozen and
           keyboard doesn't respond anymore, the system can dump messages
           and reboot itself.
        */
        printk(KERN_EMERG "Dumping messages in %d seconds : last chance
for Alt-
SysRq...",
               panic_timeout);
        sti();
        for(panic_timeout*=10; panic_timeout>0; panic_timeout--) {
                CHECK_EMERGENCY_SYNC;
                mdelay(100);
        }
        machine_dump(0);        /* 0 tells machine_dump that it's called
from pa
nic() */
#else
        if (panic_timeout > 0)
        {
                /*
Thanks
--
Thomas
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/