Date: 08 Feb 2001 11:17:16 +0100
From: Christoph Rohland <>
Subject: Re: tmpfs swapoff oddity
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2001/2/8/6

Hi Mike,
On Thu, 8 Feb 2001, Mike Galbraith wrote:
> Hi Christoph,
> 
> While testing Jens' loop-4 patch (and not being able to find
> any way to lock it up), I stumbled onto a strange behavior.
> 
> I set up an interleaved swap with one swap partition, and one
> swapfile in a loopback mounted reiserfs - populated tmpfs with
> a kernel tree and did hefty make -j kernel builds to generate
> much I/O.  Afterward (bored), I figured I'd bounce the data in
> tmpfs back and forth between swap containers with swapoff.  It
> took much longer than I expected.
Oh, the swapoff handling in Linux is much less then suboptimal. So I
would expect that.
To explain: For every single page on swap we scan all processes vmas
and all shm/tmpfs objects swap tables :-( And we have to hold some
locks for that...
Greetings
		Christoph
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/