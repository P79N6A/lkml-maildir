Date: Sat, 12 Nov 2005 17:31:25 -0600
From: Rob Landley <>
Subject: Why did oldconfig's behavior change in 2.6.15-rc1?
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/11/12/187

On Saturday 12 November 2005 16:56, Rob Landley wrote:
> Linus says if we're going to test something, test -rc1, so I did.
>
> It went boing.
>
> I'm still trying to get -skas0 working on x86-64, but this was a standard
> x86 build...
>
> Rob
Very, very strange:
> make ARCH=um allnoconfig
> cat >> .config << EOF
CONFIG_MODE_SKAS=y
CONFIG_BINFMT_ELF=y
CONFIG_HOSTFS=y
CONFIG_SYSCTL=y
CONFIG_STDERR_CONSOLE=y
CONFIG_UNIX98_PTYS=y
CONFIG_BLK_DEV_LOOP=y
CONFIG_BLK_DEV_UBD=y
CONFIG_TMPFS=y
CONFIG_SWAP=y
CONFIG_LBD=y
CONFIG_EXT2_FS=y
CONFIG_PROC_FS=y
EOF
> make ARCH=um oldconfig
> grep SKAS .config
# CONFIG_MODE_SKAS is not set
Why did oldconfig switch off CONFIG_MODE_SKAS?  It didn't do that before.  
Hmmm...  Rummage, rummage...  Darn it, it's position dependent.  _And_ 
version dependent.
Ok, now I have to put the new entries at the _beginning_.  Appending them 
doesn't work anymore, it now ignores any symbol it's already seen, so you 
can't easily start with allnoconfig, switch on just what you want, and expect 
oldconfig to do anything intelligent.
That kinda sucks.  Oh well, I can have sed rip out the old symbols before I 
append the new ones.  Here's hoping it's not _that_ position dependent...
Rob
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/