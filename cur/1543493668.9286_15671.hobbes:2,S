Date: Fri, 23 Apr 1999 09:04:59 -0700 (PDT)
From: "David B. Rees" <>
Subject: Re: Poor smbfs performance - 2.2.6
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/4/23/74

On 23-Apr-99 Matthew Vanecek wrote:
> 
> Well, if you are mounting shares which live on the Win95 machine, you
> might want to consider enabling the Win95 Bug Workaround in the kernel. 
> If, however, you are *not* mounting shares exported by Win95
> (specifically Win95), i.e., shares on an NT server or on another OS or
> Linux, then make sure you *don't* have the Bug Workaround enabled.  I
> don't have Win95 anymore (Thank you God!), but still run NT, so can't
> really tell you how well the Workaround works.
> 
> BTW, what do you use to test the performance?
Well, I only plan on mounting Win95 shares.  I had mounted a Samba share just
for testing purposes, to see if it was the Win95 box that might have been
causing the bad performance.
I do have the Win95 Bug workaround enabled.  I'll try compiling the kernel
without it, and see what happens.
I've used a few things to measure performance.
1. Bonnie
2. time
3. Network throughput monitor (wmnet)
The Bonnie results are interesting:
              -------Sequential Output-------- ---Sequential Input-- --Random--
              -Per Char- --Block--- -Rewrite-- -Per Char- --Block--- --Seeks---
smbfs     100    38  0.6   614  6.4   182  2.1   188  3.4   624  4.3  48.9  3.2
Block input/output seems to be fine, but the perchar in/output mirrors my
results of timing copies and watching the network throughput monitor.
Performance as it is is basically unusable.
Two others have mailed me privately with the same performance problem, so now I
know it's not just me.
-Dave
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/