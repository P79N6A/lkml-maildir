Date: Fri, 26 Mar 2004 11:29:35 +0000
From: David Woodhouse <>
Subject: Re: [patch 1/22] Add __early_param for all arches
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/3/26/62

On Wed, 2004-03-24 at 19:55 -0800, Andrew Morton wrote:
> Please tell us a little more about why we need these patches.  (Apart from
> what seems to be a moderate amount of code consolidation).
A lot of command line options need checking before we get out of
setup_arch() into start_kernel() where parse_cmdline() is currently
called.
In particular, the only thing stopping us from registering real
permanent consoles from the moment we hit setup_arch() is the fact that
we haven't yet handled 'console=' on the command line, and we end up
enabling the first console registered as if there's no console=
argument, _despite_ the fact that there _is_ such an argument.
> Also, what is different between __setup and __early_setup?  Why is it not
> possible to make __setup run sufficiently early for whatever application is
> requiring these changes?
Drivers may require allocation (bootmem not slab). We want to run before
that's feasible -- before 'mem=', by definition :)
There _are_ a lot of patches but most of them are trivial and were
separated just for cleanliness. Where they're non-trivial that's because
there's real consolidation.
-- 
dwmw2
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/