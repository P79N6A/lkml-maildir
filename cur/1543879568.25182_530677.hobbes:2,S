Date: Fri, 13 Apr 2007 17:06:20 -0600
From: (Eric W. Biederman)
Subject: Re: [PATCH 2/3] make kthread_create() more scalable
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/4/13/279

Andrew Morton <akpm@linux-foundation.org> writes:
>
> OK, I fixed that up.
>
> The next patch (make-kthread_stop-scalable) removes the find_task_by_pid()
> anyway.
Ok. Neat.  I still need to review these a little more I have a different
set of criteria, but it is interesting work..
> Our kthread creation performance will be pretty poor anyway, due to the
> need to do two (or more?) context switches.  If we ever need
> super-low-latency kernel thread creation (eg, on-demand threads for AIO)
> then that code would need to go direct to kernel_thread(), I guess.
Sure.  AIO is a little bit of a different beast as it is IO for user space.
If low latency is important for starting kernel threads the right
answer would be to dig into the code and have a version rewrite
kernel_thread so that we copied a reference process instead of the
current.
Right now my practical target is killing all of the kernel threads
started with kernel_thread that then call daemonize.  So we can remove
daemonize, as it is a serious maintenance hazard.  kthread needs just
a little bit more work to support that.
Eric
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/