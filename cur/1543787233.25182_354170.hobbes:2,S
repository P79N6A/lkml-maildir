Date: Wed, 28 Sep 2005 13:23:14 -0700
From: David Brownell <>
Subject: Re: [linux-usb-devel] Re: 2.6.13-mm2
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/9/28/199

> > > > BTW, please have a look at:
> > > > 
http://bugzilla.kernel.org/show_bug.cgi?id=4416#c36
> > > > and
> > > > 
http://bugzilla.kernel.org/show_bug.cgi?id=4416#c37
What's with the bogus dates in those reports ... claiming some of you
were testing 2.6.13-rc2-mm2 more than two months ago, mid-July ?????
> > > interesting. i'd say we get interrupt storms from usb which then hurt when
> > > yenta has it's handler installed but usb has not. usb/hcd-pci.c frees the
> > > irq on suspend...so it may be enough not to do that (survives suspend-to-ram
> > > and suspend-to-disk here. yes, restore too :)
> > > 
> > > could you give that a tree w/o any free_irq-patches for yenta and co?
> > 
> > I've tried and it apparently works provided that _none_ of the IRQ-sharing
> > devices drops the IRQ on suspend.
>
> ok. i didn't look too close, but i think ohci-hcd does not fully disable
> interrupts in it's suspend callback...needs a closer look.
> cc:ing linux-usb-devel...
It's handled in hcd-pci.c ... All PCI based HCDs release their IRQs
when they suspend.  Including OHCI.  Your diagnosis is incorrect.
- Dave
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/