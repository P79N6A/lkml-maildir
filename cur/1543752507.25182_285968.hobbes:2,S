Date: Thu, 13 Jan 2005 14:40:55 +1100
From: Benjamin Herrenschmidt <>
Subject: Re: [PATCH] ppc64: xtime <-> gettimeofday can get out of sync
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/1/12/377

> Note that the time_sync_xtime check only stops the seconds from going
> backwards, the ns component still could couldnt it? Considering this
> is hard to get right, should we switch to the time interpolator stuff?
> The only problem there is it might be trouble for systemcfg (which
> exports stuff to do userspace gettimeofday).
My userland implementation in the vDSO also relies on our current
algorithm. It's not merged yet and could be changed of course, but I
ended up quite liking our current code ;) 
The interesting thing with it is we are basically lock-less
(and even barrier-less on reads).
Ben.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/