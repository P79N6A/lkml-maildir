Date: Tue, 14 May 2002 10:24:51 +0200
From: Wickus Botha <>
Subject: hd.c not compiling.
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/5/14/65

Hey
I'm busy testing the new development kernel 2.5.15. Each time it gets to
compiling the ide stuff it fails. 
make[3]: Entering directory `/usr/src/linux-2.5.15/drivers/ide'
gcc -D__KERNEL__ -I/usr/src/linux-2.5.15/include -Wall -Wstrict-prototypes
-Wno-trigraphs -O2 -fomit-frame-pointer -fno-strict-aliasing -fno-common
-pipe -mpreferred-stack-boundary=2 -march=i686   -DKBUILD_BASENAME=hd  -c
-o hd.o hd.c
hd.c: In function `hd_out':
hd.c:282: `TIMEOUT_VALUE' undeclared (first use in this function)
hd.c:282: (Each undeclared identifier is reported only once
hd.c:282: for each function it appears in.)
hd.c: In function `unexpected_hd_interrupt':
hd.c:363: `TIMEOUT_VALUE' undeclared (first use in this function)
hd.c: In function `read_intr':
hd.c:432: `TIMEOUT_VALUE' undeclared (first use in this function)
hd.c: In function `write_intr':
hd.c:470: `TIMEOUT_VALUE' undeclared (first use in this function)
hd.c: In function `hd_request':
hd.c:553: `TIMEOUT_VALUE' undeclared (first use in this function)
hd.c: In function `hd_init':
hd.c:830: `DEVICE_REQUEST' undeclared (first use in this function)
hd.c: At top level:
hd.c:615: warning: `do_hd_request' defined but not used
make[3]: *** [hd.o] Error 1
I've noticed /usr/src/linux/include/linux/blk.h doesn't have the following 2
entries anymore
#define TIMEOUT_VALUE (6*HZ)
#define DEVICE_REQUEST do_hd_request
I added them to the blk.h file and its compiling fine now
#elif (MAJOR_NR == HD_MAJOR)
/* Hard disk:  timeout is 6 seconds. */
#define DEVICE_NAME "hard disk"
#define DEVICE_INTR do_hd
#define TIMEOUT_VALUE (6*HZ)
#define DEVICE_REQUEST do_hd_request
#define DEVICE_NR(device) (minor(device)>>6)
---------------------------------------------------------------------------
VIRUS FREE EMAIL: This message has been screened and determined free
of all known viruses by NetActive Mail Control. For more information on 
Mail Scanning, Internet Access, Virtual Private Networks (VPN), Managed 
Firewall security and other IT Services, please visit us at 
http://www.netactive.co.za
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/