Date: Sat, 25 May 2002 22:08:30 +0900
From: Osamu Tomita <>
Subject: Re: 2.5.18 compilation failure ide_scsi
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/5/25/48

Christoph Lameter wrote:
> 
> drivers/ide/idedriver.o: In function `ata_module_init':
> drivers/ide/idedriver.o(.text.init+0xa5f): undefined reference to
> `idescsi_init'make: *** [vmlinux] Error 1
I have had a same problem.
Try this patch.
--- linux-2.5.18/drivers/scsi/ide-scsi.c.orig	Sat May 25 10:55:17 2002
+++ linux-2.5.18/drivers/scsi/ide-scsi.c	Sat May 25 21:18:55 2002
@@ -804,7 +804,12 @@
 };
 
 
-static int __init idescsi_init(void)
+int idescsi_init(void)
+{
+	return ata_driver_module(&idescsi_driver);
+}
+
+static int __init init_idescsi_module(void)
 {
 	int ret;
 	ret = ata_driver_module(&idescsi_driver);
@@ -828,6 +833,6 @@
 	unregister_ata_driver(&idescsi_driver);
 }
 
-module_init(idescsi_init);
+module_init(init_idescsi_module);
 module_exit(exit_idescsi_module);
 MODULE_LICENSE("GPL");
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/