Date: Mon, 6 May 2002 13:33:18 +0200 (CEST)
From: Urban Widmark <>
Subject: Re: kbuild 2.5 is ready for inclusion in the 2.5 kernel
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2002/5/6/37

On Mon, 6 May 2002, Keith Owens wrote:
> >being able to build over NFS or having stricter integrity checks. I just
> >don't get the faster bit, but maybe that's just me.
> 
> You are not comparing like with like.  Much of your speed difference
> from kbuild 2.4 to 2.5 is because you have omitted the make dep time.
> kbuild 2.5 does not have a seperate make dep pass.  Instead it checks
> the dependencies every time, during phase4.
make dep isn't part of a module rebuild given the constriants I work
under, the changes are local to the module (which they are).
In my world make dep is only relevant for the first build, and the
times I mentioned for the full build includes a dependency build.
(I know the presentation of that part was crap ... but so was the
 measurements :)
> Checking the dependencies only once in kbuild 2.4 is a very common
> source of build error.  Users change their code, forget to rerun make
> dep then wonder why their kernel and module build is broken.  In your
> case, you "know" that your change does not affect the dependencies so
> you omit the make dep run.  That is the equivalent of bypassing the
> integrity checks in kbuild 2.5, i.e. it is the equivalent of
> NO_MAKEFILE_GEN=1.
NO_MAKEFILE_GEN is still slower for me than the way I use make modules.
What you are saying is that I should never do:
make modules
but always:
make dep && make bzImage modules
Ok, then I see what you meant by kbuild-2.5 being faster.
Documentation/kbuild/commands.txt (2.4.18 kernel, don't have anything more
recent at hand) has a section on make dep that says I only have to run it
once after the first time I configure the kernel. Maybe that is where I
picked up that habit.
> the kernel.  BTW, if you have a lot of modules you will find that your
> make modules time in 2.4 is significantly higher than the times you
> quoted.
Sure. I was talking about me, my .config (~30 modules) and my builds
specifically.
Btw, I can see other benefits from kbuild-2.5 (and I can bypass the things
I don't want to run all the time more easily than in "2.4" :) and I'm not
against it, but it didn't live up to the faster claim at anything I
normally do. So I had to ask.
/Urban
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/