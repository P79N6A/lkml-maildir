Date: Sun, 30 Dec 2007 17:28:53 +0100
From: Ingo Molnar <>
Subject: Re: [PATCH] x86: provide a DMI based port 0x80 I/O delay override
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2007/12/30/147

* Andi Kleen <andi@firstfloor.org> wrote:
> > > The i8259 driver uses it and it is known to be needed on some old 
> > > chipsets. But it doesn't really have any "own" ports to use afaik.
> > 
> > we'll solve that via an i8259-specific quirk. That is a lot cleaner 
> > and maintainable than the current generic, always-enabled "opt out" 
> > port-0x80 quirk.
> 
> You mean using pci quirks + udelay? Will be probably challenging to 
> collect PCI-IDs for that. And there might be old systems needing it 
> without PCI. They likely won't have DMI either.
> 
> In theory you could make it a DMI year cut off of course (and assume 
> old if no DMI, although that happens occasionally with new systems 
> too); but that is generally considered ugly.
> 
> I don't think it's a big problem to keep delays of some form by 
> default in 8259 -- people who care about performance should be 
> definitely using APIC mode instead.
do you remember which old systems/chipsets were affected by this 
problem? We had many - meanwhile fixed - PIC related problems, maybe 
it's a red herring and the delay just papered it over.
	Ingo