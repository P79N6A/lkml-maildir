Date: Tue, 13 May 2003 09:43:52 -0400
From: "Mukker, Atul" <>
Subject: RE: unique entry points for all driver hosts
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2003/5/13/107

> > Why doesn't mid-layer allow LLDs to specify separate entry 
> > points to various
> > hosts attached to the same driver. Like some other entries 
> > in the Scsi Host
> > Template, entry points should also  allowed to be overridden.
> 
> Is there a issue you are hitting of common host template functions and
> selecting unique host instance functions using hostdata?
No, We simply want to have unique hot-path entry point (queuecommand) and
error handling hooks for each class of supported hosts. This is required
because these classes of controllers have disparate queue and error handling
mechanisms.
The work around we have today is to have common queue routine for example.
This queue routine then routes the scsi packet to appropriate host's
queuecommand hook using hostdata information.
looks like it is limiting to have a 'driver' specific structure(SHT) instead
of a self sufficient host-centric view (struct Scsi_Host).
IMHO, declaring multiple SHTs as suggested by Christoph Hellwig may not be a
good idea since it might appear like a hack, would lose the "template"
ideology and is not object-oriented :-)
Host structure would be best place to have pointers to these hooks as well.
-Atul Mukker
> -----Original Message-----
> From: Mike Anderson [mailto:andmike@us.ibm.com]
> Sent: Monday, May 12, 2003 7:38 PM
> To: Mukker, Atul
> Cc: linux-scsi@vger.kernel.org; linux-kernel@vger.kernel.org
> Subject: Re: unique entry points for all driver hosts
> 
> 
> Mukker, Atul [atulm@lsil.com] wrote:
> > Why doesn't mid-layer allow LLDs to specify separate entry 
> points to various
> > hosts attached to the same driver. Like some other entries 
> in the Scsi Host
> > Template, entry points should also  allowed to be overridden.
> > 
> > 
> > Thanks
> 
> Is there a issue you are hitting of common host template functions and
> selecting unique host instance functions using hostdata?
> 
> -andmike
> --
> Michael Anderson
> andmike@us.ibm.com
> 
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/