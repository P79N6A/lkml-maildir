Date: Thu, 2 Feb 2006 09:32:30 +0200
From: Pekka Enberg <>
Subject: Re: Size-128 slab leak
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/2/2/36

Hi,
On 2/2/06, Andrew Morton <akpm@osdl.org> wrote:
> @@ -2550,6 +2550,15 @@ static void *cache_alloc_debugcheck_afte
>                 *dbg_redzone1(cachep, objp) = RED_ACTIVE;
>                 *dbg_redzone2(cachep, objp) = RED_ACTIVE;
>         }
> +       {
> +               int objnr;
> +               struct slab *slabp;
> +
> +               slabp = page_get_slab(virt_to_page(objp));
> +
> +               objnr = (objp - slabp->s_mem) / cachep->objsize;
> +               slab_bufctl(slabp)[objnr] = (unsigned long)caller;
> +       }
We already have last caller in dbg_userword. Manfred, is there a
reason we're not using it?
                               Pekka
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/