Date: Fri, 10 Feb 2006 15:13:09 +0000
From: Alasdair G Kergon <>
Subject: Re: [PATCH] Support HDIO_GETGEO on device-mapper volumes
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2006/2/10/185

On Fri, Feb 10, 2006 at 02:53:48PM +0000, Alasdair G Kergon wrote:
> I disagree - either dm should work out the *correct* geometry to
> return for those mappings where a geometry is known and it's sensible
> to return one (e.g. linear mapping to the start of certain scsi
> devices), or else it should leave it to userspace to decide how to
> handle the situation.  (And there's nothing currently stopping
> userspace seeing that a dm device is constructed out of a scsi device
> and choosing to use the geometry of that underlying device.)
s/scsi/hd/ in those examples for slightly more sense
What would the 'geometry' of a dm 'error' target mean?
Or of a snapshot?
In any patch, consider that we've already identified a need 
(e.g. for multipath) to add a framework to device-mapper to pass 
certain ioctls along to the underlying devices.  I'd prefer
to see that approach here: for tables with a single entry, pass 
the ioctl into the target. Linear and multipath would then pass 
it along to the underlying device; other targets would return zeros.
 
Alasdair
-- 
agk@redhat.com
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/