Date: Thu, 28 Oct 1999 08:40:57 -0400 (EDT)
From: "Richard B. Johnson" <>
Subject: Re: [PATCH] Removes x86 warning messages
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/10/28/65

On Wed, 27 Oct 1999, Brad Proctor wrote:
> 
> Hi,
> 
> Here is my first patch, it's nothing special, but I have to start
> somewhere, This patch simply removes the warning messages like the
> following:
>   "warning: using `%eax' instead of '%ax' due to `l' suffix."
> by changing all the 'l' suffixes to 'w' and adding 'w' where it is
> missing.
> 
> This patch applies to 2.3.24.
> 
> Brad Proctor
But is not correct. I submitted a patch last week which correctly
removed those warnings.
It is perfectly correct to move a longword to a segment register. This
removes the generation of the 0x66 prefix which is more code which
has to be fetched, slowing down execution.
In the case of the segment registers and where things are pushed or
popped off the stack, they must remain longwords. The correct patch
would have followed the advice of gas, i.e., "warning using '%eax' instead
of '%ax' due to the 'l' suffix". The register in question should have
been changed to '%eax' as advised. Instead, you changed a lot of
longwords (the natural register size of ix86 machines) to words (shorts).
This forces the generation of 0x66 prefix on each of these instructions.
FYI. It is somewhat bothersome that I submit a patch and then someone
else does it over again, wrongly.
Cheers,
Dick Johnson
Penguin : Linux version 2.3.13 on an i686 machine (400.59 BogoMips).
Warning : It's hard to remain at the trailing edge of technology.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/