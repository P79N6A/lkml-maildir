Date: Fri, 07 Oct 2005 10:25:20 +0200
From: Arjan van de Ven <>
Subject: Re: [RFC] add sysfs to dynamically control blk request tag maintenance
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/10/7/34

> The request itself has been
> touched by scsi_end_request() already, so unless the layout is really
> bad we shouldn't need to fetch a lot of cache lines there. That leaves
> __test_and_clear_bit(), I guess that must be it.
__test_and_clear_bit() is cheap; it's a single non-locked instruction.
Arguably it should be converted into a C variant so that the compiler
can pick the best code sequence (I'm not so sure the asm we picked for
this is optimal for all processors, I bet it'll be microcoded) but I'd
be surprised if it'd be more than a handful of cycles no matter what.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/