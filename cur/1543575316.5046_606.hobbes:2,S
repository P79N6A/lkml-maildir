Date: Sat, 09 Dec 2000 11:25:09 +0100
From: Roberto Fichera <>
Subject: Re: [PATCH] mm->rss is modified without page_table_lock held
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2000/12/9/20

At 21.29 08/12/00 +0100, Rasmus Andersen wrote:
>Hi.
>
>The following patch moves the page_table_lock in mm/* to cover the
>modification of mm->rss in 240-test12-pre7. It was inspired by a
>similar patch from davej(?) which covered too much, AFAIR. The item
>is on Tytso's ToDo list.
[...snip...]
>@@ -1076,7 +1076,9 @@
>                 flush_icache_page(vma, page);
>         }
>
>+       spin_lock(&mm->page_table_lock);
>         mm->rss++;
>+       spin_unlock(&mm->page_table_lock);
>
[...snip...]
Why we couldn't use atomic_inc(&mm->rss) here and below, avoiding to wrap
the inc with a spin_lock()/spin_unlock() ?
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
Please read the FAQ at 
http://www.tux.org/lkml/