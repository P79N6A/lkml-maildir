Date: 29 Apr 1999 10:00:37 +0300
From: (Harvey J. Stein)
Subject: cache killer memory death test - 2.2.6 vs andrea2&4
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/4/29/13

I just finished testing 2.2.6andrea4.  Here are its numbers (along
with the other #s previously quoted), with 50,000 records:
test 1 - boot, login & run dbase on a file.
test 2 - boot, login, startx, run dbase on a file, bring up netscape,
         edit in emacs, etc.
See previous msgs for dbase program & details.
                  Test 1 (noninteractive)              Test 2 (interactive)
             user   sys   elapsed  worst 2nd     user   sys    elapsed   worst  2nd    Feel
2.0.36       27.69  7.70  2:37.27  9.73  6.88    28.97  10.21  17:30.68  76.37  75.11  D
             28.32  7.33  0:43.87  3.36  2.32
             27.52  7.40  0:43.08  3.42  2.22
2.2.5        28.13  6.80  2:50.52  8.00  7.19    29.44   8.70  13:21.34  61.29  64.95  B
             28.64  6.61  1:47.39  7.91  6.77
             28.55  6.40  1:48.49  7.88  7.11
2.2.5arca12  27.99  6.77  1:24.68 14.93  9.38    30.13   6.91   4:13.60  14.08  13.09  F
             28.98  6.69  1:19.67 14.12  9.56
             28.18  6.77  1:18.99 13.89  9.39
2.2.6        28.20  6.70  2:47.06  7.47  6.87    31.73   8.92  14:41.84  16.57  16.53  B
             28.92  6.17  1:46.01  7.97  6.62
             28.69  6.39  1:47.77  7.81  6.76
2.2.6arca1   28.66  7.73  1:24.43 13.85  9.06    30.07   9.62  10:45.50  65.61  45.63  B
             29.15  7.82  1:15.55 13.38  8.74
             28.37  7.85  1:12.91 13.33  7.24
2.2.6a2**    28.04  7.24  0:42.24  2.82  2.10    29.89   7.33   1:30.70   6.09   4.34  A
             28.44  7.06  0:42.37  2.82  2.10    30.45   7.73   1:25.50   5.09   4.27  A
             28.02  6.96  0:41.94  2.79  2.09
             27.88  7.23  0:42.39  2.80  2.09*
2.2.6a4+     28.46  6.15  0:41.76  2.65  1.97    29.67   7.07   2:46.26  37.86  19.04  B-
             29.46  6.37  0:42.00  2.67  2.00    29.30   6.89   4:04.15  55.05  46.47  B-
             28.78  6.06  0:41.05  2.65  1.99    29.99   7.29   3:59.11  42.70  41.36  B-
* - run again directly from a reboot because I couldn't believe the #s!
** - 2.2.6a2 = 2.2.6andrea2.
+  - 2.2.6a4 = 2.2.6andrea4.
Feel = interactive feel = letter grade A=excellent to F=very poor.
For 100,000 records:
   (s)  - Call gdbm_sync every 10,000 records (which does an fsync)
   (ns) - Without gdbm_sync call
2.2.6a2 (s)  85.48 21.33  2:35.95 12.16  9.43      91.16  24.42  10:51.33  51.41  46.82
             88.08 21.60  2:38.40 12.06  9.51      87.56  21.85   3:12.71  13.88   9.72
             85.13 22.01  2:35.85 12.17  9.41
2.2.6a4 (s)  87.53 18.32  2:32.91 11.95  9.05
             86.04 18.33  2:30.59 11.91  8.81
             87.64 17.40  2:31.46 11.94  8.85
2.2.6a2 (ns) 85.62 20.93  1:50.11  1.66  1.63      88.50  24.90  17:38.55  97.38  74.78
             85.26 20.79  1:49.63  1.64  1.62
             84.58 20.98  1:49.11  1.65  1.63
2.2.6a4 (ns) 88.26 17.32  1:48.39  1.63  1.61
             84.06 17.66  1:44.51  1.58  1.58
             84.63 17.95  1:45.15  1.57  1.58
Basically, andrea2 is a slightly slower than andrea4 in the
noninteractive tests and substantially *faster* in the interactive
tests.  Given the poor interactive performance of andrea4 with the
50,000 record test, I didn't bother with a 100,000 record interactive
test on it.
I was surprised by the loss in interactive performance from a2 to a4,
which is why I ran test 2 again for a2 and 2 more times for a4.  It's
still substantially better than the stock kernels, though.
It seems like a2 is the best at both avoiding disk activity & wisely
using the disk when necessary.  A4 seems to be slightly more efficient
when using memory but much worse at using the disk when necessary.
-- 
Harvey J. Stein
BFM Financial Research
hjstein@bfr.co.il
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/