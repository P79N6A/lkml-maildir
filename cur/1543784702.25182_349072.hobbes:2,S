Date: Sat, 10 Sep 2005 15:31:10 -0700
From: Andrew Morton <>
Subject: Re: [GIT PATCH] More PCI patches for 2.6.13
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/9/10/184

Jeff Garzik <jgarzik@pobox.com> wrote:
>
> Linus Torvalds wrote:
> > Case closed. 
> > 
> > Bogus warnings are a _bad_ thing. They cause people to write buggy code.
> > 
> > That drivers/pci/pci.c code should be simplified to not look at the error
> > return from pci_set_power_state() at all. Special-casing EIO is just
> > another bug waiting to happen.
> 
> As a tangent, the 'foo is deprecated' warnings for pm_register() and 
> inter_module_register() annoy me, primarily because they never seem to 
> go away.
Warnings are irritating.  Several times I've received obviously buggy
patches which generated warnings which pointed out the bug quite clearly. 
Presumably the originator simply failed to notice the warnings amongst all
the other noise.
Who do I bug about these longstanding ppc64 warnings, btw ;)
drivers/scsi/sata_svw.c: In function `k2_sata_tf_load':
drivers/scsi/sata_svw.c:111: warning: passing arg 2 of `eeh_writeb' makes pointer from integer without a cast
drivers/scsi/sata_svw.c:116: warning: passing arg 2 of `eeh_writew' makes pointer from integer without a cast
drivers/scsi/sata_svw.c:117: warning: passing arg 2 of `eeh_writew' makes pointer from integer without a cast
And these:
drivers/pci/probe.c: In function `pci_read_bases':
drivers/pci/probe.c:168: warning: large integer implicitly truncated to unsigned type 
drivers/pci/probe.c:218: warning: large integer implicitly truncated to unsigned type
And these:
drivers/char/drm/drm_bufs.c: In function `drm_addmap_ioctl':
drivers/char/drm/drm_bufs.c:309: warning: cast to pointer from integer of different size
drivers/char/drm/drm_bufs.c:309: warning: cast to pointer from integer of different size
drivers/char/drm/drm_bufs.c:309: warning: cast to pointer from integer of different size
> The only user of inter_module_xxx is CONFIG_MTD -- thus the deprecated 
> warning is useless to 90% of us, who will never use MTD.
Suggest we either undeprecate it, or remove the darn functions.
And in future, only deprecate functions after all callers have been
removed.
>  As for pm_register(), there are tons of users remaining.
Well it would kinda help if people knew what to _do_ about pm_register(). 
Documentation/pm.txt cheerfully tells everyone how to use it in new code
and the comment over the pm_register() implementation doesn't say that it's
deprecated and doesn't tell people what to replace it with.
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/