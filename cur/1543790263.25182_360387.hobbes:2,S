Date: Wed, 26 Oct 2005 09:15:34 +0200
From: Dave Hansen <>
Subject: Re: [PATCH 3/5] Swap Migration V4: migrate_pages() function
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/10/26/19

On Tue, 2005-10-25 at 12:30 -0700, Christoph Lameter wrote:
> 
> +#ifdef CONFIG_SWAP
> +       if (PageSwapCache(page)) {
> +               swp_entry_t swap = { .val = page_private(page) };
> +               add_to_swapped_list(swap.val);
> +               __delete_from_swap_cache(page);
> +               write_unlock_irq(&mapping->tree_lock);
> +               swap_free(swap);
> +               __put_page(page);       /* The pagecache ref */
> +               return 1;
> +       }
> +#endif /* CONFIG_SWAP */
Why is this #ifdef needed?  PageSwapCache() is #defined to 0 when !
CONFIG_SWAP.
-- Dave
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  
http://vger.kernel.org/majordomo-info.html
Please read the FAQ at  
http://www.tux.org/lkml/