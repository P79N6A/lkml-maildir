Date: Sat, 30 Apr 2005 17:44:13 +0200
From: Brice Goglin <>
Subject: Re: 2.6.12-rc3-mm1
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2005/4/30/70

Hi,
I posted this patch to fix this error (asm/apic.h must be included).
Regards,
Brice
Zwane Mwaikambo a écrit :
> On Sat, 30 Apr 2005, Coywolf Qi Hunt wrote:
> 
> 
>>  CC      arch/i386/kernel/cpu/amd.o
>>  CC      arch/i386/kernel/cpu/cyrix.o
>>  CC      arch/i386/kernel/cpu/intel_cacheinfo.o
>>  CC      arch/i386/kernel/cpu/mcheck/init.o
>>  CC      arch/i386/kernel/cpu/mcheck/mce.o
>>  CC      arch/i386/kernel/cpu/mcheck/p5.o
>>  CC      arch/i386/kernel/cpu/mcheck/winchip.o
>>  CC      arch/i386/kernel/cpu/mcheck/mce_intel.o
>>/home/coywolf/2.6.12-rc3-mm1-cy/arch/i386/kernel/cpu/mcheck/mce_intel.c:
>>In function `smp_thermal_interrupt':
>>/home/coywolf/2.6.12-rc3-mm1-cy/arch/i386/kernel/cpu/mcheck/mce_intel.c:25:
>>warning: implicit declaration of function `ack_APIC_irq'
>>/home/coywolf/2.6.12-rc3-mm1-cy/arch/i386/kernel/cpu/mcheck/mce_intel.c:
>>In function `intel_init_thermal':
>>/home/coywolf/2.6.12-rc3-mm1-cy/arch/i386/kernel/cpu/mcheck/mce_intel.c:67:
>>warning: implicit declaration of function `apic_read'
>>/home/coywolf/2.6.12-rc3-mm1-cy/arch/i386/kernel/cpu/mcheck/mce_intel.c:67:
>>error: `APIC_LVTTHMR' undeclared (first use in this function)
>>/home/coywolf/2.6.12-rc3-mm1-cy/arch/i386/kernel/cpu/mcheck/mce_intel.c:67:
>>error: (Each undeclared identifie r is reported only once
>>/home/coywolf/2.6.12-rc3-mm1-cy/arch/i386/kernel/cpu/mcheck/mce_intel.c:67:
>>error: for each function it appea rs in.)
>>/home/coywolf/2.6.12-rc3-mm1-cy/arch/i386/kernel/cpu/mcheck/mce_intel.c:68:
>>error: `APIC_DM_SMI' undeclared ( first use in this function)
>>/home/coywolf/2.6.12-rc3-mm1-cy/arch/i386/kernel/cpu/mcheck/mce_intel.c:77:
>>error: `APIC_VECTOR_MASK' undecla red (first use in this function)
>>/home/coywolf/2.6.12-rc3-mm1-cy/arch/i386/kernel/cpu/mcheck/mce_intel.c:85:
>>error: `APIC_DM_FIXED' undeclared  (first use in this function)
>>/home/coywolf/2.6.12-rc3-mm1-cy/arch/i386/kernel/cpu/mcheck/mce_intel.c:85:
>>error: `APIC_LVT_MASKED' undeclar ed (first use in this function)
>>/home/coywolf/2.6.12-rc3-mm1-cy/arch/i386/kernel/cpu/mcheck/mce_intel.c:86:
>>warning: implicit declaration of function `apic_write_around'
>>make[4]: *** [arch/i386/kernel/cpu/mcheck/mce_intel.o] Error 1
>>make[3]: *** [arch/i386/kernel/cpu/mcheck] Error 2
>>make[2]: *** [arch/i386/kernel/cpu] Error 2
>>make[1]: *** [arch/i386/kernel] Error 2
>>make: *** [_all] Error 2
> 
> 
> Could you send your .config please?
> 
> Thanks,
> 	Zwane
-- 
Brice Goglin
================================================
Etudiant en These                     Bureau 343
Laboratoire de l'Informatique et du Parallélisme
UMR CNRS-INRIA-ENS Lyon 5668
46, allée d'Italie 69364 Lyon Cedex 07
Tél 04 72 72 87 59            Fax 04 72 72 80 80
Ph.D Student
Laboratoire de l'Informatique et du Parallélisme
CNRS-ENS Lyon-INRIA-UCB Lyon
France
--- linux-mm/arch/i386/kernel/cpu/mcheck/mce_intel.c.old	2005-04-30 11:36:56.000000000 +0200
+++ linux-mm/arch/i386/kernel/cpu/mcheck/mce_intel.c	2005-04-30 11:36:19.000000000 +0200
@@ -9,6 +9,7 @@
 #include <asm/processor.h>
 #include <asm/msr.h>
 #include <asm/hw_irq.h>
+#include <asm/apic.h>
 #include "mce.h"
 
 static DEFINE_PER_CPU(unsigned long, next_check);