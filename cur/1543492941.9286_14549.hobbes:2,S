Date: 15 Apr 1999 08:39:30 +0200
From: Christoph Lorenz <>
Subject: Strange SCSI resets in 2.2.5 (with long reports)
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/1999/4/15/82

Hi,
yesterday, it was the second time, that I got a SCSI reset, while I was
burning a BASF (manuf. by emedias) CD in 4x speed. 
What's so strange is, that I never before had SCSI resets, and that the
first SCSI reset, I got a few days before, also happened, when I was
burning a BASF CD in 4x speed. In between these about 10 days, I was burning
quite a number of other (Princo and Maxell) CDs, also in 4x speed and had
no (zero) problems.
My configuration:
- Asus P2B-S with Adaptec 2940 U2W onboard
- IBM DCAS 34300
- Yamaha CRW 4416S (SCSI ID 3)
- Kernel 2.2.5
SCSI cabelling and termination is definitely OK.
Maybe the attached syslog parts can help anyone here.
Ciao
  Christoph
-- /var/adm/messages --
Apr 14 20:34:37 garfield kernel: (scsi0:0:0:0) Aborting scb 11, flags 0x4
Apr 14 20:34:37 garfield kernel: (scsi0:0:0:0:tag11) matches search criteria (scsi0:0:0:0:tag11)
Apr 14 20:34:37 garfield kernel: (scsi0:0:0:0) SCB found in QINFIFO and aborted.
Apr 14 20:34:37 garfield kernel: (scsi0:0:0:0) Aborting scb 11
Apr 14 20:34:37 garfield kernel: (scsi0:-1:-1:-1) 1 commands found and queued for completion.
Apr 14 20:34:37 garfield kernel: (scsi0:0:0:0) Aborting scb 11, flags 0x4
Apr 14 20:34:37 garfield kernel: (scsi0:0:0:0:tag11) matches search criteria (scsi0:0:0:0:tag11)
Apr 14 20:34:37 garfield kernel: (scsi0:0:0:0) SCB found in QINFIFO and aborted.
Apr 14 20:34:37 garfield kernel: (scsi0:0:0:0) Aborting scb 11
Apr 14 20:34:37 garfield kernel: (scsi0:-1:-1:-1) 1 commands found and queued for completion.
Apr 14 20:34:37 garfield kernel: (scsi0:0:0:0) Aborting scb 12, flags 0x4
Apr 14 20:34:37 garfield kernel: (scsi0:0:0:0:tag12) matches search criteria (scsi0:0:0:0:tag12)
Apr 14 20:34:37 garfield kernel: (scsi0:0:0:0) SCB found in QINFIFO and aborted.
Apr 14 20:34:37 garfield kernel: (scsi0:0:0:0) Aborting scb 12
Apr 14 20:34:37 garfield kernel: (scsi0:-1:-1:-1) 1 commands found and queued for completion.
Apr 14 20:34:37 garfield kernel: (scsi0:0:3:0) Aborting scb 14, flags 0x4
Apr 14 20:34:37 garfield kernel: (scsi0:0:3:0) SCB is currently active.  Waiting on completion.
Apr 14 20:34:37 garfield kernel: (scsi0:0:3:0) Reset called, scb 14, flags 0x84
Apr 14 20:34:37 garfield kernel: (scsi0:0:3:0) Bus device reset stupid when other action has failed.
Apr 14 20:34:37 garfield kernel: (scsi0:0:-1:-1) Reset channel called, will initiate reset.
Apr 14 20:34:37 garfield kernel: (scsi0:0:-1:-1) Resetting currently active channel.
Apr 14 20:34:37 garfield kernel: (scsi0:0:-1:-1) Channel reset
Apr 14 20:34:37 garfield kernel: (scsi0:0:-1:-1) Reset device, active_scb 1
Apr 14 20:34:37 garfield kernel: (scsi0:0:0:-1) Cleaning up status information and delayed_scbs.
Apr 14 20:34:37 garfield kernel: (scsi0:0:0:0:tag12) matches search criteria (scsi0:0:-1:-1:tag255)
Apr 14 20:34:37 garfield kernel: (scsi0:0:1:-1) Cleaning up status information and delayed_scbs.
Apr 14 20:34:37 garfield kernel: (scsi0:0:2:-1) Cleaning up status information and delayed_scbs.
[...]
Apr 14 20:34:37 garfield kernel: (scsi0:0:15:-1) Cleaning up status information and delayed_scbs.
Apr 14 20:34:37 garfield kernel: (scsi0:0:-1:-1) Cleaning QINFIFO.
Apr 14 20:34:37 garfield kernel: (scsi0:0:0:0:tag11) matches search criteria (scsi0:0:-1:-1:tag255)
Apr 14 20:34:37 garfield kernel: (scsi0:0:-1:-1) Cleaning waiting_scbs.
Apr 14 20:34:37 garfield kernel: (scsi0:0:-1:-1) Cleaning waiting for selection list.
Apr 14 20:34:37 garfield kernel: (scsi0:0:-1:-1) Cleaning disconnected scbs list.
Apr 14 20:34:37 garfield kernel: (scsi0:0:3:0:tag14) matches search criteria (scsi0:0:-1:-1:tag255)
Apr 14 20:34:37 garfield kernel: (scsi0:0:3:0:tag14) matches search criteria (scsi0:0:-1:-1:tag255)
Apr 14 20:34:37 garfield kernel: (scsi0:0:0:0) Aborting scb 11
Apr 14 20:34:37 garfield kernel: (scsi0:0:0:0) Aborting scb 12
Apr 14 20:34:37 garfield kernel: (scsi0:0:3:0) Aborting scb 14
Apr 14 20:34:37 garfield kernel: (scsi0:-1:-1:-1) 3 commands found and queued for completion.
Apr 14 20:34:37 garfield kernel: (scsi0:0:0:0) Synchronous at 20.0 Mbyte/sec, offset 15.
Apr 14 20:50:14 garfield kernel: (scsi0:0:0:0:tag11) matches search criteria (scsi0:0:0:0:tag11)
Apr 14 20:50:14 garfield kernel: (scsi0:0:0:0) SCB found in QINFIFO and aborted.
Apr 14 20:50:14 garfield kernel: (scsi0:0:0:0) Aborting scb 11
Apr 14 20:50:14 garfield kernel: (scsi0:-1:-1:-1) 1 commands found and queued for completion.
Apr 14 20:50:14 garfield kernel: (scsi0:0:0:0) Aborting scb 11, flags 0x4
Apr 14 20:50:14 garfield kernel: (scsi0:0:0:0:tag11) matches search criteria (scsi0:0:0:0:tag11)
Apr 14 20:50:14 garfield kernel: (scsi0:0:0:0) SCB found in QINFIFO and aborted.
Apr 14 20:50:14 garfield kernel: (scsi0:0:0:0) Aborting scb 11
Apr 14 20:50:14 garfield kernel: (scsi0:-1:-1:-1) 1 commands found and queued for completion.
Apr 14 20:50:14 garfield kernel: (scsi0:0:0:0) Aborting scb 12, flags 0x4
Apr 14 20:50:14 garfield kernel: (scsi0:0:0:0:tag12) matches search criteria (scsi0:0:0:0:tag12)
Apr 14 20:50:14 garfield kernel: (scsi0:0:0:0) SCB found in QINFIFO and aborted.
Apr 14 20:50:14 garfield kernel: (scsi0:0:0:0) Aborting scb 12
Apr 14 20:50:14 garfield kernel: (scsi0:-1:-1:-1) 1 commands found and queued for completion.
Apr 14 20:50:14 garfield kernel: (scsi0:0:3:0) Aborting scb 14, flags 0x4
Apr 14 20:50:14 garfield kernel: (scsi0:0:3:0) SCB is currently active.  Waiting on completion.
Apr 14 20:50:14 garfield kernel: (scsi0:0:3:0) Reset called, scb 14, flags 0x84
Apr 14 20:50:14 garfield kernel: (scsi0:0:3:0) Bus device reset stupid when other action has failed.
Apr 14 20:50:14 garfield kernel: (scsi0:0:-1:-1) Reset channel called, will initiate reset.
Apr 14 20:50:14 garfield kernel: (scsi0:0:-1:-1) Resetting currently active channel.
Apr 14 20:50:14 garfield kernel: (scsi0:0:-1:-1) Channel reset
Apr 14 20:50:14 garfield kernel: (scsi0:0:-1:-1) Reset device, active_scb 1
Apr 14 20:50:14 garfield kernel: (scsi0:0:0:-1) Cleaning up status information and delayed_scbs.
Apr 14 20:50:14 garfield kernel: (scsi0:0:0:0:tag12) matches search criteria (scsi0:0:-1:-1:tag255)
Apr 14 20:50:14 garfield kernel: (scsi0:0:1:-1) Cleaning up status information and delayed_scbs.
[...]
Apr 14 20:50:14 garfield kernel: (scsi0:0:15:-1) Cleaning up status information and delayed_scbs.
Apr 14 20:50:14 garfield kernel: (scsi0:0:-1:-1) Cleaning QINFIFO.
Apr 14 20:50:14 garfield kernel: (scsi0:0:0:0:tag11) matches search criteria (scsi0:0:-1:-1:tag255)
Apr 14 20:50:14 garfield kernel: (scsi0:0:-1:-1) Cleaning waiting_scbs.
Apr 14 20:50:14 garfield kernel: (scsi0:0:-1:-1) Cleaning waiting for selection list.
Apr 14 20:50:14 garfield kernel: (scsi0:0:-1:-1) Cleaning disconnected scbs list.
Apr 14 20:50:14 garfield kernel: (scsi0:0:3:0:tag14) matches search criteria (scsi0:0:-1:-1:tag255)
Apr 14 20:50:14 garfield kernel: (scsi0:0:3:0:tag14) matches search criteria (scsi0:0:-1:-1:tag255)
Apr 14 20:50:14 garfield kernel: (scsi0:0:0:0) Aborting scb 11
Apr 14 20:50:14 garfield kernel: (scsi0:0:0:0) Aborting scb 12
Apr 14 20:50:14 garfield kernel: (scsi0:0:3:0) Aborting scb 14
Apr 14 20:50:14 garfield kernel: (scsi0:-1:-1:-1) 3 commands found and queued for completion.
Apr 14 20:50:14 garfield kernel: (scsi0:0:0:0) Synchronous at 20.0 Mbyte/sec, offset 15.
[... Rest snipped, nothing new in it]
-- /var/adm/syslog --
Apr 14 20:34:37 garfield kernel: scsi : aborting command due to timeout : pid 187727, scsi0, channel 0, id 0, lun 0 Write (6) 0a 4b ac 04 00 
Apr 14 20:34:37 garfield kernel: scsi : aborting command due to timeout : pid 187727, scsi0, channel 0, id 0, lun 0 Write (6) 0a 4b ac 04 00 
Apr 14 20:34:37 garfield kernel: scsi : aborting command due to timeout : pid 187728, scsi0, channel 0, id 0, lun 0 Write (6) 0b 8b f2 02 00 
Apr 14 20:34:37 garfield kernel: scsi : aborting command due to timeout : pid 187726, scsi0, channel 0, id 3, lun 0 Write (10) 00 00 01 cd df 00 00 0d 00 
Apr 14 20:34:37 garfield kernel: SCSI host 0 abort (pid 187726) timed out - resetting
Apr 14 20:34:37 garfield kernel: SCSI bus is being reset for host 0 channel 0.
Apr 14 20:50:14 garfield kernel: sr0: CDROM (ioctl) error, command: Test Unit Ready 00 00 00 00 00 
Apr 14 20:50:14 garfield kernel: sr15:01: old sense key None
Apr 14 20:50:14 garfield kernel: Non-extended sense class 0 code 0x0 b 11, flags 0x4
Apr 14 20:50:14 garfield kernel: scsi : aborting command due to timeout : pid 187727, scsi0, channel 0, id 0, lun 0 Write (6) 0a 4b ac 04 00 
Apr 14 20:50:14 garfield kernel: scsi : aborting command due to timeout : pid 187728, scsi0, channel 0, id 0, lun 0 Write (6) 0b 8b f2 02 00 
Apr 14 20:50:14 garfield kernel: scsi : aborting command due to timeout : pid 187726, scsi0, channel 0, id 3, lun 0 Write (10) 00 00 01 cd df 00 00 0d 00 
Apr 14 20:50:14 garfield kernel: SCSI host 0 abort (pid 187726) timed out - resetting
Apr 14 20:50:14 garfield kernel: SCSI bus is being reset for host 0 channel 0.
Apr 14 20:50:16 garfield kernel: SCSI bus is being reset for host 0 channel 0.
Apr 14 20:50:18 garfield kernel: sr0: CDROM (ioctl) error, command: Start/Stop Unit 00 00 00 03 00 
Apr 14 20:50:18 garfield kernel: sr15:01: old sense key None
Apr 14 20:50:18 garfield kernel: Non-extended sense class 0 code 0x0 <6>cdrom: open failed.
Apr 14 20:50:20 garfield kernel: scsi0 channel 0 : resetting for second half of retries.
Apr 14 20:50:20 garfield kernel: SCSI bus is being reset for host 0 channel 0.
Apr 14 20:50:23 garfield kernel: SCSI error: host 0 id 3 lun 0 return code = 26030000
Apr 14 20:50:23 garfield kernel: ^ISense class 0, sense error 0, extended sense 0
Apr 14 20:50:23 garfield kernel: SCSI error: host 0 id 3 lun 0 return code = 26030000
Apr 14 20:50:23 garfield kernel: ^ISense class 0, sense error 0, extended sense 0
-- 
** 5 years online on 
http://ourworld.compuserve.com/homepages/ChLorenz/
  **
 ** No Spam ! ** No Adverts ! ** No Junk-Mails ! ** No unwanted Mails ! **
        ** Stop Paying Microsoft's Bill - Get Linux For FREE **
-
To unsubscribe from this list: send the line "unsubscribe linux-kernel" in
the body of a message to majordomo@vger.rutgers.edu
Please read the FAQ at 
http://www.tux.org/lkml/