Date: Mon, 18 Oct 2004 05:36:30 -0400
From: Jim Nelson <>
Subject: Patch to drivers/video/Kconfig [1 of 4]
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org
X-Lkml-Link: https://lkml.org/lkml/2004/10/18/23

Fixes undefined symbol references when running "make config" for systems
that have PCI but not AGP (sparc, sparc64)
Apply against 2.6.9-rc4.
diff -u drivers/video/Kconfig.orig drivers/video/Kconfig
--- drivers/video/Kconfig.orig	2004-10-16 11:58:32.738491881 -0400
+++ drivers/video/Kconfig	2004-10-16 12:51:57.221487678 -0400
@@ -460,11 +460,12 @@
 	  of debugging informations to provide to the maintainer when
 	  something goes wrong.
 
+comment "Enable AGP and AGP_INTEL for Intel 810/815 support (EXPERIMENTAL)."
+	depends on FB && EXPERIMENTAL && X86 && !X86_64 && PCI &&!(AGP && AGP_INTEL)
+
 config FB_I810
 	tristate "Intel 810/815 support (EXPERIMENTAL)"
-	depends on FB && EXPERIMENTAL && PCI && X86 && !X86_64
-	select AGP
-	select AGP_INTEL
+	depends on FB && EXPERIMENTAL && AGP && AGP_INTEL && X86 && !X86_64
 	select FB_MODE_HELPERS
 	help
 	  This driver supports the on-board graphics built in to the Intel 810 